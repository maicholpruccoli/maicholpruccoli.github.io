"use strict";(self.webpackChunkwelcome_sbm=self.webpackChunkwelcome_sbm||[]).push([[317],{29735:(wt,j,_)=>{_.d(j,{h:()=>w});var t=_(61699),O=_(64710),R=_(30724),f=_(26575),y=_(28849),c=_(64352),X=_(60166);const B=function(Z){return{border:Z}};class w{constructor(){this.valueChange=new t.vpe,this.colorChanged=new t.vpe}ngAfterViewInit(){this.colorPickerDirective&&(this.colorPickerDirective.cpPosition="bottom",this.colorPickerDirective.cpUseRootViewContainer=!0,this.options&&(this.options.width&&(this.colorPickerDirective.cpWidth=this.options.width),this.options.height&&(this.colorPickerDirective.cpHeight=this.options.height),this.options.dialogDisplay&&(this.colorPickerDirective.cpDialogDisplay=this.options.dialogDisplay),this.options.position&&(this.colorPickerDirective.cpPosition=this.options.position),this.options.positionOffset&&(this.colorPickerDirective.cpPositionOffset=this.options.positionOffset),this.options.positionRelativeToArrow&&(this.colorPickerDirective.cpPositionRelativeToArrow=this.options.positionRelativeToArrow),null!=this.options.useRootViewContainer&&(this.colorPickerDirective.cpUseRootViewContainer=this.options.useRootViewContainer)))}}w.\u0275fac=function(b){return new(b||w)},w.\u0275cmp=t.Xpm({type:w,selectors:[["app-color-picker"]],viewQuery:function(b,P){if(1&b&&t.Gf(O.Kk,5),2&b){let K;t.iGM(K=t.CRH())&&(P.colorPickerDirective=K.first)}},inputs:{options:"options",value:"value",placeholder:"placeholder"},outputs:{valueChange:"valueChange",colorChanged:"colorChanged"},decls:2,vars:8,consts:[[1,"w-100"],["autocompleteOff","","matInput","","readonly","",3,"colorPicker","ngModel","ngClass","placeholder","colorPickerChange","cpSliderDragEnd","ngModelChange"]],template:function(b,P){1&b&&(t.TgZ(0,"mat-form-field",0)(1,"input",1),t.NdJ("colorPickerChange",function($){return P.value=$})("colorPickerChange",function(){return P.valueChange.emit(P.value)})("cpSliderDragEnd",function(){return P.colorChanged.emit()})("ngModelChange",function($){return P.value=$}),t.qZA()()),2&b&&(t.xp6(1),t.Udp("background",P.value),t.Q6J("colorPicker",P.value)("ngModel",P.value)("ngClass",t.VKq(6,B,!!P.value))("placeholder",P.placeholder))},dependencies:[R.X,f.mk,y.Fj,y.JJ,y.On,c.v_,X.k0,O.Kk],styles:["input[_ngcontent-%COMP%]{box-sizing:border-box!important;border-radius:10px!important;color:transparent!important;-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;cursor:pointer!important}input[_ngcontent-%COMP%]::selection{background:transparent!important}input[_ngcontent-%COMP%]::-moz-selection{background:transparent!important}"]})},32836:(wt,j,_)=>{_.d(j,{P:()=>c});var t=_(61699),O=_(14090),R=_(2353),f=_(28849),y=_(16070);class c extends O.H{set text(B){if(this._text=B,this._text){let w=this.utility.extractTagsFromHtml(this._text,["style","link"]);w.length>0&&(this._text=this.utility.removeTagsFromHtml(this._text,["style","link"]),setTimeout(()=>{this.textChange.emit(this._text),this.onHeadRemove.emit(w.join())},200))}}getEditorConfig(){let B=this.height;return this.showToolbar&&!this.disabled&&!this.editorFocused&&(B+=42),{editable:!this.disabled,spellcheck:!0,height:B+"px",minHeight:B+"px",maxHeight:B+"px",width:"100%",minWidth:"100%",translate:"yes",enableToolbar:this.showToolbar&&!this.disabled&&this.editorFocused,showToolbar:this.showToolbar&&!this.disabled&&this.editorFocused,placeholder:"",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:null,uploadUrl:"",uploadWithCredentials:!1,sanitize:!1,outline:!1,toolbarPosition:"top",toolbarHiddenButtons:[["undo","redo"],["insertImage","insertVideo","removeFormat","customClasses"]]}}constructor(B){super(),this.utility=B,this.height=200,this.showToolbar=!0,this.disabled=!1,this.onBlur=new t.vpe,this.textChange=new t.vpe,this.onHeadRemove=new t.vpe,this.editorFocused=!1}}c.\u0275fac=function(B){return new(B||c)(t.Y36(R.t))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-editor"]],inputs:{text:"text",id:"id",height:"height",showToolbar:"showToolbar",disabled:"disabled"},outputs:{onBlur:"onBlur",textChange:"textChange",onHeadRemove:"onHeadRemove"},features:[t.qOj],decls:1,vars:3,consts:[[3,"id","config","ngModel","ngModelChange","focus","blur"]],template:function(B,w){1&B&&(t.TgZ(0,"angular-editor",0),t.NdJ("ngModelChange",function(b){return w._text=b})("ngModelChange",function(){return w.textChange.emit(w._text)})("focus",function(){return w.editorFocused=!0})("blur",function(){return w.editorFocused=!1,w.onBlur.emit()}),t.qZA()),2&B&&t.Q6J("id",w.id)("config",w.getEditorConfig())("ngModel",w._text)},dependencies:[f.JJ,f.On,y.s6]})},86427:(wt,j,_)=>{_.d(j,{t:()=>J});var t=_(20373),R=_(14090),f=_(61699),y=_(30724),c=_(26575),X=_(78654),B=_(44769),w=_(5939);function Z(F,x){if(1&F&&(f.TgZ(0,"div",12),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&F){const A=f.oxw();f.xp6(1),f.hij(" ",f.lcZ(2,1,A.title),"\n")}}function b(F,x){if(1&F&&f._UZ(0,"img",13),2&F){const A=f.oxw();f.Q6J("src",A.url?A.url:A.base64,f.LSH)}}function P(F,x){1&F&&f._UZ(0,"img",14)}function K(F,x){if(1&F&&(f.TgZ(0,"div",7),f._uU(1),f.qZA()),2&F){const A=f.oxw();f.xp6(1),f.hij(" ",A.url,"\n")}}function $(F,x){if(1&F){const A=f.EpF();f.TgZ(0,"button",15),f.NdJ("click",function(){f.CHM(A);const U=f.oxw();return f.KtG(U.delete())}),f._uU(1),f.ALo(2,"translate"),f.qZA()}2&F&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"globals.elimina")))}const ht=function(F){return{"button-blue":F}};class J extends R.H{set _url(x){this.url=x,this.url?this.deleteButtonEnabled=!0:this.deleteButtonEnabled=!1}constructor(){super(),this.maximumFileSize=0,this.deleteButtonEnabled=!0}fileSelected(x){let A=null==x.files||0==x.files.length?null:x.files[0];if(null!=A&&A.type&&A.type.startsWith("image/"))if(this.maximumFileSize<=0||A.size<=this.maximumFileSize){const I=new FileReader;I.readAsDataURL(A),I.onload=()=>{let U=I.result.toString();U?t.fromBuffer(Uint8Array.from(atob(U.slice(U.indexOf(",")+1)),q=>q.charCodeAt(0)),(q,T)=>{!q&&null!=T&&T.mime&&T.mime.startsWith("image/")?(this.url=null,this.base64=U):(x.value="",this.showError("globals.messages.fileNonValido"))}):(x.value="",this.showError("globals.messages.fileNonValido"))}}else x.value="",this.showError("globals.messages.fileTroppoGrande",{size:Math.floor(this.maximumFileSize/1e3)});else x.value="",this.showError("globals.messages.fileNonValido")}delete(){this.showDialogConfirm("globals.eliminareImmagine").then(x=>{this.dialogRef.close("")},x=>{})}}J.\u0275fac=function(x){return new(x||J)},J.\u0275cmp=f.Xpm({type:J,selectors:[["app-image-edit"]],inputs:{_url:"_url",maximumFileSize:"maximumFileSize",title:"title",dialogRef:"dialogRef",blue:"blue"},features:[f.qOj],decls:16,vars:13,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","mb-2 text-center font-weight-bold",4,"ngIf"],[1,"imageRow","text-center"],["class","rounded",3,"src",4,"ngIf"],["class","rounded","src","assets/images/sbm/no-image.png",4,"ngIf"],["class","mt-3 text-center",4,"ngIf"],[1,"mt-3","text-center"],["autocompleteOff","","type","file","accept","image/png, image/jpeg",3,"change"],["fileInput",""],["mat-flat-button","",3,"color","ngClass","click"],["mat-flat-button","","color","blank","class","ml-1",3,"click",4,"ngIf"],[1,"mb-2","text-center","font-weight-bold"],[1,"rounded",3,"src"],["src","assets/images/sbm/no-image.png",1,"rounded"],["mat-flat-button","","color","blank",1,"ml-1",3,"click"]],template:function(x,A){if(1&x){const I=f.EpF();f.TgZ(0,"button",0)(1,"i",1),f._uU(2,"clear"),f.qZA()(),f.YNc(3,Z,3,3,"div",2),f.TgZ(4,"div",3),f.YNc(5,b,1,1,"img",4),f.YNc(6,P,1,0,"img",5),f.qZA(),f.YNc(7,K,2,1,"div",6),f.TgZ(8,"div",7)(9,"input",8,9),f.NdJ("change",function(){f.CHM(I);const q=f.MAs(10);return f.KtG(A.fileSelected(q))}),f.qZA()(),f.TgZ(11,"div",7)(12,"button",10),f.NdJ("click",function(){return A.dialogRef.close(A.base64?A.base64.substring(A.base64.indexOf(",")+1):A.base64)}),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.YNc(15,$,3,3,"button",11),f.qZA()}2&x&&(f.Q6J("disableRipple",!0),f.xp6(3),f.Q6J("ngIf",!!A.title),f.xp6(2),f.Q6J("ngIf",!!A.url||!!A.base64),f.xp6(1),f.Q6J("ngIf",!A.url&&!A.base64),f.xp6(1),f.Q6J("ngIf",!!A.url),f.xp6(5),f.Q6J("color",A.blue?null:"primary")("ngClass",f.VKq(11,ht,A.blue)),f.xp6(1),f.Oqu(f.lcZ(14,9,"globals.salva")),f.xp6(2),f.Q6J("ngIf",A.deleteButtonEnabled))},dependencies:[y.X,c.mk,c.O5,X.eB,B.aO,w.X$],styles:[".imageRow[_ngcontent-%COMP%]{height:180px!important;max-height:180px!important}img[_ngcontent-%COMP%]{max-height:180px!important;max-width:100%!important}"]})},31534:(wt,j,_)=>{_.d(j,{c:()=>F});var t=_(61699),O=_(26575),R=_(78654),f=_(57665),y=_(5939);function c(x,A){if(1&x&&(t.TgZ(0,"mat-card-title",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&x){const I=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,I.title)," ")}}function X(x,A){1&x&&t.GkF(0)}function B(x,A){if(1&x&&(t.TgZ(0,"mat-card",3),t.YNc(1,c,3,3,"mat-card-title",4),t.YNc(2,X,1,0,"ng-container",5),t.qZA()),2&x){const I=t.oxw(),U=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!!I.title),t.xp6(1),t.Q6J("ngTemplateOutlet",U)}}function w(x,A){if(1&x&&(t.TgZ(0,"div",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&x){const I=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,I.title))}}function Z(x,A){1&x&&t.GkF(0)}function b(x,A){if(1&x&&(t.ynx(0),t.YNc(1,w,3,3,"div",7),t.YNc(2,Z,1,0,"ng-container",5),t.BQk()),2&x){const I=t.oxw(),U=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!!I.title),t.xp6(1),t.Q6J("ngTemplateOutlet",U)}}function P(x,A){if(1&x){const I=t.EpF();t.TgZ(0,"img",14),t.NdJ("click",function(){t.CHM(I);const q=t.oxw(2);return t.KtG(q.edit.emit())}),t.qZA()}if(2&x){const I=t.oxw(2);t.Q6J("src",I.url,t.LSH)}}function K(x,A){if(1&x){const I=t.EpF();t.TgZ(0,"img",15),t.NdJ("click",function(){t.CHM(I);const q=t.oxw(2);return t.KtG(q.edit.emit())}),t.qZA()}}const $=function(x){return{"button-blue":x}};function ht(x,A){if(1&x){const I=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(I);const q=t.oxw(2);return t.KtG(q.delete.emit())}),t.TgZ(1,"i",17),t._uU(2,"delete"),t.qZA()()}if(2&x){const I=t.oxw(2);t.Q6J("color",I.blue?null:"primary")("ngClass",t.VKq(2,$,I.blue))}}function J(x,A){if(1&x&&(t.TgZ(0,"div",9)(1,"div",10),t.YNc(2,P,1,1,"img",11),t.YNc(3,K,1,0,"img",12),t.qZA(),t.YNc(4,ht,3,4,"button",13),t.qZA()),2&x){const I=t.oxw();t.xp6(2),t.Q6J("ngIf",!!I.url),t.xp6(1),t.Q6J("ngIf",!I.url),t.xp6(1),t.Q6J("ngIf",I.deleteAlwaysVisible||!!I.url)}}class F{constructor(){this.container=!0,this.deleteAlwaysVisible=!1,this.blue=!1,this.edit=new t.vpe,this.delete=new t.vpe}}F.\u0275fac=function(A){return new(A||F)},F.\u0275cmp=t.Xpm({type:F,selectors:[["app-image"]],inputs:{title:"title",url:"url",container:"container",deleteAlwaysVisible:"deleteAlwaysVisible",blue:"blue"},outputs:{edit:"edit",delete:"delete"},decls:4,vars:2,consts:[["class","border mat-elevation-z0",4,"ngIf"],[4,"ngIf"],["image",""],[1,"border","mat-elevation-z0"],["class","text-center",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"text-center"],["class","text-center font-weight-bold mb-3",4,"ngIf"],[1,"text-center","font-weight-bold","mb-3"],[1,"imageRow"],[1,"imageHeight"],["class","rounded",3,"src","click",4,"ngIf"],["class","rounded","src","assets/images/sbm/no-image.png",3,"click",4,"ngIf"],["mat-icon-button","","class","delete-button",3,"color","ngClass","click",4,"ngIf"],[1,"rounded",3,"src","click"],["src","assets/images/sbm/no-image.png",1,"rounded",3,"click"],["mat-icon-button","",1,"delete-button",3,"color","ngClass","click"],[1,"material-icons","delete-icon"]],template:function(A,I){1&A&&(t.YNc(0,B,3,2,"mat-card",0),t.YNc(1,b,3,2,"ng-container",1),t.YNc(2,J,5,3,"ng-template",null,2,t.W1O)),2&A&&(t.Q6J("ngIf",I.container),t.xp6(1),t.Q6J("ngIf",!I.container))},dependencies:[O.mk,O.O5,O.tP,R.eB,f.S$,f.mi,y.X$],styles:[".imageHeight[_ngcontent-%COMP%]{max-height:200px!important;text-align:center;width:100%}.imageRow[_ngcontent-%COMP%]{height:200px!important;display:flex;align-items:center;position:relative}img[_ngcontent-%COMP%]{max-height:200px!important;max-width:100%!important}.delete-icon[_ngcontent-%COMP%]{height:30px!important;width:30px!important;font-size:30px!important;line-height:30px!important}.delete-button[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:20px;height:30px!important;width:30px!important;line-height:30px!important}mat-card[_ngcontent-%COMP%]{border:1px solid lightgrey}mat-card-title[_ngcontent-%COMP%]{font-weight:400;font-size:18px}"]})},63942:(wt,j,_)=>{_.d(j,{G:()=>yt});var t=_(61699),O=_(99531);function R(p){return"string"==typeof p||p instanceof String}function f(p){var e;return"object"==typeof p&&null!=p&&"Object"===(null==p||null==(e=p.constructor)?void 0:e.name)}function y(p,e){return Array.isArray(e)?y(p,(i,a)=>e.includes(a)):Object.entries(p).reduce((i,a)=>{let[o,l]=a;return e(l,o)&&(i[o]=l),i},{})}const c_NONE="NONE",c_LEFT="LEFT",c_FORCE_LEFT="FORCE_LEFT",c_RIGHT="RIGHT",c_FORCE_RIGHT="FORCE_RIGHT";function B(p){return p.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function w(p,e){if(e===p)return!0;const i=Array.isArray(e),a=Array.isArray(p);let o;if(i&&a){if(e.length!=p.length)return!1;for(o=0;o<e.length;o++)if(!w(e[o],p[o]))return!1;return!0}if(i!=a)return!1;if(e&&p&&"object"==typeof e&&"object"==typeof p){const l=e instanceof Date,m=p instanceof Date;if(l&&m)return e.getTime()==p.getTime();if(l!=m)return!1;const C=e instanceof RegExp,v=p instanceof RegExp;if(C&&v)return e.toString()==p.toString();if(C!=v)return!1;const E=Object.keys(e);for(o=0;o<E.length;o++)if(!Object.prototype.hasOwnProperty.call(p,E[o]))return!1;for(o=0;o<E.length;o++)if(!w(p[E[o]],e[E[o]]))return!1;return!0}return!(!e||!p||"function"!=typeof e||"function"!=typeof p)&&e.toString()===p.toString()}class Z{constructor(e){for(Object.assign(this,e);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?c_NONE:this.oldSelection.end!==this.cursorPos&&this.oldSelection.start!==this.cursorPos||this.oldSelection.end!==this.oldSelection.start?c_LEFT:c_RIGHT}}var b=_(35603);function P(p,e){return new P.InputMask(p,e)}const K=["mask"];function $(p){if(null==p)throw new Error("mask property should be defined");return p instanceof RegExp?P.MaskedRegExp:R(p)?P.MaskedPattern:p===Date?P.MaskedDate:p===Number?P.MaskedNumber:Array.isArray(p)||p===Array?P.MaskedDynamic:P.Masked&&p.prototype instanceof P.Masked?p:P.Masked&&p instanceof P.Masked?p.constructor:p instanceof Function?P.MaskedFunction:(console.warn("Mask not found for mask",p),P.Masked)}function ht(p){if(!p)throw new Error("Options in not defined");if(P.Masked){if(p.prototype instanceof P.Masked)return{mask:p};const e=p instanceof P.Masked?{mask:p}:f(p)&&p.mask instanceof P.Masked?p:{},{mask:i}=e,a=(0,O.Z)(e,K);if(i){const o=i.mask;return(0,b.Z)((0,b.Z)({},y(i,(l,m)=>!m.startsWith("_"))),{},{mask:i.constructor,_mask:o},a)}}return f(p)?(0,b.Z)({},p):{mask:p}}function J(p){if(P.Masked&&p instanceof P.Masked)return p;const e=ht(p),i=$(e.mask);if(!i)throw new Error("Masked class is not found for provided mask, appropriate module needs to be imported manually before creating mask.");return e.mask===i&&delete e.mask,e._mask&&(e.mask=e._mask,delete e._mask),new i(e)}P.createMask=J;class F{get selectionStart(){let e;try{e=this._unsafeSelectionStart}catch(i){}return null!=e?e:this.value.length}get selectionEnd(){let e;try{e=this._unsafeSelectionEnd}catch(i){}return null!=e?e:this.value.length}select(e,i){if(null!=e&&null!=i&&(e!==this.selectionStart||i!==this.selectionEnd))try{this._unsafeSelect(e,i)}catch(a){}}get isActive(){return!1}}P.MaskElement=F;class x extends F{constructor(e){super(),this.input=e,this._handlers={}}get rootElement(){var e,i,a;return null!=(e=null==(i=(a=this.input).getRootNode)?void 0:i.call(a))?e:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(e){Object.keys(e).forEach(i=>this._toggleEventHandler(x.EVENTS_MAP[i],e[i]))}unbindEvents(){Object.keys(this._handlers).forEach(e=>this._toggleEventHandler(e))}_toggleEventHandler(e,i){this._handlers[e]&&(this.input.removeEventListener(e,this._handlers[e]),delete this._handlers[e]),i&&(this.input.addEventListener(e,i),this._handlers[e]=i)}}x.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"},P.HTMLMaskElement=x;class A extends x{constructor(e){super(e),this.input=e,this._handlers={}}get _unsafeSelectionStart(){return null!=this.input.selectionStart?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(e,i){this.input.setSelectionRange(e,i)}get value(){return this.input.value}set value(e){this.input.value=e}}P.HTMLMaskElement=x;class I extends x{get _unsafeSelectionStart(){const e=this.rootElement,i=e.getSelection&&e.getSelection(),a=i&&i.anchorOffset,o=i&&i.focusOffset;return null==o||null==a||a<o?a:o}get _unsafeSelectionEnd(){const e=this.rootElement,i=e.getSelection&&e.getSelection(),a=i&&i.anchorOffset,o=i&&i.focusOffset;return null==o||null==a||a>o?a:o}_unsafeSelect(e,i){if(!this.rootElement.createRange)return;const a=this.rootElement.createRange();a.setStart(this.input.firstChild||this.input,e),a.setEnd(this.input.lastChild||this.input,i);const o=this.rootElement,l=o.getSelection&&o.getSelection();l&&(l.removeAllRanges(),l.addRange(a))}get value(){return this.input.textContent||""}set value(e){this.input.textContent=e}}P.HTMLContenteditableMaskElement=I;const U=["mask"];P.InputMask=class q{constructor(e,i){this.el=e instanceof F?e:e.isContentEditable&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?new I(e):new A(e),this.masked=J(i),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(e){var i;return null==e||(null==(i=this.masked)?void 0:i.maskEquals(e))}get mask(){return this.masked.mask}set mask(e){if(this.maskEquals(e))return;if(!(e instanceof P.Masked)&&this.masked.constructor===$(e))return void this.masked.updateOptions({mask:e});const i=e instanceof P.Masked?e:J({mask:e});i.unmaskedValue=this.masked.unmaskedValue,this.masked=i}get value(){return this._value}set value(e){this.value!==e&&(this.masked.value=e,this.updateControl(),this.alignCursor())}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(e){this.unmaskedValue!==e&&(this.masked.unmaskedValue=e,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(e){this.masked.typedValueEquals(e)||(this.masked.typedValue=e,this.updateControl(),this.alignCursor())}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(e,i){const a=this._listeners[e];a&&a.forEach(o=>o(i))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(e){!this.el||!this.el.isActive||(this.el.select(e,e),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value}updateControl(){const e=this.masked.unmaskedValue,i=this.masked.value,a=this.displayValue,o=this.unmaskedValue!==e||this.value!==i;this._unmaskedValue=e,this._value=i,this.el.value!==a&&(this.el.value=a),o&&this._fireChangeEvents()}updateOptions(e){const{mask:i}=e,a=(0,O.Z)(e,U),o=!this.maskEquals(i),l=!w(this.masked,a);o&&(this.mask=i),l&&this.masked.updateOptions(a),(o||l)&&this.updateControl()}updateCursor(e){null!=e&&(this.cursorPos=e,this._delayUpdateCursor(e))}_delayUpdateCursor(e){this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,c_LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(e,i){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(i),this}off(e,i){if(!this._listeners[e])return this;if(!i)return delete this._listeners[e],this;const a=this._listeners[e].indexOf(i);return a>=0&&this._listeners[e].splice(a,1),this}_onInput(e){if(this._inputEvent=e,this._abortUpdateCursor(),!this._selection)return this.updateValue();const i=new Z({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),a=this.masked.rawInputValue,o=this.masked.splice(i.startChangePos,i.removed.length,i.inserted,i.removeDirection,{input:!0,raw:!0}).offset,l=a===this.masked.rawInputValue?i.removeDirection:c_NONE;let m=this.masked.nearestInputPos(i.startChangePos+o,l);l!==c_NONE&&(m=this.masked.nearestInputPos(m,c_NONE)),this.updateControl(),this.updateCursor(m),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(e){e.preventDefault(),e.stopPropagation()}_onFocus(e){this.alignCursorFriendly()}_onClick(e){this.alignCursorFriendly()}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}};class T{static normalize(e){return Array.isArray(e)?e:[e,new T]}constructor(e){Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},e)}aggregate(e){return this.rawInserted+=e.rawInserted,this.skip=this.skip||e.skip,this.inserted+=e.inserted,this.tailShift+=e.tailShift,this}get offset(){return this.tailShift+this.inserted.length}}P.ChangeDetails=T;class st{constructor(e,i,a){void 0===e&&(e=""),void 0===i&&(i=0),this.value=e,this.from=i,this.stop=a}toString(){return this.value}extend(e){this.value+=String(e)}appendTo(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(e){Object.assign(this,e)}unshift(e){if(!this.value.length||null!=e&&this.from>=e)return"";const i=this.value[0];return this.value=this.value.slice(1),i}shift(){if(!this.value.length)return"";const e=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),e}}class Q{constructor(e){this._value="",this._update((0,b.Z)((0,b.Z)({},Q.DEFAULTS),e)),this._initialized=!0}updateOptions(e){Object.keys(e).length&&this.withValueRefresh(this._update.bind(this,e))}_update(e){Object.assign(this,e)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value}reset(){this._value=""}get value(){return this._value}set value(e){this.resolve(e,{input:!0})}resolve(e,i){void 0===i&&(i={input:!0}),this.reset(),this.append(e,i,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(e){this.resolve(e,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(e){this.format?this.value=this.format(e,this):this.unmaskedValue=String(e)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(e){this.resolve(e,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(e,i){return e}totalInputPositions(e,i){return void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length),Math.min(this.displayValue.length,i-e)}extractInput(e,i,a){return void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length),this.displayValue.slice(e,i)}extractTail(e,i){return void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length),new st(this.extractInput(e,i),e)}appendTail(e){return R(e)&&(e=new st(String(e))),e.appendTo(this)}_appendCharRaw(e,i){return e?(this._value+=e,new T({inserted:e,rawInserted:e})):new T}_appendChar(e,i,a){void 0===i&&(i={});const o=this.state;let l;if([e,l]=this.doPrepareChar(e,i),l=l.aggregate(this._appendCharRaw(e,i)),l.inserted){let m,C=!1!==this.doValidate(i);if(C&&null!=a){const v=this.state;!0===this.overwrite&&(m=a.state,a.unshift(this.displayValue.length-l.tailShift));let E=this.appendTail(a);C=E.rawInserted===a.toString(),!(C&&E.inserted)&&"shift"===this.overwrite&&(this.state=v,m=a.state,a.shift(),E=this.appendTail(a),C=E.rawInserted===a.toString()),C&&E.inserted&&(this.state=v)}C||(l=new T,this.state=o,a&&m&&(a.state=m))}return l}_appendPlaceholder(){return new T}_appendEager(){return new T}append(e,i,a){if(!R(e))throw new Error("value should be string");const o=R(a)?new st(String(a)):a;let l;null!=i&&i.tail&&(i._beforeTailState=this.state),[e,l]=this.doPrepare(e,i);for(let m=0;m<e.length;++m){const C=this._appendChar(e[m],i,o);if(!C.rawInserted&&!this.doSkipInvalid(e[m],i,o))break;l.aggregate(C)}return(!0===this.eager||"append"===this.eager)&&null!=i&&i.input&&e&&l.aggregate(this._appendEager()),null!=o&&(l.tailShift+=this.appendTail(o).tailShift),l}remove(e,i){return void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length),this._value=this.displayValue.slice(0,e)+this.displayValue.slice(i),new T}withValueRefresh(e){if(this._refreshing||!this._initialized)return e();this._refreshing=!0;const i=this.rawInputValue,a=this.value,o=e();return this.rawInputValue=i,this.value&&this.value!==a&&0===a.indexOf(this.value)&&this.append(a.slice(this.displayValue.length),{},""),delete this._refreshing,o}runIsolated(e){if(this._isolated||!this._initialized)return e(this);this._isolated=!0;const i=this.state,a=e(this);return this.state=i,delete this._isolated,a}doSkipInvalid(e,i,a){return!!this.skipInvalid}doPrepare(e,i){return void 0===i&&(i={}),T.normalize(this.prepare?this.prepare(e,this,i):e)}doPrepareChar(e,i){return void 0===i&&(i={}),T.normalize(this.prepareChar?this.prepareChar(e,this,i):e)}doValidate(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}doCommit(){this.commit&&this.commit(this.value,this)}splice(e,i,a,o,l){void 0===o&&(o=c_NONE),void 0===l&&(l={input:!0});const m=e+i,C=this.extractTail(m),v=!0===this.eager||"remove"===this.eager;let E;v&&(o=function X(p){switch(p){case c_LEFT:return c_FORCE_LEFT;case c_RIGHT:return c_FORCE_RIGHT;default:return p}}(o),E=this.extractInput(0,m,{raw:!0}));let dt=e;const G=new T;if(o!==c_NONE&&(dt=this.nearestInputPos(e,i>1&&0!==e&&!v?c_NONE:o),G.tailShift=dt-e),G.aggregate(this.remove(dt)),v&&o!==c_NONE&&E===this.rawInputValue)if(o===c_FORCE_LEFT){let at;for(;E===this.rawInputValue&&(at=this.displayValue.length);)G.aggregate(new T({tailShift:-1})).aggregate(this.remove(at-1))}else o===c_FORCE_RIGHT&&C.unshift();return G.aggregate(this.append(a,l,C))}maskEquals(e){return this.mask===e}typedValueEquals(e){const i=this.typedValue;return e===i||Q.EMPTY_VALUES.includes(e)&&Q.EMPTY_VALUES.includes(i)||!!this.format&&this.format(e,this)===this.format(this.typedValue,this)}}Q.DEFAULTS={skipInvalid:!0},Q.EMPTY_VALUES=[void 0,null,""],P.Masked=Q;const nt=["chunks"];class ut{constructor(e,i){void 0===e&&(e=[]),void 0===i&&(i=0),this.chunks=e,this.from=i}toString(){return this.chunks.map(String).join("")}extend(e){if(!String(e))return;e=R(e)?new st(String(e)):e;const i=this.chunks[this.chunks.length-1],a=i&&(i.stop===e.stop||null==e.stop)&&e.from===i.from+i.toString().length;if(e instanceof st)a?i.extend(e.toString()):this.chunks.push(e);else if(e instanceof ut){if(null==e.stop){let o;for(;e.chunks.length&&null==e.chunks[0].stop;)o=e.chunks.shift(),o.from+=e.from,this.extend(o)}e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}appendTo(e){if(!(e instanceof P.MaskedPattern))return new st(this.toString()).appendTo(e);const i=new T;for(let a=0;a<this.chunks.length&&!i.skip;++a){const o=this.chunks[a],l=e._mapPosToBlock(e.displayValue.length),m=o.stop;let C;if(null!=m&&(!l||l.index<=m)){if(o instanceof ut||e._stops.indexOf(m)>=0){const v=e._appendPlaceholder(m);i.aggregate(v)}C=o instanceof ut&&e._blocks[m]}if(C){const v=C.appendTail(o);v.skip=!1,i.aggregate(v),e._value+=v.inserted;const E=o.toString().slice(v.rawInserted.length);E&&i.aggregate(e.append(E,{tail:!0}))}else i.aggregate(e.append(o.toString(),{tail:!0}))}return i}get state(){return{chunks:this.chunks.map(e=>e.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(e){const{chunks:i}=e,a=(0,O.Z)(e,nt);Object.assign(this,a),this.chunks=i.map(o=>{const l="chunks"in o?new ut:new st;return l.state=o,l})}unshift(e){if(!this.chunks.length||null!=e&&this.from>=e)return"";const i=null!=e?e-this.from:e;let a=0;for(;a<this.chunks.length;){const o=this.chunks[a],l=o.unshift(i);if(o.toString()){if(!l)break;++a}else this.chunks.splice(a,1);if(l)return l}return""}shift(){if(!this.chunks.length)return"";let e=this.chunks.length-1;for(;0<=e;){const i=this.chunks[e],a=i.shift();if(i.toString()){if(!a)break;--e}else this.chunks.splice(e,1);if(a)return a}return""}}class g{constructor(e,i){this.masked=e,this._log=[];const{offset:a,index:o}=e._mapPosToBlock(i)||(i<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=a,this.index=o,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(e){Object.assign(this,e)}pushState(){this._log.push(this.state)}popState(){const e=this._log.pop();return e&&(this.state=e),e}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(e){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=(null==(i=this.block)?void 0:i.displayValue.length)||0){var i;if(e())return this.ok=!0}return this.ok=!1}_pushRight(e){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(e())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!this.block.isFixed&&this.block.value&&(this.offset=this.block.nearestInputPos(this.offset,c_FORCE_LEFT),0!==this.offset))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,c_LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,c_LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!this.block.isFixed&&this.block.value&&(this.offset=this.block.nearestInputPos(this.offset,c_FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,c_NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,c_NONE),!0})}}class M{constructor(e){Object.assign(this,e),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(e,i){return void 0===e&&(e=0),void 0===i&&(i=this._value.length),this._value=this._value.slice(0,e)+this._value.slice(i),this._value||(this._isRawInput=!1),new T}nearestInputPos(e,i){void 0===i&&(i=c_NONE);const o=this._value.length;switch(i){case c_LEFT:case c_FORCE_LEFT:return 0;default:return o}}totalInputPositions(e,i){return void 0===e&&(e=0),void 0===i&&(i=this._value.length),this._isRawInput?i-e:0}extractInput(e,i,a){return void 0===e&&(e=0),void 0===i&&(i=this._value.length),void 0===a&&(a={}),a.raw&&this._isRawInput&&this._value.slice(e,i)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(e,i){void 0===i&&(i={});const a=new T;if(this.isFilled)return a;const o=!0===this.eager||"append"===this.eager,m=this.char===e&&(this.isUnmasking||i.input||i.raw)&&(!i.raw||!o)&&!i.tail;return m&&(a.rawInserted=this.char),this._value=a.inserted=this.char,this._isRawInput=m&&(i.raw||i.input),a}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const e=new T;return this.isFilled||(this._value=e.inserted=this.char),e}extractTail(){return new st("")}appendTail(e){return R(e)&&(e=new st(String(e))),e.appendTo(this)}append(e,i,a){const o=this._appendChar(e[0],i);return null!=a&&(o.tailShift+=this.appendTail(a).tailShift),o}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value,this._isRawInput=!!e._rawInputValue}}const S=["parent","isOptional","placeholderChar","displayChar","lazy","eager"];class L{constructor(e){const{parent:i,isOptional:a,placeholderChar:o,displayChar:l,lazy:m,eager:C}=e,v=(0,O.Z)(e,S);this.masked=J(v),Object.assign(this,{parent:i,isOptional:a,placeholderChar:o,displayChar:l,lazy:m,eager:C})}reset(){this.isFilled=!1,this.masked.reset()}remove(e,i){return void 0===e&&(e=0),void 0===i&&(i=this.value.length),0===e&&i>=1?(this.isFilled=!1,this.masked.remove(e,i)):new T}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(e,i){if(void 0===i&&(i={}),this.isFilled)return new T;const a=this.masked.state,o=this.masked._appendChar(e,this.currentMaskFlags(i));return o.inserted&&!1===this.doValidate(i)&&(o.inserted=o.rawInserted="",this.masked.state=a),!o.inserted&&!this.isOptional&&!this.lazy&&!i.input&&(o.inserted=this.placeholderChar),o.skip=!o.inserted&&!this.isOptional,this.isFilled=!!o.inserted,o}append(e,i,a){return this.masked.append(e,this.currentMaskFlags(i),a)}_appendPlaceholder(){const e=new T;return this.isFilled||this.isOptional||(this.isFilled=!0,e.inserted=this.placeholderChar),e}_appendEager(){return new T}extractTail(e,i){return this.masked.extractTail(e,i)}appendTail(e){return this.masked.appendTail(e)}extractInput(e,i,a){return void 0===e&&(e=0),void 0===i&&(i=this.value.length),this.masked.extractInput(e,i,a)}nearestInputPos(e,i){void 0===i&&(i=c_NONE);const o=this.value.length,l=Math.min(Math.max(e,0),o);switch(i){case c_LEFT:case c_FORCE_LEFT:return this.isComplete?l:0;case c_RIGHT:case c_FORCE_RIGHT:return this.isComplete?l:o;default:return l}}totalInputPositions(e,i){return void 0===e&&(e=0),void 0===i&&(i=this.value.length),this.value.slice(e,i).length}doValidate(e){return this.masked.doValidate(this.currentMaskFlags(e))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(e)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(e){this.masked.state=e.masked,this.isFilled=e.isFilled}currentMaskFlags(e){var i;return(0,b.Z)((0,b.Z)({},e),{},{_beforeTailState:(null==e||null==(i=e._beforeTailState)?void 0:i.masked)||(null==e?void 0:e._beforeTailState)})}}L.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};P.MaskedRegExp=class tt extends Q{updateOptions(e){super.updateOptions(e)}_update(e){const i=e.mask;i&&(e.validate=a=>a.search(i)>=0),super._update(e)}};const Pt=["expose"],mt=["_blocks"];class z extends Q{constructor(e){super((0,b.Z)((0,b.Z)((0,b.Z)({},z.DEFAULTS),e),{},{definitions:Object.assign({},L.DEFAULT_DEFINITIONS,null==e?void 0:e.definitions)}))}updateOptions(e){super.updateOptions(e)}_update(e){e.definitions=Object.assign({},this.definitions,e.definitions),super._update(e),this._rebuildMask()}_rebuildMask(){const e=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const i=this.mask;if(!i||!e)return;let a=!1,o=!1;for(let l=0;l<i.length;++l){if(this.blocks){const E=i.slice(l),dt=Object.keys(this.blocks).filter(at=>0===E.indexOf(at));dt.sort((at,Tt)=>Tt.length-at.length);const G=dt[0];if(G){const at=ht(this.blocks[G]),{expose:Tt}=at,Et=(0,O.Z)(at,Pt),ct=J((0,b.Z)((0,b.Z)({lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite},Et),{},{parent:this}));ct&&(this._blocks.push(ct),Tt&&(this.exposeBlock=ct),this._maskedBlocks[G]||(this._maskedBlocks[G]=[]),this._maskedBlocks[G].push(this._blocks.length-1)),l+=G.length-1;continue}}let m=i[l],C=m in e;if(m===z.STOP_CHAR){this._stops.push(this._blocks.length);continue}if("{"===m||"}"===m){a=!a;continue}if("["===m||"]"===m){o=!o;continue}if(m===z.ESCAPE_CHAR){if(++l,m=i[l],!m)break;C=!1}const v=C?new L((0,b.Z)((0,b.Z)({isOptional:o,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar},ht(e[m])),{},{parent:this})):new M({char:m,eager:this.eager,isUnmasking:a});this._blocks.push(v)}}get state(){return(0,b.Z)((0,b.Z)({},super.state),{},{_blocks:this._blocks.map(e=>e.state)})}set state(e){const{_blocks:i}=e,a=(0,O.Z)(e,mt);this._blocks.forEach((o,l)=>o.state=i[l]),super.state=a}reset(){super.reset(),this._blocks.forEach(e=>e.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(e=>e.isComplete)}get isFilled(){return this._blocks.every(e=>e.isFilled)}get isFixed(){return this._blocks.every(e=>e.isFixed)}get isOptional(){return this._blocks.every(e=>e.isOptional)}doCommit(){this._blocks.forEach(e=>e.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((e,i)=>e+i.unmaskedValue,"")}set unmaskedValue(e){if(this.exposeBlock){const i=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=e,this.appendTail(i),this.doCommit()}else super.unmaskedValue=e}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((e,i)=>e+i.value,"")}set value(e){if(this.exposeBlock){const i=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=e,this.appendTail(i),this.doCommit()}else super.value=e}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(e){if(this.exposeBlock){const i=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=e,this.appendTail(i),this.doCommit()}else super.typedValue=e}get displayValue(){return this._blocks.reduce((e,i)=>e+i.displayValue,"")}appendTail(e){return super.appendTail(e).aggregate(this._appendPlaceholder())}_appendEager(){var e;const i=new T;let a=null==(e=this._mapPosToBlock(this.displayValue.length))?void 0:e.index;if(null==a)return i;this._blocks[a].isFilled&&++a;for(let o=a;o<this._blocks.length;++o){const l=this._blocks[o]._appendEager();if(!l.inserted)break;i.aggregate(l)}return i}_appendCharRaw(e,i){void 0===i&&(i={});const a=this._mapPosToBlock(this.displayValue.length),o=new T;if(!a)return o;for(let m=a.index;;++m){var l;const C=this._blocks[m];if(!C)break;const v=C._appendChar(e,(0,b.Z)((0,b.Z)({},i),{},{_beforeTailState:null==(l=i._beforeTailState)||null==(l=l._blocks)?void 0:l[m]})),E=v.skip;if(o.aggregate(v),E||v.rawInserted)break}return o}extractTail(e,i){void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length);const a=new ut;return e===i||this._forEachBlocksInRange(e,i,(o,l,m,C)=>{const v=o.extractTail(m,C);v.stop=this._findStopBefore(l),v.from=this._blockStartPos(l),v instanceof ut&&(v.blockIndex=l),a.extend(v)}),a}extractInput(e,i,a){if(void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length),void 0===a&&(a={}),e===i)return"";let o="";return this._forEachBlocksInRange(e,i,(l,m,C,v)=>{o+=l.extractInput(C,v,a)}),o}_findStopBefore(e){let i;for(let a=0;a<this._stops.length;++a){const o=this._stops[a];if(!(o<=e))break;i=o}return i}_appendPlaceholder(e){const i=new T;if(this.lazy&&null==e)return i;const a=this._mapPosToBlock(this.displayValue.length);if(!a)return i;const o=a.index,l=null!=e?e:this._blocks.length;return this._blocks.slice(o,l).forEach(m=>{if(!m.lazy||null!=e){var C;const v=m._appendPlaceholder(null==(C=m._blocks)?void 0:C.length);this._value+=v.inserted,i.aggregate(v)}}),i}_mapPosToBlock(e){let i="";for(let a=0;a<this._blocks.length;++a){const o=this._blocks[a],l=i.length;if(i+=o.displayValue,e<=i.length)return{index:a,offset:e-l}}}_blockStartPos(e){return this._blocks.slice(0,e).reduce((i,a)=>i+a.displayValue.length,0)}_forEachBlocksInRange(e,i,a){void 0===i&&(i=this.displayValue.length);const o=this._mapPosToBlock(e);if(o){const l=this._mapPosToBlock(i),m=l&&o.index===l.index,C=o.offset,v=l&&m?l.offset:this._blocks[o.index].displayValue.length;if(a(this._blocks[o.index],o.index,C,v),l&&!m){for(let E=o.index+1;E<l.index;++E)a(this._blocks[E],E,0,this._blocks[E].displayValue.length);a(this._blocks[l.index],l.index,0,l.offset)}}}remove(e,i){void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length);const a=super.remove(e,i);return this._forEachBlocksInRange(e,i,(o,l,m,C)=>{a.aggregate(o.remove(m,C))}),a}nearestInputPos(e,i){if(void 0===i&&(i=c_NONE),!this._blocks.length)return 0;const a=new g(this,e);if(i===c_NONE)return a.pushRightBeforeInput()||(a.popState(),a.pushLeftBeforeInput())?a.pos:this.displayValue.length;if(i===c_LEFT||i===c_FORCE_LEFT){if(i===c_LEFT){if(a.pushRightBeforeFilled(),a.ok&&a.pos===e)return e;a.popState()}if(a.pushLeftBeforeInput(),a.pushLeftBeforeRequired(),a.pushLeftBeforeFilled(),i===c_LEFT){if(a.pushRightBeforeInput(),a.pushRightBeforeRequired(),a.ok&&a.pos<=e||(a.popState(),a.ok&&a.pos<=e))return a.pos;a.popState()}return a.ok?a.pos:i===c_FORCE_LEFT?0:(a.popState(),a.ok||(a.popState(),a.ok)?a.pos:0)}return i===c_RIGHT||i===c_FORCE_RIGHT?(a.pushRightBeforeInput(),a.pushRightBeforeRequired(),a.pushRightBeforeFilled()?a.pos:i===c_FORCE_RIGHT?this.displayValue.length:(a.popState(),a.ok||(a.popState(),a.ok)?a.pos:this.nearestInputPos(e,c_LEFT))):e}totalInputPositions(e,i){void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length);let a=0;return this._forEachBlocksInRange(e,i,(o,l,m,C)=>{a+=o.totalInputPositions(m,C)}),a}maskedBlock(e){return this.maskedBlocks(e)[0]}maskedBlocks(e){const i=this._maskedBlocks[e];return i?i.map(a=>this._blocks[a]):[]}}z.DEFAULTS={lazy:!0,placeholderChar:"_"},z.STOP_CHAR="`",z.ESCAPE_CHAR="\\",z.InputDefinition=L,z.FixedDefinition=M,P.MaskedPattern=z;const ot=["to","from","maxLength","autofix"];class V extends z{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){const{to:i=this.to||0,from:a=this.from||0,maxLength:o=this.maxLength||0,autofix:l=this.autofix}=e,m=(0,O.Z)(e,ot);this.to=i,this.from=a,this.maxLength=Math.max(String(i).length,o),this.autofix=l;const C=String(this.from).padStart(this.maxLength,"0"),v=String(this.to).padStart(this.maxLength,"0");let E=0;for(;E<v.length&&v[E]===C[E];)++E;m.mask=v.slice(0,E).replace(/0/g,"\\0")+"0".repeat(this.maxLength-E),super._update(m)}get isComplete(){return super.isComplete&&!!this.value}boundaries(e){let i="",a="";const[,o,l]=e.match(/^(\D*)(\d*)(\D*)/)||[];return l&&(i="0".repeat(o.length)+l,a="9".repeat(o.length)+l),i=i.padEnd(this.maxLength,"0"),a=a.padEnd(this.maxLength,"9"),[i,a]}doPrepareChar(e,i){let a;if(void 0===i&&(i={}),[e,a]=super.doPrepareChar(e.replace(/\D/g,""),i),!this.autofix||!e)return[e,a];const o=String(this.from).padStart(this.maxLength,"0"),l=String(this.to).padStart(this.maxLength,"0"),m=this.value+e;if(m.length>this.maxLength)return["",a];const[C,v]=this.boundaries(m);return Number(v)<this.from?[o[m.length-1],a]:Number(C)>this.to?"pad"===this.autofix&&m.length<this.maxLength?["",a.aggregate(this.append(o[m.length-1]+e,i))]:[l[m.length-1],a]:[e,a]}doValidate(e){const i=this.value;if(-1===i.search(/[^0]/)&&i.length<=this._matchFrom)return!0;const[o,l]=this.boundaries(i);return this.from<=Number(l)&&Number(o)<=this.to&&super.doValidate(e)}}P.MaskedRange=V;const xt=["mask","pattern"],D=["mask","pattern","blocks"];class N extends z{constructor(e){const i=(0,b.Z)((0,b.Z)({},N.DEFAULTS),e),{mask:a,pattern:o}=i,l=(0,O.Z)(i,xt);super((0,b.Z)((0,b.Z)({},l),{},{mask:R(a)?a:o}))}updateOptions(e){super.updateOptions(e)}_update(e){const i=(0,b.Z)((0,b.Z)({},N.DEFAULTS),e),{mask:a,pattern:o,blocks:l}=i,m=(0,O.Z)(i,D),C=Object.assign({},N.GET_DEFAULT_BLOCKS());e.min&&(C.Y.from=e.min.getFullYear()),e.max&&(C.Y.to=e.max.getFullYear()),e.min&&e.max&&C.Y.from===C.Y.to&&(C.m.from=e.min.getMonth()+1,C.m.to=e.max.getMonth()+1,C.m.from===C.m.to&&(C.d.from=e.min.getDate(),C.d.to=e.max.getDate())),Object.assign(C,this.blocks,l),Object.keys(C).forEach(v=>{const E=C[v];!("autofix"in E)&&"autofix"in e&&(E.autofix=e.autofix)}),super._update((0,b.Z)((0,b.Z)({},m),{},{mask:R(a)?a:o,blocks:C}))}doValidate(e){const i=this.date;return super.doValidate(e)&&(!this.isComplete||this.isDateExist(this.value)&&null!=i&&(null==this.min||this.min<=i)&&(null==this.max||i<=this.max))}isDateExist(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}get date(){return this.typedValue}set date(e){this.typedValue=e}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(e){super.typedValue=e}maskEquals(e){return e===Date||super.maskEquals(e)}}N.GET_DEFAULT_BLOCKS=()=>({d:{mask:V,from:1,to:31,maxLength:2},m:{mask:V,from:1,to:12,maxLength:2},Y:{mask:V,from:1900,to:9999}}),N.DEFAULTS={mask:Date,pattern:"d{.}`m{.}`Y",format:(p,e)=>{if(!p)return"";return[String(p.getDate()).padStart(2,"0"),String(p.getMonth()+1).padStart(2,"0"),p.getFullYear()].join(".")},parse:(p,e)=>{const[i,a,o]=p.split(".").map(Number);return new Date(o,a-1,i)}},P.MaskedDate=N;const rt=["expose"],Y=["compiledMasks","currentMaskRef","currentMask"],pt=["mask"];class k extends Q{constructor(e){super((0,b.Z)((0,b.Z)({},k.DEFAULTS),e)),this.currentMask=void 0}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),"mask"in e&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(e.mask)?e.mask.map(i=>{const a=ht(i),{expose:o}=a,l=(0,O.Z)(a,rt),m=J((0,b.Z)({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid},l));return o&&(this.exposeMask=m),m}):[])}_appendCharRaw(e,i){void 0===i&&(i={});const a=this._applyDispatch(e,i);return this.currentMask&&a.aggregate(this.currentMask._appendChar(e,this.currentMaskFlags(i))),a}_applyDispatch(e,i,a){void 0===e&&(e=""),void 0===i&&(i={}),void 0===a&&(a="");const o=i.tail&&null!=i._beforeTailState?i._beforeTailState._value:this.value,l=this.rawInputValue,m=i.tail&&null!=i._beforeTailState?i._beforeTailState._rawInputValue:l,C=l.slice(m.length),v=this.currentMask,E=new T,dt=null==v?void 0:v.state;if(this.currentMask=this.doDispatch(e,(0,b.Z)({},i),a),this.currentMask)if(this.currentMask!==v){if(this.currentMask.reset(),m){const G=this.currentMask.append(m,{raw:!0});E.tailShift=G.inserted.length-o.length}C&&(E.tailShift+=this.currentMask.append(C,{raw:!0,tail:!0}).tailShift)}else dt&&(this.currentMask.state=dt);return E}_appendPlaceholder(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}_appendEager(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendEager()),e}appendTail(e){const i=new T;return e&&i.aggregate(this._applyDispatch("",{},e)),i.aggregate(this.currentMask?this.currentMask.appendTail(e):super.appendTail(e))}currentMaskFlags(e){var i,a;return(0,b.Z)((0,b.Z)({},e),{},{_beforeTailState:(null==(i=e._beforeTailState)?void 0:i.currentMaskRef)===this.currentMask&&(null==(a=e._beforeTailState)?void 0:a.currentMask)||e._beforeTailState})}doDispatch(e,i,a){return void 0===i&&(i={}),void 0===a&&(a=""),this.dispatch(e,this,i,a)}doValidate(e){return super.doValidate(e)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(e)))}doPrepare(e,i){void 0===i&&(i={});let[a,o]=super.doPrepare(e,i);if(this.currentMask){let l;[a,l]=super.doPrepare(a,this.currentMaskFlags(i)),o=o.aggregate(l)}return[a,o]}doPrepareChar(e,i){void 0===i&&(i={});let[a,o]=super.doPrepareChar(e,i);if(this.currentMask){let l;[a,l]=super.doPrepareChar(a,this.currentMaskFlags(i)),o=o.aggregate(l)}return[a,o]}reset(){var e;null==(e=this.currentMask)||e.reset(),this.compiledMasks.forEach(i=>i.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(e){this.exposeMask?(this.exposeMask.value=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=e}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(e){this.exposeMask?(this.exposeMask.unmaskedValue=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=e}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(e){if(this.exposeMask)return this.exposeMask.typedValue=e,this.currentMask=this.exposeMask,void this._applyDispatch();let i=String(e);this.currentMask&&(this.currentMask.typedValue=e,i=this.currentMask.unmaskedValue),this.unmaskedValue=i}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var e;return!(null==(e=this.currentMask)||!e.isComplete)}get isFilled(){var e;return!(null==(e=this.currentMask)||!e.isFilled)}remove(e,i){const a=new T;return this.currentMask&&a.aggregate(this.currentMask.remove(e,i)).aggregate(this._applyDispatch()),a}get state(){var e;return(0,b.Z)((0,b.Z)({},super.state),{},{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(i=>i.state),currentMaskRef:this.currentMask,currentMask:null==(e=this.currentMask)?void 0:e.state})}set state(e){const{compiledMasks:i,currentMaskRef:a,currentMask:o}=e,l=(0,O.Z)(e,Y);i&&this.compiledMasks.forEach((m,C)=>m.state=i[C]),null!=a&&(this.currentMask=a,this.currentMask.state=o),super.state=l}extractInput(e,i,a){return this.currentMask?this.currentMask.extractInput(e,i,a):""}extractTail(e,i){return this.currentMask?this.currentMask.extractTail(e,i):super.extractTail(e,i)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(e,i){return this.currentMask?this.currentMask.nearestInputPos(e,i):super.nearestInputPos(e,i)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(e){this._overwrite=e}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(e){this._eager=e}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(e){this._skipInvalid=e}maskEquals(e){return Array.isArray(e)?this.compiledMasks.every((i,a)=>{if(!e[a])return;const o=e[a],{mask:l}=o;return w(i,(0,O.Z)(o,pt))&&i.maskEquals(l)}):super.maskEquals(e)}typedValueEquals(e){var i;return!(null==(i=this.currentMask)||!i.typedValueEquals(e))}}k.DEFAULTS=void 0,k.DEFAULTS={dispatch:(p,e,i,a)=>{if(!e.compiledMasks.length)return;const o=e.rawInputValue,l=e.compiledMasks.map((m,C)=>{const v=e.currentMask===m,E=v?m.displayValue.length:m.nearestInputPos(m.displayValue.length,c_FORCE_LEFT);return m.rawInputValue!==o?(m.reset(),m.append(o,{raw:!0})):v||m.remove(E),m.append(p,e.currentMaskFlags(i)),m.appendTail(a),{index:C,weight:m.rawInputValue.length,totalInputPositions:m.totalInputPositions(0,Math.max(E,m.nearestInputPos(m.displayValue.length,c_FORCE_LEFT)))}});return l.sort((m,C)=>C.weight-m.weight||C.totalInputPositions-m.totalInputPositions),e.compiledMasks[l[0].index]}},P.MaskedDynamic=k;const et=["enum"];P.MaskedEnum=class Ot extends z{constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){const{enum:i}=e,a=(0,O.Z)(e,et);if(i){const o=i.map(C=>C.length),l=Math.min(...o),m=Math.max(...o)-l;a.mask="*".repeat(l),m&&(a.mask+="["+"*".repeat(m)+"]"),this.enum=i}super._update(a)}doValidate(e){return this.enum.some(i=>0===i.indexOf(this.unmaskedValue))&&super.doValidate(e)}};P.MaskedFunction=class bt extends Q{updateOptions(e){super.updateOptions(e)}_update(e){super._update((0,b.Z)((0,b.Z)({},e),{},{validate:e.mask}))}};class W extends Q{constructor(e){super((0,b.Z)((0,b.Z)({},W.DEFAULTS),e))}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),this._updateRegExps()}_updateRegExps(){const e="^"+(this.allowNegative?"[+|\\-]?":""),a=(this.scale?"("+B(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(e+"\\d*"+a),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(B).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(B(this.thousandsSeparator),"g")}_removeThousandsSeparators(e){return e.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(e){const i=e.split(this.radix);return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),i.join(this.radix)}doPrepareChar(e,i){void 0===i&&(i={});const[a,o]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(i.input&&i.raw||!i.input&&!i.raw)?e.replace(this._mapToRadixRegExp,this.radix):e),i);return e&&!a&&(o.skip=!0),a&&!this.allowPositive&&!this.value&&"-"!==a&&o.aggregate(this._appendChar("-")),[a,o]}_separatorsCount(e,i){void 0===i&&(i=!1);let a=0;for(let o=0;o<e;++o)this._value.indexOf(this.thousandsSeparator,o)===o&&(++a,i&&(e+=this.thousandsSeparator.length));return a}_separatorsCountFromSlice(e){return void 0===e&&(e=this._value),this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}extractInput(e,i,a){return void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length),[e,i]=this._adjustRangeWithSeparators(e,i),this._removeThousandsSeparators(super.extractInput(e,i,a))}_appendCharRaw(e,i){if(void 0===i&&(i={}),!this.thousandsSeparator)return super._appendCharRaw(e,i);const a=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,o=this._separatorsCountFromSlice(a);this._value=this._removeThousandsSeparators(this.value);const l=super._appendCharRaw(e,i);this._value=this._insertThousandsSeparators(this._value);const m=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,C=this._separatorsCountFromSlice(m);return l.tailShift+=(C-o)*this.thousandsSeparator.length,l.skip=!l.rawInserted&&e===this.thousandsSeparator,l}_findSeparatorAround(e){if(this.thousandsSeparator){const i=e-this.thousandsSeparator.length+1,a=this.value.indexOf(this.thousandsSeparator,i);if(a<=e)return a}return-1}_adjustRangeWithSeparators(e,i){const a=this._findSeparatorAround(e);a>=0&&(e=a);const o=this._findSeparatorAround(i);return o>=0&&(i=o+this.thousandsSeparator.length),[e,i]}remove(e,i){void 0===e&&(e=0),void 0===i&&(i=this.displayValue.length),[e,i]=this._adjustRangeWithSeparators(e,i);const a=this.value.slice(0,e),o=this.value.slice(i),l=this._separatorsCount(a.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(a+o));const m=this._separatorsCountFromSlice(a);return new T({tailShift:(m-l)*this.thousandsSeparator.length})}nearestInputPos(e,i){if(!this.thousandsSeparator)return e;switch(i){case c_NONE:case c_LEFT:case c_FORCE_LEFT:{const a=this._findSeparatorAround(e-1);if(a>=0){const o=a+this.thousandsSeparator.length;if(e<o||this.value.length<=o||i===c_FORCE_LEFT)return a}break}case c_RIGHT:case c_FORCE_RIGHT:{const a=this._findSeparatorAround(e);if(a>=0)return a+this.thousandsSeparator.length}}return e}doValidate(e){let i=!!this._removeThousandsSeparators(this.value).match(this._numberRegExp);if(i){const a=this.number;i=i&&!isNaN(a)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)}return i&&super.doValidate(e)}doCommit(){if(this.value){const e=this.number;let i=e;null!=this.min&&(i=Math.max(i,this.min)),null!=this.max&&(i=Math.min(i,this.max)),i!==e&&(this.unmaskedValue=this.format(i,this));let a=this.value;this.normalizeZeros&&(a=this._normalizeZeros(a)),this.padFractionalZeros&&this.scale>0&&(a=this._padFractionalZeros(a)),this._value=a}super.doCommit()}_normalizeZeros(e){const i=this._removeThousandsSeparators(e).split(this.radix);return i[0]=i[0].replace(/^(\D*)(0*)(\d*)/,(a,o,l,m)=>o+m),e.length&&!/\d$/.test(i[0])&&(i[0]=i[0]+"0"),i.length>1&&(i[1]=i[1].replace(/0*$/,""),i[1].length||(i.length=1)),this._insertThousandsSeparators(i.join(this.radix))}_padFractionalZeros(e){if(!e)return e;const i=e.split(this.radix);return i.length<2&&i.push(""),i[1]=i[1].padEnd(this.scale,"0"),i.join(this.radix)}doSkipInvalid(e,i,a){void 0===i&&(i={});const o=0===this.scale&&e!==this.thousandsSeparator&&(e===this.radix||e===W.UNMASKED_RADIX||this.mapToRadix.includes(e));return super.doSkipInvalid(e,i,a)&&!o}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,W.UNMASKED_RADIX)}set unmaskedValue(e){super.unmaskedValue=e}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(e){this.rawInputValue=this.format(e,this).replace(W.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(e){this.typedValue=e}get allowNegative(){return null!=this.min&&this.min<0||null!=this.max&&this.max<0}get allowPositive(){return null!=this.min&&this.min>0||null!=this.max&&this.max>0}typedValueEquals(e){return(super.typedValueEquals(e)||W.EMPTY_VALUES.includes(e)&&W.EMPTY_VALUES.includes(this.typedValue))&&!(0===e&&""===this.value)}}W.UNMASKED_RADIX=".",W.EMPTY_VALUES=[...Q.EMPTY_VALUES,0],W.DEFAULTS={mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[W.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:p=>p.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})},P.MaskedNumber=W;const It={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function kt(p,e,i){void 0===e&&(e=It.MASKED),void 0===i&&(i=It.MASKED);const a=J(p);return o=>a.runIsolated(l=>(l[e]=o,l[i]))}P.PIPE_TYPE=It,P.createPipe=kt,P.pipe=function gt(p,e,i,a){return kt(e,i,a)(p)};try{globalThis.IMask=P}catch(p){}var ft=_(58540),lt=_(52374),Ft=_(54860),it=_(26575),At=_(85893),Dt=_(5939);const Zt=function(p){return{flipped:p}};class yt{constructor(e){this.http=e,this.creditCardTypeDetected=new t.vpe,this.flipped=!1,this.year=(ft().year()+1).toString().slice(2),this.ccImage="",this.color="grey",this.name="Mario Rossi",this.number="0123 4567 8910 1112",this.expiration="01/"+this.year,this.securityCode="985"}ngOnInit(){this.http.get("/assets/images/booking/credit-card/american-express.svg",{responseType:"text"}).subscribe({next:e=>{this.americanExpress=e},error:()=>{}}),this.http.get("/assets/images/booking/credit-card/visa.svg",{responseType:"text"}).subscribe({next:e=>{this.visa=e},error:()=>{}}),this.http.get("/assets/images/booking/credit-card/diners.svg",{responseType:"text"}).subscribe({next:e=>{this.diners=e},error:()=>{}}),this.http.get("/assets/images/booking/credit-card/discover.svg",{responseType:"text"}).subscribe({next:e=>{this.discover=e},error:()=>{}}),this.http.get("/assets/images/booking/credit-card/jcb.svg",{responseType:"text"}).subscribe({next:e=>{this.jcb=e},error:()=>{}}),this.http.get("/assets/images/booking/credit-card/maestro.svg",{responseType:"text"}).subscribe({next:e=>{this.maestro=e},error:()=>{}}),this.http.get("/assets/images/booking/credit-card/mastercard.svg",{responseType:"text"}).subscribe({next:e=>{this.mastercard=e},error:()=>{}}),this.http.get("/assets/images/booking/credit-card/unionpay.svg",{responseType:"text"}).subscribe({next:e=>{this.unionpay=e},error:()=>{}})}ngAfterViewInit(){let e=P(this.cardNumberInput,{mask:[{mask:"0000 000000 00000",regex:"^3[47]\\d{0,13}",cardtype:"american express"},{mask:"0000 0000 0000 0000",regex:"^(?:6011|65\\d{0,2}|64[4-9]\\d?)\\d{0,12}",cardtype:"discover"},{mask:"0000 000000 0000",regex:"^3(?:0([0-5]|9)|[689]\\d?)\\d{0,11}",cardtype:"diners"},{mask:"0000 0000 0000 0000",regex:"^(5[1-5]\\d{0,2}|22[2-9]\\d{0,1}|2[3-7]\\d{0,2})\\d{0,12}",cardtype:"mastercard"},{mask:"0000 000000 00000",regex:"^(?:2131|1800)\\d{0,11}",cardtype:"jcb15"},{mask:"0000 0000 0000 0000",regex:"^(?:35\\d{0,2})\\d{0,12}",cardtype:"jcb"},{mask:"0000 0000 0000 0000",regex:"^(?:5[0678]\\d{0,2}|6304|67\\d{0,2})\\d{0,12}",cardtype:"maestro"},{mask:"0000 0000 0000 0000",regex:"^4\\d{0,15}",cardtype:"visa"},{mask:"0000 0000 0000 0000",regex:"^62\\d{0,14}",cardtype:"unionpay"},{mask:"0000 0000 0000 0000",cardtype:"Unknown"}],dispatch:(o,l,m)=>{let C=(l.value+o).replace(/\D/g,"");for(let v of l.compiledMasks){let E=new RegExp(v.regex);if(null!=C.match(E))return v}}}),i=P(this.expirationDateInput,{mask:"MM{/}YY",blocks:{YY:{mask:P.MaskedRange,placeholderChar:"YY",from:0,to:99,maxLength:2},MM:{mask:P.MaskedRange,placeholderChar:"MM",from:1,to:12,maxLength:2}}}),a=P(this.securityCodeInput,{mask:"0000"});e.on("accept",()=>{switch(e.masked.currentMask.cardtype){case"american express":this.ccImage=this.americanExpress,this.color="green",this.creditCardTypeDetected.emit(lt.Cf.AmericanExpress);break;case"visa":this.ccImage=this.visa,this.color="lime",this.creditCardTypeDetected.emit(lt.Cf.Visa);break;case"diners":this.ccImage=this.diners,this.color="orange",this.creditCardTypeDetected.emit(lt.Cf.DinersClub);break;case"discover":this.ccImage=this.discover,this.color="purple",this.creditCardTypeDetected.emit(lt.Cf.DiscoveryCard);break;case"jcb":case"jcb15":this.ccImage=this.jcb,this.color="red",this.creditCardTypeDetected.emit(lt.Cf.JCB);break;case"maestro":this.ccImage=this.maestro,this.color="yellow",this.creditCardTypeDetected.emit(lt.Cf.Maestro);break;case"mastercard":this.ccImage=this.mastercard,this.color="lightblue",this.creditCardTypeDetected.emit(lt.Cf.MasterCard);break;case"unionpay":this.ccImage=this.unionpay,this.color="cyan",this.creditCardTypeDetected.emit(lt.Cf.ChinaUnionPay);break;default:this.ccImage="",this.color="grey",this.creditCardTypeDetected.emit(null)}}),this.nameInput.addEventListener("input",()=>{this.nameInput.value?this.name=this.nameInput.value:this.name="Mario Rossi"}),e.on("accept",()=>{e.value?this.number=e.value:this.number="0123 4567 8910 1112"}),i.on("accept",()=>{i.value?this.expiration=i.value:this.expiration="01/"+this.year}),a.on("accept",()=>{a.value?this.securityCode=a.value:this.securityCode="985"}),this.nameInput.addEventListener("focus",()=>{this.flipped=!1}),this.cardNumberInput.addEventListener("focus",()=>{this.flipped=!1}),this.expirationDateInput.addEventListener("focus",()=>{this.flipped=!1}),this.securityCodeInput.addEventListener("focus",()=>{this.flipped=!0})}}yt.\u0275fac=function(e){return new(e||yt)(t.Y36(Ft.eN))},yt.\u0275cmp=t.Xpm({type:yt,selectors:[["app-credit-card"]],inputs:{nameInput:"nameInput",cardNumberInput:"cardNumberInput",expirationDateInput:"expirationDateInput",securityCodeInput:"securityCodeInput"},outputs:{creditCardTypeDetected:"creditCardTypeDetected"},decls:76,vars:31,consts:[[1,"creditcard",3,"ngClass","click"],[1,"front"],["front",""],["id","ccsingle",3,"innerHtml"],["version","1.1","id","cardfront","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 750 471",0,"xml","space","preserve",2,"enable-background","new 0 0 750 471"],["id","Front"],["id","CardBackground"],["id","Page-1_1_"],["id","amex_1_"],["id","Rectangle-1_1_","d","M40,0h670c22.1,0,40,17.9,40,40v391c0,22.1-17.9,40-40,40H40c-22.1,0-40-17.9-40-40V40\n                    C0,17.9,17.9,0,40,0z"],["d","M750,431V193.2c-217.6-57.5-556.4-13.5-750,24.9V431c0,22.1,17.9,40,40,40h670C732.1,471,750,453.1,750,431z"],["transform","matrix(1 0 0 1 60.106 295.0121)",1,"st2","st3","st4"],["transform","matrix(1 0 0 1 54.1064 428.1723)",1,"st2","st5","st6"],["transform","matrix(1 0 0 1 54.1074 389.8793)",1,"st7","st5","st8"],["transform","matrix(1 0 0 1 479.7754 388.8793)",1,"st7","st5","st8"],["transform","matrix(1 0 0 1 65.1054 241.5)",1,"st7","st5","st8"],["transform","matrix(1 0 0 1 574.4219 433.8095)",1,"st2","st5","st9"],["transform","matrix(1 0 0 1 479.3848 417.0097)",1,"st2","st10","st11"],["transform","matrix(1 0 0 1 479.3848 435.6762)",1,"st2","st10","st11"],["points","554.5,421 540.4,414.2 540.4,427.9",1,"st2"],["id","cchip"],["d","M168.1,143.6H82.9c-10.2,0-18.5-8.3-18.5-18.5V74.9c0-10.2,8.3-18.5,18.5-18.5h85.3\n                c10.2,0,18.5,8.3,18.5,18.5v50.2C186.6,135.3,178.3,143.6,168.1,143.6z",1,"st2"],["x","82","y","70","width","1.5","height","60",1,"st12"],["x","167.4","y","70","width","1.5","height","60",1,"st12"],["d","M125.5,130.8c-10.2,0-18.5-8.3-18.5-18.5c0-4.6,1.7-8.9,4.7-12.3c-3-3.4-4.7-7.7-4.7-12.3\n                    c0-10.2,8.3-18.5,18.5-18.5s18.5,8.3,18.5,18.5c0,4.6-1.7,8.9-4.7,12.3c3,3.4,4.7,7.7,4.7,12.3\n                    C143.9,122.5,135.7,130.8,125.5,130.8z M125.5,70.8c-9.3,0-16.9,7.6-16.9,16.9c0,4.4,1.7,8.6,4.8,11.8l0.5,0.5l-0.5,0.5\n                    c-3.1,3.2-4.8,7.4-4.8,11.8c0,9.3,7.6,16.9,16.9,16.9s16.9-7.6,16.9-16.9c0-4.4-1.7-8.6-4.8-11.8l-0.5-0.5l0.5-0.5\n                    c3.1-3.2,4.8-7.4,4.8-11.8C142.4,78.4,134.8,70.8,125.5,70.8z",1,"st12"],["x","82.8","y","82.1","width","25.8","height","1.5",1,"st12"],["x","82.8","y","117.9","width","26.1","height","1.5",1,"st12"],["x","142.4","y","82.1","width","25.8","height","1.5",1,"st12"],["x","142","y","117.9","width","26.2","height","1.5",1,"st12"],["id","Back"],[1,"back"],["version","1.1","id","cardback","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 750 471",0,"xml","space","preserve",2,"enable-background","new 0 0 750 471"],["x1","35.3","y1","10.4","x2","36.7","y2","11",1,"st0"],["id","Page-1_2_"],["id","amex_2_"],["id","Rectangle-1_2_","d","M40,0h670c22.1,0,40,17.9,40,40v391c0,22.1-17.9,40-40,40H40c-22.1,0-40-17.9-40-40V40\n                C0,17.9,17.9,0,40,0z"],["y","61.6","width","750","height","78",1,"st2"],["d","M701.1,249.1H48.9c-3.3,0-6-2.7-6-6v-52.5c0-3.3,2.7-6,6-6h652.1c3.3,0,6,2.7,6,6v52.5\n            C707.1,246.4,704.4,249.1,701.1,249.1z",1,"st3"],["x","42.9","y","198.6","width","664.1","height","10.5",1,"st4"],["x","42.9","y","224.5","width","664.1","height","10.5",1,"st4"],["d","M701.1,184.6H618h-8h-10v64.5h10h8h83.1c3.3,0,6-2.7,6-6v-52.5C707.1,187.3,704.4,184.6,701.1,184.6z",1,"st5"],["transform","matrix(1 0 0 1 621.999 227.2734)",1,"st6","st7"],[1,"st8"],["transform","matrix(1 0 0 1 518.083 280.0879)",1,"st9","st6","st10"],["x","58.1","y","378.6","width","375.5","height","13.5",1,"st11"],["x","58.1","y","405.6","width","421.7","height","13.5",1,"st11"],["transform","matrix(1 0 0 1 59.5073 228.6099)",1,"st12","st13"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return i.flipped=!i.flipped}),t.TgZ(1,"div",1,2),t._UZ(3,"div",3),t.ALo(4,"safeHtml"),t.O4$(),t.TgZ(5,"svg",4)(6,"g",5)(7,"g",6)(8,"g",7)(9,"g",8),t._UZ(10,"path",9),t.qZA()(),t._UZ(11,"path",10),t.qZA(),t.TgZ(12,"text",11),t._uU(13),t.qZA(),t.TgZ(14,"text",12),t._uU(15),t.qZA(),t.TgZ(16,"text",13),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"text",14),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"text",15),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"g")(26,"text",16),t._uU(27),t.qZA(),t.TgZ(28,"text",17),t._uU(29,"VALID"),t.qZA(),t.TgZ(30,"text",18),t._uU(31,"THRU"),t.qZA(),t._UZ(32,"polygon",19),t.qZA(),t.TgZ(33,"g",20)(34,"g"),t._UZ(35,"path",21),t.qZA(),t.TgZ(36,"g")(37,"g"),t._UZ(38,"rect",22),t.qZA(),t.TgZ(39,"g"),t._UZ(40,"rect",23),t.qZA(),t.TgZ(41,"g"),t._UZ(42,"path",24),t.qZA(),t.TgZ(43,"g"),t._UZ(44,"rect",25),t.qZA(),t.TgZ(45,"g"),t._UZ(46,"rect",26),t.qZA(),t.TgZ(47,"g"),t._UZ(48,"rect",27),t.qZA(),t.TgZ(49,"g"),t._UZ(50,"rect",28),t.qZA()()()(),t._UZ(51,"g",29),t.qZA()(),t.kcU(),t.TgZ(52,"div",30),t.O4$(),t.TgZ(53,"svg",31)(54,"g",5),t._UZ(55,"line",32),t.qZA(),t.TgZ(56,"g",29)(57,"g",33)(58,"g",34),t._UZ(59,"path",35),t.qZA()(),t._UZ(60,"rect",36),t.TgZ(61,"g"),t._UZ(62,"path",37)(63,"rect",38)(64,"rect",39)(65,"path",40),t.qZA(),t.TgZ(66,"text",41),t._uU(67),t.qZA(),t.TgZ(68,"g",42)(69,"text",43),t._uU(70),t.ALo(71,"translate"),t.qZA()(),t._UZ(72,"rect",44)(73,"rect",45),t.TgZ(74,"text",46),t._uU(75),t.qZA()()()()()),2&e){const a=t.MAs(2);t.Udp("height",a.offsetHeight,"px"),t.Q6J("ngClass",t.VKq(29,Zt,i.flipped)),t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,19,i.ccImage),t.oJD),t.xp6(7),t.Tol("lightcolor "+i.color),t.xp6(1),t.Tol("darkcolor "+i.color+"dark"),t.xp6(2),t.Oqu(i.number),t.xp6(2),t.Oqu(i.name),t.xp6(2),t.Oqu(t.lcZ(18,21,"interfaces.pagamento-form.titolare")),t.xp6(3),t.Oqu(t.lcZ(21,23,"interfaces.pagamento-form.scadenza")),t.xp6(3),t.Oqu(t.lcZ(24,25,"interfaces.pagamento-form.numero")),t.xp6(4),t.Oqu(i.expiration),t.xp6(32),t.Tol("darkcolor "+i.color+"dark"),t.xp6(8),t.Oqu(i.securityCode),t.xp6(3),t.Oqu(t.lcZ(71,27,"interfaces.pagamento-form.codiceSicurezza")),t.xp6(5),t.Oqu(i.name)}},dependencies:[it.mk,At.z,Dt.X$],styles:["#ccsingle[_ngcontent-%COMP%]{position:absolute;right:15px;top:20px}  #ccsingle svg{width:100px;max-height:60px}.creditcard[_ngcontent-%COMP%]   svg#cardfront[_ngcontent-%COMP%], .creditcard[_ngcontent-%COMP%]   svg#cardback[_ngcontent-%COMP%]{width:100%;box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f;border-radius:22px}.creditcard[_ngcontent-%COMP%]   .lightcolor[_ngcontent-%COMP%], .creditcard[_ngcontent-%COMP%]   .darkcolor[_ngcontent-%COMP%]{transition:fill .5s}.creditcard[_ngcontent-%COMP%]   .lightblue[_ngcontent-%COMP%]{fill:#03a9f4}.creditcard[_ngcontent-%COMP%]   .lightbluedark[_ngcontent-%COMP%]{fill:#0288d1}.creditcard[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{fill:#ef5350}.creditcard[_ngcontent-%COMP%]   .reddark[_ngcontent-%COMP%]{fill:#d32f2f}.creditcard[_ngcontent-%COMP%]   .purple[_ngcontent-%COMP%]{fill:#ab47bc}.creditcard[_ngcontent-%COMP%]   .purpledark[_ngcontent-%COMP%]{fill:#7b1fa2}.creditcard[_ngcontent-%COMP%]   .cyan[_ngcontent-%COMP%]{fill:#26c6da}.creditcard[_ngcontent-%COMP%]   .cyandark[_ngcontent-%COMP%]{fill:#0097a7}.creditcard[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{fill:#66bb6a}.creditcard[_ngcontent-%COMP%]   .greendark[_ngcontent-%COMP%]{fill:#388e3c}.creditcard[_ngcontent-%COMP%]   .lime[_ngcontent-%COMP%]{fill:#d4e157}.creditcard[_ngcontent-%COMP%]   .limedark[_ngcontent-%COMP%]{fill:#afb42b}.creditcard[_ngcontent-%COMP%]   .yellow[_ngcontent-%COMP%]{fill:#ffeb3b}.creditcard[_ngcontent-%COMP%]   .yellowdark[_ngcontent-%COMP%]{fill:#f9a825}.creditcard[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{fill:#ff9800}.creditcard[_ngcontent-%COMP%]   .orangedark[_ngcontent-%COMP%]{fill:#ef6c00}.creditcard[_ngcontent-%COMP%]   .grey[_ngcontent-%COMP%]{fill:#bdbdbd}.creditcard[_ngcontent-%COMP%]   .greydark[_ngcontent-%COMP%]{fill:#616161}#svgname[_ngcontent-%COMP%]{text-transform:uppercase}#cardfront[_ngcontent-%COMP%]   .st2[_ngcontent-%COMP%]{fill:#fff}#cardfront[_ngcontent-%COMP%]   .st3[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace;font-weight:600}#cardfront[_ngcontent-%COMP%]   .st4[_ngcontent-%COMP%]{font-size:54.7817px}#cardfront[_ngcontent-%COMP%]   .st5[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace;font-weight:400}#cardfront[_ngcontent-%COMP%]   .st6[_ngcontent-%COMP%]{font-size:33.1112px}#cardfront[_ngcontent-%COMP%]   .st7[_ngcontent-%COMP%]{opacity:.6;fill:#fff}#cardfront[_ngcontent-%COMP%]   .st8[_ngcontent-%COMP%]{font-size:24px}#cardfront[_ngcontent-%COMP%]   .st9[_ngcontent-%COMP%]{font-size:36.5498px}#cardfront[_ngcontent-%COMP%]   .st10[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace;font-weight:300}#cardfront[_ngcontent-%COMP%]   .st11[_ngcontent-%COMP%]{font-size:16.1716px}#cardfront[_ngcontent-%COMP%]   .st12[_ngcontent-%COMP%]{fill:#4c4c4c}#cardback[_ngcontent-%COMP%]   .st0[_ngcontent-%COMP%]{fill:none;stroke:#0f0f0f;stroke-miterlimit:10}#cardback[_ngcontent-%COMP%]   .st2[_ngcontent-%COMP%]{fill:#111}#cardback[_ngcontent-%COMP%]   .st3[_ngcontent-%COMP%]{fill:#f2f2f2}#cardback[_ngcontent-%COMP%]   .st4[_ngcontent-%COMP%]{fill:#d8d2db}#cardback[_ngcontent-%COMP%]   .st5[_ngcontent-%COMP%]{fill:#c4c4c4}#cardback[_ngcontent-%COMP%]   .st6[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace;font-weight:400}#cardback[_ngcontent-%COMP%]   .st7[_ngcontent-%COMP%]{font-size:27px}#cardback[_ngcontent-%COMP%]   .st8[_ngcontent-%COMP%]{opacity:.6}#cardback[_ngcontent-%COMP%]   .st9[_ngcontent-%COMP%]{fill:#fff}#cardback[_ngcontent-%COMP%]   .st10[_ngcontent-%COMP%]{font-size:24px}#cardback[_ngcontent-%COMP%]   .st11[_ngcontent-%COMP%]{fill:#eaeaea}#cardback[_ngcontent-%COMP%]   .st12[_ngcontent-%COMP%]{font-family:Rock Salt,cursive}#cardback[_ngcontent-%COMP%]   .st13[_ngcontent-%COMP%]{font-size:37.769px}.creditcard[_ngcontent-%COMP%]{width:100%;max-width:400px;transform-style:preserve-3d;transition:transform .6s;cursor:pointer}.creditcard[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%], .creditcard[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;width:100%;max-width:400px;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-font-smoothing:antialiased;color:#47525d}.creditcard[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%], .creditcard.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]})},32549:(wt,j,_)=>{_.d(j,{Q:()=>Ct});var t=_(61699),O=_(58540),R=_(14090),f=_(6556),y=_(86107),c=_(52374),X=_(20553),B=_(2353),w=_(26575),Z=_(28849),b=_(22165),P=_(5939);function K(r,n){if(1&r&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r){const s=t.oxw(4);t.xp6(1),t.Oqu(t.lcZ(2,1,s.title))}}const $=function(r){return{"mt-3":r}};function ht(r,n){if(1&r&&(t.TgZ(0,"div",4),t._UZ(1,"app-inner-html",5),t.qZA()),2&r){const s=t.oxw(5);t.Q6J("ngClass",t.VKq(2,$,!!s.title)),t.xp6(1),t.Q6J("_text",s.text)}}function J(r,n){if(1&r&&(t.TgZ(0,"div",4),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r){const s=t.oxw(5);t.Q6J("ngClass",t.VKq(4,$,!!s.title)),t.xp6(1),t.hij(" ",t.lcZ(2,2,s.text)," ")}}function F(r,n){if(1&r&&(t.ynx(0),t.YNc(1,ht,2,4,"div",3),t.YNc(2,J,3,6,"div",3),t.BQk()),2&r){const s=t.oxw(4);t.xp6(1),t.Q6J("ngIf",s.html),t.xp6(1),t.Q6J("ngIf",!s.html)}}function x(r,n){if(1&r&&(t.ynx(0),t.YNc(1,K,3,3,"h4",0),t.YNc(2,F,3,2,"ng-container",0),t.BQk()),2&r){const s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!!s.title),t.xp6(1),t.Q6J("ngIf",!!s.text)}}const A=function(r){return{"hobex-container-hidden":r}},I=function(r,n){return{visibility:r,"z-index":n}};function U(r,n){if(1&r&&(t.TgZ(0,"div",4),t._UZ(1,"form",6)(2,"iframe",7),t.qZA()),2&r){const s=t.oxw(3);t.Q6J("ngClass",t.VKq(3,A,s.hobexPaymentSubmitted)),t.xp6(1),t.Q6J("action",s.paymentSuccessUrl,t.LSH),t.xp6(1),t.Q6J("ngStyle",t.WLB(5,I,s.hobexPaymentSubmitted?"visible":"hidden",s.hobexPaymentSubmitted?1:-1))}}function q(r,n){if(1&r&&(t.ynx(0),t.YNc(1,x,3,2,"ng-container",0),t.YNc(2,U,3,8,"div",3),t.BQk()),2&r){const s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.hobexTransactionId),t.xp6(1),t.Q6J("ngIf",!!s.hobexTransactionId)}}function T(r,n){1&r&&t._UZ(0,"div",8)}function st(r,n){if(1&r&&(t.ynx(0),t.YNc(1,q,3,2,"ng-container",0),t.YNc(2,T,1,0,"div",2),t.BQk()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",!s.sumupTransactionId),t.xp6(1),t.Q6J("ngIf",!!s.sumupTransactionId)}}function Q(r,n){1&r&&t._UZ(0,"div",9)}class nt extends R.H{constructor(n){super(),this.utility=n,this.HOBEX_JS_URL="https://oppwa.com/v1/paymentWidgets.js?checkoutId=",this.HOBEX_JS_URL_TEST="https://test.oppwa.com/v1/paymentWidgets.js?checkoutId=",this.AXEPTA_URL="https://pay.axepta.it",this.AXEPTA_URL_TEST="https://pay-sandbox.axepta.it",this.hobexPaymentSubmitted=!1}ngAfterViewInit(){if(this.sumupTransactionId)SumUpCard.mount({checkoutId:this.sumupTransactionId,locale:"it"==this.lingua?"it-IT":"en-GB",onResponse:(n,s)=>{switch(n){case"sent":this.setIsLoading(!0);break;case"invalid":break;case"auth-screen":this.setIsLoading(!1);break;case"error":this.setIsLoading(!1),this.dialogRef.close();break;case"success":this.dialogRef.close(!0)}}});else if(this.hobexTransactionId){if(void 0!==window.wpwl&&void 0!==window.wpwl.unload&&window.wpwl.unload(),void 0!==window.wpwlOptions)window.wpwlOptions.locale=this.lingua;else{let n=this;window.wpwlOptions={locale:this.lingua,paymentTarget:"hobexIFrame",shopperResultTarget:"hobexIFrame",labels:{cvv:"CVV"},onAfterSubmit:function(){n.hobexPaymentSubmitted=!0}}}this.utility.loadExternalScript((this.isTest?this.HOBEX_JS_URL_TEST:this.HOBEX_JS_URL)+this.hobexTransactionId,null,"hobex-script").then(()=>{this.setIsLoading(!1)})}else this.axeptaTransactionId&&new AxeptaSDKClient(this.isTest?this.AXEPTA_URL_TEST:this.AXEPTA_URL,this.axeptaApiKeySmartCheckout).preparePayment(this.axeptaTransactionId)}}nt.\u0275fac=function(n){return new(n||nt)(t.Y36(B.t))},nt.\u0275cmp=t.Xpm({type:nt,selectors:[["app-pagamento-form-dialog"]],inputs:{html:"html",title:"title",text:"text",sumupTransactionId:"sumupTransactionId",hobexTransactionId:"hobexTransactionId",axeptaTransactionId:"axeptaTransactionId",paymentSuccessUrl:"paymentSuccessUrl",axeptaApiKeySmartCheckout:"axeptaApiKeySmartCheckout",isTest:"isTest",lingua:"lingua",dialogRef:"dialogRef"},features:[t.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["id","my-axepta-sdk-pg",4,"ngIf"],["id","sumup-card",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"_text"],["data-brands","VISA MASTER",1,"paymentWidgets",3,"action"],["name","hobexIFrame","width","100%","height","100%","frameborder","0",1,"hobexIFrame",3,"ngStyle"],["id","sumup-card"],["id","my-axepta-sdk-pg"]],template:function(n,s){1&n&&(t.YNc(0,st,3,2,"ng-container",0),t.YNc(1,Q,1,0,"div",1)),2&n&&(t.Q6J("ngIf",!s.axeptaTransactionId),t.xp6(1),t.Q6J("ngIf",!!s.axeptaTransactionId))},dependencies:[w.mk,w.O5,w.PC,Z._Y,Z.JL,Z.F,b.W,P.X$],styles:[".wpwl-form{margin:0!important;border-radius:0!important}.hobexIFrame[_ngcontent-%COMP%]{position:absolute;top:0;left:0}  .hobex-container-hidden .wpwl-container{visibility:hidden!important}  #axepta-sdk-main-container{margin:0!important;padding:1rem!important}"]});var ut=_(78654),g=_(44769);class M{constructor(){}onOpenWindowClick(){this.dialogRef.close(window.open(this.paymentUrl))}}M.\u0275fac=function(n){return new(n||M)},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-payment-window-error"]],inputs:{paymentUrl:"paymentUrl",dialogRef:"dialogRef"},decls:10,vars:7,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"font-weight-bold"],[1,"mt-3","text-center"],["mat-flat-button","",1,"button-blue",3,"click"]],template:function(n,s){1&n&&(t.TgZ(0,"button",0)(1,"i",1),t._uU(2,"clear"),t.qZA()(),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return s.onOpenWindowClick()}),t._uU(8),t.ALo(9,"translate"),t.qZA()()),2&n&&(t.Q6J("disableRipple",!0),t.xp6(4),t.hij(" ",t.lcZ(5,3,"interfaces.pagamento-form.pagamentoBloccato"),"\n"),t.xp6(4),t.Oqu(t.lcZ(9,5,"interfaces.pagamento-form.apriFinestraPagamento")))},dependencies:[ut.eB,g.aO,P.X$]});var S=_(19209),L=_(93724),tt=_(4731),Pt=_(30724),mt=_(61612),z=_(56658),ot=_(64352),V=_(60166),xt=_(60773),D=_(92198),N=_(8954),rt=_(88667),Y=_(63942),pt=_(1477),k=_(25742);function et(r,n){if(1&r&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&r){const s=n.$implicit;t.Q6J("value",s),t.xp6(1),t.hij(" ",s.nome," ")}}function Ot(r,n){if(1&r&&(t.TgZ(0,"div",21),t._UZ(1,"app-inner-html",22),t.qZA()),2&r){const s=t.oxw(2);t.xp6(1),t.Q6J("_text",s.model.modalitaPagamento.note)}}function bt(r,n){if(1&r&&(t.TgZ(0,"div",21)(1,"span",23),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",24),t._uU(5),t.ALo(6,"eurCurrency"),t.qZA()()),2&r){const s=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"interfaces.pagamento-form.caparra")," "),t.xp6(3),t.hij(" ",t.Dn7(6,4,s.model.modalitaPagamento.caparraTotale,null,s.valuta)," ")}}function W(r,n){if(1&r&&(t.TgZ(0,"div",21),t._UZ(1,"holipay-checkout-widget"),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&r){const s=t.oxw(2);t.xp6(1),t.uIk("checkin",s.getDate(s.arrivo))("checkout",s.getDate(s.partenza))("price",t.Dn7(2,4,t.xi3(3,8,s.getImportoPagamento(),"1.2-2"),",",""))("locale",s.lingua)}}function It(r,n){if(1&r&&(t.TgZ(0,"div",21),t._UZ(1,"scalapay-widget",25),t.qZA()),2&r){const s=t.oxw(2);t.xp6(1),t.uIk("amount",s.getImportoPagamento())("min",0)("max",999999)("locale",s.lingua)}}function kt(r,n){if(1&r&&(t.ynx(0),t.YNc(1,Ot,2,1,"div",20),t.YNc(2,bt,7,8,"div",20),t.YNc(3,W,4,11,"div",20),t.YNc(4,It,2,4,"div",20),t.BQk()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",!!s.model.modalitaPagamento.note),t.xp6(1),t.Q6J("ngIf",s.showCaparra&&s.model.modalitaPagamento.caparraTotale>0),t.xp6(1),t.Q6J("ngIf",s.model.modalitaPagamento.tipo==s.enumTipoModalitaPagamento.Holipay),t.xp6(1),t.Q6J("ngIf",s.model.modalitaPagamento.tipo==s.enumTipoModalitaPagamento.ScalaPay)}}function gt(r,n){if(1&r&&(t.TgZ(0,"div",21),t._UZ(1,"app-inner-html",22),t.qZA()),2&r){const s=t.oxw(3);t.xp6(1),t.Q6J("_text",s.model.modalitaPagamento.note)}}function ft(r,n){if(1&r&&(t.TgZ(0,"div",21)(1,"span",23),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",24),t._uU(5),t.ALo(6,"eurCurrency"),t.qZA()()),2&r){const s=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"interfaces.pagamento-form.caparra")," "),t.xp6(3),t.hij(" ",t.Dn7(6,4,s.model.modalitaPagamento.caparraTotale,null,s.valuta)," ")}}function lt(r,n){if(1&r&&t._UZ(0,"img",40),2&r){const s=n.$implicit;t.Q6J("src",s,t.LSH)}}function Ft(r,n){if(1&r&&(t.TgZ(0,"div",38),t.YNc(1,lt,1,1,"img",39),t.qZA()),2&r){const s=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",s.immaginiCarteCredito)}}function it(r,n){if(1&r&&(t.ynx(0),t.YNc(1,gt,2,1,"div",20),t.YNc(2,ft,7,8,"div",20),t.YNc(3,Ft,2,1,"div",37),t.BQk()),2&r){const s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!!s.model.modalitaPagamento.note),t.xp6(1),t.Q6J("ngIf",s.showCaparra&&s.model.modalitaPagamento.caparraTotale>0),t.xp6(1),t.Q6J("ngIf",null!=s.immaginiCarteCredito&&s.immaginiCarteCredito.length>0)}}function At(r,n){if(1&r&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&r){const s=n.$implicit;t.Q6J("value",s),t.xp6(1),t.hij(" ",s.nome," ")}}function Dt(r,n){if(1&r&&(t.TgZ(0,"div",41)(1,"div",42),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"div",43),t._UZ(5,"img",44)(6,"img",45),t.qZA()(),t.TgZ(7,"div",46),t._UZ(8,"app-credit-card",47),t.qZA()()),2&r){t.oxw();const s=t.MAs(28),u=t.MAs(13),d=t.MAs(24),h=t.MAs(19);t.xp6(2),t.hij(" ",t.lcZ(3,5,"interfaces.pagamento-form.crittografiaCarte")," "),t.xp6(6),t.Q6J("nameInput",s)("cardNumberInput",u)("expirationDateInput",d)("securityCodeInput",h)}}const Zt=function(r,n){return{"col-12 col-md-8":r,"col-12":n}};function yt(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"div")(1,"div",26)(2,"div",27),t.YNc(3,it,4,3,"ng-container",7),t.TgZ(4,"div",26)(5,"div",28)(6,"mat-form-field",29)(7,"mat-select",30),t.NdJ("ngModelChange",function(d){t.CHM(s);const h=t.oxw();return t.KtG(h.model.tipoCarta=d)})("ngModelChange",function(){t.CHM(s);const d=t.oxw();return t.KtG(d.verifyValidity())}),t.ALo(8,"translate"),t.YNc(9,At,2,2,"mat-option",6),t.qZA()()(),t.TgZ(10,"div",28)(11,"mat-form-field",29)(12,"input",31,32),t.NdJ("ngModelChange",function(d){t.CHM(s);const h=t.oxw();return t.KtG(h.model.numeroCarta=d)})("ngModelChange",function(){t.CHM(s);const d=t.oxw();return t.KtG(d.verifyValidity())}),t.ALo(14,"translate"),t.qZA()()()(),t.TgZ(15,"div",26)(16,"div",28)(17,"mat-form-field",29)(18,"input",31,33),t.NdJ("ngModelChange",function(d){t.CHM(s);const h=t.oxw();return t.KtG(h.model.codiceSicurezza=d)})("ngModelChange",function(){t.CHM(s);const d=t.oxw();return t.KtG(d.verifyValidity())}),t.ALo(20,"translate"),t.qZA()()(),t.TgZ(21,"div",28)(22,"mat-form-field",29)(23,"input",31,34),t.NdJ("ngModelChange",function(d){t.CHM(s);const h=t.oxw();return t.KtG(h.dataScadenza=d)})("ngModelChange",function(){t.CHM(s);const d=t.oxw();return d.splitDataScadenza(),t.KtG(d.verifyValidity())}),t.ALo(25,"translate"),t.qZA()()()(),t.TgZ(26,"mat-form-field",29)(27,"input",31,35),t.NdJ("ngModelChange",function(d){t.CHM(s);const h=t.oxw();return t.KtG(h.model.titolareCarta=d)})("ngModelChange",function(){t.CHM(s);const d=t.oxw();return t.KtG(d.verifyValidity())}),t.ALo(29,"translate"),t.qZA()()(),t.YNc(30,Dt,9,7,"div",36),t.qZA()()}if(2&r){const s=t.oxw();t.xp6(2),t.Q6J("ngClass",t.WLB(34,Zt,!s.disabled,s.disabled)),t.xp6(1),t.Q6J("ngIf",!s.disabled),t.xp6(4),t.Q6J("panelClass","booking-select-unlimited-height")("ngModel",s.model.tipoCarta)("placeholder",t.lcZ(8,24,"interfaces.pagamento-form.tipoCarta"))("disabled",s.disabled),t.xp6(2),t.Q6J("ngForOf",s.carteCredito),t.xp6(3),t.Q6J("ngModel",s.model.numeroCarta)("placeholder",t.lcZ(14,26,"interfaces.pagamento-form.numero"))("readOnly",s.disabled)("disabled",s.disabled),t.xp6(6),t.Q6J("ngModel",s.model.codiceSicurezza)("placeholder",t.lcZ(20,28,"interfaces.pagamento-form.codiceSicurezza"))("readOnly",s.disabled)("disabled",s.disabled),t.xp6(5),t.Q6J("ngModel",s.dataScadenza)("placeholder",t.lcZ(25,30,"interfaces.pagamento-form.scadenza"))("readOnly",s.disabled)("disabled",s.disabled),t.xp6(4),t.Q6J("ngModel",s.model.titolareCarta)("placeholder",t.lcZ(29,32,"interfaces.pagamento-form.titolare"))("readOnly",s.disabled)("disabled",s.disabled),t.xp6(3),t.Q6J("ngIf",!s.disabled)}}function p(r,n){if(1&r&&(t.TgZ(0,"div",28)(1,"span",51),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",52),t._uU(5),t.qZA()()),2&r){const s=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"interfaces.pagamento-form.banca")),t.xp6(3),t.Oqu(s.model.modalitaPagamento.banca)}}function e(r,n){if(1&r&&(t.TgZ(0,"div",28)(1,"span",51),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",52),t._uU(5),t.qZA()()),2&r){const s=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"interfaces.pagamento-form.intestatario")),t.xp6(3),t.Oqu(s.model.modalitaPagamento.intestatarioConto)}}function i(r,n){if(1&r&&(t.TgZ(0,"div",28)(1,"span",51),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",52),t._uU(5),t.qZA()()),2&r){const s=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"interfaces.pagamento-form.iban")),t.xp6(3),t.Oqu(s.model.modalitaPagamento.iban)}}function a(r,n){if(1&r&&(t.TgZ(0,"div",28)(1,"span",51),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",52),t._uU(5),t.qZA()()),2&r){const s=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"interfaces.pagamento-form.swift")),t.xp6(3),t.Oqu(s.model.modalitaPagamento.swift)}}function o(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"div",56)(1,"a",57),t.NdJ("click",function(d){t.CHM(s);const h=t.oxw(3);return d.preventDefault(),t.KtG(h.openCroDialog())}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&r&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"interfaces.pagamento-form.cosaSignifica")))}function l(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"div",26)(1,"div",53)(2,"mat-form-field",29)(3,"input",54),t.NdJ("ngModelChange",function(d){t.CHM(s);const h=t.oxw(2);return t.KtG(h.model.codiceRiferimentoOperazione=d)})("ngModelChange",function(){t.CHM(s);const d=t.oxw(2);return t.KtG(d.verifyValidity())}),t.ALo(4,"translate"),t.qZA()()(),t.YNc(5,o,4,3,"div",55),t.qZA()}if(2&r){const s=t.oxw(2);t.xp6(3),t.Q6J("ngModel",s.model.codiceRiferimentoOperazione)("placeholder",t.lcZ(4,5,"interfaces.pagamento-form.codiceRiferimentoOperazione"))("readOnly",s.disabled)("disabled",s.disabled),t.xp6(2),t.Q6J("ngIf",!s.disabled)}}const m=function(r){return{"mb-3":r}};function C(r,n){if(1&r&&(t.TgZ(0,"div")(1,"div",48),t.YNc(2,p,6,4,"div",49),t.YNc(3,e,6,4,"div",49),t.YNc(4,i,6,4,"div",49),t.YNc(5,a,6,4,"div",49),t.qZA(),t.YNc(6,l,6,7,"div",50),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(6,m,!s.isVisualizzaCRO)),t.xp6(1),t.Q6J("ngIf",!!s.model.modalitaPagamento.banca),t.xp6(1),t.Q6J("ngIf",!!s.model.modalitaPagamento.intestatarioConto),t.xp6(1),t.Q6J("ngIf",!!s.model.modalitaPagamento.iban),t.xp6(1),t.Q6J("ngIf",!!s.model.modalitaPagamento.swift),t.xp6(1),t.Q6J("ngIf",!s.disabled&&s.isVisualizzaCRO)}}function v(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"div")(1,"mat-checkbox",58),t.NdJ("change",function(){t.CHM(s);const d=t.oxw();return t.KtG(d.verifyValidity())})("ngModelChange",function(d){t.CHM(s);const h=t.oxw();return t.KtG(h.model.privacy=d)}),t.TgZ(2,"a",59),t.NdJ("click",function(d){t.CHM(s);const h=t.oxw();return d.preventDefault(),t.KtG(h.openPrivacyDialog())}),t._uU(3),t.ALo(4,"translate"),t.qZA()()()}if(2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngModel",s.model.privacy)("disabled",s.disabled),t.xp6(2),t.Oqu(t.lcZ(4,3,"interfaces.pagamento-form.privacy"))}}function E(r,n){1&r&&(t.TgZ(0,"span",63),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"interfaces.pagamento-form.accettoLeCondizioniDiContratto")))}function dt(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"a",64),t.NdJ("click",function(d){t.CHM(s);const h=t.oxw(3);return d.preventDefault(),t.KtG(h.openCondizioniContrattoDialog())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"interfaces.pagamento-form.accettoLeCondizioniDiContratto")))}function G(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"mat-checkbox",58),t.NdJ("change",function(){t.CHM(s);const d=t.oxw(2);return t.KtG(d.verifyValidity())})("ngModelChange",function(d){t.CHM(s);const h=t.oxw(2);return t.KtG(h.contrattoAccettatto=d)}),t.YNc(1,E,3,3,"span",61),t.YNc(2,dt,3,3,"a",62),t.qZA()}if(2&r){const s=t.oxw(2);t.Q6J("ngModel",s.contrattoAccettatto)("disabled",s.disabled),t.xp6(1),t.Q6J("ngIf",!s.condizioniContratto),t.xp6(1),t.Q6J("ngIf",!!s.condizioniContratto)}}function at(r,n){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,G,3,4,"mat-checkbox",60),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.isAccettaContrattoPrenotazioneStep2)}}function Tt(r,n){1&r&&(t.TgZ(0,"span",63),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"interfaces.pagamento-form.trattamentoDatiPersonali")))}function Et(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(d){t.CHM(s);const h=t.oxw(2);return d.preventDefault(),t.KtG(h.openNewsletterDialog())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"interfaces.pagamento-form.trattamentoDatiPersonali")))}function ct(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"div")(1,"mat-checkbox",65),t.NdJ("change",function(){t.CHM(s);const d=t.oxw();return t.KtG(d.verifyValidity())})("ngModelChange",function(d){t.CHM(s);const h=t.oxw();return t.KtG(h.model.newsletter=d)}),t.YNc(2,Tt,3,3,"span",61),t.YNc(3,Et,3,3,"a",66),t.qZA()()}if(2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngModel",s.model.newsletter)("disabled",s.disabled),t.xp6(1),t.Q6J("ngIf",null==s.newsLetterPortale||!s.newsLetterPortale.html&&!s.newsLetterPortale.url),t.xp6(1),t.Q6J("ngIf",!(null==s.newsLetterPortale||!s.newsLetterPortale.html&&!s.newsLetterPortale.url))}}function Lt(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"div",68)(1,"re-captcha",69),t.NdJ("resolved",function(){t.CHM(s);const d=t.oxw();return d.recaptchaResolved=!0,t.KtG(d.verifyValidity())}),t.qZA()()}2&r&&(t.xp6(1),t.Q6J("siteKey","6LcsQ90ZAAAAAD6motJOcWzKpaG4R33OtsR7jVn1"))}const Bt=function(r){return{"w-100":r}};function St(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(s);const d=t.oxw(2);return t.KtG(d.pay())}),t.TgZ(1,"span",73),t._uU(2,"check"),t.qZA(),t.TgZ(3,"span",52),t._uU(4),t.ALo(5,"translate"),t.qZA()()}if(2&r){const s=t.oxw(2);t.Q6J("ngClass",t.VKq(5,Bt,s.fullWidthButton))("disabled",!s.paymentFormValid||!s.formValid),t.xp6(4),t.Oqu(s.model.modalitaPagamento.testoBottonePaga?s.model.modalitaPagamento.testoBottonePaga:t.lcZ(5,3,"interfaces.pagamento-form.paga"))}}function Rt(r,n){if(1&r&&(t.TgZ(0,"div",70),t.YNc(1,St,6,7,"button",71),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.model.modalitaPagamento.tipo!=s.enumTipoModalitaPagamento.PayPal)}}const _t=function(r){return{"mat-elevation-z5":r}};class Ct extends R.H{set _totale(n){this.totale=n,this.calculateCaparra()}set _isAccettaContrattoPrenotazioneStep2(n){null!=n&&(this.isAccettaContrattoPrenotazioneStep2=n,this.contrattoAccettatto=!n)}set _recaptchaAttiva(n){null!=n&&(this.recaptchaAttiva=n,this.recaptchaResolved=!n)}set linguaPortaleAlbergo(n){if(null!=n&&n.oidAlbergo&&n.lingua){this.oidAlbergo=n.oidAlbergo,this.oidPortale=n.oidPortale,this.lingua=n.lingua;let s=new y.F0x;if(s.oidAlbergo=this.oidAlbergo,s.oidPortale=this.oidPortale,s.lingua=this.lingua,this.apiService.getPagamentoFormView(s).subscribe(u=>{if(this.carteCredito=u.data.tipiCarteCredito,this.immaginiCarteCredito=[],null!=this.carteCredito&&this.carteCredito.length>0){this.model.tipoCarta=this.carteCredito[0];for(let d of this.carteCredito)if(null!=d.tipoCartaCredito){let h=this.immaginiTipiCarteCredito.get(d.tipoCartaCredito);h&&!this.immaginiCarteCredito.includes(h)&&this.immaginiCarteCredito.push(h)}}this.newsLetterPortale=u.data.newsLetterPortale}),null==this.modalitaPagamento||0==this.modalitaPagamento.length){this.gettingModalitaPagamentoDefault=!0;let u=new y.X00;u.oidAlbergo=this.oidAlbergo,u.lingua=this.lingua,this.apiService.getModalitaPagamentoDefault(u).subscribe(d=>{this.modalitaPagamentoSet?this.gettingModalitaPagamentoDefault1||(this.modalitaPagamentoSet=!1):null!=d.data?(this.modalitaPagamento=[d.data],this.model.modalitaPagamento=d.data,this.calculateCaparra()):(this.modalitaPagamento=[],this.model.modalitaPagamento=new y.XL7(-1),this.noPaymentMethod.emit()),this.gettingModalitaPagamentoDefault=!1})}}}set _modalitaPagamento(n){if(null!=n)if(this.modalitaPagamento=n,this.modalitaPagamento.length>0){if((this.gettingModalitaPagamentoDefault||this.gettingModalitaPagamentoDefault1)&&(this.modalitaPagamentoSet=!0),null==this.model.modalitaPagamento||this.model.modalitaPagamento.paymentId<=0)this.model.modalitaPagamento=this.modalitaPagamento[0];else{let s=this.modalitaPagamento.find(u=>u.paymentId==this.model.modalitaPagamento.paymentId);this.model.modalitaPagamento=null==s?this.modalitaPagamento[0]:s}this.calculateCaparra()}else if(this.oidAlbergo>0&&this.lingua){this.gettingModalitaPagamentoDefault1=!0;let s=new y.X00;s.oidAlbergo=this.oidAlbergo,s.lingua=this.lingua,this.apiService.getModalitaPagamentoDefault(s).subscribe(u=>{this.modalitaPagamentoSet?this.gettingModalitaPagamentoDefault||(this.modalitaPagamentoSet=!1):null!=u.data?(this.modalitaPagamento=[u.data],this.model.modalitaPagamento=u.data,this.calculateCaparra()):(this.modalitaPagamento=[],this.model.modalitaPagamento=new y.XL7(-1),this.noPaymentMethod.emit()),this.gettingModalitaPagamentoDefault1=!1})}}set _formValid(n){this.formValid=n,this.checkPaypalButtonEnabled()}set _camere(n){null!=n&&(null==this.camere||JSON.stringify(n)!=JSON.stringify(this.camere))&&(this.camere=n,this.calculateCaparra())}set allModalitaPagamento(n){null!=n&&setTimeout(()=>{let s=n.find(H=>H.tipo==c.sc.PayPal);null!=s&&this.initPaypalConfig(s.paypalClientId);let u=n.find(H=>H.tipo==c.sc.Stripe);null!=u&&null!=document.getElementById("card-number-element")&&this.utilityService.loadExternalScript(this.STRIPE_JS_URL).then(()=>{this.stripe=Stripe(u.stripePublicKey);let H=this.stripe.elements();this.cardNumberElement=H.create("cardNumber",{placeholder:""}),this.cardNumberElement.mount("#card-number-element"),this.cardNumberElement.on("change",Mt=>{Mt.complete?this.stripeCardNumberValid=!0:Mt.error&&(this.stripeCardNumberValid=!1),this.verifyValidity()});let zt=H.create("cardExpiry");zt.mount("#card-expiry-element"),zt.on("change",Mt=>{Mt.complete?this.stripeExpirationValid=!0:Mt.error&&(this.stripeExpirationValid=!1),this.verifyValidity()});let Nt=H.create("cardCvc",{placeholder:""});Nt.mount("#card-cvc-element"),Nt.on("change",Mt=>{Mt.complete?this.stripeCvcValid=!0:Mt.error&&(this.stripeCvcValid=!1),this.verifyValidity()})});let d=n.find(H=>H.tipo==c.sc.Satispay);null!=d&&this.utilityService.loadExternalScript(d.isTest?this.SATISPAY_BUTTON_URL_TEST:this.SATISPAY_BUTTON_URL,[{name:"data-payment-id",value:"test"}]),null!=n.find(H=>H.tipo==c.sc.SumUp)&&this.utilityService.loadExternalScript(this.SUMUP_WIDGET_URL),null!=n.find(H=>H.tipo==c.sc.AddonPayments)&&this.utilityService.loadExternalScript(this.ADDON_PAYMENTS_LIGHTBOX_URL);let Vt=n.find(H=>H.tipo==c.sc.Axepta);null!=Vt&&this.utilityService.loadExternalScript(Vt.isTest?this.AXEPTA_JS_URL_TEST:this.AXEPTA_JS_URL);let Ut=n.find(H=>H.tipo==c.sc.Holipay);null!=Ut&&this.utilityService.loadExternalScript(this.HOLIPAY_WIDGET_URL+Ut.holipayHotelId),null!=n.find(H=>H.tipo==c.sc.ScalaPay)&&(this.utilityService.loadExternalScript(this.SCALAPAY_ESM_WIDGET_URL,[new y.u$m("type","module")]),this.utilityService.loadExternalScript(this.SCALAPAY_WIDGET_URL,[new y.u$m("nomodule")]))},500)}set _caparra(n){this.caparra=n,this.calculateCaparra()}set _isCaparraPercentuale(n){this.isCaparraPercentuale=n,this.calculateCaparra()}set privacy(n){null!=n&&(this.model.privacy=n,this.verifyValidity())}set newsletter(n){null!=n&&(this.model.newsletter=n)}beforeUnloadHandler(n){null!=this.window&&this.window.close()}constructor(n,s,u,d){super(),this.apiService=n,this.containerService=s,this.utilityService=u,this.localStorage=d,this.testEnvironment="localhost",this.enumTipoModalitaPagamento=c.sc,this.model=new y.l_j,this.modalitaPagamento=[],this.gettingModalitaPagamentoDefault=!1,this.gettingModalitaPagamentoDefault1=!1,this.modalitaPagamentoSet=!1,this.immaginiCarteCredito=[],this.pagamentoSuccessUrl="https://booking."+("waf"==X.N.environmentName?"passstage":"passepartout")+".cloud/booking/pagamentoSuccess?oidTransazione=",this.pagamentoErrorUrl="https://booking."+("waf"==X.N.environmentName?"passstage":"passepartout")+".cloud/booking/pagamentoError?oidTransazione=",this.stripeCardNumberValid=!1,this.stripeExpirationValid=!1,this.stripeCvcValid=!1,this.immaginiTipiCarteCredito=new Map([[c.Cf.Visa,"/assets/images/booking/credit-card/visa.svg"],[c.Cf.AmericanExpress,"/assets/images/booking/credit-card/american-express.svg"],[c.Cf.MasterCard,"/assets/images/booking/credit-card/mastercard.svg"],[c.Cf.DiscoveryCard,"/assets/images/booking/credit-card/discover.svg"],[c.Cf.DinersClub,"/assets/images/booking/credit-card/diners.svg"],[c.Cf.JCB,"/assets/images/booking/credit-card/jcb.svg"],[c.Cf.EuroCard,""],[c.Cf.BankCard,""],[c.Cf.CarteBlanche,""],[c.Cf.CarteBleu,""],[c.Cf.UniversalAir,""],[c.Cf.Maestro,"/assets/images/booking/credit-card/maestro.svg"],[c.Cf.EnRoute,""],[c.Cf.AccessCard,""],[c.Cf.BankAmeriCard,""],[c.Cf.ChinaUnionPay,"/assets/images/booking/credit-card/unionpay.svg"],[c.Cf.Dankort,""],[c.Cf.DinersClub_USACanada,""],[c.Cf.InstaPayment,""],[c.Cf.Laser,""],[c.Cf.VisaElectron,""],[c.Cf.Sconosciuto,""]]),this.paymentSuccess=!1,this.descrizione="Prenotazione",this.elevation=!0,this.showCaparra=!0,this.fullWidthButton=!1,this.createOrder=new t.vpe,this.noPaymentMethod=new t.vpe,this.onPaymentError=new t.vpe,this.onCaparraChange=new t.vpe,this.satispayCompleted=!1,this.recaptchaAttiva=!1,this.recaptchaResolved=!0,this.isAccettaContrattoPrenotazioneStep2=!1,this.contrattoAccettatto=!0,this.axeptaPaymentResultReceived=!1,this.popupSuccess=!1,this.ADDONPAYMENTS_API_URL="https://hpp.addonpayments.com/pay",this.ADDONPAYMENTS_API_URL_TEST="https://hpp.sandbox.addonpayments.com/pay",this.ADDON_PAYMENTS_LIGHTBOX_URL="/assets/js/booking/rxp-hpp.js",this.SATISPAY_BUTTON_URL="https://online.satispay.com/web-button.js",this.SATISPAY_BUTTON_URL_TEST="https://staging.online.satispay.com/web-button.js",this.SUMUP_WIDGET_URL="https://gateway.sumup.com/gateway/ecom/card/v2/sdk.js",this.STRIPE_JS_URL="https://js.stripe.com/v3/",this.AXEPTA_JS_URL="https://pay.axepta.it/sdk/axepta-pg-sdk.js",this.AXEPTA_JS_URL_TEST="https://pay-sandbox.axepta.it/sdk/axepta-pg-sdk.js",this.HOLIPAY_WIDGET_URL="https://api.holipay.com/holipay.js?hotel_id=",this.SCALAPAY_WIDGET_URL="https://cdn.scalapay.com/widget/v3/js/scalapay-widget.js",this.SCALAPAY_ESM_WIDGET_URL="https://cdn.scalapay.com/widget/v3/js/scalapay-widget.esm.js"}ngOnInit(){window.addEventListener("message",n=>{"https://staging.online.satispay.com"!=n.origin&&"https://online.satispay.com"!=n.origin||null==n.data||"webButtonEvent"!=n.data.type?("axepta_SUCCESS_message"==n.data||"axepta_FAILURE_message"==n.data||"Axepta3dsClosed"==n.data)&&!this.axeptaPaymentResultReceived&&this.checkAxeptaMessage(n):"close"==n.data.action&&setTimeout(()=>{this.satispayCompleted?this.satispayCompleted=!1:this.satispayPaymentId&&this.cancelSatispayOrder(!1).then(()=>{},()=>{})},500)},!1),this.localStorageSub=this.localStorage.observe("popupCheckSuccess").subscribe(()=>{null!=this.window&&(this.popupSuccess=!0,this.openPaymentWindow(!0))}),this.testEnvironment&&this.isLocalhost&&("localhost"==this.testEnvironment?(this.pagamentoSuccessUrl=window.location.origin+"/booking/pagamentoSuccess?oidTransazione=",this.pagamentoErrorUrl=window.location.origin+"/booking/pagamentoError?oidTransazione="):"waf"==this.testEnvironment&&(this.pagamentoSuccessUrl="https://booking.passstage.cloud/booking/pagamentoSuccess?oidTransazione=",this.pagamentoErrorUrl="https://booking.passstage.cloud/booking/pagamentoError?oidTransazione="))}checkAxeptaMessage(n){this.axeptaPaymentResultReceived=!0,"axepta_SUCCESS_message"==n.data?setTimeout(()=>{this.dialog.close(),this.createOrder.emit(this.model)},2e3):"axepta_FAILURE_message"==n.data?setTimeout(()=>{this.dialog.close(),this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit("")},2e3):"Axepta3dsClosed"==n.data&&(this.dialog.close(),this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(""))}initPaypalConfig(n){this.payPalConfig={clientId:n,currency:"EUR",style:{label:"pay",shape:"pill",color:"gold",layout:"horizontal",tagline:!1},createOrderOnServer:s=>this.createPaypalOrder(),authorizeOnServer:(s,u)=>this.capturePaypalOrder().then(d=>{this.createOrder.emit(this.model)},d=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(d)}),onApprove:(s,u)=>{},onCancel:(s,u)=>{},onError:s=>{},onClick:(s,u)=>{!this.formValid&&this.errorMessage||!this.paymentFormValid?!this.formValid&&this.errorMessage?this.showError(this.errorMessage):this.recaptchaResolved?this.showError("globals.messages.inserireDati"):this.showError("interfaces.pagamento-form.risolvereReCaptcha"):this.getImportoPagamento()<=0&&this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento")},onInit:(s,u)=>{this.paypalButton=u}}}reset(){this.model.codiceRiferimentoOperazione=null,null!=this.carteCredito&&this.carteCredito.length>0&&(this.model.tipoCarta=this.carteCredito[0]),this.model.numeroCarta=null,this.model.codiceSicurezza=null,this.model.scadenzaCartaMese=null,this.model.scadenzaCartaAnno=null,this.model.titolareCarta=null,this.verifyValidity()}verifyValidity(){this.model.privacy&&this.recaptchaResolved&&this.contrattoAccettatto?this.model.modalitaPagamento.tipo==c.sc.CartaCredito?this.model.titolareCarta&&this.model.numeroCarta&&this.model.codiceSicurezza&&this.model.scadenzaCartaMese&&this.model.scadenzaCartaAnno&&null!=this.model.tipoCarta?this.paymentFormValid=!0:this.paymentFormValid=!1:this.model.modalitaPagamento.tipo==c.sc.Stripe?this.paymentFormValid=this.stripeCardNumberValid&&this.stripeExpirationValid&&this.stripeCvcValid:this.model.modalitaPagamento.tipo==c.sc.BonificoBancario?this.paymentFormValid=!this.isVisualizzaCRO||!!this.model.codiceRiferimentoOperazione:this.paymentFormValid=!0:this.paymentFormValid=!1,this.checkPaypalButtonEnabled()}openPrivacyDialog(){this.setIsLoading(!0);let n=new y.YZY;n.oidPortale=this.oidPortale,n.lingua=this.lingua,this.apiService.getPrivacyPortale(n).subscribe(s=>{this.setIsLoading(!1),this.openPrivacyNewsletterDialog(s.data)})}openNewsletterDialog(){this.openPrivacyNewsletterDialog(this.newsLetterPortale)}openPrivacyNewsletterDialog(n){n.html?this.openDialog(!0,null,n.html):n.url&&this.utilityService.openUrlInNewTab(n.url)}openCondizioniContrattoDialog(){this.openDialog(!0,null,this.condizioniContratto)}openCroDialog(){this.openDialog(!1,"interfaces.pagamento-form.croTitle","interfaces.pagamento-form.croText")}openDialog(n,s,u){let d=new y.Zpt;this.containerService.dimension.width>=992?d.width="50vw":d.width="80vw";let vt=this.showModalDialog(nt,d).componentInstance;vt.html=n,vt.title=s,vt.text=u}pay(){this.getImportoPagamento()>0?this.model.modalitaPagamento.tipo==c.sc.BancaSella?this.createTransaction().then(()=>{this.encryptGestPayOrder().then(n=>{this.setTransactionId(n.transaction_id).then(()=>{this.openWindow(n.redirect_url)})},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n),this.deleteTransaction(),this.setIsLoading(!1)})}):this.model.modalitaPagamento.tipo==c.sc.XPay?this.arrivo&&this.partenza?this.createTransaction().then(()=>{this.createXPayReservation().then(n=>{this.openWindow(null,n.form)},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n),this.deleteTransaction()})}):this.createTransaction().then(()=>{this.createXPayOrder().then(n=>{this.openWindow(null,n.form)},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n),this.deleteTransaction()})}):this.model.modalitaPagamento.tipo==c.sc.Satispay?this.createSatispayOrder().then(n=>{this.satispayPaymentId=n.transaction_id,SatispayWebButton.configure({paymentId:n.transaction_id,completed:()=>{this.satispayCompleted=!0,this.verifySatispayOrder().then(u=>{"KO"==u.payment_status?(this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(u.payment_status),this.setIsLoading(!1)):"OK"==u.payment_status&&this.createOrder.emit(this.model)},u=>{this.cancelSatispayOrder().then(()=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(u)},d=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(d)})})}}).open()},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n)}):this.model.modalitaPagamento.tipo==c.sc.Stripe?(this.setIsLoading(!0),this.stripe.createPaymentMethod({type:"card",card:this.cardNumberElement}).then(n=>{null!=n.paymentMethod?this.model.modalitaPagamento.isUsePost?this.createTransaction().then(()=>{this.checkPayment(),this.stripePayment(n.paymentMethod.id)}):this.stripePayment(n.paymentMethod.id).then(s=>{null!=s.error?(s.error.message?this.showError(s.error.message):this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(s.error),this.setIsLoading(!1)):null!=s.paymentIntent&&this.createOrder.emit(this.model)},()=>{}):null!=n.error&&(n.error.message?this.showError(n.error.message):this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n.error.message),this.setIsLoading(!1))})):this.model.modalitaPagamento.tipo==c.sc.PayWay?this.createTransaction().then(()=>{this.createPayWayOrder().then(n=>{this.setTransactionId(n.transaction_id).then(()=>{this.openWindow(n.redirect_url)})},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n),this.deleteTransaction(),this.setIsLoading(!1)})}):this.model.modalitaPagamento.tipo==c.sc.Unicredit?this.createTransaction().then(()=>{this.createUnicreditOrder().then(n=>{this.setTransactionId(n.transaction_id).then(()=>{this.openWindow(n.redirect_url)})},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n),this.deleteTransaction(),this.setIsLoading(!1)})}):this.model.modalitaPagamento.tipo==c.sc.CartaCredito?this.isVerificaCartaCredito?this.verificaCartaCredito().then(()=>{this.createOrder.emit(this.model)},()=>{this.showError("interfaces.pagamento-form.cartaCreditoNonValida")}):this.createOrder.emit(this.model):this.model.modalitaPagamento.tipo==c.sc.AddonPayments?this.openLightBoxAddonPayments():this.model.modalitaPagamento.tipo==c.sc.BeSafePay?this.createTransaction().then(()=>{this.createBeSafePayOrder().then(n=>{this.openWindow(n.redirect_url)},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n),this.deleteTransaction(),this.setIsLoading(!1)})}):this.model.modalitaPagamento.tipo==c.sc.SumUp?this.createSumUpOrder().then(n=>{this.openIFrameSumUp()},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n)}):this.model.modalitaPagamento.tipo==c.sc.Hobex?(this.setIsLoading(!0),this.apiService.payment(y.sK_.getHobexCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.hobexEntityId,this.model.modalitaPagamento.hobexAccessToken,this.getImportoPagamento(),this.model.modalitaPagamento.isTest,"EUR",this.model.modalitaPagamento.tipoContabilizzazione==c.XI.Immediata?"I":"D")).subscribe(n=>{n.success&&n.transaction_id?this.createTransaction(n.transaction_id).then(()=>{this.checkPayment(),this.openIFrameHobex(n.transaction_id)}):(this.setIsLoading(!1),this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n.error))})):this.model.modalitaPagamento.tipo==c.sc.Axepta?(this.setIsLoading(!0),this.apiService.payment(y.sK_.getAxeptaCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.axeptaApiKey,this.model.modalitaPagamento.axeptaAccessToken,this.getImportoPagamento(),this.model.modalitaPagamento.isTest,"it"==this.lingua?"IT":"EN","EUR",this.model.modalitaPagamento.tipoContabilizzazione==c.XI.Immediata?"I":"D")).subscribe(n=>{n.success&&n.transaction_id?(this.setIsLoading(!1),this.openAxeptaModal(n.transaction_id)):(this.setIsLoading(!1),this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n.error))})):this.model.modalitaPagamento.tipo==c.sc.Holipay?this.createTransaction().then(()=>{this.apiService.payment(y.sK_.getHolipayCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.holipayHotelId,this.model.modalitaPagamento.holipaySecretKey,this.getImportoPagamento(),this.getSuccessUrl(),this.getErrorUrl(),this.model.oidTransazione,this.model.modalitaPagamento.isTest)).subscribe(n=>{n.success&&n.redirect_url?this.openWindow(n.redirect_url):(this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n.error),this.deleteTransaction(),this.setIsLoading(!1))})}):this.model.modalitaPagamento.tipo==c.sc.Siapay?this.createTransaction().then(()=>{this.apiService.payment(y.sK_.getSiapayCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.siapayShopId,this.model.modalitaPagamento.siapaySecretKey,this.getImportoPagamento(),this.getSuccessUrl(),this.getErrorUrl(),this.model.oidTransazione,this.model.modalitaPagamento.isTest,"it"==this.lingua?"ITA":"EN",this.model.modalitaPagamento.tipoContabilizzazione==c.XI.Immediata?"I":"D")).subscribe(n=>{n.success&&n.redirect_url?this.openWindow(n.redirect_url):(this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n.error),this.deleteTransaction(),this.setIsLoading(!1))})}):this.model.modalitaPagamento.tipo==c.sc.ScalaPay?this.createTransaction().then(()=>{this.createScalaPayOrder().then(n=>{this.setTransactionId(this.model.modalitaPagamento.scalaPayApiKey+" "+n.token).then(()=>{this.openWindow(n.redirect_url)})},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n),this.deleteTransaction(),this.setIsLoading(!1)})}):this.model.modalitaPagamento.tipo==c.sc.VirtualPay?this.createTransaction().then(()=>{this.createVirtualPayOrder().then(n=>{this.openWindow(n.redirect_url)},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n),this.deleteTransaction(),this.setIsLoading(!1)})}):this.model.modalitaPagamento.tipo==c.sc.MyPOS?this.createTransaction().then(()=>{this.createMyPOSOrder().then(n=>{this.openWindow(null,n.form)},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n),this.deleteTransaction(),this.setIsLoading(!1)})}):this.model.modalitaPagamento.tipo!=c.sc.PayPal&&this.createOrder.emit(this.model):this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento")}stripePayment(n){return new Promise((s,u)=>{this.apiService.payment(y.sK_.getStripeCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.stripeSecretKey,this.getImportoPagamento(),this.model.oidTransazione,this.model.modalitaPagamento.isTest,this.descrizione,"EUR",this.model.modalitaPagamento.tipoContabilizzazione==c.XI.Differita)).subscribe(d=>{d.success&&d.transaction_id&&d.client_secret?this.stripe.confirmCardPayment(d.client_secret,{payment_method:n}).then(h=>{s(h)}):(this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(d.error),this.deleteTransaction(),this.setIsLoading(!1),u())})})}openLightBoxAddonPayments(){this.getConfigAddonPayments().then(n=>{RealexHpp.setHppUrl(this.model.modalitaPagamento.isTest?this.ADDONPAYMENTS_API_URL_TEST:this.ADDONPAYMENTS_API_URL),RealexHpp.lightbox.init("autoload",this.addonPaymentsCallback.bind(this),n.config)},n=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n)})}addonPaymentsCallback(n,s){null!=n&&n.MERCHANT_ID&&n.ORDER_ID&&"00"==n.RESULT?this.createOrder.emit(this.model):(this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n.MESSAGE)),s()}onPopupCheckFail(){this.localStorage.set("popupCheckFailed",!0),this.setIsLoading(!1);let n=new y.Zpt,s=this.showModalDialog(M,n),u=s.componentInstance;u.paymentUrl=this.windowUrl,u.dialogRef=s,s.afterClosed().subscribe(d=>{null!=d?(this.setIsLoading(!0),this.window=d,this.openPaymentWindow(!1)):this.deleteTransaction()})}openWindow(n,s){this.setIsLoading(!0),n?this.windowUrl=n:s&&(this.localStorage.set("paymentForm",s),this.windowUrl=window.location.origin+"/booking/paymentForm"),this.popupSuccess=!1,this.localStorage.set("popupCheckFailed",!1),this.window=window.open(window.location.origin+"/booking/popupCheck","_blank"),null==this.window?this.onPopupCheckFail():setTimeout(()=>{this.popupSuccess||this.onPopupCheckFail()},5e3)}openPaymentWindow(n){n&&(this.window.location.href=this.windowUrl),this.window.focus();let s=setInterval(()=>{null!=this.window?this.window.closed&&(clearInterval(this.interval),clearInterval(s),this.paymentSuccess?this.createOrder.emit(this.model):(this.deleteTransaction(),this.setIsLoading(!1)),this.window=null):clearInterval(s)},1e3);this.checkPayment()}openIFrameSumUp(){let n=new y.Zpt;this.containerService.dimension.width>=992?n.width="80vw":n.width="100vw",n.disableClose=!0,n.panelClass="no-padding-overflow-dialog",n.maxHeight="100vh";let s=this.showModalDialog(nt,n),u=s.componentInstance;u.sumupTransactionId=this.sumupTransactionId,u.lingua=this.lingua,u.dialogRef=s,s.afterClosed().subscribe(d=>{d?this.verifySumUpOrder().then(h=>{"KO"==h.payment_status?(this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(""),this.setIsLoading(!1)):"OK"==h.payment_status&&this.createOrder.emit(this.model)},h=>{this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(h),this.setIsLoading(!1)}):(this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(""),this.setIsLoading(!1))})}openIFrameHobex(n){let s=new y.Zpt;s.disableClose=!0,s.panelClass="no-padding-overflow-dialog",s.minHeight="0vh",this.dialog=this.showModalDialog(nt,s);let u=this.dialog.componentInstance;u.hobexTransactionId=n,u.paymentSuccessUrl=this.getSuccessUrl(),u.isTest=this.model.modalitaPagamento.isTest,u.lingua=this.lingua,u.dialogRef=this.dialog,this.dialog.afterClosed().subscribe(d=>{this.dialog=null,d?(clearInterval(this.interval),this.createOrder.emit(this.model)):(this.deleteTransaction(),this.setIsLoading(!1))})}openAxeptaModal(n){let s=new y.Zpt;s.disableClose=!0,s.panelClass="no-padding-overflow-dialog",s.minHeight="0vh",this.dialog=this.showModalDialog(nt,s);let u=this.dialog.componentInstance;u.axeptaTransactionId=n,u.axeptaApiKeySmartCheckout=this.model.modalitaPagamento.axeptaApiKeySmartCheckout,u.isTest=this.model.modalitaPagamento.isTest,this.axeptaPaymentResultReceived=!1,this.dialog.afterClosed().subscribe(()=>this.dialog=null)}createPaypalOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getPaypalCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.paypalClientId,this.model.modalitaPagamento.paypalSecretKey,this.getImportoPagamento(),this.model.modalitaPagamento.isTest,this.descrizione,"it"==this.lingua?"it-IT":"en-US");this.apiService.payment(d).subscribe(h=>{h.success&&h.transaction_id?(this.paypalTransactionId=h.transaction_id,this.paypalToken=h.token,s(h.transaction_id)):u(h.error),this.setIsLoading(!1)})})}capturePaypalOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getPaypalCaptureRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.paypalClientId,this.model.modalitaPagamento.paypalSecretKey,this.paypalTransactionId,this.paypalToken,this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success?s(h):u(h.error),this.setIsLoading(!1)})})}encryptGestPayOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getGestpayEncryptRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.gestpayShopId,this.model.modalitaPagamento.gestpayApiKey,this.getImportoPagamento(),this.model.oidTransazione,this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success?s(h):u(h.error),this.setIsLoading(!1)})})}createXPayOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getXPayCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.xPayAlias,this.model.modalitaPagamento.xPaySecretKey,this.getImportoPagamento(),this.getSuccessUrl(),this.getErrorUrl(),this.model.oidTransazione,this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success?s(h):u(h.error),this.setIsLoading(!1)})})}createXPayReservation(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getXPayCreateReservationRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.xPayAlias,this.model.modalitaPagamento.xPaySecretKey,this.utilityService.getEnumKeyOriginal(c.$w,this.model.modalitaPagamento.xPayTipoPrenotazione),this.model.modalitaPagamento.xPayCodiceStruttura,this.getImportoPagamento(),this.getSuccessUrl(),this.getErrorUrl(),this.model.oidTransazione,this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success?s(h):u(h.error),this.setIsLoading(!1)})})}getConfigAddonPayments(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getAddonPaymentsConfigurationRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.addonPaymentsMerchantId,this.model.modalitaPagamento.addonPaymentsSecretKey,this.getImportoPagamento(),this.getSuccessUrl(),this.model.modalitaPagamento.isTest,"it"==this.lingua?"IT":"EN");this.apiService.payment(d).subscribe(h=>{h.success?s(h):u(h.error),this.setIsLoading(!1)})})}createSatispayOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getSatispayCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.satispayKeyId,this.getImportoPagamento(),this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success?s(h):u(h.error),this.setIsLoading(!1)})})}verifySatispayOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getSatispayVerifyRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.satispayKeyId,this.satispayPaymentId,this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success?s(h):u(h.error)})})}cancelSatispayOrder(n=!0){return new Promise((u,d)=>{n&&this.setIsLoading(!0);let h=y.sK_.getSatispayCancelRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.satispayKeyId,this.satispayPaymentId,this.model.modalitaPagamento.isTest);this.apiService.payment(h).subscribe(vt=>{vt.success?u(vt):d(vt.error),n&&this.setIsLoading(!1)})})}createPayWayOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getPayWayCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.payWayTerminalId,this.model.modalitaPagamento.payWaySecretKey,this.getSuccessUrl(),this.getErrorUrl(),this.getImportoPagamento(),this.model.oidTransazione,this.model.modalitaPagamento.isTest,"it"==this.lingua?"IT":"EN");this.apiService.payment(d).subscribe(h=>{h.success&&h.transaction_id?s(h):u(h.error)})})}createUnicreditOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getUnicreditCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.unicreditTerminalId,this.model.modalitaPagamento.unicreditSecretKey,this.getSuccessUrl(),this.getErrorUrl(),this.getImportoPagamento(),this.model.oidTransazione,this.model.modalitaPagamento.isTest,"it"==this.lingua?"IT":"EN");this.apiService.payment(d).subscribe(h=>{h.success&&h.transaction_id?s(h):u(h.error)})})}createBeSafePayOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getBeSafePayCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.beSafePayApiKey,this.getImportoPagamento(),this.descrizione,this.getSuccessUrl(),this.getErrorUrl(),this.model.oidTransazione);this.apiService.payment(d).subscribe(h=>{h.success&&h.redirect_url?s(h):u(h.error)})})}createSumUpOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getSumUpCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.sumUpMerchantId,this.model.modalitaPagamento.sumUpClientId,this.model.modalitaPagamento.sumUpSecretKey,this.getImportoPagamento(),this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success&&h.transaction_id?(this.sumupTransactionId=h.transaction_id,this.sumupToken=h.token,s(h.transaction_id)):u(h.error),this.setIsLoading(!1)})})}verifySumUpOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getSumUpVerifyRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.sumupToken,this.sumupTransactionId,this.model.modalitaPagamento.sumUpClientId,this.model.modalitaPagamento.sumUpSecretKey,this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success?s(h):u(h.error),this.setIsLoading(!1)})})}createScalaPayOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getScalaPayCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.scalaPayApiKey,this.getImportoPagamento(),this.getSuccessUrl(),this.getErrorUrl(),this.model.oidTransazione,this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success&&h.token&&h.redirect_url?s(h):u(h.error)})})}createVirtualPayOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getVirtualPayCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.virtualPayMerchantId,this.model.modalitaPagamento.virtualPayABI,this.model.modalitaPagamento.virtualPaySecretKey,this.getImportoPagamento(),this.getSuccessUrl(),this.getErrorUrl(),this.model.oidTransazione);this.apiService.payment(d).subscribe(h=>{h.success&&h.redirect_url?s(h):u(h.error)})})}createMyPOSOrder(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=y.sK_.getMyPOSCreateRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.myPOSWalletNumber,this.model.modalitaPagamento.myPOSSID,this.model.modalitaPagamento.myPOSKeyIndex,this.getImportoPagamento(),this.lingua,this.descrizione,this.getSuccessUrl(),this.getErrorUrl(),this.model.oidTransazione,this.model.modalitaPagamento.isTest);this.apiService.payment(d).subscribe(h=>{h.success&&h.form?s(h):u(h.error)})})}verificaCartaCredito(){return new Promise((s,u)=>{this.setIsLoading(!0);let d=new y.vMP;d.oidAlbergo=this.oidAlbergo,d.oidPortaleXAlbergo=this.oidPortale,d.intestatarioCC=this.model.titolareCarta,d.numeroCC=this.model.numeroCarta,d.tipoCartaCC=null!=this.model.tipoCarta?this.model.tipoCarta.nome:"",d.annoCC=this.model.scadenzaCartaAnno,d.meseCC=this.model.scadenzaCartaMese,d.codiceSicurezzaCC=this.model.codiceSicurezza,this.apiService.verificaCartaCredito(d).subscribe(h=>{null!=h.data&&null!=h.data.tipoEsito&&0==h.data.tipoEsito?s():u(),this.setIsLoading(!1)})})}onModalitaPagamentoChange(){this.calculateCaparra(),this.reset()}calculateCaparra(){if(null!=this.model.modalitaPagamento)if(this.showCaparra){if(this.caparra>0)this.isCaparraPercentuale?this.model.modalitaPagamento.caparraTotale=this.totale*this.caparra/100:this.model.modalitaPagamento.caparraTotale=this.caparra;else if(this.model.modalitaPagamento.numeroNottiCaparra>0&&null!=this.camere){let s=Math.min(this.model.modalitaPagamento.numeroNottiCaparra,2);this.model.modalitaPagamento.caparraTotale=0;for(let u of this.camere){var n;let d=null===(n=u.tariffa)||void 0===n?void 0:n.giorni;if(null!=d&&d.length>0)for(let h=0;h<Math.min(s,d.length);h++){let vt=null!=d[h].prezzoScontato&&d[h].prezzoScontato>0?d[h].prezzoScontato:d[h].prezzo;this.model.modalitaPagamento.caparraTotale+=vt}}}else this.model.modalitaPagamento.caparra>0?this.model.modalitaPagamento.isCaparraPercentuale?this.model.modalitaPagamento.caparraTotale=Math.max(this.totale*this.model.modalitaPagamento.caparra/100,this.model.modalitaPagamento.importoMinimoCaparra):this.model.modalitaPagamento.isCaparraPerCamera&&null!=this.camere?this.model.modalitaPagamento.caparraTotale=this.model.modalitaPagamento.caparra*this.camere.length:this.model.modalitaPagamento.caparraTotale=this.model.modalitaPagamento.caparra:this.model.modalitaPagamento.caparraTotale=0;this.model.modalitaPagamento.caparraTotale=Math.min(this.model.modalitaPagamento.caparraTotale,this.totale)}else this.model.modalitaPagamento.caparraTotale=0;this.checkPaypalButtonEnabled(),this.onCaparraChange.emit(this.model.modalitaPagamento.caparraTotale),this.refreshHolipayWidget()}splitDataScadenza(){if(this.dataScadenza){let n=this.dataScadenza.split("/");if(2==n.length)try{this.model.scadenzaCartaMese=parseInt(n[0],10),this.model.scadenzaCartaAnno=parseInt(n[1],10),isNaN(this.model.scadenzaCartaMese)&&(this.model.scadenzaCartaMese=null),isNaN(this.model.scadenzaCartaAnno)&&(this.model.scadenzaCartaAnno=null)}catch(s){}}}createTransaction(n){return new Promise(s=>{this.setIsLoading(!0);let u=new f.LHu;u.data=this.getDate(O(),"YYYY-MM-DD HH:mm:ss"),u.statoEsecuzione=c.g_.NonEseguito,u.albergo=new f.Z$(this.oidAlbergo),u.importo=this.getImportoPagamento(),u.idTransazione=n,this.apiService.updateTransazione(u).subscribe(d=>{this.model.oidTransazione=d.data.obj.oid,s()})})}setTransactionId(n){return new Promise(s=>{if(this.model.oidTransazione>0){let u=new f.LHu(this.model.oidTransazione);u.idTransazione=n,this.apiService.updateTransazione(u).subscribe(()=>{s()})}else s()})}deleteTransaction(){this.model.oidTransazione>0&&(this.model.oidTransazione=null)}checkPayment(){this.paymentSuccess=!1,this.model.isPrenotazioneCreata=!1,this.interval=setInterval(()=>{this.model.oidTransazione>0?this.apiService.getTransazione(this.model.oidTransazione,!1).subscribe(n=>{if(null!=n.data)if(n.data.statoEsecuzione==c.g_.Eseguito){var s;this.model.isPrenotazioneCreata=n.data.isPrenotazioneCreata,this.model.codicePrenotazione=null===(s=n.data.prenotazione)||void 0===s?void 0:s.codiceOTA,null!=this.window?(this.paymentSuccess=!0,this.window.close()):null!=this.dialog?this.dialog.close(!0):(clearInterval(this.interval),this.createOrder.emit(this.model))}else n.data.statoEsecuzione==c.g_.Errore?(null!=this.window?(this.paymentSuccess=!1,this.window.close()):null!=this.dialog?this.dialog.close():(this.deleteTransaction(),this.setIsLoading(!1)),this.showError(n.data.descrizioneEsito?n.data.descrizioneEsito:"interfaces.pagamento-form.impossibileEffettuarePagamento"),this.onPaymentError.emit(n.data.descrizioneEsito)):n.data.statoEsecuzione==c.g_.Annullato&&(null!=this.window?(this.paymentSuccess=!1,this.window.close()):null!=this.dialog?this.dialog.close():(this.deleteTransaction(),this.setIsLoading(!1)))}):clearInterval(this.interval)},5e3)}getSuccessUrl(){return this.pagamentoSuccessUrl+this.model.oidTransazione+"&oidModalitaPagamento="+this.model.modalitaPagamento.paymentId+"&oidPortale="+this.oidPortale}getErrorUrl(){return this.pagamentoErrorUrl+this.model.oidTransazione+"&oidModalitaPagamento="+this.model.modalitaPagamento.paymentId+"&oidPortale="+this.oidPortale}getImportoPagamento(){return this.model.modalitaPagamento.caparraTotale>0?this.model.modalitaPagamento.caparraTotale:this.totale}checkPaypalButtonEnabled(){null!=this.paypalButton&&(this.formValid&&this.paymentFormValid&&this.getImportoPagamento()>0?this.paypalButton.enable():this.paypalButton.disable())}refreshHolipayWidget(){this.model.modalitaPagamento.tipo==c.sc.Holipay&&setTimeout(()=>{holipay.updateWidgets()},200)}ngOnDestroy(){this.localStorageSub.unsubscribe()}}Ct.\u0275fac=function(n){return new(n||Ct)(t.Y36(S.s),t.Y36(L.J),t.Y36(B.t),t.Y36(tt.n))},Ct.\u0275cmp=t.Xpm({type:Ct,selectors:[["app-pagamento-form"]],hostBindings:function(n,s){1&n&&t.NdJ("beforeunload",function(d){return s.beforeUnloadHandler(d)},!1,t.Jf7)},inputs:{_totale:"_totale",_isAccettaContrattoPrenotazioneStep2:"_isAccettaContrattoPrenotazioneStep2",isVerificaCartaCredito:"isVerificaCartaCredito",isVisualizzaCRO:"isVisualizzaCRO",condizioniContratto:"condizioniContratto",descrizione:"descrizione",disabled:"disabled",elevation:"elevation",_recaptchaAttiva:"_recaptchaAttiva",linguaPortaleAlbergo:"linguaPortaleAlbergo",_modalitaPagamento:"_modalitaPagamento",cliente:"cliente",errorMessage:"errorMessage",_formValid:"_formValid",arrivo:"arrivo",partenza:"partenza",_camere:"_camere",extras:"extras",allModalitaPagamento:"allModalitaPagamento",showCaparra:"showCaparra",_caparra:"_caparra",_isCaparraPercentuale:"_isCaparraPercentuale",fullWidthButton:"fullWidthButton",note:"note",oidCodicePromozione:"oidCodicePromozione",oidMotivoViaggio:"oidMotivoViaggio",valuta:"valuta",bookingSolutionUid:"bookingSolutionUid",privacy:"privacy",newsletter:"newsletter"},outputs:{createOrder:"createOrder",noPaymentMethod:"noPaymentMethod",onPaymentError:"onPaymentError",onCaparraChange:"onCaparraChange"},features:[t.qOj],decls:35,vars:34,consts:[[3,"hidden"],[1,"pagamento-container","border","p-3",3,"ngClass"],[1,"w-100","text-center",3,"ngClass"],[1,"color-light-blue","mr-4","align-middle","font-weight-bold"],[1,"align-middle","pagamento-form-modalita-select"],["required","",1,"pagamento-form-select",3,"panelClass","ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pt-2","pb-4",3,"hidden"],[1,"stripe-label"],["id","card-number-element",1,"border","rounded","mt-1","p-1"],[1,"row","mt-2"],[1,"col-6"],["id","card-expiry-element",1,"border","rounded","mt-1","p-1"],["id","card-cvc-element",1,"border","rounded","mt-1","p-1"],["class","mt-4 d-table mx-auto",4,"ngIf"],["class","w-100 text-center mt-4",4,"ngIf"],[1,"text-center",3,"hidden"],[3,"config"],[3,"value"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[3,"_text"],[1,"d-inline-block","align-middle","mr-1"],[1,"font-weight-bold","d-inline-block","align-middle"],["type","checkout"],[1,"row"],[3,"ngClass"],[1,"col-12","col-sm-6"],[1,"w-100"],["required","",1,"pagamento-form-select",3,"panelClass","ngModel","placeholder","disabled","ngModelChange"],["autocompleteOff","","matInput","","required","",3,"ngModel","placeholder","readOnly","disabled","ngModelChange"],["cardNumberInput",""],["securityCodeInput",""],["expirationDateInput",""],["nameInput",""],["class","col-4 d-none d-md-block",4,"ngIf"],["class","mt-3 mb-3",4,"ngIf"],[1,"mt-3","mb-3"],["class","carta-credito-image mr-1 ml-1",3,"src",4,"ngFor","ngForOf"],[1,"carta-credito-image","mr-1","ml-1",3,"src"],[1,"col-4","d-none","d-md-block"],[1,"border","rounded-lg","p-3"],[1,"mt-3"],["src","/assets/images/booking/norton.svg",1,"norton-image"],["src","/assets/images/booking/pci.svg",1,"pci-image","float-right"],[1,"mb-4","mt-3"],[3,"nameInput","cardNumberInput","expirationDateInput","securityCodeInput"],[1,"row",3,"ngClass"],["class","col-12 col-sm-6",4,"ngIf"],["class","row",4,"ngIf"],[1,"align-middle","font-weight-bold"],[1,"align-middle"],[1,"col-12","col-sm-8"],["autocompleteOff","","matInput","",3,"ngModel","placeholder","readOnly","disabled","ngModelChange"],["class","col-4 d-none d-sm-block",4,"ngIf"],[1,"col-4","d-none","d-sm-block"],["href","#",1,"d-inline-block","mt-3",3,"click"],["required","",1,"pagamento-form-checkbox",3,"ngModel","disabled","change","ngModelChange"],["href","#",1,"checkbox","privacyLink",3,"click"],["class","pagamento-form-checkbox","required","",3,"ngModel","disabled","change","ngModelChange",4,"ngIf"],["class","checkbox",4,"ngIf"],["class","checkbox condizioniContrattoLink","href","#",3,"click",4,"ngIf"],[1,"checkbox"],["href","#",1,"checkbox","condizioniContrattoLink",3,"click"],[1,"pagamento-form-checkbox",3,"ngModel","disabled","change","ngModelChange"],["class","checkbox newsletterLink","href","#",3,"click",4,"ngIf"],["href","#",1,"checkbox","newsletterLink",3,"click"],[1,"mt-4","d-table","mx-auto"],[3,"siteKey","resolved"],[1,"w-100","text-center","mt-4"],["mat-flat-button","","class","button-blue paga-button",3,"ngClass","disabled","click",4,"ngIf"],["mat-flat-button","",1,"button-blue","paga-button",3,"ngClass","disabled","click"],[1,"material-icons","align-middle","mr-1","icon-small"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-form-field",4)(7,"mat-select",5),t.NdJ("ngModelChange",function(d){return s.model.modalitaPagamento=d})("ngModelChange",function(){return s.onModalitaPagamentoChange()}),t.YNc(8,et,2,2,"mat-option",6),t.qZA()()(),t.YNc(9,kt,5,4,"ng-container",7),t.YNc(10,yt,31,37,"div",7),t.YNc(11,C,7,8,"div",7),t.TgZ(12,"div",8)(13,"div",9),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"div",10),t.TgZ(17,"div",11)(18,"div",12)(19,"div",9),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"div",13),t.qZA(),t.TgZ(23,"div",12)(24,"div",9),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"div",14),t.qZA()()(),t.YNc(28,v,5,5,"div",7),t.YNc(29,at,2,1,"div",7),t.YNc(30,ct,4,4,"div",7),t.qZA(),t.YNc(31,Lt,2,1,"div",15),t.YNc(32,Rt,2,1,"div",16),t.TgZ(33,"div",17),t._UZ(34,"ngx-paypal",18),t.qZA()()),2&n&&(t.Q6J("hidden",s.model.modalitaPagamento.paymentId<=0),t.xp6(1),t.Q6J("ngClass",t.VKq(30,_t,s.elevation)),t.xp6(1),t.Q6J("ngClass",t.VKq(32,m,!s.disabled||s.model.modalitaPagamento.tipo==s.enumTipoModalitaPagamento.CartaCredito||s.model.modalitaPagamento.tipo==s.enumTipoModalitaPagamento.BonificoBancario)),t.xp6(2),t.hij(" ",t.lcZ(5,22,"interfaces.pagamento-form.metodoPagamento")," "),t.xp6(3),t.Q6J("panelClass","booking-select")("ngModel",s.model.modalitaPagamento)("disabled",s.disabled),t.xp6(1),t.Q6J("ngForOf",s.modalitaPagamento),t.xp6(1),t.Q6J("ngIf",s.model.modalitaPagamento.tipo!=s.enumTipoModalitaPagamento.CartaCredito&&!s.disabled),t.xp6(1),t.Q6J("ngIf",s.model.modalitaPagamento.tipo==s.enumTipoModalitaPagamento.CartaCredito),t.xp6(1),t.Q6J("ngIf",s.model.modalitaPagamento.tipo==s.enumTipoModalitaPagamento.BonificoBancario),t.xp6(1),t.Q6J("hidden",s.model.modalitaPagamento.tipo!=s.enumTipoModalitaPagamento.Stripe||s.disabled),t.xp6(2),t.hij(" ",t.lcZ(15,24,"interfaces.pagamento-form.numero")," "),t.xp6(6),t.hij(" ",t.lcZ(21,26,"interfaces.pagamento-form.scadenza")," "),t.xp6(5),t.hij(" ",t.lcZ(26,28,"interfaces.pagamento-form.codiceSicurezza")," "),t.xp6(3),t.Q6J("ngIf",!s.disabled),t.xp6(1),t.Q6J("ngIf",!s.disabled),t.xp6(1),t.Q6J("ngIf",!s.disabled),t.xp6(1),t.Q6J("ngIf",s.recaptchaAttiva&&!s.disabled),t.xp6(1),t.Q6J("ngIf",!s.disabled),t.xp6(1),t.Q6J("hidden",s.disabled||s.model.modalitaPagamento.tipo!=s.enumTipoModalitaPagamento.PayPal),t.xp6(1),t.Q6J("config",s.payPalConfig))},dependencies:[Pt.X,w.mk,w.sg,w.O5,Z.Fj,Z.JJ,Z.Q7,Z.On,mt.FC,z.e_,ut.eB,ot.v_,V.k0,xt.CK,D.x8,N.nu,rt.wT,b.W,Y.G,pt.f,k.A,w.JJ,P.X$],styles:[".checkbox[_ngcontent-%COMP%]{white-space:normal!important}  .buttons-container{display:none!important}  .pagamento-form-select.mat-select-disabled .mat-select-value{color:#000000de!important}.pagamento-container[_ngcontent-%COMP%]{border-radius:5px;background-color:#fff}  .pagamento-form-checkbox .mat-checkbox-inner-container{margin-top:5px!important;margin-right:15px!important}  .pagamento-form-modalita-select .mat-form-field-infix{border-top:0!important}  .pagamento-form-modalita-select .mat-form-field-flex{border:1px solid #dddddd!important;border-radius:7px!important;padding-left:.25rem!important;padding-right:.25rem!important}  .pagamento-form-modalita-select .mat-form-field-underline{visibility:hidden!important}  .pagamento-form-modalita-select .mat-form-field-wrapper{padding-bottom:0!important}.paga-button[_ngcontent-%COMP%]{min-width:200px;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.privacyLink[_ngcontent-%COMP%], .privacyLink[_ngcontent-%COMP%]:hover, .newsletterLink[_ngcontent-%COMP%], .newsletterLink[_ngcontent-%COMP%]:hover, .condizioniContrattoLink[_ngcontent-%COMP%], .condizioniContrattoLink[_ngcontent-%COMP%]:hover{color:#004987!important}.info-icon[_ngcontent-%COMP%]{top:7px;right:0;font-size:18px;line-height:18px;color:#004987}.icon-small[_ngcontent-%COMP%]{font-size:20px}.norton-image[_ngcontent-%COMP%]{width:60px}.pci-image[_ngcontent-%COMP%]{width:40px}.carta-credito-image[_ngcontent-%COMP%]{width:60px}.addonPaymentsButton[_ngcontent-%COMP%]{visibility:hidden!important;width:0!important;height:0!important}.stripe-label[_ngcontent-%COMP%]{font-size:13px}"]})},25742:(wt,j,_)=>{_.d(j,{A:()=>O});var t=_(61699);class O{transform(f,y,c){return f.replace(new RegExp(y,"g"),c)}}O.\u0275fac=function(f){return new(f||O)},O.\u0275pipe=t.Yjl({name:"replace",type:O,pure:!0})},32642:(wt,j)=>{var t=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],O=["address","article","aside","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","tfoot","thead","tr","ul","video"],R=["audio","math","svg","video"],f=10,y=33,c=34,X=38,B=39,w=47,Z=59,b=60,P=61,K=62,$=/[<&\n\ud800-\udbff]/,ht=/[<&\ud800-\udbff]/,J=/\s+/g;function I(g,M){for(var S=g.length,L=M;L<S;L++)if(T(g.charCodeAt(L)))return L;return S}function U(g){return g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122}function q(g,M){var S=g.charCodeAt(M);if(S===f)return!0;if(S===b){var L="("+O.join("|")+"|br)";return new RegExp("^<"+L+"[\t\n\f\r ]*/?>","i").test(g.slice(M))}return!1}function T(g){return 9===g||10===g||12===g||13===g||32===g}function st(g){for(var M=g.length-1;M>=0;M--){var S=g[M];if("li"===S||"td"===S)return!1;if("ol"===S||"table"===S||"ul"===S)return!0}return!1}function Q(g){return g.trim().replace(J," ")}function nt(g,M){var S=g.charCodeAt(M);if(55296==(64512&S)){var L=g.charCodeAt(M+1);if(56320==(64512&L))return String.fromCharCode(S,L)}return String.fromCharCode(S)}j.Z=function F(g,M,S){return void 0===S&&(S={}),g?(g=g.toString(),S.html?function x(g,M,S){for(var L=S.imageWeight,tt=void 0===L?2:L,Pt=S.indicator,mt=void 0===Pt?"\u2026":Pt,z=S.maxLines,ot=void 0===z?1/0:z,V=S.stripTags,xt=void 0!==V&&V,D=mt.length,N=1,rt="boolean"==typeof xt?function(){return xt}:function(_t){return xt.includes(_t)},Y=[],pt=function(_t){for(var Ct;void 0!==(Ct=Y.pop());)rt(Ct)||(_t+="</"+Ct+">");return _t},k=0,et=-1,Ot=g.length;k<Ot;k++){var bt=k?g.slice(k):g,W=st(Y),It=et>-1||W?ht:$,kt=bt.search(It),gt=kt>-1?kt:bt.length;if(-1===et)if(W){var ft=Q(gt===bt.length?bt:bt.slice(0,kt));if(rt(Y[Y.length-1])){var lt=k>0&&!T(g.charCodeAt(k-1)),Ft=!T(g.charCodeAt(k+gt));ft.length>0?ft=(lt?" ":"")+ft+(Ft?" ":""):lt&&Ft&&(ft=" "),g=g.slice(0,k)+ft+g.slice(k+gt),gt=ft.length}if((D+=ft.length)>M)break}else if((D+=gt)>M){k=Math.max(k+gt-D+M,0);break}if(k+=gt,-1===kt)break;if((it=g.charCodeAt(k))===b){var Dt=(At=g.charCodeAt(k+1))===y;if(Dt&&"--"===g.substr(k+2,2))k=g.indexOf("--\x3e",k+4)+3-1;else if(Dt&&"[CDATA["===g.substr(k+2,7)){k=g.indexOf("]]>",k+9)+3-1}else{var p=At===w;if(D===M&&!p){D++;break}for(var e=0,i=k,a=!1;;){if(++i>=Ot)throw new Error("Invalid HTML: "+g);var o=g.charCodeAt(i);if(a)e?o===e&&(a=!1):T(o)?a=!1:o===K&&(a=!1,i--);else if(o===P){for(;T(g.charCodeAt(i+1));)i++;a=!0;var l=g.charCodeAt(i+1);l===c||l===B?(e=l,i++):e=0}else if(o===K){var m=k+(p?2:1),C=Math.min(I(g,m),i);(v=g.slice(m,C).toLowerCase()).charCodeAt(v.length-1)===w&&(v=v.slice(0,v.length-1));var E=rt(v);if(p){if(Y.pop()!==v)throw new Error("Invalid HTML: "+g);if(R.includes(v)&&!R.some(function(_t){return Y.includes(_t)}))if(E)k=et,et=-1;else if(et=-1,(D+=tt)>M)break;if(O.includes(v)&&-1===et&&!E&&++N>ot){Y.push(v);break}}else if(t.includes(v)||g.charCodeAt(i-1)===w){if(!E)if("br"===v){if(++N>ot)break}else if("img"===v&&(D+=tt)>M)break}else R.some(function(_t){return Y.includes(_t)})||R.includes(v)&&(et=k),Y.push(v);E&&-1===et?(g=g.slice(0,k)+g.slice(i+1),k--):k=i;break}}if(D>M||N>ot)break}}else if(it===X){i=k+1;for(var at=!0;;){var Tt=g.charCodeAt(i);if(!U(Tt)){if(Tt===Z)break;at=!1;break}i++}if(-1===et&&++D>M)break;at&&(k=i)}else if(it===f){if(++D>M||++N>ot)break}else{if(-1===et&&++D>M)break;var At;if(55296==(64512&it))56320==(64512&(At=g.charCodeAt(k+1)))&&k++}}if(D>M){var Et=function ut(g,M){var S=nt(g,M);if("&"===S)for(;;){M++;var L=g.charCodeAt(M);if(!U(L)){if(L===Z){S+=String.fromCharCode(L);break}break}S+=String.fromCharCode(L)}return S}(g,k);if(mt){for(var ct=k+Et.length;g.charCodeAt(ct)===b&&g.charCodeAt(ct+1)===w;){var Lt=g.indexOf(">",ct+2)+1;if(!Lt)break;ct=Lt}ct&&(ct===g.length||q(g,ct))&&(k+=Et.length,Et=g.charAt(k))}for(;"<"===Et&&g.charCodeAt(k+1)===w;){var v;if(!(v=Y.pop()))break;var Bt=g.indexOf(">",k+2);if(-1===Bt||g.slice(k+2,Bt).trim()!==v)throw new Error("Invalid HTML: "+g);rt(v)?g=g.slice(0,k)+g.slice(Bt+1):k=Bt+1,Et=g.charAt(k)}if(k<g.length){if(!S.breakWords)for(var St=k-mt.length;St>=0;St--){var it;if((it=g.charCodeAt(St))===K||it===Z)break;if(it===f||it===b){k=St;break}if(T(it)){k=St+(mt?1:0);break}}var Rt=g.slice(0,k);return q(g,k)||(Rt+=mt),pt(Rt)}}else if(N>ot)return pt(g.slice(0,k));return g}(g,M,S):function A(g,M,S){for(var L=S.indicator,tt=void 0===L?"\u2026":L,Pt=S.maxLines,mt=void 0===Pt?1/0:Pt,z=tt.length,ot=1,V=0,xt=g.length;V<xt&&!(++z>M);V++){if((D=g.charCodeAt(V))===f){if(++ot>mt)break}else if(55296==(64512&D)){56320==(64512&g.charCodeAt(V+1))&&V++}}if(z>M){var rt=nt(g,V);if(tt){var Y=V+rt.length;if(Y===g.length)return g;if(g.charCodeAt(Y)===f)return g.slice(0,V+rt.length)}if(!S.breakWords)for(var pt=V-tt.length;pt>=0;pt--){var D;if((D=g.charCodeAt(pt))===f){V=pt,rt="\n";break}if(T(D)){V=pt+(tt?1:0);break}}return g.slice(0,V)+("\n"===rt?"":tt)}if(ot>mt)return g.slice(0,V);return g}(g,M,S)):""}}}]);
//# sourceMappingURL=317.ce40f76481cecd71.js.map