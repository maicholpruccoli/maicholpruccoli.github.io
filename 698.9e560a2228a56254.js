(self.webpackChunkwelcome_sbm=self.webpackChunkwelcome_sbm||[]).push([[698],{44698:(Oc,U,Y)=>{"use strict";Y.r(U),Y.d(U,{SbmModule:()=>Di});var m=Y(26575),O=Y(82395),J=Y(76967),P=Y(11927),E=Y(56208),u=Y(58540),H=Y.n(u),e=Y(61699);class Q{constructor(){}ngOnInit(){this.date=u().year(this.year).month(this.month).date(1)}}Q.\u0275fac=function(o){return new(o||Q)},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["app-calendario-menu-mese-dialog"]],inputs:{events:"events",year:"year",month:"month",oidUbicazioneIstat:"oidUbicazioneIstat"},decls:4,vars:6,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"events","year","month","showMenu","oidUbicazioneIstat"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"app-calendario-menu-mese",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("events",t.events)("year",t.year)("month",t.month)("showMenu",!0)("oidUbicazioneIstat",t.oidUbicazioneIstat))}});var Z=Y(56609),f=Y(14090),C=Y(2353),N=Y(59162),k=Y(44882),h=Y(78654),q=Y(62899),K=Y(79474);function $(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.stopPropagation(),e.KtG(l.prevMonth())}),e.TgZ(1,"i",11),e._uU(2,"navigate_before"),e.qZA()()}}function se(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.stopPropagation(),e.KtG(l.nextMonth())}),e.TgZ(1,"i",11),e._uU(2,"navigate_next"),e.qZA()()}}function ae(i,o){if(1&i&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"momentFormat"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.Dn7(2,1,n.getDayName(t),"dd",n.getLocale())," ")}}function ge(i,o){1&i&&e.GkF(0)}const oe=function(i,o){return{day:i,event:o}};function ve(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ge,1,0,"ng-container",18),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2),a=e.MAs(14);e.xp6(1),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.WLB(2,oe,t,null!=n.eventsDataSource?n.eventsDataSource.getEventToDisplay(t):null))}}const ze=function(i,o,t,n,a){return{enabled:i,disabled:o,today:t,selected:n,isShowDatesOutOfMonth:a}};function I(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.isShowDatesOutOfMonth||l.isSelectedMonth(a.mDate)?l.selectDate(a):null)}),e.YNc(1,ve,2,5,"ng-container",17),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("ngClass",e.qbA(3,ze,n.isSelectedMonth(t.mDate),!n.isSelectedMonth(t.mDate),t.today,n.isSelectedDate(t.mDate),n.isShowDatesOutOfMonth&&!n.isSelectedMonth(t.mDate)))("appRectangleActive",n.isAutoWidth),e.xp6(1),e.Q6J("ngIf",n.isSelectedMonth(t.mDate)||n.isShowDatesOutOfMonth)}}function le(i,o){if(1&i&&(e.ynx(0),e.YNc(1,I,2,9,"div",15),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!n.isSelectedMonthAfter(t.mDate)||n.isShowDatesOutOfMonth)}}function x(i,o){if(1&i&&(e.TgZ(0,"div",13),e.YNc(1,le,2,1,"ng-container",14),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function ce(i,o){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&i){const t=e.oxw().day;e.xp6(1),e.hij(" ",null==t||null==t.mDate?null:t.mDate.date()," ")}}function Se(i,o){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).event;e.xp6(1),e.hij(" ",t.name," ")}}const ue=function(i){return{"event-div-border":i}};function Ee(i,o){if(1&i&&(e.TgZ(0,"div",22)(1,"div",23)(2,"div",24),e._uU(3),e.qZA(),e.YNc(4,Se,2,1,"div",25),e.qZA()()),2&i){const t=e.oxw(),n=t.event,a=t.day,l=e.oxw();e.Udp("background-color",n.color),e.Q6J("ngClass",e.VKq(7,ue,!!n.color))("appInvertColor",n.color)("matTooltip",l.isShowTooltip?n.name:null),e.xp6(3),e.hij(" ",null==a||null==a.mDate?null:a.mDate.date()," "),e.xp6(1),e.Q6J("ngIf",!l.isShowTooltip&&!!n.name&&l.isBig)}}function Ce(i,o){if(1&i&&(e.YNc(0,ce,2,1,"div",19),e.YNc(1,Ee,5,9,"div",20)),2&i){const t=o.event;e.Q6J("ngIf",null==t),e.xp6(1),e.Q6J("ngIf",null!=t)}}const Pe=function(i,o){return{"calendar-big":i,"calendar-auto-width":o}};class X extends f.H{constructor(o,t){super(),this.utility=o,this.cdRef=t,this.weeks=[],this._currentDate=u(),this.isChangeMonth=!1,this.isShowDatesOutOfMonth=!1,this.isShowTooltip=!0,this.isBig=!1,this.isAutoWidth=!1,this.isSelectDate=!1,this.onSelectDate=new e.vpe,this.onSelectMonth=new e.vpe,this.onMonthChanged=new e.vpe}set currentDate(o){this._currentDate=o,this.generateCalendar()}get currentDate(){return this._currentDate}ngOnInit(){this.generateCalendar(),null!=this.resetSelectedDateSubject&&(this.sub=this.resetSelectedDateSubject.subscribe(()=>{this.selectedDate=null}))}loadEvents(o){this.eventsDataSource=o,null!=this.weeks&&this.weeks.forEach(t=>{t.forEach(n=>{null!=this.eventsDataSource&&null!=this.eventsDataSource.events?n.events=this.eventsDataSource.events.filter(a=>a.date.isSame(n.mDate)):n.events=[]})}),this.cdRef.detectChanges()}getDayName(o){return u().day(o)}isToday(o){return u().isSame(u(o),"day")&&this._currentDate.month()==u().month()}isSelectedMonth(o){return u(o).isSame(this.currentDate,"month")}isSelectedMonthAfter(o){return u(o).isAfter(this.currentDate,"month")}isSelectedDate(o){return null!=this.selectedDate&&u(o).isSame(this.selectedDate)}selectDate(o){this.isSelectDate&&(this.selectedDate=o.mDate),this.onSelectDate.emit(o)}prevMonth(){this.currentDate=u(this.currentDate).subtract(1,"months"),this.generateCalendar(),this.onMonthChanged.emit()}nextMonth(){this.currentDate=u(this.currentDate).add(1,"months"),this.generateCalendar(),this.onMonthChanged.emit()}generateCalendar(){const o=this.fillDates(this.currentDate),t=[];for(;o.length>0;)t.push(o.splice(0,7));this.weeks=t,this.loadEvents(this.eventsDataSource)}fillDates(o){const n=u(o).startOf("month").startOf("week");return this.utility.counter(42,n.date()).map(a=>{const l=u(n).date(a);return{today:this.isToday(l),mDate:l,events:[]}})}ngOnDestroy(){null!=this.sub&&this.sub.unsubscribe()}}X.\u0275fac=function(o){return new(o||X)(e.Y36(C.t),e.Y36(e.sBO))},X.\u0275cmp=e.Xpm({type:X,selectors:[["app-calendar"]],inputs:{currentDate:"currentDate",isChangeMonth:"isChangeMonth",isShowDatesOutOfMonth:"isShowDatesOutOfMonth",eventsDataSource:"eventsDataSource",isShowTooltip:"isShowTooltip",isBig:"isBig",isAutoWidth:"isAutoWidth",isSelectDate:"isSelectDate",resetSelectedDateSubject:"resetSelectedDateSubject"},outputs:{onSelectDate:"onSelectDate",onSelectMonth:"onSelectMonth",onMonthChanged:"onMonthChanged"},features:[e.qOj],decls:15,vars:15,consts:[[1,"calendar",3,"ngClass"],[1,"month-nav",3,"click"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"month"],[1,"month-grid"],[1,"day-names"],["class","day-name",4,"ngFor","ngForOf"],[1,"weeks"],["class","week",4,"ngFor","ngForOf"],["dateTemplate",""],["mat-icon-button","",3,"click"],[1,"material-icons"],[1,"day-name"],[1,"week"],[4,"ngFor","ngForOf"],["class","rounded week-date","appRectangle","",3,"ngClass","appRectangleActive","click",4,"ngIf"],["appRectangle","",1,"rounded","week-date",3,"ngClass","appRectangleActive","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","date-text w-100 h-100 d-flex align-items-center justify-content-center event-div",4,"ngIf"],["class","date-text w-100 h-100 d-flex flex-wrap align-items-center justify-content-center event-div","matTooltipPosition","below","matTooltipClass","calendario-fasce-tooltip-class",3,"ngClass","backgroundColor","appInvertColor","matTooltip",4,"ngIf"],[1,"date-text","w-100","h-100","d-flex","align-items-center","justify-content-center","event-div"],["matTooltipPosition","below","matTooltipClass","calendario-fasce-tooltip-class",1,"date-text","w-100","h-100","d-flex","flex-wrap","align-items-center","justify-content-center","event-div",3,"ngClass","appInvertColor","matTooltip"],[1,"w-100","text-center"],[1,"d-block","w-100"],["class","d-block w-100 day-description",4,"ngIf"],[1,"d-block","w-100","day-description"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return t.onSelectMonth.emit()}),e.YNc(2,$,3,0,"button",2),e.TgZ(3,"span",3),e._uU(4),e.ALo(5,"titlecase"),e.ALo(6,"momentFormat"),e.qZA(),e.YNc(7,se,3,0,"button",2),e.qZA(),e.TgZ(8,"div",4)(9,"div",5),e.YNc(10,ae,3,5,"div",6),e.qZA(),e.TgZ(11,"div",7),e.YNc(12,x,2,1,"div",8),e.qZA()()(),e.YNc(13,Ce,2,2,"ng-template",null,9,e.W1O)),2&o&&(e.Q6J("ngClass",e.WLB(12,Pe,t.isBig&&!t.isAutoWidth,t.isAutoWidth)),e.xp6(2),e.Q6J("ngIf",t.isChangeMonth),e.xp6(2),e.Oqu(e.lcZ(5,6,e.Dn7(6,8,t.currentDate,"MMMM YYYY",t.getLocale()))),e.xp6(3),e.Q6J("ngIf",t.isChangeMonth),e.xp6(3),e.Q6J("ngForOf",t.utility.counter(7,1)),e.xp6(2),e.Q6J("ngForOf",t.weeks))},dependencies:[N.z,k.Z,m.mk,m.sg,m.O5,m.tP,h.eB,q.Kd,K.H,m.rS],styles:[".calendar[_ngcontent-%COMP%]{width:210px}.calendar[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{margin:auto}.calendar[_ngcontent-%COMP%]   .month-nav[_ngcontent-%COMP%]{padding:5px;display:flex;cursor:pointer;border-radius:5px}.calendar[_ngcontent-%COMP%]   .month-nav[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#e91e63!important}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .day-names[_ngcontent-%COMP%]{display:flex;font-size:13px;font-weight:600;color:#00000061}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .weeks[_ngcontent-%COMP%]{display:flex;flex-direction:column}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]{display:flex}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date[_ngcontent-%COMP%], .calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{text-align:center;padding:3px;width:30px}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date[_ngcontent-%COMP%]{height:30px}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%]{font-size:12px}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date.enabled[_ngcontent-%COMP%], .calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date.isShowDatesOutOfMonth[_ngcontent-%COMP%]{cursor:pointer}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date.enabled[_ngcontent-%COMP%]:hover   .event-div[_ngcontent-%COMP%], .calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date.isShowDatesOutOfMonth[_ngcontent-%COMP%]:hover   .event-div[_ngcontent-%COMP%], .calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date.selected[_ngcontent-%COMP%]   .event-div[_ngcontent-%COMP%]{background-color:#e91e63!important;border:1px solid #e91e63!important;color:#fff!important}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date.disabled[_ngcontent-%COMP%]{color:#aaa;opacity:.5}.calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date.disabled[_ngcontent-%COMP%]:hover, .calendar[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date.disabled.selected[_ngcontent-%COMP%]{opacity:1!important}.calendar-big[_ngcontent-%COMP%]{width:630px!important}.calendar-big[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{font-size:22px!important;font-weight:600!important;margin-bottom:1rem!important}.calendar-big[_ngcontent-%COMP%]   .month-nav[_ngcontent-%COMP%]{cursor:default!important}.calendar-big[_ngcontent-%COMP%]   .month-nav[_ngcontent-%COMP%]:hover{color:#000000de!important;background-color:transparent!important}.calendar-big[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .day-names[_ngcontent-%COMP%]{font-size:16px!important}.calendar-big[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date[_ngcontent-%COMP%], .calendar-big[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{width:90px!important}.calendar-big[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date[_ngcontent-%COMP%]{height:90px!important}.calendar-big[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%]{font-size:16px!important}.calendar-auto-width[_ngcontent-%COMP%]{width:100%!important}.calendar-auto-width[_ngcontent-%COMP%]   .month-nav[_ngcontent-%COMP%]{cursor:default!important}.calendar-auto-width[_ngcontent-%COMP%]   .month-nav[_ngcontent-%COMP%]:hover{color:#000000de!important;background-color:transparent!important}.calendar-auto-width[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .week-date[_ngcontent-%COMP%], .calendar-auto-width[_ngcontent-%COMP%]   .month-grid[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{flex:1!important}.day-description[_ngcontent-%COMP%]{font-size:14px;line-height:14px;font-style:italic}  .calendario-fasce-tooltip-class{font-size:11px!important}.event-div[_ngcontent-%COMP%]{border-radius:50%}.event-div-border[_ngcontent-%COMP%]{border:1px solid #666666}.today[_ngcontent-%COMP%]{border:1px solid #e91e63}"],changeDetection:0});var v=Y(6556),d=Y(86107),A=Y(19209),F=Y(44769),ne=Y(27162),z=Y(5939);class Ne extends f.H{constructor(o){super(),this.apiService=o}save(){this.setIsLoading(!0),this.apiService.setMenuGiorno(this.giorno).subscribe(o=>{this.setIsLoading(!1),this.dialogRef.close(o.data)})}}Ne.\u0275fac=function(o){return new(o||Ne)(e.Y36(A.s))},Ne.\u0275cmp=e.Xpm({type:Ne,selectors:[["app-seleziona-menu-giorno-dialog"]],inputs:{giorno:"giorno",dialogRef:"dialogRef"},features:[e.qOj],decls:9,vars:9,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"app-view-select",2),e.NdJ("valueChange",function(a){return t.giorno.menu=a}),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return t.save()}),e._uU(7),e.ALo(8,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("dataLoader",t.apiService.getMenuViewSelect())("value",t.giorno.menu)("placeholder",e.lcZ(4,5,"sbm.configurazione-myself.calendario-menu.title")),e.xp6(4),e.Oqu(e.lcZ(8,7,"globals.salva")))},dependencies:[h.eB,F.aO,ne.d,z.X$]});class Le extends f.H{constructor(o){super(),this.apiService=o,this.showMenu=!1}ngOnInit(){this.date=u().year(this.year).month(this.month).date(1)}onSelectMonth(){if(!this.showMenu){let o=new d.Zpt,t=this.showModalDialog(Q,o),n=t.componentInstance;n.events=this.events,n.year=this.year,n.month=this.month,n.oidUbicazioneIstat=this.oidUbicazioneIstat,t.afterClosed().subscribe(()=>{this.calendar.loadEvents(this.events)})}}onDateClick(o){let t;if(null!=o.events&&o.events.length>0?t=JSON.parse(JSON.stringify(o.events[0].customData)):(t=new v.F9U,t.data=this.getDate(o.mDate),t.ubicazioneIstat=new v.Dgg(this.oidUbicazioneIstat)),null==this.oidMenu||-1==this.oidMenu){let n=new d.Zpt;n.width="80vw";let a=this.showModalDialog(Ne,n),l=a.componentInstance;l.giorno=t,l.dialogRef=a,a.afterClosed().subscribe(r=>{this.updateEvents(o,r)})}else this.setIsLoading(!0),t.menu=new v.v2r(this.oidMenu),this.apiService.setMenuGiorno(t).subscribe(n=>{this.setIsLoading(!1),this.updateEvents(o,n.data)})}updateEvents(o,t){if(null!=t){let a,n=this.events.events.filter(l=>l.date.isSame(o.mDate));if(n.length>0?a=n[0]:(a={},a.date=o.mDate),a.customData=t,null!=t.menu&&t.menu.oid>0){a.name=t.menu.descrizione;try{a.color=Z(t.menu.colore).hex()}catch(l){}}else a.name=null,a.color=null;0==n.length&&this.events.events.push(a),this.calendar.loadEvents(this.events)}}}Le.\u0275fac=function(o){return new(o||Le)(e.Y36(A.s))},Le.\u0275cmp=e.Xpm({type:Le,selectors:[["app-calendario-menu-mese"]],viewQuery:function(o,t){if(1&o&&e.Gf(X,5),2&o){let n;e.iGM(n=e.CRH())&&(t.calendar=n.first)}},inputs:{events:"events",year:"year",month:"month",showMenu:"showMenu",oidMenu:"oidMenu",oidUbicazioneIstat:"oidUbicazioneIstat"},features:[e.qOj],decls:2,vars:4,consts:[[3,"currentDate","eventsDataSource","isShowTooltip","isBig","onSelectDate","onSelectMonth"],["calendar",""]],template:function(o,t){1&o&&(e.TgZ(0,"app-calendar",0,1),e.NdJ("onSelectDate",function(a){return t.onDateClick(a)})("onSelectMonth",function(){return t.onSelectMonth()}),e.qZA()),2&o&&e.Q6J("currentDate",t.date)("eventsDataSource",t.events)("isShowTooltip",!t.showMenu)("isBig",t.showMenu)},dependencies:[X]});class Ye{constructor(){}}Ye.\u0275fac=function(o){return new(o||Ye)},Ye.\u0275cmp=e.Xpm({type:Ye,selectors:[["app-mese-dialog"]],inputs:{model:"model"},decls:4,vars:4,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"model","oidFascia","showFascia"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"app-mese",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("model",t.model)("oidFascia",-1)("showFascia",!0))}});class De{constructor(){}updateDisponibilitaXFasce(o){let t=!1;if(this.model&&this.model.mesiXDisponibilita&&o&&o.length>0)for(let a of o){var n;let r,l=u(a.data);if(null!=(null===(n=this.model)||void 0===n?void 0:n.mesiXDisponibilita)&&(r=this.model.mesiXDisponibilita.find(p=>p.year==l.year()&&p.month==l.month()+1)),null!=r){null==r.listaDisponibilita&&(r.listaDisponibilita=[]);let p=r.listaDisponibilita.findIndex(T=>T.oid==a.oid);p>=0?r.listaDisponibilita[p]=a:r.listaDisponibilita.push(a),t=!0}}return t}}De.\u0275fac=function(o){return new(o||De)},De.\u0275prov=e.Yz7({token:De,factory:De.\u0275fac,providedIn:"root"});var M=Y(64352),re=Y(60773),g=Y(92198),_=Y(28849),w=Y(30724),b=Y(60166);function S(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.value="")}),e.TgZ(1,"i",5),e._uU(2,"clear"),e.qZA()()}}class R{constructor(){}}function pe(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._UZ(1,"span",12),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(13);e.Q6J("value",t.oid)("hidden",!(!n.value||t.nome&&t.nome.toLowerCase().includes(n.value.toLowerCase()))),e.xp6(1),e.Udp("background-color",t.coloreHex),e.xp6(2),e.Oqu(t.nome)}}function de(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._UZ(1,"span",12),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(23);e.Q6J("value",t.oid)("hidden",!(!n.value||t.nome&&t.nome.toLowerCase().includes(n.value.toLowerCase()))),e.xp6(1),e.Udp("background-color",t.coloreHex),e.xp6(2),e.Oqu(t.nome)}}function B(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div")(3,"div",15),e._uU(4),e.qZA(),e.TgZ(5,"div",16)(6,"span"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"b"),e._uU(10),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA(),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"b"),e._uU(17),e.qZA()()()(),e.TgZ(18,"div",17)(19,"mat-form-field",4)(20,"mat-select",18),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw();return e.KtG(p.rqTipiCamera[r].oidFascia=a)})("selectionChange",function(){const l=e.CHM(t).index,r=e.oxw();return e.KtG(r.save(r.rqTipiCamera[l]))}),e.ALo(21,"translate"),e._UZ(22,"app-select-search",null,19)(24,"mat-option",7),e.YNc(25,de,4,5,"mat-option",8),e.qZA()()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(4),e.Oqu(t.descrizione),e.xp6(3),e.Oqu(e.lcZ(8,11,"sbm.disponibilita.calendario-fasce.camereDisponibili")),e.xp6(3),e.Oqu(a.rqTipiCamera[n].disponibili),e.xp6(2),e.Oqu("; "),e.xp6(2),e.Oqu(e.lcZ(15,13,"sbm.disponibilita.calendario-fasce.percentualeOccupazione")),e.xp6(3),e.Oqu(a.rqTipiCamera[n].percentualeOccupazione),e.xp6(3),e.Q6J("ngModel",a.rqTipiCamera[n].oidFascia)("placeholder",e.lcZ(21,15,null==a.rqTipiCamera[n].oidFascia?"sbm.disponibilita.calendario-fasce.nessunaDisponibilitaCaricata":"bo.disponibilitaXPortaleXAlbergo.proprieta.fascia"))("disabled",null==a.rqTipiCamera[n].oidFascia),e.xp6(4),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",null==a.model?null:a.model.fasce)}}R.\u0275fac=function(o){return new(o||R)},R.\u0275cmp=e.Xpm({type:R,selectors:[["app-select-search"]],decls:5,vars:5,consts:[[1,"pr-3","pl-3","sticky-top","bg-white","border-bottom"],["floatLabel","never",1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click"],[1,"material-icons-round","color-red"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"input",2),e.NdJ("ngModelChange",function(a){return t.value=a}),e.ALo(3,"translate"),e.qZA(),e.YNc(4,S,3,0,"button",3),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("placeholder",e.lcZ(3,3,"interfaces.select.filtra"))("ngModel",t.value),e.xp6(2),e.Q6J("ngIf",!!t.value))},dependencies:[w.X,m.O5,_.Fj,_.JJ,_.On,h.eB,M.v_,M.nX,b.k0,z.X$],styles:["i[_ngcontent-%COMP%]{font-size:18px}"]});class he extends f.H{constructor(o,t){super(),this.calendarioFasceService=o,this.apiService=t,this.isUpdated=!1,this.rq=new d.oXc,this.rqTipiCamera=[]}get model(){return this.calendarioFasceService.model}ngOnInit(){this.rq.oidPortale=this.model.oidPortale,this.rq.dal=this.getDate(this.getDate(this.calendarDate.mDate)),this.rq.al=this.getDate(this.getDate(this.calendarDate.mDate)),this.rq.oidFascia=-1,this.rqTipiCamera=[];for(let o of this.model.tipiCamera){let t=Object.assign({},this.rq);t.oidTipiCamera=[o.oid];let n=this.getViewDisponibilita(o.oid);null!=n&&n.oid>0?(t.oidFascia=n.oidFascia,t.disponibili=n.disponibili,t.percentualeOccupazione=n.percentualeOccupazione):(t.oidFascia=null,t.disponibili=0,t.percentualeOccupazione="0%"),this.rqTipiCamera.push(t)}this.rq.oidTipiCamera=this.model.tipiCamera.map(o=>o.oid)}aggiornaFasceXTutteLeCamere(){this.save(this.rq);for(let o of this.rqTipiCamera)null!=o.oidFascia&&(o.oidFascia=this.rq.oidFascia)}rimuoviFasceTutteLeCamere(){this.rq.oidFascia=-1,this.aggiornaFasceXTutteLeCamere()}save(o){this.setIsLoading(!0),this.apiService.salvaFasce(o).subscribe(t=>{this.setIsLoading(!1),t&&t.listaDisponibilita&&t.listaDisponibilita.length>0&&this.calendarioFasceService.updateDisponibilitaXFasce(t.listaDisponibilita)&&(this.isUpdated=!0)})}getViewDisponibilita(o){return this.meseXDisponibilita&&this.meseXDisponibilita.listaDisponibilita?this.meseXDisponibilita.listaDisponibilita.find(t=>t.oidTipoCamera==o&&this.getDate(t.data)==this.getDate(this.calendarDate.mDate)):null}}he.\u0275fac=function(o){return new(o||he)(e.Y36(De),e.Y36(A.s))},he.\u0275cmp=e.Xpm({type:he,selectors:[["app-cambia-fascia"]],inputs:{meseXDisponibilita:"meseXDisponibilita",calendarDate:"calendarDate"},features:[e.qOj],decls:24,vars:21,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row","mb-4"],[1,"col-6"],[1,"w-100"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],["filtroFasciaTutteLeCamere",""],[3,"value"],[3,"value","hidden",4,"ngFor","ngForOf"],["mat-flat-button","","color","blank",1,"mt-2",3,"click"],["class","row",4,"ngFor","ngForOf"],[3,"value","hidden"],[1,"span-coloreFascia","mr-2"],[1,"row"],[1,"col-7","d-flex","align-items-center"],[1,"font-weight-bold"],[1,"font-small","font-italic","mt-1"],[1,"col-5"],[3,"ngModel","placeholder","disabled","ngModelChange","selectionChange"],["filtroFascia",""]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h3"),e._uU(4),e.ALo(5,"titlecase"),e.ALo(6,"momentFormat"),e.qZA(),e.TgZ(7,"div",2)(8,"div",3)(9,"mat-form-field",4)(10,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.rq.oidFascia=a})("selectionChange",function(){return t.aggiornaFasceXTutteLeCamere()}),e.ALo(11,"translate"),e._UZ(12,"app-select-search",null,6)(14,"mat-option",7),e.YNc(15,pe,4,5,"mat-option",8),e.qZA(),e.TgZ(16,"mat-hint"),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"div",3)(20,"button",9),e.NdJ("click",function(){return t.rimuoviFasceTutteLeCamere()}),e._uU(21),e.ALo(22,"translate"),e.qZA()()(),e.YNc(23,B,26,17,"div",10)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,9,e.Dn7(6,11,null==t.calendarDate?null:t.calendarDate.mDate,"LL",t.getLocale()))),e.xp6(6),e.s9C("placeholder",e.lcZ(11,15,"bo.disponibilitaXPortaleXAlbergo.proprieta.fascia")),e.Q6J("ngModel",t.rq.oidFascia),e.xp6(4),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",null==t.model?null:t.model.fasce),e.xp6(2),e.Oqu(e.lcZ(18,17,"sbm.disponibilita.calendario-fasce.aggiornaTutteLeCamere")),e.xp6(4),e.Oqu(e.lcZ(22,19,"sbm.disponibilita.calendario-fasce.rimuoviTutte")),e.xp6(2),e.Q6J("ngForOf",t.model.tipiCamera))},dependencies:[m.sg,h.eB,M.v_,M.pH,re.CK,g.x8,F.aO,_.JJ,_.On,R,m.rS,K.H,z.X$],styles:[".span-coloreFascia[_ngcontent-%COMP%]{width:10px;height:10px;display:inline-block}"]});const xe=["calendar"];class fe extends f.H{constructor(o,t,n){super(),this.calendarioFasceService=o,this.apiService=t,this.utility=n,this.showFascia=!1,this.date=u()}set model(o){this._model=o,o&&(this.date=u(o.firstDate),this.loadEvents())}get model(){return this._model}loadEvents(){if(this.eventsDataSource=new d.FIM,this.model&&this.model.listaDisponibilita){let o=this.model.listaDisponibilita.filter(t=>t.oidFascia>0).sort((t,n)=>t.oidFascia>n.oidFascia?-1:1);this.calendarioFasceService.model.oidPortale&&this.calendarioFasceService.model.oidPortale>0&&(o=o.filter(t=>t.oidPortale==this.calendarioFasceService.model.oidPortale)),this.calendarioFasceService.oidTipoCamera&&this.calendarioFasceService.oidTipoCamera>0&&(o=o.filter(t=>t.oidTipoCamera==this.calendarioFasceService.oidTipoCamera)),o.forEach(t=>{var n;let l,a={};a.date=u(t.data),a.customData=t,null!=(null===(n=this.calendarioFasceService.model)||void 0===n?void 0:n.fasce)&&(l=this.utility.findItemByOid(this.calendarioFasceService.model.fasce,t.oidFascia)),a.name=l?l.nome:"",a.color=l?l.coloreHex:null,this.eventsDataSource.events.push(a)})}this.calendar.loadEvents(this.eventsDataSource)}onSelectMonth(){if(!this.showFascia){let o=this.showModalDialog(Ye,new d.Zpt);o.componentInstance.model=this.model,o.afterClosed().subscribe(()=>{this.loadEvents()})}}onSelectDate(o){let t=this.model.listaDisponibilita.filter(n=>this.getDate(n.data)==this.getDate(o.mDate));if(t&&t.length>0)if(null==this.oidFascia||-1==this.oidFascia){let n=new d.Zpt;n.width="50vw";let a=this.showModalDialog(he,n),l=a.componentInstance;l.calendarDate=o,l.meseXDisponibilita=this.model,a.afterClosed().subscribe(()=>{l.isUpdated&&this.loadEvents()})}else this.aggiornaFasceXTutteLeCamere(o,this.oidFascia);else this.showError("sbm.disponibilita.calendario-fasce.nessunaDisponibilita")}aggiornaFasceXTutteLeCamere(o,t){let n=this.calendarioFasceService.oidTipoCamera,a=n>0?[n]:this.calendarioFasceService.model.tipiCamera.map(l=>l.oid);if(a.length>0&&this.calendarioFasceService.model&&this.calendarioFasceService.model.oidPortale){this.setIsLoading(!0);let l=new d.oXc;l.dal=this.getDate(o.mDate),l.al=this.getDate(o.mDate),l.oidTipiCamera=a,l.oidFascia=t,l.oidPortale=this.calendarioFasceService.model.oidPortale,this.apiService.salvaFasce(l).subscribe(r=>{r&&r.listaDisponibilita&&r.listaDisponibilita.length>0&&this.calendarioFasceService.updateDisponibilitaXFasce(r.listaDisponibilita)&&this.loadEvents(),this.setIsLoading(!1)})}}}fe.\u0275fac=function(o){return new(o||fe)(e.Y36(De),e.Y36(A.s),e.Y36(C.t))},fe.\u0275cmp=e.Xpm({type:fe,selectors:[["app-mese"]],viewQuery:function(o,t){if(1&o&&e.Gf(xe,7),2&o){let n;e.iGM(n=e.CRH())&&(t.calendar=n.first)}},inputs:{oidFascia:"oidFascia",showFascia:"showFascia",model:"model"},features:[e.qOj],decls:2,vars:4,consts:[[3,"currentDate","eventsDataSource","isShowTooltip","isBig","onSelectDate","onSelectMonth"],["calendar",""]],template:function(o,t){1&o&&(e.TgZ(0,"app-calendar",0,1),e.NdJ("onSelectDate",function(a){return t.onSelectDate(a)})("onSelectMonth",function(){return t.onSelectMonth()}),e.qZA()),2&o&&e.Q6J("currentDate",t.date)("eventsDataSource",t.eventsDataSource)("isShowTooltip",!t.showFascia)("isBig",t.showFascia)},dependencies:[X]});var we=Y(70763),c=Y(52374),Ae=Y(77981),Me=Y(32836);function St(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.template.nome," ")}}function tt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-select",9),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedTemplate=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onTemplateChange())}),e.ALo(2,"translate"),e.ALo(3,"translate"),e.YNc(4,St,2,2,"mat-option",10),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.selectedTemplate)("placeholder",e.lcZ(2,4,"interfaces.email-send.template")+" ("+e.lcZ(3,6,t.getEnumKeyTranslation(t.enumTipoTemplate,t.tipoTemplate,"tipoTemplate"))+")")("required",t.templateRequired),e.xp6(3),e.Q6J("ngForOf",t.templates)}}function yt(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"span",18),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",19),e._uU(5),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"interfaces.email-send.email")),e.xp6(3),e.Oqu(t.email)}}function Fe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"input",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.email=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("placeholder",e.lcZ(2,2,"globals.email"))("ngModel",t.email)}}function Gt(i,o){1&i&&(e.TgZ(0,"span",19),e._uU(1,", "),e.qZA())}function Qi(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",22),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.utility.openUrlInNewTab(l.urlAllegato))}),e._uU(2),e.qZA(),e.YNc(3,Gt,2,0,"span",23),e.BQk()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.xp6(2),e.Oqu(t.nome),e.xp6(1),e.Q6J("ngIf",n<a.allegati.length-1)}}function at(i,o){if(1&i&&(e.TgZ(0,"div")(1,"span",18),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Qi,4,2,"ng-container",21),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"interfaces.email-send.allegati")),e.xp6(2),e.Q6J("ngForOf",t.allegati)}}function dc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"input",24),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.cc=a)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.cc)}}const Tc=function(i,o){return{"mt-1":i,"mt-4":o}};function xc(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",8)(2,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.oggetto=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",13)(5,"div",14),e.YNc(6,yt,6,4,"ng-container",3),e.YNc(7,Fe,3,4,"mat-form-field",2),e.qZA(),e.TgZ(8,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.cc="",e.KtG(a.ccVisible=!a.ccVisible)}),e.TgZ(9,"i",16),e._uU(10),e.qZA(),e.TgZ(11,"span",17),e._uU(12,"CC"),e.qZA()(),e.YNc(13,at,5,4,"div",3),e.qZA(),e.YNc(14,dc,2,1,"mat-form-field",2),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("placeholder",e.lcZ(3,9,"interfaces.email-send.oggetto"))("ngModel",t.oggetto)("readonly",!t.editingEnabled),e.xp6(4),e.Q6J("ngIf",t.showTemplate||t.emailSelected),e.xp6(1),e.Q6J("ngIf",!t.showTemplate&&!t.emailSelected),e.xp6(1),e.Q6J("ngClass",e.WLB(11,Tc,t.showTemplate||t.emailSelected,!t.showTemplate&&!t.emailSelected)),e.xp6(2),e.Oqu(t.ccVisible?"remove_circle_outline":"add_circle_outline"),e.xp6(3),e.Q6J("ngIf",null!=t.allegati&&t.allegati.length>0),e.xp6(1),e.Q6J("ngIf",t.ccVisible)}}function Zc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.send())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.templateRequired&&null==t.template||!t.testo||!t.oggetto||!t.email),e.xp6(1),e.Oqu(e.lcZ(2,2,"interfaces.email-send.invia"))}}function mc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.printTemplate())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",null==t.template),e.xp6(1),e.Oqu(e.lcZ(2,2,"interfaces.print.stampa"))}}class Qe extends f.H{constructor(o,t,n){super(),this.apiService=o,this.navigationService=t,this.utility=n,this.tipoTemplate=c.hQ.Generico,this.print=!1,this.showTemplate=!0,this.replaceTags=!0,this.editingEnabled=!0,this.isCancellaPreventivo=!1,this.emailEditing=!1,this.isInviaEmailCliente=!1,this.templates=[],this.enumTipoTemplate=c.hQ}ngOnInit(){if(this.templateRequired=this.tipoTemplate!=c.hQ.Generico&&this.tipoTemplate!=c.hQ.RispostaPostaCrm&&this.showTemplate,null!=this.preventivo?this.cliente=this.preventivo.cliente:null!=this.richiesta?this.cliente=this.richiesta.cliente:null!=this.prenotazione?this.cliente=this.prenotazione.cliente:null!=this.transazione?this.cliente=this.transazione.cliente:null!=this.voucher?this.cliente=this.voucher.cliente:null!=this.clienti&&this.clienti.length>0&&(this.cliente=this.clienti[0]),null!=this.clienti&&this.clienti.length>0?this.email=this.clienti.map(o=>o.email).join(", "):null!=this.cliente&&(this.email=this.cliente.email),this.emailSelected=!!this.email&&!this.emailEditing,this.showTemplate){this.setIsLoading(!0);let t,o=new d.$Xw;o.addFilters(new d.wn$("tipoTemplate",c.Hp.Equal,this.tipoTemplate.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)),o.sorting=[new d.aQR("ordinamento",c.nI.Asc)],null!=this.preventivo&&null!=this.preventivo.portaleXAlbergo&&null!=this.preventivo.portaleXAlbergo.ubicazioneIstat&&(t=this.preventivo.portaleXAlbergo.ubicazioneIstat.oid),null!=this.prenotazione&&null!=this.prenotazione.portaleXAlbergo&&null!=this.prenotazione.portaleXAlbergo.ubicazioneIstat&&(t=this.prenotazione.portaleXAlbergo.ubicazioneIstat.oid),null!=this.transazione&&null!=this.transazione.prenotazione&&null!=this.transazione.prenotazione.portaleXAlbergo&&null!=this.transazione.prenotazione.portaleXAlbergo.ubicazioneIstat&&(t=this.transazione.prenotazione.portaleXAlbergo.ubicazioneIstat.oid),t>0&&(o.oidUbicazioneIstat=t),this.templates=[],null!=this.causale&&null!=this.causale.template?this.apiService.getTemplate(this.causale.template.oid).subscribe(n=>{null!=n.data&&this.templates.push(n.data),this.apiService.getTemplatesFilter(o).subscribe(a=>{for(let l of a.data.templates)null==this.templates.find(r=>r.template.oid==l.template.oid)&&this.templates.push(l);this.templates.length>0?(this.selectedTemplate=this.templates[0],this.onTemplateChange()):this.setIsLoading(!1)})}):this.apiService.getTemplatesFilter(o).subscribe(n=>{for(let a of n.data.templates)this.templates.push(a);this.templates.length>0?(this.selectedTemplate=this.templates[0],this.onTemplateChange()):this.setIsLoading(!1)})}}send(){if(this.oidAccount>0){this.setIsLoading(!0);let o=new d.qWw;o.titolo=this.oggetto,o.testo=this.testo,o.to=this.email,o.emailCCn=this.cc,this.apiService.sendEmailAccountMail(this.oidAccount,o).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.success?this.showInfo("interfaces.email-send.emailInviata").then(()=>{this.dialogRef.close(!0)}):this.showError("interfaces.email-send.erroreInvioEmail").then(()=>{this.dialogRef.close(!1)})})}else if(this.oidTemplate>0){this.setIsLoading(!0);let o=new d.qWw;o.titolo=this.oggetto,o.testo=this.testo,o.to=this.email,o.emailCCn=this.cc,this.apiService.sendEmailTemplate(this.oidTemplate,o).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.success?this.showInfo("interfaces.email-send.emailInviata").then(()=>{this.dialogRef.close(!0)}):this.showError("interfaces.email-send.erroreInvioEmail").then(()=>{this.dialogRef.close(!1)})})}else if(this.tipoTemplate==c.hQ.Generico||this.isInviaEmailCliente){this.setIsLoading(!0);let o=new d.dwj;o.oidTemplate=null!=this.template?this.template.oid:-1,o.oidPreventivo=null!=this.preventivo?this.preventivo.oid:-1,o.oidPrenotazione=null!=this.prenotazione?this.prenotazione.oid:-1,o.oidCliente=this.cliente.oid,o.oidClienti=null!=this.clienti?this.clienti.map(t=>t.oid):null,o.oggetto=this.editingEnabled?this.oggetto:null,o.testo=this.editingEnabled?this.testo:null,o.cc=this.cc,o.replaceTags=!this.replaceTags,this.apiService.sendEmailCliente(o).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.success?this.showInfo("interfaces.email-send.emailInviata").then(()=>{this.dialogRef.close(!0)}):this.showError("interfaces.email-send.erroreInvioEmail").then(()=>{this.dialogRef.close(!1)})})}else if(this.tipoTemplate==c.hQ.Preventivo||this.tipoTemplate==c.hQ.PreventivoAccettato||this.tipoTemplate==c.hQ.PreventivoRichiestaCaparra||this.tipoTemplate==c.hQ.PreventivoPrenotato){this.setIsLoading(!0);let o=new d.HvU;o.oidTemplate=this.template.oid,o.oidPreventivo=this.preventivo.oid,o.oggetto=this.editingEnabled?this.oggetto:null,o.testo=this.editingEnabled?this.testo:null,o.cc=this.cc,o.replaceTags=!this.replaceTags,this.apiService.sendPreventivo(o).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.success?(this.navigationService.refreshContatoriMenu(),this.showInfo("interfaces.email-send.emailInviata").then(()=>{this.dialogRef.close(t.data.preventivo)})):this.showError("interfaces.email-send.erroreInvioEmail").then(()=>{this.dialogRef.close(null)})})}else if(this.tipoTemplate==c.hQ.PreventivoRifiutato){this.setIsLoading(!0);let o=new d.z74;o.oidTemplate=this.template.oid,o.oidPreventivo=this.preventivo.oid,o.oidCausale=null!=this.causale?this.causale.oid:-1,o.oggetto=this.editingEnabled?this.oggetto:null,o.testo=this.editingEnabled?this.testo:null,o.cc=this.cc,o.replaceTags=!this.replaceTags,(this.isCancellaPreventivo?this.apiService.cancellaPreventivo(o):this.apiService.rifiutaPreventivo(o)).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.success?(this.navigationService.refreshContatoriMenu(),this.showInfo("interfaces.email-send.emailInviata").then(()=>{this.dialogRef.close(!0)})):this.showError("interfaces.email-send.erroreInvioEmail").then(()=>{this.dialogRef.close(!1)})})}else if(this.tipoTemplate==c.hQ.RichiestaRifiutata){this.setIsLoading(!0);let o=new d.KMg;o.oidTemplate=this.template.oid,o.oidRichiesta=this.richiesta.oid,o.oidCausale=null!=this.causale?this.causale.oid:-1,o.oggetto=this.editingEnabled?this.oggetto:null,o.testo=this.editingEnabled?this.testo:null,o.cc=this.cc,o.replaceTags=!this.replaceTags,this.apiService.rifiutaRichiesta(o).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.success?(this.navigationService.refreshContatoriMenu(),this.showInfo("interfaces.email-send.emailInviata").then(()=>{this.dialogRef.close(!0)})):this.showError("interfaces.email-send.erroreInvioEmail").then(()=>{this.dialogRef.close(!1)})})}else if(this.tipoTemplate==c.hQ.Prenotazione){this.setIsLoading(!0);let o=new d.gpf;o.oidTemplate=null!=this.template?this.template.oid:-1,o.oidPrenotazione=this.prenotazione.oid,o.oggetto=this.editingEnabled?this.oggetto:null,o.testo=this.editingEnabled?this.testo:null,o.cc=this.cc,o.replaceTags=!this.replaceTags,this.apiService.sendEmailPrenotazione(o).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.success?this.showInfo("interfaces.email-send.emailInviata").then(()=>{this.dialogRef.close(!0)}):this.showError("interfaces.email-send.erroreInvioEmail").then(()=>{this.dialogRef.close(!1)})})}else if(this.tipoTemplate==c.hQ.PayMail){this.setIsLoading(!0);let o=new d.nMf;o.oidTemplate=null!=this.template?this.template.oid:-1,o.oidTransazione=this.transazione.oid,o.oggetto=this.editingEnabled?this.oggetto:null,o.testo=this.editingEnabled?this.testo:null,o.cc=this.cc,o.replaceTags=!this.replaceTags,this.apiService.sendEmailTransazione(o).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.success?this.showInfo("interfaces.email-send.emailInviata").then(()=>{this.dialogRef.close(!0)}):this.showError("interfaces.email-send.erroreInvioEmail").then(()=>{this.dialogRef.close(!1)})})}else if(this.tipoTemplate==c.hQ.Voucher){this.setIsLoading(!0);let o=new d.m5O;o.oidTemplate=null!=this.template?this.template.oid:-1,o.oidVoucher=this.voucher.oid,o.oidPrenotazione=this.prenotazione.oid,o.oggetto=this.editingEnabled?this.oggetto:null,o.testo=this.editingEnabled?this.testo:null,o.cc=this.cc,o.replaceTags=!this.replaceTags,this.apiService.sendEmailVoucher(o).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.success?this.showInfo("interfaces.email-send.emailInviata").then(()=>{this.dialogRef.close(!0)}):this.showError("interfaces.email-send.erroreInvioEmail").then(()=>{this.dialogRef.close(!1)})})}}onTemplateChange(){if(this.template=this.selectedTemplate.template,this.allegati=this.selectedTemplate.allegati,this.replaceTags){this.setIsLoading(!0);let o=new d.spf;o.oidTemplate=null!=this.template?this.template.oid:-1,o.oidPrenotazioni=null!=this.prenotazione?[this.prenotazione.oid]:null,o.oidPreventivo=null!=this.preventivo?this.preventivo.oid:-1,o.oidRichiesta=null!=this.richiesta?this.richiesta.oid:-1,o.oidCliente=null!=this.cliente?this.cliente.oid:-1,o.oidTransazione=null!=this.transazione?this.transazione.oid:-1,o.oidVoucher=null!=this.voucher?this.voucher.oid:-1,this.apiService.replaceTagsTemplate(o).subscribe(t=>{null!=t.data?(this.testo=t.data.testo,this.oggetto=t.data.titolo):(this.testo="",this.oggetto=""),this.setIsLoading(!1)})}else{let o;o=null!=this.clienti&&this.clienti.length>0?"it":null!=this.cliente&&null!=this.cliente.lingua?this.cliente.lingua.codice:"it";let t=this.selectedTemplate.templatesXLingua.find(n=>null!=n.lingua&&n.lingua.codice==o);null!=t?(this.testo=t.testo,this.oggetto=t.titolo):(this.testo="",this.oggetto=""),this.setIsLoading(!1)}}printTemplate(){window.print()}}Qe.\u0275fac=function(o){return new(o||Qe)(e.Y36(A.s),e.Y36(Ae.f),e.Y36(C.t))},Qe.\u0275cmp=e.Xpm({type:Qe,selectors:[["app-email-send"]],inputs:{tipoTemplate:"tipoTemplate",preventivo:"preventivo",prenotazione:"prenotazione",transazione:"transazione",richiesta:"richiesta",cliente:"cliente",clienti:"clienti",voucher:"voucher",causale:"causale",dialogRef:"dialogRef",print:"print",showTemplate:"showTemplate",email:"email",testo:"testo",oggetto:"oggetto",oidAccount:"oidAccount",oidTemplate:"oidTemplate",replaceTags:"replaceTags",editingEnabled:"editingEnabled",isCancellaPreventivo:"isCancellaPreventivo",emailEditing:"emailEditing",isInviaEmailCliente:"isInviaEmailCliente"},features:[e.qOj],decls:12,vars:11,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","w-100",4,"ngIf"],[4,"ngIf"],[1,"inviaEmailEditor",3,"text","height","disabled","textChange"],[1,"mt-4","text-right"],["mat-flat-button","","color","primary","class","mr-1",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","blank",3,"matDialogClose"],[1,"w-100"],[3,"ngModel","placeholder","required","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","readonly","ngModelChange"],[1,"mb-2"],[1,"email-input","mr-3","d-inline-block"],["color","primary","mat-icon-button","",1,"cc-button","float-right","d-none","d-lg-block",3,"ngClass","click"],[1,"material-icons","cc-icon"],[1,"align-middle","d-inline-block","ml-1"],[1,"align-middle","font-weight-bold"],[1,"align-middle"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"align-middle","cursor-pointer",3,"click"],["class","align-middle",4,"ngIf"],["autocompleteOff","","type","text","matInput","","placeholder","CC",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,tt,5,8,"mat-form-field",2),e.YNc(4,xc,15,14,"ng-container",3),e.TgZ(5,"app-editor",4),e.NdJ("textChange",function(a){return t.testo=a}),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,Zc,3,4,"button",6),e.YNc(8,mc,3,4,"button",6),e.TgZ(9,"button",7),e._uU(10),e.ALo(11,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.showTemplate),e.xp6(1),e.Q6J("ngIf",!t.print),e.xp6(1),e.Q6J("text",t.testo)("height",350)("disabled",t.print||!t.editingEnabled),e.xp6(2),e.Q6J("ngIf",!t.print),e.xp6(1),e.Q6J("ngIf",t.print),e.xp6(2),e.Oqu(e.lcZ(11,9,"globals.annulla")))},dependencies:[w.X,m.mk,m.sg,m.O5,_.Fj,_.JJ,_.Q7,_.On,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,Me.P,z.X$],styles:[".email-input[_ngcontent-%COMP%]{width:calc(100% - 50px - 1rem)}.cc-button[_ngcontent-%COMP%]{width:50px;height:22px;line-height:22px}.cc-icon[_ngcontent-%COMP%]{font-size:22px;line-height:22px}@media print{  .inviaEmailEditor .angular-editor-textarea{background-color:#fff!important;height:100%!important;min-height:100%!important;max-height:100%!important;width:100%!important;position:fixed!important;top:0!important;left:0!important;padding:15px!important;z-index:1000!important;margin:0!important;border:none!important}}"]});var $t=Y(32549);function zs(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"span",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",9),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"interfaces.pagamento-form.banca")),e.xp6(3),e.Oqu(t.model.modalitaPagamento.banca)}}function Ms(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"span",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",9),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"interfaces.pagamento-form.intestatario")),e.xp6(3),e.Oqu(t.model.modalitaPagamento.intestatarioConto)}}function qs(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"span",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",9),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"interfaces.pagamento-form.iban")),e.xp6(3),e.Oqu(t.model.modalitaPagamento.iban)}}function Ps(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"span",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",9),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"interfaces.pagamento-form.swift")),e.xp6(3),e.Oqu(t.model.modalitaPagamento.swift)}}function ks(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"input",11),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.model.codiceRiferimentoOperazione=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.model.codiceRiferimentoOperazione)("placeholder",e.lcZ(2,2,"interfaces.pagamento-form.codiceRiferimentoOperazione"))}}class Ui{constructor(){}}Ui.\u0275fac=function(o){return new(o||Ui)},Ui.\u0275cmp=e.Xpm({type:Ui,selectors:[["app-crea-pagamento-bonifico-modal"]],inputs:{dialogRef:"dialogRef",model:"model",isVisualizzaCRO:"isVisualizzaCRO"},decls:13,vars:10,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],["class","col-6",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"col-6"],[1,"align-middle","font-weight-bold"],[1,"align-middle"],[1,"w-100","mt-3"],["autocompleteOff","","matInput","",3,"ngModel","placeholder","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2),e.YNc(4,zs,6,4,"div",3),e.YNc(5,Ms,6,4,"div",3),e.YNc(6,qs,6,4,"div",3),e.YNc(7,Ps,6,4,"div",3),e.qZA(),e.YNc(8,ks,3,4,"mat-form-field",4),e.TgZ(9,"div",5)(10,"button",6),e.NdJ("click",function(){return t.dialogRef.close(!0)}),e._uU(11),e.ALo(12,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngIf",!!t.model.modalitaPagamento.banca),e.xp6(1),e.Q6J("ngIf",!!t.model.modalitaPagamento.intestatarioConto),e.xp6(1),e.Q6J("ngIf",!!t.model.modalitaPagamento.iban),e.xp6(1),e.Q6J("ngIf",!!t.model.modalitaPagamento.swift),e.xp6(1),e.Q6J("ngIf",t.isVisualizzaCRO),e.xp6(2),e.Q6J("disabled",t.isVisualizzaCRO&&!t.model.codiceRiferimentoOperazione),e.xp6(1),e.Oqu(e.lcZ(12,8,"interfaces.crea-pagamento.effettuaPagamento")))},dependencies:[w.X,m.O5,_.Fj,_.JJ,_.On,h.eB,M.v_,b.k0,F.aO,z.X$]});var Ss=Y(63942);function ys(i,o){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nome," ")}}class Yi extends f.H{constructor(){super(),this.onPayment=new e.vpe}splitDataScadenza(){if(this.dataScadenza){let o=this.dataScadenza.split("/");if(2==o.length)try{this.model.scadenzaCartaMese=parseInt(o[0],10),this.model.scadenzaCartaAnno=parseInt(o[1],10),isNaN(this.model.scadenzaCartaMese)&&(this.model.scadenzaCartaMese=null),isNaN(this.model.scadenzaCartaAnno)&&(this.model.scadenzaCartaAnno=null)}catch(t){}}}}Yi.\u0275fac=function(o){return new(o||Yi)},Yi.\u0275cmp=e.Xpm({type:Yi,selectors:[["app-crea-pagamento-carta-credito-modal"]],inputs:{dialogRef:"dialogRef",model:"model",carteCredito:"carteCredito"},outputs:{onPayment:"onPayment"},features:[e.qOj],decls:37,vars:30,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-8"],[1,"col-6"],[1,"w-100"],["required","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","matInput","","required","",3,"ngModel","placeholder","ngModelChange"],["cardNumberInput",""],["securityCodeInput",""],["expirationDateInput",""],["nameInput",""],[1,"col-4"],[3,"nameInput","cardNumberInput","expirationDateInput","securityCodeInput"],[1,"text-right","mt-3"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",2)(6,"div",4)(7,"mat-form-field",5)(8,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.model.tipoCarta=a}),e.ALo(9,"translate"),e.YNc(10,ys,2,2,"mat-option",7),e.qZA()()(),e.TgZ(11,"div",4)(12,"mat-form-field",5)(13,"input",8,9),e.NdJ("ngModelChange",function(a){return t.model.numeroCarta=a}),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"div",2)(17,"div",4)(18,"mat-form-field",5)(19,"input",8,10),e.NdJ("ngModelChange",function(a){return t.model.codiceSicurezza=a}),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"div",4)(23,"mat-form-field",5)(24,"input",8,11),e.NdJ("ngModelChange",function(a){return t.dataScadenza=a})("ngModelChange",function(){return t.splitDataScadenza()}),e.ALo(26,"translate"),e.qZA()()()(),e.TgZ(27,"mat-form-field",5)(28,"input",8,12),e.NdJ("ngModelChange",function(a){return t.model.titolareCarta=a}),e.ALo(30,"translate"),e.qZA()()(),e.TgZ(31,"div",13),e._UZ(32,"app-credit-card",14),e.qZA()(),e.TgZ(33,"div",15)(34,"button",16),e.NdJ("click",function(){return t.onPayment.emit()}),e._uU(35),e.ALo(36,"translate"),e.qZA()()),2&o){const n=e.MAs(14),a=e.MAs(20),l=e.MAs(25),r=e.MAs(29);e.Q6J("disableRipple",!0),e.xp6(8),e.Q6J("ngModel",t.model.tipoCarta)("placeholder",e.lcZ(9,18,"interfaces.pagamento-form.tipoCarta")),e.xp6(2),e.Q6J("ngForOf",t.carteCredito),e.xp6(3),e.Q6J("ngModel",t.model.numeroCarta)("placeholder",e.lcZ(15,20,"interfaces.pagamento-form.numero")),e.xp6(6),e.Q6J("ngModel",t.model.codiceSicurezza)("placeholder",e.lcZ(21,22,"interfaces.pagamento-form.codiceSicurezza")),e.xp6(5),e.Q6J("ngModel",t.dataScadenza)("placeholder",e.lcZ(26,24,"interfaces.pagamento-form.scadenza")),e.xp6(4),e.Q6J("ngModel",t.model.titolareCarta)("placeholder",e.lcZ(30,26,"interfaces.pagamento-form.titolare")),e.xp6(4),e.Q6J("nameInput",r)("cardNumberInput",n)("expirationDateInput",l)("securityCodeInput",a),e.xp6(2),e.Q6J("disabled",!(t.model.titolareCarta&&t.model.numeroCarta&&t.model.codiceSicurezza&&t.model.scadenzaCartaMese&&t.model.scadenzaCartaAnno&&null!=t.model.tipoCarta)),e.xp6(1),e.Oqu(e.lcZ(36,28,"interfaces.crea-pagamento.effettuaPagamento"))}},dependencies:[w.X,m.sg,_.Fj,_.JJ,_.Q7,_.On,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,Ss.G,z.X$]});var Js=Y(8954);class Ri{constructor(){}}Ri.\u0275fac=function(o){return new(o||Ri)},Ri.\u0275cmp=e.Xpm({type:Ri,selectors:[["app-paypal-modal"]],inputs:{payPalConfig:"payPalConfig"},decls:5,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"text-center"],[3,"config"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2),e._UZ(4,"ngx-paypal",3),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("config",t.payPalConfig))},dependencies:[h.eB,F.aO,Js.nu]});var j=Y(2214),Oe=Y(85105);class Fi extends f.H{constructor(o,t,n,a){super(),this.utilityService=o,this.apiService=t,this.sessionService=n,this.localizationService=a,this.stripeCardNumberValid=!1,this.stripeExpirationValid=!1,this.stripeCvcValid=!1,this.STRIPE_JS_URL="https://js.stripe.com/v3/"}ngOnInit(){this.utilityService.loadExternalScript(this.STRIPE_JS_URL).then(()=>{this.stripe=Stripe(this.modalitaPagamento.stripePublicKey);let o=this.stripe.elements();this.cardNumberElement=o.create("cardNumber",{placeholder:""}),this.cardNumberElement.mount("#card-number-element"),this.cardNumberElement.on("change",a=>{a.complete?this.stripeCardNumberValid=!0:a.error&&(this.stripeCardNumberValid=!1)});let t=o.create("cardExpiry");t.mount("#card-expiry-element"),t.on("change",a=>{a.complete?this.stripeExpirationValid=!0:a.error&&(this.stripeExpirationValid=!1)});let n=o.create("cardCvc",{placeholder:""});n.mount("#card-cvc-element"),n.on("change",a=>{a.complete?this.stripeCvcValid=!0:a.error&&(this.stripeCvcValid=!1)})})}pay(){this.setIsLoading(!0),this.stripe.createPaymentMethod({type:"card",card:this.cardNumberElement}).then(o=>{var t,n,a,l,r,p,T;null!=o.paymentMethod?this.apiService.payment(d.sK_.getStripeCreateRQ(this.sessionService.getOidAlbergo(),null===(t=this.prenotazione)||void 0===t||null===(t=t.portaleXAlbergo)||void 0===t?void 0:t.oid,this.modalitaPagamento.paymentId,this.cliente,this.localizationService.getCurrentLocale(),null===(n=this.prenotazione)||void 0===n?void 0:n.arrivo,null===(a=this.prenotazione)||void 0===a?void 0:a.partenza,null,null,null===(l=this.prenotazione)||void 0===l?void 0:l.noteP,null===(r=this.prenotazione)||void 0===r||null===(r=r.codicePromozione)||void 0===r?void 0:r.oid,null===(p=this.prenotazione)||void 0===p||null===(p=p.motivoViaggio)||void 0===p?void 0:p.oid,null===(T=this.prenotazione)||void 0===T?void 0:T.caparra,null,null,null,this.modalitaPagamento.stripeSecretKey,this.importo,null,this.modalitaPagamento.isTest,null,"EUR",this.modalitaPagamento.tipoContabilizzazione==c.XI.Differita)).subscribe(L=>{L.success&&L.transaction_id&&L.client_secret?this.stripe.confirmCardPayment(L.client_secret,{payment_method:o.paymentMethod.id}).then(G=>{null!=G.error?(G.error.message?this.showError(G.error.message):this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.setIsLoading(!1)):null!=G.paymentIntent&&this.dialogRef.close(!0)}):(this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.setIsLoading(!1))}):null!=o.error&&(o.error.message?this.showError(o.error.message):this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.setIsLoading(!1))})}}function Es(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ns(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}Fi.\u0275fac=function(o){return new(o||Fi)(e.Y36(C.t),e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o))},Fi.\u0275cmp=e.Xpm({type:Fi,selectors:[["app-stripe-modal"]],inputs:{dialogRef:"dialogRef",modalitaPagamento:"modalitaPagamento",prenotazione:"prenotazione",cliente:"cliente",importo:"importo"},features:[e.qOj],decls:22,vars:14,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"stripe-label"],["id","card-number-element",1,"border","rounded","mt-1","p-1"],[1,"row","mt-2"],[1,"col-6"],["id","card-expiry-element",1,"border","rounded","mt-1","p-1"],["id","card-cvc-element",1,"border","rounded","mt-1","p-1"],[1,"mt-4","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"div",3),e.TgZ(7,"div",4)(8,"div",5)(9,"div",2),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"div",6),e.qZA(),e.TgZ(13,"div",5)(14,"div",2),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"div",7),e.qZA()(),e.TgZ(18,"div",8)(19,"button",9),e.NdJ("click",function(){return t.pay()}),e._uU(20),e.ALo(21,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.hij(" ",e.lcZ(5,6,"interfaces.pagamento-form.numero"),"\n"),e.xp6(6),e.hij(" ",e.lcZ(11,8,"interfaces.pagamento-form.scadenza")," "),e.xp6(5),e.hij(" ",e.lcZ(16,10,"interfaces.pagamento-form.codiceSicurezza")," "),e.xp6(4),e.Q6J("disabled",!t.stripeCardNumberValid||!t.stripeExpirationValid||!t.stripeCvcValid),e.xp6(1),e.Oqu(e.lcZ(21,12,"interfaces.crea-pagamento.effettuaPagamento")))},dependencies:[h.eB,F.aO,z.X$],styles:[".stripe-label[_ngcontent-%COMP%]{font-size:13px}"]});class Hi extends f.H{constructor(o){super(),this.utility=o,this.onPayment=new e.vpe}ngOnInit(){this.currentYear=H()().year()}pay(){this.onPayment.emit({numeroCarta:this.numeroCarta.trim(),scadenzaMese:this.scadenzaMese.toString(),scadenzaAnno:this.scadenzaAnno.toString(),cvv:this.cvv.toString()})}}Hi.\u0275fac=function(o){return new(o||Hi)(e.Y36(C.t))},Hi.\u0275cmp=e.Xpm({type:Hi,selectors:[["app-xpay-card-modal"]],outputs:{onPayment:"onPayment"},features:[e.qOj],decls:25,vars:24,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"row"],[1,"col-4"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","nullable","ngModel","ngModelChange"],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.numeroCarta=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"mat-form-field",2)(9,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.scadenzaMese=a}),e.ALo(10,"translate"),e.YNc(11,Es,2,2,"mat-option",7),e.qZA()()(),e.TgZ(12,"div",5)(13,"mat-form-field",2)(14,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.scadenzaAnno=a}),e.ALo(15,"translate"),e.YNc(16,Ns,2,2,"mat-option",7),e.qZA()()(),e.TgZ(17,"div",5)(18,"mat-form-field",2)(19,"input",8),e.NdJ("ngModelChange",function(a){return t.cvv=a}),e.ALo(20,"translate"),e.qZA()()()(),e.TgZ(21,"div",9)(22,"button",10),e.NdJ("click",function(){return t.pay()}),e._uU(23),e.ALo(24,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("placeholder",e.lcZ(5,14,"interfaces.crea-pagamento.numeroCarta"))("ngModel",t.numeroCarta),e.xp6(5),e.Q6J("ngModel",t.scadenzaMese)("placeholder",e.lcZ(10,16,"interfaces.crea-pagamento.scadenzaMese")),e.xp6(2),e.Q6J("ngForOf",t.utility.counter(12,1)),e.xp6(3),e.Q6J("ngModel",t.scadenzaAnno)("placeholder",e.lcZ(15,18,"interfaces.crea-pagamento.scadenzaAnno")),e.xp6(2),e.Q6J("ngForOf",t.utility.counter(20,t.currentYear)),e.xp6(3),e.Q6J("placeholder",e.lcZ(20,20,"interfaces.crea-pagamento.cvv"))("nullable",!0)("ngModel",t.cvv),e.xp6(3),e.Q6J("disabled",!t.numeroCarta||null==t.scadenzaMese||null==t.scadenzaAnno||null==t.cvv),e.xp6(1),e.Oqu(e.lcZ(24,22,"interfaces.crea-pagamento.effettuaPagamento")))},dependencies:[w.X,m.sg,_.Fj,_.wV,_.JJ,_.On,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,z.X$]});var te=Y(93724),lt=Y(4731),it=Y(5802),Lc=Y(99173),Os=Y(73725);class Ki{constructor(){}}Ki.\u0275fac=function(o){return new(o||Ki)},Ki.\u0275cmp=e.Xpm({type:Ki,selectors:[["app-qr-code-modal"]],inputs:{value:"value"},decls:4,vars:4,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"qrdata","width","errorCorrectionLevel"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"qrcode",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("qrdata",t.value)("width",256)("errorCorrectionLevel","M"))},dependencies:[h.eB,F.aO,Os.V],styles:[".modal-close-button[_ngcontent-%COMP%]{top:2px!important;right:2px!important}"]});var Ls=Y(4362);function Ds(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.utility.openUrlInNewTab(a.urlOpen?a.urlOpen:a.url))}),e.TgZ(1,"i",5),e._uU(2,"open_in_new"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.urlOpen&&!t.url)}}function Is(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onExtraButtonClick.emit())}),e.TgZ(1,"i",5),e._uU(2),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.url),e.xp6(2),e.Oqu(t.extraButtonIcon)}}function Qs(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openQrCode())}),e.TgZ(2,"i",5),e._uU(3,"qr_code"),e.qZA()(),e.YNc(4,Is,3,2,"button",3),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.url),e.xp6(3),e.Q6J("ngIf",!!t.extraButtonIcon)}}const Us=function(i,o){return{"only-copy-button-visible":i,"extra-button-visible":o}};class Be extends f.H{constructor(o){super(),this.utility=o,this.urlDisabled=!0,this.onExtraButtonClick=new e.vpe,this.urlChange=new e.vpe}openQrCode(){let o=new d.Zpt;o.minHeight="0vh",o.panelClass="no-padding-dialog",this.showModalDialog(Ki,o).componentInstance.value=this.url}}function Ys(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nome," ")}}function Rs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.totalePrenotazioneSingola())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"interfaces.crea-pagamento.totalePrenotazioneSingola")," "))}function Fs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.penaleCancellazione())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"interfaces.crea-pagamento.penaleCancellazione")," "))}function Hs(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.totalePrenotazione())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Rs,3,3,"button",18),e.TgZ(5,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.importoCaparra())}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.primaNotte())}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,Fs,3,3,"button",19),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"interfaces.crea-pagamento.totalePrenotazione")," "),e.xp6(2),e.Q6J("ngIf",null!=t.totalePrenotazioneMultiCamera),e.xp6(2),e.hij(" ",e.lcZ(7,7,"interfaces.crea-pagamento.caparra")," "),e.xp6(3),e.hij(" ",e.lcZ(10,9,"interfaces.crea-pagamento.primaNotte")," "),e.xp6(2),e.Q6J("ngIf",t.importoPenaleCancellazione>0)}}function Ks(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.effettuaPagamento())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",null==t.cliente||t.cliente.oid<=0||null==t.model.modalitaPagamento||null==t.importo||t.importo<=0),e.xp6(1),e.Oqu(e.lcZ(2,2,"interfaces.crea-pagamento.effettuaPagamento"))}}function Gs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.effettuaPagamentoXPay3DS())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",null==t.cliente||t.cliente.oid<=0||null==t.importo||t.importo<=0),e.xp6(1),e.Oqu(e.lcZ(2,2,"interfaces.crea-pagamento.effettuaPagamentoXPay3DS"))}}Be.\u0275fac=function(o){return new(o||Be)(e.Y36(C.t))},Be.\u0275cmp=e.Xpm({type:Be,selectors:[["app-url"]],inputs:{placeholder:"placeholder",url:"url",urlOpen:"urlOpen",extraButtonIcon:"extraButtonIcon",showOnlyCopyButton:"showOnlyCopyButton",urlDisabled:"urlDisabled"},outputs:{onExtraButtonClick:"onExtraButtonClick",urlChange:"urlChange"},features:[e.qOj],decls:9,vars:12,consts:[[1,"url","pr-3",3,"ngClass"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","readonly","disabled","ngModelChange"],[1,"d-inline-block","pt-3"],["mat-icon-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-icon-button","","color","primary",3,"cdkCopyToClipboard","disabled","cdkCopyToClipboardCopied"],[1,"material-icons"],[4,"ngIf"],["mat-icon-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div")(1,"mat-form-field",0)(2,"input",1),e.NdJ("ngModelChange",function(a){return t.url=a})("ngModelChange",function(){return t.urlChange.emit(t.url)}),e.qZA()(),e.TgZ(3,"div",2),e.YNc(4,Ds,3,1,"button",3),e.TgZ(5,"button",4),e.NdJ("cdkCopyToClipboardCopied",function(a){return a?t.showSnackBar("globals.messages.copiatoNegliAppunti"):null}),e.TgZ(6,"i",5),e._uU(7,"content_copy"),e.qZA()(),e.YNc(8,Qs,5,2,"ng-container",6),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("ngClass",e.WLB(9,Us,t.showOnlyCopyButton,!!t.extraButtonIcon&&!t.showOnlyCopyButton)),e.xp6(1),e.Q6J("placeholder",t.placeholder)("ngModel",t.url)("readonly",t.urlDisabled)("disabled",t.urlDisabled),e.xp6(2),e.Q6J("ngIf",!t.showOnlyCopyButton),e.xp6(1),e.Q6J("cdkCopyToClipboard",t.url)("disabled",!t.url),e.xp6(3),e.Q6J("ngIf",!t.showOnlyCopyButton))},dependencies:[w.X,m.mk,m.O5,_.Fj,_.JJ,_.On,h.eB,M.v_,b.k0,Ls.i3],styles:[".url[_ngcontent-%COMP%]{display:inline-block;width:calc(100% - 120px)}.extra-button-visible[_ngcontent-%COMP%]{width:calc(100% - 160px)!important}.only-copy-button-visible[_ngcontent-%COMP%]{width:calc(100% - 40px)!important}"]});const $s=function(){return["nome","cognome","email"]},Dc=function(){return["nome","cognome"]},Bs=function(){return["cognome"]},Vs=function(){return["email"]},Xs=function(){return["cellulare"]},js=function(i,o,t,n){return[i,o,t,n]};class Bt extends $t.Q{constructor(o,t,n,a,l,r){super(o,l,a,r),this.apiService=o,this.sessionService=t,this.localizationService=n,this.utility=a,this.containerService=l,this.localStorage=r}ngOnInit(){var o,t;super.ngOnInit(),this.setIsLoading(!0),this.oidAlbergo=this.sessionService.getOidAlbergo(),this.oidPortale=null===(o=this.prenotazione)||void 0===o||null===(o=o.portaleXAlbergo)||void 0===o?void 0:o.oid,this.lingua=this.localizationService.getCurrentLocale(),this.paymentFormValid=!0,this.sub=this.createOrder.subscribe(()=>this.onPaymentSuccess());let n=new d.M6p;n.oidAlbergo=this.sessionService.getOidAlbergo(),n.oidPrenotazione=null===(t=this.prenotazione)||void 0===t?void 0:t.oid,this.apiService.getCreaPagamentoView(n).subscribe(a=>{this.modalitaPagamentoList=a.data.modalitaPagamento,this.modalitaPagamentoList.length>0&&(this.model.modalitaPagamento=this.modalitaPagamentoList[0],this.calculateCaparra()),this.allModalitaPagamento=this.modalitaPagamentoList,this.importoPenaleCancellazione=a.data.importoPenaleCancellazione,this.totalePrenotazioneMultiCamera=a.data.totalePrenotazioneMultiCamera,this.isVerificaCartaCredito=a.data.isVerificaCartaCredito,this.isVisualizzaCRO=a.data.isVisualizzaCRO,this.carteCredito=a.data.tipiCarteCredito,this.setIsLoading(!1)}),null!=this.prenotazione&&(null!=this.prenotazione.cliente&&(this.clienteSelected=this.prenotazione.cliente,this.cliente=this.prenotazione.cliente),this.arrivo=this.prenotazione.arrivo,this.partenza=this.prenotazione.partenza)}creaLinkClick(){this.urlPaymail?this.showDialogConfirm("sbm.prenotazioni.linkGiaCreato").then(()=>{this.creaLink()},()=>{}):this.creaLink()}creaLink(){this.setIsLoading(!0);let o=new v.LHu;o.data=this.getDate(u(),"YYYY-MM-DD HH:mm:ss"),o.importo=this.importo,o.cliente=this.cliente,o.albergo=this.sessionService.getAlbergo(),o.note=this.note,o.modalitaPagamento=new v.bUM(this.model.modalitaPagamento.paymentId),o.prenotazione=this.prenotazione,o.isPayMail=!0,this.apiService.updateTransazione(o).subscribe(t=>{this.transazione=t.data.obj,this.urlPaymail=window.location.origin+"/booking/paymail?uid="+t.data.obj.uid,this.setIsLoading(!1)})}totalePrenotazione(){null!=this.totalePrenotazioneMultiCamera?this.importo=this.totalePrenotazioneMultiCamera:this.importo=this.prenotazione.importo-this.prenotazione.sconto-this.prenotazione.scontoVoucher}totalePrenotazioneSingola(){this.importo=this.prenotazione.importo-this.prenotazione.sconto-this.prenotazione.scontoVoucher}importoCaparra(){this.importo=this.prenotazione.caparra}primaNotte(){this.importo=this.importoPrimaNotte}penaleCancellazione(){this.importo=this.importoPenaleCancellazione}effettuaPagamento(){if(this.model.modalitaPagamento.tipo==c.sc.Stripe){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Fi,o),n=t.componentInstance;n.modalitaPagamento=this.model.modalitaPagamento,n.prenotazione=this.prenotazione,n.importo=this.importo,n.cliente=this.cliente,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.onPaymentSuccess()})}else if(this.model.modalitaPagamento.tipo==c.sc.PayPal){let o=new d.Zpt;o.width="30vw",this.paypalDialog=this.showModalDialog(Ri,o),this.paypalDialog.componentInstance.payPalConfig=this.payPalConfig}else if(this.model.modalitaPagamento.tipo==c.sc.CartaCredito){let o=new d.Zpt;o.width="70vw";let t=this.showModalDialog(Yi,o),n=t.componentInstance;n.dialogRef=t,n.model=this.model,n.carteCredito=this.carteCredito;let a=n.onPayment.subscribe(()=>{this.isVerificaCartaCredito?this.verificaCartaCredito().then(()=>{t.close(),this.onPaymentSuccess()},()=>{this.showError("interfaces.pagamento-form.cartaCreditoNonValida")}):(t.close(),this.onPaymentSuccess())});t.afterClosed().subscribe(()=>{a.unsubscribe()})}else if(this.model.modalitaPagamento.tipo==c.sc.BonificoBancario){let o=new d.Zpt;o.width="70vw";let t=this.showModalDialog(Ui,o),n=t.componentInstance;n.dialogRef=t,n.model=this.model,n.isVisualizzaCRO=this.isVisualizzaCRO,t.afterClosed().subscribe(a=>{a&&this.onPaymentSuccess()})}else this.pay()}effettuaPagamentoXPay3DS(){let o=new d.Zpt;o.width="70vw",this.xpayCardDialog=this.showModalDialog(Hi,o);let n=this.xpayCardDialog.componentInstance.onPayment.subscribe(a=>{this.createTransaction().then(()=>{let l=d.sK_.getXPayAutenticazione3DSRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.xPayAlias,this.model.modalitaPagamento.xPaySecretKey,this.getImportoPagamento(),this.getSuccessUrl()+"&3DS=true",this.model.oidTransazione,a.numeroCarta,a.scadenzaMese,a.scadenzaAnno,a.cvv,this.model.modalitaPagamento.isTest);this.apiService.payment(l).subscribe(r=>{if(r.success&&r.transaction_id&&(r.transaction_token||r.form))if(r.transaction_token){this.deleteTransaction();let p=d.sK_.getXPayPagamento3DSRQ(this.oidAlbergo,this.oidPortale,this.model.modalitaPagamento.paymentId,this.cliente,this.lingua,this.arrivo,this.partenza,this.camere,this.extras,this.note,this.oidCodicePromozione,this.oidMotivoViaggio,this.model.modalitaPagamento.caparraTotale,this.model.privacy,this.model.newsletter,this.bookingSolutionUid,this.model.modalitaPagamento.xPayAlias,this.model.modalitaPagamento.xPaySecretKey,this.getImportoPagamento(),r.transaction_id,r.transaction_token,this.model.modalitaPagamento.isTest);this.apiService.payment(p).subscribe(T=>{T.success?this.onPaymentSuccess():(this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.setIsLoading(!1))})}else this.setTransactionId(r.transaction_id).then(()=>{this.openWindow(null,r.form)});else this.showError("interfaces.pagamento-form.impossibileEffettuarePagamento"),this.deleteTransaction(),this.setIsLoading(!1)})})});this.xpayCardDialog.afterClosed().subscribe(()=>{n.unsubscribe()})}onUpdateOptions(o){this.dataLoader=new d.hkX(this.apiService.getClientiFilter(o))}calculateCaparra(){if(null!=this.prenotazione)if(this.model.modalitaPagamento.numeroNottiCaparra>0)null!=this.importiGiornalieri&&this.importiGiornalieri.length>0?this.importo=this.importiGiornalieri.slice(0,this.model.modalitaPagamento.numeroNottiCaparra).reduce((o,t)=>o+t,0):this.importo=0;else if(this.model.modalitaPagamento.caparra>0){let o=this.prenotazione.importo-this.prenotazione.sconto-this.prenotazione.scontoVoucher;this.model.modalitaPagamento.isCaparraPercentuale?this.importo=o*this.model.modalitaPagamento.caparra/100:this.importo=this.model.modalitaPagamento.caparra,this.importo=Math.min(this.importo,o)}else this.importo=0}inviaEmail(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;n.tipoTemplate=c.hQ.PayMail,n.transazione=this.transazione,n.dialogRef=t}getImportoPagamento(){return this.importo}onPaymentSuccess(){this.setIsLoading(!0),null!=this.paypalDialog&&this.paypalDialog.close(),null!=this.xpayCardDialog&&this.xpayCardDialog.close(),this.apiService.getTransazione(null!=this.model.oidTransazione?this.model.oidTransazione:0).subscribe(o=>{let t=o.data;null==t&&(t=new v.LHu),t.modalitaPagamento=new v.bUM(this.model.modalitaPagamento.paymentId),t.note=this.note,t.cliente=this.cliente,t.prenotazione=this.prenotazione,this.apiService.updateTransazione(t).subscribe(n=>{null!=this.prenotazione?(this.prenotazione.transazione=n.data.obj,this.prenotazione.modalitaPagamento=this.prenotazione.transazione.modalitaPagamento,this.prenotazione.codiceRiferimentoOperazione=this.model.codiceRiferimentoOperazione,this.apiService.setPrenotazione(this.prenotazione).subscribe(()=>{this.prenotazione.transazione.modalitaPagamento.tipo==c.sc.CartaCredito&&this.model.numeroCarta?this.apiService.salvaCartaCreditoPrenotazione(this.prenotazione.oid,this.model).subscribe(()=>{this.setIsLoading(!1),this.showInfo("interfaces.crea-pagamento.pagamentoEffettuato").then(()=>{this.dialogRef.close(this.model)})}):(this.setIsLoading(!1),this.showInfo("interfaces.crea-pagamento.pagamentoEffettuato").then(()=>{this.dialogRef.close(this.model)}))})):(this.setIsLoading(!1),this.showInfo("interfaces.crea-pagamento.pagamentoEffettuato").then(()=>{this.dialogRef.close(this.model)}))})})}ngOnDestroy(){super.ngOnDestroy(),this.sub.unsubscribe()}}Bt.\u0275fac=function(o){return new(o||Bt)(e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o),e.Y36(C.t),e.Y36(te.J),e.Y36(lt.n))},Bt.\u0275cmp=e.Xpm({type:Bt,selectors:[["app-crea-pagamento"]],inputs:{dialogRef:"dialogRef",prenotazione:"prenotazione",importoPrimaNotte:"importoPrimaNotte",importiGiornalieri:"importiGiornalieri"},features:[e.qOj],decls:28,vars:52,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"dataLoader","selected","viewProperties","formatString","viewPropertiesSelected","searchProperties","label","required","updateOptionsEvent","optionSelectedEvent"],[1,"w-100"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"border","mat-elevation-z1","importo-container","p-3","mb-3"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","required","ngModelChange"],[4,"ngIf"],[1,"border","mat-elevation-z1","note-container","p-3","mb-3"],[1,"w-100","note-textarea",3,"floatLabel"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"placeholder","ngModel","ngModelChange"],[3,"placeholder","url"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","primary","class","mr-1",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"app-autocomplete",2),e.NdJ("updateOptionsEvent",function(a){return t.onUpdateOptions(a)})("optionSelectedEvent",function(a){return t.cliente=a}),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-form-field",3)(6,"mat-select",4),e.NdJ("ngModelChange",function(a){return t.model.modalitaPagamento=a})("selectionChange",function(){return t.calculateCaparra()}),e.ALo(7,"translate"),e.YNc(8,Ys,2,2,"mat-option",5),e.qZA()(),e.TgZ(9,"div",6)(10,"mat-form-field",3)(11,"input",7),e.NdJ("ngModelChange",function(a){return t.importo=a}),e.ALo(12,"translate"),e.qZA()(),e.YNc(13,Hs,12,11,"ng-container",8),e.qZA(),e.TgZ(14,"div",9)(15,"mat-form-field",10)(16,"textarea",11),e.NdJ("ngModelChange",function(a){return t.note=a}),e.ALo(17,"translate"),e.qZA()()(),e._UZ(18,"app-url",12),e.ALo(19,"translate"),e.TgZ(20,"button",13),e.NdJ("click",function(){return t.creaLinkClick()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.YNc(23,Ks,3,4,"button",14),e.YNc(24,Gs,3,4,"button",14),e.TgZ(25,"button",15),e.NdJ("click",function(){return t.inviaEmail()}),e._uU(26),e.ALo(27,"translate"),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("dataLoader",t.dataLoader)("selected",t.clienteSelected)("viewProperties",e.DdM(41,$s))("formatString","<b>#0 #1</b> #2")("viewPropertiesSelected",e.DdM(42,Dc))("searchProperties",e.l5B(47,js,e.DdM(43,Dc),e.DdM(44,Bs),e.DdM(45,Vs),e.DdM(46,Xs)))("label",e.lcZ(4,27,"globals.ricercaCliente"))("required",!0),e.xp6(3),e.s9C("placeholder",e.lcZ(7,29,"interfaces.crea-pagamento.modalitaPagamento")),e.Q6J("ngModel",t.model.modalitaPagamento),e.xp6(2),e.Q6J("ngForOf",t.modalitaPagamentoList),e.xp6(3),e.s9C("placeholder",e.lcZ(12,31,"interfaces.crea-pagamento.importo")),e.Q6J("ngModel",t.importo)("required",!0),e.xp6(2),e.Q6J("ngIf",null!=t.prenotazione),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(1),e.Q6J("placeholder",e.lcZ(17,33,"interfaces.crea-pagamento.note"))("ngModel",t.note),e.xp6(2),e.Q6J("placeholder",e.lcZ(19,35,"interfaces.crea-pagamento.link"))("url",t.urlPaymail),e.xp6(2),e.Q6J("disabled",null==t.cliente||t.cliente.oid<=0||null==t.model.modalitaPagamento||null==t.importo||t.importo<=0),e.xp6(1),e.Oqu(e.lcZ(22,37,"interfaces.crea-pagamento.creaLink")),e.xp6(2),e.Q6J("ngIf",null!=t.prenotazione),e.xp6(1),e.Q6J("ngIf",t.sessionService.is3DSecureAttivo()&&t.sessionService.isPro()&&null!=t.prenotazione&&null!=t.model.modalitaPagamento&&t.model.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.XPay),e.xp6(1),e.Q6J("disabled",!t.urlPaymail||null==t.transazione),e.xp6(1),e.Oqu(e.lcZ(27,39,"interfaces.crea-pagamento.inviaEmail")))},dependencies:[w.X,m.sg,m.O5,_.Fj,_.wV,_.JJ,_.Q7,_.On,h.eB,it.IC,M.v_,b.k0,re.CK,g.x8,F.aO,Lc.Y,Be,z.X$],styles:["textarea.mat-input-element[_ngcontent-%COMP%]{margin:0;padding:0}.note-container[_ngcontent-%COMP%]{border-radius:5px}  .note-textarea .mat-form-field-underline{visibility:hidden!important}  .note-textarea .mat-form-field-wrapper{padding-bottom:0!important}.importo-container[_ngcontent-%COMP%]{border-radius:5px}"]});class Vt{constructor(){}}Vt.\u0275fac=function(o){return new(o||Vt)},Vt.\u0275cmp=e.Xpm({type:Vt,selectors:[["app-print"]],inputs:{tipoTemplate:"tipoTemplate",preventivo:"preventivo",prenotazione:"prenotazione"},decls:1,vars:4,consts:[[3,"tipoTemplate","preventivo","prenotazione","print"]],template:function(o,t){1&o&&e._UZ(0,"app-email-send",0),2&o&&e.Q6J("tipoTemplate",t.tipoTemplate)("preventivo",t.preventivo)("prenotazione",t.prenotazione)("print",!0)},dependencies:[Qe]});var ie=Y(39402);function Ws(i,o){1&i&&(e.TgZ(0,"button",14)(1,"i",15),e._uU(2,"clear"),e.qZA()()),2&i&&e.Q6J("disableRipple",!0)}function ep(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.descrizione," ")}}function tp(i,o){if(1&i&&(e.TgZ(0,"div",17)(1,"span",18),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",19),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"interfaces.sms-send.cellulare")+": "),e.xp6(3),e.Oqu(t.numero)}}function ip(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",3)(1,"input",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.numero=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("placeholder",e.lcZ(2,2,"interfaces.sms-send.cellulare"))("ngModel",t.numero)}}function op(i,o){1&i&&(e.TgZ(0,"button",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.annulla")))}const np=function(i){return{"p-3":i}},ap=function(i){return{"edit-container":i}};class ct extends f.H{constructor(o,t,n){super(),this.apiService=o,this.utility=t,this.headerService=n,this.apiKeys=[],this.rq=new d.UxT,this.numeroReceived=!1}ngOnInit(){this.setIsLoading(!0),this.numeroReceived=!!this.numero,null==this.dialogRef&&this.headerService.setTitle("sbm.plugins.invia-sms.title"),this.rq.testo=this.testo;let o=d.k$g.fromFilters([new d.wn$("tipoApiKey",c.Hp.In,"("+c.j6.SmsHosting.toString()+","+c.j6.Twilio.toString()+","+c.j6.TokyDigital.toString()+","+c.j6.AdSms.toString()+")",c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)]);this.apiService.getApiKeysFilter(o).subscribe(t=>{this.apiKeys=t.data,this.apiKeys.length>0&&(this.apiKey=this.apiKeys[0]),this.setIsLoading(!1)})}invia(){this.setIsLoading(!0),this.rq.oidApiKey=this.apiKey.oid,this.rq.mittente=this.utility.checkCellulare(this.apiKey.cellulare),this.rq.numero=this.utility.checkCellulare(this.numero),this.apiService.inviaSms(this.rq).subscribe(o=>{this.setIsLoading(!1),null!=o.data&&o.data.success?this.showInfo("interfaces.sms-send.smsInviato").then(()=>{null!=this.dialogRef&&this.dialogRef.close(!0)}):this.showError("interfaces.sms-send.erroreInvioSms").then(()=>{null!=this.dialogRef&&this.dialogRef.close(!1)})})}ngOnDestroy(){null==this.dialogRef&&this.headerService.clearTitle()}}ct.\u0275fac=function(o){return new(o||ct)(e.Y36(A.s),e.Y36(C.t),e.Y36(ie.r))},ct.\u0275cmp=e.Xpm({type:ct,selectors:[["app-sms-send"]],inputs:{numero:"numero",testo:"testo",dialogRef:"dialogRef"},features:[e.qOj],decls:19,vars:20,consts:[["mat-icon-button","","class","modal-close-button",3,"matDialogClose","disableRipple",4,"ngIf"],[3,"ngClass"],[1,"div-help","mb-2"],[1,"w-100"],["required","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","mb-2",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"border","rounded","p-3"],[1,"w-100","sms-send-textarea"],["matInput","","rows","5",3,"ngModel","ngModelChange"],[1,"mt-4","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",3,"matDialogClose",4,"ngIf"],["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"value"],[1,"mb-2"],[1,"align-middle","font-weight-bold"],[1,"align-middle"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["mat-flat-button","","color","blank",3,"matDialogClose"]],template:function(o,t){1&o&&(e.YNc(0,Ws,3,1,"button",0),e.TgZ(1,"div",1)(2,"div",1)(3,"div",2),e._uU(4," Gli account di invio SMS sono configurabili tramite le ApiKeys del menu Configurazione "),e.qZA(),e.TgZ(5,"mat-form-field",3)(6,"mat-select",4),e.NdJ("ngModelChange",function(a){return t.apiKey=a}),e.ALo(7,"translate"),e.YNc(8,ep,2,2,"mat-option",5),e.qZA()(),e.YNc(9,tp,6,4,"div",6),e.YNc(10,ip,3,4,"mat-form-field",7),e.TgZ(11,"div",8)(12,"mat-form-field",9)(13,"textarea",10),e.NdJ("ngModelChange",function(a){return t.rq.testo=a}),e.qZA()()(),e.TgZ(14,"div",11)(15,"button",12),e.NdJ("click",function(){return t.invia()}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,op,3,3,"button",13),e.qZA()()()),2&o&&(e.Q6J("ngIf",null!=t.dialogRef),e.xp6(1),e.Q6J("ngClass",e.VKq(16,np,null==t.dialogRef)),e.xp6(1),e.Q6J("ngClass",e.VKq(18,ap,null==t.dialogRef)),e.xp6(4),e.Q6J("ngModel",t.apiKey)("placeholder",e.lcZ(7,12,"interfaces.sms-send.account")),e.xp6(2),e.Q6J("ngForOf",t.apiKeys),e.xp6(1),e.Q6J("ngIf",t.numeroReceived),e.xp6(1),e.Q6J("ngIf",!t.numeroReceived),e.xp6(3),e.Q6J("ngModel",t.rq.testo),e.xp6(2),e.Q6J("disabled",null==t.apiKey||null==t.apiKey.oid||t.apiKey.oid<=0||!t.numero||!t.rq.testo),e.xp6(1),e.Oqu(e.lcZ(17,14,"interfaces.email-send.invia")),e.xp6(2),e.Q6J("ngIf",null!=t.dialogRef))},dependencies:[w.X,m.mk,m.sg,m.O5,_.Fj,_.JJ,_.Q7,_.On,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,z.X$],styles:[".sms-send-textarea .mat-form-field-underline{visibility:hidden!important}  .sms-send-textarea .mat-form-field-wrapper{padding-bottom:0!important}  .sms-send-textarea .mat-form-field-infix{padding:0!important;border:0!important}textarea[_ngcontent-%COMP%]{resize:none}"]});var Ac=Y(3743),ke=Y(1477);class Xt{constructor(){}}Xt.\u0275fac=function(o){return new(o||Xt)},Xt.\u0275cmp=e.Xpm({type:Xt,selectors:[["app-disponibilita-pubblicate-details"]],inputs:{log:"log"},decls:86,vars:61,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],[1,"font-weight-bold"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"span",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"div",3)(11,"span",4),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"span"),e._uU(15),e.qZA()()(),e.TgZ(16,"div",2)(17,"div",3)(18,"span",4),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"span"),e._uU(22),e.qZA()(),e.TgZ(23,"div",3)(24,"span",4),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"span"),e._uU(28),e.ALo(29,"eurCurrency"),e.qZA()()(),e.TgZ(30,"div",2)(31,"div",3)(32,"span",4),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"span"),e._uU(36),e.ALo(37,"eurCurrency"),e.qZA()(),e.TgZ(38,"div",3)(39,"span",4),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"span"),e._uU(43),e.ALo(44,"eurCurrency"),e.qZA()()(),e.TgZ(45,"div",2)(46,"div",3)(47,"span",4),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"span"),e._uU(51),e.qZA()(),e.TgZ(52,"div",3)(53,"span",4),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"span"),e._uU(57),e.qZA()()(),e.TgZ(58,"div",2)(59,"div",3)(60,"span",4),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"span"),e._uU(64),e.qZA()(),e.TgZ(65,"div",3)(66,"span",4),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"span"),e._uU(70),e.qZA()()(),e.TgZ(71,"div",2)(72,"div",3)(73,"span",4),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"span"),e._uU(77),e.ALo(78,"date"),e.qZA()(),e.TgZ(79,"div",3)(80,"span",4),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"span"),e._uU(84),e.ALo(85,"number"),e.qZA()()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.Oqu(e.lcZ(7,25,"bo.logDisponibilitaPortaleXAlbergo.proprieta.codiceTipoCameraOTA")+": "),e.xp6(3),e.Oqu(t.log.codiceTipoCameraOTA?t.log.codiceTipoCameraOTA:"---"),e.xp6(3),e.Oqu(e.lcZ(13,27,"bo.logDisponibilitaPortaleXAlbergo.proprieta.codiceTariffaOTA")+": "),e.xp6(3),e.Oqu(t.log.codiceTariffaOTA?t.log.codiceTariffaOTA:"---"),e.xp6(4),e.Oqu(e.lcZ(20,29,"bo.logDisponibilitaPortaleXAlbergo.proprieta.variazioneDisponibili")+": "),e.xp6(3),e.Oqu(t.log.variazioneDisponibili),e.xp6(3),e.Oqu(e.lcZ(26,31,"bo.logDisponibilitaPortaleXAlbergo.proprieta.prezzo")+": "),e.xp6(3),e.Oqu(e.lcZ(29,33,t.log.prezzo)),e.xp6(5),e.Oqu(e.lcZ(34,35,"bo.logDisponibilitaPortaleXAlbergo.proprieta.prezzoUsoSingola")+": "),e.xp6(3),e.Oqu(e.lcZ(37,37,t.log.prezzoUsoSingola)),e.xp6(4),e.Oqu(e.lcZ(41,39,"bo.logDisponibilitaPortaleXAlbergo.proprieta.prezzoExtraBed")+": "),e.xp6(3),e.Oqu(e.lcZ(44,41,t.log.prezzoExtraBed)),e.xp6(5),e.Oqu(e.lcZ(49,43,"bo.logDisponibilitaPortaleXAlbergo.proprieta.durataMinimaSoggiorno")+": "),e.xp6(3),e.Oqu(t.log.durataMinimaSoggiorno),e.xp6(3),e.Oqu(e.lcZ(55,45,"bo.logDisponibilitaPortaleXAlbergo.proprieta.durataMassimaSoggiorno")+": "),e.xp6(3),e.Oqu(t.log.durataMassimaSoggiorno),e.xp6(4),e.Oqu(e.lcZ(62,47,"bo.logDisponibilitaPortaleXAlbergo.proprieta.fascia")+": "),e.xp6(3),e.Oqu(t.log.fascia?t.log.fascia:"---"),e.xp6(3),e.Oqu(e.lcZ(68,49,"bo.logDisponibilitaPortaleXAlbergo.proprieta.note")+": "),e.xp6(3),e.Oqu(t.log.note?t.log.note:"---"),e.xp6(4),e.Oqu(e.lcZ(75,51,"bo.logDisponibilitaPortaleXAlbergo.proprieta.dataPubblicazione")+": "),e.xp6(3),e.Oqu(e.xi3(78,53,t.log.dataPubblicazione,"dd/MM/yyyy HH:mm:ss")),e.xp6(4),e.Oqu(e.lcZ(82,56,"bo.logDisponibilitaPortaleXAlbergo.proprieta.durataEsecuzione")+": "),e.xp6(3),e.Oqu(e.xi3(85,58,t.log.durataEsecuzione,"1.0-1")))},dependencies:[h.eB,F.aO,m.JJ,m.uU,ke.f,z.X$]});var lp=Y(83793),_c=Y(51021);class jt extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.fileSaverService=n}ngOnInit(){if(this.logOperazione.oid>0&&(!this.logOperazione.xmlRichiesta||!this.logOperazione.xmlRisposta)){this.setIsLoading(!0);let o=new d.QUJ;o.oidAlbergo=this.sessionService.getOidAlbergo(),o.oidOperazione=this.logOperazione.oid,this.apiService.getLogOperazionePortaleS3(o).subscribe(t=>{t.data.richiesta&&(this.logOperazione.xmlRichiesta=t.data.richiesta),t.data.risposta&&(this.logOperazione.xmlRisposta=t.data.risposta),this.setIsLoading(!1)})}}download(){let o=new lp;o.file("richiesta.txt",this.logOperazione.xmlRichiesta),o.file("risposta.txt",this.logOperazione.xmlRisposta),o.generateAsync({type:"blob"}).then(t=>{this.fileSaverService.save(t,"log.zip")})}}jt.\u0275fac=function(o){return new(o||jt)(e.Y36(A.s),e.Y36(j.m),e.Y36(_c.m9))},jt.\u0275cmp=e.Xpm({type:jt,selectors:[["app-operazione-details-dialog"]],inputs:{logOperazione:"logOperazione"},features:[e.qOj],decls:21,vars:12,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6","pr-1"],[1,"mb-2"],["rows","25","disabled","",1,"border","rounded","p-3","w-100",3,"ngModel","ngModelChange"],[1,"col-6","pl-1"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons","align-middle","mr-1"],[1,"d-inline-block","align-middle"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"h5",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"textarea",5),e.NdJ("ngModelChange",function(a){return t.logOperazione.xmlRichiesta=a}),e.qZA()(),e.TgZ(9,"div",6)(10,"h5",4),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"textarea",5),e.NdJ("ngModelChange",function(a){return t.logOperazione.xmlRisposta=a}),e.qZA()()(),e.TgZ(14,"div",7)(15,"button",8),e.NdJ("click",function(){return t.download()}),e.TgZ(16,"span",9),e._uU(17,"file_download"),e.qZA(),e.TgZ(18,"span",10),e._uU(19),e.ALo(20,"translate"),e.qZA()()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.Oqu(e.lcZ(7,6,"sbm.log.operazioni.richiesta")),e.xp6(2),e.Q6J("ngModel",t.logOperazione.xmlRichiesta),e.xp6(3),e.Oqu(e.lcZ(12,8,"sbm.log.operazioni.risposta")),e.xp6(2),e.Q6J("ngModel",t.logOperazione.xmlRisposta),e.xp6(6),e.Oqu(e.lcZ(20,10,"sbm.log.operazioni.scarica")))},dependencies:[h.eB,F.aO,_.Fj,_.JJ,_.On,z.X$],styles:["textarea[_ngcontent-%COMP%]{resize:none}textarea[_ngcontent-%COMP%]:disabled{color:#000000de!important}"]});var wc=Y(98782),ee=Y(12531);function rp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.TgZ(4,"div",8)(5,"div",9)(6,"div",10)(7,"app-view-select",11),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.tipoCamera=a)}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",10)(10,"app-view-select",11),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.tariffa=a)}),e.ALo(11,"translate"),e.qZA()()()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Q6J("label",e.lcZ(1,7,"sbm.preventivi.camera")+" "+(n+1)+" - "+t.numeroAdulti+" "+e.lcZ(2,9,"sbm.preventivi.adulti")+(t.numeroBambini>0?" "+t.numeroBambini+" "+e.lcZ(3,11,"sbm.preventivi.bambini"):"")),e.xp6(7),e.Q6J("dataLoader",a.apiService.getTipiCameraOTAViewSelect(a.oidPortale,null,!1))("value",t.tipoCamera)("placeholder",e.lcZ(8,13,"globals.tipoCamera")),e.xp6(3),e.Q6J("dataLoader",a.apiService.getTariffeOTAViewSelect(a.oidPortale,null,!1))("value",t.tariffa)("placeholder",e.lcZ(11,15,"globals.tariffa"))}}class Jt{constructor(o){this.apiService=o,this.camereNuovoPreventivo=[]}isCreaPreventivoDisabled(){return this.camere.some(o=>null==o.tipoCamera||null==o.tipoCamera.oid||o.tipoCamera.oid<=0||null==o.tariffa||null==o.tariffa.oid||o.tariffa.oid<=0)}}function cp(i,o){if(1&i&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.tariffa.nomePromozione)}}function sp(i,o){if(1&i&&(e.TgZ(0,"div",31)(1,"div",24),e._uU(2),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.ALo(5,"translate"),e.ALo(6,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.quantita+"x "+t.extra.nome),e.xp6(2),e.Oqu(t.extra.isExtraIncluso?e.lcZ(5,2,"sbm.calcolaRetta.incluso"):e.lcZ(6,4,t.extra.totale))}}function pp(i,o){if(1&i&&(e.ynx(0),e.YNc(1,sp,7,6,"div",30),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.extras)}}function dp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",3)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",23)(6,"div",24),e._uU(7),e.qZA(),e.TgZ(8,"div",25),e._uU(9),e.ALo(10,"eurCurrency"),e.qZA()(),e.YNc(11,cp,2,1,"div",26),e.YNc(12,pp,2,1,"ng-container",27),e.TgZ(13,"div",28)(14,"app-view-select",17),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.oidSistemazione=null==a?null:a.oid)}),e.ALo(15,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,7,"sbm.calcolaRetta.camera")+(n+1)),e.xp6(4),e.Oqu(t.tipoCamera.nome+" - "+t.tariffa.descrizione),e.xp6(2),e.Oqu(e.lcZ(10,9,t.tariffa.prezzoScontato>0?t.tariffa.prezzoScontato:t.tariffa.prezzo)),e.xp6(2),e.Q6J("ngIf",!!t.tariffa.nomePromozione),e.xp6(1),e.Q6J("ngIf",null!=t.extras&&t.extras.length>0),e.xp6(2),e.Q6J("dataLoader",a.apiService.getSistemazioniViewSelect())("placeholder",e.lcZ(15,11,"bo.prenotazione.proprieta.sistemazione"))}}function mp(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nome," ")}}Jt.\u0275fac=function(o){return new(o||Jt)(e.Y36(A.s))},Jt.\u0275cmp=e.Xpm({type:Jt,selectors:[["app-tipo-camera-tariffa-nuovo-preventivo-select"]],inputs:{oidPortale:"oidPortale",camere:"camere",dialogRef:"dialogRef"},decls:12,vars:9,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"mb-4"],[1,"dialog-tab-group"],[3,"label",4,"ngFor","ngForOf"],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"label"],[1,"p-3"],[1,"row"],[1,"col-6"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-tab-group",3),e.YNc(7,rp,12,17,"mat-tab",4),e.qZA(),e.TgZ(8,"div",5)(9,"button",6),e.NdJ("click",function(){return t.dialogRef.close(!0)}),e._uU(10),e.ALo(11,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,5,"sbm.preventivi.selezionaTariffe")),e.xp6(3),e.Q6J("ngForOf",t.camere),e.xp6(2),e.Q6J("disabled",t.isCreaPreventivoDisabled()),e.xp6(1),e.Oqu(e.lcZ(11,7,"sbm.preventivi.creaPreventivo")))},dependencies:[m.sg,h.eB,ee.SK,ee.R7,F.aO,ne.d,z.X$]});class Gi extends f.H{set _cliente(o){null!=o&&(this.cliente=JSON.parse(JSON.stringify(o)))}constructor(o,t,n){super(),this.apiService=o,this.utility=t,this.sessionService=n,this.rq=new d.qJy,this.cliente=new v.c1h,this.modalitaPagamento=[],this.getTemplatesRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.In,"("+c.hQ.Prenotazione.toString()+", "+c.hQ.PrenotazioneConfermata.toString()+")",c.NM.Number)}ngOnInit(){this.rq.isCalcolaRetta=!0,this.rq.arrivo=this.creaRichiestaPreventivoRQ.dal,this.rq.partenza=this.creaRichiestaPreventivoRQ.al,this.rq.oidPortale=this.creaRichiestaPreventivoRQ.oidPortale,this.rq.oidCodicePromozione=this.creaRichiestaPreventivoRQ.oidCodicePromozione,this.rq.oidMotivoViaggio=this.creaRichiestaPreventivoRQ.oidMotivoViaggio,this.rq.cliente=new d.oHO,this.rq.pagamento=new d.l_j,this.rq.camere=[],this.totale=0;let o=[],t=0;for(let n of this.creaRichiestaPreventivoRQ.camere.map(a=>a.proposte.find(l=>l.selected))){this.totale+=n.tariffa.prezzoScontato>0?n.tariffa.prezzoScontato:n.tariffa.prezzo,o=o.concat(n.tariffa.modalitaPagamento);let a=new d.G5F;a.tariffa=n.tariffa,a.tipoCamera=n.tipoCamera;let l=new d.Esx;if(l.pax=this.creaRichiestaPreventivoRQ.camere[t].pax,a.pax=l,a.extras=[],null!=n.tariffa.extras)for(let r of n.tariffa.extras){let p=new d.bgL;p.quantita=r.quantita,p.extra=new d.RId,p.extra.extraId=r.extraId,p.extra.nome=r.nome,p.extra.prezzo=r.prezzo,p.extra.modalitaCalcoloPrezzo=r.modalitaCalcoloPrezzo,p.extra.isExtraAutomatico=!0,p.extra.isExtraIncluso=r.isExtraIncluso,p.extra.giorni=r.giorni,p.extra.isPerPersona=r.isPerPersona,p.extra.indexComponente=r.indexComponente,p.extra.tipoProduzione=r.tipoProduzione,p.extra.tipo=c.E9.Camera,null!=r.giorni&&r.giorni.length>0?p.extra.totale=r.giorni.reduce((T,L)=>T+L.prezzo,0)*r.quantita:p.extra.totale=r.prezzo*r.quantita,a.extras.push(p),r.tipoDisponibilitaArticolo!=c.Bw.DisponibilePrezzoNonCompresoStep1&&r.modalitaCalcoloPrezzo!=c.kS.Tassa&&(this.totale+=p.extra.totale)}this.rq.camere.push(a),t++}for(let n of o)-1==this.modalitaPagamento.findIndex(a=>a.paymentId==n.paymentId)&&o.filter(a=>a.paymentId==n.paymentId).length==this.creaRichiestaPreventivoRQ.camere.length&&this.modalitaPagamento.push(n);if(0==this.modalitaPagamento.length){this.setIsLoading(!0);let n=new d.X00;n.oidAlbergo=this.sessionService.getOidAlbergo(),this.apiService.getModalitaPagamentoDefault(n).subscribe(a=>{null!=a.data&&(this.modalitaPagamento=[a.data],this.rq.pagamento.modalitaPagamento=a.data,this.calculateCaparra()),this.setIsLoading(!1)})}else this.rq.pagamento.modalitaPagamento=this.modalitaPagamento[0],this.calculateCaparra()}creaPrenotazione(){this.setIsLoading(!0),this.rq.cliente.oid=this.cliente.oid,this.rq.cliente.nome=this.cliente.nome,this.rq.cliente.cognome=this.cliente.cognome,this.rq.cliente.email=this.cliente.email,this.rq.cliente.cellulare=this.cliente.cellulare,this.apiService.createPrenotazione(this.rq).subscribe(o=>{var t;null!=o.errori&&0!=o.errori.length||this.dialogRef.close(null===(t=o.data.prenotazioni[0])||void 0===t?void 0:t.oid)})}calculateCaparra(){if(null!=this.rq.pagamento.modalitaPagamento){if(this.rq.pagamento.modalitaPagamento.numeroNottiCaparra>0){let t=Math.min(this.rq.pagamento.modalitaPagamento.numeroNottiCaparra,2);this.rq.pagamento.modalitaPagamento.caparraTotale=0;for(let n of this.rq.camere){var o;let a=null===(o=n.tariffa)||void 0===o?void 0:o.giorni;if(null!=a&&a.length>0)for(let l=0;l<Math.min(t,a.length);l++){let r=a[l].prezzoScontato>0?a[l].prezzoScontato:a[l].prezzo;this.rq.pagamento.modalitaPagamento.caparraTotale+=r}}}else this.rq.pagamento.modalitaPagamento.caparra>0?this.rq.pagamento.modalitaPagamento.isCaparraPercentuale?this.rq.pagamento.modalitaPagamento.caparraTotale=Math.max(this.totale*this.rq.pagamento.modalitaPagamento.caparra/100,this.rq.pagamento.modalitaPagamento.importoMinimoCaparra):this.rq.pagamento.modalitaPagamento.isCaparraPerCamera?this.rq.pagamento.modalitaPagamento.caparraTotale=this.rq.pagamento.modalitaPagamento.caparra*this.rq.camere.length:this.rq.pagamento.modalitaPagamento.caparraTotale=this.rq.pagamento.modalitaPagamento.caparra:this.rq.pagamento.modalitaPagamento.caparraTotale=0;this.rq.pagamento.modalitaPagamento.caparraTotale=Math.min(this.rq.pagamento.modalitaPagamento.caparraTotale,this.totale)}}openClienteSelect(){let o;o=null!=this.cliente&&this.cliente.oid>0?JSON.parse(JSON.stringify(this.cliente)):new v.c1h(-1);let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(we.J,t),a=n.componentInstance;a.cliente=o,a.dialogRef=n,n.afterClosed().subscribe(l=>{null!=l&&l.oid>0&&(this.cliente=l)})}}Gi.\u0275fac=function(o){return new(o||Gi)(e.Y36(A.s),e.Y36(C.t),e.Y36(j.m))},Gi.\u0275cmp=e.Xpm({type:Gi,selectors:[["app-crea-prenotazione-dialog"]],inputs:{creaRichiestaPreventivoRQ:"creaRichiestaPreventivoRQ",_cliente:"_cliente",dialogRef:"dialogRef"},features:[e.qOj],decls:46,vars:46,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"],[1,"row","mt-3"],[1,"col-6"],[1,"cognome-input"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["mat-icon-button","","color","primary",3,"disableRipple","click"],[1,"material-icons"],[1,"w-100"],[1,"row"],["autocompleteOff","","type","email","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["required","",3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"border","rounded","p-3"],[1,"w-100","note-textarea",3,"floatLabel"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"row","font-weight-bold"],[1,"col-9"],[1,"col-3","text-right"],["class","font-small font-italic",4,"ngIf"],[4,"ngIf"],[1,"mt-2"],[1,"font-small","font-italic"],["class","row font-small",4,"ngFor","ngForOf"],[1,"row","font-small"],[3,"value"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,dp,16,13,"div",2),e.TgZ(4,"div",3),e._uU(5),e.ALo(6,"translate"),e.ALo(7,"eurCurrency"),e.qZA(),e.TgZ(8,"div",4)(9,"div",5)(10,"mat-form-field",6)(11,"input",7),e.NdJ("ngModelChange",function(a){return t.cliente.cognome=a})("ngModelChange",function(){return t.cliente.cognome?t.cliente.cognome=t.utility.capitalize(t.cliente.cognome):null}),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"button",8),e.NdJ("click",function(){return t.openClienteSelect()}),e.TgZ(14,"i",9),e._uU(15,"open_in_new"),e.qZA()()(),e.TgZ(16,"div",5)(17,"mat-form-field",10)(18,"input",7),e.NdJ("ngModelChange",function(a){return t.cliente.nome=a})("ngModelChange",function(){return t.cliente.nome?t.cliente.nome=t.utility.capitalize(t.cliente.nome):null}),e.ALo(19,"translate"),e.qZA()()()(),e.TgZ(20,"div",11)(21,"div",5)(22,"mat-form-field",10)(23,"input",12),e.NdJ("ngModelChange",function(a){return t.cliente.email=a}),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"div",5)(26,"mat-form-field",10)(27,"input",13),e.NdJ("ngModelChange",function(a){return t.cliente.cellulare=a}),e.ALo(28,"translate"),e.qZA()()()(),e.TgZ(29,"mat-form-field",10)(30,"mat-select",14),e.NdJ("ngModelChange",function(a){return t.rq.pagamento.modalitaPagamento=a})("selectionChange",function(){return t.calculateCaparra()}),e.ALo(31,"translate"),e.YNc(32,mp,2,2,"mat-option",15),e.qZA()(),e.TgZ(33,"mat-form-field",10)(34,"input",16),e.NdJ("ngModelChange",function(a){return t.rq.pagamento.modalitaPagamento.caparraTotale=a}),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"app-view-select",17),e.NdJ("valueChange",function(a){return t.rq.oidTemplate=null==a?null:a.oid}),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"div",18)(39,"mat-form-field",19)(40,"textarea",20),e.NdJ("ngModelChange",function(a){return t.rq.cliente.richieste=a}),e.ALo(41,"translate"),e.qZA()()(),e.TgZ(42,"div",21)(43,"button",22),e.NdJ("click",function(){return t.creaPrenotazione()}),e._uU(44),e.ALo(45,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngForOf",t.rq.camere),e.xp6(2),e.Oqu(e.lcZ(6,24,"bo.prenotazione.proprieta.totale")+": "+e.lcZ(7,26,t.totale)),e.xp6(6),e.Q6J("placeholder",e.lcZ(12,28,"bo.cliente.proprieta.cognome"))("ngModel",t.cliente.cognome),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(5),e.Q6J("placeholder",e.lcZ(19,30,"bo.cliente.proprieta.nome"))("ngModel",t.cliente.nome),e.xp6(5),e.Q6J("placeholder",e.lcZ(24,32,"bo.cliente.proprieta.email"))("ngModel",t.cliente.email),e.xp6(4),e.Q6J("placeholder",e.lcZ(28,34,"bo.cliente.proprieta.cellulare"))("ngModel",t.cliente.cellulare),e.xp6(3),e.Q6J("placeholder",e.lcZ(31,36,"bo.prenotazione.proprieta.modalitaPagamento"))("ngModel",t.rq.pagamento.modalitaPagamento),e.xp6(2),e.Q6J("ngForOf",t.modalitaPagamento),e.xp6(2),e.Q6J("placeholder",e.lcZ(35,38,"bo.prenotazione.proprieta.caparra"))("ngModel",t.rq.pagamento.modalitaPagamento.caparraTotale),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesRQ))("placeholder",e.lcZ(37,40,"sbm.calcolaRetta.template")),e.xp6(3),e.Q6J("floatLabel","always"),e.xp6(1),e.Q6J("placeholder",e.lcZ(41,42,"bo.prenotazione.proprieta.noteP"))("ngModel",t.rq.cliente.richieste),e.xp6(3),e.Q6J("disabled",null==t.cliente||!t.cliente.email||!t.cliente.nome||!t.cliente.cognome||null==t.rq.pagamento||null==t.rq.pagamento.modalitaPagamento||null==t.rq.pagamento.modalitaPagamento.paymentId||t.rq.pagamento.modalitaPagamento.paymentId<=0),e.xp6(1),e.Oqu(e.lcZ(45,44,"sbm.calcolaRetta.creaPrenotazione")))},dependencies:[m.sg,m.O5,w.X,h.eB,it.IC,M.v_,b.k0,re.CK,g.x8,F.aO,_.Fj,_.wV,_.JJ,_.Q7,_.On,ne.d,ke.f,z.X$],styles:[".cognome-input[_ngcontent-%COMP%]{width:calc(100% - 40px)}textarea.mat-input-element[_ngcontent-%COMP%]{margin:0;padding:0}  .note-textarea .mat-form-field-underline{visibility:hidden!important}  .note-textarea .mat-form-field-wrapper{padding-bottom:0!important}"]});var rt=Y(22165);function _p(i,o){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"momentFormat"),e.qZA(),e.TgZ(5,"div",7),e._UZ(6,"app-inner-html",8),e.qZA(),e.TgZ(7,"div",9),e._uU(8),e.ALo(9,"eurCurrency"),e.ALo(10,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,e.Dn7(4,5,t.data,"dddd DD MMM YYYY",n.getLocale()))," "),e.xp6(4),e.Q6J("_text",t.info),e.xp6(2),e.hij(" ",t.prezzoScontato?e.lcZ(9,9,t.prezzoScontato):e.lcZ(10,11,t.prezzo)," ")}}function up(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,_p,11,13,"div",4),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.calcolaRetta.dettaglioGiornaliero")),e.xp6(2),e.Q6J("ngForOf",t.giorni)}}class $i extends f.H{constructor(){super()}}$i.\u0275fac=function(o){return new(o||$i)},$i.\u0275cmp=e.Xpm({type:$i,selectors:[["app-dettaglio-giornaliero-modal"]],inputs:{giorni:"giorni"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[1,"font-weight-bold","text-center","mb-4"],["class","row mt-3",4,"ngFor","ngForOf"],[1,"row","mt-3"],[1,"col-4","font-weight-bold"],[1,"col-4","text-center"],[1,"info-prezzi",3,"_text"],[1,"col-4","text-right","font-weight-bold"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,up,5,4,"ng-container",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.giorni&&t.giorni.length>0))},dependencies:[m.sg,m.O5,h.eB,F.aO,rt.W,m.rS,ke.f,K.H,z.X$],styles:[".info-prezzi[_ngcontent-%COMP%]{font-size:small}"]});class et{constructor(o){this.localStorage=o,this.PARAMETRI_KEY="parametri",this.parametri=this.localStorage.get(this.PARAMETRI_KEY),null==this.parametri&&(this.parametri=new d.k_F)}getParametro(o){return this.parametri[o]}setParametro(o,t){this.parametri[o]=t,this.localStorage.set(this.PARAMETRI_KEY,this.parametri)}clearParametri(){this.parametri=null,this.localStorage.remove(this.PARAMETRI_KEY)}}et.\u0275fac=function(o){return new(o||et)(e.LFG(lt.n))},et.\u0275prov=e.Yz7({token:et,factory:et.\u0275fac,providedIn:"root"});var V=Y(61612),gp=Y(27513);const hp=["roomsContainer"];function fp(i,o){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.nome," ")}}function Cp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",9)(1,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.oidPortale=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return a.tipoCameraOTA=null,a.tariffaOTA=null,e.KtG(a.init())}),e.ALo(2,"translate"),e.YNc(3,fp,2,2,"mat-option",11),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("placeholder",e.lcZ(2,3,"globals.portale"))("ngModel",t.oidPortale),e.xp6(2),e.Q6J("ngForOf",t.portali)}}function bp(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-view-select",13),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tipoCameraOTA=a)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-view-select",13),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tariffaOTA=a)}),e.ALo(4,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataLoader",t.apiService.getTipiCameraOTAViewSelect(t.oidPortale))("value",t.tipoCameraOTA)("placeholder",e.lcZ(2,8,"globals.tipoCamera"))("forceDownload",!0),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTariffeOTAViewSelect(t.oidPortale))("value",t.tariffaOTA)("placeholder",e.lcZ(4,10,"globals.tariffa"))("forceDownload",!0)}}function vp(i,o){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumMealPlanType,t,"mealPlanType"))," ")}}function Tp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",9)(1,"mat-select",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.mealPlanType=a)}),e.ALo(2,"translate"),e._UZ(3,"mat-option",12),e.YNc(4,vp,3,4,"mat-option",11),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.mealPlanType)("placeholder",e.lcZ(2,4,"sbm.calcolaRetta.filtroTrattamento")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.mealTypes)}}function xp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-booking-calendar",15),e.NdJ("daysSelected",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onDaysSelected(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("oidPortale",t.oidPortale)("isVisualizzaDisponibilitaCalendario",t.isVisualizzaDisponibilitaCalendario)("isVisualizzaPrezzoCalendario",t.isVisualizzaPrezzoCalendario)("dayUse",!1)("adultiDefault",t.adultiDefault)("adultiMax",t.adultiMax)("bambiniMax",t.bambiniMax)("etaMinimaBambini",t.etaMinimaBambini)("etaMassimaBambini",t.etaMassimaBambini)("controllingDisponibility",t.controllingDisponibility)("isEtaRiduzioniAttiva",t.isEtaRiduzioniAttiva)("riduzioni",t.riduzioni)("numeroCodiciPromozionali",t.numeroCodiciPromozionali)("motiviViaggio",t.motiviViaggio)("camerePrenotabili",t.camerePrenotabili)("isBooking",!1)("isVisualizzaCalendarioMobile",!0)("isVisualizzaPrezzoMinimo",!1)("hideButton",!1)("oidTipoCameraOTA",null==t.tipoCameraOTA?null:t.tipoCameraOTA.oid)("oidTariffaOTA",null==t.tariffaOTA?null:t.tariffaOTA.oid)("initialDate",t.dataInizioGestione)}}function Zp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.nuovaRichiesta())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.nuovoPreventivo())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.calcolaRetta.creaRichiesta")),e.xp6(3),e.Oqu(e.lcZ(6,4,"sbm.calcolaRetta.creaPreventivo")))}function Ap(i,o){if(1&i&&(e.TgZ(0,"div",19)(1,"h5",20),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Zp,7,6,"div",21),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.calcolaRetta.nessunaTariffa")),e.xp6(2),e.Q6J("ngIf",t.sessionService.isCrmAttivo())}}function wp(i,o){if(1&i&&(e.TgZ(0,"span",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.calcolaRetta.disponibiliHotel")+t.disponibiliHotel,"")}}function zp(i,o){1&i&&(e.TgZ(0,"span",40),e._uU(1,"warning_amber"),e.qZA())}function Mp(i,o){if(1&i&&(e.TgZ(0,"span",59),e._uU(1,"lens"),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw().index,a=e.oxw(2).index,l=e.oxw(3);e.Q6J("matTooltip",l.getProposta(a,n,t).giorniChiusi)("matTooltipClass","calcola-retta-tariffa-chiusa-tooltip-class")}}function qp(i,o){if(1&i&&(e.TgZ(0,"div")(1,"b"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.nomePromozione)}}function Pp(i,o){if(1&i&&(e.TgZ(0,"div",60),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.calcolaRetta.pianoTariffario")+t.pianoTariffario," ")}}function kp(i,o){if(1&i&&(e.TgZ(0,"div",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.calcolaRetta.nonPrenotabile")+(t.testoTradottoNonPrenotabile?" - "+t.testoTradottoNonPrenotabile:"")," ")}}function Sp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",62)(1,"button",63),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(6);return e.KtG(l.openDettaglioGiornaliero(a.giorni))}),e.TgZ(2,"span",49),e._uU(3,"info"),e.qZA()(),e.TgZ(4,"span",64),e._uU(5),e.ALo(6,"eurCurrency"),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(e.lcZ(6,1,t.prezzoScontato))}}function yp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(6);return e.KtG(l.openDettaglioGiornaliero(a.giorni))}),e.TgZ(1,"span",49),e._uU(2,"info"),e.qZA()()}}function Jp(i,o){if(1&i&&(e.TgZ(0,"span",65),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu("-"+t.scontoPercentuale+"%")}}function Ep(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",66)(1,"mat-checkbox",67),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw().index,p=e.oxw(2).index,T=e.oxw(3);return T.getProposta(p,r,l).selected=a.checked,e.KtG(T.checkDisabled())}),e.qZA()()}if(2&i){const t=e.oxw().index,n=e.oxw().index,a=e.oxw(2).index,l=e.oxw(3);e.xp6(1),e.Q6J("checked",l.getProposta(a,n,t).selected)}}const Np=function(i){return{"border-top":i}},Op=function(i,o){return{prezzo:i,"prezzo-sconto mr-1":o}};function Lp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"div",45)(5,"span",46),e._uU(6),e.qZA(),e.YNc(7,Mp,2,2,"span",47),e.TgZ(8,"button",48),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw().$implicit,p=e.oxw(5);return e.KtG(p.openDetails(r,l))}),e.TgZ(9,"span",49),e._uU(10,"info"),e.qZA()()(),e.YNc(11,qp,3,1,"div",3),e.YNc(12,Pp,3,3,"div",50),e.qZA(),e.TgZ(13,"div",51),e._uU(14),e.qZA()(),e.YNc(15,kp,3,3,"div",52),e.qZA(),e.TgZ(16,"div",53),e.YNc(17,Sp,7,3,"div",54),e.TgZ(18,"div",45),e.YNc(19,yp,3,0,"button",55),e.TgZ(20,"span",56),e._uU(21),e.ALo(22,"eurCurrency"),e.qZA(),e.YNc(23,Jp,2,1,"span",57),e.qZA()(),e.YNc(24,Ep,2,1,"div",58),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw().index,l=e.oxw(2).index,r=e.oxw(3);e.Q6J("ngClass",e.VKq(15,Np,0==n)),e.xp6(6),e.Oqu(t.descrizione),e.xp6(1),e.Q6J("ngIf",!!r.getProposta(l,a,n).giorniChiusi),e.xp6(4),e.Q6J("ngIf",!!t.nomePromozione),e.xp6(1),e.Q6J("ngIf",!!t.pianoTariffario),e.xp6(2),e.hij(" ",null!=t.cancellazione?t.cancellazione.nome:""," "),e.xp6(1),e.Q6J("ngIf",!t.isPrenotabile),e.xp6(2),e.Q6J("ngIf",t.prezzoScontato>0),e.xp6(2),e.Q6J("ngIf",t.prezzoScontato<=0),e.xp6(1),e.Q6J("ngClass",e.WLB(17,Op,t.prezzoScontato<=0,t.prezzoScontato>0)),e.xp6(1),e.Oqu(e.lcZ(22,13,t.prezzo)),e.xp6(2),e.Q6J("ngIf",t.prezzoScontato>0),e.xp6(1),e.Q6J("ngIf",!r.showErrori)}}function Dp(i,o){if(1&i&&(e.TgZ(0,"div",30)(1,"div",31)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"div",32)(5,"div",33),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",34),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",35)(12,"span",36),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.YNc(15,wp,3,3,"span",37),e.YNc(16,zp,2,0,"span",38),e.qZA(),e.YNc(17,Lp,25,20,"div",39),e.qZA()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.nome),e.xp6(3),e.Oqu(e.lcZ(7,7,"sbm.calcolaRetta.paxMin")+t.paxMin),e.xp6(3),e.Oqu(e.lcZ(10,9,"sbm.calcolaRetta.paxMax")+t.paxMax),e.xp6(4),e.Oqu(e.lcZ(14,11,"sbm.calcolaRetta.disponibili")+t.disponibili),e.xp6(2),e.Q6J("ngIf",t.disponibili!=t.disponibiliHotel),e.xp6(1),e.Q6J("ngIf",0==t.disponibili||0==t.disponibiliHotel),e.xp6(1),e.Q6J("ngForOf",t.tariffe)}}function Ip(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Dp,18,13,"div",29),e.BQk()),2&i){const t=e.oxw().index,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",n.camere[t])}}function Qp(i,o){1&i&&(e.TgZ(0,"div",68)(1,"h5",69),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.calcolaRetta.nessunaTariffa")))}function Up(i,o){if(1&i&&(e.TgZ(0,"mat-tab",27),e.ALo(1,"translate"),e.YNc(2,Ip,2,1,"ng-container",3),e.YNc(3,Qp,4,3,"div",28),e.qZA()),2&i){const t=o.index,n=e.oxw(3);e.Q6J("label",e.lcZ(1,3,"sbm.calcolaRetta.camera")+(t+1)),e.xp6(2),e.Q6J("ngIf",null!=n.camere[t]&&n.camere[t].length>0),e.xp6(1),e.Q6J("ngIf",null==n.camere[t]||0==n.camere[t].length)}}function Yp(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-tab-group",25),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.selectedIndex=a)}),e.YNc(2,Up,4,5,"mat-tab",26),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.camereRQ)}}function Rp(i,o){if(1&i&&(e.TgZ(0,"div",16,17),e.YNc(2,Ap,5,4,"div",18),e.YNc(3,Yp,3,2,"ng-container",3),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.noRates),e.xp6(1),e.Q6J("ngIf",!t.noRates)}}function Fp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",74),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.creaPrenotazione())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",t.creaPreventivoDisabled),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.calcolaRetta.creaPrenotazione"))}}function Hp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.creaRichiestaPreventivo())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",t.creaPreventivoDisabled),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.calcolaRetta.creaPreventivo"))}}function Kp(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Fp,3,4,"button",72),e.YNc(2,Hp,3,4,"button",73),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.dialogRef),e.xp6(1),e.Q6J("ngIf",t.sessionService.isCrmAttivo())}}function Gp(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function $p(i,o){if(1&i&&(e.TgZ(0,"div",76)(1,"h5",77),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Gp,2,1,"div",78),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.calcolaRetta.erroriNotifiche")),e.xp6(2),e.Q6J("ngForOf",t.errori[t.selectedIndex])}}const Bp=function(i){return{"buttons-container-padding-right":i}};function Vp(i,o){if(1&i&&(e.TgZ(0,"div",70),e.YNc(1,Kp,3,2,"ng-container",3),e.YNc(2,$p,5,4,"div",71),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,Bp,null==t.dialogRef&&!t.containerService.isMobile)),e.xp6(1),e.Q6J("ngIf",!t.showErrori&&!t.noRates),e.xp6(1),e.Q6J("ngIf",t.showErrori&&null!=t.errori[t.selectedIndex]&&t.errori[t.selectedIndex].length>0)}}class Et extends f.H{constructor(o,t,n,a,l,r,p){super(),this.apiService=o,this.localizationService=t,this.sessionService=n,this.parametriService=a,this.containerService=l,this.navigationService=r,this.utility=p,this.isControllaDisponibili=!1,this.isControllaPrenotabili=!1,this.isVisualizzaCamerePaxNonValide=!1,this.portali=[],this.showCalendar=!1,this.controllingDisponibility=!1,this.creaPreventivoDisabled=!0,this.creaRichiestaPreventivoRQ=new d.eOG,this.noRates=!1,this.errori=[],this.enumMealPlanType=c.jH,this.mealTypes=[],this.selectedIndex=0}ngOnInit(){if(this.oidPortale=this.portaleOid,null==this.oidPortale){this.setIsLoading(!0);let o=d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number);null!=this.sessionService.getUbicazioneIstat()&&o.filters.push(new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,this.sessionService.getUbicazioneIstat().oid.toString(),c.NM.Number)),this.apiService.getPortaliFilter(o).subscribe(t=>{this.portali=t.data,null!=this.portali&&this.portali.length>0?(this.oidPortale=this.portali[0].oid,this.init()):this.setIsLoading(!1)})}else this.init();this.sub=this.localizationService.languageChanged.subscribe(()=>{this.init()}),this.isControllaDisponibili=null!=this.parametriService.parametri.isControllaDisponibiliChecked&&this.parametriService.parametri.isControllaDisponibiliChecked,this.isControllaPrenotabili=null!=this.parametriService.parametri.isControllaPrenotabiliChecked&&this.parametriService.parametri.isControllaPrenotabiliChecked,this.isVisualizzaCamerePaxNonValide=null!=this.parametriService.parametri.isVisualizzaCamerePaxNonValideChecked&&this.parametriService.parametri.isVisualizzaCamerePaxNonValideChecked}init(){this.setIsLoading(!0),this.showCalendar=!1,this.camere=null;let o=new d.UYh;o.oidPortale=this.oidPortale,o.lingua=this.localizationService.getCurrentLocale(),o.isDayUse=!1,o.isMobile=!0,o.isBooking=!1,this.apiService.getBookingSolutionConfig(o).subscribe(t=>{null!=t.data&&null!=t.data.portale&&null!=t.data.albergo&&(this.isVisualizzaDisponibilitaCalendario=!1,this.isVisualizzaPrezzoCalendario=t.data.portale.isVisualizzaPrezzoCalendario,this.adultiDefault=t.data.portale.adultiDefault,this.adultiMax=t.data.portale.numeroMassimoAdulti,this.bambiniMax=t.data.portale.numeroMassimoBambini,this.etaMinimaBambini=t.data.portale.etaMinimaBambini>0&&t.data.portale.etaMinimaBambini<=17?t.data.portale.etaMinimaBambini:0,this.etaMassimaBambini=t.data.portale.etaMassimaBambini>0&&t.data.portale.etaMassimaBambini<=17?t.data.portale.etaMassimaBambini:17,this.riduzioni=t.data.riduzioni,this.isEtaRiduzioniAttiva=t.data.portale.isEtaRiduzioniAttiva,this.numeroCodiciPromozionali=t.data.numeroCodiciPromozionali,this.camerePrenotabili=t.data.portale.camerePrenotabiliCrm,this.motiviViaggio=t.data.motiviViaggio,this.mealPlanType=null,this.mealTypes=t.data.mealTypes,this.dataInizioGestione=u(t.data.portale.dataInizioGestione).isAfter(u())?t.data.portale.dataInizioGestione:null,this.isVisualizzaTipoCameraTariffa=t.data.albergo.isVisualizzaTipoCameraTariffaCalcolaRetta,this.showCalendar=!0),this.setIsLoading(!1)})}onDaysSelected(o){this.setIsLoading(!0),this.selectedIndex=0,this.creaPreventivoDisabled=!0,this.controllingDisponibility=!0,o.lingua=this.localizationService.getCurrentLocale(),o.oidPortale=this.oidPortale,o.isDayUse=!1,o.isMobile=!0,o.isControllaDisponibili=this.isControllaDisponibili,o.isVisualizzaCamerePaxNonValide=this.isVisualizzaCamerePaxNonValide,o.mealPlanType=this.mealPlanType,this.oidMotivoViaggio=o.oidMotivoViaggio;let t=[];this.camere=null,this.camereRQ=[];let n=[];for(let r of o.camere){var a,l;let p=new d.Esx;p.pax=JSON.parse(JSON.stringify(r.pax)),this.camereRQ.push(p);let T=JSON.parse(JSON.stringify(o));T.camere=[r],T.oidTipoCameraOTA=null===(a=this.tipoCameraOTA)||void 0===a?void 0:a.oid,T.oidTariffaOTA=null===(l=this.tariffaOTA)||void 0===l?void 0:l.oid,t.push(T)}this.apiService.getBookingSolutions(t).subscribe(r=>{if(null!=r&&null!=r.data){this.errori=[],this.creaRichiestaPreventivoRQ=new d.eOG,this.creaRichiestaPreventivoRQ.dal=o.arrivo,this.creaRichiestaPreventivoRQ.al=o.partenza,this.creaRichiestaPreventivoRQ.oidPortale=this.oidPortale,this.creaRichiestaPreventivoRQ.oidUtente=this.sessionService.getOidUtente(),this.creaRichiestaPreventivoRQ.camere=[];let p=0;for(let T of r.data){let L=new d.Xhc;if(L.pax=this.camereRQ[p].pax,L.proposte=[],this.creaRichiestaPreventivoRQ.camere.push(L),this.isControllaPrenotabili)for(let G of T.camere)G.tariffe=G.tariffe.filter(W=>W.isPrenotabile);T.camere=T.camere.filter(G=>null!=G.tariffe&&G.tariffe.length>0),this.errori.push(T.errori),p++}if(r.data.every(T=>T.camere.length>0)||this.showErrori){this.noRates=!1,p=0;for(let T of r.data){for(let L of T.camere)for(let G of L.tariffe){let W=new d.F8Z;if(W.tipoCamera=L,G.testoNonPrenotabile&&(G.testoTradottoNonPrenotabile=this.localizationService.getTranslationSync(G.testoNonPrenotabile,{value:G.valoreNonPrenotabile})),W.tariffa=G,W.selected=!1,null!=G.disponibilita){let be=G.disponibilita.filter(Ze=>Ze.statoPortaleXAlbergo==c.V6.Chiuso);be.length>0&&(W.giorniChiusi=this.localizationService.getTranslationSync("sbm.calcolaRetta.tariffaChiusa"),be.forEach(Ze=>W.giorniChiusi+=u(Ze.data).format("DD/MM/YYYY")+"\n"))}this.creaRichiestaPreventivoRQ.camere[p].proposte.push(W)}n.push(T.camere),0==p&&(this.creaRichiestaPreventivoRQ.oidCodicePromozione=T.oidCodicePromozione),p++}this.camere=n}else this.noRates=!0,this.camere=[]}this.controllingDisponibility=!1,setTimeout(()=>{this.roomsContainer.nativeElement.scrollIntoView({behavior:"smooth"})},200),this.setIsLoading(!1)})}creaRichiestaPreventivo(o=!0){var t;this.setIsLoading(!0);let n=JSON.parse(JSON.stringify(this.creaRichiestaPreventivoRQ));for(let a of n.camere)a.proposte=a.proposte.filter(l=>l.selected);n.oidMotivoViaggio=this.oidMotivoViaggio,n.oidCliente=null===(t=this.cliente)||void 0===t?void 0:t.oid,n.isCreaPreventivo=o,this.apiService.creaRichiestaPreventivo(n).subscribe(a=>{o?null!=a.data&&a.data.oidPreventivo>0&&(null==a.errori||0==a.errori.length)?(this.utility.openPageSbm("preventivi",{oidPreventivo:a.data.oidPreventivo}),null!=this.dialogRef&&this.dialogRef.close()):this.setIsLoading(!1):(this.setIsLoading(!1),null!=this.dialogRef&&this.dialogRef.close(),this.showInfo("sbm.calcolaRetta.richiestaCreata"),this.navigationService.refreshContatoriMenu())})}creaPrenotazione(){if(this.creaRichiestaPreventivoRQ.camere.every(o=>1==o.proposte.filter(t=>t.selected).length)){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Gi,o),n=t.componentInstance;n.creaRichiestaPreventivoRQ=this.creaRichiestaPreventivoRQ,n.dialogRef=t,n._cliente=this.cliente,t.afterClosed().subscribe(a=>{a>0&&(this.utility.openPageSbm("prenotazioni",{oidPrenotazione:a}),null!=this.dialogRef&&this.dialogRef.close())})}else this.showError("sbm.calcolaRetta.selezionareUnaProposta")}checkDisabled(){this.creaPreventivoDisabled=!this.creaRichiestaPreventivoRQ.camere.every(o=>o.proposte.some(t=>t.selected))}getPropostaIndex(o,t,n){let a=0;for(let l=0;l<t;l++)a+=this.camere[o][l].tariffe.length;return a+=n,a}getProposta(o,t,n){return this.creaRichiestaPreventivoRQ.camere[o].proposte[this.getPropostaIndex(o,t,n)]}openDettaglioGiornaliero(o){let t=new d.Zpt;t.width="80vw",this.showModalDialog($i,t).componentInstance.giorni=o}openDetails(o,t){let n=new d.Zpt;n.width="80vw",n.panelClass="dialog-overlay";let l=this.showModalDialog(wc.w,n).componentInstance;l.tariffa=t,l.tipoCamera=o,l.isVisualizzaDettaglioGiornaliero=!0}nuovoPreventivo(){let o=new d.Zpt;o.width="70vw";let t=this.showModalDialog(Jt,o),n=t.componentInstance;n.oidPortale=this.oidPortale,n.dialogRef=t;let a=[];for(let l of this.creaRichiestaPreventivoRQ.camere){let r=new d.osD;r.numeroAdulti=l.pax.filter(p=>p.eta<0).reduce((p,T)=>p+T.quantita,0),r.numeroBambini=l.pax.filter(p=>p.eta>=0).reduce((p,T)=>p+T.quantita,0),r.tipoCamera=this.tipoCameraOTA,r.tariffa=this.tariffaOTA,a.push(r)}n.camere=a,t.afterClosed().subscribe(l=>{if(l){let r=0;for(let p of a){let T=new d.F8Z;T.tipoCamera=new d.rDl,T.tipoCamera.roomId=p.tipoCamera.oid,T.tariffa=new d.fnf,T.tariffa.rateId=p.tariffa.oid,T.selected=!0,this.creaRichiestaPreventivoRQ.camere[r].proposte=[T],r++}this.creaRichiestaPreventivo()}})}nuovaRichiesta(){this.creaRichiestaPreventivo(!1)}ngOnDestroy(){this.sub.unsubscribe()}}Et.\u0275fac=function(o){return new(o||Et)(e.Y36(A.s),e.Y36(Oe.o),e.Y36(j.m),e.Y36(et),e.Y36(te.J),e.Y36(Ae.f),e.Y36(C.t))},Et.\u0275cmp=e.Xpm({type:Et,selectors:[["app-calcola-retta"]],viewQuery:function(o,t){if(1&o&&e.Gf(hp,5),2&o){let n;e.iGM(n=e.CRH())&&(t.roomsContainer=n.first)}},inputs:{dialogRef:"dialogRef",portaleOid:"portaleOid",showErrori:"showErrori",cliente:"cliente"},features:[e.qOj],decls:17,vars:18,consts:[[1,"p-3"],[1,"calendar-container","align-top"],["class","w-100",4,"ngIf"],[4,"ngIf"],["color","primary",1,"d-block",3,"ngModel","ngModelChange","change"],["color","primary",1,"d-block","mb-3",3,"ngModel","ngModelChange","change"],[3,"oidPortale","isVisualizzaDisponibilitaCalendario","isVisualizzaPrezzoCalendario","dayUse","adultiDefault","adultiMax","bambiniMax","etaMinimaBambini","etaMassimaBambini","controllingDisponibility","isEtaRiduzioniAttiva","riduzioni","numeroCodiciPromozionali","motiviViaggio","camerePrenotabili","isBooking","isVisualizzaCalendarioMobile","isVisualizzaPrezzoMinimo","hideButton","oidTipoCameraOTA","oidTariffaOTA","initialDate","daysSelected",4,"ngIf"],["class","rooms-container pt-3",4,"ngIf"],["class","buttons-container border-top w-100 p-3 text-right",3,"ngClass",4,"ngIf"],[1,"w-100"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["displayMember","descrizione",3,"dataLoader","value","placeholder","forceDownload","valueChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"oidPortale","isVisualizzaDisponibilitaCalendario","isVisualizzaPrezzoCalendario","dayUse","adultiDefault","adultiMax","bambiniMax","etaMinimaBambini","etaMassimaBambini","controllingDisponibility","isEtaRiduzioniAttiva","riduzioni","numeroCodiciPromozionali","motiviViaggio","camerePrenotabili","isBooking","isVisualizzaCalendarioMobile","isVisualizzaPrezzoMinimo","hideButton","oidTipoCameraOTA","oidTariffaOTA","initialDate","daysSelected"],[1,"rooms-container","pt-3"],["roomsContainer",""],["class","border rounded p-3 bg-white",4,"ngIf"],[1,"border","rounded","p-3","bg-white"],[1,"d-inline-block","mb-0"],["class","float-right mt-n1",4,"ngIf"],[1,"float-right","mt-n1"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"calcola-retta-tab-group","dialog-tab-group",3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["class","border rounded p-3 mt-3 bg-white",4,"ngIf"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"bg-white","border","rounded-xl","pr-3","pl-3","pt-3"],[1,"font-small","font-italic","font-weight-bold"],[1,"d-inline-block","mr-2"],[1,"d-inline-block"],[1,"font-small","font-italic","font-weight-bold","mb-3"],[1,"align-middle"],["class","align-middle",4,"ngIf"],["class","material-icons-round color-red align-middle warning-icon",4,"ngIf"],["class","row row-tariffa",3,"ngClass",4,"ngFor","ngForOf"],[1,"material-icons-round","color-red","align-middle","warning-icon"],[1,"row","row-tariffa",3,"ngClass"],[1,"col-6"],[1,"row"],[1,"col-12","col-sm-6"],[1,"text-nowrap"],[1,"d-inline-block","align-middle","mr-1","text-wrap"],["class","material-icons tariffa-closed-icon color-red align-middle mr-1",3,"matTooltip","matTooltipClass",4,"ngIf"],["mat-icon-button","",1,"info-button","align-middle",3,"click"],[1,"material-icons","info-icon"],["class","font-small font-italic",4,"ngIf"],[1,"col-6","d-none","d-sm-block","text-center"],["class","color-red tariffa-nonPrenotabile",4,"ngIf"],[1,"col-4","text-right"],["class","prezzo mr-1 text-nowrap",4,"ngIf"],["class","mr-1 info-button align-middle","mat-icon-button","",3,"click",4,"ngIf"],[3,"ngClass"],["class","sconto",4,"ngIf"],["class","col-2 d-flex align-items-center justify-content-end",4,"ngIf"],[1,"material-icons","tariffa-closed-icon","color-red","align-middle","mr-1",3,"matTooltip","matTooltipClass"],[1,"font-small","font-italic"],[1,"color-red","tariffa-nonPrenotabile"],[1,"prezzo","mr-1","text-nowrap"],["mat-icon-button","",1,"mr-1","info-button","align-middle",3,"click"],[1,"align-middle","d-inline-block"],[1,"sconto"],[1,"col-2","d-flex","align-items-center","justify-content-end"],["color","primary",1,"mr-3",3,"checked","change"],[1,"border","rounded","p-3","mt-3","bg-white"],[1,"mb-0"],[1,"buttons-container","border-top","w-100","p-3","text-right",3,"ngClass"],["class","text-left",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary","class","ml-1",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary",1,"ml-1",3,"disabled","click"],[1,"text-left"],[1,"mb-3"],[4,"ngFor","ngForOf"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Cp,4,5,"mat-form-field",2),e.YNc(3,bp,5,12,"ng-container",3),e.YNc(4,Tp,5,6,"mat-form-field",2),e.TgZ(5,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){return t.isControllaDisponibili=a})("change",function(a){return t.parametriService.setParametro("isControllaDisponibiliChecked",a.checked)}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){return t.isControllaPrenotabili=a})("change",function(a){return t.parametriService.setParametro("isControllaPrenotabiliChecked",a.checked)}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.isVisualizzaCamerePaxNonValide=a})("change",function(a){return t.parametriService.setParametro("isVisualizzaCamerePaxNonValideChecked",a.checked)}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.YNc(14,xp,1,22,"app-booking-calendar",6),e.qZA(),e.YNc(15,Rp,4,2,"div",7),e.qZA(),e.YNc(16,Vp,3,5,"div",8)),2&o&&(e.xp6(2),e.Q6J("ngIf",null==t.portaleOid&&null!=t.portali&&t.portali.length>0),e.xp6(1),e.Q6J("ngIf",t.isVisualizzaTipoCameraTariffa),e.xp6(1),e.Q6J("ngIf",t.mealTypes.length>0),e.xp6(1),e.Q6J("ngModel",t.isControllaDisponibili),e.xp6(1),e.Oqu(e.lcZ(7,12,"sbm.calcolaRetta.visualizzaSoloCamereDisponibili")),e.xp6(2),e.Q6J("ngModel",t.isControllaPrenotabili),e.xp6(1),e.Oqu(e.lcZ(10,14,"sbm.calcolaRetta.visualizzaSoloTariffePrenotabili")),e.xp6(2),e.Q6J("ngModel",t.isVisualizzaCamerePaxNonValide),e.xp6(1),e.Oqu(e.lcZ(13,16,"sbm.calcolaRetta.visualizzaCamerePaxNonValide")),e.xp6(2),e.Q6J("ngIf",t.showCalendar),e.xp6(1),e.Q6J("ngIf",null!=t.camere),e.xp6(1),e.Q6J("ngIf",null!=t.camere))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,M.v_,re.CK,g.x8,ee.SK,ee.R7,q.Kd,_.JJ,_.On,ne.d,gp.Q,ke.f,z.X$],styles:[".prezzo[_ngcontent-%COMP%]{font-weight:700}.prezzo-sconto[_ngcontent-%COMP%]{color:#aaa;text-decoration:line-through;font-size:13px}.sconto[_ngcontent-%COMP%]{color:#e91e63;font-size:12px}.calendar-container[_ngcontent-%COMP%], .rooms-container[_ngcontent-%COMP%]{width:100%;display:block}@media (min-width: 576px){.calendar-container[_ngcontent-%COMP%]{width:350px;display:inline-block}}@media (min-width: 992px){.rooms-container[_ngcontent-%COMP%]{width:calc(100% - 350px);display:inline-block;vertical-align:top;padding-left:2rem;margin-top:-1rem}}  .calcola-retta-tab-group .mat-tab-body-content{overflow:hidden!important}.row-tariffa[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc;padding-top:1rem;padding-bottom:1rem}.tariffa-nonPrenotabile[_ngcontent-%COMP%]{font-size:small}.color-red[_ngcontent-%COMP%]{color:#d9534f}.info-button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px}.info-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.tariffa-closed-icon[_ngcontent-%COMP%]{font-size:14px;line-height:14px}.warning-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px;margin-bottom:1px}.buttons-container[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0;left:0;background-color:#fff;z-index:1;max-height:300px;overflow:auto}.buttons-container-padding-right[_ngcontent-%COMP%]{padding-right:80px!important}  .calcola-retta-tariffa-chiusa-tooltip-class{font-size:11px!important;white-space:pre!important;max-width:unset!important}"]});class ut{constructor(){}}ut.\u0275fac=function(o){return new(o||ut)},ut.\u0275cmp=e.Xpm({type:ut,selectors:[["app-calcola-retta-modal"]],inputs:{cliente:"cliente",dialogRef:"dialogRef"},decls:4,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"cliente","dialogRef"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"app-calcola-retta",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("cliente",t.cliente)("dialogRef",t.dialogRef))},dependencies:[h.eB,F.aO,Et]});var ye=Y(95787);function Xp(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"div",11)(6,"div")(7,"span",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"div")(13,"span",4),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.qZA()(),e.TgZ(18,"div")(19,"span",4),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"span"),e._uU(23),e.qZA()()(),e.TgZ(24,"div",11)(25,"div")(26,"span",4),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"span"),e._uU(30),e.qZA()(),e.TgZ(31,"div")(32,"span",4),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"span"),e._uU(36),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,11,"bo.transazione.proprieta.cliente")),e.xp6(6),e.Oqu(e.lcZ(9,13,"bo.cliente.proprieta.cognome")+": "),e.xp6(3),e.Oqu(t.cliente.cognome?t.cliente.cognome:"---"),e.xp6(3),e.Oqu(e.lcZ(15,15,"bo.cliente.proprieta.nome")+": "),e.xp6(3),e.Oqu(t.cliente.nome?t.cliente.nome:"---"),e.xp6(3),e.Oqu(e.lcZ(21,17,"bo.cliente.proprieta.email")+": "),e.xp6(3),e.Oqu(t.cliente.email?t.cliente.email:"---"),e.xp6(4),e.Oqu(e.lcZ(28,19,"bo.cliente.proprieta.cellulare")+": "),e.xp6(3),e.Oqu(t.cliente.cellulare?t.cliente.cellulare:"---"),e.xp6(3),e.Oqu(e.lcZ(34,21,"bo.cliente.proprieta.lingua")+": "),e.xp6(3),e.Oqu(t.cliente.codiceLingua?t.cliente.codiceLingua:"---")}}function jp(i,o){if(1&i&&(e.TgZ(0,"div")(1,"span",4),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.prenotazione.proprieta.codicePrenotazione")+": "),e.xp6(3),e.Oqu(t.prenotazioni[0].codicePrenotazione?t.prenotazioni[0].codicePrenotazione:t.prenotazioni[0].codiceOTA)}}function Wp(i,o){if(1&i&&(e.TgZ(0,"div")(1,"span",4),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.preventivo.proprieta.codicePreventivo")+": "),e.xp6(3),e.Oqu(t.rq.codicePreventivo)}}function ed(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h6",19),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"div",11)(6,"div")(7,"span",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"div")(13,"span",4),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.qZA()()(),e.TgZ(18,"div",11)(19,"div")(20,"span",4),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"span"),e._uU(24),e.qZA()(),e.TgZ(25,"div")(26,"span",4),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"span"),e._uU(30),e.qZA()()()(),e.BQk()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,9,"sbm.prenotazioni.camera")+(n+1)),e.xp6(6),e.Oqu(e.lcZ(9,11,"bo.prenotazione.proprieta.tipoCameraOTA")+": "),e.xp6(3),e.Oqu(null!=t.tipoCameraOTA&&t.tipoCameraOTA.descrizione?t.tipoCameraOTA.descrizione:"---"),e.xp6(3),e.Oqu(e.lcZ(15,13,"bo.prenotazione.proprieta.tariffaOTA")+": "),e.xp6(3),e.Oqu(null!=t.tariffaOTA&&t.tariffaOTA.descrizione?t.tariffaOTA.descrizione:"---"),e.xp6(4),e.Oqu(e.lcZ(22,15,"bo.prenotazione.proprieta.numeroAdulti")+": "),e.xp6(3),e.Oqu(a.getNumeroAdulti(t)?a.getNumeroAdulti(t):"---"),e.xp6(3),e.Oqu(e.lcZ(28,17,"bo.prenotazione.proprieta.numeroBambini")+": "),e.xp6(3),e.Oqu(a.getNumeroBambini(t)?a.getNumeroBambini(t):"---")}}function td(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.creaPrenotazione())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",t.creaPrenotazioneDisabled),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.transazioni.creaPrenotazione"))}}function id(i,o){if(1&i&&(e.TgZ(0,"div",15)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"div",11),e.YNc(6,jp,6,4,"div",16),e.TgZ(7,"div")(8,"span",4),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"date"),e.qZA()(),e.YNc(14,Wp,6,4,"div",16),e.qZA(),e.TgZ(15,"div",11)(16,"div")(17,"span",4),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"date"),e.qZA()(),e.TgZ(23,"div")(24,"span",4),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"span"),e._uU(28),e.ALo(29,"date"),e.qZA()()()(),e.YNc(30,ed,31,19,"ng-container",17),e.YNc(31,td,3,4,"button",18),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,11,"bo.transazione.proprieta.prenotazione")),e.xp6(4),e.Q6J("ngIf",!!t.prenotazioni[0].codicePrenotazione||!!t.prenotazioni[0].codiceOTA),e.xp6(3),e.Oqu(e.lcZ(10,13,"bo.prenotazione.proprieta.dataPren")+": "),e.xp6(3),e.Oqu(t.prenotazioni[0].dataPren?e.xi3(13,15,t.prenotazioni[0].dataPren,"dd/MM/yyyy"):"---"),e.xp6(2),e.Q6J("ngIf",!!t.rq.codicePreventivo),e.xp6(4),e.Oqu(e.lcZ(19,18,"bo.prenotazione.proprieta.arrivo")+": "),e.xp6(3),e.Oqu(t.prenotazioni[0].arrivo?e.xi3(22,20,t.prenotazioni[0].arrivo,"dd/MM/yyyy"):"---"),e.xp6(4),e.Oqu(e.lcZ(26,23,"bo.prenotazione.proprieta.partenza")+": "),e.xp6(3),e.Oqu(t.prenotazioni[0].partenza?e.xi3(29,25,t.prenotazioni[0].partenza,"dd/MM/yyyy"):"---"),e.xp6(2),e.Q6J("ngForOf",t.prenotazioni),e.xp6(1),e.Q6J("ngIf",!t.dataReceived&&null==t.prenotazione&&null!=t.prenotazioni&&t.prenotazioni.length>0&&null!=t.cliente&&null!=t.rq)}}function od(i,o){if(1&i&&(e.TgZ(0,"div",11),e.YNc(1,Xp,37,23,"div",12),e.YNc(2,id,32,28,"div",13),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=t.cliente),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazioni&&t.prenotazioni.length>0)}}function nd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"mat-form-field")(2,"input",22),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.importoContabilizzazioneSorno=a)})("blur",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.importoContabilizzazioneSorno=a.utility.clamp(a.importoContabilizzazioneSorno,0,a.transazione.importo))}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.dialogRef.close(a.importoContabilizzazioneSorno))}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("placeholder",e.lcZ(3,3,"bo.transazione.proprieta.importo"))("ngModel",t.importoContabilizzazioneSorno),e.xp6(3),e.Oqu(e.lcZ(6,5,t.isContabilizza?"sbm.transazioni.contabilizza":"sbm.transazioni.storna"))}}function ad(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.riepilogo())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.scontrino())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.transazioni.riepilogo")),e.xp6(3),e.Oqu(e.lcZ(6,4,"sbm.transazioni.scontrino")))}const ld=function(i,o){return{"col-6":i,"col-12":o}};class xt extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.prenotazioni=[],this.creaPrenotazioneDisabled=!1,this.enumTipoModalitaPagamento=c.sc,this.rq=new d.BH0,this.importoContabilizzazioneSorno=0}ngOnInit(){this.setIsLoading(!0),null==this.prenotazione?this.prenotazione=this.transazione.prenotazione:this.transazione=this.prenotazione.transazione,this.importoContabilizzazioneSorno=this.transazione.importo,null!=this.prenotazione?this.apiService.getPrenotazioniAssociate(this.prenotazione.oid).subscribe(o=>{var t;o.data.forEach(n=>n.prenotazione.ospiti=n.ospiti),this.prenotazioni=o.data.map(n=>n.prenotazione),this.cliente=this.prenotazione.cliente,this.codicePreventivo=null===(t=this.prenotazione)||void 0===t||null===(t=t.preventivo)||void 0===t?void 0:t.codicePreventivo,this.setIsLoading(!1)}):this.apiService.getCreaPrenotazioneTransazioneRQ(this.transazione.oid).subscribe(o=>{this.rq=o,this.prenotazioni=this.rq.prenotazioni,this.cliente=this.prenotazioni.length>0?this.prenotazioni[0].cliente:null,this.codicePreventivo=this.rq.codicePreventivo,this.setIsLoading(!1)}),null!=this.prenotazioni&&this.prenotazioni.length>0&&(this.creaPrenotazioneDisabled=u(this.prenotazioni[0].arrivo).startOf("day")<u().startOf("day"))}getNumeroAdulti(o){return null!=o.ospiti?o.ospiti.filter(t=>t.tipoComponentePrenotazione==c.dE.Adulto).length:0}getNumeroBambini(o){return null!=o.ospiti?o.ospiti.filter(t=>t.tipoComponentePrenotazione==c.dE.Bambino).length:0}creaPrenotazione(){this.setIsLoading(!0),this.apiService.creaPrenotazioneTransazione(this.rq).subscribe(o=>{this.setIsLoading(!1),o.data.success?this.showInfo("sbm.transazioni.prenotazioneCreata").then(()=>{this.dialogRef.close(!0)}):this.showError("sbm.transazioni.prenotazioneGiaCreata").then(()=>{this.dialogRef.close()})})}riepilogo(){var o,t,n,a,l,r,p,T;this.setIsLoading(!0);let L=d.sK_.getXPayRiepilogoRQ(this.sessionService.getOidAlbergo(),null===(o=this.prenotazione)||void 0===o||null===(o=o.portaleXAlbergo)||void 0===o?void 0:o.oid,this.transazione.modalitaPagamento.oid,this.transazione.cliente,null===(t=this.transazione.cliente)||void 0===t||null===(t=t.lingua)||void 0===t?void 0:t.codice,null===(n=this.prenotazione)||void 0===n?void 0:n.arrivo,null===(a=this.prenotazione)||void 0===a?void 0:a.partenza,null,null,null===(l=this.prenotazione)||void 0===l?void 0:l.noteP,null===(r=this.prenotazione)||void 0===r||null===(r=r.codicePromozione)||void 0===r?void 0:r.oid,null===(p=this.prenotazione)||void 0===p||null===(p=p.motivoViaggio)||void 0===p?void 0:p.oid,null===(T=this.prenotazione)||void 0===T?void 0:T.caparra,null,null,null,this.transazione.modalitaPagamento.xPayAlias,this.transazione.modalitaPagamento.xPaySecretKey,this.transazione.importo,this.transazione.oid,this.transazione.modalitaPagamento.isTest);this.apiService.payment(L).subscribe(G=>{this.setIsLoading(!1),G.success||this.showError("globals.messages.errore")})}scontrino(){var o,t,n,a,l,r,p,T;this.setIsLoading(!0);let L=d.sK_.getXPayScontrinoRQ(this.sessionService.getOidAlbergo(),null===(o=this.prenotazione)||void 0===o||null===(o=o.portaleXAlbergo)||void 0===o?void 0:o.oid,this.transazione.modalitaPagamento.oid,this.transazione.cliente,null===(t=this.transazione.cliente)||void 0===t||null===(t=t.lingua)||void 0===t?void 0:t.codice,null===(n=this.prenotazione)||void 0===n?void 0:n.arrivo,null===(a=this.prenotazione)||void 0===a?void 0:a.partenza,null,null,null===(l=this.prenotazione)||void 0===l?void 0:l.noteP,null===(r=this.prenotazione)||void 0===r||null===(r=r.codicePromozione)||void 0===r?void 0:r.oid,null===(p=this.prenotazione)||void 0===p||null===(p=p.motivoViaggio)||void 0===p?void 0:p.oid,null===(T=this.prenotazione)||void 0===T?void 0:T.caparra,null,null,null,this.transazione.modalitaPagamento.xPayAlias,this.transazione.modalitaPagamento.xPaySecretKey,this.transazione.importo,this.transazione.oid,this.transazione.modalitaPagamento.isTest);this.apiService.payment(L).subscribe(G=>{this.setIsLoading(!1),G.success||this.showError("globals.messages.errore")})}}xt.\u0275fac=function(o){return new(o||xt)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},xt.\u0275cmp=e.Xpm({type:xt,selectors:[["app-transazione-details"]],inputs:{prenotazione:"prenotazione",transazione:"transazione",dataReceived:"dataReceived",isContabilizza:"isContabilizza",isStorna:"isStorna",dialogRef:"dialogRef"},features:[e.qOj],decls:55,vars:51,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[3,"ngClass"],[1,"font-weight-bold"],[1,"font-weight-bold","mt-3"],["class","col-6",4,"ngIf"],[1,"border","mat-elevation-z0","mt-3"],[1,"break-word"],["class","col mt-3",4,"ngIf"],["class","col text-right mt-4",4,"ngIf"],[1,"col-6"],["class","p-3 border rounded-xl",4,"ngIf"],["class","p-3 border rounded-xl mt-2",4,"ngIf"],[1,"p-3","border","rounded-xl"],[1,"p-3","border","rounded-xl","mt-2"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary","class","mt-3",3,"disabled","click",4,"ngIf"],[1,"mt-3","mb-3"],["mat-flat-button","","color","primary",1,"mt-3",3,"disabled","click"],[1,"col","mt-3"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange","blur"],["mat-flat-button","","color","primary",1,"ml-3",3,"click"],[1,"col","text-right","mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"div",5),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div"),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"div",5),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div"),e._uU(21),e.TgZ(22,"small"),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",5),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div"),e._uU(29),e.ALo(30,"eurCurrency"),e.qZA(),e.TgZ(31,"div",5),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"div"),e._uU(35),e.qZA()(),e.YNc(36,od,3,2,"div",6),e.qZA(),e.TgZ(37,"mat-expansion-panel",7)(38,"mat-expansion-panel-header",4)(39,"mat-panel-title"),e._uU(40),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"div",5),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"div",8),e._uU(46),e.qZA(),e.TgZ(47,"div",5),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"div",8),e._uU(51),e.qZA()(),e.TgZ(52,"div",2),e.YNc(53,nd,7,7,"div",9),e.YNc(54,ad,7,6,"div",10),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngClass",e.WLB(48,ld,null!=t.cliente||null!=t.prenotazioni&&t.prenotazioni.length>0,null==t.cliente&&(null==t.prenotazioni||0==t.prenotazioni.length))),e.xp6(2),e.Oqu(e.lcZ(7,22,"bo.transazione.proprieta.dataCreazione")),e.xp6(3),e.Oqu(t.transazione.dataCreazione?e.xi3(10,24,t.transazione.dataCreazione,"dd/MM/yyyy HH:mm:ss"):"---"),e.xp6(3),e.Oqu(e.lcZ(13,27,"bo.transazione.proprieta.dataEsecuzione")),e.xp6(3),e.Oqu(t.transazione.dataEsecuzione?e.xi3(16,29,t.transazione.dataEsecuzione,"dd/MM/yyyy HH:mm:ss"):"---"),e.xp6(3),e.Oqu(e.lcZ(19,32,"bo.transazione.proprieta.codTrans")),e.xp6(3),e.hij("",t.transazione.codTrans?t.transazione.codTrans:"---"," - "),e.xp6(2),e.AsE("",e.lcZ(24,34,"bo.transazione.proprieta.oid")," ",t.transazione.oid,""),e.xp6(3),e.Oqu(e.lcZ(27,36,"bo.transazione.proprieta.importo")),e.xp6(3),e.Oqu(e.lcZ(30,38,t.transazione.importo)),e.xp6(3),e.Oqu(e.lcZ(33,40,"bo.transazione.proprieta.descrizioneEsito")),e.xp6(3),e.Oqu(t.transazione.descrizioneEsito?t.transazione.descrizioneEsito:"---"),e.xp6(1),e.Q6J("ngIf",null!=t.cliente||null!=t.prenotazioni&&t.prenotazioni.length>0),e.xp6(4),e.hij(" ",e.lcZ(41,42,"sbm.transazioni.urlRichiestaRisposta")," "),e.xp6(3),e.Oqu(e.lcZ(44,44,"bo.transazione.proprieta.urlRichiesta")),e.xp6(3),e.Oqu(t.transazione.urlRichiesta?t.transazione.urlRichiesta:"---"),e.xp6(2),e.Oqu(e.lcZ(49,46,"bo.transazione.proprieta.urlRisposta")),e.xp6(3),e.Oqu(t.transazione.urlRisposta?t.transazione.urlRisposta:"---"),e.xp6(2),e.Q6J("ngIf",t.isContabilizza||t.isStorna),e.xp6(1),e.Q6J("ngIf",(null==t.transazione.modalitaPagamento?null:t.transazione.modalitaPagamento.tipo)==t.enumTipoModalitaPagamento.XPay&&!!t.transazione.urlRisposta&&t.sessionService.isDev()))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,b.k0,ye.ib,ye.yz,ye.yK,F.aO,_.Fj,_.wV,_.JJ,_.On,m.uU,ke.f,z.X$]});var s=Y(54043);function rd(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.articoloXPrenotazione.proprieta.data")))}function cd(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function sd(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.articoloXPrenotazione.proprieta.descrizione")))}function pd(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function dd(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.articoloXPrenotazione.proprieta.note")))}function md(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.note)}}function _d(i,o){1&i&&(e.TgZ(0,"mat-header-cell",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.articoloXPrenotazione.proprieta.totale")))}function ud(i,o){if(1&i&&(e.TgZ(0,"mat-cell",16),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.totale))}}function gd(i,o){1&i&&e._UZ(0,"mat-header-row",17)}function hd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",18),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function fd(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",4)(5,"mat-table",5),e.ynx(6,6),e.YNc(7,rd,3,3,"mat-header-cell",7),e.YNc(8,cd,3,4,"mat-cell",8),e.BQk(),e.ynx(9,9),e.YNc(10,sd,3,3,"mat-header-cell",7),e.YNc(11,pd,2,1,"mat-cell",8),e.BQk(),e.ynx(12,10),e.YNc(13,dd,3,3,"mat-header-cell",7),e.YNc(14,md,2,1,"mat-cell",8),e.BQk(),e.ynx(15,11),e.YNc(16,_d,3,3,"mat-header-cell",12),e.YNc(17,ud,3,3,"mat-cell",13),e.BQk(),e.YNc(18,gd,1,0,"mat-header-row",14),e.YNc(19,hd,1,1,"mat-row",15),e.qZA()(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.prenotazioni.addebiti")),e.xp6(3),e.Q6J("dataSource",t.addebiti),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function Cd(i,o){1&i&&(e.TgZ(0,"h5"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.prenotazioni.nessunAddebito")))}function bd(i,o){if(1&i&&(e.ynx(0),e.YNc(1,fd,20,7,"ng-container",2),e.YNc(2,Cd,3,3,"h5",2),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.addebiti.length>0),e.xp6(1),e.Q6J("ngIf",0==t.addebiti.length)}}class Bi extends f.H{constructor(o){super(),this.apiService=o,this.displayedColumns=["data","descrizione","note","totale"]}ngOnInit(){this.setIsLoading(!0),this.apiService.getAddebitiPrenotazione(this.oidPrenotazione).subscribe(o=>{this.addebiti=o.data,this.setIsLoading(!1)})}}Bi.\u0275fac=function(o){return new(o||Bi)(e.Y36(A.s))},Bi.\u0275cmp=e.Xpm({type:Bi,selectors:[["app-addebiti-prenotazione-modal"]],inputs:{oidPrenotazione:"oidPrenotazione"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[1,"mb-3"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","data"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","descrizione"],["matColumnDef","note"],["matColumnDef","totale"],["class","justify-content-end",4,"matHeaderCellDef"],["class","justify-content-end",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"justify-content-end"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,bd,3,2,"ng-container",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.addebiti))},dependencies:[m.O5,h.eB,F.aO,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,m.uU,ke.f,z.X$]});class Vi extends f.H{constructor(o){super(),this.apiService=o}ngOnInit(){this.sondaggio=this.prenotazione.sondaggio}save(){this.setIsLoading(!0),this.prenotazione.sondaggio=this.sondaggio,this.apiService.setPrenotazione(this.prenotazione).subscribe(()=>{this.setIsLoading(!1),this.dialogRef.close()})}}Vi.\u0275fac=function(o){return new(o||Vi)(e.Y36(A.s))},Vi.\u0275cmp=e.Xpm({type:Vi,selectors:[["app-associa-sondaggio-modal"]],inputs:{prenotazione:"prenotazione",dialogRef:"dialogRef"},features:[e.qOj],decls:12,vars:12,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"mb-3"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"app-view-select",3),e.NdJ("valueChange",function(a){return t.sondaggio=a}),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4)(9,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.hij(" ",e.lcZ(5,6,"sbm.prenotazioni.associaSondaggio"),"\n"),e.xp6(2),e.Q6J("dataLoader",t.apiService.getSondaggiViewSelect())("value",t.sondaggio)("placeholder",e.lcZ(7,8,"bo.prenotazione.proprieta.sondaggio")),e.xp6(4),e.Oqu(e.lcZ(11,10,"globals.salva")))},dependencies:[h.eB,F.aO,ne.d,z.X$]});var y=Y(82226);class Xi extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.voucherSaved=new e.vpe,this.rq=new d.ois,this.saved=!1}ngOnInit(){this.rq.oidPrenotazione=this.prenotazione.oid,this.rq.codicePromozione=new v.z_T,this.genera()}save(){this.setIsLoading(!0),this.apiService.emettiVoucher(this.rq).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.prenotazioni.voucherEmesso").then(()=>{this.rq.codicePromozione=o.data,this.voucherSaved.emit(o.data),this.saved=!0})})}validoDalChange(){(!this.rq.codicePromozione.validoAl||u(this.rq.codicePromozione.validoDal)>u(this.rq.codicePromozione.validoAl))&&(this.rq.codicePromozione.validoAl=this.rq.codicePromozione.validoDal)}validoAlChange(){(!this.rq.codicePromozione.validoDal||u(this.rq.codicePromozione.validoAl)<u(this.rq.codicePromozione.validoDal))&&(this.rq.codicePromozione.validoDal=this.rq.codicePromozione.validoAl)}prenotabileDalChange(){(!this.rq.codicePromozione.prenotazioneAl||u(this.rq.codicePromozione.prenotazioneDal)>u(this.rq.codicePromozione.prenotazioneAl))&&(this.rq.codicePromozione.prenotazioneAl=this.rq.codicePromozione.prenotazioneDal)}prenotabileAlChange(){(!this.rq.codicePromozione.prenotazioneDal||u(this.rq.codicePromozione.prenotazioneAl)<u(this.rq.codicePromozione.prenotazioneDal))&&(this.rq.codicePromozione.prenotazioneDal=this.rq.codicePromozione.prenotazioneAl)}inviaEmail(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;n.tipoTemplate=c.hQ.Voucher,n.prenotazione=this.prenotazione,n.voucher=this.rq.codicePromozione,n.dialogRef=t}genera(){let o=this.prenotazione.codicePrenotazione?this.prenotazione.codicePrenotazione:this.prenotazione.codiceOTA;this.rq.codicePromozione.codice="VC"+(o?"_"+o:"")+"_"+this.utility.generateRandomString()}}Xi.\u0275fac=function(o){return new(o||Xi)(e.Y36(A.s),e.Y36(C.t))},Xi.\u0275cmp=e.Xpm({type:Xi,selectors:[["app-emetti-voucher"]],inputs:{prenotazione:"prenotazione"},outputs:{voucherSaved:"voucherSaved"},features:[e.qOj],decls:53,vars:55,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"codiceInput","mr-3"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","disabled","ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"generaButton",3,"disabled","click"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","disabled","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],[3,"startAt"],["validoDal",""],["validoAl",""],[1,"col-4","div-help"],["prenotazioneDal",""],["prenotazioneAl",""],["autocompleteOff","","type","number","matInput","",3,"placeholder","disabled","ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.rq.codicePromozione.codice=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"button",4),e.NdJ("click",function(){return t.genera()}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.codicePromozione.validoDal=a})("dateChange",function(){return t.validoDalChange()}),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"mat-datepicker-toggle",9)(15,"mat-datepicker",10,11),e.qZA()(),e.TgZ(17,"div",6)(18,"mat-form-field",7)(19,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.codicePromozione.validoAl=a})("dateChange",function(){return t.validoAlChange()}),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"mat-datepicker-toggle",9)(22,"mat-datepicker",10,12),e.qZA()(),e.TgZ(24,"div",13),e._uU(25," Indica l'intervallo di validit\xe0 del soggiorno (la data arrivo deve compresa nell'intervallo di date inserite) "),e.qZA()(),e.TgZ(26,"div",5)(27,"div",6)(28,"mat-form-field",7)(29,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.codicePromozione.prenotazioneDal=a})("dateChange",function(){return t.prenotabileDalChange()}),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"mat-datepicker-toggle",9)(32,"mat-datepicker",10,14),e.qZA()(),e.TgZ(34,"div",6)(35,"mat-form-field",7)(36,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.codicePromozione.prenotazioneAl=a})("dateChange",function(){return t.prenotabileAlChange()}),e.ALo(37,"translate"),e.qZA(),e._UZ(38,"mat-datepicker-toggle",9)(39,"mat-datepicker",10,15),e.qZA()(),e.TgZ(41,"div",13),e._uU(42," Indica l'intervallo di quando \xe8 prenotabile il codice promozionale (la data di prenotazione deve compresa nell'intervallo di date inserite) "),e.qZA()(),e.TgZ(43,"mat-form-field",7)(44,"input",16),e.NdJ("ngModelChange",function(a){return t.rq.codicePromozione.sconto=a}),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"div",17)(47,"button",18),e.NdJ("click",function(){return t.save()}),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"button",19),e.NdJ("click",function(){return t.inviaEmail()}),e._uU(51),e.ALo(52,"translate"),e.qZA()()),2&o){const n=e.MAs(16),a=e.MAs(23),l=e.MAs(33),r=e.MAs(40);e.Q6J("disableRipple",!0),e.xp6(4),e.s9C("placeholder",e.lcZ(5,37,"bo.codicePromozionale.proprieta.codice")),e.Q6J("disabled",t.saved)("ngModel",t.rq.codicePromozione.codice),e.xp6(2),e.Q6J("disabled",t.saved),e.xp6(1),e.Oqu(e.lcZ(8,39,"sbm.configurazione.codiciPromozionali.genera")),e.xp6(5),e.s9C("placeholder",e.lcZ(13,41,"bo.codicePromozionale.proprieta.validoDal")),e.Q6J("matDatepicker",n)("disabled",t.saved)("ngModel",t.rq.codicePromozione.validoDal),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.codicePromozione.validoDal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(20,43,"bo.codicePromozionale.proprieta.validoAl")),e.Q6J("matDatepicker",a)("disabled",t.saved)("ngModel",t.rq.codicePromozione.validoAl),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.codicePromozione.validoAl)?t.today:null),e.xp6(7),e.s9C("placeholder",e.lcZ(30,45,"bo.codicePromozionale.proprieta.prenotazioneDal")),e.Q6J("matDatepicker",l)("disabled",t.saved)("ngModel",t.rq.codicePromozione.prenotazioneDal),e.xp6(2),e.Q6J("for",l),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.codicePromozione.prenotazioneDal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(37,47,"bo.codicePromozionale.proprieta.prenotazioneAl")),e.Q6J("matDatepicker",r)("disabled",t.saved)("ngModel",t.rq.codicePromozione.prenotazioneAl),e.xp6(2),e.Q6J("for",r),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.codicePromozione.prenotazioneAl)?t.today:null),e.xp6(5),e.s9C("placeholder",e.lcZ(45,49,"bo.codicePromozionale.proprieta.importo")),e.Q6J("disabled",t.saved)("ngModel",t.rq.codicePromozione.sconto),e.xp6(3),e.Q6J("disabled",!t.rq.codicePromozione.codice||null==t.rq.codicePromozione.sconto||t.rq.codicePromozione.sconto<=0||t.saved),e.xp6(1),e.Oqu(e.lcZ(49,51,"globals.salva")),e.xp6(2),e.Q6J("disabled",!t.saved),e.xp6(1),e.Oqu(e.lcZ(52,53,"sbm.prenotazioni.inviaEmail"))}},dependencies:[w.X,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,F.aO,_.Fj,_.wV,_.JJ,_.Q7,_.On,z.X$],styles:[".generaButton[_ngcontent-%COMP%]{width:100px}.codiceInput[_ngcontent-%COMP%]{width:calc(100% - 100px - 1rem)}"]});var Ie=Y(36576),qe=Y(57665),Ic=Y(61736),D=Y(57796),me=Y(20636),Te=Y(46446);function vd(i,o){if(1&i&&(e.TgZ(0,"mat-card",27)(1,"mat-card-title")(2,"i",28),e._uU(3,"assignment_ind"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div")(7,"span",29),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"div")(12,"span",29),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"div")(18,"span",29),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"div")(23,"span",29),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._uU(26),e.ALo(27,"date"),e.qZA(),e.TgZ(28,"div")(29,"span",29),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._uU(32),e.ALo(33,"date"),e.qZA(),e.TgZ(34,"div")(35,"span",29),e._uU(36),e.ALo(37,"translate"),e.qZA(),e._uU(38),e.qZA(),e.TgZ(39,"div")(40,"span",29),e._uU(41),e.ALo(42,"translate"),e.qZA(),e._uU(43),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,15,"sbm.configurazione.codiciPromozionali.prenotazione")+(t.prenotazione.codicePrenotazione?t.prenotazione.codicePrenotazione:t.prenotazione.codiceOTA)," "),e.xp6(4),e.Oqu(e.lcZ(9,17,"bo.prenotazione.proprieta.portaleXAlbergo")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.portaleXAlbergo&&t.prenotazione.portaleXAlbergo.nome?t.prenotazione.portaleXAlbergo.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(14,19,"bo.prenotazione.proprieta.dataPren")+": "),e.xp6(2),e.hij(" ",t.prenotazione.dataPren?e.xi3(16,21,t.prenotazione.dataPren,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(20,24,"bo.prenotazione.proprieta.codiceOTA")+": "),e.xp6(2),e.hij(" ",t.prenotazione.codiceOTA?t.prenotazione.codiceOTA:"---",""),e.xp6(3),e.Oqu(e.lcZ(25,26,"bo.prenotazione.proprieta.arrivo")+": "),e.xp6(2),e.hij(" ",t.prenotazione.arrivo?e.xi3(27,28,t.prenotazione.arrivo,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(31,31,"bo.prenotazione.proprieta.partenza")+": "),e.xp6(2),e.hij(" ",t.prenotazione.partenza?e.xi3(33,33,t.prenotazione.partenza,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(37,36,"bo.prenotazione.proprieta.cliente")+": "),e.xp6(2),e.hij(" ",null==t.prenotazione.cliente?"---":t.prenotazione.cliente.ragioneSociale,""),e.xp6(3),e.Oqu(e.lcZ(42,38,"bo.prenotazione.proprieta.pax")+": "),e.xp6(2),e.hij(" ",t.prenotazione.pax?t.prenotazione.pax:"---","")}}function Td(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",13)(3,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isApplicaAPromozioni=a)}),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",31),e._uU(7," Applica lo sconto anche alle promozioni "),e.qZA()(),e.TgZ(8,"div",32)(9,"div",13)(10,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isVisualizzaPrezziNetti=a)}),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",31),e._uU(14," Visualizza il prezzo finale scontato senza riportare lo sconto "),e.qZA()(),e.TgZ(15,"div",32)(16,"div",13)(17,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isUsoInterno=a)}),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",31),e._uU(21," Codice promozionale ad uso interno, non applicabile su Web Booking "),e.qZA()(),e.TgZ(22,"div",33)(23,"div",13)(24,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isNascondiPromozioniSeVieneInseritoCodicePromozionale=a)}),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",31),e._uU(28," Nascondi le promozioni se viene inserito questo codice promozionale "),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.modelEdit.codicePromozione.isApplicaAPromozioni),e.xp6(1),e.hij(" ",e.lcZ(5,8,"bo.codicePromozionale.proprieta.isApplicaAPromozioni")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.codicePromozione.isVisualizzaPrezziNetti),e.xp6(1),e.hij(" ",e.lcZ(12,10,"bo.codicePromozionale.proprieta.isVisualizzaPrezziNetti")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.codicePromozione.isUsoInterno),e.xp6(1),e.hij(" ",e.lcZ(19,12,"bo.codicePromozionale.proprieta.isUsoInterno")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.codicePromozione.isNascondiPromozioniSeVieneInseritoCodicePromozionale),e.xp6(1),e.hij(" ",e.lcZ(26,14,"bo.codicePromozionale.proprieta.isNascondiPromozioniSeVieneInseritoCodicePromozionale")," ")}}function xd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"mat-form-field",10)(2,"input",35),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.quantita=a)}),e.ALo(3,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(3,2,"bo.codicePromozionale.proprieta.quantita")),e.Q6J("ngModel",t.modelEdit.codicePromozione.quantita)}}function Zd(i,o){if(1&i&&(e.TgZ(0,"mat-option",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Ad(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"mat-form-field",10)(2,"mat-select",36,37),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.MAs(3),l=e.oxw();return e.KtG(a.value==l.enumTipoValore.Euro?l.modelEdit.codicePromozione.isScontoPercentuale=!1:l.modelEdit.codicePromozione.isScontoPercentuale=!0)}),e.ALo(4,"translate"),e.YNc(5,Zd,3,4,"mat-option",38),e.ALo(6,"selectEnum"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(4,4,"bo.codicePromozionale.proprieta.tipoSconto")),e.Q6J("disabled",t.modelEdit.codicePromozione.isPerNotte)("value",t.modelEdit.codicePromozione.isScontoPercentuale?t.enumTipoValore.Percentuale:t.enumTipoValore.Euro),e.xp6(3),e.Q6J("ngForOf",e.xi3(6,6,t.enumTipoValore,"tipoValore"))}}function wd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",40)(1,"mat-checkbox",41),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isPerNotte=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.codicePromozione.isScontoPercentuale=!1)}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.modelEdit.codicePromozione.isPerNotte),e.xp6(1),e.Oqu(e.lcZ(3,2,"bo.codicePromozionale.proprieta.isPerNotte"))}}function zd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",63)(1,"mat-checkbox",64),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleRisorse():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionRisorse.hasValue()&&t.isAllSelectedRisorse())("indeterminate",t.selectionRisorse.hasValue()&&!t.isAllSelectedRisorse())}}function Md(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",65)(1,"mat-checkbox",66),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionRisorse.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionRisorse.isSelected(t.oid))}}function qd(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.codice")))}function Pd(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codice)}}function kd(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.portale")))}function Sd(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.portaleXAlbergo?t.portaleXAlbergo.nome:"")}}function yd(i,o){1&i&&e._UZ(0,"mat-header-row",67)}function Jd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",68),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function Ed(i,o){if(1&i&&(e.TgZ(0,"div",23)(1,"div",52)(2,"mat-table",53),e.ynx(3,54),e.YNc(4,zd,2,2,"mat-header-cell",55),e.YNc(5,Md,2,1,"mat-cell",56),e.BQk(),e.ynx(6,57),e.YNc(7,qd,3,3,"mat-header-cell",58),e.YNc(8,Pd,2,1,"mat-cell",59),e.BQk(),e.ynx(9,60),e.YNc(10,kd,3,3,"mat-header-cell",58),e.YNc(11,Sd,2,1,"mat-cell",59),e.BQk(),e.YNc(12,yd,1,0,"mat-header-row",61),e.YNc(13,Jd,1,1,"mat-row",62),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("dataSource",t.risorse),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumnsTariffeRisorse)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsTariffeRisorse)}}function Nd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",63)(1,"mat-checkbox",64),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleTariffe():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionTariffe.hasValue()&&t.isAllSelectedTariffe())("indeterminate",t.selectionTariffe.hasValue()&&!t.isAllSelectedTariffe())}}function Od(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",65)(1,"mat-checkbox",66),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionTariffe.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionTariffe.isSelected(t.oid))}}function Ld(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tariffaOTA.proprieta.codice")))}function Dd(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codice)}}function Id(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.portale")))}function Qd(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.portaleXAlbergo?t.portaleXAlbergo.nome:"")}}function Ud(i,o){1&i&&e._UZ(0,"mat-header-row",67)}function Yd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",68),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function Rd(i,o){if(1&i&&(e.TgZ(0,"div",23)(1,"div",52)(2,"mat-table",53),e.ynx(3,54),e.YNc(4,Nd,2,2,"mat-header-cell",55),e.YNc(5,Od,2,1,"mat-cell",56),e.BQk(),e.ynx(6,57),e.YNc(7,Ld,3,3,"mat-header-cell",58),e.YNc(8,Dd,2,1,"mat-cell",59),e.BQk(),e.ynx(9,60),e.YNc(10,Id,3,3,"mat-header-cell",58),e.YNc(11,Qd,2,1,"mat-cell",59),e.BQk(),e.YNc(12,Ud,1,0,"mat-header-row",61),e.YNc(13,Yd,1,1,"mat-row",62),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("dataSource",t.tariffe),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumnsTariffeRisorse)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsTariffeRisorse)}}function Fd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",63)(1,"mat-checkbox",64),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleArticoli():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionArticoli.hasValue()&&t.isAllSelectedArticoli())("indeterminate",t.selectionArticoli.hasValue()&&!t.isAllSelectedArticoli())}}function Hd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",65)(1,"mat-checkbox",66),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionArticoli.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionArticoli.isSelected(t.oid))}}function Kd(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.nome"),""))}function Gd(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function $d(i,o){1&i&&e._UZ(0,"mat-header-row",67)}function Bd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",68),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function Vd(i,o){if(1&i&&(e.TgZ(0,"div",23)(1,"div",52)(2,"mat-table",53),e.ynx(3,54),e.YNc(4,Fd,2,2,"mat-header-cell",55),e.YNc(5,Hd,2,1,"mat-cell",56),e.BQk(),e.ynx(6,69),e.YNc(7,Kd,3,3,"mat-header-cell",58),e.YNc(8,Gd,2,1,"mat-cell",59),e.BQk(),e.YNc(9,$d,1,0,"mat-header-row",61),e.YNc(10,Bd,1,1,"mat-row",62),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("dataSource",t.articoli),e.xp6(7),e.Q6J("matHeaderRowDef",t.displayedColumnsArticoli)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsArticoli)}}function Xd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",63)(1,"mat-checkbox",64),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleModalitaPagamento():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionModalitaPagamento.hasValue()&&t.isAllSelectedModalitaPagamento())("indeterminate",t.selectionModalitaPagamento.hasValue()&&!t.isAllSelectedModalitaPagamento())}}function jd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",65)(1,"mat-checkbox",66),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionModalitaPagamento.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionModalitaPagamento.isSelected(t.oid))}}function Wd(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.nome"),""))}function em(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function tm(i,o){1&i&&e._UZ(0,"mat-header-row",67)}function im(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",68),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function om(i,o){if(1&i&&(e.TgZ(0,"div",23)(1,"div",52)(2,"mat-table",53),e.ynx(3,54),e.YNc(4,Xd,2,2,"mat-header-cell",55),e.YNc(5,jd,2,1,"mat-cell",56),e.BQk(),e.ynx(6,69),e.YNc(7,Wd,3,3,"mat-header-cell",58),e.YNc(8,em,2,1,"mat-cell",59),e.BQk(),e.YNc(9,tm,1,0,"mat-header-row",61),e.YNc(10,im,1,1,"mat-row",62),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("dataSource",t.modalitaPagamento),e.xp6(7),e.Q6J("matHeaderRowDef",t.displayedColumnsModalitaPagamento)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsModalitaPagamento)}}function nm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",63)(1,"mat-checkbox",64),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleComponentiXVariazione():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionComponentiXVariazione.hasValue()&&t.isAllSelectedComponentiXVariazione())("indeterminate",t.selectionComponentiXVariazione.hasValue()&&!t.isAllSelectedComponentiXVariazione())}}function am(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",65)(1,"mat-checkbox",66),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionComponentiXVariazione.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionComponentiXVariazione.isSelected(t.oid))}}function lm(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.componenteXVariazione.proprieta.nome"),""))}function rm(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function cm(i,o){1&i&&e._UZ(0,"mat-header-row",67)}function sm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",68),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function pm(i,o){if(1&i&&(e.TgZ(0,"div",23)(1,"div",52)(2,"mat-table",53),e.ynx(3,54),e.YNc(4,nm,2,2,"mat-header-cell",55),e.YNc(5,am,2,1,"mat-cell",56),e.BQk(),e.ynx(6,69),e.YNc(7,lm,3,3,"mat-header-cell",58),e.YNc(8,rm,2,1,"mat-cell",59),e.BQk(),e.YNc(9,cm,1,0,"mat-header-row",61),e.YNc(10,sm,1,1,"mat-row",62),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("dataSource",t.componentiXVariazione),e.xp6(7),e.Q6J("matHeaderRowDef",t.displayedColumnsComponentiXVariazione)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsComponentiXVariazione)}}function dm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",23)(1,"app-editor",72),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw(3);return e.KtG(r.modelEdit.codiciPromozioneXLingua[l].note=a)}),e.qZA()()}if(2&i){const t=e.oxw(2).index,n=e.oxw(3);e.xp6(1),e.Q6J("id","note"+t)("text",n.modelEdit.codiciPromozioneXLingua[t].note)}}function mm(i,o){if(1&i&&(e.TgZ(0,"mat-tab",50),e.YNc(1,dm,2,2,"div",51),e.qZA()),2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw(3);e.Q6J("label",n.lingua.nome),e.xp6(1),e.Q6J("ngIf",l.selectedIndex1==a)}}function _m(i,o){if(1&i&&(e.ynx(0),e.YNc(1,mm,2,2,"mat-tab",71),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function um(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",23)(1,"mat-tab-group",49),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.selectedIndex1=a)}),e.YNc(2,_m,2,1,"ng-container",70),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex1),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.codiciPromozioneXLingua)}}function gm(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.politicaCancellazione=a)}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",2)(6,"mat-form-field",10)(7,"input",35),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.durataMinimaSoggiorno=a)}),e.ALo(8,"translate"),e.qZA()()()(),e.TgZ(9,"div",42)(10,"div",43),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",1)(14,"div",44)(15,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isLunedi=a)}),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",44)(19,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isMartedi=a)}),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",44)(23,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isMercoledi=a)}),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",44)(27,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isGiovedi=a)}),e._uU(28),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",44)(31,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isVenerdi=a)}),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",44)(35,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isSabato=a)}),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",44)(39,"mat-checkbox",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.isDomenica=a)}),e._uU(40),e.ALo(41,"translate"),e.qZA()()()(),e.TgZ(42,"mat-form-field",10)(43,"input",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.note=a)}),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",1)(46,"div",46)(47,"app-view-select",47),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.mercato=a)}),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"div",46)(50,"app-view-select",47),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.canaleVendita=a)}),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"div",46)(53,"app-view-select",47),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.segmento=a)}),e.ALo(54,"translate"),e.qZA()(),e.TgZ(55,"div",46)(56,"app-view-select",47),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.fonte=a)}),e.ALo(57,"translate"),e.qZA()()(),e.TgZ(58,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.codicePromozione.arrotondamento=a)}),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"div",48)(61,"mat-tab-group",49),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedIndex=a)}),e.TgZ(62,"mat-tab",50),e.ALo(63,"translate"),e.YNc(64,Ed,14,4,"div",51),e.qZA(),e.TgZ(65,"mat-tab",50),e.ALo(66,"translate"),e.YNc(67,Rd,14,4,"div",51),e.qZA(),e.TgZ(68,"mat-tab",50),e.ALo(69,"translate"),e.YNc(70,Vd,11,4,"div",51),e.qZA(),e.TgZ(71,"mat-tab",50),e.ALo(72,"translate"),e.YNc(73,om,11,4,"div",51),e.qZA(),e.TgZ(74,"mat-tab",50),e.ALo(75,"translate"),e.YNc(76,pm,11,4,"div",51),e.qZA(),e.TgZ(77,"mat-tab",50),e.ALo(78,"translate"),e.YNc(79,um,3,2,"div",51),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("dataLoader",t.apiService.getCancellazioniViewSelect())("value",t.modelEdit.codicePromozione.politicaCancellazione)("placeholder",e.lcZ(4,50,"bo.codicePromozionale.proprieta.politicaCancellazione")),e.xp6(4),e.s9C("placeholder",e.lcZ(8,52,"bo.codicePromozionale.proprieta.durataMinimaSoggiorno")),e.Q6J("ngModel",t.modelEdit.codicePromozione.durataMinimaSoggiorno),e.xp6(4),e.hij(" ",e.lcZ(12,54,"sbm.configurazione.codiciPromozionali.giorniArrivoValidi")," "),e.xp6(4),e.Q6J("ngModel",t.modelEdit.codicePromozione.isLunedi),e.xp6(1),e.hij(" ",e.lcZ(17,56,"bo.codicePromozionale.proprieta.isLunedi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.codicePromozione.isMartedi),e.xp6(1),e.hij(" ",e.lcZ(21,58,"bo.codicePromozionale.proprieta.isMartedi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.codicePromozione.isMercoledi),e.xp6(1),e.hij(" ",e.lcZ(25,60,"bo.codicePromozionale.proprieta.isMercoledi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.codicePromozione.isGiovedi),e.xp6(1),e.hij(" ",e.lcZ(29,62,"bo.codicePromozionale.proprieta.isGiovedi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.codicePromozione.isVenerdi),e.xp6(1),e.hij(" ",e.lcZ(33,64,"bo.codicePromozionale.proprieta.isVenerdi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.codicePromozione.isSabato),e.xp6(1),e.hij(" ",e.lcZ(37,66,"bo.codicePromozionale.proprieta.isSabato")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.codicePromozione.isDomenica),e.xp6(1),e.hij(" ",e.lcZ(41,68,"bo.codicePromozionale.proprieta.isDomenica")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(44,70,"bo.codicePromozionale.proprieta.note")),e.Q6J("ngModel",t.modelEdit.codicePromozione.note),e.xp6(4),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaMercatoRQ))("value",t.modelEdit.codicePromozione.mercato)("placeholder",e.lcZ(48,72,"bo.codicePromozionale.proprieta.mercato")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaCanaleVenditaRQ))("value",t.modelEdit.codicePromozione.canaleVendita)("placeholder",e.lcZ(51,74,"bo.codicePromozionale.proprieta.canaleVendita")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaSegmentoRQ))("value",t.modelEdit.codicePromozione.segmento)("placeholder",e.lcZ(54,76,"bo.codicePromozionale.proprieta.segmento")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaFonteRQ))("value",t.modelEdit.codicePromozione.fonte)("placeholder",e.lcZ(57,78,"bo.codicePromozionale.proprieta.fonte")),e.xp6(2),e.Q6J("dataLoader",t.apiService.getArrotondamentiViewSelect())("value",t.modelEdit.codicePromozione.arrotondamento)("placeholder",e.lcZ(59,80,"bo.codicePromozionale.proprieta.arrotondamento")),e.xp6(3),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(63,82,"sbm.configurazione.codiciPromozionali.risorseAbilitate")),e.xp6(2),e.Q6J("ngIf",0==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(66,84,"sbm.configurazione.codiciPromozionali.tariffeAbilitate")),e.xp6(2),e.Q6J("ngIf",1==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(69,86,"sbm.configurazione.codiciPromozionali.articoliAbilitati")),e.xp6(2),e.Q6J("ngIf",2==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(72,88,"sbm.configurazione.codiciPromozionali.modalitaPagamentoAbilitate")),e.xp6(2),e.Q6J("ngIf",3==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(75,90,"sbm.configurazione.codiciPromozionali.combinazioniRiduzioni")),e.xp6(2),e.Q6J("ngIf",4==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(78,92,"sbm.configurazione.codiciPromozionali.noteTariffa")),e.xp6(2),e.Q6J("ngIf",5==t.selectedIndex)}}function hm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}const fm=function(i,o){return{"col-2":i,"col-6":o}};class ji extends f.H{set codicePromozionale(o){if(null!=o){if(this.selectedIndex=0,this.selectedIndex1=0,this.selectionTariffe=new me.Ov(!0,[]),this.selectionRisorse=new me.Ov(!0,[]),this.selectionArticoli=new me.Ov(!0,[]),this.selectionModalitaPagamento=new me.Ov(!0,[]),this.selectionComponentiXVariazione=new me.Ov(!0,[]),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},200),this.modelEdit=new d.BLq,this.modelEdit.codicePromozione=o,this.modelEdit.codicePromozione.validoDal=this.getDate(this.modelEdit.codicePromozione.validoDal),this.modelEdit.codicePromozione.validoAl=this.getDate(this.modelEdit.codicePromozione.validoAl),this.modelEdit.codicePromozione.prenotazioneDal=this.getDate(this.modelEdit.codicePromozione.prenotazioneDal),this.modelEdit.codicePromozione.prenotazioneAl=this.getDate(this.modelEdit.codicePromozione.prenotazioneAl),this.isVoucher=this.modelEdit.codicePromozione.tipoCodicePromozione==c.Gv.Voucher,this.isVoucherUtilizzato=this.isVoucher&&null!=this.modelEdit.codicePromozione.oidPrenotazione,null!=this.modelEdit.codicePromozione){if(this.modelEdit.codicePromozione.oidRisorseAbilitate){let t=this.modelEdit.codicePromozione.oidRisorseAbilitate.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.risorse.findIndex(a=>a.oid==+n)&&this.selectionRisorse.toggle(+n)}if(this.modelEdit.codicePromozione.oidTariffeAbilitate){let t=this.modelEdit.codicePromozione.oidTariffeAbilitate.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.tariffe.findIndex(a=>a.oid==+n)&&this.selectionTariffe.toggle(+n)}if(this.modelEdit.codicePromozione.oidArticoliAbilitati){let t=this.modelEdit.codicePromozione.oidArticoliAbilitati.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.articoli.findIndex(a=>a.oid==+n)&&this.selectionArticoli.toggle(+n)}if(this.modelEdit.codicePromozione.oidModalitaPagamentoAbilitate){let t=this.modelEdit.codicePromozione.oidModalitaPagamentoAbilitate.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.modalitaPagamento.findIndex(a=>a.oid==+n)&&this.selectionModalitaPagamento.toggle(+n)}if(this.modelEdit.codicePromozione.oidComponentiXVariazione){let t=this.modelEdit.codicePromozione.oidComponentiXVariazione.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.componentiXVariazione.findIndex(a=>a.oid==+n)&&this.selectionComponentiXVariazione.toggle(+n)}}this.prenotazione=null,null!=o.oid&&-1!=o.oid?(this.setIsLoading(!0),this.editing=!0,this.apiService.getCodicePromozioneDetails(this.modelEdit.codicePromozione.oid).subscribe(t=>{this.prenotazione=t.data.prenotazione;for(let n of this.lingue){let a=new v.yK;a.lingua=n,this.modelEdit.codiciPromozioneXLingua.push(a)}this.apiService.getCodiciPromozioneXLingua(o.oid).subscribe(n=>{if(null!=n.data&&n.data.length>0)for(let a of n.data)if(null!=a.lingua){let l=this.modelEdit.codiciPromozioneXLingua.findIndex(r=>r.lingua.oid==a.lingua.oid);l>=0&&(this.modelEdit.codiciPromozioneXLingua[l].codicePromozione=a.codicePromozione,this.modelEdit.codiciPromozioneXLingua[l].note=a.note)}this.setIsLoading(!1)})})):(this.editing=!1,this.modelEdit.codicePromozione.codice=this.utility.generateRandomString())}}constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.modelEdit=new d.BLq,this.editing=!1,this.selectedIndex=0,this.selectedIndex1=0,this.enumTipoValore=c.jy,this.enumTipoCodicePromozione=c.Gv,this.displayedColumnsTariffeRisorse=["codice","portaleXAlbergo","select"],this.displayedColumnsArticoli=["nome","select"],this.displayedColumnsModalitaPagamento=["nome","select"],this.displayedColumnsComponentiXVariazione=["nome","select"],this.selectionTariffe=new me.Ov(!0,[]),this.selectionRisorse=new me.Ov(!0,[]),this.selectionArticoli=new me.Ov(!0,[]),this.selectionModalitaPagamento=new me.Ov(!0,[]),this.selectionComponentiXVariazione=new me.Ov(!0,[]),this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaSegmentoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Segmento.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaFonteRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Fonte.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.backEvent=new e.vpe}save(){if(null!=this.modelEdit.codicePromozione.codice&&""!=this.modelEdit.codicePromozione.codice){this.modelEdit.codicePromozione.validoDal=this.getDate(this.modelEdit.codicePromozione.validoDal),this.modelEdit.codicePromozione.validoAl=this.getDate(this.modelEdit.codicePromozione.validoAl),this.modelEdit.codicePromozione.prenotazioneDal=this.getDate(this.modelEdit.codicePromozione.prenotazioneDal),this.modelEdit.codicePromozione.prenotazioneAl=this.getDate(this.modelEdit.codicePromozione.prenotazioneAl),this.modelEdit.codicePromozione.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.codicePromozione.oidRisorseAbilitate=this.selectionRisorse.selected.toString().replace(/,/g,";"),this.modelEdit.codicePromozione.oidTariffeAbilitate=this.selectionTariffe.selected.toString().replace(/,/g,";"),this.modelEdit.codicePromozione.oidArticoliAbilitati=this.selectionArticoli.selected.toString().replace(/,/g,";"),this.modelEdit.codicePromozione.oidModalitaPagamentoAbilitate=this.selectionModalitaPagamento.selected.toString().replace(/,/g,";"),this.modelEdit.codicePromozione.oidComponentiXVariazione=this.selectionComponentiXVariazione.selected.toString().replace(/,/g,";");for(let o of this.modelEdit.codiciPromozioneXLingua)o.codicePromozione=this.modelEdit.codicePromozione;this.setIsLoading(!0),this.apiService.setCodicePromozione(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.codiciPromozionali.codicePromozionaleSalvato").then(()=>{this.backEvent.emit()})})}else this.showError("globals.messages.inserireDati")}delete(o){null==this.modelEdit.codicePromozione.oidPrenotazione?this.showDialogConfirm("sbm.configurazione.codiciPromozionali.eliminareCodicePromozionale").then(t=>{null!=o&&(this.modelEdit.codicePromozione=o),this.modelEdit.codicePromozione.isDeleted=!0,this.setIsLoading(!0),this.apiService.setCodicePromozione(this.modelEdit).subscribe(n=>{this.backEvent.emit()})},t=>{}):this.showError("sbm.configurazione.codiciPromozionali.impossibileCancellareVoucher")}isAllSelectedTariffe(){return this.selectionTariffe.selected.length==this.tariffe.length}masterToggleTariffe(){this.isAllSelectedTariffe()?this.selectionTariffe.clear():this.tariffe.forEach(o=>this.selectionTariffe.select(o.oid))}isAllSelectedRisorse(){return this.selectionRisorse.selected.length==this.risorse.length}masterToggleRisorse(){this.isAllSelectedRisorse()?this.selectionRisorse.clear():this.risorse.forEach(o=>this.selectionRisorse.select(o.oid))}isAllSelectedArticoli(){return this.selectionArticoli.selected.length==this.articoli.length}masterToggleArticoli(){this.isAllSelectedArticoli()?this.selectionArticoli.clear():this.articoli.forEach(o=>this.selectionArticoli.select(o.oid))}isAllSelectedModalitaPagamento(){return this.selectionModalitaPagamento.selected.length==this.modalitaPagamento.length}masterToggleModalitaPagamento(){this.isAllSelectedModalitaPagamento()?this.selectionModalitaPagamento.clear():this.modalitaPagamento.forEach(o=>this.selectionModalitaPagamento.select(o.oid))}masterToggleComponentiXVariazione(){this.isAllSelectedComponentiXVariazione()?this.selectionComponentiXVariazione.clear():this.componentiXVariazione.forEach(o=>this.selectionComponentiXVariazione.select(o.oid))}isAllSelectedComponentiXVariazione(){return this.selectionComponentiXVariazione.selected.length==this.componentiXVariazione.length}validoDalChange(){(!this.modelEdit.codicePromozione.validoAl||u(this.modelEdit.codicePromozione.validoDal)>u(this.modelEdit.codicePromozione.validoAl))&&(this.modelEdit.codicePromozione.validoAl=this.modelEdit.codicePromozione.validoDal)}validoAlChange(){(!this.modelEdit.codicePromozione.validoDal||u(this.modelEdit.codicePromozione.validoAl)<u(this.modelEdit.codicePromozione.validoDal))&&(this.modelEdit.codicePromozione.validoDal=this.modelEdit.codicePromozione.validoAl)}prenotabileDalChange(){(!this.modelEdit.codicePromozione.prenotazioneAl||u(this.modelEdit.codicePromozione.prenotazioneDal)>u(this.modelEdit.codicePromozione.prenotazioneAl))&&(this.modelEdit.codicePromozione.prenotazioneAl=this.modelEdit.codicePromozione.prenotazioneDal)}prenotabileAlChange(){(!this.modelEdit.codicePromozione.prenotazioneDal||u(this.modelEdit.codicePromozione.prenotazioneAl)<u(this.modelEdit.codicePromozione.prenotazioneDal))&&(this.modelEdit.codicePromozione.prenotazioneDal=this.modelEdit.codicePromozione.prenotazioneAl)}}function Cm(i,o){if(1&i&&(e.TgZ(0,"mat-option",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function bm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",34)(2,"div",35)(3,"mat-form-field",36)(4,"input",37,38),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(5),l=e.oxw();return e.KtG(l.onSearch(0,a.value,!1))}),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",35)(8,"mat-form-field",36)(9,"mat-select",39,40),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.MAs(10),l=e.oxw();return e.KtG(l.onSearch(1,a.value))}),e.ALo(11,"translate"),e._UZ(12,"mat-option",41),e.YNc(13,Cm,3,4,"mat-option",42),e.ALo(14,"selectEnum"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(6,5,"bo.codicePromozionale.proprieta.codice")),e.Q6J("value",t.filters[0].value),e.xp6(5),e.s9C("placeholder",e.lcZ(11,7,"bo.codicePromozionale.proprieta.tipoCodicePromozione")),e.Q6J("value",t.filters[1].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(14,9,t.enumTipoCodicePromozione,"tipoCodicePromozione"))}}function vm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.add())}),e.TgZ(1,"i",28),e._uU(2,"add"),e.qZA()()}}function Tm(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,vm,3,0,"button",4),e.TgZ(2,"div",44)(3,"h4"),e._uU(4),e.ALo(5,"translate"),e.qZA()()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(3),e.Oqu(e.lcZ(5,2,"sbm.configurazione.codiciPromozionali.nessunCodicePromozionale"))}}function xm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(1,"i",28),e._uU(2,"add"),e.qZA()()}}function Zm(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Am(i,o){1&i&&(e.TgZ(0,"button",48)(1,"i",49),e._uU(2,"edit"),e.qZA()())}function wm(i,o){if(1&i&&(e.TgZ(0,"mat-cell",46),e.YNc(1,Am,3,0,"button",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function zm(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.codicePromozionale.proprieta.codice"),""))}function Mm(i,o){if(1&i&&(e.TgZ(0,"button",54)(1,"span",55),e._uU(2," info "),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("matTooltip",t.note)}}function qm(i,o){1&i&&(e.TgZ(0,"div",56),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.codiciPromozionali.utilizzato")))}function Pm(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50)(2,"div")(3,"span",51),e._uU(4),e.qZA(),e.YNc(5,Mm,3,1,"button",52),e.qZA(),e.YNc(6,qm,3,3,"div",53),e.qZA()()),2&i){const t=o.$implicit;e.xp6(4),e.Oqu(t.codice),e.xp6(1),e.Q6J("ngIf",!!t.note),e.xp6(1),e.Q6J("ngIf",null!=t.oidPrenotazione)}}function km(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.codicePromozionale.proprieta.tipoCodicePromozione"),""))}function Sm(i,o){if(1&i&&(e.TgZ(0,"div",56),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.cliente.ragioneSociale," ")}}function ym(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Sm,2,1,"div",53),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,n.getEnumKeyTranslation(n.enumTipoCodicePromozione,t.tipoCodicePromozione,"tipoCodicePromozione"))),e.xp6(2),e.Q6J("ngIf",null!=t.cliente)}}function Jm(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.codicePromozionale.proprieta.quantita"),""))}function Em(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.quantita)}}function Nm(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.codicePromozionale.proprieta.quantitaUtilizzata"),""))}function Om(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.quantitaUtilizzata)}}function Lm(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.codicePromozionale.proprieta.sconto"),""))}function Dm(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.sconto+" "+(t.isScontoPercentuale?"%":"\u20ac"))}}function Im(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.codicePromozionale.proprieta.validoDal"),""))}function Qm(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.validoDal,"dd/MM/yyyy"))}}function Um(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.codicePromozionale.proprieta.validoAl"),""))}function Ym(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.validoAl,"dd/MM/yyyy"))}}function Rm(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.codicePromozionale.proprieta.ubicazioneIstat"),""))}function Fm(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.ubicazioneIstat?t.ubicazioneIstat.nome:"")}}function Hm(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.codicePromozionale.proprieta.isAttivo"),""))}function Km(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)("disabled",!0)}}function Gm(i,o){1&i&&e._UZ(0,"mat-header-cell")}function $m(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.duplica(l.oid))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.duplica")))}function Bm(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,$m,3,3,"button",58),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function Vm(i,o){1&i&&e._UZ(0,"mat-header-cell",60)}function Xm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit;e.oxw();const r=e.MAs(52);return a.stopPropagation(),e.KtG(r.delete(l))}),e.TgZ(1,"i",64),e._uU(2,"delete"),e.qZA()()}}function jm(i,o){if(1&i&&(e.TgZ(0,"mat-cell",61),e.YNc(1,Xm,3,0,"button",62),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function Wm(i,o){1&i&&e._UZ(0,"mat-header-row",65)}function e_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",66),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(!p.dataReceived&&p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}ji.\u0275fac=function(o){return new(o||ji)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},ji.\u0275cmp=e.Xpm({type:ji,selectors:[["app-codici-promozionali-edit"]],inputs:{risorse:"risorse",tariffe:"tariffe",articoli:"articoli",modalitaPagamento:"modalitaPagamento",componentiXVariazione:"componentiXVariazione",codicePromozionale:"codicePromozionale"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:67,vars:74,consts:[["class","p-3 mb-3 border rounded mat-elevation-z0",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"codiceInput","mr-3"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","readonly","ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"generaButton",3,"disabled","click"],["color","primary",1,"d-inline-block","mt-4",3,"disabled","ngModel","ngModelChange"],[4,"ngIf"],["class","col-2",4,"ngIf"],[3,"ngClass"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","readonly","ngModel","ngModelChange"],["class","col-6 pt-3",4,"ngIf"],[1,"col-4"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for","disabled"],[3,"startAt"],["validoDal",""],["validoAl",""],[1,"col-4","div-help"],["prenotazioneDal",""],["prenotazioneAl",""],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"p-3","mb-3","border","rounded","mat-elevation-z0"],[1,"material-icons","icon-big"],[1,"font-weight-bold"],["color","primary",3,"ngModel","ngModelChange"],[1,"col-8","div-help"],[1,"row","mt-2"],[1,"row","mt-2","mb-3"],[1,"col-2"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"placeholder","disabled","value","selectionChange"],["tipoScontoSelect",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-6","pt-3"],["color","primary",3,"ngModel","ngModelChange","change"],[1,"mb-2"],[1,"font-weight-bold","mb-2"],[1,"col-2","col-md-1"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-3"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],[1,"tab-group-container"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],["class","mt-3",4,"ngIf"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","codice"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","portaleXAlbergo"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["matColumnDef","nome"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.YNc(0,vd,44,40,"mat-card",0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",4),e.NdJ("ngModelChange",function(a){return t.modelEdit.codicePromozione.codice=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"button",5),e.NdJ("click",function(){return t.modelEdit.codicePromozione.codice=t.utility.generateRandomString()}),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",2)(10,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.codicePromozione.isAttivo=a}),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.YNc(13,Td,29,16,"ng-container",7),e.TgZ(14,"div",1),e.YNc(15,xd,4,4,"div",8),e.TgZ(16,"div",9)(17,"mat-form-field",10)(18,"input",11),e.NdJ("ngModelChange",function(a){return t.modelEdit.codicePromozione.sconto=a}),e.ALo(19,"translate"),e.qZA()()(),e.YNc(20,Ad,7,9,"div",8),e.YNc(21,wd,4,4,"div",12),e.qZA(),e.TgZ(22,"div",1)(23,"div",13)(24,"mat-form-field",10)(25,"input",14),e.NdJ("ngModelChange",function(a){return t.modelEdit.codicePromozione.validoDal=a})("dateChange",function(){return t.validoDalChange()}),e.ALo(26,"translate"),e.qZA(),e._UZ(27,"mat-datepicker-toggle",15)(28,"mat-datepicker",16,17),e.qZA()(),e.TgZ(30,"div",13)(31,"mat-form-field",10)(32,"input",14),e.NdJ("ngModelChange",function(a){return t.modelEdit.codicePromozione.validoAl=a})("dateChange",function(){return t.validoAlChange()}),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"mat-datepicker-toggle",15)(35,"mat-datepicker",16,18),e.qZA()(),e.TgZ(37,"div",19),e._uU(38," Indica l'intervallo di validit\xe0 del soggiorno (la data arrivo deve compresa nell'intervallo di date inserite) "),e.qZA()(),e.TgZ(39,"div",1)(40,"div",13)(41,"mat-form-field",10)(42,"input",14),e.NdJ("ngModelChange",function(a){return t.modelEdit.codicePromozione.prenotazioneDal=a})("dateChange",function(){return t.prenotabileDalChange()}),e.ALo(43,"translate"),e.qZA(),e._UZ(44,"mat-datepicker-toggle",15)(45,"mat-datepicker",16,20),e.qZA()(),e.TgZ(47,"div",13)(48,"mat-form-field",10)(49,"input",14),e.NdJ("ngModelChange",function(a){return t.modelEdit.codicePromozione.prenotazioneAl=a})("dateChange",function(){return t.prenotabileAlChange()}),e.ALo(50,"translate"),e.qZA(),e._UZ(51,"mat-datepicker-toggle",15)(52,"mat-datepicker",16,21),e.qZA()(),e.TgZ(54,"div",19),e._uU(55," Indica l'intervallo di quando \xe8 prenotabile il codice promozionale (la data di prenotazione deve compresa nell'intervallo di date inserite) "),e.qZA()(),e.TgZ(56,"app-view-select",22),e.NdJ("valueChange",function(a){return t.modelEdit.codicePromozione.ubicazioneIstat=a}),e.ALo(57,"translate"),e.qZA(),e.YNc(58,gm,80,94,"ng-container",7),e.TgZ(59,"div",23)(60,"button",24),e.NdJ("click",function(){return t.save()}),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.YNc(63,hm,3,3,"button",25),e.TgZ(64,"button",26),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(65),e.ALo(66,"translate"),e.qZA()()),2&o){const n=e.MAs(29),a=e.MAs(36),l=e.MAs(46),r=e.MAs(53);e.Q6J("ngIf",null!=t.prenotazione),e.xp6(4),e.s9C("placeholder",e.lcZ(5,49,"bo.codicePromozionale.proprieta.codice")),e.Q6J("readonly",t.isVoucherUtilizzato)("ngModel",t.modelEdit.codicePromozione.codice),e.xp6(2),e.Q6J("disabled",t.isVoucherUtilizzato),e.xp6(1),e.Oqu(e.lcZ(8,51,"sbm.configurazione.codiciPromozionali.genera")),e.xp6(3),e.Q6J("disabled",t.isVoucherUtilizzato)("ngModel",t.modelEdit.codicePromozione.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(12,53,"bo.codicePromozionale.proprieta.isAttivo")," "),e.xp6(2),e.Q6J("ngIf",!t.isVoucher),e.xp6(2),e.Q6J("ngIf",!t.isVoucher),e.xp6(1),e.Q6J("ngClass",e.WLB(71,fm,!t.isVoucher,t.isVoucher)),e.xp6(2),e.Q6J("placeholder",e.lcZ(19,55,"bo.codicePromozionale.proprieta."+(t.isVoucher?"importo":"sconto")))("readonly",t.isVoucherUtilizzato)("ngModel",t.modelEdit.codicePromozione.sconto),e.xp6(2),e.Q6J("ngIf",!t.isVoucher),e.xp6(1),e.Q6J("ngIf",!t.isVoucher),e.xp6(4),e.s9C("placeholder",e.lcZ(26,57,"bo.codicePromozionale.proprieta.validoDal")),e.Q6J("matDatepicker",n)("ngModel",t.modelEdit.codicePromozione.validoDal),e.xp6(2),e.Q6J("for",n)("disabled",t.isVoucherUtilizzato),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.codicePromozione.validoDal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(33,59,"bo.codicePromozionale.proprieta.validoAl")),e.Q6J("matDatepicker",a)("ngModel",t.modelEdit.codicePromozione.validoAl),e.xp6(2),e.Q6J("for",a)("disabled",t.isVoucherUtilizzato),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.codicePromozione.validoAl)?t.today:null),e.xp6(7),e.s9C("placeholder",e.lcZ(43,61,"bo.codicePromozionale.proprieta.prenotazioneDal")),e.Q6J("matDatepicker",l)("ngModel",t.modelEdit.codicePromozione.prenotazioneDal),e.xp6(2),e.Q6J("for",l)("disabled",t.isVoucherUtilizzato),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.codicePromozione.prenotazioneDal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(50,63,"bo.codicePromozionale.proprieta.prenotazioneAl")),e.Q6J("matDatepicker",r)("ngModel",t.modelEdit.codicePromozione.prenotazioneAl),e.xp6(2),e.Q6J("for",r)("disabled",t.isVoucherUtilizzato),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.codicePromozione.prenotazioneAl)?t.today:null),e.xp6(4),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.modelEdit.codicePromozione.ubicazioneIstat)("placeholder",e.lcZ(57,65,"bo.codicePromozionale.proprieta.ubicazioneIstat")),e.xp6(2),e.Q6J("ngIf",!t.isVoucher),e.xp6(2),e.Q6J("disabled",t.isVoucherUtilizzato),e.xp6(1),e.Oqu(e.lcZ(62,67,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(66,69,"globals.annulla"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,qe.S$,qe.mi,ee.SK,ee.R7,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.Q7,_.On,Me.P,ne.d,m.uU,Te.A,z.X$],styles:[".tab-group-container[_ngcontent-%COMP%]{min-height:450px}.mat-table[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-top:10px}.generaButton[_ngcontent-%COMP%]{width:100px}.codiceInput[_ngcontent-%COMP%]{width:calc(100% - 100px - 1rem)}.icon-big[_ngcontent-%COMP%]{font-size:36px!important;vertical-align:bottom!important;margin-right:5px!important}"]});const t_=function(i){return{"p-3":i}};class Nt extends f.H{set data(o){null!=o&&(this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.dataReceived=!0)}constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","codice","tipoCodicePromozione","quantita","quantitaUtilizzata","sconto","validoDal","validoAl","ubicazioneIstat.nome","isAttivo","duplica","delete"],this.enumTipoCodicePromozione=c.Gv,this.dataReceived=!1}ngOnInit(){this.rq=new d.k$g,this.dataReceived||(this.headerService.setTitle("sbm.configurazione.codiciPromozionali.title"),this.filters=[],this.filters.push(new d.wn$("codice",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("tipoCodicePromozione",c.Hp.Equal,"",c.NM.Number)),this.setIsLoading(!0)),this.apiService.getCodiciPromozioneView().subscribe(o=>{this.risorse=o.data.tipiCameraOTA,this.tariffe=o.data.tariffeOTA,this.articoli=o.data.articoli,this.modalitaPagamento=o.data.modalitaPagamento,this.componentiXVariazione=o.data.componentiXVariazione,this.dataReceived||this.download()})}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getCodiciPromozioneFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}add(){this.edit(new v.z_T(-1))}edit(o){this.codicePromozionale=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}duplica(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0),this.apiService.duplicaCodicePromozione(o).subscribe(n=>{this.edit(n.data)})},t=>{})}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(!n),this.paginator.firstPage()}onPageChange(){this.containerService.scrollToTop()}onBack(){this.showTable=!0,this.containerService.scrollToTop(),this.dataReceived||(this.headerService.hideElenco(),this.download())}ngOnDestroy(){this.dataReceived||(this.headerService.clearTitle(),this.headerService.hideElenco())}}Nt.\u0275fac=function(o){return new(o||Nt)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Nt.\u0275cmp=e.Xpm({type:Nt,selectors:[["app-codici-promozionali"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{data:"data"},features:[e.qOj],decls:53,vars:20,consts:[[3,"ngClass"],["class","filter",4,"ngIf"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary","class","mat-table-add",3,"click",4,"ngIf"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","codice"],[4,"matCellDef"],["matColumnDef","tipoCodicePromozione"],["matColumnDef","quantita"],["matColumnDef","quantitaUtilizzata"],["matColumnDef","sconto"],["matColumnDef","validoDal"],["matColumnDef","validoAl"],["matColumnDef","ubicazioneIstat.nome"],["matColumnDef","isAttivo"],["matColumnDef","duplica"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"codicePromozionale","risorse","tariffe","articoli","modalitaPagamento","componentiXVariazione","backEvent"],["editComponent",""],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["codiceSearch",""],[3,"placeholder","value","selectionChange"],["tipoCodicePromozioneSelect",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"mat-td-edit"],["mat-icon-button","","color","primary",4,"ngIf"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"d-flex","flex-column"],[1,"d-inline-block","align-middle"],["mat-icon-button","","class","align-middle ml-1 info-button","matTooltipPosition","below","matTooltipClass","codici-promozionali-note-tooltip",3,"matTooltip",4,"ngIf"],["class","font-italic text-small",4,"ngIf"],["mat-icon-button","","matTooltipPosition","below","matTooltipClass","codici-promozionali-note-tooltip",1,"align-middle","ml-1","info-button",3,"matTooltip"],[1,"material-icons-round","info-icon"],[1,"font-italic","text-small"],["color","primary",3,"checked","disabled"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,bm,15,12,"div",1),e.YNc(2,Tm,6,4,"div",2),e.TgZ(3,"div",3),e.YNc(4,xm,3,0,"button",4),e.TgZ(5,"div",5)(6,"mat-table",6),e.ynx(7,7),e.YNc(8,Zm,1,0,"mat-header-cell",8),e.YNc(9,wm,2,1,"mat-cell",9),e.BQk(),e.ynx(10,10),e.YNc(11,zm,3,3,"mat-header-cell",8),e.YNc(12,Pm,7,3,"mat-cell",11),e.BQk(),e.ynx(13,12),e.YNc(14,km,3,3,"mat-header-cell",8),e.YNc(15,ym,6,4,"mat-cell",11),e.BQk(),e.ynx(16,13),e.YNc(17,Jm,3,3,"mat-header-cell",8),e.YNc(18,Em,2,1,"mat-cell",11),e.BQk(),e.ynx(19,14),e.YNc(20,Nm,3,3,"mat-header-cell",8),e.YNc(21,Om,2,1,"mat-cell",11),e.BQk(),e.ynx(22,15),e.YNc(23,Lm,3,3,"mat-header-cell",8),e.YNc(24,Dm,2,1,"mat-cell",11),e.BQk(),e.ynx(25,16),e.YNc(26,Im,3,3,"mat-header-cell",8),e.YNc(27,Qm,3,4,"mat-cell",11),e.BQk(),e.ynx(28,17),e.YNc(29,Um,3,3,"mat-header-cell",8),e.YNc(30,Ym,3,4,"mat-cell",11),e.BQk(),e.ynx(31,18),e.YNc(32,Rm,3,3,"mat-header-cell",8),e.YNc(33,Fm,2,1,"mat-cell",11),e.BQk(),e.ynx(34,19),e.YNc(35,Hm,3,3,"mat-header-cell",8),e.YNc(36,Km,2,2,"mat-cell",11),e.BQk(),e.ynx(37,20),e.YNc(38,Gm,1,0,"mat-header-cell",8),e.YNc(39,Bm,2,1,"mat-cell",11),e.BQk(),e.ynx(40,21),e.YNc(41,Vm,1,0,"mat-header-cell",22),e.YNc(42,jm,2,1,"mat-cell",23),e.BQk(),e.YNc(43,Wm,1,0,"mat-header-row",24),e.YNc(44,e_,1,1,"mat-row",25),e.qZA()(),e.TgZ(45,"div",26)(46,"button",27),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"Codici promozionali",t.displayedColumns.slice(1,t.displayedColumns.length-2))}),e.TgZ(47,"i",28),e._uU(48,"get_app"),e.qZA()(),e.TgZ(49,"mat-paginator",29),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()(),e.TgZ(50,"div",30)(51,"app-codici-promozionali-edit",31,32),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.Q6J("ngClass",e.VKq(18,t_,!t.dataReceived)),e.xp6(1),e.Q6J("ngIf",t.showTable&&!t.dataReceived),e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(37),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("codicePromozionale",t.codicePromozionale)("risorse",t.risorse)("tariffe",t.tariffe)("articoli",t.articoli)("modalitaPagamento",t.modalitaPagamento)("componentiXVariazione",t.componentiXVariazione))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,ji,m.uU,Te.A,z.X$],styles:[".text-small[_ngcontent-%COMP%]{font-size:12px}.info-button[_ngcontent-%COMP%]{width:16px;height:16px;line-height:16px}.info-icon[_ngcontent-%COMP%]{font-size:16px;line-height:16px}  .codici-promozionali-note-tooltip{font-size:12px!important}"]});var _e=Y(87963);function i_(i,o){if(1&i&&(e.TgZ(0,"mat-option",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function o_(i,o){if(1&i&&(e.TgZ(0,"mat-option",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function n_(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",35)(2,"div",36)(3,"div",37)(4,"mat-form-field",38)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",39),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(15);return e.KtG(a.open())}),e.TgZ(9,"input",40),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.filters[0].value=l.getDate(a.value):null)}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",41),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.onSearch(1,l.getDate(a.value)):null)}),e.ALo(12,"translate"),e.qZA()(),e._UZ(13,"mat-datepicker-toggle",42)(14,"mat-date-range-picker",null,43),e.qZA()(),e.TgZ(16,"div",37)(17,"mat-form-field",38)(18,"input",44,45),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(19),l=e.oxw();return e.KtG(l.onSearch(2,a.value,null,!1))}),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"div",37)(22,"mat-form-field",38)(23,"input",44,46),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(24),l=e.oxw();return e.KtG(l.onSearch(3,a.value,null,!1))}),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"div",37)(27,"mat-form-field",38)(28,"input",44,47),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(29),l=e.oxw();return e.KtG(l.onSearch(4,a.value,null,!1))}),e.ALo(30,"translate"),e.qZA()()()(),e.TgZ(31,"div",36)(32,"div",37)(33,"mat-form-field",38)(34,"mat-select",48,49),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.MAs(35),l=e.oxw();return e.KtG(l.onSearch(5,a.value))}),e.ALo(36,"translate"),e._UZ(37,"mat-option",50),e.YNc(38,i_,3,4,"mat-option",51),e.ALo(39,"selectEnum"),e.qZA()()(),e.TgZ(40,"div",37)(41,"mat-form-field",38)(42,"mat-select",48,52),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.MAs(43),l=e.oxw();return e.KtG(l.onSearch(6,a.value))}),e.ALo(44,"translate"),e._UZ(45,"mat-option",50),e.YNc(46,o_,3,4,"mat-option",51),e.ALo(47,"selectEnum"),e.qZA()()(),e.TgZ(48,"div",37)(49,"app-view-select",53),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(7,-1==a.oid?"":a.oid.toString()))}),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"div",37)(52,"mat-form-field",38)(53,"input",44,54),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(54),l=e.oxw();return e.KtG(l.onSearch(8,a.value,null,!1))}),e.ALo(55,"translate"),e.qZA()()()(),e.TgZ(56,"mat-checkbox",55),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.isPagamentiSenzaPrenotazione=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.search())}),e._uU(57),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"button",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.creaPaymail())}),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.MAs(15),n=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,28,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",t),e.xp6(1),e.s9C("placeholder",e.lcZ(10,30,"globals.dal")),e.Q6J("value",n.filters[0].value),e.xp6(2),e.s9C("placeholder",e.lcZ(12,32,"globals.al")),e.Q6J("value",n.filters[1].value),e.xp6(2),e.Q6J("for",t),e.xp6(5),e.s9C("placeholder",e.lcZ(20,34,"bo.prenotazione.proprieta.codicePrenotazione")),e.Q6J("value",n.filters[2].value),e.xp6(5),e.s9C("placeholder",e.lcZ(25,36,"bo.cliente.proprieta.cognome")),e.Q6J("value",n.filters[3].value),e.xp6(5),e.s9C("placeholder",e.lcZ(30,38,"bo.cliente.proprieta.email")),e.Q6J("value",n.filters[4].value),e.xp6(6),e.s9C("placeholder",e.lcZ(36,40,"bo.transazione.proprieta.statoContabilizzazione")),e.Q6J("value",n.filters[5].value),e.xp6(3),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(39,42,n.enumStatoContabilizzazione,"statoContabilizzazione")),e.xp6(4),e.s9C("placeholder",e.lcZ(44,45,"bo.transazione.proprieta.tipoContabilizzazione")),e.Q6J("value",n.filters[6].value),e.xp6(3),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(47,47,n.enumTipoContabilizzazione,"tipoContabilizzazione")),e.xp6(3),e.Q6J("dataLoader",n.apiService.getModalitaPagamentoViewSelect(n.modalitaPagamentoRQ))("placeholder",e.lcZ(50,50,"bo.transazione.proprieta.modalitaPagamento")),e.xp6(4),e.s9C("placeholder",e.lcZ(55,52,"bo.transazione.proprieta.codTrans")),e.Q6J("value",n.filters[8].value),e.xp6(3),e.Q6J("ngModel",n.rq.isPagamentiSenzaPrenotazione),e.xp6(1),e.hij(" ",e.lcZ(58,54,"sbm.transazioni.pagamentiSenzaPrenotazione")," "),e.xp6(3),e.Oqu(e.lcZ(61,56,"sbm.transazioni.creaPaymail"))}}function a_(i,o){1&i&&(e.TgZ(0,"div",57)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.transazioni.nessunaTransazione")))}function l_(i,o){1&i&&e._UZ(0,"mat-header-cell")}function r_(i,o){1&i&&(e.TgZ(0,"mat-cell",58)(1,"button",59)(2,"i",60),e._uU(3,"remove_red_eye"),e.qZA()()())}function c_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.transazione.proprieta.data"),""))}function s_(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function p_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.transazione.proprieta.dataEsecuzione"),""))}function d_(i,o){if(1&i&&(e.TgZ(0,"mat-cell",62)(1,"div",38),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"div",38),e._uU(5),e.ALo(6,"date"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(e.xi3(3,2,t.dataEsecuzione,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.xi3(6,5,t.dataEsecuzione,"HH:mm:ss"))}}function m_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.transazione.proprieta.modalitaPagamento"),""))}function __(i,o){1&i&&(e.TgZ(0,"div",66)(1,"i",67),e._uU(2,"warning"),e.qZA()())}function u_(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",63)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",64),e._uU(5),e.qZA(),e.YNc(6,__,3,0,"div",65),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(3),e.Oqu(null!=t.modalitaPagamento?t.modalitaPagamento.nome:""),e.xp6(2),e.Oqu(t.codTrans),e.xp6(1),e.Q6J("ngIf",!!t.codTrans&&null==t.cliente&&t.statoEsecuzione==n.enumStatoEsecuzioneTransazione.Eseguito&&!!t.reservation)}}function g_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.transazione.proprieta.tipoContabilizzazione"),""))}function h_(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoContabilizzazione,t.tipoContabilizzazione,"tipoContabilizzazione"))," ")}}function f_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.transazione.proprieta.statoContabilizzazione"),""))}function C_(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumStatoEsecuzioneTransazione,t.statoEsecuzione,"statoEsecuzioneTransazione"))," / ",e.lcZ(3,4,n.getEnumKeyTranslation(n.enumStatoContabilizzazione,t.statoContabilizzazione,"statoContabilizzazione"))," ")}}function b_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",68),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.transazione.proprieta.isPayMail"),""))}function v_(i,o){if(1&i&&(e.TgZ(0,"mat-cell",69),e._UZ(1,"mat-checkbox",70),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isPayMail)}}function T_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.transazione.proprieta.cliente"),""))}function x_(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null==t.cliente?null:t.cliente.ragioneSociale," ")}}function Z_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazione.proprieta.arrivo"),""))}function A_(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.prenotazione?e.xi3(2,1,t.prenotazione.arrivo,"dd/MM/yyyy"):""," ")}}function w_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazione.proprieta.partenza"),""))}function z_(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.prenotazione?e.xi3(2,1,t.prenotazione.partenza,"dd/MM/yyyy"):""," ")}}function M_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazione.proprieta.codicePrenotazione"),""))}function q_(i,o){if(1&i&&(e.TgZ(0,"span",74),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" (ota ",t.prenotazione.codiceOTA," ) ")}}function P_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",72),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.preventDefault(),a.stopPropagation(),e.KtG(r.openPrenotazione(l.prenotazione.oid))}),e._uU(1),e.YNc(2,q_,2,1,"span",73),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.prenotazione.codicePrenotazione?t.prenotazione.codicePrenotazione:""," "),e.xp6(1),e.Q6J("ngIf",!!t.prenotazione.codiceOTA)}}function k_(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,P_,3,2,"a",71),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione)}}function S_(i,o){1&i&&(e.TgZ(0,"mat-header-cell",75),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.transazione.proprieta.importo"),""))}function y_(i,o){if(1&i&&(e.TgZ(0,"mat-cell",76)(1,"div",77),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.importo)," ")}}function J_(i,o){1&i&&e._UZ(0,"mat-header-cell")}function E_(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",78),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.contabilizza(l))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",79),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.storna(l))}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.transazioni.contabilizza")),e.xp6(3),e.Oqu(e.lcZ(6,4,"sbm.transazioni.storna")))}function N_(i,o){if(1&i&&(e.TgZ(0,"mat-cell",62),e.YNc(1,E_,7,6,"ng-container",1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.isContabilizzazioneStornoAbilitato&&null!=t.modalitaPagamento&&t.modalitaPagamento.tipo==n.enumTipoModalitaPagamento.XPay&&!!t.codTrans&&(t.statoContabilizzazione==n.enumStatoContabilizzazione.Nessuno||t.statoContabilizzazione==n.enumStatoContabilizzazione.Contabilizzato))}}function O_(i,o){1&i&&e._UZ(0,"mat-header-cell")}function L_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.openUrlPaymail(l.uid))}),e.TgZ(1,"i",83),e._uU(2,"open_in_new"),e.qZA()()}}function D_(i,o){if(1&i&&(e.TgZ(0,"mat-cell",80),e.YNc(1,L_,3,0,"button",81),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isPayMail)}}function I_(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Q_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.delete(l))}),e.TgZ(1,"i",83),e._uU(2,"delete"),e.qZA()()}}function U_(i,o){if(1&i&&(e.TgZ(0,"mat-cell",80),e.YNc(1,Q_,3,0,"button",81),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function Y_(i,o){1&i&&e._UZ(0,"mat-header-row",84)}function R_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",85),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.openDetails(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}const F_=function(i){return{"p-3":i}};class Ot extends f.H{set data(o){null!=o&&(this.dataSource=new s.r4(o),this.init(),this.dataReceived=!0)}constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.sessionService=l,this.rq=new d.TGK,this.displayedColumns=["view","data","dataEsecuzione","modalitaPagamento.nome","tipoContabilizzazione","statoContabilizzazione","isPayMail","cliente.ragioneSociale","prenotazione.arrivo","prenotazione.partenza","codicePrenotazione","importo","operazioni","open"],this.enumTipoContabilizzazione=c.XI,this.enumStatoContabilizzazione=c.OV,this.enumStatoEsecuzioneTransazione=c.g_,this.enumTipoModalitaPagamento=c.sc,this.dataReceived=!1,this.modalitaPagamentoRQ=d.k$g.fromFilter("isVisualizzaInPagamenti",c.Hp.IsTrue),this.isContabilizzazioneStornoAbilitato=!0,this.isEliminazioneAbilitata=!0}ngOnInit(){this.dataReceived||(this.headerService.setTitle("sbm.transazioni.title"),this.filters=[],this.filters.push(new d.wn$("data",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("data",c.Hp.LowerEqual,this.getDate(this.oneMonthFromToday),c.NM.Date)),this.filters.push(new d.wn$(["prenotazione.codiceOTA","prenotazione.codicePrenotazione"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.cognome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.email",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("statoContabilizzazione",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tipoContabilizzazione",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("modalitaPagamento.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("codTrans",c.Hp.Contains,"",c.NM.String)));let o=this.sessionService.getPermessiUtente();null!=o&&(this.isContabilizzazioneStornoAbilitato=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ContabilizzazioneStorno)),this.isEliminazioneAbilitata=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.EliminazioneTransazioni))),this.isEliminazioneAbilitata&&this.displayedColumns.push("delete")}ngAfterViewInit(){null!=this.dataSource?this.init():this.download()}init(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=(o,t)=>"codicePrenotazione"==t?null!=o.prenotazione?o.prenotazione.codicePrenotazione?o.prenotazione.codicePrenotazione:o.prenotazione.codiceOTA:null:this.utility.getPropertyValue(o,t)}onSearch(o,t,n,a=!0){null!=t?(this.filters[o].value=t,this.download(!a)):(this.filters[o].active=n,this.download()),this.paginator.firstPage()}search(){this.download(),this.paginator.firstPage()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getTransazioniFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.init(),o||this.setIsLoading(!1)})}openPrenotazione(o){this.utility.openUrlInNewTab("/sbm/home/(homeOutlet:prenotazioni)?oidPrenotazione="+o)}onPageChange(){this.containerService.scrollToTop()}openUrlPaymail(o){this.utility.openUrlInNewTab(window.location.origin+"/booking/paymail?uid="+o)}openDetails(o){let t=new d.Zpt;t.width="80vw";let n=this.showModalDialog(xt,t),a=n.componentInstance;a.transazione=o,a.dataReceived=this.dataReceived,a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&this.download()})}creaPaymail(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog(Bt,o),n=t.componentInstance;n.dialogRef=t,t.afterClosed().subscribe(()=>{n.urlPaymail&&this.download()})}contabilizza(o){let t=new d.Zpt;t.width="80vw";let n=this.showModalDialog(xt,t),a=n.componentInstance;a.transazione=o,a.dataReceived=this.dataReceived,a.isContabilizza=!0,a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){var r,p,T,L,G,W,be,Ze;this.setIsLoading(!0);let Je=d.sK_.getXPayContabilizzaRQ(this.sessionService.getOidAlbergo(),null===(r=o.prenotazione)||void 0===r||null===(r=r.portaleXAlbergo)||void 0===r?void 0:r.oid,o.modalitaPagamento.oid,o.cliente,null===(p=o.cliente)||void 0===p||null===(p=p.lingua)||void 0===p?void 0:p.codice,null===(T=o.prenotazione)||void 0===T?void 0:T.arrivo,null===(L=o.prenotazione)||void 0===L?void 0:L.partenza,null,null,null===(G=o.prenotazione)||void 0===G?void 0:G.noteP,null===(W=o.prenotazione)||void 0===W||null===(W=W.codicePromozione)||void 0===W?void 0:W.oid,null===(be=o.prenotazione)||void 0===be||null===(be=be.motivoViaggio)||void 0===be?void 0:be.oid,null===(Ze=o.prenotazione)||void 0===Ze?void 0:Ze.caparra,null,null,null,o.modalitaPagamento.xPayAlias,o.modalitaPagamento.xPaySecretKey,l,o.codTrans,o.modalitaPagamento.isTest);this.apiService.payment(Je).subscribe($e=>{$e.success?(o.statoContabilizzazione=c.OV.Contabilizzato,this.apiService.updateTransazione(o).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.transazioni.pagamentoContabilizzato")})):(this.setIsLoading(!1),this.showError("globals.messages.errore"))})}})}storna(o){let t=new d.Zpt;t.width="80vw";let n=this.showModalDialog(xt,t),a=n.componentInstance;a.transazione=o,a.dataReceived=this.dataReceived,a.isStorna=!0,a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){var r,p,T,L,G,W,be,Ze;this.setIsLoading(!0);let Je=d.sK_.getXPayStornaRQ(this.sessionService.getOidAlbergo(),null===(r=o.prenotazione)||void 0===r||null===(r=r.portaleXAlbergo)||void 0===r?void 0:r.oid,o.modalitaPagamento.oid,o.cliente,null===(p=o.cliente)||void 0===p||null===(p=p.lingua)||void 0===p?void 0:p.codice,null===(T=o.prenotazione)||void 0===T?void 0:T.arrivo,null===(L=o.prenotazione)||void 0===L?void 0:L.partenza,null,null,null===(G=o.prenotazione)||void 0===G?void 0:G.noteP,null===(W=o.prenotazione)||void 0===W||null===(W=W.codicePromozione)||void 0===W?void 0:W.oid,null===(be=o.prenotazione)||void 0===be||null===(be=be.motivoViaggio)||void 0===be?void 0:be.oid,null===(Ze=o.prenotazione)||void 0===Ze?void 0:Ze.caparra,null,null,null,o.modalitaPagamento.xPayAlias,o.modalitaPagamento.xPaySecretKey,o.importo,o.codTrans,o.modalitaPagamento.isTest);this.apiService.payment(Je).subscribe($e=>{$e.success?(o.statoContabilizzazione==c.OV.Nessuno?o.statoContabilizzazione=c.OV.Annullato:o.statoContabilizzazione==c.OV.Contabilizzato&&(o.statoContabilizzazione=c.OV.Rimborsato),this.apiService.updateTransazione(o).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.transazioni.pagamentoRimborsato")})):(this.setIsLoading(!1),this.showError("globals.messages.errore"))})}})}delete(o){this.showDialogConfirm("sbm.transazioni.eliminareTransazione").then(t=>{this.setIsLoading(!0),o.isDeleted=!0,this.apiService.updateTransazione(o).subscribe(()=>{this.download()})},t=>{})}ngOnDestroy(){this.dataReceived||this.headerService.clearTitle()}}function H_(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"interfaces.messaggio-send.preventivo")+t.preventivo.codicePreventivo," ")}}function K_(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"interfaces.messaggio-send.prenotazione")+(t.prenotazione.codicePrenotazione?t.prenotazione.codicePrenotazione:t.prenotazione.codiceOTA)," ")}}function G_(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"interfaces.messaggio-send.transazione")+t.transazione.oid," ")}}function $_(i,o){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,H_,3,3,"ng-container",10),e.YNc(2,K_,3,3,"ng-container",10),e.YNc(3,G_,3,3,"ng-container",10),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=t.preventivo),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione),e.xp6(1),e.Q6J("ngIf",null!=t.transazione)}}function B_(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null!=t.preventivo.cliente?t.preventivo.cliente.ragioneSociale:""," ")}}function V_(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null!=t.prenotazione.cliente?t.prenotazione.cliente.ragioneSociale:""," ")}}function X_(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null!=t.transazione.cliente?t.transazione.cliente.ragioneSociale:""," ")}}function j_(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.cliente.ragioneSociale," ")}}Ot.\u0275fac=function(o){return new(o||Ot)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t),e.Y36(j.m))},Ot.\u0275cmp=e.Xpm({type:Ot,selectors:[["app-transazioni"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{data:"data"},features:[e.qOj],decls:55,vars:12,consts:[[3,"ngClass"],[4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","data","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","view"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","dataEsecuzione"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","modalitaPagamento.nome"],["matColumnDef","tipoContabilizzazione"],["matColumnDef","statoContabilizzazione"],["matColumnDef","isPayMail"],["mat-sort-header","","class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","cliente.ragioneSociale"],["matColumnDef","prenotazione.arrivo"],["matColumnDef","prenotazione.partenza"],["matColumnDef","codicePrenotazione"],["matColumnDef","importo"],["mat-sort-header","","class","justify-content-end",4,"matHeaderCellDef"],["class","justify-content-end font-weight-bold",4,"matCellDef"],["matColumnDef","operazioni"],["matColumnDef","open"],["class","mat-td-delete",4,"matCellDef"],["matColumnDef","delete"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"placeholder","value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"placeholder","value","dateChange"],["matSuffix","",3,"for"],["picker",""],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["codicePrenotazioneSearch",""],["cognomeSearch",""],["emailSearch",""],[3,"placeholder","value","selectionChange"],["statoContabilizzazioneSelect",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["tipoContabilizzazioneSelect",""],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],["codTransSearch",""],["color","primary",1,"mt-2",3,"ngModel","ngModelChange","change"],["mat-flat-button","","color","primary",1,"mb-3",3,"click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],[1,"flex-wrap"],[1,"d-flex","flex-column"],[1,"codTrans"],["class","transEseguita text-center",4,"ngIf"],[1,"transEseguita","text-center"],[1,"material-icons","mr-1","align-middle","warning-icon"],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],["class","color-pink",3,"click",4,"ngIf"],[1,"color-pink",3,"click"],["class","div-help",4,"ngIf"],[1,"div-help"],["mat-sort-header","",1,"justify-content-end"],[1,"justify-content-end","font-weight-bold"],[1,"pr-3"],["mat-flat-button","","color","primary",1,"w-100","mt-1","operazione-button",3,"click"],["mat-flat-button","","color","primary",1,"w-100","mt-1","mb-1","operazione-button",3,"click"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,n_,62,58,"ng-container",1),e.YNc(2,a_,4,3,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"mat-table",5),e.NdJ("matSortChange",function(){return null!=t.paginator?t.paginator.firstPage():null}),e.ynx(6,6),e.YNc(7,l_,1,0,"mat-header-cell",7),e.YNc(8,r_,4,0,"mat-cell",8),e.BQk(),e.ynx(9,9),e.YNc(10,c_,3,3,"mat-header-cell",10),e.YNc(11,s_,3,4,"mat-cell",11),e.BQk(),e.ynx(12,12),e.YNc(13,p_,3,3,"mat-header-cell",10),e.YNc(14,d_,7,8,"mat-cell",13),e.BQk(),e.ynx(15,14),e.YNc(16,m_,3,3,"mat-header-cell",10),e.YNc(17,u_,7,3,"mat-cell",11),e.BQk(),e.ynx(18,15),e.YNc(19,g_,3,3,"mat-header-cell",10),e.YNc(20,h_,3,3,"mat-cell",11),e.BQk(),e.ynx(21,16),e.YNc(22,f_,3,3,"mat-header-cell",10),e.YNc(23,C_,4,6,"mat-cell",11),e.BQk(),e.ynx(24,17),e.YNc(25,b_,3,3,"mat-header-cell",18),e.YNc(26,v_,2,1,"mat-cell",19),e.BQk(),e.ynx(27,20),e.YNc(28,T_,3,3,"mat-header-cell",10),e.YNc(29,x_,2,1,"mat-cell",11),e.BQk(),e.ynx(30,21),e.YNc(31,Z_,3,3,"mat-header-cell",10),e.YNc(32,A_,3,4,"mat-cell",11),e.BQk(),e.ynx(33,22),e.YNc(34,w_,3,3,"mat-header-cell",10),e.YNc(35,z_,3,4,"mat-cell",11),e.BQk(),e.ynx(36,23),e.YNc(37,M_,3,3,"mat-header-cell",10),e.YNc(38,k_,2,1,"mat-cell",11),e.BQk(),e.ynx(39,24),e.YNc(40,S_,3,3,"mat-header-cell",25),e.YNc(41,y_,4,3,"mat-cell",26),e.BQk(),e.ynx(42,27),e.YNc(43,J_,1,0,"mat-header-cell",7),e.YNc(44,N_,2,1,"mat-cell",13),e.BQk(),e.ynx(45,28),e.YNc(46,O_,1,0,"mat-header-cell",7),e.YNc(47,D_,2,1,"mat-cell",29),e.BQk(),e.ynx(48,30),e.YNc(49,I_,1,0,"mat-header-cell",7),e.YNc(50,U_,2,1,"mat-cell",29),e.BQk(),e.YNc(51,Y_,1,0,"mat-header-row",31),e.YNc(52,R_,1,1,"mat-row",32),e.qZA()(),e.TgZ(53,"div",33)(54,"mat-paginator",34),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()()),2&o&&(e.Q6J("ngClass",e.VKq(10,F_,!t.dataReceived)),e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(46),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",25))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.$V,M.nX,b.k0,re.CK,y.nW,y.wx,y.zY,y.By,y._g,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,_.JJ,_.On,ne.d,m.uU,Te.A,ke.f,z.X$],styles:[".mat-table[_ngcontent-%COMP%]{min-width:1300px!important}.operazione-button[_ngcontent-%COMP%]{height:30px;line-height:30px}.transEseguita[_ngcontent-%COMP%]{font-size:x-large;color:red}.codTrans[_ngcontent-%COMP%]{font-size:x-small;font-style:italic}"]});class Wt extends f.H{constructor(o,t){super(),this.apiService=o,this.navigationService=t,this.back=new e.vpe}send(){if(this.setIsLoading(!0),null!=this.preventivo){let o=new d.zGy;o.oidMessaggio=this.oidMessaggio,o.oidPreventivo=this.preventivo.oid,o.testo=this.testo,this.apiService.sendMessage(o).subscribe(()=>{this.setIsLoading(!1),this.showInfo("interfaces.messaggio-send.messaggioInviato").then(()=>{this.navigationService.refreshContatoriMenu(),this.back.emit(!0)})})}else if(null!=this.prenotazione){let o=new d.x5t;o.oidMessaggio=this.oidMessaggio,o.oidPrenotazione=this.prenotazione.oid,o.testo=this.testo,this.apiService.sendMessagePrenotazione(o).subscribe(()=>{this.setIsLoading(!1),this.showInfo("interfaces.messaggio-send.messaggioInviato").then(()=>{this.navigationService.refreshContatoriMenu(),this.back.emit(!0)})})}else if(null!=this.transazione){let o=new d.ezU;o.oidMessaggio=this.oidMessaggio,o.oidTransazione=this.transazione.oid,o.testo=this.testo,this.apiService.sendMessageTransazione(o).subscribe(()=>{this.setIsLoading(!1),this.showInfo("interfaces.messaggio-send.messaggioInviato").then(()=>{this.navigationService.refreshContatoriMenu(),this.back.emit(!0)})})}else if(null!=this.cliente){let o=new d.NWb;o.oidMessaggio=this.oidMessaggio,o.oidCliente=this.cliente.oid,o.testo=this.testo,this.apiService.sendMessageCliente(o).subscribe(()=>{this.setIsLoading(!1),this.showInfo("interfaces.messaggio-send.messaggioInviato").then(()=>{this.navigationService.refreshContatoriMenu(),this.back.emit(!0)})})}}}Wt.\u0275fac=function(o){return new(o||Wt)(e.Y36(A.s),e.Y36(Ae.f))},Wt.\u0275cmp=e.Xpm({type:Wt,selectors:[["app-messaggio-send"]],inputs:{oidMessaggio:"oidMessaggio",preventivo:"preventivo",prenotazione:"prenotazione",transazione:"transazione",cliente:"cliente"},outputs:{back:"back"},features:[e.qOj],decls:20,vars:17,consts:[["class","font-weight-bold",4,"ngIf"],[1,"font-weight-bold"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"border","rounded","p-3","mt-3","bg-white"],[1,"w-100","messaggio-send-textarea"],["matInput","","rows","5",3,"ngModel","ngModelChange"],[1,"mt-4","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",3,"click"],[4,"ngIf"]],template:function(o,t){1&o&&(e.YNc(0,$_,4,3,"div",0),e.TgZ(1,"div")(2,"span",1),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",2),e.YNc(6,B_,2,1,"ng-container",3),e.YNc(7,V_,2,1,"ng-container",3),e.YNc(8,X_,2,1,"ng-container",3),e.YNc(9,j_,2,1,"ng-container",3),e.qZA()(),e.TgZ(10,"div",4)(11,"mat-form-field",5)(12,"textarea",6),e.NdJ("ngModelChange",function(a){return t.testo=a}),e.qZA()()(),e.TgZ(13,"div",7)(14,"button",8),e.NdJ("click",function(){return t.send()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",9),e.NdJ("click",function(){return t.back.emit()}),e._uU(18),e.ALo(19,"translate"),e.qZA()()),2&o&&(e.Q6J("ngIf",null!=t.preventivo||null!=t.prenotazione||null!=t.transazione),e.xp6(3),e.Oqu(e.lcZ(4,11,"interfaces.messaggio-send.cliente")),e.xp6(2),e.Q6J("ngSwitch",null!=t.preventivo?0:null!=t.prenotazione?1:null!=t.transazione?2:null!=t.cliente?3:4),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(3),e.Q6J("ngModel",t.testo),e.xp6(2),e.Q6J("disabled",!t.testo),e.xp6(1),e.Oqu(e.lcZ(16,13,"interfaces.messaggio-send.invia")),e.xp6(3),e.Oqu(e.lcZ(19,15,"globals.annulla")))},dependencies:[m.O5,m.RF,m.n9,_.Fj,_.JJ,_.On,h.eB,M.v_,b.k0,z.X$],styles:[".messaggio-send-textarea .mat-form-field-underline{visibility:hidden!important}  .messaggio-send-textarea .mat-form-field-wrapper{padding-bottom:0!important}  .messaggio-send-textarea .mat-form-field-infix{padding:0!important;border:0!important}textarea[_ngcontent-%COMP%]{resize:none}"]});class Zt{constructor(){}}Zt.\u0275fac=function(o){return new(o||Zt)},Zt.\u0275cmp=e.Xpm({type:Zt,selectors:[["app-messaggio-send-dialog"]],inputs:{oidMessaggio:"oidMessaggio",preventivo:"preventivo",prenotazione:"prenotazione",transazione:"transazione",cliente:"cliente",dialogRef:"dialogRef"},decls:4,vars:6,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"oidMessaggio","preventivo","prenotazione","transazione","cliente","back"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"app-messaggio-send",2),e.NdJ("back",function(a){return t.dialogRef.close(a)}),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("oidMessaggio",t.oidMessaggio)("preventivo",t.preventivo)("prenotazione",t.prenotazione)("transazione",t.transazione)("cliente",t.cliente))},dependencies:[h.eB,F.aO,Wt]});var Ue=Y(86515),je=Y(96603);function W_(i,o){if(1&i&&(e.TgZ(0,"mat-option",82),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function eu(i,o){if(1&i&&(e.TgZ(0,"mat-option",82),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function tu(i,o){if(1&i&&(e.TgZ(0,"mat-option",82),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function iu(i,o){if(1&i&&(e.TgZ(0,"div",84)(1,"div",85),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",86),e._uU(5),e.ALo(6,"eurCurrency"),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.prenotazioni.revenue")," "),e.xp6(3),e.hij(" ",e.lcZ(6,4,t.revenue)," ")}}function ou(i,o){if(1&i&&(e.TgZ(0,"div",89)(1,"div",85),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",86),e._uU(5),e.ALo(6,"eurCurrency"),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.prenotazioni.adr")," "),e.xp6(3),e.hij(" ",e.lcZ(6,4,t.ADR)," ")}}function nu(i,o){if(1&i&&(e.TgZ(0,"div",83)(1,"div",84)(2,"div",85),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",86),e._uU(6),e.qZA()(),e.YNc(7,iu,7,6,"div",87),e.TgZ(8,"div",84)(9,"div",85),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",86),e._uU(13),e.qZA()(),e.YNc(14,ou,7,6,"div",88),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,6,"sbm.prenotazioni.prenotazioni")," "),e.xp6(3),e.hij(" ",t.totalRecords," "),e.xp6(1),e.Q6J("ngIf",t.visualizzazioneDatiEconomiciEnabled),e.xp6(3),e.hij(" ",e.lcZ(11,8,"sbm.prenotazioni.roomNight")," "),e.xp6(3),e.hij(" ",t.roomNight," "),e.xp6(1),e.Q6J("ngIf",t.visualizzazioneDatiEconomiciEnabled)}}function au(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",37)(2,"div",38)(3,"div",39)(4,"div",40)(5,"mat-form-field",41)(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-date-range-input",42),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(14);return e.KtG(a.open())}),e.TgZ(10,"input",43),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.filters[0].value=l.getDate(a.value):null)}),e.qZA(),e.TgZ(11,"input",44),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.onSearch(1,l.getDate(a.value)):null)}),e.qZA()(),e._UZ(12,"mat-datepicker-toggle",45)(13,"mat-date-range-picker",null,46),e.qZA()(),e.TgZ(15,"div",47)(16,"mat-form-field",41)(17,"mat-select",48),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tipoFiltro=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onFiltroChange())}),e.ALo(18,"translate"),e.YNc(19,W_,3,4,"mat-option",49),e.ALo(20,"selectEnum"),e.qZA()()(),e.TgZ(21,"div",47)(22,"mat-form-field",41)(23,"input",50,51),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(24),l=e.oxw();return e.KtG(l.onCognomeInput(a.value))}),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"div",40)(27,"mat-form-field",41)(28,"input",52,53),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(29),l=e.oxw();return e.KtG(l.onSearch(12,a.value,null,null,!1))}),e.ALo(30,"translate"),e.qZA()()(),e.TgZ(31,"div",54)(32,"span",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showFilterAdv=!a.showFilterAdv)}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"button",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showFilterAdv=!a.showFilterAdv)}),e.TgZ(36,"mat-icon"),e._uU(37,"keyboard_arrow_down"),e.qZA()()()(),e.TgZ(38,"div",39)(39,"div",40)(40,"mat-form-field",41)(41,"mat-label"),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"mat-date-range-input",57),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(49);return e.KtG(a.open())}),e.TgZ(45,"input",58),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.filters[22].value=l.getDate(a.value):null)}),e.qZA(),e.TgZ(46,"input",59),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.onSearch(23,l.getDate(a.value)):null)}),e.qZA()(),e._UZ(47,"mat-datepicker-toggle",45)(48,"mat-date-range-picker",null,60),e.TgZ(50,"mat-datepicker-toggle",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.filters[22].value="",e.KtG(a.onSearch(23,""))}),e.TgZ(51,"mat-icon",62),e._uU(52,"clear"),e.qZA()()()(),e.TgZ(53,"div",47)(54,"mat-form-field",41)(55,"input",52,63),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(56),l=e.oxw();return e.KtG(l.onSearch(10,a.value,null,null,!1))}),e.ALo(57,"translate"),e.qZA()()(),e.TgZ(58,"div",47)(59,"mat-form-field",41)(60,"input",52,64),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(61),l=e.oxw();return e.KtG(l.onSearch(5,a.value,null,null,!1))}),e.ALo(62,"translate"),e.qZA()()(),e.TgZ(63,"div",47)(64,"mat-checkbox",65),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(19,a.checked?l.getDate(l.today):""))}),e._uU(65),e.ALo(66,"translate"),e.qZA()(),e.TgZ(67,"div",47)(68,"mat-checkbox",65),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(20,a.checked?l.getDate(l.today):""))}),e._uU(69),e.ALo(70,"translate"),e.qZA()()()(),e.TgZ(71,"div",66)(72,"div",39)(73,"div",40)(74,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(3,-1==a.oid?"":a.oid.toString()))}),e.ALo(75,"translate"),e.qZA()(),e.TgZ(76,"div",40)(77,"app-view-select",68),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedUbicazione=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearch(13,-1==a.selectedUbicazione.oid?"":a.selectedUbicazione.oid.toString()))}),e.ALo(78,"translate"),e.qZA()(),e.TgZ(79,"div",40)(80,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(8,-1==a.oid?"":a.oid.toString()))}),e.ALo(81,"translate"),e.qZA()(),e.TgZ(82,"div",40)(83,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(9,-1==a.oid?"":a.oid.toString()))}),e.ALo(84,"translate"),e.qZA()()(),e.TgZ(85,"div",39)(86,"div",40)(87,"mat-form-field",41)(88,"input",69,70),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(89),l=e.oxw();return e.KtG(l.onSearch(4,a.value,null,null,!1))}),e.ALo(90,"translate"),e.qZA()()(),e.TgZ(91,"div",40)(92,"mat-form-field",41)(93,"mat-select",71,72),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.MAs(94),l=e.oxw();return e.KtG(l.onSearch(11,a.value))}),e.ALo(95,"translate"),e._UZ(96,"mat-option",73),e.YNc(97,eu,2,2,"mat-option",49),e.ALo(98,"selectEnum"),e.qZA()()(),e.TgZ(99,"div",40)(100,"app-view-select",74),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(14,-1==a.oid?"":a.oid.toString()))}),e.ALo(101,"translate"),e.qZA()(),e.TgZ(102,"div",40)(103,"mat-form-field",41)(104,"input",52,75),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(105),l=e.oxw();return e.KtG(l.onSearch(15,a.value,null,null,!1))}),e.ALo(106,"translate"),e.qZA()()()(),e.TgZ(107,"div",39)(108,"div",40)(109,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(25,-1==a.oid?"":a.oid.toString()))}),e.ALo(110,"translate"),e.qZA()(),e.TgZ(111,"div",40)(112,"app-view-select",76),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(17,-1==a.oid?"":a.oid.toString()))}),e.ALo(113,"translate"),e.qZA()(),e.TgZ(114,"div",40)(115,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(18,-1==a.oid?"":a.oid.toString()))}),e.ALo(116,"translate"),e.qZA()(),e.TgZ(117,"div",40)(118,"mat-form-field",41)(119,"mat-select",71,77),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.MAs(120),l=e.oxw();return e.KtG(l.onSearch(24,a.value))}),e.ALo(121,"translate"),e._UZ(122,"mat-option",73),e.YNc(123,tu,3,4,"mat-option",49),e.ALo(124,"selectEnum"),e.qZA()()()(),e.TgZ(125,"div",78)(126,"div",40)(127,"app-indeterminate-checkbox",79),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null==a?l.onSearch(6,null,null,!0):l.onSearch(6,null,a))}),e.qZA()(),e.TgZ(128,"div",40)(129,"app-indeterminate-checkbox",79),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null==a?l.onSearch(7,null,!1):1==a?l.onSearch(7,null,!0):l.onSearch(7,null,null,!0))}),e.qZA()(),e.TgZ(130,"div",40)(131,"app-indeterminate-checkbox",79),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null==a?l.onSearch(16,null,null,!0):l.onSearch(16,null,a))}),e.qZA()(),e.TgZ(132,"div",40)(133,"mat-checkbox",80),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(21,null,a.checked))}),e._uU(134),e.ALo(135,"translate"),e.qZA()()()()(),e.YNc(136,nu,15,10,"div",81),e.BQk()}if(2&i){const t=e.MAs(14),n=e.MAs(49),a=e.oxw();e.xp6(7),e.Oqu(e.lcZ(8,57,"sbm.prenotazioni.periodoArrivo")),e.xp6(2),e.Q6J("rangePicker",t)("disabled",a.tipoFiltro!=a.enumTipoFiltro.Personalizzato),e.xp6(1),e.Q6J("value",a.filters[0].value),e.xp6(1),e.Q6J("value",a.filters[1].value),e.xp6(1),e.Q6J("for",t),e.xp6(5),e.s9C("placeholder",e.lcZ(18,59,"sbm.prenotazioni.tipoFiltro")),e.Q6J("ngModel",a.tipoFiltro),e.xp6(2),e.Q6J("ngForOf",e.xi3(20,61,a.enumTipoFiltro,"tipoFiltroPrenotazioni")),e.xp6(4),e.s9C("placeholder",e.lcZ(25,64,"bo.cliente.proprieta.cognome")),e.xp6(5),e.s9C("placeholder",e.lcZ(30,66,"bo.cliente.proprieta.email")),e.Q6J("value",a.filters[12].value),e.xp6(5),e.Oqu(e.lcZ(34,68,"globals.filtriAvanzati")),e.xp6(9),e.Oqu(e.lcZ(43,70,"sbm.prenotazioni.periodoPrenotazione")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(3),e.Q6J("for",n),e.xp6(8),e.s9C("placeholder",e.lcZ(57,72,"bo.prenotazione.proprieta.codicePrenotazione")),e.Q6J("value",a.filters[10].value),e.xp6(5),e.s9C("placeholder",e.lcZ(62,74,"bo.prenotazione.proprieta.codiceOTA")),e.Q6J("value",a.filters[5].value),e.xp6(4),e.Q6J("checked",!!a.filters[19].value),e.xp6(1),e.hij(" ",e.lcZ(66,76,"sbm.prenotazioni.inArrivoOggi")," "),e.xp6(3),e.Q6J("checked",!!a.filters[20].value),e.xp6(1),e.hij(" ",e.lcZ(70,78,"sbm.prenotazioni.inPartenzaOggi")," "),e.xp6(2),e.Q6J("hidden",!a.showFilterAdv),e.xp6(3),e.Q6J("dataLoader",a.apiService.getPortaliXAlbergoViewSelect())("placeholder",e.lcZ(75,80,"bo.prenotazione.proprieta.portale")),e.xp6(3),e.Q6J("dataLoader",a.apiService.getUbicazioniIstatViewSelect())("value",a.selectedUbicazione)("placeholder",e.lcZ(78,82,"globals.ubicazioneIstat")),e.xp6(3),e.Q6J("dataLoader",a.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(81,84,"bo.prenotazione.proprieta.tipoCamera")),e.xp6(3),e.Q6J("dataLoader",a.apiService.getTrattamentiViewSelect())("placeholder",e.lcZ(84,86,"bo.prenotazione.proprieta.trattamento")),e.xp6(5),e.s9C("placeholder",e.lcZ(90,88,"bo.prenotazione.proprieta.numero")),e.Q6J("value",a.filters[4].value),e.xp6(5),e.s9C("placeholder",e.lcZ(95,90,"bo.prenotazione.proprieta.tipoPrenotazione")),e.Q6J("value",a.filters[11].value),e.xp6(4),e.Q6J("ngForOf",e.Dn7(98,92,a.enumTipoPrenotazione,"tipoPrenotazione",!1)),e.xp6(3),e.Q6J("dataLoader",a.apiService.getAgenzieViewSelect())("placeholder",e.lcZ(101,96,"bo.portaleXAlbergo.proprieta.agenzia")),e.xp6(4),e.s9C("placeholder",e.lcZ(106,98,"bo.prenotazione.proprieta.codTrans")),e.Q6J("value",a.filters[15].value),e.xp6(5),e.Q6J("dataLoader",a.apiService.getPromozioniViewSelect(a.getPromozioniRQ))("placeholder",e.lcZ(110,100,"bo.prenotazione.proprieta.promozione")),e.xp6(3),e.Q6J("dataLoader",a.apiService.getCodiciPromozioneViewSelect())("placeholder",e.lcZ(113,102,"bo.prenotazione.proprieta.codicePromozione")),e.xp6(3),e.Q6J("dataLoader",a.apiService.getMotiviViaggioViewSelect())("placeholder",e.lcZ(116,104,"bo.prenotazione.proprieta.motivoViaggio")),e.xp6(4),e.s9C("placeholder",e.lcZ(121,106,"bo.prenotazione.proprieta.statoPrenotazioneWelcome")),e.Q6J("value",a.filters[24].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(124,108,a.enumStatoPrenotazioneWelcome,"statoPrenotazioneWelcome")),e.xp6(4),e.Q6J("label","bo.prenotazione.proprieta.importata"),e.xp6(2),e.Q6J("label","bo.prenotazione.proprieta.isEliminata"),e.xp6(2),e.Q6J("label","bo.prenotazione.proprieta.isCheckInOnlineEseguito"),e.xp6(3),e.hij(" ",e.lcZ(135,111,"sbm.prenotazioni.cancellazioneRichiesta")," "),e.xp6(2),e.Q6J("ngIf",null==a.dialogRef&&null!=a.data&&a.data.length>0)}}function lu(i,o){1&i&&(e.TgZ(0,"div",90)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.prenotazioni.nessunaPrenotazione")))}function ru(i,o){1&i&&e._UZ(0,"mat-header-cell")}function cu(i,o){1&i&&(e.TgZ(0,"mat-cell",91)(1,"button",92)(2,"i",93),e._uU(3,"edit"),e.qZA()()())}function su(i,o){1&i&&(e.TgZ(0,"mat-header-cell",94),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.portale")))}function pu(i,o){if(1&i&&e._UZ(0,"img",98),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.portaleXAlbergo.portale.urlImmagineIcona,e.LSH)}}function du(i,o){1&i&&(e.TgZ(0,"b"),e._uU(1,"PMS"),e.qZA())}function mu(i,o){1&i&&(e.TgZ(0,"b"),e._uU(1,"CRM"),e.qZA())}function _u(i,o){1&i&&(e.TgZ(0,"b"),e._uU(1,"EXT"),e.qZA())}const uu=function(i){return{"mt-1":i}};function gu(i,o){if(1&i&&(e.TgZ(0,"div",99),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,uu,(t.tipoPrenotazione==n.enumTipoPrenotazione.WebBooking||t.tipoPrenotazione==n.enumTipoPrenotazione.OTA)&&null!=t.portaleXAlbergo.portale&&!!t.portaleXAlbergo.portale.urlImmagineIcona)),e.xp6(1),e.hij(" ",t.portaleXAlbergo.nome,"")}}function hu(i,o){if(1&i&&(e.TgZ(0,"mat-cell",95),e.YNc(1,pu,1,1,"img",96),e.YNc(2,du,2,0,"b",2),e.YNc(3,mu,2,0,"b",2),e.YNc(4,_u,2,0,"b",2),e.YNc(5,gu,2,4,"div",97),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",(t.tipoPrenotazione==n.enumTipoPrenotazione.WebBooking||t.tipoPrenotazione==n.enumTipoPrenotazione.OTA)&&null!=t.portaleXAlbergo&&null!=t.portaleXAlbergo.portale&&!!t.portaleXAlbergo.portale.urlImmagineIcona),e.xp6(1),e.Q6J("ngIf",t.tipoPrenotazione==n.enumTipoPrenotazione.PMS),e.xp6(1),e.Q6J("ngIf",t.tipoPrenotazione==n.enumTipoPrenotazione.CRM),e.xp6(1),e.Q6J("ngIf",t.tipoPrenotazione==n.enumTipoPrenotazione.API),e.xp6(1),e.Q6J("ngIf",null!=t.portaleXAlbergo&&!!t.portaleXAlbergo.nome)}}function fu(i,o){1&i&&(e.TgZ(0,"mat-header-cell",100),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.codicePrenotazione")))}function Cu(i,o){if(1&i&&(e.TgZ(0,"div",104),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("(ota: ",t.codiceOTA,")")}}function bu(i,o){if(1&i&&(e.TgZ(0,"div",104),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("(prev: ",t.preventivo.codicePreventivo,") ")}}function vu(i,o){1&i&&(e.TgZ(0,"div",105),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.prenotazioni.nonImportata"),""))}function Tu(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",101)(2,"div"),e._uU(3),e.qZA(),e.YNc(4,Cu,2,1,"div",102),e.YNc(5,bu,2,1,"div",102),e.YNc(6,vu,3,3,"div",103),e.qZA()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.codicePrenotazione),e.xp6(1),e.Q6J("ngIf",!!t.codiceOTA),e.xp6(1),e.Q6J("ngIf",null!=t.preventivo),e.xp6(1),e.Q6J("ngIf",!t.importata)}}function xu(i,o){1&i&&(e.TgZ(0,"mat-header-cell",100),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.dataPren")))}function Zu(i,o){if(1&i&&(e.TgZ(0,"mat-cell",106)(1,"div",41),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"div",107),e._uU(5),e.ALo(6,"date"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(e.xi3(3,2,t.dataPren,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.xi3(6,5,t.dataCreazione,"HH:mm:ss"))}}function Au(i,o){1&i&&(e.TgZ(0,"mat-header-cell",100),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.arrivo")))}function wu(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.arrivo,"dd/MM/yyyy"))}}function zu(i,o){1&i&&(e.TgZ(0,"mat-header-cell",100),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.partenza")))}function Mu(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.partenza,"dd/MM/yyyy"))}}function qu(i,o){1&i&&(e.TgZ(0,"mat-header-cell",100),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.notti")))}function Pu(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.notti)}}function ku(i,o){1&i&&(e.TgZ(0,"mat-header-cell",100),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.pax")))}function Su(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.pax)}}function yu(i,o){1&i&&(e.TgZ(0,"mat-header-cell",100),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.cliente")))}function Ju(i,o){if(1&i&&e._UZ(0,"span"),2&i){const t=e.oxw(2).$implicit;e.Gre("mr-1 fi fi-",t.cliente.lingua.flagIcon,"")}}function Eu(i,o){1&i&&(e.TgZ(0,"span",112),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.isCheckInOnlineEseguito")))}function Nu(i,o){if(1&i&&(e.TgZ(0,"div",101)(1,"div"),e.YNc(2,Ju,1,3,"span",109),e.TgZ(3,"span"),e._uU(4),e.qZA()(),e.TgZ(5,"div",110),e._uU(6),e.qZA(),e.YNc(7,Eu,3,3,"span",111),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",null!=t.cliente.lingua&&!!t.cliente.lingua.flagIcon),e.xp6(2),e.Oqu(t.cliente.ragioneSociale),e.xp6(2),e.Oqu(t.cliente.email),e.xp6(1),e.Q6J("ngIf",t.isCheckInOnlineEseguito)}}function Ou(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Nu,8,4,"div",108),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.cliente)}}function Lu(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tipoCameraOTA")))}function Du(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t.tipoCamera?null:t.tipoCamera.nome," ")}}function Iu(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Du,2,1,"span",2),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null==t.tipoCameraOTA),e.xp6(2),e.Oqu(null==t.tipoCameraOTA||null==t.tipoCameraOTA.tipoCamera?null:t.tipoCameraOTA.tipoCamera.nome)}}function Qu(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tariffaOTA")))}function Uu(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.tariffaOTA.trattamento.nome," ")}}function Yu(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.trattamento.nome," ")}}function Ru(i,o){if(1&i&&(e.TgZ(0,"div",114),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.promozione.nome," ")}}function Fu(i,o){if(1&i&&(e.TgZ(0,"mat-cell",106),e.YNc(1,Uu,2,1,"span",2),e.YNc(2,Yu,2,1,"span",2),e.YNc(3,Ru,2,1,"div",113),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.tariffaOTA&&null!=t.tariffaOTA.trattamento),e.xp6(1),e.Q6J("ngIf",(null==t.tariffaOTA||null==t.tariffaOTA.trattamento)&&null!=t.trattamento),e.xp6(1),e.Q6J("ngIf",null!=t.promozione)}}function Hu(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.statoPrenotazione")))}function Ku(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.prenotazioni.cancellata")))}function Gu(i,o){if(1&i&&(e.TgZ(0,"div",116),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"date"),e.ALo(4,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.dataRichiestaCancellazione?e.lcZ(2,1,"sbm.prenotazioni.richiestaCancellazioneIl")+e.xi3(3,3,t.dataRichiestaCancellazione,"dd/MM/yyyy HH:mm:ss"):e.lcZ(4,6,"sbm.prenotazioni.richiestaCancellazione")," ")}}function $u(i,o){if(1&i&&(e.TgZ(0,"mat-cell",106)(1,"div",41),e._uU(2),e.ALo(3,"translate"),e.YNc(4,Ku,3,3,"span",2),e.qZA(),e.YNc(5,Gu,5,8,"div",115),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.hij(" ",null!=t.statoPrenotazioneWelcome?e.lcZ(3,3,n.getEnumKeyTranslation(n.enumStatoPrenotazioneWelcome,t.statoPrenotazioneWelcome,"statoPrenotazioneWelcome")):t.statoPrenotazionePortale," "),e.xp6(2),e.Q6J("ngIf",!t.statoPrenotazionePortale&&null==t.statoPrenotazioneWelcome&&t.isEliminata),e.xp6(1),e.Q6J("ngIf",t.statoPrenotazione==n.enumStatoPrenotazione.CancellazioneRichiesta)}}function Bu(i,o){1&i&&(e.TgZ(0,"mat-header-cell",117),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.sourceBrand")))}function Vu(i,o){if(1&i&&(e.TgZ(0,"mat-cell",94),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.sourceBrand)}}function Xu(i,o){1&i&&(e.TgZ(0,"mat-header-cell",118),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.totale")))}function ju(i,o){if(1&i&&(e.TgZ(0,"div",125),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("Sc. ",e.lcZ(2,1,t.sconto),"")}}function Wu(i,o){if(1&i&&(e.TgZ(0,"div",122)(1,"div",123),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,ju,3,3,"div",124),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.importo)),e.xp6(2),e.Q6J("ngIf",t.sconto>0)}}function eg(i,o){if(1&i&&(e.TgZ(0,"mat-cell",119)(1,"div",120),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,Wu,5,4,"div",121),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.importo-t.sconto)," "),e.xp6(2),e.Q6J("ngIf",t.sconto>0)}}function tg(i,o){1&i&&e._UZ(0,"mat-header-row",126)}const ig=function(i){return{"prenotazione-cancellata":i}};function og(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",127),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?null!=p.dialogRef?p.dialogRef.close(r):p.dataReceived?p.utility.openUrlInNewTab("/sbm/home/(homeOutlet:prenotazioni)?oidPrenotazione="+r.oid):p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,ig,null!=t.dataCancellazione))("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function ng(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",128),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.export())}),e.TgZ(1,"i",129),e._uU(2,"get_app"),e.qZA()()}}const ag=function(i){return{"p-3":i}},lg=function(i){return{"mb-0":i}};class At extends f.H{set _data(o){null!=o&&(this.dataReceived=!0,this.data=o,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}constructor(o,t,n,a,l,r){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.route=l,this.sessionService=r,this.displayedColumns=["edit","portaleXAlbergo","codiceOTA","dataPren","arrivo","partenza","notti","pax","cliente.ragioneSociale","tipoCamera.nome","trattamento.nome","statoPrenotazionePortale","sourceBrand","importo"],this.pageSize=25,this.showTable=!0,this.showFilterAdv=!1,this.enumStatoPrenotazione=c.gp,this.enumStatoPrenotazioneWelcome=c.Kg,this.enumTipoPrenotazione=c.DS,this.search=!1,this.dataReceived=!1,this.tipoFiltro=c.Kp.Personalizzato,this.enumTipoFiltro=c.Kp,this.esportazionePrenotazioniEnabled=!0,this.visualizzazioneDatiEconomiciEnabled=!0,this.getPromozioniRQ=d.k$g.fromFilter("tipoPromozione",c.Hp.Equal,c.$l.Sconto.toString(),c.NM.Number)}ngOnInit(){this.rq=new d.k$g,this.rq.skip=0,this.rq.take=this.pageSize,this.sorting=new d.aQR("dataPren",c.nI.Desc),this.dataReceived||(this.headerService.setTitle("sbm.prenotazioni.title"),this.filters=[],this.filters.push(new d.wn$("arrivo",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("arrivo",c.Hp.LowerEqual,this.getDate(this.oneYearFromToday),c.NM.Date)),this.filters.push(new d.wn$("cliente.cognome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("portaleXAlbergo.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("numero",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("codiceOTA",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("importata",c.Hp.IsTrue,null,null,!1,c.Hp.IsFalse)),this.filters.push(new d.wn$("isEliminata",c.Hp.IsTrue,null,null,!1,c.Hp.IsFalse,!0)),this.filters.push(new d.wn$("tipoCamera.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("trattamento.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$(["codicePrenotazione","codiceOTA"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("tipoPrenotazione",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("cliente.email",c.Hp.Contains,"",c.NM.String)),this.selectedUbicazione=this.sessionService.getUbicazioneIstat(),this.filters.push(new d.wn$("portaleXAlbergo.ubicazioneIstat.oid",c.Hp.Equal,null!=this.selectedUbicazione?this.selectedUbicazione.oid.toString():"",c.NM.Number)),this.filters.push(new d.wn$("agenzia.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$(["transazione.oid","transazione.codTrans"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("isCheckInOnlineEseguito",c.Hp.IsTrue,null,null,!1,c.Hp.IsFalse)),this.filters.push(new d.wn$("codicePromozione.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("motivoViaggio.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("arrivo",c.Hp.Equal,"",c.NM.Date)),this.filters.push(new d.wn$("partenza",c.Hp.Equal,"",c.NM.Date)),this.filters.push(new d.wn$("dataRichiestaCancellazione",c.Hp.IsNotNull)),this.filters.push(new d.wn$("dataPren",c.Hp.GreaterEqual,"",c.NM.Date)),this.filters.push(new d.wn$("dataPren",c.Hp.LowerEqual,"",c.NM.Date)),this.filters.push(new d.wn$("statoPrenotazioneWelcome",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("promozione.oid",c.Hp.Equal,"",c.NM.Number)),this.sub=this.route.queryParamMap.subscribe(t=>{let n=t.get("oidPrenotazione"),a=t.get("codicePrenotazione"),l=t.get("codiceOta");n&&!isNaN(+n)&&+n>0?this.oidPrenotazione=+n:a?this.codicePrenotazione=a:l&&(this.codiceOta=l)}));let o=this.sessionService.getPermessiUtente();null!=o&&(this.esportazionePrenotazioniEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.EsportazionePrenotazioni)),this.visualizzazioneDatiEconomiciEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.VisualizzazioneDatiEconomiciPrenotazioni)))}ngAfterViewInit(){null!=this.dataSource?(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort):null!=this.oidPrenotazione?this.downloadPrenotazione():null!=this.codicePrenotazione?this.downloadPrenotazioneCodicePrenotazione():null!=this.codiceOta?this.downloadPrenotazioneCodiceOta():this.download()}onSortChange(o){this.sorting.field=o.active,this.sorting.type="asc"==o.direction?c.nI.Asc:c.nI.Desc,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}onSearch(o,t,n,a,l=!0){null!=t?(this.search=!l,this.filters[o].value=t):null!=n?(this.filters[o].active=n,this.filters[o].inverted=!1):(this.filters[o].inverted=a,this.filters[o].active=!1),0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}downloadPrenotazione(){this.setIsLoading(!0),this.searchRequest=this.apiService.getPrenotazione(this.oidPrenotazione).subscribe(o=>{null!=o.data?(this.edit(o.data),this.setIsLoading(!1)):this.download()})}downloadPrenotazioneCodiceOta(){this.setIsLoading(!0),this.searchRequest=this.apiService.getPrenotazioniFilter(d.k$g.fromFilter("codiceOTA",c.Hp.Equal,this.codiceOta?this.codiceOta:this.codicePrenotazione,c.NM.String)).subscribe(o=>{o.data.prenotazioni.length>0?(this.edit(o.data.prenotazioni[0]),this.setIsLoading(!1)):this.download()})}downloadPrenotazioneCodicePrenotazione(){this.setIsLoading(!0),this.searchRequest=this.apiService.getPrenotazioniFilter(d.k$g.fromFilter("codicePrenotazione",c.Hp.Equal,this.codicePrenotazione,c.NM.String)).subscribe(o=>{o.data.prenotazioni.length>0?(this.edit(o.data.prenotazioni[0]),this.setIsLoading(!1)):this.downloadPrenotazioneCodiceOta()})}download(){this.dataReceived||(this.search||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[this.sorting],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPrenotazioniFilter(this.rq).subscribe(o=>{this.data=o.data.prenotazioni,this.totalRecords=o.totalRecords,this.revenue=o.data.revenue,this.roomNight=o.data.roomNight,this.ADR=o.data.ADR,this.search?this.search=!1:this.setIsLoading(!1)}))}edit(o){this.prenotazione=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}export(){this.setIsLoading(!0);let o=new d.k$g;o.sorting=[this.sorting],o.filters=this.utility.getFilters(this.filters),this.apiService.getPrenotazioniFilter(o).subscribe(t=>{this.utility.exportToCsv(t.data.prenotazioni,"PrenotazioniWeb",this.displayedColumns.slice(2,this.displayedColumns.length)),this.setIsLoading(!1)})}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}onFiltroChange(){let o=u();switch(this.tipoFiltro){case c.Kp.Oggi:this.filters[0].value=this.getDate(u()),this.filters[1].value=this.filters[0].value;break;case c.Kp.Domani:this.filters[0].value=this.getDate(u().add(1,"day")),this.filters[1].value=this.filters[0].value;break;case c.Kp.Prossimi7Giorni:this.filters[0].value=this.getDate(o),this.filters[1].value=this.getDate(u().add(7,"day"));break;case c.Kp.Prossimi30Giorni:this.filters[0].value=this.getDate(o),this.filters[1].value=this.getDate(u().add(30,"day"));break;case c.Kp.AnnoCorrente:this.filters[0].value=this.getDate(u().set("month",0).set("date",1)),this.filters[1].value=this.getDate(u().set("month",11).set("date",31))}this.onSearch(1,this.getDate(this.filters[1].value))}onCognomeInput(o){o&&(o.length>=3?this.onSearch(2,o,null,null,!1):2==o.length&&this.filters[2].value&&this.onSearch(2,"",null,null,!1))}ngOnDestroy(){this.dataReceived||(this.headerService.clearTitle(),this.headerService.hideElenco()),null!=this.sub&&this.sub.unsubscribe()}}At.\u0275fac=function(o){return new(o||At)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t),e.Y36(je.gz),e.Y36(j.m))},At.\u0275cmp=e.Xpm({type:At,selectors:[["app-prenotazioni"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{_data:"_data",dialogRef:"dialogRef"},features:[e.qOj],decls:56,vars:20,consts:[[3,"ngClass"],[3,"hidden"],[4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"mat-table-container"],["matSort","","matSortActive","dataPren","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","portaleXAlbergo"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center flex-wrap pt-1",4,"matCellDef"],["matColumnDef","codiceOTA"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","dataPren"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","notti"],["matColumnDef","pax"],["matColumnDef","cliente.ragioneSociale"],["matColumnDef","tipoCamera.nome"],["matColumnDef","trattamento.nome"],["matColumnDef","statoPrenotazionePortale"],["matColumnDef","sourceBrand"],["mat-sort-header","","class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","importo"],["mat-sort-header","","class","justify-content-end",4,"matHeaderCellDef"],["class","flex-wrap text-right",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"ngClass","matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative",3,"ngClass"],["mat-icon-button","","class","export-button",3,"click",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[3,"_prenotazione","backEvent"],[1,"filter"],[1,"filter-base"],[1,"row"],[1,"col-3"],[1,"w-100"],[3,"rangePicker","disabled","click"],["autocompleteOff","","matStartDate","","readonly","",3,"value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"value","dateChange"],["matSuffix","",3,"for"],["pickerArrivo",""],[1,"col-2"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","matInput","",3,"placeholder","input"],["cognomeSearch",""],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["emailSearch",""],[1,"col-2","text-right","pt-2","font-weight-bold"],[1,"align-middle","color-pink","cursor-pointer",3,"click"],["mat-icon-button","","color","primary",1,"align-middle",3,"click"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"dateChange"],["pickerDataPren",""],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["codicePrenotazioneSearch",""],["codiceOTASearch",""],["color","primary",1,"d-inline-block","mt-3",3,"checked","change"],[1,"filter-adv",3,"hidden"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","value","input"],["numeroSearch",""],[3,"placeholder","value","selectionChange"],["tipoPrenotazioneSelect",""],["value",""],["displayMember","ragioneSociale",3,"dataLoader","placeholder","valueChange"],["codTransSearch",""],["displayMember","codice",3,"dataLoader","placeholder","valueChange"],["statoPrenotazioneWelcomeSelect",""],[1,"row","mt-3"],[3,"label","valueChange"],["color","primary",3,"change"],["class","row mt-4 mb-2",4,"ngIf"],[3,"value"],[1,"row","mt-4","mb-2"],[1,"col","border-right","text-center"],[1,"font-weight-bold"],[1,"font-weight-bold","totale"],["class","col border-right text-center",4,"ngIf"],["class","col text-center",4,"ngIf"],[1,"col","text-center"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],[1,"justify-content-center","flex-wrap","pt-1"],["class","portale-icon",3,"src",4,"ngIf"],["class","w-100 font-small text-center",3,"ngClass",4,"ngIf"],[1,"portale-icon",3,"src"],[1,"w-100","font-small","text-center",3,"ngClass"],["mat-sort-header",""],[1,"d-flex","flex-column"],["class","codiceOTAGrid",4,"ngIf"],["class","color-red font-small",4,"ngIf"],[1,"codiceOTAGrid"],[1,"color-red","font-small"],[1,"flex-wrap"],[1,"w-100","font-italic","font-small"],["class","d-flex flex-column",4,"ngIf"],[3,"class",4,"ngIf"],[1,"cliente-email"],["class","cliente-checkin",4,"ngIf"],[1,"cliente-checkin"],["class","font-italic small w-100",4,"ngIf"],[1,"font-italic","small","w-100"],["class","w-100 richiesta-cancellazione",4,"ngIf"],[1,"w-100","richiesta-cancellazione"],["mat-sort-header","",1,"justify-content-center"],["mat-sort-header","",1,"justify-content-end"],[1,"flex-wrap","text-right"],[1,"w-100","text-right","totaleGrid"],["class","w-100 text-right",4,"ngIf"],[1,"w-100","text-right"],[1,"importoGrid"],["class","scontoGrid",4,"ngIf"],[1,"scontoGrid"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"ngClass","matTooltip","contextmenu","click"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,au,137,113,"ng-container",2),e.YNc(3,lu,4,3,"div",3),e.TgZ(4,"div",1)(5,"div",4)(6,"mat-table",5),e.NdJ("matSortChange",function(a){return t.onSortChange(a)}),e.ynx(7,6),e.YNc(8,ru,1,0,"mat-header-cell",7),e.YNc(9,cu,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,su,3,3,"mat-header-cell",10),e.YNc(12,hu,6,5,"mat-cell",11),e.BQk(),e.ynx(13,12),e.YNc(14,fu,3,3,"mat-header-cell",13),e.YNc(15,Tu,7,4,"mat-cell",14),e.BQk(),e.ynx(16,15),e.YNc(17,xu,3,3,"mat-header-cell",13),e.YNc(18,Zu,7,8,"mat-cell",16),e.BQk(),e.ynx(19,17),e.YNc(20,Au,3,3,"mat-header-cell",13),e.YNc(21,wu,3,4,"mat-cell",14),e.BQk(),e.ynx(22,18),e.YNc(23,zu,3,3,"mat-header-cell",13),e.YNc(24,Mu,3,4,"mat-cell",14),e.BQk(),e.ynx(25,19),e.YNc(26,qu,3,3,"mat-header-cell",13),e.YNc(27,Pu,2,1,"mat-cell",14),e.BQk(),e.ynx(28,20),e.YNc(29,ku,3,3,"mat-header-cell",13),e.YNc(30,Su,2,1,"mat-cell",14),e.BQk(),e.ynx(31,21),e.YNc(32,yu,3,3,"mat-header-cell",13),e.YNc(33,Ou,2,1,"mat-cell",14),e.BQk(),e.ynx(34,22),e.YNc(35,Lu,3,3,"mat-header-cell",7),e.YNc(36,Iu,4,2,"mat-cell",14),e.BQk(),e.ynx(37,23),e.YNc(38,Qu,3,3,"mat-header-cell",7),e.YNc(39,Fu,4,3,"mat-cell",16),e.BQk(),e.ynx(40,24),e.YNc(41,Hu,3,3,"mat-header-cell",7),e.YNc(42,$u,6,5,"mat-cell",16),e.BQk(),e.ynx(43,25),e.YNc(44,Bu,3,3,"mat-header-cell",26),e.YNc(45,Vu,2,1,"mat-cell",27),e.BQk(),e.ynx(46,28),e.YNc(47,Xu,3,3,"mat-header-cell",29),e.YNc(48,eg,5,4,"mat-cell",30),e.BQk(),e.YNc(49,tg,1,0,"mat-header-row",31),e.YNc(50,og,1,4,"mat-row",32),e.qZA()(),e.TgZ(51,"div",33),e.YNc(52,ng,3,0,"button",34),e.TgZ(53,"mat-paginator",35),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()(),e.TgZ(54,"div",1)(55,"app-prenotazioni-edit",36),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.Q6J("ngClass",e.VKq(16,ag,!t.dataReceived&&null==t.dialogRef)),e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(1),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.dataReceived?t.dataSource:t.data),e.xp6(43),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngClass",e.VKq(18,lg,null!=t.dialogRef)),e.xp6(1),e.Q6J("ngIf",null==t.dialogRef&&t.esportazionePrenotazioniEnabled),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("_prenotazione",t.prenotazione))},styles:[".totale[_ngcontent-%COMP%]{font-size:x-large;color:#e91e63}.mat-column-cliente-ragioneSociale[_ngcontent-%COMP%]{flex:0 0 25%}.cliente-email[_ngcontent-%COMP%]{font-size:small;font-style:italic}.cliente-checkin[_ngcontent-%COMP%], .richiesta-cancellazione[_ngcontent-%COMP%]{font-size:11px;font-style:italic;color:red}.mat-table[_ngcontent-%COMP%]{min-width:1500px!important}.codiceOTAGrid[_ngcontent-%COMP%]{font-size:x-small;font-style:italic}  .prenotazione-cancellata mat-cell{color:red!important}.scontoGrid[_ngcontent-%COMP%]{font-size:x-small;font-style:italic}.importoGrid[_ngcontent-%COMP%]{font-size:small;text-decoration:line-through}.totaleGrid[_ngcontent-%COMP%]{font-weight:700}"]});class Wi{constructor(){}}function rg(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneExtraArticoli.proprieta.articolo")))}function cg(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.articolo?null:t.articolo.nome)}}function sg(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneExtraArticoli.proprieta.quantita")))}function pg(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.quantita)}}function dg(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneExtraArticoli.proprieta.prezzo")))}function mg(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.prezzo))}}function _g(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneExtraArticoli.proprieta.sconto")))}function ug(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.sconto+"%")}}function gg(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneExtraArticoli.proprieta.totale")))}function hg(i,o){if(1&i&&(e.TgZ(0,"button",14)(1,"span",15),e._uU(2," info "),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("matTooltip",t.giorniString)}}function fg(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"span",12),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,hg,3,1,"button",13),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.totale)),e.xp6(2),e.Q6J("ngIf",!!t.giorniString)}}function Cg(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneExtra.proprieta.statoPrenotazione")))}function bg(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoPrenotazione,t.prenotazioneExtra.statoPrenotazione,"statoPrenotazione")))}}function vg(i,o){1&i&&e._UZ(0,"mat-header-row",16)}function Tg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",17),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Wi.\u0275fac=function(o){return new(o||Wi)},Wi.\u0275cmp=e.Xpm({type:Wi,selectors:[["app-collega-prenotazione-extra-modal"]],inputs:{dialogRef:"dialogRef"},decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"dialogRef"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"app-prenotazioni",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("dialogRef",t.dialogRef))},dependencies:[h.eB,F.aO,At]});class eo extends f.H{set _articoli(o){this.articoli=o,this.articoli.forEach(t=>{let n;try{n=JSON.parse(t.giorni)}catch(a){}if(null!=n){t.giorniString="";for(let a of n)t.giorniString+=u(a.data).format("DD/MM/YYYY")+": "+a.prezzo+"\u20ac\n"}})}constructor(){super(),this.displayedColumns=["articolo","quantita","prezzo","sconto","totale","statoPrenotazione"],this.enumStatoPrenotazione=c.gp}}function xg(i,o){if(1&i&&e._UZ(0,"span"),2&i){const t=e.oxw(3);e.Gre("mr-2 fi fi-",t.prenotazione.cliente.lingua.flagIcon,"")}}function Zg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",7)(1,"mat-card-title"),e.YNc(2,xg,1,3,"span",8),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editCliente())}),e.TgZ(7,"i",10),e._uU(8,"edit"),e.qZA()()(),e.TgZ(9,"div")(10,"span",11),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"div")(15,"span",11),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"div")(20,"span",11),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"div")(25,"span",11),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"div")(30,"span",11),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._uU(33),e.qZA(),e.TgZ(34,"div")(35,"span",11),e._uU(36),e.ALo(37,"translate"),e.qZA(),e._uU(38),e.qZA(),e.TgZ(39,"div")(40,"span",11),e._uU(41),e.ALo(42,"translate"),e.qZA(),e._uU(43),e.qZA(),e.TgZ(44,"div")(45,"span",11),e._uU(46),e.ALo(47,"translate"),e.qZA(),e._uU(48),e.qZA(),e.TgZ(49,"div")(50,"span",11),e._uU(51),e.ALo(52,"translate"),e.qZA(),e._uU(53),e.qZA(),e.TgZ(54,"div",12)(55,"mat-form-field",13)(56,"textarea",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.prenotazione.noteP=a)}),e.ALo(57,"translate"),e.qZA()()(),e.TgZ(58,"div",15)(59,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sendEmail())}),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sendSms())}),e._uU(63),e.ALo(64,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",null!=t.prenotazione.cliente.lingua&&!!t.prenotazione.cliente.lingua.flagIcon),e.xp6(2),e.Oqu(e.lcZ(5,27,"bo.prenotazioneExtra.proprieta.cliente")),e.xp6(7),e.Oqu(e.lcZ(12,29,"bo.cliente.proprieta.cognome")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.cognome?t.prenotazione.cliente.cognome:"---",""),e.xp6(3),e.Oqu(e.lcZ(17,31,"bo.cliente.proprieta.nome")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.nome?t.prenotazione.cliente.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(22,33,"bo.cliente.proprieta.email")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.email?t.prenotazione.cliente.email:"---",""),e.xp6(3),e.Oqu(e.lcZ(27,35,"bo.cliente.proprieta.cellulare")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.cellulare?t.prenotazione.cliente.cellulare:"---",""),e.xp6(3),e.Oqu(e.lcZ(32,37,"bo.cliente.proprieta.indirizzo")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.indirizzo?t.prenotazione.cliente.indirizzo:"---",""),e.xp6(3),e.Oqu(e.lcZ(37,39,"bo.cliente.proprieta.citta")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.citta?t.prenotazione.cliente.citta:"---",""),e.xp6(3),e.Oqu(e.lcZ(42,41,"bo.cliente.proprieta.cap")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.CAP?t.prenotazione.cliente.CAP:"---",""),e.xp6(3),e.Oqu(e.lcZ(47,43,"bo.cliente.proprieta.provincia")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.provincia?t.prenotazione.cliente.provincia:"---",""),e.xp6(3),e.Oqu(e.lcZ(52,45,"bo.cliente.proprieta.nazione")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.nazione?t.prenotazione.cliente.nazione:"---",""),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(1),e.Q6J("placeholder",e.lcZ(57,47,"bo.prenotazioneExtra.proprieta.noteP"))("ngModel",t.prenotazione.noteP),e.xp6(3),e.Q6J("disabled",!t.prenotazione.cliente.email),e.xp6(1),e.Oqu(e.lcZ(61,49,"sbm.prenotazioniExtra.inviaEmail")),e.xp6(2),e.Q6J("disabled",!t.prenotazione.cliente.cellulare),e.xp6(1),e.Oqu(e.lcZ(64,51,"sbm.prenotazioniExtra.inviaSms"))}}function Ag(i,o){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"app-prenotazione-extra-articoli",18),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("_articoli",t.articoli)}}function wg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.scollegaPrenotazione())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.prenotazioniExtra.scollegaPrenotazione")))}function zg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.collegaPrenotazione())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.prenotazioniExtra.collegaPrenotazione")))}function Mg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function qg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,Zg,65,53,"mat-card",1),e.YNc(2,Ag,2,1,"div",2),e.TgZ(3,"div",3),e.YNc(4,wg,3,3,"button",4),e.YNc(5,zg,3,3,"button",4),e.YNc(6,Mg,3,3,"button",5),e.TgZ(7,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backEvent.emit())}),e._uU(8),e.ALo(9,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione.cliente),e.xp6(1),e.Q6J("ngIf",null!=t.articoli&&t.articoli.length>0),e.xp6(2),e.Q6J("ngIf",null!=t.prenotazione.prenotazione),e.xp6(1),e.Q6J("ngIf",null==t.prenotazione.prenotazione),e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(2),e.Oqu(e.lcZ(9,6,"globals.indietro"))}}eo.\u0275fac=function(o){return new(o||eo)},eo.\u0275cmp=e.Xpm({type:eo,selectors:[["app-prenotazione-extra-articoli"]],inputs:{_articoli:"_articoli"},features:[e.qOj],decls:25,vars:7,consts:[[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","articolo"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","quantita"],["matColumnDef","prezzo"],["matColumnDef","sconto"],["matColumnDef","totale"],["matColumnDef","statoPrenotazione"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"d-inline-block","align-middle"],["mat-icon-button","","class","align-middle ml-2 info-button","matTooltipPosition","below","matTooltipClass","giorni-tooltip-class",3,"matTooltip",4,"ngIf"],["mat-icon-button","","matTooltipPosition","below","matTooltipClass","giorni-tooltip-class",1,"align-middle","ml-2","info-button",3,"matTooltip"],[1,"material-icons","info-icon"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"h5"),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",0)(4,"mat-table",1),e.ynx(5,2),e.YNc(6,rg,3,3,"mat-header-cell",3),e.YNc(7,cg,2,1,"mat-cell",4),e.BQk(),e.ynx(8,5),e.YNc(9,sg,3,3,"mat-header-cell",3),e.YNc(10,pg,2,1,"mat-cell",4),e.BQk(),e.ynx(11,6),e.YNc(12,dg,3,3,"mat-header-cell",3),e.YNc(13,mg,3,3,"mat-cell",4),e.BQk(),e.ynx(14,7),e.YNc(15,_g,3,3,"mat-header-cell",3),e.YNc(16,ug,2,1,"mat-cell",4),e.BQk(),e.ynx(17,8),e.YNc(18,gg,3,3,"mat-header-cell",3),e.YNc(19,fg,5,4,"mat-cell",4),e.BQk(),e.ynx(20,9),e.YNc(21,Cg,3,3,"mat-header-cell",3),e.YNc(22,bg,3,3,"mat-cell",4),e.BQk(),e.YNc(23,vg,1,0,"mat-header-row",10),e.YNc(24,Tg,1,1,"mat-row",11),e.qZA()()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,5,"sbm.prenotazioniExtra.articoli")),e.xp6(3),e.Q6J("dataSource",t.articoli),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,ke.f,z.X$],styles:[".giorni-tooltip-class{font-size:11px!important;white-space:pre!important;max-width:unset!important}.info-button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px;margin-bottom:1px}.info-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}"]});class to extends f.H{set _prenotazione(o){null!=o&&null!=o.prenotazione&&(this.prenotazione=o.prenotazione,this.articoli=o.articoli,null==this.prenotazione.dataVisualizzazione&&(this.setIsLoading(!0),this.apiService.impostaPrenotazioneExtraVisualizzata(this.prenotazione.oid).subscribe(()=>{this.navigationService.refreshContatoriMenu(),this.setIsLoading(!1)})))}constructor(o,t,n){super(),this.apiService=o,this.navigationService=t,this.sessionService=n,this.backEvent=new e.vpe}delete(o){this.showDialogConfirm("sbm.prenotazioniExtra.eliminarePrenotazioneExtra").then(t=>{null!=o&&(this.prenotazione=o),this.prenotazione.isDeleted=!0,this.setIsLoading(!0),this.apiService.setPrenotazioneExtra(this.prenotazione).subscribe(()=>{this.navigationService.refreshContatoriMenu(),this.backEvent.emit()})},t=>{})}sendEmail(){if(null!=this.prenotazione.cliente){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;n.cliente=this.prenotazione.cliente,n.dialogRef=t}}sendSms(){if(null!=this.prenotazione.cliente){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(ct,o),n=t.componentInstance;n.numero=this.prenotazione.cliente.cellulare,n.dialogRef=t}}editCliente(){let o;o=null==this.prenotazione.cliente?new v.c1h(-1):Object.assign({},this.prenotazione.cliente);let t=new d.Zpt;t.width="80vw";let n=this.showModalDialog(we.J,t),a=n.componentInstance;a.cliente=o,a.dialogRef=n,a.linguaDefault=this.sessionService.sessione.albergo.linguaDefaultClientePreventivo,n.afterClosed().subscribe(l=>{null!=l&&l.oid>0&&(this.prenotazione.cliente=l,this.setPrenotazioneExtra())})}setPrenotazioneExtra(){this.setIsLoading(!0),this.apiService.setPrenotazioneExtra(this.prenotazione).subscribe(()=>{this.setIsLoading(!1)})}collegaPrenotazione(){let o=new d.Zpt;o.width="90vw";let t=this.showModalDialog(Wi,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&(this.prenotazione.prenotazione=a,this.setPrenotazioneExtra())})}scollegaPrenotazione(){this.showDialogConfirm("globals.effettuareOperazione").then(()=>{this.prenotazione.prenotazione=null,this.setPrenotazioneExtra()},o=>{})}}function Pg(i,o){if(1&i&&(e.TgZ(0,"mat-option",53),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function kg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"div",35)(2,"div",36)(3,"mat-form-field",37)(4,"mat-label"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"mat-date-range-input",38),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(15);return e.KtG(a.open())}),e.TgZ(8,"input",39),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.filters[0].value=l.getDate(a.value):null)}),e.qZA(),e.TgZ(9,"input",40),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.onSearch(1,l.getDate(a.value)):null)}),e.qZA()(),e._UZ(10,"mat-datepicker-toggle",41),e.TgZ(11,"mat-datepicker-toggle",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.filters[0].value="",e.KtG(a.onSearch(1,""))}),e.TgZ(12,"mat-icon",43),e._uU(13,"clear"),e.qZA()(),e._UZ(14,"mat-date-range-picker",null,44),e.qZA()(),e.TgZ(16,"div",36)(17,"mat-form-field",37)(18,"input",45,46),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(19),l=e.oxw();return e.KtG(l.onSearch(2,a.value,!1))}),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"div",36)(22,"mat-form-field",37)(23,"input",47,48),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(24),l=e.oxw();return e.KtG(l.onSearch(3,a.value,!1))}),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"div",36)(27,"mat-form-field",37)(28,"mat-select",49,50),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.MAs(29),l=e.oxw();return e.KtG(l.onSearch(4,a.value))}),e.ALo(30,"translate"),e._UZ(31,"mat-option",51),e.YNc(32,Pg,3,4,"mat-option",52),e.ALo(33,"selectEnum"),e.qZA()()()()()}if(2&i){const t=e.MAs(15),n=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,12,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",t),e.xp6(1),e.Q6J("value",n.filters[0].value),e.xp6(1),e.Q6J("value",n.filters[1].value),e.xp6(1),e.Q6J("for",t),e.xp6(8),e.s9C("placeholder",e.lcZ(20,14,"bo.cliente.proprieta.email")),e.Q6J("value",n.filters[2].value),e.xp6(5),e.s9C("placeholder",e.lcZ(25,16,"bo.prenotazione.proprieta.codicePrenotazione")),e.Q6J("value",n.filters[3].value),e.xp6(5),e.s9C("placeholder",e.lcZ(30,18,"bo.prenotazione.proprieta.statoPrenotazione")),e.Q6J("value",n.filters[4].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(33,20,n.enumStatoPrenotazione,"statoPrenotazione"))}}function Sg(i,o){1&i&&(e.TgZ(0,"div",54)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.prenotazioniExtra.nessunaPrenotazioneExtra")))}function yg(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Jg(i,o){1&i&&(e.TgZ(0,"mat-cell",55)(1,"button",56)(2,"i",57),e._uU(3,"edit"),e.qZA()()())}function Eg(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazioneExtra.proprieta.codice"),""))}function Ng(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.prenotazione.oid)}}function Og(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazioneExtra.proprieta.portaleXAlbergo"),""))}function Lg(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.prenotazione.portaleXAlbergo?t.prenotazione.portaleXAlbergo.nome:"")}}function Dg(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazioneExtra.proprieta.data"),""))}function Ig(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.prenotazione.data,"dd/MM/yyyy"))}}function Qg(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.cliente"),""))}function Ug(i,o){if(1&i&&(e.TgZ(0,"div",60)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",61),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(null==t.prenotazione.cliente?null:t.prenotazione.cliente.ragioneSociale),e.xp6(2),e.Oqu(null==t.prenotazione.cliente?null:t.prenotazione.cliente.email)}}function Yg(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Ug,5,2,"div",59),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione.cliente)}}function Rg(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazione.proprieta.tipoCameraOTA"),""))}function Fg(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.prenotazione.prenotazione&&null!=t.prenotazione.prenotazione.tipoCameraOTA?t.prenotazione.prenotazione.tipoCameraOTA.descrizione:""," ")}}function Hg(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazione.proprieta.codicePrenotazione"),""))}function Kg(i,o){if(1&i&&(e.TgZ(0,"div",63),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("(ota: ",t.prenotazione.prenotazione.codiceOTA,")")}}function Gg(i,o){if(1&i&&(e.TgZ(0,"div",60)(1,"div"),e._uU(2),e.qZA(),e.YNc(3,Kg,2,1,"div",62),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.prenotazione.prenotazione.codicePrenotazione),e.xp6(1),e.Q6J("ngIf",!!t.prenotazione.prenotazione.codiceOTA)}}function $g(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Gg,4,2,"div",59),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione.prenotazione)}}function Bg(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazioneExtra.proprieta.statoPrenotazione"),""))}function Vg(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoPrenotazione,t.prenotazione.statoPrenotazione,"statoPrenotazione"))," ")}}function Xg(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazioneExtra.proprieta.modalitaPagamento"),""))}function jg(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.prenotazione.modalitaPagamento?t.prenotazione.modalitaPagamento.nome:"")}}function Wg(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazioneExtra.proprieta.indirizzoSpedizione"),""))}function e1(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",n.getIndirizzo(t.prenotazione)," ")}}function t1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",64),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazioneExtra.proprieta.totale"),""))}function i1(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"b",65),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.prenotazione.totale)," ")}}function o1(i,o){1&i&&e._UZ(0,"mat-header-cell")}function n1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",68),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.inviaMessaggio(l.prenotazione.prenotazione))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.inviaMessaggio")))}function a1(i,o){if(1&i&&(e.TgZ(0,"mat-cell",66),e.YNc(1,n1,3,3,"button",67),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione.prenotazione)}}function l1(i,o){1&i&&e._UZ(0,"mat-header-cell")}function r1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit;e.oxw();const r=e.MAs(55);return a.stopPropagation(),e.KtG(r.delete(l.prenotazione))}),e.TgZ(1,"i",72),e._uU(2,"delete"),e.qZA()()}}function c1(i,o){if(1&i&&(e.TgZ(0,"mat-cell",69),e.YNc(1,r1,3,0,"button",70),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function s1(i,o){1&i&&e._UZ(0,"mat-header-row",73)}to.\u0275fac=function(o){return new(o||to)(e.Y36(A.s),e.Y36(Ae.f),e.Y36(j.m))},to.\u0275cmp=e.Xpm({type:to,selectors:[["app-prenotazioni-extra-edit"]],inputs:{dataReceived:"dataReceived",_prenotazione:"_prenotazione"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["class","p-3 border rounded mat-elevation-z0",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"mt-3","text-right","float-right"],["mat-flat-button","","color","primary","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"p-3","border","rounded","mat-elevation-z0"],[3,"class",4,"ngIf"],["mat-icon-button","","color","primary",1,"align-middle","ml-2","mb-2","prenotazione-cliente-edit-button",3,"click"],[1,"material-icons","prenotazione-cliente-edit-icon"],[1,"font-weight-bold"],[1,"border","rounded","p-3","bg-white","mt-3","w-50"],[1,"w-100","note-textarea",3,"floatLabel"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"_articoli"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&e.YNc(0,qg,10,8,"div",0),2&o&&e.Q6J("ngIf",null!=t.prenotazione)},dependencies:[m.O5,h.eB,it.IC,M.v_,b.k0,qe.S$,qe.mi,_.Fj,_.JJ,_.On,eo,z.X$],styles:[".text-grey[_ngcontent-%COMP%]{color:#aaa!important}.material-icons[_ngcontent-%COMP%]{vertical-align:bottom!important;margin-right:5px!important}.icon-cliente[_ngcontent-%COMP%]{font-size:36px!important}.prenotazione-cliente-edit-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.prenotazione-cliente-edit-icon[_ngcontent-%COMP%]{font-size:20px}textarea[_ngcontent-%COMP%]{resize:none!important}textarea.mat-input-element[_ngcontent-%COMP%]{margin:0;padding:0}  .note-textarea .mat-form-field-underline{visibility:hidden!important}  .note-textarea .mat-form-field-wrapper{padding-bottom:0!important}"]});const p1=function(i){return{"font-weight-bold":i}};function d1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",74),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.prenotazione.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.prenotazione.oid?t.prenotazione.oid:"")("ngClass",e.VKq(2,p1,null==t.prenotazione.dataVisualizzazione))}}const m1=function(i){return{"p-3":i}};class wt extends f.H{set _data(o){null!=o&&(this.dataReceived=!0,this.data=o,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.tipoPrenotazione=c.Mn.ECommerce,this.dataReceived=!1,this.displayedColumns=["edit","oid","portaleXAlbergo.nome","data","cliente.ragioneSociale","prenotazione.tipoCameraOTA.descrizione","prenotazione.codicePrenotazione","statoPrenotazione","modalitaPagamento.nome","indirizzoSpedizione","totale","inviaMessaggio","delete"],this.pageSize=25,this.showTable=!0,this.enumStatoPrenotazione=c.gp,this.search=!1}ngOnInit(){this.rq=new d.k$g,this.rq.skip=0,this.rq.take=this.pageSize,this.sorting=new d.aQR("data",c.nI.Desc),this.dataReceived||(this.tipoPrenotazione==c.Mn.ECommerce&&(this.headerService.setTitle("sbm.prenotazioniExtra.title"),this.displayedColumns.splice(this.displayedColumns.indexOf("inviaMessaggio"),1)),this.filters=[],this.filters.push(new d.wn$("data",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("data",c.Hp.LowerEqual,this.getDate(this.oneMonthFromToday),c.NM.Date)),this.filters.push(new d.wn$("cliente.email",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$(["prenotazione.codicePrenotazione","prenotazione.codiceOTA"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("statoPrenotazione",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tipoPrenotazioneExtra",c.Hp.Equal,this.tipoPrenotazione.toString(),c.NM.Number)))}ngAfterViewInit(){null!=this.dataSource?(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort):this.download()}onSortChange(o){this.sorting.field=o.active,this.sorting.type="asc"==o.direction?c.nI.Asc:c.nI.Desc,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onSearch(o,t,n=!0){this.search=!n,this.filters[o].value=t,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}download(){this.dataReceived||(this.search||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[this.sorting],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPrenotazioniExtraAlbergoFilter(this.rq).subscribe(o=>{this.data=o.data,this.totalRecords=o.totalRecords,this.search?this.search=!1:this.setIsLoading(!1)}))}export(){this.setIsLoading(!0);let o=new d.k$g;o.sorting=[this.sorting],o.filters=this.utility.getFilters(this.filters),this.apiService.getPrenotazioniExtraAlbergoFilter(o).subscribe(t=>{this.utility.exportToCsv(t.data.map(n=>n.prenotazione),"PrenotazioniExtra",this.displayedColumns.slice(1,this.displayedColumns.length-2)),this.setIsLoading(!1)})}edit(o){this.prenotazione=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}getIndirizzo(o){let t="";return o.indirizzo&&(t+=o.indirizzo+" "),o.citta&&(t+=o.citta+" "),o.cap&&(t+=o.cap+" "),o.provincia&&(t+=o.provincia+" "),o.nazione&&(t+=o.nazione+" "),t}inviaMessaggio(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Zt,t),a=n.componentInstance;a.prenotazione=o,a.dialogRef=n}ngOnDestroy(){!this.dataReceived&&this.tipoPrenotazione==c.Mn.ECommerce&&this.headerService.clearTitle()}}function _1(i,o){if(1&i&&(e.TgZ(0,"mat-option",51),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function u1(i,o){if(1&i&&(e.ynx(0),e.YNc(1,_1,3,4,"mat-option",50),e.ALo(2,"translate"),e.BQk()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(11);e.xp6(1),e.Q6J("ngIf",!n.value||e.lcZ(2,1,t.value).toLowerCase().includes(n.value.toLowerCase()))}}function g1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.stopPropagation(),e.KtG(l.rq.oraDal=null)}),e.TgZ(1,"i",53),e._uU(2,"clear"),e.qZA()()}}function h1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.stopPropagation(),e.KtG(l.rq.oraAl=null)}),e.TgZ(1,"i",53),e._uU(2,"clear"),e.qZA()()}}function f1(i,o){if(1&i&&(e.TgZ(0,"mat-option",51),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function C1(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",27)(2,"div",28)(3,"div",29)(4,"app-view-select",30),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.oidPortaleXAlbergo=a.oid)}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",29)(7,"mat-form-field",31)(8,"mat-select",32),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.tipoOperazione=a)}),e.ALo(9,"translate"),e._UZ(10,"app-select-search",null,33)(12,"mat-option",34),e.YNc(13,u1,3,3,"ng-container",35),e.ALo(14,"selectEnum"),e.qZA()()(),e.TgZ(15,"div",29)(16,"div",28)(17,"div",36)(18,"mat-form-field",31)(19,"input",37),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.dal=a)}),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"mat-datepicker-toggle",38)(22,"mat-datepicker",null,39),e.qZA()(),e.TgZ(24,"div",40)(25,"mat-form-field",31)(26,"input",41),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.oraDal=a)}),e.qZA(),e.YNc(27,g1,3,0,"button",42),e.qZA()()()(),e.TgZ(28,"div",29)(29,"div",28)(30,"div",36)(31,"mat-form-field",31)(32,"input",37),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.al=a)}),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"mat-datepicker-toggle",38)(35,"mat-datepicker",null,43),e.qZA()(),e.TgZ(37,"div",40)(38,"mat-form-field",31)(39,"input",41),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.oraAl=a)}),e.qZA(),e.YNc(40,h1,3,0,"button",42),e.qZA()()()()(),e.TgZ(41,"div",28)(42,"div",29)(43,"mat-form-field",31)(44,"mat-select",32),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.tipoEsito=a)}),e.ALo(45,"translate"),e._UZ(46,"mat-option",34),e.YNc(47,f1,3,4,"mat-option",44),e.ALo(48,"selectEnum"),e.qZA()()(),e.TgZ(49,"div",29)(50,"mat-form-field",31)(51,"input",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.codiciPrenotazione=a)}),e.ALo(52,"translate"),e.qZA()()(),e.TgZ(53,"div",29)(54,"mat-checkbox",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.hasPrenotazioni=a)}),e._uU(55),e.ALo(56,"translate"),e.qZA()(),e.TgZ(57,"div",29)(58,"mat-checkbox",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.hasErrori=a)}),e._uU(59),e.ALo(60,"translate"),e.qZA()()(),e.TgZ(61,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearchClick())}),e.TgZ(62,"span",48),e._uU(63,"search"),e.qZA(),e.TgZ(64,"span",49),e._uU(65),e.ALo(66,"translate"),e.qZA()()(),e.BQk()}if(2&i){const t=e.MAs(23),n=e.MAs(36),a=e.oxw();e.xp6(4),e.Q6J("dataLoader",a.apiService.getPortaliXAlbergoViewSelect())("placeholder",e.lcZ(5,27,"bo.logOperazionePortaleXAlbergo.proprieta.portale")),e.xp6(4),e.s9C("placeholder",e.lcZ(9,29,"bo.logOperazionePortaleXAlbergo.proprieta.operazione")),e.Q6J("ngModel",a.rq.tipoOperazione),e.xp6(5),e.Q6J("ngForOf",e.xi3(14,31,a.enumTipoOperazionePortaleXAlbergo,"tipoOperazionePortaleXAlbergo")),e.xp6(6),e.s9C("placeholder",e.lcZ(20,34,"globals.dal")),e.Q6J("matDatepicker",t)("ngModel",a.rq.dal),e.xp6(2),e.Q6J("for",t),e.xp6(5),e.Q6J("ngModel",a.rq.oraDal),e.xp6(1),e.Q6J("ngIf",!!a.rq.oraDal),e.xp6(5),e.s9C("placeholder",e.lcZ(33,36,"globals.al")),e.Q6J("matDatepicker",n)("ngModel",a.rq.al),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.Q6J("ngModel",a.rq.oraAl),e.xp6(1),e.Q6J("ngIf",!!a.rq.oraAl),e.xp6(4),e.s9C("placeholder",e.lcZ(45,38,"bo.logOperazionePortaleXAlbergo.proprieta.esito")),e.Q6J("ngModel",a.rq.tipoEsito),e.xp6(3),e.Q6J("ngForOf",e.xi3(48,40,a.enumTipoEsitoPortaleXAlbergo,"tipoEsitoOperazionePortaleXAlbergo")),e.xp6(4),e.Q6J("placeholder",e.lcZ(52,43,"bo.logOperazionePortaleXAlbergo.proprieta.codiciPrenotazione"))("ngModel",a.rq.codiciPrenotazione),e.xp6(3),e.Q6J("ngModel",a.rq.hasPrenotazioni),e.xp6(1),e.hij(" ",e.lcZ(56,45,"sbm.log.operazioni.operazioniConPrenotazioni")," "),e.xp6(3),e.Q6J("ngModel",a.rq.hasErrori),e.xp6(1),e.hij(" ",e.lcZ(60,47,"sbm.log.operazioni.logConErrore")," "),e.xp6(6),e.Oqu(e.lcZ(66,49,"globals.ricerca"))}}function b1(i,o){1&i&&(e.TgZ(0,"div",54)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.log.operazioni.nessunaOperazione")))}function v1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.logOperazionePortaleXAlbergo.proprieta.data"),""))}function T1(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy HH:mm:ss"))}}function x1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logOperazionePortaleXAlbergo.proprieta.portale")))}function Z1(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56)(2,"div"),e._uU(3),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.nomePortale)}}function A1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logOperazionePortaleXAlbergo.proprieta.operazione")))}function w1(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizioneTipoOperazione)}}function z1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logOperazionePortaleXAlbergo.proprieta.esito")))}function M1(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizioneEsito)}}function q1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logOperazionePortaleXAlbergo.proprieta.codiciPrenotazione")))}function P1(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codiciPrenotazione)}}function k1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logOperazionePortaleXAlbergo.proprieta.warnings")))}function S1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"textarea",57),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.warnings=a)}),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngModel",t.warnings)}}function y1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logOperazionePortaleXAlbergo.proprieta.errori")))}function J1(i,o){1&i&&(e.TgZ(0,"i",60),e._uU(1,"error"),e.qZA())}function E1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"textarea",57),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.errori=a)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.errori)}}function N1(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,J1,2,0,"i",58),e.YNc(2,E1,1,1,"textarea",59),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf","SI"==t.errori),e.xp6(1),e.Q6J("ngIf","SI"!=t.errori)}}function O1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logOperazionePortaleXAlbergo.proprieta.durataEsecuzione")))}function L1(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.durataEsecuzione,"1.0-1"))}}function D1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logOperazionePortaleXAlbergo.proprieta.userHostAddress")))}function I1(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.userHostAddress)}}function Q1(i,o){1&i&&e._UZ(0,"mat-header-cell")}function U1(i,o){1&i&&(e.TgZ(0,"mat-cell",61)(1,"button",62)(2,"i",63),e._uU(3,"remove_red_eye"),e.qZA()()())}function Y1(i,o){1&i&&e._UZ(0,"mat-header-row",64)}function R1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",65),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.viewDetails(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}wt.\u0275fac=function(o){return new(o||wt)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},wt.\u0275cmp=e.Xpm({type:wt,selectors:[["app-prenotazioni-extra"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{_data:"_data",tipoPrenotazione:"tipoPrenotazione"},features:[e.qOj],decls:56,vars:17,consts:[[3,"ngClass"],[3,"hidden"],["class","filter",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"mat-table-container"],["matSort","","matSortActive","data","mmatSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","oid"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","portaleXAlbergo.nome"],["matColumnDef","data"],["matColumnDef","cliente.ragioneSociale"],["matColumnDef","prenotazione.tipoCameraOTA.descrizione"],["matColumnDef","prenotazione.codicePrenotazione"],["matColumnDef","statoPrenotazione"],["matColumnDef","modalitaPagamento.nome"],["matColumnDef","indirizzoSpedizione"],["matColumnDef","totale"],["mat-sort-header","","class","justify-content-end",4,"matHeaderCellDef"],["matColumnDef","inviaMessaggio"],["class","justify-content-end",4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","ngClass","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[3,"_prenotazione","dataReceived","backEvent"],["editComponent",""],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"value","dateChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["picker",""],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["emailSearch",""],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["codicePrenotazioneSearch",""],[3,"placeholder","value","selectionChange"],["statoPrenotazioneSelect",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],["class","d-flex flex-column",4,"ngIf"],[1,"d-flex","flex-column"],[1,"cliente-email"],["class","codiceOTAGrid",4,"ngIf"],[1,"codiceOTAGrid"],["mat-sort-header","",1,"justify-content-end"],[1,"w-100","pr-3","text-right"],[1,"justify-content-end"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","ngClass","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,kg,34,23,"div",2),e.YNc(3,Sg,4,3,"div",3),e.TgZ(4,"div",1)(5,"div",4)(6,"mat-table",5),e.NdJ("matSortChange",function(a){return t.onSortChange(a)}),e.ynx(7,6),e.YNc(8,yg,1,0,"mat-header-cell",7),e.YNc(9,Jg,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,Eg,3,3,"mat-header-cell",10),e.YNc(12,Ng,2,1,"mat-cell",11),e.BQk(),e.ynx(13,12),e.YNc(14,Og,3,3,"mat-header-cell",10),e.YNc(15,Lg,2,1,"mat-cell",11),e.BQk(),e.ynx(16,13),e.YNc(17,Dg,3,3,"mat-header-cell",10),e.YNc(18,Ig,3,4,"mat-cell",11),e.BQk(),e.ynx(19,14),e.YNc(20,Qg,3,3,"mat-header-cell",10),e.YNc(21,Yg,2,1,"mat-cell",11),e.BQk(),e.ynx(22,15),e.YNc(23,Rg,3,3,"mat-header-cell",10),e.YNc(24,Fg,2,1,"mat-cell",11),e.BQk(),e.ynx(25,16),e.YNc(26,Hg,3,3,"mat-header-cell",10),e.YNc(27,$g,2,1,"mat-cell",11),e.BQk(),e.ynx(28,17),e.YNc(29,Bg,3,3,"mat-header-cell",10),e.YNc(30,Vg,3,3,"mat-cell",11),e.BQk(),e.ynx(31,18),e.YNc(32,Xg,3,3,"mat-header-cell",10),e.YNc(33,jg,2,1,"mat-cell",11),e.BQk(),e.ynx(34,19),e.YNc(35,Wg,3,3,"mat-header-cell",7),e.YNc(36,e1,2,1,"mat-cell",11),e.BQk(),e.ynx(37,20),e.YNc(38,t1,3,3,"mat-header-cell",21),e.YNc(39,i1,4,3,"mat-cell",11),e.BQk(),e.ynx(40,22),e.YNc(41,o1,1,0,"mat-header-cell",7),e.YNc(42,a1,2,1,"mat-cell",23),e.BQk(),e.ynx(43,24),e.YNc(44,l1,1,0,"mat-header-cell",7),e.YNc(45,c1,2,1,"mat-cell",25),e.BQk(),e.YNc(46,s1,1,0,"mat-header-row",26),e.YNc(47,d1,1,4,"mat-row",27),e.qZA()(),e.TgZ(48,"div",28)(49,"button",29),e.NdJ("click",function(){return t.export()}),e.TgZ(50,"i",30),e._uU(51,"get_app"),e.qZA()(),e.TgZ(52,"mat-paginator",31),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()(),e.TgZ(53,"div",1)(54,"app-prenotazioni-extra-edit",32,33),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.Q6J("ngClass",e.VKq(15,m1,!t.dataReceived)),e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(1),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.dataReceived?t.dataSource:t.data),e.xp6(40),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("_prenotazione",t.prenotazione)("dataReceived",t.dataReceived))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,M.$V,M.nX,b.k0,re.CK,y.nW,y.Q0,y.wx,y.zY,y.By,y._g,g.x8,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,to,m.uU,Te.A,ke.f,z.X$],styles:[".mat-column-cliente-ragioneSociale[_ngcontent-%COMP%]{flex:0 0 250px}.mat-column-inviaMessaggio[_ngcontent-%COMP%]{flex:0 0 200px}.cliente-email[_ngcontent-%COMP%]{font-size:small;font-style:italic}.codiceOTAGrid[_ngcontent-%COMP%]{font-size:x-small;font-style:italic}"]});const F1=function(i){return{"p-3":i}};class ei extends f.H{set _data(o){null!=o&&(this.dataReceived=!0,this.data=o,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.sessionService=a,this.utility=l,this.displayedColumns=["data","nomePortale","descrizioneTipoOperazione","descrizioneEsito","codiciPrenotazione","warnings","errori","durataEsecuzione","userHostAddress","view"],this.rq=new d.aS7,this.pageSize=25,this.dataReceived=!1,this.enumTipoOperazionePortaleXAlbergo=c.SV,this.enumTipoEsitoPortaleXAlbergo=c.ky}ngOnInit(){this.dataReceived||this.headerService.setTitle("sbm.log.operazioni.title"),this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.rq.dal=this.getDate(this.oneMonthBeforeToday),this.rq.al=this.getDate(this.today),this.rq.skip=0,this.rq.take=this.pageSize,this.rq.sorting="data",this.rq.sortingType=c.nI.Desc}ngAfterViewInit(){null!=this.dataSource?(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort):this.download()}onSortChange(o){null!=o&&o.active&&o.direction?(this.rq.sorting=o.active,this.rq.sortingType="asc"==o.direction?c.nI.Asc:c.nI.Desc):this.rq.sorting=null,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.dataReceived||this.containerService.scrollToTop()}onSearchClick(){0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}download(){this.dataReceived||(this.setIsLoading(!0),this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.apiService.getLogOperazioni(this.rq).subscribe(o=>{this.data=o.data,this.totalRecords=o.totalRecords,this.setIsLoading(!1)}))}viewDetails(o){let t=new d.Zpt;t.width="80vw",this.showModalDialog(jt,t).componentInstance.logOperazione=o}export(){this.setIsLoading(!0);let o=JSON.parse(JSON.stringify(this.rq));o.skip=0,o.take=0,this.apiService.getLogOperazioni(o).subscribe(t=>{this.utility.exportToCsv(t.data,"LogOperazioni",this.displayedColumns.slice(0,this.displayedColumns.length-1)),this.setIsLoading(!1)})}ngOnDestroy(){this.dataReceived||this.headerService.clearTitle()}}function H1(i,o){if(1&i&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function K1(i,o){if(1&i&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function G1(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",34)(2,"div",35)(3,"div",36)(4,"mat-form-field",37)(5,"input",38),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.pubblicataDal=a)}),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-datepicker-toggle",39)(8,"mat-datepicker",null,40),e.qZA()(),e.TgZ(10,"div",36)(11,"mat-form-field",37)(12,"input",38),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.pubblicataAl=a)}),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"mat-datepicker-toggle",39)(15,"mat-datepicker",null,41),e.qZA()(),e.TgZ(17,"div",36)(18,"mat-form-field",37)(19,"input",38),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.dal=a)}),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"mat-datepicker-toggle",39)(22,"mat-datepicker",null,42),e.qZA()(),e.TgZ(24,"div",36)(25,"mat-form-field",37)(26,"input",38),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.al=a)}),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"mat-datepicker-toggle",39)(29,"mat-datepicker",null,43),e.qZA()()(),e.TgZ(31,"div",35)(32,"div",44)(33,"app-view-select",45),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.portale=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPortaleChanged())}),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",44)(36,"mat-form-field",37)(37,"mat-select",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.oidTipoCameraOTA=a)}),e.ALo(38,"translate"),e._UZ(39,"mat-option",47),e.YNc(40,H1,2,2,"mat-option",48),e.qZA()()(),e.TgZ(41,"div",44)(42,"mat-form-field",37)(43,"mat-select",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.oidTariffaOTA=a)}),e.ALo(44,"translate"),e._UZ(45,"mat-option",47),e.YNc(46,K1,2,2,"mat-option",48),e.qZA()()()(),e.TgZ(47,"button",49),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearchClick())}),e.TgZ(48,"span",50),e._uU(49,"search"),e.qZA(),e.TgZ(50,"span",51),e._uU(51),e.ALo(52,"translate"),e.qZA()()(),e.BQk()}if(2&i){const t=e.MAs(9),n=e.MAs(16),a=e.MAs(23),l=e.MAs(30),r=e.oxw();e.xp6(5),e.s9C("placeholder",e.lcZ(6,26,"sbm.log.disponibilitaPubblicate.pubblicataDal")),e.Q6J("matDatepicker",t)("ngModel",r.rq.pubblicataDal),e.xp6(2),e.Q6J("for",t),e.xp6(5),e.s9C("placeholder",e.lcZ(13,28,"sbm.log.disponibilitaPubblicate.pubblicataAl")),e.Q6J("matDatepicker",n)("ngModel",r.rq.pubblicataAl),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(20,30,"globals.dal")),e.Q6J("matDatepicker",a)("ngModel",r.rq.dal),e.xp6(2),e.Q6J("for",a),e.xp6(5),e.s9C("placeholder",e.lcZ(27,32,"globals.al")),e.Q6J("matDatepicker",l)("ngModel",r.rq.al),e.xp6(2),e.Q6J("for",l),e.xp6(5),e.Q6J("dataLoader",r.apiService.getPortaliXAlbergoViewSelect(null,!1))("value",r.portale)("placeholder",e.lcZ(34,34,"bo.logDisponibilitaPortaleXAlbergo.proprieta.portale")),e.xp6(4),e.s9C("placeholder",e.lcZ(38,36,"bo.logDisponibilitaPortaleXAlbergo.proprieta.tipoCamera")),e.Q6J("ngModel",r.rq.oidTipoCameraOTA),e.xp6(3),e.Q6J("ngForOf",r.tipiCamere),e.xp6(3),e.s9C("placeholder",e.lcZ(44,38,"bo.logDisponibilitaPortaleXAlbergo.proprieta.tariffa")),e.Q6J("ngModel",r.rq.oidTariffaOTA),e.xp6(3),e.Q6J("ngForOf",r.tariffe),e.xp6(5),e.Oqu(e.lcZ(52,40,"globals.ricerca"))}}function $1(i,o){1&i&&(e.TgZ(0,"div",53)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.log.disponibilitaPubblicate.nessunaDisponibilitaPubblicata")))}function B1(i,o){1&i&&e._UZ(0,"mat-header-cell")}function V1(i,o){1&i&&(e.TgZ(0,"mat-cell",54)(1,"button",55)(2,"i",56),e._uU(3,"more_vert"),e.qZA()()())}function X1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.dataPubblicazione")))}function j1(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataPubblicazione,"dd/MM/yyyy HH:mm:ss"))}}function W1(i,o){1&i&&(e.TgZ(0,"mat-header-cell",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.portale")))}function eh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nomePortaleXAlbergo)}}function th(i,o){1&i&&(e.TgZ(0,"mat-header-cell",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.giorno")))}function ih(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.giorno,"dd/MM/yyyy"))}}function oh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.tipoCamera")))}function nh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizioneTipoCameraOTA)}}function ah(i,o){1&i&&(e.TgZ(0,"mat-header-cell",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.tariffa")))}function lh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizioneTariffaOTA)}}function rh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.disponibili")))}function ch(i,o){if(1&i&&(e.TgZ(0,"mat-cell",59),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Udp("background-color",t.statoPortaleXAlbergo==n.enumStatoPortaleXAlbergo.Aperto?"#67d9a4":"#ff7a7a"),e.xp6(1),e.Oqu(t.disponibili)}}function sh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.prezzo")," "))}function ph(i,o){if(1&i&&(e.TgZ(0,"mat-cell",60),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.prezzo)," ")}}function dh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.statoCta")))}function mh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoCtaCtd,t.statoCta,"statoCtaCtd"))," ")}}function _h(i,o){1&i&&(e.TgZ(0,"mat-header-cell",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.statoCtd")))}function uh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoCtaCtd,t.statoCtd,"statoCtaCtd"))," ")}}function gh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.durataMinimaSoggiorno")))}function hh(i,o){if(1&i&&(e.TgZ(0,"mat-cell",60),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMinimaSoggiorno)}}function fh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.statoPortaleXAlbergo")))}function Ch(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoPortaleXAlbergo,t.statoPortaleXAlbergo,"statoPortaleXAlbergo"))," ")}}function bh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logDisponibilitaPortaleXAlbergo.proprieta.tipoModifica")))}function vh(i,o){if(1&i&&(e.TgZ(0,"mat-cell",61)(1,"div",37),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",62),e._uU(5),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,n.getEnumKeyTranslation(n.enumTipoModificaDisponibilitaXPortaleXAlbergo,t.tipoModifica,"tipoModificaDisponibilitaXPortaleXAlbergo"))),e.xp6(3),e.Oqu(t.proprietaModificata)}}function Th(i,o){1&i&&e._UZ(0,"mat-header-row",63)}function xh(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",64),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.openDetails(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}ei.\u0275fac=function(o){return new(o||ei)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(j.m),e.Y36(C.t))},ei.\u0275cmp=e.Xpm({type:ei,selectors:[["app-operazioni"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{_data:"_data"},features:[e.qOj],decls:45,vars:13,consts:[[3,"ngClass"],[1,"div-help","mb-3"],[4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","data","matSortDirection","desc",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nomePortale"],["matColumnDef","descrizioneTipoOperazione"],["matColumnDef","descrizioneEsito"],["matColumnDef","codiciPrenotazione"],["matColumnDef","warnings"],["matColumnDef","errori"],["matColumnDef","durataEsecuzione"],["matColumnDef","userHostAddress"],["matColumnDef","view"],[4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[1,"filter"],[1,"row"],[1,"col-3"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"w-100"],[3,"placeholder","ngModel","ngModelChange"],["selectSearch",""],["value",""],[4,"ngFor","ngForOf"],[1,"col-8"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["datePickerDal",""],[1,"col-4"],["autocompleteOff","","type","time","matInput","",3,"ngModel","ngModelChange"],["matSuffix","","mat-icon-button","","color","primary",3,"click",4,"ngIf"],["datePickerAl",""],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons","d-inline-block","align-middle","mr-1"],[1,"d-inline-block","align-middle"],[3,"value",4,"ngIf"],[3,"value"],["matSuffix","","mat-icon-button","","color","primary",3,"click"],[1,"material-icons","clear-icon"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-sort-header",""],[1,"d-flex","flex-column"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","4","readonly","","disabled","",3,"ngModel","ngModelChange"],["class","material-icons-round",4,"ngIf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","4","readonly","","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"material-icons-round"],[1,"mat-td-delete"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," NB: i log sulle operazioni vengono conservati per 15 gg "),e.qZA(),e.YNc(3,C1,67,51,"ng-container",2),e.YNc(4,b1,4,3,"div",3),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-table",6),e.NdJ("matSortChange",function(a){return t.onSortChange(a)}),e.ynx(8,7),e.YNc(9,v1,3,3,"mat-header-cell",8),e.YNc(10,T1,3,4,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,x1,3,3,"mat-header-cell",8),e.YNc(13,Z1,4,1,"mat-cell",9),e.BQk(),e.ynx(14,11),e.YNc(15,A1,3,3,"mat-header-cell",8),e.YNc(16,w1,2,1,"mat-cell",9),e.BQk(),e.ynx(17,12),e.YNc(18,z1,3,3,"mat-header-cell",8),e.YNc(19,M1,2,1,"mat-cell",9),e.BQk(),e.ynx(20,13),e.YNc(21,q1,3,3,"mat-header-cell",8),e.YNc(22,P1,2,1,"mat-cell",9),e.BQk(),e.ynx(23,14),e.YNc(24,k1,3,3,"mat-header-cell",8),e.YNc(25,S1,2,1,"mat-cell",9),e.BQk(),e.ynx(26,15),e.YNc(27,y1,3,3,"mat-header-cell",8),e.YNc(28,N1,3,2,"mat-cell",9),e.BQk(),e.ynx(29,16),e.YNc(30,O1,3,3,"mat-header-cell",8),e.YNc(31,L1,3,4,"mat-cell",9),e.BQk(),e.ynx(32,17),e.YNc(33,D1,3,3,"mat-header-cell",8),e.YNc(34,I1,2,1,"mat-cell",9),e.BQk(),e.ynx(35,18),e.YNc(36,Q1,1,0,"mat-header-cell",19),e.YNc(37,U1,4,0,"mat-cell",20),e.BQk(),e.YNc(38,Y1,1,0,"mat-header-row",21),e.YNc(39,R1,1,1,"mat-row",22),e.qZA()(),e.TgZ(40,"div",23)(41,"button",24),e.NdJ("click",function(){return t.export()}),e.TgZ(42,"i",25),e._uU(43,"get_app"),e.qZA()(),e.TgZ(44,"mat-paginator",26),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()()),2&o&&(e.Q6J("ngClass",e.VKq(11,F1,!t.dataReceived)),e.xp6(3),e.Q6J("ngIf",!t.dataReceived),e.xp6(1),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.dataReceived?t.dataSource:t.data),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,it.IC,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,_.Fj,_.JJ,_.On,ne.d,R,m.JJ,m.uU,Te.A,z.X$],styles:["textarea.mat-input-element[_ngcontent-%COMP%]{margin:0;padding:0}textarea[_ngcontent-%COMP%]:disabled{color:#000000de!important}.mat-column-descrizioneTipoOperazione[_ngcontent-%COMP%]{flex:0 0 25%}.mat-column-data[_ngcontent-%COMP%]{flex:0 0 200px}.clear-icon[_ngcontent-%COMP%]{font-size:16px}"]});const Zh=function(i){return{"p-3":i}};class ti extends f.H{set _data(o){null!=o&&(this.dataReceived=!0,this.data=o,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.sessionService=a,this.utility=l,this.displayedColumns=["details","dataPubblicazione","nomePortaleXAlbergo","giorno","descrizioneTipoCameraOTA","descrizioneTariffaOTA","disponibili","prezzo","statoCta","statoCtd","durataMinimaSoggiorno","statoPortaleXAlbergo","tipoModifica"],this.rq=new d.XfX,this.tipiCamere=[],this.tariffe=[],this.portale=new v.$Ys,this.dataReceived=!1,this.pageSize=25,this.enumStatoCtaCtd=c.L5,this.enumStatoPortaleXAlbergo=c.V6,this.enumTipoModificaDisponibilitaXPortaleXAlbergo=c.dn}ngOnInit(){this.dataReceived||this.headerService.setTitle("sbm.log.disponibilitaPubblicate.title"),this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.rq.pubblicataDal=this.getDate(this.today),this.rq.pubblicataAl=this.getDate(this.today),this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.today),this.rq.skip=0,this.rq.take=this.pageSize,this.rq.sorting="dataPubblicazione",this.rq.sortingType=c.nI.Desc}ngAfterViewInit(){null!=this.dataSource?(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort):(this.setIsLoading(!0),this.apiService.getPortaliXAlbergoViewSelect(null,!1).subscribe(o=>{o.data.length>0?(this.portale=o.data[0],this.onPortaleChanged(),this.download()):this.download()}))}onSortChange(o){null!=o&&o.active&&o.direction?(this.rq.sorting=o.active,this.rq.sortingType="asc"==o.direction?c.nI.Asc:c.nI.Desc):this.rq.sorting=null,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.dataReceived||this.containerService.scrollToTop()}onSearchClick(){0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}download(){this.dataReceived||(this.setIsLoading(!0),this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.rq.pubblicataDal=this.getDate(this.rq.pubblicataDal),this.rq.pubblicataAl=this.getDate(this.rq.pubblicataAl),this.apiService.getLogDisponibilita(this.rq).subscribe(o=>{this.data=o.data,this.totalRecords=o.totalRecords,this.setIsLoading(!1)}))}onPortaleChanged(){this.rq.oidTipoCameraOTA=null,this.rq.oidTariffaOTA=null,this.apiService.getTipiCameraOTA(this.portale.oid).subscribe(o=>{this.tipiCamere=o.data}),this.apiService.getTariffeOTA(this.portale.oid).subscribe(o=>{this.tariffe=o.data}),this.rq.oidPortaleXAlbergo=this.portale.oid}openDetails(o){let t=new d.Zpt;t.width="80vw",this.showModalDialog(Xt,t).componentInstance.log=o}export(){this.setIsLoading(!0);let o=JSON.parse(JSON.stringify(this.rq));o.skip=0,o.take=0,this.apiService.getLogDisponibilita(o).subscribe(t=>{this.utility.exportToCsv(t.data,"LogDisponibilita",this.displayedColumns.slice(1)),this.setIsLoading(!1)})}ngOnDestroy(){this.dataReceived||this.headerService.clearTitle()}}function Ah(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"app-view-select",27),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(0,-1==a.oid?"":a.oid.toString()))}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",26)(6,"mat-form-field",28)(7,"input",29,30),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(8),l=e.oxw();return e.KtG(l.onSearch(1,a.value,!1))}),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",31)(11,"mat-form-field",28)(12,"input",29,32),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(13),l=e.oxw();return e.KtG(l.onSearch(2,a.value,!1))}),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"div",31)(16,"mat-form-field",28)(17,"input",29,33),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(18),l=e.oxw();return e.KtG(l.onSearch(3,a.value,!1))}),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",34)(21,"span",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showFilterAdv=!a.showFilterAdv)}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showFilterAdv=!a.showFilterAdv)}),e.TgZ(25,"mat-icon"),e._uU(26,"keyboard_arrow_down"),e.qZA()()()(),e.TgZ(27,"div",37)(28,"div",38)(29,"div",39)(30,"mat-form-field",28)(31,"mat-label"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-date-range-input",40),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(42);return e.KtG(a.open())}),e.TgZ(35,"input",41),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.filters[4].value=l.getDate(a.value):null)}),e.qZA(),e.TgZ(36,"input",42),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.onSearch(5,l.getDate(a.value)):null)}),e.qZA()(),e._UZ(37,"mat-datepicker-toggle",43),e.TgZ(38,"mat-datepicker-toggle",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.filters[4].value="",e.KtG(a.onSearch(5,""))}),e.TgZ(39,"mat-icon",45),e._uU(40,"clear"),e.qZA()(),e._UZ(41,"mat-date-range-picker",null,46),e.qZA()(),e.TgZ(43,"div",39)(44,"mat-form-field",28)(45,"input",29,47),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(46),l=e.oxw();return e.KtG(l.onSearch(6,a.value,!1))}),e.ALo(47,"translate"),e.qZA()()()()()()}if(2&i){const t=e.MAs(42),n=e.oxw();e.xp6(3),e.Q6J("dataLoader",n.apiService.getPortaliXAlbergoViewSelect())("placeholder",e.lcZ(4,17,"bo.notificaEmail.proprieta.portaleXAlbergo")),e.xp6(4),e.s9C("placeholder",e.lcZ(9,19,"bo.notificaEmail.proprieta.emailTo")),e.Q6J("value",n.filters[1].value),e.xp6(5),e.s9C("placeholder",e.lcZ(14,21,"bo.notificaEmail.proprieta.codiceOTAPrenotazione")),e.Q6J("value",n.filters[2].value),e.xp6(5),e.s9C("placeholder",e.lcZ(19,23,"bo.notificaEmail.proprieta.codicePreventivo")),e.Q6J("value",n.filters[3].value),e.xp6(5),e.Oqu(e.lcZ(23,25,"globals.filtriAvanzati")),e.xp6(5),e.Q6J("hidden",!n.showFilterAdv),e.xp6(5),e.Oqu(e.lcZ(33,27,"bo.notificaEmail.proprieta.dataInvio")),e.xp6(2),e.Q6J("rangePicker",t),e.xp6(1),e.Q6J("value",n.filters[4].value),e.xp6(1),e.Q6J("value",n.filters[5].value),e.xp6(1),e.Q6J("for",t),e.xp6(8),e.s9C("placeholder",e.lcZ(47,29,"bo.notificaEmail.proprieta.oggetto")),e.Q6J("value",n.filters[6].value)}}function wh(i,o){1&i&&(e.TgZ(0,"div",48)(1,"h4",49),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.notificheEmail.nessunaNotificaEmail")))}function zh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.notificaEmail.proprieta.portaleXAlbergo"),""))}function Mh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.portaleXAlbergo?t.portaleXAlbergo.nome:""," ")}}function qh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.notificaEmail.proprieta.dataInvio"),""))}function Ph(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataInvio,"dd/MM/yyyy HH:mm:ss"))}}function kh(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.notificaEmail.proprieta.codice"),""))}function Sh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.codiceOTAPrenotazione?t.codiceOTAPrenotazione:t.codicePreventivo," ")}}function yh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.notificaEmail.proprieta.emailTo"),""))}function Jh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.emailTo)}}function Eh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.notificaEmail.proprieta.oggetto"),""))}function Nh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.oggetto)}}function Oh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.notificaEmail.proprieta.allegati"),""))}function Lh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.allegati)}}function Dh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.notificaEmail.proprieta.accountMail"),""))}function Ih(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nomeAccountMail)}}function Qh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.notificaEmail.proprieta.workFlow"),""))}function Uh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.workFlow)}}function Yh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",51),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.notificaEmail.proprieta.urlHtml"),""))}function Rh(i,o){1&i&&(e.TgZ(0,"button",53)(1,"i",54),e._uU(2,"visibility"),e.qZA()())}function Fh(i,o){if(1&i&&(e.TgZ(0,"mat-cell",51),e.YNc(1,Rh,3,0,"button",52),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlHtml)}}function Hh(i,o){1&i&&e._UZ(0,"mat-header-row",55)}function Kh(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",56),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)&&r.urlHtml?p.utility.openUrlInNewTab(r.urlHtml):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}ti.\u0275fac=function(o){return new(o||ti)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(j.m),e.Y36(C.t))},ti.\u0275cmp=e.Xpm({type:ti,selectors:[["app-disponibilita-pubblicate"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{_data:"_data"},features:[e.qOj],decls:54,vars:13,consts:[[3,"ngClass"],[1,"div-help","mb-3"],[4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","dataPubblicazione","matSortDirection","desc",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","details"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","dataPubblicazione"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nomePortaleXAlbergo"],["matColumnDef","giorno"],["matColumnDef","descrizioneTipoCameraOTA"],["matColumnDef","descrizioneTariffaOTA"],["matColumnDef","disponibili"],["class","justify-content-center","mat-sort-header","",4,"matHeaderCellDef"],["class","justify-content-center rounded",3,"backgroundColor",4,"matCellDef"],["matColumnDef","prezzo"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","statoCta"],["matColumnDef","statoCtd"],["matColumnDef","durataMinimaSoggiorno"],["matColumnDef","statoPortaleXAlbergo"],["matColumnDef","tipoModifica"],["class","flex-wrap",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["datePickerPubblicataDal",""],["datePickerPubblicataAl",""],["datePickerDal",""],["datePickerAl",""],[1,"col-4"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[3,"placeholder","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons","d-inline-block","align-middle","mr-1"],[1,"d-inline-block","align-middle"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center","rounded"],[1,"justify-content-center"],[1,"flex-wrap"],[1,"font-small","font-italic","w-100"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," NB: i log sulle disponibilit\xe0 vengono conservati per 15 gg "),e.qZA(),e.YNc(3,G1,53,42,"ng-container",2),e.YNc(4,$1,4,3,"div",3),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-table",6),e.NdJ("matSortChange",function(a){return t.onSortChange(a)}),e.ynx(8,7),e.YNc(9,B1,1,0,"mat-header-cell",8),e.YNc(10,V1,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,X1,3,3,"mat-header-cell",11),e.YNc(13,j1,3,4,"mat-cell",12),e.BQk(),e.ynx(14,13),e.YNc(15,W1,3,3,"mat-header-cell",11),e.YNc(16,eh,2,1,"mat-cell",12),e.BQk(),e.ynx(17,14),e.YNc(18,th,3,3,"mat-header-cell",11),e.YNc(19,ih,3,4,"mat-cell",12),e.BQk(),e.ynx(20,15),e.YNc(21,oh,3,3,"mat-header-cell",11),e.YNc(22,nh,2,1,"mat-cell",12),e.BQk(),e.ynx(23,16),e.YNc(24,ah,3,3,"mat-header-cell",11),e.YNc(25,lh,2,1,"mat-cell",12),e.BQk(),e.ynx(26,17),e.YNc(27,rh,3,3,"mat-header-cell",18),e.YNc(28,ch,2,3,"mat-cell",19),e.BQk(),e.ynx(29,20),e.YNc(30,sh,3,3,"mat-header-cell",18),e.YNc(31,ph,3,3,"mat-cell",21),e.BQk(),e.ynx(32,22),e.YNc(33,dh,3,3,"mat-header-cell",11),e.YNc(34,mh,3,3,"mat-cell",12),e.BQk(),e.ynx(35,23),e.YNc(36,_h,3,3,"mat-header-cell",11),e.YNc(37,uh,3,3,"mat-cell",12),e.BQk(),e.ynx(38,24),e.YNc(39,gh,3,3,"mat-header-cell",18),e.YNc(40,hh,2,1,"mat-cell",21),e.BQk(),e.ynx(41,25),e.YNc(42,fh,3,3,"mat-header-cell",11),e.YNc(43,Ch,3,3,"mat-cell",12),e.BQk(),e.ynx(44,26),e.YNc(45,bh,3,3,"mat-header-cell",11),e.YNc(46,vh,6,4,"mat-cell",27),e.BQk(),e.YNc(47,Th,1,0,"mat-header-row",28),e.YNc(48,xh,1,1,"mat-row",29),e.qZA()(),e.TgZ(49,"div",30)(50,"button",31),e.NdJ("click",function(){return t.export()}),e.TgZ(51,"i",32),e._uU(52,"get_app"),e.qZA()(),e.TgZ(53,"mat-paginator",33),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()()),2&o&&(e.Q6J("ngClass",e.VKq(11,Zh,!t.dataReceived)),e.xp6(3),e.Q6J("ngIf",!t.dataReceived),e.xp6(1),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.dataReceived?t.dataSource:t.data),e.xp6(40),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,_.Fj,_.JJ,_.On,ne.d,m.uU,ke.f,z.X$],styles:[".mat-table[_ngcontent-%COMP%]{min-width:1300px!important}"]});const Gh=function(i){return{"p-3":i}};class gt extends f.H{set data(o){null!=o&&(this.dataSource=new s.r4(o),this.dataReceived=!0,this.init())}constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.utility=n,this.containerService=a,this.displayedColumns=["portaleXAlbergo.nome","codice","dataInvio","emailTo","oggetto","allegati","nomeAccountMail","workFlow","view"],this.dataReceived=!1,this.showFilterAdv=!1,this.scrollToTop=!1}ngOnInit(){this.rq=new d.k$g,this.dataReceived||(this.headerService.setTitle("sbm.notificheEmail.title"),this.filters=[],this.filters.push(new d.wn$("portaleXAlbergo.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("emailTo",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("codiceOTAPrenotazione",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("codicePreventivo",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("dataInvio",c.Hp.GreaterEqual,"",c.NM.Date)),this.filters.push(new d.wn$("dataInvio",c.Hp.LowerEqual,"",c.NM.Date)),this.filters.push(new d.wn$("oggetto",c.Hp.Contains,"",c.NM.String)))}ngAfterViewInit(){null!=this.dataSource?this.init():this.download()}init(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=this.utility.getPropertyValue}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getNotificheEmailFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.init(),o||this.setIsLoading(!1)})}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(!n),this.paginator.firstPage()}onPageChange(){(!this.dataReceived||this.scrollToTop)&&this.containerService.scrollToTop()}ngOnDestroy(){this.dataReceived||this.headerService.clearTitle()}}function $h(i,o){1&i&&(e.TgZ(0,"mat-header-cell",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneLogBilanciamento.proprieta.data")))}function Bh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function Vh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneLogBilanciamento.proprieta.portale")))}function Xh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.portale)}}function jh(i,o){1&i&&(e.TgZ(0,"mat-header-cell",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneLogBilanciamento.proprieta.tariffaOTA")))}function Wh(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.tariffaOTA)}}function ef(i,o){1&i&&(e.TgZ(0,"mat-header-cell",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneLogBilanciamento.proprieta.tipoCameraOTA")))}function tf(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.tipoCameraOTA)}}function of(i,o){1&i&&(e.TgZ(0,"mat-header-cell",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneLogBilanciamento.proprieta.disponibili")))}function nf(i,o){if(1&i&&(e.TgZ(0,"mat-cell",23),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.disponibili)}}function af(i,o){1&i&&(e.TgZ(0,"mat-header-cell",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneLogBilanciamento.proprieta.statoPortaleXAlbergo")))}function lf(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoPortaleXAlbergo,t.statoPortaleXAlbergo,"statoPortaleXAlbergo")))}}function rf(i,o){1&i&&(e.TgZ(0,"mat-header-cell",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneLogBilanciamento.proprieta.isStatoPortaleXAlbergoBloccato")))}function cf(i,o){if(1&i&&(e.TgZ(0,"mat-cell",23),e._UZ(1,"mat-checkbox",24),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isStatoPortaleXAlbergoBloccato)}}function sf(i,o){1&i&&(e.TgZ(0,"mat-header-cell",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneLogBilanciamento.proprieta.tipoBilanciamento")))}function pf(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoBilanciamentoInterno,t.tipoBilanciamento,"tipoBilanciamentoInterno")))}}function df(i,o){1&i&&(e.TgZ(0,"mat-header-cell",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneLogBilanciamento.proprieta.isDeleting")))}function mf(i,o){if(1&i&&(e.TgZ(0,"mat-cell",23),e._UZ(1,"mat-checkbox",24),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDeleting)}}function _f(i,o){1&i&&e._UZ(0,"mat-header-row",25)}function uf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",26),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}gt.\u0275fac=function(o){return new(o||gt)(e.Y36(A.s),e.Y36(ie.r),e.Y36(C.t),e.Y36(te.J))},gt.\u0275cmp=e.Xpm({type:gt,selectors:[["app-notifiche-email"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{data:"data",scrollToTop:"scrollToTop"},features:[e.qOj],decls:37,vars:12,consts:[[3,"ngClass"],["class","filter",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-3 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","dataInvio","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","portaleXAlbergo.nome"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","dataInvio"],["matColumnDef","codice"],[4,"matHeaderCellDef"],["matColumnDef","emailTo"],["matColumnDef","oggetto"],["matColumnDef","allegati"],["matColumnDef","nomeAccountMail"],["matColumnDef","workFlow"],["matColumnDef","view"],["class","mat-td-details",4,"matHeaderCellDef"],["class","mat-td-details",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"filter"],[1,"row","filter-base"],[1,"col-3"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["emailSearch",""],[1,"col-2"],["codicePrenotazioneSearch",""],["codicePreventivoSearch",""],[1,"col-2","text-right","pt-2","font-weight-bold"],[1,"align-middle","color-pink","cursor-pointer",3,"click"],["mat-icon-button","","color","primary",1,"align-middle",3,"click"],[1,"filter-adv",3,"hidden"],[1,"row"],[1,"col-6"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"value","dateChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["picker",""],["oggettoSearch",""],[1,"border","rounded-lg","mat-elevation-z1","p-3","bg-white"],[1,"mb-0"],["mat-sort-header",""],[1,"mat-td-details"],["mat-icon-button","","color","primary",4,"ngIf"],["mat-icon-button","","color","primary"],[1,"material-icons"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Ah,48,31,"div",1),e.YNc(2,wh,4,3,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"mat-table",5),e.NdJ("matSortChange",function(){return null!=t.paginator?t.paginator.firstPage():null}),e.ynx(6,6),e.YNc(7,zh,3,3,"mat-header-cell",7),e.YNc(8,Mh,2,1,"mat-cell",8),e.BQk(),e.ynx(9,9),e.YNc(10,qh,3,3,"mat-header-cell",7),e.YNc(11,Ph,3,4,"mat-cell",8),e.BQk(),e.ynx(12,10),e.YNc(13,kh,3,3,"mat-header-cell",11),e.YNc(14,Sh,2,1,"mat-cell",8),e.BQk(),e.ynx(15,12),e.YNc(16,yh,3,3,"mat-header-cell",7),e.YNc(17,Jh,2,1,"mat-cell",8),e.BQk(),e.ynx(18,13),e.YNc(19,Eh,3,3,"mat-header-cell",7),e.YNc(20,Nh,2,1,"mat-cell",8),e.BQk(),e.ynx(21,14),e.YNc(22,Oh,3,3,"mat-header-cell",7),e.YNc(23,Lh,2,1,"mat-cell",8),e.BQk(),e.ynx(24,15),e.YNc(25,Dh,3,3,"mat-header-cell",7),e.YNc(26,Ih,2,1,"mat-cell",8),e.BQk(),e.ynx(27,16),e.YNc(28,Qh,3,3,"mat-header-cell",7),e.YNc(29,Uh,2,1,"mat-cell",8),e.BQk(),e.ynx(30,17),e.YNc(31,Yh,3,3,"mat-header-cell",18),e.YNc(32,Fh,2,1,"mat-cell",19),e.BQk(),e.YNc(33,Hh,1,0,"mat-header-row",20),e.YNc(34,Kh,1,1,"mat-row",21),e.qZA()(),e.TgZ(35,"div",22)(36,"mat-paginator",23),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()()),2&o&&(e.Q6J("ngClass",e.VKq(10,Gh,!t.dataReceived)),e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize))},dependencies:[m.mk,m.O5,w.X,h.eB,M.v_,M.$V,M.nX,b.k0,y.nW,y.Q0,y.wx,y.zY,y.By,y._g,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,ne.d,m.uU,z.X$]});class io extends f.H{set data(o){null!=o&&o.length>0&&(this.dataSource=new s.r4(o),setTimeout(()=>{this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},200))}constructor(o){super(),this.utility=o,this.displayedColumns=["data","portale","tariffaOTA","tipoCameraOTA","disponibili","statoPortaleXAlbergo","isStatoPortaleXAlbergoBloccato","tipoBilanciamento","isDeleting"],this.enumStatoPortaleXAlbergo=c.V6,this.enumTipoBilanciamentoInterno=c.bF}}io.\u0275fac=function(o){return new(o||io)(e.Y36(C.t))},io.\u0275cmp=e.Xpm({type:io,selectors:[["app-log-bilanciamento"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{data:"data"},features:[e.qOj],decls:36,vars:6,consts:[[1,"mat-table-container"],["matSort","","matSortActive","data","matSortDirection","desc",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","portale"],["matColumnDef","tariffaOTA"],["matColumnDef","tipoCameraOTA"],["matColumnDef","disponibili"],["mat-sort-header","","class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","statoPortaleXAlbergo"],["matColumnDef","isStatoPortaleXAlbergoBloccato"],["matColumnDef","tipoBilanciamento"],["matColumnDef","isDeleting"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-sort-header",""],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"mat-table",1),e.NdJ("matSortChange",function(){return t.paginator.firstPage()}),e.ynx(2,2),e.YNc(3,$h,3,3,"mat-header-cell",3),e.YNc(4,Bh,3,4,"mat-cell",4),e.BQk(),e.ynx(5,5),e.YNc(6,Vh,3,3,"mat-header-cell",3),e.YNc(7,Xh,2,1,"mat-cell",4),e.BQk(),e.ynx(8,6),e.YNc(9,jh,3,3,"mat-header-cell",3),e.YNc(10,Wh,2,1,"mat-cell",4),e.BQk(),e.ynx(11,7),e.YNc(12,ef,3,3,"mat-header-cell",3),e.YNc(13,tf,2,1,"mat-cell",4),e.BQk(),e.ynx(14,8),e.YNc(15,of,3,3,"mat-header-cell",9),e.YNc(16,nf,2,1,"mat-cell",10),e.BQk(),e.ynx(17,11),e.YNc(18,af,3,3,"mat-header-cell",3),e.YNc(19,lf,3,3,"mat-cell",4),e.BQk(),e.ynx(20,12),e.YNc(21,rf,3,3,"mat-header-cell",9),e.YNc(22,cf,2,1,"mat-cell",10),e.BQk(),e.ynx(23,13),e.YNc(24,sf,3,3,"mat-header-cell",3),e.YNc(25,pf,3,3,"mat-cell",4),e.BQk(),e.ynx(26,14),e.YNc(27,df,3,3,"mat-header-cell",9),e.YNc(28,mf,2,1,"mat-cell",10),e.BQk(),e.YNc(29,_f,1,0,"mat-header-row",15),e.YNc(30,uf,1,1,"mat-row",16),e.qZA()(),e.TgZ(31,"div",17)(32,"button",18),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"Log Bilanciamento",t.displayedColumns)}),e.TgZ(33,"i",19),e._uU(34,"get_app"),e.qZA()(),e._UZ(35,"mat-paginator",20),e.qZA()),2&o&&(e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize))},dependencies:[V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,m.uU,z.X$]});class oo extends f.H{constructor(o){super(),this.apiService=o,this.storicoPrenotazione=new d.YGL}ngOnInit(){this.setIsLoading(!0);let o=new d.gqp;o.oidStoricoPrenotazione=this.oidStoricoPrenotazione,this.apiService.getStoricoPrenotazione(o).subscribe(t=>{this.storicoPrenotazione=t.data,this.setIsLoading(!1)})}}function gf(i,o){1&i&&(e.TgZ(0,"mat-header-cell",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storicoPrenotazioneWS.proprieta.arrivo")))}function hf(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.arrivo,"dd/MM/yyyy"))}}function ff(i,o){1&i&&(e.TgZ(0,"mat-header-cell",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storicoPrenotazioneWS.proprieta.partenza")))}function Cf(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.partenza,"dd/MM/yyyy"))}}function bf(i,o){1&i&&(e.TgZ(0,"mat-header-cell",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storicoPrenotazioneWS.proprieta.nominativo")))}function vf(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nominativo)}}function Tf(i,o){1&i&&(e.TgZ(0,"mat-header-cell",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storicoPrenotazioneWS.proprieta.pax")))}function xf(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.pax)}}function Zf(i,o){1&i&&(e.TgZ(0,"mat-header-cell",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storicoPrenotazioneWS.proprieta.importo")))}function Af(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.importo))}}function wf(i,o){1&i&&e._UZ(0,"mat-header-cell")}function zf(i,o){1&i&&(e.TgZ(0,"mat-cell",17)(1,"button",18)(2,"i",19),e._uU(3,"remove_red_eye"),e.qZA()()())}function Mf(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function qf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.viewDetails(r.oid):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}oo.\u0275fac=function(o){return new(o||oo)(e.Y36(A.s))},oo.\u0275cmp=e.Xpm({type:oo,selectors:[["app-storico-prenotazione-details-dialog"]],inputs:{prenotazione:"prenotazione",oidStoricoPrenotazione:"oidStoricoPrenotazione"},features:[e.qOj],decls:104,vars:95,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6","pr-1"],[1,"mb-2"],[1,"border","rounded","p-3"],[1,"font-weight-bold"],[1,"font-weight-bold","mt-3","mb-2"],[1,"border","rounded","p-3","note-container"],[1,"col-6","pl-1"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"h5",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",5)(9,"div")(10,"span",6),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"div")(16,"span",6),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"div")(22,"span",6),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._uU(25),e.qZA(),e.TgZ(26,"div")(27,"span",6),e._uU(28),e.ALo(29,"translate"),e.qZA(),e._uU(30),e.ALo(31,"eurCurrency"),e.qZA(),e.TgZ(32,"div")(33,"span",6),e._uU(34),e.ALo(35,"translate"),e.qZA(),e._uU(36),e.ALo(37,"eurCurrency"),e.qZA(),e.TgZ(38,"div")(39,"span",6),e._uU(40),e.ALo(41,"translate"),e.qZA(),e._uU(42),e.ALo(43,"eurCurrency"),e.qZA(),e.TgZ(44,"div")(45,"span",6),e._uU(46),e.ALo(47,"translate"),e.qZA(),e._uU(48),e.qZA(),e.TgZ(49,"div",7),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"div",8),e._uU(53),e.qZA()()(),e.TgZ(54,"div",9)(55,"h5",4),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"div",5)(59,"div")(60,"span",6),e._uU(61),e.ALo(62,"translate"),e.qZA(),e._uU(63),e.ALo(64,"date"),e.qZA(),e.TgZ(65,"div")(66,"span",6),e._uU(67),e.ALo(68,"translate"),e.qZA(),e._uU(69),e.ALo(70,"date"),e.qZA(),e.TgZ(71,"div")(72,"span",6),e._uU(73),e.ALo(74,"translate"),e.qZA(),e._uU(75),e.qZA(),e.TgZ(76,"div")(77,"span",6),e._uU(78),e.ALo(79,"translate"),e.qZA(),e._uU(80),e.ALo(81,"eurCurrency"),e.qZA(),e.TgZ(82,"div")(83,"span",6),e._uU(84),e.ALo(85,"translate"),e.qZA(),e._uU(86),e.ALo(87,"eurCurrency"),e.qZA(),e.TgZ(88,"div")(89,"span",6),e._uU(90),e.ALo(91,"translate"),e.qZA(),e._uU(92),e.ALo(93,"eurCurrency"),e.qZA(),e.TgZ(94,"div")(95,"span",6),e._uU(96),e.ALo(97,"translate"),e.qZA(),e._uU(98),e.qZA(),e.TgZ(99,"div",7),e._uU(100),e.ALo(101,"translate"),e.qZA(),e.TgZ(102,"div",8),e._uU(103),e.qZA()()()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.Oqu(e.lcZ(7,35,"sbm.prenotazioni.prenotazioneAttuale")),e.xp6(5),e.Oqu(e.lcZ(12,37,"bo.prenotazione.proprieta.arrivo")+": "),e.xp6(2),e.hij(" ",t.prenotazione.arrivo?e.xi3(14,39,t.prenotazione.arrivo,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(18,42,"bo.prenotazione.proprieta.partenza")+": "),e.xp6(2),e.hij(" ",t.prenotazione.partenza?e.xi3(20,44,t.prenotazione.partenza,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(24,47,"bo.prenotazione.proprieta.pax")+": "),e.xp6(2),e.hij(" ",t.prenotazione.pax?t.prenotazione.pax:"---",""),e.xp6(3),e.Oqu(e.lcZ(29,49,"bo.prenotazione.proprieta.importo")+": "),e.xp6(2),e.hij(" ",t.prenotazione.importo?e.lcZ(31,51,t.prenotazione.importo):"---",""),e.xp6(4),e.Oqu(e.lcZ(35,53,"bo.prenotazione.proprieta.sconto")+": "),e.xp6(2),e.hij(" ",t.prenotazione.sconto?e.lcZ(37,55,t.prenotazione.sconto):"---",""),e.xp6(4),e.Oqu(e.lcZ(41,57,"bo.prenotazione.proprieta.caparra")+": "),e.xp6(2),e.hij(" ",t.prenotazione.caparra?e.lcZ(43,59,t.prenotazione.caparra):"---",""),e.xp6(4),e.Oqu(e.lcZ(47,61,"bo.prenotazione.proprieta.tariffaOTA")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.tariffaOTA&&t.prenotazione.tariffaOTA.codice?t.prenotazione.tariffaOTA.codice:"---",""),e.xp6(2),e.Oqu(e.lcZ(51,63,"bo.prenotazione.proprieta.noteP")),e.xp6(3),e.hij(" ",t.prenotazione.noteP?t.prenotazione.noteP:""," "),e.xp6(3),e.Oqu(e.lcZ(57,65,"sbm.prenotazioni.storicoPrenotazione")),e.xp6(5),e.Oqu(e.lcZ(62,67,"bo.prenotazione.proprieta.arrivo")+": "),e.xp6(2),e.hij(" ",t.storicoPrenotazione.arrivo?e.xi3(64,69,t.storicoPrenotazione.arrivo,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(68,72,"bo.prenotazione.proprieta.partenza")+": "),e.xp6(2),e.hij(" ",t.storicoPrenotazione.partenza?e.xi3(70,74,t.storicoPrenotazione.partenza,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(74,77,"bo.prenotazione.proprieta.pax")+": "),e.xp6(2),e.hij(" ",t.storicoPrenotazione.pax?t.storicoPrenotazione.pax:"---",""),e.xp6(3),e.Oqu(e.lcZ(79,79,"bo.prenotazione.proprieta.importo")+": "),e.xp6(2),e.hij(" ",t.storicoPrenotazione.importo?e.lcZ(81,81,t.storicoPrenotazione.importo):"---",""),e.xp6(4),e.Oqu(e.lcZ(85,83,"bo.prenotazione.proprieta.sconto")+": "),e.xp6(2),e.hij(" ",t.storicoPrenotazione.sconto?e.lcZ(87,85,t.storicoPrenotazione.sconto):"---",""),e.xp6(4),e.Oqu(e.lcZ(91,87,"bo.prenotazione.proprieta.caparra")+": "),e.xp6(2),e.hij(" ",t.storicoPrenotazione.caparra?e.lcZ(93,89,t.storicoPrenotazione.caparra):"---",""),e.xp6(4),e.Oqu(e.lcZ(97,91,"bo.prenotazione.proprieta.tariffaOTA")+": "),e.xp6(2),e.hij(" ",t.storicoPrenotazione.codiceTariffaOTA?t.storicoPrenotazione.codiceTariffaOTA:"---",""),e.xp6(2),e.Oqu(e.lcZ(101,93,"bo.prenotazione.proprieta.noteP")),e.xp6(3),e.hij(" ",t.storicoPrenotazione.noteP?t.storicoPrenotazione.noteP:""," "))},dependencies:[h.eB,F.aO,m.uU,ke.f,z.X$],styles:[".note-container[_ngcontent-%COMP%]{height:200px;overflow-y:auto}"]});class no extends f.H{set data(o){null!=o&&o.length>0&&(this.dataSource=new s.r4(o),setTimeout(()=>{this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},200))}constructor(o){super(),this.utility=o,this.displayedColumns=["arrivo","partenza","nominativo","pax","importo","view"]}viewDetails(o){let t=new d.Zpt;t.width="80vw";let a=this.showModalDialog(oo,t).componentInstance;a.prenotazione=this.prenotazione,a.oidStoricoPrenotazione=o}}no.\u0275fac=function(o){return new(o||no)(e.Y36(C.t))},no.\u0275cmp=e.Xpm({type:no,selectors:[["app-log-storico-prenotazione"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{prenotazione:"prenotazione",data:"data"},features:[e.qOj],decls:24,vars:6,consts:[[1,"mat-table-container"],["matSort","","matSortActive","arrivo","matSortDirection","desc",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","arrivo"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","partenza"],["matColumnDef","nominativo"],["matColumnDef","pax"],["matColumnDef","importo"],["matColumnDef","view"],[4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-sort-header",""],[1,"mat-td-delete"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"mat-table",1),e.NdJ("matSortChange",function(){return t.paginator.firstPage()}),e.ynx(2,2),e.YNc(3,gf,3,3,"mat-header-cell",3),e.YNc(4,hf,3,4,"mat-cell",4),e.BQk(),e.ynx(5,5),e.YNc(6,ff,3,3,"mat-header-cell",3),e.YNc(7,Cf,3,4,"mat-cell",4),e.BQk(),e.ynx(8,6),e.YNc(9,bf,3,3,"mat-header-cell",3),e.YNc(10,vf,2,1,"mat-cell",4),e.BQk(),e.ynx(11,7),e.YNc(12,Tf,3,3,"mat-header-cell",3),e.YNc(13,xf,2,1,"mat-cell",4),e.BQk(),e.ynx(14,8),e.YNc(15,Zf,3,3,"mat-header-cell",3),e.YNc(16,Af,3,3,"mat-cell",4),e.BQk(),e.ynx(17,9),e.YNc(18,wf,1,0,"mat-header-cell",10),e.YNc(19,zf,4,0,"mat-cell",11),e.BQk(),e.YNc(20,Mf,1,0,"mat-header-row",12),e.YNc(21,qf,1,1,"mat-row",13),e.qZA()(),e.TgZ(22,"div",14),e._UZ(23,"mat-paginator",15),e.qZA()),2&o&&(e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize))},dependencies:[h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,m.uU,ke.f,z.X$]});const Pf=["panel1"],kf=["panel2"],Sf=["panel3"],yf=["panel4"],Jf=["panel5"];function Ef(i,o){if(1&i&&(e.TgZ(0,"div",57),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.prenotazioni.cancellataIl")+e.xi3(3,3,t.prenotazione.dataCancellazione,"dd/MM/yyyy HH:mm:ss")," ")}}function Nf(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.prenotazioni.richiestaCancellazioneIl")+e.xi3(3,3,t.prenotazione.dataRichiestaCancellazione,"dd/MM/yyyy HH:mm:ss")," ")}}function Of(i,o){1&i&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.prenotazioni.prenotazioneInAttesaDiConfermaManuale")," "))}function Lf(i,o){if(1&i&&(e.TgZ(0,"div",60),e._UZ(1,"img",61),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.prenotazione.tipoCamera.urlImmagine,e.LSH)}}function Df(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.setModalitaPagamento())}),e.TgZ(1,"i",16),e._uU(2,"edit"),e.qZA()()}}function If(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"a",63),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.preventDefault(),e.KtG(l.openTransazioneDetails())}),e._uU(4),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(" - "),e.xp6(2),e.Oqu(t.prenotazione.transazione.oid)}}function Qf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",64),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openPreventivo())}),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"date"),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.preventivo")+" #"+t.prenotazione.preventivo.codicePreventivo+e.lcZ(3,3,"sbm.prenotazioni.del")+e.xi3(4,5,t.prenotazione.preventivo.dataPreventivo,"dd/MM/yyyy"))}}function Uf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.setPrenotazioneImportata())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.prenotazioni.impostaComeImportata")))}function Yf(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Uf,3,3,"a",65),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.prenotazione.importata)}}function Rf(i,o){if(1&i&&e._UZ(0,"span"),2&i){const t=e.oxw(3);e.Gre("mr-2 fi fi-",t.prenotazione.cliente.lingua.flagIcon,"")}}function Ff(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.Oqu("---"))}function Hf(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1,", "),e.qZA())}function Kf(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"span",79),e._uU(2),e.qZA(),e.YNc(3,Hf,2,0,"span",0),e.BQk()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.xp6(1),e.FAE("matTooltip","",t.cognome," ",t.nome," ",t.email," ",t.cellulare,""),e.xp6(1),e.AsE("",t.cognome," ",t.nome,""),e.xp6(1),e.Q6J("ngIf",n<a.ospiti.length-1)}}function Gf(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Kf,4,7,"ng-container",78),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.ospiti)}}function $f(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",67)(1,"mat-card-title"),e.YNc(2,Rf,1,3,"span",68),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",69),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editCliente())}),e.TgZ(7,"i",70),e._uU(8,"edit"),e.qZA()()(),e.TgZ(9,"div")(10,"span",12),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"div")(15,"span",12),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"div")(20,"span",12),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"div")(25,"span",12),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"div")(30,"span",12),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._uU(33),e.qZA(),e.TgZ(34,"div")(35,"span",12),e._uU(36),e.ALo(37,"translate"),e.qZA(),e._uU(38),e.qZA(),e.TgZ(39,"div")(40,"span",12),e._uU(41),e.ALo(42,"translate"),e.qZA(),e._uU(43),e.qZA(),e.TgZ(44,"div")(45,"span",12),e._uU(46),e.ALo(47,"translate"),e.qZA(),e._uU(48),e.ALo(49,"titlecase"),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"div")(52,"span",12),e._uU(53),e.ALo(54,"translate"),e.qZA(),e._uU(55),e.ALo(56,"titlecase"),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"div")(59,"span",12),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"a",71),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.preventDefault(),e.KtG(l.setBlackList())}),e._uU(63),e.ALo(64,"titlecase"),e.ALo(65,"translate"),e.qZA()(),e.TgZ(66,"div")(67,"span",12),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"span",72),e._uU(71),e.qZA()(),e.TgZ(72,"div")(73,"span",12),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"span",72),e._uU(77),e.qZA()(),e.TgZ(78,"div")(79,"span",12),e._uU(80),e.ALo(81,"translate"),e.qZA(),e.YNc(82,Ff,2,1,"span",0),e.YNc(83,Gf,2,1,"ng-container",0),e.qZA(),e.TgZ(84,"div",33)(85,"button",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sendEmail())}),e._UZ(86,"i",74),e._uU(87),e.ALo(88,"translate"),e.qZA(),e.TgZ(89,"button",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sendSms())}),e._UZ(90,"i",75),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.utility.openUrlInNewTab("https://wa.me/"+a.utility.checkCellulare(a.prenotazione.cliente.cellulare)))}),e._UZ(94,"i",77),e._uU(95),e.ALo(96,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",null!=t.prenotazione.cliente.lingua&&!!t.prenotazione.cliente.lingua.flagIcon),e.xp6(2),e.Oqu(e.lcZ(5,41,"bo.prenotazione.proprieta.cliente")),e.xp6(7),e.Oqu(e.lcZ(12,43,"bo.cliente.proprieta.cognome")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.cognome?t.prenotazione.cliente.cognome:"---",""),e.xp6(3),e.Oqu(e.lcZ(17,45,"bo.cliente.proprieta.nome")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.nome?t.prenotazione.cliente.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(22,47,"bo.cliente.proprieta.email")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.email?t.prenotazione.cliente.email:"---",""),e.xp6(3),e.Oqu(e.lcZ(27,49,"bo.cliente.proprieta.password")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.passwordMask?t.prenotazione.cliente.passwordMask:"---",""),e.xp6(3),e.Oqu(e.lcZ(32,51,"bo.cliente.proprieta.cellulare")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.cellulare?t.prenotazione.cliente.cellulare:"---",""),e.xp6(3),e.Oqu(e.lcZ(37,53,"bo.cliente.proprieta.lingua")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.cliente.lingua&&t.prenotazione.cliente.lingua.nome?t.prenotazione.cliente.lingua.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(42,55,"bo.cliente.proprieta.nazione")+": "),e.xp6(2),e.hij(" ",t.prenotazione.cliente.nazione?t.prenotazione.cliente.nazione:"---",""),e.xp6(3),e.Oqu(e.lcZ(47,57,"bo.cliente.proprieta.privacy")+": "),e.xp6(2),e.hij(" ",e.lcZ(49,59,e.lcZ(50,61,t.prenotazione.cliente.privacy?"globals.si":"globals.no")),""),e.xp6(5),e.Oqu(e.lcZ(54,63,"bo.cliente.proprieta.newsletter")+": "),e.xp6(2),e.hij(" ",e.lcZ(56,65,e.lcZ(57,67,t.prenotazione.cliente.newsletter?"globals.si":"globals.no")),""),e.xp6(5),e.Oqu(e.lcZ(61,69,"bo.cliente.proprieta.blackList")+": "),e.xp6(3),e.Oqu(e.lcZ(64,71,e.lcZ(65,73,t.prenotazione.cliente.blackList?"globals.si":"globals.no"))),e.xp6(5),e.Oqu(e.lcZ(69,75,"bo.cliente.proprieta.mercato")+": "),e.xp6(2),e.Udp("background-color",null==t.prenotazione.cliente.mercato?null:t.prenotazione.cliente.mercato.coloreHex),e.Q6J("appInvertColor",null==t.prenotazione.cliente.mercato?null:t.prenotazione.cliente.mercato.coloreHex),e.xp6(1),e.hij(" ",null!=t.prenotazione.cliente.mercato&&t.prenotazione.cliente.mercato.descrizione?t.prenotazione.cliente.mercato.descrizione:"---"," "),e.xp6(3),e.Oqu(e.lcZ(75,77,"bo.cliente.proprieta.canaleVendita")+": "),e.xp6(2),e.Udp("background-color",null==t.prenotazione.cliente.canaleVendita?null:t.prenotazione.cliente.canaleVendita.coloreHex),e.Q6J("appInvertColor",null==t.prenotazione.cliente.canaleVendita?null:t.prenotazione.cliente.canaleVendita.coloreHex),e.xp6(1),e.hij(" ",null!=t.prenotazione.cliente.canaleVendita&&t.prenotazione.cliente.canaleVendita.descrizione?t.prenotazione.cliente.canaleVendita.descrizione:"---"," "),e.xp6(3),e.Oqu(e.lcZ(81,79,"sbm.prenotazioni.ospiti")+": "),e.xp6(2),e.Q6J("ngIf",null==t.ospiti||0==t.ospiti.length),e.xp6(1),e.Q6J("ngIf",null!=t.ospiti&&t.ospiti.length>0),e.xp6(2),e.Q6J("disabled",!t.prenotazione.cliente.email),e.xp6(2),e.hij(" ",e.lcZ(88,81,"sbm.prenotazioni.inviaEmail"),""),e.xp6(2),e.Q6J("disabled",!t.prenotazione.cliente.cellulare),e.xp6(2),e.hij(" ",e.lcZ(92,83,"sbm.prenotazioni.inviaSms"),""),e.xp6(2),e.Q6J("disabled",!t.prenotazione.cliente.cellulare),e.xp6(2),e.hij(" ",e.lcZ(96,85,"sbm.prenotazioni.inviaWhatsApp"),"")}}function Bf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",80),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editCliente())}),e.TgZ(1,"i",81),e._uU(2,"account_circle"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.prenotazioni.selezionaCliente")))}function Vf(i,o){if(1&i&&(e.TgZ(0,"span",82),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(" ("+t.voucherUtilizzato.codice+")")}}function Xf(i,o){1&i&&(e.TgZ(0,"div",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.prenotazioni.isPrezziScontati")," "))}function jf(i,o){if(1&i&&(e.TgZ(0,"div",84),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.prenotazioni.upgradeCamera")+t.prenotazione.upgradeCamera," ")}}function Wf(i,o){if(1&i&&(e.TgZ(0,"div",85)(1,"div",86),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"app-inner-html",87),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.prenotazione.proprieta.noteSelfCheckin")),e.xp6(2),e.Q6J("_text",t.noteSelfCheckin)}}function e2(i,o){if(1&i&&(e.TgZ(0,"span",92),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex),e.Q6J("appInvertColor",t.coloreHex),e.xp6(1),e.Oqu(t.descrizione)}}function t2(i,o){if(1&i&&(e.TgZ(0,"mat-card",88)(1,"mat-card-title",89),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card-content",90),e.YNc(5,e2,2,4,"span",91),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.prenotazioni.automatismiEseguiti")," "),e.xp6(3),e.Q6J("ngForOf",t.workFlowsEseguiti)}}function i2(i,o){if(1&i&&(e._UZ(0,"app-url",34),e.ALo(1,"translate")),2&i){const t=e.oxw(2);e.Q6J("placeholder",e.lcZ(1,2,"sbm.prenotazioni.urlMySelf"))("url",t.getUrlMySelf())}}function o2(i,o){if(1&i&&(e._UZ(0,"app-url",34),e.ALo(1,"translate")),2&i){const t=e.oxw(2);e.Q6J("placeholder",e.lcZ(1,2,"sbm.prenotazioni.urlSondaggio"))("url",t.getUrlSondaggio())}}function n2(i,o){if(1&i&&(e._UZ(0,"app-url",34),e.ALo(1,"translate")),2&i){const t=e.oxw(2);e.Q6J("placeholder",e.lcZ(1,2,"sbm.prenotazioni.urlWebBookingExtra"))("url",t.getUrlWebBookingExtra())}}function a2(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.componenteXPrenotazione.proprieta.nome")))}function l2(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function r2(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.componenteXPrenotazione.proprieta.cognome")))}function c2(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.cognome)}}function s2(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.componenteXPrenotazione.proprieta.tipoComponentePrenotazione")))}function p2(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoComponentePrenotazione,null!=t.riduzione?t.riduzione.tipoComponentePrenotazione:t.tipoComponentePrenotazione,"tipoComponentePrenotazione")))}}function d2(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.componenteXPrenotazione.proprieta.email")))}function m2(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.email)}}function _2(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.componenteXPrenotazione.proprieta.cellulare")))}function u2(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.cellulare)}}function g2(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.componenteXPrenotazione.proprieta.eta")))}function h2(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.eta)}}function f2(i,o){1&i&&(e.TgZ(0,"mat-header-cell",108),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.componenteXPrenotazione.proprieta.isCheckInOnlineEseguito")))}function C2(i,o){if(1&i&&(e.TgZ(0,"mat-cell",108),e._UZ(1,"mat-checkbox",109),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isCheckInOnlineEseguito)}}function b2(i,o){1&i&&e._UZ(0,"mat-header-row",110)}function v2(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",111),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function T2(i,o){if(1&i&&(e.TgZ(0,"div",93)(1,"mat-table",94),e.ynx(2,95),e.YNc(3,a2,3,3,"mat-header-cell",96),e.YNc(4,l2,2,1,"mat-cell",97),e.BQk(),e.ynx(5,98),e.YNc(6,r2,3,3,"mat-header-cell",96),e.YNc(7,c2,2,1,"mat-cell",97),e.BQk(),e.ynx(8,99),e.YNc(9,s2,3,3,"mat-header-cell",96),e.YNc(10,p2,3,3,"mat-cell",97),e.BQk(),e.ynx(11,100),e.YNc(12,d2,3,3,"mat-header-cell",96),e.YNc(13,m2,2,1,"mat-cell",97),e.BQk(),e.ynx(14,101),e.YNc(15,_2,3,3,"mat-header-cell",96),e.YNc(16,u2,2,1,"mat-cell",97),e.BQk(),e.ynx(17,102),e.YNc(18,g2,3,3,"mat-header-cell",96),e.YNc(19,h2,2,1,"mat-cell",97),e.BQk(),e.ynx(20,103),e.YNc(21,f2,3,3,"mat-header-cell",104),e.YNc(22,C2,2,1,"mat-cell",105),e.BQk(),e.YNc(23,b2,1,0,"mat-header-row",106),e.YNc(24,v2,1,1,"mat-row",107),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("dataSource",t.ospiti),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumnsOspiti)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsOspiti)}}function x2(i,o){1&i&&(e.TgZ(0,"div",112)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.prenotazioni.nessunOspite")))}function Z2(i,o){if(1&i&&(e.TgZ(0,"div",33),e._UZ(1,"app-codici-promozionali",45),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("data",t.voucher)}}function A2(i,o){if(1&i&&(e.TgZ(0,"span",113),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",114),e._uU(4),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.prenotazioni.messaggi")),e.xp6(3),e.Oqu(t.numeroMessaggiNonLetti)}}function w2(i,o){if(1&i&&(e.TgZ(0,"span",113),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",114),e._uU(4),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.prenotazioni.upSelling")),e.xp6(3),e.Oqu(null!=t.prenotazioniExtra?t.prenotazioniExtra.length:0)}}function z2(i,o){if(1&i&&e._UZ(0,"img",116),2&i){const t=e.oxw(3);e.Q6J("src",t.upSellingCamera.tipoCamera.urlImmagine,e.LSH)}}function M2(i,o){if(1&i&&(e.TgZ(0,"div",12)(1,"div"),e._uU(2),e.qZA(),e.YNc(3,z2,1,1,"img",115),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.testoUpSellingCamera),e.xp6(1),e.Q6J("ngIf",null!=t.upSellingCamera.tipoCamera&&!!t.upSellingCamera.tipoCamera.urlImmagine)}}const q2=function(i){return{"mt-3":i}};function P2(i,o){if(1&i&&(e.TgZ(0,"div",11),e._UZ(1,"app-prenotazioni-extra",51),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,q2,!!t.upSellingCamera)),e.xp6(1),e.Q6J("_data",t.prenotazioniExtra)}}function k2(i,o){1&i&&(e.TgZ(0,"div",112)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.prenotazioni.nessunUpSelling")))}function S2(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",52,117)(2,"mat-expansion-panel-header"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"app-log-bilanciamento",45),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,2,"sbm.prenotazioni.logBilanciamento")," "),e.xp6(2),e.Q6J("data",t.logBilanciamento)}}function y2(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",52,118)(2,"mat-expansion-panel-header"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"app-log-storico-prenotazione",119),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"sbm.prenotazioni.logModifiche")," "),e.xp6(2),e.Q6J("prenotazione",t.prenotazione)("data",t.logModifiche)}}function J2(i,o){if(1&i&&(e.TgZ(0,"div",120)(1,"h5",121),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"app-inner-html",87),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.prenotazione.proprieta.noteImportazioneWelcome")),e.xp6(2),e.Q6J("_text",t.prenotazione.noteImportazioneWelcome)}}function E2(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",140),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(4);return e.KtG(null!=a.logDisponibilita?l.openDetailDisponibilita(a.logDisponibilita):null!=a.logOperazione?l.openDetailOperazione(a.logOperazione):l.utility.openUrlInNewTab(a.logNotifica.urlHtml))}),e.TgZ(1,"span",141),e._uU(2," info "),e.qZA()()}}const N2=function(i,o){return{aperto:i,chiuso:o}};function O2(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div")(2,"span",142),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",143),e._uU(6),e.qZA(),e.TgZ(7,"span",144),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div")(11,"span",12),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"eurCurrency"),e.qZA()(),e.TgZ(17,"div")(18,"span",12),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"span"),e._uU(22),e.ALo(23,"translate"),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw(4);e.xp6(3),e.Oqu(e.lcZ(4,8,"bo.logDisponibilitaPortaleXAlbergo.proprieta.disponibili")+": "),e.xp6(3),e.Oqu(t.logDisponibilita.disponibili),e.xp6(1),e.Q6J("ngClass",e.WLB(20,N2,t.logDisponibilita.statoPortaleXAlbergo==n.enumStato.Aperto,t.logDisponibilita.statoPortaleXAlbergo==n.enumStato.Chiuso)),e.xp6(1),e.Oqu(e.lcZ(9,10,n.getEnumKeyTranslation(n.enumStato,t.logDisponibilita.statoPortaleXAlbergo,"statoPortaleXAlbergo"))),e.xp6(4),e.Oqu(e.lcZ(13,12,"bo.logDisponibilitaPortaleXAlbergo.proprieta.prezzo")+": "),e.xp6(3),e.Oqu(e.lcZ(16,14,t.logDisponibilita.prezzo)),e.xp6(4),e.Oqu(e.lcZ(20,16,"bo.logDisponibilitaPortaleXAlbergo.proprieta.tipoModifica")+": "),e.xp6(3),e.Oqu(e.lcZ(23,18,n.getEnumKeyTranslation(n.enumTipoModifica,t.logDisponibilita.tipoModifica,"tipoModificaDisponibilitaXPortaleXAlbergo")))}}function L2(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div")(2,"span",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div")(8,"span",12),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(e.lcZ(4,4,"bo.logOperazionePortaleXAlbergo.proprieta.operazione")+": "),e.xp6(3),e.Oqu(t.logOperazione.descrizioneTipoOperazione?t.logOperazione.descrizioneTipoOperazione:"---"),e.xp6(3),e.Oqu(e.lcZ(10,6,"bo.logOperazionePortaleXAlbergo.proprieta.esito")+": "),e.xp6(3),e.Oqu(t.logOperazione.descrizioneEsito?t.logOperazione.descrizioneEsito:"---")}}function D2(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div")(2,"span",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div")(8,"span",12),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(e.lcZ(4,4,"bo.notificaEmail.proprieta.emailTo")+": "),e.xp6(3),e.Oqu(t.logNotifica.emailTo?t.logNotifica.emailTo:"---"),e.xp6(3),e.Oqu(e.lcZ(10,6,"bo.notificaEmail.proprieta.oggetto")+": "),e.xp6(3),e.Oqu(t.logNotifica.oggetto?t.logNotifica.oggetto:"---")}}const I2=function(i){return{"border-right":i}};function Q2(i,o){if(1&i&&(e.TgZ(0,"div",131)(1,"div",132)(2,"span",133),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"div",134)(6,"i",135),e._uU(7,"circle"),e.qZA()()(),e.TgZ(8,"div",136)(9,"div",12)(10,"span",137),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,E2,3,0,"button",138),e.qZA(),e.TgZ(14,"div",139),e.YNc(15,O2,24,23,"ng-container",0),e.YNc(16,L2,13,8,"ng-container",0),e.YNc(17,D2,13,8,"ng-container",0),e.qZA()()()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.xp6(1),e.Q6J("ngClass",e.VKq(12,I2,n<a.logsFiltered.length-1)),e.xp6(2),e.Oqu(e.xi3(4,7,t.dataVisualizzata,"dd/MM/yyyy HH:mm:ss")),e.xp6(8),e.Oqu(e.lcZ(12,10,null!=t.logDisponibilita?a.getEnumKeyTranslation(a.enumTipoOperazione,t.logDisponibilita.tipoOperazionePortaleXAlbergo,"tipoOperazionePortaleXAlbergo"):null!=t.logOperazione?"sbm.prenotazioni.operazione":null!=t.logNotifica?"sbm.prenotazioni.notificaEmail":"")),e.xp6(2),e.Q6J("ngIf",null!=t.logDisponibilita||null!=t.logOperazione||null!=t.logNotifica&&!!t.logNotifica.urlHtml),e.xp6(2),e.Q6J("ngIf",null!=t.logDisponibilita),e.xp6(1),e.Q6J("ngIf",null!=t.logOperazione),e.xp6(1),e.Q6J("ngIf",null!=t.logNotifica)}}function U2(i,o){if(1&i&&(e.TgZ(0,"div",129),e.YNc(1,Q2,18,14,"div",130),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.logsFiltered)}}function Y2(i,o){1&i&&(e.TgZ(0,"div",145)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.prenotazioni.nessunLog")))}function R2(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",10)(2,"div",122)(3,"mat-form-field",123)(4,"input",124),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dataLog=a)})("dateChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onDataLogSelect())}),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"mat-datepicker-toggle",125)(7,"mat-datepicker",null,126),e.qZA()()(),e.YNc(9,U2,2,1,"div",127),e.YNc(10,Y2,4,3,"div",128),e.BQk()}if(2&i){const t=e.MAs(8),n=e.oxw(2);e.xp6(4),e.Q6J("matDatepicker",t)("placeholder",e.lcZ(5,8,"globals.data"))("ngModel",n.dataLog)("min",n.prenotazione.arrivo)("max",n.prenotazione.partenza),e.xp6(2),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",null!=n.logsFiltered&&n.logsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",null==n.logsFiltered||0==n.logsFiltered.length)}}function F2(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",148),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openCalcolaRetta())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.prenotazioni.creaPreventivo")))}function H2(i,o){if(1&i&&(e.TgZ(0,"button",158),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){e.oxw();const t=e.MAs(22);e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,"sbm.prenotazioni.workFlows")," ")}}function K2(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",159),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.eseguiWorkFlow(l))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex),e.Q6J("appInvertColor",t.coloreHex),e.xp6(1),e.Oqu(t.descrizione)}}function G2(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",160),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function $2(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",161),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",!t.prenotazione.isEliminata||!t.prenotazione.isNotificataAGestionale),e.xp6(1),e.Oqu(e.lcZ(2,2,"globals.eliminaDefinitivamente"))}}function B2(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",146)(1,"button",147),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.save())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",148),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.print())}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",148),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.printPage())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",149),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openPagamentoDialog())}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",149),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sendEmailPrenotazione())}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",149),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.emettiVoucher())}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.YNc(19,F2,3,3,"button",150),e.YNc(20,H2,3,4,"button",151),e.TgZ(21,"mat-menu",152,153),e.YNc(23,K2,2,4,"button",154),e.qZA(),e.YNc(24,G2,3,3,"button",155),e.YNc(25,$2,3,4,"button",156),e.TgZ(26,"button",157),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.backEvent.emit())}),e._uU(27),e.ALo(28,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,15,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(6,17,"sbm.prenotazioni.stampaPrenotazione")),e.xp6(3),e.Oqu(e.lcZ(9,19,"sbm.prenotazioni.stampaPagina")),e.xp6(2),e.Q6J("disabled",!t.sessionService.is3DSecureAttivo()),e.xp6(1),e.Oqu(e.lcZ(12,21,"sbm.prenotazioni.pagamento")),e.xp6(2),e.Q6J("disabled",null==t.prenotazione.cliente||!t.prenotazione.cliente.email),e.xp6(1),e.Oqu(e.lcZ(15,23,"sbm.prenotazioni.inviaEmail")),e.xp6(2),e.Q6J("disabled",null==t.prenotazione.cliente),e.xp6(1),e.Oqu(e.lcZ(18,25,"sbm.prenotazioni.emettiVoucher")),e.xp6(2),e.Q6J("ngIf",null!=t.prenotazione.cliente&&t.sessionService.isCrmAttivo()),e.xp6(1),e.Q6J("ngIf",null!=t.workFlows&&t.workFlows.length>0),e.xp6(3),e.Q6J("ngForOf",t.workFlows),e.xp6(1),e.Q6J("ngIf",t.sessionService.isAdmin()),e.xp6(1),e.Q6J("ngIf",t.sessionService.isAdmin()&&t.eliminaPrenotazioneEnabled),e.xp6(2),e.Oqu(e.lcZ(28,27,"globals.indietro"))}}const V2=function(i,o){return{"col-9":i,"col-12":o}};function X2(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-tab-group",1),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedIndex=a)})("selectedTabChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onTabChange(a.tab.textLabel))}),e.TgZ(2,"mat-tab",2),e.ALo(3,"translate"),e.TgZ(4,"div",3)(5,"div",4)(6,"mat-card",5)(7,"mat-card-title")(8,"i",6),e._uU(9,"assignment_ind"),e.qZA(),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,Ef,4,6,"div",7),e.YNc(13,Nf,4,6,"div",8),e.YNc(14,Of,3,3,"div",9),e.TgZ(15,"div",10)(16,"div",11)(17,"div")(18,"span",12),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"div")(23,"span",12),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._uU(26),e.ALo(27,"date"),e.ALo(28,"date"),e.qZA(),e.TgZ(29,"div")(30,"span",12),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._uU(33),e.qZA(),e.TgZ(34,"div")(35,"span",12),e._uU(36),e.ALo(37,"translate"),e.qZA(),e._uU(38),e.ALo(39,"date"),e.qZA(),e.TgZ(40,"div")(41,"span",12),e._uU(42),e.ALo(43,"translate"),e.qZA(),e._uU(44),e.ALo(45,"date"),e.qZA(),e.TgZ(46,"div")(47,"span",12),e._uU(48),e.ALo(49,"translate"),e.qZA(),e._uU(50),e.qZA(),e.TgZ(51,"div")(52,"span",12),e._uU(53),e.ALo(54,"translate"),e.qZA(),e._uU(55),e.qZA()(),e.YNc(56,Lf,2,1,"div",13),e.qZA(),e._UZ(57,"hr"),e.TgZ(58,"div")(59,"span",12),e._uU(60),e.ALo(61,"translate"),e.qZA(),e._uU(62),e.qZA(),e.TgZ(63,"div")(64,"span",12),e._uU(65),e.ALo(66,"translate"),e.qZA(),e._uU(67),e.qZA(),e.TgZ(68,"div")(69,"span",12),e._uU(70),e.ALo(71,"translate"),e.qZA(),e._uU(72),e.qZA(),e.TgZ(73,"div")(74,"span",12),e._uU(75),e.ALo(76,"translate"),e.qZA(),e._uU(77),e.qZA(),e.TgZ(78,"div")(79,"span",12),e._uU(80),e.ALo(81,"translate"),e.qZA(),e._uU(82),e.qZA(),e.TgZ(83,"div")(84,"span",12),e._uU(85),e.ALo(86,"translate"),e.qZA(),e._uU(87),e.YNc(88,Df,3,0,"button",14),e.YNc(89,If,5,2,"ng-container",0),e.qZA(),e.TgZ(90,"div")(91,"span",12),e._uU(92),e.ALo(93,"translate"),e.qZA(),e._uU(94),e.qZA(),e.TgZ(95,"div")(96,"span",12),e._uU(97),e.ALo(98,"translate"),e.qZA(),e._uU(99),e.qZA(),e.TgZ(100,"div")(101,"span",12),e._uU(102),e.ALo(103,"translate"),e.qZA(),e._uU(104),e.qZA(),e.TgZ(105,"div")(106,"span",12),e._uU(107),e.ALo(108,"translate"),e.qZA(),e._uU(109),e.qZA(),e.TgZ(110,"div")(111,"span",12),e._uU(112),e.ALo(113,"translate"),e.qZA(),e._uU(114),e.qZA(),e.TgZ(115,"div")(116,"span",12),e._uU(117),e.ALo(118,"translate"),e.qZA(),e._uU(119),e.qZA(),e.TgZ(120,"div")(121,"span",12),e._uU(122),e.ALo(123,"translate"),e.qZA(),e._uU(124),e.qZA(),e.TgZ(125,"div")(126,"span",12),e._uU(127),e.ALo(128,"translate"),e.qZA(),e.TgZ(129,"span"),e._uU(130),e.qZA(),e.TgZ(131,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.setMotivoViaggio())}),e.TgZ(132,"i",16),e._uU(133,"edit"),e.qZA()()(),e.TgZ(134,"div")(135,"span",12),e._uU(136),e.ALo(137,"translate"),e.qZA(),e._uU(138),e.qZA(),e._UZ(139,"hr"),e.TgZ(140,"div")(141,"span",12),e._uU(142),e.ALo(143,"translate"),e.qZA(),e._uU(144),e.qZA(),e.TgZ(145,"div")(146,"span",12),e._uU(147),e.ALo(148,"translate"),e.qZA(),e._uU(149),e.qZA(),e.TgZ(150,"div")(151,"span",12),e._uU(152),e.ALo(153,"translate"),e.qZA(),e._uU(154),e.qZA(),e.TgZ(155,"div")(156,"span",12),e._uU(157),e.ALo(158,"translate"),e.qZA(),e._uU(159),e.qZA(),e.TgZ(160,"div")(161,"span",12),e._uU(162),e.ALo(163,"translate"),e.qZA(),e._uU(164),e.qZA(),e.TgZ(165,"div")(166,"span",12),e._uU(167),e.ALo(168,"translate"),e.qZA(),e._uU(169),e.ALo(170,"date"),e.qZA(),e.TgZ(171,"div"),e.YNc(172,Qf,5,8,"a",17),e.qZA(),e.YNc(173,Yf,2,1,"div",0),e.qZA()(),e.TgZ(174,"div",18),e.YNc(175,$f,97,87,"mat-card",19),e.YNc(176,Bf,5,3,"button",20),e.TgZ(177,"mat-card",21)(178,"div")(179,"span",12),e._uU(180),e.ALo(181,"translate"),e.qZA(),e._uU(182),e.ALo(183,"eurCurrency"),e.qZA(),e.TgZ(184,"div")(185,"span",12),e._uU(186),e.ALo(187,"translate"),e.qZA(),e._uU(188),e.ALo(189,"eurCurrency"),e.qZA(),e.TgZ(190,"div")(191,"div",22)(192,"span"),e._uU(193),e.ALo(194,"translate"),e.qZA(),e.YNc(195,Vf,2,1,"span",23),e.TgZ(196,"span"),e._uU(197,":"),e.qZA()(),e.TgZ(198,"span"),e._uU(199),e.ALo(200,"eurCurrency"),e.qZA()(),e.TgZ(201,"div")(202,"span",12),e._uU(203),e.ALo(204,"translate"),e.qZA(),e._uU(205),e.ALo(206,"eurCurrency"),e.qZA(),e.TgZ(207,"div")(208,"span",12),e._uU(209),e.ALo(210,"translate"),e.qZA(),e.TgZ(211,"span",24),e._uU(212),e.ALo(213,"date"),e.qZA(),e._uU(214),e.ALo(215,"eurCurrency"),e.qZA(),e.TgZ(216,"div")(217,"span",12),e._uU(218),e.ALo(219,"translate"),e.qZA(),e._uU(220),e.ALo(221,"eurCurrency"),e.qZA(),e.TgZ(222,"a",25),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.openAddebiti())}),e._uU(223),e.ALo(224,"translate"),e.qZA(),e.YNc(225,Xf,3,3,"div",26),e.YNc(226,jf,3,3,"div",27),e.qZA(),e.TgZ(227,"div",28)(228,"mat-form-field",29)(229,"textarea",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.prenotazione.noteP=a)}),e.ALo(230,"translate"),e.qZA()()(),e.YNc(231,Wf,5,4,"div",31),e.qZA()(),e.YNc(232,t2,6,4,"mat-card",32),e.TgZ(233,"div",33),e._UZ(234,"app-url",34),e.ALo(235,"translate"),e.qZA(),e.YNc(236,i2,2,4,"app-url",35),e.YNc(237,o2,2,4,"app-url",35),e.YNc(238,n2,2,4,"app-url",35),e.TgZ(239,"a",36),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.associaSondaggio())}),e._uU(240),e.ALo(241,"translate"),e.qZA()(),e.TgZ(242,"mat-tab",37),e.ALo(243,"translate"),e.TgZ(244,"div",33),e.YNc(245,T2,25,4,"div",38),e.YNc(246,x2,4,3,"div",39),e.qZA()(),e.TgZ(247,"mat-tab",37),e.ALo(248,"translate"),e.YNc(249,Z2,2,1,"div",40),e.qZA(),e.TgZ(250,"mat-tab",37),e.ALo(251,"translate"),e.YNc(252,A2,5,4,"ng-template",41),e._UZ(253,"app-messaggi-send",42),e.qZA(),e.TgZ(254,"mat-tab"),e.YNc(255,w2,5,4,"ng-template",41),e.TgZ(256,"div",33),e.YNc(257,M2,4,2,"div",43),e.YNc(258,P2,2,4,"div",44),e.YNc(259,k2,4,3,"div",39),e.qZA()(),e.TgZ(260,"mat-tab",37),e.ALo(261,"translate"),e.TgZ(262,"div",33),e._UZ(263,"app-transazioni",45),e.qZA()(),e.TgZ(264,"mat-tab",37),e.ALo(265,"translate"),e.TgZ(266,"div",33)(267,"mat-checkbox",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.timeline=a)}),e._uU(268),e.ALo(269,"translate"),e.qZA(),e.TgZ(270,"div",47)(271,"mat-accordion")(272,"mat-expansion-panel",48,49)(274,"mat-expansion-panel-header"),e._uU(275),e.ALo(276,"translate"),e.qZA(),e._UZ(277,"app-notifiche-email",45),e.qZA(),e.TgZ(278,"mat-expansion-panel",48,50)(280,"mat-expansion-panel-header"),e._uU(281),e.ALo(282,"translate"),e.qZA(),e._UZ(283,"app-operazioni",51),e.qZA(),e.TgZ(284,"mat-expansion-panel",52,53)(286,"mat-expansion-panel-header"),e._uU(287),e.ALo(288,"translate"),e.qZA(),e._UZ(289,"app-disponibilita-pubblicate",51),e.qZA(),e.YNc(290,S2,6,4,"mat-expansion-panel",54),e.YNc(291,y2,6,5,"mat-expansion-panel",54),e.qZA(),e.YNc(292,J2,5,4,"div",55),e.qZA(),e.YNc(293,R2,11,10,"ng-container",0),e.qZA()()(),e.YNc(294,B2,29,29,"div",56),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(3,131,"sbm.prenotazioni.generale")),e.xp6(8),e.hij(" ",e.lcZ(11,133,"sbm.prenotazioni.prenotazione")+(t.prenotazione.codicePrenotazione?" #"+t.prenotazione.codicePrenotazione:t.prenotazione.codiceOTA?" #"+t.prenotazione.codiceOTA:"")," "),e.xp6(2),e.Q6J("ngIf",!t.utility.isNullDate(t.prenotazione.dataCancellazione)),e.xp6(1),e.Q6J("ngIf",!t.utility.isNullDate(t.prenotazione.dataRichiestaCancellazione)&&t.utility.isNullDate(t.prenotazione.dataCancellazione)),e.xp6(1),e.Q6J("ngIf",!t.prenotazione.importata&&null!=t.prenotazione.modalitaPagamento&&!t.prenotazione.modalitaPagamento.isPrenotazioniConfermateAutomaticamente),e.xp6(2),e.Q6J("ngClass",e.WLB(259,V2,null!=t.prenotazione.tipoCamera&&!!t.prenotazione.tipoCamera.urlImmagine,null==t.prenotazione.tipoCamera||!t.prenotazione.tipoCamera.urlImmagine)),e.xp6(3),e.Oqu(e.lcZ(20,135,"bo.prenotazione.proprieta.portaleXAlbergo")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.portaleXAlbergo&&t.prenotazione.portaleXAlbergo.nome?t.prenotazione.portaleXAlbergo.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(25,137,"bo.prenotazione.proprieta.dataPren")+": "),e.xp6(2),e.AsE(" ",t.prenotazione.dataPren?e.xi3(27,139,t.prenotazione.dataPren,"dd/MM/yyyy"):"---"," - ",e.xi3(28,142,t.prenotazione.dataCreazione,"HH:mm"),""),e.xp6(5),e.Oqu(e.lcZ(32,145,"bo.prenotazione.proprieta.codiceOTA")+": "),e.xp6(2),e.hij(" ",t.prenotazione.codiceOTA?t.prenotazione.codiceOTA:"---",""),e.xp6(3),e.Oqu(e.lcZ(37,147,"bo.prenotazione.proprieta.arrivo")+": "),e.xp6(2),e.hij(" ",t.prenotazione.arrivo?e.xi3(39,149,t.prenotazione.arrivo,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(43,152,"bo.prenotazione.proprieta.partenza")+": "),e.xp6(2),e.hij(" ",t.prenotazione.partenza?e.xi3(45,154,t.prenotazione.partenza,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(49,157,"bo.prenotazione.proprieta.notti")+": "),e.xp6(2),e.hij(" ",t.prenotazione.notti?t.prenotazione.notti:"---",""),e.xp6(3),e.Oqu(e.lcZ(54,159,"bo.prenotazione.proprieta.pax")+": "),e.xp6(2),e.hij(" ",t.prenotazione.pax?t.prenotazione.pax:"---",""),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione.tipoCamera&&!!t.prenotazione.tipoCamera.urlImmagine),e.xp6(4),e.Oqu(e.lcZ(61,161,"bo.prenotazione.proprieta.tipoCameraOTA")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.tipoCameraOTA?t.prenotazione.tipoCameraOTA.descrizione?t.prenotazione.tipoCameraOTA.descrizione:"---":null!=t.prenotazione.tipoCamera&&t.prenotazione.tipoCamera.nome?t.prenotazione.tipoCamera.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(66,163,"bo.prenotazione.proprieta.tariffaOTA")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.tariffaOTA?t.prenotazione.tariffaOTA.descrizione?t.prenotazione.tariffaOTA.descrizione:"---":null!=t.prenotazione.trattamento&&t.prenotazione.trattamento.nome?t.prenotazione.trattamento.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(71,165,"bo.prenotazione.proprieta.promozione")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.promozione&&t.prenotazione.promozione.nome?t.prenotazione.promozione.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(76,167,"bo.prenotazione.proprieta.codicePromozione")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.codicePromozione&&t.prenotazione.codicePromozione.codice?t.prenotazione.codicePromozione.codice:"---",""),e.xp6(3),e.Oqu(e.lcZ(81,169,"bo.prenotazione.proprieta.cancellazione")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.cancellazione&&t.prenotazione.cancellazione.nome?t.prenotazione.cancellazione.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(86,171,"bo.prenotazione.proprieta.modalitaPagamento")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.modalitaPagamento&&t.prenotazione.modalitaPagamento.nome?t.prenotazione.modalitaPagamento.nome:"---"," "),e.xp6(1),e.Q6J("ngIf",t.modificaModalitaPagamentoPrenotazioneEnabled),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione.transazione),e.xp6(3),e.Oqu(e.lcZ(93,173,"bo.prenotazione.proprieta.tipoPrenotazione")+": "),e.xp6(2),e.hij(" ",t.getEnumKeyOriginal(t.enumTipoPrenotazione,t.prenotazione.tipoPrenotazione),""),e.xp6(3),e.Oqu(e.lcZ(98,175,"bo.prenotazione.proprieta.sourceBrand")+": "),e.xp6(2),e.hij(" ",t.prenotazione.sourceBrand?t.prenotazione.sourceBrand:"---",""),e.xp6(3),e.Oqu(e.lcZ(103,177,"bo.prenotazione.proprieta.parametroMercato")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.parametroMercato&&t.prenotazione.parametroMercato.descrizione?t.prenotazione.parametroMercato.descrizione:"---",""),e.xp6(3),e.Oqu(e.lcZ(108,179,"bo.prenotazione.proprieta.parametroCanaleVendita")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.parametroCanaleVendita&&t.prenotazione.parametroCanaleVendita.descrizione?t.prenotazione.parametroCanaleVendita.descrizione:"---",""),e.xp6(3),e.Oqu(e.lcZ(113,181,"bo.prenotazione.proprieta.parametroSegmento")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.parametroSegmento&&t.prenotazione.parametroSegmento.descrizione?t.prenotazione.parametroSegmento.descrizione:"---",""),e.xp6(3),e.Oqu(e.lcZ(118,183,"bo.prenotazione.proprieta.parametroFonte")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.parametroFonte&&t.prenotazione.parametroFonte.descrizione?t.prenotazione.parametroFonte.descrizione:"---",""),e.xp6(3),e.Oqu(e.lcZ(123,185,"bo.prenotazione.proprieta.sondaggio")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.sondaggio&&t.prenotazione.sondaggio.nome?t.prenotazione.sondaggio.nome:"---",""),e.xp6(3),e.hij(" ",e.lcZ(128,187,"bo.prenotazione.proprieta.motivoViaggio")+": "," "),e.xp6(3),e.hij(" ",null!=t.prenotazione.motivoViaggio&&t.prenotazione.motivoViaggio.nome?t.prenotazione.motivoViaggio.nome:"---"," "),e.xp6(6),e.Oqu(e.lcZ(137,189,"bo.prenotazione.proprieta.agenzia")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.agenzia&&t.prenotazione.agenzia.ragioneSociale?t.prenotazione.agenzia.ragioneSociale:"---",""),e.xp6(4),e.Oqu(e.lcZ(143,191,"bo.prenotazione.proprieta.sistemazione")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.sistemazione&&t.prenotazione.sistemazione.nome?t.prenotazione.sistemazione.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(148,193,"bo.prenotazione.proprieta.oraArrivo")+": "),e.xp6(2),e.hij(" ",t.prenotazione.oraArrivo?t.prenotazione.oraArrivo:"---",""),e.xp6(3),e.Oqu(e.lcZ(153,195,"bo.prenotazione.proprieta.camera")+": "),e.xp6(2),e.hij(" ",t.prenotazione.camera?t.prenotazione.camera:"---",""),e.xp6(3),e.Oqu(e.lcZ(158,197,"bo.prenotazione.proprieta.supplementi")+": "),e.xp6(2),e.hij(" ",t.prenotazione.supplementi?t.prenotazione.supplementi:"---",""),e.xp6(3),e.Oqu(e.lcZ(163,199,"bo.prenotazione.proprieta.motivoRifiuto")+": "),e.xp6(2),e.hij(" ",t.prenotazione.motivoRifiuto?t.prenotazione.motivoRifiuto:"---",""),e.xp6(3),e.Oqu(e.lcZ(168,201,"bo.prenotazione.proprieta.scadOpz")+": "),e.xp6(2),e.hij(" ",t.prenotazione.scadOpz?e.xi3(170,203,t.prenotazione.scadOpz,"dd/MM/yyyy"):"---",""),e.xp6(3),e.Q6J("ngIf",null!=t.prenotazione.preventivo),e.xp6(1),e.Q6J("ngIf",t.impostaComeImportataEnabled),e.xp6(2),e.Q6J("ngIf",null!=t.prenotazione.cliente),e.xp6(1),e.Q6J("ngIf",null==t.prenotazione.cliente),e.xp6(4),e.Oqu(e.lcZ(181,206,"bo.prenotazione.proprieta.importo")+": "),e.xp6(2),e.hij(" ",t.prenotazione.importo?e.lcZ(183,208,t.prenotazione.importo):"---",""),e.xp6(4),e.Oqu(e.lcZ(187,210,"bo.prenotazione.proprieta.sconto")+": "),e.xp6(2),e.hij(" ",t.prenotazione.sconto?e.lcZ(189,212,t.prenotazione.sconto):"---",""),e.xp6(5),e.Oqu(e.lcZ(194,214,"bo.prenotazione.proprieta.scontoVoucher")),e.xp6(2),e.Q6J("ngIf",null!=t.voucherUtilizzato),e.xp6(4),e.Oqu(t.prenotazione.scontoVoucher?e.lcZ(200,216,t.prenotazione.scontoVoucher):"---"),e.xp6(4),e.Oqu(e.lcZ(204,218,"bo.prenotazione.proprieta.totale")+": "),e.xp6(2),e.hij(" ",e.lcZ(206,220,t.prenotazione.importo-t.prenotazione.sconto-t.prenotazione.scontoVoucher),""),e.xp6(4),e.Oqu(e.lcZ(210,222,"bo.prenotazione.proprieta.caparra")+": "),e.xp6(3),e.Oqu(t.prenotazione.dataCreazioneCaparra?" del "+e.xi3(213,224,t.prenotazione.dataCreazioneCaparra,"dd/MM/yyyy"):":"),e.xp6(2),e.hij(" ",t.prenotazione.caparra?e.lcZ(215,227,t.prenotazione.caparra):"---"," "),e.xp6(4),e.Oqu(e.lcZ(219,229,"bo.prenotazione.proprieta.saldo")+": "),e.xp6(2),e.hij(" ",e.lcZ(221,231,t.getSaldo()),""),e.xp6(3),e.Oqu(e.lcZ(224,233,"sbm.prenotazioni.dettagli")),e.xp6(2),e.Q6J("ngIf",t.prenotazione.isPrezziScontati),e.xp6(1),e.Q6J("ngIf",!!t.prenotazione.upgradeCamera),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(1),e.Q6J("placeholder",e.lcZ(230,235,"bo.prenotazione.proprieta.noteP"))("ngModel",t.prenotazione.noteP),e.xp6(2),e.Q6J("ngIf",!!t.noteSelfCheckin),e.xp6(1),e.Q6J("ngIf",null!=t.workFlowsEseguiti&&t.workFlowsEseguiti.length>0),e.xp6(2),e.Q6J("placeholder",e.lcZ(235,237,"sbm.prenotazioni.urlCheckIn"))("url",t.getUrlCheckIn()),e.xp6(2),e.Q6J("ngIf",t.sessionService.isMySelfAttivo()&&null!=(null==t.prenotazione.portaleXAlbergo?null:t.prenotazione.portaleXAlbergo.ubicazioneIstat)&&(!!t.prenotazione.codicePrenotazione||!!t.prenotazione.codiceOTA)&&!(null==t.prenotazione.cliente||!t.prenotazione.cliente.cognome)),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione.sondaggio),e.xp6(1),e.Q6J("ngIf",t.isVisualizzaUrlWebBookingExtra),e.xp6(2),e.Oqu(e.lcZ(241,239,"sbm.prenotazioni.associaSondaggio")),e.xp6(2),e.Q6J("label",e.lcZ(243,241,"sbm.prenotazioni.ospiti")),e.xp6(3),e.Q6J("ngIf",null!=t.ospiti&&t.ospiti.length>0),e.xp6(1),e.Q6J("ngIf",null==t.ospiti||0==t.ospiti.length),e.xp6(1),e.Q6J("label",e.lcZ(248,243,"sbm.prenotazioni.voucher")),e.xp6(2),e.Q6J("ngIf",2==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(251,245,"sbm.prenotazioni.messaggi")),e.xp6(3),e.Q6J("_prenotazione",t.prenotazione)("messaggi",t.messaggi)("mittente",t.enumMittente.Hotel)("nomeAlbergo",t.sessionService.getNomeAlbergo())("nomePortale",null!=t.prenotazione.portaleXAlbergo?t.prenotazione.portaleXAlbergo.nomeStruttura:null)("booking",!1),e.xp6(4),e.Q6J("ngIf",!!t.testoUpSellingCamera),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazioniExtra&&t.prenotazioniExtra.length>0),e.xp6(1),e.Q6J("ngIf",!t.testoUpSellingCamera&&(null==t.prenotazioniExtra||0==t.prenotazioniExtra.length)),e.xp6(1),e.Q6J("label",e.lcZ(261,247,"sbm.prenotazioni.pagamenti")),e.xp6(3),e.Q6J("data",t.transazioni),e.xp6(1),e.Q6J("label",e.lcZ(265,249,"sbm.prenotazioni.log")),e.xp6(3),e.Q6J("ngModel",t.timeline),e.xp6(1),e.hij(" ",e.lcZ(269,251,"sbm.prenotazioni.timeline")," "),e.xp6(2),e.Q6J("hidden",t.timeline),e.xp6(5),e.hij(" ",e.lcZ(276,253,"sbm.prenotazioni.notificheEmail")," "),e.xp6(2),e.Q6J("data",t.notifiche),e.xp6(4),e.hij(" ",e.lcZ(282,255,"sbm.prenotazioni.logOperazioni")," "),e.xp6(2),e.Q6J("_data",t.logOperazioni),e.xp6(4),e.hij(" ",e.lcZ(288,257,"sbm.prenotazioni.logDisponibilita")," "),e.xp6(2),e.Q6J("_data",t.logDisponibilita),e.xp6(1),e.Q6J("ngIf",null!=t.logBilanciamento&&t.logBilanciamento.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.logModifiche&&t.logModifiche.length>0),e.xp6(1),e.Q6J("ngIf",!!t.prenotazione.noteImportazioneWelcome),e.xp6(1),e.Q6J("ngIf",t.timeline),e.xp6(1),e.Q6J("ngIf",!t.modal)}}class Lt extends f.H{set _prenotazione(o){if(null!=o){if(this.setIsLoading(!0),this.prenotazione=o,this.isVisualizzaUrlWebBookingExtra=u(this.prenotazione.arrivo)>=u().startOf("day"),null!=this.prenotazione.cliente)try{null!=this.prenotazione.cliente.mercato&&(this.prenotazione.cliente.mercato.coloreHex=Z(this.prenotazione.cliente.mercato.colore).hex()),null!=this.prenotazione.cliente.canaleVendita&&(this.prenotazione.cliente.canaleVendita.coloreHex=Z(this.prenotazione.cliente.canaleVendita.colore).hex())}catch(t){}setTimeout(()=>{this.panel1.close(),this.panel2.close(),this.panel3.close(),null!=this.panel4&&this.panel4.close(),null!=this.panel5&&this.panel5.close()},200),this.selectedIndex=0,this.timeline=!1,this.notifiche=[],this.transazioni=[],this.logOperazioni=[],this.logDisponibilita=[],this.logBilanciamento=[],this.logModifiche=[],this.ospiti=[],this.messaggi=[],this.numeroMessaggiNonLetti=0,this.workFlowsEseguiti=[],this.voucher=[],this.voucherUtilizzato=null,this.prenotazioniExtra=[],this.logs=[],this.logsFiltered=[],this.dataLog=this.prenotazione.arrivo,this.noteSelfCheckin=null,this.apiService.getPrenotazioneDetails(this.prenotazione.oid).subscribe(t=>{this.notifiche=t.data.notificheMail,this.transazioni=t.data.transazioni,this.logOperazioni=t.data.logOperazioni,this.logDisponibilita=t.data.logDisponibilita,this.logBilanciamento=t.data.logBilanciamento,this.logModifiche=t.data.storicoPrenotazione,this.ospiti=t.data.ospiti,this.messaggi=t.data.messaggi,this.numeroMessaggiNonLetti=this.messaggi.filter(n=>null==n.dataVisualizzazione&&n.mittente==c.VM.Cliente).length,this.voucher=t.data.voucher,this.voucherUtilizzato=t.data.voucherUtilizzato,this.importoPrimaNotte=t.data.importoPrimaNotte,this.importiGiornalieri=t.data.importiGiornalieri,this.upSellingCamera=t.data.upSellingCamera,this.prenotazioniExtra=t.data.prenotazioniExtra,this.noteSelfCheckin=t.data.noteSelfCheckin,this.updateLogs(),null!=this.upSellingCamera?this.testoUpSellingCamera=this.localizationService.getTranslationSync("sbm.prenotazioni.upSellingRichiesto",{data:this.getDate(this.upSellingCamera.dataCreazione,"DD/MM/YYYY"),camera:null!=this.upSellingCamera.tipoCamera?this.upSellingCamera.tipoCamera.nome:"",prezzo:this.upSellingCamera.prezzo}):this.testoUpSellingCamera=null,this.workFlows=t.data.workFlows;try{for(let n of this.workFlows)n.coloreHex=Z(n.colore).hex()}catch(n){}this.workFlowsEseguiti=t.data.workFlowsEseguiti;try{for(let n of this.workFlowsEseguiti)n.coloreHex=Z(n.colore).hex()}catch(n){}this.setIsLoading(!1)})}}constructor(o,t,n,a,l){super(),this.apiService=o,this.utility=t,this.sessionService=n,this.localizationService=a,this.navigationService=l,this.modal=!1,this.backEvent=new e.vpe,this.enumTipoPrenotazione=c.DS,this.selectedIndex=0,this.enumMittente=c.VM,this.enumRuolo=c.Gt,this.eliminaPrenotazioneEnabled=!0,this.modificaModalitaPagamentoPrenotazioneEnabled=!1,this.enumTipoComponentePrenotazione=c.dE,this.importoPrimaNotte=0,this.importiGiornalieri=[],this.enumTipoOperazione=c.SV,this.enumTipoModifica=c.dn,this.enumStato=c.V6,this.timeline=!1,this.numeroMessaggiNonLetti=0,this.displayedColumnsOspiti=["nome","cognome","tipoComponentePrenotazione","email","cellulare","eta","isCheckInOnlineEseguito"],this.impostaComeImportataEnabled=!0}ngOnInit(){let o=this.sessionService.getPermessiUtente();null!=o&&(this.eliminaPrenotazioneEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.EliminazionePrenotazione)),this.modificaModalitaPagamentoPrenotazioneEnabled=o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaModalitaPagamentoPrenotazione)),this.impostaComeImportataEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ImpostaPrenotazioneComeImportataManualmente)))}delete(){this.showDialogConfirm("sbm.prenotazioni.eliminarePrenotazione").then(o=>{this.setIsLoading(!0),this.apiService.deletePrenotazione(this.prenotazione.oid).subscribe(()=>{this.backEvent.emit()})},o=>{})}sendEmail(){if(null!=this.prenotazione.cliente){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;n.cliente=this.prenotazione.cliente,n.prenotazione=this.prenotazione,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.aggiornaLog()})}}getSaldo(){return null!=this.prenotazione?this.prenotazione.importo-this.prenotazione.sconto-this.prenotazione.scontoVoucher-this.prenotazione.caparra:0}sendSms(){if(null!=this.prenotazione.cliente){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(ct,o),n=t.componentInstance;n.numero=this.prenotazione.cliente.cellulare,n.dialogRef=t}}sendEmailPrenotazione(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;n.tipoTemplate=c.hQ.Prenotazione,n.prenotazione=this.prenotazione,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.aggiornaLog()})}aggiornaLog(){this.setIsLoading(!0),this.apiService.getPrenotazioneDetails(this.prenotazione.oid).subscribe(o=>{this.notifiche=o.data.notificheMail,this.logOperazioni=o.data.logOperazioni,this.transazioni=o.data.transazioni,this.updateLogs(),this.setIsLoading(!1)})}print(){let o=new d.Zpt;o.width="50vw";let n=this.showModalDialog(Vt,o).componentInstance;n.tipoTemplate=c.hQ.Prenotazione,n.prenotazione=this.prenotazione}printPage(){window.print()}getUrlWebBookingExtra(){return window.location.origin+"/booking?extraSelect=true&uid="+this.prenotazione.uid}getUrlCheckIn(){return window.location.origin+"/booking/self-checkin?uid="+this.prenotazione.uid}getUrlMySelf(){return window.location.origin+"/myself?oidUbicazioneIstat="+this.prenotazione.portaleXAlbergo.ubicazioneIstat.oid+"&codicePrenotazione="+(this.prenotazione.codicePrenotazione?this.prenotazione.codicePrenotazione:this.prenotazione.codiceOTA)+"&cognome="+this.prenotazione.cliente.cognome}getUrlSondaggio(){return window.location.origin+"/booking/sondaggio?oidPrenotazione="+this.prenotazione.oid}associaSondaggio(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Vi,o),n=t.componentInstance;n.prenotazione=this.prenotazione,n.dialogRef=t}openPreventivo(){this.utility.openUrlInNewTab("/sbm/home/(homeOutlet:preventivi)?oidPreventivo="+this.prenotazione.preventivo.oid)}openPagamentoDialog(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog(Bt,o),n=t.componentInstance;n.prenotazione=this.prenotazione,n.importoPrimaNotte=this.importoPrimaNotte,n.importiGiornalieri=this.importiGiornalieri,n.dialogRef=t,t.afterClosed().subscribe(a=>{(null!=a||n.urlPaymail)&&this.aggiornaLog()})}editCliente(){let o;o=null==this.prenotazione.cliente?new v.c1h(-1):Object.assign({},this.prenotazione.cliente);let t=new d.Zpt;t.width="80vw";let n=this.showModalDialog(we.J,t),a=n.componentInstance;a.cliente=o,a.dialogRef=n,a.linguaDefault=this.sessionService.sessione.albergo.linguaDefaultClientePreventivo,n.afterClosed().subscribe(l=>{if(null!=l&&l.oid>0){this.prenotazione.cliente=l,this.setIsLoading(!0);let r=JSON.parse(JSON.stringify(this.prenotazione));r.isModificaCliente=!0,this.apiService.setPrenotazione(r).subscribe(()=>{this.aggiornaLog()})}})}emettiVoucher(){if(null!=this.prenotazione.cliente){let o=new d.Zpt;o.width="50vw";let n=this.showModalDialog(Xi,o).componentInstance;n.prenotazione=this.prenotazione;let a=n.voucherSaved.subscribe(l=>{this.voucher.push(l),this.voucher=this.voucher.slice(),a.unsubscribe()})}}save(o=!0){this.setIsLoading(!0),this.apiService.setPrenotazione(this.prenotazione).subscribe(()=>{this.setIsLoading(!1),o&&this.showInfo("sbm.prenotazioni.prenotazioneSalvata")})}onDataLogSelect(o=!0){o?(this.setIsLoading(!0),setTimeout(()=>{this.logsFiltered=this.logs.filter(t=>!t.data||this.getDate(t.data)==this.getDate(this.dataLog)),this.setIsLoading(!1)},1e3)):this.logsFiltered=this.logs.filter(t=>!t.data||this.getDate(t.data)==this.getDate(this.dataLog))}openDetailOperazione(o){let t=new d.Zpt;t.width="80vw",this.showModalDialog(jt,t).componentInstance.logOperazione=o}openDetailDisponibilita(o){let t=new d.Zpt;t.width="80vw",this.showModalDialog(Xt,t).componentInstance.log=o}onTabChange(o){o==this.localizationService.getTranslationSync("sbm.prenotazioni.messaggi")&&this.numeroMessaggiNonLetti>0&&(this.numeroMessaggiNonLetti=0,this.apiService.impostaMessaggiLettiPrenotazione(this.prenotazione.oid).subscribe(()=>{this.navigationService.refreshContatoriMenu()}))}openTransazioneDetails(){let o=new d.Zpt;o.width="80vw",this.showModalDialog(xt,o).componentInstance.prenotazione=this.prenotazione}setMotivoViaggio(){null!=this.motiviViaggio?this.openMotivoViaggioSelect():(this.setIsLoading(!0),this.apiService.getMotiviViaggioViewSelect().subscribe(o=>{this.motiviViaggio=o.data,this.setIsLoading(!1),this.openMotivoViaggioSelect()}))}openMotivoViaggioSelect(){let o=new d.Zpt;o.width="400px",o.height="40vh";let t=this.showModalDialog(Ac.H,o),n=t.componentInstance;n.dialogRef=t,n.title="bo.prenotazione.proprieta.motivoViaggio",n.data=this.motiviViaggio,n.displayMember="nome",n.value=this.prenotazione.motivoViaggio,t.afterClosed().subscribe(a=>{null!=a&&(this.prenotazione.motivoViaggio=a,this.save(!1))})}setModalitaPagamento(){null!=this.modalitaPagamento?this.openModalitaPagamentoSelect():(this.setIsLoading(!0),this.apiService.getModalitaPagamentoViewSelect(null,!1).subscribe(o=>{this.modalitaPagamento=o.data,this.setIsLoading(!1),this.openModalitaPagamentoSelect()}))}openModalitaPagamentoSelect(){let o=new d.Zpt;o.width="400px",o.height="40vh";let t=this.showModalDialog(Ac.H,o),n=t.componentInstance;n.dialogRef=t,n.title="bo.prenotazione.proprieta.modalitaPagamento",n.data=this.modalitaPagamento,n.displayMember="nome",n.value=this.prenotazione.modalitaPagamento,t.afterClosed().subscribe(a=>{if(null!=a){this.prenotazione.modalitaPagamento=a,this.setIsLoading(!0);let l=new d.yjd;l.oidPrenotazione=this.prenotazione.oid,l.oidModalitaPagamento=a.oid,this.apiService.impostaModalitaPagamentoPrenotazione(l).subscribe(()=>{this.setIsLoading(!1)})}})}eseguiWorkFlow(o){this.showDialogConfirm("sbm.prenotazioni.eseguireWorkFlow").then(t=>{this.setIsLoading(!0);let n=new d.FoD;n.oidWorkFlow=o.oid,n.oidPrenotazione=this.prenotazione.oid,this.apiService.eseguiWorkFlowPrenotazione(n).subscribe(a=>{if(null!=a&&null!=a.data){this.workFlowsEseguiti=a.data.workFlowsEseguiti;try{for(let l of this.workFlowsEseguiti)l.coloreHex=Z(l.colore).hex()}catch(l){}}this.setIsLoading(!1)})},t=>{})}openAddebiti(){let o=new d.Zpt;o.width="60vw",o.minHeight="30vh",this.showModalDialog(Bi,o).componentInstance.oidPrenotazione=this.prenotazione.oid}setPrenotazioneImportata(){this.setIsLoading(!0),this.apiService.impostaPrenotazioneImportata(this.prenotazione.oid).subscribe(()=>{this.prenotazione.importata=!0,this.aggiornaLog()})}updateLogs(){this.logs=this.logOperazioni.map(o=>new d.G1h(null,o.data,o)).concat(this.logDisponibilita.map(o=>new d.G1h(o.giorno,o.dataPubblicazione,null,o))).concat(this.notifiche.map(o=>new d.G1h(null,o.dataInvio,null,null,o))).sort((o,t)=>u(o.dataVisualizzata)<u(t.dataVisualizzata)?-1:u(o.dataVisualizzata)>u(t.dataVisualizzata)?1:0),this.onDataLogSelect(!1)}setBlackList(){this.showDialogConfirm("sbm.prenotazioni."+(this.prenotazione.cliente.blackList?"togliereBlackList":"inserireBlackList")).then(o=>{this.setIsLoading(!0),this.prenotazione.cliente.blackList=!this.prenotazione.cliente.blackList,this.apiService.setCliente(this.prenotazione.cliente).subscribe(()=>this.setIsLoading(!1))},o=>{})}openCalcolaRetta(){let o=new d.Zpt;o.width="80vw",o.minHeight="80vh",o.maxHeight="95vh",o.panelClass="no-padding-dialog";let t=this.showModalDialog(ut,o),n=t.componentInstance;n.cliente=this.prenotazione.cliente,n.dialogRef=t}}Lt.\u0275fac=function(o){return new(o||Lt)(e.Y36(A.s),e.Y36(C.t),e.Y36(j.m),e.Y36(Oe.o),e.Y36(Ae.f))},Lt.\u0275cmp=e.Xpm({type:Lt,selectors:[["app-prenotazioni-edit"]],viewQuery:function(o,t){if(1&o&&(e.Gf(Pf,5),e.Gf(kf,5),e.Gf(Sf,5),e.Gf(yf,5),e.Gf(Jf,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.panel1=n.first),e.iGM(n=e.CRH())&&(t.panel2=n.first),e.iGM(n=e.CRH())&&(t.panel3=n.first),e.iGM(n=e.CRH())&&(t.panel4=n.first),e.iGM(n=e.CRH())&&(t.panel5=n.first)}},inputs:{modal:"modal",_prenotazione:"_prenotazione"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"prenotazioniEditTabGroup",3,"selectedIndex","selectedIndexChange","selectedTabChange"],[1,"p-1",3,"label"],[1,"row","mr-0","ml-0","mt-3"],[1,"col-6","pl-0","pr-1"],[1,"p-3","border","rounded","mat-elevation-z0"],[1,"material-icons","icon-big"],["class","cancellataIl pr-2 pl-2 pt-1 pb-1 font-weight-bold mb-2 d-table",4,"ngIf"],["class","richiestaCancellazioneIl pr-2 pl-2 pt-1 pb-1 font-weight-bold mb-2 d-table",4,"ngIf"],["class","prenotazioneInAttesaDiConfermaManuale pr-2 pl-2 pt-1 pb-1 font-weight-bold mb-2 d-table",4,"ngIf"],[1,"row"],[3,"ngClass"],[1,"font-weight-bold"],["class","col-3",4,"ngIf"],["mat-icon-button","","color","primary","class","edit-button ml-1 mr-1",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",1,"edit-button","ml-1",3,"click"],[1,"material-icons"],["class","preventivo font-weight-bold mt-2 d-block",3,"click",4,"ngIf"],[1,"col-6","pr-0","pl-1"],["class","p-3 border rounded mat-elevation-z0 mb-2",4,"ngIf"],["mat-flat-button","","color","primary","class","mb-3",3,"click",4,"ngIf"],[1,"p-3","border","rounded","mat-elevation-z0","mb-2","text-right"],[1,"d-inline-block","font-weight-bold","mr-1"],["class","codiceVoucher",4,"ngIf"],[1,"dataCreazioneCaparra"],["href","#",1,"d-block","mt-2","font-weight-bold",3,"click"],["class","mt-3 isPrezziScontati",4,"ngIf"],["class","mt-3 upgradeCamera",4,"ngIf"],[1,"border","rounded","p-3","bg-white"],[1,"w-100","note-textarea",3,"floatLabel"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5",3,"placeholder","ngModel","ngModelChange"],["class","border rounded p-3 bg-white mt-3 noteSelfCheckin",4,"ngIf"],["class","mt-3 mat-elevation-z1 border p-0",4,"ngIf"],[1,"mt-3"],[3,"placeholder","url"],[3,"placeholder","url",4,"ngIf"],[1,"d-block","font-weight-bold",3,"click"],[3,"label"],["class","mat-table-container-border-rounded",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],["class","mt-3",4,"ngIf"],["mat-tab-label",""],[3,"_prenotazione","messaggi","mittente","nomeAlbergo","nomePortale","booking"],["class","font-weight-bold",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"data"],["color","primary",1,"d-inline-block","mb-3","timeline-checkbox",3,"ngModel","ngModelChange"],[3,"hidden"],[1,"border","mat-elevation-z0","mb-3"],["panel1",""],["panel2",""],[3,"_data"],[1,"mt-3","border","mat-elevation-z0","mb-3"],["panel3",""],["class","mt-3 border mat-elevation-z0 mb-3",4,"ngIf"],["class","p-3 border rounded mb-3 bg-white",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"cancellataIl","pr-2","pl-2","pt-1","pb-1","font-weight-bold","mb-2","d-table"],[1,"richiestaCancellazioneIl","pr-2","pl-2","pt-1","pb-1","font-weight-bold","mb-2","d-table"],[1,"prenotazioneInAttesaDiConfermaManuale","pr-2","pl-2","pt-1","pb-1","font-weight-bold","mb-2","d-table"],[1,"col-3"],[1,"w-100","border","rounded",3,"src"],["mat-icon-button","","color","primary",1,"edit-button","ml-1","mr-1",3,"click"],["href","#",1,"color-pink",3,"click"],[1,"preventivo","font-weight-bold","mt-2","d-block",3,"click"],["class","impostaComeImportata font-weight-bold mt-2 d-block",3,"click",4,"ngIf"],[1,"impostaComeImportata","font-weight-bold","mt-2","d-block",3,"click"],[1,"p-3","border","rounded","mat-elevation-z0","mb-2"],[3,"class",4,"ngIf"],["mat-icon-button","","color","primary",1,"align-middle","ml-2","mb-2","prenotazione-cliente-edit-button",3,"click"],[1,"material-icons","prenotazione-cliente-edit-icon"],["href","#",3,"click"],[1,"rounded-xl","p-1","parametro-ricerca",3,"appInvertColor"],["mat-button","","color","primary",1,"mr-1",3,"disabled","click"],[1,"far","fa-paper-plane","icon-md24","mb-1"],[1,"far","fa-envelope","icon-md24","mb-1"],["mat-button","","color","primary",3,"disabled","click"],[1,"fa","fa-whatsapp","icon-md24","mb-1"],[4,"ngFor","ngForOf"],[3,"matTooltip"],["mat-flat-button","","color","primary",1,"mb-3",3,"click"],[1,"material-icons","mr-2"],[1,"codiceVoucher"],[1,"mt-3","isPrezziScontati"],[1,"mt-3","upgradeCamera"],[1,"border","rounded","p-3","bg-white","mt-3","noteSelfCheckin"],[1,"mb-1","color-pink","font-small"],[3,"_text"],[1,"mt-3","mat-elevation-z1","border","p-0"],[1,"p-3","mb-0"],[1,"pr-3","pl-3","pb-3"],["class","mr-2 mb-2 p-2 rounded-lg",3,"backgroundColor","appInvertColor",4,"ngFor","ngForOf"],[1,"mr-2","mb-2","p-2","rounded-lg",3,"appInvertColor"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","cognome"],["matColumnDef","tipoComponentePrenotazione"],["matColumnDef","email"],["matColumnDef","cellulare"],["matColumnDef","eta"],["matColumnDef","isCheckInOnlineEseguito"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"d-inline-block","align-middle","mr-2"],[1,"d-inline-block","align-middle","numero"],["class","tipoCameraImage mt-3 rounded-lg",3,"src",4,"ngIf"],[1,"tipoCameraImage","mt-3","rounded-lg",3,"src"],["panel4",""],["panel5",""],[3,"prenotazione","data"],[1,"p-3","border","rounded","mb-3","bg-white"],[1,"mb-3"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","min","max","ngModelChange","dateChange"],["matSuffix","",3,"for"],["datePickerData",""],["class","border rounded p-4 bg-white d-table",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-3 bg-white",4,"ngIf"],[1,"border","rounded","p-4","bg-white","d-table"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"d-inline-block","text-right","pr-4","position-relative",3,"ngClass"],[1,"font-weight-bold","font-italic","data"],[1,"circle-timeline"],[1,"material-icons","circle-icon-timeline"],[1,"d-inline-block","right-div","pl-4","pb-3"],[1,"mr-1","align-middle"],["mat-icon-button","","class","info-button align-middle",3,"click",4,"ngIf"],[1,"log-body"],["mat-icon-button","",1,"info-button","align-middle",3,"click"],[1,"material-icons","info-icon"],[1,"font-weight-bold","align-middle"],[1,"align-middle"],[1,"ml-2","align-middle",3,"ngClass"],[1,"border","rounded-lg","mat-elevation-z1","p-3","bg-white"],[1,"mt-4"],["id","prenotazione-save-button","mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","primary","class","mr-1",3,"click",4,"ngIf"],["class","workflows-button mr-1","mat-flat-button","","color","blank",3,"matMenuTriggerFor",4,"ngIf"],[1,"workflows-menu"],["workFlowsMenu","matMenu"],["mat-menu-item","",3,"backgroundColor","appInvertColor","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank","class","mr-1",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"workflows-button","mr-1",3,"matMenuTriggerFor"],["mat-menu-item","",3,"appInvertColor","click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"disabled","click"]],template:function(o,t){1&o&&e.YNc(0,X2,295,262,"ng-container",0),2&o&&e.Q6J("ngIf",null!=t.prenotazione)},dependencies:[m.mk,m.sg,m.O5,k.Z,w.X,V.FC,h.eB,it.IC,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,Ie.W0,Ie.tN,Ie.D8,qe.S$,qe.Qi,qe.mi,ee.SK,ee.gz,ee.R7,ye.pp,ye.ib,ye.yz,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.JJ,_.On,Ic.G,rt.W,Be,Nt,Ot,wt,ei,ti,gt,io,no,m.rS,m.uU,ke.f,z.X$],styles:["textarea[_ngcontent-%COMP%]{resize:none!important}.text-grey[_ngcontent-%COMP%]{color:#aaa!important}.icon-big[_ngcontent-%COMP%]{font-size:36px!important;vertical-align:bottom!important;margin-right:5px!important}.preventivo[_ngcontent-%COMP%], .impostaComeImportata[_ngcontent-%COMP%]{cursor:pointer}  .prenotazioniEditTabGroup .mat-tab-body-content{overflow-x:hidden!important}  .prenotazioniEditTabGroup .paginator-container{margin-bottom:0!important}  .prenotazione-cliente-edit-button .mat-button-wrapper .mat-button-focus-overlay{display:none!important}.prenotazione-cliente-edit-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.prenotazione-cliente-edit-icon[_ngcontent-%COMP%]{font-size:20px}.tipoCameraImage[_ngcontent-%COMP%]{width:400px;max-width:100%}.codiceVoucher[_ngcontent-%COMP%]{font-size:14px;font-style:italic}textarea.mat-input-element[_ngcontent-%COMP%]{margin:0;padding:0}  .note-textarea .mat-form-field-underline{visibility:hidden!important}  .note-textarea .mat-form-field-wrapper{padding-bottom:0!important}.parametro-ricerca[_ngcontent-%COMP%]{font-size:14px}.cancellataIl[_ngcontent-%COMP%], .richiestaCancellazioneIl[_ngcontent-%COMP%], .prenotazioneInAttesaDiConfermaManuale[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:5px}.isPrezziScontati[_ngcontent-%COMP%], .upgradeCamera[_ngcontent-%COMP%]{color:red;font-style:italic;font-size:smaller}.info-button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px;margin-bottom:1px}.info-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.border-right[_ngcontent-%COMP%]{border-right:2px solid #666666!important}.right-div[_ngcontent-%COMP%]{flex:1}  .timeline-checkbox .mat-ripple{display:none!important}  .circle-timeline{position:absolute;top:0;right:-12px;border:2px solid #e91e63;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:12px;background-color:#fff}.circle-icon-timeline[_ngcontent-%COMP%]{color:#e91e63;font-size:10px}.aperto[_ngcontent-%COMP%]{border-radius:5px;background-color:#67d9a4;padding:3px;font-size:13px}.chiuso[_ngcontent-%COMP%]{border-radius:5px;background-color:#ff7a7a;padding:3px;font-size:13px}.data[_ngcontent-%COMP%]{font-size:14px;color:#666}.log-body[_ngcontent-%COMP%]{font-size:15px}.numero[_ngcontent-%COMP%]{background-color:#e6618d;color:#fff;padding-right:7px;padding-left:7px;padding-top:1px;border-radius:10px;font-size:14px;text-align:center;font-weight:400}.edit-button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px}.edit-button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.workflows-button[_ngcontent-%COMP%]{width:auto!important}.noteSelfCheckin[_ngcontent-%COMP%]{font-size:15px}.dataCreazioneCaparra[_ngcontent-%COMP%]{font-size:13px;font-style:italic}"]});var Qc=Y(38033);function j2(i,o){if(1&i&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}class ao extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.albergo=new v.Z$,this.codiciPartner=[]}ngOnInit(){this.setIsLoading(!0),this.albergo.password=this.utility.generateRandomString(),this.apiService.getCodiciPartner().subscribe(o=>{this.codiciPartner=o.data,this.setIsLoading(!1)})}save(){this.albergo.codice&&this.albergo.utente&&this.albergo.password?(this.setIsLoading(!0),this.apiService.creaAlbergo(this.albergo).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.amministrazione.alberghi.albergoCreato").then(()=>{this.dialogRef.close(!0)})})):this.showError("globals.messages.inserireDati")}}function W2(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.creaAlbergo())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.amministrazione.alberghi.creaAlbergo")))}function eC(i,o){1&i&&(e.TgZ(0,"div",45)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.alberghi.nessunAlbergo")))}function tC(i,o){1&i&&e._UZ(0,"mat-header-cell")}function iC(i,o){if(1&i&&(e.TgZ(0,"mat-cell",46)(1,"button",47)(2,"i",48),e._uU(3,"edit"),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("disabled",t.oid==n.sessionService.getOidAlbergo())}}function oC(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergo.proprieta.codice"),""))}function nC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.codice," ")}}function aC(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergo.proprieta.aziendaHotel"),""))}function lC(i,o){1&i&&(e.TgZ(0,"div",53),e._uU(1," TEST "),e.qZA())}function rC(i,o){if(1&i&&(e.TgZ(0,"mat-cell",50)(1,"div",4),e._uU(2),e.qZA(),e.TgZ(3,"div",51),e._uU(4),e.qZA(),e.YNc(5,lC,2,0,"div",52),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.aziendaHotel," "),e.xp6(2),e.hij(" ",t.nome," "),e.xp6(1),e.Q6J("ngIf",t.isTest)}}function cC(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergo.proprieta.utente"),""))}function sC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.utente," ")}}function pC(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergo.proprieta.versioneHotel"),""))}function dC(i,o){1&i&&(e.TgZ(0,"div",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.amministrazione.alberghi.versione2")," "))}function mC(i,o){if(1&i&&(e.TgZ(0,"mat-cell",50)(1,"div",4),e._uU(2),e.qZA(),e.YNc(3,dC,3,3,"div",54),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.AsE(" ",null==t.dati?null:t.dati.versioneHotelCommerciale," (",t.versioneHotel,") "),e.xp6(1),e.Q6J("ngIf",103==t.versioneSBM)}}function _C(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergo.proprieta.tipoProdotto"),""))}function uC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null==t.dati?null:t.dati.tipoProdotto," ")}}function gC(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergo.proprieta.codicePartner"),""))}function hC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.codicePartner," ")}}function fC(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergo.proprieta.infoAttivitaAutomatica"),""))}function CC(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",null==t.dati?null:t.dati.tipoPubblicazioneAttivitaAutomatica," - ",e.xi3(2,2,null==t.dati?null:t.dati.dataUltimoAccessoBackgroundWorker,"dd/MM/yyyy HH:mm:ss")," ")}}function bC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,CC,3,5,"ng-container",56),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!(null==t.dati||!t.dati.tipoPubblicazioneAttivitaAutomatica))}}function vC(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergo.proprieta.dataScadenzaContratto"),""))}function TC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t.dati?null:t.dati.dataScadenzaContratto,"dd/MM/yyyy")," ")}}function xC(i,o){1&i&&e._UZ(0,"mat-header-cell")}function ZC(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.deleteAlbergo(l))}),e.TgZ(1,"i",60),e._uU(2,"delete"),e.qZA()()}}function AC(i,o){if(1&i&&(e.TgZ(0,"mat-cell",57),e.YNc(1,ZC,3,0,"button",58),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.sessionService.getRuoloUtente()==t.enumRuolo.SuperAdmin)}}function wC(i,o){1&i&&e._UZ(0,"mat-header-row",61)}ao.\u0275fac=function(o){return new(o||ao)(e.Y36(A.s),e.Y36(C.t))},ao.\u0275cmp=e.Xpm({type:ao,selectors:[["app-albergo-add"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:28,vars:29,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"mt-3"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",2)(7,"mat-form-field",3)(8,"input",4),e.NdJ("ngModelChange",function(a){return t.albergo.codice=a}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"mat-form-field",3)(11,"input",5),e.NdJ("ngModelChange",function(a){return t.albergo.utente=a}),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"mat-form-field",3)(14,"input",5),e.NdJ("ngModelChange",function(a){return t.albergo.password=a}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"mat-form-field",3)(17,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.albergo.codicePartner=a}),e.ALo(18,"translate"),e._UZ(19,"mat-option",7),e.YNc(20,j2,2,2,"mat-option",8),e.qZA()(),e.TgZ(21,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.albergo.isTest=a}),e._uU(22),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",10)(25,"button",11),e.NdJ("click",function(){return t.save()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,15,"sbm.amministrazione.alberghi.creaAlbergo")),e.xp6(4),e.s9C("placeholder",e.lcZ(9,17,"bo.albergo.proprieta.codice")),e.Q6J("ngModel",t.albergo.codice),e.xp6(3),e.s9C("placeholder",e.lcZ(12,19,"bo.albergo.proprieta.utente")),e.Q6J("ngModel",t.albergo.utente),e.xp6(3),e.s9C("placeholder",e.lcZ(15,21,"bo.albergo.proprieta.password")),e.Q6J("ngModel",t.albergo.password),e.xp6(3),e.s9C("placeholder",e.lcZ(18,23,"bo.albergo.proprieta.codicePartner")),e.Q6J("ngModel",t.albergo.codicePartner),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.codiciPartner),e.xp6(1),e.Q6J("ngModel",t.albergo.isTest),e.xp6(1),e.hij(" ",e.lcZ(23,25,"bo.albergo.proprieta.isTest")," "),e.xp6(4),e.Oqu(e.lcZ(27,27,"globals.salva")))},dependencies:[m.sg,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,_.Fj,_.wV,_.JJ,_.On,z.X$]});const zC=function(i){return{"disabled-albergo-row":i}};function MC(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",62),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)&&r.oid!=p.sessionService.getOidAlbergo()?p.openAlbergo(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")("ngClass",e.VKq(2,zC,n.isAlbergoDisabled(null==t.dati?null:t.dati.dataScadenzaContratto)))}}class ii extends f.H{constructor(o,t,n,a,l,r,p){super(),this.apiService=o,this.headerService=t,this.sessionService=n,this.containerService=a,this.utility=l,this.localStorage=r,this.navigationService=p,this.rq=new d.y4U,this.displayedColumns=["edit","codice","aziendaHotel","utente","versioneHotel","dati.tipoProdotto","codicePartner","dati.tipoPubblicazioneAttivitaAutomatica","dati.dataScadenzaContratto","delete"],this.enumRuolo=c.Gt,this.enumVersioneSbm=c.$X}ngOnInit(){this.codicePartner||this.headerService.setTitle("sbm.amministrazione.alberghi.title"),this.filters=[],this.filters.push(new d.wn$("oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("codice",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("aziendaHotel",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("codicePartner",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("dati.dataScadenzaContratto",c.Hp.Greater,"",c.NM.Date)),this.filters.push(new d.wn$("codicePartner",c.Hp.Equal,this.codicePartner?this.codicePartner:"",c.NM.String)),this.filters.push(new d.wn$("versioneSBM",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("isTest",c.Hp.IsTrue)),this.filters.push(new d.wn$("dati.versioneHotelCommerciale",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getAlberghiFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=this.utility.getPropertyValue,o||this.setIsLoading(!1)})}deleteAlbergo(o){this.showDialogConfirm("sbm.amministrazione.alberghi.eliminareAlbergo").then(t=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setAlbergo(o).subscribe(()=>{this.download()})},t=>{})}openAlbergo(o){this.utility.openPageSbm("dashboard").then(()=>{null==this.sessionService.sessione.oidAlbergoIniziale?this.sessionService.sessione.oidAlbergoIniziale=this.sessionService.getOidAlbergo():this.sessionService.sessione.oidAlbergoIniziale==o.oid&&(this.sessionService.sessione.oidAlbergoIniziale=null),this.sessionService.sessione.albergo=o,this.localStorage.set(this.sessionService.SESSION_KEY,this.sessionService.sessione),this.navigationService.init()})}isAlbergoDisabled(o){return null==o||u(this.getDate(o))<=u().startOf("day")}onSearch(o,t,n,a=!0){null!=t?(this.filters[o].value=t,this.download(!a)):(this.filters[o].active=n,this.download()),this.paginator.firstPage()}search(){this.download(!0),this.paginator.firstPage()}onSort(){this.paginator.firstPage()}creaAlbergo(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(ao,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.download()})}ngOnDestroy(){this.codicePartner||this.headerService.clearTitle()}}ii.\u0275fac=function(o){return new(o||ii)(e.Y36(A.s),e.Y36(ie.r),e.Y36(j.m),e.Y36(te.J),e.Y36(C.t),e.Y36(lt.n),e.Y36(Ae.f))},ii.\u0275cmp=e.Xpm({type:ii,selectors:[["app-alberghi"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{codicePartner:"codicePartner"},features:[e.qOj],decls:94,vars:55,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-6","col-lg-3"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","value","input"],["oidSearch",""],["codiceSearch",""],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["aziendaSearch",""],["nomeSearch",""],[1,"col-4"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","nullable","ngModelChange","input"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange","input"],["autocompleteOff","","matInput","",3,"placeholder","value","readonly","input"],["codicePartnerSearch",""],[1,"col-3"],["versioneSearch",""],["color","primary",1,"d-inline-block","mt-lg-4",3,"checked","change"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 mt-3 bg-white",4,"ngIf"],[1,"mt-3",3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","nome","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","codice"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","aziendaHotel"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","utente"],["matColumnDef","versioneHotel"],["matColumnDef","dati.tipoProdotto"],["matColumnDef","codicePartner"],["matColumnDef","dati.tipoPubblicazioneAttivitaAutomatica"],["matColumnDef","dati.dataScadenzaContratto"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","ngClass","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["mat-flat-button","","color","primary",3,"click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","mt-3","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary",3,"disabled"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],[1,"flex-wrap"],[1,"w-100","nome"],["class","rowAlbergoTest rounded pr-1 pl-1 mt-1 mb-1",4,"ngIf"],[1,"rowAlbergoTest","rounded","pr-1","pl-1","mt-1","mb-1"],["class","w-100 color-red",4,"ngIf"],[1,"w-100","color-red"],[4,"ngIf"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","ngClass","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"input",5,6),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(6);return e.KtG(t.onSearch(0,l.value,null,!1))}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"input",5,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(11);return e.KtG(t.onSearch(1,l.value,null,!1))}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",3)(14,"mat-form-field",4)(15,"input",8,9),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(16);return e.KtG(t.onSearch(2,l.value,null,!1))}),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",3)(19,"mat-form-field",4)(20,"input",8,10),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(21);return e.KtG(t.onSearch(3,l.value,null,!1))}),e.ALo(22,"translate"),e.qZA()()()(),e.TgZ(23,"div",2)(24,"div",11)(25,"mat-form-field",4)(26,"input",12),e.NdJ("ngModelChange",function(l){return t.rq.oidPortale=l})("input",function(){return t.search()}),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"div",11)(29,"mat-form-field",4)(30,"input",13),e.NdJ("ngModelChange",function(l){return t.rq.emailPortale=l})("input",function(){return t.search()}),e.ALo(31,"translate"),e.qZA()()(),e.TgZ(32,"div",11)(33,"mat-form-field",4)(34,"input",14,15),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(35);return e.KtG(t.onSearch(4,l.value,null,!1))}),e.ALo(36,"translate"),e.qZA()()()(),e.TgZ(37,"div",2)(38,"div",16)(39,"mat-form-field",4)(40,"input",8,17),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(41);return e.KtG(t.onSearch(9,l.value,null,!1))}),e.ALo(42,"translate"),e.qZA()()(),e.TgZ(43,"div",16)(44,"mat-checkbox",18),e.NdJ("change",function(l){return t.onSearch(5,l.checked?t.getDate(t.today):"")}),e._uU(45),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"div",16)(48,"mat-checkbox",18),e.NdJ("change",function(l){return t.onSearch(7,l.checked?t.enumVersioneSbm.ProduzioneSbmAPI.toString():"")}),e._uU(49),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"div",16)(52,"mat-checkbox",18),e.NdJ("change",function(l){return t.onSearch(8,null,l.checked)}),e._uU(53),e.ALo(54,"translate"),e.qZA()()()(),e.YNc(55,W2,3,3,"button",19),e.YNc(56,eC,4,3,"div",20),e.TgZ(57,"div",21)(58,"div",22)(59,"mat-table",23),e.NdJ("matSortChange",function(){return t.onSort()}),e.ynx(60,24),e.YNc(61,tC,1,0,"mat-header-cell",25),e.YNc(62,iC,4,1,"mat-cell",26),e.BQk(),e.ynx(63,27),e.YNc(64,oC,3,3,"mat-header-cell",28),e.YNc(65,nC,2,1,"mat-cell",29),e.BQk(),e.ynx(66,30),e.YNc(67,aC,3,3,"mat-header-cell",28),e.YNc(68,rC,6,3,"mat-cell",31),e.BQk(),e.ynx(69,32),e.YNc(70,cC,3,3,"mat-header-cell",28),e.YNc(71,sC,2,1,"mat-cell",29),e.BQk(),e.ynx(72,33),e.YNc(73,pC,3,3,"mat-header-cell",28),e.YNc(74,mC,4,3,"mat-cell",31),e.BQk(),e.ynx(75,34),e.YNc(76,_C,3,3,"mat-header-cell",28),e.YNc(77,uC,2,1,"mat-cell",29),e.BQk(),e.ynx(78,35),e.YNc(79,gC,3,3,"mat-header-cell",28),e.YNc(80,hC,2,1,"mat-cell",29),e.BQk(),e.ynx(81,36),e.YNc(82,fC,3,3,"mat-header-cell",28),e.YNc(83,bC,2,1,"mat-cell",29),e.BQk(),e.ynx(84,37),e.YNc(85,vC,3,3,"mat-header-cell",28),e.YNc(86,TC,3,4,"mat-cell",29),e.BQk(),e.ynx(87,38),e.YNc(88,xC,1,0,"mat-header-cell",25),e.YNc(89,AC,2,1,"mat-cell",39),e.BQk(),e.YNc(90,wC,1,0,"mat-header-row",40),e.YNc(91,MC,1,4,"mat-row",41),e.qZA()(),e.TgZ(92,"div",42)(93,"mat-paginator",43),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()}2&o&&(e.xp6(5),e.s9C("placeholder",e.lcZ(7,33,"globals.oid")),e.Q6J("value",t.filters[0].value),e.xp6(5),e.s9C("placeholder",e.lcZ(12,35,"bo.albergo.proprieta.codice")),e.Q6J("value",t.filters[1].value),e.xp6(5),e.s9C("placeholder",e.lcZ(17,37,"bo.albergo.proprieta.aziendaHotel")),e.Q6J("value",t.filters[2].value),e.xp6(5),e.s9C("placeholder",e.lcZ(22,39,"bo.albergo.proprieta.nome")),e.Q6J("value",t.filters[3].value),e.xp6(6),e.s9C("placeholder",e.lcZ(27,41,"sbm.amministrazione.alberghi.oidPortale")),e.Q6J("ngModel",t.rq.oidPortale)("nullable",!0),e.xp6(4),e.s9C("placeholder",e.lcZ(31,43,"sbm.amministrazione.alberghi.emailPortale")),e.Q6J("ngModel",t.rq.emailPortale),e.xp6(4),e.s9C("placeholder",e.lcZ(36,45,"bo.albergo.proprieta.codicePartner")),e.Q6J("value",t.codicePartner?t.codicePartner:t.filters[4].value)("readonly",!!t.codicePartner),e.xp6(6),e.s9C("placeholder",e.lcZ(42,47,"bo.albergo.proprieta.versioneWelcome")),e.Q6J("value",t.filters[9].value),e.xp6(4),e.Q6J("checked",t.filters[5].active),e.xp6(1),e.hij(" ",e.lcZ(46,49,"sbm.amministrazione.alberghi.nonScaduti")," "),e.xp6(3),e.Q6J("checked",!!t.filters[7].value),e.xp6(1),e.hij(" ",e.lcZ(50,51,"sbm.amministrazione.alberghi.versione2")," "),e.xp6(3),e.Q6J("checked",t.filters[8].active),e.xp6(1),e.hij(" ",e.lcZ(54,53,"bo.albergo.proprieta.isTest")," "),e.xp6(2),e.Q6J("ngIf",!t.codicePartner),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",25))},dependencies:[m.mk,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,_.Fj,_.wV,_.JJ,_.On,m.uU,z.X$],styles:[".disabled-albergo-row mat-cell{color:#aaa!important}  .disabled-albergo-row mat-cell .color-red{color:#aaa!important}.nome[_ngcontent-%COMP%]{font-size:13px;font-style:italic}.rowAlbergoTest[_ngcontent-%COMP%]{background-color:red;color:#fff}.mat-table[_ngcontent-%COMP%]{min-width:1000px!important}"]});class lo{constructor(o,t){this.sessionService=o,this.headerService=t}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.alberghi-partner.title")}ngOnDestroy(){this.headerService.clearTitle()}}lo.\u0275fac=function(o){return new(o||lo)(e.Y36(j.m),e.Y36(ie.r))},lo.\u0275cmp=e.Xpm({type:lo,selectors:[["app-alberghi-partner"]],decls:1,vars:1,consts:[[3,"codicePartner"]],template:function(o,t){1&o&&e._UZ(0,"app-alberghi",0),2&o&&e.Q6J("codicePartner",t.sessionService.getCodicePartner())},dependencies:[ii]});const Uc={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let uc;const qC=new Uint8Array(16);function PC(){if(!uc&&(uc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!uc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uc(qC)}const Xe=[];for(let i=0;i<256;++i)Xe.push((i+256).toString(16).slice(1));function Yc(i,o=0){return(Xe[i[o+0]]+Xe[i[o+1]]+Xe[i[o+2]]+Xe[i[o+3]]+"-"+Xe[i[o+4]]+Xe[i[o+5]]+"-"+Xe[i[o+6]]+Xe[i[o+7]]+"-"+Xe[i[o+8]]+Xe[i[o+9]]+"-"+Xe[i[o+10]]+Xe[i[o+11]]+Xe[i[o+12]]+Xe[i[o+13]]+Xe[i[o+14]]+Xe[i[o+15]]).toLowerCase()}const zc=function kC(i,o,t){if(Uc.randomUUID&&!o&&!i)return Uc.randomUUID();const n=(i=i||{}).random||(i.rng||PC)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,o){t=t||0;for(let a=0;a<16;++a)o[t+a]=n[a];return o}return Yc(n)};var ro=Y(12601);function SC(i,o){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.Oqu(e.lcZ(1,1,"sbm.myForecast.inserisciDati"))}function yC(i,o){if(1&i&&(e.TgZ(0,"mat-option",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function JC(i,o){if(1&i&&(e.ynx(0),e.YNc(1,yC,3,4,"mat-option",30),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.key==n.enumTipoParametroRicerca.Mercato||t.key==n.enumTipoParametroRicerca.CanaleVendita||t.key==n.enumTipoParametroRicerca.Fonte||t.key==n.enumTipoParametroRicerca.Segmento)}}function EC(i,o){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.Oqu(e.lcZ(1,1,"sbm.myForecast.selezionaTipiCamera"))}function NC(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCamera.proprieta.nome"),""))}function OC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function LC(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",32)(1,"mat-checkbox",33),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return a&&l.masterToggleTipiCamera(),e.KtG(l.checkStep2())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionTipiCamera.hasValue()&&t.isAllSelectedTipiCamera())("indeterminate",t.selectionTipiCamera.hasValue()&&!t.isAllSelectedTipiCamera())}}function DC(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",34)(1,"mat-checkbox",35),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a&&p.selectionTipiCamera.toggle(r.oid),e.KtG(p.checkStep2())}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionTipiCamera.isSelected(t.oid))}}function IC(i,o){1&i&&e._UZ(0,"mat-header-row",36)}function QC(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",37),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}const Rc=function(){return["nome","select"]};class oi extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.localStorage=n,this.localizationService=a,this.back=new e.vpe,this.rq=new d.E9Y,this.step1Completed=!1,this.step2Completed=!1,this.tipiCamera=[],this.selectionTipiCamera=new me.Ov(!0,[]),this.enumTipoParametroRicerca=c.E7}ngOnInit(){this.setIsLoading(!0),this.rq.tipoParametro=c.E7.CanaleVendita,null!=this.apikey?(this.rq.codiceStruttura=this.apikey.utente,this.rq.username=this.apikey.utente,this.rq.password=this.apikey.password,null!=this.info&&(this.rq.email=this.info.email,this.rq.sitoWeb=this.info.sito,this.rq.nomeHotel=this.info.nome,this.rq.indirizzo=this.info.indirizzo,this.rq.cap=this.info.cap,this.rq.citta=this.info.citta,this.rq.provincia=this.info.provincia,this.rq.nazione=this.info.nazione,this.rq.telefono=this.info.telefono,this.rq.totaleCamere=isNaN(+this.info.numeroCamere)?0:+this.info.numeroCamere,this.info.regione&&this.apiService.getRegioniFilter(d.k$g.fromFilter("nome",c.Hp.Equal,this.info.regione,c.NM.String)).subscribe(o=>{o.data.length>0&&(this.regione=o.data[0],this.rq.regione=this.regione.nome,this.checkStep1())}))):(this.rq.username=this.sessionService.sessione.albergo.utente,this.rq.password=this.sessionService.sessione.albergo.password,this.rq.nomeHotel=this.sessionService.sessione.albergo.nome,this.rq.totaleCamere=null!=this.sessionService.sessione.albergo.dati?this.sessionService.sessione.albergo.dati.camereEffettive:0),this.apiService.getTipiCamera().subscribe(o=>{this.tipiCamera=o.data,this.tipiCamera.forEach(t=>this.selectionTipiCamera.select(t.oid)),this.checkStep2(),this.setIsLoading(!1)})}checkStep1(){this.rq.username&&this.rq.password&&this.rq.email&&this.rq.sitoWeb&&this.rq.nomeHotel&&this.rq.indirizzo&&this.rq.citta&&this.rq.cap&&this.rq.provincia&&this.rq.regione&&this.rq.nazione&&this.rq.telefono&&this.rq.totaleCamere>0&&null!=this.rq.tipoParametro?this.step1Completed=!0:this.step1Completed=!1}checkStep2(){this.selectionTipiCamera.selected.length>0?this.step2Completed=!0:this.step2Completed=!1}isAllSelectedTipiCamera(){return this.selectionTipiCamera.selected.length==this.tipiCamera.length}masterToggleTipiCamera(){this.isAllSelectedTipiCamera()?this.selectionTipiCamera.clear():this.tipiCamera.forEach(o=>this.selectionTipiCamera.select(o.oid))}save(){this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.rq.tipiCameraOid=this.selectionTipiCamera.selected,this.setIsLoading(!0),null!=this.apikey?this.apiService.aggiornaMyForecast(this.rq).subscribe(o=>{this.setIsLoading(!1),o.data.success?this.showInfo("sbm.myForecast.aggiornamentoCompletato").then(()=>{this.back.emit()}):this.showInfo("sbm.myForecast.erroreAggiornamento").then(()=>{this.back.emit()})}):this.apiService.attivaMyForecast(this.rq).subscribe(o=>{this.setIsLoading(!1),o.data.myForecast?this.showInfo("sbm.myForecast.attivazioneCompletata").then(()=>{this.sessionService.sessione.myForecast=o.data.myForecast,this.localStorage.set(this.sessionService.SESSION_KEY,this.sessionService.sessione),this.back.emit()}):this.showError(this.localizationService.getTranslationSync("sbm.myForecast.erroreAttivazione")+"\n"+o.dettaglioErrore).then(()=>{this.back.emit()})})}}oi.\u0275fac=function(o){return new(o||oi)(e.Y36(A.s),e.Y36(j.m),e.Y36(lt.n),e.Y36(Oe.o))},oi.\u0275cmp=e.Xpm({type:oi,selectors:[["app-attiva-myforecast"]],inputs:{apikey:"apikey",info:"info"},outputs:{back:"back"},features:[e.qOj],decls:100,vars:86,consts:[[3,"linear"],[3,"completed"],["matStepLabel",""],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","matInput","","disabled","","required","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","matInput","","required","",3,"placeholder","ngModel","disabled","ngModelChange"],["autocompleteOff","","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange"],["autocompleteOff","","type","number","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["required","",3,"ngModel","placeholder","ngModelChange","selectionChange"],[4,"ngFor","ngForOf"],[1,"text-right"],["mat-flat-button","","color","primary","matStepperNext","",3,"disabled"],[1,"mat-table-container-border-rounded","mb-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],["mat-flat-button","","color","blank","matStepperPrevious","",1,"mr-1"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"mt-3","p-3"],[1,"mt-3"],["mat-flat-button","","color","blank",1,"mt-3","mb-3","ml-3",3,"click"],[3,"value",4,"ngIf"],[3,"value"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-vertical-stepper",0)(1,"mat-step",1),e.YNc(2,SC,2,3,"ng-template",2),e.TgZ(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6),e.NdJ("ngModelChange",function(a){return t.rq.username=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",4)(9,"mat-form-field",5)(10,"input",7),e.NdJ("ngModelChange",function(a){return t.rq.password=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.email=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"div",3)(17,"div",4)(18,"mat-form-field",5)(19,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.sitoWeb=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"div",4)(22,"mat-form-field",5)(23,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.nomeHotel=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"div",4)(26,"mat-form-field",5)(27,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.indirizzo=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(28,"translate"),e.qZA()()()(),e.TgZ(29,"div",3)(30,"div",4)(31,"mat-form-field",5)(32,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.citta=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(33,"translate"),e.qZA()()(),e.TgZ(34,"div",4)(35,"mat-form-field",5)(36,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.cap=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(37,"translate"),e.qZA()()(),e.TgZ(38,"div",4)(39,"mat-form-field",5)(40,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.provincia=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(41,"translate"),e.qZA()()()(),e.TgZ(42,"div",3)(43,"div",4)(44,"app-view-select",9),e.NdJ("valueChange",function(a){return t.regione=a})("valueChange",function(){return t.rq.regione=t.regione.nome,t.checkStep1()}),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"div",4)(47,"mat-form-field",5)(48,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.nazione=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(49,"translate"),e.qZA()()(),e.TgZ(50,"div",4)(51,"mat-form-field",5)(52,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.telefono=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(53,"translate"),e.qZA()()()(),e.TgZ(54,"div",3)(55,"div",4)(56,"mat-form-field",5)(57,"input",10),e.NdJ("ngModelChange",function(a){return t.rq.totaleCamere=a})("ngModelChange",function(){return t.checkStep1()}),e.ALo(58,"translate"),e.qZA()()(),e.TgZ(59,"div",4)(60,"mat-form-field",5)(61,"mat-select",11),e.NdJ("ngModelChange",function(a){return t.rq.tipoParametro=a})("selectionChange",function(){return t.checkStep1()}),e.ALo(62,"translate"),e.YNc(63,JC,2,1,"ng-container",12),e.ALo(64,"selectEnum"),e.qZA()()()(),e.TgZ(65,"div",13)(66,"button",14),e._uU(67),e.ALo(68,"translate"),e.qZA()()(),e.TgZ(69,"mat-step",1),e.YNc(70,EC,2,3,"ng-template",2),e.TgZ(71,"div",15)(72,"mat-table",16),e.ynx(73,17),e.YNc(74,NC,3,3,"mat-header-cell",18),e.YNc(75,OC,2,1,"mat-cell",19),e.BQk(),e.ynx(76,20),e.YNc(77,LC,2,2,"mat-header-cell",21),e.YNc(78,DC,2,1,"mat-cell",22),e.BQk(),e.YNc(79,IC,1,0,"mat-header-row",23),e.YNc(80,QC,1,1,"mat-row",24),e.qZA()(),e.TgZ(81,"div",13)(82,"button",25),e._uU(83),e.ALo(84,"translate"),e.qZA(),e.TgZ(85,"button",26),e.NdJ("click",function(){return t.save()}),e._uU(86),e.ALo(87,"translate"),e.qZA()()()(),e.TgZ(88,"div",27)(89,"div")(90,"b"),e._uU(91,"Scelta del Tipo Parametro di Ricerca"),e.qZA(),e._uU(92,': "la scelta del parametro da configurare \xe9 fondamentale per un corretto uso di Myforecast, suggeriamo di scegliere il parametro che riporta la segmentazione suddivisa per OTA / Sito / Diretto / TO / Ag.Viaggi / che normalmente \xe8 contenuta in Canale vendita" '),e.qZA(),e.TgZ(93,"div",28)(94,"b"),e._uU(95,"Scelta delle Tipologie di Camere"),e.qZA(),e._uU(96,': "si consiglia la selezione di tutte le camere, incluse eventuali camere Over. In questo modo si avr\xe0 sempre una corrispondenza esatta fra i dati storici e futuri di produzione RN e Revenue presenti sul PMS e MyForecast" '),e.qZA()(),e.TgZ(97,"button",29),e.NdJ("click",function(){return t.back.emit()}),e._uU(98),e.ALo(99,"translate"),e.qZA()),2&o&&(e.Q6J("linear",!0),e.xp6(1),e.Q6J("completed",t.step1Completed),e.xp6(5),e.Q6J("placeholder",e.lcZ(7,45,"sbm.myForecast.username"))("ngModel",t.rq.username),e.xp6(4),e.Q6J("placeholder",e.lcZ(11,47,"sbm.myForecast.password"))("ngModel",t.rq.password)("disabled",null!=t.apikey),e.xp6(4),e.Q6J("placeholder",e.lcZ(15,49,"sbm.myForecast.email"))("ngModel",t.rq.email),e.xp6(5),e.Q6J("placeholder",e.lcZ(20,51,"sbm.myForecast.sitoWeb"))("ngModel",t.rq.sitoWeb),e.xp6(4),e.Q6J("placeholder",e.lcZ(24,53,"sbm.myForecast.nomeHotel"))("ngModel",t.rq.nomeHotel),e.xp6(4),e.Q6J("placeholder",e.lcZ(28,55,"sbm.myForecast.indirizzo"))("ngModel",t.rq.indirizzo),e.xp6(5),e.Q6J("placeholder",e.lcZ(33,57,"sbm.myForecast.citta"))("ngModel",t.rq.citta),e.xp6(4),e.Q6J("placeholder",e.lcZ(37,59,"sbm.myForecast.cap"))("ngModel",t.rq.cap),e.xp6(4),e.Q6J("placeholder",e.lcZ(41,61,"sbm.myForecast.provincia"))("ngModel",t.rq.provincia),e.xp6(4),e.Q6J("dataLoader",t.apiService.getRegioniViewSelect(null,!1))("value",t.regione)("placeholder",e.lcZ(45,63,"sbm.myForecast.regione"))("required",!0),e.xp6(4),e.Q6J("placeholder",e.lcZ(49,65,"sbm.myForecast.nazione"))("ngModel",t.rq.nazione),e.xp6(4),e.Q6J("placeholder",e.lcZ(53,67,"sbm.myForecast.telefono"))("ngModel",t.rq.telefono),e.xp6(5),e.Q6J("placeholder",e.lcZ(58,69,"sbm.myForecast.totaleCamere"))("ngModel",t.rq.totaleCamere),e.xp6(4),e.s9C("placeholder",e.lcZ(62,71,"sbm.myForecast.tipoParametroRicerca")),e.Q6J("ngModel",t.rq.tipoParametro),e.xp6(2),e.Q6J("ngForOf",e.xi3(64,73,t.enumTipoParametroRicerca,"tipoParametroRicerca")),e.xp6(3),e.Q6J("disabled",!t.step1Completed),e.xp6(1),e.Oqu(e.lcZ(68,76,"globals.next")),e.xp6(2),e.Q6J("completed",t.step2Completed),e.xp6(3),e.Q6J("dataSource",t.tipiCamera),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(84,Rc))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(85,Rc)),e.xp6(3),e.Oqu(e.lcZ(84,78,"globals.previous")),e.xp6(2),e.Q6J("disabled",!t.step2Completed),e.xp6(1),e.Oqu(e.lcZ(87,80,"globals.salva")),e.xp6(12),e.Oqu(e.lcZ(99,82,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ro.C0,ro.VY,ro.Vq,ro.Ic,ro.fd,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.Q7,_.On,ne.d,Te.A,z.X$]});class co{constructor(){}}function UC(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"span",6),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA()(),e.TgZ(11,"div",5)(12,"span",6),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"span"),e._uU(16),e.qZA()(),e.TgZ(17,"div",5)(18,"span",6),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"span"),e._uU(22),e.qZA()(),e.TgZ(23,"div",5)(24,"span",6),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"span"),e._uU(28),e.qZA()(),e.TgZ(29,"div",5)(30,"span",6),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"span"),e._uU(34),e.qZA()(),e.TgZ(35,"div",5)(36,"span",6),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"span"),e._uU(40),e.qZA()(),e.TgZ(41,"div",5)(42,"span",6),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"span"),e._uU(46),e.qZA()(),e.TgZ(47,"div",5)(48,"span",6),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"span"),e._uU(52),e.qZA()(),e.TgZ(53,"div",5)(54,"span",6),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"span"),e._uU(58),e.qZA()(),e.TgZ(59,"div",5)(60,"span",6),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"span"),e._uU(64),e.qZA()(),e.TgZ(65,"div",5)(66,"span",6),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"span"),e._uU(70),e.qZA()(),e.TgZ(71,"div",5)(72,"span",6),e._uU(73),e.ALo(74,"translate"),e.qZA(),e.TgZ(75,"span"),e._uU(76),e.qZA()(),e.TgZ(77,"div",5)(78,"span",6),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"span"),e._uU(82),e.qZA()()(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,27,"sbm.configurazione.apiKeys.dettagliStruttura")),e.xp6(5),e.Oqu(e.lcZ(8,29,"sbm.configurazione.apiKeys.struttura.codice")+": "),e.xp6(3),e.Oqu(t.struttura.codice?t.struttura.codice:"---"),e.xp6(3),e.Oqu(e.lcZ(14,31,"sbm.configurazione.apiKeys.struttura.nome")+": "),e.xp6(3),e.Oqu(t.struttura.nome?t.struttura.nome:"---"),e.xp6(3),e.Oqu(e.lcZ(20,33,"sbm.configurazione.apiKeys.struttura.email")+": "),e.xp6(3),e.Oqu(t.struttura.email?t.struttura.email:"---"),e.xp6(3),e.Oqu(e.lcZ(26,35,"sbm.configurazione.apiKeys.struttura.telefono")+": "),e.xp6(3),e.Oqu(t.struttura.telefono?t.struttura.telefono:"---"),e.xp6(3),e.Oqu(e.lcZ(32,37,"sbm.configurazione.apiKeys.struttura.sito")+": "),e.xp6(3),e.Oqu(t.struttura.sito?t.struttura.sito:"---"),e.xp6(3),e.Oqu(e.lcZ(38,39,"sbm.configurazione.apiKeys.struttura.indirizzo")+": "),e.xp6(3),e.Oqu(t.struttura.indirizzo?t.struttura.indirizzo:"---"),e.xp6(3),e.Oqu(e.lcZ(44,41,"sbm.configurazione.apiKeys.struttura.cap")+": "),e.xp6(3),e.Oqu(t.struttura.cap?t.struttura.cap:"---"),e.xp6(3),e.Oqu(e.lcZ(50,43,"sbm.configurazione.apiKeys.struttura.citta")+": "),e.xp6(3),e.Oqu(t.struttura.citta?t.struttura.citta:"---"),e.xp6(3),e.Oqu(e.lcZ(56,45,"sbm.configurazione.apiKeys.struttura.provincia")+": "),e.xp6(3),e.Oqu(t.struttura.provincia?t.struttura.provincia:"---"),e.xp6(3),e.Oqu(e.lcZ(62,47,"sbm.configurazione.apiKeys.struttura.nazione")+": "),e.xp6(3),e.Oqu(t.struttura.nazione?t.struttura.nazione:"---"),e.xp6(3),e.Oqu(e.lcZ(68,49,"sbm.configurazione.apiKeys.struttura.regione")+": "),e.xp6(3),e.Oqu(t.struttura.regione?t.struttura.regione:"---"),e.xp6(3),e.Oqu(e.lcZ(74,51,"sbm.configurazione.apiKeys.struttura.numeroCamere")+": "),e.xp6(3),e.Oqu(t.struttura.numeroCamere?t.struttura.numeroCamere:"---"),e.xp6(3),e.Oqu(e.lcZ(80,53,"sbm.configurazione.apiKeys.struttura.lingua")+": "),e.xp6(3),e.Oqu(t.struttura.lingua?t.struttura.lingua:"---")}}function YC(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.risorsa.codice")))}function RC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codice)}}function FC(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.risorsa.descrizione")))}function HC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function KC(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.risorsa.occupazione")))}function GC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.occupazione)}}function $C(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.risorsa.disponibili")))}function BC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.disponibili)}}function VC(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.risorsa.alias")))}function XC(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.alias)}}function jC(i,o){1&i&&e._UZ(0,"mat-header-row",18)}function WC(i,o){1&i&&e._UZ(0,"mat-row")}function eb(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",7)(5,"mat-table",8),e.ynx(6,9),e.YNc(7,YC,3,3,"mat-header-cell",10),e.YNc(8,RC,2,1,"mat-cell",11),e.BQk(),e.ynx(9,12),e.YNc(10,FC,3,3,"mat-header-cell",10),e.YNc(11,HC,2,1,"mat-cell",11),e.BQk(),e.ynx(12,13),e.YNc(13,KC,3,3,"mat-header-cell",10),e.YNc(14,GC,2,1,"mat-cell",11),e.BQk(),e.ynx(15,14),e.YNc(16,$C,3,3,"mat-header-cell",10),e.YNc(17,BC,2,1,"mat-cell",11),e.BQk(),e.ynx(18,15),e.YNc(19,VC,3,3,"mat-header-cell",10),e.YNc(20,XC,2,1,"mat-cell",11),e.BQk(),e.YNc(21,jC,1,0,"mat-header-row",16),e.YNc(22,WC,1,0,"mat-row",17),e.qZA()(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.configurazione.apiKeys.risorse")),e.xp6(3),e.Q6J("dataSource",t.risorse),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumsRisorse)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumsRisorse)}}function tb(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.sorgente.codice")))}function ib(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codice)}}function ob(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.sorgente.descrizione")))}function nb(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function ab(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.sorgente.alias")))}function lb(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.alias)}}function rb(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.sorgente.isDiretto")))}function cb(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",21),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDiretto)("disabled",!0)}}function sb(i,o){1&i&&e._UZ(0,"mat-header-row",18)}function pb(i,o){1&i&&e._UZ(0,"mat-row")}function db(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",7)(5,"mat-table",8),e.ynx(6,9),e.YNc(7,tb,3,3,"mat-header-cell",10),e.YNc(8,ib,2,1,"mat-cell",11),e.BQk(),e.ynx(9,12),e.YNc(10,ob,3,3,"mat-header-cell",10),e.YNc(11,nb,2,1,"mat-cell",11),e.BQk(),e.ynx(12,15),e.YNc(13,ab,3,3,"mat-header-cell",10),e.YNc(14,lb,2,1,"mat-cell",11),e.BQk(),e.ynx(15,19),e.YNc(16,rb,3,3,"mat-header-cell",10),e.YNc(17,cb,2,2,"mat-cell",11),e.BQk(),e.YNc(18,sb,1,0,"mat-header-row",16),e.YNc(19,pb,1,0,"mat-row",17),e.qZA()(),e.TgZ(20,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.aggiornaSorgenti())}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,6,"sbm.configurazione.apiKeys.sorgenti")),e.xp6(3),e.Q6J("dataSource",t.sorgenti),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumsSorgenti)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumsSorgenti),e.xp6(2),e.Oqu(e.lcZ(22,8,"sbm.configurazione.apiKeys.aggiornaSorgenti"))}}co.\u0275fac=function(o){return new(o||co)},co.\u0275cmp=e.Xpm({type:co,selectors:[["app-aggiorna-myforecast"]],inputs:{dialogRef:"dialogRef",apiKey:"apiKey",info:"info"},decls:4,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"apikey","info","back"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"app-attiva-myforecast",2),e.NdJ("back",function(){return t.dialogRef.close()}),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("apikey",t.apiKey)("info",t.info))},dependencies:[h.eB,F.aO,oi]});class Dt extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.displayedColumsRisorse=["codice","descrizione","occupazione","disponibili","alias"],this.displayedColumsSorgenti=["codice","descrizione","alias","isDiretto"]}aggiornaSorgenti(){this.setIsLoading(!0);let o=new d.i67;o.oidAlbergo=this.sessionService.getOidAlbergo(),o.codiceStruttura=this.apiKey.utente,o.tipoParametro=this.apiKey.tipoParametroMyForecast,this.apiService.aggiornaSorgentiMyForecast(o).subscribe(t=>{if(t.data.success){let n=new d.cze;n.username=this.apiKey.utente,n.password=this.apiKey.password,this.apiService.leggiSorgentiMyForecast(n).subscribe(a=>{this.sorgenti=a.data,this.setIsLoading(!1),this.showInfo("sbm.configurazione.apiKeys.successoAggiornamentoSorgenti")})}else this.setIsLoading(!1),this.showInfo("sbm.configurazione.apiKeys.erroreAggiornamentoSorgenti")})}}function mb(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",3),e._UZ(1,"input",13),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("placeholder",e.lcZ(2,2,"bo.albergoApiKeys.proprieta.oidAlbergo"))("value",null!=t.apiKey.albergo?t.apiKey.albergo.oid:0)}}function _b(i,o){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function ub(i,o){if(1&i&&(e.ynx(0),e.YNc(1,_b,3,4,"mat-option",18),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.key!=n.enumTipoApiKey.MyForecast)}}function gb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"input",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.apiKey.apiKey=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",5),e._uU(6," Indica il codice API Key da utilizzare nelle richieste "),e.qZA()()}if(2&i){const t=e.oxw(4);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,4,"bo.albergoApiKeys.proprieta.apiKey"))("ngModel",t.apiKey.apiKey)("readonly",t.apiKey.tipoApiKey==t.enumTipoApiKey.LetturaPrezzi||t.apiKey.tipoApiKey==t.enumTipoApiKey.PublicAPI||t.apiKey.tipoApiKey==t.enumTipoApiKey.ImportazionePrenotazioni)("disabled",t.apiKey.tipoApiKey==t.enumTipoApiKey.LetturaPrezzi||t.apiKey.tipoApiKey==t.enumTipoApiKey.PublicAPI||t.apiKey.tipoApiKey==t.enumTipoApiKey.ImportazionePrenotazioni)}}function hb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.apiKey.authSecret=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",5),e._uU(6," Indica la chiave segreta da utilizzare nelle richieste "),e.qZA()()}if(2&i){const t=e.oxw(4);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.albergoApiKeys.proprieta.authSecret"))("ngModel",t.apiKey.authSecret)}}function fb(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.apiKey.utente=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",5),e._uU(7," Indica l'id struttura "),e.qZA()(),e.TgZ(8,"div",22),e._uU(9,"Url da comunicare a PhilipsCMND con l'apikey: https://smartbookingmanager.passepartout.cloud/sbmapi/api/PhilipsCMND"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(4);e.xp6(4),e.Q6J("placeholder",e.lcZ(5,2,"bo.albergoApiKeys.proprieta.idStruttura"))("ngModel",t.apiKey.utente)}}function Cb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.apiKey.audienceId=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",5),e._uU(6," Indica l'audience ID da utilizzare per Mailchimp "),e.qZA()()}if(2&i){const t=e.oxw(4);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.albergoApiKeys.proprieta.audienceId"))("ngModel",t.apiKey.audienceId)}}function bb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.apiKey.url=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",5),e._uU(6," Indica l'url api di ActiveCampaign "),e.qZA()()}if(2&i){const t=e.oxw(4);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.albergoApiKeys.proprieta.url"))("ngModel",t.apiKey.url)}}function vb(i,o){if(1&i&&(e.ynx(0),e.YNc(1,gb,7,6,"div",7),e.YNc(2,hb,7,4,"div",7),e.YNc(3,fb,10,4,"ng-container",6),e.YNc(4,Cb,7,4,"div",7),e.YNc(5,bb,7,4,"div",7),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey!=t.enumTipoApiKey.TrentinoGuestCard&&t.apiKey.tipoApiKey!=t.enumTipoApiKey.Scrollidea),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.SmsHosting||t.apiKey.tipoApiKey==t.enumTipoApiKey.PhilipsCMND||t.apiKey.tipoApiKey==t.enumTipoApiKey.Hoau||t.apiKey.tipoApiKey==t.enumTipoApiKey.AdSms),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.PhilipsCMND),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.Mailchimp),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.ActiveCampaign)}}function Tb(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.apiKey.utente=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",5),e._uU(7," Indica l'username da utilizzare nelle richieste "),e.qZA()(),e.TgZ(8,"div",1)(9,"div",2)(10,"mat-form-field",3)(11,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.apiKey.password=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",5),e._uU(14," Indica la password da utilizzare nelle richieste "),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(3);e.xp6(4),e.Q6J("placeholder",e.lcZ(5,4,"bo.albergoApiKeys.proprieta.utente"))("ngModel",t.apiKey.utente),e.xp6(7),e.Q6J("placeholder",e.lcZ(12,6,"bo.albergoApiKeys.proprieta.password"))("ngModel",t.apiKey.password)}}function xb(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.apiKey.apiKey=a)}),e.ALo(5,"translate"),e.qZA()()(),e._UZ(6,"div",5),e.qZA(),e.TgZ(7,"div",1)(8,"div",2)(9,"mat-form-field",3)(10,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.apiKey.authSecret=a)}),e.ALo(11,"translate"),e.qZA()()(),e._UZ(12,"div",5),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(4);e.xp6(4),e.Q6J("placeholder",e.lcZ(5,4,"bo.albergoApiKeys.proprieta.contractorId"))("ngModel",t.apiKey.apiKey),e.xp6(6),e.Q6J("placeholder",e.lcZ(11,6,"bo.albergoApiKeys.proprieta.token"))("ngModel",t.apiKey.authSecret)}}function Zb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.apiKey.apiKey=a)}),e.ALo(4,"translate"),e.qZA()()(),e._UZ(5,"div",5),e.qZA()}if(2&i){const t=e.oxw(4);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.albergoApiKeys.proprieta.hotelID"))("ngModel",t.apiKey.apiKey)}}function Ab(i,o){if(1&i&&(e.ynx(0),e.YNc(1,xb,13,8,"ng-container",6),e.YNc(2,Zb,6,4,"div",7),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.Qualitelis),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.Scrollidea)}}function wb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-checkbox",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.apiKey.isTest=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",5),e._uU(6," API Key di test "),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("ngModel",t.apiKey.isTest),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.albergoApiKeys.proprieta.isTest")," ")}}function zb(i,o){if(1&i&&(e.ynx(0),e.YNc(1,vb,6,5,"ng-container",6),e.YNc(2,Tb,15,8,"ng-container",6),e.YNc(3,Ab,3,2,"ng-container",6),e.YNc(4,wb,7,4,"div",7),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey!=t.enumTipoApiKey.Qualitelis),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.TrentinoGuestCard||t.apiKey.tipoApiKey==t.enumTipoApiKey.Qualitelis),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.Qualitelis||t.apiKey.tipoApiKey==t.enumTipoApiKey.Scrollidea),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey!=t.enumTipoApiKey.PhilipsCMND&&t.apiKey.tipoApiKey!=t.enumTipoApiKey.Hoau)}}function Mb(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.apiKey.utente=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",5),e._uU(7," Indica il numero da utilizzare per inviare gli sms "),e.qZA()(),e.TgZ(8,"div",1)(9,"div",2)(10,"mat-form-field",3)(11,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.apiKey.apiKey=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",5),e._uU(14," Indica l'account SID "),e.qZA()(),e.TgZ(15,"div",1)(16,"div",2)(17,"mat-form-field",3)(18,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.apiKey.authSecret=a)}),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",5),e._uU(21," Indica l'auth token "),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("placeholder",e.lcZ(5,6,"bo.albergoApiKeys.proprieta.numero"))("ngModel",t.apiKey.utente),e.xp6(7),e.Q6J("placeholder",e.lcZ(12,8,"bo.albergoApiKeys.proprieta.accountSid"))("ngModel",t.apiKey.apiKey),e.xp6(7),e.Q6J("placeholder",e.lcZ(19,10,"bo.albergoApiKeys.proprieta.authToken"))("ngModel",t.apiKey.authSecret)}}function qb(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.apiKey.cellulare=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",5),e._uU(7," Indica il numero da utilizzare per inviare gli sms "),e.qZA()(),e.TgZ(8,"div",1)(9,"div",2)(10,"mat-form-field",3)(11,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.apiKey.utente=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",5),e._uU(14," Indica l'username da utilizzare nelle richieste "),e.qZA()(),e.TgZ(15,"div",1)(16,"div",2)(17,"mat-form-field",3)(18,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.apiKey.password=a)}),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",5),e._uU(21," Indica la password da utilizzare nelle richieste "),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("placeholder",e.lcZ(5,6,"bo.albergoApiKeys.proprieta.numero"))("ngModel",t.apiKey.cellulare),e.xp6(7),e.Q6J("placeholder",e.lcZ(12,8,"bo.albergoApiKeys.proprieta.utente"))("ngModel",t.apiKey.utente),e.xp6(7),e.Q6J("placeholder",e.lcZ(19,10,"bo.albergoApiKeys.proprieta.password"))("ngModel",t.apiKey.password)}}function Pb(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.apiKey.apiKey=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",5),e._uU(7," Indica l'unique ID InfoAlberghi "),e.qZA()(),e.TgZ(8,"div",1)(9,"div",2)(10,"mat-form-field",3)(11,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.apiKey.utente=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",5),e._uU(14," Indica l'ID Hotel InfoAlberghi "),e.qZA()(),e.TgZ(15,"div",1)(16,"div",2)(17,"app-view-select",23),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.apiKey.portaleXAlbergo=a)}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",5),e._uU(20," Indica il portale a cui vengono inserite le richieste scaricate da InfoAlberghi "),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("placeholder",e.lcZ(5,7,"bo.albergoApiKeys.proprieta.uniqueID"))("ngModel",t.apiKey.apiKey),e.xp6(7),e.Q6J("placeholder",e.lcZ(12,9,"bo.albergoApiKeys.proprieta.hotelID"))("ngModel",t.apiKey.utente),e.xp6(6),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(t.getPortaliRQ))("value",t.apiKey.portaleXAlbergo)("placeholder",e.lcZ(18,11,"bo.albergoApiKeys.proprieta.portaleXAlbergo"))}}Dt.\u0275fac=function(o){return new(o||Dt)(e.Y36(A.s),e.Y36(j.m))},Dt.\u0275cmp=e.Xpm({type:Dt,selectors:[["app-api-keys-modal"]],inputs:{apiKey:"apiKey",struttura:"struttura",risorse:"risorse",sorgenti:"sorgenti"},features:[e.qOj],decls:6,vars:4,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[1,"mb-3"],[1,"row"],[1,"col-6"],[1,"font-weight-bold"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","codice"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","descrizione"],["matColumnDef","occupazione"],["matColumnDef","disponibili"],["matColumnDef","alias"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-table-header"],["matColumnDef","isDiretto"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],["color","primary",3,"checked","disabled"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,UC,83,55,"ng-container",2),e.YNc(4,eb,23,7,"ng-container",2),e.YNc(5,db,23,10,"ng-container",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.struttura),e.xp6(1),e.Q6J("ngIf",null!=t.risorse),e.xp6(1),e.Q6J("ngIf",null!=t.sorgenti))},dependencies:[m.O5,V.FC,h.eB,F.aO,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,z.X$]});const kb=function(i){return{"mt-3":i}};function Sb(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-select",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.apiKey.tipoApiKey=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onTipoApiKeySelect())}),e.ALo(5,"translate"),e.YNc(6,ub,2,1,"ng-container",15),e.ALo(7,"selectEnum"),e.qZA()()(),e.TgZ(8,"div",5),e._uU(9," Selezionare la tipologia di API da attivare "),e.qZA()(),e.YNc(10,zb,5,4,"ng-container",6),e.YNc(11,Mb,22,12,"ng-container",6),e.YNc(12,qb,22,12,"ng-container",6),e.YNc(13,Pb,21,13,"ng-container",6),e.TgZ(14,"div",16)(15,"div",2)(16,"mat-checkbox",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.apiKey.isAttivo=a)}),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",5),e._uU(20," Attiva la API Key "),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,10,"bo.albergoApiKeys.proprieta.tipoApiKey")),e.Q6J("ngModel",t.apiKey.tipoApiKey),e.xp6(2),e.Q6J("ngForOf",e.xi3(7,12,t.enumTipoApiKey,"tipoApiKey")),e.xp6(4),e.Q6J("ngIf",t.apiKey.tipoApiKey!=t.enumTipoApiKey.Twilio&&t.apiKey.tipoApiKey!=t.enumTipoApiKey.InfoAlberghi&&t.apiKey.tipoApiKey!=t.enumTipoApiKey.TokyDigital),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.Twilio),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.TokyDigital),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.InfoAlberghi),e.xp6(1),e.Q6J("ngClass",e.VKq(17,kb,t.apiKey.tipoApiKey==t.enumTipoApiKey.TrentinoGuestCard)),e.xp6(2),e.Q6J("ngModel",t.apiKey.isAttivo),e.xp6(1),e.Oqu(e.lcZ(18,15,"bo.albergoApiKeys.proprieta.isAttivo"))}}function yb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",26),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.preventDefault(),e.KtG(l.apriCondizioniContrattuali())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.myForecast.condizioniContrattuali")))}function Jb(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div")(2,"span",24),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span"),e._uU(6,"MyForecast"),e.qZA()(),e.TgZ(7,"div")(8,"span",24),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"div",22)(14,"span",24),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"span"),e._uU(18),e.qZA()(),e.TgZ(19,"div",22),e._uU(20," NB: per attivare myforecast a due vie comunicare i dati di accesso alle api che si trovano in Configurazione->Impostazioni "),e.qZA(),e.YNc(21,yb,3,3,"a",25),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,6,"bo.albergoApiKeys.proprieta.tipoApiKey")+": "),e.xp6(6),e.Oqu(e.lcZ(10,8,"bo.albergoApiKeys.proprieta.utente")+": "),e.xp6(3),e.Oqu(t.apiKey.utente?t.apiKey.utente:"---"),e.xp6(3),e.Oqu(e.lcZ(16,10,"bo.albergoApiKeys.proprieta.password")+": "),e.xp6(3),e.Oqu(t.apiKey.password?t.apiKey.password:"---"),e.xp6(3),e.Q6J("ngIf",!t.sessionService.isAlbergoDemo())}}function Eb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-checkbox",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.apiKey.isInvioAutomatico=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",5),e._uU(6," Attiva l'invio automatico alla modifica/creazione delle prenotazioni (controllare che sia attiva l'attivita automatica di pubblicazione delle prenotazioni su Welcome) "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.apiKey.isInvioAutomatico),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.albergoApiKeys.proprieta.isInvioAutomatico")," ")}}function Nb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-checkbox",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.apiKey.isAnonimizzaCliente=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",5),e._uU(6," Attivando il check i dati dei clienti saranno anonimizzati in lettura "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.apiKey.isAnonimizzaCliente),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.albergoApiKeys.proprieta.isAnonimizzaCliente")," ")}}function Ob(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-checkbox",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.apiKey.ipApiKey=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",5),e._uU(6," Attivando le api saranno valide solo se usate dall'ip impostato (lasciare vuote per averle sempre attive) "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.apiKey.ipApiKey),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.albergoApiKeys.proprieta.ipApiKey")," ")}}function Lb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.leggiStruttura())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.leggiStruttura")))}function Db(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.leggiRisorse())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.leggiRisorse")))}function Ib(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.leggiSorgenti())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.leggiSorgenti")))}function Qb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateStruttura())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.apiKeys.aggiorna")))}function Ub(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.activate())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.apiKey.statoMyForecast==t.enumStatoMyForecast.Attivo),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.configurazione.apiKeys.attiva"))}}function Yb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}class so extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.sessionService=t,this.utilityService=n,this.localStorage=a,this.navigationService=l,this.backEvent=new e.vpe,this.enumTipoApiKey=c.j6,this.enumStatoMyForecast=c.Up,this.getPortaliRQ=d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number)}save(){this.apiKey.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setApiKey(this.apiKey).subscribe(o=>{null!=o&&null!=o.data&&(this.sessionService.sessione.utente.plugins=o.data,this.localStorage.set(this.sessionService.SESSION_KEY,this.sessionService.sessione),this.navigationService.checkPlugins()),this.setIsLoading(!1),this.showInfo("sbm.configurazione.apiKeys.apiKeySalvata").then(()=>{this.backEvent.emit()})})}activate(){this.setIsLoading(!0),this.apiKey.statoMyForecast=c.Up.Attivo,this.apiService.setApiKey(this.apiKey).subscribe(()=>{this.setIsLoading(!1)})}delete(o){this.showDialogConfirm("sbm.configurazione.apiKeys.eliminareApiKey").then(t=>{null!=o&&(this.apiKey=o),this.apiKey.isDeleted=!0,this.setIsLoading(!0),this.apiService.setApiKey(this.apiKey).subscribe(n=>{if(this.apiKey.tipoApiKey==c.j6.MyForecast){let a=this.sessionService.getMyForecast();if(null!=a){let l=a.findIndex(r=>r.oid==this.apiKey.oid);l>=0&&this.sessionService.sessione.myForecast.splice(l,1)}this.localStorage.set(this.sessionService.SESSION_KEY,this.sessionService.sessione)}null!=n&&null!=n.data&&(this.sessionService.sessione.utente.plugins=n.data,this.localStorage.set(this.sessionService.SESSION_KEY,this.sessionService.sessione),this.navigationService.checkPlugins()),this.backEvent.emit()})},t=>{})}downloadStruttura(){return new Promise(t=>{this.setIsLoading(!0);let n=new d.OKT;n.username=this.apiKey.utente,n.password=this.apiKey.password,this.apiService.leggiStrutturaMyForecast(n).subscribe(a=>{t(a.data),this.setIsLoading(!1)})})}leggiStruttura(){this.downloadStruttura().then(o=>{let t=new d.Zpt;t.width="80vw",this.showModalDialog(Dt,t).componentInstance.struttura=o})}leggiRisorse(){this.setIsLoading(!0);let o=new d.y_T;o.username=this.apiKey.utente,o.password=this.apiKey.password,this.apiService.leggiRisorseMyForecast(o).subscribe(t=>{this.setIsLoading(!1);let n=new d.Zpt;n.width="80vw",this.showModalDialog(Dt,n).componentInstance.risorse=t.data})}leggiSorgenti(){this.setIsLoading(!0);let o=new d.cze;o.username=this.apiKey.utente,o.password=this.apiKey.password,this.apiService.leggiSorgentiMyForecast(o).subscribe(t=>{this.setIsLoading(!1);let n=new d.Zpt;n.width="80vw";let l=this.showModalDialog(Dt,n).componentInstance;l.sorgenti=t.data,l.apiKey=this.apiKey})}updateStruttura(){this.downloadStruttura().then(o=>{let t=new d.Zpt;t.width="80vw";let n=this.showModalDialog(co,t),a=n.componentInstance;a.dialogRef=n,a.apiKey=this.apiKey,a.info=o})}apriCondizioniContrattuali(){this.utilityService.openUrlInNewTab("https://app.hellosign.com/s/4d7C88BA")}onTipoApiKeySelect(){this.apiKey.tipoApiKey==c.j6.LetturaPrezzi||this.apiKey.tipoApiKey==c.j6.PublicAPI||this.apiKey.tipoApiKey==c.j6.ImportazionePrenotazioni?this.apiKey.apiKey=zc():this.apiKey.apiKey=""}isInvioAutomatico(){return this.apiKey.tipoApiKey==c.j6.PhilipsCMND||this.apiKey.tipoApiKey==c.j6.Qualitelis||this.apiKey.tipoApiKey==c.j6.Scrollidea||this.apiKey.tipoApiKey==c.j6.TrustYou}}function Rb(i,o){if(1&i&&(e.TgZ(0,"mat-option",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Fb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"mat-form-field",5)(2,"input",40,41),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(3),l=e.oxw();return e.KtG(l.onSearch(1,a.value,!1))}),e.ALo(4,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(4,2,"globals.codiceAlbergo")),e.Q6J("value",t.filters[1].value)}}function Hb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.add())}),e.TgZ(1,"i",44),e._uU(2,"add"),e.qZA()()}}function Kb(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Hb,3,0,"button",12),e.TgZ(2,"div",42)(3,"h4"),e._uU(4),e.ALo(5,"translate"),e.qZA()()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.admin),e.xp6(3),e.Oqu(e.lcZ(5,2,"sbm.configurazione.apiKeys.nessunaApiKey"))}}function Gb(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(1,"i",44),e._uU(2,"add"),e.qZA()()}}function $b(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Bb(i,o){1&i&&(e.TgZ(0,"mat-cell",45)(1,"button",46)(2,"i",47),e._uU(3,"edit"),e.qZA()()())}function Vb(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoApiKeys.proprieta.dataCreazione"),""))}function Xb(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataCreazione,"dd/MM/yyyy"))}}function jb(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoApiKeys.proprieta.descrizione"),""))}function Wb(i,o){if(1&i&&(e.TgZ(0,"div",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoMyForecast,t.statoMyForecast,"statoMyForecast"))," ")}}function ev(i,o){if(1&i&&(e.TgZ(0,"mat-cell",48)(1,"div",5),e._uU(2),e.qZA(),e.YNc(3,Wb,3,3,"div",49),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.hij(" ",t.descrizione," "),e.xp6(1),e.Q6J("ngIf",t.tipoApiKey==n.enumTipoApiKey.MyForecast)}}function tv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoApiKeys.proprieta.tipoApiKey"),""))}function iv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoApiKey,t.tipoApiKey,"tipoApiKey")))}}function ov(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoApiKeys.proprieta.isAttivo"),""))}function nv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("disabled",!0)("checked",t.isAttivo)}}function av(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoApiKeys.proprieta.apiKey"),""))}function lv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.apiKey)}}function rv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.oidAlbergo")))}function cv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.albergo?t.albergo.oid:"")}}function sv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.albergo")))}function pv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.albergo?t.albergo.nome:"")}}function dv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.codiceAlbergo")))}function mv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.albergo?t.albergo.codice:"")}}function _v(i,o){1&i&&e._UZ(0,"mat-header-cell")}function uv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",52)(1,"button",53),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(62);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",54),e._uU(3,"delete"),e.qZA()()()}}function gv(i,o){1&i&&e._UZ(0,"mat-header-row",55)}function hv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",56),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}so.\u0275fac=function(o){return new(o||so)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t),e.Y36(lt.n),e.Y36(Ae.f))},so.\u0275cmp=e.Xpm({type:so,selectors:[["app-api-keys-edit"]],inputs:{apiKey:"apiKey"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:26,vars:22,consts:[["class","w-100",4,"ngIf"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","search","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank","class","mr-1",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["autocompleteOff","","type","text","matInput","","readonly","",3,"placeholder","value"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[4,"ngFor","ngForOf"],[1,"row",3,"ngClass"],["color","primary",3,"ngModel","ngModelChange"],[3,"value",4,"ngIf"],[3,"value"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","readonly","disabled","ngModelChange"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"mb-3"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"font-weight-bold"],["class","d-block mt-3","href","#",3,"click",4,"ngIf"],["href","#",1,"d-block","mt-3",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"disabled","click"]],template:function(o,t){1&o&&(e.YNc(0,mb,3,4,"mat-form-field",0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",4),e.NdJ("ngModelChange",function(a){return t.apiKey.descrizione=a}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",5),e._uU(7," Indica la descrizione dell'apikey "),e.qZA()(),e.YNc(8,Sb,21,19,"ng-container",6),e.YNc(9,Jb,22,12,"ng-container",6),e.YNc(10,Eb,7,4,"div",7),e.YNc(11,Nb,7,4,"div",7),e.YNc(12,Ob,7,4,"div",7),e.TgZ(13,"div",8)(14,"button",9),e.NdJ("click",function(){return t.save()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,Lb,3,3,"button",10),e.YNc(18,Db,3,3,"button",10),e.YNc(19,Ib,3,3,"button",10),e.YNc(20,Qb,3,3,"button",10),e.YNc(21,Ub,3,4,"button",11),e.YNc(22,Yb,3,3,"button",10),e.TgZ(23,"button",12),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(24),e.ALo(25,"translate"),e.qZA()()),2&o&&(e.Q6J("ngIf",null!=t.apiKey&&t.apiKey.oid>0),e.xp6(4),e.Q6J("placeholder",e.lcZ(5,16,"bo.albergoApiKeys.proprieta.descrizione"))("ngModel",t.apiKey.descrizione),e.xp6(4),e.Q6J("ngIf",t.apiKey.tipoApiKey!=t.enumTipoApiKey.MyForecast),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.MyForecast),e.xp6(1),e.Q6J("ngIf",t.isInvioAutomatico()),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.PublicAPI),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.PublicAPI),e.xp6(3),e.Oqu(e.lcZ(16,18,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.MyForecast),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.MyForecast),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.MyForecast),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.MyForecast),e.xp6(1),e.Q6J("ngIf",t.apiKey.tipoApiKey==t.enumTipoApiKey.MyForecast),e.xp6(1),e.Q6J("ngIf",null!=t.apiKey&&t.apiKey.oid>0),e.xp6(2),e.Oqu(e.lcZ(25,20,"globals.annulla")))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,_.Fj,_.JJ,_.On,ne.d,Te.A,z.X$]});class ni extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.admin=!1,this.apiKey=new v.VmF,this.showTable=!0,this.enumTipoApiKey=c.j6,this.enumStatoMyForecast=c.Up}ngOnInit(){this.headerService.setTitle("sbm.configurazione.apiKeys.title"),this.admin?this.displayedColumns=["edit","dataCreazione","descrizione","tipoApiKey","isAttivo","apiKey","oidAlbergo","albergo","codiceAlbergo","delete"]:this.displayedColumns=["edit","dataCreazione","descrizione","tipoApiKey","isAttivo","apiKey","delete"],this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("tipoApiKey",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("albergo.codice",c.Hp.Contains,"",c.NM.String)),this.download()}ngOnDestroy(){this.headerService.clearTitle()}download(o=!0){o&&this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=(this.admin?this.apiService.getApiKeysAdminFilter(this.rq):this.apiService.getApiKeysFilter(this.rq)).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o&&this.setIsLoading(!1)})}add(){this.apiKey=new v.VmF(-1),this.apiKey.apiKey=zc(),this.apiKey.tipoApiKey=c.j6.PublicAPI,this.apiKey.isAttivo=!0,this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.apiKey=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(n),this.paginator.firstPage()}}ni.\u0275fac=function(o){return new(o||ni)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},ni.\u0275cmp=e.Xpm({type:ni,selectors:[["app-api-keys"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{admin:"admin"},features:[e.qOj],decls:63,vars:27,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],[3,"placeholder","value","selectionChange"],["tipoApiKeySelect",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","col-3",4,"ngIf"],[4,"ngIf"],["mat-mini-fab","","color","primary","class","mat-table-add",3,"click",4,"ngIf"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","dataCreazione"],[4,"matCellDef"],["matColumnDef","descrizione"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","tipoApiKey"],["matColumnDef","isAttivo"],["matColumnDef","apiKey"],["matColumnDef","oidAlbergo"],["matColumnDef","albergo"],["matColumnDef","codiceAlbergo"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"font-weight-bold","mt-3"],["href","#",3,"click"],[1,"edit-container",3,"hidden"],[3,"apiKey","backEvent"],["editComponent",""],[3,"value"],["autocompleteOff","","type","number","matInput","",3,"placeholder","value","input"],["codiceAlbergoSearch",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"flex-wrap"],["class","w-100 color-red",4,"ngIf"],[1,"w-100","color-red"],["color","primary",3,"disabled","checked"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-select",6,7),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e._UZ(9,"mat-option",8),e.YNc(10,Rb,3,4,"mat-option",9),e.ALo(11,"selectEnum"),e.qZA()()(),e.YNc(12,Fb,5,4,"div",10),e.qZA()(),e.YNc(13,Kb,6,4,"div",11),e.TgZ(14,"div",1),e.YNc(15,Gb,3,0,"button",12),e.TgZ(16,"div",13)(17,"mat-table",14),e.ynx(18,15),e.YNc(19,$b,1,0,"mat-header-cell",16),e.YNc(20,Bb,4,0,"mat-cell",17),e.BQk(),e.ynx(21,18),e.YNc(22,Vb,3,3,"mat-header-cell",16),e.YNc(23,Xb,3,4,"mat-cell",19),e.BQk(),e.ynx(24,20),e.YNc(25,jb,3,3,"mat-header-cell",16),e.YNc(26,ev,4,2,"mat-cell",21),e.BQk(),e.ynx(27,22),e.YNc(28,tv,3,3,"mat-header-cell",16),e.YNc(29,iv,3,3,"mat-cell",19),e.BQk(),e.ynx(30,23),e.YNc(31,ov,3,3,"mat-header-cell",16),e.YNc(32,nv,2,2,"mat-cell",19),e.BQk(),e.ynx(33,24),e.YNc(34,av,3,3,"mat-header-cell",16),e.YNc(35,lv,2,1,"mat-cell",19),e.BQk(),e.ynx(36,25),e.YNc(37,rv,3,3,"mat-header-cell",16),e.YNc(38,cv,2,1,"mat-cell",19),e.BQk(),e.ynx(39,26),e.YNc(40,sv,3,3,"mat-header-cell",16),e.YNc(41,pv,2,1,"mat-cell",19),e.BQk(),e.ynx(42,27),e.YNc(43,dv,3,3,"mat-header-cell",16),e.YNc(44,mv,2,1,"mat-cell",19),e.BQk(),e.ynx(45,28),e.YNc(46,_v,1,0,"mat-header-cell",16),e.YNc(47,uv,4,0,"mat-cell",29),e.BQk(),e.YNc(48,gv,1,0,"mat-header-row",30),e.YNc(49,hv,1,1,"mat-row",31),e.qZA()(),e.TgZ(50,"div",32)(51,"mat-paginator",33),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()(),e.TgZ(52,"div",34)(53,"a",35),e.NdJ("click",function(l){return l.preventDefault(),t.utility.openUrlInNewTab("https://documenter.getpostman.com/view/12628329/TVYAg1Pt")}),e._uU(54),e.ALo(55,"translate"),e.qZA()(),e.TgZ(56,"div",34)(57,"a",35),e.NdJ("click",function(l){return l.preventDefault(),t.utility.openUrlInNewTab("https://documenter.getpostman.com/view/12628329/UVeJM5yb")}),e._uU(58),e.ALo(59,"translate"),e.qZA()()()(),e.TgZ(60,"div",36)(61,"app-api-keys-edit",37,38),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,18,"bo.albergoApiKeys.proprieta.tipoApiKey")),e.Q6J("value",t.filters[0].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(11,20,t.enumTipoApiKey,"tipoApiKey")),e.xp6(2),e.Q6J("ngIf",t.admin),e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(1),e.Q6J("ngIf",!t.admin),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(3),e.Oqu(e.lcZ(55,23,"sbm.configurazione.apiKeys.documentazione")),e.xp6(4),e.Oqu(e.lcZ(59,25,"sbm.configurazione.apiKeys.documentazioneLocale")),e.xp6(2),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("apiKey",t.apiKey))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,so,m.uU,Te.A,z.X$]});class po{constructor(o){this.headerService=o}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.apiKeys.title")}ngOnDestroy(){this.headerService.clearTitle()}}po.\u0275fac=function(o){return new(o||po)(e.Y36(ie.r))},po.\u0275cmp=e.Xpm({type:po,selectors:[["app-api-keys-admin"]],decls:1,vars:1,consts:[[3,"admin"]],template:function(o,t){1&o&&e._UZ(0,"app-api-keys",0),2&o&&e.Q6J("admin",!0)},dependencies:[ni]});class mo extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.admin=!1,this.backEvent=new e.vpe}save(){this.admin||(this.attivitaAutomatica.albergo=new v.Z$(this.sessionService.getOidAlbergo())),this.setIsLoading(!0),this.apiService.setAttivitaAutomatica(this.attivitaAutomatica).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.attivitaAutomatiche.attivitaAutomaticaSalvata").then(()=>{this.backEvent.emit()})})}}function fv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"mat-form-field",23)(4,"input",24,25),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(5),l=e.oxw();return e.KtG(l.onSearch(0,a.value))}),e.ALo(6,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(6,2,"sbm.amministrazione.attivitaAutomatiche.codiceAlbergo")),e.Q6J("value",t.filters[0].value)}}function Cv(i,o){1&i&&(e.TgZ(0,"div")(1,"div",26)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.configurazione.attivitaAutomatiche.nessunaAttivitaAutomatica")))}function bv(i,o){1&i&&e._UZ(0,"mat-header-cell")}function vv(i,o){1&i&&(e.TgZ(0,"mat-cell",27)(1,"button",28)(2,"i",29),e._uU(3,"edit"),e.qZA()()())}function Tv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.backgroundWorker.proprieta.descrizione"),""))}function xv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function Zv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.backgroundWorker.proprieta.ultimaEsecuzione"),""))}function Av(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.ultimaEsecuzione,"dd/MM/yyyy HH:mm:ss"))}}function wv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.backgroundWorker.proprieta.isAttivo"),""))}function zv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",30),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)}}function Mv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.albergo")))}function qv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.albergo?t.albergo.nome:"")}}function Pv(i,o){1&i&&e._UZ(0,"mat-header-row",31)}function kv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",32),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}mo.\u0275fac=function(o){return new(o||mo)(e.Y36(A.s),e.Y36(j.m))},mo.\u0275cmp=e.Xpm({type:mo,selectors:[["app-attivita-automatiche-edit"]],inputs:{attivitaAutomatica:"attivitaAutomatica",admin:"admin"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:13,vars:14,consts:[[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"placeholder","ngModel","ngModelChange"],["color","primary","disabled","",3,"ngModel","ngModelChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-form-field",0)(1,"input",1),e.NdJ("ngModelChange",function(a){return t.attivitaAutomatica.descrizione=a}),e.ALo(2,"translate"),e.qZA()(),e.TgZ(3,"mat-checkbox",2),e.NdJ("ngModelChange",function(a){return t.attivitaAutomatica.isAttivo=a}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return t.save()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",5),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(11),e.ALo(12,"translate"),e.qZA()()),2&o&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,6,"bo.backgroundWorker.proprieta.descrizione")),e.Q6J("ngModel",t.attivitaAutomatica.descrizione),e.xp6(2),e.Q6J("ngModel",t.attivitaAutomatica.isAttivo),e.xp6(1),e.Oqu(e.lcZ(5,8,"bo.backgroundWorker.proprieta.isAttivo")),e.xp6(4),e.Oqu(e.lcZ(9,10,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(12,12,"globals.annulla")))},dependencies:[w.X,V.FC,h.eB,M.v_,b.k0,_.Fj,_.JJ,_.On,z.X$]});class ai extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.admin=!1,this.attivitaAutomatica=new v.dhb,this.showTable=!0,this.displayedColumns=[]}ngOnInit(){this.headerService.setTitle("sbm.configurazione.attivitaAutomatiche.title"),this.admin?(this.rq=new d.k$g,this.filters=[new d.wn$("albergo.codice",c.Hp.Contains,"",c.NM.String)],this.displayedColumns=["edit","descrizione","ultimaEsecuzione","isAttivo","albergo"]):this.displayedColumns=["edit","descrizione","ultimaEsecuzione","isAttivo"]}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.admin&&(this.rq.filters=this.utility.getFilters(this.filters)),this.searchRequest=(this.admin?this.apiService.getAttivitaAutomaticheAdminFilter(this.rq):this.apiService.getAttivitaAutomatiche()).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}add(){this.attivitaAutomatica=new v.dhb(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.attivitaAutomatica=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}}ai.\u0275fac=function(o){return new(o||ai)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},ai.\u0275cmp=e.Xpm({type:ai,selectors:[["app-attivita-automatiche"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{admin:"admin"},features:[e.qOj],decls:27,vars:12,consts:[[1,"p-3"],["class","filter",4,"ngIf"],[4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","descrizione"],[4,"matCellDef"],["matColumnDef","ultimaEsecuzione"],["matColumnDef","isAttivo"],["matColumnDef","albergo"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"attivitaAutomatica","admin","backEvent"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","value","input"],["codiceAlbergoSearch",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary","disabled","",3,"checked"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,fv,7,4,"div",1),e.YNc(2,Cv,5,3,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"mat-table",5),e.ynx(6,6),e.YNc(7,bv,1,0,"mat-header-cell",7),e.YNc(8,vv,4,0,"mat-cell",8),e.BQk(),e.ynx(9,9),e.YNc(10,Tv,3,3,"mat-header-cell",7),e.YNc(11,xv,2,1,"mat-cell",10),e.BQk(),e.ynx(12,11),e.YNc(13,Zv,3,3,"mat-header-cell",7),e.YNc(14,Av,3,4,"mat-cell",10),e.BQk(),e.ynx(15,12),e.YNc(16,wv,3,3,"mat-header-cell",7),e.YNc(17,zv,2,1,"mat-cell",10),e.BQk(),e.ynx(18,13),e.YNc(19,Mv,3,3,"mat-header-cell",7),e.YNc(20,qv,2,1,"mat-cell",10),e.BQk(),e.YNc(21,Pv,1,0,"mat-header-row",14),e.YNc(22,kv,1,1,"mat-row",15),e.qZA()(),e.TgZ(23,"div",16)(24,"mat-paginator",17),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(25,"div",18)(26,"app-attivita-automatiche-edit",19),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.admin&&t.showTable),e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("attivitaAutomatica",t.attivitaAutomatica)("admin",t.admin))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,mo,m.uU,z.X$]});class _o{constructor(o){this.headerService=o}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.attivitaAutomatiche.title")}ngOnDestroy(){this.headerService.clearTitle()}}function Sv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}_o.\u0275fac=function(o){return new(o||_o)(e.Y36(ie.r))},_o.\u0275cmp=e.Xpm({type:_o,selectors:[["app-attivita-automatiche-admin"]],decls:1,vars:1,consts:[[3,"admin"]],template:function(o,t){1&o&&e._UZ(0,"app-attivita-automatiche",0),2&o&&e.Q6J("admin",!0)},dependencies:[ai]});class uo extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.backEvent=new e.vpe}save(){this.setIsLoading(!0),this.apiService.setChangeLog(this.changeLog).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.amministrazione.change-logs.changeLogSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.amministrazione.change-logs.eliminareChangeLog").then(t=>{null!=o&&(this.changeLog=o),this.changeLog.isDeleted=!0,this.setIsLoading(!0),this.apiService.setChangeLog(this.changeLog).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function yv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",10),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",30)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.amministrazione.change-logs.nessunChangeLog")))}function Jv(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Ev(i,o){1&i&&(e.TgZ(0,"mat-cell",31)(1,"button",32)(2,"i",33),e._uU(3,"edit"),e.qZA()()())}function Nv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.changeLog.proprieta.versione")))}function Ov(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.versione)}}function Lv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.changeLog.proprieta.data")))}function Dv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function Iv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.changeLog.proprieta.categoria")))}function Qv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.categoria)}}function Uv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.changeLog.proprieta.descrizione")))}function Yv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"app-inner-html",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("_text",t.descrizione)}}function Rv(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Fv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",35)(1,"button",36),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(40);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",37),e._uU(3,"delete"),e.qZA()()()}}function Hv(i,o){1&i&&e._UZ(0,"mat-header-row",38)}function Kv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",39),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}uo.\u0275fac=function(o){return new(o||uo)(e.Y36(A.s),e.Y36(C.t))},uo.\u0275cmp=e.Xpm({type:uo,selectors:[["app-change-logs-edit"]],inputs:{changeLog:"changeLog"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:31,vars:30,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["data",""],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-3"],[3,"text","textChange"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.changeLog.versione=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",4),e.NdJ("ngModelChange",function(a){return t.changeLog.data=a}),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"mat-datepicker-toggle",5)(10,"mat-datepicker",6,7),e.qZA()(),e.TgZ(12,"div",1)(13,"mat-form-field",2)(14,"input",3),e.NdJ("ngModelChange",function(a){return t.changeLog.categoria=a}),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.changeLog.isAttivo=a}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"h5",9),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"app-editor",10),e.NdJ("textChange",function(a){return t.changeLog.descrizione=a}),e.qZA(),e.TgZ(23,"div",9)(24,"button",11),e.NdJ("click",function(){return t.save()}),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.YNc(27,Sv,3,3,"button",12),e.TgZ(28,"button",13),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(29),e.ALo(30,"translate"),e.qZA()()),2&o){const n=e.MAs(11);e.xp6(3),e.s9C("placeholder",e.lcZ(4,16,"bo.changeLog.proprieta.versione")),e.Q6J("ngModel",t.changeLog.versione),e.xp6(4),e.s9C("placeholder",e.lcZ(8,18,"bo.changeLog.proprieta.data")),e.Q6J("matDatepicker",n)("ngModel",t.changeLog.data),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.changeLog.data)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(15,20,"bo.changeLog.proprieta.categoria")),e.Q6J("ngModel",t.changeLog.categoria),e.xp6(2),e.Q6J("ngModel",t.changeLog.isAttivo),e.xp6(1),e.Oqu(e.lcZ(18,22,"bo.changeLog.proprieta.isAttivo")),e.xp6(3),e.Oqu(e.lcZ(21,24,"bo.changeLog.proprieta.descrizione")),e.xp6(2),e.Q6J("text",t.changeLog.descrizione),e.xp6(3),e.Oqu(e.lcZ(26,26,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.changeLog&&t.changeLog.oid>0),e.xp6(2),e.Oqu(e.lcZ(30,28,"globals.annulla"))}},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,_.Fj,_.JJ,_.On,Me.P,z.X$]});class go extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.changeLog=new v.vv_,this.showTable=!0,this.displayedColumns=["edit","versione","data","categoria","descrizione","delete"]}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.change-logs.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("versione",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getChangeLogsFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}add(){this.edit(new v.vv_(-1))}edit(o){this.changeLog=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle()}}function Gv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}go.\u0275fac=function(o){return new(o||go)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},go.\u0275cmp=e.Xpm({type:go,selectors:[["app-change-logs"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:41,vars:15,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["versioneSearch",""],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","versione"],[4,"matCellDef"],["matColumnDef","data"],["matColumnDef","categoria"],["matColumnDef","descrizione"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"changeLog","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[3,"_text"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,yv,8,3,"div",8),e.TgZ(10,"div",1)(11,"button",9),e.NdJ("click",function(){return t.add()}),e.TgZ(12,"i",10),e._uU(13,"add"),e.qZA()(),e.TgZ(14,"div",11)(15,"mat-table",12),e.ynx(16,13),e.YNc(17,Jv,1,0,"mat-header-cell",14),e.YNc(18,Ev,4,0,"mat-cell",15),e.BQk(),e.ynx(19,16),e.YNc(20,Nv,3,3,"mat-header-cell",14),e.YNc(21,Ov,2,1,"mat-cell",17),e.BQk(),e.ynx(22,18),e.YNc(23,Lv,3,3,"mat-header-cell",14),e.YNc(24,Dv,3,4,"mat-cell",17),e.BQk(),e.ynx(25,19),e.YNc(26,Iv,3,3,"mat-header-cell",14),e.YNc(27,Qv,2,1,"mat-cell",17),e.BQk(),e.ynx(28,20),e.YNc(29,Uv,3,3,"mat-header-cell",14),e.YNc(30,Yv,2,1,"mat-cell",17),e.BQk(),e.ynx(31,21),e.YNc(32,Rv,1,0,"mat-header-cell",14),e.YNc(33,Fv,4,0,"mat-cell",22),e.BQk(),e.YNc(34,Hv,1,0,"mat-header-row",23),e.YNc(35,Kv,1,1,"mat-row",24),e.qZA()(),e.TgZ(36,"div",25)(37,"mat-paginator",26),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(38,"div",27)(39,"app-change-logs-edit",28,29),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,13,"bo.changeLog.proprieta.versione")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("changeLog",t.changeLog))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,rt.W,uo,m.uU,z.X$]});class ho extends f.H{constructor(o){super(),this.apiService=o,this.backEvent=new e.vpe}save(){this.setIsLoading(!0),this.apiService.setComune(this.comune).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.amministrazione.comuni.comuneSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.amministrazione.comuni.eliminareComune").then(t=>{null!=o&&(this.comune=o),this.comune.isDeleted=!0,this.setIsLoading(!0),this.apiService.setComune(this.comune).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function $v(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",10),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",29)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.amministrazione.comuni.nessunComune")))}function Bv(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Vv(i,o){1&i&&(e.TgZ(0,"mat-cell",30)(1,"button",31)(2,"i",32),e._uU(3,"edit"),e.qZA()()())}function Xv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.comune.proprieta.nome")))}function jv(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function Wv(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.comune.proprieta.cap")))}function e3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.cap)}}function t3(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.comune.proprieta.codiceQuestura")))}function i3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codiceQuestura)}}function o3(i,o){1&i&&e._UZ(0,"mat-header-cell")}function n3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",33)(1,"button",34),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(37);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",35),e._uU(3,"delete"),e.qZA()()()}}function a3(i,o){1&i&&e._UZ(0,"mat-header-row",36)}function l3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",37),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}ho.\u0275fac=function(o){return new(o||ho)(e.Y36(A.s))},ho.\u0275cmp=e.Xpm({type:ho,selectors:[["app-comuni-edit"]],inputs:{comune:"comune"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:26,vars:23,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.comune.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.comune.cap=a}),e.ALo(8,"translate"),e.qZA()()()(),e.TgZ(9,"div",0)(10,"div",1)(11,"mat-form-field",2)(12,"input",3),e.NdJ("ngModelChange",function(a){return t.comune.provincia=a}),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",1)(15,"mat-form-field",2)(16,"input",3),e.NdJ("ngModelChange",function(a){return t.comune.codiceQuestura=a}),e.ALo(17,"translate"),e.qZA()()()(),e.TgZ(18,"div",4)(19,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,Gv,3,3,"button",6),e.TgZ(23,"button",7),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(24),e.ALo(25,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,11,"bo.comune.proprieta.nome")),e.Q6J("ngModel",t.comune.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(8,13,"bo.comune.proprieta.cap")),e.Q6J("ngModel",t.comune.cap),e.xp6(5),e.s9C("placeholder",e.lcZ(13,15,"bo.comune.proprieta.provincia")),e.Q6J("ngModel",t.comune.provincia),e.xp6(4),e.s9C("placeholder",e.lcZ(17,17,"bo.comune.proprieta.codiceQuestura")),e.Q6J("ngModel",t.comune.codiceQuestura),e.xp6(4),e.Oqu(e.lcZ(21,19,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.comune&&t.comune.oid>0),e.xp6(2),e.Oqu(e.lcZ(25,21,"globals.annulla")))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,_.Fj,_.JJ,_.On,z.X$]});class fo extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.comune=new v.AlI,this.showTable=!0,this.displayedColumns=["edit","nome","cap","codiceQuestura","delete"]}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.comuni.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getComuniFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}add(){this.edit(new v.AlI(-1))}edit(o){this.comune=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle()}}fo.\u0275fac=function(o){return new(o||fo)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},fo.\u0275cmp=e.Xpm({type:fo,selectors:[["app-comuni"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:38,vars:15,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["nomeSearch",""],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","cap"],["matColumnDef","codiceQuestura"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"comune","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,$v,8,3,"div",8),e.TgZ(10,"div",1)(11,"button",9),e.NdJ("click",function(){return t.add()}),e.TgZ(12,"i",10),e._uU(13,"add"),e.qZA()(),e.TgZ(14,"div",11)(15,"mat-table",12),e.ynx(16,13),e.YNc(17,Bv,1,0,"mat-header-cell",14),e.YNc(18,Vv,4,0,"mat-cell",15),e.BQk(),e.ynx(19,16),e.YNc(20,Xv,3,3,"mat-header-cell",14),e.YNc(21,jv,2,1,"mat-cell",17),e.BQk(),e.ynx(22,18),e.YNc(23,Wv,3,3,"mat-header-cell",14),e.YNc(24,e3,2,1,"mat-cell",17),e.BQk(),e.ynx(25,19),e.YNc(26,t3,3,3,"mat-header-cell",14),e.YNc(27,i3,2,1,"mat-cell",17),e.BQk(),e.ynx(28,20),e.YNc(29,o3,1,0,"mat-header-cell",14),e.YNc(30,n3,4,0,"mat-cell",21),e.BQk(),e.YNc(31,a3,1,0,"mat-header-row",22),e.YNc(32,l3,1,1,"mat-row",23),e.qZA()(),e.TgZ(33,"div",24)(34,"mat-paginator",25),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(35,"div",26)(36,"app-comuni-edit",27,28),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,13,"bo.comune.proprieta.nome")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("comune",t.comune))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,ho,z.X$]});class Co extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.albergo=new v.Thk}save(){if(this.albergo.nome){this.setIsLoading(!0),this.admin||(this.albergo.albergo=new v.Z$(this.sessionService.getOidAlbergo()));let o=new d.OTN;o.albergoMaster=this.albergo,this.admin?this.apiService.setAlbergoMaster(o).subscribe(t=>{this.dialogRef.close(t.data.obj)}):this.apiService.getPortaliFilter(d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number)).subscribe(t=>{let n=t.data;this.albergo.oidPortaliXAlbergo=n.map(a=>a.oid).join(";"),this.apiService.setAlbergoMaster(o).subscribe(a=>{this.dialogRef.close(a.data.obj)})})}else this.showError("globals.messages.inserireDati")}}Co.\u0275fac=function(o){return new(o||Co)(e.Y36(A.s),e.Y36(j.m))},Co.\u0275cmp=e.Xpm({type:Co,selectors:[["app-albergo-master-add"]],inputs:{admin:"admin",dialogRef:"dialogRef"},features:[e.qOj],decls:10,vars:8,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.albergo.nome=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(8),e.ALo(9,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.s9C("placeholder",e.lcZ(5,4,"bo.albergoMaster.proprieta.nome")),e.Q6J("ngModel",t.albergo.nome),e.xp6(4),e.Oqu(e.lcZ(9,6,"globals.salva")))},dependencies:[w.X,h.eB,M.v_,b.k0,F.aO,_.Fj,_.JJ,_.Q7,_.On,z.X$]});var Ve=Y(86427),bo=Y(42950);function r3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"app-view-select",26),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(2,-1==a.oid?"":a.oid.toString(),!0))}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataLoader",t.apiService.getAlberghiViewSelect())("placeholder",e.lcZ(2,2,"globals.albergo"))}}function c3(i,o){1&i&&(e.TgZ(0,"div",27)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.configurazione-dms.nessunPortale")))}function s3(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.oid")))}function p3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.oid)}}function d3(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergo.proprieta.nome")))}function m3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function _3(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.albergo")))}function u3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.albergo?null:t.albergo.nome)}}function g3(i,o){1&i&&e._UZ(0,"mat-header-cell")}function h3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"a",28),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.collegaScollega(l))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.configurazione-dms."+(n.isPortaleSelected(t.oid)?"scollega":"collega")))}}function f3(i,o){1&i&&e._UZ(0,"mat-header-row",29)}function C3(i,o){1&i&&e._UZ(0,"mat-row")}class vo extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.displayedColumns=[],this.selectedPortali=[]}ngOnInit(){this.filters=[],this.filters.push(new d.wn$("oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("albergo.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("portale.tipoPortale",c.Hp.Equal,"0",c.NM.Number)),this.admin?this.displayedColumns=["oid","nome","albergo","collegaScollega"]:this.displayedColumns=["oid","nome","collegaScollega"],this.portali.forEach(o=>this.selectedPortali.push(o))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe();let t=new d.k$g;t.filters=this.utility.getFilters(this.filters),this.searchRequest=(this.admin?this.apiService.getPortaliXAlbergoAdminFilter(t):this.apiService.getPortaliFilter(t)).subscribe(n=>{this.dataSourcePortali=new s.r4(n.data),this.dataSourcePortali.paginator=this.paginator,o||this.setIsLoading(!1)})}onSearch(o,t,n=!1){null!=t&&(this.filters[o].value=t),this.download(!n),this.paginator.firstPage()}collegaScollega(o){let t=this.selectedPortali.findIndex(n=>n.oid==o.oid);t>=0?this.selectedPortali.splice(t,1):this.selectedPortali.push(o)}isPortaleSelected(o){return null!=this.selectedPortali.find(t=>t.oid==o)}}vo.\u0275fac=function(o){return new(o||vo)(e.Y36(A.s),e.Y36(C.t))},vo.\u0275cmp=e.Xpm({type:vo,selectors:[["app-collega-portale"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{admin:"admin",portali:"portali",dialogRef:"dialogRef"},features:[e.qOj],decls:39,vars:21,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","value","input"],["oidSearch",""],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["nomeSearch",""],["class","col-4",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","oid"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","albergo"],["matColumnDef","collegaScollega"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"text-right","mt-3"],["mat-flat-button","","color","primary",3,"click"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"color-pink","font-weight-bold",3,"click"],[1,"mat-table-header"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"input",5,6),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",3)(10,"mat-form-field",4)(11,"input",7,8),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(12);return e.KtG(t.onSearch(1,l.value))}),e.ALo(13,"translate"),e.qZA()()(),e.YNc(14,r3,3,4,"div",9),e.qZA(),e.YNc(15,c3,4,3,"div",10),e.TgZ(16,"div",11)(17,"div",12)(18,"mat-table",13),e.ynx(19,14),e.YNc(20,s3,3,3,"mat-header-cell",15),e.YNc(21,p3,2,1,"mat-cell",16),e.BQk(),e.ynx(22,17),e.YNc(23,d3,3,3,"mat-header-cell",15),e.YNc(24,m3,2,1,"mat-cell",16),e.BQk(),e.ynx(25,18),e.YNc(26,_3,3,3,"mat-header-cell",15),e.YNc(27,u3,2,1,"mat-cell",16),e.BQk(),e.ynx(28,19),e.YNc(29,g3,1,0,"mat-header-cell",15),e.YNc(30,h3,4,3,"mat-cell",16),e.BQk(),e.YNc(31,f3,1,0,"mat-header-row",20),e.YNc(32,C3,1,0,"mat-row",21),e.qZA()(),e.TgZ(33,"div",22),e._UZ(34,"mat-paginator",23),e.qZA()(),e.TgZ(35,"div",24)(36,"button",25),e.NdJ("click",function(){return t.dialogRef.close(t.selectedPortali)}),e._uU(37),e.ALo(38,"translate"),e.qZA()()}2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.s9C("placeholder",e.lcZ(8,15,"globals.oid")),e.Q6J("value",t.filters[0].value),e.xp6(5),e.s9C("placeholder",e.lcZ(13,17,"bo.portaleXAlbergo.proprieta.nome")),e.Q6J("value",t.filters[1].value),e.xp6(3),e.Q6J("ngIf",t.admin),e.xp6(1),e.Q6J("ngIf",null==t.dataSourcePortali||null==t.dataSourcePortali.data||0==t.dataSourcePortali.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSourcePortali||null==t.dataSourcePortali.data||0==t.dataSourcePortali.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSourcePortali),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(3),e.Oqu(e.lcZ(38,19,"globals.salva")))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,F.aO,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,ne.d,z.X$]});var We=Y(29735),Ge=Y(31534);const b3=["editorContainer"];class li{constructor(o,t,n){this.headerService=o,this.containerService=t,this.utility=n,this.valueChange=new e.vpe,this.MONACO_EDITOR_BASE_URL="./assets/monaco-editor/min/vs"}ngOnInit(){this.sub=this.headerService.drawerClosedEvent.subscribe(()=>{this.setEditorSize()}),this.sub1=this.headerService.drawerFinishedOpeningEvent.subscribe(()=>{this.setEditorSize()}),this.sub2=this.containerService.windowResizeEvent.subscribe(()=>{this.setEditorSize()})}ngAfterViewInit(){null!=window.monaco?this.init():this.utility.loadExternalScript(this.MONACO_EDITOR_BASE_URL+"/loader.js").then(()=>{window.require.config({paths:{vs:this.MONACO_EDITOR_BASE_URL}}),window.require(["vs/editor/editor.main"],()=>{this.init()})})}init(){this.editor=window.monaco.editor.create(this.editorContainer.nativeElement,{value:this.value,language:"css",automaticLayout:!0,theme:"vs-dark"}),this.editor.onDidChangeModelContent(()=>{this.valueChange.emit(this.editor.getValue())})}setEditorSize(){setTimeout(()=>{null!=this.editor&&this.editor.layout()},500)}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe()}}function v3(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.nome)}}function T3(i,o){1&i&&(e.TgZ(0,"div",25)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.serviziDms.nessunServizio")))}function x3(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.servizio.proprieta.nome")))}function Z3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function A3(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.albergo")))}function w3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.albergo?null:t.albergo.nome)}}function z3(i,o){1&i&&e._UZ(0,"mat-header-cell")}function M3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"a",26),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.collegaScollega(l))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.configurazione-dms."+(n.isServizioSelected(t.oid)?"scollega":"collega")))}}function q3(i,o){1&i&&e._UZ(0,"mat-header-row",27)}function P3(i,o){1&i&&e._UZ(0,"mat-row")}li.\u0275fac=function(o){return new(o||li)(e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},li.\u0275cmp=e.Xpm({type:li,selectors:[["app-css-editor"]],viewQuery:function(o,t){if(1&o&&e.Gf(b3,5),2&o){let n;e.iGM(n=e.CRH())&&(t.editorContainer=n.first)}},inputs:{value:"value"},outputs:{valueChange:"valueChange"},decls:3,vars:0,consts:[[1,"editor-background","pt-4","pb-4","rounded","overflow-hidden"],[1,"editor"],["editorContainer",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"div",1,2),e.qZA())},styles:[".editor-background[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor[_ngcontent-%COMP%]{height:400px}"]});class To extends f.H{constructor(o){super(),this.apiService=o,this.displayedColumns=["nome","albergo","collegaScollega"],this.rq=new d.PKE,this.selectedServizi=[]}ngOnInit(){this.servizi.forEach(o=>this.selectedServizi.push(o))}ngAfterViewInit(){this.download(!1,!0)}download(o=!1,t=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.searchRequest=this.apiService.getServiziAlbergoMaster(this.oidAlbergo,this.rq).subscribe(n=>{if(this.dataSourceServizi=new s.r4(n.data),this.dataSourceServizi.paginator=this.paginator,t){this.alberghi=[];for(let a of n.data.map(l=>l.albergo))null==this.alberghi.find(l=>l.oid==a.oid)&&this.alberghi.push(a)}o||this.setIsLoading(!1)})}collegaScollega(o){let t=this.selectedServizi.findIndex(n=>n.oid==o.oid);t>=0?this.selectedServizi.splice(t,1):this.selectedServizi.push(o)}isServizioSelected(o){return null!=this.selectedServizi.find(t=>t.oid==o)}}To.\u0275fac=function(o){return new(o||To)(e.Y36(A.s))},To.\u0275cmp=e.Xpm({type:To,selectors:[["app-collega-servizio"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{servizi:"servizi",oidAlbergo:"oidAlbergo",dialogRef:"dialogRef"},features:[e.qOj],decls:36,vars:22,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],["nomeSearch",""],[3,"placeholder","ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","border rounded-lg mat-elevation-z1 p-4",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","albergo"],["matColumnDef","collegaScollega"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"text-right","mt-3"],["mat-flat-button","","color","primary",3,"click"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"color-pink","font-weight-bold",3,"click"],[1,"mat-table-header"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"input",5,6),e.NdJ("ngModelChange",function(a){return t.rq.nome=a})("ngModelChange",function(){return t.download(!0),t.paginator.firstPage()}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",3)(10,"mat-form-field",4)(11,"mat-select",7),e.NdJ("ngModelChange",function(a){return t.rq.oidAlbergo=a})("ngModelChange",function(){return t.download(!1),t.paginator.firstPage()}),e.ALo(12,"translate"),e._UZ(13,"mat-option",8),e.YNc(14,v3,2,2,"mat-option",9),e.qZA()()()(),e.YNc(15,T3,4,3,"div",10),e.TgZ(16,"div",11)(17,"div",12)(18,"mat-table",13),e.ynx(19,14),e.YNc(20,x3,3,3,"mat-header-cell",15),e.YNc(21,Z3,2,1,"mat-cell",16),e.BQk(),e.ynx(22,17),e.YNc(23,A3,3,3,"mat-header-cell",15),e.YNc(24,w3,2,1,"mat-cell",16),e.BQk(),e.ynx(25,18),e.YNc(26,z3,1,0,"mat-header-cell",15),e.YNc(27,M3,4,3,"mat-cell",16),e.BQk(),e.YNc(28,q3,1,0,"mat-header-row",19),e.YNc(29,P3,1,0,"mat-row",20),e.qZA()(),e.TgZ(30,"div",21),e._UZ(31,"mat-paginator",22),e.qZA()(),e.TgZ(32,"div",23)(33,"button",24),e.NdJ("click",function(){return t.dialogRef.close(t.selectedServizi)}),e._uU(34),e.ALo(35,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.s9C("placeholder",e.lcZ(8,16,"bo.servizio.proprieta.nome")),e.Q6J("ngModel",t.rq.nome),e.xp6(5),e.Q6J("placeholder",e.lcZ(12,18,"globals.albergo"))("ngModel",t.rq.oidAlbergo),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.alberghi),e.xp6(1),e.Q6J("ngIf",null==t.dataSourceServizi||null==t.dataSourceServizi.data||0==t.dataSourceServizi.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSourceServizi||null==t.dataSourceServizi.data||0==t.dataSourceServizi.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSourceServizi),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(3),e.Oqu(e.lcZ(35,20,"globals.salva")))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,z.X$]});const k3=["panel"];function S3(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-tab",22)(2,"mat-form-field",23)(3,"input",24),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw();return e.KtG(p.modelEdit.serviziDmsXLingua[r].nome=a)}),e.ALo(4,"translate"),e.qZA()(),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"app-editor",25),e.NdJ("textChange",function(a){const r=e.CHM(t).index,p=e.oxw();return e.KtG(p.modelEdit.serviziDmsXLingua[r].descrizione=a)}),e.qZA()(),e.BQk()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(1),e.Q6J("label",t.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(4,6,"bo.servizioDmsXLingua.proprieta.nome")),e.Q6J("ngModel",a.modelEdit.serviziDmsXLingua[n].nome),e.xp6(2),e.hij(" ",e.lcZ(6,8,"bo.servizioDmsXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+n)("text",a.modelEdit.serviziDmsXLingua[n].descrizione)}}function y3(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.servizioDms.proprieta.nome")))}function J3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function E3(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.albergo")))}function N3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.albergo?null:t.albergo.nome)}}function O3(i,o){1&i&&e._UZ(0,"mat-header-cell")}function L3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"a",26),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.scollega(l))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.configurazione-dms.scollega")))}function D3(i,o){1&i&&e._UZ(0,"mat-header-row",27)}function I3(i,o){1&i&&e._UZ(0,"mat-row")}function Q3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}const U3=function(i){return{"mb-3 border-bottom":i}};class xo extends f.H{set servizio(o){if(null!=o){this.modelEdit=new d.u92,this.modelEdit.servizioDms=o,this.selectedIndex=0,this.panel.close();for(let t of this.lingue){let n=new v.xmi;n.lingua=t,this.modelEdit.serviziDmsXLingua.push(n)}this.dataSourceServizi=new s.r4,null!=o.oid&&(this.setIsLoading(!0),this.apiService.getServizioDmsDetails(o.oid).subscribe(t=>{this.dataSourceServizi=new s.r4(t.data.serviziCollegati),this.dataSourceServizi.paginator=this.paginator,-1!=o.oid?(this.editing=!0,this.apiService.getServiziDmsXLingua(o.oid).subscribe(n=>{if(null!=n.data&&n.data.length>0)for(let a of n.data)if(null!=a.lingua){let l=this.modelEdit.serviziDmsXLingua.findIndex(r=>r.lingua.oid==a.lingua.oid);l>=0&&(this.modelEdit.serviziDmsXLingua[l].servizioDms=a.servizioDms,this.modelEdit.serviziDmsXLingua[l].nome=a.nome,this.modelEdit.serviziDmsXLingua[l].descrizione=a.descrizione)}this.setIsLoading(!1)})):(this.editing=!1,this.setIsLoading(!1))}))}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.displayedColumns=["nome","albergo","scollega"],this.modelEdit=new d.u92,this.editing=!1,this.selectedIndex=0,this.backEvent=new e.vpe}save(o=null){for(let t of this.modelEdit.serviziDmsXLingua)t.servizioDms=this.modelEdit.servizioDms;this.modelEdit.servizioDms.albergoMaster=new v.Thk(this.oidAlbergo),null!=o&&(this.modelEdit.servizioDms.oidServizi=o.map(t=>t.oid).join(";")),this.setIsLoading(!0),this.apiService.setServizioDms(this.modelEdit).subscribe(()=>{null==o?(this.setIsLoading(!1),this.showInfo("sbm.amministrazione.serviziDms.servizioDmsSalvato").then(()=>{this.backEvent.emit(!0)})):this.apiService.getServizioDmsDetails(this.modelEdit.servizioDms.oid).subscribe(t=>{this.dataSourceServizi=new s.r4(t.data.serviziCollegati),this.dataSourceServizi.paginator=this.paginator,this.setIsLoading(!1)})})}delete(o){this.showDialogConfirm("sbm.amministrazione.serviziDms.eliminareServizioDms").then(t=>{null!=o&&(this.modelEdit.servizioDms=o),this.modelEdit.servizioDms.isDeleted=!0,this.setIsLoading(!0),this.apiService.setServizioDms(this.modelEdit).subscribe(()=>{this.backEvent.emit(!0)})},t=>{})}scollega(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{let n=Object.assign([],this.dataSourceServizi.data),a=n.findIndex(l=>l.oid==o.oid);a>=0&&n.splice(a,1),this.save(n)},t=>{})}collega(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh";let t=this.showModalDialog(To,o),n=t.componentInstance;n.oidAlbergo=this.oidAlbergo,n.servizi=this.dataSourceServizi.data,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&this.save(a)})}}function Y3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",3),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",19)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.amministrazione.serviziDms.nessunServizioDms")))}function R3(i,o){1&i&&e._UZ(0,"mat-header-cell")}function F3(i,o){1&i&&(e.TgZ(0,"mat-cell",20)(1,"button",21)(2,"i",22),e._uU(3,"edit"),e.qZA()()())}function H3(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.servizioDms.proprieta.nome"),""))}function K3(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function G3(i,o){1&i&&e._UZ(0,"mat-header-cell")}function $3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",23)(1,"button",24),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(22);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",25),e._uU(3,"delete"),e.qZA()()()}}function B3(i,o){1&i&&e._UZ(0,"mat-header-row",26)}function V3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",27),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}xo.\u0275fac=function(o){return new(o||xo)(e.Y36(A.s),e.Y36(j.m))},xo.\u0275cmp=e.Xpm({type:xo,selectors:[["app-servizi-dms-edit"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(k3,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.panel=n.first)}},inputs:{oidAlbergo:"oidAlbergo",servizio:"servizio"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:36,vars:29,consts:[[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","border","rounded","mt-3",3,"hidden"],["panel",""],[3,"ngClass"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","albergo"],["matColumnDef","scollega"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],[1,"color-pink","font-weight-bold",3,"click"],[1,"mat-table-header"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"mat-form-field",0)(1,"input",1),e.NdJ("ngModelChange",function(a){return t.modelEdit.servizioDms.nome=a}),e.ALo(2,"translate"),e.qZA()(),e.TgZ(3,"mat-tab-group",2),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(4,S3,8,10,"ng-container",3),e.qZA(),e.TgZ(5,"mat-expansion-panel",4,5)(7,"mat-expansion-panel-header",6),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",7)(11,"mat-table",8),e.ynx(12,9),e.YNc(13,y3,3,3,"mat-header-cell",10),e.YNc(14,J3,2,1,"mat-cell",11),e.BQk(),e.ynx(15,12),e.YNc(16,E3,3,3,"mat-header-cell",10),e.YNc(17,N3,2,1,"mat-cell",11),e.BQk(),e.ynx(18,13),e.YNc(19,O3,1,0,"mat-header-cell",10),e.YNc(20,L3,4,3,"mat-cell",11),e.BQk(),e.YNc(21,D3,1,0,"mat-header-row",14),e.YNc(22,I3,1,0,"mat-row",15),e.qZA()(),e.TgZ(23,"div",16),e._UZ(24,"mat-paginator",17),e.qZA()(),e.TgZ(25,"div",18)(26,"button",19),e.NdJ("click",function(){return t.save()}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"button",19),e.NdJ("click",function(){return t.collega()}),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.YNc(32,Q3,3,3,"button",20),e.TgZ(33,"button",21),e.NdJ("click",function(){return t.backEvent.emit(!1)}),e._uU(34),e.ALo(35,"translate"),e.qZA()()),2&o){const n=e.MAs(6);e.xp6(1),e.s9C("placeholder",e.lcZ(2,17,"bo.servizioDms.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.servizioDms.nome),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.serviziDmsXLingua),e.xp6(1),e.Q6J("hidden",null==t.dataSourceServizi||null==t.dataSourceServizi.data||0==t.dataSourceServizi.data.length),e.xp6(2),e.Q6J("ngClass",e.VKq(27,U3,n.expanded)),e.xp6(1),e.hij(" ",e.lcZ(9,19,"sbm.amministrazione.serviziDms.serviziCollegati")," "),e.xp6(3),e.Q6J("dataSource",t.dataSourceServizi),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(3),e.Oqu(e.lcZ(28,21,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(31,23,"sbm.amministrazione.configurazione-dms.collega")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(35,25,"globals.annulla"))}},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,b.k0,ee.SK,ee.R7,ye.ib,ye.yz,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,Me.P,z.X$],styles:[".mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#f0f0f0!important}"]});class Zo extends f.H{constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.showTable=!0,this.displayedColumns=["edit","nome","delete"]}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getServiziDms(this.oidAlbergo).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.servizio=new v.Jqo(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.servizio=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}function X3(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}Zo.\u0275fac=function(o){return new(o||Zo)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},Zo.\u0275cmp=e.Xpm({type:Zo,selectors:[["app-servizi-dms"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{oidAlbergo:"oidAlbergo"},features:[e.qOj],decls:23,vars:11,consts:[[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[3,"servizio","oidAlbergo","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.YNc(0,Y3,8,3,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"i",3),e._uU(4,"add"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,R3,1,0,"mat-header-cell",7),e.YNc(9,F3,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,H3,3,3,"mat-header-cell",7),e.YNc(12,K3,2,1,"mat-cell",10),e.BQk(),e.ynx(13,11),e.YNc(14,G3,1,0,"mat-header-cell",7),e.YNc(15,$3,4,0,"mat-cell",12),e.BQk(),e.YNc(16,B3,1,0,"mat-header-row",13),e.YNc(17,V3,1,1,"mat-row",14),e.qZA()(),e.TgZ(18,"div",15)(19,"mat-paginator",16),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(20,"div",1)(21,"app-servizi-dms-edit",17,18),e.NdJ("backEvent",function(a){return t.showTable=!0,a&&t.download(),t.containerService.scrollToTop()}),e.qZA()()),2&o&&(e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("servizio",t.servizio)("oidAlbergo",t.oidAlbergo))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,xo,z.X$]});class Ao extends f.H{constructor(o){super(),this.apiService=o,this.pagina=new v.vbE,this.enumTipoPaginaDms=c.df}ngOnInit(){this.pagina.albergoMaster=new v.Thk(this.oidAlbergo),this.pagina.tipo=c.df.Testo}save(){if(this.pagina.nome){this.setIsLoading(!0);let o=new d.bWJ;o.pagina=this.pagina,this.apiService.setPaginaAlbergoMaster(o).subscribe(t=>{this.dialogRef.close(t.data.obj),this.setIsLoading(!1)})}else this.showError("globals.messages.inserireDati")}}Ao.\u0275fac=function(o){return new(o||Ao)(e.Y36(A.s))},Ao.\u0275cmp=e.Xpm({type:Ao,selectors:[["app-pagine-dms-add"]],inputs:{oidAlbergo:"oidAlbergo",dialogRef:"dialogRef"},features:[e.qOj],decls:21,vars:19,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row","mt-3"],[1,"col-6"],[1,"w-100"],["required","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"],[3,"value"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",2)(7,"div",3)(8,"mat-form-field",4)(9,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.pagina.tipo=a}),e.ALo(10,"translate"),e.YNc(11,X3,3,4,"mat-option",6),e.ALo(12,"selectEnum"),e.qZA()()(),e.TgZ(13,"div",3)(14,"mat-form-field",4)(15,"input",7),e.NdJ("ngModelChange",function(a){return t.pagina.nome=a}),e.ALo(16,"translate"),e.qZA()()()(),e.TgZ(17,"div",8)(18,"button",9),e.NdJ("click",function(){return t.save()}),e._uU(19),e.ALo(20,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,8,"sbm.amministrazione.pagineDms.creaPagina")),e.xp6(5),e.s9C("placeholder",e.lcZ(10,10,"bo.albergoMasterPagina.proprieta.tipo")),e.Q6J("ngModel",t.pagina.tipo),e.xp6(2),e.Q6J("ngForOf",e.xi3(12,12,t.enumTipoPaginaDms,"tipoPaginaDms")),e.xp6(4),e.s9C("placeholder",e.lcZ(16,15,"bo.albergoMasterPagina.proprieta.nome")),e.Q6J("ngModel",t.pagina.nome),e.xp6(4),e.Oqu(e.lcZ(20,17,"globals.salva")))},dependencies:[m.sg,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,_.Fj,_.JJ,_.Q7,_.On,Te.A,z.X$]});class zt extends f.H{constructor(o,t){super(),this.localizationService=o,this.utility=t,this.UNLAYER_EDITOR_SCRIPT_URL="https://editor.unlayer.com/embed.js"}ngOnInit(){this.setIsLoading(!0),this.utility.loadExternalScript(this.UNLAYER_EDITOR_SCRIPT_URL).then(()=>{this.editor=unlayer.createEditor({id:"editor-container",displayMode:"email",locale:this.localizationService.currentLanguage.cultureInfoName,appearance:{theme:"dark",panels:{tools:{dock:"right"}}}}),this.design&&this.editor.loadDesign(JSON.parse(this.design)),this.editor.addEventListener("editor:ready",()=>this.setIsLoading(!1))})}save(){this.editor.exportHtml(o=>this.dialogRef.close(o))}}function j3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"mat-form-field",2)(2,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.pagina.url=a)}),e.ALo(3,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(3,2,"bo.albergoMasterPagina.proprieta.url")),e.Q6J("ngModel",t.modelEdit.pagina.url)}}function W3(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw();return e.KtG(l.copiaAltreLingue(a))}),e.ALo(1,"translate"),e.TgZ(2,"i",20),e._uU(3,"content_copy"),e.qZA()()}2&i&&e.Q6J("disableRipple",!0)("matTooltip",e.lcZ(1,2,"globals.copiaAltreLingue"))}function e6(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.YNc(2,W3,4,4,"button",18)),2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.xp6(1),e.Oqu(n.lingua.nome),e.xp6(1),e.Q6J("ngIf",l.selectedIndex==a)}}function t6(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.openEditor(a))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",22),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",23)(8,"div",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.openEditor(a))}),e.qZA(),e._UZ(9,"app-inner-html",25),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().index,n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"sbm.amministrazione.pagineDms.editorGrafico")),e.xp6(3),e.Oqu(e.lcZ(6,5,"bo.albergoMasterPaginaXLingua.proprieta.testo")),e.xp6(4),e.Q6J("_text",n.modelEdit.pagineXLingua[t].testo?n.modelEdit.pagineXLingua[t].testo:"")}}function i6(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-tab"),e.YNc(2,e6,3,2,"ng-template",14),e.TgZ(3,"mat-form-field",15)(4,"input",16),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw();return e.KtG(p.modelEdit.pagineXLingua[r].nome=a)}),e.ALo(5,"translate"),e.qZA()(),e.YNc(6,t6,10,7,"ng-container",17),e.qZA(),e.BQk()}if(2&i){const t=o.index,n=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,3,"bo.albergoMasterPaginaXLingua.proprieta.nome")),e.Q6J("ngModel",n.modelEdit.pagineXLingua[t].nome),e.xp6(2),e.Q6J("ngIf",n.modelEdit.pagina.tipo==n.enumTipoPaginaDms.Testo)}}zt.\u0275fac=function(o){return new(o||zt)(e.Y36(Oe.o),e.Y36(C.t))},zt.\u0275cmp=e.Xpm({type:zt,selectors:[["app-html-editor-dialog"]],inputs:{design:"design",dialogRef:"dialogRef"},features:[e.qOj],decls:7,vars:4,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["id","editor-container"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"div",2),e.TgZ(4,"button",3),e.NdJ("click",function(){return t.save()}),e._uU(5),e.ALo(6,"translate"),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(5),e.Oqu(e.lcZ(6,2,"globals.salva")))},dependencies:[h.eB,F.aO,z.X$],styles:["#editor-container[_ngcontent-%COMP%]{height:800px;min-height:800px;max-height:800px}"]});const Fc=function(i,o){return{"col-4":i,"col-6":o}};class wo extends f.H{set pagina(o){if(null!=o){this.modelEdit=new d.bWJ,this.modelEdit.pagina=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.OJQ;n.lingua=t,this.modelEdit.pagineXLingua.push(n)}null!=o.oid&&(this.setIsLoading(!0),this.apiService.getPagineAlbergoMasterXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.pagineXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.pagineXLingua[a].albergoMasterPagina=n.albergoMasterPagina,this.modelEdit.pagineXLingua[a].nome=n.nome,this.modelEdit.pagineXLingua[a].testo=n.testo,this.modelEdit.pagineXLingua[a].design=n.design)}this.setIsLoading(!1)}))}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.bWJ,this.selectedIndex=0,this.enumTipoPaginaDms=c.df,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.pagineXLingua)o.albergoMasterPagina=this.modelEdit.pagina;this.modelEdit.pagina.albergoMaster=new v.Thk(this.oidAlbergo),this.setIsLoading(!0),this.apiService.setPaginaAlbergoMaster(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.amministrazione.pagineDms.paginaSalvata").then(()=>{this.backEvent.emit(!0)})})}delete(o){this.showDialogConfirm("sbm.amministrazione.pagineDms.eliminarePagina").then(t=>{null!=o&&(this.modelEdit.pagina=o),this.modelEdit.pagina.isDeleted=!0,this.setIsLoading(!0),this.apiService.setPaginaAlbergoMaster(this.modelEdit).subscribe(()=>{this.backEvent.emit(!0)})},t=>{})}openEditor(o){let t=new d.Zpt;t.width="80vw",t.minHeight="95vh";let n=this.showModalDialog(zt,t),a=n.componentInstance;a.design=o.design,a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){o.design=JSON.stringify(l.design),o.testo=l.html;for(let r of this.modelEdit.pagineXLingua)r.design||(r.design=o.design),r.testo||(r.testo=o.testo)}})}copiaAltreLingue(o){this.showDialogConfirm("globals.effettuareOperazione").then(()=>{for(let t of this.modelEdit.pagineXLingua)t.nome=o.nome,t.design=o.design,t.testo=o.testo},()=>{})}}function o6(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",3),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",22)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.amministrazione.pagineDms.nessunaPagina")))}function n6(i,o){1&i&&e._UZ(0,"mat-header-cell")}function a6(i,o){1&i&&(e.TgZ(0,"mat-cell",23)(1,"button",24)(2,"i",25),e._uU(3,"edit"),e.qZA()()())}function l6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoMasterPagina.proprieta.nome"),""))}function r6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function c6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoMasterPagina.proprieta.url"),""))}function s6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.url)}}function p6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoMasterPagina.proprieta.tipo"),""))}function d6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoPaginaDms,t.tipo,"tipoPaginaDms")))}}function m6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoMasterPagina.proprieta.isModale"),""))}function _6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",26),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isModale)}}function u6(i,o){1&i&&e._UZ(0,"mat-header-cell")}function g6(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",27)(1,"button",28),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(31);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",29),e._uU(3,"delete"),e.qZA()()()}}function h6(i,o){1&i&&e._UZ(0,"mat-header-row",30)}function f6(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",31),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}wo.\u0275fac=function(o){return new(o||wo)(e.Y36(A.s),e.Y36(j.m))},wo.\u0275cmp=e.Xpm({type:wo,selectors:[["app-pagine-dms-edit"]],inputs:{oidAlbergo:"oidAlbergo",pagina:"pagina"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:22,vars:28,consts:[[1,"row"],[3,"ngClass"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["class","col-4",4,"ngIf"],[1,"col-4",3,"ngClass"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"col-4"],["mat-tab-label",""],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["mat-icon-button","","color","primary","class","copiaAltreLingua",3,"disableRipple","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","primary",1,"copiaAltreLingua",3,"disableRipple","matTooltip","click"],[1,"material-icons-round"],["mat-flat-button","","color","primary",3,"click"],[1,"mt-3","mb-2","font-weight-bold"],[1,"testo","border","rounded","p-3","position-relative"],[1,"w-100","h-100","position-absolute","cursor-pointer",3,"click"],[3,"_text"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.pagina.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.YNc(5,j3,4,4,"div",4),e.TgZ(6,"div",5)(7,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.pagina.isModale=a}),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"mat-tab-group",7),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(11,i6,7,5,"ng-container",8),e.qZA(),e.TgZ(12,"div",9)(13,"button",10),e.NdJ("click",function(){return t.save()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",11),e.NdJ("click",function(){return t.delete()}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"button",12),e.NdJ("click",function(){return t.backEvent.emit(!1)}),e._uU(20),e.ALo(21,"translate"),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("ngClass",e.WLB(22,Fc,t.modelEdit.pagina.tipo==t.enumTipoPaginaDms.Link,t.modelEdit.pagina.tipo!=t.enumTipoPaginaDms.Link)),e.xp6(2),e.s9C("placeholder",e.lcZ(4,12,"bo.albergoMasterPagina.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.pagina.nome),e.xp6(2),e.Q6J("ngIf",t.modelEdit.pagina.tipo==t.enumTipoPaginaDms.Link),e.xp6(1),e.Q6J("ngClass",e.WLB(25,Fc,t.modelEdit.pagina.tipo==t.enumTipoPaginaDms.Link,t.modelEdit.pagina.tipo!=t.enumTipoPaginaDms.Link)),e.xp6(1),e.Q6J("ngModel",t.modelEdit.pagina.isModale),e.xp6(1),e.Oqu(e.lcZ(9,14,"bo.albergoMasterPagina.proprieta.isModale")),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.pagineXLingua),e.xp6(3),e.Oqu(e.lcZ(15,16,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(18,18,"globals.elimina")),e.xp6(3),e.Oqu(e.lcZ(21,20,"globals.annulla")))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.gz,ee.R7,q.Kd,_.Fj,_.JJ,_.On,rt.W,z.X$],styles:[".testo[_ngcontent-%COMP%]{height:400px;max-height:400px;min-height:400px;overflow:auto}.copiaAltreLingua[_ngcontent-%COMP%]{position:absolute;right:0;top:0}"]});class zo extends f.H{constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.showTable=!0,this.displayedColumns=["edit","nome","url","tipo","isModale","delete"],this.enumTipoPaginaDms=c.df}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getPagineAlbergoMaster(this.oidAlbergo).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ao,o),n=t.componentInstance;n.oidAlbergo=this.oidAlbergo,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&this.edit(a)})}edit(o){this.pagina=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}zo.\u0275fac=function(o){return new(o||zo)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},zo.\u0275cmp=e.Xpm({type:zo,selectors:[["app-pagine-dms"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{oidAlbergo:"oidAlbergo"},features:[e.qOj],decls:32,vars:11,consts:[[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","url"],["matColumnDef","tipo"],["matColumnDef","isModale"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[3,"pagina","oidAlbergo","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary","disabled","",3,"checked"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.YNc(0,o6,8,3,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"i",3),e._uU(4,"add"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,n6,1,0,"mat-header-cell",7),e.YNc(9,a6,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,l6,3,3,"mat-header-cell",7),e.YNc(12,r6,2,1,"mat-cell",10),e.BQk(),e.ynx(13,11),e.YNc(14,c6,3,3,"mat-header-cell",7),e.YNc(15,s6,2,1,"mat-cell",10),e.BQk(),e.ynx(16,12),e.YNc(17,p6,3,3,"mat-header-cell",7),e.YNc(18,d6,3,3,"mat-cell",10),e.BQk(),e.ynx(19,13),e.YNc(20,m6,3,3,"mat-header-cell",7),e.YNc(21,_6,2,1,"mat-cell",10),e.BQk(),e.ynx(22,14),e.YNc(23,u6,1,0,"mat-header-cell",7),e.YNc(24,g6,4,0,"mat-cell",15),e.BQk(),e.YNc(25,h6,1,0,"mat-header-row",16),e.YNc(26,f6,1,1,"mat-row",17),e.qZA()(),e.TgZ(27,"div",18)(28,"mat-paginator",19),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(29,"div",1)(30,"app-pagine-dms-edit",20,21),e.NdJ("backEvent",function(a){return t.showTable=!0,a&&t.download(),t.containerService.scrollToTop()}),e.qZA()()),2&o&&(e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("pagina",t.pagina)("oidAlbergo",t.oidAlbergo))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,wo,z.X$]});const C6=["panel1"],b6=["panel2"],v6=function(i,o,t){return{"pr-1":i,"pr-1 pl-1":o,"pl-1":t}};function T6(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",48)(1,"app-image",49),e.NdJ("edit",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.editImageList(l))})("delete",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.deleteImageList(l))}),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index;e.Q6J("ngClass",e.kEZ(4,v6,(n+1)%3==1,(n+1)%3==2,(n+1)%3==0)),e.xp6(1),e.Q6J("container",!1)("url",t.urlImmagine)("deleteAlwaysVisible",!0)}}function x6(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-tab",1)(2,"div",11),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"app-editor",50),e.NdJ("textChange",function(a){const r=e.CHM(t).index,p=e.oxw();return e.KtG(p.modelEdit.alberghiMasterXLingua[r].descrizione=a)}),e.qZA()()(),e.BQk()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(1),e.Q6J("label",t.lingua.nome),e.xp6(2),e.hij(" ",e.lcZ(4,4,"bo.albergoMasterXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+n)("text",a.modelEdit.alberghiMasterXLingua[n].descrizione)}}function Z6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.oid")))}function A6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.oid)}}function w6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergo.proprieta.nome")))}function z6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function M6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.albergo")))}function q6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.albergo?null:t.albergo.nome)}}function P6(i,o){1&i&&e._UZ(0,"mat-header-cell")}function k6(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"a",51),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.scollega(l))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.configurazione-dms.scollega")))}function S6(i,o){1&i&&e._UZ(0,"mat-header-row",52)}function y6(i,o){1&i&&e._UZ(0,"mat-row")}function J6(i,o){if(1&i&&(e.TgZ(0,"div",2),e._UZ(1,"app-servizi-dms",53),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("oidAlbergo",t.modelEdit.albergoMaster.oid)}}function E6(i,o){if(1&i&&(e.TgZ(0,"div",2),e._UZ(1,"app-pagine-dms",53),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("oidAlbergo",t.modelEdit.albergoMaster.oid)}}function N6(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",54)(1,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.collega())}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteEvent.emit())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backEvent.emit())}),e._uU(11),e.ALo(12,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,4,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(6,6,"sbm.amministrazione.configurazione-dms.collega")),e.xp6(3),e.Oqu(e.lcZ(9,8,"globals.elimina")),e.xp6(3),e.Oqu(e.lcZ(12,10,"globals.annulla")))}const Hc=function(i){return{"mb-3 border-bottom":i}};class Mo extends f.H{set albergoMaster(o){null!=o&&o.oid>0&&(this.setIsLoading(!0),this.initialized=!1,this.selectedIndex=0,this.selectedIndex1=0,window.dispatchEvent(new Event("resize")),this.immagini=[],this.dataSourcePortaliCollegati=new s.r4,this.modelEdit=new d.OTN,this.modelEdit.albergoMaster=o,setTimeout(()=>{this.initialized=!0},1e3),this.apiService.getAlbergoMasterDetails(o.oid).subscribe(t=>{this.immagini=t.data.immagini,this.dataSourcePortaliCollegati=new s.r4(t.data.portaliCollegati),this.dataSourcePortaliCollegati.paginator=this.paginator;for(let n of this.lingue){let a=new v.V0d;a.lingua=n,a.albergoMaster=o,this.modelEdit.alberghiMasterXLingua.push(a)}this.apiService.getAlberghiMasterXLingua(o.oid).subscribe(n=>{for(let a of n.data)if(null!=a.lingua){let l=this.modelEdit.alberghiMasterXLingua.findIndex(r=>r.lingua.oid==a.lingua.oid);l>=0&&(this.modelEdit.alberghiMasterXLingua[l].descrizione=a.descrizione)}this.setIsLoading(!1)})}))}constructor(o,t,n,a){super(),this.apiService=o,this.utilityService=t,this.localizationService=n,this.sessionService=a,this.backEvent=new e.vpe,this.deleteEvent=new e.vpe,this.enumTipoImmagine=c.BI,this.selectedIndex=0,this.selectedIndex1=0,this.modelEdit=new d.OTN,this.enumRuolo=c.Gt,this.displayedColumns=["oid","nome","albergo","scollega"],this.initialized=!1}ngAfterViewInit(){this.panel1.close(),this.panel2.close()}save(o=null){this.setIsLoading(!0),null!=o&&(this.modelEdit.albergoMaster.oidPortaliXAlbergo=o.map(t=>t.oid).join(";")),this.apiService.setAlbergoMaster(this.modelEdit).subscribe(()=>{null==o?(this.setIsLoading(!1),this.showInfo("sbm.amministrazione.configurazione-dms.albergoMasterSalvato").then(()=>{this.backEvent.emit()})):this.apiService.getAlbergoMasterDetails(this.modelEdit.albergoMaster.oid).subscribe(t=>{this.dataSourcePortaliCollegati=new s.r4(t.data.portaliCollegati),this.dataSourcePortaliCollegati.paginator=this.paginator,this.setIsLoading(!1)})})}getUrlDms(){return window.location.origin+"/dms?oidAlbergo="+this.modelEdit.albergoMaster.oid+"&lingua="+this.localizationService.currentLanguage.codice}getUrlDmsRichiediPax(){return window.location.origin+"/dms?oidAlbergo="+this.modelEdit.albergoMaster.oid+"&lingua="+this.localizationService.currentLanguage.codice+"&isRichiediPax=true"}editImage(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Ve.t,t),a=n.componentInstance;a._url=o==c.BI.Top?this.modelEdit.albergoMaster.urlImmagineTop:o==c.BI.Bottom?this.modelEdit.albergoMaster.urlImmagineBottom:"",a.title=o==c.BI.Top?"sbm.amministrazione.configurazione-dms.immagineTop":o==c.BI.Bottom?"sbm.amministrazione.configurazione-dms.immagineBottom":"",a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){this.setIsLoading(!0);let r=new d.iM8;r.oid=this.modelEdit.albergoMaster.oid,r.tipoImmagine=o,r.base64=l,this.apiService.setImmagineAlbergoMaster(r).subscribe(p=>{null!=p.data&&(o==c.BI.Top?this.modelEdit.albergoMaster.urlImmagineTop=p.data.url:o==c.BI.Bottom&&(this.modelEdit.albergoMaster.urlImmagineBottom=p.data.url)),this.setIsLoading(!1)})}})}deleteImage(o){this.showDialogConfirm("globals.eliminareImmagine").then(t=>{this.setIsLoading(!0);let n=new d.iM8;n.oid=this.modelEdit.albergoMaster.oid,n.tipoImmagine=o,n.base64="",this.apiService.setImmagineAlbergoMaster(n).subscribe(a=>{null!=a.data&&(o==c.BI.Top?this.modelEdit.albergoMaster.urlImmagineTop=a.data.url:o==c.BI.Bottom&&(this.modelEdit.albergoMaster.urlImmagineBottom=a.data.url)),this.setIsLoading(!1)})},t=>{})}editImageList(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(bo.u,t),a=n.componentInstance;a.image=Object.assign({},o),a.dialogRef=n,n.afterClosed().subscribe(l=>{null!=l&&(this.setIsLoading(!0),this.apiService.setImmagineAlbergoMasterList(l).subscribe(r=>{if(l.oid>0){let p=this.utilityService.findIndexByOid(this.immagini,l.oid);l.isDeleted?this.immagini.splice(p,1):this.immagini[p]=r.data.obj}else this.immagini.push(r.data.obj);this.setIsLoading(!1)}))})}addImageList(){let o=new v.Ojt;o.albergoMaster=this.modelEdit.albergoMaster,o.isAttiva=!0,this.editImageList(o)}deleteImageList(o){this.showDialogConfirm("globals.eliminareImmagine").then(t=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setImmagineAlbergoMasterList(o).subscribe(n=>{let a=this.utilityService.findIndexByOid(this.immagini,o.oid);this.immagini.splice(a,1),this.setIsLoading(!1)})},t=>{})}scollega(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{let n=Object.assign([],this.dataSourcePortaliCollegati.data),a=n.findIndex(l=>l.oid==o.oid);a>=0&&n.splice(a,1),this.save(n)},t=>{})}collega(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh";let t=this.showModalDialog(vo,o),n=t.componentInstance;n.admin=this.admin,n.portali=this.dataSourcePortaliCollegati.data,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&this.save(a)})}}function O6(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",10),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",28)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.amministrazione.configurazione-dms.nessunAlbergoMaster")))}function L6(i,o){1&i&&e._UZ(0,"mat-header-cell")}function D6(i,o){1&i&&(e.TgZ(0,"mat-cell",29)(1,"button",30)(2,"i",31),e._uU(3,"edit"),e.qZA()()())}function I6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoMaster.proprieta.nome"),""))}function Q6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function U6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.albergoMaster.proprieta.url"),""))}function Y6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.getUrlDms(t.oid))}}function R6(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.albergo"),""))}function F6(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.albergo?null:t.albergo.nome)}}function H6(i,o){1&i&&e._UZ(0,"mat-header-cell")}function K6(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",32)(1,"button",33),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.deleteAlbergoMaster(r))}),e.TgZ(2,"i",34),e._uU(3,"delete"),e.qZA()()()}}function G6(i,o){1&i&&e._UZ(0,"mat-header-row",35)}function $6(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",36),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Mo.\u0275fac=function(o){return new(o||Mo)(e.Y36(A.s),e.Y36(C.t),e.Y36(Oe.o),e.Y36(j.m))},Mo.\u0275cmp=e.Xpm({type:Mo,selectors:[["app-albergo-master-edit"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(C6,5),e.Gf(b6,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.panel1=n.first),e.iGM(n=e.CRH())&&(t.panel2=n.first)}},inputs:{admin:"admin",albergoMaster:"albergoMaster"},outputs:{backEvent:"backEvent",deleteEvent:"deleteEvent"},features:[e.qOj],decls:101,vars:83,consts:[[3,"selectedIndex","selectedIndexChange"],[3,"label"],[1,"container-fluid","p-3"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"d-inline-block","color-select","mr-3"],[3,"value","placeholder","valueChange"],["mat-icon-button","","color","primary",1,"color-reset",3,"disabled","click"],[1,"material-icons"],[1,"mt-3"],["color","primary",3,"ngModel","ngModelChange"],[1,"mb-3"],[3,"placeholder","url"],[1,"row","mt-3"],[1,"col-4","pr-1"],[3,"title","url","edit","delete"],[1,"col-4","pl-1","pr-1"],[1,"border","mat-elevation-z0","mt-3","mb-3"],[1,"text-center"],["class","col-4 pb-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"imageRow"],[1,"imageHeight"],["mat-icon-button","","color","primary",1,"add-button",3,"click"],[1,"material-icons","add-icon"],[3,"value","valueChange"],[1,"mat-elevation-z0","border","rounded"],["panel1",""],[3,"ngClass"],[1,"mb-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","border","rounded","mt-3",3,"hidden"],["panel2",""],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","oid"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","albergo"],["matColumnDef","scollega"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["class","container-fluid p-3",4,"ngIf"],["class","pr-3 pl-3",4,"ngIf"],[1,"col-4","pb-3",3,"ngClass"],[3,"container","url","deleteAlwaysVisible","edit","delete"],[3,"id","text","textChange"],[1,"color-pink","font-weight-bold",3,"click"],[1,"mat-table-header"],[3,"oidAlbergo"],[1,"pr-3","pl-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"mat-tab-group",0),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.TgZ(1,"mat-tab",1),e.ALo(2,"translate"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"input",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.albergoMaster.nome=a}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",4)(10,"mat-form-field",5)(11,"input",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.albergoMaster.textBottom=a}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",4)(14,"div",7)(15,"app-color-picker",8),e.NdJ("valueChange",function(a){return t.modelEdit.albergoMaster.baseColor=a}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"button",9),e.NdJ("click",function(){return t.modelEdit.albergoMaster.baseColor=null}),e.TgZ(18,"i",10),e._uU(19,"settings_backup_restore"),e.qZA()()()(),e.TgZ(20,"div",3)(21,"div",4)(22,"mat-form-field",5)(23,"input",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.albergoMaster.email=a}),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"div",4)(26,"mat-form-field",5)(27,"input",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.albergoMaster.telefono=a}),e.ALo(28,"translate"),e.qZA()()()(),e.TgZ(29,"div",11)(30,"mat-checkbox",12),e.NdJ("ngModelChange",function(a){return t.modelEdit.albergoMaster.isFiltraPortaliPerTuttiIServizi=a}),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"div",13)(34,"mat-checkbox",12),e.NdJ("ngModelChange",function(a){return t.modelEdit.albergoMaster.isEffettuaRicercaDms=a}),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e._UZ(37,"app-url",14),e.ALo(38,"translate"),e._UZ(39,"app-url",14),e.ALo(40,"translate"),e.TgZ(41,"div",15)(42,"div",16)(43,"app-image",17),e.NdJ("edit",function(){return t.editImage(t.enumTipoImmagine.Top)})("delete",function(){return t.deleteImage(t.enumTipoImmagine.Top)}),e.qZA()(),e.TgZ(44,"div",18)(45,"app-image",17),e.NdJ("edit",function(){return t.editImage(t.enumTipoImmagine.Bottom)})("delete",function(){return t.deleteImage(t.enumTipoImmagine.Bottom)}),e.qZA()()(),e.TgZ(46,"mat-card",19)(47,"mat-card-title",20),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"div",3),e.YNc(51,T6,2,8,"div",21),e.TgZ(52,"div",4)(53,"div",22)(54,"div",23)(55,"button",24),e.NdJ("click",function(){return t.addImageList()}),e.TgZ(56,"i",25),e._uU(57,"add_circle_outline"),e.qZA()()()()()()(),e.TgZ(58,"div"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"div",13)(62,"app-css-editor",26),e.NdJ("valueChange",function(a){return t.modelEdit.albergoMaster.stileCss=a}),e.qZA()(),e.TgZ(63,"mat-accordion")(64,"mat-expansion-panel",27,28)(66,"mat-expansion-panel-header",29),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"mat-tab-group",30),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex1=a}),e.YNc(70,x6,6,6,"ng-container",31),e.qZA()(),e.TgZ(71,"mat-expansion-panel",32,33)(73,"mat-expansion-panel-header",29),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"div",34)(77,"mat-table",35),e.ynx(78,36),e.YNc(79,Z6,3,3,"mat-header-cell",37),e.YNc(80,A6,2,1,"mat-cell",38),e.BQk(),e.ynx(81,39),e.YNc(82,w6,3,3,"mat-header-cell",37),e.YNc(83,z6,2,1,"mat-cell",38),e.BQk(),e.ynx(84,40),e.YNc(85,M6,3,3,"mat-header-cell",37),e.YNc(86,q6,2,1,"mat-cell",38),e.BQk(),e.ynx(87,41),e.YNc(88,P6,1,0,"mat-header-cell",37),e.YNc(89,k6,4,3,"mat-cell",38),e.BQk(),e.YNc(90,S6,1,0,"mat-header-row",42),e.YNc(91,y6,1,0,"mat-row",43),e.qZA()(),e.TgZ(92,"div",44),e._UZ(93,"mat-paginator",45),e.qZA()()()()(),e.TgZ(94,"mat-tab",1),e.ALo(95,"translate"),e.YNc(96,J6,2,1,"div",46),e.qZA(),e.TgZ(97,"mat-tab",1),e.ALo(98,"translate"),e.YNc(99,E6,2,1,"div",46),e.qZA()(),e.YNc(100,N6,13,12,"div",47)),2&o){const n=e.MAs(65),a=e.MAs(72);e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(2,47,"sbm.amministrazione.configurazione-dms.impostazioniTab")),e.xp6(6),e.s9C("placeholder",e.lcZ(8,49,"bo.albergoMaster.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.albergoMaster.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(12,51,"bo.albergoMaster.proprieta.textBottom")),e.Q6J("ngModel",t.modelEdit.albergoMaster.textBottom),e.xp6(4),e.Q6J("value",t.modelEdit.albergoMaster.baseColor)("placeholder",e.lcZ(16,53,"bo.albergoMaster.proprieta.baseColor")),e.xp6(2),e.Q6J("disabled",!t.modelEdit.albergoMaster.baseColor),e.xp6(6),e.s9C("placeholder",e.lcZ(24,55,"bo.albergoMaster.proprieta.email")),e.Q6J("ngModel",t.modelEdit.albergoMaster.email),e.xp6(4),e.s9C("placeholder",e.lcZ(28,57,"bo.albergoMaster.proprieta.telefono")),e.Q6J("ngModel",t.modelEdit.albergoMaster.telefono),e.xp6(3),e.Q6J("ngModel",t.modelEdit.albergoMaster.isFiltraPortaliPerTuttiIServizi),e.xp6(1),e.Oqu(e.lcZ(32,59,"bo.albergoMaster.proprieta.isFiltraPortaliPerTuttiIServizi")),e.xp6(3),e.Q6J("ngModel",t.modelEdit.albergoMaster.isEffettuaRicercaDms),e.xp6(1),e.Oqu(e.lcZ(36,61,"bo.albergoMaster.proprieta.isEffettuaRicercaDms")),e.xp6(2),e.Q6J("placeholder",e.lcZ(38,63,"sbm.amministrazione.configurazione-dms.urlDms"))("url",t.getUrlDms()),e.xp6(2),e.Q6J("placeholder",e.lcZ(40,65,"sbm.amministrazione.configurazione-dms.urlDmsRichiediPax"))("url",t.getUrlDmsRichiediPax()),e.xp6(4),e.Q6J("title","sbm.amministrazione.configurazione-dms.immagineTop")("url",t.modelEdit.albergoMaster.urlImmagineTop),e.xp6(2),e.Q6J("title","sbm.amministrazione.configurazione-dms.immagineBottom")("url",t.modelEdit.albergoMaster.urlImmagineBottom),e.xp6(3),e.hij(" ",e.lcZ(49,67,"sbm.amministrazione.configurazione-dms.immaginiSlider")," "),e.xp6(3),e.Q6J("ngForOf",t.immagini),e.xp6(8),e.Oqu(e.lcZ(60,69,"bo.albergoMaster.proprieta.stileCss")),e.xp6(3),e.Q6J("value",t.modelEdit.albergoMaster.stileCss),e.xp6(4),e.Q6J("ngClass",e.VKq(79,Hc,n.expanded)),e.xp6(1),e.hij(" ",e.lcZ(68,71,"globals.descrizioni")," "),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex1),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.alberghiMasterXLingua),e.xp6(1),e.Q6J("hidden",null==t.dataSourcePortaliCollegati||null==t.dataSourcePortaliCollegati.data||0==t.dataSourcePortaliCollegati.data.length),e.xp6(2),e.Q6J("ngClass",e.VKq(81,Hc,a.expanded)),e.xp6(1),e.hij(" ",e.lcZ(75,73,"sbm.amministrazione.configurazione-dms.portaliCollegati")," "),e.xp6(3),e.Q6J("dataSource",t.dataSourcePortaliCollegati),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("label",e.lcZ(95,75,"sbm.amministrazione.configurazione-dms.serviziDmsTab")),e.xp6(2),e.Q6J("ngIf",1==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(98,77,"sbm.amministrazione.configurazione-dms.pagineTab")),e.xp6(2),e.Q6J("ngIf",2==t.selectedIndex),e.xp6(1),e.Q6J("ngIf",0==t.selectedIndex)}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,qe.S$,qe.mi,ee.SK,ee.R7,ye.pp,ye.ib,ye.yz,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,We.h,Me.P,Ge.c,Be,li,Zo,zo,z.X$],styles:[".imageHeight[_ngcontent-%COMP%]{max-height:200px!important;text-align:center;width:100%}.imageRow[_ngcontent-%COMP%]{height:200px!important;display:flex;align-items:center;margin-bottom:1rem}.add-icon[_ngcontent-%COMP%]{height:60px!important;width:60px!important;font-size:60px!important;line-height:60px!important}.add-button[_ngcontent-%COMP%]{height:60px!important;width:60px!important;line-height:60px!important}mat-card[_ngcontent-%COMP%]{border:1px solid lightgrey!important}mat-card-title[_ngcontent-%COMP%]{font-weight:400!important;font-size:18px!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#f0f0f0!important}.color-select[_ngcontent-%COMP%]{width:calc(100% - 1rem - 50px)}.color-reset[_ngcontent-%COMP%]{width:50px}"]});class ri extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.admin=!0,this.rq=new d.k$g,this.displayedColumns=[],this.editing=!1}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.configurazione-dms.title"),this.filters=[new d.wn$("nome",c.Hp.Contains,"",c.NM.String)],this.admin?this.displayedColumns=["edit","nome","url","albergo","delete"]:this.displayedColumns=["edit","nome","url","delete"]}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}getUrlDms(o){return window.location.origin+"/dms?oidAlbergo="+o}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=(this.admin?this.apiService.getAlberghiMasterFilter(this.rq):this.apiService.getAlberghiMasterAlbergoFilter(this.rq)).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,this.editing=!1,o||this.setIsLoading(!1)})}onSearch(o,t){null!=t&&(this.filters[o].value=t,this.download(!0)),this.paginator.firstPage()}deleteAlbergoMaster(o){this.showDialogConfirm("sbm.amministrazione.configurazione-dms.eliminareAlbergoMaster").then(t=>{o.isDeleted=!0,this.setIsLoading(!0);let n=new d.OTN;n.albergoMaster=o,this.apiService.setAlbergoMaster(n).subscribe(()=>{this.download()})},t=>{})}edit(o){this.albergoMaster=o,this.editing=!0,this.containerService.scrollToTop()}add(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Co,o),n=t.componentInstance;n.admin=this.admin,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&this.edit(a)})}}ri.\u0275fac=function(o){return new(o||ri)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},ri.\u0275cmp=e.Xpm({type:ri,selectors:[["app-configurazione-dms-admin"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{admin:"admin"},features:[e.qOj],decls:37,vars:16,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["nomeSearch",""],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","url"],["matColumnDef","albergo"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"admin","albergoMaster","backEvent","deleteEvent"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,O6,8,3,"div",8),e.TgZ(10,"div",1)(11,"button",9),e.NdJ("click",function(){return t.add()}),e.TgZ(12,"i",10),e._uU(13,"add"),e.qZA()(),e.TgZ(14,"div",11)(15,"mat-table",12),e.ynx(16,13),e.YNc(17,L6,1,0,"mat-header-cell",14),e.YNc(18,D6,4,0,"mat-cell",15),e.BQk(),e.ynx(19,16),e.YNc(20,I6,3,3,"mat-header-cell",14),e.YNc(21,Q6,2,1,"mat-cell",17),e.BQk(),e.ynx(22,18),e.YNc(23,U6,3,3,"mat-header-cell",14),e.YNc(24,Y6,2,1,"mat-cell",17),e.BQk(),e.ynx(25,19),e.YNc(26,R6,3,3,"mat-header-cell",14),e.YNc(27,F6,2,1,"mat-cell",17),e.BQk(),e.ynx(28,20),e.YNc(29,H6,1,0,"mat-header-cell",14),e.YNc(30,K6,4,0,"mat-cell",21),e.BQk(),e.YNc(31,G6,1,0,"mat-header-row",22),e.YNc(32,$6,1,1,"mat-row",23),e.qZA()(),e.TgZ(33,"div",24)(34,"mat-paginator",25),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(35,"div",26)(36,"app-albergo-master-edit",27),e.NdJ("backEvent",function(){return t.editing=!1,t.download(),t.containerService.scrollToTop()})("deleteEvent",function(){return t.deleteAlbergoMaster(t.albergoMaster)}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",t.editing),e.xp6(5),e.s9C("placeholder",e.lcZ(8,14,"bo.albergoMaster.proprieta.nome")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",!t.editing&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",!t.editing),e.xp6(1),e.Q6J("admin",t.admin)("albergoMaster",t.albergoMaster))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Mo,z.X$]});class qo{constructor(){}}function B6(i,o){1&i&&(e.TgZ(0,"button",33)(1,"i",34),e._uU(2,"clear"),e.qZA()()),2&i&&e.Q6J("disableRipple",!0)}function V6(i,o){1&i&&(e.TgZ(0,"div",35)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.errori-portali.nessunErrore")))}function X6(i,o){1&i&&e._UZ(0,"mat-header-cell")}function j6(i,o){1&i&&(e.TgZ(0,"button",38)(1,"i",39),e._uU(2,"more_vert"),e.qZA()())}function W6(i,o){if(1&i&&(e.TgZ(0,"mat-cell",36),e.YNc(1,j6,3,0,"button",37),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.errorePortale&&t.errorePortale.length>50)}}function eT(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logErrorePortale.proprieta.data")))}function tT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy HH:mm:ss"))}}function iT(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logErrorePortale.proprieta.tipoErroreLogPortale")))}function oT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoErroreLogPortale,t.tipoErroreLogPortale,"tipoErroreLogPortale")))}}function nT(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.albergo")))}function aT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.albergo?t.albergo.nome:"")}}function lT(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logErrorePortale.proprieta.nomePortale")))}function rT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nomePortale)}}function cT(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logErrorePortale.proprieta.errorePortale")))}function sT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.errorePortale.length>50?t.errorePortale.slice(0,50)+"...":t.errorePortale)}}function pT(i,o){1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logErrorePortale.proprieta.isNotificataAGestionale")))}function dT(i,o){if(1&i&&(e.TgZ(0,"mat-cell",42),e._UZ(1,"mat-checkbox",43),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isNotificataAGestionale)}}function mT(i,o){1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logErrorePortale.proprieta.isEsaminata")))}function _T(i,o){if(1&i&&(e.TgZ(0,"mat-cell",42),e._UZ(1,"mat-checkbox",43),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isEsaminata)}}function uT(i,o){1&i&&e._UZ(0,"mat-header-row",44)}function gT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",45),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.openDetails(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function hT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.confermaTutti())}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.dashboard.confermaTutti")))}qo.\u0275fac=function(o){return new(o||qo)},qo.\u0275cmp=e.Xpm({type:qo,selectors:[["app-errore-portale-details"]],inputs:{errore:"errore"},decls:8,vars:5,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"font-weight-bold","mb-3"],[1,"errore"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h5",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",3),e._uU(7),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,3,"sbm.amministrazione.errori-portali.dettaglioErrore")),e.xp6(3),e.hij(" ",t.errore.errorePortale,"\n"))},dependencies:[h.eB,F.aO,z.X$],styles:[".errore[_ngcontent-%COMP%]{max-height:500px;overflow:auto}"]});const fT=function(i){return{"p-3":i}},CT=function(i){return{"mb-0":i}};class It extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.displayedColumns=["details","data","tipoErroreLogPortale","albergo.nome","nomePortale","errorePortale","isNotificataAGestionale","isEsaminata"],this.pageSize=25,this.enumTipoErroreLogPortale=c.m3,this.erroriConfermati=!1,this.dialog=!1}ngOnInit(){this.rq=new d.k$g,this.rq.skip=0,this.rq.take=this.pageSize,this.sorting=new d.aQR("data",c.nI.Desc),this.dialog?this.displayedColumns.splice(this.displayedColumns.indexOf("albergo.nome"),1):this.headerService.setTitle("sbm.amministrazione.errori-portali.title"),this.filters=[],this.filters.push(new d.wn$("data",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("data",c.Hp.LowerEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("nomePortale",c.Hp.Equal,this.nomePortale,c.NM.String))}ngAfterViewInit(){this.download()}onSortChange(o){null!=o&&o.active&&o.direction?(this.sorting.field=o.active,this.sorting.type="asc"==o.direction?c.nI.Asc:c.nI.Desc):this.sorting=new d.aQR,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}download(){this.setIsLoading(!0),this.rq.sorting=[this.sorting],this.rq.filters=this.utility.getFilters(this.filters),(this.dialog?this.apiService.getErroriPortaliFilter(this.rq):this.apiService.getErroriPortaliPartnerFilter(this.rq)).subscribe(o=>{this.data=o.data,this.totalRecords=o.totalRecords,this.setIsLoading(!1)})}openDetails(o){if(o.errorePortale&&o.errorePortale.length>50){let t=new d.Zpt;t.width="60vw",t.minHeight="30vh",this.showModalDialog(qo,t).componentInstance.errore=o}}confermaTutti(){this.showDialogConfirm("globals.effettuareOperazione").then(o=>{this.setIsLoading(!0),this.apiService.confermaErrori().subscribe(()=>{this.erroriConfermati=!0,this.download()})},o=>{})}ngOnDestroy(){this.dialog||this.headerService.clearTitle()}}function bT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}It.\u0275fac=function(o){return new(o||It)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},It.\u0275cmp=e.Xpm({type:It,selectors:[["app-errori-portali"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{nomePortale:"nomePortale",dialog:"dialog"},features:[e.qOj],decls:51,vars:29,consts:[["mat-icon-button","","class","modal-close-button",3,"matDialogClose","disableRipple",4,"ngIf"],[3,"ngClass"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","value","dateChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","data","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","details"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","tipoErroreLogPortale"],["matColumnDef","albergo.nome"],["matColumnDef","nomePortale"],["matColumnDef","errorePortale"],["matColumnDef","isNotificataAGestionale"],["class","justify-content-center","mat-sort-header","",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","isEsaminata"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container",3,"ngClass"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],["class","mt-3 text-right",4,"ngIf"],["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary",4,"ngIf"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){if(1&o&&(e.YNc(0,B6,3,1,"button",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6),e.NdJ("dateChange",function(a){return t.onSearch(0,t.getDate(a.value))}),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"mat-datepicker-toggle",7)(9,"mat-datepicker",null,8),e.qZA()(),e.TgZ(11,"div",4)(12,"mat-form-field",5)(13,"input",6),e.NdJ("dateChange",function(a){return t.onSearch(1,t.getDate(a.value))}),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"mat-datepicker-toggle",7)(16,"mat-datepicker",null,9),e.qZA()()()(),e.YNc(18,V6,4,3,"div",10),e.TgZ(19,"div",11)(20,"div",12)(21,"mat-table",13),e.NdJ("matSortChange",function(a){return t.onSortChange(a)}),e.ynx(22,14),e.YNc(23,X6,1,0,"mat-header-cell",15),e.YNc(24,W6,2,1,"mat-cell",16),e.BQk(),e.ynx(25,17),e.YNc(26,eT,3,3,"mat-header-cell",18),e.YNc(27,tT,3,4,"mat-cell",19),e.BQk(),e.ynx(28,20),e.YNc(29,iT,3,3,"mat-header-cell",18),e.YNc(30,oT,3,3,"mat-cell",19),e.BQk(),e.ynx(31,21),e.YNc(32,nT,3,3,"mat-header-cell",18),e.YNc(33,aT,2,1,"mat-cell",19),e.BQk(),e.ynx(34,22),e.YNc(35,lT,3,3,"mat-header-cell",18),e.YNc(36,rT,2,1,"mat-cell",19),e.BQk(),e.ynx(37,23),e.YNc(38,cT,3,3,"mat-header-cell",18),e.YNc(39,sT,2,1,"mat-cell",19),e.BQk(),e.ynx(40,24),e.YNc(41,pT,3,3,"mat-header-cell",25),e.YNc(42,dT,2,1,"mat-cell",26),e.BQk(),e.ynx(43,27),e.YNc(44,mT,3,3,"mat-header-cell",25),e.YNc(45,_T,2,1,"mat-cell",26),e.BQk(),e.YNc(46,uT,1,0,"mat-header-row",28),e.YNc(47,gT,1,1,"mat-row",29),e.qZA()(),e.TgZ(48,"div",30)(49,"mat-paginator",31),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()(),e.YNc(50,hT,4,3,"div",32),e.qZA()),2&o){const n=e.MAs(10),a=e.MAs(17);e.Q6J("ngIf",t.dialog),e.xp6(1),e.Q6J("ngClass",e.VKq(25,fT,!t.dialog)),e.xp6(5),e.s9C("placeholder",e.lcZ(7,21,"globals.dal")),e.Q6J("matDatepicker",n)("value",t.filters[0].value),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(14,23,"globals.al")),e.Q6J("matDatepicker",a)("value",t.filters[1].value),e.xp6(2),e.Q6J("for",a),e.xp6(3),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.data),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngClass",e.VKq(27,CT,t.dialog)),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords),e.xp6(1),e.Q6J("ngIf",t.dialog)}},dependencies:[m.mk,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,F.aO,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,m.uU,z.X$]});class Po extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.backEvent=new e.vpe}save(){this.messaggio.scadenza=this.getDate(this.messaggio.scadenza),this.setIsLoading(!0),this.apiService.setMessaggioAdmin(this.messaggio).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.amministrazione.messaggi.messaggioSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.amministrazione.messaggi.eliminareMessaggio").then(t=>{null!=o&&(this.messaggio=o),this.messaggio.isDeleted=!0,this.setIsLoading(!0),this.apiService.setMessaggioAdmin(this.messaggio).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function vT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",11),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",30)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.amministrazione.messaggi.nessunMessaggio")))}function TT(i,o){1&i&&e._UZ(0,"mat-header-cell")}function xT(i,o){1&i&&(e.TgZ(0,"mat-cell",31)(1,"button",32)(2,"i",33),e._uU(3,"edit"),e.qZA()()())}function ZT(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.messaggioExtranet.proprieta.messaggio"),""))}function AT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"app-inner-html",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("_text",t.messaggio)}}function wT(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.messaggioExtranet.proprieta.scadenza"),""))}function zT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.scadenza,"dd/MM/yyyy"))}}function MT(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.messaggioExtranet.proprieta.albergo"),""))}function qT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.albergo?t.albergo.nome:"")}}function PT(i,o){1&i&&e._UZ(0,"mat-header-cell")}function kT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",35)(1,"button",36),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(40);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",37),e._uU(3,"delete"),e.qZA()()()}}function ST(i,o){1&i&&e._UZ(0,"mat-header-row",38)}function yT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",39),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Po.\u0275fac=function(o){return new(o||Po)(e.Y36(A.s),e.Y36(C.t))},Po.\u0275cmp=e.Xpm({type:Po,selectors:[["app-messaggi-admin-edit"]],inputs:{messaggio:"messaggio"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:23,vars:23,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["scadenza",""],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"font-weight-bold"],[3,"text","textChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.messaggio.scadenza=a}),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"mat-datepicker-toggle",4)(6,"mat-datepicker",5,6),e.qZA()(),e.TgZ(8,"div",1)(9,"app-view-select",7),e.NdJ("valueChange",function(a){return t.messaggio.albergo=a}),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",8),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"app-editor",9),e.NdJ("textChange",function(a){return t.messaggio.messaggio=a}),e.qZA(),e.TgZ(15,"div",10)(16,"button",11),e.NdJ("click",function(){return t.save()}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.YNc(19,bT,3,3,"button",12),e.TgZ(20,"button",13),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(21),e.ALo(22,"translate"),e.qZA()()),2&o){const n=e.MAs(7);e.xp6(3),e.s9C("placeholder",e.lcZ(4,13,"bo.messaggioExtranet.proprieta.scadenza")),e.Q6J("matDatepicker",n)("ngModel",t.messaggio.scadenza),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.messaggio.scadenza)?t.today:null),e.xp6(3),e.Q6J("dataLoader",t.apiService.getAlberghiViewSelect())("value",t.messaggio.albergo)("placeholder",e.lcZ(10,15,"bo.messaggioExtranet.proprieta.albergo")),e.xp6(3),e.Oqu(e.lcZ(13,17,"bo.messaggioExtranet.proprieta.messaggio")),e.xp6(2),e.Q6J("text",t.messaggio.messaggio),e.xp6(3),e.Oqu(e.lcZ(18,19,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.messaggio&&t.messaggio.oid>0),e.xp6(2),e.Oqu(e.lcZ(22,21,"globals.annulla"))}},dependencies:[m.O5,w.X,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,_.Fj,_.JJ,_.On,Me.P,ne.d,z.X$]});class ko extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.messaggio=new v.D_K,this.showTable=!0,this.displayedColumns=["edit","messaggio","scadenza","albergo.nome","delete"]}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.messaggi.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("albergo.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("messaggio",c.Hp.Contains,"",c.NM.String))}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getMessaggiAdminFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}add(){this.messaggio=new v.D_K(-1),this.messaggio.scadenza=this.getDate(this.oneMonthFromToday),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.messaggio=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(!n),this.paginator.firstPage()}}function JT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",14)(1,"mat-form-field",15)(2,"input",4),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.nazioniXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,3,"bo.nazioneXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.nazioniXLingua[a].nome)}}function ET(i,o){if(1&i&&(e.ynx(0),e.YNc(1,JT,4,5,"mat-tab",13),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function NT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}ko.\u0275fac=function(o){return new(o||ko)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},ko.\u0275cmp=e.Xpm({type:ko,selectors:[["app-messaggi-admin"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:41,vars:19,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-4"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["messaggioSearch",""],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","messaggio"],[4,"matCellDef"],["matColumnDef","scadenza"],["matColumnDef","albergo.nome"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"messaggio","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[3,"_text"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"app-view-select",5),e.NdJ("valueChange",function(l){return t.onSearch(0,-1==l.oid?"":l.oid.toString())}),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",4)(8,"mat-form-field",6)(9,"input",7,8),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(10);return e.KtG(t.onSearch(1,l.value,!1))}),e.ALo(11,"translate"),e.qZA()()()()(),e.YNc(12,vT,8,3,"div",9),e.TgZ(13,"div",1)(14,"button",10),e.NdJ("click",function(){return t.add()}),e.TgZ(15,"i",11),e._uU(16,"add"),e.qZA()(),e.TgZ(17,"div",12)(18,"mat-table",13),e.ynx(19,14),e.YNc(20,TT,1,0,"mat-header-cell",15),e.YNc(21,xT,4,0,"mat-cell",16),e.BQk(),e.ynx(22,17),e.YNc(23,ZT,3,3,"mat-header-cell",15),e.YNc(24,AT,2,1,"mat-cell",18),e.BQk(),e.ynx(25,19),e.YNc(26,wT,3,3,"mat-header-cell",15),e.YNc(27,zT,3,4,"mat-cell",18),e.BQk(),e.ynx(28,20),e.YNc(29,MT,3,3,"mat-header-cell",15),e.YNc(30,qT,2,1,"mat-cell",18),e.BQk(),e.ynx(31,21),e.YNc(32,PT,1,0,"mat-header-cell",15),e.YNc(33,kT,4,0,"mat-cell",22),e.BQk(),e.YNc(34,ST,1,0,"mat-header-row",23),e.YNc(35,yT,1,1,"mat-row",24),e.qZA()(),e.TgZ(36,"div",25)(37,"mat-paginator",26),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(38,"div",27)(39,"app-messaggi-admin-edit",28,29),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(4),e.Q6J("dataLoader",t.apiService.getAlberghiViewSelect())("placeholder",e.lcZ(6,15,"bo.messaggioExtranet.proprieta.albergo")),e.xp6(4),e.s9C("placeholder",e.lcZ(11,17,"bo.messaggioExtranet.proprieta.messaggio")),e.Q6J("value",t.filters[1].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("messaggio",t.messaggio))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,rt.W,ne.d,Po,m.uU,z.X$]});class So extends f.H{set nazione(o){if(null!=o){this.selectedIndex=0,this.modelEdit=new d.eg7,this.modelEdit.nazione=o;for(let t of this.lingue){let n=new v.I8s;n.lingua=t,this.modelEdit.nazioniXLingua.push(n)}null!=o.oid&&-1!=o.oid&&(this.setIsLoading(!0),this.apiService.getNazioniXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.nazioniXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.nazioniXLingua[a].nazione=n.nazione,this.modelEdit.nazioniXLingua[a].nome=n.nome)}this.setIsLoading(!1)}))}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe,this.modelEdit=new d.eg7,this.selectedIndex=0}save(){if(this.modelEdit.nazione.sigla&&this.modelEdit.nazione.nomeItaliano){this.setIsLoading(!0);for(let o of this.modelEdit.nazioniXLingua)o.nazione=this.modelEdit.nazione,o.nome||(o.nome=this.modelEdit.nazione.nomeItaliano);this.apiService.setNazione(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.amministrazione.nazioni.nazioneSalvata").then(()=>{this.backEvent.emit()})})}else this.showError("globals.messages.inserireDati")}delete(o){this.showDialogConfirm("sbm.amministrazione.nazioni.eliminareNazione").then(t=>{null!=o&&(this.modelEdit.nazione=o),this.modelEdit.nazione.isDeleted=!0,this.setIsLoading(!0),this.apiService.setNazione(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function OT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",10),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",29)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.amministrazione.nazioni.nessunaNazione")))}function LT(i,o){1&i&&e._UZ(0,"mat-header-cell")}function DT(i,o){1&i&&(e.TgZ(0,"mat-cell",30)(1,"button",31)(2,"i",32),e._uU(3,"edit"),e.qZA()()())}function IT(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.nazione.proprieta.sigla")))}function QT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.sigla)}}function UT(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.nazione.proprieta.nomeItaliano")))}function YT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nomeItaliano)}}function RT(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.nazione.proprieta.lingua")))}function FT(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.lingua?t.lingua.nome:"")}}function HT(i,o){1&i&&e._UZ(0,"mat-header-cell")}function KT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",33)(1,"button",34),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(37);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",35),e._uU(3,"delete"),e.qZA()()()}}function GT(i,o){1&i&&e._UZ(0,"mat-header-row",36)}function $T(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",37),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}So.\u0275fac=function(o){return new(o||So)(e.Y36(A.s),e.Y36(j.m))},So.\u0275cmp=e.Xpm({type:So,selectors:[["app-nazioni-edit"]],inputs:{nazione:"nazione"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:35,vars:34,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.nazione.sigla=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.nazione.nomeItaliano=a}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",1)(10,"mat-form-field",2)(11,"input",4),e.NdJ("ngModelChange",function(a){return t.modelEdit.nazione.codiceQuestura=a}),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"div",0)(14,"div",1)(15,"mat-form-field",2)(16,"input",4),e.NdJ("ngModelChange",function(a){return t.modelEdit.nazione.iso2=a}),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",1)(19,"app-view-select",5),e.NdJ("valueChange",function(a){return t.modelEdit.nazione.lingua=a}),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",1)(22,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.nazione.isAttiva=a}),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"mat-tab-group",7),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(26,ET,2,1,"ng-container",8),e.qZA(),e.TgZ(27,"div",9)(28,"button",10),e.NdJ("click",function(){return t.save()}),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.YNc(31,NT,3,3,"button",11),e.TgZ(32,"button",12),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(33),e.ALo(34,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,18,"bo.nazione.proprieta.sigla")),e.Q6J("ngModel",t.modelEdit.nazione.sigla),e.xp6(4),e.s9C("placeholder",e.lcZ(8,20,"bo.nazione.proprieta.nomeItaliano")),e.Q6J("ngModel",t.modelEdit.nazione.nomeItaliano),e.xp6(4),e.s9C("placeholder",e.lcZ(12,22,"bo.nazione.proprieta.codiceQuestura")),e.Q6J("ngModel",t.modelEdit.nazione.codiceQuestura),e.xp6(5),e.s9C("placeholder",e.lcZ(17,24,"bo.nazione.proprieta.iso2")),e.Q6J("ngModel",t.modelEdit.nazione.iso2),e.xp6(3),e.Q6J("dataLoader",t.apiService.getLingueViewSelect())("value",t.modelEdit.nazione.lingua)("placeholder",e.lcZ(20,26,"bo.nazione.proprieta.lingua")),e.xp6(3),e.Q6J("ngModel",t.modelEdit.nazione.isAttiva),e.xp6(1),e.Oqu(e.lcZ(24,28,"bo.nazione.proprieta.isAttiva")),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.nazioniXLingua),e.xp6(3),e.Oqu(e.lcZ(30,30,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.modelEdit.nazione&&t.modelEdit.nazione.oid>0),e.xp6(2),e.Oqu(e.lcZ(34,32,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.JJ,_.Q7,_.On,ne.d,z.X$]});class yo extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.nazione=new v.uyR,this.showTable=!0,this.displayedColumns=["edit","sigla","nomeItaliano","lingua","delete"]}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.nazioni.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("nomeItaliano",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getNazioniFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}add(){this.edit(new v.uyR(-1))}edit(o){this.nazione=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle()}}function BT(i,o){if(1&i&&e._UZ(0,"img",17),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagineIcona,e.LSH)}}function VT(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"th",3)(2,"span"),e._uU(3),e.qZA(),e.YNc(4,BT,1,1,"img",15),e.qZA(),e.TgZ(5,"td",16),e._uU(6),e.qZA(),e.TgZ(7,"td",16),e._uU(8),e.qZA(),e.TgZ(9,"td",16),e._uU(10),e.qZA()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.portale),e.xp6(1),e.Q6J("ngIf",!!t.urlImmagineIcona),e.xp6(2),e.Oqu(t.url),e.xp6(2),e.Oqu(t.urlGetPrenotazioni),e.xp6(2),e.Oqu(t.urlSetDisponibilita)}}function XT(i,o){if(1&i&&(e.TgZ(0,"th",4),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function jT(i,o){if(1&i&&e._UZ(0,"img",17),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagineIcona,e.LSH)}}function WT(i,o){if(1&i&&(e.TgZ(0,"mat-option",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function ex(i,o){1&i&&e._UZ(0,"i",30)}function tx(i,o){1&i&&e._UZ(0,"i",12)}function ix(i,o){1&i&&e._UZ(0,"i",13)}function ox(i,o){1&i&&e._UZ(0,"i",14)}yo.\u0275fac=function(o){return new(o||yo)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},yo.\u0275cmp=e.Xpm({type:yo,selectors:[["app-nazioni"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:38,vars:15,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["nomeSearch",""],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","sigla"],[4,"matCellDef"],["matColumnDef","nomeItaliano"],["matColumnDef","lingua"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"nazione","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,OT,8,3,"div",8),e.TgZ(10,"div",1)(11,"button",9),e.NdJ("click",function(){return t.add()}),e.TgZ(12,"i",10),e._uU(13,"add"),e.qZA()(),e.TgZ(14,"div",11)(15,"mat-table",12),e.ynx(16,13),e.YNc(17,LT,1,0,"mat-header-cell",14),e.YNc(18,DT,4,0,"mat-cell",15),e.BQk(),e.ynx(19,16),e.YNc(20,IT,3,3,"mat-header-cell",14),e.YNc(21,QT,2,1,"mat-cell",17),e.BQk(),e.ynx(22,18),e.YNc(23,UT,3,3,"mat-header-cell",14),e.YNc(24,YT,2,1,"mat-cell",17),e.BQk(),e.ynx(25,19),e.YNc(26,RT,3,3,"mat-header-cell",14),e.YNc(27,FT,2,1,"mat-cell",17),e.BQk(),e.ynx(28,20),e.YNc(29,HT,1,0,"mat-header-cell",14),e.YNc(30,KT,4,0,"mat-cell",21),e.BQk(),e.YNc(31,GT,1,0,"mat-header-row",22),e.YNc(32,$T,1,1,"mat-row",23),e.qZA()(),e.TgZ(33,"div",24)(34,"mat-paginator",25),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(35,"div",26)(36,"app-nazioni-edit",27,28),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,13,"bo.nazione.proprieta.nomeItaliano")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("nazione",t.nazione))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,So,z.X$]});const nx=function(i){return{"cursor-pointer":i}};function ax(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",19)(1,"mat-form-field",20)(2,"mat-select",21,22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.valore=a)})("selectionChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.save(l))}),e.YNc(4,WT,3,4,"mat-option",23),e.ALo(5,"selectEnum"),e.qZA()(),e.TgZ(6,"div",24),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(3),l=e.oxw(2);return e.KtG(l.configuration?a.open():null)}),e.YNc(7,ex,1,0,"i",25),e.YNc(8,tx,1,0,"i",26),e.YNc(9,ix,1,0,"i",27),e.YNc(10,ox,1,0,"i",28),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.valore),e.xp6(2),e.Q6J("ngForOf",e.xi3(5,7,n.enumTipoParametroPortale,"tipoParametroPortale")),e.xp6(2),e.Q6J("ngClass",e.VKq(10,nx,n.configuration)),e.xp6(1),e.Q6J("ngIf",t.valore==n.enumTipoParametroPortale.NonGestito),e.xp6(1),e.Q6J("ngIf",t.valore==n.enumTipoParametroPortale.NonImplementato),e.xp6(1),e.Q6J("ngIf",t.valore==n.enumTipoParametroPortale.AttivoSempre),e.xp6(1),e.Q6J("ngIf",t.valore==n.enumTipoParametroPortale.AttivoConFlag)}}function lx(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"th",3)(2,"span"),e._uU(3),e.qZA(),e.YNc(4,jT,1,1,"img",15),e.qZA(),e.YNc(5,ax,11,12,"td",18),e.qZA()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.portale),e.xp6(1),e.Q6J("ngIf",!!t.urlImmagineIcona),e.xp6(1),e.Q6J("ngForOf",t.funzionalita)}}class ci extends f.H{constructor(o){super(),this.apiService=o,this.funzionalita=[],this.funzionalitaXPortale=[],this.enumTipoParametroPortale=c.ni,this.isUrlVisibile=!1}ngOnInit(){this.setIsLoading(!0),this.apiService.getFunzionalitaPortali().subscribe(o=>{this.funzionalita=o.data.funzionalita,this.funzionalitaXPortale=o.data.funzionalitaXPortale,this.setIsLoading(!1)})}save(o){this.apiService.setFunzionalitaPortale(o).subscribe()}showUrl(){this.isUrlVisibile=!this.isUrlVisibile}}ci.\u0275fac=function(o){return new(o||ci)(e.Y36(A.s))},ci.\u0275cmp=e.Xpm({type:ci,selectors:[["app-funzionalita-portali"]],inputs:{configuration:"configuration"},features:[e.qOj],decls:32,vars:5,consts:[[1,"table-container","overflow-auto"],[3,"hidden"],[1,"sticky-top","bg-white","header-tr"],[1,"portale-th","bg-white"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"col-4"],["mat-button","","color","primary",1,"ml-2",3,"click"],[1,"col-2"],[1,"fa-solid","fa-ban","color-red","mr-2"],[1,"fa-brands","fa-creative-commons-nd","color-red"],[1,"fa-solid","fa-check","color-green"],[1,"fa-solid","fa-square-check","color-green"],["class","ml-2 portale-icon",3,"src",4,"ngIf"],[1,"font-small"],[1,"ml-2","portale-icon",3,"src"],["class","text-center funzionalita-td position-relative",4,"ngFor","ngForOf"],[1,"text-center","funzionalita-td","position-relative"],[1,"w-100","text-center","funzionalita-select","position-absolute"],[3,"ngModel","ngModelChange","selectionChange"],["select",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngClass","click"],["class","fa-solid fa-ban color-red",4,"ngIf"],["class","fa-brands fa-creative-commons-nd color-red",4,"ngIf"],["class","fa-solid fa-check color-green",4,"ngIf"],["class","fa-solid fa-square-check color-green",4,"ngIf"],[3,"value"],[1,"fa-solid","fa-ban","color-red"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"table",1)(2,"tr",2),e._UZ(3,"th",3),e.TgZ(4,"th",4),e._uU(5,"Url"),e.qZA(),e.TgZ(6,"th",4),e._uU(7,"Url lettura prenotazioni"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"Url pubblicazione disponibilit\xe0"),e.qZA()(),e.YNc(10,VT,11,5,"tr",5),e.qZA(),e.TgZ(11,"table",1)(12,"tr",2),e._UZ(13,"th",3),e.YNc(14,XT,2,1,"th",6),e.qZA(),e.YNc(15,lx,6,3,"tr",5),e.qZA()(),e.TgZ(16,"div",7)(17,"div",8)(18,"a",9),e.NdJ("click",function(){return t.showUrl()}),e._uU(19,"Visualizza/Nascondi Url"),e.qZA()(),e.TgZ(20,"div",10),e._UZ(21,"i",11),e._uU(22," Non Gestito dal portale "),e.qZA(),e.TgZ(23,"div",10),e._UZ(24,"i",12),e._uU(25," Non implementato "),e.qZA(),e.TgZ(26,"div",10),e._UZ(27,"i",13),e._uU(28," Attivo sempre "),e.qZA(),e.TgZ(29,"div",10),e._UZ(30,"i",14),e._uU(31," Attivabile tramite flag "),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("hidden",!t.isUrlVisibile),e.xp6(9),e.Q6J("ngForOf",t.funzionalitaXPortale),e.xp6(1),e.Q6J("hidden",t.isUrlVisibile),e.xp6(3),e.Q6J("ngForOf",t.funzionalita),e.xp6(1),e.Q6J("ngForOf",t.funzionalitaXPortale))},dependencies:[m.mk,m.sg,m.O5,h.Nr,M.v_,re.CK,g.x8,_.JJ,_.On,Te.A,z.X$],styles:[".table-container[_ngcontent-%COMP%]{height:600px}table[_ngcontent-%COMP%]{min-width:100%;table-layout:fixed}tr[_ngcontent-%COMP%]{height:30px}.header-tr[_ngcontent-%COMP%]{height:40px}.portale-th[_ngcontent-%COMP%]{max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;position:-webkit-sticky;position:sticky;left:0;z-index:1}.funzionalita-td[_ngcontent-%COMP%]{min-width:200px}.funzionalita-select[_ngcontent-%COMP%]{visibility:hidden;top:0;left:0}.color-red[_ngcontent-%COMP%]{color:red}.color-green[_ngcontent-%COMP%]{color:green}tr[_ngcontent-%COMP%]{border-bottom:1pt solid gray;height:40px}.portale-icon[_ngcontent-%COMP%]{height:32px}"]});class Jo extends f.H{set _portale(o){if(null!=o){this.portale=o;try{this.portale.coloreHex=Z(this.portale.colore).hex()}catch(t){}}}constructor(o){super(),this.apiService=o,this.backEvent=new e.vpe,this.enumTipoImmagine=c.yf}save(){if(this.setIsLoading(!0),this.portale.coloreHex)try{this.portale.colore=Z(this.portale.coloreHex).rgbNumber()}catch(o){}this.apiService.setPortaleAdmin(this.portale).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.amministrazione.portali.portaleSalvato").then(()=>{this.backEvent.emit()})})}editImage(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Ve.t,t),a=n.componentInstance;a._url=o==c.yf.Logo?this.portale.urlImmagineLogo:o==c.yf.Icona?this.portale.urlImmagineIcona:"",a.title=o==c.yf.Logo?"sbm.amministrazione.portali.immagineLogo":o==c.yf.Icona?"sbm.amministrazione.portali.immagineIcona":"",a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){this.setIsLoading(!0);let r=new d.xw8;r.oid=this.portale.oid,r.tipoImmagine=o,r.base64=l,this.apiService.setImmaginePortaleAdmin(r).subscribe(p=>{null!=p.data&&(o==c.yf.Logo?this.portale.urlImmagineLogo=p.data.url:o==c.yf.Icona&&(this.portale.urlImmagineIcona=p.data.url)),this.setIsLoading(!1)})}})}deleteImage(o){this.showDialogConfirm("globals.eliminareImmagine").then(t=>{this.setIsLoading(!0);let n=new d.xw8;n.oid=this.portale.oid,n.tipoImmagine=o,n.base64="",this.apiService.setImmaginePortaleAdmin(n).subscribe(a=>{null!=a.data&&(o==c.yf.Logo?this.portale.urlImmagineLogo=a.data.url:o==c.yf.Icona&&(this.portale.urlImmagineIcona=a.data.url)),this.setIsLoading(!1)})},t=>{})}}function rx(i,o){1&i&&(e.TgZ(0,"div",24)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.portali.nessunPortale")))}function cx(i,o){1&i&&e._UZ(0,"mat-header-cell")}function sx(i,o){1&i&&(e.TgZ(0,"mat-cell",25)(1,"button",26)(2,"i",27),e._uU(3,"edit"),e.qZA()()())}function px(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.amministrazione.portali.icona")))}function dx(i,o){if(1&i&&e._UZ(0,"img",29),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagineIcona,e.LSH)}}function mx(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,dx,1,1,"img",28),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlImmagineIcona)}}function _x(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portale.proprieta.nome")))}function ux(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function gx(i,o){1&i&&e._UZ(0,"mat-header-row",30)}function hx(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",31),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Jo.\u0275fac=function(o){return new(o||Jo)(e.Y36(A.s))},Jo.\u0275cmp=e.Xpm({type:Jo,selectors:[["app-portali-admin-edit"]],inputs:{_portale:"_portale"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:24,vars:22,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"value","placeholder","valueChange"],[1,"row","mt-3"],[1,"col-4","pr-1"],[3,"title","url","edit","delete"],[1,"col-4","pl-1","pr-1"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.portale.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.portale.url=a}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",1)(10,"app-color-picker",4),e.NdJ("valueChange",function(a){return t.portale.coloreHex=a}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",5)(13,"div",6)(14,"app-image",7),e.NdJ("edit",function(){return t.editImage(t.enumTipoImmagine.Logo)})("delete",function(){return t.deleteImage(t.enumTipoImmagine.Logo)}),e.qZA()(),e.TgZ(15,"div",8)(16,"app-image",7),e.NdJ("edit",function(){return t.editImage(t.enumTipoImmagine.Icona)})("delete",function(){return t.deleteImage(t.enumTipoImmagine.Icona)}),e.qZA()()(),e.TgZ(17,"div",9)(18,"button",10),e.NdJ("click",function(){return t.save()}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",11),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(22),e.ALo(23,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,12,"bo.portale.proprieta.nome")),e.Q6J("ngModel",t.portale.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(8,14,"bo.portale.proprieta.url")),e.Q6J("ngModel",t.portale.url),e.xp6(3),e.Q6J("value",t.portale.coloreHex)("placeholder",e.lcZ(11,16,"bo.portale.proprieta.colore")),e.xp6(4),e.Q6J("title","sbm.amministrazione.portali.immagineLogo")("url",t.portale.urlImmagineLogo),e.xp6(2),e.Q6J("title","sbm.amministrazione.portali.immagineIcona")("url",t.portale.urlImmagineIcona),e.xp6(3),e.Oqu(e.lcZ(20,18,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(23,20,"globals.annulla")))},dependencies:[w.X,h.eB,M.v_,b.k0,_.Fj,_.JJ,_.On,We.h,Ge.c,z.X$]});class Eo extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.portale=new v.BIO,this.showTable=!0,this.displayedColumns=["edit","icona","nome"]}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.portali.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String))}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPortaliAdminFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}edit(o){this.portale=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}funzionalitaPortali(){let o=new d.Zpt;o.width="90vw",this.showModalDialog(ci,o).componentInstance.configuration=!0}}Eo.\u0275fac=function(o){return new(o||Eo)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Eo.\u0275cmp=e.Xpm({type:Eo,selectors:[["app-portali-admin"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:31,vars:18,consts:[[1,"p-3"],[3,"hidden"],["mat-flat-button","","color","primary",1,"funzionalita-portali-button",3,"click"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["nomeSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","icona"],[4,"matCellDef"],["matColumnDef","nome"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"_portale","backEvent"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["class","portale-icon",3,"src",4,"ngIf"],[1,"portale-icon",3,"src"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.funzionalitaPortali()}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"input",7,8),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(10);return e.KtG(t.onSearch(0,l.value))}),e.ALo(11,"translate"),e.qZA()()()()(),e.YNc(12,rx,4,3,"div",9),e.TgZ(13,"div",1)(14,"div",10)(15,"mat-table",11),e.ynx(16,12),e.YNc(17,cx,1,0,"mat-header-cell",13),e.YNc(18,sx,4,0,"mat-cell",14),e.BQk(),e.ynx(19,15),e.YNc(20,px,3,3,"mat-header-cell",13),e.YNc(21,mx,2,1,"mat-cell",16),e.BQk(),e.ynx(22,17),e.YNc(23,_x,3,3,"mat-header-cell",13),e.YNc(24,ux,2,1,"mat-cell",16),e.BQk(),e.YNc(25,gx,1,0,"mat-header-row",18),e.YNc(26,hx,1,1,"mat-row",19),e.qZA()(),e.TgZ(27,"div",20)(28,"mat-paginator",21),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(29,"div",22)(30,"app-portali-admin-edit",23),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(2),e.Oqu(e.lcZ(4,14,"sbm.amministrazione.portali.funzionalitaPortali")),e.xp6(6),e.s9C("placeholder",e.lcZ(11,16,"bo.portale.proprieta.nome")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("_portale",t.portale))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Jo,z.X$],styles:[".mat-column-icona[_ngcontent-%COMP%]{width:200px;min-width:200px;max-width:200px;justify-content:center}.funzionalita-portali-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}"]});var gc=Y(54860),He=Y(75659);function fx(i,o){if(1&i&&(e.TgZ(0,"div",8)(1,"mat-radio-button",13),e._UZ(2,"i"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Tol(t+" icon")}}class Qt{set icon(o){this.selectedIcon=o||""}constructor(o){this.http=o,this.selectedIcon="",this.icons=[],this.filteredIcons=[]}ngOnInit(){this.http.get("/assets/font-awesome-v5.0.1.json").subscribe({next:o=>{null!=o&&null!=o.icons&&(this.icons=o.icons,this.filteredIcons=o.icons)},error:()=>{}})}filter(o){this.filteredIcons=o?this.icons.filter(t=>t.includes(o)):this.icons}}function Cx(i,o){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nome," ")}}function bx(i,o){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function vx(i,o){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}Qt.\u0275fac=function(o){return new(o||Qt)(e.Y36(gc.eN))},Qt.\u0275cmp=e.Xpm({type:Qt,selectors:[["app-icons-dialog"]],inputs:{icon:"icon",dialogRef:"dialogRef"},decls:18,vars:9,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"filterDiv"],["autocompleteOff","","type","text","matInput","",3,"placeholder","input"],["iconInput",""],[1,"iconsDiv"],[3,"ngModel","ngModelChange"],[1,"row"],[1,"col-2"],["color","primary","value",""],["class","col-2",4,"ngFor","ngForOf"],[1,"buttonDiv","text-right"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],["color","primary",3,"value"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"mat-form-field")(5,"input",3,4),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(6);return e.KtG(t.filter(l.value))}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",5)(9,"mat-radio-group",6),e.NdJ("ngModelChange",function(l){return t.selectedIcon=l}),e.TgZ(10,"div",7)(11,"div",8),e._UZ(12,"mat-radio-button",9),e.qZA(),e.YNc(13,fx,3,3,"div",10),e.qZA()()(),e.TgZ(14,"div",11)(15,"button",12),e.NdJ("click",function(){return t.dialogRef.close(t.selectedIcon)}),e._uU(16),e.ALo(17,"translate"),e.qZA()()}2&o&&(e.Q6J("disableRipple",!0),e.xp6(5),e.s9C("placeholder",e.lcZ(7,5,"interfaces.icons-dialog.iconsFilter")),e.xp6(4),e.Q6J("ngModel",t.selectedIcon),e.xp6(4),e.Q6J("ngForOf",t.filteredIcons),e.xp6(3),e.Oqu(e.lcZ(17,7,"globals.salva")))},dependencies:[w.X,m.sg,_.JJ,_.On,h.eB,M.v_,b.k0,He.OY,He.vy,F.aO,z.X$],styles:[".icon[_ngcontent-%COMP%]{font-size:22px}.filterDiv[_ngcontent-%COMP%]{height:70px;width:100%}.buttonDiv[_ngcontent-%COMP%]{height:50px;width:100%}.iconsDiv[_ngcontent-%COMP%]{height:500px;overflow-y:auto;overflow-x:hidden}"]});const Kc=function(i){return{"color-pink":i}};class No extends f.H{constructor(o){super(),this.apiService=o,this.getPortaliRQ=d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number),this.selectedRisorse=[],this.selectedTariffe=[]}ngOnInit(){this.setIsLoading(!0),this.apiService.getPortaliFilter(this.getPortaliRQ).subscribe(o=>{this.portali=o.data,this.portali.length>0?(this.portale=this.portali[0],this.onPortaleChange()):this.setIsLoading(!1)})}onPortaleChange(){this.selectedRisorse=[],this.selectedTariffe=[],this.setIsLoading(!0);let o=new d.nM8;o.oidServizio=this.oidServizio,o.oidPortale=this.portale.oid,this.apiService.getRisorseTariffeNonAttiveServizio(o).subscribe(t=>{this.risorse=t.data.risorse,this.tariffe=t.data.tariffe,this.setIsLoading(!1)})}onSelectDeselectAllClickRisorse(o){this.isAllSelectedRisorse(o)?this.selectedRisorse=[]:this.selectedRisorse=this.risorse.map(t=>t.oid)}isAllSelectedRisorse(o){return o.selected.length==this.risorse.length}onSelectDeselectAllClickTariffe(o){this.isAllSelectedTariffe(o)?this.selectedTariffe=[]:this.selectedTariffe=this.tariffe.map(t=>t.oid)}isAllSelectedTariffe(o){return o.selected.length==this.tariffe.length}isAllDeselected(o){return 0==o.selected.length}save(){this.setIsLoading(!0);let o=new d.u0V;o.oidServizio=this.oidServizio,o.oidRisorse=this.selectedRisorse,o.oidTariffe=this.selectedTariffe,this.apiService.associaRisorseTariffeServizio(o).subscribe(()=>{this.setIsLoading(!1),this.dialogRef.close()})}}function Tx(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function xx(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"span",22),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"i"),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"bo.servizio.proprieta.iconaCss")+": "),e.xp6(2),e.Tol(t.modelEdit.servizio.iconaCss+" align-middle ml-1")}}function Zx(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",23)(2,"app-image",24),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.modelEdit.servizio.urlImmagine)}}function Ax(i,o){1&i&&(e.TgZ(0,"div",25)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.servizi.salvareServizio")))}function wx(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",27)(1,"mat-form-field",28)(2,"input",29),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.serviziXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",30),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.serviziXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.servizioXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.serviziXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.servizioXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.serviziXLingua[a].descrizione)}}function zx(i,o){if(1&i&&(e.ynx(0),e.YNc(1,wx,7,10,"mat-tab",26),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function Mx(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function qx(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.associaRisorseTariffe())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.servizi.associaRisorseTariffe")))}No.\u0275fac=function(o){return new(o||No)(e.Y36(A.s))},No.\u0275cmp=e.Xpm({type:No,selectors:[["app-associa-risorse-tariffe-servizio-modal"]],inputs:{oidServizio:"oidServizio",dialogRef:"dialogRef"},features:[e.qOj],decls:30,vars:36,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col-6"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectRisorse",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],["selectTariffe",""],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"mat-select",3),e.NdJ("ngModelChange",function(l){return t.portale=l})("selectionChange",function(){return t.onPortaleChange()}),e.ALo(5,"translate"),e.YNc(6,Cx,2,2,"mat-option",4),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"mat-form-field",2)(10,"mat-select",7,8),e.NdJ("ngModelChange",function(l){return t.selectedRisorse=l}),e.ALo(12,"translate"),e.TgZ(13,"mat-checkbox",9),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(11);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickRisorse(r))}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.YNc(16,bx,2,2,"mat-option",4),e.qZA()()(),e.TgZ(17,"div",6)(18,"mat-form-field",2)(19,"mat-select",7,10),e.NdJ("ngModelChange",function(l){return t.selectedTariffe=l}),e.ALo(21,"translate"),e.TgZ(22,"mat-checkbox",9),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(20);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickTariffe(r))}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.YNc(25,vx,2,2,"mat-option",4),e.qZA()()()(),e.TgZ(26,"div",11)(27,"button",12),e.NdJ("click",function(){return t.save()}),e._uU(28),e.ALo(29,"translate"),e.qZA()()}if(2&o){const n=e.MAs(11),a=e.MAs(20);e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("placeholder",e.lcZ(5,20,"globals.portale"))("ngModel",t.portale),e.xp6(2),e.Q6J("ngForOf",t.portali),e.xp6(4),e.Q6J("placeholder",e.lcZ(12,22,"sbm.tabelle.servizi.risorse"))("ngModel",t.selectedRisorse),e.xp6(3),e.Q6J("ngClass",e.VKq(32,Kc,t.isAllSelectedRisorse(n)))("checked",t.isAllSelectedRisorse(n))("indeterminate",!t.isAllSelectedRisorse(n)&&!t.isAllDeselected(n)),e.xp6(1),e.hij(" ",e.lcZ(15,24,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",t.risorse),e.xp6(3),e.Q6J("placeholder",e.lcZ(21,26,"sbm.tabelle.servizi.tariffe"))("ngModel",t.selectedTariffe),e.xp6(3),e.Q6J("ngClass",e.VKq(34,Kc,t.isAllSelectedTariffe(a)))("checked",t.isAllSelectedTariffe(a))("indeterminate",!t.isAllSelectedTariffe(a)&&!t.isAllDeselected(a)),e.xp6(1),e.hij(" ",e.lcZ(24,28,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",t.tariffe),e.xp6(2),e.Q6J("disabled",0==t.selectedRisorse.length&&0==t.selectedTariffe.length),e.xp6(1),e.Oqu(e.lcZ(29,30,"globals.salva"))}},dependencies:[m.mk,m.sg,V.FC,h.eB,M.v_,re.CK,g.x8,F.aO,_.JJ,_.On,z.X$]});const Px=function(i){return{"ml-3":i}};class Oo extends f.H{set servizio(o){if(null!=o){this.modelEdit=new d.snO,this.modelEdit.servizio=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.AFo;n.lingua=t,this.modelEdit.serviziXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getServiziXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.serviziXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.serviziXLingua[a].servizio=n.servizio,this.modelEdit.serviziXLingua[a].nome=n.nome,this.modelEdit.serviziXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.containerService=n,this.modelEdit=new d.snO,this.editing=!1,this.selectedIndex=0,this.enumCategoriaServizio=c.Zd,this.admin=!1,this.backEvent=new e.vpe}save(){if(this.modelEdit.servizio.nome){for(let o of this.modelEdit.serviziXLingua)o.servizio=this.modelEdit.servizio;this.admin||(this.modelEdit.servizio.albergo=new v.Z$(this.sessionService.getOidAlbergo())),this.setIsLoading(!0),this.apiService.setServizio(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.servizi.servizioSalvato").then(()=>{this.editing?this.backEvent.emit():(this.modelEdit.servizio=o.data.obj,this.editing=!0,setTimeout(()=>{this.containerService.scrollToTop(),this.selectedIndex=0},200))})})}else this.showError("globals.messages.inserireDati")}delete(o){this.showDialogConfirm("sbm.tabelle.servizi.eliminareServizio").then(t=>{null!=o&&(this.modelEdit.servizio=o),this.modelEdit.servizio.isDeleted=!0,this.setIsLoading(!0),this.apiService.setServizio(this.modelEdit).subscribe(n=>{this.backEvent.emit()})},t=>{})}editIcon(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qt,o),n=t.componentInstance;n.icon=this.modelEdit.servizio.iconaCss,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&(this.modelEdit.servizio.iconaCss=a)})}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.modelEdit.servizio.urlImmagine,n.maximumFileSize=1e5,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.SPb;l.oid=this.modelEdit.servizio.oid,l.base64=a,this.apiService.setImmagineServizio(l).subscribe(r=>{null!=r.data&&(this.modelEdit.servizio.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.SPb;t.oid=this.modelEdit.servizio.oid,t.base64="",this.apiService.setImmagineServizio(t).subscribe(n=>{null!=n.data&&(this.modelEdit.servizio.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}associaRisorseTariffe(){let o=new d.Zpt;o.width="60vw";let t=this.showModalDialog(No,o),n=t.componentInstance;n.oidServizio=this.modelEdit.servizio.oid,n.dialogRef=t}}function kx(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",27)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.tabelle.servizi.nessunServizio")))}function Sx(i,o){1&i&&e._UZ(0,"mat-header-cell")}function yx(i,o){1&i&&(e.TgZ(0,"mat-cell",28)(1,"button",29)(2,"i",30),e._uU(3,"edit"),e.qZA()()())}function Jx(i,o){1&i&&(e.TgZ(0,"mat-header-cell",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.immagine"),""))}function Ex(i,o){if(1&i&&e._UZ(0,"img",33),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagine,e.LSH)}}function Nx(i,o){if(1&i&&(e.TgZ(0,"mat-cell",31),e.YNc(1,Ex,1,1,"img",32),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlImmagine)}}function Ox(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.servizio.proprieta.iconaCss"),""))}function Lx(i,o){if(1&i&&e._UZ(0,"i"),2&i){const t=e.oxw().$implicit;e.Tol(t.iconaCss)}}function Dx(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Lx,1,2,"i",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.iconaCss)}}function Ix(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.servizio.proprieta.nome"),""))}function Qx(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function Ux(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.servizio.proprieta.ordinamento"),""))}function Yx(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ordinamento)}}function Rx(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.servizio.proprieta.isDisponibile"),""))}function Fx(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",35),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDisponibile)("disabled",!0)}}function Hx(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Kx(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",36)(1,"button",37),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(35);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",38),e._uU(3,"delete"),e.qZA()()()}}function Gx(i,o){1&i&&e._UZ(0,"mat-header-row",39)}function $x(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",40),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Oo.\u0275fac=function(o){return new(o||Oo)(e.Y36(A.s),e.Y36(j.m),e.Y36(te.J))},Oo.\u0275cmp=e.Xpm({type:Oo,selectors:[["app-servizi-edit"]],inputs:{admin:"admin",servizio:"servizio"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:51,vars:39,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],[1,"row","mt-3","mb-3"],[4,"ngIf"],["mat-flat-button","","color","primary",1,"align-middle",3,"ngClass","click"],["class","row mt-3 mb-3",4,"ngIf"],["class","mt-3 mb-3 p-3 border rounded",4,"ngIf"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],[1,"align-middle"],[1,"col-6"],[3,"title","url","edit","delete"],[1,"mt-3","mb-3","p-3","border","rounded"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.servizio.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Inserire il nome del servizio "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.servizio.ordinamento=a}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",4),e._uU(13," Inserire l'ordinamento di visualizzazione del servizio "),e.qZA()(),e.TgZ(14,"div",0)(15,"div",1)(16,"mat-form-field",2)(17,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.servizio.categoria=a}),e.ALo(18,"translate"),e.YNc(19,Tx,3,4,"mat-option",7),e.ALo(20,"selectEnum"),e.qZA()()(),e.TgZ(21,"div",4),e._uU(22," Seleziona la categoria del servizio "),e.qZA()(),e.TgZ(23,"div",8)(24,"div",1)(25,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.servizio.isDisponibile=a}),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",4),e._uU(29," Attivare il flag per rendere il servizio disponibile "),e.qZA()(),e.TgZ(30,"div",10)(31,"div",1),e.YNc(32,xx,5,5,"ng-container",11),e.TgZ(33,"button",12),e.NdJ("click",function(){return t.editIcon()}),e._uU(34),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",4),e._uU(37," Seleziona l'icona del servizio "),e.qZA()(),e.YNc(38,Zx,3,2,"div",13),e.YNc(39,Ax,4,3,"div",14),e.TgZ(40,"mat-tab-group",15),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(41,zx,2,1,"ng-container",16),e.qZA(),e.TgZ(42,"div",17)(43,"button",18),e.NdJ("click",function(){return t.save()}),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.YNc(46,Mx,3,3,"button",19),e.YNc(47,qx,3,3,"button",19),e.TgZ(48,"button",20),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(49),e.ALo(50,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,20,"bo.servizio.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.servizio.nome),e.xp6(7),e.s9C("placeholder",e.lcZ(11,22,"bo.servizio.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.servizio.ordinamento),e.xp6(7),e.s9C("placeholder",e.lcZ(18,24,"bo.servizio.proprieta.categoria")),e.Q6J("ngModel",t.modelEdit.servizio.categoria),e.xp6(2),e.Q6J("ngForOf",e.xi3(20,26,t.enumCategoriaServizio,"categoriaServizio")),e.xp6(6),e.Q6J("ngModel",t.modelEdit.servizio.isDisponibile),e.xp6(1),e.hij(" ",e.lcZ(27,29,"bo.servizio.proprieta.isDisponibile")," "),e.xp6(6),e.Q6J("ngIf",!!t.modelEdit.servizio.iconaCss),e.xp6(1),e.Q6J("ngClass",e.VKq(37,Px,!!t.modelEdit.servizio.iconaCss)),e.xp6(1),e.Oqu(e.lcZ(35,31,"sbm.tabelle.servizi.selezionaIcona")),e.xp6(4),e.Q6J("ngIf",t.modelEdit.servizio.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.servizio.oid||t.modelEdit.servizio.oid<=0),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.serviziXLingua),e.xp6(3),e.Oqu(e.lcZ(45,33,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(1),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(50,35,"globals.annulla")))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.Q7,_.On,Me.P,Ge.c,Te.A,z.X$]});class si extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.admin=!1,this.showTable=!0,this.displayedColumns=["edit","immagine","icona","nome","ordinamento","isDisponibile","delete"]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.servizi.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),(this.admin?this.apiService.getServiziAdmin():this.apiService.getServizi()).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.servizio=new v.V7C(-1),this.servizio.isModelloPassepartout=this.admin,this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.servizio=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}si.\u0275fac=function(o){return new(o||si)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},si.\u0275cmp=e.Xpm({type:si,selectors:[["app-servizi"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{admin:"admin"},features:[e.qOj],decls:36,vars:11,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","immagine"],["class","img-cell",4,"matHeaderCellDef"],["class","img-cell",4,"matCellDef"],["matColumnDef","icona"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","ordinamento"],["matColumnDef","isDisponibile"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"servizio","admin","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"img-cell"],["class","m-2 immagine-servizio",3,"src",4,"ngIf"],[1,"m-2","immagine-servizio",3,"src"],[3,"class",4,"ngIf"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,kx,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,Sx,1,0,"mat-header-cell",8),e.YNc(10,yx,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,Jx,3,3,"mat-header-cell",11),e.YNc(13,Nx,2,1,"mat-cell",12),e.BQk(),e.ynx(14,13),e.YNc(15,Ox,3,3,"mat-header-cell",8),e.YNc(16,Dx,2,1,"mat-cell",14),e.BQk(),e.ynx(17,15),e.YNc(18,Ix,3,3,"mat-header-cell",8),e.YNc(19,Qx,2,1,"mat-cell",14),e.BQk(),e.ynx(20,16),e.YNc(21,Ux,3,3,"mat-header-cell",8),e.YNc(22,Yx,2,1,"mat-cell",14),e.BQk(),e.ynx(23,17),e.YNc(24,Rx,3,3,"mat-header-cell",8),e.YNc(25,Fx,2,2,"mat-cell",14),e.BQk(),e.ynx(26,18),e.YNc(27,Hx,1,0,"mat-header-cell",8),e.YNc(28,Kx,4,0,"mat-cell",19),e.BQk(),e.YNc(29,Gx,1,0,"mat-header-row",20),e.YNc(30,$x,1,1,"mat-row",21),e.qZA()(),e.TgZ(31,"div",22)(32,"mat-paginator",23),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(33,"div",24)(34,"app-servizi-edit",25,26),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("servizio",t.servizio)("admin",t.admin))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Oo,z.X$],styles:[".img-cell[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]});class Lo{constructor(o){this.headerService=o}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.servizi.title")}ngOnDestroy(){this.headerService.clearTitle()}}Lo.\u0275fac=function(o){return new(o||Lo)(e.Y36(ie.r))},Lo.\u0275cmp=e.Xpm({type:Lo,selectors:[["app-servizi-admin"]],decls:1,vars:1,consts:[[3,"admin"]],template:function(o,t){1&o&&e._UZ(0,"app-servizi",0),2&o&&e.Q6J("admin",!0)},dependencies:[si]});var Mc=Y(64650),ht=Y(17792);function Bx(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nome," ")}}function Vx(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(3,2,t.value)," ")}}function Xx(i,o){1&i&&(e.ynx(0),e._UZ(1,"mat-checkbox",31),e.BQk())}function jx(i,o){1&i&&(e.ynx(0),e._UZ(1,"mat-radio-button",32),e.BQk())}const Wx=function(i){return{"mt-n3":i}};function eZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",28),e.YNc(1,Xx,2,0,"ng-container",24),e.YNc(2,jx,2,0,"ng-container",24),e.TgZ(3,"mat-form-field",29)(4,"input",30),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2).$implicit,T=e.oxw(2).index;return e.KtG(p.domandeXLingua[T].valoriArray[r]=a)}),e.qZA()()()}if(2&i){const t=o.index,n=e.oxw(2).$implicit,a=e.oxw(2).index,l=e.oxw(2);e.Q6J("ngClass",e.VKq(4,Wx,t>0)),e.xp6(1),e.Q6J("ngIf",n.domanda.tipo==l.enumTipoDomandaSondaggio.Checkbox),e.xp6(1),e.Q6J("ngIf",n.domanda.tipo==l.enumTipoDomandaSondaggio.Radio),e.xp6(2),e.Q6J("ngModel",n.domandeXLingua[a].valoriArray[t])}}function tZ(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,eZ,5,6,"div",27),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2).index,a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.utility.counter(t.domandeXLingua[n].valoriArray.length))}}function iZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"mat-form-field",2)(4,"textarea",14),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2).index;return e.KtG(r.domandeXLingua[p].titolo=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",22)(7,"mat-form-field",2)(8,"mat-select",23),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.domanda.tipo=a)}),e.ALo(9,"translate"),e.YNc(10,Vx,4,4,"ng-container",10),e.ALo(11,"selectEnum"),e.qZA()()()(),e.YNc(12,tZ,2,1,"div",24),e.TgZ(13,"div",25)(14,"mat-slide-toggle",26),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.domanda.isObbligatoria=a)}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2).index,a=e.oxw(2);e.xp6(4),e.Q6J("placeholder",e.lcZ(5,8,"bo.sondaggioDomandaXLingua.proprieta.titolo"))("ngModel",t.domandeXLingua[n].titolo),e.xp6(4),e.s9C("placeholder",e.lcZ(9,10,"bo.sondaggioDomanda.proprieta.tipo")),e.Q6J("ngModel",t.domanda.tipo),e.xp6(2),e.Q6J("ngForOf",e.xi3(11,12,a.enumTipoDomandaSondaggio,"tipoDomandaSondaggio")),e.xp6(2),e.Q6J("ngIf",t.domanda.tipo==a.enumTipoDomandaSondaggio.Checkbox||t.domanda.tipo==a.enumTipoDomandaSondaggio.Radio),e.xp6(2),e.Q6J("ngModel",t.domanda.isObbligatoria),e.xp6(1),e.Oqu(e.lcZ(16,15,"bo.sondaggioDomanda.proprieta.isObbligatoria"))}}function oZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",12)(1,"mat-form-field",13)(2,"textarea",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.sondaggio.sondaggiXLingua[l].testoIniziale=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"mat-form-field",13)(5,"textarea",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.sondaggio.sondaggiXLingua[l].testoFinalePunteggioBasso=a)}),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"mat-form-field",13)(8,"textarea",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.sondaggio.sondaggiXLingua[l].testoFinalePunteggioAlto=a)}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",15)(11,"h4",16),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",17),e.YNc(15,iZ,17,17,"div",18),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw(2);e.Q6J("label",n.lingua.nome),e.xp6(2),e.Q6J("placeholder",e.lcZ(3,9,"bo.sondaggioXLingua.proprieta.testoIniziale"))("ngModel",l.sondaggio.sondaggiXLingua[a].testoIniziale),e.xp6(3),e.Q6J("placeholder",e.lcZ(6,11,"bo.sondaggioXLingua.proprieta.testoFinalePunteggioBasso"))("ngModel",l.sondaggio.sondaggiXLingua[a].testoFinalePunteggioBasso),e.xp6(3),e.Q6J("placeholder",e.lcZ(9,13,"bo.sondaggioXLingua.proprieta.testoFinalePunteggioAlto"))("ngModel",l.sondaggio.sondaggiXLingua[a].testoFinalePunteggioAlto),e.xp6(4),e.Oqu(e.lcZ(13,15,"sbm.sondaggi.domande")),e.xp6(3),e.Q6J("ngForOf",l.sondaggio.domande)}}function nZ(i,o){if(1&i&&(e.ynx(0),e.YNc(1,oZ,16,17,"mat-tab",11),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function aZ(i,o){if(1&i&&(e.TgZ(0,"mat-tab-group",9),e.YNc(1,nZ,2,1,"ng-container",10),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.sondaggio.sondaggiXLingua)}}class Do extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.sondaggi=[],this.selectedSondaggio=new v.npI,this.sondaggio=new d.iyi,this.enumTipoDomandaSondaggio=c.NJ}ngOnInit(){this.setIsLoading(!0),this.apiService.getSondaggiAdmin().subscribe(o=>{this.sondaggi=o.data,this.sondaggi.length>0?(this.selectedSondaggio=this.sondaggi[0],this.onSondaggioChange()):this.setIsLoading(!1)})}onSondaggioChange(){this.setIsLoading(!0),this.sondaggio=new d.iyi,this.sondaggio.sondaggio=this.selectedSondaggio;for(let o of this.lingue){let t=new v.lv0;t.lingua=o,this.sondaggio.sondaggiXLingua.push(t)}this.apiService.getSondaggiXLingua(this.selectedSondaggio.oid).subscribe(o=>{for(let t of o.data.sondaggi)if(null!=t.lingua){let n=this.sondaggio.sondaggiXLingua.findIndex(a=>a.lingua.oid==t.lingua.oid);n>=0&&(this.sondaggio.sondaggiXLingua[n].testoIniziale=t.testoIniziale,this.sondaggio.sondaggiXLingua[n].testoFinalePunteggioBasso=t.testoFinalePunteggioBasso,this.sondaggio.sondaggiXLingua[n].testoFinalePunteggioAlto=t.testoFinalePunteggioAlto)}for(let t of o.data.domande){let n=new d.Fl5;n.domanda=t.domanda,n.domandeXLingua=[];for(let a of this.lingue){let l=new v.rD$;l.lingua=a,l.valoriArray=[],n.domandeXLingua.push(l)}for(let a of t.domandeXLingua)if(null!=a.lingua){let l=n.domandeXLingua.findIndex(r=>r.lingua.oid==a.lingua.oid);l>=0&&(n.domandeXLingua[l].titolo=a.titolo,n.domandeXLingua[l].valori=a.valori,(t.domanda.tipo==c.NJ.Checkbox||t.domanda.tipo==c.NJ.Radio)&&a.valori&&(n.domandeXLingua[l].valoriArray=a.valori.split(";")))}this.sondaggio.domande.push(n)}this.setIsLoading(!1)})}save(){this.setIsLoading(!0),this.sondaggio.sondaggio.oid=-1,this.sondaggio.sondaggio.nome+=" - Copia",this.sondaggio.sondaggio.isModelloPassepartout=!1,this.sondaggio.sondaggio.albergo=new v.Z$(this.sessionService.getOidAlbergo());for(let o of this.sondaggio.domande)o.domanda.oid=-1;this.apiService.setSondaggio(this.sondaggio).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.sondaggi.sondaggioSalvato").then(()=>{this.dialogRef.close(!0)})})}}function lZ(i,o){if(1&i&&(e._UZ(0,"app-url",17),e.ALo(1,"translate")),2&i){const t=e.oxw();e.Q6J("placeholder",e.lcZ(1,2,"sbm.sondaggi.urlSondaggioForm"))("url",t.getUrlSondaggioForm())}}function rZ(i,o){1&i&&e._UZ(0,"div",40)}function cZ(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",41),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(3,2,t.value)," ")}}function sZ(i,o){1&i&&(e.ynx(0),e._UZ(1,"mat-checkbox",52),e.BQk())}function pZ(i,o){1&i&&(e.ynx(0),e._UZ(1,"mat-radio-button",53),e.BQk())}function dZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(2).$implicit,r=e.oxw(2).index,p=e.oxw();return e.KtG(p.deleteOpzione(l.domandeXLingua[r].valoriArray,a))}),e.TgZ(1,"i",24),e._uU(2,"clear"),e.qZA()()}2&i&&e.Q6J("disableRipple",!0)}Do.\u0275fac=function(o){return new(o||Do)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},Do.\u0275cmp=e.Xpm({type:Do,selectors:[["app-sondaggi-add"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:12,vars:11,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["required","",3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","dialog-tab-group",4,"ngIf"],[1,"mt-4","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"dialog-tab-group"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"w-100","mt-3"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","readonly","",1,"sondaggi-add-textarea",3,"placeholder","ngModel","ngModelChange"],[1,"mt-4","mb-2"],[1,"d-inline-block","mr-2","mb-0","align-middle"],[1,"position-relative"],["class","position-relative border rounded-lg mat-elevation-z1 p-3 mb-2","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"position-relative","border","rounded-lg","mat-elevation-z1","p-3","mb-2"],[1,"row","mt-2"],[1,"col-8"],[1,"col-4"],["disabled","",3,"ngModel","placeholder","ngModelChange"],[4,"ngIf"],[1,"text-right"],["color","primary","disabled","",1,"align-middle","sondaggi-add-slide-toggle",3,"ngModel","ngModelChange"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"align-middle","w-75"],["autocompleteOff","","type","text","matInput","","readonly","",3,"ngModel","ngModelChange"],["color","primary","disabled","",1,"d-inline-block","align-middle","mt-1","mr-2"],["color","primary","disabled","",1,"d-inline-block","align-middle","mt-1"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"mat-select",3),e.NdJ("ngModelChange",function(a){return t.selectedSondaggio=a})("selectionChange",function(){return t.onSondaggioChange()}),e.ALo(5,"translate"),e.YNc(6,Bx,2,2,"mat-option",4),e.qZA()(),e.YNc(7,aZ,2,1,"mat-tab-group",5),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return t.save()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngModel",t.selectedSondaggio)("placeholder",e.lcZ(5,7,"sbm.sondaggi.sondaggio")),e.xp6(2),e.Q6J("ngForOf",t.sondaggi),e.xp6(1),e.Q6J("ngIf",null!=t.selectedSondaggio&&null!=t.selectedSondaggio.oid),e.xp6(2),e.Q6J("disabled",null==t.selectedSondaggio||null==t.selectedSondaggio.oid||t.selectedSondaggio.oid<=0),e.xp6(1),e.Oqu(e.lcZ(11,9,"globals.salva")))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,it.IC,M.v_,b.k0,re.CK,He.vy,g.x8,Mc.iZ,ee.SK,ee.R7,F.aO,ht.Zt,_.Fj,_.JJ,_.Q7,_.On,Te.A,z.X$],styles:[".sondaggi-add-textarea{padding:0!important;margin:0!important}  .sondaggi-add-slide-toggle.mat-disabled{opacity:1!important}"]});const mZ=function(i){return{"mt-n3":i}},_Z=function(i,o){return{"w-100":i,"pr-3":o}};function uZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",47)(1,"div",48),e.YNc(2,sZ,2,0,"ng-container",35),e.YNc(3,pZ,2,0,"ng-container",35),e.TgZ(4,"mat-form-field",49)(5,"input",50),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2).$implicit,T=e.oxw(2).index;return e.KtG(p.domandeXLingua[T].valoriArray[r]=a)})("blur",function(){const l=e.CHM(t).index,r=e.oxw(2).$implicit,p=e.oxw(2).index,T=e.oxw();return e.KtG(T.onOpzioneBlur(r.domandeXLingua[p].valoriArray,l))}),e.qZA()()(),e.YNc(6,dZ,3,1,"button",51),e.qZA()}if(2&i){const t=o.index,n=e.oxw(2).$implicit,a=e.oxw(2).index,l=e.oxw();e.Q6J("ngClass",e.VKq(6,mZ,t>0)),e.xp6(1),e.Q6J("ngClass",e.WLB(8,_Z,n.domandeXLingua[a].valoriArray.length<=1,n.domandeXLingua[a].valoriArray.length>1)),e.xp6(1),e.Q6J("ngIf",n.domanda.tipo==l.enumTipoDomandaSondaggio.Checkbox),e.xp6(1),e.Q6J("ngIf",n.domanda.tipo==l.enumTipoDomandaSondaggio.Radio),e.xp6(2),e.Q6J("ngModel",n.domandeXLingua[a].valoriArray[t]),e.xp6(1),e.Q6J("ngIf",n.domandeXLingua[a].valoriArray.length>1)}}function gZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,uZ,7,11,"div",42),e.TgZ(2,"div",43)(3,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2).index,r=e.oxw();return e.KtG(r.addOpzione(a.domandeXLingua[l].valoriArray))}),e.TgZ(4,"i",45),e._uU(5,"add_circle_outline"),e.qZA()(),e.TgZ(6,"span",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2).index,r=e.oxw();return e.KtG(r.addOpzione(a.domandeXLingua[l].valoriArray))}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2).index,a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.utility.counter(t.domandeXLingua[n].valoriArray.length)),e.xp6(6),e.hij(" ",e.lcZ(8,2,"sbm.sondaggi.aggiungiOpzione")," ")}}function hZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(3);return e.KtG(l.deleteDomanda(a))}),e.TgZ(1,"i",24),e._uU(2,"delete"),e.qZA()()}2&i&&e.Q6J("disableRipple",!0)}function fZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",27),e.YNc(1,rZ,1,0,"div",28),e.TgZ(2,"div",29)(3,"span",30),e._uU(4,"open_with"),e.qZA()(),e.TgZ(5,"div",31)(6,"div",32)(7,"mat-form-field",2)(8,"textarea",33),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2).index;return e.KtG(r.domandeXLingua[p].titolo=a)})("blur",function(){const a=e.CHM(t),l=a.$implicit,r=a.index,p=e.oxw(2).index,T=e.oxw();return e.KtG(T.onDomandaBlur(l.domandeXLingua[p],r))}),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",1)(11,"mat-form-field",2)(12,"mat-select",34),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.domanda.tipo=a)})("selectionChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onTipoDomandaChange(l))}),e.ALo(13,"translate"),e.YNc(14,cZ,4,4,"ng-container",12),e.ALo(15,"selectEnum"),e.qZA()()()(),e.YNc(16,gZ,9,4,"div",35),e.TgZ(17,"div",36),e.YNc(18,hZ,3,1,"button",37),e.TgZ(19,"button",38),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.duplicaDomanda(l))}),e.TgZ(20,"i",24),e._uU(21,"filter_none"),e.qZA()(),e.TgZ(22,"mat-slide-toggle",39),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.domanda.isObbligatoria=a)}),e._uU(23),e.ALo(24,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2).index,a=e.oxw();e.xp6(8),e.Q6J("placeholder",e.lcZ(9,10,"bo.sondaggioDomandaXLingua.proprieta.titolo"))("ngModel",t.domandeXLingua[n].titolo),e.xp6(4),e.s9C("placeholder",e.lcZ(13,12,"bo.sondaggioDomanda.proprieta.tipo")),e.Q6J("ngModel",t.domanda.tipo),e.xp6(2),e.Q6J("ngForOf",e.xi3(15,14,a.enumTipoDomandaSondaggio,"tipoDomandaSondaggio")),e.xp6(2),e.Q6J("ngIf",t.domanda.tipo==a.enumTipoDomandaSondaggio.Checkbox||t.domanda.tipo==a.enumTipoDomandaSondaggio.Radio),e.xp6(2),e.Q6J("ngIf",a.modelEdit.domande.length>1),e.xp6(1),e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngModel",t.domanda.isObbligatoria),e.xp6(1),e.Oqu(e.lcZ(24,17,"bo.sondaggioDomanda.proprieta.isObbligatoria"))}}function CZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",19)(1,"div",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-editor",20),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.sondaggiXLingua[l].testoIniziale=a)}),e.qZA(),e.TgZ(5,"div",13),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"app-editor",20),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.sondaggiXLingua[l].testoFinalePunteggioBasso=a)}),e.qZA(),e.TgZ(9,"div",13),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"app-editor",20),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.sondaggiXLingua[l].testoFinalePunteggioAlto=a)}),e.qZA(),e.TgZ(13,"div",21)(14,"h4",22),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addDomanda())}),e.TgZ(18,"i",24),e._uU(19,"add_circle_outline"),e.qZA()()(),e.TgZ(20,"div",25),e.NdJ("cdkDropListDropped",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.drop(a))}),e.YNc(21,fZ,25,19,"div",26),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.Oqu(e.lcZ(3,13,"bo.sondaggioXLingua.proprieta.testoIniziale")),e.xp6(2),e.Q6J("id","testoIniziale"+a)("text",l.modelEdit.sondaggiXLingua[a].testoIniziale),e.xp6(2),e.Oqu(e.lcZ(7,15,"bo.sondaggioXLingua.proprieta.testoFinalePunteggioBasso")),e.xp6(2),e.Q6J("id","testoFinalePunteggioBasso"+a)("text",l.modelEdit.sondaggiXLingua[a].testoFinalePunteggioBasso),e.xp6(2),e.Oqu(e.lcZ(11,17,"bo.sondaggioXLingua.proprieta.testoFinalePunteggioAlto")),e.xp6(2),e.Q6J("id","testoFinalePunteggioAlto"+a)("text",l.modelEdit.sondaggiXLingua[a].testoFinalePunteggioAlto),e.xp6(3),e.Oqu(e.lcZ(16,19,"sbm.sondaggi.domande")),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngForOf",l.modelEdit.domande)}}function bZ(i,o){if(1&i&&(e.ynx(0),e.YNc(1,CZ,22,21,"mat-tab",18),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function vZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}class Io extends f.H{set sondaggio(o){if(null!=o){this.modelEdit=new d.iyi,this.modelEdit.sondaggio=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.lv0;n.lingua=t,this.modelEdit.sondaggiXLingua.push(n)}o.oid>0?(this.setIsLoading(!0),this.apiService.getSondaggiXLingua(o.oid).subscribe(t=>{for(let n of t.data.sondaggi)if(null!=n.lingua){let a=this.modelEdit.sondaggiXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.sondaggiXLingua[a].testoIniziale=n.testoIniziale,this.modelEdit.sondaggiXLingua[a].testoFinalePunteggioBasso=n.testoFinalePunteggioBasso,this.modelEdit.sondaggiXLingua[a].testoFinalePunteggioAlto=n.testoFinalePunteggioAlto)}for(let n of t.data.domande){let a=new d.Fl5;a.domanda=n.domanda,a.domandeXLingua=[];for(let l of this.lingue){let r=new v.rD$;r.lingua=l,r.valoriArray=[],a.domandeXLingua.push(r)}for(let l of n.domandeXLingua)if(null!=l.lingua){let r=a.domandeXLingua.findIndex(p=>p.lingua.oid==l.lingua.oid);r>=0&&(a.domandeXLingua[r].titolo=l.titolo,a.domandeXLingua[r].valori=l.valori,(n.domanda.tipo==c.NJ.Checkbox||n.domanda.tipo==c.NJ.Radio)&&(l.valori?a.domandeXLingua[r].valoriArray=l.valori.split(";"):this.addOpzione(a.domandeXLingua[r].valoriArray)))}this.modelEdit.domande.push(a)}0==this.modelEdit.domande.length&&this.addDomanda(),this.setIsLoading(!1)})):0==this.modelEdit.domande.length&&this.addDomanda()}}constructor(o,t,n,a,l){super(),this.apiService=o,this.sessionService=t,this.localizationService=n,this.utility=a,this.containerService=l,this.modelEdit=new d.iyi,this.selectedIndex=0,this.enumTipoDomandaSondaggio=c.NJ,this.getTemplatesRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.Equal,c.hQ.Sondaggio.toString(),c.NM.Number),this.admin=!1,this.backEvent=new e.vpe}save(){for(let t of this.modelEdit.sondaggiXLingua)t.sondaggio=this.modelEdit.sondaggio;let o=0;for(let t of this.modelEdit.domande){t.domanda.sondaggio=this.modelEdit.sondaggio,t.domanda.ordinamento=o;for(let n of t.domandeXLingua)n.sondaggioDomanda=t.domanda,n.valori=n.valoriArray.join(";");o++}this.admin||(this.modelEdit.sondaggio.albergo=new v.Z$(this.sessionService.getOidAlbergo())),this.setIsLoading(!0),this.apiService.setSondaggio(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.sondaggi.sondaggioSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.sondaggi.eliminareSondaggio").then(t=>{null!=o&&(this.modelEdit.sondaggio=o),this.modelEdit.sondaggio.isDeleted=!0,this.setIsLoading(!0),this.apiService.setSondaggio(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}addDomanda(){let o=new d.Fl5;o.domanda=new v.y9B,o.domanda.isObbligatoria=!1,o.domanda.tipo=c.NJ.Text,o.domandeXLingua=[];for(let t of this.lingue){let n=new v.rD$;n.lingua=t,n.titolo=this.localizationService.getTranslationSync("sbm.sondaggi.domanda")+(this.modelEdit.domande.length+1).toString(),n.valoriArray=[],o.domandeXLingua.push(n)}this.modelEdit.domande.push(o),this.containerService.scrollToBottom()}deleteDomanda(o){this.showDialogConfirm("sbm.sondaggi.eliminareDomanda").then(t=>{this.modelEdit.domande.splice(o,1)},t=>{})}duplicaDomanda(o){let t=JSON.parse(JSON.stringify(o));t.domandeXLingua.forEach(n=>n.titolo+=" - Copia"),this.modelEdit.domande.push(t),this.containerService.scrollToBottom()}onDomandaBlur(o,t){o.titolo||(o.titolo=this.localizationService.getTranslationSync("sbm.sondaggi.domanda")+(t+1).toString())}addOpzione(o){o.push(this.localizationService.getTranslationSync("sbm.sondaggi.opzione")+(o.length+1).toString())}deleteOpzione(o,t){this.showDialogConfirm("sbm.sondaggi.eliminareOpzione").then(n=>{o.splice(t,1)},n=>{})}onOpzioneBlur(o,t){o[t]||(o[t]=this.localizationService.getTranslationSync("sbm.sondaggi.opzione")+(t+1).toString())}onTipoDomandaChange(o){if(o.domanda.tipo!=c.NJ.Checkbox&&o.domanda.tipo!=c.NJ.Radio)o.domandeXLingua.forEach(t=>t.valoriArray=[]);else for(let t of o.domandeXLingua)0==t.valoriArray.length&&this.addOpzione(t.valoriArray)}drop(o){(0,ht.bA)(this.modelEdit.domande,o.previousIndex,o.currentIndex)}getUrlSondaggioForm(){return window.location.origin+"/booking/sondaggio?uid="+this.modelEdit.sondaggio.uid}}function TZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",24)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.sondaggi.nessunSondaggio")))}function xZ(i,o){1&i&&e._UZ(0,"mat-header-cell")}function ZZ(i,o){1&i&&(e.TgZ(0,"mat-cell",25)(1,"button",26)(2,"i",27),e._uU(3,"edit"),e.qZA()()())}function AZ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sondaggio.proprieta.nome"),""))}function wZ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function zZ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sondaggio.proprieta.isAttivo"),""))}function MZ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",28),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)("disabled",!0)}}function qZ(i,o){1&i&&e._UZ(0,"mat-header-cell",29)}function PZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",30)(1,"button",31),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(28);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",32),e._uU(3,"delete"),e.qZA()()()}}function kZ(i,o){1&i&&e._UZ(0,"mat-header-row",33)}function SZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",34),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function yZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.createFromModel())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.sondaggi.nuovoDaModello")))}Io.\u0275fac=function(o){return new(o||Io)(e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o),e.Y36(C.t),e.Y36(te.J))},Io.\u0275cmp=e.Xpm({type:Io,selectors:[["app-sondaggi-edit"]],inputs:{admin:"admin",sondaggio:"sondaggio"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:56,vars:42,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["displayMember","codice",3,"dataLoader","value","placeholder","valueChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"row","mb-3"],["color","primary",3,"ngModel","ngModelChange"],[3,"placeholder","url",4,"ngIf"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"placeholder","url"],[3,"label",4,"ngIf"],[3,"label"],[3,"id","text","textChange"],[1,"mt-4","mb-2"],[1,"d-inline-block","mr-2","mb-0","align-middle"],["color","primary","mat-icon-button","",1,"add-button","align-middle",3,"disableRipple","click"],[1,"material-icons-round"],["cdkDropList","",1,"position-relative","drag-drop-list",3,"cdkDropListDropped"],["class","drag-drop-box","class","position-relative border rounded-lg mat-elevation-z1 p-3 mb-2","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"position-relative","border","rounded-lg","mat-elevation-z1","p-3","mb-2"],["class","drag-drop-placeholder mb-2",4,"cdkDragPlaceholder"],["cdkDragHandle","",1,"drag-handle"],[1,"material-icons","color-pink"],[1,"row","mt-2"],[1,"col-8"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",1,"sondaggi-textarea",3,"placeholder","ngModel","ngModelChange","blur"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[4,"ngIf"],[1,"text-right"],["color","primary","class","mr-2 align-middle","mat-icon-button","",3,"disableRipple","click",4,"ngIf"],["color","primary","mat-icon-button","",1,"mr-2","align-middle",3,"disableRipple","click"],["color","primary",1,"align-middle",3,"ngModel","ngModelChange"],[1,"drag-drop-placeholder","mb-2"],[3,"value"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-2"],["color","primary","mat-icon-button","",1,"add-button",3,"click"],[1,"material-icons"],[1,"align-middle","aggiungi-opzione",3,"click"],[3,"ngClass"],[1,"option-container","align-middle",3,"ngClass"],[1,"option-input"],["autocompleteOff","","type","text","matInput","",3,"ngModel","ngModelChange","blur"],["class","delete-opzione-button align-middle mt-2","color","primary","mat-icon-button","",3,"disableRipple","click",4,"ngIf"],["color","primary","disabled","",1,"d-inline-block","mt-1","mr-2"],["color","primary","disabled","",1,"d-inline-block","mt-1"],["color","primary","mat-icon-button","",1,"delete-opzione-button","align-middle","mt-2",3,"disableRipple","click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.sondaggio.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Inserire il nome del sondaggio "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"app-view-select",5),e.NdJ("valueChange",function(a){return t.modelEdit.sondaggio.codicePromozionale=a}),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",4),e._uU(12," Inserire un codice promozionale da inviare con il sondaggio tramite il tag [CodicePromozionale] "),e.qZA()(),e.TgZ(13,"div",0)(14,"div",1)(15,"mat-form-field",2)(16,"input",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.sondaggio.sogliaPunteggio=a}),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",4),e._uU(19,' Inserire una soglia di punteggio desiderata. Se la soglia viene superata verr\xe0 inserito nel tag [TestoFinalePunteggio] il testo "Testo finale punteggio alto" , altrimenti il test "Testo finale punteggio basso" '),e.qZA()(),e.TgZ(20,"div",0)(21,"div",1)(22,"app-view-select",7),e.NdJ("valueChange",function(a){return t.modelEdit.sondaggio.template=a}),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",4),e._uU(25," Selezionare il template da inviare all'hotel per notificare l'avvenuta compilazione del sondaggio da parte del cliente "),e.qZA()(),e.TgZ(26,"div",0)(27,"div",1)(28,"app-view-select",7),e.NdJ("valueChange",function(a){return t.modelEdit.sondaggio.templateCliente=a}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",4),e._uU(31," Selezionare il template da utilizzare per l'invio dell'email al cliente "),e.qZA()(),e.TgZ(32,"div",0)(33,"div",1)(34,"app-view-select",7),e.NdJ("valueChange",function(a){return t.modelEdit.sondaggio.ubicazioneIstat=a}),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",4),e._uU(37," Selezionare l'ubicazione istat associata al sondaggio "),e.qZA()(),e.TgZ(38,"div",8)(39,"div",1)(40,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.sondaggio.isAttivo=a}),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"div",4),e._uU(44," Indica che il sondaggio \xe8 attivo "),e.qZA()(),e.YNc(45,lZ,2,4,"app-url",10),e.TgZ(46,"mat-tab-group",11),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(47,bZ,2,1,"ng-container",12),e.qZA(),e.TgZ(48,"div",13)(49,"button",14),e.NdJ("click",function(){return t.save()}),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.YNc(52,vZ,3,3,"button",15),e.TgZ(53,"button",16),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(54),e.ALo(55,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,24,"bo.sondaggio.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.sondaggio.nome),e.xp6(6),e.Q6J("dataLoader",t.apiService.getCodiciPromozioneViewSelect())("value",t.modelEdit.sondaggio.codicePromozionale)("placeholder",e.lcZ(10,26,"bo.sondaggio.proprieta.codicePromozionale")),e.xp6(7),e.s9C("placeholder",e.lcZ(17,28,"bo.sondaggio.proprieta.sogliaPunteggio")),e.Q6J("ngModel",t.modelEdit.sondaggio.sogliaPunteggio),e.xp6(6),e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesRQ))("value",t.modelEdit.sondaggio.template)("placeholder",e.lcZ(23,30,"bo.sondaggio.proprieta.template")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesRQ))("value",t.modelEdit.sondaggio.templateCliente)("placeholder",e.lcZ(29,32,"bo.sondaggio.proprieta.templateCliente")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.modelEdit.sondaggio.ubicazioneIstat)("placeholder",e.lcZ(35,34,"bo.sondaggio.proprieta.ubicazioneIstat")),e.xp6(6),e.Q6J("ngModel",t.modelEdit.sondaggio.isAttivo),e.xp6(1),e.Oqu(e.lcZ(42,36,"bo.sondaggio.proprieta.isAttivo")),e.xp6(4),e.Q6J("ngIf",null!=t.modelEdit.sondaggio&&t.modelEdit.sondaggio.oid>0),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.sondaggiXLingua),e.xp6(3),e.Oqu(e.lcZ(51,38,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.modelEdit.sondaggio&&t.modelEdit.sondaggio.oid>0),e.xp6(2),e.Oqu(e.lcZ(55,40,"globals.annulla")))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,it.IC,M.v_,b.k0,re.CK,He.vy,g.x8,Mc.iZ,ee.SK,ee.R7,ht.Wj,ht.Zt,ht.Bh,ht.Hk,_.Fj,_.wV,_.JJ,_.On,Me.P,ne.d,Be,Te.A,z.X$],styles:[".sondaggi-textarea{padding:0!important;margin:0!important}.drag-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;cursor:move;width:24px;height:24px}.add-button[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px}.aggiungi-opzione[_ngcontent-%COMP%]{cursor:pointer;color:#e91e63!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.drag-drop-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-drop-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.drag-drop-placeholder[_ngcontent-%COMP%]{border-radius:4px;background:#ccc;border:dotted 3px #999;min-height:100px;transition:transform .25s cubic-bezier(0,0,.2,1)}.delete-opzione-button[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px}.option-container[_ngcontent-%COMP%]{display:inline-flex;width:calc(100% - 24px);align-items:center}.option-input[_ngcontent-%COMP%]{flex:1}"]});class pi extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.admin=!1,this.showTable=!0,this.displayedColumns=["edit","nome","isAttivo","delete"]}ngOnInit(){this.headerService.setTitle("sbm.sondaggi.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),(this.admin?this.apiService.getSondaggiAdmin():this.apiService.getSondaggi()).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.sondaggio=new v.npI(-1),this.sondaggio.isModelloPassepartout=this.admin,this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.sondaggio=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}createFromModel(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Do,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.download()})}}pi.\u0275fac=function(o){return new(o||pi)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},pi.\u0275cmp=e.Xpm({type:pi,selectors:[["app-sondaggi"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{admin:"admin"},features:[e.qOj],decls:29,vars:13,consts:[[1,"p-3"],[3,"hidden"],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","isAttivo"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["class","mt-3","mat-flat-button","","color","primary",3,"click",4,"ngIf"],[1,"edit-container",3,"hidden"],[3,"sondaggio","admin","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary",3,"checked","disabled"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,TZ,8,3,"div",2),e.TgZ(3,"div",1)(4,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(5,"i",4),e._uU(6,"add"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-table",6),e.ynx(9,7),e.YNc(10,xZ,1,0,"mat-header-cell",8),e.YNc(11,ZZ,4,0,"mat-cell",9),e.BQk(),e.ynx(12,10),e.YNc(13,AZ,3,3,"mat-header-cell",8),e.YNc(14,wZ,2,1,"mat-cell",11),e.BQk(),e.ynx(15,12),e.YNc(16,zZ,3,3,"mat-header-cell",8),e.YNc(17,MZ,2,2,"mat-cell",11),e.BQk(),e.ynx(18,13),e.YNc(19,qZ,1,0,"mat-header-cell",14),e.YNc(20,PZ,4,0,"mat-cell",15),e.BQk(),e.YNc(21,kZ,1,0,"mat-header-row",16),e.YNc(22,SZ,1,1,"mat-row",17),e.qZA()(),e.TgZ(23,"div",18)(24,"mat-paginator",19),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.YNc(25,yZ,3,3,"button",20),e.qZA(),e.TgZ(26,"div",21)(27,"app-sondaggi-edit",22,23),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",!t.admin&&null!=t.dataSource&&null!=t.dataSource.data),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("sondaggio",t.sondaggio)("admin",t.admin))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Io,z.X$]});class Qo{constructor(o){this.headerService=o}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.sondaggi.title")}ngOnDestroy(){this.headerService.clearTitle()}}Qo.\u0275fac=function(o){return new(o||Qo)(e.Y36(ie.r))},Qo.\u0275cmp=e.Xpm({type:Qo,selectors:[["app-sondaggi-admin"]],decls:1,vars:1,consts:[[3,"admin"]],template:function(o,t){1&o&&e._UZ(0,"app-sondaggi",0),2&o&&e.Q6J("admin",!0)},dependencies:[pi]});var Ke=Y(25918);function JZ(i,o){if(1&i&&(e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ngx-charts-area-chart",37),e.ALo(3,"translate"),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("gradient",!1)("results",t.chart)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!0)("legendTitle",e.lcZ(3,13,"sbm.pickup.legenda"))("showXAxisLabel",!1)("showYAxisLabel",!1)("yAxisTickFormatting",t.axisFormatY)("xAxisTickFormatting",t.axisFormatX)("rotateXAxisTicks",!0)("legendPosition",t.enumLegendPosition.Below)}}function EZ(i,o){1&i&&(e.TgZ(0,"div",38)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"globals.nessunRisultato")))}const NZ=function(i,o){return{selected:i,"not-selected":o}};function OZ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",39),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.preventDefault(),p.rq.tipoDato=r.key,e.KtG(p.download())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.WLB(4,NZ,n.rq.tipoDato==t.key,n.rq.tipoDato!=t.key)),e.xp6(1),e.Oqu(e.lcZ(2,2,t.value))}}function LZ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.data")))}function DZ(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"momentFormat"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,e.Dn7(3,3,t.datiAnnoPrecedente.data,n.tipoDato==n.enumTipoDato.Data?"DD/MM/YYYY":"MMMM YYYY",n.getLocale()))," ")}}function IZ(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"momentFormat"),e.qZA(),e.YNc(5,DZ,4,7,"div",42),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,e.Dn7(4,4,t.data,n.tipoDato==n.enumTipoDato.Data?"DD/MM/YYYY":"MMMM YYYY",n.getLocale()))," "),e.xp6(3),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function QZ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.numeroHotel")))}function UZ(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.numeroHotel," ")}}function YZ(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.qZA(),e.YNc(3,UZ,2,1,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.numeroHotel," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function RZ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.prenotazioniOTA")))}function FZ(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.prenotazioniOTA)," ")}}function HZ(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,FZ,3,3,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.prenotazioniOTA)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function KZ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.numeroPrenotazioniOTA")))}function GZ(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.numeroPrenotazioniOTA," ")}}function $Z(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.qZA(),e.YNc(3,GZ,2,1,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.numeroPrenotazioniOTA," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function BZ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.prenotazioniWEB")))}function VZ(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.prenotazioniWEB)," ")}}function XZ(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,VZ,3,3,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.prenotazioniWEB)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function jZ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.numeroPrenotazioniWEB")))}function WZ(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.numeroPrenotazioniWEB," ")}}function eA(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.qZA(),e.YNc(3,WZ,2,1,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.numeroPrenotazioniWEB," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function tA(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.prenotazioniCRM")))}function iA(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.prenotazioniCRM)," ")}}function oA(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,iA,3,3,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.prenotazioniCRM)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function nA(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.numeroPrenotazioniCRM")))}function aA(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.numeroPrenotazioniCRM," ")}}function lA(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.qZA(),e.YNc(3,aA,2,1,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.numeroPrenotazioniCRM," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function rA(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.numeroRichieste")))}function cA(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.numeroRichieste," ")}}function sA(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.qZA(),e.YNc(3,cA,2,1,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.numeroRichieste," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function pA(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.preventiviInviati")))}function dA(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.preventiviInviati)," ")}}function mA(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,dA,3,3,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.preventiviInviati)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function _A(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.numeroPreventiviInviati")))}function uA(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.numeroPreventiviInviati," ")}}function gA(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.qZA(),e.YNc(3,uA,2,1,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.numeroPreventiviInviati," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function hA(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.prenotazioniCancellate")))}function fA(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.prenotazioniCancellate)," ")}}function CA(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,fA,3,3,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.prenotazioniCancellate)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function bA(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.storico.proprieta.numeroPrenotazioniCancellate")))}function vA(i,o){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.numeroPrenotazioniCancellate," ")}}function TA(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",41),e._uU(2),e.qZA(),e.YNc(3,vA,2,1,"div",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.numeroPrenotazioniCancellate," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function xA(i,o){1&i&&e._UZ(0,"mat-header-row",44)}function ZA(i,o){1&i&&e._UZ(0,"mat-row")}class Uo extends f.H{constructor(o,t,n){super(),this.apiService=o,this.translationService=t,this.headerService=n,this.rq=new d.Y4P,this.chart=[],this.displayedColumns=["data","numeroHotel","prenotazioniOTA","numeroPrenotazioniOTA","prenotazioniWEB","numeroPrenotazioniWEB","prenotazioniCRM","numeroPrenotazioniCRM","numeroRichieste","preventiviInviati","numeroPreventiviInviati","prenotazioniCancellate","numeroPrenotazioniCancellate"],this.enumLegendPosition=Ke.tV,this.enumTipoDato=c._r}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.storico.title"),this.rq.dal=this.getDate(this.oneMonthBeforeToday),this.rq.al=this.getDate(this.today),this.rq.tipoDato=c._r.Data,this.tipoDato=c._r.Data,this.download()}download(){this.setIsLoading(!0),this.apiService.getStorico(this.rq).subscribe(o=>{this.chart=this.checkResultsAdvanced(o.data.grafico.results),this.dataSource=new s.r4(o.data.dati),this.dataSource.paginator=this.paginator,this.tipoDato=this.rq.tipoDato,this.setIsLoading(!1)})}checkResultsAdvanced(o){let t=!1;if(null!=o)for(let n of o)if(null!=n.series&&(n.name=this.translationService.getTranslationSync(n.name),1==n.series.length&&(n.series.unshift(new d.yIB("<",0)),n.series.push(new d.yIB(">",0))),!t))for(let a of n.series)if(a.value>0){t=!0;break}return t||(o=[]),o}onDalChange(){setTimeout(()=>{this.rq.dal=this.getDate(this.rq.dal),(null==this.rq.al||u(this.rq.dal)>u(this.rq.al))&&(this.rq.al=this.rq.dal),this.download()},200)}onAlChange(){setTimeout(()=>{this.rq.al=this.getDate(this.rq.al),(null==this.rq.dal||u(this.rq.dal)>u(this.rq.al))&&(this.rq.dal=this.rq.al),this.download()},200)}axisFormatY(o){return o+" \u20ac"}axisFormatX(o){return"<"==o||">"==o?"":o}}function AA(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Uo.\u0275fac=function(o){return new(o||Uo)(e.Y36(A.s),e.Y36(Oe.o),e.Y36(ie.r))},Uo.\u0275cmp=e.Xpm({type:Uo,selectors:[["app-storico-admin"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:68,vars:25,consts:[[1,"container-fluid","p-3"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","dateChange","ngModelChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["class","w-100 chart-outer-container pt-3 pr-3 pl-3 border mat-elevation-z1 mb-3 bg-white",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mb-2"],["href","#","class","mr-2 rounded-lg p-1 d-inline-block",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mat-table-container"],[1,"mat-table","storico-table",3,"dataSource"],["matColumnDef","data"],["class","justify-content-center",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","numeroHotel"],["matColumnDef","prenotazioniOTA"],["matColumnDef","numeroPrenotazioniOTA"],["matColumnDef","prenotazioniWEB"],["matColumnDef","numeroPrenotazioniWEB"],["matColumnDef","prenotazioniCRM"],["matColumnDef","numeroPrenotazioniCRM"],["matColumnDef","numeroRichieste"],["matColumnDef","preventiviInviati"],["matColumnDef","numeroPreventiviInviati"],["matColumnDef","prenotazioniCancellate"],["matColumnDef","numeroPrenotazioniCancellate"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"w-100","chart-outer-container","pt-3","pr-3","pl-3","border","mat-elevation-z1","mb-3","bg-white"],[1,"w-100","storico-chart-container"],[3,"gradient","results","scheme","xAxis","yAxis","legend","legendTitle","showXAxisLabel","showYAxisLabel","yAxisTickFormatting","xAxisTickFormatting","rotateXAxisTicks","legendPosition"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["href","#",1,"mr-2","rounded-lg","p-1","d-inline-block",3,"ngClass","click"],[1,"justify-content-center"],[1,"w-100","text-center"],["class","annoPrecedente",4,"ngIf"],[1,"annoPrecedente"],[1,"mat-table-header"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"input",5),e.NdJ("dateChange",function(){return t.onDalChange()})("ngModelChange",function(a){return t.rq.dal=a}),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-datepicker-toggle",6)(8,"mat-datepicker",null,7),e.qZA()(),e.TgZ(10,"div",3)(11,"mat-form-field",4)(12,"input",5),e.NdJ("dateChange",function(){return t.onAlChange()})("ngModelChange",function(a){return t.rq.al=a}),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"mat-datepicker-toggle",6)(15,"mat-datepicker",null,8),e.qZA()()()(),e.YNc(17,JZ,4,15,"div",9),e.YNc(18,EZ,4,3,"div",10),e.TgZ(19,"div",11)(20,"div",12),e.YNc(21,OZ,3,7,"a",13),e.ALo(22,"selectEnum"),e.qZA(),e.TgZ(23,"div",14)(24,"mat-table",15),e.ynx(25,16),e.YNc(26,LZ,3,3,"mat-header-cell",17),e.YNc(27,IZ,6,8,"mat-cell",18),e.BQk(),e.ynx(28,19),e.YNc(29,QZ,3,3,"mat-header-cell",17),e.YNc(30,YZ,4,2,"mat-cell",18),e.BQk(),e.ynx(31,20),e.YNc(32,RZ,3,3,"mat-header-cell",17),e.YNc(33,HZ,5,4,"mat-cell",18),e.BQk(),e.ynx(34,21),e.YNc(35,KZ,3,3,"mat-header-cell",17),e.YNc(36,$Z,4,2,"mat-cell",18),e.BQk(),e.ynx(37,22),e.YNc(38,BZ,3,3,"mat-header-cell",17),e.YNc(39,XZ,5,4,"mat-cell",18),e.BQk(),e.ynx(40,23),e.YNc(41,jZ,3,3,"mat-header-cell",17),e.YNc(42,eA,4,2,"mat-cell",18),e.BQk(),e.ynx(43,24),e.YNc(44,tA,3,3,"mat-header-cell",17),e.YNc(45,oA,5,4,"mat-cell",18),e.BQk(),e.ynx(46,25),e.YNc(47,nA,3,3,"mat-header-cell",17),e.YNc(48,lA,4,2,"mat-cell",18),e.BQk(),e.ynx(49,26),e.YNc(50,rA,3,3,"mat-header-cell",17),e.YNc(51,sA,4,2,"mat-cell",18),e.BQk(),e.ynx(52,27),e.YNc(53,pA,3,3,"mat-header-cell",17),e.YNc(54,mA,5,4,"mat-cell",18),e.BQk(),e.ynx(55,28),e.YNc(56,_A,3,3,"mat-header-cell",17),e.YNc(57,gA,4,2,"mat-cell",18),e.BQk(),e.ynx(58,29),e.YNc(59,hA,3,3,"mat-header-cell",17),e.YNc(60,CA,5,4,"mat-cell",18),e.BQk(),e.ynx(61,30),e.YNc(62,bA,3,3,"mat-header-cell",17),e.YNc(63,TA,4,2,"mat-cell",18),e.BQk(),e.YNc(64,xA,1,0,"mat-header-row",31),e.YNc(65,ZA,1,0,"mat-row",32),e.qZA()(),e.TgZ(66,"div",33),e._UZ(67,"mat-paginator",34),e.qZA()()()),2&o){const n=e.MAs(9),a=e.MAs(16);e.xp6(5),e.s9C("placeholder",e.lcZ(6,18,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(13,20,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(3),e.Q6J("ngIf",null!=t.chart&&t.chart.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("ngForOf",e.xi3(22,22,t.enumTipoDato,"tipoDatoStorico")),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(40),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}},dependencies:[m.mk,m.sg,m.O5,w.X,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,Ke.rt,m.rS,Te.A,ke.f,K.H,z.X$],styles:[".storico-chart-container[_ngcontent-%COMP%]{height:250px}.chart-outer-container[_ngcontent-%COMP%]{padding-bottom:95px;border-radius:7px}  .storico-chart-container .chart-legend{margin-top:1rem!important}.annoPrecedente[_ngcontent-%COMP%]{color:#999;font-size:12px;width:100%;text-align:center}  .storico-table .mat-cell{flex-wrap:wrap!important}.not-selected[_ngcontent-%COMP%]{border:1px solid #aaaaaa;background-color:#fff}.selected[_ngcontent-%COMP%]{border:1px solid #007bff;background-color:#d8ecf3;font-weight:600}"]});class Yo extends f.H{constructor(o){super(),this.apiService=o,this.backEvent=new e.vpe}save(){this.setIsLoading(!0),this.apiService.setTagTemplate(this.tagTemplate).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.amministrazione.tags-templates.tagTemplateSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.amministrazione.tags-templates.eliminareTagTemplate").then(t=>{null!=o&&(this.tagTemplate=o),this.tagTemplate.isDeleted=!0,this.setIsLoading(!0),this.apiService.setTagTemplate(this.tagTemplate).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function wA(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",10),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",29)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.amministrazione.tags-templates.nessunTagTemplate")))}function zA(i,o){1&i&&e._UZ(0,"mat-header-cell")}function MA(i,o){1&i&&(e.TgZ(0,"mat-cell",30)(1,"button",31)(2,"i",32),e._uU(3,"edit"),e.qZA()()())}function qA(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.templateTags.proprieta.nome")))}function PA(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function kA(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.templateTags.proprieta.tipoTemplates")))}function SA(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.tipoTemplates)}}function yA(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.templateTags.proprieta.categoria")))}function JA(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.categoria)}}function EA(i,o){1&i&&e._UZ(0,"mat-header-cell")}function NA(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",33)(1,"button",34),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(37);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",35),e._uU(3,"delete"),e.qZA()()()}}function OA(i,o){1&i&&e._UZ(0,"mat-header-row",36)}function LA(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",37),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Yo.\u0275fac=function(o){return new(o||Yo)(e.Y36(A.s))},Yo.\u0275cmp=e.Xpm({type:Yo,selectors:[["app-tags-templates-edit"]],inputs:{tagTemplate:"tagTemplate"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:21,vars:19,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.tagTemplate.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.tagTemplate.tipoTemplates=a}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",1)(10,"mat-form-field",2)(11,"input",3),e.NdJ("ngModelChange",function(a){return t.tagTemplate.categoria=a}),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"div",4)(14,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,AA,3,3,"button",6),e.TgZ(18,"button",7),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(19),e.ALo(20,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,9,"bo.templateTags.proprieta.nome")),e.Q6J("ngModel",t.tagTemplate.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(8,11,"bo.templateTags.proprieta.tipoTemplates")),e.Q6J("ngModel",t.tagTemplate.tipoTemplates),e.xp6(4),e.s9C("placeholder",e.lcZ(12,13,"bo.templateTags.proprieta.categoria")),e.Q6J("ngModel",t.tagTemplate.categoria),e.xp6(4),e.Oqu(e.lcZ(16,15,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.tagTemplate&&t.tagTemplate.oid>0),e.xp6(2),e.Oqu(e.lcZ(20,17,"globals.annulla")))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,_.Fj,_.JJ,_.On,z.X$]});class Ro extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.tagTemplate=new v.hXF,this.showTable=!0,this.displayedColumns=["edit","nome","tipoTemplates","categoria","delete"]}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.tags-templates.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getTagsTemplatesFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}add(){this.edit(new v.hXF(-1))}edit(o){this.tagTemplate=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle()}}function DA(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(7);e.Q6J("value",t)("hidden",!(!n.value||t.template.nome&&t.template.nome.toLowerCase().includes(n.value.toLowerCase()))),e.xp6(1),e.hij(" ",t.template.nome," ")}}function IA(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",14)(1,"mat-form-field",15)(2,"input",16),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.titolo=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",17),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.testo=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index;e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.templateXLingua.proprieta.titolo")),e.Q6J("ngModel",n.titolo),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.templateXLingua.proprieta.testo")," "),e.xp6(2),e.Q6J("id","testo-template"+a)("text",n.testo)}}function QA(i,o){if(1&i&&(e.ynx(0),e.YNc(1,IA,7,10,"mat-tab",13),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function UA(i,o){if(1&i&&(e.TgZ(0,"mat-tab-group",11),e.YNc(1,QA,2,1,"ng-container",12),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.template.templatesXLingua)}}Ro.\u0275fac=function(o){return new(o||Ro)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Ro.\u0275cmp=e.Xpm({type:Ro,selectors:[["app-tags-templates"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:38,vars:15,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["nomeSearch",""],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","tipoTemplates"],["matColumnDef","categoria"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"tagTemplate","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,wA,8,3,"div",8),e.TgZ(10,"div",1)(11,"button",9),e.NdJ("click",function(){return t.add()}),e.TgZ(12,"i",10),e._uU(13,"add"),e.qZA()(),e.TgZ(14,"div",11)(15,"mat-table",12),e.ynx(16,13),e.YNc(17,zA,1,0,"mat-header-cell",14),e.YNc(18,MA,4,0,"mat-cell",15),e.BQk(),e.ynx(19,16),e.YNc(20,qA,3,3,"mat-header-cell",14),e.YNc(21,PA,2,1,"mat-cell",17),e.BQk(),e.ynx(22,18),e.YNc(23,kA,3,3,"mat-header-cell",14),e.YNc(24,SA,2,1,"mat-cell",17),e.BQk(),e.ynx(25,19),e.YNc(26,yA,3,3,"mat-header-cell",14),e.YNc(27,JA,2,1,"mat-cell",17),e.BQk(),e.ynx(28,20),e.YNc(29,EA,1,0,"mat-header-cell",14),e.YNc(30,NA,4,0,"mat-cell",21),e.BQk(),e.YNc(31,OA,1,0,"mat-header-row",22),e.YNc(32,LA,1,1,"mat-row",23),e.qZA()(),e.TgZ(33,"div",24)(34,"mat-paginator",25),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(35,"div",26)(36,"app-tags-templates-edit",27,28),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,13,"bo.templateTags.proprieta.nome")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("tagTemplate",t.tagTemplate))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Yo,z.X$]});class Fo extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.templates=[],this.selectedTemplate=new d.TBv,this.template=new d.dKo,this.isUsaEditor=!1}ngOnInit(){this.setIsLoading(!0),this.apiService.getTemplatesAdminFilter(new d.k$g(new d.aQR("nome"))).subscribe(o=>{this.templates=o.data.templates,this.templates.length>0&&(this.selectedTemplate=this.templates[0],this.onTemplateChange()),this.setIsLoading(!1)})}onTemplateChange(){if(this.template=new d.dKo,this.template.template=this.selectedTemplate.template,this.lingue.length>0)for(let o of this.lingue){let t=new v.L92;t.lingua=o;let n=this.selectedTemplate.templatesXLingua.find(a=>null!=a.lingua&&a.lingua.oid==o.oid);null!=n?(t.titolo=n.titolo,t.testo=n.testo):(t.titolo="",t.testo=""),this.template.templatesXLingua.push(t)}}save(){this.setIsLoading(!0),this.template.template.oid=-1,this.template.template.nome+=" - Copia",this.template.template.isModelloPassepartout=!1,this.template.template.isUsaEditor=this.isUsaEditor,this.template.template.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.apiService.setTemplate(this.template).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.templates.templateSalvato").then(()=>{this.dialogRef.close(!0)})})}}function YA(i,o){if(1&i&&(e.TgZ(0,"mat-option",12),e.ALo(1,"translate"),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(9);e.Q6J("value",t.key)("hidden",!!n.value&&!e.lcZ(1,3,t.value).toLowerCase().includes(n.value.toLowerCase())),e.xp6(2),e.hij(" ",e.lcZ(3,5,t.value)," ")}}Fo.\u0275fac=function(o){return new(o||Fo)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},Fo.\u0275cmp=e.Xpm({type:Fo,selectors:[["app-templates-add-from-model"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:17,vars:15,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["required","",3,"ngModel","placeholder","ngModelChange","selectionChange"],["selectSearch",""],[3,"value","hidden",4,"ngFor","ngForOf"],["color","primary",3,"ngModel","ngModelChange"],["class","dialog-tab-group",4,"ngIf"],[1,"mt-4","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value","hidden"],[1,"dialog-tab-group"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"mat-select",3),e.NdJ("ngModelChange",function(a){return t.selectedTemplate=a})("selectionChange",function(){return t.onTemplateChange()}),e.ALo(5,"translate"),e._UZ(6,"app-select-search",null,4),e.YNc(8,DA,2,3,"mat-option",5),e.qZA()(),e.TgZ(9,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.isUsaEditor=a}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,UA,2,1,"mat-tab-group",7),e.TgZ(13,"div",8)(14,"button",9),e.NdJ("click",function(){return t.save()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngModel",t.selectedTemplate)("placeholder",e.lcZ(5,9,"sbm.tabelle.templates.template")),e.xp6(4),e.Q6J("ngForOf",t.templates),e.xp6(1),e.Q6J("ngModel",t.isUsaEditor),e.xp6(1),e.Oqu(e.lcZ(11,11,"bo.template.proprieta.isUsaEditor")),e.xp6(2),e.Q6J("ngIf",null!=t.selectedTemplate&&null!=t.selectedTemplate.template&&null!=t.selectedTemplate.template.oid),e.xp6(2),e.Q6J("disabled",null==t.selectedTemplate||null==t.selectedTemplate.template||null==t.selectedTemplate.template.oid||t.selectedTemplate.template.oid<=0),e.xp6(1),e.Oqu(e.lcZ(16,13,"globals.salva")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ee.SK,ee.R7,F.aO,_.Fj,_.JJ,_.Q7,_.On,Me.P,R,z.X$]});const RA=function(i,o){return[i,"tipoTemplate",!0,null,null,o]};class Ho extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.template=new d.TBv,this.enumTipoTemplate=c.hQ,this.enumSortingType=c.nI}ngOnInit(){this.template.template.isModelloPassepartout=this.admin,this.template.template.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.template.template.isUsaEditor=!1}save(){this.setIsLoading(!0),this.apiService.setTemplate(this.template).subscribe(o=>{this.template.template=o.data.obj;let t=new d.rLt;t.tipoTemplate=this.template.template.tipoTemplate,this.apiService.getTagsTemplate(t).subscribe(n=>{this.template.tags=n.data,this.setIsLoading(!1),this.dialogRef.close(this.template)})})}}Ho.\u0275fac=function(o){return new(o||Ho)(e.Y36(A.s),e.Y36(j.m))},Ho.\u0275cmp=e.Xpm({type:Ho,selectors:[["app-templates-add"]],inputs:{admin:"admin",dialogRef:"dialogRef"},features:[e.qOj],decls:23,vars:28,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],[1,"w-100"],["required","",3,"ngModel","placeholder","ngModelChange"],["selectSearch",""],[3,"value","hidden",4,"ngFor","ngForOf"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value","hidden"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.template.template.tipoTemplate=a}),e.ALo(7,"translate"),e._UZ(8,"app-select-search",null,6),e.YNc(10,YA,4,7,"mat-option",7),e.ALo(11,"selectEnum"),e.qZA()()(),e.TgZ(12,"div",3)(13,"mat-form-field",4)(14,"input",8),e.NdJ("ngModelChange",function(a){return t.template.template.nome=a}),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.template.template.isUsaEditor=a}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",10)(20,"button",11),e.NdJ("click",function(){return t.save()}),e._uU(21),e.ALo(22,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.s9C("placeholder",e.lcZ(7,10,"bo.template.proprieta.tipoTemplate")),e.Q6J("ngModel",t.template.template.tipoTemplate),e.xp6(4),e.Q6J("ngForOf",e.G7q(11,12,e.WLB(25,RA,t.enumTipoTemplate,t.enumSortingType.Asc))),e.xp6(4),e.s9C("placeholder",e.lcZ(15,19,"bo.template.proprieta.nome")),e.Q6J("ngModel",t.template.template.nome),e.xp6(2),e.Q6J("ngModel",t.template.template.isUsaEditor),e.xp6(1),e.Oqu(e.lcZ(18,21,"bo.template.proprieta.isUsaEditor")),e.xp6(3),e.Q6J("disabled",!t.template.template.nome||null==t.template.template.tipoTemplate),e.xp6(1),e.Oqu(e.lcZ(22,23,"globals.salva")))},dependencies:[m.sg,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,_.Fj,_.JJ,_.Q7,_.On,R,Te.A,z.X$]});class Ko{constructor(){}}Ko.\u0275fac=function(o){return new(o||Ko)},Ko.\u0275cmp=e.Xpm({type:Ko,selectors:[["app-templates-help-modal"]],decls:89,vars:1,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"p-3"],[1,"row","mb-3"],[1,"col-3","font-weight-bold"],[1,"col-9","div-help"],[1,"row"],[1,"row","mt-3"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._uU(6," Prenotazione "),e.qZA(),e.TgZ(7,"div",5),e._uU(8," Prenotazione dal Web Booking selezionado una modalit\xe0 di pagamento SENZA conferma automatica"),e._UZ(9,"br"),e._uU(10," Conferma di un preventivo CRM da parte del cliente selezionado una modalit\xe0 di pagamento SENZA conferma automatica (se non esiste un template Preventivo Prenotato)"),e._UZ(11,"br"),e.qZA()(),e.TgZ(12,"div",3)(13,"div",4),e._uU(14," Prenotazione Confermata "),e.qZA(),e.TgZ(15,"div",5),e._uU(16," Prenotazione dal Web Booking selezionando una modalit\xe0 di pagamento CON conferma automatica"),e._UZ(17,"br"),e._uU(18," Conferma di un preventivo CRM da parte del cliente selezionado una modalit\xe0 di pagamento CON conferma automatica (se non esiste un template Preventivo Prenotato) "),e._UZ(19,"br"),e.qZA()(),e.TgZ(20,"div",6)(21,"div",4),e._uU(22," Prenotazione Rifiutata/Cancellata "),e.qZA(),e.TgZ(23,"div",5),e._uU(24," Template che viene inviato dal cliente per richiesta di cancellazione della prenotazione dal Self Check-in "),e.qZA()(),e.TgZ(25,"div",6)(26,"div",4),e._uU(27," Contenuti Self Chech In "),e.qZA(),e.TgZ(28,"div",5),e._uU(29," Contenuti grafici e testuali che verranno visualizzati nella pagina del self-checkin "),e.qZA()(),e._UZ(30,"hr"),e.TgZ(31,"div",7)(32,"div",4),e._uU(33," Prenotazione eCommmerce "),e.qZA(),e.TgZ(34,"div",5),e._uU(35," Template che viene inviato con una prenotazione sul portale di tipo eCommerce "),e.qZA()(),e._UZ(36,"hr"),e.TgZ(37,"div",7)(38,"div",4),e._uU(39," Richiesta Disponibilit\xe0 Hotel "),e.qZA(),e.TgZ(40,"div",5),e._uU(41," Template che viene inviato all'hotel in caso di richiesta disponibilit\xe0 "),e.qZA()(),e.TgZ(42,"div",6)(43,"div",4),e._uU(44," Richiesta Disponibilit\xe0 Cliente "),e.qZA(),e.TgZ(45,"div",5),e._uU(46," Template che viene inviato al cliente in caso di richiesta disponibilit\xe0 "),e.qZA()(),e.TgZ(47,"div",6)(48,"div",4),e._uU(49," Richiesta Rifiutata "),e.qZA(),e.TgZ(50,"div",5),e._uU(51," Template che viene inviato al cliente in caso di richiesta disponibilit\xe0 rifiutata "),e.qZA()(),e._UZ(52,"hr"),e.TgZ(53,"div",7)(54,"div",4),e._uU(55," Messaggio cliente "),e.qZA(),e.TgZ(56,"div",5),e._uU(57," Template che viene inviato al cliente/hotel in caso di messaggi tramite il MyPage o Self Check-In "),e.qZA()(),e._UZ(58,"hr"),e.TgZ(59,"div",7)(60,"div",4),e._uU(61," Preventivo "),e.qZA(),e.TgZ(62,"div",5),e._uU(63," Template che vengono utilizzati per l'invio manuale e automatico di preventivi "),e.qZA()(),e.TgZ(64,"div",6)(65,"div",4),e._uU(66," Preventivo Accettato "),e.qZA(),e.TgZ(67,"div",5),e._uU(68," Template che vengono utilizzati quando il cliente Accetta il preventivo tramite la MyPage "),e.qZA()(),e.TgZ(69,"div",6)(70,"div",4),e._uU(71," Preventivo Richiesta Caparra "),e.qZA(),e.TgZ(72,"div",5),e._uU(73," Template che vengono utilizzati per l'invio manuale della richiesta Caparra da parte dell'hotel "),e.qZA()(),e.TgZ(74,"div",6)(75,"div",4),e._uU(76," Preventivo Prenotato "),e.qZA(),e.TgZ(77,"div",5),e._uU(78," Template che vengono utilizzati quando il cliente/Hotel Prenota un preventivo "),e.qZA()(),e.TgZ(79,"div",6)(80,"div",4),e._uU(81," Preventivo Rifiutato "),e.qZA(),e.TgZ(82,"div",5),e._uU(83," Template che vengono utilizzati quando l'Hotel Rifuta un preventivo "),e.qZA()(),e.TgZ(84,"div",6)(85,"div",4),e._uU(86," Contenuti MyPage "),e.qZA(),e.TgZ(87,"div",5),e._uU(88," Contenuti grafici e testuali che verranno visualizzati nel MyPage quando il cliente riceve il preventivo "),e.qZA()()()),2&o&&e.Q6J("disableRipple",!0)},dependencies:[h.eB,F.aO]});class st{constructor(){this.valueChange=new e.vpe,this.checkValues=[!1,!0,null],this.index=0,this.indeterminate=!1}checker(){this.value=this.checkValues[++this.index%this.checkValues.length],this.indeterminate=null==this.value,this.valueChange.emit(this.value)}}st.\u0275fac=function(o){return new(o||st)},st.\u0275cmp=e.Xpm({type:st,selectors:[["app-indeterminate-checkbox"]],inputs:{label:"label",value:"value"},outputs:{valueChange:"valueChange"},decls:3,vars:5,consts:[["color","primary",3,"ngModel","indeterminate","ngModelChange","indeterminateChange","click"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-checkbox",0),e.NdJ("ngModelChange",function(a){return t.value=a})("indeterminateChange",function(a){return t.indeterminate=a})("click",function(a){return a.preventDefault(),t.checker()}),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.Q6J("ngModel",t.value)("indeterminate",t.indeterminate),e.xp6(1),e.hij(" ",e.lcZ(2,3,t.label),"\n"))},dependencies:[_.JJ,_.On,V.FC,z.X$]});var di=Y(20373);class Go extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.onBack=new e.vpe,this.allegato=new v.mLX,this.maximumFileSize=2e5}fileSelected(o){let t=null==o.files||0==o.files.length?null:o.files[0];if(null!=t&&"application/pdf"==t.type)if(t.size<=this.maximumFileSize){const n=new FileReader;n.readAsDataURL(t),n.onload=()=>{let a=n.result.toString();if(a){let l=a.slice(a.indexOf(",")+1);di.fromBuffer(Uint8Array.from(atob(l),r=>r.charCodeAt(0)),(r,p)=>{r||null==p||"application/pdf"!=p.mime?(o.value="",this.showError("globals.messages.fileNonValido")):(this.allegato.base64=l,this.allegato.nome=t.name)})}else o.value="",this.showError("globals.messages.fileNonValido")}}else o.value="",this.showError("globals.messages.fileTroppoGrande",{size:Math.floor(this.maximumFileSize/1e3)});else o.value="",this.showError("globals.messages.fileNonValido")}save(){this.setIsLoading(!0),this.allegato.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.apiService.setAllegato(this.allegato).subscribe(o=>{this.setIsLoading(!1),this.onBack.emit(o.data.obj)})}}function FA(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.allegato.proprieta.nome")))}function HA(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function KA(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.allegato.proprieta.urlAllegato")))}function GA(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.utility.openUrlInNewTab(a.urlAllegato))}),e.TgZ(1,"i",4),e._uU(2,"open_in_new"),e.qZA()()}}function $A(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"span",20),e._uU(2),e.qZA(),e.YNc(3,GA,3,0,"button",21),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.urlAllegato),e.xp6(1),e.Q6J("ngIf",!!t.urlAllegato)}}function BA(i,o){1&i&&e._UZ(0,"mat-header-cell")}function VA(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",23)(1,"button",24),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.delete(l))}),e.TgZ(2,"i",25),e._uU(3,"delete"),e.qZA()()()}}function XA(i,o){1&i&&e._UZ(0,"mat-header-row",26)}function jA(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",27),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function WA(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",8)(2,"mat-table",9),e.ynx(3,10),e.YNc(4,FA,3,3,"mat-header-cell",11),e.YNc(5,HA,2,1,"mat-cell",12),e.BQk(),e.ynx(6,13),e.YNc(7,KA,3,3,"mat-header-cell",11),e.YNc(8,$A,4,2,"mat-cell",12),e.BQk(),e.ynx(9,14),e.YNc(10,BA,1,0,"mat-header-cell",11),e.YNc(11,VA,4,0,"mat-cell",15),e.BQk(),e.YNc(12,XA,1,0,"mat-header-row",16),e.YNc(13,jA,1,1,"mat-row",17),e.qZA()(),e.TgZ(14,"div",18),e._UZ(15,"mat-paginator",19),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.allegati),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}}function e0(i,o){1&i&&(e.TgZ(0,"div",28)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.templates.nessunAllegato")))}function t0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-allegato-add",29),e.NdJ("onBack",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onBack(a))}),e.qZA()}}Go.\u0275fac=function(o){return new(o||Go)(e.Y36(A.s),e.Y36(j.m))},Go.\u0275cmp=e.Xpm({type:Go,selectors:[["app-allegato-add"]],outputs:{onBack:"onBack"},features:[e.qOj],decls:12,vars:11,consts:[[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","file","accept","application/pdf",1,"w-100",3,"change"],["fileInput",""],[1,"mt-4","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",3,"click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"mat-form-field",0)(1,"input",1),e.NdJ("ngModelChange",function(l){return t.allegato.nome=l}),e.ALo(2,"translate"),e.qZA()(),e.TgZ(3,"input",2,3),e.NdJ("change",function(){e.CHM(n);const l=e.MAs(4);return e.KtG(t.fileSelected(l))}),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return t.onBack.emit()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("placeholder",e.lcZ(2,5,"bo.allegato.proprieta.nome"))("ngModel",t.allegato.nome),e.xp6(5),e.Q6J("disabled",!t.allegato.nome||!t.allegato.base64),e.xp6(1),e.Oqu(e.lcZ(8,7,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(11,9,"globals.annulla")))},dependencies:[w.X,h.eB,M.v_,b.k0,_.Fj,_.JJ,_.Q7,_.On,z.X$]});class $o extends f.H{constructor(o,t){super(),this.utility=o,this.apiService=t,this.displayedColumns=["nome","urlAllegato","delete"],this.showAddForm=!1,this.output=new d.Hzg}ngAfterViewInit(){this.output.allegati=this.allegati,this.dataSource=new s.r4(this.allegati),this.dataSource.paginator=this.paginator}delete(o){this.showDialogConfirm("sbm.tabelle.templates.eliminareAllegato").then(t=>{this.setIsLoading(!0),this.allegati[o].isDeleted=!0,this.apiService.setAllegato(this.allegati[o]).subscribe(()=>{this.output.allegatiEliminati.push(this.allegati[o].oid),this.allegati.splice(o,1),this.allegati=this.allegati.slice(),this.output.allegati=this.allegati,this.dataSource=new s.r4(this.allegati),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})},t=>{})}onBack(o){this.showAddForm=!1,null!=o&&(this.output.allegatiAggiunti.push(o.oid),this.allegati.push(o),this.allegati=this.allegati.slice(),this.output.allegati=this.allegati,this.dataSource=new s.r4(this.allegati),this.dataSource.paginator=this.paginator)}}function i0(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e.ALo(1,"translate"),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(13);e.Q6J("value",t.key)("hidden",!!n.value&&!e.lcZ(1,3,t.value).toLowerCase().includes(n.value.toLowerCase())),e.xp6(2),e.hij(" ",e.lcZ(3,5,t.value)," ")}}function o0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",0)(3,"div",33)(4,"app-color-picker",34),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.template.coloreSfondoHex=a)}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",35)(7,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.rq.template.coloreSfondoHex=null)}),e.TgZ(8,"i",37),e._uU(9," settings_backup_restore "),e.qZA()()()()(),e.TgZ(10,"div",4),e._uU(11," Inserire il colore di sfondo del contenuto "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("value",t.rq.template.coloreSfondoHex)("placeholder",e.lcZ(5,2,"bo.template.proprieta.coloreSfondo"))}}function n0(i,o){if(1&i&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.nome)}}function a0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editAllegati())}),e.TgZ(1,"i",37),e._uU(2,"add"),e.qZA()()}}function l0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,l=e.oxw();return e.KtG(l.copiaAltreLingue(a))}),e.ALo(1,"translate"),e.TgZ(2,"i",53),e._uU(3,"content_copy"),e.qZA()()}2&i&&e.Q6J("disableRipple",!0)("matTooltip",e.lcZ(1,2,"globals.copiaAltreLingue"))}function r0(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.YNc(2,l0,4,4,"button",51)),2&i){const t=e.oxw(2),n=t.$implicit,a=t.index,l=e.oxw();e.xp6(1),e.Oqu(n.lingua.nome),e.xp6(1),e.Q6J("ngIf",l.selectedIndex==a)}}function c0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw();return e.KtG(l.openEditor(a))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.templates.editorGrafico")))}function s0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw();return e.KtG(l.openEditor(a))}),e.qZA()}}function p0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab"),e.YNc(1,r0,3,2,"ng-template",40),e.TgZ(2,"div",23)(3,"mat-form-field",41)(4,"input",42),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.rq.templatesXLingua[l].titolo=a)}),e.ALo(5,"translate"),e.qZA()(),e.YNc(6,c0,3,3,"button",43),e.TgZ(7,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(11);return e.KtG(a.click())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",45,46),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return e.KtG(r.htmlFileSelected(a.target,l))}),e.qZA(),e.TgZ(12,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.esportaHtml(a.testo))}),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",48),e.YNc(19,s0,1,0,"div",49),e.TgZ(20,"app-editor",50),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.rq.templatesXLingua[l].testo=a)})("onHeadRemove",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.rq.template.head=a)}),e.qZA()()()}if(2&i){const t=e.oxw().index,n=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,11,"bo.templateXLingua.proprieta.titolo")),e.Q6J("ngModel",n.rq.templatesXLingua[t].titolo),e.xp6(2),e.Q6J("ngIf",null==n.rq.template.isUsaEditor||n.rq.template.isUsaEditor),e.xp6(2),e.Oqu(e.lcZ(9,13,"sbm.tabelle.templates.importaHtml")),e.xp6(5),e.Oqu(e.lcZ(14,15,"sbm.tabelle.templates.esportaHtml")),e.xp6(3),e.Oqu(e.lcZ(17,17,"bo.templateXLingua.proprieta.testo")),e.xp6(3),e.Q6J("ngIf",n.rq.template.isUsaEditor),e.xp6(1),e.Q6J("id","testo"+t)("text",n.rq.templatesXLingua[t].testo)("height",500)("disabled",n.rq.template.isUsaEditor)}}function d0(i,o){if(1&i&&(e.ynx(0),e.YNc(1,p0,21,19,"mat-tab",27),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function m0(i,o){if(1&i&&(e.TgZ(0,"div",62),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nome," ")}}$o.\u0275fac=function(o){return new(o||$o)(e.Y36(C.t),e.Y36(A.s))},$o.\u0275cmp=e.Xpm({type:$o,selectors:[["app-allegati"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{allegati:"allegati"},features:[e.qOj],decls:10,vars:5,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4",4,"ngIf"],[3,"onBack",4,"ngIf"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","urlAllegato"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"d-inline-block","align-middle","mr-2"],["mat-icon-button","","color","primary","class","align-middle open-button",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",1,"align-middle","open-button",3,"click"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[3,"onBack"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return t.showAddForm=!0}),e.TgZ(5,"i",4),e._uU(6,"add"),e.qZA()(),e.YNc(7,WA,16,6,"ng-container",5),e.YNc(8,e0,4,3,"div",6),e.qZA(),e.YNc(9,t0,1,0,"app-allegato-add",7)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("hidden",t.showAddForm),e.xp6(4),e.Q6J("ngIf",null!=t.allegati&&t.allegati.length>0),e.xp6(1),e.Q6J("ngIf",null==t.allegati||0==t.allegati.length),e.xp6(1),e.Q6J("ngIf",t.showAddForm))},dependencies:[m.O5,h.eB,F.aO,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Go,z.X$],styles:[".open-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.open-button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px;line-height:20px}"]});const _0=function(i){return{"mt-2":i}};function u0(i,o){if(1&i&&(e.TgZ(0,"div",20)(1,"div",60),e._uU(2),e.qZA(),e.YNc(3,m0,2,1,"div",61),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.Q6J("ngClass",e.VKq(3,_0,n>0)),e.xp6(2),e.hij(" ",t.categoria," "),e.xp6(1),e.Q6J("ngForOf",t.tags)}}function g0(i,o){if(1&i&&(e.TgZ(0,"div",56)(1,"h4",57),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",58),e.YNc(5,u0,4,5,"div",59),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.tabelle.templates.tags")),e.xp6(3),e.Q6J("ngForOf",t.tags)}}function h0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",65)(2,"app-image",66),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("title","globals.immagine")("url",t.rq.template.urlImmagine)}}function f0(i,o){1&i&&(e.TgZ(0,"div",67)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.templates.salvareTemplate")))}function C0(i,o){if(1&i&&(e.ynx(0),e.YNc(1,h0,3,2,"div",63),e.YNc(2,f0,4,3,"div",64),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.rq.template.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.rq.template.oid||t.rq.template.oid<=0)}}function b0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}const v0=function(i,o){return[i,"tipoTemplate",!0,null,null,o]},T0=function(i){return{"allegati-select":i}},x0=function(i){return{"color-pink":i}},Z0=function(i,o){return{"col-9":i,"col-12":o}};class Bo extends f.H{set template(o){if(null!=o){this.selectedIndex=0,this.rq=new d.dKo,this.rq.template=o.template;try{null!=this.rq.template.coloreSfondo&&(this.rq.template.coloreSfondoHex=Z(this.rq.template.coloreSfondo).hex())}catch(t){}if(this.selectedAllegati=[],this.rq.template.oidAllegati){let t=this.rq.template.oidAllegati.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.allegati.findIndex(a=>a.oid==+n)&&this.selectedAllegati.push(+n)}this.tags=o.tags;for(let t of this.lingue){let n=new v.L92;n.lingua=t,this.rq.templatesXLingua.push(n)}if(null!=o.templatesXLingua)for(let t of o.templatesXLingua)if(null!=t.lingua){let n=this.rq.templatesXLingua.findIndex(a=>a.lingua.oid==t.lingua.oid);n>=0&&(this.rq.templatesXLingua[n].template=t.template,this.rq.templatesXLingua[n].titolo=t.titolo,this.rq.templatesXLingua[n].testo=t.testo,this.rq.templatesXLingua[n].design=t.design)}}}constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.localizationService=n,this.utility=a,this.selectedIndex=0,this.tags=[],this.enumTipoTemplate=c.hQ,this.selectedAllegati=[],this.modificaAllegatiEnabled=!0,this.enumSortingType=c.nI,this.allegati=[],this.admin=!1,this.backEvent=new e.vpe}ngOnInit(){this.rq=new d.dKo;let o=this.sessionService.getPermessiUtente();null!=o&&(this.modificaAllegatiEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaAllegati)))}save(){if(this.rq.template.nome){this.setIsLoading(!0);for(let o of this.rq.templatesXLingua)o.template=this.rq.template;if(this.admin||(this.rq.template.albergo=new v.Z$(this.sessionService.getOidAlbergo())),this.rq.template.coloreSfondoHex)try{this.rq.template.coloreSfondo=Z(this.rq.template.coloreSfondoHex).rgbNumber()}catch(o){}else this.rq.template.coloreSfondo=null;this.rq.template.oidAllegati=this.selectedAllegati.join(";"),this.apiService.setTemplate(this.rq).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.templates.templateSalvato").then(()=>{this.backEvent.emit(!0)})})}else this.showError("globals.messages.inserireDati")}delete(o){this.showDialogConfirm("sbm.tabelle.templates.eliminareTemplate").then(t=>{null!=o&&(this.rq.template=o),this.rq.template.isDeleted=!0,this.setIsLoading(!0),this.apiService.setTemplate(this.rq).subscribe(()=>{this.backEvent.emit(!0)})},t=>{})}openEditor(o){let t=new d.Zpt;t.width="80vw",t.minHeight="95vh";let n=this.showModalDialog(zt,t),a=n.componentInstance;a.design=o.design,a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){o.design=JSON.stringify(l.design),o.testo=l.html;for(let r of this.rq.templatesXLingua)r.design||(r.design=o.design),r.testo||(r.testo=o.testo)}})}htmlFileSelected(o,t){let n=null==o.files||0==o.files.length?null:o.files[0];if(null!=n&&"text/html"==n.type){const a=new FileReader;a.readAsText(n),a.onload=()=>{let l=a.result.toString();l?di.fromBuffer(Uint8Array.from(l.split(""),r=>r.charCodeAt(0)),(r,p)=>{r||null==p||"text/html"!=p.mime?(o.value="",this.showError("globals.messages.fileNonValido")):t.testo=l}):this.showError("globals.messages.fileNonValido")}}else this.showError("globals.messages.fileNonValido")}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.rq.template.urlImmagine,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.Pft;l.oid=this.rq.template.oid,l.base64=a,this.apiService.setImmagineTemplate(l).subscribe(r=>{null!=r.data&&(this.rq.template.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.Pft;t.oid=this.rq.template.oid,t.base64="",this.apiService.setImmagineTemplate(t).subscribe(n=>{null!=n.data&&(this.rq.template.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}esportaHtml(o){this.utility.exportHtml(this.rq.template.nome,o)}onTipoTemplateSelect(){this.setIsLoading(!0);let o=new d.rLt;o.tipoTemplate=this.rq.template.tipoTemplate,this.apiService.getTagsTemplate(o).subscribe(t=>{this.tags=t.data,this.setIsLoading(!1)})}onSelectDeselectAllClickAllegati(o){this.isAllSelectedAllegati(o)?this.selectedAllegati=[]:this.selectedAllegati=this.allegati.map(t=>t.oid)}isAllSelectedAllegati(o){return o.selected.length==this.allegati.length}isAllDeselectedAllegati(o){return 0==o.selected.length}editAllegati(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog($o,o),n=t.componentInstance;n.allegati=this.allegati,t.afterClosed().subscribe(()=>{null!=n.output&&(null!=n.output.allegati&&(this.allegati=n.output.allegati),null!=n.output.allegatiAggiunti&&n.output.allegatiAggiunti.forEach(a=>this.selectedAllegati.push(a)),null!=n.output.allegatiEliminati&&n.output.allegatiEliminati.forEach(a=>{let l=this.selectedAllegati.indexOf(a);l>=0&&this.selectedAllegati.splice(l,1)}),this.selectedAllegati=this.selectedAllegati.slice())})}testInvio(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance,a=this.rq.templatesXLingua.find(l=>l.lingua.codice==this.localizationService.getCurrentLocale());n.showTemplate=!1,n.emailEditing=!0,n.email=this.sessionService.sessione.email,n.oggetto=a.titolo,n.testo=a.testo,n.oidTemplate=this.rq.template.oid,n.dialogRef=t}copiaAltreLingue(o){this.showDialogConfirm("globals.effettuareOperazione").then(()=>{for(let t of this.rq.templatesXLingua)t.titolo=o.titolo,t.design=o.design,t.testo=o.testo},()=>{})}}function A0(i,o){if(1&i&&(e.TgZ(0,"mat-option",49),e.ALo(1,"translate"),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(39);e.Q6J("value",t.key)("hidden",!!n.value&&!e.lcZ(1,3,t.value).toLowerCase().includes(n.value.toLowerCase())),e.xp6(2),e.hij(" ",e.lcZ(3,5,t.value)," ")}}function w0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",22),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",50)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,1,t.admin?"sbm.amministrazione.templates.nessunTemplate":"sbm.tabelle.templates.nessunTemplate"))}}function z0(i,o){1&i&&e._UZ(0,"mat-header-cell")}function M0(i,o){1&i&&(e.TgZ(0,"mat-cell",51)(1,"button",52)(2,"i",53),e._uU(3,"edit"),e.qZA()()())}function q0(i,o){1&i&&(e.TgZ(0,"mat-header-cell",54),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.template.proprieta.nome"),""))}function P0(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ","[Contenuto_"+t.template.oid+"]"," ")}}function k0(i,o){if(1&i&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" Account Invio: ",t.template.accountMail.nome," ")}}function S0(i,o){if(1&i&&(e.TgZ(0,"mat-cell",55)(1,"div",11),e._uU(2),e.qZA(),e.YNc(3,P0,2,1,"div",56),e.YNc(4,k0,2,1,"div",57),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.template.nome),e.xp6(1),e.Q6J("ngIf",t.template.tipoTemplate==n.enumTipoTemplate.PreventivoContenuto),e.xp6(1),e.Q6J("ngIf",null!=t.template.accountMail)}}function y0(i,o){1&i&&(e.TgZ(0,"mat-header-cell",54),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.template.proprieta.tipoTemplate"),""))}function J0(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoTemplate,t.template.tipoTemplate,"tipoTemplate"))," ")}}function E0(i,o){1&i&&(e.TgZ(0,"mat-header-cell",60),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.template.proprieta.isAttivo"),""))}function N0(i,o){if(1&i&&(e.TgZ(0,"mat-cell",61),e._UZ(1,"mat-checkbox",62),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.template.isAttivo)("disabled",!0)}}function O0(i,o){1&i&&(e.TgZ(0,"mat-header-cell",60),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.template.proprieta.ordinamento"),""))}function L0(i,o){if(1&i&&(e.TgZ(0,"mat-cell",61),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.template.ordinamento)}}function D0(i,o){1&i&&(e.TgZ(0,"mat-header-cell",60),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.template.proprieta.isUsaEditor"),""))}function I0(i,o){if(1&i&&(e.TgZ(0,"mat-cell",61),e._UZ(1,"mat-checkbox",63),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.template.isUsaEditor)("indeterminate",null==t.template.isUsaEditor)}}function Q0(i,o){1&i&&e._UZ(0,"mat-header-cell")}function U0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"button",64),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.duplica(r.template.oid))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"globals.duplica")))}function Y0(i,o){1&i&&e._UZ(0,"mat-header-cell",65)}function R0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",66)(1,"button",67),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(86);return a.stopPropagation(),e.KtG(p.delete(r.template))}),e.TgZ(2,"i",68),e._uU(3,"delete"),e.qZA()()()}}function F0(i,o){1&i&&e._UZ(0,"mat-header-row",69)}function H0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",70),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.template.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.template.oid?t.template.oid:"")}}function K0(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",71),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.createFromModel())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",72)(5,"div"),e._uU(6," NB: Creare solamente templates che si vogliono personalizzare. Nel caso un template non sia presente verr\xe0 utilizzato quello di default."),e._UZ(7,"br"),e._uU(8," In caso di template di tipo 'Prenotazione' il template usato per la prenotazione web sar\xe0 quello con l'ordinamento pi\xf9 basso."),e._UZ(9,"br"),e._uU(10," E' possibile impostare un template diverso anche sulla modalit\xe0 di pagamento."),e._UZ(11,"br"),e._uU(12," I template associati agli automatismi non vengono considerati per l'invio di default nel Booking Engine e CRM "),e.qZA()(),e.TgZ(13,"div",73)(14,"div")(15,"span",74),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"span"),e._uU(19),e.ALo(20,"translate"),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div")(23,"span",74),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"span"),e._uU(27),e.ALo(28,"translate"),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div")(31,"span",74),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"span"),e._uU(35),e.ALo(36,"translate"),e.ALo(37,"translate"),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,7,"sbm.tabelle.templates.nuovoDaModello")),e.xp6(14),e.Oqu(e.lcZ(17,9,"sbm.tabelle.templates.templatePrenotazione")),e.xp6(3),e.Oqu(null!=t.templatePrenotazione?t.templatePrenotazione.nome+(t.templatePrenotazione.isModelloPassepartout?e.lcZ(20,11,"sbm.tabelle.templates.modelloPassepartout"):""):e.lcZ(21,13,"sbm.tabelle.templates.nessuno")),e.xp6(5),e.Oqu(e.lcZ(25,15,"sbm.tabelle.templates.templatePrenotazioneConfermata")),e.xp6(3),e.Oqu(null!=t.templatePrenotazioneConfermata?t.templatePrenotazioneConfermata.nome+(t.templatePrenotazioneConfermata.isModelloPassepartout?e.lcZ(28,17,"sbm.tabelle.templates.modelloPassepartout"):""):e.lcZ(29,19,"sbm.tabelle.templates.nessuno")),e.xp6(5),e.Oqu(e.lcZ(33,21,"sbm.tabelle.templates.templatePrenotazioneECommmerce")),e.xp6(3),e.Oqu(null!=t.templatePrenotazioneECommmerce?t.templatePrenotazioneECommmerce.nome+(t.templatePrenotazioneECommmerce.isModelloPassepartout?e.lcZ(36,23,"sbm.tabelle.templates.modelloPassepartout"):""):e.lcZ(37,25,"sbm.tabelle.templates.nessuno"))}}Bo.\u0275fac=function(o){return new(o||Bo)(e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o),e.Y36(C.t))},Bo.\u0275cmp=e.Xpm({type:Bo,selectors:[["app-templates-edit"]],inputs:{allegati:"allegati",admin:"admin",template:"template"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:87,vars:82,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],["selectSearch",""],[3,"value","hidden",4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["class","row",4,"ngIf"],[1,"mr-3","w-100",3,"ngClass"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectAllegati",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","class","add-allegati-button",3,"click",4,"ngIf"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"row","mt-3"],[3,"ngClass"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],[1,"border","rounded","head-textarea","p-3"],["matInput","",1,"h-100","w-100","overflow-auto",3,"ngModel","disabled","ngModelChange"],["class","col-3",4,"ngIf"],[4,"ngIf"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],[3,"value","hidden"],[1,"col-10"],[3,"value","placeholder","valueChange"],[1,"col-2","p-0"],["mat-icon-button","","color","primary",1,"mt-2","ml-n2",3,"click"],[1,"material-icons"],[3,"value"],["mat-mini-fab","","color","primary",1,"add-allegati-button",3,"click"],["mat-tab-label",""],[1,"titoloInput","mr-3"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],["class","mt-2 mr-1 editorButton","mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",1,"mt-2","mr-1","importaHtmlButton",3,"click"],["autocompleteOff","","type","file","accept",".html",1,"htmlFileSelect",3,"change"],["htmlFileSelect",""],["mat-flat-button","","color","primary",1,"mt-2","esportaHtmlButton",3,"click"],[1,"position-relative"],["class","w-100 h-100 position-absolute cursor-pointer testo-container",3,"click",4,"ngIf"],[3,"id","text","height","disabled","textChange","onHeadRemove"],["mat-icon-button","","color","primary","class","copiaAltreLingua",3,"disableRipple","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","primary",1,"copiaAltreLingua",3,"disableRipple","matTooltip","click"],[1,"material-icons-round"],["mat-flat-button","","color","primary",1,"mt-2","mr-1","editorButton",3,"click"],[1,"w-100","h-100","position-absolute","cursor-pointer","testo-container",3,"click"],[1,"col-3"],[1,"mb-3"],[1,"overflow-auto","tags","border","rounded","p-2"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"font-weight-bold"],["class","ml-3 p-1 font-small",4,"ngFor","ngForOf"],[1,"ml-3","p-1","font-small"],["class","row mt-3",4,"ngIf"],["class","mt-3 p-3 border rounded",4,"ngIf"],[1,"col-6"],[3,"title","url","edit","delete"],[1,"mt-3","p-3","border","rounded"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(l){return t.rq.template.nome=l}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Inserisci il nome del template "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"mat-select",5),e.NdJ("ngModelChange",function(l){return t.rq.template.tipoTemplate=l})("selectionChange",function(){return t.onTipoTemplateSelect()}),e.ALo(11,"translate"),e._UZ(12,"app-select-search",null,6),e.YNc(14,i0,4,7,"mat-option",7),e.ALo(15,"selectEnum"),e.qZA()()(),e.TgZ(16,"div",4),e._uU(17," Seleziona il tipo di template "),e.qZA()(),e.TgZ(18,"div",0)(19,"div",1)(20,"mat-form-field",2)(21,"input",8),e.NdJ("ngModelChange",function(l){return t.rq.template.ordinamento=l}),e.ALo(22,"translate"),e.qZA()()(),e.TgZ(23,"div",4),e._uU(24," Indica l'ordinamento del template "),e.qZA()(),e.TgZ(25,"div",0)(26,"div",1)(27,"app-view-select",9),e.NdJ("valueChange",function(l){return t.rq.template.ubicazioneIstat=l}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",4),e._uU(30," Indica l'ubicazione per l'invio manuale dei template nei preventivi "),e.qZA()(),e.TgZ(31,"div",0)(32,"div",1)(33,"app-view-select",9),e.NdJ("valueChange",function(l){return t.rq.template.accountMail=l}),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",4),e._uU(36," Indica l'account mail per l'invio del template "),e.qZA()(),e.YNc(37,o0,12,4,"div",10),e.TgZ(38,"div",0)(39,"div",1)(40,"mat-form-field",11)(41,"mat-select",12,13),e.NdJ("ngModelChange",function(l){return t.selectedAllegati=l}),e.ALo(43,"translate"),e.TgZ(44,"mat-checkbox",14),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(42);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickAllegati(r))}),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.YNc(47,n0,2,2,"mat-option",15),e.qZA()(),e.YNc(48,a0,3,0,"button",16),e.qZA(),e.TgZ(49,"div",4),e._uU(50," Selezionare gli allegati da inviare con l'email "),e.qZA()(),e.TgZ(51,"div",0)(52,"div",1)(53,"mat-form-field",2)(54,"input",17),e.NdJ("ngModelChange",function(l){return t.rq.template.cc=l}),e.ALo(55,"translate"),e.qZA()()(),e.TgZ(56,"div",4),e._uU(57," Indica il cc a cui inviare l'email "),e.qZA()(),e.TgZ(58,"div",0)(59,"div",1)(60,"mat-checkbox",18),e.NdJ("ngModelChange",function(l){return t.rq.template.isAttivo=l}),e._uU(61),e.ALo(62,"translate"),e.qZA()(),e.TgZ(63,"div",4),e._uU(64," Indica se il template \xe8 attivo "),e.qZA()(),e.TgZ(65,"div",19)(66,"div",20)(67,"mat-tab-group",21),e.NdJ("selectedIndexChange",function(l){return t.selectedIndex=l}),e.YNc(68,d0,2,1,"ng-container",22),e.qZA(),e.TgZ(69,"div",23),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"div",24)(73,"textarea",25),e.NdJ("ngModelChange",function(l){return t.rq.template.head=l}),e.qZA()()(),e.YNc(74,g0,6,4,"div",26),e.qZA(),e.YNc(75,C0,3,2,"ng-container",27),e.TgZ(76,"div",23)(77,"button",28),e.NdJ("click",function(){return t.save()}),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.YNc(80,b0,3,3,"button",29),e.TgZ(81,"button",30),e.NdJ("click",function(){return t.backEvent.emit(!1)}),e._uU(82),e.ALo(83,"translate"),e.qZA(),e.TgZ(84,"button",31),e.NdJ("click",function(){return t.testInvio()}),e._uU(85),e.ALo(86,"translate"),e.qZA()()}if(2&o){const n=e.MAs(42);e.xp6(3),e.s9C("placeholder",e.lcZ(4,39,"bo.template.proprieta.nome")),e.Q6J("ngModel",t.rq.template.nome),e.xp6(7),e.s9C("placeholder",e.lcZ(11,41,"bo.template.proprieta.tipoTemplate")),e.Q6J("ngModel",t.rq.template.tipoTemplate),e.xp6(4),e.Q6J("ngForOf",e.G7q(15,43,e.WLB(72,v0,t.enumTipoTemplate,t.enumSortingType.Asc))),e.xp6(7),e.s9C("placeholder",e.lcZ(22,50,"bo.template.proprieta.ordinamento")),e.Q6J("ngModel",t.rq.template.ordinamento),e.xp6(6),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.rq.template.ubicazioneIstat)("placeholder",e.lcZ(28,52,"bo.template.proprieta.ubicazioneIstat")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getAccountMailViewSelect())("value",t.rq.template.accountMail)("placeholder",e.lcZ(34,54,"bo.template.proprieta.accountMail")),e.xp6(4),e.Q6J("ngIf",t.rq.template.tipoTemplate==t.enumTipoTemplate.PreventivoContenuto),e.xp6(3),e.Q6J("ngClass",e.VKq(75,T0,t.modificaAllegatiEnabled)),e.xp6(1),e.Q6J("placeholder",e.lcZ(43,56,"sbm.tabelle.templates.allegati"))("ngModel",t.selectedAllegati),e.xp6(3),e.Q6J("ngClass",e.VKq(77,x0,t.isAllSelectedAllegati(n)))("checked",t.isAllSelectedAllegati(n))("indeterminate",!t.isAllSelectedAllegati(n)&&!t.isAllDeselectedAllegati(n)),e.xp6(1),e.Oqu(e.lcZ(46,58,"globals.selezionaDeselezionaTutti")),e.xp6(2),e.Q6J("ngForOf",t.allegati),e.xp6(1),e.Q6J("ngIf",t.modificaAllegatiEnabled),e.xp6(6),e.s9C("placeholder",e.lcZ(55,60,"bo.template.proprieta.cc")),e.Q6J("ngModel",t.rq.template.cc),e.xp6(6),e.Q6J("ngModel",t.rq.template.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(62,62,"bo.template.proprieta.isAttivo")," "),e.xp6(5),e.Q6J("ngClass",e.WLB(79,Z0,null!=t.tags&&t.tags.length>0,null==t.tags||0==t.tags.length)),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.rq.templatesXLingua),e.xp6(2),e.hij(" ",e.lcZ(71,64,"bo.template.proprieta.head")," "),e.xp6(3),e.Q6J("ngModel",t.rq.template.head)("disabled",null!=t.rq.template.isUsaEditor&&t.rq.template.isUsaEditor),e.xp6(1),e.Q6J("ngIf",null!=t.tags&&t.tags.length>0),e.xp6(1),e.Q6J("ngIf",t.rq.template.tipoTemplate==t.enumTipoTemplate.PreventivoContenuto||t.rq.template.tipoTemplate==t.enumTipoTemplate.PrenotazioneContenuto),e.xp6(3),e.Oqu(e.lcZ(79,66,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.rq.template&&t.rq.template.oid>0),e.xp6(2),e.Oqu(e.lcZ(83,68,"globals.annulla")),e.xp6(3),e.Oqu(e.lcZ(86,70,"sbm.tabelle.templates.testInvio"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ee.SK,ee.gz,ee.R7,q.Kd,_.Fj,_.wV,_.JJ,_.Q7,_.On,We.h,Me.P,ne.d,Ge.c,R,Te.A,z.X$],styles:[".tags[_ngcontent-%COMP%]{max-height:900px}.editorButton[_ngcontent-%COMP%], .importaHtmlButton[_ngcontent-%COMP%], .esportaHtmlButton[_ngcontent-%COMP%]{width:125px}.titoloInput[_ngcontent-%COMP%]{width:calc(100% - 375px - 1.5rem)}.htmlFileSelect[_ngcontent-%COMP%]{visibility:hidden!important;width:0!important;height:0!important;padding:0!important;margin:0!important;border:0!important}.head-textarea[_ngcontent-%COMP%]{height:200px}textarea[_ngcontent-%COMP%]{resize:none!important}.testo-container[_ngcontent-%COMP%]{z-index:1}.allegati-select[_ngcontent-%COMP%]{width:calc(100% - 35px - 1rem)!important}  .add-allegati-button{width:35px;height:35px}  .add-allegati-button .material-icons{font-size:25px;line-height:25px}  .add-allegati-button .mat-button-wrapper{padding:0!important}.copiaAltreLingua[_ngcontent-%COMP%]{position:absolute;right:0;top:0}"]});const Ut=function(i){return{selected:i}},G0=function(i,o){return[i,"tipoTemplate",!0,null,null,o]};class mi extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.sessionService=a,this.utility=l,this.admin=!1,this.showTable=!0,this.displayedColumns=["edit","nome","tipoTemplate","isAttivo","ordinamento","isUsaEditor","duplica","delete"],this.downloaded=!1,this.enumTipoTemplate=c.hQ,this.allegati=[],this.enumSortingType=c.nI}ngOnInit(){this.headerService.setTitle("sbm.tabelle.templates.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("tipoTemplate",c.Hp.In,"",c.NM.Number)),this.filters.push(new d.wn$("isAttivo",c.Hp.IsTrue,null,null,!1,c.Hp.IsFalse)),this.selectedUbicazione=this.sessionService.getUbicazioneIstat(),this.filters.push(new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,null!=this.selectedUbicazione?this.selectedUbicazione.oid.toString():"",c.NM.Number)),this.setIsLoading(!0),this.apiService.getAllegati().subscribe(o=>{this.allegati=o.data,this.download(!0)}),this.admin&&this.displayedColumns.splice(this.displayedColumns.indexOf("duplica"),1)}download(o=!1){this.setIsLoading(!0),this.rq.filters=this.utility.getFilters(this.filters),(this.admin?this.apiService.getTemplatesAdminFilter(this.rq):this.apiService.getTemplatesFilter(this.rq)).subscribe(t=>{this.dataSource=new s.r4(t.data.templates),this.dataSource.paginator=this.paginator,this.dataSource.sortingDataAccessor=(n,a)=>n.template[a],this.dataSource.sort=this.sort,o?this.apiService.checkTemplatesPrenotazione().subscribe(n=>{this.templatePrenotazione=n.data.templatePrenotazione,this.templatePrenotazioneConfermata=n.data.templatePrenotazioneConfermata,this.templatePrenotazioneECommmerce=n.data.templatePrenotazioneECommmerce,this.setIsLoading(!1)}):this.setIsLoading(!1)})}add(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ho,o),n=t.componentInstance;n.admin=this.admin,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.edit(a)})}edit(o){this.template=o,this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}onBack(o=!1){this.showTable=!0,this.download(o),this.containerService.scrollToTop(),this.headerService.hideElenco()}onTipoTemplateSelected(o){this.filters[0].value==o?this.filters[0].value="":this.filters[0].value=o,this.download(),this.paginator.firstPage()}onSearch(o,t,n,a){null!=t?this.filters[o].value=t:null!=n?(this.filters[o].active=n,this.filters[o].inverted=!1):(this.filters[o].inverted=a,this.filters[o].active=!1),this.download(),this.paginator.firstPage()}createFromModel(){let o=new d.Zpt;o.width="75vw";let t=this.showModalDialog(Fo,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.download(!0)})}openTemplatesHelp(){let o=new d.Zpt;o.width="75vw",this.showModalDialog(Ko,o)}duplica(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0),this.apiService.duplicaTemplate(o).subscribe(n=>{this.setIsLoading(!1),this.edit(n.data)})},t=>{})}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}mi.\u0275fac=function(o){return new(o||mi)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(j.m),e.Y36(C.t))},mi.\u0275cmp=e.Xpm({type:mi,selectors:[["app-templates"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{admin:"admin"},features:[e.qOj],decls:87,vars:78,consts:[[1,"p-3"],[1,"div-help","mb-3"],[3,"hidden"],[1,"mt-3","mb-3"],[1,"d-inline-block","tipo-template","p-2","rounded-lg","mr-2",3,"ngClass","click"],[1,"d-inline-block","tipo-template","p-2","rounded-lg",3,"ngClass","click"],[1,"d-inline-block"],["mat-icon-button","",1,"align-middle","help-button","ml-2",3,"click"],[1,"material-icons","help-icon"],[1,"row"],[1,"col-3"],[1,"w-100"],[3,"placeholder","value","selectionChange"],["tipoTemplateSelect",""],["selectSearch",""],[3,"value"],[3,"value","hidden",4,"ngFor","ngForOf"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"col-3","pt-4"],[3,"label","valueChange"],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],["matSort","","matSortActive","ordinamento","matSortDirection","asc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],["mat-sort-header","",4,"matHeaderCellDef"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","tipoTemplate"],[4,"matCellDef"],["matColumnDef","isAttivo"],["mat-sort-header","","class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","ordinamento"],["matColumnDef","isUsaEditor"],["matColumnDef","duplica"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"template","admin","allegati","backEvent"],["editComponent",""],[3,"value","hidden"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],[1,"flex-wrap"],["class","w-100 contenuto",4,"ngIf"],["class","w-100 accountMail",4,"ngIf"],[1,"w-100","contenuto"],[1,"w-100","accountMail"],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center"],["color","primary",3,"checked","disabled"],["color","primary","disabled","",3,"checked","indeterminate"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],["mat-flat-button","","color","primary",1,"mt-3","float-right",3,"click"],[1,"mt-3","div-help"],[1,"border","rounded","mt-3","pr-3","pl-3","pt-2","pb-2","bg-white"],[1,"font-weight-bold"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._uU(2," NB: Creare solamente templates che si vogliono personalizzate. Nel caso un template non sia presente verr\xe0 utilizzato quello di default"),e._UZ(3,"br"),e._uU(4," In caso di template di tipo 'Prenotazione' il template usato per la prenotazione web sar\xe0 quello con l'ordinamento pi\xf9 basso "),e.qZA(),e.TgZ(5,"div",2)(6,"div",3)(7,"span",4),e.NdJ("click",function(){return t.onTipoTemplateSelected("(2, 3, 4, 7, 44, 46)"),t.tipoTemplate=null}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"span",4),e.NdJ("click",function(){return t.onTipoTemplateSelected("(10, 11, 12, 14, 15, 16)"),t.tipoTemplate=null}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"span",4),e.NdJ("click",function(){return t.onTipoTemplateSelected("(30, 31, 9)"),t.tipoTemplate=null}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"span",4),e.NdJ("click",function(){return t.onTipoTemplateSelected("(45, 46)"),t.tipoTemplate=null}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"span",4),e.NdJ("click",function(){return t.onTipoTemplateSelected("(20)"),t.tipoTemplate=null}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"span",4),e.NdJ("click",function(){return t.onTipoTemplateSelected("(13)"),t.tipoTemplate==t.enumTipoTemplate.PreventivoContenuto?t.tipoTemplate=null:t.tipoTemplate=t.enumTipoTemplate.PreventivoContenuto}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"span",5),e.NdJ("click",function(){return t.onTipoTemplateSelected("(5)"),t.tipoTemplate==t.enumTipoTemplate.PrenotazioneContenuto?t.tipoTemplate=null:t.tipoTemplate=t.enumTipoTemplate.PrenotazioneContenuto}),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"span",6)(29,"button",7),e.NdJ("click",function(){return t.openTemplatesHelp()}),e.TgZ(30,"span",8),e._uU(31,"help"),e.qZA()()()(),e.TgZ(32,"div",9)(33,"div",10)(34,"mat-form-field",11)(35,"mat-select",12,13),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(36);return t.onTipoTemplateSelected("("+l.value+")"),e.KtG(t.tipoTemplate=l.value)}),e.ALo(37,"translate"),e._UZ(38,"app-select-search",null,14)(40,"mat-option",15),e.YNc(41,A0,4,7,"mat-option",16),e.ALo(42,"selectEnum"),e.qZA()()(),e.TgZ(43,"div",10)(44,"app-view-select",17),e.NdJ("valueChange",function(l){return t.selectedUbicazione=l})("valueChange",function(){return t.onSearch(2,-1==t.selectedUbicazione.oid?"":t.selectedUbicazione.oid.toString())}),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"div",18)(47,"app-indeterminate-checkbox",19),e.NdJ("valueChange",function(l){return null==l?t.onSearch(1,null,null,!0):t.onSearch(1,null,l)}),e.qZA()()(),e.YNc(48,w0,8,3,"div",20),e.TgZ(49,"div",2)(50,"button",21),e.NdJ("click",function(){return t.add()}),e.TgZ(51,"i",22),e._uU(52,"add"),e.qZA()(),e.TgZ(53,"div",23)(54,"mat-table",24),e.NdJ("matSortChange",function(){return t.paginator.firstPage()}),e.ynx(55,25),e.YNc(56,z0,1,0,"mat-header-cell",26),e.YNc(57,M0,4,0,"mat-cell",27),e.BQk(),e.ynx(58,28),e.YNc(59,q0,3,3,"mat-header-cell",29),e.YNc(60,S0,5,3,"mat-cell",30),e.BQk(),e.ynx(61,31),e.YNc(62,y0,3,3,"mat-header-cell",29),e.YNc(63,J0,3,3,"mat-cell",32),e.BQk(),e.ynx(64,33),e.YNc(65,E0,3,3,"mat-header-cell",34),e.YNc(66,N0,2,2,"mat-cell",35),e.BQk(),e.ynx(67,36),e.YNc(68,O0,3,3,"mat-header-cell",34),e.YNc(69,L0,2,1,"mat-cell",35),e.BQk(),e.ynx(70,37),e.YNc(71,D0,3,3,"mat-header-cell",34),e.YNc(72,I0,2,2,"mat-cell",35),e.BQk(),e.ynx(73,38),e.YNc(74,Q0,1,0,"mat-header-cell",26),e.YNc(75,U0,4,3,"mat-cell",32),e.BQk(),e.ynx(76,39),e.YNc(77,Y0,1,0,"mat-header-cell",40),e.YNc(78,R0,4,0,"mat-cell",41),e.BQk(),e.YNc(79,F0,1,0,"mat-header-row",42),e.YNc(80,H0,1,1,"mat-row",43),e.qZA()(),e.TgZ(81,"div",44)(82,"mat-paginator",45),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.YNc(83,K0,38,27,"ng-container",20),e.qZA(),e.TgZ(84,"div",46)(85,"app-templates-edit",47,48),e.NdJ("backEvent",function(l){return t.onBack(l)}),e.qZA()()()}2&o&&(e.xp6(5),e.Q6J("hidden",!t.showTable),e.xp6(2),e.Q6J("ngClass",e.VKq(61,Ut,"(2, 3, 4, 7, 44, 46)"==t.filters[0].value)),e.xp6(1),e.hij(" ",e.lcZ(9,36,"sbm.tabelle.templates.prenotazioni")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(63,Ut,"(10, 11, 12, 14, 15, 16)"==t.filters[0].value)),e.xp6(1),e.hij(" ",e.lcZ(12,38,"sbm.tabelle.templates.preventivi")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(65,Ut,"(30, 31, 9)"==t.filters[0].value)),e.xp6(1),e.hij(" ",e.lcZ(15,40,"sbm.tabelle.templates.richieste")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(67,Ut,"(45, 46)"==t.filters[0].value)),e.xp6(1),e.hij(" ",e.lcZ(18,42,"sbm.tabelle.templates.paymail")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(69,Ut,"(20)"==t.filters[0].value)),e.xp6(1),e.hij(" ",e.lcZ(21,44,"sbm.tabelle.templates.sondaggi")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(71,Ut,"(13)"==t.filters[0].value)),e.xp6(1),e.hij(" ",e.lcZ(24,46,"sbm.tabelle.templates.contenuti")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(73,Ut,"(5)"==t.filters[0].value)),e.xp6(1),e.hij(" ",e.lcZ(27,48,"sbm.tabelle.templates.contenutiSelfCheckIn")," "),e.xp6(9),e.s9C("placeholder",e.lcZ(37,50,"bo.template.proprieta.tipoTemplate")),e.Q6J("value",t.tipoTemplate),e.xp6(5),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.G7q(42,52,e.WLB(75,G0,t.enumTipoTemplate,t.enumSortingType.Asc))),e.xp6(3),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.selectedUbicazione)("placeholder",e.lcZ(45,59,"globals.ubicazioneIstat")),e.xp6(3),e.Q6J("label","sbm.tabelle.templates.soloAttivi"),e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",!t.admin&&null!=t.dataSource&&null!=t.dataSource.data),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("template",t.template)("admin",t.admin)("allegati",t.allegati))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,M.v_,re.CK,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,ne.d,st,R,Bo,Te.A,z.X$],styles:[".selected[_ngcontent-%COMP%]{color:#e91e63!important;border:1px solid #e91e63!important}.tipo-template[_ngcontent-%COMP%]{font-size:16px;font-weight:600;cursor:pointer;border:1px solid #aaaaaa;background-color:#fff}.contenuto[_ngcontent-%COMP%]{font-size:13px;font-style:italic;color:#666}.accountMail[_ngcontent-%COMP%]{font-size:x-small;font-style:italic}.copy-button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px}.copy-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}"]});class Vo{constructor(o){this.headerService=o}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.templates.title")}ngOnDestroy(){this.headerService.clearTitle()}}function $0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"app-image",14),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.tutorial.urlImmagine)}}function B0(i,o){1&i&&(e.TgZ(0,"div",15)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.amministrazione.tutorial.salvareTutorial")))}function V0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Vo.\u0275fac=function(o){return new(o||Vo)(e.Y36(ie.r))},Vo.\u0275cmp=e.Xpm({type:Vo,selectors:[["app-templates-admin"]],decls:1,vars:1,consts:[[3,"admin"]],template:function(o,t){1&o&&e._UZ(0,"app-templates",0),2&o&&e.Q6J("admin",!0)},dependencies:[mi]});class Xo extends f.H{constructor(o,t){super(),this.apiService=o,this.navigationService=t,this.backEvent=new e.vpe}save(){this.setIsLoading(!0),this.apiService.setVideoTutorial(this.tutorial).subscribe(o=>{this.apiService.getTutorials().subscribe(t=>{this.navigationService.tutorials=t.data,this.setIsLoading(!1),this.showInfo("sbm.amministrazione.tutorial.videoTutorialSalvato").then(()=>{null==this.tutorial.oid||this.tutorial.oid<=0?this.tutorial=o.data.obj:this.backEvent.emit()})})})}delete(o){this.showDialogConfirm("sbm.amministrazione.tutorial.eliminareVideoTutorial").then(t=>{null!=o&&(this.tutorial=o),this.tutorial.isDeleted=!0,this.setIsLoading(!0),this.apiService.setVideoTutorial(this.tutorial).subscribe(()=>{this.apiService.getTutorials().subscribe(n=>{this.navigationService.tutorials=n.data,this.backEvent.emit()})})},t=>{})}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.tutorial.urlImmagine,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.rqB;l.oid=this.tutorial.oid,l.base64=a,this.apiService.setImmagineTutorial(l).subscribe(r=>{null!=r.data&&(this.tutorial.urlImmagine=r.data.url),this.apiService.getTutorials().subscribe(p=>{this.navigationService.tutorials=p.data,this.setIsLoading(!1)})})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.rqB;t.oid=this.tutorial.oid,t.base64="",this.apiService.setImmagineTutorial(t).subscribe(n=>{null!=n.data&&(this.tutorial.urlImmagine=n.data.url),this.apiService.getTutorials().subscribe(a=>{this.navigationService.tutorials=a.data,this.setIsLoading(!1)})})},o=>{})}}function X0(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",26)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.amministrazione.tutorial.nessunVideoTutorial")))}function j0(i,o){1&i&&e._UZ(0,"mat-header-cell")}function W0(i,o){1&i&&(e.TgZ(0,"mat-cell",27)(1,"button",28)(2,"i",29),e._uU(3,"edit"),e.qZA()()())}function ew(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.videoTutorial.proprieta.nome"),""))}function tw(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nome," ")}}function iw(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.videoTutorial.proprieta.url"),""))}function ow(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.url," ")}}function nw(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.videoTutorial.proprieta.route"),""))}function aw(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.route," ")}}function lw(i,o){1&i&&(e.TgZ(0,"mat-header-cell",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.videoTutorial.proprieta.isAttivo"),""))}function rw(i,o){if(1&i&&(e.TgZ(0,"mat-cell",30),e._UZ(1,"mat-checkbox",31),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)}}function cw(i,o){1&i&&e._UZ(0,"mat-header-cell")}function sw(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",32)(1,"button",33),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(32);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",34),e._uU(3,"delete"),e.qZA()()()}}function pw(i,o){1&i&&e._UZ(0,"mat-header-row",35)}function dw(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",36),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Xo.\u0275fac=function(o){return new(o||Xo)(e.Y36(A.s),e.Y36(Ae.f))},Xo.\u0275cmp=e.Xpm({type:Xo,selectors:[["app-video-tutorial-edit"]],inputs:{tutorial:"tutorial"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:39,vars:37,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],["class","row mt-3",4,"ngIf"],["class","mt-3 p-3 border rounded",4,"ngIf"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"row","mt-3"],[1,"col-6"],[3,"title","url","edit","delete"],[1,"mt-3","p-3","border","rounded"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.tutorial.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.tutorial.descrizione=a}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",1)(10,"mat-form-field",2)(11,"input",4),e.NdJ("ngModelChange",function(a){return t.tutorial.ordinamento=a}),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"div",0)(14,"div",1)(15,"mat-form-field",2)(16,"input",3),e.NdJ("ngModelChange",function(a){return t.tutorial.route=a}),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",1)(19,"mat-form-field",2)(20,"input",3),e.NdJ("ngModelChange",function(a){return t.tutorial.url=a}),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"div",1)(23,"mat-form-field",2)(24,"input",3),e.NdJ("ngModelChange",function(a){return t.tutorial.tags=a}),e.ALo(25,"translate"),e.qZA()()()(),e.TgZ(26,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.tutorial.isAttivo=a}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.YNc(29,$0,3,2,"div",6),e.YNc(30,B0,4,3,"div",7),e.TgZ(31,"div",8)(32,"button",9),e.NdJ("click",function(){return t.save()}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.YNc(35,V0,3,3,"button",10),e.TgZ(36,"button",11),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(37),e.ALo(38,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,19,"bo.videoTutorial.proprieta.nome")),e.Q6J("ngModel",t.tutorial.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(8,21,"bo.videoTutorial.proprieta.descrizione")),e.Q6J("ngModel",t.tutorial.descrizione),e.xp6(4),e.s9C("placeholder",e.lcZ(12,23,"bo.videoTutorial.proprieta.ordinamento")),e.Q6J("ngModel",t.tutorial.ordinamento),e.xp6(5),e.s9C("placeholder",e.lcZ(17,25,"bo.videoTutorial.proprieta.route")),e.Q6J("ngModel",t.tutorial.route),e.xp6(4),e.s9C("placeholder",e.lcZ(21,27,"bo.videoTutorial.proprieta.url")),e.Q6J("ngModel",t.tutorial.url),e.xp6(4),e.s9C("placeholder",e.lcZ(25,29,"bo.videoTutorial.proprieta.tags")),e.Q6J("ngModel",t.tutorial.tags),e.xp6(2),e.Q6J("ngModel",t.tutorial.isAttivo),e.xp6(1),e.Oqu(e.lcZ(28,31,"bo.videoTutorial.proprieta.isAttivo")),e.xp6(2),e.Q6J("ngIf",t.tutorial.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.tutorial.oid||t.tutorial.oid<=0),e.xp6(3),e.Oqu(e.lcZ(34,33,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.tutorial.oid>0),e.xp6(2),e.Oqu(e.lcZ(38,35,"globals.annulla")))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,_.Fj,_.wV,_.JJ,_.On,Ge.c,z.X$]});class jo extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.tutorial=new v.SIO,this.displayedColumns=["edit","nome","route","url","isAttivo","delete"],this.showTable=!0}ngOnInit(){this.headerService.setTitle("sbm.amministrazione.tutorial.title")}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getVideoTutorial().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.tutorial=new v.SIO(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.tutorial=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBackEvent(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}ngOnDestroy(){this.headerService.clearTitle()}}function mw(i,o){if(1&i&&(e.TgZ(0,"li"),e._UZ(1,"app-inner-html",13),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("_text",t)}}function _w(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"li",11),e._uU(2),e.qZA(),e.TgZ(3,"ul",12),e.YNc(4,mw,2,1,"li",5),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.categoria),e.xp6(2),e.Q6J("ngForOf",t.changeLogs)}}function uw(i,o){if(1&i&&(e.TgZ(0,"div",8)(1,"h6",9),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"momentFormat"),e.qZA(),e.TgZ(5,"ul",10),e.YNc(6,_w,5,2,"ng-container",5),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(2),e.Oqu(e.lcZ(3,2,e.Dn7(4,4,t.data,"D MMMM YYYY",n.getLocale()))),e.xp6(4),e.Q6J("ngForOf",t.changeLogs)}}jo.\u0275fac=function(o){return new(o||jo)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},jo.\u0275cmp=e.Xpm({type:jo,selectors:[["app-video-tutorial"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:33,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","url"],["matColumnDef","route"],["matColumnDef","isAttivo"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"tutorial","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,X0,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,j0,1,0,"mat-header-cell",8),e.YNc(10,W0,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,ew,3,3,"mat-header-cell",8),e.YNc(13,tw,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,iw,3,3,"mat-header-cell",8),e.YNc(16,ow,2,1,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,nw,3,3,"mat-header-cell",8),e.YNc(19,aw,2,1,"mat-cell",11),e.BQk(),e.ynx(20,14),e.YNc(21,lw,3,3,"mat-header-cell",15),e.YNc(22,rw,2,1,"mat-cell",16),e.BQk(),e.ynx(23,17),e.YNc(24,cw,1,0,"mat-header-cell",8),e.YNc(25,sw,4,0,"mat-cell",18),e.BQk(),e.YNc(26,pw,1,0,"mat-header-row",19),e.YNc(27,dw,1,1,"mat-row",20),e.qZA()(),e.TgZ(28,"div",21)(29,"mat-paginator",22),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(30,"div",23)(31,"app-video-tutorial-edit",24,25),e.NdJ("backEvent",function(){return t.onBackEvent()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("tutorial",t.tutorial))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Xo,z.X$]});const gw=function(i){return{"mt-4":i}};function hw(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5",6),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,uw,7,8,"div",7),e.BQk()),2&i){const t=o.$implicit,n=o.index;e.xp6(1),e.Q6J("ngClass",e.VKq(5,gw,n>0)),e.xp6(1),e.Oqu(e.lcZ(3,3,"sbm.change-log.versione")+t.versione),e.xp6(2),e.Q6J("ngForOf",t.changeLogs)}}function fw(i,o){if(1&i&&(e.ynx(0),e.YNc(1,hw,5,7,"ng-container",5),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.changeLogs)}}function Cw(i,o){1&i&&(e.TgZ(0,"h5",14),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.change-log.nessunChangeLog")))}function bw(i,o){if(1&i&&(e.TgZ(0,"div",1)(1,"div",2),e.YNc(2,fw,2,1,"ng-container",3),e.YNc(3,Cw,3,3,"h5",4),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.changeLogs.length>0),e.xp6(1),e.Q6J("ngIf",0==t.changeLogs.length)}}class Wo extends f.H{constructor(o,t){super(),this.apiService=o,this.headerService=t}ngOnInit(){this.setIsLoading(!0),this.headerService.setTitle("sbm.change-log.title"),this.apiService.getChangeLog().subscribe(o=>{this.changeLogs=o.data,this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}function vw(i,o){1&i&&(e.TgZ(0,"div",30)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.chiusureGiornaliere.nessunaChiusuraGiornaliera")))}function Tw(i,o){1&i&&(e.TgZ(0,"mat-header-cell",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.data"),""))}function xw(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function Zw(i,o){1&i&&(e.TgZ(0,"mat-header-cell",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.totaleProduzione"),""))}function Aw(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.totaleProduzione)," ")}}function ww(i,o){1&i&&(e.TgZ(0,"mat-header-cell",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.presenzeTotali"),""))}function zw(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.presenzeTotali," ")}}function Mw(i,o){1&i&&(e.TgZ(0,"mat-header-cell",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.camereOccupate"),""))}function qw(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.camereOccupate," ")}}function Pw(i,o){1&i&&(e.TgZ(0,"mat-header-cell",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.ricavoMedioPax"),""))}function kw(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.ricavoMedioPax)," ")}}function Sw(i,o){1&i&&(e.TgZ(0,"mat-header-cell",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.ricavoMedioCamera"),""))}function yw(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.ricavoMedioCamera)," ")}}function Jw(i,o){1&i&&(e.TgZ(0,"mat-header-cell",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.indiceOccupazione"),""))}function Ew(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.indiceOccupazione," ")}}function Nw(i,o){1&i&&(e.TgZ(0,"mat-header-cell",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.revPar"),""))}function Ow(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.revPar)," ")}}function Lw(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.chiusureGiornaliere.report"),""))}function Dw(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",33),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.preventDefault(),e.KtG(r.utility.openUrlInNewTab(l.urlReportChiusura))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.urlReportChiusura")))}function Iw(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",33),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.preventDefault(),e.KtG(r.utility.openUrlInNewTab(l.urlReportDocumentiEmessi))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.chiusuraGiornalieraHotel.proprieta.urlReportDocumentiEmessi")))}function Qw(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Dw,3,3,"a",32),e.YNc(2,Iw,3,3,"a",32),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlReportChiusura),e.xp6(1),e.Q6J("ngIf",!!t.urlReportDocumentiEmessi)}}function Uw(i,o){1&i&&e._UZ(0,"mat-header-row",34)}function Yw(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",35),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Wo.\u0275fac=function(o){return new(o||Wo)(e.Y36(A.s),e.Y36(ie.r))},Wo.\u0275cmp=e.Xpm({type:Wo,selectors:[["app-change-log"]],features:[e.qOj],decls:1,vars:1,consts:[["class","p-3",4,"ngIf"],[1,"p-3"],[1,"border","rounded-xl","p-3","bg-white"],[4,"ngIf"],["class","mb-0",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mb-3","color-pink",3,"ngClass"],["class","pl-3",4,"ngFor","ngForOf"],[1,"pl-3"],[1,"mb-2","font-italic"],[1,"mb-3"],[1,"font-weight-bold"],[1,"changeLogList","mb-3"],[3,"_text"],[1,"mb-0"]],template:function(o,t){1&o&&e.YNc(0,bw,4,2,"div",0),2&o&&e.Q6J("ngIf",null!=t.changeLogs)},dependencies:[m.mk,m.sg,m.O5,rt.W,m.rS,K.H,z.X$],styles:[".changeLogList[_ngcontent-%COMP%]{list-style-type:disc}"]});class en extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.displayedColumns=["data","totaleProduzione","presenzeTotali","camereOccupate","ricavoMedioPax","ricavoMedioCamera","indiceOccupazione","revPar","report"]}ngOnInit(){this.headerService.setTitle("sbm.chiusureGiornaliere.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("data",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("data",c.Hp.LowerEqual,this.getDate(this.today),c.NM.Date))}onSearch(o,t){this.filters[o].value=t,this.download(),this.paginator.firstPage()}download(){this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getChiusureGiornaliereFilter(this.rq).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}}en.\u0275fac=function(o){return new(o||en)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},en.\u0275cmp=e.Xpm({type:en,selectors:[["app-chiusure-giornaliere-hotel"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:51,vars:21,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"placeholder","value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"placeholder","value","dateChange"],["matSuffix","",3,"for"],["picker",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container","chiusure-giornaliere-table"],["matSort","","matSortActive","data","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","totaleProduzione"],["matColumnDef","presenzeTotali"],["matColumnDef","camereOccupate"],["matColumnDef","ricavoMedioPax"],["matColumnDef","ricavoMedioCamera"],["matColumnDef","indiceOccupazione"],["matColumnDef","revPar"],["matColumnDef","report"],[4,"matHeaderCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-sort-header",""],["class","color-pink","href","#",3,"click",4,"ngIf"],["href","#",1,"color-pink",3,"click"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(15);return e.KtG(l.open())}),e.TgZ(9,"input",6),e.NdJ("dateChange",function(l){return null!=l.value?t.filters[0].value=t.getDate(l.value):null}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("dateChange",function(l){return null!=l.value?t.onSearch(1,t.getDate(l.value)):null}),e.ALo(12,"translate"),e.qZA()(),e._UZ(13,"mat-datepicker-toggle",8)(14,"mat-date-range-picker",null,9),e.qZA()()()(),e.YNc(16,vw,4,3,"div",10),e.TgZ(17,"div",11)(18,"div",12)(19,"mat-table",13),e.NdJ("matSortChange",function(){return null!=t.paginator?t.paginator.firstPage():null}),e.ynx(20,14),e.YNc(21,Tw,3,3,"mat-header-cell",15),e.YNc(22,xw,3,4,"mat-cell",16),e.BQk(),e.ynx(23,17),e.YNc(24,Zw,3,3,"mat-header-cell",15),e.YNc(25,Aw,3,3,"mat-cell",16),e.BQk(),e.ynx(26,18),e.YNc(27,ww,3,3,"mat-header-cell",15),e.YNc(28,zw,2,1,"mat-cell",16),e.BQk(),e.ynx(29,19),e.YNc(30,Mw,3,3,"mat-header-cell",15),e.YNc(31,qw,2,1,"mat-cell",16),e.BQk(),e.ynx(32,20),e.YNc(33,Pw,3,3,"mat-header-cell",15),e.YNc(34,kw,3,3,"mat-cell",16),e.BQk(),e.ynx(35,21),e.YNc(36,Sw,3,3,"mat-header-cell",15),e.YNc(37,yw,3,3,"mat-cell",16),e.BQk(),e.ynx(38,22),e.YNc(39,Jw,3,3,"mat-header-cell",15),e.YNc(40,Ew,2,1,"mat-cell",16),e.BQk(),e.ynx(41,23),e.YNc(42,Nw,3,3,"mat-header-cell",15),e.YNc(43,Ow,3,3,"mat-cell",16),e.BQk(),e.ynx(44,24),e.YNc(45,Lw,3,3,"mat-header-cell",25),e.YNc(46,Qw,3,2,"mat-cell",16),e.BQk(),e.YNc(47,Uw,1,0,"mat-header-row",26),e.YNc(48,Yw,1,1,"mat-row",27),e.qZA()(),e.TgZ(49,"div",28)(50,"mat-paginator",29),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()}if(2&o){const n=e.MAs(15);e.xp6(6),e.Oqu(e.lcZ(7,15,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.s9C("placeholder",e.lcZ(10,17,"globals.dal")),e.Q6J("value",t.filters[0].value),e.xp6(2),e.s9C("placeholder",e.lcZ(12,19,"globals.al")),e.Q6J("value",t.filters[1].value),e.xp6(2),e.Q6J("for",n),e.xp6(3),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}},dependencies:[m.O5,w.X,M.v_,M.$V,M.nX,y.nW,y.wx,y.zY,y.By,y._g,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,m.uU,ke.f,z.X$],styles:[".chiusure-giornaliere-table .mat-column-report{flex-wrap:wrap}"]});class tn extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.appuntamento=new v.r02}ngOnInit(){this.appuntamento.data=this.getDate(u())}save(){this.setIsLoading(!0),this.appuntamento.albergo=this.sessionService.getAlbergo(),this.appuntamento.cliente=this.cliente,this.appuntamento.data=this.getDate(this.appuntamento.data),this.apiService.setAppuntamento(this.appuntamento).subscribe(o=>{this.dialogRef.close(o.data.obj)})}}tn.\u0275fac=function(o){return new(o||tn)(e.Y36(A.s),e.Y36(j.m))},tn.\u0275cmp=e.Xpm({type:tn,selectors:[["app-appuntamento-add"]],inputs:{cliente:"cliente",dialogRef:"dialogRef"},features:[e.qOj],decls:29,vars:31,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","matInput","","readonly","","required","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["data",""],["autocompleteOff","","matInput","","type","time",3,"placeholder","ngModel","ngModelChange"],["rows","5",1,"border","rounded","p-3","w-100",3,"ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.appuntamento.oggetto=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"mat-form-field",2)(7,"input",4),e.NdJ("ngModelChange",function(a){return t.appuntamento.luogo=a}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"mat-form-field",2)(10,"input",5),e.NdJ("ngModelChange",function(a){return t.appuntamento.data=a}),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"mat-datepicker-toggle",6)(13,"mat-datepicker",null,7),e.qZA(),e.TgZ(15,"mat-form-field",2)(16,"input",8),e.NdJ("ngModelChange",function(a){return t.appuntamento.orarioInizio=a}),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"mat-form-field",2)(19,"input",8),e.NdJ("ngModelChange",function(a){return t.appuntamento.orarioFine=a}),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"textarea",9),e.NdJ("ngModelChange",function(a){return t.appuntamento.note=a}),e.qZA(),e.TgZ(25,"div",10)(26,"button",11),e.NdJ("click",function(){return t.save()}),e._uU(27),e.ALo(28,"translate"),e.qZA()()),2&o){const n=e.MAs(14);e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("placeholder",e.lcZ(5,17,"bo.clienteAppuntamenti.proprieta.oggetto"))("ngModel",t.appuntamento.oggetto),e.xp6(3),e.Q6J("placeholder",e.lcZ(8,19,"bo.clienteAppuntamenti.proprieta.luogo"))("ngModel",t.appuntamento.luogo),e.xp6(3),e.Q6J("matDatepicker",n)("placeholder",e.lcZ(11,21,"bo.clienteAppuntamenti.proprieta.data"))("ngModel",t.appuntamento.data),e.xp6(2),e.Q6J("for",n),e.xp6(4),e.Q6J("placeholder",e.lcZ(17,23,"bo.clienteAppuntamenti.proprieta.orarioInizio"))("ngModel",t.appuntamento.orarioInizio),e.xp6(3),e.Q6J("placeholder",e.lcZ(20,25,"bo.clienteAppuntamenti.proprieta.orarioFine"))("ngModel",t.appuntamento.orarioFine),e.xp6(3),e.Oqu(e.lcZ(23,27,"bo.clienteAppuntamenti.proprieta.note")),e.xp6(2),e.Q6J("ngModel",t.appuntamento.note),e.xp6(2),e.Q6J("disabled",!t.appuntamento.oggetto),e.xp6(1),e.Oqu(e.lcZ(28,29,"globals.salva"))}},dependencies:[w.X,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,F.aO,_.Fj,_.JJ,_.Q7,_.On,z.X$],styles:["textarea[_ngcontent-%COMP%]{resize:none}"]});var qc=Y(59877);class on extends f.H{constructor(o){super(),this.apiService=o}send(){this.setIsLoading(!0);let t,o=new d.zSb;t=null!=this.lingua?this.preventivi.filter(n=>null!=n.cliente&&null!=n.cliente.lingua&&n.cliente.lingua.oid==this.lingua.oid):this.preventivi,o.oidPreventivi=t.slice(0,50).map(n=>n.oid),o.testo=this.testo,this.apiService.inviaMessaggioPreventivi(o).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.preventivi.messaggiInviati",{value:t.length}).then(()=>{this.dialogRef.close(!0)})})}}on.\u0275fac=function(o){return new(o||on)(e.Y36(A.s))},on.\u0275cmp=e.Xpm({type:on,selectors:[["app-invia-messaggio-preventivi"]],inputs:{preventivi:"preventivi",dialogRef:"dialogRef"},features:[e.qOj],decls:12,vars:11,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"border","rounded","p-3"],[1,"w-100","messaggio-send-textarea"],["matInput","","rows","5",3,"ngModel","ngModelChange"],[1,"mt-4","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"app-view-select",2),e.NdJ("valueChange",function(a){return t.lingua=a}),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"mat-form-field",4)(7,"textarea",5),e.NdJ("ngModelChange",function(a){return t.testo=a}),e.qZA()()(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return t.send()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("dataLoader",t.apiService.getLingueViewSelect())("value",t.lingua)("placeholder",e.lcZ(4,7,"globals.lingua")),e.xp6(4),e.Q6J("ngModel",t.testo),e.xp6(2),e.Q6J("disabled",!t.testo),e.xp6(1),e.Oqu(e.lcZ(11,9,"globals.invia")))},dependencies:[h.eB,M.v_,b.k0,F.aO,_.Fj,_.JJ,_.On,ne.d,z.X$],styles:[".messaggio-send-textarea .mat-form-field-underline{visibility:hidden!important}  .messaggio-send-textarea .mat-form-field-wrapper{padding-bottom:0!important}  .messaggio-send-textarea .mat-form-field-infix{padding:0!important;border:0!important}textarea[_ngcontent-%COMP%]{resize:none}"]});var Rw=Y(87640);const Fw=["container"];function Hw(i,o){if(1&i&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.codice," ")}}function Kw(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",16)(1,"mat-select",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.codicePromozione=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.generaOpzioni())}),e.ALo(2,"translate"),e._UZ(3,"mat-option",18),e.YNc(4,Hw,2,2,"mat-option",19),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.codicePromozione)("placeholder",e.lcZ(2,4,"sbm.richieste.codicePromozionale")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.codiciPromozione)}}function Gw(i,o){if(1&i&&(e.TgZ(0,"div")(1,"b"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.nomePromozione)}}function $w(i,o){1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi-add.nonPrenotabile")," "))}function Bw(i,o){if(1&i&&(e.TgZ(0,"div",44),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.prezzoScontato)," ")}}function Vw(i,o){if(1&i&&(e.TgZ(0,"span",45),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu("-"+t.scontoPercentuale+"%")}}const Xw=function(i){return{"border-top":i}},jw=function(i,o){return{prezzo:i,"prezzo-sconto mr-1":o}};function Ww(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"span",35),e._uU(4),e.qZA(),e.TgZ(5,"button",36),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2).$implicit,p=e.oxw(4);return e.KtG(p.openDetails(r,l))}),e.TgZ(6,"span",37),e._uU(7,"info"),e.qZA()()(),e.YNc(8,Gw,3,1,"div",22),e.YNc(9,$w,3,3,"div",38),e.qZA(),e.TgZ(10,"div",39),e.YNc(11,Bw,3,3,"div",40),e.TgZ(12,"div")(13,"span",41),e._uU(14),e.ALo(15,"eurCurrency"),e.qZA(),e.YNc(16,Vw,2,1,"span",42),e.qZA()(),e.TgZ(17,"div",39)(18,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2).index,T=e.oxw(2).index,L=e.oxw(2);return e.KtG(L.selectedOpzioni[T][p][r]=a)})("change",function(a){e.CHM(t);const l=e.oxw(4).index,r=e.oxw(2);return r.tariffeSelectedNumber[l]=a.checked?r.tariffeSelectedNumber[l]+1:r.tariffeSelectedNumber[l]-1,e.KtG(r.checkDisabledButton())}),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2).index,l=e.oxw(2).index,r=e.oxw(2);e.Q6J("ngClass",e.VKq(11,Xw,0==n)),e.xp6(4),e.Oqu(t.descrizione),e.xp6(4),e.Q6J("ngIf",!!t.nomePromozione),e.xp6(1),e.Q6J("ngIf",!t.isPrenotabile),e.xp6(2),e.Q6J("ngIf",t.prezzoScontato>0),e.xp6(2),e.Q6J("ngClass",e.WLB(13,jw,t.prezzoScontato<=0,t.prezzoScontato>0)),e.xp6(1),e.Oqu(e.lcZ(15,9,t.prezzo)),e.xp6(2),e.Q6J("ngIf",t.prezzoScontato>0),e.xp6(2),e.Q6J("ngModel",r.selectedOpzioni[l][a][n])}}function e4(i,o){if(1&i&&(e.TgZ(0,"div",26)(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"div",27)(4,"div",28),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",29),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",30),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,Ww,19,16,"div",31),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.nome?t.nome:""),e.xp6(3),e.Oqu(e.lcZ(6,5,"sbm.preventivi.paxMin")+t.paxMin),e.xp6(3),e.Oqu(e.lcZ(9,7,"sbm.preventivi.paxMax")+t.paxMax),e.xp6(3),e.Oqu(e.lcZ(12,9,"sbm.preventivi.disponibili")+t.disponibili),e.xp6(2),e.Q6J("ngForOf",t.tariffe)}}function t4(i,o){if(1&i&&(e.ynx(0),e.YNc(1,e4,14,11,"div",25),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.tariffe&&t.tariffe.length>0)}}function i4(i,o){if(1&i&&(e.ynx(0),e.YNc(1,t4,2,1,"ng-container",24),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.opzioni)}}function o4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"h5",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",48)(5,"button",49),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.nuovaRichiesta())}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.nuovoPreventivo())}),e._uU(9),e.ALo(10,"translate"),e.qZA()()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,3,"sbm.preventivi-add.nessunaTariffa")),e.xp6(4),e.Oqu(e.lcZ(7,5,"sbm.preventivi-add.creaRichiesta")),e.xp6(3),e.Oqu(e.lcZ(10,7,"sbm.preventivi-add.creaPreventivo")))}function n4(i,o){if(1&i&&(e.TgZ(0,"mat-tab",20),e.ALo(1,"translate"),e.TgZ(2,"div",21),e.YNc(3,i4,2,1,"ng-container",22),e.YNc(4,o4,11,9,"div",23),e.qZA()()),2&i){const t=o.index,n=e.oxw(2);e.Q6J("label",e.lcZ(1,3,"sbm.preventivi.camera")+" "+(t+1)+" - "+n.labels[t]),e.xp6(3),e.Q6J("ngIf",!n.noRates[t]),e.xp6(1),e.Q6J("ngIf",n.noRates[t])}}function a4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onTariffeSelected(!0))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.creaPreventivoButtonDisabled),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.preventivi-add.creaPreventivoEApri"))}}function l4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"h4",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div")(5,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.isVisualizzaTutteLeSoluzioni=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.generaOpzioni())}),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div")(9,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.isVisualizzaSoloCamereDisponibili=a)})("change",function(a){e.CHM(t);const l=e.oxw();return l.generaOpzioni(),e.KtG(l.parametriService.setParametro("isControllaDisponibiliChecked",a.checked))}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div")(13,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.isVisualizzaCamerePaxNonValide=a)})("change",function(a){e.CHM(t);const l=e.oxw();return l.generaOpzioni(),e.KtG(l.parametriService.setParametro("isVisualizzaCamerePaxNonValideChecked",a.checked))}),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.YNc(16,Kw,5,6,"mat-form-field",9),e.TgZ(17,"mat-tab-group",10),e.YNc(18,n4,5,5,"mat-tab",11),e.qZA(),e.TgZ(19,"div",12)(20,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onTariffeSelected(!a.showOpenPreventivoButton))}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.YNc(23,a4,3,4,"button",14),e.TgZ(24,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBack())}),e._uU(25),e.ALo(26,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,13,"sbm.preventivi-add.selezionaTariffe")," "),e.xp6(3),e.Q6J("ngModel",t.isVisualizzaTutteLeSoluzioni),e.xp6(1),e.Oqu(e.lcZ(7,15,"sbm.preventivi-add.visualizzaTutteLeSoluzioni")),e.xp6(3),e.Q6J("ngModel",t.isVisualizzaSoloCamereDisponibili),e.xp6(1),e.Oqu(e.lcZ(11,17,"sbm.preventivi-add.visualizzaSoloCamereDisponibili")),e.xp6(3),e.Q6J("ngModel",t.isVisualizzaCamerePaxNonValide),e.xp6(1),e.Oqu(e.lcZ(15,19,"sbm.preventivi-add.visualizzaCamerePaxNonValide")),e.xp6(2),e.Q6J("ngIf",null!=t.codiciPromozione&&t.codiciPromozione.length>0),e.xp6(2),e.Q6J("ngForOf",t.opzioni),e.xp6(2),e.Q6J("disabled",t.creaPreventivoButtonDisabled),e.xp6(1),e.Oqu(e.lcZ(22,21,"sbm.preventivi-add.creaPreventivo")),e.xp6(2),e.Q6J("ngIf",t.showOpenPreventivoButton),e.xp6(2),e.Oqu(e.lcZ(26,23,"sbm.preventivi-add.indietro"))}}const r4=function(i){return{"close-button":i}},c4=function(i){return{"p-3":i}};class _i extends f.H{constructor(o,t,n,a,l,r){super(),this.sessionService=o,this.apiService=t,this.localizationService=n,this.navigationService=a,this.containerService=l,this.parametriService=r,this.showTariffeSelect=!1,this.opzioni=[],this.selectedOpzioni=[],this.tariffeSelectedNumber=[],this.oidPortale=-1,this.labels=[],this.noRates=[],this.creaPreventivoButtonDisabled=!0,this.isVisualizzaTutteLeSoluzioni=!1,this.isVisualizzaSoloCamereDisponibili=!1,this.isVisualizzaCamerePaxNonValide=!1,this.codiciPromozione=[],this.isDeleteRichiesta=!0,this.showOpenPreventivoButton=!1,this.onPreventivoCreated=new e.vpe,this.onCloseButtonClick=new e.vpe}ngOnInit(){this.setIsLoading(!0),this.isVisualizzaSoloCamereDisponibili=null!=this.parametriService.parametri.isControllaDisponibiliChecked&&this.parametriService.parametri.isControllaDisponibiliChecked,this.isVisualizzaCamerePaxNonValide=null!=this.parametriService.parametri.isVisualizzaCamerePaxNonValideChecked&&this.parametriService.parametri.isVisualizzaCamerePaxNonValideChecked}onLoaded(){this.setIsLoading(!1)}onRichiestaSaved(o){this.setIsLoading(!0),this.navigationService.refreshContatoriMenu(),this.oidRichiesta=o,this.apiService.getCodiciPromozioneValidiRichiesta(this.oidRichiesta).subscribe(t=>{this.codiciPromozione=t.data,this.generaOpzioni()})}generaOpzioni(){var o;this.setIsLoading(!0);let t=new d.hp3;t.oidPortale=this.oidPortale,t.oidRichiesta=this.oidRichiesta,t.isVisualizzaTutteLeSoluzioni=this.isVisualizzaTutteLeSoluzioni,t.isVisualizzaSoloCamereDisponibili=this.isVisualizzaSoloCamereDisponibili,t.isVisualizzaCamerePaxNonValide=this.isVisualizzaCamerePaxNonValide,t.codicePromozione=null===(o=this.codicePromozione)||void 0===o?void 0:o.codice,this.apiService.generaOpzioni(t).subscribe(n=>{if(null!=n.data){this.opzioni=n.data;let be=0;this.tariffeSelectedNumber=[],this.selectedOpzioni=[],this.labels=[],this.noRates=[];for(let Ze of this.opzioni){var a,l,r,p,T,L,G,W;this.selectedOpzioni.push([]);let Je=this.localizationService.getTranslationSync("sbm.preventivi-add.adulti"),$e=this.localizationService.getTranslationSync("sbm.preventivi-add.bambini");this.labels.push((null!==(a=Ze.tipoCamera)&&void 0!==a&&a.codice?Ze.tipoCamera.codice:"")+(null!==(l=Ze.tipoCamera)&&void 0!==l&&l.codice&&null!==(r=Ze.tariffa)&&void 0!==r&&r.codice?" - ":"")+(null!==(p=Ze.tariffa)&&void 0!==p&&p.codice?Ze.tariffa.codice:"")+((null!==(T=Ze.tipoCamera)&&void 0!==T&&T.codice||null!==(L=Ze.tariffa)&&void 0!==L&&L.codice)&&(Ze.numeroAdulti>0||Ze.numeroBambini>0)?" (":"")+(Ze.numeroAdulti>0?Ze.numeroAdulti+" "+Je:"")+(Ze.numeroAdulti>0&&Ze.numeroBambini>0?" - ":"")+(Ze.numeroBambini>0?Ze.numeroBambini+" "+$e:"")+((null!==(G=Ze.tipoCamera)&&void 0!==G&&G.codice||null!==(W=Ze.tariffa)&&void 0!==W&&W.codice)&&(Ze.numeroAdulti>0||Ze.numeroBambini>0)?")":""));let _t=0,vt=!1;for(let Tt of Ze.opzioni){this.selectedOpzioni[be].push([]),Tt.tariffe.length>0&&(vt=!0);for(let Re of Tt.tariffe)this.selectedOpzioni[be][_t].push(!1);_t++}this.tariffeSelectedNumber.push(0),this.noRates.push(!vt),be++}}this.showTariffeSelect=!0,this.container.nativeElement.scrollTo({top:0,left:0,behavior:"smooth"}),this.setIsLoading(!1)})}onBack(){this.showTariffeSelect=!1,this.container.nativeElement.scrollTo({top:0,left:0,behavior:"smooth"}),this.deleteRichiesta()}onTariffeSelected(o){let t=JSON.parse(JSON.stringify(this.opzioni)),n=0;for(let a of this.selectedOpzioni){let l=0;for(let r of a){t[n].opzioni[l].tariffe=[];let p=0;for(let T of r)T&&t[n].opzioni[l].tariffe.push(this.opzioni[n].opzioni[l].tariffe[p]),p++;l++}n++}this.creaPreventivo(t,o)}creaPreventivo(o,t){var n;this.setIsLoading(!0);let a=new d.dFI;a.oidRichiesta=this.oidRichiesta,a.oidUtente=this.sessionService.getOidUtente(),a.oidCodicePromozione=null===(n=this.codicePromozione)||void 0===n?void 0:n.oid,a.opzioni=o,this.apiService.creaPreventivo(a).subscribe(l=>{null==l.data||null!=l.errori&&0!=l.errori.length?this.setIsLoading(!1):(this.oidRichiesta=null,this.navigationService.refreshContatoriMenu(),t?window.location.href="/sbm/home/(homeOutlet:preventivi)?oidPreventivo="+l.data.oidPreventivo:(this.setIsLoading(!1),this.onPreventivoCreated.emit(),null!=this.dialogRef&&this.dialogRef.close()))})}checkDisabledButton(){this.creaPreventivoButtonDisabled=!1;for(let o of this.tariffeSelectedNumber)if(o<=0){this.creaPreventivoButtonDisabled=!0;break}}deleteRichiesta(){if(null!=this.oidRichiesta&&this.oidRichiesta>0){let o=new v.HYV(this.oidRichiesta);o.isDeleted=!0,this.apiService.setRichiesta(o).subscribe(()=>{this.navigationService.refreshContatoriMenu()})}}nuovoPreventivo(){let o=new d.Zpt;o.width="70vw";let t=this.showModalDialog(Jt,o),n=t.componentInstance;n.oidPortale=this.oidPortale,n.dialogRef=t;let a=[];for(let l of this.opzioni){let r=new d.osD;r.numeroAdulti=l.numeroAdulti,r.numeroBambini=l.numeroBambini,r.tipoCamera=l.tipoCamera,r.tariffa=l.tariffa,a.push(r)}n.camere=a,t.afterClosed().subscribe(l=>{if(l){let r=[];for(let p of a){let T=new d.PP6;T.opzioni=[];let L=new d.rDl;L.roomId=p.tipoCamera.oid,L.tariffe=[];let G=new d.fnf;G.rateId=p.tariffa.oid,L.tariffe.push(G),T.opzioni.push(L),r.push(T)}this.creaPreventivo(r,!0)}})}nuovaRichiesta(){this.isDeleteRichiesta=!1,this.oidRichiesta=null,this.onPreventivoCreated.emit(),null!=this.dialogRef&&this.dialogRef.close(),this.showInfo("sbm.preventivi-add.richiestaCreata")}openDetails(o,t){let n=new d.Zpt;n.width="80vw",n.panelClass="dialog-overlay";let l=this.showModalDialog(wc.w,n).componentInstance;l.tariffa=t,l.tipoCamera=o,l.isVisualizzaDettaglioGiornaliero=!0}ngOnDestroy(){this.isDeleteRichiesta&&this.deleteRichiesta()}}_i.\u0275fac=function(o){return new(o||_i)(e.Y36(j.m),e.Y36(A.s),e.Y36(Oe.o),e.Y36(Ae.f),e.Y36(te.J),e.Y36(et))},_i.\u0275cmp=e.Xpm({type:_i,selectors:[["app-preventivi-add"]],viewQuery:function(o,t){if(1&o&&e.Gf(Fw,5),2&o){let n;e.iGM(n=e.CRH())&&(t.container=n.first)}},inputs:{cliente:"cliente",showOpenPreventivoButton:"showOpenPreventivoButton",dialogRef:"dialogRef",maxHeight:"maxHeight"},outputs:{onPreventivoCreated:"onPreventivoCreated",onCloseButtonClick:"onCloseButtonClick"},features:[e.qOj],decls:7,vars:16,consts:[["mat-icon-button","",1,"modal-close-button",3,"ngClass","disableRipple","click"],[1,"material-icons-round"],[1,"w-100","h-100","overflow-auto",3,"ngClass"],["container",""],[3,"modal","createPreventivo","cliente","oidAlbergo","language","hidden","onRichiestaSaved","onLoaded","onPortaleSelected"],["class","p-3",4,"ngIf"],[1,"p-3"],[1,"mb-4"],["color","primary",3,"ngModel","ngModelChange","change"],["class","w-100 mt-2",4,"ngIf"],[1,"mt-3","dialog-tab-group"],[3,"label",4,"ngFor","ngForOf"],[1,"text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["class","mr-1","mat-flat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"w-100","mt-2"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"label"],[1,"pt-3","pb-3"],[4,"ngIf"],["class","p-3 border preventivi-add-container",4,"ngIf"],[4,"ngFor","ngForOf"],["class","preventivi-add-container border pr-3 pl-3 pt-3 mb-2",4,"ngIf"],[1,"preventivi-add-container","border","pr-3","pl-3","pt-3","mb-2"],[1,"font-small","font-italic","font-weight-bold"],[1,"d-inline-block","mr-2"],[1,"d-inline-block"],[1,"font-small","font-italic","font-weight-bold","mb-3"],["class","row row-tariffa",3,"ngClass",4,"ngFor","ngForOf"],[1,"row","row-tariffa",3,"ngClass"],[1,"col-4"],[1,"text-nowrap"],[1,"d-inline-block","align-middle","mr-1","text-wrap"],["mat-icon-button","",1,"info-button","align-middle",3,"click"],[1,"material-icons","info-icon"],["class","color-red",4,"ngIf"],[1,"col-4","text-center"],["class","prezzo",4,"ngIf"],[3,"ngClass"],["class","sconto",4,"ngIf"],[1,"color-red"],[1,"prezzo"],[1,"sconto"],[1,"p-3","border","preventivi-add-container"],[1,"d-inline-block","mb-0"],[1,"float-right","mt-n1"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return null!=t.dialogRef?t.dialogRef.close():t.onCloseButtonClick.emit()}),e.TgZ(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2,3)(5,"app-form-v1",4),e.NdJ("onRichiestaSaved",function(a){return t.onRichiestaSaved(a)})("onLoaded",function(){return t.onLoaded()})("onPortaleSelected",function(a){return t.oidPortale=a}),e.qZA(),e.YNc(6,l4,27,25,"div",5),e.qZA()),2&o&&(e.Q6J("ngClass",e.VKq(12,r4,null==t.dialogRef))("disableRipple",!0),e.xp6(3),e.Udp("max-height",t.maxHeight,"px"),e.Q6J("ngClass",e.VKq(14,c4,null!=t.dialogRef)),e.xp6(2),e.Q6J("modal",!0)("createPreventivo",!0)("cliente",t.cliente)("oidAlbergo",t.sessionService.getOidAlbergo())("language",t.localizationService.getCurrentLocale())("hidden",t.showTariffeSelect),e.xp6(1),e.Q6J("ngIf",t.showTariffeSelect))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,M.v_,re.CK,g.x8,ee.SK,ee.R7,_.JJ,_.On,Rw.J,ke.f,z.X$],styles:[".portale-select .mat-form-field-flex{border:1px solid #cccccc!important;border-radius:7px!important;padding-left:.25rem!important;padding-right:.25rem!important}  .portale-select .mat-form-field-wrapper{padding:0!important}  .portale-select .mat-form-field-underline{visibility:hidden!important}  .portale-select .mat-form-field-infix{border-top:0!important}.preventivi-add-container[_ngcontent-%COMP%]{border-radius:7px}.prezzo[_ngcontent-%COMP%]{font-weight:700}.prezzo-sconto[_ngcontent-%COMP%]{color:#aaa;text-decoration:line-through;font-size:13px}.sconto[_ngcontent-%COMP%]{color:#e91e63;font-size:12px}.color-red[_ngcontent-%COMP%]{color:#d9534f}.row-tariffa[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc;padding-top:1rem;padding-bottom:1rem}.close-button[_ngcontent-%COMP%]{top:10px!important;right:25px!important}.info-button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px}.info-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}"]});class ui{constructor(){this.showOpenPreventivoButton=!1}}ui.\u0275fac=function(o){return new(o||ui)},ui.\u0275cmp=e.Xpm({type:ui,selectors:[["app-preventivi-add-dialog"]],inputs:{cliente:"cliente",showOpenPreventivoButton:"showOpenPreventivoButton",dialogRef:"dialogRef"},decls:1,vars:3,consts:[[3,"cliente","showOpenPreventivoButton","dialogRef"]],template:function(o,t){1&o&&e._UZ(0,"app-preventivi-add",0),2&o&&e.Q6J("cliente",t.cliente)("showOpenPreventivoButton",t.showOpenPreventivoButton)("dialogRef",t.dialogRef)},dependencies:[_i]});var Yt=Y(69400);function s4(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(" + "+t.camera.numeroBambini+" "+e.lcZ(2,1,"sbm.preventivi.bambini"))}}function p4(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(" ("+t.etaBambini+" "+e.lcZ(2,1,"sbm.preventivi.anni")+")")}}function d4(i,o){1&i&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi.nonPrenotabile")," "))}function m4(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.nomePromozione)}}function _4(i,o){if(1&i&&(e.TgZ(0,"span",33),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.prezzoScontato))}}function u4(i,o){if(1&i&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu("-"+t.scontoPercentuale+"%")}}const g4=function(i,o){return{prezzo:i,"prezzo-sconto mr-1":o}};function h4(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,d4,3,3,"div",25),e.TgZ(3,"div",3)(4,"div",26),e._uU(5),e.qZA(),e.YNc(6,m4,2,1,"div",13),e.qZA(),e.TgZ(7,"div",27)(8,"span",28),e._uU(9),e.ALo(10,"eurCurrency"),e.qZA(),e.YNc(11,_4,3,3,"span",29),e.YNc(12,u4,2,1,"span",30),e.qZA(),e.TgZ(13,"div",27)(14,"button",31),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw().$implicit,p=e.oxw(3);return e.KtG(p.onConferma(r.roomId,l))}),e._uU(15),e.ALo(16,"translate"),e.qZA()()(),e.BQk()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngIf",!t.isPrenotabile),e.xp6(3),e.Oqu(t.descrizione),e.xp6(1),e.Q6J("ngIf",!!t.nomePromozione),e.xp6(2),e.Q6J("ngClass",e.WLB(12,g4,t.prezzoScontato<=0,t.prezzoScontato>0)),e.xp6(1),e.Oqu(e.lcZ(10,8,t.prezzo)),e.xp6(2),e.Q6J("ngIf",t.prezzoScontato>0),e.xp6(1),e.Q6J("ngIf",t.prezzoScontato>0),e.xp6(3),e.Oqu(e.lcZ(16,10,"sbm.preventivi.seleziona"))}}function f4(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5",20),e._uU(2),e.qZA(),e.TgZ(3,"div",21)(4,"div",22),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",23),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",24),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,h4,17,15,"ng-container",19),e.BQk()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.nome," "),e.xp6(3),e.Oqu(e.lcZ(6,5,"sbm.preventivi.paxMin")+t.paxMin),e.xp6(3),e.Oqu(e.lcZ(9,7,"sbm.preventivi.paxMax")+t.paxMax),e.xp6(3),e.Oqu(e.lcZ(12,9,"sbm.preventivi.disponibili")+t.disponibili),e.xp6(2),e.Q6J("ngForOf",t.tariffe)}}function C4(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,f4,14,11,"ng-container",19),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.preventivi.selezionaTariffa")),e.xp6(2),e.Q6J("ngForOf",t.rs)}}function b4(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",35)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.BQk()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.preventivi.nessunaTariffa")))}function v4(i,o){if(1&i&&(e.TgZ(0,"div",18),e.YNc(1,C4,5,4,"ng-container",13),e.YNc(2,b4,5,3,"ng-container",13),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.rs.length>0),e.xp6(1),e.Q6J("ngIf",0==t.rs.length)}}class nn extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.parametriService=a,this.rq=new d.aK9,this.tariffaSelect=!1,this.rs=[]}ngOnInit(){null!=this.proposta?(this.rq.arrivo=this.proposta.arrivo,this.rq.partenza=this.proposta.partenza):(this.rq.arrivo=this.preventivo.arrivo,this.rq.partenza=this.preventivo.partenza),this.rq.isControllaDisponibili=null!=this.parametriService.parametri.isControllaDisponibiliChecked&&this.parametriService.parametri.isControllaDisponibiliChecked,this.rq.lingua=null!=this.preventivo.lingua&&this.preventivo.lingua.codice?this.preventivo.lingua.codice:"it",null!=this.preventivo.portaleXAlbergo?this.rq.oidPortale=this.preventivo.portaleXAlbergo.oid:this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),null!=this.dettaglio&&(null!=this.dettaglio.tipoCameraOTA&&(this.rq.oidTipoCameraOTA=this.dettaglio.tipoCameraOTA.oid,this.tipoCamera=new v.OR4(this.rq.oidTipoCameraOTA),this.tipoCamera.descrizione=this.dettaglio.tipoCameraOTA.descrizione),null!=this.dettaglio.tariffaOTA&&(this.rq.oidTariffaOTA=this.dettaglio.tariffaOTA.oid,this.tariffa=new v.HfG(this.rq.oidTariffaOTA),this.tariffa.descrizione=this.dettaglio.tariffaOTA.descrizione)),this.rq.isDayUse=!1,this.rq.isMobile=!0,this.rq.camere=[this.camera]}calcola(){this.rq.arrivo&&this.rq.partenza&&(this.setIsLoading(!0),null!=this.tipoCamera?this.rq.oidTipoCameraOTA=this.tipoCamera.oid:this.rq.oidTipoCameraOTA=-1,null!=this.tariffa?this.rq.oidTariffaOTA=this.tariffa.oid:this.rq.oidTariffaOTA=-1,this.apiService.getBookingSolution(this.rq).subscribe(o=>{null!=o&&null!=o.data&&null!=o.data.camere&&o.data.camere.length>0&&(this.rs=o.data.camere.filter(t=>t.tariffe.length>0)),this.tariffaSelect=!0,this.setIsLoading(!1)}))}onConferma(o,t){let n=new d.CQg;n.arrivo=this.rq.arrivo,n.partenza=this.rq.partenza,n.proposta=new d._d7,n.proposta.oidTipoCamera=o,n.proposta.tariffa=t,null!=this.proposta&&(n.proposta.oidProposta=this.proposta.oid),this.dialogRef.close(n)}onArrivoChange(){setTimeout(()=>{this.rq.arrivo=this.getDate(this.rq.arrivo),u(this.rq.arrivo)<u().startOf("day")&&(this.rq.arrivo=this.getDate(u())),(null==this.rq.partenza||u(this.rq.arrivo)>=u(this.rq.partenza))&&(this.rq.partenza=this.getDate(u(this.rq.arrivo).add(1,"day")))},200)}onPartenzaChange(){setTimeout(()=>{this.rq.partenza=this.getDate(this.rq.partenza),u(this.rq.partenza)<u().add(1,"day").startOf("day")&&(this.rq.partenza=this.getDate(u().add(1,"day"))),(null==this.rq.arrivo||u(this.rq.arrivo)>=u(this.rq.partenza))&&(this.rq.arrivo=this.getDate(u(this.rq.partenza).subtract(1,"day")))},200)}}function T4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"mat-checkbox",12),e.NdJ("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw().$implicit,T=e.oxw(2);return e.KtG(T.updateDettagli(p.oid,r.oid,a.checked))}),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.nome," ")}}function x4(i,o){if(1&i&&(e.TgZ(0,"mat-card",8)(1,"mat-card-title"),e._uU(2),e.qZA(),e.TgZ(3,"mat-card-content")(4,"div",9),e.YNc(5,T4,3,1,"div",10),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",t.nome," "),e.xp6(3),e.Q6J("ngForOf",n.tariffe)}}function Z4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,x4,6,2,"mat-card",4),e.TgZ(5,"div",5)(6,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",7),e._uU(10),e.ALo(11,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.preventivi.proposte")),e.xp6(2),e.Q6J("ngForOf",t.tipiCamere),e.xp6(2),e.Q6J("disabled",null==t.rq.dettagli||0==t.rq.dettagli.length),e.xp6(1),e.Oqu(e.lcZ(8,7,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(11,9,"globals.annulla"))}}nn.\u0275fac=function(o){return new(o||nn)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t),e.Y36(et))},nn.\u0275cmp=e.Xpm({type:nn,selectors:[["app-calcola-prezzi"]],inputs:{camera:"camera",etaBambini:"etaBambini",preventivo:"preventivo",proposta:"proposta",dettaglio:"dettaglio",dialogRef:"dialogRef"},features:[e.qOj],decls:38,vars:41,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","","required","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],[3,"startAt"],["datePickerArrivo",""],["datePickerPartenza",""],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["color","primary",3,"ngModel","ngModelChange","change"],[1,"font-weight-bold","mt-2"],[4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],["class","col-8",4,"ngIf"],[1,"col-8"],[4,"ngFor","ngForOf"],[1,"font-weight-bold","mt-3"],[1,"font-small","font-italic","font-weight-bold"],[1,"d-inline-block","mr-2"],[1,"d-inline-block"],[1,"font-small","font-italic","font-weight-bold","mb-3"],["class","col-12 color-red font-weight-bold",4,"ngIf"],[1,"font-weight-bold"],[1,"col-4","text-center"],[3,"ngClass"],["class","prezzo mr-1",4,"ngIf"],["class","sconto",4,"ngIf"],["mat-flat-button","","color","primary",1,"mt-1",3,"click"],[1,"col-12","color-red","font-weight-bold"],[1,"prezzo","mr-1"],[1,"sconto"],[1,"border","rounded-lg","mat-elevation-z1","p-3","mt-3"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"input",5),e.NdJ("ngModelChange",function(a){return t.rq.arrivo=a})("dateChange",function(){return t.onArrivoChange()}),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"mat-datepicker-toggle",6)(9,"mat-datepicker",7,8),e.qZA(),e.TgZ(11,"mat-form-field",4)(12,"input",5),e.NdJ("ngModelChange",function(a){return t.rq.partenza=a})("dateChange",function(){return t.onPartenzaChange()}),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"mat-datepicker-toggle",6)(15,"mat-datepicker",7,9),e.qZA(),e.TgZ(17,"app-view-select",10),e.NdJ("valueChange",function(a){return t.tipoCamera=a}),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"app-view-select",10),e.NdJ("valueChange",function(a){return t.tariffa=a}),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.rq.isControllaDisponibili=a})("change",function(a){return t.parametriService.setParametro("isControllaDisponibiliChecked",a.checked)}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",12)(25,"span"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.YNc(28,s4,3,3,"span",13),e.YNc(29,p4,3,3,"span",13),e.qZA(),e.TgZ(30,"div",14)(31,"button",15),e.NdJ("click",function(){return t.calcola()}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"button",16),e.NdJ("click",function(){return t.dialogRef.close()}),e._uU(35),e.ALo(36,"translate"),e.qZA()()(),e.YNc(37,v4,3,2,"div",17),e.qZA()),2&o){const n=e.MAs(10),a=e.MAs(16);e.Q6J("disableRipple",!0),e.xp6(6),e.s9C("placeholder",e.lcZ(7,25,"sbm.preventivi.arrivo")),e.Q6J("matDatepicker",n)("ngModel",t.rq.arrivo),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.arrivo)?t.today:null),e.xp6(3),e.s9C("placeholder",e.lcZ(13,27,"sbm.preventivi.partenza")),e.Q6J("matDatepicker",a)("ngModel",t.rq.partenza),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.partenza)?t.today:null),e.xp6(2),e.Q6J("dataLoader",null!=t.preventivo.portaleXAlbergo?t.apiService.getTipiCameraOTAViewSelect(t.preventivo.portaleXAlbergo.oid):t.apiService.getTipiCameraOTAAlbergoViewSelect())("value",t.tipoCamera)("placeholder",e.lcZ(18,29,"sbm.preventivi.tipoCamera")),e.xp6(2),e.Q6J("dataLoader",null!=t.preventivo.portaleXAlbergo?t.apiService.getTariffeOTAViewSelect(t.preventivo.portaleXAlbergo.oid):t.apiService.getTariffeOTAAlbergoViewSelect())("value",t.tariffa)("placeholder",e.lcZ(20,31,"sbm.preventivi.tariffa")),e.xp6(2),e.Q6J("ngModel",t.rq.isControllaDisponibili),e.xp6(1),e.Oqu(e.lcZ(23,33,"sbm.preventivi.visualizzaSoloCamereDisponibili")),e.xp6(4),e.Oqu(t.camera.numeroAdulti+" "+e.lcZ(27,35,"sbm.preventivi.adulti")),e.xp6(2),e.Q6J("ngIf",t.camera.numeroBambini>0),e.xp6(1),e.Q6J("ngIf",!!t.etaBambini),e.xp6(3),e.Oqu(e.lcZ(33,37,"sbm.preventivi.calcola")),e.xp6(3),e.Oqu(e.lcZ(36,39,"globals.annulla")),e.xp6(2),e.Q6J("ngIf",t.tariffaSelect)}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,F.aO,_.Fj,_.JJ,_.Q7,_.On,ne.d,ke.f,z.X$],styles:[".prezzo[_ngcontent-%COMP%]{font-weight:600}.prezzo-sconto[_ngcontent-%COMP%]{color:#aaa;text-decoration:line-through;font-size:13px}.sconto[_ngcontent-%COMP%]{color:#e91e63;font-size:12px}.color-red[_ngcontent-%COMP%]{color:#d9534f}"]});class an extends f.H{constructor(o){super(),this.apiService=o,this.rq=new d.pS5,this.initialized=!1}ngOnInit(){this.setIsLoading(!0);let o=d.k$g.fromFilters([new d.wn$("tipoRisorsa",c.Hp.Equal,c.Yb.Camera.toString(),c.NM.Number),new d.wn$("isDisponibile",c.Hp.IsTrue)]),t=d.k$g.fromFilter("isDisponibile",c.Hp.IsTrue);this.apiService.getTipiCameraFilter(o).subscribe(n=>{this.tipiCamere=n.data,this.apiService.getTrattamentiFilter(t).subscribe(a=>{this.tariffe=a.data.map(l=>l.trattamento),this.initialized=!0,this.setIsLoading(!1)})})}save(){null!=this.rq.dettagli&&this.rq.dettagli.length>0?(this.setIsLoading(!0),this.rq.oidCamera=this.oidCamera,this.apiService.creaProposte(this.rq).subscribe(o=>{this.matDialogRef.close(!0)})):this.showError("sbm.preventivi.selezionaOpzioni")}updateDettagli(o,t,n){let a=this.rq.dettagli.findIndex(l=>l.oidTipoCamera==o&&l.oidTrattamento==t);n?-1==a&&this.rq.dettagli.push(new d.mJZ(o,t)):a>=0&&this.rq.dettagli.splice(a,1)}}function A4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"mat-checkbox",6),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.getGiorniSelectedNumber()<=1&&r.selected?a.preventDefault():null)})("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.selected=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updatePrezzi())}),e.TgZ(2,"span",7),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"span",8),e._uU(6),e.ALo(7,"eurCurrency"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngModel",t.selected),e.xp6(2),e.Oqu(e.xi3(4,3,t.data,"dd/MM/yyyy")),e.xp6(3),e.Oqu("("+e.lcZ(7,6,t.prezzoScontato*n.dettaglio.quantita)+")")}}an.\u0275fac=function(o){return new(o||an)(e.Y36(A.s))},an.\u0275cmp=e.Xpm({type:an,selectors:[["app-genera-proposte"]],inputs:{oidCamera:"oidCamera",matDialogRef:"matDialogRef"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","pl-3 pr-3",4,"ngIf"],[1,"pl-3","pr-3"],["class","mb-3 mat-elevation-z0",4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",3,"mat-dialog-close"],[1,"mb-3","mat-elevation-z0"],[1,"row","mr-2","ml-2"],["class","col-sm-6 col-md-4 col-lg-3 overflow-hidden",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","overflow-hidden"],["color","primary",3,"change"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,Z4,12,11,"div",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.initialized))},dependencies:[m.sg,m.O5,V.FC,h.eB,qe.S$,qe.Qi,qe.mi,F.aO,z.X$]});class gi extends f.H{constructor(){super()}getGiorniSelectedNumber(){return this.giorni.filter(o=>o.selected).length}updatePrezzi(){if(this.dettaglio.sconto>0&&!this.dettaglio.isPercentuale)for(let o of this.giorni)o.prezzoScontato=o.prezzo-(this.dettaglio.importo-this.dettaglio.totale/this.dettaglio.quantita)/this.getGiorniSelectedNumber()}}function w4(i,o){1&i&&e.GkF(0)}function z4(i,o){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"momentFormat"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,e.Dn7(3,3,t.data,"ddd D MMM",n.getLocale()))," ")}}function M4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"mat-form-field",20)(2,"input",21),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.prezzo=a)})("blur",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return l.prezzo<0&&(l.prezzo=0),e.KtG(r.onPrezzoGiornoChange())}),e.ALo(3,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.s9C("placeholder",e.lcZ(3,2,"bo.preventivoProposteDettaglio.proprieta.totale")),e.Q6J("ngModel",t.prezzo)}}function q4(i,o){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}function P4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"mat-form-field",20)(2,"mat-select",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.oidTariffa=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onTariffaGiornoChange())}),e.ALo(3,"translate"),e._UZ(4,"mat-option",23),e.YNc(5,q4,2,2,"mat-option",24),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"bo.preventivoProposteDettaglio.proprieta.tariffa")),e.Q6J("ngModel",t.oidTariffa),e.xp6(2),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",n.tariffe)}}function k4(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-tab-group",7),e.NdJ("selectedTabChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onTabChange(a.index))}),e.TgZ(2,"mat-tab",8),e.ALo(3,"translate"),e.TgZ(4,"div",9),e.YNc(5,w4,1,0,"ng-container",10),e.qZA()(),e.TgZ(6,"mat-tab",8),e.ALo(7,"translate"),e.TgZ(8,"div",11)(9,"div"),e.YNc(10,z4,4,7,"div",12),e.qZA(),e.TgZ(11,"div"),e.YNc(12,M4,4,4,"div",13),e.qZA(),e.TgZ(13,"div",14),e.YNc(14,P4,6,6,"div",13),e.qZA()(),e.TgZ(15,"div",15),e._uU(16),e.ALo(17,"translate"),e.TgZ(18,"span",16),e._uU(19),e.ALo(20,"eurCurrency"),e.qZA()(),e.TgZ(21,"div",17),e._uU(22),e.ALo(23,"translate"),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw(),n=e.MAs(13);e.xp6(2),e.Q6J("label",e.lcZ(3,9,"sbm.preventivi.dettaglio")),e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("label",e.lcZ(7,11,"sbm.preventivi.prezziGiornalieri")),e.xp6(4),e.Q6J("ngForOf",t.giorniDettaglioCamera),e.xp6(2),e.Q6J("ngForOf",t.giorniDettaglioCamera),e.xp6(2),e.Q6J("ngForOf",t.giorniDettaglioCamera),e.xp6(2),e.hij(" ",e.lcZ(17,13,"sbm.preventivi.totale")+": "," "),e.xp6(3),e.Oqu(e.lcZ(20,15,t.dettaglio.totale)),e.xp6(3),e.Oqu(e.lcZ(23,17,"sbm.preventivi.impostareLaTariffa"))}}function S4(i,o){1&i&&e.GkF(0)}function y4(i,o){if(1&i&&(e.ynx(0),e.YNc(1,S4,1,0,"ng-container",10),e.BQk()),2&i){e.oxw();const t=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function J4(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-view-select",43),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dettaglio.tipoCameraOTA=a)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-view-select",43),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dettaglio.tariffaOTA=a)}),e.ALo(4,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("dataLoader",t.apiService.getTipiCameraOTAViewSelect(null!=t.dettaglio.proposta.camera.preventivo.portaleXAlbergo?t.dettaglio.proposta.camera.preventivo.portaleXAlbergo.oid:-1,null,!1))("value",t.dettaglio.tipoCameraOTA)("placeholder",e.lcZ(2,8,"bo.preventivoProposteDettaglio.proprieta.tipoCamera"))("required",!0),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTariffeOTAViewSelect(null!=t.dettaglio.proposta.camera.preventivo.portaleXAlbergo?t.dettaglio.proposta.camera.preventivo.portaleXAlbergo.oid:-1,null,!1))("value",t.dettaglio.tariffaOTA)("placeholder",e.lcZ(4,10,"bo.preventivoProposteDettaglio.proprieta.tariffa"))("required",!0)}}function E4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-select",44),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dettaglio.articolo=a)})("valueChange",function(){e.CHM(t);const a=e.oxw(2);return a.dettaglio.descrizione=a.dettaglio.articolo.nome,a.dettaglio.modalitaCalcoloPrezzo=a.dettaglio.articolo.modalitaCalcoloPrezzo,a.updateAllProposte=a.dettaglio.articolo.isAggiungiATutteLeProposte,e.KtG(a.getPrezzoArticolo())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("dataLoader",t.getArticoliViewSelect())("value",t.dettaglio.articolo)("placeholder",e.lcZ(1,4,"bo.preventivoProposteDettaglio.proprieta.articolo"))("required",!0)}}function N4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",45)(1,"mat-form-field",20)(2,"input",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dettaglio.quantita=a)})("blur",function(){e.CHM(t);const a=e.oxw(2);return a.dettaglio.quantita<0&&(a.dettaglio.quantita=0),e.KtG(a.calculateTotale(!0))}),e.ALo(3,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.s9C("placeholder",e.lcZ(3,2,"bo.preventivoProposteDettaglio.proprieta.quantita")),e.Q6J("ngModel",t.dettaglio.quantita)}}function O4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.calcolaPrezzoArticolo())}),e.TgZ(1,"i",47),e._uU(2,"euro"),e.qZA()()}}function L4(i,o){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.Q6J("value",n),e.xp6(1),e.hij(" ",t," ")}}function D4(i,o){if(1&i&&(e.TgZ(0,"button",48)(1,"span",49),e._uU(2," info "),e.qZA()()),2&i){const t=e.oxw(2);e.Q6J("matTooltip",t.dettaglio.giorniString)}}function I4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",50)(2,"mat-form-field",20)(3,"input",51),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dettaglio.data=a)})("dateChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onDataChange())}),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"mat-datepicker-toggle",52),e.TgZ(6,"mat-datepicker-toggle",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetData())}),e.TgZ(7,"mat-icon",54),e._uU(8,"clear"),e.qZA()(),e._UZ(9,"mat-datepicker",55,56),e.qZA()()()}if(2&i){const t=e.MAs(10),n=e.oxw(2);e.xp6(3),e.s9C("placeholder",e.lcZ(4,7,"bo.preventivoProposteDettaglio.proprieta.data")),e.Q6J("matDatepicker",t)("ngModel",n.dettaglio.data)("min",n.minDate)("max",n.maxDate),e.xp6(2),e.Q6J("for",t),e.xp6(4),e.Q6J("startAt",n.utility.isNullDate(n.dettaglio.data)?n.today:null)}}function Q4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"mat-checkbox",57),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.updateAllProposte=a)}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.updateAllProposte),e.xp6(1),e.Oqu(e.lcZ(3,2,"sbm.preventivi.aggiungiATutteLeProposte"))}}function U4(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",59),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.getGiorniSelectedNumber()<=1&&r.selected?a.preventDefault():null)})("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.selected=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.updateImportoArticolo())}),e.TgZ(1,"span",60),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"span",16),e._uU(5),e.ALo(6,"eurCurrency"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("ngModel",t.selected),e.xp6(2),e.Oqu(e.xi3(3,3,t.data,"dd/MM/yyyy")),e.xp6(3),e.Oqu("("+e.lcZ(6,6,t.prezzoScontato*n.dettaglio.quantita)+")")}}function Y4(i,o){if(1&i&&(e.TgZ(0,"div",9),e.YNc(1,U4,7,8,"mat-checkbox",58),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.giorni)}}gi.\u0275fac=function(o){return new(o||gi)},gi.\u0275cmp=e.Xpm({type:gi,selectors:[["app-seleziona-giorni-dialog"]],inputs:{dettaglio:"dettaglio",giorni:"giorni",dialogRef:"dialogRef"},features:[e.qOj],decls:11,vars:8,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row","mt-4"],["class","col-4",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",1,"mt-4",3,"click"],[1,"col-4"],["color","primary",1,"mr-3","mt-1",3,"ngModel","click","ngModelChange"],[1,"mr-1"],[1,"font-weight-bold"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",2),e.YNc(7,A4,8,8,"div",3),e.qZA(),e.TgZ(8,"button",4),e.NdJ("click",function(){return t.dialogRef.close(t.giorni)}),e._uU(9),e.ALo(10,"translate"),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,4,"sbm.preventivi.selezionaGiorni")),e.xp6(3),e.Q6J("ngForOf",t.giorni),e.xp6(2),e.Oqu(e.lcZ(10,6,"globals.conferma")))},dependencies:[m.sg,V.FC,h.eB,F.aO,_.JJ,_.On,m.uU,ke.f,z.X$],styles:[".giorni-container[_ngcontent-%COMP%]{max-width:400px}"]});const R4=function(i,o){return{"col-3 pr-2 pl-2":i,"col-4 pr-2":o}},F4=function(i){return{"importo-input":i}},Gc=function(i,o){return{"col-3":i,"col-4":o}},H4=function(i,o){return{"totale-input":i,"w-100":o}};function K4(i,o){if(1&i){const t=e.EpF();e.YNc(0,J4,5,12,"ng-container",2),e.YNc(1,E4,2,6,"app-view-select",25),e.TgZ(2,"mat-form-field",20)(3,"input",26),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.dettaglio.descrizione=a)}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",27),e.YNc(6,N4,4,4,"div",28),e.TgZ(7,"div",29)(8,"mat-form-field",30)(9,"input",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.dettaglio.importo=a)})("blur",function(){e.CHM(t);const a=e.oxw();return a.dettaglio.importo<0&&(a.dettaglio.importo=0),e.KtG(a.calculateTotale(!0))}),e.ALo(10,"translate"),e.qZA()(),e.YNc(11,O4,3,0,"button",32),e.qZA(),e.TgZ(12,"div",33)(13,"mat-form-field",34)(14,"input",35),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.dettaglio.sconto=a)})("blur",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.calculateTotale(!0))}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"mat-form-field",36)(17,"mat-select",37),e.NdJ("selectionChange",function(a){e.CHM(t);const l=e.oxw();return l.dettaglio.isPercentuale=1==a.value,e.KtG(l.calculateTotale(!0))}),e.YNc(18,L4,2,2,"mat-option",24),e.qZA()()(),e.TgZ(19,"div",38)(20,"mat-form-field",29)(21,"input",39),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.dettaglio.totale=a)}),e.ALo(22,"translate"),e.qZA()(),e.YNc(23,D4,3,1,"button",40),e.qZA()(),e.YNc(24,I4,11,9,"div",41),e.YNc(25,Q4,4,4,"div",42),e.YNc(26,Y4,2,1,"div",42)}if(2&i){const t=e.oxw();e.Q6J("ngIf",t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.Camera),e.xp6(1),e.Q6J("ngIf",t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.SupplementoExtra),e.xp6(2),e.s9C("placeholder",e.lcZ(4,25,"bo.preventivoProposteDettaglio.proprieta.descrizione")),e.Q6J("ngModel",t.dettaglio.descrizione),e.xp6(3),e.Q6J("ngIf",t.dettaglio.tipoDettaglioProposta!=t.enumTipoDettaglioProposta.Camera),e.xp6(1),e.Q6J("ngClass",e.WLB(33,R4,t.dettaglio.tipoDettaglioProposta!=t.enumTipoDettaglioProposta.Camera,t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.Camera)),e.xp6(1),e.Q6J("ngClass",e.VKq(36,F4,t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.SupplementoExtra&&!t.addDettaglio)),e.xp6(1),e.s9C("placeholder",e.lcZ(10,27,"bo.preventivoProposteDettaglio.proprieta.importo")),e.Q6J("ngModel",t.dettaglio.importo),e.xp6(2),e.Q6J("ngIf",t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.SupplementoExtra&&!t.addDettaglio),e.xp6(1),e.Q6J("ngClass",e.WLB(38,Gc,t.dettaglio.tipoDettaglioProposta!=t.enumTipoDettaglioProposta.Camera,t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.Camera)),e.xp6(2),e.s9C("placeholder",e.lcZ(15,29,"bo.preventivoProposteDettaglio.proprieta.sconto")),e.Q6J("ngModel",t.dettaglio.sconto)("disabled",!t.inserimentoScontiEnabled),e.xp6(3),e.Q6J("value",t.dettaglio.isPercentuale?1:0)("disabled",!t.inserimentoScontiEnabled),e.xp6(1),e.Q6J("ngForOf",t.tipoSconto),e.xp6(1),e.Q6J("ngClass",e.WLB(41,Gc,t.dettaglio.tipoDettaglioProposta!=t.enumTipoDettaglioProposta.Camera,t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.Camera)),e.xp6(1),e.Q6J("ngClass",e.WLB(44,H4,!!t.dettaglio.giorniString,!t.dettaglio.giorniString)),e.xp6(1),e.s9C("placeholder",e.lcZ(22,31,"bo.preventivoProposteDettaglio.proprieta.totale")),e.Q6J("ngModel",t.dettaglio.totale),e.xp6(2),e.Q6J("ngIf",!!t.dettaglio.giorniString),e.xp6(1),e.Q6J("ngIf",t.dettaglio.tipoDettaglioProposta!=t.enumTipoDettaglioProposta.Camera&&t.addDettaglio),e.xp6(1),e.Q6J("ngIf",t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.SupplementoExtra&&t.addDettaglio),e.xp6(1),e.Q6J("ngIf",t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.SupplementoExtra&&null!=t.giorni&&t.giorni.length>1&&t.addDettaglio)}}class ln extends f.H{constructor(o,t,n){super(),this.apiService=o,this.utility=t,this.sessionService=n,this.enumTipoDettaglioProposta=c.SM,this.tipoSconto=["\u20ac","%"],this.giorni=[],this.updateAllProposte=!1,this.numeroDecimaliGiorni=2,this.giorniDettaglioCamera=[],this.inserimentoScontiEnabled=!0}ngOnInit(){this.dettaglio.tipoDettaglioProposta==this.enumTipoDettaglioProposta.Camera?(null==this.dettaglio.tipoCameraOTA&&(this.dettaglio.tipoCameraOTA=this.risorsaDefault),null==this.dettaglio.tariffaOTA&&(this.dettaglio.tariffaOTA=this.tariffaDefault),null!=this.dettaglio.tariffaOTA&&null!=this.dettaglio.tariffaOTA.trattamento&&this.dettaglio.tariffaOTA.trattamento.tipoServizio==c.k8.Pacchetto&&(this.numeroDecimaliGiorni=4)):this.dettaglio.tipoDettaglioProposta==this.enumTipoDettaglioProposta.SupplementoExtra&&(null==this.dettaglio.articolo&&(this.setIsLoading(!0),this.getArticoliViewSelect().subscribe(t=>{this.setIsLoading(!1),t.data.length>0&&(this.dettaglio.articolo=t.data[0],this.dettaglio.descrizione=t.data[0].nome,this.dettaglio.modalitaCalcoloPrezzo=t.data[0].modalitaCalcoloPrezzo,this.updateAllProposte=t.data[0].isAggiungiATutteLeProposte,this.getPrezzoArticolo())})),this.numeroDecimaliGiorni=4),this.minDate=u(this.getDate(this.proposta.proposta.arrivo)),this.maxDate=u(this.getDate(this.proposta.proposta.partenza));let o=this.sessionService.getPermessiUtente();null!=o&&(this.inserimentoScontiEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.InserimentoScontiCrm)))}save(){if(this.dettaglio.tipoDettaglioProposta==this.enumTipoDettaglioProposta.Camera&&null!=this.dettaglio.tipoCameraOTA&&null!=this.dettaglio.tariffaOTA||this.dettaglio.tipoDettaglioProposta==this.enumTipoDettaglioProposta.SupplementoExtra&&null!=this.dettaglio.articolo||this.dettaglio.tipoDettaglioProposta!=this.enumTipoDettaglioProposta.Camera&&this.dettaglio.tipoDettaglioProposta!=this.enumTipoDettaglioProposta.SupplementoExtra&&this.dettaglio.descrizione)if(this.setIsLoading(!0),this.updateAllProposte){let o=[];for(let t of this.proposte){let n=JSON.parse(JSON.stringify(this.dettaglio));n.proposta=t.proposta,o.push(n)}this.apiService.setMultipleDettaglio(o).subscribe(t=>{for(let n of t.data.obj)n.totale=this.dettaglio.totale,n.giorniString=this.dettaglio.giorniString;this.setIsLoading(!1),this.dialogRef.close(t.data.obj)})}else this.apiService.setDettaglio(this.dettaglio).subscribe(o=>{o.data.obj.totale=this.dettaglio.totale,o.data.obj.giorniString=this.dettaglio.giorniString,this.setIsLoading(!1),this.dialogRef.close([o.data.obj])});else this.showError("globals.messages.inserireDati")}calculateTotale(o=!1){let t=this.dettaglio.totale;if(this.dettaglio.totale=this.dettaglio.importo*this.dettaglio.quantita,this.checkSconto(),this.dettaglio.sconto>0&&(this.dettaglio.isPercentuale?this.dettaglio.totale-=this.dettaglio.totale*this.dettaglio.sconto/100:this.dettaglio.totale-=this.dettaglio.sconto),t!=this.dettaglio.totale&&o&&this.dettaglio.giorni)try{let n=JSON.parse(this.dettaglio.giorni);if(null!=n&&n.length>0){this.dettaglio.giorniString="";let a=this.utility.roundTo(this.dettaglio.totale/this.dettaglio.quantita/n.length,this.numeroDecimaliGiorni);for(let l of n)l.prezzo=a,this.dettaglio.giorniString+=u(l.data).format("DD/MM/YYYY")+": "+this.getTariffaGiorno(l)+this.utility.roundTo(this.dettaglio.totale/n.length,this.numeroDecimaliGiorni)+"\u20ac\n";this.giorni.forEach(l=>l.prezzoScontato=a),this.dettaglio.giorni=JSON.stringify(n)}}catch(n){}}updatePrezziGiorni(){if(this.dettaglio.sconto>0&&!this.dettaglio.isPercentuale)for(let o of this.giorni)o.prezzoScontato=o.prezzo-this.dettaglio.sconto/this.getGiorniSelectedNumber()}checkSconto(){this.dettaglio.sconto>0?this.dettaglio.isPercentuale&&this.dettaglio.sconto>100?this.dettaglio.sconto=100:!this.dettaglio.isPercentuale&&this.dettaglio.sconto>this.dettaglio.importo*this.dettaglio.quantita&&(this.dettaglio.sconto=this.dettaglio.importo*this.dettaglio.quantita):this.dettaglio.sconto=0}getArticoliViewSelect(){let o=d.k$g.fromFilter("tipoArticolo",c.Hp.In,"("+c.ix.Extra+", "+c.ix.Supplemento+")",c.NM.Number);return this.addDettaglio&&o.addFilters(new d.wn$("isDisponibile",c.Hp.IsTrue)),o.sorting=[new d.aQR("ordinamento",c.nI.Asc)],this.apiService.getArticoliViewSelect(o,!1)}getPrezzoArticolo(o=!0){if(null!=this.dettaglio.articolo&&this.addDettaglio){this.setIsLoading(!0);let t=new d.UvZ;t.oidArticolo=this.dettaglio.articolo.oid,t.oidProposta=this.dettaglio.proposta.oid,t.sconto=this.dettaglio.sconto>0?this.dettaglio.isPercentuale?this.dettaglio.sconto:this.dettaglio.importo-this.dettaglio.totale/this.dettaglio.quantita:0,t.isScontoPercentuale=this.dettaglio.isPercentuale,this.apiService.getPrezzoArticolo(t).subscribe(n=>{null!=n.data&&null!=n.data.giorni&&n.data.giorni.length>0&&(o&&(1==n.data.giorni.length?this.dettaglio.data=n.data.giorni[0].data:this.dettaglio.data=null),this.dettaglio.articolo.tipoArticolo==c.ix.Supplemento&&1==this.dettaglio.articolo.isApplicaATuttiComponenti?this.dettaglio.quantita=this.numeroPax:this.dettaglio.quantita=1,this.giorni=n.data.giorni,this.updateImportoArticolo()),this.setIsLoading(!1)})}}updateImportoArticolo(){this.dettaglio.importo=0,this.dettaglio.giorniString="";let o=[];this.updatePrezziGiorni();for(let t of this.giorni)if(t.selected){this.dettaglio.importo+=t.prezzo,this.dettaglio.giorniString+=u(t.data).format("DD/MM/YYYY")+": "+this.utility.roundTo(t.prezzoScontato*this.dettaglio.quantita,this.numeroDecimaliGiorni)+"\u20ac\n";let n=new d.qSg;n.data=t.data,n.prezzo=t.prezzoScontato,o.push(n)}this.dettaglio.giorni=JSON.stringify(o),this.calculateTotale()}calcolaPrezzoArticolo(){if(null!=this.dettaglio.articolo){this.setIsLoading(!0);let o=new d.UvZ;o.oidArticolo=this.dettaglio.articolo.oid,o.oidProposta=this.dettaglio.proposta.oid,o.sconto=this.dettaglio.sconto>0?this.dettaglio.isPercentuale?this.dettaglio.sconto:this.dettaglio.importo-this.dettaglio.totale/this.dettaglio.quantita:0,o.isScontoPercentuale=this.dettaglio.isPercentuale,this.apiService.getPrezzoArticolo(o).subscribe(t=>{if(null!=t.data&&null!=t.data.giorni&&t.data.giorni.length>0)if(1==t.data.giorni.length)this.dettaglio.articolo.tipoArticolo==c.ix.Supplemento&&1==this.dettaglio.articolo.isApplicaATuttiComponenti?this.dettaglio.quantita=this.numeroPax:this.dettaglio.quantita=1,this.dettaglio.data=t.data.giorni[0].data,this.giorni=t.data.giorni,this.updateImportoArticolo();else{let n=new d.Zpt;n.width="60vw";let a=this.showModalDialog(gi,n),l=a.componentInstance;l.giorni=t.data.giorni,l.dettaglio=this.dettaglio,l.dialogRef=a,a.afterClosed().subscribe(r=>{null!=r&&(this.dettaglio.articolo.tipoArticolo==c.ix.Supplemento&&1==this.dettaglio.articolo.isApplicaATuttiComponenti?this.dettaglio.quantita=this.numeroPax:this.dettaglio.quantita=1,this.dettaglio.data=null,this.giorni=t.data.giorni,this.updateImportoArticolo())})}this.setIsLoading(!1)})}}getGiorniSelectedNumber(){return this.giorni.filter(o=>o.selected).length}onDataChange(){setTimeout(()=>{this.dettaglio.data=this.getDate(this.dettaglio.data),this.dettaglio.giorni=JSON.stringify([new d.qSg(this.dettaglio.data,this.utility.roundTo(this.dettaglio.totale/this.dettaglio.quantita,this.numeroDecimaliGiorni))]),this.dettaglio.giorniString=u(this.dettaglio.data).format("DD/MM/YYYY")+": "+this.utility.roundTo(this.dettaglio.totale,this.numeroDecimaliGiorni)+"\u20ac\n",this.giorni=[new d.T0K(this.dettaglio.data,this.utility.roundTo(this.dettaglio.importo*this.dettaglio.quantita,this.numeroDecimaliGiorni),this.utility.roundTo(this.dettaglio.totale,this.numeroDecimaliGiorni))]},200)}resetData(){this.dettaglio.data&&(this.dettaglio.data=null,this.getPrezzoArticolo(!1))}onTabChange(o){if(1==o){this.giorniDettaglioCamera=[];try{let t=JSON.parse(this.dettaglio.giorni);null!=t&&(this.giorniDettaglioCamera=t,this.giorniDettaglioCamera.forEach(n=>n.prezzo=this.utility.roundTo(n.prezzo,this.numeroDecimaliGiorni)))}catch(t){}}}onPrezzoGiornoChange(){this.dettaglio.giorni=JSON.stringify(this.giorniDettaglioCamera),this.dettaglio.totale=this.giorniDettaglioCamera.reduce((o,t)=>o+t.prezzo,0),this.dettaglio.sconto>0?this.dettaglio.isPercentuale?this.dettaglio.importo=100*this.dettaglio.totale/(100-this.dettaglio.sconto):this.dettaglio.importo=this.dettaglio.totale+this.dettaglio.sconto:this.dettaglio.importo=this.dettaglio.totale,this.dettaglio.giorniString="";for(let o of this.giorniDettaglioCamera)this.dettaglio.giorniString+=u(o.data).format("DD/MM/YYYY")+": "+this.getTariffaGiorno(o)+this.utility.roundTo(o.prezzo,this.numeroDecimaliGiorni)+"\u20ac\n"}onTariffaGiornoChange(){this.dettaglio.giorni=JSON.stringify(this.giorniDettaglioCamera),this.dettaglio.giorniString="";for(let o of this.giorniDettaglioCamera)this.dettaglio.giorniString+=u(o.data).format("DD/MM/YYYY")+": "+this.getTariffaGiorno(o)+this.utility.roundTo(o.prezzo,this.numeroDecimaliGiorni)+"\u20ac\n"}getTariffaGiorno(o){if(null!=o&&null!=o.oidTariffa&&o.oidTariffa>0){let t=this.utility.findItemByOid(this.tariffe,o.oidTariffa);if(null!=t)return t.descrizione+" "}return""}}function G4(i,o){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.preventivi.selezionataDalCliente")))}function $4(i,o){if(1&i&&(e.TgZ(0,"div",42),e.YNc(1,G4,3,3,"span",43),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.proposta.dataConferma)}}function B4(i,o){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.preventivi.selezionataDalCliente")))}function V4(i,o){if(1&i&&(e.TgZ(0,"div",45),e.YNc(1,B4,3,3,"span",43),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.proposta.dataConferma)}}ln.\u0275fac=function(o){return new(o||ln)(e.Y36(A.s),e.Y36(C.t),e.Y36(j.m))},ln.\u0275cmp=e.Xpm({type:ln,selectors:[["app-modifica-dettaglio"]],inputs:{risorse:"risorse",tariffe:"tariffe",proposta:"proposta",proposte:"proposte",dettaglio:"dettaglio",tariffaDefault:"tariffaDefault",risorsaDefault:"risorsaDefault",addDettaglio:"addDettaglio",numeroPax:"numeroPax",dialogRef:"dialogRef"},features:[e.qOj],decls:14,vars:9,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],["modificaDettaglioTemplate",""],[1,"dialog-tab-group",3,"selectedTabChange"],[3,"label"],[1,"mt-3"],[4,"ngTemplateOutlet"],[1,"w-100","overflow-auto","text-nowrap","mt-3"],["class","giorno-col data font-weight-bold pb-3",4,"ngFor","ngForOf"],["class","giorno-col",4,"ngFor","ngForOf"],[1,"mt-n2"],[1,"totale","mt-2"],[1,"font-weight-bold"],[1,"impostareLaTariffa","mt-3","color-pink","font-weight-bold"],[1,"giorno-col","data","font-weight-bold","pb-3"],[1,"giorno-col"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange","blur"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange",4,"ngIf"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],[1,"row","no-gutters"],["class","col-3 pr-2",4,"ngIf"],[3,"ngClass"],[1,"w-100",3,"ngClass"],["autocompleteOff","","type","number","matInput","",1,"text-right",3,"placeholder","ngModel","ngModelChange","blur"],["mat-icon-button","","class","align-middle calcola-button ml-2",3,"click",4,"ngIf"],[1,"pr-2","pl-2",3,"ngClass"],[1,"align-middle","d-inline-block","sconto-input"],["autocompleteOff","","type","number","matInput","",1,"text-right",3,"placeholder","ngModel","disabled","ngModelChange","blur"],[1,"align-middle","d-inline-block","text-right","percentuale-input"],[3,"value","disabled","selectionChange"],[1,"pl-2",3,"ngClass"],["autocompleteOff","","type","number","matInput","","readonly","","disabled","",1,"text-right","font-weight-bold",3,"placeholder","ngModel","ngModelChange"],["mat-icon-button","","class","align-middle ml-2 info-button mb-1","matTooltipPosition","below","matTooltipClass","giorni-tooltip-class",3,"matTooltip",4,"ngIf"],["class","row no-gutters",4,"ngIf"],["class","mt-3",4,"ngIf"],["displayMember","descrizione",3,"dataLoader","value","placeholder","required","valueChange"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange"],[1,"col-3","pr-2"],["mat-icon-button","",1,"align-middle","calcola-button","ml-2",3,"click"],[1,"material-icons","calcola-icon"],["mat-icon-button","","matTooltipPosition","below","matTooltipClass","giorni-tooltip-class",1,"align-middle","ml-2","info-button","mb-1",3,"matTooltip"],[1,"material-icons","info-icon"],[1,"col-6"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","min","max","ngModelChange","dateChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],[3,"startAt"],["datePickerData",""],["color","primary",3,"ngModel","ngModelChange"],["color","primary","class","mr-3 mt-1",3,"ngModel","click","ngModelChange",4,"ngFor","ngForOf"],["color","primary",1,"mr-3","mt-1",3,"ngModel","click","ngModelChange"],[1,"mr-1"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,k4,24,19,"ng-container",2),e.YNc(4,y4,2,1,"ng-container",2),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return t.save()}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return t.dialogRef.close()}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.YNc(12,K4,27,47,"ng-template",null,6,e.W1O)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.Camera||t.dettaglio.tipoDettaglioProposta==t.enumTipoDettaglioProposta.Pax),e.xp6(1),e.Q6J("ngIf",t.dettaglio.tipoDettaglioProposta!=t.enumTipoDettaglioProposta.Camera&&t.dettaglio.tipoDettaglioProposta!=t.enumTipoDettaglioProposta.Pax),e.xp6(3),e.Oqu(e.lcZ(8,5,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(11,7,"globals.annulla")))},dependencies:[m.mk,m.sg,m.O5,m.tP,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,g.x8,ee.SK,ee.R7,Ue.Hw,F.aO,q.Kd,_.Fj,_.wV,_.JJ,_.Q7,_.On,ne.d,m.rS,m.uU,ke.f,K.H,z.X$],styles:[".percentuale-input[_ngcontent-%COMP%]{width:40px}.sconto-input[_ngcontent-%COMP%]{width:calc(100% - 40px)}.totale-input[_ngcontent-%COMP%]{width:calc(100% - 30px)}.importo-input[_ngcontent-%COMP%]{width:calc(100% - 30px)!important}.info-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.info-icon[_ngcontent-%COMP%]{font-size:20px;line-height:20px}.calcola-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.calcola-icon[_ngcontent-%COMP%]{font-size:20px;line-height:20px}  .giorni-tooltip-class{font-size:11px!important;white-space:pre!important;max-width:unset!important}.giorno-col[_ngcontent-%COMP%]{width:130px;text-align:center;display:inline-block;padding-right:.5rem;padding-left:.5rem}.data[_ngcontent-%COMP%], .impostareLaTariffa[_ngcontent-%COMP%], .totale[_ngcontent-%COMP%]{font-size:14px}"]});const X4=function(i){return{"mt-3":i}},j4=function(i,o){return{"col-md-3":i,"col-md-4 text-md-center":o}},W4=function(i,o){return{"col-md-2":i,"col-md-4 text-md-center":o}};function ez(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._uU(2),e.qZA(),e.YNc(3,$4,2,1,"div",37),e.TgZ(4,"div",38),e._uU(5),e.ALo(6,"eurCurrency"),e.qZA(),e.YNc(7,V4,2,1,"div",39),e.TgZ(8,"div",40)(9,"mat-checkbox",41),e.NdJ("change",function(a){const r=e.CHM(t).index,p=e.oxw().index,T=e.oxw();return a.checked&&(T.selected[p]=r),e.KtG(T.calculateCaparra())}),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw().index,l=e.oxw();e.Q6J("ngClass",e.VKq(11,X4,n>0)),e.xp6(2),e.hij(" ",n+1+". "+t.proposta.descrizione," "),e.xp6(1),e.Q6J("ngIf",l.stato==l.enumStatoPreventivo.Accettato),e.xp6(1),e.Q6J("ngClass",e.WLB(13,j4,l.stato==l.enumStatoPreventivo.Accettato,l.stato!=l.enumStatoPreventivo.Accettato)),e.xp6(1),e.hij(" ",e.lcZ(6,9,t.proposta.totaleScontato)," "),e.xp6(2),e.Q6J("ngIf",l.stato==l.enumStatoPreventivo.Accettato),e.xp6(1),e.Q6J("ngClass",e.WLB(16,W4,l.stato==l.enumStatoPreventivo.Accettato,l.stato!=l.enumStatoPreventivo.Accettato)),e.xp6(1),e.Q6J("checked",l.selected[a]==n)("disabled",l.selected[a]==n)}}function tz(i,o){if(1&i&&(e.TgZ(0,"mat-tab",32),e.ALo(1,"translate"),e.TgZ(2,"div",33),e.YNc(3,ez,10,19,"div",34),e.qZA()()),2&i){const t=o.$implicit,n=o.index;e.Q6J("label",e.lcZ(1,2,"sbm.preventivi.camera")+" "+(n+1)),e.xp6(3),e.Q6J("ngForOf",t.proposte)}}function iz(i,o){if(1&i&&(e.TgZ(0,"div",46),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"eurCurrency"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi.caparra")+": "+e.lcZ(3,3,t.caparraEuro)," ")}}function oz(i,o){if(1&i&&(e.TgZ(0,"mat-option",50),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.nome)}}const nz=function(i){return{"color-pink":i}};function az(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",17)(1,"mat-select",47,48),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.oidModalitaPagamento=a)}),e.ALo(3,"translate"),e.TgZ(4,"mat-checkbox",49),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(2),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClick(l))}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,oz,2,2,"mat-option",16),e.qZA()()}if(2&i){const t=e.MAs(2),n=e.oxw();e.xp6(1),e.Q6J("placeholder",e.lcZ(3,7,"sbm.preventivi.modalitaPagamentoAbilitate"))("ngModel",n.oidModalitaPagamento),e.xp6(3),e.Q6J("ngClass",e.VKq(11,nz,n.isAllSelected(t)))("checked",n.isAllSelected(t))("indeterminate",!n.isAllSelected(t)&&!n.isAllDeselected(t)),e.xp6(1),e.hij(" ",e.lcZ(6,9,"globals.selezionaDeselezionaTutti"),""),e.xp6(2),e.Q6J("ngForOf",n.modalitaPagamento)}}function lz(i,o){if(1&i&&(e.TgZ(0,"mat-option",50),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.Q6J("value",n),e.xp6(1),e.hij(" ",t," ")}}function rz(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-select",51),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.template=a)}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesRQ))("value",t.template)("placeholder",e.lcZ(1,3,"sbm.preventivi.template"))}}function cz(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",52),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.isInviaEmailHotel=a)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngModel",t.rq.isInviaEmailHotel),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.preventivi.inviaEmailHotel"))}}class hi extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.oidModalitaPagamento=[],this.selected=[],this.rq=new d.t8f,this.enumStatoPreventivo=c.N4,this.tipoCaparra=["\u20ac","%"],this.getTemplatesRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.Equal,c.hQ.PreventivoRichiestaCaparra.toString(),c.NM.Number),this.caparraEuro=0}ngOnInit(){if(this.camere.length>0){this.stato=this.camere[0].camera.preventivo.statoPreventivo;for(let o of this.camere){let t=o.proposte.findIndex(n=>null!=n.proposta.dataConferma);-1==t?this.selected.push(0):this.selected.push(t)}this.calculateCaparra(),this.isAccettaConPagamentoImmediato?(this.rq.isInviaEmailPreventivoPrenotato=!0,this.rq.isRichiediPagamento=!1):(this.rq.isRichiediPagamento=!0,this.rq.isInviaEmailPreventivoPrenotato=null)}this.rq.isInviaEmailHotel=!1}prenota(){let o=0;this.rq.oidProposte=[];for(let t of this.selected)this.rq.oidProposte.push(this.camere[o].proposte[t].proposta.oid),o++;this.rq.oidModalitaPagamento=this.oidModalitaPagamento.join(";"),this.rq.oidTemplate=null!=this.template?this.template.oid:-1,this.rq.dataScadenzaCaparra=this.getDate(this.rq.dataScadenzaCaparra),this.dialogRef.close(this.rq)}onSelectDeselectAllClick(o){this.isAllSelected(o)?this.oidModalitaPagamento=[]:this.oidModalitaPagamento=this.modalitaPagamento.map(t=>t.oid)}isAllSelected(o){return o.selected.length==this.modalitaPagamento.length}isAllDeselected(o){return 0==o.selected.length}onCaparraChange(){null!=this.rq.caparra&&(this.rq.isCaparraPercentuale?this.rq.caparra=this.utility.clamp(this.rq.caparra,0,100):this.rq.caparra=this.utility.clamp(this.rq.caparra,0)),this.calculateCaparra()}calculateCaparra(){let o=this.caparra,t=this.isCaparraPercentuale;if(null!=this.rq.caparra&&(o=this.rq.caparra,t=this.rq.isCaparraPercentuale),o>0){let n=0,a=0;for(let l of this.selected)n+=this.camere[a].proposte[l].proposta.totaleScontato,a++;this.caparraEuro=t?n*o/100:o,this.caparraEuro=Math.min(this.caparraEuro,n)}else this.caparraEuro=0}}function sz(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function pz(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6)(2,"div",7)(3,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.richiesta.portaleXAlbergo=a)}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",7)(6,"mat-form-field",9)(7,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.richiesta.tipoRichiesta=a)}),e.ALo(8,"translate"),e.YNc(9,sz,3,4,"mat-option",11),e.ALo(10,"selectEnum"),e.qZA()()()(),e.TgZ(11,"div",6)(12,"div",7)(13,"mat-form-field",9)(14,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.richiesta.dal=a)})("dateChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onArrivoChange())}),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"mat-datepicker-toggle",13)(17,"mat-datepicker",14,15),e.qZA()(),e.TgZ(19,"div",7)(20,"mat-form-field",9)(21,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.richiesta.al=a)})("dateChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPartenzaChange())}),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"mat-datepicker-toggle",13)(24,"mat-datepicker",14,16),e.qZA()()(),e.TgZ(26,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.richiesta.motivoViaggio=a)}),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",17),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"div",18)(32,"mat-form-field",19)(33,"textarea",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.richiesta.note=a)}),e.qZA()()(),e.BQk()}if(2&i){const t=e.MAs(18),n=e.MAs(25),a=e.oxw();e.xp6(3),e.Q6J("dataLoader",a.apiService.getPortaliXAlbergoViewSelect(a.getPortaliRQ,!1))("value",a.richiesta.portaleXAlbergo)("placeholder",e.lcZ(4,21,"bo.richiesta.proprieta.portaleXAlbergo")),e.xp6(4),e.Q6J("ngModel",a.richiesta.tipoRichiesta)("placeholder",e.lcZ(8,23,"bo.richiesta.proprieta.tipoRichiesta")),e.xp6(2),e.Q6J("ngForOf",e.xi3(10,25,a.enumTipoRichiesta,"tipoRichiestaPreventivo")),e.xp6(5),e.s9C("placeholder",e.lcZ(15,28,"bo.richiesta.proprieta.dal")),e.Q6J("matDatepicker",t)("ngModel",a.richiesta.dal),e.xp6(2),e.Q6J("for",t),e.xp6(1),e.Q6J("startAt",a.utility.isNullDate(a.richiesta.dal)?a.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(22,30,"bo.richiesta.proprieta.al")),e.Q6J("matDatepicker",n)("ngModel",a.richiesta.al),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",a.utility.isNullDate(a.richiesta.al)?a.today:null),e.xp6(2),e.Q6J("dataLoader",a.apiService.getMotiviViaggioViewSelect())("value",a.richiesta.motivoViaggio)("placeholder",e.lcZ(27,32,"bo.richiesta.proprieta.motivoViaggio")),e.xp6(3),e.Oqu(e.lcZ(30,34,"bo.richiesta.proprieta.note")),e.xp6(4),e.Q6J("ngModel",a.richiesta.note)}}function dz(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(3).$implicit,r=e.oxw(2);return a.stopPropagation(),e.KtG(r.deleteCamera(l))}),e.TgZ(1,"i",32),e._uU(2,"delete"),e.qZA()()}}function mz(i,o){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.YNc(3,dz,3,0,"button",30)),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,2,"sbm.preventivi.camera")+" "+n.getCameraIndex(t)," "),e.xp6(2),e.Q6J("ngIf",n.isDeleteVisible())}}function _z(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",7)(2,"app-view-select",34),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw(2);return e.KtG(r.richiesta.camere[l].tipoCameraOTA=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",7)(5,"app-view-select",34),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw(2);return e.KtG(r.richiesta.camere[l].tariffaOTA=a)}),e.ALo(6,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2).index,n=e.oxw(2);e.xp6(2),e.Q6J("dataLoader",n.apiService.getTipiCameraOTAViewSelect(null!=n.richiesta.portaleXAlbergo?n.richiesta.portaleXAlbergo.oid:-1))("forceDownload",!0)("value",n.richiesta.camere[t].tipoCameraOTA)("placeholder",e.lcZ(3,8,"bo.richiestaCamere.proprieta.tipoCameraOTA")),e.xp6(3),e.Q6J("dataLoader",n.apiService.getTariffeOTAViewSelect(null!=n.richiesta.portaleXAlbergo?n.richiesta.portaleXAlbergo.oid:-1))("forceDownload",!0)("value",n.richiesta.camere[t].tariffaOTA)("placeholder",e.lcZ(6,10,"bo.richiestaCamere.proprieta.tariffaOTA"))}}function uz(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&i){const t=e.oxw().index;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function gz(i,o){if(1&i&&(e.ynx(0),e.YNc(1,uz,2,2,"mat-option",37),e.BQk()),2&i){const t=o.index,n=e.oxw().$implicit,a=e.oxw(4);e.xp6(1),e.Q6J("ngIf",n.tipo!=a.enumTipoComponentePrenotazione.Adulto||t>0)}}function hz(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",35),e._uU(2),e.qZA(),e.TgZ(3,"div",7)(4,"mat-form-field")(5,"mat-select",36),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.quantita=a)}),e.ALo(6,"translate"),e.YNc(7,gz,2,1,"ng-container",23),e.qZA()()()()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(2),e.hij(" ",t.riduzione.descrizione," "),e.xp6(3),e.Q6J("placeholder",e.lcZ(6,4,"sbm.preventivi.quantita"))("ngModel",t.quantita),e.xp6(2),e.Q6J("ngForOf",n.utility.counter(11))}}function fz(i,o){if(1&i&&(e.TgZ(0,"mat-tab"),e.YNc(1,mz,4,4,"ng-template",25),e.TgZ(2,"div",26),e.YNc(3,_z,7,12,"div",27),e.YNc(4,hz,8,6,"div",28),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",null!=n.richiesta&&null==n.richiesta.preventivo),e.xp6(1),e.Q6J("ngForOf",t.pax)}}function Cz(i,o){if(1&i&&(e.ynx(0),e.YNc(1,fz,5,2,"mat-tab",2),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.isDeleted)}}function bz(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.stopPropagation(),e.KtG(l.addCamera())}),e.TgZ(1,"i",38),e._uU(2,"add_circle_outline"),e.qZA()()}}function vz(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-group",22),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tabIndex=a)}),e.YNc(1,Cz,2,1,"ng-container",23),e.TgZ(2,"mat-tab",24),e.YNc(3,bz,3,0,"ng-template",25),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("selectedIndex",t.tabIndex),e.xp6(1),e.Q6J("ngForOf",t.camere),e.xp6(1),e.Q6J("disabled",!0)}}hi.\u0275fac=function(o){return new(o||hi)(e.Y36(A.s),e.Y36(C.t))},hi.\u0275cmp=e.Xpm({type:hi,selectors:[["app-prenota-dialog"]],inputs:{caparra:"caparra",isCaparraPercentuale:"isCaparraPercentuale",isAccettaConPagamentoImmediato:"isAccettaConPagamentoImmediato",camere:"camere",modalitaPagamento:"modalitaPagamento",oidModalitaPagamento:"oidModalitaPagamento",template:"template",dialogRef:"dialogRef"},features:[e.qOj],decls:50,vars:40,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"mb-4"],[1,"dialog-tab-group"],[3,"label",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col-12","col-md-6"],[3,"ngModel","ngModelChange"],["color","primary",1,"d-inline-block","mt-4",3,"value","change"],["class","mt-3 font-weight-bold",4,"ngIf"],[1,"font-italic","small","mt-3","mb-3"],["class","w-100",4,"ngIf"],[1,"align-middle","caparra-input"],["autocompleteOff","","type","number","matInput","",3,"placeholder","nullable","ngModel","ngModelChange","blur"],[1,"align-middle","caparra-tipo-input"],[3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["dataScadenzaCaparra",""],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange",4,"ngIf"],[3,"ngModel","ngModelChange","change"],[1,"mt-3"],["color","primary",3,"value"],["color","primary","class","ml-4",3,"ngModel","ngModelChange",4,"ngIf"],[1,"mt-2"],[1,"font-italic","small","mt-3"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],[3,"label"],[1,"pt-3","pb-3"],["class","row mr-0 ml-0",3,"ngClass",4,"ngFor","ngForOf"],[1,"row","mr-0","ml-0",3,"ngClass"],[1,"col-12","col-md-4","font-weight-bold"],["class","col-12 d-block d-md-none",4,"ngIf"],[1,"col-6","mt-1","mt-md-0","text-left",3,"ngClass"],["class","col-3 p-0 d-none d-md-block",4,"ngIf"],[1,"col-6","mt-1","mt-md-0","text-right",3,"ngClass"],["color","primary",3,"checked","disabled","change"],[1,"col-12","d-block","d-md-none"],["class","selezionata",4,"ngIf"],[1,"selezionata"],[1,"col-3","p-0","d-none","d-md-block"],[1,"mt-3","font-weight-bold"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["select",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",1,"ml-4",3,"ngModel","ngModelChange"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-tab-group",3),e.YNc(7,tz,4,4,"mat-tab",4),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"mat-radio-group",7),e.NdJ("ngModelChange",function(a){return t.rq.isRichiediPagamento=a}),e.TgZ(11,"mat-radio-button",8),e.NdJ("change",function(){return t.rq.isInviaEmailPreventivoPrenotato=null}),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.YNc(14,iz,4,5,"div",9),e.TgZ(15,"div",10),e._uU(16," Impostando un importo nel campo caparra la prenotazione verr\xe0 creata con quel valore indipendentemente da quello che prevede la modalit\xe0 di pagamento. Lasciare il campo vuoto se si vuole usare il valore previsto nella modalit\xe0 di pagamento "),e.qZA()(),e.TgZ(17,"div",6),e.YNc(18,az,8,13,"mat-form-field",11),e.TgZ(19,"mat-form-field",12)(20,"input",13),e.NdJ("ngModelChange",function(a){return t.rq.caparra=a})("blur",function(){return t.onCaparraChange()}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"mat-form-field",14)(23,"mat-select",15),e.NdJ("selectionChange",function(a){return t.rq.isCaparraPercentuale=1==a.value,t.onCaparraChange()}),e.YNc(24,lz,2,2,"mat-option",16),e.qZA()(),e.TgZ(25,"mat-form-field",17)(26,"input",18),e.NdJ("ngModelChange",function(a){return t.rq.dataScadenzaCaparra=a}),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"mat-datepicker-toggle",19)(29,"mat-datepicker",20,21),e.TgZ(31,"mat-datepicker-toggle",22),e.NdJ("click",function(){return t.rq.dataScadenzaCaparra=null}),e.TgZ(32,"mat-icon",23),e._uU(33,"clear"),e.qZA()()(),e.YNc(34,rz,2,5,"app-view-select",24),e.qZA()(),e.TgZ(35,"mat-radio-group",25),e.NdJ("ngModelChange",function(a){return t.rq.isInviaEmailPreventivoPrenotato=a})("change",function(){return t.rq.isRichiediPagamento=!1,t.oidModalitaPagamento=[],t.template=null}),e.TgZ(36,"div",26)(37,"mat-radio-button",27),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.YNc(40,cz,3,4,"mat-checkbox",28),e.qZA(),e.TgZ(41,"div",29)(42,"mat-radio-button",27),e._uU(43),e.ALo(44,"translate"),e.qZA()()(),e.TgZ(45,"div",30),e._uU(46," Prenotando senza richiedere la caparra la prenotazione sar\xe0 confermata immediatamente\n"),e.qZA(),e.TgZ(47,"button",31),e.NdJ("click",function(){return t.prenota()}),e._uU(48),e.ALo(49,"translate"),e.qZA()),2&o){const n=e.MAs(30);e.Q6J("disableRipple",!0),e.xp6(4),e.hij(" ",e.lcZ(5,26,"sbm.preventivi.selezionaProposte"),"\n"),e.xp6(3),e.Q6J("ngForOf",t.camere),e.xp6(3),e.Q6J("ngModel",t.rq.isRichiediPagamento),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(13,28,"sbm.preventivi.richiediPagamentoCaparra")),e.xp6(2),e.Q6J("ngIf",t.caparraEuro>0),e.xp6(4),e.Q6J("ngIf",null!=t.modalitaPagamento&&t.modalitaPagamento.length>0&&t.rq.isRichiediPagamento),e.xp6(2),e.s9C("placeholder",e.lcZ(21,30,"sbm.preventivi.caparra")),e.Q6J("nullable",!0)("ngModel",t.rq.caparra),e.xp6(3),e.Q6J("value",t.rq.isCaparraPercentuale?1:0),e.xp6(1),e.Q6J("ngForOf",t.tipoCaparra),e.xp6(2),e.s9C("placeholder",e.lcZ(27,32,"sbm.preventivi.dataScadenzaCaparra")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dataScadenzaCaparra),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.dataScadenzaCaparra)?t.today:null),e.xp6(5),e.Q6J("ngIf",t.rq.isRichiediPagamento),e.xp6(1),e.Q6J("ngModel",t.rq.isInviaEmailPreventivoPrenotato),e.xp6(2),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(39,34,"sbm.preventivi.prenotaConInvioEmail")),e.xp6(2),e.Q6J("ngIf",t.rq.isInviaEmailPreventivoPrenotato),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(44,36,"sbm.preventivi.prenotaSenzaInvioEmail")),e.xp6(5),e.Oqu(e.lcZ(49,38,"globals.conferma"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,He.OY,He.vy,g.x8,ee.SK,ee.R7,Ue.Hw,F.aO,_.Fj,_.wV,_.JJ,_.On,ne.d,ke.f,z.X$],styles:[".selezionata[_ngcontent-%COMP%]{font-size:13px;color:#e91e63}.caparra-input[_ngcontent-%COMP%]{width:calc(100% - 30px)}.caparra-tipo-input[_ngcontent-%COMP%]{width:30px}"]});class fi extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.enumTipoComponentePrenotazione=c.dE,this.camere=[],this.getPortaliRQ=d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number),this.riduzioni=[],this.enumTipoRichiesta=c.GY,this.tabIndex=0}ngOnInit(){this.setIsLoading(!0);let o=[];for(let t of this._camere){let n=new d.S5r;n.pax=[],n.isDeleted=!1;for(let a of t){let l=new d.bNc;l.tipo=a.tipo,l.anni=a.anni,l.quantita=a.quantita,l.riduzione=a.riduzione,n.pax.push(l)}o.push(n)}this.apiService.getRiduzioniFilter(d.k$g.fromFilters([new d.wn$("tipoComponentePrenotazione",c.Hp.In,"("+c.dE.Adulto+", "+c.dE.Bambino+", "+c.dE.Enfant+")",c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("tipoComponentePrenotazione",c.nI.Asc))).subscribe(t=>{this.riduzioni=t.data;for(let n of o){let a=new d.S5r;a.pax=[],a.isDeleted=!1,this.camere.push(a)}for(let n of this.riduzioni){let a=0;for(let l of o){let r=l.pax.filter(T=>null!=T.riduzione&&T.riduzione.oid==n.oid),p=new d.bNc;p.tipo=n.tipoComponentePrenotazione,p.riduzione=n,r.length>0?p.quantita=r.reduce((T,L)=>T+L.quantita,0):p.quantita=p.tipo==c.dE.Adulto?1:0,this.camere[a].pax.push(p),a++}}this.setIsLoading(!1)})}save(){if(this.setIsLoading(!0),null!=this.oidPreventivo){let o=new d.feK;o.oidPreventivo=this.oidPreventivo,o.camere=this.camere,this.apiService.updatePaxPreventivo(o).subscribe(()=>{this.dialogRef.close(!0)})}else if(null!=this.richiesta){let o=new d.iNp;o.oidRichiesta=this.richiesta.oid,o.camere=this.camere,this.apiService.updatePaxRichiesta(o).subscribe(t=>{null==this.richiesta.preventivo?(null!=t.data&&t.data.length==this.richiesta.camere.length&&this.richiesta.camere.forEach((n,a)=>n.oid=t.data[a]),this.apiService.setRichiestaCamere(this.richiesta).subscribe(n=>{this.dialogRef.close(n.data.obj)})):this.dialogRef.close(this.richiesta)})}}onArrivoChange(){setTimeout(()=>{this.richiesta.dal=this.getDate(this.richiesta.dal),u(this.richiesta.dal)<u().startOf("day")&&(this.richiesta.dal=this.getDate(u())),(null==this.richiesta.al||u(this.richiesta.dal)>=u(this.richiesta.al))&&(this.richiesta.al=this.getDate(u(this.richiesta.dal).add(1,"day")))},200)}onPartenzaChange(){setTimeout(()=>{this.richiesta.al=this.getDate(this.richiesta.al),u(this.richiesta.al)<u().add(1,"day").startOf("day")&&(this.richiesta.al=this.getDate(u().add(1,"day"))),(null==this.richiesta.dal||u(this.richiesta.dal)>=u(this.richiesta.al))&&(this.richiesta.dal=this.getDate(u(this.richiesta.al).subtract(1,"day")))},200)}deleteCamera(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{o.isDeleted=!0,this.tabIndex=0},t=>{})}addCamera(){let o=new d.S5r;o.pax=[],o.isDeleted=!1;for(let t of this.riduzioni){let n=new d.bNc;n.tipo=t.tipoComponentePrenotazione,n.riduzione=t,n.quantita=t.tipoComponentePrenotazione==c.dE.Adulto?1:0,o.pax.push(n)}null!=this.richiesta&&null==this.richiesta.preventivo&&this.richiesta.camere.push(new v.AXd),this.camere.push(o),this.tabIndex=this.camere.length-1}isDeleteVisible(){return this.camere.filter(o=>!o.isDeleted).length>1}getCameraIndex(o){let t=1;for(let n of this.camere.filter(a=>!a.isDeleted)){if(n==o)return t;t++}return-1}}fi.\u0275fac=function(o){return new(o||fi)(e.Y36(A.s),e.Y36(C.t))},fi.\u0275cmp=e.Xpm({type:fi,selectors:[["app-modifica-pax-modal"]],inputs:{oidPreventivo:"oidPreventivo",richiesta:"richiesta",_camere:"_camere",dialogRef:"dialogRef"},features:[e.qOj],decls:9,vars:6,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],["class","dialog-tab-group",3,"selectedIndex","selectedIndexChange",4,"ngIf"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"],[1,"row"],[1,"col-6"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"w-100"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],[3,"startAt"],["datePickerArrivo",""],["datePickerPartenza",""],[1,"note"],[1,"w-100","border","rounded","p-3","mb-3"],[1,"w-100","note-richiesta-textarea"],["matInput","","rows","5",3,"ngModel","ngModelChange"],[3,"value"],[1,"dialog-tab-group",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[3,"disabled"],["mat-tab-label",""],[1,"mt-3"],["class","row m-0",4,"ngIf"],["class","row m-0",4,"ngFor","ngForOf"],[1,"font-weight-bold"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","delete-icon"],[1,"row","m-0"],["displayMember","descrizione",3,"dataLoader","forceDownload","value","placeholder","valueChange"],[1,"col-6","pt-3","font-weight-bold"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngIf"],[1,"material-icons"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,pz,34,36,"ng-container",2),e.YNc(4,vz,4,3,"mat-tab-group",3),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(7),e.ALo(8,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.richiesta&&null==t.richiesta.preventivo),e.xp6(1),e.Q6J("ngIf",null!=t.camere&&t.camere.length>0),e.xp6(3),e.Oqu(e.lcZ(8,4,"globals.salva")))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,ee.SK,ee.gz,ee.R7,F.aO,_.Fj,_.JJ,_.On,ne.d,Te.A,z.X$],styles:[".delete-icon[_ngcontent-%COMP%]{font-size:20px}  .note-richiesta-textarea .mat-form-field-underline{visibility:hidden!important}  .note-richiesta-textarea .mat-form-field-wrapper{padding-bottom:0!important}  .note-richiesta-textarea .mat-form-field-infix{padding:0!important;border:0!important}textarea[_ngcontent-%COMP%]{resize:none}.note[_ngcontent-%COMP%]{font-size:12px;color:#0000008a}"]});const Tz=function(i){return{"border-bottom":i}};function xz(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"div",8),e._uU(2),e.qZA(),e.TgZ(3,"div",9),e._uU(4),e.ALo(5,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Q6J("ngClass",e.VKq(5,Tz,n<a.proposte.length-1)),e.xp6(2),e.Oqu(t.descrizione),e.xp6(2),e.Oqu(e.lcZ(5,3,t.totaleScontato))}}class rn extends f.H{constructor(o){super(),this.apiService=o}drop(o){(0,ht.bA)(this.proposte,o.previousIndex,o.currentIndex)}save(){this.setIsLoading(!0),this.proposte.forEach((o,t)=>o.ordinamento=t),this.apiService.setMultipleProposta(this.proposte).subscribe(()=>{this.dialogRef.close(!0)})}}rn.\u0275fac=function(o){return new(o||rn)(e.Y36(A.s))},rn.\u0275cmp=e.Xpm({type:rn,selectors:[["app-ordina-proposte-modal"]],inputs:{proposte:"proposte",dialogRef:"dialogRef"},features:[e.qOj],decls:12,vars:8,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["cdkDropList","",1,"proposte-list","border","rounded-xl","mat-elevation-z1",3,"cdkDropListDropped"],["class","proposta font-weight-bold","cdkDrag","",3,"ngClass",4,"ngFor","ngForOf"],[1,"div-help","mt-3"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"],["cdkDrag","",1,"proposta","font-weight-bold",3,"ngClass"],[1,"d-inline-block"],[1,"d-inline-block","float-right"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2),e.NdJ("cdkDropListDropped",function(a){return t.drop(a)}),e.YNc(4,xz,6,7,"div",3),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",5)(9,"button",6),e.NdJ("click",function(){return t.save()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngForOf",t.proposte),e.xp6(2),e.Oqu(e.lcZ(7,4,"sbm.preventivi.dragDrop")),e.xp6(4),e.Oqu(e.lcZ(11,6,"globals.salva")))},dependencies:[m.mk,m.sg,h.eB,F.aO,ht.Wj,ht.Zt,ke.f,z.X$],styles:[".proposta[_ngcontent-%COMP%]{padding:20px 10px;cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{border-radius:7px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.proposte-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .proposta[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]});class cn{constructor(){}}cn.\u0275fac=function(o){return new(o||cn)},cn.\u0275cmp=e.Xpm({type:cn,selectors:[["app-prenotazione-dialog"]],inputs:{prenotazione:"prenotazione",dialogRef:"dialogRef"},decls:4,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"_prenotazione","modal"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"app-prenotazioni-edit",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("_prenotazione",t.prenotazione)("modal",!0))},dependencies:[h.eB,F.aO,Lt]});const Zz=["tableContainer"];function Az(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"span",15),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"momentFormat"),e.qZA()()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,e.Dn7(4,3,t.data,"MMMM YYYY",n.getLocale())))}}function wz(i,o){if(1&i&&(e.TgZ(0,"td",12),e.YNc(1,Az,5,7,"div",13),e.qZA()),2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("colSpan",l.getNumeroGiorniFineMese(n.data,a)),e.xp6(1),e.Q6J("ngIf",l.isSingleMonth||l.getNumeroGiorniFineMese(n.data,a)>=3)}}function zz(i,o){if(1&i&&(e.ynx(0),e.YNc(1,wz,2,2,"td",11),e.ALo(2,"date"),e.BQk()),2&i){const t=o.$implicit,n=o.index;e.xp6(1),e.Q6J("ngIf",0==n||"1"==e.xi3(2,1,t.data,"d"))}}function Mz(i,o){if(1&i&&(e.TgZ(0,"td",16)(1,"div",14),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"div",17),e._uU(5),e.ALo(6,"momentFormat"),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(e.xi3(3,2,t.data,"dd")),e.xp6(3),e.Oqu(e.Dn7(6,5,t.data,"ddd",n.getLocale()))}}function qz(i,o){if(1&i&&(e.TgZ(0,"td")(1,"div",20),e._UZ(2,"div",21),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Udp("background-color",t.isCameraLibera?"#00B572":"#D9534F")}}const Pz=function(i){return{"risorsa-selected":i}},kz=function(i){return{"sticky-left":i}};function Sz(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr",18),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.dialogRef.close(l.risorsa.nome))}),e.TgZ(1,"td",19),e._uU(2),e.qZA(),e.YNc(3,qz,3,2,"td",6),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(4,Pz,t.risorsa.nome==n.camera)),e.xp6(1),e.Q6J("ngClass",e.VKq(6,kz,n.isHorizontalScrollbarVisible)),e.xp6(1),e.Oqu(t.risorsa.nome),e.xp6(1),e.Q6J("ngForOf",t.giorni)}}const yz=function(i){return{"overflow-x":i}};class sn extends f.H{constructor(){super(),this.isSingleMonth=!1,this.isHorizontalScrollbarVisible=!1}ngOnInit(){if(this.risorse[0].giorni.length>0){let o=u(this.risorse[0].giorni[0].data).month();this.isSingleMonth=this.risorse[0].giorni.every(t=>u(t.data).month()==o)}}ngAfterViewInit(){setTimeout(()=>{this.isHorizontalScrollbarVisible=this.tableContainer.nativeElement.scrollWidth>this.tableContainer.nativeElement.clientWidth},200)}getNumeroGiorniFineMese(o,t){let n=u(o);return Math.min(n.daysInMonth()-n.date()+1,this.risorse[0].giorni.length-t)}}sn.\u0275fac=function(o){return new(o||sn)},sn.\u0275cmp=e.Xpm({type:sn,selectors:[["app-seleziona-camera-modal"]],viewQuery:function(o,t){if(1&o&&e.Gf(Zz,5),2&o){let n;e.iGM(n=e.CRH())&&(t.tableContainer=n.first)}},inputs:{risorse:"risorse",camera:"camera",dialogRef:"dialogRef"},features:[e.qOj],decls:15,vars:7,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"table-container",3,"ngClass"],["tableContainer",""],[1,"sticky-top"],[1,"month-row"],[4,"ngFor","ngForOf"],[1,"bg-white"],[1,"sticky-left","bg-white"],["class","text-center giorno-cell pt-2 pb-2",4,"ngFor","ngForOf"],["class","cursor-pointer risorsa-row",3,"ngClass","click",4,"ngFor","ngForOf"],["class","text-nowrap",3,"colSpan",4,"ngIf"],[1,"text-nowrap",3,"colSpan"],["class","font-weight-bold",4,"ngIf"],[1,"font-weight-bold"],[1,"p-1","d-inline-block"],[1,"text-center","giorno-cell","pt-2","pb-2"],[1,"font-italic"],[1,"cursor-pointer","risorsa-row",3,"ngClass","click"],[1,"pr-2","pl-2","font-weight-bold","sticky-left","bg-white",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-center"],[1,"isLibera","border"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2,3)(5,"table")(6,"thead",4)(7,"tr",5),e._UZ(8,"td"),e.YNc(9,zz,3,4,"ng-container",6),e.qZA(),e.TgZ(10,"tr",7),e._UZ(11,"td",8),e.YNc(12,Mz,7,9,"td",9),e.qZA()(),e.TgZ(13,"tbody"),e.YNc(14,Sz,4,8,"tr",10),e.qZA()()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngClass",e.VKq(5,yz,t.isHorizontalScrollbarVisible)),e.xp6(6),e.Q6J("ngForOf",t.risorse[0].giorni),e.xp6(3),e.Q6J("ngForOf",t.risorse[0].giorni),e.xp6(2),e.Q6J("ngForOf",t.risorse))},dependencies:[m.mk,m.sg,m.O5,h.eB,F.aO,m.rS,m.uU,K.H],styles:["table[_ngcontent-%COMP%]{font-size:14px}.giorno-cell[_ngcontent-%COMP%]{width:50px;min-width:50px;line-height:16px}.isLibera[_ngcontent-%COMP%]{width:15px;height:15px;border-radius:50%}.risorsa-row[_ngcontent-%COMP%]:hover:not(.risorsa-selected)   td[_ngcontent-%COMP%]{background-color:#fde8ef!important}.risorsa-selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f48eb0!important}.table-container[_ngcontent-%COMP%]{max-width:800px;max-height:400px;overflow-x:hidden;overflow-y:auto}.overflow-x[_ngcontent-%COMP%]{overflow-x:auto!important}.sticky-left[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;z-index:1000}.month-row[_ngcontent-%COMP%]{background-color:#2d3e50;color:#fff}"]});class Ci{constructor(){this.enumTipoPropagazionePreventivi=c.fY,this.tipoPropagazione=c.fY.TutteLeProposte}}function Jz(i,o){if(1&i&&e._UZ(0,"span"),2&i){const t=e.oxw(3);e.Gre("mr-2 fi fi-",t.preventivo.cliente.lingua.flagIcon,"")}}function Ez(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",98),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.editCliente())}),e.TgZ(1,"i",99),e._uU(2,"edit"),e.qZA()()}}function Nz(i,o){if(1&i&&(e.TgZ(0,"div",100)(1,"i",101),e._uU(2,"email"),e.qZA(),e.TgZ(3,"span",102),e._uU(4),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(4),e.Oqu(t.preventivo.cliente.email)}}function Oz(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",103)(1,"i",104),e._uU(2,"call"),e.qZA(),e.TgZ(3,"span",102),e._uU(4),e.qZA(),e.TgZ(5,"button",105),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openWhatsApp())}),e._UZ(6,"i",106),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(4),e.Oqu(t.preventivo.cliente.cellulare)}}function Lz(i,o){if(1&i&&(e.TgZ(0,"div",107)(1,"span",108),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",109),e._uU(5),e.ALo(6,"momentFormat"),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.preventivi.ultimaPrenotazione")),e.xp6(3),e.Oqu(e.Dn7(6,4,t.preventivo.cliente.dataUltimaPrenotazione,"DD/MM/YYYY",t.getLocale()))}}function Dz(i,o){if(1&i&&(e.TgZ(0,"div")(1,"span",110),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.cliente.proprieta.interessi")+": "),e.xp6(3),e.Oqu(t.preventivo.cliente.interessi)}}function Iz(i,o){if(1&i&&(e.TgZ(0,"div")(1,"span",110),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",111),e._uU(5),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.cliente.proprieta.note")+": "),e.xp6(3),e.Oqu(t.preventivo.cliente.note)}}function Qz(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card",82)(2,"mat-card-title",83),e.YNc(3,Jz,1,3,"span",84),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.YNc(6,Ez,3,0,"button",85),e.qZA(),e.TgZ(7,"mat-card-content",86)(8,"div",15)(9,"div",16),e.YNc(10,Nz,5,1,"div",87),e.YNc(11,Oz,7,1,"div",88),e.YNc(12,Lz,7,8,"div",89),e.YNc(13,Dz,6,4,"div",0),e.YNc(14,Iz,6,4,"div",0),e.qZA(),e.TgZ(15,"div",16)(16,"div",90)(17,"app-view-select",91),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.preventivo.cliente.mercato=a)})("valueChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.save(!1,!1))}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",92)(20,"app-view-select",91),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.preventivo.cliente.canaleVendita=a)})("valueChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.save(!1,!1))}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div")(23,"mat-checkbox",50),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.preventivo.cliente.privacy=a)})("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.save(!1,!1))}),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div")(27,"mat-checkbox",50),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.preventivo.cliente.newsletter=a)})("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.save(!1,!1))}),e._uU(28),e.ALo(29,"translate"),e.qZA()()()(),e.TgZ(30,"div",59)(31,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sendEmail())}),e._UZ(32,"i",94),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sendSms())}),e._UZ(36,"i",95),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"button",96),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openWhatsApp())}),e._UZ(40,"i",97),e._uU(41),e.ALo(42,"translate"),e.qZA()()()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",null!=t.preventivo.cliente.lingua&&!!t.preventivo.cliente.lingua.flagIcon),e.xp6(2),e.AsE("",t.preventivo.cliente.cognome," ",t.preventivo.cliente.nome,""),e.xp6(1),e.Q6J("ngIf",!t.preventiviCliente),e.xp6(4),e.Q6J("ngIf",!!t.preventivo.cliente.email),e.xp6(1),e.Q6J("ngIf",!!t.preventivo.cliente.cellulare),e.xp6(1),e.Q6J("ngIf",!t.utility.isNullDate(t.preventivo.cliente.dataUltimaPrenotazione)),e.xp6(1),e.Q6J("ngIf",!!t.preventivo.cliente.interessi),e.xp6(1),e.Q6J("ngIf",!!t.preventivo.cliente.note),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaMercatoRQ))("value",t.preventivo.cliente.mercato)("placeholder",e.lcZ(18,25,"bo.cliente.proprieta.mercato")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaCanaleVenditaRQ))("value",t.preventivo.cliente.canaleVendita)("placeholder",e.lcZ(21,27,"bo.cliente.proprieta.canaleVendita")),e.xp6(3),e.Q6J("ngModel",t.preventivo.cliente.privacy),e.xp6(1),e.Oqu(e.lcZ(25,29,"bo.cliente.proprieta.privacy")),e.xp6(3),e.Q6J("ngModel",t.preventivo.cliente.newsletter),e.xp6(1),e.Oqu(e.lcZ(29,31,"bo.cliente.proprieta.newsletter")),e.xp6(3),e.Q6J("disabled",!t.preventivo.cliente.email),e.xp6(2),e.hij(" ",e.lcZ(34,33,"sbm.preventivi.inviaEmail"),""),e.xp6(2),e.Q6J("disabled",!t.preventivo.cliente.cellulare),e.xp6(2),e.hij(" ",e.lcZ(38,35,"sbm.preventivi.inviaSms"),""),e.xp6(2),e.Q6J("disabled",!t.preventivo.cliente.cellulare),e.xp6(2),e.hij(" ",e.lcZ(42,37,"sbm.preventivi.inviaWhatsApp"),"")}}function Uz(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",112),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editCliente())}),e.TgZ(2,"i",113),e._uU(3,"account_circle"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.BQk()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"sbm.preventivi.selezionaCliente")))}function Yz(i,o){if(1&i&&(e.TgZ(0,"mat-option",121),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Rz(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",90)(2,"mat-select",119),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.preventivo.richiesta.tipoRichiesta=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.apiService.setRichiesta(a.preventivo.richiesta).subscribe())}),e.ALo(3,"translate"),e.YNc(4,Yz,3,4,"mat-option",35),e.ALo(5,"selectEnum"),e.qZA()(),e.TgZ(6,"app-view-select",120),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.preventivo.richiesta.motivoViaggio=a)})("valueChange",function(){e.CHM(t);const a=e.oxw(3);return a.apiService.setRichiesta(a.preventivo.richiesta).subscribe(),a.preventivo.motivoViaggio=a.preventivo.richiesta.motivoViaggio,e.KtG(a.save(!1,!1))}),e.ALo(7,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(3);e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.richiesta.proprieta.tipoRichiesta")),e.Q6J("ngModel",t.preventivo.richiesta.tipoRichiesta),e.xp6(2),e.Q6J("ngForOf",e.xi3(5,8,t.enumTipoRichiesta,"tipoRichiestaPreventivo")),e.xp6(2),e.Q6J("dataLoader",t.apiService.getMotiviViaggioViewSelect())("value",t.preventivo.richiesta.motivoViaggio)("placeholder",e.lcZ(7,11,"bo.richiesta.proprieta.motivoViaggio"))}}function Fz(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function Hz(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.Oqu(" ("))}function Kz(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.numeroAdulti+" "+e.lcZ(2,1,"sbm.preventivi.adulti"))}}function Gz(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.Oqu(" - "))}function $z(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.numeroBambini+" "+e.lcZ(2,1,"sbm.preventivi.bambini"))}}function Bz(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(" ("+t.etaBambini+" "+e.lcZ(2,1,"sbm.preventivi.anni")+")")}}function Vz(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.Oqu(")"))}function Xz(i,o){if(1&i&&(e.TgZ(0,"li"),e.YNc(1,Fz,2,1,"span",0),e.YNc(2,Hz,2,1,"span",0),e.YNc(3,Kz,3,3,"span",0),e.YNc(4,Gz,2,1,"span",0),e.YNc(5,$z,3,3,"span",0),e.YNc(6,Bz,3,3,"span",0),e.YNc(7,Vz,2,1,"span",0),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.descrizione),e.xp6(1),e.Q6J("ngIf",!!t.descrizione&&(t.numeroAdulti>0||t.numeroBambini>0)),e.xp6(1),e.Q6J("ngIf",t.numeroAdulti>0),e.xp6(1),e.Q6J("ngIf",t.numeroAdulti>0&&t.numeroBambini>0),e.xp6(1),e.Q6J("ngIf",t.numeroBambini>0),e.xp6(1),e.Q6J("ngIf",!!t.etaBambini),e.xp6(1),e.Q6J("ngIf",!!t.descrizione&&(t.numeroAdulti>0||t.numeroBambini>0))}}function jz(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",110),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ul",122),e.YNc(5,Xz,8,7,"li",43),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.preventivi.camere")," "),e.xp6(3),e.Q6J("ngForOf",t.richiesta.camere)}}function Wz(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",110),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.preventivi.noteRichiesta")," "),e.xp6(2),e.hij(" ",t.richiesta.note," ")}}function eM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",36)(1,"mat-card",82)(2,"mat-card-title",7),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-card-content",13)(6,"div",15)(7,"div",114)(8,"mat-form-field",90),e._UZ(9,"input",115),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",114)(12,"mat-form-field",90),e._UZ(13,"input",115),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div",114)(16,"mat-form-field",116),e._UZ(17,"input",115),e.ALo(18,"translate"),e.qZA()()(),e.YNc(19,Rz,8,13,"ng-container",0),e.YNc(20,jz,6,4,"ng-container",0),e.YNc(21,Wz,5,4,"ng-container",0),e.TgZ(22,"div",117)(23,"button",96),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editPax())}),e.TgZ(24,"i",118),e._uU(25,"edit"),e.qZA(),e._uU(26),e.ALo(27,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,12,"sbm.preventivi.richiesta")," "),e.xp6(6),e.s9C("placeholder",e.lcZ(10,14,"bo.richiesta.proprieta.dal")),e.Q6J("value",t.richiesta.dal),e.xp6(4),e.s9C("placeholder",e.lcZ(14,16,"bo.richiesta.proprieta.al")),e.Q6J("value",t.richiesta.al),e.xp6(4),e.s9C("placeholder",e.lcZ(18,18,"sbm.preventivi.notti")),e.Q6J("value",t.richiesta.notti),e.xp6(2),e.Q6J("ngIf",null!=t.preventivo.richiesta),e.xp6(1),e.Q6J("ngIf",null!=t.richiesta.camere&&t.richiesta.camere.length>0),e.xp6(1),e.Q6J("ngIf",!!t.richiesta.note),e.xp6(2),e.Q6J("disabled",t.isPrenotato()),e.xp6(3),e.hij(" ",e.lcZ(27,20,"sbm.preventivi.modifica"),"")}}function tM(i,o){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"sbm.preventivi.datiGeneraliTab")," ")}function iM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",123),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.preventDefault(),e.KtG(l.openPrenotazione())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.prenotazione.codicePrenotazione?t.prenotazione.codicePrenotazione:t.prenotazione.codiceOTA," ")}}function oM(i,o){if(1&i&&(e.TgZ(0,"button",124,125)(2,"i",126),e._uU(3,"more_vert"),e.qZA()()),2&i){e.oxw();const t=e.MAs(22);e.Q6J("matMenuTriggerFor",t)}}function nM(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",127),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return a.preventivo.statoPreventivo=a.enumStatoPreventivo.DaGestire,a.doSave(!1,!1,!1,!0),e.KtG(a.getWorkFlows())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider"),e.BQk()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.preventivi.impostaDaGestire")))}function aM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",127),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return r.preventivo.flag=l.key,e.KtG(r.save(!1,!1))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.value))}}Ci.\u0275fac=function(o){return new(o||Ci)},Ci.\u0275cmp=e.Xpm({type:Ci,selectors:[["app-update-proposte"]],inputs:{dialogRef:"dialogRef"},decls:17,vars:16,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"font-weight-bold","mb-3"],["color","primary",3,"ngModel","ngModelChange"],[1,"d-block",3,"value"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h5",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-radio-group",3),e.NdJ("ngModelChange",function(a){return t.tipoPropagazione=a}),e.TgZ(7,"mat-radio-button",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"mat-radio-button",4),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",5)(14,"button",6),e.NdJ("click",function(){return t.dialogRef.close(t.tipoPropagazione)}),e._uU(15),e.ALo(16,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,8,"sbm.preventivi.propagaModifiche")),e.xp6(2),e.Q6J("ngModel",t.tipoPropagazione),e.xp6(1),e.Q6J("value",t.enumTipoPropagazionePreventivi.TutteLeProposte),e.xp6(1),e.Oqu(e.lcZ(9,10,"sbm.preventivi.tutteLeProposte")),e.xp6(2),e.Q6J("value",t.enumTipoPropagazionePreventivi.TutteLeProposteDiTutteLeCamere),e.xp6(1),e.Oqu(e.lcZ(12,12,"sbm.preventivi.tutteLeProposteDiTutteLeCamere")),e.xp6(4),e.Oqu(e.lcZ(16,14,"globals.conferma")))},dependencies:[h.eB,He.OY,He.vy,F.aO,_.JJ,_.On,z.X$]});const $c=function(i){return{color:i}};function lM(i,o){if(1&i&&(e.TgZ(0,"span",128),e._uU(1,"label_important"),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngStyle",e.VKq(1,$c,t.preventivo.flag==t.enumFlagPreventivo.Rosso?"red":t.preventivo.flag==t.enumFlagPreventivo.Verde?"green":"#ede313"))}}function rM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-option",131),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return r.tagCrmXLingua=l.tagCrmXLingua,e.KtG(r.onTagCrmChange())}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.Q6J("value",t.tagCrm.oid),e.xp6(1),e.hij(" ",t.tagCrm.nome," ")}}function cM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",17)(1,"mat-select",129),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.preventivo.tagCrm.oid=a)}),e.ALo(2,"translate"),e.YNc(3,rM,2,2,"mat-option",130),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.s9C("placeholder",e.lcZ(2,4,"bo.preventivo.proprieta.tagCrm")),e.Q6J("ngModel",t.preventivo.tagCrm.oid)("disabled",t.isPrenotato()),e.xp6(2),e.Q6J("ngForOf",t.tagCrm)}}function sM(i,o){if(1&i&&(e.TgZ(0,"mat-option",132),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("value",t.key)("disabled",null==n.prenotazione&&(t.key==n.enumStatoPreventivo.InAttesaPagamento||t.key==n.enumStatoPreventivo.Prenotato||t.key==n.enumStatoPreventivo.Accettato||t.key==n.enumStatoPreventivo.Rifiutato)),e.xp6(1),e.hij(" ",e.lcZ(2,3,t.value)," ")}}function pM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",133),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openCodicePromozioneSelect())}),e.TgZ(1,"i",134),e._uU(2,"more_vert"),e.qZA()()}}function dM(i,o){if(1&i&&(e.TgZ(0,"mat-option",121),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.Q6J("value",n),e.xp6(1),e.hij(" ",t," ")}}function mM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",17)(1,"input",24),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.preventivo.dataScadenzaAccontoCaparra=a)})("dateChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onDataScadenzaAccontoCaparraChange())}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"mat-datepicker-toggle",19),e.TgZ(4,"mat-datepicker-toggle",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return a.preventivo.dataScadenzaAccontoCaparra=null,e.KtG(a.save(!1,!1))}),e.TgZ(5,"mat-icon",26),e._uU(6,"clear"),e.qZA()(),e._UZ(7,"mat-datepicker",20,135),e.qZA()}if(2&i){const t=e.MAs(8),n=e.oxw(2);e.xp6(1),e.s9C("placeholder",e.lcZ(2,6,"bo.preventivo.proprieta.dataScadenzaAccontoCaparra")),e.Q6J("matDatepicker",t)("ngModel",n.preventivo.dataScadenzaAccontoCaparra)("disabled",n.isPrenotato()),e.xp6(2),e.Q6J("for",t),e.xp6(4),e.Q6J("startAt",n.utility.isNullDate(n.preventivo.dataScadenzaAccontoCaparra)?n.today:null)}}function _M(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"a",136),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.preventDefault(),e.KtG(l.impostaMessaggiLetti(!0))}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(" ("+t.numeroMessaggiNonLetti+e.lcZ(3,2,"sbm.preventivi.messaggiDaLeggere")+")"),e.xp6(3),e.Oqu(e.lcZ(6,4,"sbm.preventivi.segnaComeLetti"))}}function uM(i,o){if(1&i&&(e.TgZ(0,"span",110),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().index;e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi.camera")+" "+(t+1)," ")}}function gM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",114)(1,"button",139),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.ordinaProposte(a))}),e.TgZ(2,"i",140),e._uU(3,"swap_vertical_circle"),e.qZA(),e.TgZ(4,"span",141),e._uU(5),e.ALo(6,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("disabled",t.isPrenotato()),e.xp6(4),e.Oqu(e.lcZ(6,2,"sbm.preventivi.ordinaProposte"))}}function hM(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi.confermato")," "))}function fM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",110),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",167),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw().$implicit,p=e.oxw(2);return a.stopPropagation(),e.KtG(p.duplicateProposta(l,r))}),e.TgZ(4,"i",159),e._uU(5,"filter_none"),e.qZA()(),e.TgZ(6,"button",168),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw().$implicit,p=e.oxw(2);return a.stopPropagation(),e.KtG(p.deleteProposta(l.proposta.oid,r))}),e.TgZ(7,"i",159),e._uU(8,"delete"),e.qZA()(),e.TgZ(9,"span"),e._uU(10),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"eurCurrency"),e.qZA(),e.YNc(14,hM,3,3,"span",0)}if(2&i){const t=e.oxw(),n=t.index,a=t.$implicit,l=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,6,"sbm.preventivi.proposta")+" "+(n+1)," "),e.xp6(2),e.Q6J("disabled",r.isPrenotato()),e.xp6(3),e.Q6J("disabled",l.proposte.length<=1||r.isPrenotato()),e.xp6(4),e.hij(" ",a.proposta.descrizione?a.proposta.descrizione:"---"," "),e.xp6(2),e.hij(" ",e.lcZ(13,8,a.proposta.sconto>0?a.proposta.totaleScontato:a.proposta.totale)," "),e.xp6(2),e.Q6J("ngIf",!!a.proposta.dataConferma)}}function CM(i,o){if(1&i&&(e.TgZ(0,"div",182),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.dettagli[0].promozione.nome," ")}}function bM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",185),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,l=e.oxw(3);return e.KtG(l.rimuoviCamera(a))}),e._uU(1,"clear"),e.qZA()}}function vM(i,o){if(1&i&&(e.TgZ(0,"div",183)(1,"span",141),e._uU(2),e.qZA(),e.YNc(3,bM,2,0,"mat-icon",184),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.Oqu(t.dettagli[0].camera),e.xp6(1),e.Q6J("ngIf",!n.isPrenotato())}}function TM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",186),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(3);return a.preventDefault(),e.KtG(r.selezionaCamera(l))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.preventivi.selezionaCamera")))}function xM(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(t.numeroAdulti+" "+e.lcZ(2,1,"sbm.preventivi.adulti"))}}function ZM(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.Oqu(" + "))}function AM(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(t.numeroBambini+" "+e.lcZ(2,1,"sbm.preventivi.bambini"))}}function wM(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(" ("+t.etaBambini+" "+e.lcZ(2,1,"sbm.preventivi.anni")+")")}}function zM(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",187),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-form-field",188)(5,"input",189),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2).$implicit;return e.KtG(l.dettagli[0].importo=a)})("blur",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw(3);return a.dettagli[0].importo<0&&(a.dettagli[0].importo=0),e.KtG(l.saveDettaglio(a.dettagli[0]))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,3,"sbm.preventivi.importo")," "),e.xp6(3),e.Q6J("ngModel",t.dettagli[0].importo)("disabled",n.isPrenotato())}}function MM(i,o){if(1&i&&(e.TgZ(0,"mat-option",121),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.Q6J("value",n),e.xp6(1),e.hij(" ",t," ")}}function qM(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",187),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-form-field",188)(5,"input",189),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2).$implicit;return e.KtG(l.dettagli[0].sconto=a)})("blur",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw(3);return e.KtG(l.saveDettaglio(a.dettagli[0]))}),e.qZA()(),e.TgZ(6,"mat-form-field",190)(7,"mat-select",34),e.NdJ("selectionChange",function(a){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(3);return l.dettagli[0].isPercentuale=1==a.value,e.KtG(r.saveDettaglio(l.dettagli[0]))}),e.YNc(8,MM,2,2,"mat-option",35),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,6,"sbm.preventivi.sconto")," "),e.xp6(3),e.Q6J("ngModel",t.dettagli[0].sconto)("disabled",n.isPrenotato()||!n.inserimentoScontiEnabled),e.xp6(2),e.Q6J("value",t.dettagli[0].isPercentuale?1:0)("disabled",n.isPrenotato()||!n.inserimentoScontiEnabled),e.xp6(1),e.Q6J("ngForOf",n.tipoSconto)}}function PM(i,o){if(1&i&&(e.TgZ(0,"button",193)(1,"span",194),e._uU(2," info "),e.qZA()()),2&i){const t=e.oxw(3).$implicit;e.Q6J("matTooltip",t.dettagli[0].giorniString)}}function kM(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",187),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",191),e._uU(5),e.ALo(6,"eurCurrency"),e.qZA(),e.YNc(7,PM,3,1,"button",192),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,3,"sbm.preventivi.totale")," "),e.xp6(3),e.hij(" ",e.lcZ(6,5,t.dettagli[0].totale)," "),e.xp6(2),e.Q6J("ngIf",!!t.dettagli[0].giorniString)}}function SM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",179),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.editDettaglio(l.numeroAdulti+l.numeroBambini,null,a,a.dettagli[0],!1))}),e.TgZ(1,"i",180),e._uU(2,"edit"),e.qZA()()}if(2&i){const t=e.oxw(5);e.Q6J("disabled",t.isPrenotato())}}function yM(i,o){if(1&i&&(e.TgZ(0,"div",198),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.promozione.nome," ")}}function JM(i,o){if(1&i&&(e.TgZ(0,"mat-option",121),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.Q6J("value",n),e.xp6(1),e.hij(" ",t," ")}}function EM(i,o){if(1&i&&(e.TgZ(0,"button",193)(1,"span",194),e._uU(2," info "),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("matTooltip",t.giorniString)}}function NM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",170)(1,"div",144)(2,"div",172),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA(),e.YNc(6,yM,2,1,"div",197),e.qZA(),e.TgZ(7,"div",176),e._uU(8),e.qZA(),e.TgZ(9,"div",177)(10,"div",187),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"mat-form-field",188)(14,"input",189),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.importo=a)})("blur",function(){const l=e.CHM(t).$implicit,r=e.oxw(6);return l.importo<0&&(l.importo=0),e.KtG(r.saveDettaglio(l))}),e.qZA()()(),e.TgZ(15,"div",177)(16,"div",187),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-form-field",188)(20,"input",189),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.sconto=a)})("blur",function(){const l=e.CHM(t).$implicit,r=e.oxw(6);return e.KtG(r.saveDettaglio(l))}),e.qZA()(),e.TgZ(21,"mat-form-field",190)(22,"mat-select",34),e.NdJ("selectionChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(6);return r.isPercentuale=1==a.value,e.KtG(p.saveDettaglio(r))}),e.YNc(23,JM,2,2,"mat-option",35),e.qZA()()(),e.TgZ(24,"div",177)(25,"div",187),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",191),e._uU(29),e.ALo(30,"eurCurrency"),e.qZA(),e.YNc(31,EM,3,1,"button",192),e.qZA(),e.TgZ(32,"div",178)(33,"button",179),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3).$implicit,p=e.oxw(3);return e.KtG(p.deleteDettaglio(l.oid,r))}),e.TgZ(34,"i",180),e._uU(35,"delete"),e.qZA()(),e.TgZ(36,"button",179),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3).$implicit,p=e.oxw().$implicit,T=e.oxw(2);return e.KtG(T.editDettaglio(p.numeroAdulti+p.numeroBambini,null,r,l))}),e.TgZ(37,"i",180),e._uU(38,"edit"),e.qZA()()()()}if(2&i){const t=o.$implicit,n=e.oxw(6);e.xp6(3),e.hij(" ",null!=t.tipoCameraOTA&&t.tipoCameraOTA.codice?t.tipoCameraOTA.codice:"---"," "),e.xp6(2),e.hij(" ",null!=t.tariffaOTA&&t.tariffaOTA.codice?t.tariffaOTA.codice:"---"," "),e.xp6(1),e.Q6J("ngIf",null!=t.promozione&&!!t.promozione.nome),e.xp6(2),e.hij(" ",n.getNomeRiduzione(t.componente)," "),e.xp6(3),e.hij(" ",e.lcZ(12,18,"sbm.preventivi.importo")," "),e.xp6(3),e.Q6J("ngModel",t.importo)("disabled",n.isPrenotato()),e.xp6(3),e.hij(" ",e.lcZ(18,20,"sbm.preventivi.sconto")," "),e.xp6(3),e.Q6J("ngModel",t.sconto)("disabled",n.isPrenotato()||!n.inserimentoScontiEnabled),e.xp6(2),e.Q6J("value",t.isPercentuale?1:0)("disabled",n.isPrenotato()||!n.inserimentoScontiEnabled),e.xp6(1),e.Q6J("ngForOf",n.tipoSconto),e.xp6(3),e.hij(" ",e.lcZ(27,22,"sbm.preventivi.totale")," "),e.xp6(3),e.hij(" ",e.lcZ(30,24,t.totale)," "),e.xp6(2),e.Q6J("ngIf",!!t.giorniString),e.xp6(2),e.Q6J("disabled",n.isPrenotato()),e.xp6(3),e.Q6J("disabled",n.isPrenotato())}}function OM(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",195),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,NM,39,26,"div",196),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.preventivi.riduzioni")," "),e.xp6(2),e.Q6J("ngForOf",n.getDettagliRiduzioni(t))}}function LM(i,o){if(1&i&&(e.TgZ(0,"div",208),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.data,"dd/MM/yyyy")," ")}}function DM(i,o){1&i&&(e.TgZ(0,"div",209),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" (",e.lcZ(2,1,"sbm.preventivi.incluso"),") "))}function IM(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",205),e._uU(2),e.qZA(),e.YNc(3,LM,3,4,"div",206),e.YNc(4,DM,3,3,"div",207),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.descrizione?t.descrizione:null==t.articolo?null:t.articolo.nome," "),e.xp6(1),e.Q6J("ngIf",!!t.data),e.xp6(1),e.Q6J("ngIf",t.isExtraIncluso)}}function QM(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",187),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-form-field",210)(5,"input",211),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.descrizione=a)})("blur",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(6);return e.KtG(l.saveDettaglio(a))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(6);e.xp6(2),e.hij(" ",e.lcZ(3,3,"sbm.preventivi.descrizione")," "),e.xp6(3),e.Q6J("ngModel",t.descrizione)("disabled",n.isPrenotato())}}function UM(i,o){if(1&i&&(e.TgZ(0,"mat-option",121),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.Q6J("value",n),e.xp6(1),e.hij(" ",t," ")}}function YM(i,o){if(1&i&&(e.TgZ(0,"button",193)(1,"span",194),e._uU(2," info "),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("matTooltip",t.giorniString)}}function RM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",179),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(3).$implicit,r=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.calcolaPrezzoArticolo(l,a,r.numeroAdulti+r.numeroBambini))}),e.TgZ(1,"i",180),e._uU(2,"euro"),e.qZA()()}if(2&i){const t=e.oxw(7);e.Q6J("disabled",t.isPrenotato())}}function FM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",201)(1,"div",144),e.YNc(2,IM,5,3,"ng-container",0),e.YNc(3,QM,6,5,"ng-container",0),e.qZA(),e.TgZ(4,"div",177)(5,"div",187),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-form-field",188)(9,"input",189),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.quantita=a)})("blur",function(){const l=e.CHM(t).$implicit,r=e.oxw(6);return l.quantita<0&&(l.quantita=0),e.KtG(r.saveDettaglio(l))}),e.qZA()()(),e.TgZ(10,"div",177)(11,"div",187),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"mat-form-field",188)(15,"input",189),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.importo=a)})("blur",function(){const l=e.CHM(t).$implicit,r=e.oxw(6);return l.importo<0&&(l.importo=0),e.KtG(r.saveDettaglio(l))}),e.qZA()()(),e.TgZ(16,"div",177)(17,"div",187),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"mat-form-field",188)(21,"input",189),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.sconto=a)})("blur",function(){const l=e.CHM(t).$implicit,r=e.oxw(6);return e.KtG(r.saveDettaglio(l))}),e.qZA()(),e.TgZ(22,"mat-form-field",190)(23,"mat-select",34),e.NdJ("selectionChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(6);return r.isPercentuale=1==a.value,e.KtG(p.saveDettaglio(r))}),e.YNc(24,UM,2,2,"mat-option",35),e.qZA()()(),e.TgZ(25,"div",177)(26,"div",187),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"div",202)(30,"span",203),e._uU(31),e.ALo(32,"eurCurrency"),e.qZA(),e.YNc(33,YM,3,1,"button",192),e.qZA()(),e.TgZ(34,"div",178)(35,"button",204),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3).$implicit,p=e.oxw(3);return e.KtG(p.duplicateDettaglio(l,r))}),e.TgZ(36,"i",180),e._uU(37,"filter_none"),e.qZA()(),e.TgZ(38,"button",179),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3).$implicit,p=e.oxw(3);return e.KtG(p.deleteDettaglio(l.oid,r))}),e.TgZ(39,"i",180),e._uU(40,"delete"),e.qZA()(),e.YNc(41,RM,3,1,"button",181),e.TgZ(42,"button",179),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3).$implicit,p=e.oxw().$implicit,T=e.oxw(2);return e.KtG(T.editDettaglio(p.numeroAdulti+p.numeroBambini,null,r,l))}),e.TgZ(43,"i",180),e._uU(44,"edit"),e.qZA()()()()}if(2&i){const t=o.$implicit,n=e.oxw(6);e.xp6(2),e.Q6J("ngIf",t.tipoDettaglioProposta==n.enumTipoDettaglioProposta.SupplementoExtra),e.xp6(1),e.Q6J("ngIf",t.tipoDettaglioProposta==n.enumTipoDettaglioProposta.VoceLibera),e.xp6(3),e.hij(" ",e.lcZ(7,21,"sbm.preventivi.quantita")," "),e.xp6(3),e.Q6J("ngModel",t.quantita)("disabled",n.isPrenotato()),e.xp6(3),e.hij(" ",e.lcZ(13,23,"sbm.preventivi.importo")," "),e.xp6(3),e.Q6J("ngModel",t.importo)("disabled",n.isPrenotato()),e.xp6(3),e.hij(" ",e.lcZ(19,25,"sbm.preventivi.sconto")," "),e.xp6(3),e.Q6J("ngModel",t.sconto)("disabled",n.isPrenotato()||!n.inserimentoScontiEnabled),e.xp6(2),e.Q6J("value",t.isPercentuale?1:0)("disabled",n.isPrenotato()||!n.inserimentoScontiEnabled),e.xp6(1),e.Q6J("ngForOf",n.tipoSconto),e.xp6(3),e.hij(" ",e.lcZ(28,27,"sbm.preventivi.totale")," "),e.xp6(4),e.Oqu(e.lcZ(32,29,t.totale)),e.xp6(2),e.Q6J("ngIf",!!t.giorniString),e.xp6(2),e.Q6J("disabled",n.isPrenotato()),e.xp6(3),e.Q6J("disabled",n.isPrenotato()),e.xp6(3),e.Q6J("ngIf",t.tipoDettaglioProposta==n.enumTipoDettaglioProposta.SupplementoExtra),e.xp6(1),e.Q6J("disabled",n.isPrenotato())}}function HM(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",199),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,FM,45,31,"div",200),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.preventivi.supplementiExtra")," "),e.xp6(2),e.Q6J("ngForOf",n.getDettagliSupplementi(t))}}function KM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",169)(1,"div",170)(2,"div",144)(3,"div",171)(4,"div",172),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.YNc(8,CM,2,1,"div",173),e.YNc(9,vM,4,2,"div",174),e.YNc(10,TM,3,3,"a",175),e.qZA()(),e.TgZ(11,"div",176),e.YNc(12,xM,3,3,"span",0),e.YNc(13,ZM,2,1,"span",0),e.YNc(14,AM,3,3,"span",0),e.YNc(15,wM,3,3,"span",0),e.qZA(),e.TgZ(16,"div",177),e.YNc(17,zM,6,5,"ng-container",0),e.qZA(),e.TgZ(18,"div",177),e.YNc(19,qM,9,8,"ng-container",0),e.qZA(),e.TgZ(20,"div",177),e.YNc(21,kM,8,7,"ng-container",0),e.qZA(),e.TgZ(22,"div",178)(23,"button",179),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.calcolaPrezzo(l,a,a.dettagli[0]))}),e.TgZ(24,"i",180),e._uU(25,"euro"),e.qZA()(),e.YNc(26,SM,3,1,"button",181),e.qZA()(),e.YNc(27,OM,5,4,"div",0),e.YNc(28,HM,5,4,"div",0),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,a=e.oxw(2);e.xp6(5),e.hij(" ",null!=t.dettagli[0].tipoCameraOTA&&t.dettagli[0].tipoCameraOTA.codice?t.dettagli[0].tipoCameraOTA.codice:"---"," "),e.xp6(2),e.hij(" ",null!=t.dettagli[0].tariffaOTA&&t.dettagli[0].tariffaOTA.codice?t.dettagli[0].tariffaOTA.codice:"---"," "),e.xp6(1),e.Q6J("ngIf",null!=t.dettagli[0].promozione&&!!t.dettagli[0].promozione.nome),e.xp6(1),e.Q6J("ngIf",!!t.dettagli[0].camera),e.xp6(1),e.Q6J("ngIf",a.sessionService.isPro()&&!a.isPrenotato()&&!!a.sessionService.getUrlApiWelcome()),e.xp6(2),e.Q6J("ngIf",n.numeroAdulti>0),e.xp6(1),e.Q6J("ngIf",n.numeroAdulti>0&&n.numeroBambini>0),e.xp6(1),e.Q6J("ngIf",n.numeroBambini>0),e.xp6(1),e.Q6J("ngIf",!!n.etaBambini),e.xp6(2),e.Q6J("ngIf",!t.proposta.isPrezziPersona),e.xp6(2),e.Q6J("ngIf",!t.proposta.isPrezziPersona),e.xp6(2),e.Q6J("ngIf",!t.proposta.isPrezziPersona),e.xp6(2),e.Q6J("disabled",a.isPrenotato()),e.xp6(3),e.Q6J("ngIf",!t.proposta.isPrezziPersona),e.xp6(1),e.Q6J("ngIf",t.proposta.isPrezziPersona&&a.getDettagliRiduzioni(t).length>0),e.xp6(1),e.Q6J("ngIf",a.getDettagliSupplementi(t).length>0)}}const GM=function(i){return{"tipo-sconto-selected":i}};function $M(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",212),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw().$implicit,p=e.oxw(3);return r.proposta.tipoScontoProposta=l.key,e.KtG(p.saveProposta(r.proposta,-2,!1,!1))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(5,GM,n.proposta.tipoScontoProposta==t.key))("value",t.key),e.xp6(1),e.Oqu(e.lcZ(2,3,t.value))}}function BM(i,o){if(1&i&&(e.TgZ(0,"mat-option",121),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.Q6J("value",n),e.xp6(1),e.hij(" ",t," ")}}function VM(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",213),e._uU(2),e.TgZ(3,"small",214),e._uU(4),e.qZA()(),e.TgZ(5,"div")(6,"span",215),e._uU(7),e.TgZ(8,"small",214),e._uU(9),e.qZA()(),e.TgZ(10,"span",216),e._uU(11),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ","\u20ac "+n.utility.getPriceIntegerPart(t.proposta.totaleScontato),""),e.xp6(2),e.Oqu(","+n.utility.getPriceDecimalPart(t.proposta.totaleScontato)),e.xp6(3),e.Oqu("\u20ac "+n.utility.getPriceIntegerPart(t.proposta.totale)),e.xp6(2),e.Oqu(","+n.utility.getPriceDecimalPart(t.proposta.totale)),e.xp6(2),e.hij("-",t.proposta.sconto+(t.proposta.isPercentuale?"%":"\u20ac"),"")}}function XM(i,o){if(1&i&&(e.TgZ(0,"div",213),e._uU(1),e.TgZ(2,"small",214),e._uU(3),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ","\u20ac "+n.utility.getPriceIntegerPart(t.proposta.totale),""),e.xp6(2),e.Oqu(","+n.utility.getPriceDecimalPart(t.proposta.totale))}}function jM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab"),e.YNc(1,fM,15,10,"ng-template",5),e.TgZ(2,"div")(3,"div",15)(4,"div",144)(5,"mat-form-field",90)(6,"input",18),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.proposta.arrivo=a)})("dateChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onArrivoPropostaChange(l))}),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"mat-datepicker-toggle",19)(9,"mat-datepicker",20,145),e.qZA()(),e.TgZ(11,"div",144)(12,"mat-form-field",90)(13,"input",18),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.proposta.partenza=a)})("dateChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onPartenzaPropostaChange(l))}),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"mat-datepicker-toggle",19)(16,"mat-datepicker",20,146),e.qZA()(),e.TgZ(18,"div",144)(19,"mat-form-field",116),e._UZ(20,"input",147),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",148)(23,"div",149)(24,"app-view-select",150),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.proposta.cancellazione=a)})("valueChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.saveProposta(l.proposta,-2,!1,!1))}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"button",151),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw().index,p=e.oxw(2);return e.KtG(p.updatePoliticaCancellazioneProposte(r,l.proposta.cancellazione))}),e._UZ(27,"i",152),e.qZA()(),e.TgZ(28,"div",148)(29,"mat-form-field",90)(30,"input",153),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.proposta.descrizione=a)})("blur",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.saveProposta(l.proposta,-2,!1,!1))}),e.ALo(31,"translate"),e.qZA()()()(),e.YNc(32,KM,29,16,"div",154),e.TgZ(33,"div",155)(34,"div",156)(35,"mat-form-field",157)(36,"input",153),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.proposta.note=a)})("blur",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.saveProposta(l.proposta,-2,!1,!1))}),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"button",151),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw().index,p=e.oxw(2);return e.KtG(p.updateNoteProposte(r,l.proposta.note))}),e._UZ(39,"i",152),e.qZA()(),e.TgZ(40,"div",148)(41,"button",158)(42,"i",159),e._uU(43,"more_vert"),e.qZA()(),e.TgZ(44,"mat-menu",null,160),e.YNc(46,$M,3,7,"button",161),e.ALo(47,"selectEnum"),e.qZA(),e.TgZ(48,"mat-form-field",162)(49,"input",32),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.proposta.sconto=a)})("blur",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.saveProposta(l.proposta,-2,!1,!1,!0))}),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"mat-form-field",163)(52,"mat-select",34),e.NdJ("selectionChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return r.proposta.isPercentuale=1==a.value,e.KtG(p.saveProposta(r.proposta,-2,!1,!1,!0))}),e.YNc(53,BM,2,2,"mat-option",35),e.qZA()(),e.TgZ(54,"button",151),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw().index,p=e.oxw(2);return e.KtG(p.updateScontoProposte(r,l.proposta.sconto,l.proposta.isPercentuale))}),e._UZ(55,"i",152),e.qZA()()(),e.TgZ(56,"div",117)(57,"div",164),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.YNc(60,VM,12,5,"ng-container",0),e.YNc(61,XM,4,2,"div",165),e.qZA(),e.TgZ(62,"div",155)(63,"div",148)(64,"button",166),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.addDettaglio(l,r.enumTipoDettaglioProposta.SupplementoExtra))}),e.TgZ(65,"i",140),e._uU(66,"add_circle_outline"),e.qZA(),e.TgZ(67,"span",141),e._uU(68),e.ALo(69,"translate"),e.qZA()()(),e.TgZ(70,"div",148)(71,"button",166),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.addDettaglio(l,r.enumTipoDettaglioProposta.VoceLibera))}),e.TgZ(72,"i",140),e._uU(73,"add_circle_outline"),e.qZA(),e.TgZ(74,"span",141),e._uU(75),e.ALo(76,"translate"),e.qZA()()()()()()}if(2&i){const t=o.$implicit,n=e.MAs(10),a=e.MAs(17),l=e.MAs(45),r=e.oxw(3);e.xp6(2),e.Gre("pt-3 pr-2 pl-2 pb-2 ",r.getClassProposta(t.proposta),""),e.xp6(4),e.s9C("placeholder",e.lcZ(7,48,"bo.preventivoProposte.proprieta.arrivo")),e.Q6J("matDatepicker",n)("ngModel",t.proposta.arrivo)("disabled",r.isPrenotato()),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",r.utility.isNullDate(t.proposta.arrivo)?r.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(14,50,"bo.preventivoProposte.proprieta.partenza")),e.Q6J("matDatepicker",a)("ngModel",t.proposta.partenza)("disabled",r.isPrenotato()),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",r.utility.isNullDate(t.proposta.partenza)?r.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(21,52,"bo.preventivoProposte.proprieta.notti")),e.s9C("value",r.getNotti(t.proposta)),e.Q6J("disabled",!0),e.xp6(4),e.Q6J("dataLoader",r.apiService.getCancellazioniViewSelect())("value",t.proposta.cancellazione)("placeholder",e.lcZ(25,54,"bo.tariffaOTA.proprieta.politicaCancellazione"))("disabled",r.isPrenotato()),e.xp6(2),e.Q6J("disabled",r.isPrenotato()),e.xp6(4),e.s9C("placeholder",e.lcZ(31,56,"bo.preventivoProposte.proprieta.descrizione")),e.Q6J("ngModel",t.proposta.descrizione)("disabled",r.isPrenotato()),e.xp6(2),e.Q6J("ngIf",null!=t.dettagli&&t.dettagli.length>0),e.xp6(4),e.s9C("placeholder",e.lcZ(37,58,"bo.preventivoProposte.proprieta.note")),e.Q6J("ngModel",t.proposta.note)("disabled",r.isPrenotato()),e.xp6(2),e.Q6J("disabled",r.isPrenotato()),e.xp6(3),e.Q6J("matMenuTriggerFor",l)("disabled",r.isPrenotato()||!r.inserimentoScontiEnabled),e.xp6(5),e.Q6J("ngForOf",e.xi3(47,60,r.enumTipoScontoProposta,"tipoScontoProposta")),e.xp6(3),e.Q6J("placeholder",e.lcZ(50,63,"bo.preventivoProposte.proprieta"+(t.proposta.tipoScontoProposta==r.enumTipoScontoProposta.Sconto?".sconto":".arrotondamento")))("ngModel",t.proposta.sconto)("disabled",r.isPrenotato()||!r.inserimentoScontiEnabled),e.xp6(3),e.Q6J("value",t.proposta.isPercentuale?1:0)("disabled",r.isPrenotato()||!r.inserimentoScontiEnabled),e.xp6(1),e.Q6J("ngForOf",r.tipoSconto),e.xp6(1),e.Q6J("disabled",r.isPrenotato()||!r.inserimentoScontiEnabled),e.xp6(4),e.hij(" ",e.lcZ(59,65,"sbm.preventivi.totale")," "),e.xp6(2),e.Q6J("ngIf",t.proposta.sconto>0),e.xp6(1),e.Q6J("ngIf",t.proposta.sconto<=0),e.xp6(3),e.Q6J("disabled",r.isPrenotato()),e.xp6(4),e.hij(" ",e.lcZ(69,67,"sbm.preventivi.supplementiExtra")," "),e.xp6(3),e.Q6J("disabled",r.isPrenotato()),e.xp6(4),e.hij(" ",e.lcZ(76,69,"sbm.preventivi.voceLibera")," ")}}function WM(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab"),e.YNc(1,uM,3,3,"ng-template",5),e.TgZ(2,"div",137)(3,"div",138)(4,"div",114)(5,"button",139),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.addProposta(l))}),e.TgZ(6,"i",140),e._uU(7,"add_circle_outline"),e.qZA(),e.TgZ(8,"span",141),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",114)(12,"button",139),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.deleteAllProposte(l.camera.oid))}),e.TgZ(13,"i",140),e._uU(14,"remove_circle_outline"),e.qZA(),e.TgZ(15,"span",141),e._uU(16),e.ALo(17,"translate"),e.qZA()()(),e.YNc(18,gM,7,4,"div",142),e.qZA(),e.TgZ(19,"mat-tab-group",143),e.NdJ("selectedIndexChange",function(a){const r=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.tabIndexes[r]=a)}),e.YNc(20,jM,77,71,"mat-tab",43),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.xp6(5),e.Q6J("disabled",a.isPrenotato()),e.xp6(4),e.Oqu(e.lcZ(10,7,"sbm.preventivi.aggiungiProposta")),e.xp6(3),e.Q6J("disabled",a.isPrenotato()),e.xp6(4),e.Oqu(e.lcZ(17,9,"sbm.preventivi.eliminaProposte")),e.xp6(2),e.Q6J("ngIf",t.proposte.length>1),e.xp6(1),e.Q6J("selectedIndex",a.tabIndexes[n]),e.xp6(1),e.Q6J("ngForOf",t.proposte)}}function eq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",148)(1,"mat-checkbox",219),e.NdJ("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return a&&p.selectionContenuti.toggle(r.oid),e.KtG(p.save(!1,!1))}),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionContenuti.isSelected(t.oid)),e.xp6(1),e.hij(" ",t.nome," ")}}function tq(i,o){if(1&i&&(e.TgZ(0,"mat-card",45)(1,"mat-card-title",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card-content",217)(5,"div",155),e.YNc(6,eq,3,2,"div",218),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.preventivi.contenuti")," "),e.xp6(4),e.Q6J("ngForOf",t.contenuti)}}function iq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",148)(1,"mat-checkbox",219),e.NdJ("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return a&&p.selectionArticoli.toggle(r.oid),e.KtG(p.save(!1,!1))}),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionArticoli.isSelected(t.oid)),e.xp6(1),e.hij(" ",t.nome," ")}}function oq(i,o){if(1&i&&(e.TgZ(0,"mat-card",45)(1,"mat-card-title",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card-content",217)(5,"div",155),e.YNc(6,iq,3,2,"div",218),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.preventivi.articoliExtra")," "),e.xp6(4),e.Q6J("ngForOf",t.articoli)}}function nq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",45)(1,"mat-card-title",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card-content",13)(5,"div",46)(6,"mat-form-field",47)(7,"textarea",220),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.preventivo.noteRifiuto=a)}),e.qZA()()()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"bo.preventivo.proprieta.noteRifiuto")," "),e.xp6(5),e.Q6J("ngModel",t.preventivo.noteRifiuto)}}function aq(i,o){if(1&i&&(e.TgZ(0,"span",223),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex),e.Q6J("appInvertColor",t.coloreHex),e.xp6(1),e.Oqu(t.descrizione)}}function lq(i,o){if(1&i&&(e.TgZ(0,"mat-card",45)(1,"mat-card-title",221),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card-content",13),e.YNc(5,aq,2,4,"span",222),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.preventivi.automatismiEseguiti")," "),e.xp6(3),e.Q6J("ngForOf",t.workFlowsEseguiti)}}function rq(i,o){if(1&i&&(e.TgZ(0,"div",224),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi.preventivoPrenotato")+e.xi3(3,3,t.preventivo.dataPrenotazione,"dd/MM/yyyy")," ")}}function cq(i,o){if(1&i&&(e.TgZ(0,"div",225),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi.preventivoInviato")+e.xi3(3,3,t.preventivo.dataInvio,"dd/MM/yyyy")," ")}}function sq(i,o){if(1&i&&(e.TgZ(0,"div",226),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi.preventivoVisualizzato")+e.xi3(3,3,t.preventivo.dataVisualizzazione,"dd/MM/yyyy")," ")}}const pq=function(i){return{numeroVisualizzazioni:i}};function dq(i,o){if(1&i&&(e.TgZ(0,"div",227),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,"sbm.preventivi.visualizzato",e.VKq(4,pq,t.preventivo.numeroVisualizzazioni))," ")}}function mq(i,o){if(1&i&&(e.TgZ(0,"div",232),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"sbm.preventivi.pagamentoConfermato")," ",e.xi3(3,4,t.preventivo.dataConfermaPagamento,"dd/MM/yyyy")," ")}}function _q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",148)(1,"button",233),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.confermaPagamento())}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"sbm.preventivi.confermaPagamento")," "))}function uq(i,o){if(1&i&&(e.TgZ(0,"div",228)(1,"div",156)(2,"mat-form-field",90),e._UZ(3,"input",229),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,mq,4,7,"div",230),e.YNc(6,_q,4,3,"div",231),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.s9C("placeholder",e.lcZ(4,4,"bo.preventivo.proprieta.modalitaPagamento")),e.Q6J("value",t.preventivo.modalitaPagamento.nome),e.xp6(2),e.Q6J("ngIf",null!=t.preventivo.dataConfermaPagamento),e.xp6(1),e.Q6J("ngIf",null==t.preventivo.dataConfermaPagamento)}}function gq(i,o){if(1&i&&(e.TgZ(0,"div",59)(1,"span",110),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.preventivi.sistemazioniSelezionate")),e.xp6(3),e.Oqu(t.sistemazioni)}}function hq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",59)(1,"app-url",234),e.NdJ("onExtraButtonClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.utility.openUrlInNewTab(a.getUrlMyPage()+"&mode=config&isHotel=true"))}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("placeholder",e.lcZ(2,4,"sbm.preventivi.urlMyPage"))("url",t.getUrlMyPage())("urlOpen",t.getUrlMyPage()+"&isHotel=true")("extraButtonIcon","edit")}}function fq(i,o){if(1&i&&(e.TgZ(0,"span",235),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",236),e._uU(4),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.preventivi.messaggiTab")),e.xp6(3),e.Oqu(t.numeroMessaggiNonLetti)}}function Cq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",249),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.utility.openUrlInNewTab(a.notificaEmail.urlHtml))}),e.TgZ(1,"span",250),e._uU(2," info "),e.qZA()()}}function bq(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div")(2,"span",110),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div")(8,"span",110),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(e.lcZ(4,4,"bo.notificaEmail.proprieta.emailTo")+": "),e.xp6(3),e.Oqu(t.notificaEmail.emailTo?t.notificaEmail.emailTo:"---"),e.xp6(3),e.Oqu(e.lcZ(10,6,"bo.notificaEmail.proprieta.oggetto")+": "),e.xp6(3),e.Oqu(t.notificaEmail.oggetto?t.notificaEmail.oggetto:"---")}}function vq(i,o){if(1&i&&(e.TgZ(0,"div")(1,"span",110),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.preventivoTimeLine.proprieta.utente")+": "),e.xp6(3),e.Oqu(t.cambioStato.utente)}}function Tq(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div")(2,"span",110),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",251),e._uU(6),e.qZA()(),e.YNc(7,vq,6,4,"div",0),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(e.lcZ(4,3,"bo.preventivoTimeLine.proprieta.operazione")+": "),e.xp6(3),e.Oqu(t.cambioStato.operazione?t.cambioStato.operazione:"---"),e.xp6(1),e.Q6J("ngIf",!!t.cambioStato.utente)}}const xq=function(i,o,t,n){return{"offset-6 pl-4":i,"text-right pr-4":o,"border-right":t,"border-left":n}},Zq=function(i,o){return{"circle-timeline-right":i,"circle-timeline-left":o}};function Aq(i,o){if(1&i&&(e.TgZ(0,"div",15)(1,"div",242)(2,"div",243)(3,"i",244),e._uU(4,"circle"),e.qZA()(),e.TgZ(5,"div",245),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"div",110)(9,"span",246),e._uU(10),e.ALo(11,"translate"),e.ALo(12,"translate"),e.ALo(13,"translate"),e.qZA(),e.YNc(14,Cq,3,0,"button",247),e.qZA(),e.TgZ(15,"div",248),e.YNc(16,bq,13,8,"ng-container",0),e.YNc(17,Tq,8,5,"ng-container",0),e.qZA()()()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.l5B(16,xq,a.isLogCliente(t),a.isLogHotel(t),n<a.timeline.length-1&&a.isLogHotel(t),n<a.timeline.length-1&&a.isLogCliente(t))),e.xp6(1),e.Q6J("ngClass",e.WLB(21,Zq,a.isLogHotel(t),a.isLogCliente(t))),e.xp6(4),e.Oqu(e.xi3(7,7,null!=t.notificaEmail?t.notificaEmail.dataInvio:t.cambioStato.data,"dd/MM/yyyy HH:mm:ss")),e.xp6(4),e.Oqu(null!=t.notificaEmail?e.lcZ(11,10,"sbm.prenotazioni.notificaEmail"):e.lcZ(12,12,a.getEnumKeyTranslation(a.enumStatoPreventivo,t.cambioStato.statoIniziale,"statoPreventivo"))+" -> "+e.lcZ(13,14,a.getEnumKeyTranslation(a.enumStatoPreventivo,t.cambioStato.statoFinale))),e.xp6(4),e.Q6J("ngIf",null!=t.notificaEmail&&!!t.notificaEmail.urlHtml),e.xp6(2),e.Q6J("ngIf",null!=t.notificaEmail),e.xp6(1),e.Q6J("ngIf",null!=t.cambioStato)}}function wq(i,o){if(1&i&&(e.TgZ(0,"mat-tab",57),e.ALo(1,"translate"),e.TgZ(2,"div",237)(3,"div",238)(4,"div",239)(5,"h5"),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",240)(9,"h5"),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.YNc(12,Aq,18,24,"div",241),e.qZA()()),2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,4,"sbm.preventivi.timeline")),e.xp6(6),e.Oqu(e.lcZ(7,6,"globals.hotel")),e.xp6(4),e.Oqu(e.lcZ(11,8,"globals.cliente")),e.xp6(2),e.Q6J("ngForOf",t.timeline)}}function zq(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.preventivo.proprieta.codicePreventivo")))}function Mq(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codicePreventivo?t.codicePreventivo:t.codiceOTA)}}function qq(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.preventivo.proprieta.data")))}function Pq(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataPreventivo,"dd/MM/yyyy"))}}function kq(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.preventivo.proprieta.arrivo")))}function Sq(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.arrivo,"dd/MM/yyyy"))}}function yq(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.preventivo.proprieta.partenza")))}function Jq(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.partenza,"dd/MM/yyyy"))}}function Eq(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.preventivo.proprieta.stato")))}function Nq(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoPreventivo,t.statoPreventivo,"statoPreventivo")))}}function Oq(i,o){1&i&&(e.TgZ(0,"mat-header-cell",269),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.preventivo.proprieta.totale")))}function Lq(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",270)(2,"b"),e._uU(3),e.ALo(4,"eurCurrency"),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(e.lcZ(4,1,t.totale))}}function Dq(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Iq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",269)(1,"button",271),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.editPreventivo(l.oid))}),e.TgZ(2,"i",272),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"button",271),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.openPreventivo(l.uid))}),e.TgZ(5,"i",272),e._uU(6,"open_in_new"),e.qZA()()()}}function Qq(i,o){1&i&&e._UZ(0,"mat-header-row",273)}function Uq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",274),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function Yq(i,o){if(1&i&&(e.TgZ(0,"mat-tab",57),e.ALo(1,"translate"),e.TgZ(2,"div",252)(3,"mat-table",253),e.ynx(4,254),e.YNc(5,zq,3,3,"mat-header-cell",255),e.YNc(6,Mq,2,1,"mat-cell",256),e.BQk(),e.ynx(7,257),e.YNc(8,qq,3,3,"mat-header-cell",255),e.YNc(9,Pq,3,4,"mat-cell",256),e.BQk(),e.ynx(10,258),e.YNc(11,kq,3,3,"mat-header-cell",255),e.YNc(12,Sq,3,4,"mat-cell",256),e.BQk(),e.ynx(13,259),e.YNc(14,yq,3,3,"mat-header-cell",255),e.YNc(15,Jq,3,4,"mat-cell",256),e.BQk(),e.ynx(16,260),e.YNc(17,Eq,3,3,"mat-header-cell",255),e.YNc(18,Nq,3,3,"mat-cell",256),e.BQk(),e.ynx(19,261),e.YNc(20,Oq,3,3,"mat-header-cell",262),e.YNc(21,Lq,5,3,"mat-cell",256),e.BQk(),e.ynx(22,263),e.YNc(23,Dq,1,0,"mat-header-cell",255),e.YNc(24,Iq,7,0,"mat-cell",264),e.BQk(),e.YNc(25,Qq,1,0,"mat-header-row",265),e.YNc(26,Uq,1,1,"mat-row",266),e.qZA()(),e.TgZ(27,"div",267),e._UZ(28,"mat-paginator",268),e.qZA()()),2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,7,"sbm.preventivi.altriPreventivi")),e.xp6(3),e.Q6J("dataSource",t.dataSourcePreventivi),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}}function Rq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",123),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.preventDefault(),e.KtG(l.openPrenotazione())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.prenotazione.codiceOTA," ")}}function Fq(i,o){if(1&i&&(e.TgZ(0,"button",124,125)(2,"i",126),e._uU(3,"more_vert"),e.qZA()()),2&i){e.oxw();const t=e.MAs(22);e.Q6J("matMenuTriggerFor",t)}}function Hq(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",127),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return a.preventivo.statoPreventivo=a.enumStatoPreventivo.DaGestire,a.doSave(!1,!1,!1,!0),e.KtG(a.getWorkFlows())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider"),e.BQk()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.preventivi.impostaDaGestire")))}function Kq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",127),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return r.preventivo.flag=l.key,e.KtG(r.save(!1,!1))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.value))}}function Gq(i,o){if(1&i&&(e.TgZ(0,"span",128),e._uU(1,"label_important"),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngStyle",e.VKq(1,$c,t.preventivo.flag==t.enumFlagPreventivo.Rosso?"red":t.preventivo.flag==t.enumFlagPreventivo.Verde?"green":"#ede313"))}}function $q(i,o){if(1&i&&(e.TgZ(0,"button",275),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){e.oxw();const t=e.MAs(159);e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,"sbm.preventivi.workFlows")," ")}}function Bq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",276),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.eseguiWorkFlow(l))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex),e.Q6J("appInvertColor",t.coloreHex),e.xp6(1),e.Oqu(t.descrizione)}}function Vq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",277),e.NdJ("click",function(){e.CHM(t),e.oxw();const a=e.MAs(163),l=e.oxw();return e.KtG(null==l.causaliOperazioneCancellazione||0==l.causaliOperazioneCancellazione.length?l.onCausaleClick(null,!0):a.click())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",null==t.preventivo.cliente||t.preventivo.statoPreventivo==t.enumStatoPreventivo.Cancellato),e.xp6(1),e.Oqu(e.lcZ(2,2,"globals.elimina"))}}function Xq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",127),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onCausaleClick(l,!0))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function jq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",278),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.eliminaDefinitivamente")))}function Wq(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",127),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onCausaleClick(l,!1))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function eP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",279),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.prenota())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.isPrenotaDisabled()),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.preventivi.prenota"))}}function tP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",280),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openCalcolaRetta())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.preventivi.creaPreventivo")))}function iP(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,Qz,43,39,"ng-container",0),e.YNc(4,Uz,6,3,"ng-container",0),e.qZA(),e.YNc(5,eM,28,22,"div",3),e.qZA(),e.TgZ(6,"mat-tab-group",4),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tabIndex=a)})("selectedTabChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onTabChange(a.tab.textLabel))}),e.TgZ(7,"mat-tab"),e.YNc(8,tM,2,3,"ng-template",5),e.TgZ(9,"div",1)(10,"div",2)(11,"mat-card",6)(12,"mat-card-title",7)(13,"span"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.YNc(19,iM,2,1,"a",8),e.YNc(20,oM,4,1,"button",9),e.TgZ(21,"mat-menu",null,10),e.YNc(23,nM,5,3,"ng-container",0),e.YNc(24,aM,3,3,"button",11),e.ALo(25,"selectEnum"),e.qZA(),e.YNc(26,lM,2,3,"span",12),e.qZA(),e.TgZ(27,"mat-card-content",13),e.YNc(28,cM,4,6,"mat-form-field",14),e.TgZ(29,"div",15)(30,"div",16)(31,"mat-form-field",17)(32,"input",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.preventivo.dataPreventivo=a)})("dateChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onDataPreventivoChange())}),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"mat-datepicker-toggle",19)(35,"mat-datepicker",20,21),e.qZA()(),e.TgZ(37,"div",16)(38,"mat-form-field",17)(39,"mat-select",22),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.preventivo.statoPreventivo=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.doSave(!1,!1,!1,!0))}),e.ALo(40,"translate"),e.YNc(41,sM,3,5,"mat-option",23),e.ALo(42,"selectEnum"),e.qZA()()()(),e.TgZ(43,"div",15)(44,"div",16)(45,"mat-form-field",17)(46,"input",24),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.preventivo.dataScadenza=a)})("dateChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onDataScadenzaChange())}),e.ALo(47,"translate"),e.qZA(),e._UZ(48,"mat-datepicker-toggle",19),e.TgZ(49,"mat-datepicker-toggle",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.preventivo.dataScadenza=null,e.KtG(a.save(!1,!1))}),e.TgZ(50,"mat-icon",26),e._uU(51,"clear"),e.qZA()(),e._UZ(52,"mat-datepicker",20,27),e.qZA()(),e.TgZ(54,"div",16)(55,"mat-form-field",28),e._UZ(56,"input",29),e.ALo(57,"translate"),e.YNc(58,pM,3,0,"button",30),e.qZA()()(),e.TgZ(59,"mat-form-field",31)(60,"input",32),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.preventivo.caparra=a)})("blur",function(){e.CHM(t);const a=e.oxw();return a.preventivo.caparra<0&&(a.preventivo.caparra=0),e.KtG(a.save(!1,!1))}),e.ALo(61,"translate"),e.qZA()(),e.TgZ(62,"mat-form-field",33)(63,"mat-select",34),e.NdJ("selectionChange",function(a){e.CHM(t);const l=e.oxw();return l.preventivo.caparra<0&&(l.preventivo.caparra=0),l.preventivo.isCaparraPercentuale=1==a.value,e.KtG(l.save(!1,!1))}),e.YNc(64,dM,2,2,"mat-option",35),e.qZA()(),e.YNc(65,mM,9,8,"mat-form-field",14),e.qZA()()(),e.TgZ(66,"div",36)(67,"mat-card",6)(68,"mat-card-title",37)(69,"span"),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.YNc(72,_M,7,6,"ng-container",0),e.qZA(),e.TgZ(73,"mat-card-content")(74,"app-messaggi-send",38),e.NdJ("onVisualizzaMessaggiClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.tabIndex=1)})("onMessaggioSend",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.impostaMessaggiLetti())}),e.qZA()()()()(),e.TgZ(75,"mat-card",39)(76,"mat-card-title",7),e._uU(77),e.ALo(78,"translate"),e.qZA(),e.TgZ(79,"mat-card-content",13)(80,"app-editor",40),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.testoIniziale=a)})("onBlur",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save(!1,!1))}),e.qZA()()(),e.TgZ(81,"mat-card",41)(82,"mat-card-title",7),e._uU(83),e.ALo(84,"translate"),e.qZA(),e.TgZ(85,"mat-card-content",13)(86,"mat-tab-group",42),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.cameraIndex=a)})("selectedTabChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCameraChange())}),e.YNc(87,WM,21,11,"mat-tab",43),e.qZA()()(),e.YNc(88,tq,7,4,"mat-card",44),e.YNc(89,oq,7,4,"mat-card",44),e.TgZ(90,"mat-card",45)(91,"mat-card-title",7),e._uU(92),e.ALo(93,"translate"),e.qZA(),e.TgZ(94,"mat-card-content",13)(95,"div",46)(96,"mat-form-field",47)(97,"textarea",48),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.preventivo.noteCliente=a)})("blur",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save(!1,!1))}),e.qZA()()()()(),e.TgZ(98,"mat-card",45)(99,"mat-card-title",7),e._uU(100),e.ALo(101,"translate"),e.qZA(),e.TgZ(102,"mat-card-content",13)(103,"div",46)(104,"mat-form-field",47)(105,"textarea",48),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.preventivo.note=a)})("blur",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save(!1,!1))}),e.qZA()()(),e.TgZ(106,"div",49)(107,"mat-checkbox",50),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.preventivo.isRimuoviProposteNonDisponibili=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save(!1,!1))}),e._uU(108),e.ALo(109,"translate"),e.qZA()(),e.TgZ(110,"div")(111,"mat-checkbox",50),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.preventivo.isAccettaConPagamentoImmediato=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save(!1,!1))}),e._uU(112),e.ALo(113,"translate"),e.qZA()()()(),e.YNc(114,nq,8,4,"mat-card",44),e.YNc(115,lq,6,4,"mat-card",44),e.TgZ(116,"div",49),e.YNc(117,rq,4,6,"div",51),e.YNc(118,cq,4,6,"div",52),e.YNc(119,sq,4,6,"div",53),e.YNc(120,dq,3,6,"div",54),e.qZA(),e.YNc(121,uq,7,6,"div",55),e.YNc(122,gq,6,4,"div",56),e.YNc(123,hq,3,6,"div",56),e.qZA(),e.TgZ(124,"mat-tab",57),e.ALo(125,"translate"),e.YNc(126,fq,5,4,"ng-template",5),e._UZ(127,"app-messaggi-send",58),e.qZA(),e.TgZ(128,"mat-tab",57),e.ALo(129,"translate"),e.TgZ(130,"div",59),e._UZ(131,"app-notifiche-email",60),e.qZA()(),e.YNc(132,wq,13,10,"mat-tab",61),e.YNc(133,Yq,29,9,"mat-tab",61),e.qZA(),e.TgZ(134,"div",62)(135,"div",63)(136,"span"),e._uU(137),e.ALo(138,"translate"),e.qZA(),e.TgZ(139,"span"),e._uU(140),e.ALo(141,"translate"),e.qZA(),e.YNc(142,Rq,2,1,"a",8),e.YNc(143,Fq,4,1,"button",9),e.TgZ(144,"mat-menu",null,10),e.YNc(146,Hq,5,3,"ng-container",0),e.YNc(147,Kq,3,3,"button",11),e.ALo(148,"selectEnum"),e.qZA(),e.YNc(149,Gq,2,3,"span",12),e.qZA(),e.TgZ(150,"div",64)(151,"button",65),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.back(!0))}),e._uU(152),e.ALo(153,"translate"),e.qZA(),e.TgZ(154,"button",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.back())}),e._uU(155),e.ALo(156,"translate"),e.qZA(),e.YNc(157,$q,3,4,"button",67),e.TgZ(158,"mat-menu",68,69),e.YNc(160,Bq,2,4,"button",70),e.qZA(),e.YNc(161,Vq,3,4,"button",71),e._UZ(162,"button",72,73),e.TgZ(164,"mat-menu",null,74),e.YNc(166,Xq,2,1,"button",11),e.qZA(),e.YNc(167,jq,3,3,"button",75),e.TgZ(168,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(172),l=e.oxw();return e.KtG(null==l.causaliOperazioneRifiuto||0==l.causaliOperazioneRifiuto.length?l.onCausaleClick(null,!1):a.click())}),e._uU(169),e.ALo(170,"translate"),e.qZA(),e._UZ(171,"button",72,77),e.TgZ(173,"mat-menu",null,78),e.YNc(175,Wq,2,1,"button",11),e.qZA(),e.TgZ(176,"button",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.print())}),e._uU(177),e.ALo(178,"translate"),e.qZA(),e.YNc(179,eP,3,4,"button",79),e.TgZ(180,"button",80),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.send())}),e._uU(181),e.ALo(182,"translate"),e.qZA(),e.YNc(183,tP,3,3,"button",81),e.qZA()(),e.BQk()}if(2&i){const t=e.MAs(36),n=e.MAs(53),a=e.MAs(165),l=e.MAs(174),r=e.oxw();e.xp6(3),e.Q6J("ngIf",null!=r.preventivo.cliente&&null!=r.preventivo.cliente.oid&&r.preventivo.cliente.oid>0),e.xp6(1),e.Q6J("ngIf",r.initialized&&(null==r.preventivo.cliente||null==r.preventivo.cliente.oid||r.preventivo.cliente.oid<=0)),e.xp6(1),e.Q6J("ngIf",null!=r.richiesta),e.xp6(1),e.Q6J("selectedIndex",r.tabIndex),e.xp6(8),e.hij(" ",e.lcZ(15,108,"bo.preventivo.proprieta.codicePreventivo")+(r.preventivo.codicePreventivo?" "+r.preventivo.codicePreventivo:"")," "),e.xp6(3),e.hij(" ",null!=r.preventivo.statoPreventivo?" - "+e.lcZ(18,110,r.getEnumKeyTranslation(r.enumStatoPreventivo,r.preventivo.statoPreventivo,"statoPreventivo")):""," "),e.xp6(2),e.Q6J("ngIf",r.preventivo.statoPreventivo==r.enumStatoPreventivo.Prenotato&&null!=r.prenotazione),e.xp6(1),e.Q6J("ngIf",null!=r.preventivo.statoPreventivo&&r.preventivo.statoPreventivo!=r.enumStatoPreventivo.Prenotato),e.xp6(3),e.Q6J("ngIf",r.preventivo.statoPreventivo!=r.enumStatoPreventivo.DaGestire),e.xp6(1),e.Q6J("ngForOf",e.xi3(25,112,r.enumFlagPreventivo,"flagPreventivo")),e.xp6(2),e.Q6J("ngIf",null!=r.preventivo.flag&&r.preventivo.flag!=r.enumFlagPreventivo.Nessuno),e.xp6(2),e.Q6J("ngIf",null!=r.preventivo.tagCrm),e.xp6(4),e.s9C("placeholder",e.lcZ(33,115,"bo.preventivo.proprieta.dataPreventivo")),e.Q6J("matDatepicker",t)("ngModel",r.preventivo.dataPreventivo)("disabled",r.isPrenotato()),e.xp6(2),e.Q6J("for",t),e.xp6(1),e.Q6J("startAt",r.utility.isNullDate(r.preventivo.dataPreventivo)?r.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(40,117,"bo.preventivo.proprieta.statoPreventivo")),e.Q6J("ngModel",r.preventivo.statoPreventivo)("disabled",r.isPrenotato()),e.xp6(2),e.Q6J("ngForOf",e.xi3(42,119,r.enumStatoPreventivo,"statoPreventivo")),e.xp6(5),e.s9C("placeholder",e.lcZ(47,122,"bo.preventivo.proprieta.scadenza")),e.Q6J("matDatepicker",n)("ngModel",r.preventivo.dataScadenza)("disabled",r.isPrenotato()),e.xp6(2),e.Q6J("for",n),e.xp6(4),e.Q6J("startAt",r.utility.isNullDate(r.preventivo.dataScadenza)?r.today:null),e.xp6(3),e.Q6J("floatLabel",null!=r.preventivo.codicePromozione&&r.preventivo.codicePromozione.codice?"always":"never"),e.xp6(1),e.s9C("placeholder",e.lcZ(57,124,"bo.preventivo.proprieta.codicePromozione")),e.Q6J("value",null==r.preventivo.codicePromozione?null:r.preventivo.codicePromozione.codice),e.xp6(2),e.Q6J("ngIf",r.preventivo.statoPreventivo==r.enumStatoPreventivo.Bozza||r.preventivo.statoPreventivo==r.enumStatoPreventivo.DaGestire),e.xp6(2),e.s9C("placeholder",e.lcZ(61,126,"bo.preventivo.proprieta.caparra")),e.Q6J("ngModel",r.preventivo.caparra)("disabled",r.isPrenotato()),e.xp6(3),e.Q6J("value",r.preventivo.isCaparraPercentuale?1:0)("disabled",r.isPrenotato()),e.xp6(1),e.Q6J("ngForOf",r.tipoSconto),e.xp6(1),e.Q6J("ngIf",0!=r.preventivo.caparra),e.xp6(5),e.Oqu(e.lcZ(71,128,"sbm.preventivi.messaggiTab")),e.xp6(2),e.Q6J("ngIf",r.numeroMessaggiNonLetti>0),e.xp6(2),e.Q6J("_preventivo",r.preventivo)("messaggi",r.messaggi)("maxMessages",5)("mittente",r.enumMittente.Hotel)("nomeAlbergo",r.sessionService.getNomeAlbergo())("nomePortale",null!=r.preventivo.portaleXAlbergo?r.preventivo.portaleXAlbergo.nomeStruttura:null)("booking",!1),e.xp6(3),e.hij(" ",e.lcZ(78,130,"bo.preventivo.proprieta.testoIniziale")," "),e.xp6(3),e.Q6J("text",r.testoIniziale)("disabled",r.isPrenotato()),e.xp6(3),e.hij(" ",e.lcZ(84,132,"sbm.preventivi.camere")," "),e.xp6(3),e.Q6J("selectedIndex",r.cameraIndex),e.xp6(1),e.Q6J("ngForOf",r.camere),e.xp6(1),e.Q6J("ngIf",null!=r.contenuti&&r.contenuti.length>0),e.xp6(1),e.Q6J("ngIf",null!=r.articoli&&r.articoli.length>0),e.xp6(3),e.hij(" ",e.lcZ(93,134,"sbm.preventivi.noteCliente")," "),e.xp6(5),e.Q6J("ngModel",r.preventivo.noteCliente),e.xp6(3),e.hij(" ",e.lcZ(101,136,"sbm.preventivi.note")," "),e.xp6(5),e.Q6J("ngModel",r.preventivo.note),e.xp6(2),e.Q6J("ngModel",r.preventivo.isRimuoviProposteNonDisponibili),e.xp6(1),e.Oqu(e.lcZ(109,138,"bo.preventivo.proprieta.isRimuoviProposteNonDisponibili")),e.xp6(3),e.Q6J("ngModel",r.preventivo.isAccettaConPagamentoImmediato),e.xp6(1),e.Oqu(e.lcZ(113,140,"bo.preventivo.proprieta.isAccettaConPagamentoImmediato")),e.xp6(2),e.Q6J("ngIf",!!r.preventivo.noteRifiuto),e.xp6(1),e.Q6J("ngIf",null!=r.workFlowsEseguiti&&r.workFlowsEseguiti.length>0),e.xp6(2),e.Q6J("ngIf",null!=r.preventivo.dataPrenotazione),e.xp6(1),e.Q6J("ngIf",null==r.preventivo.dataPrenotazione&&null!=r.preventivo.dataInvio),e.xp6(1),e.Q6J("ngIf",null!=r.preventivo.dataVisualizzazione),e.xp6(1),e.Q6J("ngIf",r.preventivo.numeroVisualizzazioni>0),e.xp6(1),e.Q6J("ngIf",null!=r.preventivo.modalitaPagamento),e.xp6(1),e.Q6J("ngIf",!!r.sistemazioni),e.xp6(1),e.Q6J("ngIf",null!=r.preventivo.cliente),e.xp6(1),e.Q6J("label",e.lcZ(125,142,"sbm.preventivi.messaggiTab")),e.xp6(3),e.Q6J("_preventivo",r.preventivo)("messaggi",r.messaggi)("mittente",r.enumMittente.Hotel)("nomeAlbergo",r.sessionService.getNomeAlbergo())("nomePortale",null!=r.preventivo.portaleXAlbergo?r.preventivo.portaleXAlbergo.nomeStruttura:null)("booking",!1),e.xp6(1),e.Q6J("label",e.lcZ(129,144,"sbm.preventivi.emailInviate")),e.xp6(3),e.Q6J("data",r.notificheEmail),e.xp6(1),e.Q6J("ngIf",null!=r.timeline&&r.timeline.length>0),e.xp6(1),e.Q6J("ngIf",null!=r.dataSourcePreventivi&&null!=r.dataSourcePreventivi.data&&r.dataSourcePreventivi.data.length>0),e.xp6(4),e.hij(" ",e.lcZ(138,146,"bo.preventivo.proprieta.codicePreventivo")+(r.preventivo.codicePreventivo?" "+r.preventivo.codicePreventivo:"")," "),e.xp6(3),e.hij(" ",null!=r.preventivo.statoPreventivo?" - "+e.lcZ(141,148,r.getEnumKeyTranslation(r.enumStatoPreventivo,r.preventivo.statoPreventivo,"statoPreventivo")):""," "),e.xp6(2),e.Q6J("ngIf",r.preventivo.statoPreventivo==r.enumStatoPreventivo.Prenotato&&null!=r.prenotazione),e.xp6(1),e.Q6J("ngIf",null!=r.preventivo.statoPreventivo&&r.preventivo.statoPreventivo!=r.enumStatoPreventivo.Prenotato),e.xp6(3),e.Q6J("ngIf",r.preventivo.statoPreventivo!=r.enumStatoPreventivo.DaGestire),e.xp6(1),e.Q6J("ngForOf",e.xi3(148,150,r.enumFlagPreventivo,"flagPreventivo")),e.xp6(2),e.Q6J("ngIf",null!=r.preventivo.flag&&r.preventivo.flag!=r.enumFlagPreventivo.Nessuno),e.xp6(3),e.Oqu(e.lcZ(153,153,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(156,155,"globals.indietro")),e.xp6(2),e.Q6J("ngIf",null!=r.workFlows&&r.workFlows.length>0),e.xp6(3),e.Q6J("ngForOf",r.workFlows),e.xp6(1),e.Q6J("ngIf",r.eliminaPreventivoEnabled),e.xp6(1),e.Q6J("matMenuTriggerFor",a),e.xp6(4),e.Q6J("ngForOf",r.causaliOperazioneCancellazione),e.xp6(1),e.Q6J("ngIf",(r.sessionService.getRuoloUtente()==r.enumRuolo.SuperAdmin||r.preventivo.statoPreventivo==r.enumStatoPreventivo.Bozza)&&r.eliminaPreventivoEnabled),e.xp6(1),e.Q6J("disabled",null==r.preventivo.cliente||r.preventivo.statoPreventivo==r.enumStatoPreventivo.Rifiutato),e.xp6(1),e.Oqu(e.lcZ(170,157,"sbm.preventivi.rifiuta")),e.xp6(2),e.Q6J("matMenuTriggerFor",l),e.xp6(4),e.Q6J("ngForOf",r.causaliOperazioneRifiuto),e.xp6(2),e.Oqu(e.lcZ(178,159,"sbm.preventivi.stampa")),e.xp6(2),e.Q6J("ngIf",r.prenotaPreventivoEnabled),e.xp6(1),e.Q6J("disabled",null==r.preventivo.cliente||!r.preventivo.cliente.email),e.xp6(1),e.Oqu(e.lcZ(182,161,"sbm.preventivi.invia")),e.xp6(2),e.Q6J("ngIf",null!=r.preventivo.cliente)}}class pn extends f.H{set preventivoOid(o){this.tabIndex=0,this.cameraIndex=0,this.initialized=!1,null!=o&&(this.oidPreventivo=o,this.richiesta=null,this.oidPreventivo>0&&(this.preventivo=new v.OeL,this.messaggi=[],this.numeroMessaggiNonLetti=0,this.setIsLoading(!0),this.apiService.checkPreventivo(this.oidPreventivo).subscribe(()=>{this.download(0,!0,!0)}),this.containerService.scrollToTop()))}constructor(o,t,n,a,l,r){super(),this.apiService=o,this.sessionService=t,this.containerService=n,this.utility=a,this.navigationService=l,this.localizationService=r,this.preventivo=new v.OeL,this.messaggi=[],this.notificheEmail=[],this.tabIndexes=[],this.risorse=[],this.tariffe=[],this.tipoSconto=["\u20ac","%"],this.tabIndex=0,this.cameraIndex=0,this.enumTipoDettaglioProposta=c.SM,this.enumStatoPreventivo=c.N4,this.enumTipoTemplate=c.hQ,this.enumMittente=c.VM,this.selectionContenuti=new me.Ov(!0,[]),this.selectionArticoli=new me.Ov(!0,[]),this.enumFlagPreventivo=c.yw,this.enumTipoRichiesta=c.GY,this.enumTipoScontoProposta=c.ry,this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.eliminaPreventivoEnabled=!0,this.prenotaPreventivoEnabled=!0,this.inserimentoScontiEnabled=!0,this.modificaPreventivoInviatoEnabled=!0,this.enumRuolo=c.Gt,this.displayedColumns=["codice","data","arrivo","partenza","stato","totale","openEdit"],this.initialized=!1,this.numeroMessaggiNonLetti=0,this.tagCrmXLingua=[],this.contenuti=[],this.articoli=[],this.causaliOperazioneCancellazione=[],this.causaliOperazioneRifiuto=[],this.riduzioni=[],this.backEvent=new e.vpe}ngOnInit(){let o=this.sessionService.getPermessiUtente();null!=o&&(this.eliminaPreventivoEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.EliminazionePreventivo)),this.prenotaPreventivoEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.PrenotazionePreventivo)),this.inserimentoScontiEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.InserimentoScontiCrm)),this.modificaPreventivoInviatoEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaPreventivoInviato)))}download(o=-2,t=!0,n=!1){t&&this.setIsLoading(!0),this.apiService.viewPreventivo(this.oidPreventivo).subscribe(a=>{this.initialized=!0,this.preventivo=a.data.preventivo,this.prenotazione=a.data.prenotazione,this.camere=a.data.camere,this.messaggi=a.data.messaggi,this.numeroMessaggiNonLetti=this.messaggi.filter(r=>null==r.dataVisualizzazione&&r.mittente==c.VM.Cliente).length,this.notificheEmail=a.data.notificheEmail,this.tagCrm=a.data.tags,this.richiesta=a.data.richiesta,this.modalitaPagamento=a.data.modalitaPagamento,this.timeline=a.data.timeline,this.sistemazioni=a.data.sistemazioni,this.tipoScontoDefaultDettagliPreventivo=a.data.tipoScontoDefaultDettagliPreventivo,this.oidModalitaPagamentoRichiestaCaparra=a.data.oidModalitaPagamentoRichiestaCaparra,this.templateRichiestaCaparra=a.data.templateRichiestaCaparra,this.isInviaMailConfermaPagamentoManualeCrm=a.data.isInviaMailConfermaPagamentoManualeCrm,this.dataSourcePreventivi=new s.r4(a.data.preventivi),setTimeout(()=>{this.dataSourcePreventivi.paginator=this.paginator},200),this.risorse=a.data.risorse,this.risorse.length>0&&(this.risorsaDefault=this.risorse[0]),this.tariffe=a.data.tariffe,this.tariffe.length>0&&(this.tariffaDefault=this.tariffe[0]),this.workFlows=a.data.workFlows;try{for(let r of this.workFlows)r.coloreHex=Z(r.colore).hex()}catch(r){}this.workFlowsEseguiti=a.data.workFlowsEseguiti;try{for(let r of this.workFlowsEseguiti)r.coloreHex=Z(r.colore).hex()}catch(r){}if(this.selectionContenuti=new me.Ov(!0,[]),this.selectionArticoli=new me.Ov(!0,[]),this.preventivo.oidContenutiMyPage&&null!=this.contenuti&&this.contenuti.length>0){let r=this.preventivo.oidContenutiMyPage.split(";");for(let p of r)""!=p&&!isNaN(+p)&&-1!=this.contenuti.findIndex(T=>T.oid==+p)&&this.selectionContenuti.toggle(+p)}if(this.preventivo.oidArticoliUpSelling&&null!=this.articoli&&this.articoli.length>0){let r=this.preventivo.oidArticoliUpSelling.split(";");for(let p of r)""!=p&&!isNaN(+p)&&-1!=this.articoli.findIndex(T=>T.oid==+p)&&this.selectionArticoli.toggle(+p)}if(n){this.tabIndexes=[];for(let r of this.camere)this.tabIndexes.push(0)}if(this.calculateTotals(),this.testoIniziale=this.preventivo.testoIniziale,null==this.preventivo.tagCrm)this.preventivo.tagCrm=new v.I73,null!=this.tagCrm&&this.tagCrm.length>0?(this.preventivo.tagCrm.oid=this.tagCrm[0].tagCrm.oid,this.tagCrmXLingua=this.tagCrm[0].tagCrmXLingua,this.onTagCrmChange()):this.preventivo.tagCrm.oid=-1;else if(null==this.testoIniziale&&null!=this.tagCrm&&this.tagCrm.length>0){let r=this.tagCrm.find(p=>p.tagCrm.oid==this.preventivo.tagCrm.oid);var l;if(null!=r&&(this.tagCrmXLingua=r.tagCrmXLingua,null!=this.preventivo.lingua))this.testoIniziale=null===(l=this.tagCrmXLingua.find(p=>null!=p.lingua&&p.lingua.codice==this.preventivo.lingua.codice))||void 0===l?void 0:l.testo}if(null!=this.richiesta&&(null!=this.richiesta.dal&&(this.richiesta.dal=u(this.getDate(this.richiesta.dal)).format("DD/MM/YYYY")),null!=this.richiesta.al&&(this.richiesta.al=u(this.getDate(this.richiesta.al)).format("DD/MM/YYYY"))),null!=this.camere&&this.camere.length>0)for(let r of this.camere)if(null!=r.proposte&&r.proposte.length>0)for(let p of r.proposte)if(null!=p.dettagli&&p.dettagli.length>0)for(let T of p.dettagli)this.setGiorniString(T);o>=-1&&setTimeout(()=>{this.tabIndexes[this.cameraIndex]=-1==o?this.camere[this.cameraIndex].proposte.length-1:o,window.dispatchEvent(new Event("resize"))},100),t&&this.setIsLoading(!1)})}generaProposte(o){let t=new d.Zpt;t.width="80vw",t.height="80vh";let n=this.showModalDialog(an,t),a=n.componentInstance;a.oidCamera=o,a.matDialogRef=n,n.afterClosed().subscribe(l=>{l&&this.download(0)})}save(o=!0,t=!0,n=!1,a=!1){o&&this.setIsLoading(!0),this.apiService.getPreventivo(this.oidPreventivo).subscribe(l=>{this.preventivo.statoPreventivo!=l.data.statoPreventivo?(o&&this.setIsLoading(!1),this.showDialogConfirm("sbm.preventivi.statoPreventivoModificato").then(r=>{this.doSave(o,t,n,a)},r=>this.download())):this.doSave(o,t,n,a)})}doSave(o=!0,t=!0,n=!1,a=!1){if(o&&this.setIsLoading(!0),this.preventivo.dataPreventivo=this.getDate(this.preventivo.dataPreventivo),this.preventivo.dataScadenza=this.getDate(this.preventivo.dataScadenza),this.preventivo.dataScadenzaAccontoCaparra=this.getDate(this.preventivo.dataScadenzaAccontoCaparra),null!=this.contenuti&&this.contenuti.length>0&&(this.preventivo.oidContenutiMyPage=this.selectionContenuti.selected.toString().replace(/,/g,";")),null!=this.articoli&&this.articoli.length>0&&(this.preventivo.oidArticoliUpSelling=this.selectionArticoli.selected.toString().replace(/,/g,";")),null!=this.preventivo.tagCrm&&this.preventivo.tagCrm.oid>0&&null!=this.tagCrmXLingua&&this.tagCrmXLingua.length>0){var l;let r="it";null!=this.preventivo&&null!=this.preventivo.lingua&&(r=this.preventivo.lingua.codice),this.testoIniziale!=(null===(l=this.tagCrmXLingua.find(p=>null!=p.lingua&&p.lingua.codice==r))||void 0===l?void 0:l.testo)?this.preventivo.testoIniziale=this.testoIniziale:this.preventivo.testoIniziale=null}else this.preventivo.testoIniziale=this.testoIniziale;this.apiService.setPreventivo(this.preventivo).subscribe(r=>{a&&this.navigationService.refreshContatoriMenu(),this.oidPreventivo=r.data.obj.oid,this.preventivo=r.data.obj,t?this.download(-2,o):o&&this.setIsLoading(!1),n&&this.utility.openUrlInNewTab(this.getUrlMyPage()+"&isHotel=true")})}saveProposta(o,t=-2,n=!0,a=!0,l=!1){n&&this.setIsLoading(!0),l&&this.calculateTotals(!1),this.apiService.setProposta(o).subscribe(()=>{a?this.download(t,n):n&&this.setIsLoading(!1)})}onCausaleClick(o,t){if(!this.preventivo.cliente.email||null!=o&&null==o.template){this.setIsLoading(!0);let n=new d.z74;n.oidPreventivo=this.preventivo.oid,n.oidCausale=null!=o?o.oid:-1,(t?this.apiService.cancellaPreventivo(n):this.apiService.rifiutaPreventivo(n)).subscribe(()=>{this.setIsLoading(!1),this.navigationService.refreshContatoriMenu(),this.showInfo(t?"sbm.preventivi.preventivoCancellato":"sbm.preventivi.preventivoRifiutato").then(()=>{this.back(!1)})})}else{let n=new d.Zpt;n.width="50vw";let a=this.showModalDialog(Qe,n),l=a.componentInstance;l.tipoTemplate=c.hQ.PreventivoRifiutato,l.preventivo=this.preventivo,l.causale=o,l.isCancellaPreventivo=t,l.dialogRef=a,a.afterClosed().subscribe(r=>{r&&(this.navigationService.refreshContatoriMenu(),this.back(!1))})}}editCliente(){let o;o=null==this.preventivo.cliente?new v.c1h(-1):Object.assign({},this.preventivo.cliente);let t=new d.Zpt;t.width="80vw";let n=this.showModalDialog(we.J,t),a=n.componentInstance;a.cliente=o,a.dialogRef=n,a.linguaDefault=this.sessionService.sessione.albergo.linguaDefaultClientePreventivo,n.afterClosed().subscribe(l=>{if(null!=l&&l.oid>0){let r=null==this.preventivo.cliente||this.preventivo.cliente.oid!=l.oid||this.preventivo.cliente.sconto!=l.sconto;this.preventivo.cliente=l;let p=null!=this.preventivo.lingua?this.preventivo.lingua.codice:"it";null!=this.preventivo.cliente.lingua&&(this.preventivo.lingua=this.preventivo.cliente.lingua);let T=null!=this.preventivo.lingua?this.preventivo.lingua.codice:"it";this.save(!1,!1),p!=T&&this.onTagCrmChange(!0);let L=new d.teg;L.oidCliente=l.oid,L.oidDaEscludere=this.oidPreventivo,this.apiService.getPreventiviCliente(L).subscribe(G=>{this.dataSourcePreventivi=new s.r4(G.data),setTimeout(()=>{this.dataSourcePreventivi.paginator=this.paginator,null!=this.paginator&&this.paginator.firstPage()},200)}),this.preventivo.cliente.sconto>0&&r&&this.updateScontoProposte(-1,this.preventivo.cliente.sconto,!0,!1)}})}duplicateProposta(o,t){this.setIsLoading(!0),this.apiService.duplicaProposta(o.proposta.oid).subscribe(n=>{n.data.dettagli.forEach((a,l)=>a.giorniString=o.dettagli[l].giorniString),t.proposte.push(n.data),this.calculateTotals(),setTimeout(()=>{this.tabIndexes[this.cameraIndex]=this.camere[this.cameraIndex].proposte.length-1,this.setIsLoading(!1)},100)})}deleteProposta(o,t){this.showDialogConfirm("sbm.preventivi.eliminareProposta").then(n=>{this.setIsLoading(!0);let a=new v._p_(o);a.isDeleted=!0,this.apiService.setProposta(a).subscribe(()=>{let l=t.proposte.findIndex(r=>r.proposta.oid==o);t.proposte.splice(l,1),this.calculateTotals(),setTimeout(()=>{this.tabIndexes[this.cameraIndex]=0,window.dispatchEvent(new Event("resize")),this.setIsLoading(!1)},100)})},n=>{})}addProposta(o){this.calcolaPrezzo(o,null,null)}deleteAllProposte(o){this.showDialogConfirm("sbm.preventivi.eliminareProposte").then(t=>{this.setIsLoading(!0);let n=new d.bF$;n.oidCamera=o,this.apiService.deleteAllProposte(n).subscribe(()=>{this.download(0)})},t=>{})}onTagCrmChange(o=!1){if(null!=this.preventivo.tagCrm&&this.preventivo.tagCrm.oid>0){if(!o){let a=this.tagCrm.find(l=>l.tagCrm.oid==this.preventivo.tagCrm.oid);if(null!=a&&(this.preventivo.tagCrm.oidContenuti=a.tagCrm.oidContenuti,this.preventivo.tagCrm.oidArticoli=a.tagCrm.oidArticoli),this.selectionContenuti=new me.Ov(!0,[]),this.preventivo.tagCrm.oidContenuti&&null!=this.contenuti&&this.contenuti.length>0){let l=this.preventivo.tagCrm.oidContenuti.split(";");for(let r of l)""!=r&&!isNaN(+r)&&-1!=this.contenuti.findIndex(p=>p.oid==+r)&&this.selectionContenuti.toggle(+r);this.preventivo.oidContenutiMyPage=this.selectionContenuti.selected.toString().replace(/,/g,";")}if(this.selectionArticoli=new me.Ov(!0,[]),this.preventivo.tagCrm.oidArticoli&&null!=this.articoli&&this.articoli.length>0){let l=this.preventivo.tagCrm.oidArticoli.split(";");for(let r of l)""!=r&&!isNaN(+r)&&-1!=this.articoli.findIndex(p=>p.oid==+r)&&this.selectionArticoli.toggle(+r);this.preventivo.oidArticoliUpSelling=this.selectionArticoli.selected.toString().replace(/,/g,";")}}let n="it";var t;if(null!=this.preventivo&&null!=this.preventivo.lingua&&(n=this.preventivo.lingua.codice),null!=this.tagCrmXLingua&&this.tagCrmXLingua.length>0)this.testoIniziale=null===(t=this.tagCrmXLingua.find(a=>null!=a.lingua&&a.lingua.codice==n))||void 0===t?void 0:t.testo;this.save(!1,!1)}}back(o=!1){o&&this.save(!0,!1),this.backEvent.emit(),this.containerService.scrollToTop()}duplicateDettaglio(o,t){this.setIsLoading(!0),this.apiService.duplicaDettaglio(o.oid).subscribe(n=>{n.data.giorniString=o.giorniString,t.dettagli.push(n.data),this.calculateTotals(),this.setIsLoading(!1)})}deleteDettaglio(o,t){this.showDialogConfirm("sbm.preventivi.eliminareDettaglio").then(n=>{this.setIsLoading(!0);let a=new v.$AH;a.oid=o,a.isDeleted=!0,this.apiService.setDettaglio(a).subscribe(()=>{this.setIsLoading(!1);let l=this.utility.findIndexByOid(t.dettagli,a.oid);t.dettagli.splice(l,1),this.calculateTotals()})},n=>{})}addDettaglio(o,t){let n=new v.$AH;if(n.tipoDettaglioProposta=t,n.oid=-1,n.quantita=1,n.importo=0,n.sconto=0,n.isPercentuale=this.tipoScontoDefaultDettagliPreventivo==c.jy.Percentuale,n.totale=0,n.proposta=o.proposta,n.isManuale=!0,t==c.SM.VoceLibera){n.descrizione="Voce libera";let a=Math.max(u(this.getDate(o.proposta.partenza)).diff(u(this.getDate(o.proposta.arrivo)),"days"),1),l=[];n.giorniString="";for(let r=0;r<a;r++){let p=this.getDate(u(this.getDate(o.proposta.arrivo)).add(r,"day"));l.push(new d.qSg(p,0)),n.giorniString+=u(p).format("DD/MM/YYYY")+": 0\u20ac\n"}n.giorni=JSON.stringify(l),this.setIsLoading(!0),this.apiService.setDettaglio(n).subscribe(r=>{r.data.obj.giorniString=n.giorniString,o.dettagli.push(r.data.obj),this.setIsLoading(!1)})}else this.editDettaglio(this.camere[this.cameraIndex].numeroAdulti+this.camere[this.cameraIndex].numeroBambini,this.camere[this.cameraIndex].proposte,o,n,!0)}editDettaglio(o,t,n,a,l=!1){let r=new d.Zpt;r.width="60vw";let p=this.showModalDialog(ln,r),T=p.componentInstance;T.risorse=this.risorse,T.tariffe=this.tariffe,T.dettaglio=Object.assign({},a);let L=Object.assign({},n);T.proposta=L,T.proposte=t,T.risorsaDefault=this.risorsaDefault,T.tariffaDefault=this.tariffaDefault,T.addDettaglio=l,T.numeroPax=o,T.dialogRef=p,p.afterClosed().subscribe(G=>{if(null!=G){if(a.oid<=0){if(1==G.length)n.dettagli.push(G[0]);else if(G.length==t.length){let W=0;for(let be of t)be.dettagli.push(G[W]),W++}}else if(1==G.length){let W=this.utility.findIndexByOid(n.dettagli,a.oid);n.dettagli[W]=G[0]}this.getDate(L.proposta.arrivo)!=this.getDate(n.proposta.arrivo)||this.getDate(L.proposta.arrivo)!=this.getDate(n.proposta.arrivo)?(n.proposta.arrivo=L.proposta.arrivo,n.proposta.partenza=L.proposta.partenza,this.updateGiorni(n,!1).then(()=>{this.calculateTotals()})):this.calculateTotals()}})}saveDettaglio(o){this.calculateTotals(!1,!0),this.apiService.setDettaglio(o).subscribe(()=>{this.calculateTotals()})}apriMyPage(){this.save(!0,!1,!0)}calcolaPrezzo(o,t,n){let a=new d.Zpt;a.width="80vw";let l=this.showModalDialog(nn,a),r=l.componentInstance;null!=n&&(r.dettaglio=JSON.parse(JSON.stringify(n))),null!=t&&(r.proposta=Object.assign({},t.proposta)),r.preventivo=Object.assign({},this.preventivo);let p=new d.Esx;p.pax=[];for(let T of o.pax){let L=new d.CIA;L.eta=T.anni,L.quantita=T.quantita,p.pax.push(L)}r.camera=p,r.etaBambini=o.etaBambini,r.dialogRef=l,l.afterClosed().subscribe(T=>{if(null!=T)if(this.setIsLoading(!0),null!=n)this.apiService.updateDettagliFromBookingSolution(T.proposta).subscribe(L=>{t.proposta=L.data.proposta,t.dettagli=L.data.dettagli,t.dettagli.forEach(G=>this.setGiorniString(G)),this.getDate(T.arrivo)!=this.getDate(t.proposta.arrivo)||this.getDate(T.partenza)!=this.getDate(t.proposta.partenza)?(t.proposta.arrivo=this.getDate(T.arrivo),t.proposta.partenza=this.getDate(T.partenza),this.apiService.setProposta(t.proposta).subscribe(()=>{this.updateGiorni(t,!1).then(()=>{this.calculateTotals(),this.setIsLoading(!1)})})):(this.calculateTotals(),this.setIsLoading(!1))});else if(null==t){this.setIsLoading(!0);let L=new v._p_(-1);L.arrivo=this.getDate(T.arrivo),L.partenza=this.getDate(T.partenza),L.totale=0,L.totaleScontato=0,L.camera=o.camera,this.apiService.setProposta(L).subscribe(G=>{T.proposta.oidProposta=G.data.obj.oid,this.apiService.updateDettagliFromBookingSolution(T.proposta).subscribe(W=>{(t=new d.$hX).proposta=W.data.proposta,t.dettagli=W.data.dettagli,t.dettagli.forEach(be=>this.setGiorniString(be)),o.proposte.push(t),this.calculateTotals(),setTimeout(()=>{this.tabIndexes[this.cameraIndex]=this.camere[this.cameraIndex].proposte.length-1,window.dispatchEvent(new Event("resize")),this.setIsLoading(!1)},100)})})}})}calcolaPrezzoArticolo(o,t,n){if(null!=t.articolo){this.setIsLoading(!0);let a=new d.UvZ;a.oidArticolo=t.articolo.oid,a.oidProposta=t.proposta.oid,a.sconto=t.sconto>0?t.isPercentuale?t.sconto:t.importo-t.totale/t.quantita:0,a.isScontoPercentuale=t.isPercentuale,this.apiService.getPrezzoArticolo(a).subscribe(l=>{if(null!=l.data&&null!=l.data.giorni&&l.data.giorni.length>0)if(1==l.data.giorni.length){t.articolo.tipoArticolo==c.ix.Supplemento&&1==t.articolo.isApplicaATuttiComponenti?t.quantita=n:t.quantita=1,t.data=l.data.giorni[0].data,t.importo=l.data.giorni[0].prezzo,t.giorniString=u(l.data.giorni[0].data).format("DD/MM/YYYY")+": "+this.utility.roundTo(l.data.giorni[0].prezzoScontato*t.quantita,this.getNumeroDecimali(t))+"\u20ac";let r=new d.qSg;r.data=l.data.giorni[0].data,r.prezzo=l.data.giorni[0].prezzoScontato,t.giorni=JSON.stringify([r]);let p=this.utility.findIndexByOid(o.dettagli,t.oid);this.apiService.setDettaglio(t).subscribe(T=>{o.dettagli[p]=T.data.obj,o.dettagli[p].giorniString=t.giorniString,this.calculateTotals(),this.setIsLoading(!1)})}else{let r=new d.Zpt;r.width="60vw";let p=this.showModalDialog(gi,r),T=p.componentInstance;T.giorni=l.data.giorni,T.dettaglio=t,T.dialogRef=p,p.afterClosed().subscribe(L=>{if(null!=L){this.setIsLoading(!0),t.data=null,t.importo=0,t.giorniString="";let G=[];for(let be of L)if(be.selected){t.importo+=be.prezzo,t.giorniString+=u(be.data).format("DD/MM/YYYY")+": "+this.utility.roundTo(be.prezzoScontato*t.quantita,this.getNumeroDecimali(t))+"\u20ac\n";let Ze=new d.qSg;Ze.data=be.data,Ze.prezzo=be.prezzoScontato,G.push(Ze)}t.articolo.tipoArticolo==c.ix.Supplemento&&1==t.articolo.isApplicaATuttiComponenti?t.quantita=n:t.quantita=1,t.giorni=JSON.stringify(G);let W=this.utility.findIndexByOid(o.dettagli,t.oid);this.apiService.setDettaglio(t).subscribe(be=>{o.dettagli[W]=be.data.obj,o.dettagli[W].giorniString=t.giorniString,this.calculateTotals(),this.setIsLoading(!1)})}})}this.setIsLoading(!1)})}}calculateTotals(o=!0,t=!1){if(null!=this.preventivo){let n=new d.RnA;if(n.oid=this.preventivo.oid,null!=this.camere&&this.camere.length>0){this.preventivo.totale=0;for(let a of this.camere){let l=new d.qQ4;l.oid=a.camera.oid;let r=0,p=null;if(null!=a.proposte&&a.proposte.length>0)for(let T of a.proposte){let L=new d.B3;L.oid=T.proposta.oid;let G=0;if(null!=T.dettagli&&T.dettagli.length>0)for(let W of T.dettagli){let be=new d.f3O;be.oid=W.oid;let Ze=W.totale;W.totale=W.importo*W.quantita,this.checkSconto(W),W.sconto>0&&(W.isPercentuale?W.totale-=W.totale*W.sconto/100:W.totale-=W.sconto);let Je=this.getNumeroDecimali(W);if(Ze!=W.totale&&t&&W.giorni)try{let $e=JSON.parse(W.giorni);if(null!=$e&&$e.length>0){W.giorniString="";for(let _t of $e)_t.prezzo=this.utility.roundTo(W.totale/W.quantita/$e.length,Je),W.giorniString+=u(_t.data).format("DD/MM/YYYY")+": "+this.getTariffaGiorno(_t)+this.utility.roundTo(W.totale/$e.length,Je)+"\u20ac\n";W.giorni=JSON.stringify($e)}}catch($e){}be.totale=W.totale,G+=W.totale,r+=W.totale,L.dettagli.push(be)}if(T.proposta.totale=G,L.totale=T.proposta.totale,this.checkScontoProposta(T.proposta),T.proposta.sconto>0)if(T.proposta.isPercentuale){let W=T.proposta.totale*T.proposta.sconto/100;G-=W,r-=W}else G-=T.proposta.sconto,r-=T.proposta.sconto;T.proposta.totaleScontato=G,L.totaleScontato=T.proposta.totaleScontato,l.proposte.push(L),(null==p||L.totaleScontato<p)&&(p=L.totaleScontato)}a.camera.totale=r,l.totale=a.camera.totale,n.camere.push(l),this.preventivo.totale+=null!=p?p:0}n.totale=this.preventivo.totale}o&&this.apiService.updateTotals(n).subscribe(()=>{})}}send(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;this.preventivo.statoPreventivo==c.N4.Accettato?n.tipoTemplate=c.hQ.PreventivoAccettato:this.preventivo.statoPreventivo==c.N4.InAttesaPagamento?n.tipoTemplate=c.hQ.PreventivoRichiestaCaparra:this.preventivo.statoPreventivo==c.N4.Prenotato?n.tipoTemplate=c.hQ.PreventivoPrenotato:n.tipoTemplate=c.hQ.Preventivo,n.preventivo=this.preventivo,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&(this.preventivo.statoPreventivo=a.statoPreventivo,this.preventivo.dataInvio=a.dataInvio,this.getWorkFlows(),this.getNotificheEmail())})}print(){let o=new d.Zpt;o.width="50vw";let n=this.showModalDialog(Vt,o).componentInstance;this.preventivo.statoPreventivo==c.N4.Prenotato?n.tipoTemplate=c.hQ.PreventivoPrenotato:n.tipoTemplate=c.hQ.Preventivo,n.preventivo=this.preventivo}getClassProposta(o){return null!=o.dataConferma||this.preventivo.statoPreventivo!=c.N4.Accettato&&this.preventivo.statoPreventivo!=c.N4.InAttesaPagamento&&this.preventivo.statoPreventivo!=c.N4.Prenotato?"":"proposta-non-confermata"}sendEmail(o=c.hQ.Generico){if(null!=this.preventivo.cliente){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Qe,t),a=n.componentInstance;a.tipoTemplate=o,a.cliente=this.preventivo.cliente,a.preventivo=this.preventivo,a.isInviaEmailCliente=!0,a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&this.getNotificheEmail()})}}sendSms(){null!=this.preventivo.cliente&&(this.setIsLoading(!0),this.apiService.getTestoSmsPreventivo(this.oidPreventivo).subscribe(o=>{this.setIsLoading(!1);let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(ct,t),a=n.componentInstance;a.numero=this.preventivo.cliente.cellulare,a.testo=o.data,a.dialogRef=n}))}prenota(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(hi,o),n=t.componentInstance;n.isAccettaConPagamentoImmediato=this.preventivo.isAccettaConPagamentoImmediato,n.caparra=this.preventivo.caparra,n.isCaparraPercentuale=this.preventivo.isCaparraPercentuale,n.camere=this.camere,n.modalitaPagamento=this.modalitaPagamento,n.oidModalitaPagamento=this.oidModalitaPagamentoRichiestaCaparra,n.template=this.templateRichiestaCaparra,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&null!=a.oidProposte&&a.oidProposte.length==this.camere.length&&(a.isPrenotazioneExtranet=!0,this.setIsLoading(!0),this.apiService.prenotaPreventivo(a).subscribe(()=>{this.setIsLoading(!1),this.showInfo("globals.messages.prenotazioneCompletata").then(()=>{this.download(0)})}))})}onCameraChange(){setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100)}checkSconto(o){o.sconto>0?o.isPercentuale&&o.sconto>100?o.sconto=100:!o.isPercentuale&&o.sconto>o.importo*o.quantita&&(o.sconto=o.importo*o.quantita):o.sconto=0}checkScontoProposta(o){o.sconto>0?o.isPercentuale&&o.sconto>100?o.sconto=100:!o.isPercentuale&&o.sconto>o.totale&&(o.sconto=o.totale):o.sconto=0}onArrivoPropostaChange(o){setTimeout(()=>{o.proposta.arrivo=this.getDate(o.proposta.arrivo),u(o.proposta.arrivo)<u().startOf("day")&&(o.proposta.arrivo=this.getDate(u())),(null==o.proposta.partenza||u(o.proposta.arrivo)>=u(o.proposta.partenza))&&(o.proposta.partenza=this.getDate(u(o.proposta.arrivo).add(1,"day"))),this.updateGiorni(o).then(()=>{this.saveProposta(o.proposta,-2,!1,!1)})},200)}onPartenzaPropostaChange(o){setTimeout(()=>{o.proposta.partenza=this.getDate(o.proposta.partenza),u(o.proposta.partenza)<u().add(1,"day").startOf("day")&&(o.proposta.partenza=this.getDate(u().add(1,"day"))),(null==o.proposta.arrivo||u(o.proposta.arrivo)>=u(o.proposta.partenza))&&(o.proposta.arrivo=this.getDate(u(o.proposta.partenza).subtract(1,"day"))),this.updateGiorni(o).then(()=>{this.saveProposta(o.proposta,-2,!1,!1)})},200)}getNumeroDecimali(o){return null!=o.tariffaOTA&&null!=o.tariffaOTA.trattamento&&o.tariffaOTA.trattamento.tipoServizio==c.k8.Pacchetto?4:2}updateGiorni(o,t=!0){return new Promise(n=>{let a=[],l=Math.max(u(this.getDate(o.proposta.partenza)).diff(u(this.getDate(o.proposta.arrivo)),"days"),1);for(let r=0;r<l;r++)a.push(this.getDate(u(this.getDate(o.proposta.arrivo)).add(r,"day")));for(let r of o.dettagli)if(t||r.tipoDettaglioProposta!=c.SM.Camera){let p;null!=r.data&&a.includes(r.data)?p=[r.data]:(p=JSON.parse(JSON.stringify(a)),null!=r.data&&r.tipoDettaglioProposta==c.SM.SupplementoExtra&&(1==p.length?r.data=p[0]:r.data=null));let T=this.getNumeroDecimali(r),L=[];r.giorniString="";let G=[];try{let W=JSON.parse(r.giorni);null!=W&&W.length>0&&(G=W)}catch(W){}for(let W of p){let be=G.find(Ze=>Ze.data==W);L.push(new d.qSg(W,this.utility.roundTo(r.totale/r.quantita/p.length,T),null==be?void 0:be.oidTariffa)),r.giorniString+=u(W).format("DD/MM/YYYY")+": "+this.getTariffaGiorno(be)+this.utility.roundTo(r.totale/p.length,T)+"\u20ac\n"}r.giorni=JSON.stringify(L)}this.apiService.setMultipleDettaglio(o.dettagli).subscribe(()=>n())})}confermaPagamento(){setTimeout(()=>{this.preventivo.dataConfermaPagamento=this.getDate(u()),this.preventivo.statoPreventivo==c.N4.InAttesaPagamento&&(this.preventivo.statoPreventivo=c.N4.Prenotato),this.doSave(!1,!1),this.isInviaMailConfermaPagamentoManualeCrm&&this.sendEmail(c.hQ.PreventivoPrenotato)},200)}onDataPreventivoChange(){setTimeout(()=>{this.preventivo.dataPreventivo=this.getDate(this.preventivo.dataPreventivo),u(this.preventivo.dataPreventivo)>u().startOf("day")&&(this.preventivo.dataPreventivo=this.getDate(u())),u(this.preventivo.dataPreventivo)>u(this.preventivo.dataScadenza)&&(this.preventivo.dataScadenza=this.getDate(u(this.preventivo.dataPreventivo))),this.save(!1,!1)},200)}onDataScadenzaChange(){setTimeout(()=>{this.preventivo.dataScadenza=this.getDate(this.preventivo.dataScadenza),u(this.preventivo.dataScadenza)<u().startOf("day")&&(this.preventivo.dataScadenza=this.getDate(u())),u(this.preventivo.dataPreventivo)>u(this.preventivo.dataScadenza)&&(this.preventivo.dataPreventivo=this.getDate(u(this.preventivo.dataScadenza))),this.save(!1,!1)},200)}onDataScadenzaAccontoCaparraChange(){setTimeout(()=>{this.preventivo.dataScadenzaAccontoCaparra=this.getDate(this.preventivo.dataScadenzaAccontoCaparra),u(this.preventivo.dataScadenzaAccontoCaparra)<u().startOf("day")&&(this.preventivo.dataScadenzaAccontoCaparra=this.getDate(u())),this.save(!1,!1)},200)}getUrlMyPage(){return window.location.origin+"/booking/mypage?uid="+this.preventivo.uid}openPrenotazione(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog(cn,o),n=t.componentInstance;n.prenotazione=this.prenotazione,n.dialogRef=t}isPrenotato(){return null!=this.preventivo&&(this.preventivo.statoPreventivo==c.N4.Accettato||this.preventivo.statoPreventivo==c.N4.InAttesaPagamento||this.preventivo.statoPreventivo==c.N4.Prenotato||!this.modificaPreventivoInviatoEnabled&&this.preventivo.statoPreventivo==c.N4.Inviato)}eseguiWorkFlow(o){this.showDialogConfirm("sbm.preventivi.eseguireWorkFlow").then(t=>{this.setIsLoading(!0);let n=new d.Jie;n.oidWorkFlow=o.oid,n.oidPreventivo=this.oidPreventivo,this.apiService.eseguiWorkFlowPreventivo(n).subscribe(a=>{if(null!=a&&null!=a.data){this.preventivo.statoPreventivo=o.statoPreventivoFinale,this.workFlowsEseguiti=a.data.workFlowsEseguiti;try{for(let l of this.workFlowsEseguiti)l.coloreHex=Z(l.colore).hex()}catch(l){}this.getWorkFlows()}})},t=>{})}getWorkFlows(){this.setIsLoading(!0),this.apiService.getWorkFlowsPreventivo(this.oidPreventivo).subscribe(o=>{this.workFlows=o.data;try{for(let t of this.workFlows)t.coloreHex=Z(t.colore).hex()}catch(t){}this.setIsLoading(!1)})}updatePoliticaCancellazioneProposte(o,t){this.showDialogConfirm("sbm.preventivi.modificareTutteLeProposte").then(n=>{this.setIsLoading(!0),this.camere[o].proposte.forEach(a=>a.proposta.cancellazione=t),this.apiService.setMultipleProposta(this.camere[o].proposte.map(a=>a.proposta)).subscribe(()=>{this.setIsLoading(!1)})},n=>{})}updateScontoProposte(o,t,n,a=!0){if(a)if(1==this.camere.length)this.showDialogConfirm("sbm.preventivi.modificareTutteLeProposte").then(l=>{this.setIsLoading(!0),this.camere[o].proposte.forEach(r=>{r.proposta.sconto=t,r.proposta.isPercentuale=n}),this.apiService.setMultipleProposta(this.camere[o].proposte.map(r=>r.proposta)).subscribe(()=>{this.calculateTotals(),this.setIsLoading(!1)})},l=>{});else{let l=new d.Zpt,r=this.showModalDialog(Ci,l);r.componentInstance.dialogRef=r,r.afterClosed().subscribe(T=>{if(null!=T){let L;this.setIsLoading(!0),L=T==c.fY.TutteLeProposte?this.camere[o].proposte:[].concat(...this.camere.map(G=>G.proposte)),L.forEach(G=>{G.proposta.sconto=t,G.proposta.isPercentuale=n}),this.apiService.setMultipleProposta(L.map(G=>G.proposta)).subscribe(()=>{this.calculateTotals(),this.setIsLoading(!1)})}})}else{let l=[].concat(...this.camere.map(r=>r.proposte));l.forEach(r=>{r.proposta.sconto<=0&&(r.proposta.sconto=t,r.proposta.isPercentuale=n)}),this.apiService.setMultipleProposta(l.map(r=>r.proposta)).subscribe(()=>{this.calculateTotals()})}}updateNoteProposte(o,t){if(1==this.camere.length)this.showDialogConfirm("sbm.preventivi.modificareTutteLeProposte").then(n=>{this.setIsLoading(!0),this.camere[o].proposte.forEach(a=>a.proposta.note=t),this.apiService.setMultipleProposta(this.camere[o].proposte.map(a=>a.proposta)).subscribe(()=>{this.setIsLoading(!1)})},n=>{});else{let n=new d.Zpt,a=this.showModalDialog(Ci,n);a.componentInstance.dialogRef=a,a.afterClosed().subscribe(r=>{if(null!=r){let p;this.setIsLoading(!0),p=r==c.fY.TutteLeProposte?this.camere[o].proposte:[].concat(...this.camere.map(T=>T.proposte)),p.forEach(T=>T.proposta.note=t),this.apiService.setMultipleProposta(p.map(T=>T.proposta)).subscribe(()=>{this.setIsLoading(!1)})}})}}getNotificheEmail(){this.setIsLoading(!0),this.apiService.getNotificheEmailFilter(d.k$g.fromFilter("codicePreventivo",c.Hp.Equal,this.preventivo.codicePreventivo,c.NM.String)).subscribe(o=>{this.notificheEmail=o.data,this.setIsLoading(!1)})}getNotti(o){return o.arrivo&&o.partenza?Math.max(u(this.getDate(o.partenza)).diff(u(this.getDate(o.arrivo)),"days"),1):0}delete(){this.showDialogConfirm("sbm.preventivi.eliminarePreventivo").then(o=>{this.setIsLoading(!0),this.apiService.deletePreventivo(this.preventivo.oid).subscribe(()=>{this.back(!1)})},o=>{})}openWhatsApp(){this.setIsLoading(!0),this.apiService.getUrlWhatsAppPreventivo(this.oidPreventivo).subscribe(o=>{o.data&&this.utility.openUrlInNewTab(o.data),this.setIsLoading(!1)})}editPax(){let o=new d.Zpt;o.width="50vw",o.minHeight="30vh";let t=this.showModalDialog(fi,o),n=t.componentInstance;n.oidPreventivo=this.oidPreventivo,n._camere=this.camere.map(a=>a.pax),n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.download()})}ordinaProposte(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(rn,t),a=n.componentInstance;a.proposte=o.proposte.map(l=>l.proposta),a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&this.download()})}editPreventivo(o){this.utility.openUrlInNewTab("/sbm/home/(homeOutlet:preventivi)?oidPreventivo="+o)}openPreventivo(o){this.utility.openUrlInNewTab("/booking/mypage?uid="+o)}onTabChange(o){o==this.localizationService.getTranslationSync("sbm.preventivi.messaggiTab")&&this.numeroMessaggiNonLetti>0&&this.impostaMessaggiLetti()}impostaMessaggiLetti(o=!1){this.numeroMessaggiNonLetti=0,o&&this.setIsLoading(!0),this.apiService.impostaMessaggiLettiPreventivo(this.oidPreventivo).subscribe(()=>{this.navigationService.refreshContatoriMenu().then(()=>{o&&this.setIsLoading(!1)})})}getDettagliSupplementi(o){let t=o.dettagli.filter(a=>a.tipoDettaglioProposta==c.SM.SupplementoExtra||a.tipoDettaglioProposta==c.SM.VoceLibera),n=t.filter(a=>null!=a.articolo).sort((a,l)=>a.articolo.ordinamento<l.articolo.ordinamento?-1:a.articolo.ordinamento>l.articolo.ordinamento?1:0);return n=n.concat(t.filter(a=>null==a.articolo)),n}getDettagliRiduzioni(o){return o.dettagli.filter(t=>t.tipoDettaglioProposta==c.SM.Pax)}setGiorniString(o){if(null!=o&&o.giorni)try{let t=JSON.parse(o.giorni);if(null!=t&&t.length>0){o.giorniString="";for(let n of t)o.giorniString+=u(n.data).format("DD/MM/YYYY")+": "+this.getTariffaGiorno(n)+this.utility.roundTo(n.prezzo*o.quantita,this.getNumeroDecimali(o))+"\u20ac\n"}}catch(t){}}isPrenotaDisabled(){let o=[c.N4.Prenotato,c.N4.InAttesaPagamento,c.N4.Cancellato,c.N4.Rifiutato,c.N4.Archiviato];return null==this.preventivo.cliente||o.includes(this.preventivo.statoPreventivo)}getTariffaGiorno(o){if(null!=o&&null!=o.oidTariffa&&o.oidTariffa>0){let t=this.utility.findItemByOid(this.tariffe,o.oidTariffa);if(null!=t)return t.descrizione+" "}return""}openCalcolaRetta(){let o=new d.Zpt;o.width="80vw",o.minHeight="80vh",o.maxHeight="95vh",o.panelClass="no-padding-dialog";let t=this.showModalDialog(ut,o),n=t.componentInstance;n.cliente=this.preventivo.cliente,n.dialogRef=t}isLogHotel(o){return null!=o.notificaEmail||o.cambioStato.isHotel}isLogCliente(o){return null!=o.cambioStato&&!o.cambioStato.isHotel}getNomeRiduzione(o){if(null!=o&&null!=this.preventivo.lingua){let n=this.riduzioni.find(a=>a.riduzione.oid==o.oid);var t;if(null!=n)return null===(t=n.riduzioniXLingua.find(a=>null!=a.lingua&&a.lingua.codice==(null!=this.preventivo.lingua?this.preventivo.lingua.codice:"it")))||void 0===t?void 0:t.nome}return""}openCodicePromozioneSelect(){this.setIsLoading(!0);let o=new d.oyF;o.arrivo=this.preventivo.arrivo,o.partenza=this.preventivo.partenza,o.oidAlbergo=this.sessionService.getOidAlbergo(),o.oidPortale=null!=this.preventivo.portaleXAlbergo?this.preventivo.portaleXAlbergo.oid:-1,this.apiService.getCodiciPromozioneValidi(o).subscribe(t=>{if(this.setIsLoading(!1),null!=t.data&&t.data.length>0){let n=new d.Zpt;n.width="40vw";let a=this.showModalDialog(Ac.H,n),l=a.componentInstance;l.dialogRef=a,l.title="bo.preventivo.proprieta.codicePromozione";let r=t.data;if(null!=this.preventivo.codicePromozione){r=r.filter(T=>T.oid!=this.preventivo.codicePromozione.oid);let p=new v.z_T(-1);p.codice="",r.unshift(p)}l.data=r,l.displayMember="codice",a.afterClosed().subscribe(p=>{p&&this.showDialogConfirm("sbm.preventivi.codicePromozioneModificato").then(()=>{this.setIsLoading(!0),this.preventivo.codicePromozione=p;let T=new d.KTP;T.oidCodicePromozionale=p.oid,T.oidPreventivo=this.preventivo.oid,this.apiService.ricalcolaPropostePreventivo(T).subscribe(L=>{this.setIsLoading(!1);for(let G of L.data){let W=this.camere.find(be=>be.camera.oid==G.proposta.camera.oid);if(null!=W){let be=W.proposte.find(Ze=>Ze.proposta.oid==G.proposta.oid);null!=be&&(be.proposta=G.proposta,be.dettagli=G.dettagli,be.dettagli.forEach(Ze=>this.setGiorniString(Ze)))}}this.calculateTotals()})},()=>{})})}else this.showError("sbm.preventivi.nessunCodicePromozioneValido")})}selezionaCamera(o){var t,n;this.setIsLoading(!0);let a=new d.mpC;a.urlApiWelcome=this.sessionService.getUrlApiWelcome(),a.database=this.sessionService.getAziendaHotel(),a.oidUbicazioneIstat=null===(t=this.preventivo.portaleXAlbergo)||void 0===t||null===(t=t.ubicazioneIstat)||void 0===t?void 0:t.OIDHotel,a.oidTipoCamera=null===(n=o.dettagli[0].tipoCameraOTA)||void 0===n||null===(n=n.tipoCamera)||void 0===n?void 0:n.OIDHotel,a.dal=o.proposta.arrivo,a.al=o.proposta.partenza,this.apiService.getCamereLibereWelcome(a).subscribe(l=>{if(this.setIsLoading(!1),null!=l&&null!=l.risorse&&l.risorse.length>0){let r=new d.Zpt;r.minWidth="20vw";let p=this.showModalDialog(sn,r),T=p.componentInstance;T.risorse=l.risorse,T.camera=o.dettagli[0].camera,T.dialogRef=p,p.afterClosed().subscribe(L=>{L&&(o.dettagli[0].camera=L,this.apiService.setDettaglio(o.dettagli[0]).subscribe())})}else this.showError("sbm.preventivi.nessunaCamera")})}rimuoviCamera(o){this.showDialogConfirm("sbm.preventivi.rimuovereCamera").then(()=>{o.dettagli[0].camera=null,this.apiService.setDettaglio(o.dettagli[0]).subscribe()},()=>{})}}pn.\u0275fac=function(o){return new(o||pn)(e.Y36(A.s),e.Y36(j.m),e.Y36(te.J),e.Y36(C.t),e.Y36(Ae.f),e.Y36(Oe.o))},pn.\u0275cmp=e.Xpm({type:pn,selectors:[["app-preventivi-edit"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{preventiviCliente:"preventiviCliente",preventivoOid:"preventivoOid",contenuti:"contenuti",articoli:"articoli",causaliOperazioneCancellazione:"causaliOperazioneCancellazione",causaliOperazioneRifiuto:"causaliOperazioneRifiuto",riduzioni:"riduzioni"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","mb-2"],[1,"col-6","pr-1"],["class","col-6 pl-1",4,"ngIf"],[1,"preventiviEditOuterTabGroup","mt-3",3,"selectedIndex","selectedIndexChange","selectedTabChange"],["mat-tab-label",""],[1,"mt-2","mb-2","mat-elevation-z1","border","p-0"],[1,"bg-title","p-3"],["href","#",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","class","daGestireButton align-middle",3,"matMenuTriggerFor",4,"ngIf"],["appMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["class","material-icons align-middle float-right",3,"ngStyle",4,"ngIf"],[1,"p-3"],["class","w-100 font-weight-bold",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"w-100","font-weight-bold"],["autocompleteOff","","type","text","matInput","","readonly","","required","",3,"matDatepicker","placeholder","ngModel","disabled","ngModelChange","dateChange"],["matSuffix","",3,"for"],[3,"startAt"],["datePickerDataPreventivo",""],[3,"ngModel","placeholder","disabled","ngModelChange","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","disabled","ngModelChange","dateChange"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["datePickerScadenza",""],[1,"w-100","font-weight-bold",3,"floatLabel"],["autocompleteOff","","type","text","matInput","","readonly","",3,"placeholder","value"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],[1,"align-middle","caparra-input","font-weight-bold"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","disabled","ngModelChange","blur"],[1,"align-middle","caparra-tipo-input"],[3,"value","disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6","pl-1"],[1,"bg-title","pr-3","pl-3","pt-3","p-3","mb-0"],[3,"_preventivo","messaggi","maxMessages","mittente","nomeAlbergo","nomePortale","booking","onVisualizzaMessaggiClick","onMessaggioSend"],[1,"mt-2","mb-2","border","p-0"],[3,"text","disabled","textChange","onBlur"],[1,"border","mt-3","p-0"],[1,"preventiviEditTabGroup",3,"selectedIndex","selectedIndexChange","selectedTabChange"],[4,"ngFor","ngForOf"],["class","mt-3 mat-elevation-z1 border p-0",4,"ngIf"],[1,"mt-3","mat-elevation-z1","border","p-0"],[1,"border","rounded","p-3"],[1,"w-100","note-preventivo-textarea"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"ngModel","ngModelChange","blur"],[1,"mt-4"],["color","primary",3,"ngModel","ngModelChange","change"],["class","dataPrenotazioneLabel",4,"ngIf"],["class","dataInvioLabel",4,"ngIf"],["class","ultimaVisualizzazioneLabel",4,"ngIf"],["class","numeroVisualizzazioniLabel",4,"ngIf"],["class","row mt-4",4,"ngIf"],["class","mt-3",4,"ngIf"],[3,"label"],[3,"_preventivo","messaggi","mittente","nomeAlbergo","nomePortale","booking"],[1,"mt-3"],[3,"data"],[3,"label",4,"ngIf"],[1,"div-bottoni","ml-n3"],[1,"p-1","font-weight-bold"],[1,"p-1"],["id","preventivo-save-button","mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["class","workflows-button mr-1","mat-flat-button","","color","blank",3,"matMenuTriggerFor",4,"ngIf"],[1,"workflows-menu"],["workFlowsMenu","matMenu"],["mat-menu-item","",3,"backgroundColor","appInvertColor","click",4,"ngFor","ngForOf"],["mat-flat-button","","class","mr-1 btn-elimina",3,"disabled","click",4,"ngIf"],[1,"causali-button",3,"matMenuTriggerFor"],["causaliCancellazioneMenuButton",""],["causaliCancellazioneMenu","matMenu"],["mat-flat-button","","color","blank","class","mr-1 delete-button",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",1,"mr-1",3,"disabled","click"],["causaliRifiutoMenuButton",""],["causaliRifiutoMenu","matMenu"],["mat-flat-button","","class","mr-1 btn-prenota",3,"disabled","click",4,"ngIf"],["mat-flat-button","",1,"mr-1","btn-send",3,"disabled","click"],["mat-flat-button","","color","blank","class","crea-preventivo-button",3,"click",4,"ngIf"],[1,"border","h-100","p-0"],[1,"bg-title","text-nowrap","p-3"],[3,"class",4,"ngIf"],["mat-icon-button","","class","align-middle ml-2 mb-2 preventivo-cliente-edit-button","color","primary",3,"click",4,"ngIf"],[1,"pr-3","pl-3","pb-3"],["class","mt-2 mb-2 font-weight-bold text-nowrap",4,"ngIf"],["class","font-weight-bold mb-3 text-nowrap",4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"w-100"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],[1,"w-100","mt-n2"],["mat-button","","color","primary",1,"mr-1",3,"disabled","click"],[1,"far","fa-paper-plane","icon-md24","mb-1"],[1,"far","fa-envelope","icon-md24","mb-1"],["mat-button","","color","primary",3,"disabled","click"],[1,"fa","fa-whatsapp","icon-md24","mb-1"],["mat-icon-button","","color","primary",1,"align-middle","ml-2","mb-2","preventivo-cliente-edit-button",3,"click"],[1,"material-icons","preventivo-cliente-edit-icon"],[1,"mt-2","mb-2","font-weight-bold","text-nowrap"],[1,"material-icons","align-middle","icon-small","mr-1"],[1,"text-wrap","break-word"],[1,"font-weight-bold","mb-3","text-nowrap"],[1,"material-icons","align-middle","icon-small","mr-1","mb-1"],["mat-icon-button","",1,"whatsappButton","align-middle","mb-1","ml-2",3,"click"],[1,"fa","fa-whatsapp"],[1,"mb-2"],[1,"align-middle","font-weight-bold"],[1,"align-middle"],[1,"font-weight-bold"],[1,"note-cliente"],["mat-flat-button","","color","primary",1,"mb-3",3,"click"],[1,"material-icons","mr-2"],[1,"col-4"],["autocompleteOff","","type","text","matInput","","disabled","",3,"placeholder","value"],[1,"w-100","text-center"],[1,"text-right"],[1,"material-icons","icon-md20","mb-1"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[3,"value"],[1,"pl-4"],["href","#",3,"click"],["mat-icon-button","","color","primary",1,"daGestireButton","align-middle",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],[1,"material-icons","mat-table-edit-row"],["mat-menu-item","",3,"click"],[1,"material-icons","align-middle","float-right",3,"ngStyle"],["required","",3,"placeholder","ngModel","disabled","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],[3,"value","disabled"],["mat-icon-button","","matSuffix","",3,"click"],[1,"material-icons","color-pink","codicePromozioneSelect"],["datePickerScadenzaAccontoCaparra",""],["href","#",1,"float-right","color-pink","segnaComeLetti",3,"click"],[1,"pt-3"],[1,"row","mt-2","mb-2"],["mat-icon-button","",1,"icon-button",3,"disabled","click"],[1,"material-icons","align-middle","mr-1"],[1,"align-middle","d-inline-block"],["class","col-4",4,"ngIf"],[1,"preventiviEditTabGroup",3,"selectedIndex","selectedIndexChange"],[1,"col-2"],["datePickerPropostaArrivo",""],["datePickerPropostaPartenza",""],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","disabled"],[1,"col-3"],[1,"d-inline-block","politicaCancellazioneSelect"],["displayMember","nome",3,"dataLoader","value","placeholder","disabled","valueChange"],["mat-icon-button","",1,"arrow-button",3,"disabled","click"],[1,"far","fa-arrow-alt-circle-right"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","disabled","ngModelChange","blur"],["class","border rounded",4,"ngIf"],[1,"row","mt-3"],[1,"col-9"],[1,"d-inline-block","noteInput"],["mat-icon-button","",1,"d-inline-block","align-middle",3,"matMenuTriggerFor","disabled"],[1,"material-icons","icon-small"],["scontoMenu","matMenu"],["mat-menu-item","",3,"ngClass","value","click",4,"ngFor","ngForOf"],[1,"align-middle","proposta-sconto-input","text-right"],[1,"align-middle","proposta-tipo-sconto-input","text-right"],[1,"font-weight-bold","totale"],["class","prezzo text-nowrap",4,"ngIf"],["mat-icon-button","","color","primary",1,"align-middle","icon-button","mt-2",3,"disabled","click"],["id","duplicateProposta","mat-icon-button","","color","primary",1,"icon-button","mt-n2","mb-2",3,"disabled","click"],["id","deleteProposta","mat-icon-button","","color","primary",1,"icon-button","mt-n2","mb-2",3,"disabled","click"],[1,"border","rounded"],[1,"row","m-0"],[1,"pb-2"],[1,"mt-2","mb-2","font-weight-bold"],["class","mt-2 font-italic",4,"ngIf"],["class","mt-2",4,"ngIf"],["href","#","class","d-block color-pink font-italic mt-2",3,"click",4,"ngIf"],[1,"col-2","pt-2","pb-2"],[1,"col-2","text-center"],[1,"col-2","text-right","p-0","pt-3","text-nowrap"],["mat-icon-button","","color","primary",1,"align-middle","icon-button","mr-2","mt-2",3,"disabled","click"],[1,"material-icons"],["mat-icon-button","","class","align-middle icon-button mr-2 mt-2","color","primary",3,"disabled","click",4,"ngIf"],[1,"mt-2","font-italic"],[1,"mt-2"],["class","color-red align-middle icon-small ml-1 cursor-pointer",3,"click",4,"ngIf"],[1,"color-red","align-middle","icon-small","ml-1","cursor-pointer",3,"click"],["href","#",1,"d-block","color-pink","font-italic","mt-2",3,"click"],[1,"font-weight-bold","mt-2","mb-2"],[1,"align-middle","proposta-dettaglio-input","text-right"],["autocompleteOff","","type","number","matInput","",3,"ngModel","disabled","ngModelChange","blur"],[1,"align-middle","proposta-dettaglio-input-sconto","text-left"],[1,"d-inline-block","align-middle","totale-riga"],["mat-icon-button","","class","align-middle ml-2 info-button mb-1","matTooltipPosition","below","matTooltipClass","giorni-tooltip-class",3,"matTooltip",4,"ngIf"],["mat-icon-button","","matTooltipPosition","below","matTooltipClass","giorni-tooltip-class",1,"align-middle","ml-2","info-button","mb-1",3,"matTooltip"],[1,"material-icons","info-icon"],[1,"font-weight-bold","mt-4","mb-2","pl-3","color-pink"],["class","row m-0",4,"ngFor","ngForOf"],["class","mt-2 mb-2 font-italic",4,"ngIf"],[1,"mt-2","mb-2","font-italic"],[1,"font-weight-bold","mt-3","mb-2","pl-3","color-pink"],["class","row m-0 rounded mt-1",4,"ngFor","ngForOf"],[1,"row","m-0","rounded","mt-1"],[1,"align-middle","totale-riga"],[1,"d-inline-block","align-middle"],["mat-icon-button","","color","primary",1,"icon-button","align-middle","mr-2","mt-2",3,"disabled","click"],[1,"align-middle","mt-2","mb-2","font-weight-bold"],["class","font-italic text-small mt-n1 mb-1",4,"ngIf"],["class","extraIncluso",4,"ngIf"],[1,"font-italic","text-small","mt-n1","mb-1"],[1,"extraIncluso"],[1,"align-middle","proposta-dettaglio-input-descrizione"],["autocompleteOff","","type","text","matInput","",3,"ngModel","disabled","ngModelChange","blur"],["mat-menu-item","",3,"ngClass","value","click"],[1,"prezzo","text-nowrap"],[1,"price-decimals"],[1,"prezzo-sconto","text-nowrap"],[1,"ml-1","sconto","text-nowrap"],[1,"pr-3","pl-3","pb-3","pt-0"],["class","col-3",4,"ngFor","ngForOf"],["color","primary",3,"checked","change"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","readonly","",3,"ngModel","ngModelChange"],[1,"bg-title","p-3","mb-0"],["class","mr-2 mb-2 p-2 rounded-lg",3,"backgroundColor","appInvertColor",4,"ngFor","ngForOf"],[1,"mr-2","mb-2","p-2","rounded-lg",3,"appInvertColor"],[1,"dataPrenotazioneLabel"],[1,"dataInvioLabel"],[1,"ultimaVisualizzazioneLabel"],[1,"numeroVisualizzazioniLabel"],[1,"row","mt-4"],["autocompleteOff","","matInput","","readonly","","disabled","",3,"placeholder","value"],["class","col-3 dataConfermaPagamento mt-3",4,"ngIf"],["class","col-3",4,"ngIf"],[1,"col-3","dataConfermaPagamento","mt-3"],["mat-flat-button","","color","primary",1,"mt-2",3,"click"],[3,"placeholder","url","urlOpen","extraButtonIcon","onExtraButtonClick"],[1,"d-inline-block","align-middle","mr-2"],[1,"d-inline-block","align-middle","numero"],[1,"border","rounded","p-4","mt-3","bg-white"],[1,"row","mb-3","font-weight-bold"],[1,"col-6","text-right","pr-4"],[1,"col-6","pl-4"],["class","row",4,"ngFor","ngForOf"],[1,"col-6","pb-4",3,"ngClass"],[1,"circle-timeline",3,"ngClass"],[1,"material-icons","circle-icon-timeline"],[1,"font-weight-bold","font-italic","data-timeline"],[1,"mr-1","align-middle"],["mat-icon-button","","class","info-button-timeline align-middle",3,"click",4,"ngIf"],[1,"log-body"],["mat-icon-button","",1,"info-button-timeline","align-middle",3,"click"],[1,"material-icons","info-icon-timeline"],[1,"operazione-timeline"],[1,"mat-table-container","mt-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","codice"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","data"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","stato"],["matColumnDef","totale"],["class","justify-content-end",4,"matHeaderCellDef"],["matColumnDef","openEdit"],["class","justify-content-end",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"justify-content-end"],[1,"w-100","text-right"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["mat-flat-button","","color","blank",1,"workflows-button","mr-1",3,"matMenuTriggerFor"],["mat-menu-item","",3,"appInvertColor","click"],["mat-flat-button","",1,"mr-1","btn-elimina",3,"disabled","click"],["mat-flat-button","","color","blank",1,"mr-1","delete-button",3,"click"],["mat-flat-button","",1,"mr-1","btn-prenota",3,"disabled","click"],["mat-flat-button","","color","blank",1,"crea-preventivo-button",3,"click"]],template:function(o,t){1&o&&e.YNc(0,iP,184,163,"ng-container",0),2&o&&e.Q6J("ngIf",null!=t.preventivo)},dependencies:[m.mk,m.sg,m.O5,m.PC,k.Z,w.X,V.FC,h.eB,it.IC,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,g.x8,Ie.W0,Ie.tN,Ie.D8,Yt.d,qe.S$,qe.Qi,qe.mi,ee.SK,ee.gz,ee.R7,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.wV,_.JJ,_.Q7,_.On,Me.P,Ic.G,ne.d,Be,gt,m.uU,Te.A,ke.f,K.H,z.X$],styles:[".preventiviEditTabGroup .mat-tab-label .mat-tab-label-content{flex-wrap:wrap!important}  .preventiviEditTabGroup .mat-tab-label .mat-tab-label-content span{display:flex!important;flex:1 0 100%!important;justify-content:center!important}  .preventiviEditTabGroup .mat-tab-label{height:auto!important;padding:10px!important}  .preventiviEditTabGroup .mat-tab-label-content{width:100%!important;height:100%!important}  .preventiviEditTabGroup .mat-tab-label{opacity:1!important}#duplicateProposta[_ngcontent-%COMP%]{position:absolute;bottom:0;right:20px}#deleteProposta[_ngcontent-%COMP%]{position:absolute;bottom:0;left:20px}.proposta-dettaglio-input[_ngcontent-%COMP%]{width:80px!important}.note-cliente[_ngcontent-%COMP%]{font-style:italic;font-size:smaller}  .proposta-dettaglio-input .mat-form-field-infix{border-top:0!important}.proposta-dettaglio-input-descrizione[_ngcontent-%COMP%]{width:100%!important}  .proposta-dettaglio-input-descrizione .mat-form-field-infix{border-top:0!important}.proposta-dettaglio-input-sconto[_ngcontent-%COMP%]{width:30px!important}  .proposta-dettaglio-input-sconto .mat-form-field-infix{border-top:0!important}.proposta-dettaglio-input-tariffa-tipo-camera[_ngcontent-%COMP%]{width:100px!important}  .proposta-dettaglio-input-tariffa-tipo-camera .mat-form-field-infix{border-top:0!important}.preventiviEditOuterTabGroup[_ngcontent-%COMP%]{margin-bottom:80px}  .preventiviEditOuterTabGroup .mat-tab-body-content{overflow:hidden!important}.icon-button[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px}.icon-small[_ngcontent-%COMP%]{font-size:18px;line-height:18px;width:18px;height:18px}.border-box[_ngcontent-%COMP%]{border-color:#e91e63!important;box-shadow:none!important}.border-none[_ngcontent-%COMP%]{border:none!important;box-shadow:none!important}.proposta-non-confermata[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#a9a9a9}  .preventivo-cliente-edit-button .mat-button-wrapper .mat-button-focus-overlay{display:none!important}.preventivo-cliente-edit-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.preventivo-cliente-edit-icon[_ngcontent-%COMP%]{font-size:20px}.caparra-input[_ngcontent-%COMP%]{width:calc(100% - 30px)}.caparra-tipo-input[_ngcontent-%COMP%]{width:30px}  .note-preventivo-textarea .mat-form-field-underline{visibility:hidden!important}  .note-preventivo-textarea .mat-form-field-wrapper{padding-bottom:0!important}  .note-preventivo-textarea .mat-form-field-infix{border-top:0!important}textarea.mat-input-element[_ngcontent-%COMP%]{box-sizing:content-box}.proposta-sconto-input[_ngcontent-%COMP%]{width:calc(100% - 120px)}.proposta-tipo-sconto-input[_ngcontent-%COMP%]{width:30px}.bg-title[_ngcontent-%COMP%]{background-color:#f0f0f0;font-size:18px}.daGestireButton[_ngcontent-%COMP%]{width:24px!important;height:24px!important;line-height:24px!important;margin-top:-3px!important}.whatsappButton[_ngcontent-%COMP%]{width:20px!important;height:20px!important;line-height:20px!important;color:#25d366}.whatsappButton[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px!important;line-height:20px!important}.dataPrenotazioneLabel[_ngcontent-%COMP%]{color:green;font-size:larger}.extraIncluso[_ngcontent-%COMP%]{font-style:italic;font-size:x-small}.dataInvioLabel[_ngcontent-%COMP%]{color:green}.ultimaVisualizzazioneLabel[_ngcontent-%COMP%], .numeroVisualizzazioniLabel[_ngcontent-%COMP%]{color:#00f;opacity:.6;font-size:smaller;font-style:italic}.btn-send[_ngcontent-%COMP%]{color:#fff;background-color:#28a745}.btn-elimina[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-prenota[_ngcontent-%COMP%]{background-color:#2e3f8a;color:#fff}.prezzo[_ngcontent-%COMP%]{font-size:30px;font-weight:700}.prezzo-sconto[_ngcontent-%COMP%]{text-decoration:line-through;font-size:18px;font-weight:600;color:#999}.sconto[_ngcontent-%COMP%]{font-size:15px;font-weight:600}.totale-riga[_ngcontent-%COMP%]{font-size:large}.div-bottoni[_ngcontent-%COMP%]{position:fixed;bottom:0;border-top:1px solid;padding:6px 6px 6px 20px;background-color:#fff;z-index:100;width:100%}.div-bottoni[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.delete-button, .crea-preventivo-button)[_ngcontent-%COMP%]{width:80px}.workflows-button[_ngcontent-%COMP%]{width:auto!important}.causali-button[_ngcontent-%COMP%]{visibility:hidden!important;width:0!important;height:0!important;padding:0!important;margin:0!important;border:0!important}.info-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.info-icon[_ngcontent-%COMP%]{font-size:20px;line-height:20px}  .giorni-tooltip-class{font-size:11px!important;white-space:pre!important;max-width:unset!important}.politicaCancellazioneSelect[_ngcontent-%COMP%], .noteInput[_ngcontent-%COMP%]{width:calc(100% - 50px)}.arrow-button[_ngcontent-%COMP%]{width:50px;font-size:18px}.dataConfermaPagamento[_ngcontent-%COMP%]{color:#006400;font-weight:700}.text-small[_ngcontent-%COMP%]{font-size:13px}.totale[_ngcontent-%COMP%]{font-size:20px}.numero[_ngcontent-%COMP%]{background-color:#e6618d;color:#fff;padding-right:7px;padding-left:7px;padding-top:1px;border-radius:10px;font-size:14px;text-align:center;font-weight:400}.info-button-timeline[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px;margin-bottom:1px}.info-icon-timeline[_ngcontent-%COMP%]{font-size:18px;line-height:18px}  .circle-timeline{position:absolute;top:0;border:2px solid #e91e63;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:12px;background-color:#fff}  .circle-timeline-left{left:-12px}  .circle-timeline-right{right:-12px}.circle-icon-timeline[_ngcontent-%COMP%]{color:#e91e63;font-size:10px}.data-timeline[_ngcontent-%COMP%]{font-size:14px;color:#666}.log-body[_ngcontent-%COMP%]{font-size:15px}.border-right-timeline[_ngcontent-%COMP%]{border-right:2px solid #666666}.border-left-timeline[_ngcontent-%COMP%]{border-left:2px solid #666666}.tipo-sconto-selected[_ngcontent-%COMP%], .tipo-sconto-selected[_ngcontent-%COMP%]:hover{background-color:#e6618d;color:#fff}.segnaComeLetti[_ngcontent-%COMP%]{font-size:14px}.codicePromozioneSelect[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.operazione-timeline[_ngcontent-%COMP%]{white-space:pre-wrap}"]});const oP=["table"];function nP(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",89)(2,"div",90),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",91),e._uU(6),e.qZA()(),e.TgZ(7,"div",89)(8,"div",90),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",91),e._uU(12),e.qZA()(),e.TgZ(13,"div",89)(14,"div",90),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",91),e._uU(18),e.ALo(19,"percent"),e.qZA()(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,6,"sbm.preventivi.preventivi")),e.xp6(3),e.Oqu(t.numeroPreventivi),e.xp6(3),e.Oqu(e.lcZ(10,8,"sbm.preventivi.prenotazioni")),e.xp6(3),e.Oqu(t.numeroPrenotazioni),e.xp6(3),e.Oqu(e.lcZ(16,10,"sbm.preventivi.percentualeConversione")),e.xp6(3),e.Oqu(e.xi3(19,12,t.percentualeConversione,"1.0-2"))}}function aP(i,o){if(1&i&&(e.TgZ(0,"mat-option",92),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function lP(i,o){if(1&i&&(e.TgZ(0,"span",111),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" (",t.numeroFlag," flag) ")}}function rP(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"span",109),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,lP,2,1,"span",110),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.importo)," "),e.xp6(2),e.Q6J("ngIf",t.numeroFlag>0)}}const Pc=function(i){return{"statoPreventivo-active":i}};function cP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",106),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onStatusClick(l.stato))}),e.TgZ(1,"span",107),e._uU(2),e.qZA(),e.TgZ(3,"span",108),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,rP,5,4,"ng-container",2),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("ngClass",e.VKq(6,Pc,t.stato==n.currentStato)),e.xp6(2),e.hij(" ",t.numero," "),e.xp6(2),e.hij(" ",e.lcZ(5,4,n.getEnumKeyTranslation(n.enumStatoPreventivo,t.stato,"statoPreventivo"))," "),e.xp6(2),e.Q6J("ngIf",n.isVisualizzaImportiStati)}}function sP(i,o){if(1&i&&(e.TgZ(0,"span",111),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" (",t.numeroFlag," flag) ")}}function pP(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"span",109),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,sP,2,1,"span",110),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.importo)," "),e.xp6(2),e.Q6J("ngIf",t.numeroFlag>0)}}function dP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",106),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onStatusClick(l.stato))}),e.TgZ(1,"span",107),e._uU(2),e.qZA(),e.TgZ(3,"span",108),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,pP,5,4,"ng-container",2),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("ngClass",e.VKq(6,Pc,t.stato==n.currentStato)),e.xp6(2),e.hij(" ",t.numero," "),e.xp6(2),e.hij(" ",e.lcZ(5,4,n.getEnumKeyTranslation(n.enumStatoPreventivo,t.stato,"statoPreventivo"))," "),e.xp6(2),e.Q6J("ngIf",n.isVisualizzaImportiStati)}}function mP(i,o){if(1&i&&(e.TgZ(0,"span",111),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" (",t.numeroFlag," flag) ")}}function _P(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"span",109),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,mP,2,1,"span",110),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.importo)," "),e.xp6(2),e.Q6J("ngIf",t.numeroFlag>0)}}function uP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",106),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onStatusClick(l.stato))}),e.TgZ(1,"span",107),e._uU(2),e.qZA(),e.TgZ(3,"span",108),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,_P,5,4,"ng-container",2),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("ngClass",e.VKq(6,Pc,t.stato==n.currentStato)),e.xp6(2),e.hij(" ",t.numero," "),e.xp6(2),e.hij(" ",e.lcZ(5,4,n.getEnumKeyTranslation(n.enumStatoPreventivo,t.stato,"statoPreventivo"))," "),e.xp6(2),e.Q6J("ngIf",n.isVisualizzaImportiStati)}}function gP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",112),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.edit(l.preventivo))}),e.TgZ(1,"div",113),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"div",114),e._uU(5),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,2,t.data,"dd/MM/yyyy h:mm:ss")," "),e.xp6(3),e.hij(" ",t.messaggioShort," ")}}function hP(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h6",93),e._uU(2),e.qZA(),e.TgZ(3,"div",94)(4,"div",95)(5,"mat-card",96)(6,"mat-card-title",97),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-card-content",98),e.YNc(10,cP,7,8,"div",99),e.qZA()()(),e.TgZ(11,"div",100)(12,"mat-card",96)(13,"mat-card-title",101),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-card-content",98),e.YNc(17,dP,7,8,"div",99),e.qZA()()(),e.TgZ(18,"div",100)(19,"mat-card",96)(20,"mat-card-title",102),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"mat-card-content",98),e.YNc(24,uP,7,8,"div",99),e.qZA()()(),e.TgZ(25,"div",103)(26,"mat-card",96)(27,"mat-card-title",104),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"mat-card-content",98),e.YNc(31,gP,6,5,"div",105),e.qZA()()()(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.getNumeroPreventiviLabel()),e.xp6(5),e.hij(" ",e.lcZ(8,9,"sbm.preventivi.daGestire")," "),e.xp6(3),e.Q6J("ngForOf",t.statiRichieste),e.xp6(4),e.hij(" ",e.lcZ(15,11,"sbm.preventivi.preventivi")," "),e.xp6(3),e.Q6J("ngForOf",t.statiPreventivi),e.xp6(4),e.hij(" ",e.lcZ(22,13,"sbm.preventivi.prenotazioni")," "),e.xp6(3),e.Q6J("ngForOf",t.statiPrenotazioni),e.xp6(4),e.hij(" ",e.lcZ(29,15,"sbm.preventivi.messaggi")," "),e.xp6(3),e.Q6J("ngForOf",t.messaggi)}}function fP(i,o){if(1&i&&(e.TgZ(0,"mat-option",92),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function CP(i,o){if(1&i&&(e.TgZ(0,"mat-option",92),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}const bP=function(i){return{"color-pink":i}};function vP(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",44)(2,"div",45)(3,"button",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.navigationService.refreshContatoriMenu(),e.KtG(a.download(!0))}),e.TgZ(4,"i",5),e._uU(5,"refresh"),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",46)(9,"div",47),e.YNc(10,nP,20,15,"ng-container",2),e.qZA(),e.TgZ(11,"div",48)(12,"app-view-select",49),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedUbicazione=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onUbicazioneChange())}),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"mat-form-field",50)(15,"mat-select",51),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tipoFiltro=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onFiltroChange())}),e.ALo(16,"translate"),e.YNc(17,aP,3,4,"mat-option",52),e.ALo(18,"selectEnum"),e.qZA()()()(),e.YNc(19,hP,32,17,"ng-container",2),e.TgZ(20,"div",53)(21,"div",54)(22,"div",55)(23,"div",44)(24,"div",56)(25,"mat-form-field",57)(26,"mat-label"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"mat-date-range-input",58),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(37);return e.KtG(a.open())}),e.TgZ(30,"input",59),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.filters[0].value=l.getDate(a.value):null)}),e.qZA(),e.TgZ(31,"input",60),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.onSearch(1,l.getDate(a.value)):null)}),e.qZA()(),e._UZ(32,"mat-datepicker-toggle",61),e.TgZ(33,"mat-datepicker-toggle",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.filters[0].value="",e.KtG(a.onSearch(1,""))}),e.TgZ(34,"mat-icon",63),e._uU(35,"clear"),e.qZA()(),e._UZ(36,"mat-date-range-picker",null,64),e.qZA()(),e.TgZ(38,"div",56)(39,"mat-form-field",57)(40,"input",65,66),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(41),l=e.oxw();return e.KtG(l.onNominativoInput(a.value))}),e.ALo(42,"translate"),e.qZA()()(),e.TgZ(43,"div",56)(44,"mat-form-field",57)(45,"input",67,68),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(46),l=e.oxw();return e.KtG(l.onSearch(3,a.value,null,!1))}),e.ALo(47,"translate"),e.qZA()()(),e.TgZ(48,"div",56)(49,"mat-form-field",57)(50,"input",67,69),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(51),l=e.oxw();return e.KtG(l.onSearch(8,a.value,null,!1))}),e.ALo(52,"translate"),e.qZA()()()(),e.TgZ(53,"div",44)(54,"div",56)(55,"mat-form-field",57)(56,"mat-label"),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.TgZ(59,"mat-date-range-input",58),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(67);return e.KtG(a.open())}),e.TgZ(60,"input",59),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.filters[18].value=l.getDate(a.value):null)}),e.qZA(),e.TgZ(61,"input",60),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.onSearch(19,l.getDate(a.value)):null)}),e.qZA()(),e._UZ(62,"mat-datepicker-toggle",61),e.TgZ(63,"mat-datepicker-toggle",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.filters[18].value="",e.KtG(a.onSearch(19,""))}),e.TgZ(64,"mat-icon",63),e._uU(65,"clear"),e.qZA()(),e._UZ(66,"mat-date-range-picker",null,70),e.qZA()(),e.TgZ(68,"div",56)(69,"mat-form-field",57)(70,"mat-select",71),e.NdJ("selectionChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(11,a.value))}),e.ALo(71,"translate"),e._UZ(72,"mat-option",72),e.YNc(73,fP,3,4,"mat-option",52),e.ALo(74,"selectEnum"),e.qZA()()(),e.TgZ(75,"div",56)(76,"app-view-select",49),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tag=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearch(13,-1==a.tag.oid?"":a.tag.oid.toString()))}),e.ALo(77,"translate"),e.qZA()(),e.TgZ(78,"div",56)(79,"app-view-select",73),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.utente=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearch(6,-1==a.utente.oid?"":a.utente.oid.toString()))}),e.ALo(80,"translate"),e.qZA()()()(),e.TgZ(81,"div",56)(82,"div",74)(83,"span",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showFilterAdv=!a.showFilterAdv)}),e._uU(84),e.ALo(85,"translate"),e.qZA(),e.TgZ(86,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showFilterAdv=!a.showFilterAdv)}),e.TgZ(87,"mat-icon"),e._uU(88,"keyboard_arrow_down"),e.qZA()()(),e.TgZ(89,"div",77)(90,"mat-checkbox",78),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return l.onSearch(4,a.checked?l.getDate(l.today):""),e.KtG(l.parametriService.setParametro("isClientiCheDevonoArrivareChecked",a.checked))}),e._uU(91),e.ALo(92,"translate"),e.qZA()(),e.TgZ(93,"div")(94,"mat-checkbox",78),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(5,null,a.checked))}),e._uU(95),e.ALo(96,"translate"),e.qZA()()()(),e.TgZ(97,"div",79)(98,"div",44)(99,"div",55)(100,"div",44)(101,"div",56)(102,"mat-form-field",57)(103,"mat-label"),e._uU(104),e.ALo(105,"translate"),e.qZA(),e.TgZ(106,"mat-date-range-input",58),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(114);return e.KtG(a.open())}),e.TgZ(107,"input",59),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.filters[20].value=l.getDate(a.value):null)}),e.qZA(),e.TgZ(108,"input",60),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.onSearch(21,l.getDate(a.value)):null)}),e.qZA()(),e._UZ(109,"mat-datepicker-toggle",61),e.TgZ(110,"mat-datepicker-toggle",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.filters[20].value="",e.KtG(a.onSearch(21,""))}),e.TgZ(111,"mat-icon",63),e._uU(112,"clear"),e.qZA()(),e._UZ(113,"mat-date-range-picker",null,80),e.qZA()(),e.TgZ(115,"div",56)(116,"app-view-select",49),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedPortale=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearch(12,-1==a.selectedPortale.oid?"":a.selectedPortale.oid.toString()))}),e.ALo(117,"translate"),e.qZA()(),e.TgZ(118,"div",56)(119,"app-view-select",81),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.causale=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearch(15,-1==a.causale.oid?"":a.causale.oid.toString()))}),e.ALo(120,"translate"),e.qZA()(),e.TgZ(121,"div",56)(122,"mat-form-field",57)(123,"mat-select",82,83),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedStatiPreventivo=a)})("openedChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onStatiPreventivoOpenedChange(a))}),e.ALo(125,"translate"),e.TgZ(126,"mat-checkbox",84),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(124),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickStatiPreventivo(l))}),e._uU(127),e.ALo(128,"translate"),e.qZA(),e.YNc(129,CP,3,4,"mat-option",52),e.ALo(130,"selectEnum"),e.qZA()()()(),e.TgZ(131,"div",44)(132,"div",56)(133,"mat-form-field",57)(134,"mat-label"),e._uU(135),e.ALo(136,"translate"),e.qZA(),e.TgZ(137,"mat-date-range-input",58),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(114);return e.KtG(a.open())}),e.TgZ(138,"input",85),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.filters[22].value=l.getDate(a.value):null)}),e.qZA(),e.TgZ(139,"input",86),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(null!=a.value?l.onSearch(23,l.getDate(a.value)):null)}),e.qZA()(),e._UZ(140,"mat-datepicker-toggle",61),e.TgZ(141,"mat-datepicker-toggle",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.filters[22].value="",e.KtG(a.onSearch(23,""))}),e.TgZ(142,"mat-icon",63),e._uU(143,"clear"),e.qZA()(),e._UZ(144,"mat-date-range-picker",null,87),e.qZA()()()(),e.TgZ(146,"div",56)(147,"div")(148,"mat-checkbox",78),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(7,a.checked?l.sessionService.getOidUtente().toString():""))}),e._uU(149),e.ALo(150,"translate"),e.qZA()(),e.TgZ(151,"div")(152,"mat-checkbox",78),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(9,a.checked?l.enumFlagPreventivo.Nessuno.toString():""))}),e._uU(153),e.ALo(154,"translate"),e.qZA()(),e.TgZ(155,"div")(156,"mat-checkbox",78),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return a.checked||(l.rq.isPagamentoInAttesaDiConferma=!1),e.KtG(l.onSearch(10,null,!a.checked))}),e._uU(157),e.ALo(158,"translate"),e.qZA()(),e.TgZ(159,"div")(160,"mat-checkbox",78),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return l.onSearch(16,a.checked?"":l.enumStatoPreventivo.Cancellato.toString()),l.rqStati.isIncludiPreventiviCancellati=a.checked,e.KtG(l.downloadStatiPreventivi())}),e._uU(161),e.ALo(162,"translate"),e.qZA()(),e.TgZ(163,"div")(164,"mat-checkbox",88),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.isPagamentoInAttesaDiConferma=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onIsPagamentoInAttesaDiConfermaChange())}),e._uU(165),e.ALo(166,"translate"),e.qZA()()()()()(),e.BQk()}if(2&i){const t=e.MAs(37),n=e.MAs(67),a=e.MAs(114),l=e.MAs(124),r=e.MAs(145),p=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,70,"sbm.preventivi.aggiorna")),e.xp6(4),e.Q6J("ngIf",p.isVisualizzaNumeroPreventiviPrenotazioni&&null!=p.numeroPreventivi&&null!=p.numeroPrenotazioni&&null!=p.percentualeConversione),e.xp6(2),e.Q6J("dataLoader",p.apiService.getUbicazioniIstatViewSelect())("value",p.selectedUbicazione)("placeholder",e.lcZ(13,72,"globals.ubicazioneIstat")),e.xp6(3),e.s9C("placeholder",e.lcZ(16,74,"sbm.preventivi.tipoFiltro")),e.Q6J("ngModel",p.tipoFiltro),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,76,p.enumTipoFiltroPreventivi,"tipoFiltroPreventivi")),e.xp6(2),e.Q6J("ngIf",null!=p.statiRichieste&&p.statiRichieste.length>0||null!=p.statiPreventivi&&p.statiPreventivi.length>0||null!=p.statiPrenotazioni&&p.statiPrenotazioni.length>0),e.xp6(8),e.Oqu(e.lcZ(28,79,"sbm.preventivi.selezionaPeriodoDataArrivo")),e.xp6(2),e.Q6J("rangePicker",t),e.xp6(1),e.Q6J("value",p.filters[0].value),e.xp6(1),e.Q6J("value",p.filters[1].value),e.xp6(1),e.Q6J("for",t),e.xp6(8),e.s9C("placeholder",e.lcZ(42,81,"bo.preventivo.proprieta.nominativo")),e.xp6(5),e.s9C("placeholder",e.lcZ(47,83,"bo.cliente.proprieta.email")),e.Q6J("value",p.filters[3].value),e.xp6(5),e.s9C("placeholder",e.lcZ(52,85,"bo.preventivo.proprieta.codicePreventivo")),e.Q6J("value",p.filters[8].value),e.xp6(7),e.Oqu(e.lcZ(58,87,"sbm.preventivi.selezionaPeriodoDataPreventivo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("value",p.filters[18].value),e.xp6(1),e.Q6J("value",p.filters[19].value),e.xp6(1),e.Q6J("for",n),e.xp6(8),e.s9C("placeholder",e.lcZ(71,89,"bo.richiesta.proprieta.tipoRichiesta")),e.Q6J("value",p.filters[11].value),e.xp6(3),e.Q6J("ngForOf",e.xi3(74,91,p.enumTipoRichiesta,"tipoRichiestaPreventivo")),e.xp6(3),e.Q6J("dataLoader",p.apiService.getTagCrmViewSelect())("value",p.tag)("placeholder",e.lcZ(77,94,"bo.preventivo.proprieta.tagCrm")),e.xp6(3),e.Q6J("dataLoader",p.apiService.getUtentiViewSelect())("value",p.utente)("placeholder",e.lcZ(80,96,"bo.preventivo.proprieta.utente")),e.xp6(5),e.Oqu(e.lcZ(85,98,"globals.filtriAvanzati")),e.xp6(6),e.Q6J("checked",!!p.filters[4].value),e.xp6(1),e.hij(" ",e.lcZ(92,100,"sbm.preventivi.clientiCheDevonoArrivare")," "),e.xp6(3),e.Q6J("checked",p.filters[5].active),e.xp6(1),e.hij(" ",e.lcZ(96,102,"sbm.preventivi.conMessaggi")," "),e.xp6(2),e.Q6J("hidden",!p.showFilterAdv),e.xp6(7),e.Oqu(e.lcZ(105,104,"sbm.preventivi.selezionaPeriodoDataScadenza")),e.xp6(2),e.Q6J("rangePicker",a),e.xp6(1),e.Q6J("value",p.filters[20].value),e.xp6(1),e.Q6J("value",p.filters[21].value),e.xp6(1),e.Q6J("for",a),e.xp6(7),e.Q6J("dataLoader",p.apiService.getPortaliXAlbergoViewSelect(p.getPortaliRQ))("value",p.selectedPortale)("placeholder",e.lcZ(117,106,"globals.portale")),e.xp6(3),e.Q6J("dataLoader",p.apiService.getCausaliOperazioneViewSelect(p.getCausaliOperazioneRQ))("value",p.causale)("placeholder",e.lcZ(120,108,"bo.preventivo.proprieta.causaleCancellazione")),e.xp6(4),e.Q6J("placeholder",e.lcZ(125,110,"bo.preventivo.proprieta.statoPreventivo"))("ngModel",p.selectedStatiPreventivo),e.xp6(3),e.Q6J("ngClass",e.VKq(129,bP,p.isAllSelectedStatiPreventivo(l)))("checked",p.isAllSelectedStatiPreventivo(l))("indeterminate",!p.isAllSelectedStatiPreventivo(l)&&!p.isAllDeselectedStatiPreventivo(l)),e.xp6(1),e.hij(" ",e.lcZ(128,112,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",e.xi3(130,114,p.enumStatoPreventivo,"statoPreventivo")),e.xp6(6),e.Oqu(e.lcZ(136,117,"sbm.preventivi.selezionaPeriodoDataPrenotazione")),e.xp6(2),e.Q6J("rangePicker",r),e.xp6(3),e.Q6J("for",r),e.xp6(8),e.Q6J("checked",!!p.filters[7].value),e.xp6(1),e.hij(" ",e.lcZ(150,119,"sbm.preventivi.soloIMieiPreventivi")," "),e.xp6(3),e.Q6J("checked",""!=p.filters[9].value),e.xp6(1),e.hij(" ",e.lcZ(154,121,"sbm.preventivi.conFlag")," "),e.xp6(3),e.Q6J("checked",!p.filters[10].active),e.xp6(1),e.hij(" ",e.lcZ(158,123,"sbm.preventivi.includiPreventiviPrenotati")," "),e.xp6(3),e.Q6J("checked",!p.filters[16].value),e.xp6(1),e.hij(" ",e.lcZ(162,125,"sbm.preventivi.includiPreventiviCancellati")," "),e.xp6(3),e.Q6J("ngModel",p.rq.isPagamentoInAttesaDiConferma),e.xp6(1),e.hij(" ",e.lcZ(166,127,"sbm.preventivi.pagamentoInAttesaDiConferma")," ")}}function TP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openPosta())}),e.TgZ(1,"i",5),e._uU(2,"mail"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.preventivi.posta")))}function xP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",120),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.cancellaPreventivi(l))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function ZP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"button",115),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.archiviaPreventivi())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",115),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.inviaMessaggioPreventivi())}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",115),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.inviaEmailPreventivi())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",115),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(14),l=e.oxw();return e.KtG(null==l.causaliOperazioneCancellazione||0==l.causaliOperazioneCancellazione.length?l.cancellaPreventivi(null):a.click())}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"button",116,117),e.TgZ(15,"mat-menu",null,118),e.YNc(17,xP,2,1,"button",119),e.qZA()()}if(2&i){const t=e.MAs(16),n=e.oxw();e.xp6(1),e.Q6J("disabled",null==n.selectionPreventivi||null==n.selectionPreventivi.selected||0==n.selectionPreventivi.selected.length),e.xp6(1),e.Oqu(e.lcZ(3,10,"sbm.preventivi.archivia")),e.xp6(2),e.Q6J("disabled",null==n.selectionPreventivi||null==n.selectionPreventivi.selected||0==n.selectionPreventivi.selected.length),e.xp6(1),e.Oqu(e.lcZ(6,12,"globals.inviaMessaggio")),e.xp6(2),e.Q6J("disabled",null==n.selectionPreventivi||null==n.selectionPreventivi.selected||0==n.selectionPreventivi.selected.length),e.xp6(1),e.Oqu(e.lcZ(9,14,"sbm.preventivi.inviaEmail")),e.xp6(2),e.Q6J("disabled",null==n.selectionPreventivi||null==n.selectionPreventivi.selected||0==n.selectionPreventivi.selected.length),e.xp6(1),e.Oqu(e.lcZ(12,16,"globals.cancella")),e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(4),e.Q6J("ngForOf",n.causaliOperazioneCancellazione)}}function AP(i,o){1&i&&(e.TgZ(0,"div")(1,"div",121)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.preventivi.nessunPreventivo")))}function wP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",122)(1,"mat-checkbox",123),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterTogglePreventivi():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionPreventivi.hasValue()&&t.isAllSelectedPreventivi())("indeterminate",t.selectionPreventivi.hasValue()&&!t.isAllSelectedPreventivi())}}function zP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",124)(1,"mat-checkbox",125),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionPreventivi.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionPreventivi.isSelected(t.oid))}}function MP(i,o){1&i&&e._UZ(0,"mat-header-cell")}function qP(i,o){1&i&&(e.TgZ(0,"mat-cell",124)(1,"button",126)(2,"i",127),e._uU(3,"edit"),e.qZA()()())}function PP(i,o){1&i&&e._UZ(0,"mat-header-cell")}function kP(i,o){if(1&i&&(e.TgZ(0,"span",133),e.ALo(1,"translate"),e.ALo(2,"date"),e._uU(3,"check"),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("matTooltip",e.lcZ(1,1,"sbm.preventivi.inviatoIl")+e.xi3(2,3,t.dataInvio,"dd/MM/yyyy"))}}function SP(i,o){if(1&i&&(e.TgZ(0,"span",134),e.ALo(1,"translate"),e.ALo(2,"date"),e.TgZ(3,"span",135),e._uU(4,"check"),e.qZA(),e.TgZ(5,"span",136),e._uU(6,"check"),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("matTooltip",e.lcZ(1,1,"sbm.preventivi.visualizzatoIl")+e.xi3(2,3,t.dataVisualizzazione,"dd/MM/yyyy"))}}function yP(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoPreventivo,t.statoPreventivo,"statoPreventivo"))," ")}}const JP=function(i){return{numeroVisualizzazioni:i}};function EP(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,"sbm.preventivi.visualizzato",e.VKq(4,JP,t.numeroVisualizzazioni))," ")}}function NP(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"a",137),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.preventDefault(),a.stopPropagation(),e.KtG(r.openPrenotazione(l.codicePrenotazione))}),e._uU(5),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.preventivi.pren")),e.xp6(3),e.Oqu(t.codicePrenotazione)}}function OP(i,o){if(1&i&&(e.TgZ(0,"div",138),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.causaleCancellazione.descrizione," ")}}function LP(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",128)(2,"div"),e.YNc(3,kP,4,6,"span",129),e.YNc(4,SP,7,6,"span",130),e.qZA(),e.TgZ(5,"div"),e.ALo(6,"translate"),e.TgZ(7,"span",131),e.YNc(8,yP,3,3,"ng-container",2),e.YNc(9,EP,3,6,"ng-container",2),e.qZA()(),e.YNc(10,NP,6,4,"div",2),e.YNc(11,OP,2,1,"div",132),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngIf",null!=t.dataInvio&&null==t.dataVisualizzazione),e.xp6(1),e.Q6J("ngIf",null!=t.dataVisualizzazione),e.xp6(1),e.Gre("color-",e.lcZ(6,9,n.getEnumKeyTranslation(n.enumStatoPreventivo,t.statoPreventivo,"statoPreventivo")),""),e.xp6(3),e.Q6J("ngIf",t.statoPreventivo!=n.enumStatoPreventivo.Visualizzato),e.xp6(1),e.Q6J("ngIf",t.statoPreventivo==n.enumStatoPreventivo.Visualizzato),e.xp6(1),e.Q6J("ngIf",!!t.codicePrenotazione),e.xp6(1),e.Q6J("ngIf",null!=t.causaleCancellazione)}}function DP(i,o){1&i&&e._UZ(0,"mat-header-cell")}function IP(i,o){1&i&&(e.TgZ(0,"span",141),e.ALo(1,"translate"),e._uU(2,"mail"),e.qZA()),2&i&&e.Q6J("matTooltip",e.lcZ(1,1,"sbm.preventivi.messaggio"))}const QP=function(i){return{color:i}};function UP(i,o){if(1&i&&(e.TgZ(0,"span",142),e._uU(1,"label_important"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("ngStyle",e.VKq(1,QP,t.flag==n.enumFlagPreventivo.Rosso?"#eb5655":t.flag==n.enumFlagPreventivo.Verde?"#4dbb69":"#f4d125"))}}function YP(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,IP,3,3,"span",139),e.YNc(2,UP,2,3,"span",140),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.hasMessaggiCliente),e.xp6(1),e.Q6J("ngIf",t.flag!=n.enumFlagPreventivo.Nessuno)}}function RP(i,o){1&i&&(e.TgZ(0,"mat-header-cell",143),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.preventivo.proprieta.codicePreventivo"),""))}function FP(i,o){if(1&i&&(e.TgZ(0,"mat-cell",144),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.codicePreventivo," ")}}function HP(i,o){1&i&&(e.TgZ(0,"mat-header-cell",145),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.preventivo.proprieta.data"),""))}function KP(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataPreventivo,"dd/MM/yyyy HH:mm:ss"))}}function GP(i,o){1&i&&(e.TgZ(0,"mat-header-cell",145),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.preventivo.proprieta.nominativo")," "))}function $P(i,o){if(1&i&&e._UZ(0,"span"),2&i){const t=e.oxw(2).$implicit;e.Gre("mr-1 fi fi-",t.cliente.lingua.flagIcon,"")}}function BP(i,o){if(1&i&&(e.TgZ(0,"span",154),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" - ",t.tagCrm.nome," ")}}function VP(i,o){1&i&&(e.TgZ(0,"span",155),e._uU(1,"NO PRIVACY"),e.qZA())}function XP(i,o){if(1&i&&(e.TgZ(0,"span",156),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.Udp("background-color",t.cliente.mercato.coloreHex),e.Q6J("appInvertColor",t.cliente.mercato.coloreHex),e.xp6(1),e.hij(" ",t.cliente.mercato.descrizione," ")}}function jP(i,o){if(1&i&&(e.TgZ(0,"span",156),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.Udp("background-color",t.cliente.canaleVendita.coloreHex),e.Q6J("appInvertColor",t.cliente.canaleVendita.coloreHex),e.xp6(1),e.hij(" ",t.cliente.canaleVendita.descrizione," ")}}function WP(i,o){if(1&i&&(e.TgZ(0,"span",157),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.Udp("background-color",t.cliente.fonte.coloreHex),e.Q6J("appInvertColor",t.cliente.fonte.coloreHex),e.xp6(1),e.hij(" ",t.cliente.fonte.descrizione," ")}}function ek(i,o){if(1&i&&(e.TgZ(0,"div",128)(1,"div"),e.YNc(2,$P,1,3,"span",147),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.YNc(5,BP,2,1,"span",148),e.YNc(6,VP,2,0,"span",149),e.qZA(),e.TgZ(7,"div",150),e._uU(8),e.qZA(),e.TgZ(9,"div",151),e.YNc(10,XP,2,4,"span",152),e.YNc(11,jP,2,4,"span",152),e.YNc(12,WP,2,4,"span",153),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",null!=t.cliente.lingua&&!!t.cliente.lingua.flagIcon),e.xp6(2),e.Oqu(t.cliente.ragioneSociale),e.xp6(1),e.Q6J("ngIf",t.tagCrm),e.xp6(1),e.Q6J("ngIf",0==t.cliente.privacy),e.xp6(2),e.Oqu(null==t.cliente?null:t.cliente.email),e.xp6(2),e.Q6J("ngIf",null!=t.cliente.mercato),e.xp6(1),e.Q6J("ngIf",null!=t.cliente.canaleVendita),e.xp6(1),e.Q6J("ngIf",null!=t.cliente.fonte)}}function tk(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,ek,13,8,"div",146),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.cliente)}}function ik(i,o){1&i&&(e.TgZ(0,"mat-header-cell",145),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.preventivo.proprieta.arrivo"),""))}function ok(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.arrivo,"dd/MM/yyyy"))}}function nk(i,o){1&i&&(e.TgZ(0,"mat-header-cell",145),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.preventivo.proprieta.partenza"),""))}function ak(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.partenza,"dd/MM/yyyy"))}}function lk(i,o){1&i&&(e.TgZ(0,"mat-header-cell",145),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.preventivo.proprieta.dataScadenza"),""))}function rk(i,o){if(1&i&&(e.TgZ(0,"div",138),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.dataScadenzaAccontoCaparra,"dd/MM/yyyy")," (cp) ")}}function ck(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",128)(2,"div"),e._uU(3),e.ALo(4,"date"),e.qZA(),e.YNc(5,rk,3,4,"div",132),e.qZA()()),2&i){const t=o.$implicit;e.xp6(3),e.hij(" ",e.xi3(4,2,t.dataScadenza,"dd/MM/yyyy")," "),e.xp6(2),e.Q6J("ngIf",null!=t.dataScadenzaAccontoCaparra)}}function sk(i,o){1&i&&(e.TgZ(0,"mat-header-cell",145),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.richiesta.proprieta.tipoRichiesta"),""))}function pk(i,o){if(1&i&&(e.TgZ(0,"div",160),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.utente.descrizione," ")}}function dk(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",57),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,pk,2,1,"div",159),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,n.getEnumKeyTranslation(n.enumTipoRichiesta,t.richiesta.tipoRichiesta,"tipoRichiestaPreventivo"))," "),e.xp6(2),e.Q6J("ngIf",null!=t.utente)}}function mk(i,o){if(1&i&&(e.TgZ(0,"mat-cell",158),e.YNc(1,dk,5,4,"ng-container",2),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.richiesta)}}function _k(i,o){1&i&&(e.TgZ(0,"mat-header-cell",143),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.preventivo.proprieta.modalitaPagamento"),""))}function uk(i,o){if(1&i&&(e.TgZ(0,"div",163),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.modalitaPagamento.nome," ")}}function gk(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.lnq(" ",e.lcZ(2,3,"bo.preventivo.proprieta.caparra")," ",t.caparra," ",t.isCaparraPercentuale?" %":" \u20ac"," ")}}function hk(i,o){1&i&&(e.TgZ(0,"div",164),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi.pagamentoConfermato")," "))}function fk(i,o){if(1&i&&(e.TgZ(0,"mat-cell",158),e.YNc(1,uk,2,1,"div",161),e.YNc(2,gk,3,5,"div",2),e.YNc(3,hk,3,3,"div",162),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.modalitaPagamento),e.xp6(1),e.Q6J("ngIf",t.caparra>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataConfermaPagamento)}}function Ck(i,o){1&i&&(e.TgZ(0,"mat-header-cell",145),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.preventivo.proprieta.dataPrenotazione"),""))}function bk(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataPrenotazione,"dd/MM/yyyy"))}}function vk(i,o){1&i&&(e.TgZ(0,"mat-header-cell",165),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.preventivo.proprieta.totale"),""))}function Tk(i,o){if(1&i&&(e.TgZ(0,"mat-cell",158)(1,"div",166)(2,"b"),e._uU(3),e.ALo(4,"eurCurrency"),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(e.lcZ(4,1,t.totale))}}function xk(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Zk(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",120),e.NdJ("click",function(a){e.CHM(t),e.oxw(2);const l=e.MAs(2),r=e.oxw().$implicit,p=e.oxw();return a.stopPropagation(),p.send(r),e.KtG(l.closeMenu())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.preventivi.inviaEmail")))}function Ak(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,Zk,3,3,"button",171),e.TgZ(2,"button",120),e.NdJ("click",function(a){e.CHM(t),e.oxw();const l=e.MAs(2),r=e.oxw().$implicit,p=e.oxw();return a.stopPropagation(),p.apriMyPage(r),e.KtG(l.closeMenu())}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",120),e.NdJ("click",function(a){e.CHM(t),e.oxw();const l=e.MAs(2),r=e.oxw().$implicit,p=e.oxw();return a.stopPropagation(),p.openCalcolaRetta(r.cliente),e.KtG(l.closeMenu())}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",!!t.cliente.email&&t.statoPreventivo!=n.enumStatoPreventivo.Inviato),e.xp6(2),e.Oqu(e.lcZ(4,3,"sbm.preventivi.apriMyPage")),e.xp6(3),e.Oqu(e.lcZ(7,5,"sbm.preventivi.creaPreventivo"))}}function wk(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",120),e.NdJ("click",function(a){e.CHM(t),e.oxw();const l=e.MAs(2),r=e.oxw().$implicit,p=e.oxw();return a.stopPropagation(),p.duplica(r.oid),e.KtG(l.closeMenu())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.duplica")))}function zk(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",120),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,l=e.oxw();return a.statoPreventivo=l.enumStatoPreventivo.DaGestire,e.KtG(l.save(a))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.preventivi.impostaDaGestire")))}function Mk(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",120),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw(2);const p=e.MAs(2),T=e.oxw().$implicit,L=e.oxw();return a.stopPropagation(),T.flag=r.key,L.save(T),e.KtG(p.closeMenu())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.value))}}function qk(i,o){if(1&i&&(e.ynx(0),e.YNc(1,zk,4,3,"ng-container",2),e._UZ(2,"mat-divider"),e.YNc(3,Mk,3,3,"button",119),e.ALo(4,"selectEnum"),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.statoPreventivo!=n.enumStatoPreventivo.DaGestire),e.xp6(2),e.Q6J("ngForOf",e.xi3(4,2,n.enumFlagPreventivo,"flagPreventivo"))}}function Pk(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"button",168,169),e.NdJ("click",function(n){return n.stopPropagation()}),e.TgZ(3,"i",127),e._uU(4,"more_vert"),e.qZA()(),e.TgZ(5,"mat-menu",null,170),e.YNc(7,Ak,8,7,"ng-container",2),e.YNc(8,wk,3,3,"button",171),e.YNc(9,qk,5,5,"ng-container",2),e.qZA(),e.BQk()),2&i){const t=e.MAs(6),n=e.oxw().$implicit,a=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(6),e.Q6J("ngIf",null!=n.cliente),e.xp6(1),e.Q6J("ngIf",!n.isEliminato),e.xp6(1),e.Q6J("ngIf",n.statoPreventivo!=a.enumStatoPreventivo.Prenotato)}}function kk(i,o){if(1&i&&(e.TgZ(0,"mat-cell",167),e.YNc(1,Pk,10,4,"ng-container",2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function Sk(i,o){1&i&&e._UZ(0,"mat-header-row",172)}function yk(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",173),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.dataReceived?p.utility.openUrlInNewTab("/sbm/home/(homeOutlet:preventivi)?oidPreventivo="+r.oid):p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}class bi extends f.H{set _data(o){null!=o&&(this.dataReceived=!0,this.data=o,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}constructor(o,t,n,a,l,r,p,T,L){super(),this.apiService=o,this.headerService=t,this.route=n,this.containerService=a,this.utility=l,this.sessionService=r,this.navigationService=p,this.parametriService=T,this.localizationService=L,this.showTable=!0,this.columns=["select","edit","stato","flag","codicePreventivo","dataPreventivo","cliente.ragioneSociale","arrivo","partenza","dataScadenza","richiesta.tipoRichiesta","modalitaPagamento","dataPrenotazione","totale","details"],this.displayedColumns=this.columns.slice(1),this.rq=new d.VEC,this.pageSize=25,this.subject=new qc.x,this.oidReceived=!1,this.richiesteRedirect=!1,this.clienteRedirect=!1,this.preventiviCliente=!1,this.statiRichieste=[],this.statiPreventivi=[],this.statiPrenotazioni=[],this.enumStatoPreventivo=c.N4,this.utente=new v.oDy(-1),this.tag=new v.I73(-1),this.enumFlagPreventivo=c.yw,this.messaggi=[],this.showFilterAdv=!1,this.enumTipoRichiesta=c.GY,this.enumTipoFiltroPreventivi=c.WG,this.tipoFiltro=c.WG.AnnoCorrente,this.getPortaliRQ=d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number),this.selectedPortale=new v.$Ys(-1),this.causale=new v.p$p(-1),this.selectedUbicazione=new v.Dgg(-1),this.search=!1,this.dataReceived=!1,this.isVisualizzaImportiStati=!0,this.isVisualizzaNumeroPreventiviPrenotazioni=!0,this.multipleEditing=!1,this.selectionPreventivi=new me.Ov(!0,[]),this.contenuti=[],this.articoli=[],this.riduzioni=[],this.causaliOperazioneCancellazione=[],this.causaliOperazioneRifiuto=[],this.selectedStatiPreventivo=[],this.selectedStatiPreventivoPrevious=[],this.statiPreventivo=[],this.getCausaliOperazioneRQ=d.k$g.fromFilter("tipoCausaleOperazione",c.Hp.In,"("+c.pg.PreventivoRifiutato+", "+c.pg.CancellazionePreventivo+")",c.NM.Number)}ngOnInit(){if(this.rq.skip=0,this.rq.take=this.pageSize,this.dataReceived)this.preventiviCliente=!0;else{this.headerService.setTitle("sbm.preventivi.title",!1),this.filters=[],this.filters.push(new d.wn$("arrivo",c.Hp.GreaterEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("partenza",c.Hp.LowerEqual,this.getDate(this.oneYearFromToday),c.NM.Date)),this.filters.push(new d.wn$("cliente.ragioneSociale",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.email",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("arrivo",c.Hp.GreaterEqual,this.parametriService.parametri.isClientiCheDevonoArrivareChecked?this.getDate(this.today):"",c.NM.Date)),this.filters.push(new d.wn$("hasMessaggiCliente",c.Hp.IsTrue)),this.filters.push(new d.wn$("utente.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("utente.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("codicePreventivo",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("flag",c.Hp.NotEqual,"",c.NM.Number)),this.filters.push(new d.wn$("dataPrenotazione",c.Hp.IsNull,null,null,!0)),this.filters.push(new d.wn$("richiesta.tipoRichiesta",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("portaleXAlbergo.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tagCrm.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("statoPreventivo",c.Hp.In,"",c.NM.Number)),this.filters.push(new d.wn$("causaleCancellazione.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("statoPreventivo",c.Hp.NotEqual,c.N4.Cancellato.toString(),c.NM.Number)),this.filters.push(new d.wn$("portaleXAlbergo.ubicazioneIstat.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("dataPreventivo",c.Hp.GreaterEqual,"",c.NM.Date)),this.filters.push(new d.wn$("dataPreventivo",c.Hp.LowerEqual,"",c.NM.Date)),this.filters.push(new d.wn$("dataScadenza",c.Hp.GreaterEqual,"",c.NM.Date)),this.filters.push(new d.wn$("dataScadenza",c.Hp.LowerEqual,"",c.NM.Date)),this.filters.push(new d.wn$("dataPrenotazione",c.Hp.GreaterEqual,"",c.NM.Date)),this.filters.push(new d.wn$("dataPrenotazione",c.Hp.LowerEqual,"",c.NM.Date)),this.filters.push(new d.wn$("statoPreventivo",c.Hp.Equal,"",c.NM.Number,!1));let t=new d.rlN;t.addFilters(new d.wn$("dataVisualizzazione",c.Hp.IsNull)),t.skip=0,t.take=5,t.sorting=[new d.aQR("data",c.nI.Desc)],this.apiService.getMessaggiFilter(t).subscribe(n=>{this.messaggi=n.data,this.messaggi.forEach(a=>{if(null!=a.messaggio){let l;if(a.parametri)try{l=JSON.parse(a.parametri)}catch(p){}let r=this.localizationService.getTranslationSync(a.messaggio,l);r.length>50?a.messaggioShort=r.slice(0,50)+"...":a.messaggioShort=r}})}),this.rqStati=new d.BiY,this.rqStati.dal=this.getDate(u().set("month",0).set("date",1)),this.rqStati.al=this.getDate(u().set("month",11).set("date",31)),this.rqStati.isIncludiPreventiviCancellati=!1,null!=this.sessionService.getUbicazioneIstat()&&(this.selectedUbicazione=this.sessionService.getUbicazioneIstat(),this.rqStati.oidUbicazione=this.selectedUbicazione.oid,this.filters[17].value=this.rqStati.oidUbicazione>0?this.rqStati.oidUbicazione.toString():""),this.sub=this.route.queryParamMap.subscribe(n=>{let a=n.get("oidPreventivo");a&&!isNaN(+a)&&+a>0&&(this.oidPreventivoReceived=+a,this.oidReceived=!0),this.clienteRedirect="true"==n.get("clienteRedirect"),this.richiesteRedirect="true"==n.get("richiesteRedirect")}),this.preventiviCliente=!1,this.statiPreventivo=Object.keys(this.enumStatoPreventivo).map(n=>this.enumStatoPreventivo[n]).filter(n=>!isNaN(n))}let o=this.sessionService.getPermessiUtente();null!=o&&(this.isVisualizzaImportiStati=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.VisualizzazioneImportiStatiPreventivi)),this.isVisualizzaNumeroPreventiviPrenotazioni=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.VisualizzazioneNumeroPreventiviPrenotazioni)))}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getPreventiviView().subscribe(o=>{this.contenuti=o.data.contenuti,this.articoli=o.data.articoli,this.causaliOperazioneCancellazione=o.data.causaliOperazioneCancellazione,this.causaliOperazioneRifiuto=o.data.causaliOperazioneRifiuto,this.riduzioni=o.data.riduzioni,null!=this.dataSource?(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.setIsLoading(!1)):null!=this.oidPreventivoReceived?this.downloadPreventivo():this.download(!0)})}onSortChange(o){this.sorting=new d.aQR(o.active,"asc"==o.direction?c.nI.Asc:c.nI.Desc),0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.dataReceived?this.containerService.scrollToTop():null!=this.table&&this.containerService.scrollToPosition(this.table.nativeElement.offsetTop)}onSearch(o,t,n,a=!0){null!=t?(this.search=!a,this.filters[o].value=t):this.filters[o].active=n,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onIsPagamentoInAttesaDiConfermaChange(){this.rq.isPagamentoInAttesaDiConferma&&(this.filters[10].active=!1),0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}downloadPreventivo(){this.setIsLoading(!0),this.searchRequest=this.apiService.getPreventivo(this.oidPreventivoReceived).subscribe(o=>{null!=o.data?(this.edit(o.data),this.setIsLoading(!1)):this.download(!0)})}download(o=!1){this.selectionPreventivi=new me.Ov(!0,[]),this.dataReceived||(this.search||this.setIsLoading(!0),this.oidReceived=!1,null!=this.searchRequest&&this.searchRequest.unsubscribe(),null!=this.sorting&&(this.rq.sorting=[this.sorting]),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPreventiviFilter(this.rq).subscribe(t=>{for(let n of t.data)try{null!=n.cliente&&(null!=n.cliente.mercato&&(n.cliente.mercato.coloreHex=Z(n.cliente.mercato.colore).hex()),null!=n.cliente.canaleVendita&&(n.cliente.canaleVendita.coloreHex=Z(n.cliente.canaleVendita.colore).hex()),null!=n.cliente.fonte&&(n.cliente.fonte.coloreHex=Z(n.cliente.fonte.colore).hex()),null!=n.tagCrm&&(n.tagCrm.coloreHex=Z(n.tagCrm.colore).hex()))}catch(a){}this.data=t.data,0==this.data.length&&(this.multipleEditing=!1),this.totalRecords=t.totalRecords,o?this.downloadStatiPreventivi():this.search?this.search=!1:this.setIsLoading(!1)}))}downloadStatiPreventivi(){this.setIsLoading(!0),this.apiService.getStatiPreventivi(this.rqStati).subscribe(o=>{this.numeroPreventivi=o.data.numeroPreventivi,this.numeroPrenotazioni=o.data.numeroPrenotazioni,this.percentualeConversione=o.data.percentualeConversione,this.statiRichieste=o.data.statiRichieste.filter(t=>t.numero>0),this.statiPreventivi=o.data.statiPreventivi.filter(t=>t.numero>0),this.statiPrenotazioni=o.data.statiPrenotazioni.filter(t=>t.numero>0),this.setIsLoading(!1)})}edit(o){this.oidPreventivo=new Number(o.oid),this.showTable=!1,this.containerService.scrollToTop(),(!this.oidReceived||!this.clienteRedirect&&!this.richiesteRedirect)&&this.headerService.showElenco(this.onBack.bind(this))}back(){this.oidReceived?this.clienteRedirect?this.utility.openPageSbm("clienti"):this.richiesteRedirect?this.utility.openPageSbm("richieste"):this.onBack():this.onBack()}onBack(){this.showTable=!0,this.download(!0),this.containerService.scrollToTop(),this.headerService.hideElenco()}apriMyPage(o){this.utility.openUrlInNewTab("/booking/mypage?uid="+o.uid+"&isHotel=true")}send(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Qe,t),a=n.componentInstance;o.statoPreventivo==c.N4.Accettato?a.tipoTemplate=c.hQ.PreventivoAccettato:o.statoPreventivo==c.N4.InAttesaPagamento?a.tipoTemplate=c.hQ.PreventivoRichiestaCaparra:o.statoPreventivo==c.N4.Prenotato?a.tipoTemplate=c.hQ.PreventivoPrenotato:a.tipoTemplate=c.hQ.Preventivo,a.preventivo=o,a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&(o.statoPreventivo=l.statoPreventivo,o.dataInvio=l.dataInvio)})}add(){let o=new d.Zpt;o.disableClose=!0,this.containerService.dimension.width>=992?o.width="50vw":o.width="80vw",o.height="80vh",o.panelClass="no-padding-overflow-dialog";let t=this.showModalDialog(ui,o),n=t.componentInstance;n.cliente=this.cliente,n.dialogRef=t}onStatusClick(o){if(o.toString()==this.filters[this.filters.length-1].value)this.resetStatusFilter();else{for(let t of this.filters)null!=t.value&&(t.value=""),t.active=!1;this.utente=new v.oDy(-1),this.selectedPortale=new v.$Ys(-1),this.causale=new v.p$p(-1),this.tag=new v.I73(-1),this.filters[18].value=this.rqStati.dal,this.filters[19].value=this.rqStati.al,this.filters[this.filters.length-1].active=!0,this.filters[this.filters.length-1].value=o.toString(),this.currentStato=o}0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}resetStatusFilter(){this.filters[this.filters.length-1].active=!1,this.filters[this.filters.length-1].value="",this.currentStato=null}export(){this.setIsLoading(!0);let o=new d.VEC;null!=this.sorting&&(o.sorting=[this.sorting]),o.filters=this.utility.getFilters(this.filters),this.apiService.getPreventiviFilter(o).subscribe(t=>{this.utility.exportToCsv(t.data,"Preventivi",this.displayedColumns.slice(2,this.displayedColumns.length-1).concat("cliente.email")),this.setIsLoading(!1)})}save(o){this.setIsLoading(!0),this.apiService.setPreventivo(o).subscribe(()=>{this.navigationService.refreshContatoriMenu(),this.downloadStatiPreventivi()})}onFiltroChange(){let o=u();switch(this.tipoFiltro){case c.WG.Nessuno:this.rqStati.dal=null,this.rqStati.al=null;break;case c.WG.Oggi:this.rqStati.dal=this.getDate(o),this.rqStati.al=this.rqStati.dal;break;case c.WG.UltimaSettimana:this.rqStati.dal=this.getDate(u().subtract(7,"day")),this.rqStati.al=this.getDate(o);break;case c.WG.QuestoMese:this.rqStati.dal=this.getDate(u().set("date",1)),this.rqStati.al=this.getDate(u().set("date",u().daysInMonth()));break;case c.WG.AnnoCorrente:this.rqStati.dal=this.getDate(u().set("month",0).set("date",1)),this.rqStati.al=this.getDate(u().set("month",11).set("date",31));break;case c.WG.AnnoPrecedente:let t=u().subtract(1,"year");this.rqStati.dal=this.getDate(t.set("month",0).set("date",1)),this.rqStati.al=this.getDate(t.set("month",11).set("date",31));break;case c.WG.AnnoSuccessivo:let n=u().add(1,"year");this.rqStati.dal=this.getDate(n.set("month",0).set("date",1)),this.rqStati.al=this.getDate(n.set("month",11).set("date",31))}this.downloadStatiPreventivi()}openCalcolaRetta(o){let t=new d.Zpt;t.width="80vw",t.minHeight="80vh",t.maxHeight="95vh",t.panelClass="no-padding-dialog";let n=this.showModalDialog(ut,t),a=n.componentInstance;a.cliente=null!=o?o:this.cliente,a.dialogRef=n}openPrenotazione(o){this.utility.openUrlInNewTab("/sbm/home/(homeOutlet:prenotazioni)?codicePrenotazione="+o)}openStatistiche(){this.utility.openPageSbm("pickup-preventivi")}openPosta(){this.utility.openPageSbm("mail",{isPreventivi:!0})}onUbicazioneChange(){this.rqStati.oidUbicazione=this.selectedUbicazione.oid,this.filters[17].value=this.rqStati.oidUbicazione>0?this.rqStati.oidUbicazione.toString():"",this.download(!0)}isAllSelectedPreventivi(){return this.selectionPreventivi.selected.length==this.data.length}masterTogglePreventivi(){this.isAllSelectedPreventivi()?this.selectionPreventivi.clear():this.data.forEach(o=>this.selectionPreventivi.select(o.oid))}onMultipleEditClick(){this.selectionPreventivi=new me.Ov(!0,[]),this.multipleEditing=!this.multipleEditing,this.multipleEditing?this.displayedColumns=this.columns:this.displayedColumns=this.columns.slice(1)}archiviaPreventivi(){this.showDialogConfirm("globals.effettuareOperazione").then(o=>{this.setIsLoading(!0);let t=new d.ole;t.oidPreventivi=this.selectionPreventivi.selected,this.apiService.archiviaPreventivi(t).subscribe(()=>{this.download(!0),this.navigationService.refreshContatoriMenu()})},o=>{})}cancellaPreventivi(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0);let n=new d.do9;n.oidPreventivi=this.selectionPreventivi.selected,n.oidCausale=null!=o?o.oid:-1,this.apiService.cancellaPreventivi(n).subscribe(()=>{this.download(!0),this.navigationService.refreshContatoriMenu()})},t=>{})}inviaMessaggioPreventivi(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(on,o),n=t.componentInstance;n.preventivi=this.utility.findItemsByOid(this.data,this.selectionPreventivi.selected),n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&(this.selectionPreventivi=new me.Ov(!0,[]))})}inviaEmailPreventivi(){let o=this.utility.findItemsByOid(this.data,this.selectionPreventivi.selected).filter(t=>null!=t.cliente&&!!t.cliente.email);if(o.length>0){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Qe,t),a=n.componentInstance;a.clienti=o.map(l=>l.cliente),a.replaceTags=!1,a.editingEnabled=!1,a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&(this.selectionPreventivi=new me.Ov(!0,[]))})}else this.showError("sbm.preventivi.impossibileInviareEmail")}onSelectDeselectAllClickStatiPreventivo(o){this.isAllSelectedStatiPreventivo(o)?this.selectedStatiPreventivo=[]:this.selectedStatiPreventivo=this.statiPreventivo.slice()}isAllSelectedStatiPreventivo(o){return o.selected.length==this.statiPreventivo.length}isAllDeselectedStatiPreventivo(o){return 0==o.selected.length}onStatiPreventivoOpenedChange(o){o?this.selectedStatiPreventivoPrevious=this.selectedStatiPreventivo:JSON.stringify(this.selectedStatiPreventivoPrevious)!=JSON.stringify(this.selectedStatiPreventivo)&&(this.selectedStatiPreventivo.length>0?this.onSearch(14,"("+this.selectedStatiPreventivo.join(",")+")"):this.onSearch(14,""),this.resetStatusFilter())}getNumeroPreventiviLabel(){if(this.rqStati.dal&&this.rqStati.al){let o=this.localizationService.getTranslationSync("sbm.preventivi.numeroPreventivi",{dal:u(this.rqStati.dal).format("D MMMM YYYY"),al:u(this.rqStati.al).format("D MMMM YYYY")});return null!=this.selectedUbicazione&&this.selectedUbicazione.oid>0&&(o+=" ("+this.localizationService.getTranslationSync("globals.ubicazioneIstat")+": "+this.selectedUbicazione.nome+")"),o}return""}duplica(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0),this.apiService.duplicaPreventivo(o).subscribe(n=>{this.setIsLoading(!1),this.edit(n.data)})},t=>{})}onNominativoInput(o){o&&(o.length>=3?this.onSearch(2,o,null,!1):2==o.length&&this.filters[2].value&&this.onSearch(2,"",null,!1))}ngOnDestroy(){null!=this.sub&&this.sub.unsubscribe(),this.dataReceived||(this.headerService.clearTitle(),this.headerService.hideElenco())}}bi.\u0275fac=function(o){return new(o||bi)(e.Y36(A.s),e.Y36(ie.r),e.Y36(je.gz),e.Y36(te.J),e.Y36(C.t),e.Y36(j.m),e.Y36(Ae.f),e.Y36(et),e.Y36(Oe.o))},bi.\u0275cmp=e.Xpm({type:bi,selectors:[["app-preventivi"]],viewQuery:function(o,t){if(1&o&&(e.Gf(oP,5),e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.table=n.first),e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{cliente:"cliente",_data:"_data"},features:[e.qOj],decls:85,vars:33,consts:[[1,"container-fluid","p-3"],[3,"hidden"],[4,"ngIf"],[1,"mb-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],[1,"material-icons","mr-1"],["mat-flat-button","","color","primary","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],["class","mb-3",4,"ngIf"],["table",""],[1,"mat-table-container"],["matSort","","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","select"],["class","mat-th-edit",4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["matColumnDef","stato"],[4,"matCellDef"],["matColumnDef","flag"],["matColumnDef","codicePreventivo"],["mat-sort-header","","class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","dataPreventivo"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","cliente.ragioneSociale"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","dataScadenza"],["matColumnDef","richiesta.tipoRichiesta"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","modalitaPagamento"],["matColumnDef","dataPrenotazione"],["matColumnDef","totale"],["mat-sort-header","","class","justify-content-end",4,"matHeaderCellDef"],["matColumnDef","details"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[3,"preventivoOid","preventiviCliente","contenuti","articoli","causaliOperazioneCancellazione","causaliOperazioneRifiuto","riduzioni","backEvent"],[1,"row"],[1,"col-4","pt-2"],[1,"col-8","text-right"],[1,"d-inline-block","text-right","border","rounded","bg-white","mr-4","pt-1","pb-2"],[1,"d-inline-block","ubicazioneSelect","mr-2"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"filtroSelect"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"filter","mt-3"],[1,"row","filter-base"],[1,"col-9"],[1,"col-3"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"value","dateChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["pickerArrivo",""],["autocompleteOff","","matInput","",3,"placeholder","input"],["nominativoSearch",""],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["emailSearch",""],["codicePreventivoSearch",""],["pickerCreazione",""],[3,"placeholder","value","selectionChange"],["value",""],["displayMember","username",3,"dataLoader","value","placeholder","valueChange"],[1,"text-right","pt-2","font-weight-bold"],[1,"align-middle","color-pink","cursor-pointer",3,"click"],["mat-icon-button","","color","primary",1,"align-middle",3,"click"],[1,"mt-2"],["color","primary",3,"checked","change"],[1,"filter-adv",3,"hidden"],["pickerScadenza",""],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["multiple","",3,"placeholder","ngModel","ngModelChange","openedChange"],["selectStatiPreventivo",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],["autocompleteOff","","matStartDate","","readonly","",3,"dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"dateChange"],["pickerDataPrenotazione",""],["color","primary",3,"ngModel","ngModelChange","change"],[1,"d-inline-block","rounded","pr-3","pl-3"],[1,"font-weight-bold"],[1,"text-right","numero-preventivi"],[3,"value"],[1,"mt-2","mb-2","font-weight-bold","font-italic"],[1,"row","mt-2"],[1,"col-3","pr-1"],[1,"h-100","p-0"],[1,"bg-title-richieste","text-nowrap","p-3","mb-0"],[1,"p-3"],["class","p-1 rounded cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-3","pr-1","pl-1"],[1,"bg-title-preventivi","text-nowrap","p-3","mb-0"],[1,"bg-title-prenotazioni","text-nowrap","p-3","mb-0"],[1,"col-3","pl-1"],[1,"bg-title-messaggi","text-nowrap","p-3","mb-0"],["class","row messaggio-row",3,"click",4,"ngFor","ngForOf"],[1,"p-1","rounded","cursor-pointer",3,"ngClass","click"],[1,"numero","align-middle"],[1,"font-weight-bold","mr-2","ml-2","align-middle"],[1,"importo","align-middle"],["class","numero-flag align-middle",4,"ngIf"],[1,"numero-flag","align-middle"],[1,"row","messaggio-row",3,"click"],[1,"col-6","font-weight-bold"],[1,"col-6"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],[1,"causali-button",3,"matMenuTriggerFor"],["causaliMenuButton",""],["causaliMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-th-edit"],["color","primary",1,"d-inline-block","mt-4",3,"checked","indeterminate","change"],[1,"mat-td-edit"],["color","primary",1,"d-inline-block","mt-2",3,"checked","click","change"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"d-flex","flex-column"],["class","material-icons align-middle",3,"matTooltip",4,"ngIf"],[3,"matTooltip",4,"ngIf"],[1,"mr-1"],["class","text-small font-italic",4,"ngIf"],[1,"material-icons","align-middle",3,"matTooltip"],[3,"matTooltip"],[1,"material-icons","align-middle"],[1,"material-icons","align-middle","ml-n3"],["href","#",3,"click"],[1,"text-small","font-italic"],["class","material-icons",3,"matTooltip",4,"ngIf"],["class","material-icons",3,"ngStyle",4,"ngIf"],[1,"material-icons",3,"matTooltip"],[1,"material-icons",3,"ngStyle"],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center"],["mat-sort-header",""],["class","d-flex flex-column",4,"ngIf"],[3,"class",4,"ngIf"],["class","text-small",4,"ngIf"],["class","privacy-row rounded pr-1 pl-1",4,"ngIf"],[1,"cliente-email"],[1,"parametri-ricerca-container"],["class","rounded pr-1 pl-1 mr-1 mt-1 parametro-ricerca",3,"backgroundColor","appInvertColor",4,"ngIf"],["class","rounded pr-1 pl-1 mt-1 parametro-ricerca",3,"backgroundColor","appInvertColor",4,"ngIf"],[1,"text-small"],[1,"privacy-row","rounded","pr-1","pl-1"],[1,"rounded","pr-1","pl-1","mr-1","mt-1","parametro-ricerca",3,"appInvertColor"],[1,"rounded","pr-1","pl-1","mt-1","parametro-ricerca",3,"appInvertColor"],[1,"flex-wrap"],["class","w-100 text-xsmall",4,"ngIf"],[1,"w-100","text-xsmall"],["class","w-100 text-center font-italic small",4,"ngIf"],["class","w-100 text-center font-italic small pagamento-confermato",4,"ngIf"],[1,"w-100","text-center","font-italic","small"],[1,"w-100","text-center","font-italic","small","pagamento-confermato"],["mat-sort-header","",1,"justify-content-end"],[1,"w-100","pr-3","text-right"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor","click"],["menuTrigger","matMenuTrigger"],["appMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,vP,167,131,"ng-container",2),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){return t.add()}),e.TgZ(5,"i",5),e._uU(6,"add_circle_outline"),e.qZA(),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",4),e.NdJ("click",function(){return t.openCalcolaRetta()}),e.TgZ(10,"i",5),e._uU(11,"insert_invitation"),e.qZA(),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",4),e.NdJ("click",function(){return t.onMultipleEditClick()}),e.TgZ(15,"i",5),e._uU(16,"edit"),e.qZA(),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.YNc(19,TP,5,3,"button",6),e.TgZ(20,"button",7),e.NdJ("click",function(){return t.openStatistiche()}),e.TgZ(21,"i",5),e._uU(22,"open_in_new"),e.qZA(),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.YNc(25,ZP,18,18,"div",8),e.YNc(26,AP,5,3,"div",2),e.TgZ(27,"div",1,9)(29,"div",10)(30,"mat-table",11),e.NdJ("matSortChange",function(a){return t.onSortChange(a)}),e.ynx(31,12),e.YNc(32,wP,2,2,"mat-header-cell",13),e.YNc(33,zP,2,1,"mat-cell",14),e.BQk(),e.ynx(34,15),e.YNc(35,MP,1,0,"mat-header-cell",16),e.YNc(36,qP,4,0,"mat-cell",14),e.BQk(),e.ynx(37,17),e.YNc(38,PP,1,0,"mat-header-cell",16),e.YNc(39,LP,12,11,"mat-cell",18),e.BQk(),e.ynx(40,19),e.YNc(41,DP,1,0,"mat-header-cell",16),e.YNc(42,YP,3,2,"mat-cell",18),e.BQk(),e.ynx(43,20),e.YNc(44,RP,3,3,"mat-header-cell",21),e.YNc(45,FP,2,1,"mat-cell",22),e.BQk(),e.ynx(46,23),e.YNc(47,HP,3,3,"mat-header-cell",24),e.YNc(48,KP,3,4,"mat-cell",18),e.BQk(),e.ynx(49,25),e.YNc(50,GP,3,3,"mat-header-cell",24),e.YNc(51,tk,2,1,"mat-cell",18),e.BQk(),e.ynx(52,26),e.YNc(53,ik,3,3,"mat-header-cell",24),e.YNc(54,ok,3,4,"mat-cell",18),e.BQk(),e.ynx(55,27),e.YNc(56,nk,3,3,"mat-header-cell",24),e.YNc(57,ak,3,4,"mat-cell",18),e.BQk(),e.ynx(58,28),e.YNc(59,lk,3,3,"mat-header-cell",24),e.YNc(60,ck,6,5,"mat-cell",18),e.BQk(),e.ynx(61,29),e.YNc(62,sk,3,3,"mat-header-cell",24),e.YNc(63,mk,2,1,"mat-cell",30),e.BQk(),e.ynx(64,31),e.YNc(65,_k,3,3,"mat-header-cell",21),e.YNc(66,fk,4,3,"mat-cell",30),e.BQk(),e.ynx(67,32),e.YNc(68,Ck,3,3,"mat-header-cell",24),e.YNc(69,bk,3,4,"mat-cell",18),e.BQk(),e.ynx(70,33),e.YNc(71,vk,3,3,"mat-header-cell",34),e.YNc(72,Tk,5,3,"mat-cell",30),e.BQk(),e.ynx(73,35),e.YNc(74,xk,1,0,"mat-header-cell",16),e.YNc(75,kk,2,1,"mat-cell",36),e.BQk(),e.YNc(76,Sk,1,0,"mat-header-row",37),e.YNc(77,yk,1,1,"mat-row",38),e.qZA()(),e.TgZ(78,"div",39)(79,"button",40),e.NdJ("click",function(){return t.export()}),e.TgZ(80,"i",41),e._uU(81,"get_app"),e.qZA()(),e.TgZ(82,"mat-paginator",42),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()(),e.TgZ(83,"div",1)(84,"app-preventivi-edit",43),e.NdJ("backEvent",function(){return t.back()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(5),e.Oqu(e.lcZ(8,25,"sbm.preventivi.aggiungiRichiesta")),e.xp6(5),e.Oqu(e.lcZ(13,27,"sbm.preventivi.calcolaRetta")),e.xp6(5),e.Oqu(e.lcZ(18,29,"sbm.preventivi.multipleEdit")),e.xp6(2),e.Q6J("ngIf",t.sessionService.isPostaAttiva()),e.xp6(4),e.Oqu(e.lcZ(24,31,"sbm.preventivi.statistiche")),e.xp6(2),e.Q6J("ngIf",t.multipleEditing),e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.data||0==t.data.length),e.xp6(3),e.Q6J("dataSource",t.dataReceived?t.dataSource:t.data),e.xp6(46),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("preventivoOid",t.oidPreventivo)("preventiviCliente",t.preventiviCliente)("contenuti",t.contenuti)("articoli",t.articoli)("causaliOperazioneCancellazione",t.causaliOperazioneCancellazione)("causaliOperazioneRifiuto",t.causaliOperazioneRifiuto)("riduzioni",t.riduzioni))},dependencies:[m.mk,m.sg,m.O5,m.PC,k.Z,w.X,V.FC,h.eB,M.v_,M.$V,M.nX,b.k0,re.CK,y.nW,y.Q0,y.wx,y.zY,y.By,y._g,g.x8,Ie.W0,Ie.tN,Ie.D8,Yt.d,qe.S$,qe.Qi,qe.mi,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,_.JJ,_.On,ne.d,pn,m.Zx,m.uU,Te.A,ke.f,z.X$],styles:[".statoPreventivo-active[_ngcontent-%COMP%]{background-color:#86eb8baa}.importo[_ngcontent-%COMP%]{font-style:italic}.bg-title-richieste[_ngcontent-%COMP%]{background-color:#e2e2e2;font-size:18px;color:#666}.bg-title-preventivi[_ngcontent-%COMP%]{background-color:#cee5ee;font-size:18px;color:#666}.bg-title-prenotazioni[_ngcontent-%COMP%]{background-color:#abe7c5;font-size:18px;color:#666}.bg-title-messaggi[_ngcontent-%COMP%]{background-color:#f6c5c4;font-size:18px;color:#666}.text-small[_ngcontent-%COMP%]{font-size:small;font-style:italic}.text-xsmall[_ngcontent-%COMP%]{font-size:x-small;font-style:italic}.privacy-row[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#000;font-size:small}mat-card[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px #0003,0 5px 45px #0000,0 1px 14px #0000001f!important;border-radius:7px!important;overflow:hidden!important}.numero[_ngcontent-%COMP%]{background-color:#e6618d;color:#fff;min-width:28px;height:28px;border-radius:28px;font-size:17px;display:inline-flex;justify-content:center;align-items:center;padding-top:.1rem;padding-right:.25rem;padding-left:.25rem}.parametri-ricerca-container[_ngcontent-%COMP%]{white-space:break-spaces}.parametro-ricerca[_ngcontent-%COMP%]{font-size:11px;padding-top:.1rem!important;padding-bottom:.1rem!important;white-space:nowrap}.messaggio-row[_ngcontent-%COMP%]{cursor:pointer}.check-prenotato[_ngcontent-%COMP%]{color:#90ee90}.pagamento-confermato[_ngcontent-%COMP%]{color:#006400}.mat-column-cliente-ragioneSociale[_ngcontent-%COMP%]{flex:0 0 25%}.mat-column-flag[_ngcontent-%COMP%]{flex:0 0 35px}.filtroSelect[_ngcontent-%COMP%], .ubicazioneSelect[_ngcontent-%COMP%]{width:150px}.mat-table[_ngcontent-%COMP%]{min-width:1500px!important}  .mat-table-multiple-edit{position:relative!important;top:20px!important;left:0!important;z-index:1000!important;outline:0!important;margin-top:-20px!important;float:left!important;width:35px!important;height:35px!important}  .mat-table-multiple-edit .mat-button-wrapper{padding:0!important}  .mat-table-multiple-edit .material-icons{font-size:22px;line-height:22px}.causali-button[_ngcontent-%COMP%]{visibility:hidden!important;width:0!important;height:0!important;padding:0!important;margin:0!important;border:0!important}.numero-preventivi[_ngcontent-%COMP%]{color:#e91e63;font-size:20px;font-weight:600;line-height:20px}.mat-column-select[_ngcontent-%COMP%]{width:80px!important;max-width:80px!important;min-width:80px!important}.cliente-email[_ngcontent-%COMP%]{font-size:small;font-style:italic}"]});var Jk=Y(85494);function Ek(i,o){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.codice," ")}}function Nk(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-select",11),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.codicePromozione=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.generaOpzioni())}),e.ALo(2,"translate"),e._UZ(3,"mat-option",12),e.YNc(4,Ek,2,2,"mat-option",13),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.codicePromozione)("placeholder",e.lcZ(2,4,"sbm.richieste.codicePromozionale")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.codiciPromozione)}}function Ok(i,o){if(1&i&&(e.TgZ(0,"div")(1,"b"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.nomePromozione)}}function Lk(i,o){1&i&&(e.TgZ(0,"div",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.richieste.nonPrenotabile")," "))}function Dk(i,o){if(1&i&&(e.TgZ(0,"div",37),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.prezzoScontato)," ")}}function Ik(i,o){if(1&i&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu("-"+t.scontoPercentuale+"%")}}const Qk=function(i){return{"border-top":i}},Uk=function(i,o){return{prezzo:i,"prezzo-sconto mr-1":o}};function Yk(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"span",28),e._uU(4),e.qZA(),e.TgZ(5,"button",29),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2).$implicit,p=e.oxw(4);return e.KtG(p.openDetails(r,l))}),e.TgZ(6,"span",30),e._uU(7,"info"),e.qZA()()(),e.YNc(8,Ok,3,1,"div",2),e.YNc(9,Lk,3,3,"div",31),e.qZA(),e.TgZ(10,"div",32),e.YNc(11,Dk,3,3,"div",33),e.TgZ(12,"div")(13,"span",34),e._uU(14),e.ALo(15,"eurCurrency"),e.qZA(),e.YNc(16,Ik,2,1,"span",35),e.qZA()(),e.TgZ(17,"div",32)(18,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2).index,T=e.oxw(2).index,L=e.oxw(2);return e.KtG(L.selectedOpzioni[T][p][r]=a)})("change",function(a){e.CHM(t);const l=e.oxw(4).index,r=e.oxw(2);return r.tariffeSelectedNumber[l]=a.checked?r.tariffeSelectedNumber[l]+1:r.tariffeSelectedNumber[l]-1,e.KtG(r.checkDisabledButton())}),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2).index,l=e.oxw(2).index,r=e.oxw(2);e.Q6J("ngClass",e.VKq(11,Qk,0==n)),e.xp6(4),e.Oqu(t.descrizione),e.xp6(4),e.Q6J("ngIf",!!t.nomePromozione),e.xp6(1),e.Q6J("ngIf",!t.isPrenotabile),e.xp6(2),e.Q6J("ngIf",t.prezzoScontato>0),e.xp6(2),e.Q6J("ngClass",e.WLB(13,Uk,t.prezzoScontato<=0,t.prezzoScontato>0)),e.xp6(1),e.Oqu(e.lcZ(15,9,t.prezzo)),e.xp6(2),e.Q6J("ngIf",t.prezzoScontato>0),e.xp6(2),e.Q6J("ngModel",r.selectedOpzioni[l][a][n])}}function Rk(i,o){if(1&i&&(e.TgZ(0,"div",19)(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"div",21),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",22),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",23),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,Yk,19,16,"div",24),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.nome?t.nome:""),e.xp6(3),e.Oqu(e.lcZ(6,5,"sbm.preventivi.paxMin")+t.paxMin),e.xp6(3),e.Oqu(e.lcZ(9,7,"sbm.preventivi.paxMax")+t.paxMax),e.xp6(3),e.Oqu(e.lcZ(12,9,"sbm.preventivi.disponibili")+t.disponibili),e.xp6(2),e.Q6J("ngForOf",t.tariffe)}}function Fk(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Rk,14,11,"div",18),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.tariffe&&t.tariffe.length>0)}}function Hk(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Fk,2,1,"ng-container",17),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.opzioni)}}function Kk(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.dialogRef.close(l))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function Gk(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",39)(1,"h5",40),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",41)(5,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(9),l=e.oxw(3);return e.KtG(null==l.causaliOperazione||0==l.causaliOperazione.length?l.dialogRef.close({oid:-1}):a.click())}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"button",43,44),e.TgZ(10,"mat-menu",null,45),e.YNc(12,Kk,2,1,"button",46),e.qZA()(),e.TgZ(13,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.nuovoPreventivo())}),e._uU(14),e.ALo(15,"translate"),e.qZA()()}if(2&i){const t=e.MAs(11),n=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,6,"sbm.richieste.nessunaTariffa")),e.xp6(3),e.Q6J("disabled",null==n.richiesta.cliente||null!=n.richiesta.causaleRifiuto||null!=n.richiesta.preventivo&&n.richiesta.preventivo.statoPreventivo==n.enumStatoPreventivo.Rifiutato),e.xp6(1),e.Oqu(e.lcZ(7,8,"sbm.richieste.rifiutaRichiesta")),e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(4),e.Q6J("ngForOf",n.causaliOperazione),e.xp6(2),e.Oqu(e.lcZ(15,10,"sbm.richieste.creaPreventivo"))}}function $k(i,o){if(1&i&&(e.TgZ(0,"mat-tab",14),e.ALo(1,"translate"),e.TgZ(2,"div",15),e.YNc(3,Hk,2,1,"ng-container",2),e.YNc(4,Gk,16,12,"div",16),e.qZA()()),2&i){const t=o.index,n=e.oxw(2);e.Q6J("label",e.lcZ(1,3,"sbm.richieste.camera")+" "+(t+1)+" - "+n.labels[t]),e.xp6(3),e.Q6J("ngIf",!n.noRates[t]),e.xp6(1),e.Q6J("ngIf",n.noRates[t])}}function Bk(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"h4",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div")(5,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.isVisualizzaTutteLeSoluzioni=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.generaOpzioni())}),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div")(9,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.isVisualizzaSoloCamereDisponibili=a)})("change",function(a){e.CHM(t);const l=e.oxw();return l.generaOpzioni(),e.KtG(l.parametriService.setParametro("isControllaDisponibiliChecked",a.checked))}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div")(13,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.isVisualizzaCamerePaxNonValide=a)})("change",function(a){e.CHM(t);const l=e.oxw();return l.generaOpzioni(),e.KtG(l.parametriService.setParametro("isVisualizzaCamerePaxNonValideChecked",a.checked))}),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.YNc(16,Nk,5,6,"mat-form-field",5),e.TgZ(17,"mat-tab-group",6),e.YNc(18,$k,5,5,"mat-tab",7),e.qZA(),e.TgZ(19,"div",8)(20,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onTariffeSelected())}),e._uU(21),e.ALo(22,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,11,"sbm.richieste.selezionaTariffe")," "),e.xp6(3),e.Q6J("ngModel",t.isVisualizzaTutteLeSoluzioni),e.xp6(1),e.Oqu(e.lcZ(7,13,"sbm.richieste.visualizzaTutteLeSoluzioni")),e.xp6(3),e.Q6J("ngModel",t.isVisualizzaSoloCamereDisponibili),e.xp6(1),e.Oqu(e.lcZ(11,15,"sbm.richieste.visualizzaSoloCamereDisponibili")),e.xp6(3),e.Q6J("ngModel",t.isVisualizzaCamerePaxNonValide),e.xp6(1),e.Oqu(e.lcZ(15,17,"sbm.richieste.visualizzaCamerePaxNonValide")),e.xp6(2),e.Q6J("ngIf",null!=t.codiciPromozione&&t.codiciPromozione.length>0),e.xp6(2),e.Q6J("ngForOf",t.opzioni),e.xp6(2),e.Q6J("disabled",t.creaPreventivoButtonDisabled),e.xp6(1),e.Oqu(e.lcZ(22,19,"sbm.richieste.creaPreventivo"))}}class dn extends f.H{constructor(o,t,n,a,l,r){super(),this.sessionService=o,this.apiService=t,this.localizationService=n,this.navigationService=a,this.containerService=l,this.parametriService=r,this.opzioni=[],this.selectedOpzioni=[],this.tariffeSelectedNumber=[],this.labels=[],this.noRates=[],this.creaPreventivoButtonDisabled=!0,this.initialized=!1,this.isVisualizzaTutteLeSoluzioni=!1,this.isVisualizzaSoloCamereDisponibili=!1,this.isVisualizzaCamerePaxNonValide=!1,this.codiciPromozione=[],this.enumStatoPreventivo=c.N4}ngOnInit(){this.setIsLoading(!0),this.isVisualizzaSoloCamereDisponibili=null!=this.parametriService.parametri.isControllaDisponibiliChecked&&this.parametriService.parametri.isControllaDisponibiliChecked,this.isVisualizzaCamerePaxNonValide=null!=this.parametriService.parametri.isVisualizzaCamerePaxNonValideChecked&&this.parametriService.parametri.isVisualizzaCamerePaxNonValideChecked,this.apiService.getCodiciPromozioneValidiRichiesta(this.richiesta.oid).subscribe(o=>{this.codiciPromozione=o.data,this.generaOpzioni()})}generaOpzioni(){var o;this.setIsLoading(!0);let t=new d.hp3;t.oidRichiesta=this.richiesta.oid,t.isVisualizzaTutteLeSoluzioni=this.isVisualizzaTutteLeSoluzioni,t.isVisualizzaSoloCamereDisponibili=this.isVisualizzaSoloCamereDisponibili,t.isVisualizzaCamerePaxNonValide=this.isVisualizzaCamerePaxNonValide,t.codicePromozione=null===(o=this.codicePromozione)||void 0===o?void 0:o.codice,this.apiService.generaOpzioni(t).subscribe(n=>{if(null!=n.data){this.opzioni=n.data,this.oidPortale=n.oidPortale;let Ze=0;this.tariffeSelectedNumber=[],this.selectedOpzioni=[],this.labels=[],this.noRates=[];for(let Je of this.opzioni){var a,l,r,p,T,L,G,W,be;this.selectedOpzioni.push([]);let $e=this.localizationService.getTranslationSync("sbm.richieste.adulti"),_t=this.localizationService.getTranslationSync("sbm.richieste.bambini");this.labels.push((null!==(a=Je.tipoCamera)&&void 0!==a&&a.codice?Je.tipoCamera.codice:"")+(null!==(l=Je.tipoCamera)&&void 0!==l&&l.codice&&null!==(r=Je.tariffa)&&void 0!==r&&r.codice?" - ":"")+(null!==(p=Je.tariffa)&&void 0!==p&&p.codice?null===(T=Je.tariffa)||void 0===T?void 0:T.codice:"")+((null!==(L=Je.tipoCamera)&&void 0!==L&&L.codice||null!==(G=Je.tariffa)&&void 0!==G&&G.codice)&&(Je.numeroAdulti>0||Je.numeroBambini>0)?" (":"")+(Je.numeroAdulti>0?Je.numeroAdulti+" "+$e:"")+(Je.numeroAdulti>0&&Je.numeroBambini>0?" - ":"")+(Je.numeroBambini>0?Je.numeroBambini+" "+_t:"")+((null!==(W=Je.tipoCamera)&&void 0!==W&&W.codice||null!==(be=Je.tariffa)&&void 0!==be&&be.codice)&&(Je.numeroAdulti>0||Je.numeroBambini>0)?")":""));let vt=0,Tt=!1;for(let Re of Je.opzioni){this.selectedOpzioni[Ze].push([]),Re.tariffe.length>0&&(Tt=!0);for(let Kt of Re.tariffe)this.selectedOpzioni[Ze][vt].push(!1);vt++}this.tariffeSelectedNumber.push(0),this.noRates.push(!Tt),Ze++}}this.initialized=!0,this.setIsLoading(!1)})}onTariffeSelected(){let o=JSON.parse(JSON.stringify(this.opzioni)),t=0;for(let n of this.selectedOpzioni){let a=0;for(let l of n){o[t].opzioni[a].tariffe=[];let r=0;for(let p of l)p&&o[t].opzioni[a].tariffe.push(this.opzioni[t].opzioni[a].tariffe[r]),r++;a++}t++}this.creaPreventivo(o)}creaPreventivo(o){var t;this.setIsLoading(!0);let n=new d.dFI;n.oidRichiesta=this.richiesta.oid,n.oidUtente=this.sessionService.getOidUtente(),n.oidCodicePromozione=null===(t=this.codicePromozione)||void 0===t?void 0:t.oid,n.opzioni=o,this.apiService.creaPreventivo(n).subscribe(a=>{null==a.data||null!=a.errori&&0!=a.errori.length?this.setIsLoading(!1):(this.navigationService.refreshContatoriMenu(),window.location.href="/sbm/home/(homeOutlet:preventivi)?oidPreventivo="+a.data.oidPreventivo)})}checkDisabledButton(){this.creaPreventivoButtonDisabled=!1;for(let o of this.tariffeSelectedNumber)if(o<=0){this.creaPreventivoButtonDisabled=!0;break}}nuovoPreventivo(){let o=new d.Zpt;o.width="70vw";let t=this.showModalDialog(Jt,o),n=t.componentInstance;n.oidPortale=this.oidPortale,n.dialogRef=t;let a=[];for(let l of this.opzioni){let r=new d.osD;r.numeroAdulti=l.numeroAdulti,r.numeroBambini=l.numeroBambini,r.tipoCamera=l.tipoCamera,r.tariffa=l.tariffa,a.push(r)}n.camere=a,t.afterClosed().subscribe(l=>{if(l){let r=[];for(let p of a){let T=new d.PP6;T.opzioni=[];let L=new d.rDl;L.roomId=p.tipoCamera.oid,L.tariffe=[];let G=new d.fnf;G.rateId=p.tariffa.oid,L.tariffe.push(G),T.opzioni.push(L),r.push(T)}this.creaPreventivo(r)}})}openDetails(o,t){let n=new d.Zpt;n.width="80vw",n.panelClass="dialog-overlay";let l=this.showModalDialog(wc.w,n).componentInstance;l.tariffa=t,l.tipoCamera=o,l.isVisualizzaDettaglioGiornaliero=!0}}function Vk(i,o){1&i&&(e.TgZ(0,"div",8)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.richieste.nessunSorgenteRichiesta")))}function Xk(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.sorgenteRichiesta.proprieta.campo")))}function jk(i,o){if(1&i&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Wk(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",23)(2,"mat-select",24),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.campo=a)}),e.YNc(3,jk,2,2,"mat-option",25),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.campo),e.xp6(1),e.Q6J("ngForOf",n.campi)}}function eS(i,o){1&i&&(e.TgZ(0,"mat-header-cell",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.sorgenteRichiesta.proprieta.valore")))}function tS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",27)(1,"mat-form-field",23)(2,"input",28),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.valore=a)}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.valore)}}function iS(i,o){1&i&&(e.TgZ(0,"mat-header-cell",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.sorgenteRichiesta.proprieta.mercato")))}function oS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",27)(1,"div",23)(2,"app-view-select",29),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.mercato=a)}),e.ALo(3,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("dataLoader",n.apiService.getParametriRicercaViewSelect(n.getParametriRicercaMercatoRQ))("title",e.lcZ(3,3,"bo.sorgenteRichiesta.proprieta.mercato"))("value",t.mercato)}}function nS(i,o){1&i&&(e.TgZ(0,"mat-header-cell",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.sorgenteRichiesta.proprieta.canaleVendita")))}function aS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",27)(1,"div",23)(2,"app-view-select",29),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.canaleVendita=a)}),e.ALo(3,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("dataLoader",n.apiService.getParametriRicercaViewSelect(n.getParametriRicercaCanaleVenditaRQ))("title",e.lcZ(3,3,"bo.sorgenteRichiesta.proprieta.canaleVendita"))("value",t.canaleVendita)}}function lS(i,o){1&i&&e._UZ(0,"mat-header-cell")}function rS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",30)(1,"button",31),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.delete(l))}),e.TgZ(2,"i",32),e._uU(3,"delete"),e.qZA()()()}}function cS(i,o){1&i&&e._UZ(0,"mat-header-row",33)}function sS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",34),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("hidden",t.isDeleted)("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function pS(i,o){if(1&i&&(e.TgZ(0,"div",9)(1,"mat-table",10),e.ynx(2,11),e.YNc(3,Xk,3,3,"mat-header-cell",12),e.YNc(4,Wk,4,2,"mat-cell",13),e.BQk(),e.ynx(5,14),e.YNc(6,eS,3,3,"mat-header-cell",15),e.YNc(7,tS,3,1,"mat-cell",16),e.BQk(),e.ynx(8,17),e.YNc(9,iS,3,3,"mat-header-cell",15),e.YNc(10,oS,4,5,"mat-cell",16),e.BQk(),e.ynx(11,18),e.YNc(12,nS,3,3,"mat-header-cell",15),e.YNc(13,aS,4,5,"mat-cell",16),e.BQk(),e.ynx(14,19),e.YNc(15,lS,1,0,"mat-header-cell",12),e.YNc(16,rS,4,0,"mat-cell",20),e.BQk(),e.YNc(17,cS,1,0,"mat-header-row",21),e.YNc(18,sS,1,2,"mat-row",22),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.sorgenti),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}dn.\u0275fac=function(o){return new(o||dn)(e.Y36(j.m),e.Y36(A.s),e.Y36(Oe.o),e.Y36(Ae.f),e.Y36(te.J),e.Y36(et))},dn.\u0275cmp=e.Xpm({type:dn,selectors:[["app-crea-preventivo"]],inputs:{richiesta:"richiesta",causaliOperazione:"causaliOperazione",dialogRef:"dialogRef"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[1,"mb-3"],["color","primary",3,"ngModel","ngModelChange","change"],["class","w-100 mt-2",4,"ngIf"],[1,"mt-3","dialog-tab-group"],[3,"label",4,"ngFor","ngForOf"],[1,"text-right","mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],[1,"w-100","mt-2"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"label"],[1,"mt-3"],["class","p-3 border crea-preventivo-container",4,"ngIf"],[4,"ngFor","ngForOf"],["class","crea-preventivo-container border pr-3 pl-3 pt-3 mb-2",4,"ngIf"],[1,"crea-preventivo-container","border","pr-3","pl-3","pt-3","mb-2"],[1,"font-small","font-italic","font-weight-bold"],[1,"d-inline-block","mr-2"],[1,"d-inline-block"],[1,"font-small","font-italic","font-weight-bold","mb-3"],["class","row row-tariffa",3,"ngClass",4,"ngFor","ngForOf"],[1,"row","row-tariffa",3,"ngClass"],[1,"col-4"],[1,"text-nowrap"],[1,"d-inline-block","align-middle","mr-1","text-wrap"],["mat-icon-button","",1,"info-button","align-middle",3,"click"],[1,"material-icons","info-icon"],["class","color-red",4,"ngIf"],[1,"col-4","text-center"],["class","prezzo",4,"ngIf"],[3,"ngClass"],["class","sconto",4,"ngIf"],[1,"color-red"],[1,"prezzo"],[1,"sconto"],[1,"p-3","border","crea-preventivo-container"],[1,"d-inline-block","mb-0"],[1,"d-inline-block","float-right","mt-n1"],["mat-flat-button","","color","blank",3,"disabled","click"],[1,"causali-button",3,"matMenuTriggerFor"],["causaliMenuButton",""],["causaliMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",1,"float-right","mt-n1","mr-1",3,"click"],["mat-menu-item","",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,Bk,23,21,"ng-container",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.initialized))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,M.v_,re.CK,g.x8,Ie.W0,Ie.tN,Ie.D8,ee.SK,ee.R7,F.aO,_.JJ,_.On,ke.f,z.X$],styles:[".crea-preventivo-container[_ngcontent-%COMP%]{border-radius:7px}.prezzo-sconto[_ngcontent-%COMP%]{color:#aaa;text-decoration:line-through;font-size:13px}.prezzo[_ngcontent-%COMP%]{font-weight:700}.sconto[_ngcontent-%COMP%]{color:#e91e63;font-size:12px}.color-red[_ngcontent-%COMP%]{color:#d9534f}.row-tariffa[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc;padding-top:1rem;padding-bottom:1rem}.info-button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px}.info-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.causali-button[_ngcontent-%COMP%]{visibility:hidden!important;width:0!important;height:0!important;padding:0!important;margin:0!important;border:0!important}"]});class mn extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.displayedColumns=["campo","valore","mercato","canaleVendita","delete"],this.campi=["utm_source","utm_medium","utm_campaign","url"],this.sorgenti=[],this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento"))}ngOnInit(){this.setIsLoading(!0),this.apiService.getSorgentiRichiesta().subscribe(o=>{this.sorgenti=o.data,this.setIsLoading(!1)})}add(){let o=new v.ONz;o.albergo=new v.Z$(this.sessionService.getOidAlbergo()),o.campo=this.campi[0],this.sorgenti.push(o),this.sorgenti=this.sorgenti.slice()}delete(o){this.showDialogConfirm("sbm.richieste.eliminareSorgenteRichiesta").then(t=>{let n=this.sorgenti[o];n.oid>0?n.isDeleted=!0:this.sorgenti.splice(o,1),this.sorgenti=this.sorgenti.slice()},t=>{})}save(){this.setIsLoading(!0),this.apiService.setSorgentiRichiesta(this.sorgenti).subscribe(()=>{this.setIsLoading(!1),this.dialogRef.close()})}getSorgentiCount(){return this.sorgenti.filter(o=>!o.isDeleted).length}}mn.\u0275fac=function(o){return new(o||mn)(e.Y36(A.s),e.Y36(j.m))},mn.\u0275cmp=e.Xpm({type:mn,selectors:[["app-sorgenti-richiesta"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:12,vars:6,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],["class","border rounded-lg mat-elevation-z1 p-4",4,"ngIf"],["class","mat-table-container-border-rounded",4,"ngIf"],[1,"mt-4","text-right"],["mat-flat-button","","color","primary",3,"click"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","campo"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","valore"],["class","pl-3",4,"matHeaderCellDef"],["class","pl-3",4,"matCellDef"],["matColumnDef","mercato"],["matColumnDef","canaleVendita"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"hidden","matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"w-100"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"pl-3"],["autocompleteOff","","type","text","matInput","",3,"ngModel","ngModelChange"],["displayMember","descrizione",3,"dataLoader","title","value","valueChange"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"hidden","matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",3),e._uU(5,"add"),e.qZA()(),e.YNc(6,Vk,4,3,"div",4),e.YNc(7,pS,19,4,"div",5),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return t.save()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.Q6J("ngIf",0==t.getSorgentiCount()),e.xp6(1),e.Q6J("ngIf",t.getSorgentiCount()>0),e.xp6(3),e.Oqu(e.lcZ(11,4,"globals.salva")))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.JJ,_.On,ne.d,z.X$]});var dS=Y(44537);function mS(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function _S(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.Oqu(" ("))}function uS(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.numeroAdulti+" "+e.lcZ(2,1,"sbm.richieste.adulti"))}}function gS(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.Oqu(" - "))}function hS(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.numeroBambini+" "+e.lcZ(2,1,"sbm.richieste.bambini"))}}function fS(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(" ("+t.etaBambini+" "+e.lcZ(2,1,"sbm.richieste.anni")+")")}}function CS(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.Oqu(")"))}function bS(i,o){if(1&i&&(e.TgZ(0,"li"),e.YNc(1,mS,2,1,"span",0),e.YNc(2,_S,2,1,"span",0),e.YNc(3,uS,3,3,"span",0),e.YNc(4,gS,2,1,"span",0),e.YNc(5,hS,3,3,"span",0),e.YNc(6,fS,3,3,"span",0),e.YNc(7,CS,2,1,"span",0),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.descrizione),e.xp6(1),e.Q6J("ngIf",!!t.descrizione&&(t.numeroAdulti>0||t.numeroBambini>0)),e.xp6(1),e.Q6J("ngIf",t.numeroAdulti>0),e.xp6(1),e.Q6J("ngIf",t.numeroAdulti>0&&t.numeroBambini>0),e.xp6(1),e.Q6J("ngIf",t.numeroBambini>0),e.xp6(1),e.Q6J("ngIf",!!t.etaBambini),e.xp6(1),e.Q6J("ngIf",!!t.descrizione&&(t.numeroAdulti>0||t.numeroBambini>0))}}function vS(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",31),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ul",32),e.YNc(5,bS,8,7,"li",33),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.richieste.camere")," "),e.xp6(3),e.Q6J("ngForOf",t.camere)}}function TS(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",34),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",8)(5,"mat-form-field",9)(6,"textarea",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.noteOriginali=a)}),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.richiesta.proprieta.noteOriginali")),e.xp6(4),e.Q6J("ngModel",t.richiesta.noteOriginali)}}function xS(i,o){if(1&i&&(e.TgZ(0,"div",51),e._UZ(1,"app-storico-cliente",52),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("oidCliente",t.richiesta.cliente.oid)}}function ZS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-group",35),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.tabIndex=a)}),e.TgZ(1,"mat-tab",36),e.ALo(2,"translate"),e.TgZ(3,"mat-card",37)(4,"mat-card-content",38)(5,"div",2)(6,"div",39)(7,"mat-form-field",5)(8,"input",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.cognome=a)}),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",39)(11,"mat-form-field",5)(12,"input",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.nome=a)}),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",39)(15,"mat-form-field",5)(16,"input",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.email=a)}),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",39)(19,"mat-form-field",5)(20,"input",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.cellulare=a)}),e.ALo(21,"translate"),e.qZA()()()(),e.TgZ(22,"div",2)(23,"div",41)(24,"app-view-select",42),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.lingua=a)}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",41)(27,"app-view-select",43),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.mercato=a)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",41)(30,"app-view-select",43),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.canaleVendita=a)}),e.ALo(31,"translate"),e.qZA()()(),e.TgZ(32,"div"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"div",8)(36,"mat-form-field",44)(37,"textarea",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.interessi=a)}),e.qZA()()(),e.TgZ(38,"div",46)(39,"div",3)(40,"mat-checkbox",47),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.privacy=a)}),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"div",3)(44,"mat-checkbox",47),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.richiesta.cliente.newsletter=a)}),e._uU(45),e.ALo(46,"translate"),e.qZA()()(),e.TgZ(47,"div",23)(48,"button",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sendEmail())}),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"button",49),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sendSms())}),e._uU(52),e.ALo(53,"translate"),e.qZA()()()()(),e.TgZ(54,"mat-tab",36),e.ALo(55,"translate"),e.YNc(56,xS,2,1,"div",50),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("selectedIndex",t.tabIndex),e.xp6(1),e.Q6J("label",e.lcZ(2,31,"globals.cliente")),e.xp6(7),e.s9C("placeholder",e.lcZ(9,33,"bo.cliente.proprieta.cognome")),e.Q6J("ngModel",t.richiesta.cliente.cognome),e.xp6(4),e.s9C("placeholder",e.lcZ(13,35,"bo.cliente.proprieta.nome")),e.Q6J("ngModel",t.richiesta.cliente.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(17,37,"bo.cliente.proprieta.email")),e.Q6J("ngModel",t.richiesta.cliente.email),e.xp6(4),e.s9C("placeholder",e.lcZ(21,39,"bo.cliente.proprieta.cellulare")),e.Q6J("ngModel",t.richiesta.cliente.cellulare),e.xp6(4),e.Q6J("dataLoader",t.apiService.getLingueViewSelect())("value",t.richiesta.cliente.lingua)("placeholder",e.lcZ(25,41,"bo.cliente.proprieta.lingua")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaMercatoRQ))("value",t.richiesta.cliente.mercato)("placeholder",e.lcZ(28,43,"bo.cliente.proprieta.mercato")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaCanaleVenditaRQ))("value",t.richiesta.cliente.canaleVendita)("placeholder",e.lcZ(31,45,"bo.cliente.proprieta.canaleVendita")),e.xp6(3),e.Oqu(e.lcZ(34,47,"bo.cliente.proprieta.interessi")),e.xp6(4),e.Q6J("ngModel",t.richiesta.cliente.interessi),e.xp6(3),e.Q6J("ngModel",t.richiesta.cliente.privacy),e.xp6(1),e.Oqu(e.lcZ(42,49,"bo.cliente.proprieta.privacy")),e.xp6(3),e.Q6J("ngModel",t.richiesta.cliente.newsletter),e.xp6(1),e.Oqu(e.lcZ(46,51,"bo.cliente.proprieta.newsletter")),e.xp6(3),e.Q6J("disabled",!t.richiesta.cliente.email),e.xp6(1),e.Oqu(e.lcZ(50,53,"sbm.richieste.inviaEmail")),e.xp6(2),e.Q6J("disabled",!t.richiesta.cliente.cellulare),e.xp6(1),e.Oqu(e.lcZ(53,55,"sbm.richieste.inviaSms")),e.xp6(2),e.Q6J("label",e.lcZ(55,57,"globals.storico")),e.xp6(2),e.Q6J("ngIf",1==t.tabIndex)}}function AS(i,o){if(1&i&&(e.TgZ(0,"span",57),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex),e.Q6J("appInvertColor",t.coloreHex),e.xp6(1),e.Oqu(t.descrizione)}}function wS(i,o){if(1&i&&(e.TgZ(0,"mat-card",53)(1,"mat-card-title",54),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card-content",55),e.YNc(5,AS,2,4,"span",56),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.richieste.automatismiEseguiti")," "),e.xp6(3),e.Q6J("ngForOf",t.workFlowsEseguiti)}}function zS(i,o){if(1&i&&(e.TgZ(0,"div",58),e._UZ(1,"app-url",59),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("placeholder",e.lcZ(2,2,"bo.richiesta.proprieta.urlRichiesta"))("url",t.richiesta.urlRichiesta)}}const MS=function(i){return{"mt-4":i}};function qS(i,o){if(1&i&&(e.TgZ(0,"div",60),e._UZ(1,"app-url",59),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(5,MS,!t.richiesta.urlRichiesta)),e.xp6(1),e.Q6J("placeholder",e.lcZ(2,3,"bo.richiesta.proprieta.urlReferrer"))("url",t.richiesta.urlReferrer)}}function PS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onCausaleClick(r.richiesta,l))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function kS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.apriPreventivoEvent.emit(a.richiesta.preventivo.oid))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.richieste.apriPreventivo")))}function SS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.creaPreventivo(a.richiesta))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.richieste.creaPreventivo")))}function yS(i,o){if(1&i&&(e.ynx(0),e.YNc(1,kS,3,3,"button",62),e.YNc(2,SS,3,3,"button",62),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null!=t.richiesta.preventivo),e.xp6(1),e.Q6J("ngIf",null==t.richiesta.preventivo)}}function JS(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",2)(8,"div",3)(9,"mat-form-field",5),e._UZ(10,"input",6),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",3)(13,"mat-form-field",5),e._UZ(14,"input",6),e.ALo(15,"translate"),e.ALo(16,"translate"),e.qZA()()(),e.TgZ(17,"div",2)(18,"div",3)(19,"mat-form-field",5),e._UZ(20,"input",6),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",3)(23,"mat-form-field",5),e._UZ(24,"input",6),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"mat-form-field",5),e._UZ(27,"input",6),e.ALo(28,"translate"),e.qZA(),e.YNc(29,vS,6,4,"ng-container",0),e.TgZ(30,"div",7),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",8)(34,"mat-form-field",9)(35,"textarea",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.richiesta.note=a)}),e.qZA()()(),e.YNc(36,TS,7,4,"ng-container",0),e.TgZ(37,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editPax())}),e.TgZ(38,"i",12),e._uU(39,"edit"),e.qZA(),e._uU(40),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"div",3)(43,"div",13)(44,"h4",14),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.utility.openUrlInNewTab("https://support.google.com/analytics/answer/1033863"))}),e.TgZ(48,"span",16),e._uU(49,"help"),e.qZA()()(),e.TgZ(50,"div")(51,"div",7),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"div"),e._uU(55),e.qZA()(),e.TgZ(56,"div",17)(57,"div",7),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"div"),e._uU(61),e.qZA()(),e.TgZ(62,"div",17)(63,"div",7),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"div"),e._uU(67),e.qZA()(),e.TgZ(68,"div",17)(69,"div",7),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"div"),e._uU(73),e.qZA()(),e.TgZ(74,"div",17)(75,"div",7),e._uU(76),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"div"),e._uU(79),e.qZA()(),e.TgZ(80,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.configuraSorgentiRichiesta())}),e.TgZ(81,"i",12),e._uU(82,"settings"),e.qZA(),e._uU(83),e.ALo(84,"translate"),e.qZA()()()(),e.YNc(85,ZS,57,59,"mat-tab-group",19),e.YNc(86,wS,6,4,"mat-card",20),e.YNc(87,zS,3,4,"div",21),e.YNc(88,qS,3,7,"div",22),e.TgZ(89,"div",23)(90,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(94),e.ALo(95,"translate"),e.qZA(),e.TgZ(96,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(100),l=e.oxw();return e.KtG(null==l.causaliOperazione||0==l.causaliOperazione.length?l.rifiuta(l.richiesta):a.click())}),e._uU(97),e.ALo(98,"translate"),e.qZA(),e._UZ(99,"button",27,28),e.TgZ(101,"mat-menu",null,29),e.YNc(103,PS,2,1,"button",30),e.qZA(),e.TgZ(104,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backEvent.emit())}),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.YNc(107,yS,3,2,"ng-container",0),e.qZA(),e.BQk()}if(2&i){const t=e.MAs(102),n=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,42,"sbm.richieste.richiesta")),e.xp6(5),e.s9C("placeholder",e.lcZ(11,44,"bo.richiesta.proprieta.portaleXAlbergo")),e.Q6J("value",null!=n.richiesta.portaleXAlbergo?n.richiesta.portaleXAlbergo.nome:"---"),e.xp6(4),e.s9C("placeholder",e.lcZ(15,46,"bo.richiesta.proprieta.tipoRichiesta")),e.Q6J("value",e.lcZ(16,48,n.getEnumKeyTranslation(n.enumTipoRichiesta,n.richiesta.tipoRichiesta,"tipoRichiestaPreventivo"))),e.xp6(6),e.s9C("placeholder",e.lcZ(21,50,"bo.richiesta.proprieta.dal")),e.Q6J("value",n.richiesta.dal),e.xp6(4),e.s9C("placeholder",e.lcZ(25,52,"bo.richiesta.proprieta.al")),e.Q6J("value",n.richiesta.al),e.xp6(3),e.s9C("placeholder",e.lcZ(28,54,"bo.richiesta.proprieta.motivoViaggio")),e.Q6J("value",null!=n.richiesta.motivoViaggio?n.richiesta.motivoViaggio.nome:"---"),e.xp6(2),e.Q6J("ngIf",null!=n.camere&&n.camere.length>0),e.xp6(2),e.Oqu(e.lcZ(32,56,"bo.richiesta.proprieta.note")),e.xp6(4),e.Q6J("ngModel",n.richiesta.note),e.xp6(1),e.Q6J("ngIf",!!n.richiesta.noteOriginali&&n.richiesta.noteOriginali!=n.richiesta.note),e.xp6(1),e.Q6J("disabled",n.isPreventivoPrenotato()),e.xp6(3),e.hij(" ",e.lcZ(41,58,"sbm.richieste.modifica"),""),e.xp6(5),e.Oqu(e.lcZ(46,60,"sbm.richieste.canaleDiAcquisizione")),e.xp6(7),e.Oqu(e.lcZ(53,62,"bo.richiesta.proprieta.urlRichiesta")),e.xp6(3),e.Oqu(n.richiesta.urlRichiesta?n.richiesta.urlRichiesta:"---"),e.xp6(3),e.Oqu(e.lcZ(59,64,"bo.richiesta.proprieta.urlReferrer")),e.xp6(3),e.Oqu(n.richiesta.urlReferrer?n.richiesta.urlReferrer:"---"),e.xp6(3),e.Oqu(e.lcZ(65,66,"bo.richiesta.proprieta.UTMSource")),e.xp6(3),e.Oqu(n.richiesta.UTMSource?n.richiesta.UTMSource:"---"),e.xp6(3),e.Oqu(e.lcZ(71,68,"bo.richiesta.proprieta.UTMMedium")),e.xp6(3),e.Oqu(n.richiesta.UTMMedium?n.richiesta.UTMMedium:"---"),e.xp6(3),e.Oqu(e.lcZ(77,70,"bo.richiesta.proprieta.UTMCampaign")),e.xp6(3),e.Oqu(n.richiesta.UTMCampaign?n.richiesta.UTMCampaign:"---"),e.xp6(4),e.hij(" ",e.lcZ(84,72,"sbm.richieste.configura"),""),e.xp6(2),e.Q6J("ngIf",null!=n.richiesta.cliente),e.xp6(1),e.Q6J("ngIf",null!=n.workFlowsEseguiti&&n.workFlowsEseguiti.length>0),e.xp6(1),e.Q6J("ngIf",!!n.richiesta.urlRichiesta),e.xp6(1),e.Q6J("ngIf",!!n.richiesta.urlReferrer),e.xp6(2),e.Q6J("disabled",null==n.richiesta.cliente),e.xp6(1),e.Oqu(e.lcZ(92,74,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(95,76,"globals.elimina")),e.xp6(2),e.Q6J("disabled",null==n.richiesta.cliente||null!=n.richiesta.causaleRifiuto||null!=n.richiesta.preventivo&&n.richiesta.preventivo.statoPreventivo==n.enumStatoPreventivo.Rifiutato),e.xp6(1),e.Oqu(e.lcZ(98,78,"sbm.richieste.rifiuta")),e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(4),e.Q6J("ngForOf",n.causaliOperazione),e.xp6(2),e.Oqu(e.lcZ(106,80,"globals.annulla")),e.xp6(2),e.Q6J("ngIf",!n.richiesta.isDayUse)}}class _n extends f.H{set richiestaModel(o){null!=o&&(this.setIsLoading(!0),this.tabIndex=0,this.richiesta=o,this.richiesta.dal=this.getDate(this.richiesta.dal),this.richiesta.al=this.getDate(this.richiesta.al),this.camere=[],this.workFlowsEseguiti=[],this.apiService.getRichiestaDetails(this.richiesta.oid).subscribe(t=>{this.pax=t.data.pax,this.camere=t.data.camere,this.richiesta.camere=t.data.camereRichiesta,this.workFlowsEseguiti=t.data.workFlowsEseguiti;try{for(let n of this.workFlowsEseguiti)n.coloreHex=Z(n.colore).hex()}catch(n){}this.setIsLoading(!1)}))}constructor(o,t,n,a){super(),this.apiService=o,this.navigationService=t,this.sessionService=n,this.utility=a,this.backEvent=new e.vpe,this.apriPreventivoEvent=new e.vpe,this.causaliOperazione=[],this.enumStatoPreventivo=c.N4,this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.enumTipoRichiesta=c.GY,this.tabIndex=0,this.modificaPreventivoInviatoEnabled=!0}ngOnInit(){let o=d.k$g.fromFilters([new d.wn$("tipoCausaleOperazione",c.Hp.Equal,c.pg.RichiestaRifiutata.toString(),c.NM.Number),new d.wn$("isAttiva",c.Hp.IsTrue)]);this.apiService.getCausaliOperazioneFilter(o).subscribe(n=>{this.causaliOperazione=n.data});let t=this.sessionService.getPermessiUtente();null!=t&&(this.modificaPreventivoInviatoEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaPreventivoInviato)))}save(){this.setIsLoading(!0),this.apiService.setCliente(this.richiesta.cliente).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.richieste.richiestaSalvata").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.richieste.eliminareRichiesta").then(t=>{null!=o&&(this.richiesta=o),this.richiesta.isDeleted=!0,this.setIsLoading(!0),this.apiService.setRichiesta(this.richiesta).subscribe(()=>{this.navigationService.refreshContatoriMenu(),this.backEvent.emit()})},t=>{})}onCausaleClick(o,t){this.rifiuta(o,t)}rifiuta(o,t){if(!o.cliente.email||null!=t&&null==t.template){this.setIsLoading(!0);let n=new d.KMg;n.oidRichiesta=o.oid,n.oidCausale=null!=t?t.oid:-1,this.apiService.rifiutaRichiesta(n).subscribe(()=>{this.setIsLoading(!1),this.navigationService.refreshContatoriMenu(),this.showInfo("sbm.richieste.richiestaRifiutata").then(()=>{this.backEvent.emit()})})}else{let n=new d.Zpt;n.width="50vw";let a=this.showModalDialog(Qe,n),l=a.componentInstance;l.tipoTemplate=c.hQ.RichiestaRifiutata,l.richiesta=o,l.causale=t,l.dialogRef=a,a.afterClosed().subscribe(r=>{r&&this.backEvent.emit()})}}sendEmail(){if(null!=this.richiesta.cliente){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;n.cliente=this.richiesta.cliente,n.dialogRef=t}}sendSms(){if(null!=this.richiesta.cliente){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(ct,o),n=t.componentInstance;n.numero=this.richiesta.cliente.cellulare,n.dialogRef=t}}editPax(){let o=new d.Zpt;o.width="50vw",o.minHeight="30vh";let t=this.showModalDialog(fi,o),n=t.componentInstance;n.richiesta=JSON.parse(JSON.stringify(this.richiesta)),n._camere=this.pax,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&(this.richiestaModel=a)})}configuraSorgentiRichiesta(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog(mn,o);t.componentInstance.dialogRef=t}isPreventivoPrenotato(){return null!=this.richiesta.preventivo&&(this.richiesta.preventivo.statoPreventivo==c.N4.Accettato||this.richiesta.preventivo.statoPreventivo==c.N4.InAttesaPagamento||this.richiesta.preventivo.statoPreventivo==c.N4.Prenotato||!this.modificaPreventivoInviatoEnabled&&this.richiesta.preventivo.statoPreventivo==c.N4.Inviato)}creaPreventivo(o){let t=new d.Zpt;t.width="50vw",t.minHeight="50vh";let n=this.showModalDialog(dn,t),a=n.componentInstance;a.richiesta=o,a.causaliOperazione=this.causaliOperazione,a.dialogRef=n,n.afterClosed().subscribe(l=>{null!=l&&(l.oid>0?this.onCausaleClick(o,l):this.rifiuta(o))})}}function ES(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",37)(2,"div",38)(3,"mat-card",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onRichiesteDaGestireClick())}),e.TgZ(4,"mat-card-title",40),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"mat-card-content",41),e._uU(8),e.qZA()()(),e.TgZ(9,"div",42)(10,"mat-card",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onRichiesteConPreventivoClick())}),e.TgZ(11,"mat-card-title",43),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"mat-card-content",41),e._uU(15),e.qZA()()(),e.TgZ(16,"div",44)(17,"mat-card",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onRichiesteRifiutateClick())}),e.TgZ(18,"mat-card-title",45),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-card-content",41),e._uU(22),e.qZA()()()(),e.TgZ(23,"div",46)(24,"div",47)(25,"div",48)(26,"div",49)(27,"div",50)(28,"mat-form-field",51)(29,"input",52),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(0,l.getDate(a.value)))}),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"mat-datepicker-toggle",53)(32,"mat-datepicker",null,54),e.qZA()(),e.TgZ(34,"div",50)(35,"mat-form-field",51)(36,"input",52),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(1,l.getDate(a.value)))}),e.ALo(37,"translate"),e.qZA(),e._UZ(38,"mat-datepicker-toggle",53)(39,"mat-datepicker",null,55),e.qZA()(),e.TgZ(41,"div",50)(42,"mat-form-field",51)(43,"input",52),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(2,l.getDate(a.value)))}),e.ALo(44,"translate"),e.qZA(),e._UZ(45,"mat-datepicker-toggle",53),e.TgZ(46,"mat-datepicker-toggle",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.filters[2].value="",e.KtG(a.onSearch(2,""))}),e.TgZ(47,"mat-icon",57),e._uU(48,"clear"),e.qZA()(),e._UZ(49,"mat-datepicker",null,58),e.qZA()(),e.TgZ(51,"div",50)(52,"mat-form-field",51)(53,"input",52),e.NdJ("dateChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(3,l.getDate(a.value)))}),e.ALo(54,"translate"),e.qZA(),e._UZ(55,"mat-datepicker-toggle",53),e.TgZ(56,"mat-datepicker-toggle",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.filters[3].value="",e.KtG(a.onSearch(3,""))}),e.TgZ(57,"mat-icon",57),e._uU(58,"clear"),e.qZA()(),e._UZ(59,"mat-datepicker",null,59),e.qZA()()(),e.TgZ(61,"div",49)(62,"div",50)(63,"app-view-select",60),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(10,-1==a.oid?"":a.oid.toString()))}),e.ALo(64,"translate"),e.qZA()(),e.TgZ(65,"div",50)(66,"mat-form-field",51)(67,"input",61,62),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(68),l=e.oxw();return e.KtG(l.onSearch(4,a.value,null,!1))}),e.ALo(69,"translate"),e.qZA()()(),e.TgZ(70,"div",50)(71,"mat-form-field",51)(72,"input",61,63),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(73),l=e.oxw();return e.KtG(l.onSearch(5,a.value,null,!1))}),e.ALo(74,"translate"),e.qZA()()(),e.TgZ(75,"div",50)(76,"mat-form-field",51)(77,"input",61,64),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(78),l=e.oxw();return e.KtG(l.onSearch(11,a.value,null,!1))}),e.ALo(79,"translate"),e.qZA()()()()(),e.TgZ(80,"div",50)(81,"div",65)(82,"span",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showFilterAdv=!a.showFilterAdv)}),e._uU(83),e.ALo(84,"translate"),e.qZA(),e.TgZ(85,"button",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showFilterAdv=!a.showFilterAdv)}),e.TgZ(86,"mat-icon"),e._uU(87,"keyboard_arrow_down"),e.qZA()()(),e.TgZ(88,"div",68)(89,"mat-checkbox",69),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(6,a.checked?l.getDate(l.today):""))}),e._uU(90),e.ALo(91,"translate"),e.qZA()(),e.TgZ(92,"div")(93,"mat-checkbox",69),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(9,null,a.checked))}),e._uU(94),e.ALo(95,"translate"),e.qZA()()()(),e.TgZ(96,"div",70)(97,"div",49)(98,"div",71)(99,"app-view-select",72),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(7,-1==a.oid?"":a.oid.toString()))}),e.ALo(100,"translate"),e.qZA()(),e.TgZ(101,"div",71)(102,"mat-checkbox",73),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(8,null,!a.checked))}),e._uU(103),e.ALo(104,"translate"),e.qZA()()()()(),e.BQk()}if(2&i){const t=e.MAs(33),n=e.MAs(40),a=e.MAs(50),l=e.MAs(60),r=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,40,"sbm.richieste.daGestire")," "),e.xp6(3),e.hij(" ",r.richiesteDaGestire," "),e.xp6(4),e.hij(" ",e.lcZ(13,42,"sbm.richieste.conPreventivo")," "),e.xp6(3),e.hij(" ",r.richiesteConPreventivo," "),e.xp6(4),e.hij(" ",e.lcZ(20,44,"sbm.richieste.rifiutate")," "),e.xp6(3),e.hij(" ",r.richiesteRifiutate," "),e.xp6(7),e.s9C("placeholder",e.lcZ(30,46,"sbm.richieste.dataRichiestaDal")),e.Q6J("matDatepicker",t)("value",r.filters[0].value),e.xp6(2),e.Q6J("for",t),e.xp6(5),e.s9C("placeholder",e.lcZ(37,48,"sbm.richieste.dataRichiestaAl")),e.Q6J("matDatepicker",n)("value",r.filters[1].value),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(44,50,"sbm.richieste.arrivoDal")),e.Q6J("matDatepicker",a)("value",r.filters[2].value),e.xp6(2),e.Q6J("for",a),e.xp6(8),e.s9C("placeholder",e.lcZ(54,52,"sbm.richieste.arrivoAl")),e.Q6J("matDatepicker",l)("value",r.filters[3].value),e.xp6(2),e.Q6J("for",l),e.xp6(8),e.Q6J("dataLoader",r.apiService.getPortaliXAlbergoViewSelect(r.getPortaliRQ))("placeholder",e.lcZ(64,54,"globals.portale")),e.xp6(4),e.s9C("placeholder",e.lcZ(69,56,"bo.richiesta.proprieta.cognome")),e.Q6J("value",r.filters[4].value),e.xp6(5),e.s9C("placeholder",e.lcZ(74,58,"bo.richiesta.proprieta.email")),e.Q6J("value",r.filters[5].value),e.xp6(5),e.s9C("placeholder",e.lcZ(79,60,"bo.richiesta.proprieta.source")),e.Q6J("value",r.filters[11].value),e.xp6(6),e.Oqu(e.lcZ(84,62,"globals.filtriAvanzati")),e.xp6(6),e.Q6J("checked",!!r.filters[6].value),e.xp6(1),e.hij(" ",e.lcZ(91,64,"sbm.richieste.clientiCheDevonoArrivare")," "),e.xp6(3),e.Q6J("checked",r.filters[9].active),e.xp6(1),e.hij(" ",e.lcZ(95,66,"sbm.richieste.richiesteSenzaPreventivo")," "),e.xp6(2),e.Q6J("hidden",!r.showFilterAdv),e.xp6(3),e.Q6J("dataLoader",r.apiService.getCausaliOperazioneViewSelect())("placeholder",e.lcZ(100,68,"bo.richiesta.proprieta.causaleRifiuto")),e.xp6(3),e.Q6J("checked",!r.filters[8].active),e.xp6(1),e.hij(" ",e.lcZ(104,70,"sbm.richieste.includiRichiesteRifiutate")," ")}}function NS(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",75)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.richieste.nessunaRichiesta")))}function OS(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-checkbox",74),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.isVisualizzaUrlRichiesta=a)})("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.parametriService.setParametro("isVisualizzaUrlRichiesta",a.checked))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,NS,8,3,"div",2),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.isVisualizzaUrlRichiesta),e.xp6(1),e.Oqu(e.lcZ(3,3,"sbm.richieste.isVisualizzaUrlRichiesta")),e.xp6(2),e.Q6J("ngIf",t.showTable&&0==t.data.length)}}function LS(i,o){1&i&&e._UZ(0,"mat-header-cell")}function DS(i,o){1&i&&(e.TgZ(0,"button",78)(1,"i",79),e._uU(2,"edit"),e.qZA()())}function IS(i,o){if(1&i&&(e.TgZ(0,"mat-cell",76),e.YNc(1,DS,3,0,"button",77),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function QS(i,o){1&i&&e._UZ(0,"mat-header-cell")}_n.\u0275fac=function(o){return new(o||_n)(e.Y36(A.s),e.Y36(Ae.f),e.Y36(j.m),e.Y36(C.t))},_n.\u0275cmp=e.Xpm({type:_n,selectors:[["app-richieste-edit"]],inputs:{richiestaModel:"richiestaModel"},outputs:{backEvent:"backEvent",apriPreventivoEvent:"apriPreventivoEvent"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"border","rounded","p-3","mb-3","bg-white"],[1,"row"],[1,"col-6"],[1,"mb-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"placeholder","value"],[1,"note"],[1,"w-100","border","rounded","p-3"],[1,"w-100","note-richiesta-textarea"],["matInput","","rows","5","readonly","",3,"ngModel","ngModelChange"],["mat-button","","color","primary",1,"mt-3","pl-0",3,"disabled","click"],[1,"material-icons","icon-md20","mb-1"],[1,"mb-3"],[1,"align-middle","d-inline-block","mb-1"],["mat-icon-button","",1,"align-middle",3,"click"],[1,"material-icons","help-icon"],[1,"mt-2"],["mat-button","","color","primary",1,"mt-3","pl-0",3,"click"],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["class","mt-3 mat-elevation-z1 border p-0",4,"ngIf"],["class","mt-4",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"mt-3"],["id","richiesta-save-button","mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"disabled","click"],[1,"causali-button",3,"matMenuTriggerFor"],["causaliMenuButton",""],["causaliMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"font-weight-bold"],[1,"pl-4"],[4,"ngFor","ngForOf"],[1,"note","mt-3"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],[1,"border","mat-elevation-z0","p-0","mt-3"],[1,"p-3"],[1,"col-3"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-4"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],[1,"w-100","textarea"],["matInput","","rows","5",3,"ngModel","ngModelChange"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","primary",3,"disabled","click"],["class","mt-3 storico-container",4,"ngIf"],[1,"mt-3","storico-container"],[3,"oidCliente"],[1,"mt-3","mat-elevation-z1","border","p-0"],[1,"p-3","mb-0"],[1,"pr-3","pl-3","pb-3"],["class","mr-2 mb-2 p-2 rounded-lg",3,"backgroundColor","appInvertColor",4,"ngFor","ngForOf"],[1,"mr-2","mb-2","p-2","rounded-lg",3,"appInvertColor"],[1,"mt-4"],[3,"placeholder","url"],[3,"ngClass"],["mat-menu-item","",3,"click"],["mat-flat-button","","color","blank",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"]],template:function(o,t){1&o&&e.YNc(0,JS,108,82,"ng-container",0),2&o&&e.Q6J("ngIf",null!=t.richiesta)},dependencies:[m.mk,m.sg,m.O5,k.Z,w.X,V.FC,h.eB,M.v_,b.k0,Ie.W0,Ie.tN,Ie.D8,qe.S$,qe.Qi,qe.mi,ee.SK,ee.R7,_.Fj,_.JJ,_.On,ne.d,dS.g,Be,z.X$],styles:[".causali-button[_ngcontent-%COMP%]{visibility:hidden!important;width:0!important;height:0!important;padding:0!important;margin:0!important;border:0!important}  .note-richiesta-textarea .mat-form-field-underline{visibility:hidden!important}  .note-richiesta-textarea .mat-form-field-wrapper{padding-bottom:0!important}  .note-richiesta-textarea .mat-form-field-infix{padding:0!important;border:0!important}textarea[_ngcontent-%COMP%]{resize:none}.storico-container[_ngcontent-%COMP%]{min-height:350px}.note[_ngcontent-%COMP%]{font-size:12px;color:#0000008a}"]});const US=function(i){return{color:i}};function YS(i,o){if(1&i&&(e.TgZ(0,"span",82),e._uU(1,"star"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("ngStyle",e.VKq(1,US,t.flag==n.enumFlagRichiesta.Rosso?"#eb5655":t.flag==n.enumFlagRichiesta.Verde?"#4dbb69":"#f4d125"))}}function RS(i,o){if(1&i&&(e.TgZ(0,"mat-cell",80),e.YNc(1,YS,2,3,"span",81),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.flag!=n.enumFlagRichiesta.Nessuno)}}function FS(i,o){1&i&&(e.TgZ(0,"mat-header-cell",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.richiesta.proprieta.portaleXAlbergo"),""))}function HS(i,o){1&i&&(e.TgZ(0,"div",86),e._uU(1,"EXT API"),e.qZA())}function KS(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",84)(2,"div"),e._uU(3),e.qZA(),e.YNc(4,HS,2,0,"div",85),e.qZA()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(null!=t.portaleXAlbergo?t.portaleXAlbergo.nome:""),e.xp6(1),e.Q6J("ngIf",t.isRichiestaAPI)}}function GS(i,o){1&i&&(e.TgZ(0,"mat-header-cell",87),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.richiesta.proprieta.tipoRichiesta")))}function $S(i,o){if(1&i&&(e.TgZ(0,"div",91),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.source)}}function BS(i,o){if(1&i&&(e.TgZ(0,"div",91),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.urlRichiesta)}}function VS(i,o){if(1&i&&(e.TgZ(0,"mat-cell",88)(1,"div",89),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,$S,2,1,"div",90),e.YNc(5,BS,2,1,"div",90),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,n.getEnumKeyTranslation(n.enumTipoRichiesta,t.tipoRichiesta,"tipoRichiestaPreventivo"))),e.xp6(2),e.Q6J("ngIf",!!t.source),e.xp6(1),e.Q6J("ngIf",n.isVisualizzaUrlRichiesta&&!!t.urlRichiesta)}}function XS(i,o){1&i&&(e.TgZ(0,"mat-header-cell",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.richiesta.proprieta.dataRichiesta"),""))}function jS(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e._UZ(3,"br"),e._uU(4),e.ALo(5,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,2,t.dataRichiesta,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(5,5,t.dataRichiesta,"(H:mm)")," ")}}function WS(i,o){1&i&&(e.TgZ(0,"mat-header-cell",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.cliente")))}function e5(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",84)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",92),e._uU(5),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(null==t.cliente?null:t.cliente.ragioneSociale),e.xp6(2),e.Oqu(null==t.cliente?null:t.cliente.email)}}function t5(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.richieste.periodo")))}function i5(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",84)(2,"div"),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"date"),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(e.xi3(4,2,t.dal,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.xi3(7,5,t.al,"dd/MM/yyyy"))}}function o5(i,o){1&i&&(e.TgZ(0,"mat-header-cell",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.richiesta.proprieta.note"),""))}function n5(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.note)}}function a5(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.richiesta.proprieta.numeroCamere"),""))}function l5(i,o){if(1&i&&(e.TgZ(0,"mat-cell",80),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.numeroCamere)}}function r5(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.richiesta.proprieta.numeroPax"),""))}function c5(i,o){if(1&i&&(e.TgZ(0,"mat-cell",80),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.numeroPax)}}function s5(i,o){1&i&&(e.TgZ(0,"mat-header-cell",87),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.richiesta.proprieta.isDayUse"),""))}function p5(i,o){if(1&i&&(e.TgZ(0,"mat-cell",80),e._UZ(1,"mat-checkbox",93),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDayUse)("disabled",!0)}}function d5(i,o){1&i&&e._UZ(0,"mat-header-cell")}function m5(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",97)(1,"button",98),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2).$implicit;e.oxw();const r=e.MAs(58);return a.stopPropagation(),e.KtG(r.creaPreventivo(l))}),e.TgZ(2,"span",99),e._uU(3,"add_circle"),e.qZA()(),e.TgZ(4,"span",100),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2).$implicit;e.oxw();const r=e.MAs(58);return a.stopPropagation(),e.KtG(r.creaPreventivo(l))}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&i&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"sbm.richieste.creaPreventivo")))}function _5(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",97)(2,"button",98),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.apriPreventivo(l.preventivo.oid))}),e.TgZ(3,"span",99),e._uU(4,"open_in_new"),e.qZA()(),e.TgZ(5,"span",100),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.apriPreventivo(l.preventivo.oid))}),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",101),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,2,"sbm.richieste.apriPreventivo")),e.xp6(3),e.Oqu("("+e.lcZ(10,4,n.getEnumKeyTranslation(n.enumStatoPreventivo,t.preventivo.statoPreventivo,"statoPreventivo"))+")")}}function u5(i,o){if(1&i&&(e.ynx(0),e.YNc(1,m5,7,3,"div",96),e.YNc(2,_5,11,6,"ng-container",2),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t.preventivo),e.xp6(1),e.Q6J("ngIf",null!=t.preventivo)}}function g5(i,o){if(1&i&&(e.TgZ(0,"div",102),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.causaleRifiuto.descrizione," ")}}function h5(i,o){if(1&i&&(e.TgZ(0,"mat-cell",94),e.YNc(1,u5,3,2,"ng-container",2),e.YNc(2,g5,2,1,"div",95),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.isDayUse),e.xp6(1),e.Q6J("ngIf",null!=t.causaleRifiuto)}}function f5(i,o){1&i&&e._UZ(0,"mat-header-cell")}function C5(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",108),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(2),T=e.oxw().$implicit,L=e.oxw();return a.stopPropagation(),T.flag=r.key,L.save(T),e.KtG(p.closeMenu())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.value))}}function b5(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"button",104,105),e.NdJ("click",function(n){return n.stopPropagation()}),e.TgZ(3,"i",79),e._uU(4,"more_vert"),e.qZA()(),e.TgZ(5,"mat-menu",null,106),e.YNc(7,C5,3,3,"button",107),e.ALo(8,"selectEnum"),e.qZA(),e.BQk()),2&i){const t=e.MAs(6),n=e.oxw(2);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(6),e.Q6J("ngForOf",e.xi3(8,2,n.enumFlagRichiesta,"flagRichiesta"))}}function v5(i,o){if(1&i&&(e.TgZ(0,"mat-cell",103),e.YNc(1,b5,9,5,"ng-container",2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function T5(i,o){1&i&&e._UZ(0,"mat-header-cell")}function x5(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",110),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit;e.oxw();const r=e.MAs(58);return a.stopPropagation(),e.KtG(r.delete(l))}),e.TgZ(1,"i",111),e._uU(2,"delete"),e.qZA()()}}function Z5(i,o){if(1&i&&(e.TgZ(0,"mat-cell",103),e.YNc(1,x5,3,0,"button",109),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function A5(i,o){1&i&&e._UZ(0,"mat-header-row",112)}const w5=function(i){return{"font-weight-bold":i}};function z5(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",113),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(!p.dataReceived&&p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,w5,null==t.dataVisualizzazione))("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}class vi extends f.H{set _data(o){null!=o&&(this.dataReceived=!0,this.data=o,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}constructor(o,t,n,a,l,r,p){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.navigationService=l,this.parametriService=r,this.route=p,this.showTable=!0,this.displayedColumns=["edit","flag","portaleXAlbergo.nome","tipoRichiesta","dataRichiesta","cliente.ragioneSociale","periodo","note","numeroCamere","numeroPax","isDayUse","actions","details","delete"],this.pageSize=25,this.search=!1,this.showFilterAdv=!1,this.enumStatoPreventivo=c.N4,this.enumTipoRichiesta=c.GY,this.dataReceived=!1,this.getPortaliRQ=d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number),this.enumFlagRichiesta=c.lH,this.richiesteDaGestire=0,this.richiesteConPreventivo=0,this.richiesteRifiutate=0,this.isVisualizzaUrlRichiesta=!1}ngOnInit(){this.rq=new d.k$g,this.rq.skip=0,this.rq.take=this.pageSize,this.dataReceived||(this.headerService.setTitle("sbm.richieste.title"),this.filters=[],this.filters.push(new d.wn$("dataRichiesta",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("dataRichiesta",c.Hp.LowerEqual,this.getDate(this.oneYearFromToday),c.NM.Date)),this.filters.push(new d.wn$("dal",c.Hp.GreaterEqual,"",c.NM.Date)),this.filters.push(new d.wn$("dal",c.Hp.LowerEqual,"",c.NM.Date)),this.filters.push(new d.wn$("cliente.cognome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.email",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("dal",c.Hp.GreaterEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("causaleRifiuto.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("causaleRifiuto",c.Hp.IsNull,null,null,!0,c.Hp.IsNotNull)),this.filters.push(new d.wn$("preventivo",c.Hp.IsNull,null,null,!0,c.Hp.IsNotNull)),this.filters.push(new d.wn$("portaleXAlbergo.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("source",c.Hp.Contains,"",c.NM.String)),this.sub=this.route.queryParamMap.subscribe(o=>{let t=o.get("oidRichiesta");t&&!isNaN(+t)&&+t>0&&(this.oidRichiestaReceived=+t)})),this.isVisualizzaUrlRichiesta=null!=this.parametriService.parametri.isVisualizzaUrlRichiesta&&this.parametriService.parametri.isVisualizzaUrlRichiesta}ngAfterViewInit(){null!=this.dataSource?(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort):null!=this.oidRichiestaReceived?this.downloadRichiesta():(this.setIsLoading(!0),this.apiService.downloadRichiesteInfoAlberghi().subscribe(()=>{this.download()}))}onSortChange(o){this.sorting=new d.aQR(o.active,"asc"==o.direction?c.nI.Asc:c.nI.Desc),0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}onSearch(o,t,n,a=!0){null!=t?(this.search=!a,this.filters[o].value=t):(this.filters[o].active=n,this.filters[o].inverted=!1),0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}download(){if(!this.dataReceived){this.search||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),null!=this.sorting&&(this.rq.sorting=[this.sorting]),this.rq.filters=this.utility.getFilters(this.filters);let o=new d._g$;o.filter=this.rq;let t=JSON.parse(JSON.stringify(this.filters));t.splice(7,3),o.filterStati=new d.k$g,o.filterStati.filters=this.utility.getFilters(t),this.searchRequest=this.apiService.getRichiesteFilter(o).subscribe(n=>{this.data=n.data.richieste,this.totalRecords=n.totalRecords,this.richiesteDaGestire=n.data.richiesteDaGestire,this.richiesteConPreventivo=n.data.richiesteConPreventivo,this.richiesteRifiutate=n.data.richiesteRifiutate,this.search?this.search=!1:this.setIsLoading(!1)})}}downloadRichiesta(){this.setIsLoading(!0),this.searchRequest=this.apiService.getRichiesta(this.oidRichiestaReceived).subscribe(o=>{null!=o.data?(this.edit(o.data),this.setIsLoading(!1)):this.download()})}edit(o){null==o.dataVisualizzazione&&(o.dataVisualizzazione=this.getDate(u())),this.richiesta=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}add(){let o=new d.Zpt;this.containerService.dimension.width>=992?o.width="50vw":o.width="80vw",o.height="80vh",o.panelClass="no-padding-dialog";let t=this.showModalDialog(Jk.u,o),n=t.componentInstance;n.cliente=this.cliente,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&(this.navigationService.refreshContatoriMenu(),this.download())})}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}apriPreventivo(o){this.utility.openPageSbm("preventivi",{oidPreventivo:o,clienteRedirect:this.dataReceived,richiesteRedirect:!0})}save(o){this.setIsLoading(!0),this.apiService.setRichiesta(o).subscribe(()=>{this.setIsLoading(!1)})}onRichiesteDaGestireClick(){this.filters[7].value="",this.filters[8].active=!0,this.filters[8].inverted=!1,this.filters[9].active=!0,this.filters[9].inverted=!1,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onRichiesteConPreventivoClick(){this.filters[7].value="",this.filters[8].active=!0,this.filters[8].inverted=!1,this.filters[9].active=!1,this.filters[9].inverted=!0,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onRichiesteRifiutateClick(){this.filters[7].value="",this.filters[8].active=!1,this.filters[8].inverted=!0,this.filters[9].active=!1,this.filters[9].inverted=!1,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}ngOnDestroy(){this.dataReceived||(this.headerService.clearTitle(),this.headerService.hideElenco()),null!=this.sub&&this.sub.unsubscribe()}}vi.\u0275fac=function(o){return new(o||vi)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t),e.Y36(Ae.f),e.Y36(et),e.Y36(je.gz))},vi.\u0275cmp=e.Xpm({type:vi,selectors:[["app-richieste"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{cliente:"cliente",_data:"_data"},features:[e.qOj],decls:59,vars:13,consts:[[1,"p-3"],[3,"hidden"],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],["matSort","","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","flag"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","portaleXAlbergo.nome"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","tipoRichiesta"],["mat-sort-header","","class","justify-content-center",4,"matHeaderCellDef"],["class","align-items-center flex-wrap",4,"matCellDef"],["matColumnDef","dataRichiesta"],["matColumnDef","cliente.ragioneSociale"],["matColumnDef","periodo"],["matColumnDef","note"],["matColumnDef","numeroCamere"],["class","justify-content-center",4,"matHeaderCellDef"],["matColumnDef","numeroPax"],["matColumnDef","isDayUse"],["matColumnDef","actions"],["class","justify-content-center flex-wrap",4,"matCellDef"],["matColumnDef","details"],["class","mat-td-delete",4,"matCellDef"],["matColumnDef","delete"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"ngClass","matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[3,"richiestaModel","backEvent","apriPreventivoEvent"],["editComponent",""],[1,"row","mb-2"],[1,"col-4","pr-1"],[1,"border","p-0","cursor-pointer","text-center",3,"click"],[1,"bg-title-da-gestire","text-nowrap","p-3","mb-0"],[1,"pr-3","pl-3","pt-2","pb-2","numero"],[1,"col-4","pr-1","pl-1"],[1,"bg-title-con-preventivo","text-nowrap","p-3","mb-0"],[1,"col-4","pl-1"],[1,"bg-title-rifiutate","text-nowrap","p-3","mb-0"],[1,"filter"],[1,"row","filter-base"],[1,"col-9"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","value","dateChange"],["matSuffix","",3,"for"],["datePickerDataRichiestaDal",""],["datePickerDataRichiestaAl",""],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["datePickerArrivoDal",""],["datePickerArrivoAl",""],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["cognomeSearch",""],["emailSearch",""],["sourceSearch",""],[1,"text-right","pt-2","font-weight-bold"],[1,"align-middle","color-pink","cursor-pointer",3,"click"],["mat-icon-button","","color","primary",1,"align-middle",3,"click"],[1,"mt-2"],["color","primary",3,"checked","change"],[1,"filter-adv",3,"hidden"],[1,"col-6"],["displayMember","descrizione",3,"dataLoader","placeholder","valueChange"],["color","primary",1,"d-inline-block","mt-4",3,"checked","change"],["color","primary",1,"d-block",3,"ngModel","ngModelChange","change"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary",4,"ngIf"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["class","material-icons",3,"ngStyle",4,"ngIf"],[1,"material-icons",3,"ngStyle"],["mat-sort-header",""],[1,"d-flex","flex-column"],["class","small font-italic",4,"ngIf"],[1,"small","font-italic"],["mat-sort-header","",1,"justify-content-center"],[1,"align-items-center","flex-wrap"],[1,"w-100","text-center"],["class","small font-italic w-100 text-center",4,"ngIf"],[1,"small","font-italic","w-100","text-center"],[1,"cliente-email"],["color","primary",3,"checked","disabled"],[1,"justify-content-center","flex-wrap"],["class","w-100 text-center color-pink",4,"ngIf"],["class","text-nowrap",4,"ngIf"],[1,"text-nowrap"],["mat-icon-button","","color","primary",1,"align-middle","mr-n2",3,"click"],[1,"material-icons","text-icon"],[1,"align-middle","icon-text",3,"click"],[1,"w-100","text-center","text-small","mt-n2"],[1,"w-100","text-center","color-pink"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor","click"],["menuTrigger","matMenuTrigger"],["appMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"ngClass","matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,ES,105,72,"ng-container",2),e.YNc(3,OS,5,5,"ng-container",2),e.TgZ(4,"div",1)(5,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(6,"i",4),e._uU(7,"add"),e.qZA()(),e.TgZ(8,"div",5)(9,"mat-table",6),e.NdJ("matSortChange",function(a){return t.onSortChange(a)}),e.ynx(10,7),e.YNc(11,LS,1,0,"mat-header-cell",8),e.YNc(12,IS,2,1,"mat-cell",9),e.BQk(),e.ynx(13,10),e.YNc(14,QS,1,0,"mat-header-cell",8),e.YNc(15,RS,2,1,"mat-cell",11),e.BQk(),e.ynx(16,12),e.YNc(17,FS,3,3,"mat-header-cell",13),e.YNc(18,KS,5,2,"mat-cell",14),e.BQk(),e.ynx(19,15),e.YNc(20,GS,3,3,"mat-header-cell",16),e.YNc(21,VS,6,5,"mat-cell",17),e.BQk(),e.ynx(22,18),e.YNc(23,XS,3,3,"mat-header-cell",13),e.YNc(24,jS,6,8,"mat-cell",14),e.BQk(),e.ynx(25,19),e.YNc(26,WS,3,3,"mat-header-cell",13),e.YNc(27,e5,6,2,"mat-cell",14),e.BQk(),e.ynx(28,20),e.YNc(29,t5,3,3,"mat-header-cell",8),e.YNc(30,i5,8,8,"mat-cell",14),e.BQk(),e.ynx(31,21),e.YNc(32,o5,3,3,"mat-header-cell",13),e.YNc(33,n5,2,1,"mat-cell",14),e.BQk(),e.ynx(34,22),e.YNc(35,a5,3,3,"mat-header-cell",23),e.YNc(36,l5,2,1,"mat-cell",11),e.BQk(),e.ynx(37,24),e.YNc(38,r5,3,3,"mat-header-cell",23),e.YNc(39,c5,2,1,"mat-cell",11),e.BQk(),e.ynx(40,25),e.YNc(41,s5,3,3,"mat-header-cell",16),e.YNc(42,p5,2,2,"mat-cell",11),e.BQk(),e.ynx(43,26),e.YNc(44,d5,1,0,"mat-header-cell",8),e.YNc(45,h5,3,2,"mat-cell",27),e.BQk(),e.ynx(46,28),e.YNc(47,f5,1,0,"mat-header-cell",8),e.YNc(48,v5,2,1,"mat-cell",29),e.BQk(),e.ynx(49,30),e.YNc(50,T5,1,0,"mat-header-cell",8),e.YNc(51,Z5,2,1,"mat-cell",29),e.BQk(),e.YNc(52,A5,1,0,"mat-header-row",31),e.YNc(53,z5,1,4,"mat-row",32),e.qZA()(),e.TgZ(54,"div",33)(55,"mat-paginator",34),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()(),e.TgZ(56,"div",1)(57,"app-richieste-edit",35,36),e.NdJ("backEvent",function(){return t.onBack()})("apriPreventivoEvent",function(a){return t.apriPreventivo(a)}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(1),e.Q6J("ngIf",null!=t.data),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(5),e.Q6J("dataSource",t.dataReceived?t.dataSource:t.data),e.xp6(43),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("richiestaModel",t.richiesta))},dependencies:[m.mk,m.sg,m.O5,m.PC,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,y.Q0,Ie.W0,Ie.tN,Ie.D8,qe.S$,qe.Qi,qe.mi,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,_.JJ,_.On,ne.d,_n,m.uU,Te.A,z.X$],styles:[".mat-column-actions[_ngcontent-%COMP%]{min-width:150px!important}.cliente-email[_ngcontent-%COMP%]{font-size:small;font-style:italic}.mat-column-cliente-ragioneSociale[_ngcontent-%COMP%]{flex:0 0 250px}.text-small[_ngcontent-%COMP%]{font-size:12px;font-style:italic}.mat-table[_ngcontent-%COMP%]{min-width:1200px!important}.bg-title-da-gestire[_ngcontent-%COMP%]{background-color:#cee5ee;font-size:18px;color:#666}.bg-title-con-preventivo[_ngcontent-%COMP%]{background-color:#abe7c5;font-size:18px;color:#666}.bg-title-rifiutate[_ngcontent-%COMP%]{background-color:#f6c5c4;font-size:18px;color:#666}mat-card[_ngcontent-%COMP%]{box-shadow:none!important;border-radius:5px!important;overflow:hidden!important}.numero[_ngcontent-%COMP%]{font-size:18px}.mat-column-tipoRichiesta[_ngcontent-%COMP%]{flex:0 0 250px}"]});var M5=Y(32642);function q5(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.risposta?t.risposta:"---"," ")}}function P5(i,o){1&i&&(e.TgZ(0,"span",8),e._uU(1,"star"),e.qZA())}function k5(i,o){1&i&&(e.TgZ(0,"span",8),e._uU(1,"star_border"),e.qZA())}function S5(i,o){if(1&i&&(e.ynx(0),e.YNc(1,P5,2,0,"span",7),e.YNc(2,k5,2,0,"span",7),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.utility.counter(t.numeroStelle)),e.xp6(1),e.Q6J("ngForOf",n.utility.counter(5-t.numeroStelle))}}function y5(i,o){if(1&i&&e._UZ(0,"i"),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2).$implicit;e.Tol("smile-icon mr-2 "+(a.numeroFaccine==n+1?"fas fa-":"far fa-")+t)}}function J5(i,o){if(1&i&&(e.ynx(0),e.YNc(1,y5,1,2,"i",9),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.smileIcons)}}const E5=function(i){return{"mt-3":i}};function N5(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5",4),e._uU(2),e.qZA(),e.TgZ(3,"div",5),e.YNc(4,q5,2,1,"ng-container",6),e.YNc(5,S5,3,2,"ng-container",6),e.YNc(6,J5,2,1,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=o.$implicit,n=o.index;e.xp6(1),e.Q6J("ngClass",e.VKq(5,E5,n>0)),e.xp6(1),e.Oqu(t.domanda),e.xp6(2),e.Q6J("ngIf",!t.numeroStelle&&!t.numeroFaccine),e.xp6(1),e.Q6J("ngIf",t.numeroStelle>0),e.xp6(1),e.Q6J("ngIf",t.numeroFaccine>0)}}class un extends f.H{set _risposta(o){if(null!=o&&(this.risposta=o,this.risposteDomande=[],this.risposta.risposta))try{let t=JSON.parse(this.risposta.risposta);if(null!=t)for(let n in t){let a=new d.con;a.domanda=n;let l=t[n];l&&l.length>0&&l.length<=5?Array.from(l).every(r=>"*"==r)?a.numeroStelle=l.length:Array.from(l).every(r=>"\xb0"==r)?a.numeroFaccine=l.length:a.risposta=l:a.risposta=l,this.risposteDomande.push(a)}}catch(t){}}constructor(o,t){super(),this.apiService=o,this.utility=t,this.backEvent=new e.vpe,this.risposteDomande=[],this.smileIcons=["tired","frown","meh","smile","grin"]}delete(o){this.showDialogConfirm("sbm.risposteSondaggi.eliminareRispostaSondaggio").then(t=>{null!=o&&(this.risposta=o),this.risposta.isDeleted=!0,this.setIsLoading(!0),this.apiService.setRispostaSondaggio(this.risposta).subscribe(()=>{this.backEvent.emit()})},t=>{})}}un.\u0275fac=function(o){return new(o||un)(e.Y36(A.s),e.Y36(C.t))},un.\u0275cmp=e.Xpm({type:un,selectors:[["app-risposte-sondaggi-edit"]],inputs:{_risposta:"_risposta"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:8,vars:7,consts:[[4,"ngFor","ngForOf"],[1,"mt-4"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],[3,"ngClass"],[1,"risposta"],[4,"ngIf"],["class","material-icons icon-md20",4,"ngFor","ngForOf"],[1,"material-icons","icon-md20"],[3,"class",4,"ngFor","ngForOf"]],template:function(o,t){1&o&&(e.YNc(0,N5,7,7,"ng-container",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.delete()}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(6),e.ALo(7,"translate"),e.qZA()()),2&o&&(e.Q6J("ngForOf",t.risposteDomande),e.xp6(3),e.Oqu(e.lcZ(4,3,"globals.elimina")),e.xp6(3),e.Oqu(e.lcZ(7,5,"globals.annulla")))},dependencies:[m.mk,m.sg,m.O5,h.eB,z.X$],styles:[".risposta[_ngcontent-%COMP%]{font-style:italic;background-color:#fff0f5;border-radius:20px;padding:10px}.smile-icon[_ngcontent-%COMP%]{font-size:20px}"]});var Bc=Y(85893);const O5=["paginator"],L5=["paginatorSingoloSondaggio"];function D5(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"div",40)(3,"div",41)(4,"app-view-select",42),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(0,a.oid>0?a.oid.toString():""))}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",41)(7,"mat-form-field",43)(8,"input",44,45),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(9),l=e.oxw();return e.KtG(l.onSearch(1,a.value,!1))}),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",41)(12,"mat-form-field",43)(13,"input",44,46),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(14),l=e.oxw();return e.KtG(l.onSearch(2,a.value,!1))}),e.ALo(15,"translate"),e.qZA()()()()(),e.TgZ(16,"mat-checkbox",34),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSingoloSondaggioCheckChange())}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("dataLoader",t.apiService.getSondaggiViewSelect())("placeholder",e.lcZ(5,8,"bo.sondaggioRisposta.proprieta.sondaggio")),e.xp6(4),e.s9C("placeholder",e.lcZ(10,10,"bo.prenotazione.proprieta.codicePrenotazione")),e.Q6J("value",t.filters[1].value),e.xp6(5),e.s9C("placeholder",e.lcZ(15,12,"bo.cliente.proprieta.email")),e.Q6J("value",t.filters[2].value),e.xp6(3),e.Q6J("checked",t.visualizzaRisposteSingoloSondaggio),e.xp6(1),e.hij(" ",e.lcZ(18,14,"sbm.risposteSondaggi.visualizzaRisposteSingoloSondaggio"),"")}}function I5(i,o){1&i&&(e.TgZ(0,"div",47)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.risposteSondaggi.nessunaRispostaSondaggio")))}function Q5(i,o){1&i&&e._UZ(0,"mat-header-cell")}function U5(i,o){1&i&&(e.TgZ(0,"button",50)(1,"i",51),e._uU(2,"edit"),e.qZA()())}function Y5(i,o){if(1&i&&(e.TgZ(0,"mat-cell",48),e.YNc(1,U5,3,0,"button",49),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",!n.dataReceived&&t.stato==n.enumStatoSondaggio.Compilato)}}function R5(i,o){1&i&&(e.TgZ(0,"mat-header-cell",52),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sondaggioRisposta.proprieta.data"),""))}function F5(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function H5(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sondaggioRisposta.proprieta.sondaggio"),""))}function K5(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.sondaggio?null:t.sondaggio.nome)}}function G5(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sondaggioRisposta.proprieta.cliente"),""))}function $5(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.cliente?null:t.cliente.ragioneSociale)}}function B5(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sondaggioRisposta.proprieta.prenotazione"),""))}function V5(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",54),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.preventDefault(),e.KtG(r.openPrenotazione(l.prenotazione.oid))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.codicePrenotazione)}}function X5(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,V5,2,1,"a",53),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione)}}function j5(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazione.proprieta.arrivo"),""))}function W5(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,null==t.prenotazione?null:t.prenotazione.arrivo,"dd/MM/yyyy"))}}function ey(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prenotazione.proprieta.partenza"),""))}function ty(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij("",e.xi3(2,1,null==t.prenotazione?null:t.prenotazione.partenza,"dd/MM/yyyy")," ")}}function iy(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sondaggioRisposta.proprieta.stato"),""))}function oy(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoSondaggio,t.stato,"statoSondaggio")))}}function ny(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sondaggioRisposta.proprieta.punteggio"),""))}function ay(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.punteggio)}}function ly(i,o){1&i&&e._UZ(0,"mat-header-cell",55)}function ry(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit;e.oxw();const r=e.MAs(48);return a.stopPropagation(),e.KtG(r.delete(l))}),e.TgZ(1,"i",59),e._uU(2,"delete"),e.qZA()()}}function cy(i,o){if(1&i&&(e.TgZ(0,"mat-cell",56),e.YNc(1,ry,3,0,"button",57),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.dataReceived)}}function sy(i,o){1&i&&e._UZ(0,"mat-header-row",60)}function py(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",61),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(!p.dataReceived&&p.utility.checkClick(a)&&r.stato==p.enumStatoSondaggio.Compilato?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function dy(i,o){1&i&&(e.TgZ(0,"div",47)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.risposteSondaggi.nessunaRispostaSondaggio")))}function my(i,o){if(1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.displayedColumnsSingoloSondaggioNames[t]))}}function _y(i,o){if(1&i&&(e._UZ(0,"div",64),e.ALo(1,"safeHtml")),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit;e.Q6J("innerHTML",e.lcZ(1,1,t[n]),e.oJD)}}function uy(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,_y,2,3,"div",63),e.qZA()),2&i){const t=o.$implicit,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null!=t[n])}}function gy(i,o){if(1&i&&(e.ynx(0,62),e.YNc(1,my,3,3,"mat-header-cell",7),e.YNc(2,uy,2,1,"mat-cell",11),e.BQk()),2&i){const t=o.$implicit;e.Q6J("matColumnDef",t)}}function hy(i,o){1&i&&e._UZ(0,"mat-header-row",60)}function fy(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",65),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}const Cy=function(i){return{"p-3":i}};class Ti extends f.H{set data(o){null!=o&&(this.dataReceived=!0,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.localizationService=a,this.utility=l,this.showTable=!0,this.displayedColumns=["edit","data","sondaggio","cliente","prenotazione","arrivo","partenza","stato","punteggio","delete"],this.dataReceived=!1,this.enumStatoSondaggio=c.eK,this.visualizzaRisposteSingoloSondaggio=!1,this.displayedColumnsSingoloSondaggio=[],this.displayedColumnsSingoloSondaggioNames=[],this.exportColumns=["data","sondaggio.nome","cliente.ragioneSociale","codicePrenotazione","prenotazione.arrivo","prenotazione.partenza","statoSondaggio","punteggio"],this.exportColumnsSingoloSondaggio=[],this.rq=new d.k$g,this.smileIcons=["tired","frown","meh","smile","grin"]}ngOnInit(){this.dataReceived||(this.headerService.setTitle("sbm.risposteSondaggi.title"),this.filters=[],this.filters.push(new d.wn$("sondaggio.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("prenotazione.codicePrenotazione",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.email",c.Hp.Contains,"",c.NM.String)))}ngAfterViewInit(){null!=this.dataSource?(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort):this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getRisposteSondaggiFilter(this.rq).subscribe(t=>{t.data.forEach(n=>{null!=n.prenotazione&&(n.codicePrenotazione=n.prenotazione.codicePrenotazione?n.prenotazione.codicePrenotazione:n.prenotazione.codiceOTA),n.statoSondaggio=this.localizationService.getTranslationSync(this.getEnumKeyTranslation(c.eK,n.stato,"statoSondaggio"))}),this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,o||this.setIsLoading(!1)})}edit(o){this.risposta=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBack(){this.showTable=!0,this.containerService.scrollToTop(),this.dataReceived||this.download()}onPageChange(){this.containerService.scrollToTop()}onSingoloSondaggioCheckChange(){this.visualizzaRisposteSingoloSondaggio?this.visualizzaRisposteSingoloSondaggio=!1:(this.setIsLoading(!0),this.apiService.getSondaggiViewSelect(null,!1).subscribe(o=>{o.data.length>0?(this.sondaggio=o.data[0],this.onSondaggioChange()):(this.dataSourceSingoloSondaggio=new s.r4([]),this.dataSourceSingoloSondaggio.paginator=this.paginatorSingoloSondaggio,this.visualizzaRisposteSingoloSondaggio=!0,this.setIsLoading(!1))}))}onSondaggioChange(){this.setIsLoading(!0),this.apiService.getRisposteSondaggio(this.sondaggio.oid).subscribe(o=>{let t=o.data,n=[];this.displayedColumnsSingoloSondaggio=["cliente","codicePrenotazione","periodo"],this.exportColumnsSingoloSondaggio=["cliente","codicePrenotazione","periodo"],this.displayedColumnsSingoloSondaggioNames=["bo.sondaggioRisposta.proprieta.cliente","bo.sondaggioRisposta.proprieta.prenotazione","sbm.risposteSondaggi.periodo"];let a=0;for(let r of t){var l;let p={};p.oid=r.oid,p.cliente=null===(l=r.cliente)||void 0===l?void 0:l.ragioneSociale,null!=r.prenotazione&&(p.codicePrenotazione=r.prenotazione.codicePrenotazione?r.prenotazione.codicePrenotazione:r.prenotazione.codiceOTA,p.periodo=u(r.prenotazione.arrivo).format("DD/MM/YYYY")+" - "+u(r.prenotazione.partenza).format("DD/MM/YYYY"));try{let T=JSON.parse(r.risposta);if(null!=T){let L=0;for(let G in T){let W=T[G];if(W&&W.length>0&&W.length<=5)if(Array.from(W).every(be=>"*"==be)){p["domanda"+L]="";for(let be=0;be<W.length;be++)p["domanda"+L]+='<span class="material-icons icon-md20">star</span>';for(let be=0;be<5-W.length;be++)p["domanda"+L]+='<span class="material-icons icon-md20">star_border</span>';p[G]=W.length}else if(Array.from(W).every(be=>"\xb0"==be)){p["domanda"+L]="";let be=1;for(let Ze of this.smileIcons)p["domanda"+L]+='<i class="icon-md20 mr-1 '+(W.length==be?"fas fa-":"far fa-")+Ze+'"></i>',be++;p[G]=W.length}else p["domanda"+L]=W,p[G]=W;else p["domanda"+L]=W,p[G]=W;0==a&&(this.displayedColumnsSingoloSondaggio.push("domanda"+L),this.exportColumnsSingoloSondaggio.push(G),this.displayedColumnsSingoloSondaggioNames.push((0,M5.Z)(G,50,{html:!1,breakWords:!0}))),L++}}}catch(T){}p.punteggio=r.punteggio,n.push(p),a++}this.displayedColumnsSingoloSondaggio.push("punteggio"),this.exportColumnsSingoloSondaggio.push("punteggio"),this.displayedColumnsSingoloSondaggioNames.push("bo.sondaggioRisposta.proprieta.punteggio"),this.dataSourceSingoloSondaggio=new s.r4(n),this.dataSourceSingoloSondaggio.paginator=this.paginatorSingoloSondaggio,this.visualizzaRisposteSingoloSondaggio=!0,this.setIsLoading(!1)})}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(!n),this.paginator.firstPage()}openPrenotazione(o){this.utility.openUrlInNewTab("/sbm/home/(homeOutlet:prenotazioni)?oidPrenotazione="+o)}ngOnDestroy(){this.dataReceived||this.headerService.clearTitle()}}function by(i,o){if(1&i&&e._UZ(0,"span"),2&i){const t=e.oxw(2);e.Gre("mr-2 fi fi-",t.cliente.lingua.flagIcon,"")}}function vy(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"h3",14),e.YNc(3,by,1,3,"span",15),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"a",16),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.backEvent.emit())}),e.TgZ(7,"span",17),e._uU(8,"keyboard_arrow_left"),e.qZA(),e.TgZ(9,"span",18),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div")(13,"div",19)(14,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(null==a.clienteEditing?a.edit():null)}),e.TgZ(15,"i",21),e._uU(16,"edit"),e.qZA()(),e.TgZ(17,"div",22),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",19)(21,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sendEmail())}),e.TgZ(22,"i",21),e._uU(23,"email"),e.qZA()(),e.TgZ(24,"div",22),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",19)(28,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sendSms())}),e.TgZ(29,"i",21),e._uU(30,"message"),e.qZA()(),e.TgZ(31,"div",22),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",19)(35,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.utility.openUrlInNewTab("https://wa.me/"+a.utility.checkCellulare(a.cliente.cellulare)))}),e._UZ(36,"i",24),e.qZA(),e.TgZ(37,"div",22),e._uU(38),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",19)(41,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addAppuntamento())}),e.TgZ(42,"i",21),e._uU(43,"add"),e.qZA()(),e.TgZ(44,"div",22),e._uU(45),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"div",26)(48,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clienteEditing=null)}),e.TgZ(49,"i",21),e._uU(50,"calendar_today"),e.qZA()(),e.TgZ(51,"div",22),e._uU(52),e.ALo(53,"translate"),e.qZA()()()(),e.TgZ(54,"div",27),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"div",28),e._uU(58),e.qZA(),e.TgZ(59,"div",29),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"div",28),e._uU(63),e.qZA(),e.TgZ(64,"div",29),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"div",28),e._uU(68),e.ALo(69,"date"),e.qZA(),e.TgZ(70,"div",29),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"div",28),e._uU(74),e.qZA(),e.TgZ(75,"div",29),e._uU(76),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"div",28),e._uU(79),e.qZA(),e.TgZ(80,"div",29),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"div",28),e._uU(84),e.qZA(),e.TgZ(85,"div",29),e._uU(86),e.ALo(87,"translate"),e.qZA(),e.TgZ(88,"div",28),e._uU(89),e.qZA(),e.TgZ(90,"div",30)(91,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.cliente.privacy=a)}),e._uU(92),e.ALo(93,"translate"),e.qZA()(),e.TgZ(94,"div")(95,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.cliente.newsletter=a)}),e._uU(96),e.ALo(97,"translate"),e.qZA()(),e.TgZ(98,"div")(99,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.cliente.blackList=a)}),e._uU(100),e.ALo(101,"translate"),e.qZA()(),e.TgZ(102,"button",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.anonimizza())}),e._uU(103),e.ALo(104,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",null!=t.cliente.lingua&&!!t.cliente.lingua.flagIcon),e.xp6(2),e.Oqu(t.cliente.cognome+" "+t.cliente.nome),e.xp6(5),e.Oqu(e.lcZ(11,33,"sbm.clienti.elencoClienti")),e.xp6(8),e.Oqu(e.lcZ(19,35,"sbm.clienti.modifica")),e.xp6(3),e.Q6J("disabled",!t.cliente.email),e.xp6(4),e.Oqu(e.lcZ(26,37,"sbm.clienti.email")),e.xp6(3),e.Q6J("disabled",!t.cliente.cellulare),e.xp6(4),e.Oqu(e.lcZ(33,39,"sbm.clienti.sms")),e.xp6(3),e.Q6J("disabled",!t.cliente.cellulare),e.xp6(3),e.Oqu(e.lcZ(39,41,"sbm.clienti.whatsapp")),e.xp6(7),e.Oqu(e.lcZ(46,43,"sbm.clienti.meeting")),e.xp6(7),e.Oqu(e.lcZ(53,45,"sbm.clienti.attivita")),e.xp6(3),e.Oqu(e.lcZ(56,47,"bo.cliente.proprieta.email")),e.xp6(3),e.Oqu(t.cliente.email?t.cliente.email:"---"),e.xp6(2),e.Oqu(e.lcZ(61,49,"bo.cliente.proprieta.cellulare")),e.xp6(3),e.Oqu(t.cliente.cellulare?t.cliente.cellulare:"---"),e.xp6(2),e.Oqu(e.lcZ(66,51,"bo.cliente.proprieta.dataModificaWelcome")),e.xp6(3),e.Oqu(t.utility.isNullDate(t.cliente.dataModificaWelcome)?"---":e.xi3(69,53,t.cliente.dataModificaWelcome,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(e.lcZ(72,56,"bo.cliente.proprieta.mercato")),e.xp6(3),e.Oqu(null!=t.cliente.mercato&&t.cliente.mercato.descrizione?t.cliente.mercato.descrizione:"---"),e.xp6(2),e.Oqu(e.lcZ(77,58,"bo.cliente.proprieta.canaleVendita")),e.xp6(3),e.Oqu(null!=t.cliente.canaleVendita&&t.cliente.canaleVendita.descrizione?t.cliente.canaleVendita.descrizione:"---"),e.xp6(2),e.Oqu(e.lcZ(82,60,"bo.cliente.proprieta.segmento")),e.xp6(3),e.Oqu(null!=t.cliente.segmento&&t.cliente.segmento.descrizione?t.cliente.segmento.descrizione:"---"),e.xp6(2),e.Oqu(e.lcZ(87,62,"bo.cliente.proprieta.fonte")),e.xp6(3),e.Oqu(null!=t.cliente.fonte&&t.cliente.fonte.descrizione?t.cliente.fonte.descrizione:"---"),e.xp6(2),e.Q6J("ngModel",t.cliente.privacy),e.xp6(1),e.hij(" ",e.lcZ(93,64,"bo.cliente.proprieta.privacy")," "),e.xp6(3),e.Q6J("ngModel",t.cliente.newsletter),e.xp6(1),e.hij(" ",e.lcZ(97,66,"bo.cliente.proprieta.newsletter")," "),e.xp6(3),e.Q6J("ngModel",t.cliente.blackList),e.xp6(1),e.hij(" ",e.lcZ(101,68,"bo.cliente.proprieta.blackList")," "),e.xp6(3),e.Oqu(e.lcZ(104,70,"sbm.clienti.anonimizza"))}}Ti.\u0275fac=function(o){return new(o||Ti)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(Oe.o),e.Y36(C.t))},Ti.\u0275cmp=e.Xpm({type:Ti,selectors:[["app-risposte-sondaggi"]],viewQuery:function(o,t){if(1&o&&(e.Gf(O5,5),e.Gf(L5,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.paginatorSingoloSondaggio=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{data:"data"},features:[e.qOj],decls:69,vars:35,consts:[[3,"ngClass"],[3,"hidden"],[4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"mat-table-container"],["matSort","","matSortActive","data","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sondaggio"],["matColumnDef","cliente"],["matColumnDef","prenotazione"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","stato"],["matColumnDef","punteggio"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["paginator",""],[1,"edit-container",3,"hidden"],[3,"_risposta","backEvent"],["editComponent",""],[1,"filter"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",1,"visualizzaRisposteSingoloSondaggioCheckBox","mb-2",3,"checked","change"],[1,"mat-table-container","risposte-sondaggi-table"],[1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],["paginatorSingoloSondaggio",""],[1,"row"],[1,"col-4"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["codicePrenotazioneSearch",""],["emailSearch",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary",4,"ngIf"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[3,"matColumnDef"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",1),e.YNc(3,D5,19,16,"ng-container",2),e.YNc(4,I5,4,3,"div",3),e.TgZ(5,"div",1)(6,"div",4)(7,"mat-table",5),e.ynx(8,6),e.YNc(9,Q5,1,0,"mat-header-cell",7),e.YNc(10,Y5,2,1,"mat-cell",8),e.BQk(),e.ynx(11,9),e.YNc(12,R5,3,3,"mat-header-cell",10),e.YNc(13,F5,3,4,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,H5,3,3,"mat-header-cell",7),e.YNc(16,K5,2,1,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,G5,3,3,"mat-header-cell",7),e.YNc(19,$5,2,1,"mat-cell",11),e.BQk(),e.ynx(20,14),e.YNc(21,B5,3,3,"mat-header-cell",7),e.YNc(22,X5,2,1,"mat-cell",11),e.BQk(),e.ynx(23,15),e.YNc(24,j5,3,3,"mat-header-cell",7),e.YNc(25,W5,3,4,"mat-cell",11),e.BQk(),e.ynx(26,16),e.YNc(27,ey,3,3,"mat-header-cell",7),e.YNc(28,ty,3,4,"mat-cell",11),e.BQk(),e.ynx(29,17),e.YNc(30,iy,3,3,"mat-header-cell",7),e.YNc(31,oy,3,3,"mat-cell",11),e.BQk(),e.ynx(32,18),e.YNc(33,ny,3,3,"mat-header-cell",7),e.YNc(34,ay,2,1,"mat-cell",11),e.BQk(),e.ynx(35,19),e.YNc(36,ly,1,0,"mat-header-cell",20),e.YNc(37,cy,2,1,"mat-cell",21),e.BQk(),e.YNc(38,sy,1,0,"mat-header-row",22),e.YNc(39,py,1,1,"mat-row",23),e.qZA()(),e.TgZ(40,"div",24)(41,"button",25),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"Risposte sondaggi",t.exportColumns)}),e.TgZ(42,"i",26),e._uU(43,"get_app"),e.qZA()(),e.TgZ(44,"mat-paginator",27,28),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()(),e.TgZ(46,"div",29)(47,"app-risposte-sondaggi-edit",30,31),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()(),e.TgZ(49,"div",1)(50,"div",32)(51,"app-view-select",33),e.NdJ("valueChange",function(a){return t.sondaggio=a})("valueChange",function(){return t.onSondaggioChange()}),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"mat-checkbox",34),e.NdJ("change",function(){return t.onSingoloSondaggioCheckChange()}),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.YNc(56,dy,4,3,"div",3),e.TgZ(57,"div",1)(58,"div",35)(59,"mat-table",36),e.YNc(60,gy,3,1,"ng-container",37),e.YNc(61,hy,1,0,"mat-header-row",22),e.YNc(62,fy,1,1,"mat-row",38),e.qZA()(),e.TgZ(63,"div",24)(64,"button",25),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSourceSingoloSondaggio.data,"Risposte sondaggi "+t.sondaggio.nome,t.exportColumnsSingoloSondaggio)}),e.TgZ(65,"i",26),e._uU(66,"get_app"),e.qZA()(),e.TgZ(67,"mat-paginator",27,39),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()()()),2&o&&(e.Q6J("ngClass",e.VKq(33,Cy,!t.dataReceived)),e.xp6(1),e.Q6J("hidden",t.visualizzaRisposteSingoloSondaggio),e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(1),e.Q6J("ngIf",!t.dataReceived),e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(2),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("_risposta",t.risposta),e.xp6(2),e.Q6J("hidden",!t.visualizzaRisposteSingoloSondaggio),e.xp6(2),e.Q6J("dataLoader",t.apiService.getSondaggiViewSelect(null,!1))("value",t.sondaggio)("placeholder",e.lcZ(52,29,"bo.sondaggioRisposta.proprieta.sondaggio")),e.xp6(2),e.Q6J("checked",t.visualizzaRisposteSingoloSondaggio),e.xp6(1),e.Oqu(e.lcZ(55,31,"sbm.risposteSondaggi.visualizzaRisposteSingoloSondaggio")),e.xp6(2),e.Q6J("ngIf",null!=t.dataSourceSingoloSondaggio&&null!=t.dataSourceSingoloSondaggio.data&&0==t.dataSourceSingoloSondaggio.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSourceSingoloSondaggio||null==t.dataSourceSingoloSondaggio.data||0==t.dataSourceSingoloSondaggio.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSourceSingoloSondaggio),e.xp6(1),e.Q6J("ngForOf",t.displayedColumnsSingoloSondaggio),e.xp6(1),e.Q6J("matHeaderRowDef",t.displayedColumnsSingoloSondaggio)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsSingoloSondaggio),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,ne.d,un,m.uU,Bc.z,z.X$],styles:[".visualizzaRisposteSingoloSondaggioCheckBox[_ngcontent-%COMP%]{font-size:15px}  .risposte-sondaggi-table .mat-cell{white-space:pre-wrap!important}"]});const Ty=function(i,o){return{whatsappIcon:i,whatsappIconOld:o}};function xy(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.utility.openUrlInNewTab("https://wa.me/"+a.utility.checkCellulare(a.cliente.cellulare)))}),e._UZ(1,"i",44),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.WLB(1,Ty,t.isAbilitaModificaCliente,!t.isAbilitaModificaCliente))}}function Zy(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"a",16),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.backEvent.emit())}),e.TgZ(2,"span",17),e._uU(3,"keyboard_arrow_left"),e.qZA(),e.TgZ(4,"span",18),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",33)(8,"div",34)(9,"div",35)(10,"span",28),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"div",35)(16,"span",28),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"span"),e._uU(20),e.qZA()(),e.TgZ(21,"div",35)(22,"span",28),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"span"),e._uU(26),e.qZA()()(),e.TgZ(27,"div",34)(28,"div",35)(29,"span",28),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"span"),e._uU(33),e.qZA(),e.YNc(34,xy,2,4,"button",36),e.qZA(),e.TgZ(35,"div",35)(36,"span",28),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"span"),e._uU(40),e.qZA()(),e.TgZ(41,"div",35)(42,"span",28),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"span"),e._uU(46),e.qZA()()(),e.TgZ(47,"div",34)(48,"div",35)(49,"span",28),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"span"),e._uU(53),e.qZA()(),e.TgZ(54,"div",35)(55,"span",28),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"span"),e._uU(59),e.qZA()(),e.TgZ(60,"div",35)(61,"span",28),e._uU(62),e.ALo(63,"translate"),e.qZA(),e.TgZ(64,"span"),e._uU(65),e.qZA()()(),e.TgZ(66,"div",34)(67,"div",35)(68,"span",28),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"span"),e._uU(72),e.qZA()(),e.TgZ(73,"div",35)(74,"span",28),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"span"),e._uU(78),e.qZA()(),e.TgZ(79,"div",35)(80,"span",28),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"span"),e._uU(84),e.qZA()()(),e.TgZ(85,"div",34)(86,"div",35)(87,"span",28),e._uU(88),e.ALo(89,"translate"),e.qZA(),e.TgZ(90,"span"),e._uU(91),e.qZA()(),e.TgZ(92,"div",35)(93,"span",28),e._uU(94),e.ALo(95,"translate"),e.qZA(),e.TgZ(96,"span"),e._uU(97),e.qZA()(),e.TgZ(98,"div",35)(99,"span",28),e._uU(100),e.ALo(101,"translate"),e.qZA(),e.TgZ(102,"span"),e._uU(103),e.qZA()()(),e.TgZ(104,"div",34)(105,"div",35)(106,"span",28),e._uU(107),e.ALo(108,"translate"),e.qZA(),e.TgZ(109,"span"),e._uU(110),e.qZA()(),e.TgZ(111,"div",35)(112,"span",28),e._uU(113),e.ALo(114,"translate"),e.qZA(),e.TgZ(115,"span"),e._uU(116),e.qZA()(),e.TgZ(117,"div",35)(118,"span",28),e._uU(119),e.ALo(120,"translate"),e.qZA(),e.TgZ(121,"span"),e._uU(122),e.qZA()()(),e.TgZ(123,"div",34)(124,"div",35)(125,"span",28),e._uU(126),e.ALo(127,"translate"),e.qZA(),e.TgZ(128,"span"),e._uU(129),e.qZA()(),e.TgZ(130,"div",35)(131,"span",28),e._uU(132),e.ALo(133,"translate"),e.qZA(),e.TgZ(134,"span"),e._uU(135),e.qZA()(),e.TgZ(136,"div",35)(137,"span",28),e._uU(138),e.ALo(139,"translate"),e.qZA(),e.TgZ(140,"span"),e._uU(141),e.qZA()()(),e.TgZ(142,"div",34)(143,"div",35)(144,"span",37),e._uU(145),e.ALo(146,"translate"),e.qZA(),e._UZ(147,"mat-checkbox",38),e.qZA(),e.TgZ(148,"div",35)(149,"span",37),e._uU(150),e.ALo(151,"translate"),e.qZA(),e._UZ(152,"mat-checkbox",38),e.qZA()()(),e.TgZ(153,"div",30),e._UZ(154,"app-url",39),e.ALo(155,"translate"),e.qZA(),e.TgZ(156,"div",40)(157,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sendEmail())}),e._uU(158),e.ALo(159,"translate"),e.qZA(),e.TgZ(160,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sendSms())}),e._uU(161),e.ALo(162,"translate"),e.qZA(),e.TgZ(163,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.anonimizza())}),e._uU(164),e.ALo(165,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,57,"sbm.clienti.elencoClienti")),e.xp6(6),e.Oqu(e.lcZ(12,59,"bo.cliente.proprieta.cognome")+": "),e.xp6(3),e.Oqu(t.cliente.cognome?t.cliente.cognome:"---"),e.xp6(3),e.Oqu(e.lcZ(18,61,"bo.cliente.proprieta.nome")+": "),e.xp6(3),e.Oqu(t.cliente.nome?t.cliente.nome:"---"),e.xp6(3),e.Oqu(e.lcZ(24,63,"bo.cliente.proprieta.email")+": "),e.xp6(3),e.Oqu(t.cliente.email?t.cliente.email:"---"),e.xp6(4),e.Oqu(e.lcZ(31,65,"bo.cliente.proprieta.cellulare")+": "),e.xp6(3),e.Oqu(t.cliente.cellulare?t.cliente.cellulare:"---"),e.xp6(1),e.Q6J("ngIf",!!t.cliente.cellulare),e.xp6(3),e.Oqu(e.lcZ(38,67,"bo.cliente.proprieta.interessi")+": "),e.xp6(3),e.Oqu(t.cliente.interessi?t.cliente.interessi:"---"),e.xp6(3),e.Oqu(e.lcZ(44,69,"bo.cliente.proprieta.note")+": "),e.xp6(3),e.Oqu(t.cliente.note?t.cliente.note:"---"),e.xp6(4),e.Oqu(e.lcZ(51,71,"bo.cliente.proprieta.mercato")+": "),e.xp6(3),e.Oqu(null!=t.cliente.mercato&&t.cliente.mercato.descrizione?t.cliente.mercato.descrizione:"---"),e.xp6(3),e.Oqu(e.lcZ(57,73,"bo.cliente.proprieta.canaleVendita")+": "),e.xp6(3),e.Oqu(null!=t.cliente.canaleVendita&&t.cliente.canaleVendita.descrizione?t.cliente.canaleVendita.descrizione:"---"),e.xp6(3),e.Oqu(e.lcZ(63,75,"bo.cliente.proprieta.fonte")+": "),e.xp6(3),e.Oqu(null!=t.cliente.fonte&&t.cliente.fonte.descrizione?t.cliente.fonte.descrizione:"---"),e.xp6(4),e.Oqu(e.lcZ(70,77,"bo.cliente.proprieta.lingua")+": "),e.xp6(3),e.Oqu(null!=t.cliente.lingua&&t.cliente.lingua.nome?t.cliente.lingua.nome:"---"),e.xp6(3),e.Oqu(e.lcZ(76,79,"bo.cliente.proprieta.nazione")+": "),e.xp6(3),e.Oqu(t.cliente.nazione?t.cliente.nazione:"---"),e.xp6(3),e.Oqu(e.lcZ(82,81,"bo.cliente.proprieta.interessi")+": "),e.xp6(3),e.Oqu(t.cliente.interessi?t.cliente.interessi:"---"),e.xp6(4),e.Oqu(e.lcZ(89,83,"bo.cliente.proprieta.password")+": "),e.xp6(3),e.Oqu(t.cliente.passwordMask?t.cliente.passwordMask:"---"),e.xp6(3),e.Oqu(e.lcZ(95,85,"bo.cliente.proprieta.codiceTessera")+": "),e.xp6(3),e.Oqu(t.cliente.codiceTessera?t.cliente.codiceTessera:"---"),e.xp6(3),e.Oqu(e.lcZ(101,87,"bo.cliente.proprieta.sconto")+": "),e.xp6(3),e.Oqu(t.cliente.sconto?t.cliente.sconto:"---"),e.xp6(4),e.Oqu(e.lcZ(108,89,"bo.cliente.proprieta.citta")+": "),e.xp6(3),e.Oqu(t.cliente.citta?t.cliente.citta:"---"),e.xp6(3),e.Oqu(e.lcZ(114,91,"bo.cliente.proprieta.cap")+": "),e.xp6(3),e.Oqu(t.cliente.CAP?t.cliente.CAP:"---"),e.xp6(3),e.Oqu(e.lcZ(120,93,"bo.cliente.proprieta.provincia")+": "),e.xp6(3),e.Oqu(t.cliente.provincia?t.cliente.provincia:"---"),e.xp6(4),e.Oqu(e.lcZ(127,95,"bo.cliente.proprieta.indirizzo")+": "),e.xp6(3),e.Oqu(t.cliente.indirizzo?t.cliente.indirizzo:"---"),e.xp6(3),e.Oqu(e.lcZ(133,97,"bo.cliente.proprieta.codiceFiscale")+": "),e.xp6(3),e.Oqu(t.cliente.codiceFiscale?t.cliente.codiceFiscale:"---"),e.xp6(3),e.Oqu(e.lcZ(139,99,"bo.cliente.proprieta.partitaIva")+": "),e.xp6(3),e.Oqu(t.cliente.partitaIva?t.cliente.partitaIva:"---"),e.xp6(4),e.Oqu(e.lcZ(146,101,"bo.cliente.proprieta.privacy")+": "),e.xp6(2),e.Q6J("checked",t.cliente.privacy)("disabled",!0),e.xp6(3),e.Oqu(e.lcZ(151,103,"bo.cliente.proprieta.newsletter")+": "),e.xp6(2),e.Q6J("checked",t.cliente.newsletter)("disabled",!0),e.xp6(2),e.Q6J("placeholder",e.lcZ(155,105,"sbm.clienti.urlCheckIn"))("url",t.getUrlCheckIn()),e.xp6(3),e.Q6J("disabled",!t.cliente.email),e.xp6(1),e.Oqu(e.lcZ(159,107,"sbm.clienti.email")),e.xp6(2),e.Q6J("disabled",!t.cliente.cellulare),e.xp6(1),e.Oqu(e.lcZ(162,109,"sbm.clienti.sms")),e.xp6(3),e.Oqu(e.lcZ(165,111,"sbm.clienti.anonimizza"))}}function Ay(i,o){if(1&i&&(e.TgZ(0,"mat-option",71),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function wy(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}const Vc=function(){return["nome"]};function zy(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",45)(2,"div",46)(3,"mat-card",47)(4,"mat-card-title"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"mat-form-field",48)(8,"input",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.cognome=a)}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"mat-form-field",48)(11,"input",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.nome=a)}),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"mat-form-field",48)(14,"mat-select",50),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.tipoAnagrafica=a)}),e.ALo(15,"translate"),e.YNc(16,Ay,3,4,"mat-option",51),e.ALo(17,"selectEnum"),e.qZA()(),e.TgZ(18,"mat-form-field",48)(19,"input",52),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.dataNascita=a)}),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"mat-datepicker-toggle",53),e.TgZ(22,"mat-datepicker-toggle",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clienteEditing.dataNascita=null)}),e.TgZ(23,"mat-icon",55),e._uU(24,"clear"),e.qZA()(),e._UZ(25,"mat-datepicker",56,57),e.qZA(),e.TgZ(27,"app-view-select",58),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.tipologia=a)}),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"app-view-select",59),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.mercato=a)}),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"app-view-select",59),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.canaleVendita=a)}),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"app-view-select",59),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.fonte=a)}),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"mat-form-field",48)(36,"input",60),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.sconto=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clienteEditing.sconto=a.utility.clamp(a.clienteEditing.sconto,0,100))}),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"mat-form-field",48)(39,"input",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.codiceTessera=a)}),e.ALo(40,"translate"),e.qZA()()()(),e.TgZ(41,"div",46)(42,"mat-card",47)(43,"mat-card-title"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"app-view-select",61),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.nazioneObject=a)}),e.ALo(47,"translate"),e.qZA(),e.TgZ(48,"app-view-select",58),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.lingua=a)}),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"app-autocomplete",62),e.NdJ("updateOptionsEvent",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onUpdateOptionsComune(a))})("optionSelectedEvent",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onComuneSelected(a))})("onInput",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.citta=a)}),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"div",34)(53,"div",63)(54,"mat-form-field",48)(55,"input",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.CAP=a)}),e.ALo(56,"translate"),e.qZA()()(),e.TgZ(57,"div",63)(58,"mat-form-field",48)(59,"input",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.provincia=a)}),e.ALo(60,"translate"),e.qZA()()()(),e.TgZ(61,"mat-form-field",48)(62,"input",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.indirizzo=a)}),e.ALo(63,"translate"),e.qZA()(),e.TgZ(64,"mat-form-field",48)(65,"input",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.codiceFiscale=a)}),e.ALo(66,"translate"),e.qZA()(),e.TgZ(67,"mat-form-field",48)(68,"input",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.partitaIva=a)}),e.ALo(69,"translate"),e.qZA()()()()(),e.TgZ(70,"div",64)(71,"div",46)(72,"mat-card",47)(73,"mat-card-title"),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"mat-form-field",48)(77,"input",65),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.email=a)}),e.ALo(78,"translate"),e.qZA()(),e.TgZ(79,"mat-form-field",48)(80,"input",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.cellulare=a)}),e.ALo(81,"translate"),e.qZA()(),e.TgZ(82,"div",66)(83,"mat-checkbox",67),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.privacy=a)}),e._uU(84),e.ALo(85,"translate"),e.qZA()(),e.TgZ(86,"div")(87,"mat-checkbox",67),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.newsletter=a)}),e._uU(88),e.ALo(89,"translate"),e.qZA()()()(),e.TgZ(90,"div",46)(91,"mat-card",47)(92,"mat-card-title"),e._uU(93),e.ALo(94,"translate"),e.qZA(),e.TgZ(95,"div",30),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"textarea",68),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.note=a)}),e.qZA(),e.TgZ(99,"div"),e._uU(100),e.ALo(101,"translate"),e.qZA(),e.TgZ(102,"textarea",68),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.clienteEditing.interessi=a)}),e.qZA()()()(),e.TgZ(103,"div",30)(104,"button",69),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.YNc(107,wy,3,3,"button",70),e.qZA()()}if(2&i){const t=e.MAs(26),n=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,67,"sbm.clienti.informazioniCliente")," "),e.xp6(3),e.Q6J("placeholder",e.lcZ(9,69,"bo.cliente.proprieta.cognome"))("ngModel",n.clienteEditing.cognome),e.xp6(3),e.Q6J("placeholder",e.lcZ(12,71,"bo.cliente.proprieta.nome"))("ngModel",n.clienteEditing.nome),e.xp6(3),e.Q6J("ngModel",n.clienteEditing.tipoAnagrafica)("placeholder",e.lcZ(15,73,"bo.cliente.proprieta.tipoAnagrafica")),e.xp6(2),e.Q6J("ngForOf",e.xi3(17,75,n.enumTipoAnagrafica,"tipoAnagrafica")),e.xp6(3),e.Q6J("matDatepicker",t)("placeholder",e.lcZ(20,78,"bo.cliente.proprieta.dataNascita"))("ngModel",n.clienteEditing.dataNascita),e.xp6(2),e.Q6J("for",t),e.xp6(4),e.Q6J("startAt",n.utility.isNullDate(n.clienteEditing.dataNascita)?n.today:null),e.xp6(2),e.Q6J("dataLoader",n.apiService.getTipiClienteViewSelect())("value",n.clienteEditing.tipologia)("placeholder",e.lcZ(28,80,"bo.cliente.proprieta.tipologia")),e.xp6(2),e.Q6J("dataLoader",n.apiService.getParametriRicercaViewSelect(n.getParametriRicercaMercatoRQ))("value",n.clienteEditing.mercato)("placeholder",e.lcZ(30,82,"bo.cliente.proprieta.mercato")),e.xp6(2),e.Q6J("dataLoader",n.apiService.getParametriRicercaViewSelect(n.getParametriRicercaCanaleVenditaRQ))("value",n.clienteEditing.canaleVendita)("placeholder",e.lcZ(32,84,"bo.cliente.proprieta.canaleVendita")),e.xp6(2),e.Q6J("dataLoader",n.apiService.getParametriRicercaViewSelect(n.getParametriRicercaFonteRQ))("value",n.clienteEditing.fonte)("placeholder",e.lcZ(34,86,"bo.cliente.proprieta.fonte")),e.xp6(3),e.Q6J("placeholder",e.lcZ(37,88,"bo.cliente.proprieta.sconto"))("ngModel",n.clienteEditing.sconto),e.xp6(3),e.Q6J("placeholder",e.lcZ(40,90,"bo.cliente.proprieta.codiceTessera"))("ngModel",n.clienteEditing.codiceTessera),e.xp6(5),e.hij(" ",e.lcZ(45,92,"sbm.clienti.indirizzoLocalizzazione")," "),e.xp6(2),e.Q6J("dataLoader",n.apiService.getNazioniViewSelect())("value",n.clienteEditing.nazioneObject)("placeholder",e.lcZ(47,94,"bo.cliente.proprieta.nazione")),e.xp6(2),e.Q6J("dataLoader",n.apiService.getLingueViewSelect(null,!1))("value",n.clienteEditing.lingua)("placeholder",e.lcZ(49,96,"bo.cliente.proprieta.lingua")),e.xp6(2),e.Q6J("dataLoader",n.dataLoaderComune)("viewProperties",e.DdM(128,Vc))("viewPropertiesSelected",e.DdM(129,Vc))("label",e.lcZ(51,98,"bo.cliente.proprieta.citta"))("selected",n.selectedComune),e.xp6(5),e.Q6J("placeholder",e.lcZ(56,100,"bo.cliente.proprieta.cap"))("ngModel",n.clienteEditing.CAP),e.xp6(4),e.Q6J("placeholder",e.lcZ(60,102,"bo.cliente.proprieta.provincia"))("ngModel",n.clienteEditing.provincia),e.xp6(3),e.Q6J("placeholder",e.lcZ(63,104,"bo.cliente.proprieta.indirizzo"))("ngModel",n.clienteEditing.indirizzo),e.xp6(3),e.Q6J("placeholder",e.lcZ(66,106,"bo.cliente.proprieta.codiceFiscale"))("ngModel",n.clienteEditing.codiceFiscale),e.xp6(3),e.Q6J("placeholder",e.lcZ(69,108,"bo.cliente.proprieta.partitaIva"))("ngModel",n.clienteEditing.partitaIva),e.xp6(6),e.hij(" ",e.lcZ(75,110,"sbm.clienti.contattiNotifiche")," "),e.xp6(3),e.Q6J("placeholder",e.lcZ(78,112,"bo.cliente.proprieta.email"))("ngModel",n.clienteEditing.email),e.xp6(3),e.Q6J("placeholder",e.lcZ(81,114,"bo.cliente.proprieta.cellulare"))("ngModel",n.clienteEditing.cellulare),e.xp6(3),e.Q6J("ngModel",n.clienteEditing.privacy),e.xp6(1),e.Oqu(e.lcZ(85,116,"bo.cliente.proprieta.privacy")),e.xp6(3),e.Q6J("ngModel",n.clienteEditing.newsletter),e.xp6(1),e.Oqu(e.lcZ(89,118,"bo.cliente.proprieta.newsletter")),e.xp6(5),e.hij(" ",e.lcZ(94,120,"sbm.clienti.noteInteressi")," "),e.xp6(3),e.Oqu(e.lcZ(97,122,"bo.cliente.proprieta.note")),e.xp6(2),e.Q6J("ngModel",n.clienteEditing.note),e.xp6(2),e.Oqu(e.lcZ(101,124,"bo.cliente.proprieta.interessi")),e.xp6(2),e.Q6J("ngModel",n.clienteEditing.interessi),e.xp6(3),e.Oqu(e.lcZ(106,126,"globals.salva")),e.xp6(2),e.Q6J("ngIf",n.isEliminazioneAbilitata)}}function My(i,o){if(1&i&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",74),e._uU(4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.clienti.attivita")),e.xp6(3),e.Oqu(t.numeroAttivita)}}function qy(i,o){if(1&i&&(e.TgZ(0,"span",80),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.ora)}}function Py(i,o){if(1&i&&(e.TgZ(0,"div",77)(1,"span",78),e._uU(2),e.qZA(),e.YNc(3,qy,2,1,"span",79),e.TgZ(4,"span",18),e._uU(5),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.icona),e.xp6(1),e.Q6J("ngIf",!!t.ora),e.xp6(2),e.Oqu(t.descrizione)}}function ky(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"h5"),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"momentFormat"),e.qZA(),e.YNc(5,Py,6,3,"div",76),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,e.Dn7(4,4,t.data,"dddd, D MMMM YYYY",n.getLocale()))),e.xp6(3),e.Q6J("ngForOf",t.attivita)}}function Sy(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ky,6,8,"div",75),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.attivita)}}function yy(i,o){1&i&&(e.TgZ(0,"div",81)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.clienti.nessunaAttivita")))}function Jy(i,o){if(1&i&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",74),e._uU(4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.clienti.prenotazioni")),e.xp6(3),e.Oqu(null!=t.prenotazioni?t.prenotazioni.length:0)}}function Ey(i,o){if(1&i&&(e._UZ(0,"app-url",39),e.ALo(1,"translate")),2&i){const t=e.oxw(2);e.Q6J("placeholder",e.lcZ(1,2,"sbm.clienti.urlCheckIn"))("url",t.getUrlCheckIn())}}function Ny(i,o){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,Ey,2,4,"app-url",82),e._UZ(2,"app-prenotazioni",83),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!!t.cliente.email),e.xp6(1),e.Q6J("_data",t.prenotazioni)}}function Oy(i,o){if(1&i&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",74),e._uU(4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.clienti.preventivi")),e.xp6(3),e.Oqu(null!=t.preventivi?t.preventivi.length:0)}}function Ly(i,o){if(1&i&&e._UZ(0,"app-preventivi",84),2&i){const t=e.oxw();e.Q6J("cliente",t.cliente)("_data",t.preventivi)}}function Dy(i,o){if(1&i&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",74),e._uU(4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.clienti.richieste")),e.xp6(3),e.Oqu(null!=t.richieste?t.richieste.length:0)}}function Iy(i,o){if(1&i&&e._UZ(0,"app-richieste",84),2&i){const t=e.oxw();e.Q6J("cliente",t.cliente)("_data",t.richieste)}}function Qy(i,o){if(1&i&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",74),e._uU(4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.clienti.transazioni")),e.xp6(3),e.Oqu(null!=t.transazioni?t.transazioni.length:0)}}function Uy(i,o){if(1&i&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",74),e._uU(4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.clienti.sondaggi")),e.xp6(3),e.Oqu(null!=t.riposteSondaggi?t.riposteSondaggi.length:0)}}function Yy(i,o){if(1&i&&(e.TgZ(0,"div",6),e._UZ(1,"app-risposte-sondaggi",10),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("data",t.riposteSondaggi)}}function Ry(i,o){if(1&i&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",74),e._uU(4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.clienti.notificheEmail")),e.xp6(3),e.Oqu(null!=t.notificheEmail?t.notificheEmail.length:0)}}function Fy(i,o){if(1&i&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",74),e._uU(4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.clienti.voucher")),e.xp6(3),e.Oqu(null!=t.voucher?t.voucher.length:0)}}function Hy(i,o){if(1&i&&(e.TgZ(0,"div",6),e._UZ(1,"app-codici-promozionali",10),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("data",t.voucher)}}const Ky=function(i){return{"right-col":i}},Gy=function(i){return{"pr-3 pl-3":i}},$y=function(i){return{"mt-2":i}};class xi extends f.H{set _cliente(o){null!=o&&(this.setIsLoading(!0),this.cliente=o,this.cliente.nazione&&this.apiService.getNazioniFilter(d.k$g.fromFilter("nomeItaliano",c.Hp.Equal,this.cliente.nazione,c.NM.String)).subscribe(t=>{t.data.length>0&&(this.cliente.nazioneObject=t.data[0])}),this.cliente.citta?this.apiService.getComuniFilter(d.k$g.fromFilter("nome",c.Hp.Equal,this.cliente.citta,c.NM.String)).subscribe(t=>{if(t.data.length>0)this.selectedComune=t.data[0];else{let n=new v.AlI;n.nome=this.cliente.citta,this.selectedComune=n}}):this.selectedComune=new v.AlI,this.selectedIndex=0,this.visibleTab=0,this.prenotazioni=[],this.preventivi=[],this.richieste=[],this.transazioni=[],this.riposteSondaggi=[],this.notificheEmail=[],this.voucher=[],this.attivita=[],this.numeroAttivita=0,this.apiService.getClienteDetails(this.cliente.oid).subscribe(t=>{this.prenotazioni=t.data.prenotazioni,this.preventivi=t.data.preventivi,this.richieste=t.data.richieste,this.transazioni=t.data.transazioni,this.riposteSondaggi=t.data.risposteSondaggi,this.notificheEmail=t.data.notificheEmail,this.voucher=t.data.voucher,this.attivita=t.data.attivita,this.numeroAttivita=this.attivita.reduce((n,a)=>n+a.attivita.length,0),this.setIsLoading(!1)}))}constructor(o,t,n,a,l){super(),this.sessionService=o,this.utility=t,this.apiService=n,this.containerService=a,this.cdRef=l,this.backEvent=new e.vpe,this.selectedIndex=0,this.visibleTab=0,this.prenotazioni=[],this.preventivi=[],this.richieste=[],this.transazioni=[],this.riposteSondaggi=[],this.notificheEmail=[],this.voucher=[],this.attivita=[],this.numeroAttivita=0,this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaFonteRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Fonte.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.selectedComune=new v.AlI,this.enumTipoAnagrafica=c.dp}ngOnInit(){this.isAbilitaModificaCliente=this.sessionService.sessione.albergo.isAbilitaModificaCliente}sendEmail(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;n.cliente=this.cliente,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&(this.setIsLoading(!0),this.apiService.getClienteDetails(this.cliente.oid).subscribe(l=>{this.attivita=l.data.attivita,this.numeroAttivita=this.attivita.reduce((r,p)=>r+p.attivita.length,0),this.notificheEmail=l.data.notificheEmail,this.setIsLoading(!1)}))})}sendSms(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(ct,o),n=t.componentInstance;n.numero=this.cliente.cellulare,n.dialogRef=t}getUrlCheckIn(){return window.location.origin+"/self-checkin?oidAlbergo="+this.sessionService.getOidAlbergo()+"&email="+this.cliente.email}edit(){this.clienteEditing=Object.assign({},this.cliente)}save(){this.setIsLoading(!0),this.clienteEditing.isNotificaGestionale=!0,null!=this.clienteEditing.dataNascita&&(this.clienteEditing.dataNascita=this.getDate(this.clienteEditing.dataNascita)),this.apiService.setCliente(this.clienteEditing).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.clienti.clienteSalvato").then(()=>{this.cliente=Object.assign({},this.clienteEditing),this.clienteEditing=null,this.containerService.scrollToTop()})})}onUpdateOptionsComune(o){this.dataLoaderComune=new d.hkX(this.apiService.getComuniFilter(o))}onComuneSelected(o){null!=o&&o.oid>0&&(this.clienteEditing.citta=o.nome,this.clienteEditing.CAP=o.cap,this.clienteEditing.provincia=o.provincia)}addAppuntamento(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(tn,o),n=t.componentInstance;n.cliente=this.cliente,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.apiService.getClienteDetails(this.cliente.oid).subscribe(l=>{this.attivita=l.data.attivita,this.numeroAttivita=this.attivita.reduce((r,p)=>r+p.attivita.length,0),this.setIsLoading(!1)})})}onTabChange(){this.visibleTab=this.selectedIndex,this.cdRef.detectChanges()}anonimizza(){this.showDialogConfirm("globals.effettuareOperazione").then(o=>{this.setIsLoading(!0),this.apiService.anonimizzaCliente(this.cliente.oid).subscribe(t=>{this.cliente=t.data;let n=new v.AlI;n.nome=this.cliente.citta,this.selectedComune=n,null!=this.clienteEditing&&this.edit(),this.setIsLoading(!1)})},o=>{})}delete(){this.showDialogConfirm("sbm.clienti.eliminareCliente").then(o=>{this.setIsLoading(!0),this.apiService.deleteCliente(this.cliente.oid).subscribe(t=>{(null==t.errori||0==t.errori.length)&&this.backEvent.emit()})},o=>{})}}function By(i,o){if(1&i&&(e.TgZ(0,"mat-option",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Vy(i,o){if(1&i&&(e.TgZ(0,"mat-option",57),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function Xy(i,o){if(1&i&&(e.TgZ(0,"mat-option",57),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function jy(i,o){if(1&i&&(e.TgZ(0,"mat-option",57),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function Wy(i,o){1&i&&(e.TgZ(0,"div",58)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.clienti.nessunCliente")))}function eJ(i,o){1&i&&e._UZ(0,"mat-header-cell")}function tJ(i,o){1&i&&(e.TgZ(0,"mat-cell",59)(1,"button",60)(2,"i",61),e._uU(3,"edit"),e.qZA()()())}function iJ(i,o){1&i&&e._UZ(0,"mat-header-cell")}function oJ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",59)(1,"button",62),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.openCalcolaRetta(r))}),e.TgZ(2,"i",61),e._uU(3,"add"),e.qZA()()()}}function nJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.nome")))}function aJ(i,o){if(1&i&&(e.TgZ(0,"span",68),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Udp("background-color",t.mercato.coloreHex),e.Q6J("appInvertColor",t.mercato.coloreHex),e.xp6(1),e.hij(" ",t.mercato.descrizione," ")}}function lJ(i,o){if(1&i&&(e.TgZ(0,"span",68),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Udp("background-color",t.canaleVendita.coloreHex),e.Q6J("appInvertColor",t.canaleVendita.coloreHex),e.xp6(1),e.hij(" ",t.canaleVendita.descrizione," ")}}function rJ(i,o){if(1&i&&(e.TgZ(0,"span",69),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Udp("background-color",t.fonte.coloreHex),e.Q6J("appInvertColor",t.fonte.coloreHex),e.xp6(1),e.hij(" ",t.fonte.descrizione," ")}}function cJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",64)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"span",65),e.YNc(5,aJ,2,4,"span",66),e.YNc(6,lJ,2,4,"span",66),e.YNc(7,rJ,2,4,"span",67),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.nome),e.xp6(2),e.Q6J("ngIf",null!=t.mercato),e.xp6(1),e.Q6J("ngIf",null!=t.canaleVendita),e.xp6(1),e.Q6J("ngIf",null!=t.fonte)}}function sJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.cognome")))}function pJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.cognome," ")}}function dJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.tipoAnagrafica")))}function mJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoAnagrafica,t.tipoAnagrafica,"tipoAnagrafica"))," ")}}function _J(i,o){1&i&&(e.TgZ(0,"mat-header-cell",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.cellulare")))}function uJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.cellulare," ")}}function gJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.email")))}function hJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.email," ")}}function fJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.lingua")))}function CJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.lingua?t.lingua.nome:""," ")}}function bJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.dataUltimoPreventivo")))}function vJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.dataUltimoPreventivo,"dd/MM/yyyy")," ")}}function TJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.dataUltimaPrenotazione")))}function xJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.dataUltimaPrenotazione,"dd/MM/yyyy")," ")}}function ZJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",70),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.privacy")))}function AJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell",70),e._UZ(1,"mat-checkbox",71),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.privacy)}}function wJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",70),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.newsletter")))}function zJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell",70),e._UZ(1,"mat-checkbox",71),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.newsletter)}}function MJ(i,o){1&i&&e._UZ(0,"mat-header-cell")}function qJ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",72)(1,"button",62),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",73),e._uU(3,"delete"),e.qZA()()()}}function PJ(i,o){1&i&&e._UZ(0,"mat-header-row",74)}function kJ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",75),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function SJ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-clienti-edit",76),e.NdJ("backEvent",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBack())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("_cliente",t.cliente)("isEliminazioneAbilitata",t.isEliminazioneAbilitata)}}xi.\u0275fac=function(o){return new(o||xi)(e.Y36(j.m),e.Y36(C.t),e.Y36(A.s),e.Y36(te.J),e.Y36(e.sBO))},xi.\u0275cmp=e.Xpm({type:xi,selectors:[["app-clienti-edit"]],inputs:{_cliente:"_cliente",isEliminazioneAbilitata:"isEliminazioneAbilitata"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:34,vars:24,consts:[["class","left-col pr-4 pl-4 pt-3 pb-3 h-100 border-right sticky-top",4,"ngIf"],["class","p-3",4,"ngIf"],[3,"ngClass"],[3,"ngClass","hidden"],[1,"clientiTabGroup",3,"selectedIndex","ngClass","selectedIndexChange","selectedTabChange"],["mat-tab-label",""],[1,"p-3"],[4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"cliente","_data",4,"ngIf"],[3,"data"],[3,"data","scrollToTop"],[1,"left-col","pr-4","pl-4","pt-3","pb-3","h-100","border-right","sticky-top"],[1,"text-center","mb-4"],[1,"mb-0"],[3,"class",4,"ngIf"],["href","#",1,"color-pink","font-weight-bold",3,"click"],[1,"material-icons","align-middle"],[1,"d-inline-block","align-middle"],[1,"d-inline-block","mr-3","mt-4"],["id","cliente-edit-button","mat-mini-fab","","color","primary",3,"click"],[1,"material-icons"],[1,"mt-2","font-small"],["mat-mini-fab","","color","primary",3,"disabled","click"],[1,"fa","fa-whatsapp","whatsappIcon"],["mat-mini-fab","","color","primary",3,"click"],[1,"d-inline-block","mt-4"],[1,"font-small"],[1,"font-weight-bold"],[1,"font-small","mt-3"],[1,"mt-3"],["color","primary","disabled","",1,"cliente-edit-checkbox",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],[1,"border","rounded","p-3","bg-white","mt-3"],[1,"row"],[1,"col-4"],["mat-icon-button","","class","whatsappButton ml-2 mb-1 align-middle",3,"click",4,"ngIf"],[1,"font-weight-bold","align-middle"],["color","primary",1,"d-inline-block","align-middle","mt-2","ml-1",3,"checked","disabled"],[3,"placeholder","url"],[1,"mb-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","primary",3,"click"],["mat-icon-button","",1,"whatsappButton","ml-2","mb-1","align-middle",3,"click"],[1,"fa","fa-whatsapp",3,"ngClass"],[1,"row","mr-n1","ml-n1"],[1,"col-6","pr-1","pl-1","flex"],[1,"border","mat-elevation-z0","h-100"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],[3,"startAt"],["dataNascita",""],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nomeItaliano",3,"dataLoader","value","placeholder","valueChange"],[3,"dataLoader","viewProperties","viewPropertiesSelected","label","selected","updateOptionsEvent","optionSelectedEvent","onInput"],[1,"col-6"],[1,"row","mr-n1","ml-n1","mt-3"],["autocompleteOff","","matInput","","type","email",3,"placeholder","ngModel","ngModelChange"],[1,"mt-2"],["color","primary",3,"ngModel","ngModelChange"],["rows","5",1,"border","rounded","p-3","w-100",3,"ngModel","ngModelChange"],["id","cliente-save-button","mat-flat-button","","color","primary",1,"mr-1",3,"click"],["id","cliente-delete-button","mat-flat-button","","color","blank",3,"click",4,"ngIf"],[3,"value"],["id","cliente-delete-button","mat-flat-button","","color","blank",3,"click"],[1,"d-inline-block","align-middle","mr-2"],[1,"d-inline-block","align-middle","numero"],["class","p-3",4,"ngFor","ngForOf"],["class","mt-2 pl-4",4,"ngFor","ngForOf"],[1,"mt-2","pl-4"],[1,"material-icons","d-inline-block","align-middle","mr-2","color-pink","attivita-icon"],["class","mr-2 d-inline-block align-middle rounded-xl background-color-pink p-1 ora",4,"ngIf"],[1,"mr-2","d-inline-block","align-middle","rounded-xl","background-color-pink","p-1","ora"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[3,"placeholder","url",4,"ngIf"],[3,"_data"],[3,"cliente","_data"]],template:function(o,t){1&o&&(e.YNc(0,vy,105,72,"div",0),e.YNc(1,Zy,166,113,"div",1),e.TgZ(2,"div",2),e.YNc(3,zy,108,130,"div",1),e.TgZ(4,"div",3)(5,"mat-tab-group",4),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a})("selectedTabChange",function(){return t.onTabChange()}),e.TgZ(6,"mat-tab"),e.YNc(7,My,5,4,"ng-template",5),e.TgZ(8,"div",6),e.YNc(9,Sy,2,1,"ng-container",7),e.YNc(10,yy,4,3,"div",8),e.qZA()(),e.TgZ(11,"mat-tab"),e.YNc(12,Jy,5,4,"ng-template",5),e.YNc(13,Ny,3,2,"div",1),e.qZA(),e.TgZ(14,"mat-tab"),e.YNc(15,Oy,5,4,"ng-template",5),e.YNc(16,Ly,1,2,"app-preventivi",9),e.qZA(),e.TgZ(17,"mat-tab"),e.YNc(18,Dy,5,4,"ng-template",5),e.YNc(19,Iy,1,2,"app-richieste",9),e.qZA(),e.TgZ(20,"mat-tab"),e.YNc(21,Qy,5,4,"ng-template",5),e.TgZ(22,"div",6),e._UZ(23,"app-transazioni",10),e.qZA()(),e.TgZ(24,"mat-tab"),e.YNc(25,Uy,5,4,"ng-template",5),e.YNc(26,Yy,2,1,"div",1),e.qZA(),e.TgZ(27,"mat-tab"),e.YNc(28,Ry,5,4,"ng-template",5),e.TgZ(29,"div",6),e._UZ(30,"app-notifiche-email",11),e.qZA()(),e.TgZ(31,"mat-tab"),e.YNc(32,Fy,5,4,"ng-template",5),e.YNc(33,Hy,2,1,"div",1),e.qZA()()()()),2&o&&(e.Q6J("ngIf",t.isAbilitaModificaCliente),e.xp6(1),e.Q6J("ngIf",!t.isAbilitaModificaCliente),e.xp6(1),e.Q6J("ngClass",e.VKq(18,Ky,t.isAbilitaModificaCliente)),e.xp6(1),e.Q6J("ngIf",null!=t.clienteEditing),e.xp6(1),e.Q6J("ngClass",e.VKq(20,Gy,!t.isAbilitaModificaCliente))("hidden",null!=t.clienteEditing),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex)("ngClass",e.VKq(22,$y,t.isAbilitaModificaCliente)),e.xp6(4),e.Q6J("ngIf",null!=t.attivita&&t.attivita.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.attivita&&0==t.attivita.length),e.xp6(3),e.Q6J("ngIf",1==t.visibleTab),e.xp6(3),e.Q6J("ngIf",2==t.visibleTab),e.xp6(3),e.Q6J("ngIf",3==t.visibleTab),e.xp6(4),e.Q6J("data",t.transazioni),e.xp6(3),e.Q6J("ngIf",5==t.visibleTab),e.xp6(4),e.Q6J("data",t.notificheEmail)("scrollToTop",!0),e.xp6(3),e.Q6J("ngIf",7==t.visibleTab))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,g.x8,qe.S$,qe.mi,ee.SK,ee.gz,ee.R7,Ue.Hw,_.Fj,_.wV,_.JJ,_.On,Lc.Y,ne.d,Be,At,bi,vi,Nt,Ot,gt,Ti,m.rS,m.uU,Te.A,K.H,z.X$],styles:[".clientiTabGroup .mat-tab-body-content{overflow-x:hidden!important}.whatsappButton[_ngcontent-%COMP%]{width:18px!important;height:18px!important;line-height:18px!important;color:#25d366}.whatsappIcon[_ngcontent-%COMP%]{font-size:24px;line-height:24px}.whatsappIconOld[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.numero[_ngcontent-%COMP%]{background-color:#e6618d;color:#fff;padding-right:7px;padding-left:7px;padding-top:1px;border-radius:10px;font-size:14px;text-align:center;font-weight:400}textarea[_ngcontent-%COMP%]{resize:none}.flex[_ngcontent-%COMP%]{flex:1}mat-card-title[_ngcontent-%COMP%]{background-color:#eee;padding:1rem;margin:-1rem -1rem 1rem;margin-top:-1rem!important;font-size:22px;padding:.5rem 1rem}.urlCheckIn[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.left-col[_ngcontent-%COMP%]{width:30%;background-color:#fafafa;display:inline-block;vertical-align:top}.right-col[_ngcontent-%COMP%]{width:70%;background-color:#fff;display:inline-block;vertical-align:top;min-height:100%}.ora[_ngcontent-%COMP%]{font-size:14px;line-height:14px}.attivita-icon[_ngcontent-%COMP%]{font-size:20px;line-height:20px}  .cliente-edit-checkbox.mat-checkbox-disabled.mat-checkbox-checked .mat-checkbox-background{background-color:#e91e63!important}  .cliente-edit-checkbox.mat-checkbox-disabled .mat-checkbox-label{color:#000000de!important}  .cliente-edit-checkbox.mat-checkbox-disabled:not(.mat-checkbox-checked) .mat-checkbox-frame{border-color:#0000008a!important}"]});class gn extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.sessionService=l,this.pageSize=25,this.displayedColumns=["edit","add","nome","cognome","tipoAnagrafica","cellulare","email","lingua.nome","dataUltimoPreventivo","dataUltimaPrenotazione","privacy","newsletter","delete"],this.showTable=!0,this.showFilterAdv=!1,this.parametriRicercaMercato=[],this.parametriRicercaCanaleVendita=[],this.parametriRicercaFonte=[],this.search=!1,this.enumTipoAnagrafica=c.dp,this.isEliminazioneAbilitata=!0}ngOnInit(){this.headerService.setTitle("sbm.clienti.title"),this.rq=new d.k$g,this.rq.skip=0,this.rq.take=this.pageSize,this.sorting=new d.aQR("cognome",c.nI.Desc),this.filters=[],this.filters.push(new d.wn$("cognome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("email",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cellulare",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("dataUltimaPrenotazione",c.Hp.IsNotNull)),this.filters.push(new d.wn$("mercato.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("canaleVendita.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("privacy",c.Hp.IsTrue,null,null,!1,c.Hp.IsFalse)),this.filters.push(new d.wn$("newsletter",c.Hp.IsTrue,null,null,!1,c.Hp.IsFalse)),this.filters.push(new d.wn$("dataUltimoSondaggio",c.Hp.IsNotNull)),this.filters.push(new d.wn$("dataUltimoPreventivo",c.Hp.IsNotNull)),this.filters.push(new d.wn$("dataUltimoVoucher",c.Hp.IsNotNull)),this.filters.push(new d.wn$("fonte.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tipologia.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tipoAnagrafica",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("lingua.oid",c.Hp.Equal,"",c.NM.Number)),this.apiService.getParametriRicercaFilter(d.k$g.fromFilter("isAttivo",c.Hp.IsTrue,null,null,new d.aQR("ordinamento"))).subscribe(t=>{this.parametriRicercaMercato=t.data.filter(n=>n.tipoParametro==c.E7.Mercato),this.parametriRicercaCanaleVendita=t.data.filter(n=>n.tipoParametro==c.E7.CanaleVendita),this.parametriRicercaFonte=t.data.filter(n=>n.tipoParametro==c.E7.Fonte)}),this.sessionService.isCrmAttivo()||(this.displayedColumns=this.displayedColumns.filter(t=>"add"!=t));let o=this.sessionService.getPermessiUtente();null!=o&&(this.isEliminazioneAbilitata=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.EliminazioneAnagrafiche))),this.isEliminazioneAbilitata||(this.displayedColumns=this.displayedColumns.filter(t=>"delete"!=t))}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}onSearch(o,t,n,a,l=!0){null!=t?(this.search=!l,this.filters[o].value=t):null!=n?(this.filters[o].active=n,this.filters[o].inverted=!1):(this.filters[o].inverted=a,this.filters[o].active=!1),0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onSortChange(o){this.sorting.field=o.active,this.sorting.type="asc"==o.direction?c.nI.Asc:c.nI.Desc,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}download(){this.search||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[this.sorting],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getClientiFilter(this.rq).subscribe(o=>{for(let t of o.data)try{null!=t.mercato&&(t.mercato.coloreHex=Z(t.mercato.colore).hex()),null!=t.canaleVendita&&(t.canaleVendita.coloreHex=Z(t.canaleVendita.colore).hex()),null!=t.fonte&&(t.fonte.coloreHex=Z(t.fonte.colore).hex())}catch(n){}this.data=o.data,this.totalRecords=o.totalRecords,this.search?this.search=!1:this.setIsLoading(!1)})}edit(o){this.cliente=Object.assign({},o),this.showTable=!1,this.headerService.clearTitle(),this.containerService.scrollToTop()}onBack(){this.showTable=!0,this.headerService.setTitle("sbm.clienti.title"),this.containerService.scrollToTop(),this.download()}export(){this.setIsLoading(!0);let o=new d.k$g;o.sorting=[this.sorting],o.filters=this.utility.getFilters(this.filters),this.apiService.getClientiFilter(o).subscribe(t=>{this.utility.exportToCsv(t.data,"Clienti",this.displayedColumns.slice(1)),this.setIsLoading(!1)})}openCalcolaRetta(o){let t=new d.Zpt;t.width="80vw",t.minHeight="80vh",t.maxHeight="95vh",t.panelClass="no-padding-dialog";let n=this.showModalDialog(ut,t),a=n.componentInstance;a.cliente=o,a.dialogRef=n}delete(o){this.showDialogConfirm("sbm.clienti.eliminareCliente").then(t=>{this.setIsLoading(!0),this.apiService.deleteCliente(o.oid).subscribe(n=>{(null==n.errori||0==n.errori.length)&&this.download()})},t=>{})}}gn.\u0275fac=function(o){return new(o||gn)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t),e.Y36(j.m))},gn.\u0275cmp=e.Xpm({type:gn,selectors:[["app-clienti"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:136,vars:76,consts:[[1,"p-3",3,"hidden"],[1,"filter"],[1,"row","filter-base"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["cognomeSearch",""],[1,"col-3"],["autocompleteOff","","matInput","","type","search",3,"placeholder","value","input"],["emailSearch",""],["cellulareSearch",""],[1,"col-2","text-right","pt-2","font-weight-bold"],[1,"align-middle","color-pink","cursor-pointer",3,"click"],["mat-icon-button","","color","primary",1,"align-middle",3,"click"],[1,"filter-adv",3,"hidden"],[1,"row"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[3,"placeholder","value","selectionChange"],["tipoAnagraficaSelect",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["mercatoSearch",""],["canaleVenditaSearch",""],["fonteSearch",""],[3,"label","valueChange"],["color","primary",3,"checked","change"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","cognome","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","add"],["matColumnDef","nome"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","cognome"],["matColumnDef","tipoAnagrafica"],["matColumnDef","cellulare"],["matColumnDef","email"],["matColumnDef","lingua.nome"],["matColumnDef","dataUltimoPreventivo"],["matColumnDef","dataUltimaPrenotazione"],["matColumnDef","privacy"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","newsletter"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[3,"_cliente","isEliminazioneAbilitata","backEvent",4,"ngIf"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-icon-button","","color","primary",3,"click"],["mat-sort-header",""],[1,"d-flex","flex-column"],[1,"parametri-ricerca-container"],["class","rounded pr-1 pl-1 mr-1 mt-1 parametro-ricerca",3,"backgroundColor","appInvertColor",4,"ngIf"],["class","rounded pr-1 pl-1 mt-1 parametro-ricerca",3,"backgroundColor","appInvertColor",4,"ngIf"],[1,"rounded","pr-1","pl-1","mr-1","mt-1","parametro-ricerca",3,"appInvertColor"],[1,"rounded","pr-1","pl-1","mt-1","parametro-ricerca",3,"appInvertColor"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"mat-td-delete"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[3,"_cliente","isEliminazioneAbilitata","backEvent"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"input",5,6),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(6);return e.KtG(t.onSearch(0,l.value,null,null,!1))}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",7)(9,"mat-form-field",4)(10,"input",8,9),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(11);return e.KtG(t.onSearch(1,l.value,null,null,!1))}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",7)(14,"mat-form-field",4)(15,"input",5,10),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(16);return e.KtG(t.onSearch(2,l.value,null,null,!1))}),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",11)(19,"span",12),e.NdJ("click",function(){return t.showFilterAdv=!t.showFilterAdv}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"button",13),e.NdJ("click",function(){return t.showFilterAdv=!t.showFilterAdv}),e.TgZ(23,"mat-icon"),e._uU(24,"keyboard_arrow_down"),e.qZA()()()(),e.TgZ(25,"div",14)(26,"div",15)(27,"div",3)(28,"app-view-select",16),e.NdJ("valueChange",function(l){return t.onSearch(12,-1==l.oid?"":l.oid.toString())}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",3)(31,"mat-form-field",4)(32,"mat-select",17,18),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(33);return e.KtG(t.onSearch(14,l.value))}),e.ALo(34,"translate"),e._UZ(35,"mat-option",19),e.YNc(36,By,3,4,"mat-option",20),e.ALo(37,"selectEnum"),e.qZA()()(),e.TgZ(38,"div",3)(39,"app-view-select",16),e.NdJ("valueChange",function(l){return t.onSearch(14,-1==l.oid?"":l.oid.toString())}),e.ALo(40,"translate"),e.qZA()()(),e.TgZ(41,"div",15)(42,"div",3)(43,"mat-form-field",4)(44,"mat-select",17,21),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(45);return e.KtG(t.onSearch(4,l.value))}),e.ALo(46,"translate"),e._UZ(47,"mat-option",19),e.YNc(48,Vy,2,2,"mat-option",20),e.qZA()()(),e.TgZ(49,"div",3)(50,"mat-form-field",4)(51,"mat-select",17,22),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(52);return e.KtG(t.onSearch(5,l.value))}),e.ALo(53,"translate"),e._UZ(54,"mat-option",19),e.YNc(55,Xy,2,2,"mat-option",20),e.qZA()()(),e.TgZ(56,"div",3)(57,"mat-form-field",4)(58,"mat-select",17,23),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(59);return e.KtG(t.onSearch(11,l.value))}),e.ALo(60,"translate"),e._UZ(61,"mat-option",19),e.YNc(62,jy,2,2,"mat-option",20),e.qZA()()()(),e.TgZ(63,"div",15)(64,"div",3)(65,"app-indeterminate-checkbox",24),e.NdJ("valueChange",function(l){return null==l?t.onSearch(6,null,null,!0):t.onSearch(6,null,l)}),e.qZA()(),e.TgZ(66,"div",3)(67,"app-indeterminate-checkbox",24),e.NdJ("valueChange",function(l){return null==l?t.onSearch(7,null,null,!0):t.onSearch(7,null,l)}),e.qZA()(),e.TgZ(68,"div",3)(69,"mat-checkbox",25),e.NdJ("change",function(l){return t.onSearch(3,null,l.checked)}),e._uU(70),e.ALo(71,"translate"),e.qZA()()(),e.TgZ(72,"div",15)(73,"div",3)(74,"mat-checkbox",25),e.NdJ("change",function(l){return t.onSearch(8,null,l.checked)}),e._uU(75),e.ALo(76,"translate"),e.qZA()(),e.TgZ(77,"div",3)(78,"mat-checkbox",25),e.NdJ("change",function(l){return t.onSearch(9,null,l.checked)}),e._uU(79),e.ALo(80,"translate"),e.qZA()(),e.TgZ(81,"div",3)(82,"mat-checkbox",25),e.NdJ("change",function(l){return t.onSearch(10,null,l.checked)}),e._uU(83),e.ALo(84,"translate"),e.qZA()()()()(),e.YNc(85,Wy,4,3,"div",26),e.TgZ(86,"div",27)(87,"div",28)(88,"mat-table",29),e.NdJ("matSortChange",function(l){return t.onSortChange(l)}),e.ynx(89,30),e.YNc(90,eJ,1,0,"mat-header-cell",31),e.YNc(91,tJ,4,0,"mat-cell",32),e.BQk(),e.ynx(92,33),e.YNc(93,iJ,1,0,"mat-header-cell",31),e.YNc(94,oJ,4,0,"mat-cell",32),e.BQk(),e.ynx(95,34),e.YNc(96,nJ,3,3,"mat-header-cell",35),e.YNc(97,cJ,8,4,"mat-cell",36),e.BQk(),e.ynx(98,37),e.YNc(99,sJ,3,3,"mat-header-cell",35),e.YNc(100,pJ,2,1,"mat-cell",36),e.BQk(),e.ynx(101,38),e.YNc(102,dJ,3,3,"mat-header-cell",35),e.YNc(103,mJ,3,3,"mat-cell",36),e.BQk(),e.ynx(104,39),e.YNc(105,_J,3,3,"mat-header-cell",35),e.YNc(106,uJ,2,1,"mat-cell",36),e.BQk(),e.ynx(107,40),e.YNc(108,gJ,3,3,"mat-header-cell",35),e.YNc(109,hJ,2,1,"mat-cell",36),e.BQk(),e.ynx(110,41),e.YNc(111,fJ,3,3,"mat-header-cell",35),e.YNc(112,CJ,2,1,"mat-cell",36),e.BQk(),e.ynx(113,42),e.YNc(114,bJ,3,3,"mat-header-cell",35),e.YNc(115,vJ,3,4,"mat-cell",36),e.BQk(),e.ynx(116,43),e.YNc(117,TJ,3,3,"mat-header-cell",35),e.YNc(118,xJ,3,4,"mat-cell",36),e.BQk(),e.ynx(119,44),e.YNc(120,ZJ,3,3,"mat-header-cell",45),e.YNc(121,AJ,2,1,"mat-cell",46),e.BQk(),e.ynx(122,47),e.YNc(123,wJ,3,3,"mat-header-cell",45),e.YNc(124,zJ,2,1,"mat-cell",46),e.BQk(),e.ynx(125,48),e.YNc(126,MJ,1,0,"mat-header-cell",31),e.YNc(127,qJ,4,0,"mat-cell",49),e.BQk(),e.YNc(128,PJ,1,0,"mat-header-row",50),e.YNc(129,kJ,1,1,"mat-row",51),e.qZA()(),e.TgZ(130,"div",52)(131,"button",53),e.NdJ("click",function(){return t.export()}),e.TgZ(132,"i",54),e._uU(133,"get_app"),e.qZA()(),e.TgZ(134,"mat-paginator",55),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()(),e.YNc(135,SJ,1,2,"app-clienti-edit",56)}2&o&&(e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(7,45,"bo.cliente.proprieta.cognome")),e.Q6J("value",t.filters[0].value),e.xp6(5),e.s9C("placeholder",e.lcZ(12,47,"bo.cliente.proprieta.email")),e.Q6J("value",t.filters[1].value),e.xp6(5),e.s9C("placeholder",e.lcZ(17,49,"bo.cliente.proprieta.cellulare")),e.Q6J("value",t.filters[2].value),e.xp6(5),e.Oqu(e.lcZ(21,51,"globals.filtriAvanzati")),e.xp6(5),e.Q6J("hidden",!t.showFilterAdv),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiClienteViewSelect())("placeholder",e.lcZ(29,53,"bo.cliente.proprieta.tipologia")),e.xp6(4),e.s9C("placeholder",e.lcZ(34,55,"bo.cliente.proprieta.tipoAnagrafica")),e.Q6J("value",t.filters[13].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(37,57,t.enumTipoAnagrafica,"tipoAnagrafica")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getLingueViewSelect())("placeholder",e.lcZ(40,60,"bo.cliente.proprieta.lingua")),e.xp6(5),e.s9C("placeholder",e.lcZ(46,62,"bo.cliente.proprieta.mercato")),e.Q6J("value",t.filters[4].value),e.xp6(4),e.Q6J("ngForOf",t.parametriRicercaMercato),e.xp6(3),e.s9C("placeholder",e.lcZ(53,64,"bo.cliente.proprieta.canaleVendita")),e.Q6J("value",t.filters[5].value),e.xp6(4),e.Q6J("ngForOf",t.parametriRicercaCanaleVendita),e.xp6(3),e.s9C("placeholder",e.lcZ(60,66,"bo.cliente.proprieta.fonte")),e.Q6J("value",t.filters[11].value),e.xp6(4),e.Q6J("ngForOf",t.parametriRicercaFonte),e.xp6(3),e.Q6J("label","bo.cliente.proprieta.privacy"),e.xp6(2),e.Q6J("label","bo.cliente.proprieta.newsletter"),e.xp6(2),e.Q6J("checked",t.filters[3].active),e.xp6(1),e.hij(" ",e.lcZ(71,68,"sbm.clienti.conPrenotazione")," "),e.xp6(4),e.Q6J("checked",t.filters[8].active),e.xp6(1),e.hij(" ",e.lcZ(76,70,"sbm.clienti.conSondaggio")," "),e.xp6(3),e.Q6J("checked",t.filters[9].active),e.xp6(1),e.hij(" ",e.lcZ(80,72,"sbm.clienti.conPreventivo")," "),e.xp6(3),e.Q6J("checked",t.filters[10].active),e.xp6(1),e.hij(" ",e.lcZ(84,74,"sbm.clienti.conVoucher")," "),e.xp6(2),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.data),e.xp6(40),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords),e.xp6(1),e.Q6J("ngIf",!t.showTable))},dependencies:[m.sg,m.O5,k.Z,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,ne.d,st,xi,m.uU,Te.A,z.X$],styles:[".parametro-ricerca[_ngcontent-%COMP%]{font-size:11px;padding-top:.1rem!important;padding-bottom:.1rem!important;white-space:nowrap}.parametri-ricerca-container[_ngcontent-%COMP%]{white-space:break-spaces}.mat-column-add[_ngcontent-%COMP%]{width:80px!important;max-width:80px!important;min-width:80px!important}"]});class hn{constructor(){}}hn.\u0275fac=function(o){return new(o||hn)},hn.\u0275cmp=e.Xpm({type:hn,selectors:[["app-configurazione-dms"]],decls:1,vars:1,consts:[[3,"admin"]],template:function(o,t){1&o&&e._UZ(0,"app-configurazione-dms-admin",0),2&o&&e.Q6J("admin",!1)},dependencies:[ri]});class fn extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.rq=new d.mVj}ngOnInit(){this.rq.dal=this.getDate(u().year(this.year).startOf("month")),this.rq.al=this.getDate(u().year(this.year).endOf("month")),this.rq.menu=new v.v2r(-1),this.rq.giorni=new d.RUf,this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.rq.oidUbicazioneIstat=this.oidUbicazioneIstat}dalChange(){u(this.rq.dal)>u(this.rq.al)&&(this.rq.al=this.getDate(u(this.rq.dal)))}alChange(){u(this.rq.al)<u(this.rq.dal)&&(this.rq.dal=this.getDate(u(this.rq.al)))}save(){this.setIsLoading(!0),this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.apiService.setMenuGiornoMultiple(this.rq).subscribe(()=>{this.dialogRef.close(!0)})}}function yJ(i,o){if(1&i&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.nome," ")}}function JJ(i,o){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"app-calendario-menu-mese",16),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2).$implicit,l=e.oxw(2);e.xp6(1),e.Q6J("year",a)("month",n)("events",t)("oidMenu",l.selectedMenu)("oidUbicazioneIstat",l.oidUbicazioneIstat)}}function EJ(i,o){if(1&i&&(e.ynx(0),e.YNc(1,JJ,2,5,"div",14),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.events)}}function NJ(i,o){if(1&i&&(e.TgZ(0,"mat-tab",13),e.YNc(1,EJ,2,1,"ng-container",6),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("label",t),e.xp6(1),e.Q6J("ngIf",n.selectedYear==t)}}function OJ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"mat-checkbox",22),e.NdJ("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.selectedMenu=a.checked?r.oid:-1)}),e.qZA(),e.TgZ(2,"span",23),e._uU(3),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectedMenu==t.oid),e.xp6(1),e.Udp("background-color",t.coloreHex),e.Q6J("appInvertColor",t.coloreHex),e.xp6(1),e.Oqu(t.descrizione)}}function LJ(i,o){if(1&i&&(e.TgZ(0,"div",17)(1,"h4",18),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",19),e.YNc(5,OJ,4,5,"div",20),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione-myself.calendario-menu.menu")),e.xp6(3),e.Q6J("ngForOf",t.menu)}}fn.\u0275fac=function(o){return new(o||fn)(e.Y36(A.s),e.Y36(j.m))},fn.\u0275cmp=e.Xpm({type:fn,selectors:[["app-modifica-multipla-calendario-menu"]],inputs:{oidUbicazioneIstat:"oidUbicazioneIstat",year:"year",dialogRef:"dialogRef"},features:[e.qOj],decls:54,vars:56,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["dal",""],["al",""],["color","primary",1,"mr-3",3,"ngModel","ngModelChange"],["mat-flat-button","","color","blank",1,"mr-2",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"mt-3"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"input",5),e.NdJ("ngModelChange",function(a){return t.rq.dal=a})("dateChange",function(){return t.dalChange()}),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"mat-datepicker-toggle",6)(9,"mat-datepicker",null,7),e.qZA()(),e.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"input",5),e.NdJ("ngModelChange",function(a){return t.rq.al=a})("dateChange",function(){return t.alChange()}),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"mat-datepicker-toggle",6)(16,"mat-datepicker",null,8),e.qZA()()(),e.TgZ(18,"div")(19,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isLun=a}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isMar=a}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isMer=a}),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isGio=a}),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isVen=a}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isSab=a}),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isDom=a}),e._uU(38),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div")(41,"button",10),e.NdJ("click",function(){return t.rq.giorni.selezionaTutti()}),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"button",11),e.NdJ("click",function(){return t.rq.giorni.deselezionaTutti()}),e._uU(45),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"div",12)(48,"app-view-select",13),e.NdJ("valueChange",function(a){return t.rq.menu=a}),e.ALo(49,"translate"),e.qZA()(),e.TgZ(50,"div",14)(51,"button",15),e.NdJ("click",function(){return t.save()}),e._uU(52),e.ALo(53,"translate"),e.qZA()()),2&o){const n=e.MAs(10),a=e.MAs(17);e.Q6J("disableRipple",!0),e.xp6(6),e.s9C("placeholder",e.lcZ(7,30,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(14,32,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(4),e.Q6J("ngModel",t.rq.giorni.isLun),e.xp6(1),e.hij(" ",e.lcZ(21,34,"globals.dayOfWeeks.lun")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isMar),e.xp6(1),e.hij(" ",e.lcZ(24,36,"globals.dayOfWeeks.mar")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isMer),e.xp6(1),e.hij(" ",e.lcZ(27,38,"globals.dayOfWeeks.mer")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isGio),e.xp6(1),e.hij(" ",e.lcZ(30,40,"globals.dayOfWeeks.gio")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isVen),e.xp6(1),e.hij(" ",e.lcZ(33,42,"globals.dayOfWeeks.ven")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isSab),e.xp6(1),e.hij(" ",e.lcZ(36,44,"globals.dayOfWeeks.sab")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isDom),e.xp6(1),e.hij(" ",e.lcZ(39,46,"globals.dayOfWeeks.dom")," "),e.xp6(4),e.Oqu(e.lcZ(43,48,"globals.selezionaTutti")),e.xp6(3),e.Oqu(e.lcZ(46,50,"globals.deselezionaTutti")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getMenuViewSelect())("value",t.rq.menu)("placeholder",e.lcZ(49,52,"sbm.configurazione-myself.calendario-menu.title")),e.xp6(3),e.Q6J("disabled",!t.rq.giorni.isGiornoSelezionato()),e.xp6(1),e.Oqu(e.lcZ(53,54,"globals.salva"))}},dependencies:[w.X,V.FC,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,F.aO,_.Fj,_.JJ,_.On,ne.d,z.X$]});const DJ=function(i){return{"calendari-container pr-5":i}};function IJ(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",8)(2,"div",9)(3,"mat-tab-group",10),e.NdJ("selectedTabChange",function(a){e.CHM(t);const l=e.oxw();return l.selectedYear=l.years[a.index],e.KtG(l.download())}),e.YNc(4,NJ,2,2,"mat-tab",11),e.qZA()()(),e.YNc(5,LJ,6,4,"div",12),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,DJ,null!=t.menu&&t.menu.length>0)),e.xp6(3),e.Q6J("ngForOf",t.years),e.xp6(1),e.Q6J("ngIf",null!=t.menu&&t.menu.length>0)}}class Cn extends f.H{constructor(o,t,n,a){super(),this.headerService=o,this.utility=t,this.sessionService=n,this.apiService=a,this.years=[],this.events=[],this.selectedMenu=-1,this.initialized=!1}ngOnInit(){this.setIsLoading(!0),this.headerService.setTitle("sbm.configurazione-myself.calendario-menu.title"),this.selectedYear=u().year(),this.years.push(this.selectedYear),this.years.push(this.selectedYear+1);let o=new d.Mpy;o.oidAlbergo=this.sessionService.getOidAlbergo(),this.apiService.getCalendarioMenuView(o).subscribe(t=>{this.ubicazioniIstat=t.data.ubicazioniIstat,this.menu=t.data.menu;for(let n of this.menu)try{n.coloreHex=Z(n.colore).hex()}catch(a){}this.ubicazioniIstat.length>0?(this.oidUbicazioneIstat=this.ubicazioniIstat[0].oid,this.download()):this.setIsLoading(!1)})}download(){this.setIsLoading(!0);let o=new d.jB4;o.year=this.selectedYear,o.oidUbicazioneIstat=this.oidUbicazioneIstat,this.events=[],this.apiService.getCalendarioMenu(o).subscribe(t=>{let n=[];for(let a of t.data.mesi){let l=new d.SOG;for(let r of a.giorni){let p={};if(p.date=u(r.data),p.customData=r,null!=r.menu){p.name=r.menu.descrizione;try{p.color=Z(r.menu.colore).hex()}catch(T){}}l.events.push(p)}n.push(l)}this.events=n,this.initialized=!0,this.setIsLoading(!1)})}modificaMultipla(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog(fn,o),n=t.componentInstance;n.oidUbicazioneIstat=this.oidUbicazioneIstat,n.year=this.selectedYear,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.download()})}ngOnDestroy(){this.headerService.clearTitle()}}function QJ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",19)(1,"mat-form-field",20)(2,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.articoliXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",22),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.articoliXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.articoloXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.articoliXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.articoloXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.articoliXLingua[a].descrizione)}}function UJ(i,o){if(1&i&&(e.ynx(0),e.YNc(1,QJ,7,10,"mat-tab",18),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function YJ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",23)(2,"app-image",24),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.modelEdit.articolo.urlImmagine)}}function RJ(i,o){1&i&&(e.TgZ(0,"div",25)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.articoli.salvareArticolo")))}function FJ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Cn.\u0275fac=function(o){return new(o||Cn)(e.Y36(ie.r),e.Y36(C.t),e.Y36(j.m),e.Y36(A.s))},Cn.\u0275cmp=e.Xpm({type:Cn,selectors:[["app-calendario-menu"]],features:[e.qOj],decls:10,vars:9,consts:[[1,"p-3"],[1,"filter","d-flex"],[1,"mr-3","ubicazioneIstatSelect"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",1,"modificaMultiplaButton","mt-2",3,"click"],[4,"ngIf"],[3,"value"],[3,"ngClass"],[1,"border","rounded-lg","bg-white"],[3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],["class","menu-container",4,"ngIf"],[3,"label"],["class","div-calendario d-inline-block mr-3 ml-3 mt-3",4,"ngFor","ngForOf"],[1,"div-calendario","d-inline-block","mr-3","ml-3","mt-3"],[3,"year","month","events","oidMenu","oidUbicazioneIstat"],[1,"menu-container"],[1,"mb-3"],[1,"row"],["class","col-6 mb-1 p-0",4,"ngFor","ngForOf"],[1,"col-6","mb-1","p-0"],["color","primary",1,"d-inline-block","align-middle","ml-2","mt-1","mr-1",3,"checked","change"],[1,"d-inline-block","align-middle","nome-menu",3,"appInvertColor"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",3),e.NdJ("ngModelChange",function(a){return t.oidUbicazioneIstat=a})("selectionChange",function(){return t.download()}),e.ALo(4,"translate"),e.YNc(5,yJ,2,2,"mat-option",4),e.qZA()(),e.TgZ(6,"button",5),e.NdJ("click",function(){return t.modificaMultipla()}),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.YNc(9,IJ,6,5,"ng-container",6),e.qZA()),2&o&&(e.xp6(3),e.Q6J("placeholder",e.lcZ(4,5,"globals.ubicazioneIstat"))("ngModel",t.oidUbicazioneIstat),e.xp6(2),e.Q6J("ngForOf",t.ubicazioniIstat),e.xp6(2),e.Oqu(e.lcZ(8,7,"sbm.configurazione-myself.calendario-menu.modificaMultipla")),e.xp6(2),e.Q6J("ngIf",t.initialized))},dependencies:[m.mk,m.sg,m.O5,k.Z,V.FC,h.eB,M.v_,re.CK,g.x8,ee.SK,ee.R7,_.JJ,_.On,Le,z.X$],styles:[".div-calendario[_ngcontent-%COMP%]{width:200px;vertical-align:top}.calendari-container[_ngcontent-%COMP%]{width:calc(100% - 300px);display:inline-block;vertical-align:top}.menu-container[_ngcontent-%COMP%]{width:300px;display:inline-block;vertical-align:top}.nome-menu[_ngcontent-%COMP%]{padding:3px;border-radius:5px;width:75px;max-width:75px;min-width:75px;text-align:center;font-size:x-small;min-height:21px;border:1px solid #666666;font-weight:600}.ubicazioneIstatSelect[_ngcontent-%COMP%]{flex:1}.modificaMultiplaButton[_ngcontent-%COMP%]{height:36px}"]});class bn extends f.H{set articolo(o){if(null!=o){this.modelEdit=new d.Edn,this.modelEdit.articolo=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.xpt;n.lingua=t,this.modelEdit.articoliXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getArticoliXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.articoliXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.articoliXLingua[a].nome=n.nome,this.modelEdit.articoliXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.Edn,this.editing=!1,this.selectedIndex=0,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.articoliXLingua)o.articolo=this.modelEdit.articolo;this.modelEdit.articolo.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.articolo.tipoArticolo=c.ix.Extra,this.setIsLoading(!0),this.apiService.setArticolo(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.articoli.articoloSalvato").then(()=>{this.editing?this.backEvent.emit():(this.modelEdit.articolo=o.data.obj,this.modelEdit.articoliXLingua=o.data.details,this.editing=!0,setTimeout(()=>{this.selectedIndex=0},200))})})}delete(o){this.showDialogConfirm("sbm.tabelle.articoli.eliminareArticolo").then(t=>{null!=o&&(this.modelEdit.articolo=o),this.modelEdit.articolo.isDeleted=!0,this.setIsLoading(!0),this.apiService.setArticolo(this.modelEdit).subscribe(n=>{this.backEvent.emit()})},t=>{})}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.modelEdit.articolo.urlImmagine,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.OZW;l.oid=this.modelEdit.articolo.oid,l.base64=a,this.apiService.setImmagineArticolo(l).subscribe(r=>{null!=r.data&&(this.modelEdit.articolo.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.OZW;t.oid=this.modelEdit.articolo.oid,t.base64="",this.apiService.setImmagineArticolo(t).subscribe(n=>{null!=n.data&&(this.modelEdit.articolo.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}}function HJ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",10),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",37)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.tabelle.articoli.nessunArticolo")))}function KJ(i,o){1&i&&e._UZ(0,"mat-header-cell")}function GJ(i,o){1&i&&(e.TgZ(0,"mat-cell",38)(1,"button",39)(2,"i",40),e._uU(3,"edit"),e.qZA()()())}function $J(i,o){1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.immagine"),""))}function BJ(i,o){if(1&i&&e._UZ(0,"img",43),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagine,e.LSH)}}function VJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell",41),e.YNc(1,BJ,1,1,"img",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlImmagine)}}function XJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.nome"),""))}function jJ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function WJ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.descrizione"),""))}function eE(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function tE(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.prezzo"),""))}function iE(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.prezzo)," ")}}function oE(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.ordinamento"),""))}function nE(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.ordinamento," ")}}function aE(i,o){1&i&&(e.TgZ(0,"mat-header-cell",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.isBookingExtra"),""))}function lE(i,o){if(1&i&&(e.TgZ(0,"mat-cell",44),e._UZ(1,"mat-checkbox",45),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isBookingExtra)("disabled",!0)}}function rE(i,o){1&i&&(e.TgZ(0,"mat-header-cell",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.isDisponibile"),""))}function cE(i,o){if(1&i&&(e.TgZ(0,"mat-cell",44),e._UZ(1,"mat-checkbox",45),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDisponibile)("disabled",!0)}}function sE(i,o){1&i&&e._UZ(0,"mat-header-cell")}function pE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",46)(1,"button",47),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(49);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",48),e._uU(3,"delete"),e.qZA()()()}}function dE(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function mE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",50),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}bn.\u0275fac=function(o){return new(o||bn)(e.Y36(A.s),e.Y36(j.m))},bn.\u0275cmp=e.Xpm({type:bn,selectors:[["app-articoli-edit"]],inputs:{articolo:"articolo"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:81,vars:52,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],[1,"row","mt-3","mb-3"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],["class","row mt-3",4,"ngIf"],["class","mt-3 p-3 border rounded",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],[1,"col-6"],[3,"title","url","edit","delete"],[1,"mt-3","p-3","border","rounded"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Inserire il nome dell'articolo "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.ordinamento=a}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",4),e._uU(13," Inserire l'ordinamento di visualizzazione dell'articolo "),e.qZA()(),e.TgZ(14,"div",0)(15,"div",1)(16,"mat-form-field",2)(17,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.quantitaMassimaInPrenotazione=a}),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"div",4),e._uU(20," Inserire la quantit\xe0 massima prenotabile "),e.qZA()(),e.TgZ(21,"div",0)(22,"div",1)(23,"mat-form-field",2)(24,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.prezzo=a}),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"div",4),e._uU(27," Inserire il prezzo base dell'articolo "),e.qZA()(),e.TgZ(28,"div",0)(29,"div",1)(30,"app-view-select",6),e.NdJ("valueChange",function(a){return t.modelEdit.articolo.voceAddebito=a}),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",4),e._uU(33," Selezionare la voce di addebito associata all'articolo "),e.qZA()(),e.TgZ(34,"div",7)(35,"div",1)(36,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.isImportaComeExtraAutomatico=a}),e._uU(37),e.ALo(38,"translate"),e.qZA()(),e.TgZ(39,"div",4),e._uU(40," Importa come Extra Automatico "),e.qZA()(),e.TgZ(41,"div",7)(42,"div",1)(43,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.isDisponibile=a}),e._uU(44),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"div",4),e._uU(47," Attivare il flag per rendere disponibile l'articolo "),e.qZA()(),e.TgZ(48,"div",7)(49,"div",1)(50,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.isBookingExtra=a}),e._uU(51),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"div",4),e._uU(54," Attivare il flag per rendere disponibile l'articolo su booking extra "),e.qZA()(),e.TgZ(55,"div",7)(56,"div",1)(57,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.isUpSellingCRM=a}),e._uU(58),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"div",4),e._uU(61," Attiva l'articolo all'interno del MyPage/MySelf come UpSelling "),e.qZA()(),e.TgZ(62,"div",9)(63,"div",1)(64,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.isRoomService=a}),e._uU(65),e.ALo(66,"translate"),e.qZA()(),e.TgZ(67,"div",4),e._uU(68," Attiva l'articolo come Room Service all'interno del MySelf "),e.qZA()(),e.TgZ(69,"mat-tab-group",10),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(70,UJ,2,1,"ng-container",11),e.qZA(),e.YNc(71,YJ,3,2,"div",12),e.YNc(72,RJ,4,3,"div",13),e.TgZ(73,"div",14)(74,"button",15),e.NdJ("click",function(){return t.save()}),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.YNc(77,FJ,3,3,"button",16),e.TgZ(78,"button",17),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(79),e.ALo(80,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,28,"bo.articolo.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.articolo.nome),e.xp6(7),e.s9C("placeholder",e.lcZ(11,30,"bo.articolo.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.articolo.ordinamento),e.xp6(7),e.s9C("placeholder",e.lcZ(18,32,"bo.articolo.proprieta.quantitaMassimaInPrenotazione")),e.Q6J("ngModel",t.modelEdit.articolo.quantitaMassimaInPrenotazione),e.xp6(7),e.s9C("placeholder",e.lcZ(25,34,"bo.articolo.proprieta.prezzo")),e.Q6J("ngModel",t.modelEdit.articolo.prezzo),e.xp6(6),e.Q6J("dataLoader",t.apiService.getVociAddebitoViewSelect())("value",t.modelEdit.articolo.voceAddebito)("placeholder",e.lcZ(31,36,"bo.articolo.proprieta.voceAddebito")),e.xp6(6),e.Q6J("ngModel",t.modelEdit.articolo.isImportaComeExtraAutomatico),e.xp6(1),e.hij(" ",e.lcZ(38,38,"bo.articolo.proprieta.isImportaComeExtraAutomatico")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.articolo.isDisponibile),e.xp6(1),e.hij(" ",e.lcZ(45,40,"bo.articolo.proprieta.isDisponibile")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.articolo.isBookingExtra),e.xp6(1),e.hij(" ",e.lcZ(52,42,"bo.articolo.proprieta.isBookingExtra")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.articolo.isUpSellingCRM),e.xp6(1),e.hij(" ",e.lcZ(59,44,"bo.articolo.proprieta.isUpSellingCRM")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.articolo.isRoomService),e.xp6(1),e.hij(" ",e.lcZ(66,46,"bo.articolo.proprieta.isRoomService")," "),e.xp6(4),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.articoliXLingua),e.xp6(1),e.Q6J("ngIf",t.modelEdit.articolo.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.articolo.oid||t.modelEdit.articolo.oid<=0),e.xp6(3),e.Oqu(e.lcZ(76,48,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(80,50,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,Me.P,ne.d,Ge.c,z.X$]});class Zi extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","immagine","nome","descrizione","prezzo","ordinamento","isBookingExtra","isDisponibile","delete"],this.rq=new d.k$g,this.isRoomService=!1}ngOnInit(){this.isRoomService?this.headerService.setTitle("sbm.configurazione-myself.articoli.title"):this.headerService.setTitle("sbm.tabelle.articoli.title"),this.rq.sorting=[new d.aQR("ordinamento")],this.filters=[],this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String)),this.isRoomService&&this.filters.push(new d.wn$("isRoomService",c.Hp.IsTrue,null,null,!0))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getArticoliExtraFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,o||this.setIsLoading(!1)})}add(){let o=new v.OLu(-1);o.isRoomService=this.isRoomService,this.edit(o)}edit(o){this.articolo=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}Zi.\u0275fac=function(o){return new(o||Zi)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Zi.\u0275cmp=e.Xpm({type:Zi,selectors:[["app-articoli"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{isRoomService:"isRoomService"},features:[e.qOj],decls:50,vars:15,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["nomeSearch",""],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","immagine"],["class","img-cell",4,"matHeaderCellDef"],["class","img-cell",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","descrizione"],["matColumnDef","prezzo"],["matColumnDef","ordinamento"],["matColumnDef","isBookingExtra"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","isDisponibile"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"articolo","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"img-cell"],["class","m-2",3,"src",4,"ngIf"],[1,"m-2",3,"src"],[1,"justify-content-center"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,HJ,8,3,"div",8),e.TgZ(10,"div",1)(11,"button",9),e.NdJ("click",function(){return t.add()}),e.TgZ(12,"i",10),e._uU(13,"add"),e.qZA()(),e.TgZ(14,"div",11)(15,"mat-table",12),e.ynx(16,13),e.YNc(17,KJ,1,0,"mat-header-cell",14),e.YNc(18,GJ,4,0,"mat-cell",15),e.BQk(),e.ynx(19,16),e.YNc(20,$J,3,3,"mat-header-cell",17),e.YNc(21,VJ,2,1,"mat-cell",18),e.BQk(),e.ynx(22,19),e.YNc(23,XJ,3,3,"mat-header-cell",14),e.YNc(24,jJ,2,1,"mat-cell",20),e.BQk(),e.ynx(25,21),e.YNc(26,WJ,3,3,"mat-header-cell",14),e.YNc(27,eE,2,1,"mat-cell",20),e.BQk(),e.ynx(28,22),e.YNc(29,tE,3,3,"mat-header-cell",14),e.YNc(30,iE,3,3,"mat-cell",20),e.BQk(),e.ynx(31,23),e.YNc(32,oE,3,3,"mat-header-cell",14),e.YNc(33,nE,2,1,"mat-cell",20),e.BQk(),e.ynx(34,24),e.YNc(35,aE,3,3,"mat-header-cell",25),e.YNc(36,lE,2,2,"mat-cell",26),e.BQk(),e.ynx(37,27),e.YNc(38,rE,3,3,"mat-header-cell",25),e.YNc(39,cE,2,2,"mat-cell",26),e.BQk(),e.ynx(40,28),e.YNc(41,sE,1,0,"mat-header-cell",14),e.YNc(42,pE,4,0,"mat-cell",29),e.BQk(),e.YNc(43,dE,1,0,"mat-header-row",30),e.YNc(44,mE,1,1,"mat-row",31),e.qZA()(),e.TgZ(45,"div",32)(46,"mat-paginator",33),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(47,"div",34)(48,"app-articoli-edit",35,36),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,13,"bo.articolo.proprieta.nome")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("articolo",t.articolo))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,bn,ke.f,z.X$],styles:["img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.img-cell[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]});class vn{constructor(){}}function _E(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",10)(1,"mat-form-field",11)(2,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.categoriePiattiXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",13),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.categoriePiattiXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.categoriaPiattoXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.categoriePiattiXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.categoriaPiattoXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.categoriePiattiXLingua[a].descrizione)}}function uE(i,o){if(1&i&&(e.ynx(0),e.YNc(1,_E,7,10,"mat-tab",9),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function gE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}vn.\u0275fac=function(o){return new(o||vn)},vn.\u0275cmp=e.Xpm({type:vn,selectors:[["app-configurazione-articoli-my-self"]],decls:1,vars:1,consts:[[3,"isRoomService"]],template:function(o,t){1&o&&e._UZ(0,"app-articoli",0),2&o&&e.Q6J("isRoomService",!0)},dependencies:[Zi]});class Tn extends f.H{set categoriaPiatto(o){if(null!=o){this.modelEdit=new d.n0Z,this.modelEdit.categoriaPiatto=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.MFN;n.lingua=t,this.modelEdit.categoriePiattiXLingua.push(n)}null!=o.oid&&-1!=o.oid&&(this.setIsLoading(!0),this.apiService.getCategoriePiattiXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.categoriePiattiXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.categoriePiattiXLingua[a].categoriaPiatto=n.categoriaPiatto,this.modelEdit.categoriePiattiXLingua[a].nome=n.nome,this.modelEdit.categoriePiattiXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)}))}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.n0Z,this.selectedIndex=0,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.categoriePiattiXLingua)o.categoriaPiatto=this.modelEdit.categoriaPiatto;this.modelEdit.categoriaPiatto.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setCategoriaPiatto(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione-myself.categorie-piatti.categoriaPiattoSalvata").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione-myself.categorie-piatti.eliminareCategoriaPiatto").then(t=>{null!=o&&(this.modelEdit.categoriaPiatto=o),this.modelEdit.categoriaPiatto.isDeleted=!0,this.setIsLoading(!0),this.apiService.setCategoriaPiatto(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function hE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",22)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione-myself.categorie-piatti.nessunaCategoriaPiatto")))}function fE(i,o){1&i&&e._UZ(0,"mat-header-cell")}function CE(i,o){1&i&&(e.TgZ(0,"mat-cell",23)(1,"button",24)(2,"i",25),e._uU(3,"edit"),e.qZA()()())}function bE(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.categoriaPiatto.proprieta.descrizione"),""))}function vE(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function TE(i,o){1&i&&e._UZ(0,"mat-header-cell",26)}function xE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",27)(1,"button",28),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(23);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",29),e._uU(3,"delete"),e.qZA()()()}}function ZE(i,o){1&i&&e._UZ(0,"mat-header-row",30)}function AE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",31),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Tn.\u0275fac=function(o){return new(o||Tn)(e.Y36(A.s),e.Y36(j.m))},Tn.\u0275cmp=e.Xpm({type:Tn,selectors:[["app-configurazione-categorie-piatti-my-self-edit"]],inputs:{categoriaPiatto:"categoriaPiatto"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:16,vars:17,consts:[[1,"w-100"],["autocompleteOff","","type","search","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-form-field",0)(1,"input",1),e.NdJ("ngModelChange",function(a){return t.modelEdit.categoriaPiatto.descrizione=a}),e.ALo(2,"translate"),e.qZA()(),e.TgZ(3,"mat-form-field",0)(4,"input",2),e.NdJ("ngModelChange",function(a){return t.modelEdit.categoriaPiatto.quantitaMassimaXPersona=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"mat-tab-group",3),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(7,uE,2,1,"ng-container",4),e.qZA(),e.TgZ(8,"div",5)(9,"button",6),e.NdJ("click",function(){return t.save()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,gE,3,3,"button",7),e.TgZ(13,"button",8),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(14),e.ALo(15,"translate"),e.qZA()()),2&o&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,9,"bo.categoriaPiatto.proprieta.descrizione")),e.Q6J("ngModel",t.modelEdit.categoriaPiatto.descrizione),e.xp6(3),e.s9C("placeholder",e.lcZ(5,11,"bo.categoriaPiatto.proprieta.quantitaMassimaXPersona")),e.Q6J("ngModel",t.modelEdit.categoriaPiatto.quantitaMassimaXPersona),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.categoriePiattiXLingua),e.xp6(3),e.Oqu(e.lcZ(11,13,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.modelEdit.categoriaPiatto.oid>0),e.xp6(2),e.Oqu(e.lcZ(15,15,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,Me.P,z.X$]});class xn extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","descrizione","delete"]}ngOnInit(){this.headerService.setTitle("sbm.configurazione-myself.categorie-piatti.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getCategoriePiatti().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.categoriaPiatto=new v.Jmt(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.categoriaPiatto=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}function wE(i,o){if(1&i&&(e.TgZ(0,"mat-option",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function zE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit;return a.stopPropagation(),e.KtG(l.ubicazioneIstat.timeLimitColazione=null)}),e.TgZ(1,"i",33),e._uU(2,"clear"),e.qZA()()}}function ME(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit;return a.stopPropagation(),e.KtG(l.ubicazioneIstat.timeLimitPranzo=null)}),e.TgZ(1,"i",33),e._uU(2,"clear"),e.qZA()()}}function qE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit;return a.stopPropagation(),e.KtG(l.ubicazioneIstat.timeLimitCena=null)}),e.TgZ(1,"i",33),e._uU(2,"clear"),e.qZA()()}}function PE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",7)(1,"div",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-editor",35),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw().$implicit;return e.KtG(r.ubicazioniIstatXLingua[l].testoIniziale=a)}),e.qZA(),e.TgZ(5,"div",8),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"app-editor",35),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw().$implicit;return e.KtG(r.ubicazioniIstatXLingua[l].testoIniziale2=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw().$implicit;e.Q6J("label",n.lingua.nome),e.xp6(2),e.Oqu(e.lcZ(3,7,"bo.ubicazioneIstatXLingua.proprieta.testoIniziale")),e.xp6(2),e.Q6J("id","testoIniziale1"+a)("text",l.ubicazioniIstatXLingua[a].testoIniziale),e.xp6(2),e.Oqu(e.lcZ(7,9,"bo.ubicazioneIstatXLingua.proprieta.testoIniziale2")),e.xp6(2),e.Q6J("id","testoIniziale2"+a)("text",l.ubicazioniIstatXLingua[a].testoIniziale2)}}function kE(i,o){if(1&i&&(e.ynx(0),e.YNc(1,PE,9,11,"mat-tab",34),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function SE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",49)(1,"mat-checkbox",50),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw(2);return e.KtG(a?r.masterToggleContenuti(l):null)}),e.qZA()()}if(2&i){const t=e.oxw(2).index,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionContenuti[t].hasValue()&&n.isAllSelectedContenuti(t))("indeterminate",n.selectionContenuti[t].hasValue()&&!n.isAllSelectedContenuti(t))}}function yE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",51)(1,"mat-checkbox",52),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2).index,T=e.oxw(2);return e.KtG(a?T.selectionContenuti[p].toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2).index,a=e.oxw(2);e.xp6(1),e.Q6J("checked",a.selectionContenuti[n].isSelected(t.oid))}}function JE(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.template.proprieta.nome")))}function EE(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function NE(i,o){1&i&&e._UZ(0,"mat-header-row",53)}function OE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",54),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}xn.\u0275fac=function(o){return new(o||xn)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},xn.\u0275cmp=e.Xpm({type:xn,selectors:[["app-configurazione-categorie-piatti-my-self"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:24,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","descrizione"],[4,"matCellDef"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"categoriaPiatto","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,hE,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,fE,1,0,"mat-header-cell",8),e.YNc(10,CE,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,bE,3,3,"mat-header-cell",8),e.YNc(13,vE,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,TE,1,0,"mat-header-cell",13),e.YNc(16,xE,4,0,"mat-cell",14),e.BQk(),e.YNc(17,ZE,1,0,"mat-header-row",15),e.YNc(18,AE,1,1,"mat-row",16),e.qZA()(),e.TgZ(19,"div",17)(20,"mat-paginator",18),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(21,"div",19)(22,"app-configurazione-categorie-piatti-my-self-edit",20,21),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("categoriaPiatto",t.categoriaPiatto))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Tn,z.X$]});const Xc=function(i){return{"mb-3 border-bottom":i}},hc=function(){return["nome","select"]};function LE(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",36,37)(2,"mat-expansion-panel-header",38),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",39)(6,"mat-table",40),e.ynx(7,41),e.YNc(8,SE,2,2,"mat-header-cell",42),e.YNc(9,yE,2,1,"mat-cell",43),e.BQk(),e.ynx(10,44),e.YNc(11,JE,3,3,"mat-header-cell",45),e.YNc(12,EE,2,1,"mat-cell",46),e.BQk(),e.YNc(13,NE,1,0,"mat-header-row",47),e.YNc(14,OE,1,1,"mat-row",48),e.qZA()()()),2&i){const t=e.MAs(1),n=e.oxw(3);e.xp6(2),e.Q6J("ngClass",e.VKq(8,Xc,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(4,6,"sbm.configurazione-myself.impostazioni.contenuti")," "),e.xp6(3),e.Q6J("dataSource",n.contenuti),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(10,hc))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(11,hc))}}function DE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",49)(1,"mat-checkbox",50),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw(2);return e.KtG(a?r.masterToggleArticoli(l):null)}),e.qZA()()}if(2&i){const t=e.oxw(2).index,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionArticoli[t].hasValue()&&n.isAllSelectedArticoli(t))("indeterminate",n.selectionArticoli[t].hasValue()&&!n.isAllSelectedArticoli(t))}}function IE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",51)(1,"mat-checkbox",52),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2).index,T=e.oxw(2);return e.KtG(a?T.selectionArticoli[p].toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2).index,a=e.oxw(2);e.xp6(1),e.Q6J("checked",a.selectionArticoli[n].isSelected(t.oid))}}function QE(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.articolo.proprieta.nome")))}function UE(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function YE(i,o){1&i&&e._UZ(0,"mat-header-row",53)}function RE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",54),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function FE(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",36,55)(2,"mat-expansion-panel-header",38),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",39)(6,"mat-table",40),e.ynx(7,41),e.YNc(8,DE,2,2,"mat-header-cell",42),e.YNc(9,IE,2,1,"mat-cell",43),e.BQk(),e.ynx(10,44),e.YNc(11,QE,3,3,"mat-header-cell",45),e.YNc(12,UE,2,1,"mat-cell",46),e.BQk(),e.YNc(13,YE,1,0,"mat-header-row",47),e.YNc(14,RE,1,1,"mat-row",48),e.qZA()()()),2&i){const t=e.MAs(1),n=e.oxw(3);e.xp6(2),e.Q6J("ngClass",e.VKq(8,Xc,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(4,6,"sbm.configurazione-myself.impostazioni.articoli")," "),e.xp6(3),e.Q6J("dataSource",n.articoli),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(10,hc))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(11,hc))}}function HE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",7)(1,"div",8)(2,"app-url",9),e.NdJ("onExtraButtonClick",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.utility.openUrlInNewTab(r.getUrlMySelf(l.ubicazioneIstat)+"&mode=config"))}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div"),e._uU(5,"Tag Mail Prenotazione:"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"[URLMYSELF] "),e.TgZ(8,"span",10),e._uU(9,"Url login myself "),e.qZA()(),e.TgZ(10,"div"),e._uU(11,"[URLMYSELF_EMAIL] "),e.TgZ(12,"span",10),e._uU(13,"Url login myself con l'email gi\xe0 compilata"),e.qZA()(),e.TgZ(14,"div"),e._uU(15,"[URLMYSELF_CODICEPRENOTAZIONE] "),e.TgZ(16,"span",10),e._uU(17,"Url login myself con il codice prenotazione gi\xe0 compilato"),e.qZA()(),e.TgZ(18,"div",8)(19,"div",11)(20,"app-color-picker",12),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.ubicazioneIstat.coloreMySelf=a)}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"button",13),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.KtG(l.ubicazioneIstat.coloreMySelf=null)}),e.TgZ(23,"i",14),e._uU(24," settings_backup_restore "),e.qZA()()(),e.TgZ(25,"mat-form-field",15)(26,"mat-select",16),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.ubicazioneIstat.modalitaSceltaMenuMySelf=a)}),e.ALo(27,"translate"),e.YNc(28,wE,3,4,"mat-option",17),e.ALo(29,"selectEnum"),e.qZA()(),e.TgZ(30,"div",18)(31,"div",19)(32,"mat-form-field",15)(33,"input",20),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.ubicazioneIstat.timeLimitColazione=a)}),e.ALo(34,"translate"),e.qZA(),e.YNc(35,zE,3,0,"button",21),e.qZA()(),e.TgZ(36,"div",22)(37,"mat-form-field",15)(38,"input",20),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.ubicazioneIstat.timeLimitPranzo=a)}),e.ALo(39,"translate"),e.qZA(),e.YNc(40,ME,3,0,"button",21),e.qZA()(),e.TgZ(41,"div",19)(42,"mat-form-field",15)(43,"input",20),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.ubicazioneIstat.timeLimitCena=a)}),e.ALo(44,"translate"),e.qZA(),e.YNc(45,qE,3,0,"button",21),e.qZA()()(),e.TgZ(46,"div",18)(47,"div",19)(48,"mat-checkbox",23),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.ubicazioneIstat.isRoomServiceAttivo=a)}),e._uU(49),e.ALo(50,"translate"),e.qZA()(),e._UZ(51,"div",24),e.qZA(),e.TgZ(52,"div",18)(53,"div",19)(54,"mat-checkbox",23),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.ubicazioneIstat.isVisualizzaEventi=a)}),e._uU(55),e.ALo(56,"translate"),e.qZA()(),e._UZ(57,"div",24),e.qZA(),e.TgZ(58,"div",18)(59,"div",19)(60,"mat-checkbox",23),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.ubicazioneIstat.isSceltaMenuAttiva=a)}),e._uU(61),e.ALo(62,"translate"),e.qZA()(),e._UZ(63,"div",24),e.qZA(),e.TgZ(64,"div",18)(65,"div",19)(66,"mat-checkbox",23),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.ubicazioneIstat.isRichiediPagamentoArticoliECommerce=a)}),e._uU(67),e.ALo(68,"translate"),e.qZA()(),e._UZ(69,"div",24),e.qZA(),e.TgZ(70,"div",25)(71,"div",26)(72,"app-image",27),e.NdJ("edit",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.editImage(l.ubicazioneIstat,r.enumTipoImmagineUbicazioneIstat.Sfondo))})("delete",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.deleteImage(l.ubicazioneIstat,r.enumTipoImmagineUbicazioneIstat.Sfondo))}),e.qZA()(),e.TgZ(73,"div",28)(74,"app-image",27),e.NdJ("edit",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.editImage(l.ubicazioneIstat,r.enumTipoImmagineUbicazioneIstat.HeaderMySelf))})("delete",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.deleteImage(l.ubicazioneIstat,r.enumTipoImmagineUbicazioneIstat.HeaderMySelf))}),e.qZA()()(),e.TgZ(75,"mat-tab-group"),e.YNc(76,kE,2,1,"ng-container",29),e.qZA(),e.YNc(77,LE,15,12,"mat-expansion-panel",30),e.YNc(78,FE,15,12,"mat-expansion-panel",30),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("label",t.ubicazioneIstat.nome),e.xp6(2),e.Q6J("placeholder",e.lcZ(3,33,"sbm.configurazione-myself.impostazioni.urlMySelf"))("url",n.getUrlMySelf(t.ubicazioneIstat))("extraButtonIcon","edit"),e.xp6(18),e.Q6J("value",t.ubicazioneIstat.coloreMySelf)("placeholder",e.lcZ(21,35,"bo.ubicazioneIstat.proprieta.coloreMySelf")),e.xp6(6),e.s9C("placeholder",e.lcZ(27,37,"bo.ubicazioneIstat.proprieta.modalitaSceltaMenuMySelf")),e.Q6J("ngModel",t.ubicazioneIstat.modalitaSceltaMenuMySelf),e.xp6(2),e.Q6J("ngForOf",e.xi3(29,39,n.enumModalitaSceltaMenuMySelf,"modalitaSceltaMenuMySelf")),e.xp6(5),e.s9C("placeholder",e.lcZ(34,42,"bo.ubicazioneIstat.proprieta.timeLimitColazione")),e.Q6J("ngModel",t.ubicazioneIstat.timeLimitColazione),e.xp6(2),e.Q6J("ngIf",!!t.ubicazioneIstat.timeLimitColazione),e.xp6(3),e.s9C("placeholder",e.lcZ(39,44,"bo.ubicazioneIstat.proprieta.timeLimitPranzo")),e.Q6J("ngModel",t.ubicazioneIstat.timeLimitPranzo),e.xp6(2),e.Q6J("ngIf",!!t.ubicazioneIstat.timeLimitPranzo),e.xp6(3),e.s9C("placeholder",e.lcZ(44,46,"bo.ubicazioneIstat.proprieta.timeLimitCena")),e.Q6J("ngModel",t.ubicazioneIstat.timeLimitCena),e.xp6(2),e.Q6J("ngIf",!!t.ubicazioneIstat.timeLimitCena),e.xp6(3),e.Q6J("ngModel",t.ubicazioneIstat.isRoomServiceAttivo),e.xp6(1),e.hij(" ",e.lcZ(50,48,"bo.ubicazioneIstat.proprieta.isRoomServiceAttivo")," "),e.xp6(5),e.Q6J("ngModel",t.ubicazioneIstat.isVisualizzaEventi),e.xp6(1),e.hij(" ",e.lcZ(56,50,"bo.ubicazioneIstat.proprieta.isVisualizzaEventi")," "),e.xp6(5),e.Q6J("ngModel",t.ubicazioneIstat.isSceltaMenuAttiva),e.xp6(1),e.hij(" ",e.lcZ(62,52,"bo.ubicazioneIstat.proprieta.isSceltaMenuAttiva")," "),e.xp6(5),e.Q6J("ngModel",t.ubicazioneIstat.isRichiediPagamentoArticoliECommerce),e.xp6(1),e.hij(" ",e.lcZ(68,54,"bo.ubicazioneIstat.proprieta.isRichiediPagamentoArticoliECommerce")," "),e.xp6(5),e.Q6J("title","sbm.configurazione-myself.impostazioni.immagineSfondo")("url",t.ubicazioneIstat.urlImmagineSfondo),e.xp6(2),e.Q6J("title","sbm.configurazione-myself.impostazioni.immagineHeaderMySelf")("url",t.ubicazioneIstat.urlHeaderMySelf),e.xp6(2),e.Q6J("ngForOf",t.ubicazioniIstatXLingua),e.xp6(1),e.Q6J("ngIf",null!=n.contenuti&&n.contenuti.length>0),e.xp6(1),e.Q6J("ngIf",null!=n.articoli&&n.articoli.length>0)}}function KE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"mat-tab-group",4),e.YNc(2,HE,79,56,"mat-tab",5),e.qZA(),e.TgZ(3,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.rq),e.xp6(2),e.Oqu(e.lcZ(5,2,"globals.salva"))}}function GE(i,o){1&i&&(e.TgZ(0,"div",56)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione-myself.impostazioni.nessunaUbicazione")))}class Zn extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.containerService=t,this.headerService=n,this.sessionService=a,this.utility=l,this.enumTipoImmagineUbicazioneIstat=c.u,this.contenuti=[],this.articoli=[],this.selectionContenuti=[],this.selectionArticoli=[],this.enumModalitaSceltaMenuMySelf=c.eI}ngOnInit(){this.headerService.setTitle("sbm.configurazione-myself.impostazioni.title"),this.setIsLoading(!0),this.apiService.getImpostazioniMySelfView().subscribe(o=>{this.contenuti=o.data.contenuti,this.articoli=o.data.articoli,this.apiService.getUbicazioniIstatXLinguaFilter(new d.k$g(new d.aQR("ordinamento",c.nI.Asc))).subscribe(t=>{this.rq=[];for(let n of t.data){let a=new me.Ov(!0,[]);if(n.ubicazioneIstat.oidContenuti){let p=n.ubicazioneIstat.oidContenuti.split(";");for(let T of p)""!=T&&!isNaN(+T)&&-1!=this.contenuti.findIndex(L=>L.oid==+T)&&a.toggle(+T)}this.selectionContenuti.push(a);let l=new me.Ov(!0,[]);if(n.ubicazioneIstat.oidArticoli){let p=n.ubicazioneIstat.oidArticoli.split(";");for(let T of p)""!=T&&!isNaN(+T)&&-1!=this.articoli.findIndex(L=>L.oid==+T)&&l.toggle(+T)}this.selectionArticoli.push(l);let r=new d.r_O;r.ubicazioneIstat=n.ubicazioneIstat;for(let p of this.lingue){let T=new v.xUx;T.lingua=p,T.ubicazioneIstat=n.ubicazioneIstat;let L=n.ubicazioniIstatXLingua.find(G=>null!=G.lingua&&G.lingua.oid==p.oid);null!=L&&(T.testoIniziale=L.testoIniziale,T.testoIniziale2=L.testoIniziale2),r.ubicazioniIstatXLingua.push(T)}this.rq.push(r)}this.setIsLoading(!1)})})}save(){this.setIsLoading(!0),this.rq.forEach((o,t)=>o.ubicazioneIstat.oidContenuti=this.selectionContenuti[t].selected.toString().replace(/,/g,";")),this.rq.forEach((o,t)=>o.ubicazioneIstat.oidArticoli=this.selectionArticoli[t].selected.toString().replace(/,/g,";")),this.apiService.setUbicazioniIstat(this.rq).subscribe(()=>{this.setIsLoading(!1),this.showInfo("globals.messages.datiSalvati").then(()=>{this.containerService.scrollToTop()})})}editImage(o,t){let n=new d.Zpt;n.width="50vw";let a=this.showModalDialog(Ve.t,n),l=a.componentInstance;l._url=t==c.u.Sfondo?o.urlImmagineSfondo:t==c.u.HeaderMySelf?o.urlHeaderMySelf:"",l.title=t==c.u.Sfondo?"sbm.configurazione-myself.impostazioni.immagineSfondo":t==c.u.HeaderMySelf?"sbm.configurazione-myself.impostazioni.immagineHeaderMySelf":"",l.dialogRef=a,a.afterClosed().subscribe(r=>{if(null!=r){this.setIsLoading(!0);let p=new d.R_j;p.oid=o.oid,p.tipoImmagine=t,p.base64=r,this.apiService.setImmagineUbicazioneIstat(p).subscribe(T=>{null!=T.data&&(t==c.u.Sfondo?o.urlImmagineSfondo=T.data.url:t==c.u.HeaderMySelf&&(o.urlHeaderMySelf=T.data.url)),this.setIsLoading(!1)})}})}deleteImage(o,t){this.showDialogConfirm("globals.eliminareImmagine").then(n=>{this.setIsLoading(!0);let a=new d.R_j;a.oid=o.oid,a.tipoImmagine=t,a.base64="",this.apiService.setImmagineUbicazioneIstat(a).subscribe(l=>{null!=l.data&&(t==c.u.Sfondo?o.urlImmagineSfondo=l.data.url:t==c.u.HeaderMySelf&&(o.urlHeaderMySelf=l.data.url)),this.setIsLoading(!1)})},n=>{})}getUrlMySelf(o){return window.location.origin+"/myself?oidUbicazioneIstat="+o.oid}isAllSelectedContenuti(o){return this.selectionContenuti[o].selected.length==this.contenuti.length}masterToggleContenuti(o){this.isAllSelectedContenuti(o)?this.selectionContenuti[o].clear():this.contenuti.forEach(t=>this.selectionContenuti[o].select(t.oid))}isAllSelectedArticoli(o){return this.selectionArticoli[o].selected.length==this.articoli.length}masterToggleArticoli(o){this.isAllSelectedArticoli(o)?this.selectionArticoli[o].clear():this.articoli.forEach(t=>this.selectionArticoli[o].select(t.oid))}ngOnDestroy(){this.headerService.clearTitle()}}function $E(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumCategoriaAllergene,t,"categoriaAllergene"))," ")}}function BE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"app-image",19),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.modelEdit.piatto.urlImmagine)}}function VE(i,o){1&i&&(e.TgZ(0,"div",20)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione-myself.piatti.salvarePiatto")))}function XE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",22)(1,"mat-form-field",23)(2,"input",24),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.piattiXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",25),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.piattiXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.piattoXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.piattiXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.piattoXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.piattiXLingua[a].descrizione)}}function jE(i,o){if(1&i&&(e.ynx(0),e.YNc(1,XE,7,10,"mat-tab",21),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function WE(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Zn.\u0275fac=function(o){return new(o||Zn)(e.Y36(A.s),e.Y36(te.J),e.Y36(ie.r),e.Y36(j.m),e.Y36(C.t))},Zn.\u0275cmp=e.Xpm({type:Zn,selectors:[["app-configurazione-impostazioni-my-self"]],features:[e.qOj],decls:3,vars:2,consts:[[1,"p-3"],["class","border rounded p-3 mat-elevation-z1 bg-white",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"border","rounded","p-3","mat-elevation-z1","bg-white"],[1,"configurazione-impostazioni-my-self-tab-group"],[3,"label",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],[3,"label"],[1,"mt-3"],[3,"placeholder","url","extraButtonIcon","onExtraButtonClick"],[1,"d-inline-block","ml-1","div-help"],[1,"myself-color-picker","mr-3"],[3,"value","placeholder","valueChange"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons"],[1,"w-100"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row","no-gutters"],[1,"col-4"],["autocompleteOff","","type","time","matInput","",3,"placeholder","ngModel","ngModelChange"],["matSuffix","","mat-icon-button","","color","primary",3,"click",4,"ngIf"],[1,"col-4","pr-3","pl-3"],["color","primary",3,"ngModel","ngModelChange"],[1,"col-8","div-help"],[1,"row","no-gutters","mt-3","mb-3"],[1,"col-6","pr-2"],[3,"title","url","edit","delete"],[1,"col-6","pl-2"],[4,"ngFor","ngForOf"],["class","mat-elevation-z0 border mt-3 mb-3",4,"ngIf"],[3,"value"],["matSuffix","","mat-icon-button","","color","primary",3,"click"],[1,"material-icons","clear-icon"],[3,"label",4,"ngIf"],[3,"id","text","textChange"],[1,"mat-elevation-z0","border","mt-3","mb-3"],["panel1",""],[3,"ngClass"],[1,"mat-table-container-border-rounded","mb-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["panel2",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,KE,6,4,"div",1),e.YNc(2,GE,4,3,"div",2),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",null!=t.rq&&t.rq.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.rq&&0==t.rq.length))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,g.x8,ee.SK,ee.R7,ye.ib,ye.yz,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.JJ,_.On,We.h,Me.P,Ge.c,Be,Te.A,z.X$],styles:[".myself-color-picker[_ngcontent-%COMP%]{width:calc(100% - 40px - 1rem);display:inline-block}  .configurazione-impostazioni-my-self-tab-group .mat-tab-body-content{overflow-x:hidden!important}.clear-icon[_ngcontent-%COMP%]{font-size:16px}"]});const eN=function(i){return{"color-pink":i}};class Ai extends f.H{set piatto(o){if(null!=o){if(this.modelEdit=new d.oB7,this.modelEdit.piatto=o,this.allergeniSelected=[],this.modelEdit.piatto.allergeni){let t=this.modelEdit.piatto.allergeni.split(";");for(let n of t)""!=n&&!isNaN(+n)&&+n in c.sz&&this.allergeniSelected.push(+n)}this.selectedIndex=0;for(let t of this.lingue){let n=new v.Cue;n.lingua=t,this.modelEdit.piattiXLingua.push(n)}null!=o.oid&&-1!=o.oid&&(this.setIsLoading(!0),this.apiService.getPiattiXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.piattiXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.piattiXLingua[a].piatto=n.piatto,this.modelEdit.piattiXLingua[a].nome=n.nome,this.modelEdit.piattiXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)}))}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.oB7,this.enumCategoriaAllergene=c.sz,this.allergeni=[],this.allergeniSelected=[],this.selectedIndex=0,this.backEvent=new e.vpe}ngOnInit(){this.allergeni=Object.keys(c.sz).map(o=>c.sz[o]).filter(o=>!isNaN(o)&&o!=c.sz.Nessuno)}save(){for(let o of this.modelEdit.piattiXLingua)o.piatto=this.modelEdit.piatto;this.modelEdit.piatto.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.piatto.allergeni=this.allergeniSelected.join(";"),this.setIsLoading(!0),this.apiService.setPiatto(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione-myself.piatti.piattoSalvato").then(()=>{let t=null==this.modelEdit.piatto.oid||this.modelEdit.piatto.oid<=0;this.modelEdit.piatto=o.data.obj,this.modelEdit.piattiXLingua=o.data.details,t?setTimeout(()=>{this.selectedIndex=0},200):this.backEvent.emit(!0)})})}delete(o){this.showDialogConfirm("sbm.configurazione-myself.piatti.eliminarePiatto").then(t=>{null!=o&&(this.modelEdit.piatto=o),this.modelEdit.piatto.isDeleted=!0,this.setIsLoading(!0),this.apiService.setPiatto(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.backEvent.emit(!0)})},t=>{})}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.modelEdit.piatto.urlImmagine,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.pVA;l.oid=this.modelEdit.piatto.oid,l.base64=a,this.apiService.setImmaginePiattoMySelf(l).subscribe(r=>{null!=r.data&&(this.modelEdit.piatto.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.pVA;t.oid=this.modelEdit.piatto.oid,t.base64="",this.apiService.setImmaginePiattoMySelf(t).subscribe(n=>{null!=n.data&&(this.modelEdit.piatto.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}onSelectDeselectAllClickAllergeni(o){this.isAllSelectedAllergeni(o)?this.allergeniSelected=[]:this.allergeniSelected=this.allergeni.slice()}isAllSelectedAllergeni(o){return o.selected.length==this.allergeni.length}isAllDeselectedAllergeni(o){return 0==o.selected.length}}function tN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",10),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.editPiatto(l))}),e.TgZ(2,"i",11),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"span"),e._uU(5),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(5),e.Oqu(t.nome)}}function iN(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"h5",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,tN,6,1,"div",9),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"enumerations.tipoPasto.colazione")),e.xp6(2),e.Q6J("ngForOf",t.piattiColazione)}}function oN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",10),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.editPiatto(l))}),e.TgZ(2,"i",11),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"span"),e._uU(5),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(5),e.Oqu(t.nome)}}function nN(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"h5",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,oN,6,1,"div",9),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"enumerations.tipoPasto.pranzo")),e.xp6(2),e.Q6J("ngForOf",t.piattiPranzo)}}function aN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",10),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.editPiatto(l))}),e.TgZ(2,"i",11),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"span"),e._uU(5),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(5),e.Oqu(t.nome)}}function lN(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"h5",8),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,aN,6,1,"div",9),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"enumerations.tipoPasto.cena")),e.xp6(2),e.Q6J("ngForOf",t.piattiCena)}}function rN(i,o){1&i&&(e.TgZ(0,"div",12)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione-myself.menu.nessunPiatto")))}function cN(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,iN,5,4,"div",3),e.YNc(3,nN,5,4,"div",3),e.YNc(4,lN,5,4,"div",3),e.qZA(),e.YNc(5,rN,4,3,"div",4),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backEvent.emit())}),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",null!=t.piattiColazione&&t.piattiColazione.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.piattiPranzo&&t.piattiPranzo.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.piattiCena&&t.piattiCena.length>0),e.xp6(1),e.Q6J("ngIf",!(null!=t.piattiColazione&&0!=t.piattiColazione.length||null!=t.piattiPranzo&&0!=t.piattiPranzo.length||null!=t.piattiCena&&0!=t.piattiCena.length)),e.xp6(3),e.Oqu(e.lcZ(9,5,"globals.annulla"))}}function sN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-configurazione-piatti-my-self-edit",13),e.NdJ("backEvent",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.back(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("piatto",t.piattoEditing)}}Ai.\u0275fac=function(o){return new(o||Ai)(e.Y36(A.s),e.Y36(j.m))},Ai.\u0275cmp=e.Xpm({type:Ai,selectors:[["app-configurazione-piatti-my-self-edit"]],inputs:{piatto:"piatto"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:28,vars:37,consts:[[1,"w-100"],["autocompleteOff","","type","search","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectAllergeni",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value",4,"ngFor","ngForOf"],["class","row mt-3",4,"ngIf"],["class","mt-3 p-3 border rounded",4,"ngIf"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],[1,"row","mt-3"],[1,"col-6"],[3,"title","url","edit","delete"],[1,"mt-3","p-3","border","rounded"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"mat-form-field",0)(1,"input",1),e.NdJ("ngModelChange",function(l){return t.modelEdit.piatto.nome=l}),e.ALo(2,"translate"),e.qZA()(),e.TgZ(3,"mat-form-field",0)(4,"input",2),e.NdJ("ngModelChange",function(l){return t.modelEdit.piatto.quantitaMassimaXPersona=l}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"app-view-select",3),e.NdJ("valueChange",function(l){return t.modelEdit.piatto.categoriaPiatto=l}),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-form-field",0)(9,"mat-select",4,5),e.NdJ("ngModelChange",function(l){return t.allergeniSelected=l}),e.ALo(11,"translate"),e.TgZ(12,"mat-checkbox",6),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(10);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickAllergeni(r))}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.YNc(15,$E,3,4,"mat-option",7),e.qZA()(),e.YNc(16,BE,3,2,"div",8),e.YNc(17,VE,4,3,"div",9),e.TgZ(18,"mat-tab-group",10),e.NdJ("selectedIndexChange",function(l){return t.selectedIndex=l}),e.YNc(19,jE,2,1,"ng-container",11),e.qZA(),e.TgZ(20,"div",12)(21,"button",13),e.NdJ("click",function(){return t.save()}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.YNc(24,WE,3,3,"button",14),e.TgZ(25,"button",15),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()}if(2&o){const n=e.MAs(10);e.xp6(1),e.s9C("placeholder",e.lcZ(2,21,"bo.piatto.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.piatto.nome),e.xp6(3),e.s9C("placeholder",e.lcZ(5,23,"bo.piatto.proprieta.quantitaMassimaXPersona")),e.Q6J("ngModel",t.modelEdit.piatto.quantitaMassimaXPersona),e.xp6(2),e.Q6J("dataLoader",t.apiService.getCategoriePiattiViewSelect(null,!1))("value",t.modelEdit.piatto.categoriaPiatto)("placeholder",e.lcZ(7,25,"bo.piatto.proprieta.categoriaPiatto")),e.xp6(3),e.Q6J("placeholder",e.lcZ(11,27,"bo.piatto.proprieta.allergeni"))("ngModel",t.allergeniSelected),e.xp6(3),e.Q6J("ngClass",e.VKq(35,eN,t.isAllSelectedAllergeni(n)))("checked",t.isAllSelectedAllergeni(n))("indeterminate",!t.isAllSelectedAllergeni(n)&&!t.isAllDeselectedAllergeni(n)),e.xp6(1),e.hij(" ",e.lcZ(14,29,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",t.allergeni),e.xp6(1),e.Q6J("ngIf",t.modelEdit.piatto.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.piatto.oid||t.modelEdit.piatto.oid<=0),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.piattiXLingua),e.xp6(3),e.Oqu(e.lcZ(23,31,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.modelEdit.piatto.oid>0),e.xp6(2),e.Oqu(e.lcZ(27,33,"globals.annulla"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,Me.P,ne.d,Ge.c,z.X$]});class An extends f.H{constructor(){super(),this.backEvent=new e.vpe,this.enumTipoPasto=c.C2}editPiatto(o){this.piattoEditing=JSON.parse(JSON.stringify(o))}back(o){if(o)if(this.piattoEditing.isDeleted)this.piattiColazione=this.piattiColazione.filter(t=>t.oid!=this.piattoEditing.oid),this.piattiPranzo=this.piattiPranzo.filter(t=>t.oid!=this.piattoEditing.oid),this.piattiCena=this.piattiCena.filter(t=>t.oid!=this.piattoEditing.oid);else{let t=0;for(let n of this.piattiColazione)n.oid==this.piattoEditing.oid&&(this.piattiColazione[t]=this.piattoEditing),t++;t=0;for(let n of this.piattiPranzo)n.oid==this.piattoEditing.oid&&(this.piattiPranzo[t]=this.piattoEditing),t++;t=0;for(let n of this.piattiCena)n.oid==this.piattoEditing.oid&&(this.piattiCena[t]=this.piattoEditing),t++}this.piattoEditing=null}}function pN(i,o){1&i&&(e.TgZ(0,"div",18)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione-myself.menu.nessunMenu")))}function dN(i,o){1&i&&e._UZ(0,"mat-header-cell")}function mN(i,o){1&i&&(e.TgZ(0,"mat-cell",19)(1,"button",20)(2,"i",21),e._uU(3,"edit"),e.qZA()()())}function _N(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.menu.proprieta.descrizione")))}function uN(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.menu.descrizione)}}function gN(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.menu.proprieta.colore")))}function hN(i,o){if(1&i&&e._UZ(0,"mat-cell",22),2&i){const t=o.$implicit;e.Udp("background-color",t.menu.coloreHex)}}function fN(i,o){1&i&&e._UZ(0,"mat-header-row",23)}function CN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",24),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.menu.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.menu.oid?t.menu.oid:"")}}An.\u0275fac=function(o){return new(o||An)},An.\u0275cmp=e.Xpm({type:An,selectors:[["app-configurazione-menu-my-self-edit"]],inputs:{piattiColazione:"piattiColazione",piattiPranzo:"piattiPranzo",piattiCena:"piattiCena"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:2,vars:2,consts:[[4,"ngIf"],[3,"piatto","backEvent",4,"ngIf"],[1,"row"],["class","col-4",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-3",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","blank",3,"click"],[1,"col-4"],[1,"font-weight-bold","mb-2"],[4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",1,"editPiatto","mr-1",3,"click"],[1,"material-icons-round"],[1,"border","rounded-lg","mat-elevation-z1","p-3"],[3,"piatto","backEvent"]],template:function(o,t){1&o&&(e.YNc(0,cN,10,7,"ng-container",0),e.YNc(1,sN,1,1,"app-configurazione-piatti-my-self-edit",1)),2&o&&(e.Q6J("ngIf",null==t.piattoEditing),e.xp6(1),e.Q6J("ngIf",null!=t.piattoEditing))},dependencies:[m.sg,m.O5,h.eB,Ai,z.X$],styles:[".editPiatto[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px}.editPiatto[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;line-height:18px}"]});class wn extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","descrizione","colore"]}ngOnInit(){this.headerService.setTitle("sbm.configurazione-myself.menu.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getMenu().subscribe(o=>{for(let t of o.data.map(n=>n.menu))try{t.coloreHex=Z(t.colore).hex()}catch(n){}this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}edit(o){this.piattiColazione=o.piattiColazione,this.piattiPranzo=o.piattiPranzo,this.piattiCena=o.piattiCena,this.showTable=!1,this.containerService.scrollToTop()}}function bN(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function vN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.pagina.pagina.isUsaEditor=a)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngModel",t.pagina.pagina.isUsaEditor),e.xp6(1),e.Oqu(e.lcZ(2,2,"bo.mySelfPage.proprieta.isUsaEditor"))}}wn.\u0275fac=function(o){return new(o||wn)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},wn.\u0275cmp=e.Xpm({type:wn,selectors:[["app-configurazione-menu-my-self"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:20,vars:12,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","descrizione"],[4,"matCellDef"],["matColumnDef","colore"],["class","rounded",3,"backgroundColor",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"piattiColazione","piattiPranzo","piattiCena","backEvent"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"rounded"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,pN,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,dN,1,0,"mat-header-cell",6),e.YNc(7,mN,4,0,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,_N,3,3,"mat-header-cell",6),e.YNc(10,uN,2,1,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,gN,3,3,"mat-header-cell",6),e.YNc(13,hN,1,2,"mat-cell",11),e.BQk(),e.YNc(14,fN,1,0,"mat-header-row",12),e.YNc(15,CN,1,1,"mat-row",13),e.qZA()(),e.TgZ(16,"div",14)(17,"mat-paginator",15),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(18,"div",16)(19,"app-configurazione-menu-my-self-edit",17),e.NdJ("backEvent",function(){return t.showTable=!0,t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("piattiColazione",t.piattiColazione)("piattiPranzo",t.piattiPranzo)("piattiCena",t.piattiCena))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,An,z.X$]});class zn extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.pagina=new d.DaO,this.enumTipoPaginaMySelf=c.vg}ngOnInit(){this.pagina.pagina.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.pagina.pagina.isUsaEditor=!1}save(){this.setIsLoading(!0),this.apiService.setPaginaMySelf(this.pagina).subscribe(o=>{this.setIsLoading(!1),this.dialogRef.close(o.data.obj)})}}function TN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.pagina.url=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"bo.mySelfPage.proprieta.url")),e.Q6J("ngModel",t.modelEdit.pagina.url)}}function xN(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"span",20),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"i"),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"bo.mySelfPage.proprieta.icona")+": "),e.xp6(2),e.Tol(t.modelEdit.pagina.icona+" align-middle ml-1")}}function ZN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,l=e.oxw();return e.KtG(l.copiaAltreLingue(a))}),e.ALo(1,"translate"),e.TgZ(2,"i",27),e._uU(3,"content_copy"),e.qZA()()}2&i&&e.Q6J("disableRipple",!0)("matTooltip",e.lcZ(1,2,"globals.copiaAltreLingue"))}function AN(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.YNc(2,ZN,4,4,"button",25)),2&i){const t=e.oxw(2),n=t.$implicit,a=t.index,l=e.oxw();e.xp6(1),e.Oqu(n.lingua.nome),e.xp6(1),e.Q6J("ngIf",l.selectedIndex==a)}}function wN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,l=e.oxw();return e.KtG(l.openEditor(a))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione-myself.pagine.editorGrafico")))}function zN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,l=e.oxw();return e.KtG(l.openEditor(a))}),e.qZA()}}function MN(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,wN,3,3,"button",28),e.TgZ(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",29),e.YNc(6,zN,1,0,"div",30),e.TgZ(7,"app-editor",31),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw();return e.KtG(r.modelEdit.pagineXLingua[l].testo=a)}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2).index,n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.modelEdit.pagina.isUsaEditor||n.modelEdit.pagina.isUsaEditor),e.xp6(2),e.Oqu(e.lcZ(4,6,"bo.mySelfPageXLingua.proprieta.testo")),e.xp6(3),e.Q6J("ngIf",n.modelEdit.pagina.isUsaEditor),e.xp6(1),e.Q6J("id","testo"+t)("text",n.modelEdit.pagineXLingua[t].testo)("disabled",n.modelEdit.pagina.isUsaEditor)}}zn.\u0275fac=function(o){return new(o||zn)(e.Y36(A.s),e.Y36(j.m))},zn.\u0275cmp=e.Xpm({type:zn,selectors:[["app-configurazione-pagine-my-self-add"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:19,vars:18,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],[1,"w-100"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange",4,"ngIf"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"],["color","primary",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.pagina.pagina.tipoPaginaMySelf=a}),e.ALo(7,"translate"),e.YNc(8,bN,3,4,"mat-option",6),e.ALo(9,"selectEnum"),e.qZA()()(),e.TgZ(10,"div",3)(11,"mat-form-field",4)(12,"input",7),e.NdJ("ngModelChange",function(a){return t.pagina.pagina.nome=a}),e.ALo(13,"translate"),e.qZA()()()(),e.YNc(14,vN,3,4,"mat-checkbox",8),e.TgZ(15,"div",9)(16,"button",10),e.NdJ("click",function(){return t.save()}),e._uU(17),e.ALo(18,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.Q6J("ngModel",t.pagina.pagina.tipoPaginaMySelf)("placeholder",e.lcZ(7,9,"bo.mySelfPage.proprieta.tipoPaginaMySelf")),e.xp6(2),e.Q6J("ngForOf",e.xi3(9,11,t.enumTipoPaginaMySelf,"tipoPaginaMySelf")),e.xp6(4),e.s9C("placeholder",e.lcZ(13,14,"bo.mySelfPage.proprieta.nome")),e.Q6J("ngModel",t.pagina.pagina.nome),e.xp6(2),e.Q6J("ngIf",t.pagina.pagina.tipoPaginaMySelf==t.enumTipoPaginaMySelf.Pagina),e.xp6(2),e.Q6J("disabled",!t.pagina.pagina.nome||null==t.pagina.pagina.tipoPaginaMySelf),e.xp6(1),e.Oqu(e.lcZ(18,16,"globals.salva")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,_.Fj,_.JJ,_.On,Te.A,z.X$]});const qN=function(i){return{"titoloInput mr-3":i}};function PN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",22),e.YNc(1,AN,3,2,"ng-template",23),e.TgZ(2,"mat-form-field",24)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.pagineXLingua[l].titolo=a)}),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,MN,8,8,"ng-container",10),e.qZA()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.Q6J("ngClass",e.VKq(7,qN,l.modelEdit.pagina.tipoPaginaMySelf==l.enumTipoPaginaMySelf.Pagina&&(null==l.modelEdit.pagina.isUsaEditor||l.modelEdit.pagina.isUsaEditor))),e.xp6(1),e.s9C("placeholder",e.lcZ(4,5,"bo.mySelfPageXLingua.proprieta.titolo")),e.Q6J("ngModel",l.modelEdit.pagineXLingua[a].titolo),e.xp6(2),e.Q6J("ngIf",l.modelEdit.pagina.tipoPaginaMySelf==l.enumTipoPaginaMySelf.Pagina)}}function kN(i,o){if(1&i&&(e.ynx(0),e.YNc(1,PN,6,9,"mat-tab",21),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function SN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}const yN=function(i){return{"ml-3":i}};class Mn extends f.H{set pagina(o){if(null!=o){this.modelEdit=new d.DaO,this.modelEdit.pagina=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.ZdY;n.lingua=t,this.modelEdit.pagineXLingua.push(n)}null!=o.oid&&-1!=o.oid&&(this.setIsLoading(!0),this.apiService.getPagineMySelfXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.pagineXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.pagineXLingua[a].mySelfPage=n.mySelfPage,this.modelEdit.pagineXLingua[a].titolo=n.titolo,this.modelEdit.pagineXLingua[a].testo=n.testo,this.modelEdit.pagineXLingua[a].design=n.design)}this.setIsLoading(!1)}))}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.DaO,this.selectedIndex=0,this.enumTipoPaginaMySelf=c.vg,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.pagineXLingua)o.mySelfPage=this.modelEdit.pagina;if(this.modelEdit.pagina.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.pagina.coloreHex)try{this.modelEdit.pagina.colore=Z(this.modelEdit.pagina.coloreHex).rgbNumber()}catch(o){}this.setIsLoading(!0),this.apiService.setPaginaMySelf(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione-myself.pagine.paginaSalvata").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione-myself.pagine.eliminarePagina").then(t=>{null!=o&&(this.modelEdit.pagina=o),this.modelEdit.pagina.isDeleted=!0,this.setIsLoading(!0),this.apiService.setPaginaMySelf(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}openEditor(o){let t=new d.Zpt;t.width="80vw",t.minHeight="95vh";let n=this.showModalDialog(zt,t),a=n.componentInstance;a.design=o.design,a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){o.design=JSON.stringify(l.design),o.testo=l.html;for(let r of this.modelEdit.pagineXLingua)r.design||(r.design=o.design),r.testo||(r.testo=o.testo)}})}editIcon(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qt,o),n=t.componentInstance;n.icon=this.modelEdit.pagina.icona,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&(this.modelEdit.pagina.icona=a)})}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.modelEdit.pagina.urlImmagine,n.maximumFileSize=1e5,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.gdZ;l.oid=this.modelEdit.pagina.oid,l.base64=a,this.apiService.setImmaginePaginaMySelf(l).subscribe(r=>{null!=r.data&&(this.modelEdit.pagina.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.gdZ;t.oid=this.modelEdit.pagina.oid,t.base64="",this.apiService.setImmaginePaginaMySelf(t).subscribe(n=>{null!=n.data&&(this.modelEdit.pagina.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}copiaAltreLingue(o){this.showDialogConfirm("globals.effettuareOperazione").then(()=>{for(let t of this.modelEdit.pagineXLingua)t.titolo=o.titolo,t.design=o.design,t.testo=o.testo},()=>{})}}function JN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",30)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione-myself.pagine.nessunaPagina")))}function EN(i,o){1&i&&e._UZ(0,"mat-header-cell")}function NN(i,o){1&i&&(e.TgZ(0,"mat-cell",31)(1,"button",32)(2,"i",33),e._uU(3,"edit"),e.qZA()()())}function ON(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.mySelfPage.proprieta.nome"),""))}function LN(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function DN(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.mySelfPage.proprieta.tipoPaginaMySelf"),""))}function IN(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoPaginaMySelf,t.tipoPaginaMySelf,"tipoPaginaMySelf")))}}function QN(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.mySelfPage.proprieta.isHome"),""))}function UN(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isHome)}}function YN(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.mySelfPage.proprieta.isAttiva"),""))}function RN(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttiva)}}function FN(i,o){1&i&&(e.TgZ(0,"mat-header-cell",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.mySelfPage.proprieta.isUsaEditor"),""))}function HN(i,o){if(1&i&&(e.TgZ(0,"mat-cell",35),e._UZ(1,"mat-checkbox",36),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isUsaEditor)("indeterminate",null==t.isUsaEditor)}}function KN(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.mySelfPage.proprieta.colore"),""))}function GN(i,o){if(1&i&&e._UZ(0,"mat-cell",37),2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex)}}function $N(i,o){1&i&&e._UZ(0,"mat-header-cell",38)}function BN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",39)(1,"button",40),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(38);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",41),e._uU(3,"delete"),e.qZA()()()}}function VN(i,o){1&i&&e._UZ(0,"mat-header-row",42)}function XN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",43),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Mn.\u0275fac=function(o){return new(o||Mn)(e.Y36(A.s),e.Y36(j.m))},Mn.\u0275cmp=e.Xpm({type:Mn,selectors:[["app-configurazione-pagine-my-self-edit"]],inputs:{pagina:"pagina"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:41,vars:40,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"value","placeholder","valueChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["class","w-100",4,"ngIf"],[1,"col-4"],["color","primary",3,"ngModel","ngModelChange"],[1,"row","mt-3","mb-3"],[4,"ngIf"],["mat-flat-button","","color","primary",1,"align-middle",3,"ngClass","click"],[1,"col-8","div-help"],[3,"title","url","edit","delete"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"align-middle"],[3,"label",4,"ngIf"],[3,"label"],["mat-tab-label",""],[1,"mt-3","w-100",3,"ngClass"],["mat-icon-button","","color","primary","class","copiaAltreLingua",3,"disableRipple","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","primary",1,"copiaAltreLingua",3,"disableRipple","matTooltip","click"],[1,"material-icons-round"],["class","mt-2 editorButton","mat-flat-button","","color","primary",3,"click",4,"ngIf"],[1,"position-relative"],["class","w-100 h-100 position-absolute cursor-pointer testo-container",3,"click",4,"ngIf"],[3,"id","text","disabled","textChange"],["mat-flat-button","","color","primary",1,"mt-2","editorButton",3,"click"],[1,"w-100","h-100","position-absolute","cursor-pointer","testo-container",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.pagina.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"app-color-picker",4),e.NdJ("valueChange",function(a){return t.modelEdit.pagina.coloreHex=a}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"app-view-select",5),e.NdJ("valueChange",function(a){return t.modelEdit.pagina.ubicazioneIstat=a}),e.ALo(9,"translate"),e.qZA(),e.YNc(10,TN,3,4,"mat-form-field",6),e.TgZ(11,"div",0)(12,"div",7)(13,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.pagina.isHome=a}),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",7)(17,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.pagina.isAttiva=a}),e._uU(18),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",9)(21,"div",7),e.YNc(22,xN,5,5,"ng-container",10),e.TgZ(23,"button",11),e.NdJ("click",function(){return t.editIcon()}),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",12),e._uU(27," Seleziona l'icona della pagina "),e.qZA()(),e.TgZ(28,"div",9)(29,"div",1)(30,"app-image",13),e.NdJ("edit",function(){return t.editImage()})("delete",function(){return t.deleteImage()}),e.qZA()()(),e.TgZ(31,"mat-tab-group",14),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(32,kN,2,1,"ng-container",15),e.qZA(),e.TgZ(33,"div",16)(34,"button",17),e.NdJ("click",function(){return t.save()}),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.YNc(37,SN,3,3,"button",18),e.TgZ(38,"button",19),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(39),e.ALo(40,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,22,"bo.mySelfPage.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.pagina.nome),e.xp6(3),e.Q6J("value",t.modelEdit.pagina.coloreHex)("placeholder",e.lcZ(7,24,"bo.mySelfPage.proprieta.colore")),e.xp6(2),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.modelEdit.pagina.ubicazioneIstat)("placeholder",e.lcZ(9,26,"bo.mySelfPage.proprieta.ubicazioneIstat")),e.xp6(2),e.Q6J("ngIf",t.modelEdit.pagina.tipoPaginaMySelf==t.enumTipoPaginaMySelf.Link),e.xp6(3),e.Q6J("ngModel",t.modelEdit.pagina.isHome),e.xp6(1),e.hij(" ",e.lcZ(15,28,"bo.mySelfPage.proprieta.isHome")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.pagina.isAttiva),e.xp6(1),e.hij(" ",e.lcZ(19,30,"bo.mySelfPage.proprieta.isAttiva")," "),e.xp6(4),e.Q6J("ngIf",!!t.modelEdit.pagina.icona),e.xp6(1),e.Q6J("ngClass",e.VKq(38,yN,!!t.modelEdit.pagina.icona)),e.xp6(1),e.Oqu(e.lcZ(25,32,"sbm.tabelle.servizi.selezionaIcona")),e.xp6(6),e.Q6J("title","globals.immagine")("url",t.modelEdit.pagina.urlImmagine),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.pagineXLingua),e.xp6(3),e.Oqu(e.lcZ(36,34,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.modelEdit.pagina.oid>0),e.xp6(2),e.Oqu(e.lcZ(40,36,"globals.annulla")))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.gz,ee.R7,q.Kd,_.Fj,_.JJ,_.On,We.h,Me.P,ne.d,Ge.c,z.X$],styles:[".editorButton[_ngcontent-%COMP%]{width:125px}.titoloInput[_ngcontent-%COMP%]{width:calc(100% - 125px - 1rem)!important}.testo-container[_ngcontent-%COMP%]{z-index:1}.copiaAltreLingua[_ngcontent-%COMP%]{position:absolute;right:0;top:0}"]});class qn extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","tipo","isHome","isAttiva","isUsaEditor","colore","delete"],this.enumTipoPaginaMySelf=c.vg}ngOnInit(){this.headerService.setTitle("sbm.configurazione-myself.pagine.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getPagineMySelf().subscribe(o=>{o.data.forEach(t=>{try{t.coloreHex=Z(t.colore).hex()}catch(n){}}),this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(zn,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.edit(a)})}edit(o){this.pagina=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}function jN(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",11),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",30)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione-myself.piatti.nessunPiatto")))}function WN(i,o){1&i&&e._UZ(0,"mat-header-cell")}function eO(i,o){1&i&&(e.TgZ(0,"mat-cell",31)(1,"button",32)(2,"i",33),e._uU(3,"edit"),e.qZA()()())}function tO(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.piatto.proprieta.nome"),""))}function iO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function oO(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.piatto.proprieta.categoriaPiatto"),""))}function nO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.categoriaPiatto?t.categoriaPiatto.descrizione:"")}}function aO(i,o){1&i&&e._UZ(0,"mat-header-cell",34)}function lO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",35)(1,"button",36),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(37);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",37),e._uU(3,"delete"),e.qZA()()()}}function rO(i,o){1&i&&e._UZ(0,"mat-header-row",38)}function cO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",39),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}qn.\u0275fac=function(o){return new(o||qn)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},qn.\u0275cmp=e.Xpm({type:qn,selectors:[["app-configurazione-pagine-my-self"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:39,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","tipo"],["matColumnDef","isHome"],["matColumnDef","isAttiva"],["matColumnDef","isUsaEditor"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","colore"],["class","rounded",3,"backgroundColor",4,"matCellDef"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"pagina","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary","disabled","",3,"checked"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked","indeterminate"],[1,"rounded"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,JN,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,EN,1,0,"mat-header-cell",8),e.YNc(10,NN,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,ON,3,3,"mat-header-cell",8),e.YNc(13,LN,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,DN,3,3,"mat-header-cell",8),e.YNc(16,IN,3,3,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,QN,3,3,"mat-header-cell",8),e.YNc(19,UN,2,1,"mat-cell",11),e.BQk(),e.ynx(20,14),e.YNc(21,YN,3,3,"mat-header-cell",8),e.YNc(22,RN,2,1,"mat-cell",11),e.BQk(),e.ynx(23,15),e.YNc(24,FN,3,3,"mat-header-cell",16),e.YNc(25,HN,2,2,"mat-cell",17),e.BQk(),e.ynx(26,18),e.YNc(27,KN,3,3,"mat-header-cell",8),e.YNc(28,GN,1,2,"mat-cell",19),e.BQk(),e.ynx(29,20),e.YNc(30,$N,1,0,"mat-header-cell",21),e.YNc(31,BN,4,0,"mat-cell",22),e.BQk(),e.YNc(32,VN,1,0,"mat-header-row",23),e.YNc(33,XN,1,1,"mat-row",24),e.qZA()(),e.TgZ(34,"div",25)(35,"mat-paginator",26),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(36,"div",27)(37,"app-configurazione-pagine-my-self-edit",28,29),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("pagina",t.pagina))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Mn,z.X$]});class Pn extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","categoriaPiatto","delete"],this.filters=[]}ngOnInit(){this.headerService.setTitle("sbm.configurazione-myself.piatti.title"),this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("categoriaPiatto.oid",c.Hp.Equal,"",c.NM.Number))}ngAfterViewInit(){this.download()}download(o=!0){o&&this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe();let t=new d.k$g;t.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPiattiFilter(t).subscribe(n=>{this.dataSource=new s.r4(n.data),this.dataSource.paginator=this.paginator,o&&this.setIsLoading(!1)})}add(){this.piatto=new v.PEK(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.piatto=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(n),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle()}}function sO(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function pO(i,o){1&i&&(e.TgZ(0,"div",46)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione-myself.conteggio-piatti.nessunPiatto")))}function dO(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneConteggioPiatti.proprieta.data")))}function mO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function _O(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.cliente")))}function uO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.prenotazione&&null!=t.prenotazione.cliente?t.prenotazione.cliente.ragioneSociale:"")}}function gO(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tipoCameraOTA")))}function hO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.prenotazione&&null!=t.prenotazione.tipoCameraOTA?t.prenotazione.tipoCameraOTA.descrizione:"")}}function fO(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneConteggioPiatti.proprieta.prenotazione")))}function CO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.prenotazione?t.prenotazione.codicePrenotazione?t.prenotazione.codicePrenotazione:t.prenotazione.codiceOTA:"")}}function bO(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneConteggioPiatti.proprieta.piatto")))}function vO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.piatto?t.piatto.nome:"")}}function TO(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneConteggioPiatti.proprieta.tipoPasto")))}function xO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoPasto,t.tipoPasto,"tipoPasto")))}}function ZO(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneConteggioPiatti.proprieta.quantita")))}function AO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.quantita)}}function wO(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneConteggioPiatti.proprieta.note")))}function zO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.note)}}function MO(i,o){1&i&&e._UZ(0,"mat-header-cell")}function qO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.inviaMessaggio(a.prenotazione))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.inviaMessaggio")))}function PO(i,o){if(1&i&&(e.TgZ(0,"mat-cell",48),e.YNc(1,qO,3,3,"button",49),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione)}}function kO(i,o){1&i&&e._UZ(0,"mat-header-cell")}function SO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",51)(1,"button",52),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",53),e._uU(3,"delete"),e.qZA()()()}}function yO(i,o){1&i&&e._UZ(0,"mat-header-row",54)}function JO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",55),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Pn.\u0275fac=function(o){return new(o||Pn)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Pn.\u0275cmp=e.Xpm({type:Pn,selectors:[["app-configurazione-piatti-my-self"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:38,vars:19,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["nomeSearch",""],["displayMember","descrizione",3,"dataLoader","placeholder","valueChange"],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","categoriaPiatto"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"piatto","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value,!1))}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",4)(10,"app-view-select",8),e.NdJ("valueChange",function(l){return t.onSearch(1,-1==l.oid?"":l.oid.toString())}),e.ALo(11,"translate"),e.qZA()()()(),e.YNc(12,jN,8,3,"div",9),e.TgZ(13,"div",1)(14,"button",10),e.NdJ("click",function(){return t.add()}),e.TgZ(15,"i",11),e._uU(16,"add"),e.qZA()(),e.TgZ(17,"div",12)(18,"mat-table",13),e.ynx(19,14),e.YNc(20,WN,1,0,"mat-header-cell",15),e.YNc(21,eO,4,0,"mat-cell",16),e.BQk(),e.ynx(22,17),e.YNc(23,tO,3,3,"mat-header-cell",15),e.YNc(24,iO,2,1,"mat-cell",18),e.BQk(),e.ynx(25,19),e.YNc(26,oO,3,3,"mat-header-cell",15),e.YNc(27,nO,2,1,"mat-cell",18),e.BQk(),e.ynx(28,20),e.YNc(29,aO,1,0,"mat-header-cell",21),e.YNc(30,lO,4,0,"mat-cell",22),e.BQk(),e.YNc(31,rO,1,0,"mat-header-row",23),e.YNc(32,cO,1,1,"mat-row",24),e.qZA()(),e.TgZ(33,"div",25)(34,"mat-paginator",26),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(35,"div",27)(36,"app-configurazione-piatti-my-self-edit",28,29),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.Q6J("placeholder",e.lcZ(8,15,"bo.piatto.proprieta.nome"))("value",t.filters[0].value),e.xp6(4),e.Q6J("dataLoader",t.apiService.getCategoriePiattiViewSelect())("placeholder",e.lcZ(11,17,"bo.piatto.proprieta.categoriaPiatto")),e.xp6(2),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("piatto",t.piatto))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,ne.d,Ai,z.X$]});class kn extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.utility=n,this.containerService=a,this.displayedColumns=["data","prenotazione.cliente.ragioneSociale","prenotazione.tipoCameraOTA.descrizione","prenotazione.codicePrenotazione","piatto.nome","tipoPasto","quantita","note","inviaMessaggio","delete"],this.enumTipoPasto=c.C2,this.rq=new d.k$g,this.filters=[]}ngOnInit(){this.headerService.setTitle("sbm.configurazione-myself.conteggio-piatti.title"),this.filters.push(new d.wn$("data",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("data",c.Hp.LowerEqual,this.getDate(this.oneMonthFromToday),c.NM.Date)),this.filters.push(new d.wn$("piatto.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$(["prenotazione.codicePrenotazione","prenotazione.codiceOTA"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("tipoPasto",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("prenotazione.cliente.cognome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("prenotazione.cliente.email",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.apiService.getConteggioPiattiFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=this.utility.getPropertyValue,o||this.setIsLoading(!1)})}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(!n),this.paginator.firstPage()}inviaMessaggio(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Zt,t),a=n.componentInstance;a.prenotazione=o,a.dialogRef=n}delete(o){this.showDialogConfirm("sbm.configurazione-myself.conteggio-piatti.eliminarePiatto").then(t=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setPrenotazioneConteggioPiatti(o).subscribe(()=>{this.download()})},t=>{})}ngOnDestroy(){this.headerService.clearTitle()}}kn.\u0275fac=function(o){return new(o||kn)(e.Y36(A.s),e.Y36(ie.r),e.Y36(C.t),e.Y36(te.J))},kn.\u0275cmp=e.Xpm({type:kn,selectors:[["app-conteggio-piatti"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:84,vars:39,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"value","dateChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["picker",""],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["codicePrenotazioneSearch",""],[3,"placeholder","value","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6"],["cognomeSearch",""],["emailSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","data","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","prenotazione.cliente.ragioneSociale"],["matColumnDef","prenotazione.tipoCameraOTA.descrizione"],["matColumnDef","prenotazione.codicePrenotazione"],["matColumnDef","piatto.nome"],["matColumnDef","tipoPasto"],["matColumnDef","quantita"],["matColumnDef","note"],["matColumnDef","inviaMessaggio"],[4,"matHeaderCellDef"],["class","justify-content-end",4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-sort-header",""],[1,"justify-content-end"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(16);return e.KtG(l.open())}),e.TgZ(9,"input",6),e.NdJ("dateChange",function(l){return null!=l.value?t.filters[0].value=t.getDate(l.value):null}),e.qZA(),e.TgZ(10,"input",7),e.NdJ("dateChange",function(l){return null!=l.value?t.onSearch(1,t.getDate(l.value)):null}),e.qZA()(),e._UZ(11,"mat-datepicker-toggle",8),e.TgZ(12,"mat-datepicker-toggle",9),e.NdJ("click",function(){return t.filters[0].value="",t.onSearch(1,"")}),e.TgZ(13,"mat-icon",10),e._uU(14,"clear"),e.qZA()(),e._UZ(15,"mat-date-range-picker",null,11),e.qZA()(),e.TgZ(17,"div",3)(18,"app-view-select",12),e.NdJ("valueChange",function(l){return t.onSearch(2,-1==l.oid?"":l.oid.toString())}),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",3)(21,"mat-form-field",4)(22,"input",13,14),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(23);return e.KtG(t.onSearch(3,l.value,!1))}),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"div",3)(26,"mat-form-field",4)(27,"mat-select",15),e.NdJ("selectionChange",function(l){return t.onSearch(4,l.value)}),e.ALo(28,"translate"),e._UZ(29,"mat-option",16),e.YNc(30,sO,3,4,"mat-option",17),e.ALo(31,"selectEnum"),e.qZA()()()(),e.TgZ(32,"div",2)(33,"div",18)(34,"mat-form-field",4)(35,"input",13,19),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(36);return e.KtG(t.onSearch(5,l.value,!1))}),e.ALo(37,"translate"),e.qZA()()(),e.TgZ(38,"div",18)(39,"mat-form-field",4)(40,"input",13,20),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(41);return e.KtG(t.onSearch(6,l.value,!1))}),e.ALo(42,"translate"),e.qZA()()()()(),e.YNc(43,pO,4,3,"div",21),e.TgZ(44,"div",22)(45,"div",23)(46,"mat-table",24),e.NdJ("matSortChange",function(){return t.paginator.firstPage()}),e.ynx(47,25),e.YNc(48,dO,3,3,"mat-header-cell",26),e.YNc(49,mO,3,4,"mat-cell",27),e.BQk(),e.ynx(50,28),e.YNc(51,_O,3,3,"mat-header-cell",26),e.YNc(52,uO,2,1,"mat-cell",27),e.BQk(),e.ynx(53,29),e.YNc(54,gO,3,3,"mat-header-cell",26),e.YNc(55,hO,2,1,"mat-cell",27),e.BQk(),e.ynx(56,30),e.YNc(57,fO,3,3,"mat-header-cell",26),e.YNc(58,CO,2,1,"mat-cell",27),e.BQk(),e.ynx(59,31),e.YNc(60,bO,3,3,"mat-header-cell",26),e.YNc(61,vO,2,1,"mat-cell",27),e.BQk(),e.ynx(62,32),e.YNc(63,TO,3,3,"mat-header-cell",26),e.YNc(64,xO,3,3,"mat-cell",27),e.BQk(),e.ynx(65,33),e.YNc(66,ZO,3,3,"mat-header-cell",26),e.YNc(67,AO,2,1,"mat-cell",27),e.BQk(),e.ynx(68,34),e.YNc(69,wO,3,3,"mat-header-cell",26),e.YNc(70,zO,2,1,"mat-cell",27),e.BQk(),e.ynx(71,35),e.YNc(72,MO,1,0,"mat-header-cell",36),e.YNc(73,PO,2,1,"mat-cell",37),e.BQk(),e.ynx(74,38),e.YNc(75,kO,1,0,"mat-header-cell",36),e.YNc(76,SO,4,0,"mat-cell",39),e.BQk(),e.YNc(77,yO,1,0,"mat-header-row",40),e.YNc(78,JO,1,1,"mat-row",41),e.qZA()(),e.TgZ(79,"div",42)(80,"button",43),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"Conteggio Piatti",t.displayedColumns.slice(0,t.displayedColumns.length-2))}),e.TgZ(81,"i",44),e._uU(82,"get_app"),e.qZA()(),e.TgZ(83,"mat-paginator",45),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()}if(2&o){const n=e.MAs(16);e.xp6(6),e.Oqu(e.lcZ(7,24,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("value",t.filters[0].value),e.xp6(1),e.Q6J("value",t.filters[1].value),e.xp6(1),e.Q6J("for",n),e.xp6(7),e.Q6J("dataLoader",t.apiService.getPiattiViewSelect())("placeholder",e.lcZ(19,26,"bo.prenotazioneConteggioPiatti.proprieta.piatto")),e.xp6(4),e.Q6J("placeholder",e.lcZ(24,28,"bo.prenotazione.proprieta.codicePrenotazione"))("value",t.filters[3].value),e.xp6(5),e.Q6J("placeholder",e.lcZ(28,30,"bo.prenotazioneConteggioPiatti.proprieta.tipoPasto"))("value",t.filters[4].value),e.xp6(3),e.Q6J("ngForOf",e.xi3(31,32,t.enumTipoPasto,"tipoPasto")),e.xp6(5),e.s9C("placeholder",e.lcZ(37,35,"bo.cliente.proprieta.cognome")),e.Q6J("value",t.filters[5].value),e.xp6(5),e.s9C("placeholder",e.lcZ(42,37,"bo.cliente.proprieta.email")),e.Q6J("value",t.filters[6].value),e.xp6(3),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,M.$V,M.nX,b.k0,re.CK,y.nW,y.Q0,y.wx,y.zY,y.By,y._g,g.x8,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,ne.d,m.uU,Te.A,z.X$]});class Sn{constructor(o){this.headerService=o,this.enumTipoPrenotazione=c.Mn}ngOnInit(){this.headerService.setTitle("sbm.configurazione-myself.prenotazioni-up-selling.title")}ngOnDestroy(){this.headerService.clearTitle()}}Sn.\u0275fac=function(o){return new(o||Sn)(e.Y36(ie.r))},Sn.\u0275cmp=e.Xpm({type:Sn,selectors:[["app-prenotazioni-up-selling"]],decls:1,vars:1,consts:[[3,"tipoPrenotazione"]],template:function(o,t){1&o&&e._UZ(0,"app-prenotazioni-extra",0),2&o&&e.Q6J("tipoPrenotazione",t.enumTipoPrenotazione.UpSelling)},dependencies:[wt]});class yn{constructor(o){this.headerService=o,this.enumTipoPrenotazione=c.Mn}ngOnInit(){this.headerService.setTitle("sbm.configurazione-myself.room-service.title")}ngOnDestroy(){this.headerService.clearTitle()}}function EO(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",16),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(3,2,t.value)," ")}}function NO(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",16),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(3,2,t.value)," ")}}function OO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}yn.\u0275fac=function(o){return new(o||yn)(e.Y36(ie.r))},yn.\u0275cmp=e.Xpm({type:yn,selectors:[["app-room-service"]],decls:1,vars:1,consts:[[3,"tipoPrenotazione"]],template:function(o,t){1&o&&e._UZ(0,"app-prenotazioni-extra",0),2&o&&e.Q6J("tipoPrenotazione",t.enumTipoPrenotazione.RoomService)},dependencies:[wt]});class Jn extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe,this.enumSslProtocols=c.zR,this.enumSecureSocketOptions=c.hc}save(){this.account.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setAccountMail(this.account).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.accountMail.accountMailSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione.accountMail.eliminareAccountMail").then(t=>{null!=o&&(this.account=o),this.account.isDeleted=!0,this.setIsLoading(!0),this.apiService.setAccountMail(this.account).subscribe(()=>{this.backEvent.emit()})},t=>{})}sendTest(){this.account.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setAccountMail(this.account).subscribe(o=>{this.apiService.sendTestEmail(o.data.obj.oid).subscribe(t=>{t.data.success?this.showInfo("sbm.configurazione.accountMail.emailInviata"):t.data.message?this.showError(t.data.message):this.showError("sbm.configurazione.accountMail.erroreInvioEmail"),this.setIsLoading(!1)})})}}function LO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",24)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.accountMail.nessunAccountMail")))}function DO(i,o){1&i&&e._UZ(0,"mat-header-cell")}function IO(i,o){1&i&&(e.TgZ(0,"mat-cell",25)(1,"button",26)(2,"i",27),e._uU(3,"edit"),e.qZA()()())}function QO(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.accountMail.proprieta.nome"),""))}function UO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function YO(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.accountMail.proprieta.email"),""))}function RO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.email)}}function FO(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.accountMail.proprieta.serverSmtp"),""))}function HO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.serverSmtp)}}function KO(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.accountMail.proprieta.isAutenticazioneSmtp"),""))}function GO(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",28),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAutenticazioneSmtp)("disabled",!0)}}function $O(i,o){1&i&&e._UZ(0,"mat-header-cell")}function BO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",29)(1,"button",30),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(32);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",31),e._uU(3,"delete"),e.qZA()()()}}function VO(i,o){1&i&&e._UZ(0,"mat-header-row",32)}function XO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",33),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Jn.\u0275fac=function(o){return new(o||Jn)(e.Y36(A.s),e.Y36(j.m))},Jn.\u0275cmp=e.Xpm({type:Jn,selectors:[["app-account-mail-edit"]],inputs:{account:"account"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:146,vars:90,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["type","password","matInput","","autocomplete","new-password",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","placeholder","ngModelChange"],[4,"ngFor","ngForOf"],["color","primary",3,"ngModel","ngModelChange"],[1,"row","mt-3"],[1,"div-help","mt-3"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.account.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Inserire il nome dell'account mail "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"input",3),e.NdJ("ngModelChange",function(a){return t.account.email=a}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",4),e._uU(13," Inserire l'email dell'account mail "),e.qZA()(),e.TgZ(14,"div",0)(15,"div",1)(16,"mat-form-field",2)(17,"input",3),e.NdJ("ngModelChange",function(a){return t.account.utente=a}),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"div",4),e._uU(20," Inserire il nome utente dell'account mail "),e.qZA()(),e.TgZ(21,"div",0)(22,"div",1)(23,"mat-form-field",2)(24,"input",5),e.NdJ("ngModelChange",function(a){return t.account.password=a}),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"div",4),e._uU(27," Inserire la password dell'account mail "),e.qZA()(),e.TgZ(28,"div",0)(29,"div",1)(30,"mat-form-field",2)(31,"input",3),e.NdJ("ngModelChange",function(a){return t.account.displayName=a}),e.ALo(32,"translate"),e.qZA()()(),e.TgZ(33,"div",4),e._uU(34," Inserire il nome visualizzato dell'account mail "),e.qZA()(),e.TgZ(35,"div",0)(36,"div",1)(37,"mat-form-field",2)(38,"input",3),e.NdJ("ngModelChange",function(a){return t.account.serverSmtp=a}),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",4),e._uU(41," Inserire il server smtp dell'account mail "),e.qZA()(),e.TgZ(42,"div",0)(43,"div",1)(44,"mat-form-field",2)(45,"input",3),e.NdJ("ngModelChange",function(a){return t.account.usernameSmtp=a}),e.ALo(46,"translate"),e.qZA()()(),e.TgZ(47,"div",4),e._uU(48," Inserire l'username smtp dell'account mail "),e.qZA()(),e.TgZ(49,"div",0)(50,"div",1)(51,"mat-form-field",2)(52,"input",5),e.NdJ("ngModelChange",function(a){return t.account.passwordSmtp=a}),e.ALo(53,"translate"),e.qZA()()(),e.TgZ(54,"div",4),e._uU(55," Inserire la password smtp dell'account mail "),e.qZA()(),e.TgZ(56,"div",0)(57,"div",1)(58,"mat-form-field",2)(59,"input",6),e.NdJ("ngModelChange",function(a){return t.account.portaSmtp=a}),e.ALo(60,"translate"),e.qZA()()(),e.TgZ(61,"div",4),e._uU(62," Inserire la porta smtp dell'account mail "),e.qZA()(),e.TgZ(63,"div",0)(64,"div",1)(65,"mat-form-field",2)(66,"input",6),e.NdJ("ngModelChange",function(a){return t.account.timeoutSmtp=a}),e.ALo(67,"translate"),e.qZA()()(),e.TgZ(68,"div",4),e._uU(69," Inserire il timeout smtp dell'account mail (in secondi) "),e.qZA()(),e.TgZ(70,"div",0)(71,"div",1)(72,"mat-form-field",2)(73,"input",3),e.NdJ("ngModelChange",function(a){return t.account.serverImap=a}),e.ALo(74,"translate"),e.qZA()()(),e.TgZ(75,"div",4),e._uU(76," Inserire il server imap dell'account mail "),e.qZA()(),e.TgZ(77,"div",0)(78,"div",1)(79,"mat-form-field",2)(80,"input",6),e.NdJ("ngModelChange",function(a){return t.account.portaImap=a}),e.ALo(81,"translate"),e.qZA()()(),e.TgZ(82,"div",4),e._uU(83," Inserire la porta imap dell'account mail "),e.qZA()(),e.TgZ(84,"div",0)(85,"div",1)(86,"mat-form-field",2)(87,"mat-select",7),e.NdJ("ngModelChange",function(a){return t.account.sslProtocol=a}),e.ALo(88,"translate"),e.YNc(89,EO,4,4,"ng-container",8),e.ALo(90,"selectEnum"),e.qZA()()(),e.TgZ(91,"div",4),e._uU(92," Inserire il protocollo ssl dell'account mail per la lettura della posta "),e.qZA()(),e.TgZ(93,"div",0)(94,"div",1)(95,"mat-form-field",2)(96,"mat-select",7),e.NdJ("ngModelChange",function(a){return t.account.secureSocketOption=a}),e.ALo(97,"translate"),e.YNc(98,NO,4,4,"ng-container",8),e.ALo(99,"selectEnum"),e.qZA()()(),e.TgZ(100,"div",4),e._uU(101," Inserire il protocollo ssl di sicurezza dell'account mail per l'invio "),e.qZA()(),e.TgZ(102,"div",0)(103,"div",1)(104,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.account.isAutenticazioneSmtp=a}),e._uU(105),e.ALo(106,"translate"),e.qZA()(),e.TgZ(107,"div",4),e._uU(108," Abilitare l'autenticazione smtp per l'account mail "),e.qZA()(),e.TgZ(109,"div",10)(110,"div",1)(111,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.account.isEnableSsl=a}),e._uU(112),e.ALo(113,"translate"),e.qZA()(),e.TgZ(114,"div",4),e._uU(115," Abilitare ssl per l'account mail "),e.qZA()(),e.TgZ(116,"div",10)(117,"div",1)(118,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.account.isTest=a}),e._uU(119),e.ALo(120,"translate"),e.qZA()(),e.TgZ(121,"div",4),e._uU(122," Utilizzare account mail come account di test "),e.qZA()(),e.TgZ(123,"div",10)(124,"div",1)(125,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.account.isScaricaMailCrm=a}),e._uU(126),e.ALo(127,"translate"),e.qZA()(),e.TgZ(128,"div",4),e._uU(129," Scarica la posta "),e.qZA()(),e.TgZ(130,"div",11),e._uU(131," L'ip di uscita \xe8 :\xa0 "),e.TgZ(132,"b"),e._uU(133,"52.214.62.78"),e.qZA(),e._uU(134," ;\xa0 e va comunicato al gestore di posta se applica delle restrizioni in fase di invio (es. Office365)\n"),e.qZA(),e.TgZ(135,"div",12)(136,"button",13),e.NdJ("click",function(){return t.save()}),e._uU(137),e.ALo(138,"translate"),e.qZA(),e.TgZ(139,"button",13),e.NdJ("click",function(){return t.sendTest()}),e._uU(140),e.ALo(141,"translate"),e.qZA(),e.YNc(142,OO,3,3,"button",14),e.TgZ(143,"button",15),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(144),e.ALo(145,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,42,"bo.accountMail.proprieta.nome")),e.Q6J("ngModel",t.account.nome),e.xp6(7),e.s9C("placeholder",e.lcZ(11,44,"bo.accountMail.proprieta.email")),e.Q6J("ngModel",t.account.email),e.xp6(7),e.s9C("placeholder",e.lcZ(18,46,"bo.accountMail.proprieta.utente")),e.Q6J("ngModel",t.account.utente),e.xp6(7),e.s9C("placeholder",e.lcZ(25,48,"bo.accountMail.proprieta.password")),e.Q6J("ngModel",t.account.password),e.xp6(7),e.s9C("placeholder",e.lcZ(32,50,"bo.accountMail.proprieta.displayName")),e.Q6J("ngModel",t.account.displayName),e.xp6(7),e.s9C("placeholder",e.lcZ(39,52,"bo.accountMail.proprieta.serverSmtp")),e.Q6J("ngModel",t.account.serverSmtp),e.xp6(7),e.s9C("placeholder",e.lcZ(46,54,"bo.accountMail.proprieta.usernameSmtp")),e.Q6J("ngModel",t.account.usernameSmtp),e.xp6(7),e.s9C("placeholder",e.lcZ(53,56,"bo.accountMail.proprieta.passwordSmtp")),e.Q6J("ngModel",t.account.passwordSmtp),e.xp6(7),e.s9C("placeholder",e.lcZ(60,58,"bo.accountMail.proprieta.portaSmtp")),e.Q6J("ngModel",t.account.portaSmtp),e.xp6(7),e.s9C("placeholder",e.lcZ(67,60,"bo.accountMail.proprieta.timeoutSmtp")),e.Q6J("ngModel",t.account.timeoutSmtp),e.xp6(7),e.s9C("placeholder",e.lcZ(74,62,"bo.accountMail.proprieta.serverImap")),e.Q6J("ngModel",t.account.serverImap),e.xp6(7),e.s9C("placeholder",e.lcZ(81,64,"bo.accountMail.proprieta.portaImap")),e.Q6J("ngModel",t.account.portaImap),e.xp6(7),e.s9C("placeholder",e.lcZ(88,66,"bo.accountMail.proprieta.sslProtocol")),e.Q6J("ngModel",t.account.sslProtocol),e.xp6(2),e.Q6J("ngForOf",e.xi3(90,68,t.enumSslProtocols,"sslProtocols")),e.xp6(7),e.s9C("placeholder",e.lcZ(97,71,"bo.accountMail.proprieta.secureSocketOption")),e.Q6J("ngModel",t.account.secureSocketOption),e.xp6(2),e.Q6J("ngForOf",e.xi3(99,73,t.enumSecureSocketOptions,"secureSocketOption")),e.xp6(6),e.Q6J("ngModel",t.account.isAutenticazioneSmtp),e.xp6(1),e.Oqu(e.lcZ(106,76,"bo.accountMail.proprieta.isAutenticazioneSmtp")),e.xp6(6),e.Q6J("ngModel",t.account.isEnableSsl),e.xp6(1),e.Oqu(e.lcZ(113,78,"bo.accountMail.proprieta.isEnableSsl")),e.xp6(6),e.Q6J("ngModel",t.account.isTest),e.xp6(1),e.Oqu(e.lcZ(120,80,"bo.accountMail.proprieta.isTest")),e.xp6(6),e.Q6J("ngModel",t.account.isScaricaMailCrm),e.xp6(1),e.Oqu(e.lcZ(127,82,"bo.accountMail.proprieta.isScaricaMailCrm")),e.xp6(11),e.Oqu(e.lcZ(138,84,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(141,86,"sbm.configurazione.accountMail.testInvio")),e.xp6(2),e.Q6J("ngIf",null!=t.account&&t.account.oid>0),e.xp6(2),e.Oqu(e.lcZ(145,88,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,_.Fj,_.wV,_.JJ,_.On,Te.A,z.X$]});class En extends f.H{constructor(o,t,n,a,l,r,p){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.sessionService=a,this.navigationService=l,this.localStorage=r,this.utility=p,this.account=new v.w_6,this.showTable=!0,this.displayedColumns=["edit","nome","email","serverSmtp","isAutenticazioneSmtp","delete"]}ngOnInit(){this.headerService.setTitle("sbm.configurazione.accountMail.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getAccountMailList().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator;let t=o.data.some(n=>n.isScaricaMailCrm);t!=this.sessionService.isPostaAttiva()&&(this.sessionService.sessione.isPostaAttiva=t,this.localStorage.set(this.sessionService.SESSION_KEY,this.sessionService.sessione),this.navigationService.init()),this.setIsLoading(!1)})}add(){this.account=new v.w_6(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.account=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}function jO(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function WO(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}En.\u0275fac=function(o){return new(o||En)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(j.m),e.Y36(Ae.f),e.Y36(lt.n),e.Y36(C.t))},En.\u0275cmp=e.Xpm({type:En,selectors:[["app-account-mail"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:33,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","email"],["matColumnDef","serverSmtp"],["matColumnDef","isAutenticazioneSmtp"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"account","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,LO,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,DO,1,0,"mat-header-cell",8),e.YNc(10,IO,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,QO,3,3,"mat-header-cell",8),e.YNc(13,UO,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,YO,3,3,"mat-header-cell",8),e.YNc(16,RO,2,1,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,FO,3,3,"mat-header-cell",8),e.YNc(19,HO,2,1,"mat-cell",11),e.BQk(),e.ynx(20,14),e.YNc(21,KO,3,3,"mat-header-cell",8),e.YNc(22,GO,2,2,"mat-cell",11),e.BQk(),e.ynx(23,15),e.YNc(24,$O,1,0,"mat-header-cell",8),e.YNc(25,BO,4,0,"mat-cell",16),e.BQk(),e.YNc(26,VO,1,0,"mat-header-row",17),e.YNc(27,XO,1,1,"mat-row",18),e.qZA()(),e.TgZ(28,"div",19)(29,"mat-paginator",20),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(30,"div",21)(31,"app-account-mail-edit",22,23),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("account",t.account))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Jn,z.X$]});class Nn extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe,this.enumTipoAnagrafica=c.dp}save(){this.agenzia.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setAgenzia(this.agenzia).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.agenzie.agenziaSalvata").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione.agenzie.eliminareAgenzia").then(t=>{null!=o&&(this.agenzia=o),this.agenzia.isDeleted=!0,this.setIsLoading(!0),this.apiService.setAgenzia(this.agenzia).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function e7(i,o){1&i&&(e.TgZ(0,"div",20)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.agenzie.nessunaAgenzia")))}function t7(i,o){1&i&&e._UZ(0,"mat-header-cell")}function i7(i,o){1&i&&(e.TgZ(0,"mat-cell",21)(1,"button",22)(2,"i",23),e._uU(3,"edit"),e.qZA()()())}function o7(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.agenzia.proprieta.ragioneSociale"),""))}function n7(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ragioneSociale)}}function a7(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.agenzia.proprieta.sourceBrand"),""))}function l7(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.sourceBrand)}}function r7(i,o){1&i&&e._UZ(0,"mat-header-cell")}function c7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",24)(1,"button",25),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(23);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",26),e._uU(3,"delete"),e.qZA()()()}}function s7(i,o){1&i&&e._UZ(0,"mat-header-row",27)}function p7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",28),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Nn.\u0275fac=function(o){return new(o||Nn)(e.Y36(A.s),e.Y36(j.m))},Nn.\u0275cmp=e.Xpm({type:Nn,selectors:[["app-agenzie-edit"]],inputs:{agenzia:"agenzia"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:30,vars:23,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.agenzia.ragioneSociale=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Inserire il ragione sociale dell'agenzia "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"input",3),e.NdJ("ngModelChange",function(a){return t.agenzia.sourceBrand=a}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",4),e._uU(13," Inserire il valore sourceBrand corrispondente all'agenzia (utilizzato i portali) "),e.qZA()(),e.TgZ(14,"div",0)(15,"div",1)(16,"mat-form-field",2)(17,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.agenzia.tipoAnagrafica=a}),e.ALo(18,"translate"),e.YNc(19,jO,3,4,"mat-option",6),e.ALo(20,"selectEnum"),e.qZA()()(),e._UZ(21,"div",4),e.qZA(),e.TgZ(22,"div",7)(23,"button",8),e.NdJ("click",function(){return t.save()}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.YNc(26,WO,3,3,"button",9),e.TgZ(27,"button",10),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(28),e.ALo(29,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,10,"bo.agenzia.proprieta.ragioneSociale")),e.Q6J("ngModel",t.agenzia.ragioneSociale),e.xp6(7),e.s9C("placeholder",e.lcZ(11,12,"bo.agenzia.proprieta.sourceBrand")),e.Q6J("ngModel",t.agenzia.sourceBrand),e.xp6(7),e.s9C("placeholder",e.lcZ(18,14,"bo.agenzia.proprieta.tipoAnagrafica")),e.Q6J("ngModel",t.agenzia.tipoAnagrafica),e.xp6(2),e.Q6J("ngForOf",e.xi3(20,16,t.enumTipoAnagrafica,"tipoAnagrafica")),e.xp6(5),e.Oqu(e.lcZ(25,19,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.agenzia&&t.agenzia.oid>0),e.xp6(2),e.Oqu(e.lcZ(29,21,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,_.Fj,_.JJ,_.On,Te.A,z.X$]});class On extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.agenzia=new v.fk7,this.showTable=!0,this.displayedColumns=["edit","ragioneSociale","sourceBrand","delete"]}ngOnInit(){this.headerService.setTitle("sbm.configurazione.agenzie.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getAgenzie().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}edit(o){this.agenzia=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}On.\u0275fac=function(o){return new(o||On)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},On.\u0275cmp=e.Xpm({type:On,selectors:[["app-agenzie"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:24,vars:10,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","ragioneSociale"],[4,"matCellDef"],["matColumnDef","sourceBrand"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"agenzia","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,e7,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,t7,1,0,"mat-header-cell",6),e.YNc(7,i7,4,0,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,o7,3,3,"mat-header-cell",6),e.YNc(10,n7,2,1,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,a7,3,3,"mat-header-cell",6),e.YNc(13,l7,2,1,"mat-cell",9),e.BQk(),e.ynx(14,11),e.YNc(15,r7,1,0,"mat-header-cell",6),e.YNc(16,c7,4,0,"mat-cell",12),e.BQk(),e.YNc(17,s7,1,0,"mat-header-row",13),e.YNc(18,p7,1,1,"mat-row",14),e.qZA()(),e.TgZ(19,"div",15)(20,"mat-paginator",16),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(21,"div",17)(22,"app-agenzie-edit",18,19),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("agenzia",t.agenzia))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Nn,z.X$]});class Ln extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.banner=new d.VVB}ngOnInit(){this.banner.banner.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.banner.banner.isUsaEditor=!1}save(){this.setIsLoading(!0),this.apiService.setBanner(this.banner).subscribe(o=>{this.setIsLoading(!1),this.dialogRef.close(o.data.obj)})}}function d7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,l=e.oxw();return e.KtG(l.copiaAltreLingue(a))}),e.ALo(1,"translate"),e.TgZ(2,"i",43),e._uU(3,"content_copy"),e.qZA()()}2&i&&e.Q6J("disableRipple",!0)("matTooltip",e.lcZ(1,2,"globals.copiaAltreLingue"))}function m7(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.YNc(2,d7,4,4,"button",41)),2&i){const t=e.oxw(2),n=t.$implicit,a=t.index,l=e.oxw();e.xp6(1),e.Oqu(n.lingua.nome),e.xp6(1),e.Q6J("ngIf",l.selectedIndex==a)}}function _7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw();return e.KtG(l.openEditor(a))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.banner.editorGrafico")))}function u7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw();return e.KtG(l.openEditor(a))}),e.qZA()}}Ln.\u0275fac=function(o){return new(o||Ln)(e.Y36(A.s),e.Y36(j.m))},Ln.\u0275cmp=e.Xpm({type:Ln,selectors:[["app-banner-add"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:13,vars:13,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.banner.banner.nome=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){return t.banner.banner.isUsaEditor=a}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",5)(10,"button",6),e.NdJ("click",function(){return t.save()}),e._uU(11),e.ALo(12,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.s9C("placeholder",e.lcZ(5,7,"bo.banner.proprieta.nome")),e.Q6J("ngModel",t.banner.banner.nome),e.xp6(2),e.Q6J("ngModel",t.banner.banner.isUsaEditor),e.xp6(1),e.Oqu(e.lcZ(8,9,"bo.banner.proprieta.isUsaEditor")),e.xp6(3),e.Q6J("disabled",!t.banner.banner.nome),e.xp6(1),e.Oqu(e.lcZ(12,11,"globals.salva")))},dependencies:[w.X,V.FC,h.eB,M.v_,b.k0,F.aO,_.Fj,_.JJ,_.Q7,_.On,z.X$]});const g7=function(i){return{"titoloInput mr-3":i}};function h7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab"),e.YNc(1,m7,3,2,"ng-template",35),e.TgZ(2,"mat-form-field",36)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.bannerXLingua[l].titolo=a)}),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,_7,3,3,"button",37),e.TgZ(6,"div"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",38),e.YNc(10,u7,1,0,"div",39),e.TgZ(11,"app-editor",40),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.bannerXLingua[l].testo=a)}),e.qZA()()()}if(2&i){const t=e.oxw().index,n=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(13,g7,null==n.modelEdit.banner.isUsaEditor||n.modelEdit.banner.isUsaEditor)),e.xp6(1),e.s9C("placeholder",e.lcZ(4,9,"bo.bannerXLingua.proprieta.titolo")),e.Q6J("ngModel",n.modelEdit.bannerXLingua[t].titolo),e.xp6(2),e.Q6J("ngIf",null==n.modelEdit.banner.isUsaEditor||n.modelEdit.banner.isUsaEditor),e.xp6(2),e.Oqu(e.lcZ(8,11,"bo.bannerXLingua.proprieta.testo")),e.xp6(3),e.Q6J("ngIf",n.modelEdit.banner.isUsaEditor),e.xp6(1),e.Q6J("id","testo"+t)("text",n.modelEdit.bannerXLingua[t].testo)("disabled",n.modelEdit.banner.isUsaEditor)}}function f7(i,o){if(1&i&&(e.ynx(0),e.YNc(1,h7,12,15,"mat-tab",34),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function C7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",46)(1,"mat-checkbox",47),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleUbicazioniIstat():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionUbicazioniIstat.hasValue()&&t.isAllSelectedUbicazioniIstat())("indeterminate",t.selectionUbicazioniIstat.hasValue()&&!t.isAllSelectedUbicazioniIstat())}}function b7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",48)(1,"mat-checkbox",49),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionUbicazioniIstat.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionUbicazioniIstat.isSelected(t.oid))}}function v7(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.ubicazioneIstat.proprieta.nome")))}function T7(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function x7(i,o){1&i&&e._UZ(0,"mat-header-row",50)}function Z7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",51),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function A7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}const jc=function(){return["nome","select"]};class Dn extends f.H{set banner(o){if(null!=o){if(this.selectedIndex=0,this.modelEdit=new d.VVB,this.modelEdit.banner=o,this.selectionUbicazioniIstat=new me.Ov(!0,[]),this.modelEdit.banner.oidUbicazioniIstat){let t=this.modelEdit.banner.oidUbicazioniIstat.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.ubicazioniIstat.findIndex(a=>a.oid==+n)&&this.selectionUbicazioniIstat.toggle(+n)}for(let t of this.lingue){let n=new v.ItZ;n.lingua=t,this.modelEdit.bannerXLingua.push(n)}null!=o.oid&&-1!=o.oid&&(this.setIsLoading(!0),this.apiService.getBannerXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.bannerXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.bannerXLingua[a].banner=n.banner,this.modelEdit.bannerXLingua[a].titolo=n.titolo,this.modelEdit.bannerXLingua[a].testo=n.testo,this.modelEdit.bannerXLingua[a].design=n.design)}this.setIsLoading(!1)}))}}constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.modelEdit=new d.VVB,this.selectionUbicazioniIstat=new me.Ov(!0,[]),this.selectedIndex=0,this.backEvent=new e.vpe}save(){this.modelEdit.banner.validoDal=this.getDate(this.modelEdit.banner.validoDal),this.modelEdit.banner.validoAl=this.getDate(this.modelEdit.banner.validoAl),this.modelEdit.banner.oidUbicazioniIstat=this.selectionUbicazioniIstat.selected.toString().replace(/,/g,";"),this.modelEdit.banner.albergo=new v.Z$(this.sessionService.getOidAlbergo());for(let o of this.modelEdit.bannerXLingua)o.banner=this.modelEdit.banner;this.setIsLoading(!0),this.apiService.setBanner(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.banner.bannerSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione.banner.eliminareBanner").then(t=>{null!=o&&(this.modelEdit.banner=o),this.modelEdit.banner.isDeleted=!0,this.setIsLoading(!0),this.apiService.setBanner(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}openEditor(o){let t=new d.Zpt;t.width="80vw",t.minHeight="95vh";let n=this.showModalDialog(zt,t),a=n.componentInstance;a.design=o.design,a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){o.design=JSON.stringify(l.design),o.testo=l.html;for(let r of this.modelEdit.bannerXLingua)r.design||(r.design=o.design),r.testo||(r.testo=o.testo)}})}isAllSelectedUbicazioniIstat(){return this.selectionUbicazioniIstat.selected.length==this.ubicazioniIstat.length}masterToggleUbicazioniIstat(){this.isAllSelectedUbicazioniIstat()?this.selectionUbicazioniIstat.clear():this.ubicazioniIstat.forEach(o=>this.selectionUbicazioniIstat.select(o.oid))}copiaAltreLingue(o){this.showDialogConfirm("globals.effettuareOperazione").then(()=>{for(let t of this.modelEdit.bannerXLingua)t.titolo=o.titolo,t.design=o.design,t.testo=o.testo},()=>{})}}function w7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",28)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.banner.nessunBanner")))}function z7(i,o){1&i&&e._UZ(0,"mat-header-cell")}function M7(i,o){1&i&&(e.TgZ(0,"mat-cell",29)(1,"button",30)(2,"i",31),e._uU(3,"edit"),e.qZA()()())}function q7(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.banner.proprieta.nome"),""))}function P7(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function k7(i,o){1&i&&(e.TgZ(0,"mat-header-cell",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.banner.proprieta.isUsaEditor"),""))}function S7(i,o){if(1&i&&(e.TgZ(0,"mat-cell",32),e._UZ(1,"mat-checkbox",33),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isUsaEditor)("indeterminate",null==t.isUsaEditor)}}function y7(i,o){1&i&&(e.TgZ(0,"mat-header-cell",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.banner.proprieta.isAttivo"),""))}function J7(i,o){if(1&i&&(e.TgZ(0,"mat-cell",32),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)}}function E7(i,o){1&i&&(e.TgZ(0,"mat-header-cell",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.banner.proprieta.isAttivoDayUse"),""))}function N7(i,o){if(1&i&&(e.TgZ(0,"mat-cell",32),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivoDayUse)}}function O7(i,o){1&i&&e._UZ(0,"mat-header-cell")}function L7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"button",35),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.duplica(r.oid))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"globals.duplica")))}function D7(i,o){1&i&&e._UZ(0,"mat-header-cell",36)}function I7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",37)(1,"button",38),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(35);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",39),e._uU(3,"delete"),e.qZA()()()}}function Q7(i,o){1&i&&e._UZ(0,"mat-header-row",40)}function U7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",41),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Dn.\u0275fac=function(o){return new(o||Dn)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},Dn.\u0275cmp=e.Xpm({type:Dn,selectors:[["app-banner-edit"]],inputs:{ubicazioniIstat:"ubicazioniIstat",banner:"banner"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:90,vars:80,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[1,"row","mt-2","mb-2"],["color","primary",3,"ngModel","ngModelChange"],[1,"col-8","div-help"],[1,"col-6"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["validoDal",""],["validoAl",""],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"row","mt-3","mb-3"],[1,"col-2","col-md-1"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3","mb-3"],[1,"mat-table-container-border-rounded","mb-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[4,"ngIf"],["mat-tab-label",""],[1,"mt-3","w-100",3,"ngClass"],["class","mt-2 editorButton","mat-flat-button","","color","primary",3,"click",4,"ngIf"],[1,"position-relative"],["class","w-100 h-100 position-absolute cursor-pointer testo-container",3,"click",4,"ngIf"],[3,"id","text","disabled","textChange"],["mat-icon-button","","color","primary","class","copiaAltreLingua",3,"disableRipple","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","primary",1,"copiaAltreLingua",3,"disableRipple","matTooltip","click"],[1,"material-icons-round"],["mat-flat-button","","color","primary",1,"mt-2","editorButton",3,"click"],[1,"w-100","h-100","position-absolute","cursor-pointer","testo-container",3,"click"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isAttivo=a}),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",1)(10,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isAttivoDayUse=a}),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",5)(14,"div",1)(15,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isVisualizzaInHome=a}),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",7),e._uU(19," Attivando il flag il banner viene aperto a finestra al caricamento del Booking Engine indipendentemente dalla modalit\xe0 di apertura impostata sul portale. "),e.qZA()(),e.TgZ(20,"div",0)(21,"div",8)(22,"mat-form-field",2)(23,"input",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.validoDal=a}),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"mat-datepicker-toggle",10)(26,"mat-datepicker",11,12),e.qZA()(),e.TgZ(28,"div",8)(29,"mat-form-field",2)(30,"input",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.validoAl=a}),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"mat-datepicker-toggle",10)(33,"mat-datepicker",11,13),e.qZA()()(),e.TgZ(35,"mat-form-field",2)(36,"input",14),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.durataMinimaSoggiorno=a}),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",15)(39,"div",16)(40,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isLunedi=a}),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"div",16)(44,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isMartedi=a}),e._uU(45),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"div",16)(48,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isMercoledi=a}),e._uU(49),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"div",16)(52,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isGiovedi=a}),e._uU(53),e.ALo(54,"translate"),e.qZA()(),e.TgZ(55,"div",16)(56,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isVenerdi=a}),e._uU(57),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"div",16)(60,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isSabato=a}),e._uU(61),e.ALo(62,"translate"),e.qZA()(),e.TgZ(63,"div",16)(64,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.banner.isDomenica=a}),e._uU(65),e.ALo(66,"translate"),e.qZA()()(),e.TgZ(67,"mat-tab-group",17),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(68,f7,2,1,"ng-container",18),e.qZA(),e.TgZ(69,"h5",19),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"div",20)(73,"mat-table",21),e.ynx(74,22),e.YNc(75,C7,2,2,"mat-header-cell",23),e.YNc(76,b7,2,1,"mat-cell",24),e.BQk(),e.ynx(77,25),e.YNc(78,v7,3,3,"mat-header-cell",26),e.YNc(79,T7,2,1,"mat-cell",27),e.BQk(),e.YNc(80,x7,1,0,"mat-header-row",28),e.YNc(81,Z7,1,1,"mat-row",29),e.qZA()(),e.TgZ(82,"div",30)(83,"button",31),e.NdJ("click",function(){return t.save()}),e._uU(84),e.ALo(85,"translate"),e.qZA(),e.YNc(86,A7,3,3,"button",32),e.TgZ(87,"button",33),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(88),e.ALo(89,"translate"),e.qZA()()),2&o){const n=e.MAs(27),a=e.MAs(34);e.xp6(3),e.s9C("placeholder",e.lcZ(4,44,"bo.banner.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.banner.nome),e.xp6(3),e.Q6J("ngModel",t.modelEdit.banner.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(8,46,"bo.banner.proprieta.isAttivo")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.banner.isAttivoDayUse),e.xp6(1),e.hij(" ",e.lcZ(12,48,"bo.banner.proprieta.isAttivoDayUse")," "),e.xp6(4),e.Q6J("ngModel",t.modelEdit.banner.isVisualizzaInHome),e.xp6(1),e.hij(" ",e.lcZ(17,50,"bo.banner.proprieta.isVisualizzaInHome")," "),e.xp6(7),e.s9C("placeholder",e.lcZ(24,52,"bo.banner.proprieta.validoDal")),e.Q6J("matDatepicker",n)("ngModel",t.modelEdit.banner.validoDal),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.banner.validoDal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(31,54,"bo.banner.proprieta.validoAl")),e.Q6J("matDatepicker",a)("ngModel",t.modelEdit.banner.validoAl),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.banner.validoAl)?t.today:null),e.xp6(3),e.s9C("placeholder",e.lcZ(37,56,"bo.banner.proprieta.durataMinimaSoggiorno")),e.Q6J("ngModel",t.modelEdit.banner.durataMinimaSoggiorno),e.xp6(4),e.Q6J("ngModel",t.modelEdit.banner.isLunedi),e.xp6(1),e.hij(" ",e.lcZ(42,58,"bo.banner.proprieta.isLunedi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.banner.isMartedi),e.xp6(1),e.hij(" ",e.lcZ(46,60,"bo.banner.proprieta.isMartedi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.banner.isMercoledi),e.xp6(1),e.hij(" ",e.lcZ(50,62,"bo.banner.proprieta.isMercoledi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.banner.isGiovedi),e.xp6(1),e.hij(" ",e.lcZ(54,64,"bo.banner.proprieta.isGiovedi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.banner.isVenerdi),e.xp6(1),e.hij(" ",e.lcZ(58,66,"bo.banner.proprieta.isVenerdi")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.banner.isSabato),e.xp6(1),e.hij(" ",e.lcZ(62,68,"bo.banner.proprieta.isSabato")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.banner.isDomenica),e.xp6(1),e.hij(" ",e.lcZ(66,70,"bo.banner.proprieta.isDomenica")," "),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.bannerXLingua),e.xp6(2),e.Oqu(e.lcZ(71,72,"sbm.configurazione.banner.ubicazioniIstatAbilitate")),e.xp6(3),e.Q6J("dataSource",t.ubicazioniIstat),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(78,jc))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(79,jc)),e.xp6(3),e.Oqu(e.lcZ(85,74,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.modelEdit.banner.oid>0),e.xp6(2),e.Oqu(e.lcZ(89,76,"globals.annulla"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,ee.SK,ee.gz,ee.R7,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.On,Me.P,z.X$],styles:[".editorButton[_ngcontent-%COMP%]{width:125px}.titoloInput[_ngcontent-%COMP%]{width:calc(100% - 125px - 1rem)!important}.testo-container[_ngcontent-%COMP%]{z-index:1}.copiaAltreLingua[_ngcontent-%COMP%]{position:absolute;right:0;top:0}"]});class In extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","isUsaEditor","isAttivo","isAttivoDayUse","duplica","delete"],this.ubicazioniIstat=[]}ngOnInit(){this.setIsLoading(!0),this.headerService.setTitle("sbm.configurazione.banner.title"),this.apiService.getUbicazioniIstat().subscribe(o=>{this.ubicazioniIstat=o.data,this.download()})}download(){this.setIsLoading(!0),this.apiService.getBanners().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ln,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.edit(a)})}edit(o){this.banner=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}duplica(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0),this.apiService.duplicaBanner(o).subscribe(n=>{this.edit(n.data)})},t=>{})}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}In.\u0275fac=function(o){return new(o||In)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},In.\u0275cmp=e.Xpm({type:In,selectors:[["app-banner"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:36,vars:11,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","isUsaEditor"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","isAttivo"],["matColumnDef","isAttivoDayUse"],["matColumnDef","duplica"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"ubicazioniIstat","banner","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked","indeterminate"],["color","primary","disabled","",3,"checked"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,w7,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,z7,1,0,"mat-header-cell",8),e.YNc(10,M7,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,q7,3,3,"mat-header-cell",8),e.YNc(13,P7,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,k7,3,3,"mat-header-cell",13),e.YNc(16,S7,2,2,"mat-cell",14),e.BQk(),e.ynx(17,15),e.YNc(18,y7,3,3,"mat-header-cell",13),e.YNc(19,J7,2,1,"mat-cell",14),e.BQk(),e.ynx(20,16),e.YNc(21,E7,3,3,"mat-header-cell",13),e.YNc(22,N7,2,1,"mat-cell",14),e.BQk(),e.ynx(23,17),e.YNc(24,O7,1,0,"mat-header-cell",8),e.YNc(25,L7,4,3,"mat-cell",11),e.BQk(),e.ynx(26,18),e.YNc(27,D7,1,0,"mat-header-cell",19),e.YNc(28,I7,4,0,"mat-cell",20),e.BQk(),e.YNc(29,Q7,1,0,"mat-header-row",21),e.YNc(30,U7,1,1,"mat-row",22),e.qZA()(),e.TgZ(31,"div",23)(32,"mat-paginator",24),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(33,"div",25)(34,"app-banner-edit",26,27),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("ubicazioniIstat",t.ubicazioniIstat)("banner",t.banner))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Dn,z.X$]});class Qn{constructor(o,t,n){this.headerService=o,this.http=t,this.fileSaverService=n}ngOnInit(){this.headerService.setTitle("sbm.configurazione.collegamentoSito.title")}download(){this.http.get("/assets/SearchBox.zip",{responseType:"blob"}).subscribe({next:o=>{this.fileSaverService.save(o,"SearchBox.zip")},error:()=>{}})}ngOnDestroy(){this.headerService.clearTitle()}}function Y7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sbloccaAccount())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.impostazioni.accountBloccato")))}function R7(i,o){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function F7(i,o){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function H7(i,o){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function K7(i,o){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function G7(i,o){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function $7(i,o){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function B7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"h4",42),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",4)(5,"div",13)(6,"mat-form-field",6)(7,"input",43),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.nome=a)}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div")(10,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.isCrsAttivo=a)}),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div")(14,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.isMySelfAttivo=a)}),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div")(18,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.isVerificaRecordModificatiWS=a)}),e._uU(19),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"div",13)(22,"mat-form-field",6)(23,"mat-select",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.tipoPubblicazioneDisponibilitaWelcomeWS=a)}),e.ALo(24,"translate"),e.YNc(25,G7,3,4,"mat-option",10),e.ALo(26,"selectEnum"),e.qZA()(),e.TgZ(27,"mat-form-field",6)(28,"mat-select",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.tipoLogSBM=a)}),e.ALo(29,"translate"),e.YNc(30,$7,3,4,"mat-option",10),e.ALo(31,"selectEnum"),e.qZA()(),e.TgZ(32,"mat-form-field",6)(33,"input",44),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.numeroRecordPubblicazioneAttivitaAutomatiche=a)}),e.ALo(34,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,17,"sbm.configurazione.impostazioni.pannelloSuperAdmin")),e.xp6(5),e.Q6J("placeholder",e.lcZ(8,19,"bo.albergo.proprieta.nome"))("ngModel",t.albergo.nome),e.xp6(3),e.Q6J("ngModel",t.albergo.isCrsAttivo),e.xp6(1),e.hij(" ",e.lcZ(12,21,"bo.albergo.proprieta.isCrsAttivo")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isMySelfAttivo),e.xp6(1),e.hij(" ",e.lcZ(16,23,"bo.albergo.proprieta.isMySelfAttivo")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isVerificaRecordModificatiWS),e.xp6(1),e.hij(" ",e.lcZ(20,25,"bo.albergo.proprieta.isVerificaRecordModificatiWS")," "),e.xp6(4),e.Q6J("ngModel",t.albergo.tipoPubblicazioneDisponibilitaWelcomeWS)("placeholder",e.lcZ(24,27,"bo.albergo.proprieta.tipoPubblicazioneDisponibilitaWelcomeWS")),e.xp6(2),e.Q6J("ngForOf",e.xi3(26,29,t.enumTipoPubblicazioneDisponibilitaWelcomeWS,"tipoPubblicazioneDisponibilitaWelcomeWS")),e.xp6(3),e.Q6J("ngModel",t.albergo.tipoLogSBM)("placeholder",e.lcZ(29,32,"bo.albergo.proprieta.tipoLogSBM")),e.xp6(2),e.Q6J("ngForOf",e.xi3(31,34,t.enumTipoLogSBM,"tipoLogSBM")),e.xp6(3),e.Q6J("placeholder",e.lcZ(34,37,"bo.albergo.proprieta.numeroRecordPubblicazioneAttivitaAutomatiche"))("ngModel",t.albergo.numeroRecordPubblicazioneAttivitaAutomatiche)}}function V7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",12)(1,"mat-card-title"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div")(5,"mat-form-field",45)(6,"input",43),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.urlApiWelcome=a)}),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.testConnessioneWelcome())}),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",4)(12,"div",14)(13,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.isControllaDisponibilitaWelcomeBooking=a)}),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",14)(17,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.isControllaCamereLibereWelcomeBooking=a)}),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",14)(21,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.albergo.isRecuperaInformazioniPrenotazioneWelcomeSelfCheckIn=a)}),e._uU(22),e.ALo(23,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,11,"sbm.configurazione.impostazioni.parametriConnessioneWelcome")," "),e.xp6(4),e.Q6J("placeholder",e.lcZ(7,13,"bo.albergo.proprieta.urlApiWelcome"))("ngModel",t.albergo.urlApiWelcome),e.xp6(2),e.Q6J("disabled",!t.albergo.urlApiWelcome),e.xp6(1),e.Oqu(e.lcZ(10,15,"sbm.configurazione.impostazioni.test")),e.xp6(4),e.Q6J("ngModel",t.albergo.isControllaDisponibilitaWelcomeBooking),e.xp6(1),e.hij(" ",e.lcZ(15,17,"bo.albergo.proprieta.isControllaDisponibilitaWelcomeBooking")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isControllaCamereLibereWelcomeBooking),e.xp6(1),e.hij(" ",e.lcZ(19,19,"bo.albergo.proprieta.isControllaCamereLibereWelcomeBooking")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isRecuperaInformazioniPrenotazioneWelcomeSelfCheckIn),e.xp6(1),e.hij(" ",e.lcZ(23,21,"bo.albergo.proprieta.isRecuperaInformazioniPrenotazioneWelcomeSelfCheckIn")," ")}}function X7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",47)(1,"mat-checkbox",48),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleLingue():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionLingue.hasValue()&&t.isAllSelectedLingue())("indeterminate",t.selectionLingue.hasValue()&&!t.isAllSelectedLingue())}}function j7(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",49)(1,"mat-checkbox",50),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionLingue.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionLingue.isSelected(t.oid))}}function W7(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.lingua.proprieta.nome"),""))}function e8(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function t8(i,o){1&i&&e._UZ(0,"mat-header-row",51)}function i8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",52),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Qn.\u0275fac=function(o){return new(o||Qn)(e.Y36(ie.r),e.Y36(gc.eN),e.Y36(_c.m9))},Qn.\u0275cmp=e.Xpm({type:Qn,selectors:[["app-collegamento-sito"]],decls:50,vars:3,consts:[[1,"w-100","p-3"],[1,"mt-3"],[1,"border","mat-elevation-z0","mt-3"],[1,"d-inline-block","align-middle","mb-0"],[1,"mb-5"],[1,"row","mb-3"],[1,"col-6"],[1,"row"],[1,"col-6","div-help"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," In questa pagina \xe8 possibile scaricare un esempio di form per il collegamento tra il sito internet e il booking di Passepartout. "),e._UZ(3,"br")(4,"br"),e._uU(5," Il file scaricato \xe8 solo a titolo di esempio. Pu\xf2 essere utilizzato qualsiasi altro codice prodotto dal webmaster "),e._UZ(6,"br")(7,"br"),e._uU(8," Se il sito web \xe8 gestito da Passepartout, sar\xe0 compito nostro inserire il link al suo interno. Se il sito invece viene gestito da terzi, sar\xe0 compito Vostro comunicare direttamente a loro il link da inserire. "),e.qZA(),e.TgZ(9,"mat-card",2)(10,"mat-card-title")(11,"h5",3),e._uU(12,"Esempio url e parametri"),e.qZA()(),e.TgZ(13,"div",1)(14,"div",4),e._uU(15," E' possibile, inoltre, visualizzare le date di inizio e fine prenotazione sul Vostro sito web e tramite un pulsante entrare direttamente nella prima pagina del Web Booking per procedere con la prenotazione."),e._UZ(16,"br"),e._uU(17," Di seguito viene riportato un esempio di personalizzazione del sito web:"),e._UZ(18,"br"),e._uU(19," Chi si occupa del sito deve fare in modo che al click del bottone venga aperto il seguente link:"),e._UZ(20,"br"),e.qZA(),e.TgZ(21,"div",5)(22,"div",6),e._uU(23," Url Booking Engine "),e.qZA(),e.TgZ(24,"div",6),e._uU(25," https://booking.passepartout.cloud/booking?oidPortale=XXXX&lingua=it "),e.qZA()(),e.TgZ(26,"div",7)(27,"div",6),e._uU(28," oidPortale "),e.qZA(),e.TgZ(29,"div",8),e._uU(30," Il parametro oidPortale \xe8 recuperabile all'interno della configurazione del portale "),e.qZA()(),e.TgZ(31,"div",7)(32,"div",6),e._uU(33," lingua "),e.qZA(),e.TgZ(34,"div",8),e._uU(35," Il parametro lingua \xe8 la lingua in formato iso2 (it, en, ..) "),e.qZA()(),e.TgZ(36,"div",7)(37,"div",6),e._uU(38," arrivo "),e.qZA(),e.TgZ(39,"div",8),e._uU(40," Il parametro arrivo (facoltativo) indica la data di arrivo nel formato yyyy-MM-dd "),e.qZA()(),e.TgZ(41,"div",7)(42,"div",6),e._uU(43," partenza "),e.qZA(),e.TgZ(44,"div",8),e._uU(45," Il parametro partenza (facoltativo) indica la data di arrivo nel formato yyyy-MM-dd "),e.qZA()()()(),e.TgZ(46,"div",9)(47,"button",10),e.NdJ("click",function(){return t.download()}),e._uU(48),e.ALo(49,"translate"),e.qZA()()()),2&o&&(e.xp6(48),e.Oqu(e.lcZ(49,1,"sbm.configurazione.collegamentoSito.download")))},dependencies:[h.eB,qe.S$,qe.mi,z.X$]});const Wc=function(){return["nome","select"]};class Un extends f.H{constructor(o,t,n,a,l,r,p,T){super(),this.headerService=o,this.apiService=t,this.sessionService=n,this.utilityService=a,this.containerService=l,this.localStorage=r,this.localizationService=p,this.navigationService=T,this.albergo=new v.Z$,this.selectionLingue=new me.Ov(!0,[]),this.codiciPartner=[],this.enumRuolo=c.Gt,this.enumTipoPubblicazioneDisponibilitaWelcomeWS=c.j8,this.enumTipoLogSBM=c.v4,this.enumTipoOrdinamentoRichiestePreventivi=c.FS}ngOnInit(){this.headerService.setTitle("sbm.configurazione.impostazioni.title"),this.containerService.scrollToTop(),this.download()}download(){this.setIsLoading(!0),this.apiService.getImpostazioniView().subscribe(o=>{this.codiciPartner=o.data.codiciPartner,this.albergo=o.data.albergo;try{this.albergo.colorePlanningGiornoNonPubblicatoHex=Z(this.albergo.colorePlanningGiornoNonPubblicato).hex(),this.albergo.colorePlanningGiornoModificatoDaPubblicareHex=Z(this.albergo.colorePlanningGiornoModificatoDaPubblicare).hex(),this.albergo.colorePlanningGiornoPubblicatoParzialmenteHex=Z(this.albergo.colorePlanningGiornoPubblicatoParzialmente).hex()}catch(t){}if(this.selectionLingue=new me.Ov(!0,[]),this.albergo.oidLingueAttive){let t=this.albergo.oidLingueAttive.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.lingue.findIndex(a=>a.oid==+n)&&this.selectionLingue.toggle(+n)}this.containerService.scrollToTop(),this.setIsLoading(!1)})}save(){this.setIsLoading(!0);try{this.albergo.colorePlanningGiornoNonPubblicatoHex&&(this.albergo.colorePlanningGiornoNonPubblicato=Z(this.albergo.colorePlanningGiornoNonPubblicatoHex).rgbNumber()),this.albergo.colorePlanningGiornoModificatoDaPubblicareHex&&(this.albergo.colorePlanningGiornoModificatoDaPubblicare=Z(this.albergo.colorePlanningGiornoModificatoDaPubblicareHex).rgbNumber()),this.albergo.colorePlanningGiornoPubblicatoParzialmenteHex&&(this.albergo.colorePlanningGiornoPubblicatoParzialmente=Z(this.albergo.colorePlanningGiornoPubblicatoParzialmenteHex).rgbNumber())}catch(o){}this.albergo.oidLingueAttive=this.selectionLingue.selected.toString().replace(/,/g,";"),this.apiService.setAlbergo(this.albergo).subscribe(o=>{let t=this.albergo.codicePartner!=this.sessionService.getCodicePartner()||this.albergo.isMySelfAttivo!=this.sessionService.isMySelfAttivo()||this.albergo.isCrsAttivo!=this.sessionService.isCrsAttivo()||this.albergo.tipoPubblicazioneDisponibilitaWelcomeWS!=this.sessionService.getAlbergo().tipoPubblicazioneDisponibilitaWelcomeWS;this.sessionService.sessione.albergo=o.data.obj,t&&this.navigationService.init(),this.selectionLingue.selected.length>0?this.sessionService.sessione.lingue=this.selectionLingue.selected.map(n=>this.utilityService.findItemByOid(this.lingue,n)):this.sessionService.sessione.lingue=this.lingue,this.localStorage.set(this.sessionService.SESSION_KEY,this.sessionService.sessione),this.setIsLoading(!1),this.showInfo("sbm.configurazione.impostazioni.datiSalvati").then(()=>{this.containerService.scrollToTop()})})}isAllSelectedLingue(){return this.selectionLingue.selected.length==this.lingue.length}masterToggleLingue(){this.isAllSelectedLingue()?this.selectionLingue.clear():this.lingue.forEach(o=>this.selectionLingue.select(o.oid))}getUrlCheckIn(){return window.location.origin+"/self-checkin?oidAlbergo="+this.sessionService.getOidAlbergo()+"&lingua="+this.localizationService.currentLanguage.codice}sbloccaAccount(){this.setIsLoading(!0),this.apiService.sbloccaAccount(this.sessionService.getOidAlbergo()).subscribe(()=>{this.setIsLoading(!1),this.albergo.isAccountBloccato=!1,this.showInfo("sbm.configurazione.impostazioni.accountSbloccato")})}testConnessioneWelcome(){this.setIsLoading(!0);let o=new d.mRN;o.urlApiWelcome=this.albergo.urlApiWelcome,o.database=this.albergo.aziendaHotel,this.apiService.testConnessioneWelcome(o).subscribe(t=>{this.setIsLoading(!1),null!=t&&t.data?this.showInfo("sbm.configurazione.impostazioni.parametriConnessioneWelcomeValidi"):this.showError("sbm.configurazione.impostazioni.parametriConnessioneWelcomeNonValidi")})}ngOnDestroy(){this.headerService.clearTitle()}}function o8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Un.\u0275fac=function(o){return new(o||Un)(e.Y36(ie.r),e.Y36(A.s),e.Y36(j.m),e.Y36(C.t),e.Y36(te.J),e.Y36(lt.n),e.Y36(Oe.o),e.Y36(Ae.f))},Un.\u0275cmp=e.Xpm({type:Un,selectors:[["app-configurazione-impostazioni"]],features:[e.qOj],decls:283,vars:250,consts:[[1,"container-fluid","p-3"],["class","mb-3 rounded-xl p-3 accountBloccato cursor-pointer font-weight-bold",3,"click",4,"ngIf"],[1,"p-1"],[1,"mat-elevation-z0","border"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","placeholder","disabled","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","primary",3,"ngModel","ngModelChange"],[1,"mat-elevation-z0","border","mt-3"],[1,"col-6"],[1,"col-4"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[3,"ngModel","placeholder","ngModelChange"],["color","primary",1,"d-inline-block","mt-3",3,"ngModel","ngModelChange"],[1,"d-inline-block","color-select","mr-3"],[3,"value","placeholder","valueChange"],["mat-icon-button","","color","primary",1,"color-reset",3,"disabled","click"],[1,"material-icons"],[1,"border","rounded","p-3","mt-3","bg-white"],["class","border-superadmin rounded p-3 mt-3 bg-white",4,"ngIf"],["class","mat-elevation-z0 border mt-3",4,"ngIf"],[1,"mat-table-container-border-rounded","mb-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[3,"placeholder","url"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"mb-3","rounded-xl","p-3","accountBloccato","cursor-pointer","font-weight-bold",3,"click"],[1,"border-superadmin","rounded","p-3","mt-3","bg-white"],[1,"mb-4"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","","readonly","",3,"placeholder","ngModel","ngModelChange"],[1,"urlApiWelcome"],["mat-flat-button","","color","primary",1,"testConnessioneWelcome","ml-3",3,"disabled","click"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Y7,3,3,"div",1),e.TgZ(2,"div",2)(3,"mat-card",3)(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"input",7),e.NdJ("ngModelChange",function(a){return t.albergo.utente=a}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",5)(10,"mat-form-field",6)(11,"input",7),e.NdJ("ngModelChange",function(a){return t.albergo.password=a}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",5)(14,"mat-form-field",6)(15,"input",7),e.NdJ("ngModelChange",function(a){return t.albergo.aziendaHotel=a}),e.ALo(16,"translate"),e.qZA()()(),e.TgZ(17,"div",5)(18,"mat-form-field",6)(19,"mat-select",8),e.NdJ("ngModelChange",function(a){return t.albergo.codicePartner=a}),e.ALo(20,"translate"),e._UZ(21,"mat-option",9),e.YNc(22,R7,2,2,"mat-option",10),e.qZA()()()(),e.TgZ(23,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isTest=a}),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"mat-card",12)(27,"mat-card-title"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",4)(31,"div",13)(32,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isRecaptchaAttiva=a}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e._UZ(35,"br"),e.TgZ(36,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isVisualizzaBottoniSocialLoginStep2=a}),e._uU(37),e.ALo(38,"translate"),e.qZA(),e._UZ(39,"br"),e.TgZ(40,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isApplicaVariazionePrezzoBase=a}),e._uU(41),e.ALo(42,"translate"),e.qZA(),e._UZ(43,"br"),e.TgZ(44,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isAbilitaPreBooking=a}),e._uU(45),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"div",13)(48,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isInviaCopiaMailClienteAdAlbergo=a}),e._uU(49),e.ALo(50,"translate"),e.qZA(),e._UZ(51,"br"),e.TgZ(52,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isAbilitaModificaCliente=a}),e._uU(53),e.ALo(54,"translate"),e.qZA(),e._UZ(55,"br"),e.TgZ(56,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isDisattivaVecchiaExtranet=a}),e._uU(57),e.ALo(58,"translate"),e.qZA()()()(),e.TgZ(59,"mat-card",12)(60,"mat-card-title"),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"div",4)(64,"div",14)(65,"mat-form-field",6)(66,"input",15),e.NdJ("ngModelChange",function(a){return t.albergo.giorniScadenzaPreventivo=a}),e.ALo(67,"translate"),e.qZA()()(),e.TgZ(68,"div",14)(69,"mat-form-field",6)(70,"input",15),e.NdJ("ngModelChange",function(a){return t.albergo.percentualeCaparraPreventivo=a}),e.ALo(71,"translate"),e.qZA()()(),e.TgZ(72,"div",14)(73,"mat-form-field",6)(74,"input",15),e.NdJ("ngModelChange",function(a){return t.albergo.giorniScadenzaCaparraPreventivo=a}),e.ALo(75,"translate"),e.qZA()()()(),e.TgZ(76,"div",4)(77,"div",14)(78,"app-view-select",16),e.NdJ("valueChange",function(a){return t.albergo.linguaDefaultClientePreventivo=a}),e.ALo(79,"translate"),e.qZA()(),e.TgZ(80,"div",14)(81,"mat-form-field",6)(82,"mat-select",17),e.NdJ("ngModelChange",function(a){return t.albergo.tipoOrdinamentoPreventivi=a}),e.ALo(83,"translate"),e.YNc(84,F7,3,4,"mat-option",10),e.ALo(85,"selectEnum"),e.qZA()()(),e.TgZ(86,"div",14)(87,"mat-form-field",6)(88,"mat-select",17),e.NdJ("ngModelChange",function(a){return t.albergo.tipoOrdinamentoRichieste=a}),e.ALo(89,"translate"),e.YNc(90,H7,3,4,"mat-option",10),e.ALo(91,"selectEnum"),e.qZA()()()(),e.TgZ(92,"div",4)(93,"div",13)(94,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isAccettaPreventiviConPagamentoImmediato=a}),e._uU(95),e.ALo(96,"translate"),e.qZA()(),e.TgZ(97,"div",13)(98,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isRimuoviProposteNonDisponibili=a}),e._uU(99),e.ALo(100,"translate"),e.qZA()()(),e.TgZ(101,"div",4)(102,"div",13)(103,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isVisualizzaTipoCameraTariffaCalcolaRetta=a}),e._uU(104),e.ALo(105,"translate"),e.qZA()()()(),e.TgZ(106,"mat-card",12)(107,"mat-card-title"),e._uU(108),e.ALo(109,"translate"),e.qZA(),e.TgZ(110,"div",4)(111,"div",5)(112,"mat-form-field",6)(113,"input",15),e.NdJ("ngModelChange",function(a){return t.albergo.giorniDefaultPlanningDisponibilita=a}),e.ALo(114,"translate"),e.qZA()()(),e.TgZ(115,"div",5)(116,"mat-form-field",6)(117,"input",15),e.NdJ("ngModelChange",function(a){return t.albergo.giorniDefaultPubblicaDisponibilita=a}),e.ALo(118,"translate"),e.qZA()()(),e.TgZ(119,"div",5)(120,"mat-checkbox",18),e.NdJ("ngModelChange",function(a){return t.albergo.isRichiediPeriodoAperturaPlanningDisponibilita=a}),e._uU(121),e.ALo(122,"translate"),e.qZA()(),e.TgZ(123,"div",5)(124,"mat-checkbox",18),e.NdJ("ngModelChange",function(a){return t.albergo.isRaggruppaPlanningXTipoCamera=a}),e._uU(125),e.ALo(126,"translate"),e.qZA()()(),e.TgZ(127,"div",4)(128,"div",14)(129,"div",19)(130,"app-color-picker",20),e.NdJ("valueChange",function(a){return t.albergo.colorePlanningGiornoNonPubblicatoHex=a}),e.ALo(131,"translate"),e.qZA()(),e.TgZ(132,"button",21),e.NdJ("click",function(){return t.albergo.colorePlanningGiornoNonPubblicatoHex="#FF0000"}),e.TgZ(133,"i",22),e._uU(134,"settings_backup_restore"),e.qZA()()(),e.TgZ(135,"div",14)(136,"div",19)(137,"app-color-picker",20),e.NdJ("valueChange",function(a){return t.albergo.colorePlanningGiornoModificatoDaPubblicareHex=a}),e.ALo(138,"translate"),e.qZA()(),e.TgZ(139,"button",21),e.NdJ("click",function(){return t.albergo.colorePlanningGiornoModificatoDaPubblicareHex="#FFFF00"}),e.TgZ(140,"i",22),e._uU(141,"settings_backup_restore"),e.qZA()()(),e.TgZ(142,"div",14)(143,"div",19)(144,"app-color-picker",20),e.NdJ("valueChange",function(a){return t.albergo.colorePlanningGiornoPubblicatoParzialmenteHex=a}),e.ALo(145,"translate"),e.qZA()(),e.TgZ(146,"button",21),e.NdJ("click",function(){return t.albergo.colorePlanningGiornoPubblicatoParzialmenteHex="#FFA500"}),e.TgZ(147,"i",22),e._uU(148,"settings_backup_restore"),e.qZA()()()(),e.TgZ(149,"div",4)(150,"div",14)(151,"mat-form-field",6)(152,"mat-select",17),e.NdJ("ngModelChange",function(a){return t.albergo.dimensioneFontPlanningDisponibilita=a}),e.ALo(153,"translate"),e.TgZ(154,"mat-option",9),e._uU(155),e.qZA(),e.YNc(156,K7,2,2,"mat-option",10),e.qZA()()()()(),e.TgZ(157,"div",23)(158,"div",4)(159,"div",13)(160,"div")(161,"b"),e._uU(162),e.ALo(163,"translate"),e.qZA(),e.TgZ(164,"span"),e._uU(165),e.qZA()(),e.TgZ(166,"div")(167,"b"),e._uU(168),e.ALo(169,"translate"),e.qZA(),e.TgZ(170,"span"),e._uU(171),e.qZA()(),e.TgZ(172,"div")(173,"b"),e._uU(174),e.ALo(175,"translate"),e.qZA(),e.TgZ(176,"span"),e._uU(177),e.ALo(178,"date"),e.qZA()(),e.TgZ(179,"div")(180,"b"),e._uU(181),e.ALo(182,"translate"),e.qZA(),e.TgZ(183,"span"),e._uU(184),e.ALo(185,"date"),e.qZA()(),e.TgZ(186,"div")(187,"b"),e._uU(188),e.ALo(189,"translate"),e.qZA(),e.TgZ(190,"span"),e._uU(191),e.ALo(192,"date"),e.qZA()(),e.TgZ(193,"div")(194,"b"),e._uU(195),e.ALo(196,"translate"),e.qZA(),e.TgZ(197,"span"),e._uU(198),e.ALo(199,"date"),e.qZA()(),e.TgZ(200,"div")(201,"b"),e._uU(202),e.ALo(203,"translate"),e.qZA(),e.TgZ(204,"span"),e._uU(205),e.ALo(206,"date"),e.qZA()()(),e.TgZ(207,"div",13)(208,"div")(209,"b"),e._uU(210),e.ALo(211,"translate"),e.qZA(),e.TgZ(212,"span"),e._uU(213),e.qZA()(),e.TgZ(214,"div")(215,"b"),e._uU(216),e.ALo(217,"translate"),e.qZA(),e.TgZ(218,"span"),e._uU(219),e.qZA()(),e.TgZ(220,"div")(221,"b"),e._uU(222),e.ALo(223,"translate"),e.qZA(),e.TgZ(224,"span"),e._uU(225),e.ALo(226,"date"),e.qZA()(),e.TgZ(227,"div")(228,"b"),e._uU(229),e.ALo(230,"translate"),e.qZA(),e.TgZ(231,"span"),e._uU(232),e.ALo(233,"date"),e.qZA()(),e.TgZ(234,"div")(235,"b"),e._uU(236),e.ALo(237,"translate"),e.qZA(),e.TgZ(238,"span"),e._uU(239),e.ALo(240,"translate"),e.qZA()(),e.TgZ(241,"div")(242,"b"),e._uU(243),e.ALo(244,"translate"),e.qZA(),e.TgZ(245,"span"),e._uU(246),e.ALo(247,"translate"),e.qZA()(),e.TgZ(248,"div")(249,"b"),e._uU(250),e.ALo(251,"translate"),e.qZA(),e.TgZ(252,"span"),e._uU(253),e.qZA()()()()(),e.YNc(254,B7,35,39,"div",24),e.YNc(255,V7,24,23,"mat-card",25),e.TgZ(256,"mat-expansion-panel",12)(257,"mat-expansion-panel-header"),e._uU(258),e.ALo(259,"translate"),e.qZA(),e.TgZ(260,"div",26)(261,"mat-table",27),e.ynx(262,28),e.YNc(263,X7,2,2,"mat-header-cell",29),e.YNc(264,j7,2,1,"mat-cell",30),e.BQk(),e.ynx(265,31),e.YNc(266,W7,3,3,"mat-header-cell",32),e.YNc(267,e8,2,1,"mat-cell",33),e.BQk(),e.YNc(268,t8,1,0,"mat-header-row",34),e.YNc(269,i8,1,1,"mat-row",35),e.qZA()()(),e.TgZ(270,"mat-card",12),e._UZ(271,"app-url",36),e.ALo(272,"translate"),e.TgZ(273,"mat-form-field",6)(274,"input",7),e.NdJ("ngModelChange",function(a){return t.albergo.urlMySelf=a}),e.ALo(275,"translate"),e.qZA()()(),e.TgZ(276,"div",37)(277,"button",38),e.NdJ("click",function(){return t.save()}),e._uU(278),e.ALo(279,"translate"),e.qZA(),e.TgZ(280,"button",39),e.NdJ("click",function(){return t.download()}),e._uU(281),e.ALo(282,"translate"),e.qZA()()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.albergo.isAccountBloccato),e.xp6(6),e.s9C("placeholder",e.lcZ(8,115,"bo.albergo.proprieta.utente")),e.Q6J("ngModel",t.albergo.utente),e.xp6(4),e.s9C("placeholder",e.lcZ(12,117,"bo.albergo.proprieta.password")),e.Q6J("ngModel",t.albergo.password),e.xp6(4),e.s9C("placeholder",e.lcZ(16,119,"bo.albergo.proprieta.aziendaHotel")),e.Q6J("ngModel",t.albergo.aziendaHotel),e.xp6(4),e.s9C("placeholder",e.lcZ(20,121,"bo.albergo.proprieta.codicePartner")),e.Q6J("ngModel",t.albergo.codicePartner)("disabled",t.sessionService.getRuoloUtente()!=t.enumRuolo.SuperAdmin),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.codiciPartner),e.xp6(1),e.Q6J("ngModel",t.albergo.isTest),e.xp6(1),e.hij(" ",e.lcZ(25,123,"bo.albergo.proprieta.isTest")," "),e.xp6(4),e.hij(" ",e.lcZ(29,125,"sbm.configurazione.impostazioni.parametriGenerali")," "),e.xp6(4),e.Q6J("ngModel",t.albergo.isRecaptchaAttiva),e.xp6(1),e.hij(" ",e.lcZ(34,127,"bo.albergo.proprieta.isRecaptchaAttiva")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isVisualizzaBottoniSocialLoginStep2),e.xp6(1),e.hij(" ",e.lcZ(38,129,"bo.albergo.proprieta.isVisualizzaBottoniSocialLoginStep2")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isApplicaVariazionePrezzoBase),e.xp6(1),e.hij(" ",e.lcZ(42,131,"bo.albergo.proprieta.isApplicaVariazionePrezzoBase")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isAbilitaPreBooking),e.xp6(1),e.hij(" ",e.lcZ(46,133,"bo.albergo.proprieta.isAbilitaPreBooking")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isInviaCopiaMailClienteAdAlbergo),e.xp6(1),e.hij(" ",e.lcZ(50,135,"bo.albergo.proprieta.isInviaCopiaMailClienteAdAlbergo")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isAbilitaModificaCliente),e.xp6(1),e.hij(" ",e.lcZ(54,137,"bo.albergo.proprieta.isAbilitaModificaCliente")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isDisattivaVecchiaExtranet),e.xp6(1),e.hij(" ",e.lcZ(58,139,"bo.albergo.proprieta.isDisattivaVecchiaExtranet")," "),e.xp6(4),e.hij(" ",e.lcZ(62,141,"sbm.configurazione.impostazioni.parametriCrm")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(67,143,"bo.albergo.proprieta.giorniScadenzaPreventivo")),e.Q6J("ngModel",t.albergo.giorniScadenzaPreventivo),e.xp6(4),e.s9C("placeholder",e.lcZ(71,145,"bo.albergo.proprieta.percentualeCaparraPreventivo")),e.Q6J("ngModel",t.albergo.percentualeCaparraPreventivo),e.xp6(4),e.s9C("placeholder",e.lcZ(75,147,"bo.albergo.proprieta.giorniScadenzaCaparraPreventivo")),e.Q6J("ngModel",t.albergo.giorniScadenzaCaparraPreventivo),e.xp6(4),e.Q6J("dataLoader",t.apiService.getLingueViewSelect())("value",t.albergo.linguaDefaultClientePreventivo)("placeholder",e.lcZ(79,149,"bo.albergo.proprieta.linguaDefaultClientePreventivo")),e.xp6(4),e.Q6J("ngModel",t.albergo.tipoOrdinamentoPreventivi)("placeholder",e.lcZ(83,151,"bo.albergo.proprieta.tipoOrdinamentoPreventivi")),e.xp6(2),e.Q6J("ngForOf",e.xi3(85,153,t.enumTipoOrdinamentoRichiestePreventivi,"tipoOrdinamentoRichiestePreventivi")),e.xp6(4),e.Q6J("ngModel",t.albergo.tipoOrdinamentoRichieste)("placeholder",e.lcZ(89,156,"bo.albergo.proprieta.tipoOrdinamentoRichieste")),e.xp6(2),e.Q6J("ngForOf",e.xi3(91,158,t.enumTipoOrdinamentoRichiestePreventivi,"tipoOrdinamentoRichiestePreventivi")),e.xp6(4),e.Q6J("ngModel",t.albergo.isAccettaPreventiviConPagamentoImmediato),e.xp6(1),e.hij(" ",e.lcZ(96,161,"bo.albergo.proprieta.isAccettaPreventiviConPagamentoImmediato")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isRimuoviProposteNonDisponibili),e.xp6(1),e.hij(" ",e.lcZ(100,163,"bo.albergo.proprieta.isRimuoviProposteNonDisponibili")," "),e.xp6(4),e.Q6J("ngModel",t.albergo.isVisualizzaTipoCameraTariffaCalcolaRetta),e.xp6(1),e.hij(" ",e.lcZ(105,165,"bo.albergo.proprieta.isVisualizzaTipoCameraTariffaCalcolaRetta")," "),e.xp6(4),e.hij(" ",e.lcZ(109,167,"sbm.configurazione.impostazioni.parametriPlanning")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(114,169,"bo.albergo.proprieta.giorniDefaultPlanningDisponibilita")),e.Q6J("ngModel",t.albergo.giorniDefaultPlanningDisponibilita),e.xp6(4),e.s9C("placeholder",e.lcZ(118,171,"bo.albergo.proprieta.giorniDefaultPubblicaDisponibilita")),e.Q6J("ngModel",t.albergo.giorniDefaultPubblicaDisponibilita),e.xp6(3),e.Q6J("ngModel",t.albergo.isRichiediPeriodoAperturaPlanningDisponibilita),e.xp6(1),e.hij(" ",e.lcZ(122,173,"bo.albergo.proprieta.isRichiediPeriodoAperturaPlanningDisponibilita")," "),e.xp6(3),e.Q6J("ngModel",t.albergo.isRaggruppaPlanningXTipoCamera),e.xp6(1),e.hij(" ",e.lcZ(126,175,"bo.albergo.proprieta.isRaggruppaPlanningXTipoCamera")," "),e.xp6(5),e.Q6J("value",t.albergo.colorePlanningGiornoNonPubblicatoHex)("placeholder",e.lcZ(131,177,"bo.albergo.proprieta.colorePlanningGiornoNonPubblicato")),e.xp6(2),e.Q6J("disabled","#FF0000"==t.albergo.colorePlanningGiornoNonPubblicatoHex),e.xp6(5),e.Q6J("value",t.albergo.colorePlanningGiornoModificatoDaPubblicareHex)("placeholder",e.lcZ(138,179,"bo.albergo.proprieta.colorePlanningGiornoModificatoDaPubblicare")),e.xp6(2),e.Q6J("disabled","#FFFF00"==t.albergo.colorePlanningGiornoModificatoDaPubblicareHex),e.xp6(5),e.Q6J("value",t.albergo.colorePlanningGiornoPubblicatoParzialmenteHex)("placeholder",e.lcZ(145,181,"bo.albergo.proprieta.colorePlanningGiornoPubblicatoParzialmente")),e.xp6(2),e.Q6J("disabled","#FFA500"==t.albergo.colorePlanningGiornoPubblicatoParzialmenteHex),e.xp6(6),e.s9C("placeholder",e.lcZ(153,183,"bo.albergo.proprieta.dimensioneFontPlanningDisponibilita")),e.Q6J("ngModel",t.albergo.dimensioneFontPlanningDisponibilita),e.xp6(2),e.Q6J("value",8.25),e.xp6(1),e.Oqu(8.25),e.xp6(1),e.Q6J("ngForOf",t.utilityService.counter(6,9)),e.xp6(6),e.Oqu(e.lcZ(163,185,"bo.albergo.proprieta.serverWelcome")+":"),e.xp6(3),e.hij(" ",t.albergo.serverWelcome?t.albergo.serverWelcome:"---"," "),e.xp6(3),e.Oqu(e.lcZ(169,187,"bo.albergo.proprieta.versioneHotel")+":"),e.xp6(3),e.hij(" ",t.albergo.versioneHotelCommerciale?t.albergo.versioneHotelCommerciale:"---"," "),e.xp6(3),e.Oqu(e.lcZ(175,189,"bo.albergo.proprieta.dataUltimoAccessoPlanningWeb")+":"),e.xp6(3),e.hij(" ",t.albergo.dataUltimoAccessoPlanningWeb?e.xi3(178,191,t.albergo.dataUltimoAccessoPlanningWeb,"dd/MM/yyyy"):"---"," "),e.xp6(4),e.Oqu(e.lcZ(182,194,"bo.albergo.proprieta.dataUltimoAggiornamentoModuloWeb")+":"),e.xp6(3),e.hij(" ",t.albergo.dataUltimoAggiornamentoModuloWeb?e.xi3(185,196,t.albergo.dataUltimoAggiornamentoModuloWeb,"dd/MM/yyyy"):"---"," "),e.xp6(4),e.Oqu(e.lcZ(189,199,"bo.albergo.proprieta.dataUltimoAggiornamentoPrenotazioni")+":"),e.xp6(3),e.hij(" ",t.albergo.dataUltimoAggiornamentoPrenotazioni?e.xi3(192,201,t.albergo.dataUltimoAggiornamentoPrenotazioni,"dd/MM/yyyy"):"---"," "),e.xp6(4),e.Oqu(e.lcZ(196,204,"bo.albergo.proprieta.dataUltimoAccessoBackgroundWorker")+":"),e.xp6(3),e.hij(" ",t.albergo.dataUltimoAccessoBackgroundWorker?e.xi3(199,206,t.albergo.dataUltimoAccessoBackgroundWorker,"dd/MM/yyyy"):"---"," "),e.xp6(4),e.Oqu(e.lcZ(203,209,"bo.albergo.proprieta.dataScadenzaContratto")+":"),e.xp6(3),e.hij(" ",t.albergo.dataScadenzaContratto?e.xi3(206,211,t.albergo.dataScadenzaContratto,"dd/MM/yyyy"):"---"," "),e.xp6(5),e.Oqu(e.lcZ(211,214,"bo.albergo.proprieta.tipoPubblicazioneAttivitaAutomatica")+":"),e.xp6(3),e.hij(" ",t.albergo.tipoPubblicazioneAttivitaAutomatica?t.albergo.tipoPubblicazioneAttivitaAutomatica:"---"," "),e.xp6(3),e.Oqu(e.lcZ(217,216,"bo.albergo.proprieta.tipoPortalePubblicazione")+":"),e.xp6(3),e.hij(" ",t.albergo.tipoPortalePubblicazione?t.albergo.tipoPortalePubblicazione:"---"," "),e.xp6(3),e.Oqu(e.lcZ(223,218,"bo.albergo.proprieta.dataInizioPubblicazione")+":"),e.xp6(3),e.hij(" ",t.albergo.dataInizioPubblicazione?e.xi3(226,220,t.albergo.dataInizioPubblicazione,"dd/MM/yyyy"):"---"," "),e.xp6(4),e.Oqu(e.lcZ(230,223,"bo.albergo.proprieta.dataFinePubblicazione")+":"),e.xp6(3),e.hij(" ",t.albergo.dataFinePubblicazione?e.xi3(233,225,t.albergo.dataFinePubblicazione,"dd/MM/yyyy"):"---"," "),e.xp6(4),e.Oqu(e.lcZ(237,228,"bo.albergo.proprieta.isEseguiCalcoliDisponibilitaSuTipoCameraVendita")+":"),e.xp6(3),e.hij(" ",e.lcZ(240,230,t.albergo.isEseguiCalcoliDisponibilitaSuTipoCameraVendita?"globals.si":"globals.no")," "),e.xp6(4),e.Oqu(e.lcZ(244,232,"bo.albergo.proprieta.isBudgetConfigurato")+":"),e.xp6(3),e.hij(" ",e.lcZ(247,234,t.albergo.isBudgetConfigurato?"globals.si":"globals.no")," "),e.xp6(4),e.Oqu(e.lcZ(251,236,"bo.albergo.proprieta.camereEffettive")+":"),e.xp6(3),e.hij(" ",t.albergo.camereEffettive," "),e.xp6(1),e.Q6J("ngIf",t.sessionService.getRuoloUtente()==t.enumRuolo.SuperAdmin),e.xp6(1),e.Q6J("ngIf",t.sessionService.isPro()),e.xp6(3),e.hij(" ",e.lcZ(259,238,"bo.albergo.proprieta.oidLingueAttive")," "),e.xp6(3),e.Q6J("dataSource",t.lingue),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(248,Wc))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(249,Wc)),e.xp6(2),e.Q6J("placeholder",e.lcZ(272,240,"sbm.configurazione.impostazioni.urlSelfCheckIn"))("url",t.getUrlCheckIn()),e.xp6(3),e.s9C("placeholder",e.lcZ(275,242,"bo.albergo.proprieta.urlMySelf")),e.Q6J("ngModel",t.albergo.urlMySelf),e.xp6(4),e.Oqu(e.lcZ(279,244,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(282,246,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,qe.S$,qe.mi,ye.ib,ye.yz,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.On,We.h,ne.d,Be,m.uU,Te.A,z.X$],styles:[".mat-expansion-panel-header[_ngcontent-%COMP%]{color:#000000de!important;background-color:#fff!important;font-weight:500!important}.accountBloccato[_ngcontent-%COMP%]{color:red;background-color:#ff00001f}.color-select[_ngcontent-%COMP%]{width:calc(100% - 1rem - 50px)}.color-reset[_ngcontent-%COMP%]{width:50px}.border-superadmin[_ngcontent-%COMP%]{border:1px solid #e1085a}.testConnessioneWelcome[_ngcontent-%COMP%]{width:100px}.urlApiWelcome[_ngcontent-%COMP%]{width:calc(100% - 100px - 1rem)}"]});class Yn extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe}save(){if(this.interesse.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.interesse.coloreHex)try{this.interesse.colore=Z(this.interesse.coloreHex).rgbNumber()}catch(o){}this.setIsLoading(!0),this.apiService.setInteresse(this.interesse).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.interessi.interesseSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione.interessi.eliminareInteresse").then(t=>{null!=o&&(this.interesse=o),this.interesse.isDeleted=!0,this.setIsLoading(!0),this.apiService.setInteresse(this.interesse).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function n8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",23)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.interessi.nessunInteresse")))}function a8(i,o){1&i&&e._UZ(0,"mat-header-cell")}function l8(i,o){1&i&&(e.TgZ(0,"mat-cell",24)(1,"button",25)(2,"i",26),e._uU(3,"edit"),e.qZA()()())}function r8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.interesse.proprieta.descrizione"),""))}function c8(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.descrizione," ")}}function s8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.interesse.proprieta.colore"),""))}function p8(i,o){if(1&i&&e._UZ(0,"mat-cell",27),2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex)}}function d8(i,o){1&i&&e._UZ(0,"mat-header-cell")}function m8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",28)(1,"button",29),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(26);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",30),e._uU(3,"delete"),e.qZA()()()}}function _8(i,o){1&i&&e._UZ(0,"mat-header-row",31)}function u8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",32),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Yn.\u0275fac=function(o){return new(o||Yn)(e.Y36(A.s),e.Y36(j.m))},Yn.\u0275cmp=e.Xpm({type:Yn,selectors:[["app-interessi-edit"]],inputs:{interesse:"interesse"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:21,vars:15,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],[3,"value","placeholder","valueChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.interesse.descrizione=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Inserire la descrizione dell'interesse "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"app-color-picker",5),e.NdJ("valueChange",function(a){return t.interesse.coloreHex=a}),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",4),e._uU(12," Inserire il colore dell'interesse "),e.qZA()(),e.TgZ(13,"div",6)(14,"button",7),e.NdJ("click",function(){return t.save()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,o8,3,3,"button",8),e.TgZ(18,"button",9),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(19),e.ALo(20,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,7,"bo.interesse.proprieta.descrizione")),e.Q6J("ngModel",t.interesse.descrizione),e.xp6(6),e.Q6J("value",t.interesse.coloreHex)("placeholder",e.lcZ(10,9,"bo.interesse.proprieta.colore")),e.xp6(6),e.Oqu(e.lcZ(16,11,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.interesse.oid>0),e.xp6(2),e.Oqu(e.lcZ(20,13,"globals.annulla")))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,_.Fj,_.JJ,_.On,We.h,z.X$]});class Rn extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.interesse=new v.s0V,this.displayedColumns=["edit","descrizione","colore","delete"],this.showTable=!0}ngOnInit(){this.headerService.setTitle("sbm.configurazione.interessi.title")}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getInteressi().subscribe(o=>{for(let t of o.data)try{t.coloreHex=Z(t.colore).hex()}catch(n){}this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.interesse=new v.s0V(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.interesse=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBackEvent(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}ngOnDestroy(){this.headerService.clearTitle()}}function g8(i,o){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function h8(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"app-view-select",18),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.parametroRicerca.tagCrm=a)}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",4),e._uU(6," Impostare il tag CRM che viene associato di default ai preventivi dove il cliente ha questo parametro di Mercato "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"app-view-select",18),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.parametroRicerca.sondaggio=a)}),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",4),e._uU(12," Impostare il Sondaggio che viene associato di default alle prenotazioni con questo parametro di Mercato "),e.qZA()(),e.TgZ(13,"div",0)(14,"div",1)(15,"app-view-select",18),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.parametroRicerca.motivoViaggio=a)}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",4),e._uU(18," Impostare il Motivo di viaggio che viene associato di default alle prenotazioni con questo parametro di Mercato "),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("dataLoader",t.apiService.getTagCrmViewSelect())("value",t.modelEdit.parametroRicerca.tagCrm)("placeholder",e.lcZ(4,9,"bo.parametroRicerca.proprieta.tagCrm")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getSondaggiViewSelect())("value",t.modelEdit.parametroRicerca.sondaggio)("placeholder",e.lcZ(10,11,"bo.parametroRicerca.proprieta.sondaggio")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getMotiviViaggioViewSelect())("value",t.modelEdit.parametroRicerca.motivoViaggio)("placeholder",e.lcZ(16,13,"bo.parametroRicerca.proprieta.motivoViaggio"))}}function f8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",20)(1,"div",21),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"app-editor",22),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.parametriRicercaXLingua[l].descrizione=a)}),e.qZA()()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.hij(" ",e.lcZ(3,4,"bo.parametroRicercaXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.parametriRicercaXLingua[a].descrizione)}}function C8(i,o){if(1&i&&(e.ynx(0),e.YNc(1,f8,5,6,"mat-tab",19),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function b8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Rn.\u0275fac=function(o){return new(o||Rn)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Rn.\u0275cmp=e.Xpm({type:Rn,selectors:[["app-interessi"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:27,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","descrizione"],[4,"matCellDef"],["matColumnDef","colore"],["class","rounded",3,"backgroundColor",4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"interesse","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"rounded"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,n8,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,a8,1,0,"mat-header-cell",8),e.YNc(10,l8,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,r8,3,3,"mat-header-cell",8),e.YNc(13,c8,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,s8,3,3,"mat-header-cell",8),e.YNc(16,p8,1,2,"mat-cell",13),e.BQk(),e.ynx(17,14),e.YNc(18,d8,1,0,"mat-header-cell",8),e.YNc(19,m8,4,0,"mat-cell",15),e.BQk(),e.YNc(20,_8,1,0,"mat-header-row",16),e.YNc(21,u8,1,1,"mat-row",17),e.qZA()(),e.TgZ(22,"div",18)(23,"mat-paginator",19),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(24,"div",20)(25,"app-interessi-edit",21,22),e.NdJ("backEvent",function(){return t.onBackEvent()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("interesse",t.interesse))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Yn,z.X$]});class Fn extends f.H{set parametroRicerca(o){if(null!=o){this.modelEdit=new d.iIn,this.modelEdit.parametroRicerca=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.rbm;n.lingua=t,this.modelEdit.parametriRicercaXLingua.push(n)}null!=o.oid&&-1!=o.oid&&(this.setIsLoading(!0),this.apiService.getParametriRicercaXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.parametriRicercaXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.parametriRicercaXLingua[a].parametroRicerca=n.parametroRicerca,this.modelEdit.parametriRicercaXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)}))}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe,this.modelEdit=new d.iIn,this.selectedIndex=0,this.enumTipoParametroRicerca=c.E7}save(){for(let o of this.modelEdit.parametriRicercaXLingua)o.parametroRicerca=this.modelEdit.parametroRicerca;if(this.modelEdit.parametroRicerca.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.parametroRicerca.coloreHex)try{this.modelEdit.parametroRicerca.colore=Z(this.modelEdit.parametroRicerca.coloreHex).rgbNumber()}catch(o){}this.setIsLoading(!0),this.apiService.setParametroRicerca(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.parametriRicerca.parametroRicercaSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione.parametriRicerca.eliminareParametroRicerca").then(t=>{null!=o&&(this.modelEdit.parametroRicerca=o),this.modelEdit.parametroRicerca.isDeleted=!0,this.setIsLoading(!0),this.apiService.setParametroRicerca(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}}Fn.\u0275fac=function(o){return new(o||Fn)(e.Y36(A.s),e.Y36(j.m))},Fn.\u0275cmp=e.Xpm({type:Fn,selectors:[["app-parametri-ricerca-edit"]],inputs:{parametroRicerca:"parametroRicerca"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:48,vars:38,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"value","placeholder","valueChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.parametroRicerca.codice=a}),e.ALo(4,"translate"),e.qZA()()(),e._UZ(5,"div",4),e.qZA(),e.TgZ(6,"div",0)(7,"div",1)(8,"mat-form-field",2)(9,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.parametroRicerca.descrizione=a}),e.ALo(10,"translate"),e.qZA()()(),e._UZ(11,"div",4),e.qZA(),e.TgZ(12,"div",0)(13,"div",1)(14,"mat-form-field",2)(15,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.parametroRicerca.ordinamento=a}),e.ALo(16,"translate"),e.qZA()()(),e._UZ(17,"div",4),e.qZA(),e.TgZ(18,"div",0)(19,"div",1)(20,"app-color-picker",6),e.NdJ("valueChange",function(a){return t.modelEdit.parametroRicerca.coloreHex=a}),e.ALo(21,"translate"),e.qZA()(),e._UZ(22,"div",4),e.qZA(),e.TgZ(23,"div",0)(24,"div",1)(25,"mat-form-field",2)(26,"mat-select",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.parametroRicerca.tipoParametro=a}),e.ALo(27,"translate"),e.YNc(28,g8,3,4,"mat-option",8),e.ALo(29,"selectEnum"),e.qZA()()(),e._UZ(30,"div",4),e.qZA(),e.YNc(31,h8,19,15,"ng-container",9),e.TgZ(32,"div",0)(33,"div",1)(34,"mat-checkbox",10),e.NdJ("ngModelChange",function(a){return t.modelEdit.parametroRicerca.isAttivo=a}),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e._UZ(37,"div",4),e.qZA(),e.TgZ(38,"mat-tab-group",11),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(39,C8,2,1,"ng-container",12),e.qZA(),e.TgZ(40,"div",13)(41,"button",14),e.NdJ("click",function(){return t.save()}),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.YNc(44,b8,3,3,"button",15),e.TgZ(45,"button",16),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(46),e.ALo(47,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,19,"bo.parametroRicerca.proprieta.codice")),e.Q6J("ngModel",t.modelEdit.parametroRicerca.codice),e.xp6(6),e.s9C("placeholder",e.lcZ(10,21,"bo.parametroRicerca.proprieta.descrizione")),e.Q6J("ngModel",t.modelEdit.parametroRicerca.descrizione),e.xp6(6),e.s9C("placeholder",e.lcZ(16,23,"bo.parametroRicerca.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.parametroRicerca.ordinamento),e.xp6(5),e.Q6J("value",t.modelEdit.parametroRicerca.coloreHex)("placeholder",e.lcZ(21,25,"bo.parametroRicerca.proprieta.colore")),e.xp6(6),e.s9C("placeholder",e.lcZ(27,27,"bo.parametroRicerca.proprieta.tipoParametro")),e.Q6J("ngModel",t.modelEdit.parametroRicerca.tipoParametro),e.xp6(2),e.Q6J("ngForOf",e.xi3(29,29,t.enumTipoParametroRicerca,"tipoParametroRicerca")),e.xp6(3),e.Q6J("ngIf",t.modelEdit.parametroRicerca.tipoParametro==t.enumTipoParametroRicerca.Mercato),e.xp6(3),e.Q6J("ngModel",t.modelEdit.parametroRicerca.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(36,32,"bo.parametroRicerca.proprieta.isAttivo")," "),e.xp6(3),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.parametriRicercaXLingua),e.xp6(3),e.Oqu(e.lcZ(43,34,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.modelEdit.parametroRicerca.oid>0),e.xp6(2),e.Oqu(e.lcZ(47,36,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,We.h,Me.P,ne.d,Te.A,z.X$]});const v8=function(i){return{selected:i}};function T8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onTipoParametroFilter(l.key))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.VKq(4,v8,n.tipoParametro==t.key)),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function x8(i,o){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,T8,3,6,"span",28),e.ALo(2,"selectEnum"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.enumTipoParametroRicerca,"tipoParametroRicerca"))}}function Z8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",5),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",30)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.parametriRicerca.nessunParametroRicerca")))}function A8(i,o){1&i&&e._UZ(0,"mat-header-cell")}function w8(i,o){1&i&&(e.TgZ(0,"mat-cell",31)(1,"button",32)(2,"i",33),e._uU(3,"edit"),e.qZA()()())}function z8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.parametroRicerca.proprieta.codice"),""))}function M8(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.codice," ")}}function q8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.parametroRicerca.proprieta.descrizione"),""))}function P8(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.descrizione," ")}}function k8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.parametroRicerca.proprieta.tipoParametro"),""))}function S8(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoParametroRicerca,t.tipoParametro,"tipoParametroRicerca"))," ")}}function y8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.parametroRicerca.proprieta.isAttivo"),""))}function J8(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)}}function E8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.parametroRicerca.proprieta.colore"),""))}function N8(i,o){if(1&i&&e._UZ(0,"mat-cell",35),2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex)}}function O8(i,o){1&i&&e._UZ(0,"mat-header-cell")}function L8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",36)(1,"button",37),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(36);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",38),e._uU(3,"delete"),e.qZA()()()}}function D8(i,o){1&i&&e._UZ(0,"mat-header-row",39)}function I8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",40),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}class Hn extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.parametroRicerca=new v.k8R,this.displayedColumns=["edit","codice","descrizione","tipoParametro","isAttivo","colore","delete"],this.showTable=!0,this.tipoParametro=null,this.parametriRicerca=[],this.enumTipoParametroRicerca=c.E7}ngOnInit(){this.headerService.setTitle("sbm.configurazione.parametriRicerca.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.tipoParametro=null,this.apiService.getParametriRicerca().subscribe(o=>{for(let t of o.data)try{t.coloreHex=Z(t.colore).hex()}catch(n){}this.parametriRicerca=o.data,this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.parametroRicerca=new v.k8R(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.parametroRicerca=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onTipoParametroFilter(o){this.tipoParametro==o?(this.tipoParametro=null,this.dataSource.data=this.parametriRicerca):(this.tipoParametro=o,this.dataSource.data=this.parametriRicerca.filter(t=>t.tipoParametro==this.tipoParametro)),this.dataSource.paginator=this.paginator}onBackEvent(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}}function Q8(i,o){if(1&i&&(e.TgZ(0,"mat-option",14),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumGiornoSettimana,t,"giornoSettimana"))," ")}}function U8(i,o){1&i&&(e.TgZ(0,"div",19)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.pianiTariffari.nessunDettaglio")))}function Y8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPianoTariffario.proprieta.dal")))}function R8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",34)(2,"input",35),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.dal=a)})("ngModelChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onDalChange(l))}),e.qZA(),e._UZ(3,"mat-datepicker-toggle",36)(4,"mat-datepicker",37,38),e.qZA()()}if(2&i){const t=o.$implicit,n=e.MAs(5),a=e.oxw(3);e.xp6(2),e.Q6J("matDatepicker",n)("ngModel",t.dal),e.xp6(1),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",a.utility.isNullDate(t.dal)?a.today:null)}}function F8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPianoTariffario.proprieta.al")))}function H8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",34)(2,"input",35),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.al=a)})("ngModelChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onAlChange(l))}),e.qZA(),e._UZ(3,"mat-datepicker-toggle",36)(4,"mat-datepicker",37,39),e.qZA()()}if(2&i){const t=o.$implicit,n=e.MAs(5),a=e.oxw(3);e.xp6(2),e.Q6J("matDatepicker",n)("ngModel",t.al),e.xp6(1),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",a.utility.isNullDate(t.al)?a.today:null)}}function K8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPianoTariffario.proprieta.sconto")))}function G8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",34)(2,"input",40),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.sconto=a)}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.sconto)}}function $8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPianoTariffario.proprieta.durataMinimaSoggiorno")))}function B8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",34)(2,"input",40),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.durataMinimaSoggiorno=a)}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.durataMinimaSoggiorno)}}function V8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPianoTariffario.proprieta.giorniAnticipoSoggiorno")))}function X8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",34)(2,"input",41),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.giorniAnticipoSoggiorno=a)}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("nullable",!0)("ngModel",t.giorniAnticipoSoggiorno)}}function j8(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPianoTariffario.proprieta.politicaCancellazione")))}function W8(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"app-view-select",42),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.politicaCancellazione=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("dataLoader",n.apiService.getCancellazioniViewSelect())("title",e.lcZ(2,3,"bo.dettaglioPianoTariffario.proprieta.politicaCancellazione"))("value",t.politicaCancellazione)}}function eL(i,o){1&i&&e._UZ(0,"mat-header-cell")}function tL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",43)(1,"button",44),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(3);return e.KtG(r.deleteDettaglio(l))}),e.TgZ(2,"i",45),e._uU(3,"delete"),e.qZA()()()}}function iL(i,o){1&i&&e._UZ(0,"mat-header-row",46)}function oL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",47),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function nL(i,o){if(1&i&&(e.TgZ(0,"div",20)(1,"mat-table",21),e.ynx(2,22),e.YNc(3,Y8,3,3,"mat-header-cell",23),e.YNc(4,R8,6,4,"mat-cell",24),e.BQk(),e.ynx(5,25),e.YNc(6,F8,3,3,"mat-header-cell",23),e.YNc(7,H8,6,4,"mat-cell",24),e.BQk(),e.ynx(8,26),e.YNc(9,K8,3,3,"mat-header-cell",23),e.YNc(10,G8,3,1,"mat-cell",24),e.BQk(),e.ynx(11,27),e.YNc(12,$8,3,3,"mat-header-cell",23),e.YNc(13,B8,3,1,"mat-cell",24),e.BQk(),e.ynx(14,28),e.YNc(15,V8,3,3,"mat-header-cell",23),e.YNc(16,X8,3,2,"mat-cell",24),e.BQk(),e.ynx(17,29),e.YNc(18,j8,3,3,"mat-header-cell",23),e.YNc(19,W8,3,5,"mat-cell",24),e.BQk(),e.ynx(20,30),e.YNc(21,eL,1,0,"mat-header-cell",23),e.YNc(22,tL,4,0,"mat-cell",31),e.BQk(),e.YNc(23,iL,1,0,"mat-header-row",32),e.YNc(24,oL,1,1,"mat-row",33),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("dataSource",t.dettagli),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function aL(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addDettaglio())}),e.TgZ(2,"i",16),e._uU(3,"add"),e.qZA()(),e.YNc(4,U8,4,3,"div",17),e.YNc(5,nL,25,4,"div",18),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",0==t.dettagli.length),e.xp6(1),e.Q6J("ngIf",t.dettagli.length>0)}}function lL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Hn.\u0275fac=function(o){return new(o||Hn)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Hn.\u0275cmp=e.Xpm({type:Hn,selectors:[["app-parametri-ricerca"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:37,vars:11,consts:[[1,"p-3"],["class","mb-3",4,"ngIf"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","codice"],[4,"matCellDef"],["matColumnDef","descrizione"],["matColumnDef","tipoParametro"],["matColumnDef","isAttivo"],["matColumnDef","colore"],["class","rounded",3,"backgroundColor",4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"parametroRicerca","backEvent"],["editComponent",""],[1,"mb-3"],["class","d-inline-block tipo-parametro p-2 rounded-lg mr-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-inline-block","tipo-parametro","p-2","rounded-lg","mr-2",3,"ngClass","click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary","disabled","",3,"checked"],[1,"rounded"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,x8,3,4,"div",1),e.YNc(2,Z8,8,3,"div",2),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){return t.add()}),e.TgZ(5,"i",5),e._uU(6,"add"),e.qZA()(),e.TgZ(7,"div",6)(8,"mat-table",7),e.ynx(9,8),e.YNc(10,A8,1,0,"mat-header-cell",9),e.YNc(11,w8,4,0,"mat-cell",10),e.BQk(),e.ynx(12,11),e.YNc(13,z8,3,3,"mat-header-cell",9),e.YNc(14,M8,2,1,"mat-cell",12),e.BQk(),e.ynx(15,13),e.YNc(16,q8,3,3,"mat-header-cell",9),e.YNc(17,P8,2,1,"mat-cell",12),e.BQk(),e.ynx(18,14),e.YNc(19,k8,3,3,"mat-header-cell",9),e.YNc(20,S8,3,3,"mat-cell",12),e.BQk(),e.ynx(21,15),e.YNc(22,y8,3,3,"mat-header-cell",9),e.YNc(23,J8,2,1,"mat-cell",12),e.BQk(),e.ynx(24,16),e.YNc(25,E8,3,3,"mat-header-cell",9),e.YNc(26,N8,1,2,"mat-cell",17),e.BQk(),e.ynx(27,18),e.YNc(28,O8,1,0,"mat-header-cell",9),e.YNc(29,L8,4,0,"mat-cell",19),e.BQk(),e.YNc(30,D8,1,0,"mat-header-row",20),e.YNc(31,I8,1,1,"mat-row",21),e.qZA()(),e.TgZ(32,"div",22)(33,"mat-paginator",23),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(34,"div",24)(35,"app-parametri-ricerca-edit",25,26),e.NdJ("backEvent",function(){return t.onBackEvent()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable),e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",25),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("parametroRicerca",t.parametroRicerca))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Fn,Te.A,z.X$],styles:[".selected[_ngcontent-%COMP%]{color:#e91e63!important;border:1px solid #e91e63!important}.tipo-parametro[_ngcontent-%COMP%]{font-size:16px;font-weight:600;cursor:pointer;border:1px solid #aaaaaa;background-color:#fff}"]});const rL=function(i){return{"color-pink":i}};class Kn extends f.H{set _pianoTariffario(o){if(null!=o){if(this.pianoTariffario=o,this.giorniValiditaSelected=[],this.pianoTariffario.giorniValidita){let t=this.pianoTariffario.giorniValidita.split(";");for(let n of t)""!=n&&!isNaN(+n)&&+n in c.cw&&this.giorniValiditaSelected.push(+n)}0==this.giorniValiditaSelected.length&&(this.giorniValiditaSelected=this.giorniValidita.slice())}}constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.backEvent=new e.vpe,this.displayedColumns=["dal","al","sconto","durataMinimaSoggiorno","giorniAnticipoSoggiorno","politicaCancellazione","delete"],this.giorniValidita=[],this.giorniValiditaSelected=[],this.enumGiornoSettimana=c.cw}ngOnInit(){this.giorniValidita=[c.cw.Lunedi,c.cw.Martedi,c.cw.Mercoledi,c.cw.Giovedi,c.cw.Venerdi,c.cw.Sabato,c.cw.Domenica]}save(){if(this.pianoTariffario.nome){this.pianoTariffario.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.pianoTariffario.giorniValidita=this.giorniValiditaSelected.join(";"),this.dettagli.forEach(t=>{t.dal=this.getDate(t.dal),t.al=this.getDate(t.al)}),this.setIsLoading(!0);let o=new d.b5J;o.pianoTariffario=this.pianoTariffario,o.dettagli=this.dettagli,this.apiService.setPianoTariffario(o).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.pianiTariffari.pianoTariffarioSalvato").then(()=>{this.backEvent.emit()})})}else this.showError("globals.messages.inserireDati")}delete(o){this.showDialogConfirm("sbm.configurazione.pianiTariffari.eliminarePianoTariffario").then(t=>{null!=o&&(this.pianoTariffario=o),this.pianoTariffario.isDeleted=!0,this.setIsLoading(!0);let n=new d.b5J;n.pianoTariffario=this.pianoTariffario,n.dettagli=this.dettagli,this.apiService.setPianoTariffario(n).subscribe(()=>{this.backEvent.emit()})},t=>{})}addDettaglio(){this.dettagli.push(new v.cDD),this.dettagli=this.dettagli.slice()}deleteDettaglio(o){this.showDialogConfirm("sbm.configurazione.pianiTariffari.eliminareDettaglio").then(t=>{this.dettagli.splice(o,1),this.dettagli=this.dettagli.slice()},t=>{})}onDalChange(o){setTimeout(()=>{o.dal=this.getDate(o.dal),(null==o.al||u(o.dal)>u(o.al))&&(o.al=o.dal)},200)}onAlChange(o){setTimeout(()=>{o.al=this.getDate(o.al),(null==o.dal||u(o.dal)>u(o.al))&&(o.dal=o.al)},200)}onSelectDeselectAllClickGiorniValidita(o){this.isAllSelectedGiorniValidita(o)?this.giorniValiditaSelected=[]:this.giorniValiditaSelected=this.giorniValidita.slice()}isAllSelectedGiorniValidita(o){return o.selected.length==this.giorniValidita.length}isAllDeselectedGiorniValidita(o){return 0==o.selected.length}}function cL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",22)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.pianiTariffari.nessunPianoTariffario")))}function sL(i,o){1&i&&e._UZ(0,"mat-header-cell")}function pL(i,o){1&i&&(e.TgZ(0,"mat-cell",23)(1,"button",24)(2,"i",25),e._uU(3,"edit"),e.qZA()()())}function dL(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.pianoTariffario.proprieta.nome")))}function mL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.pianoTariffario.nome," ")}}function _L(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.pianoTariffario.proprieta.isAttivo")))}function uL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",26),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.pianoTariffario.isAttivo)}}function gL(i,o){1&i&&e._UZ(0,"mat-header-cell")}function hL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",27)(1,"button",28),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(26);return a.stopPropagation(),e.KtG(p.delete(r.pianoTariffario))}),e.TgZ(2,"i",29),e._uU(3,"delete"),e.qZA()()()}}function fL(i,o){1&i&&e._UZ(0,"mat-header-row",30)}function CL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",31),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.pianoTariffario.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.pianoTariffario.oid?t.pianoTariffario.oid:"")}}Kn.\u0275fac=function(o){return new(o||Kn)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},Kn.\u0275cmp=e.Xpm({type:Kn,selectors:[["app-piani-tariffari-edit"]],inputs:{dettagli:"dettagli",_pianoTariffario:"_pianoTariffario"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:27,vars:29,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectGiorniValidita",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value",4,"ngFor","ngForOf"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],["class","border rounded-lg mat-elevation-z1 p-4",4,"ngIf"],["class","mat-table-container-border-rounded",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","dal"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","al"],["matColumnDef","sconto"],["matColumnDef","durataMinimaSoggiorno"],["matColumnDef","giorniAnticipoSoggiorno"],["matColumnDef","politicaCancellazione"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"w-100","text-right"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["dal",""],["al",""],["autocompleteOff","","type","number","matInput","",3,"ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"nullable","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","title","value","valueChange"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(l){return t.pianoTariffario.nome=l}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"mat-select",4,5),e.NdJ("ngModelChange",function(l){return t.giorniValiditaSelected=l}),e.ALo(9,"translate"),e.TgZ(10,"mat-checkbox",6),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(8);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickGiorniValidita(r))}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,Q8,3,4,"mat-option",7),e.qZA()()(),e.TgZ(14,"div",1)(15,"mat-checkbox",8),e.NdJ("ngModelChange",function(l){return t.pianoTariffario.isAttivo=l}),e._uU(16),e.ALo(17,"translate"),e.qZA()()(),e.YNc(18,aL,6,2,"ng-container",9),e.TgZ(19,"div",10)(20,"button",11),e.NdJ("click",function(){return t.save()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.YNc(23,lL,3,3,"button",12),e.TgZ(24,"button",13),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(25),e.ALo(26,"translate"),e.qZA()()}if(2&o){const n=e.MAs(8);e.xp6(3),e.s9C("placeholder",e.lcZ(4,15,"bo.pianoTariffario.proprieta.nome")),e.Q6J("ngModel",t.pianoTariffario.nome),e.xp6(4),e.Q6J("placeholder",e.lcZ(9,17,"bo.pianoTariffario.proprieta.giorniValidita"))("ngModel",t.giorniValiditaSelected),e.xp6(3),e.Q6J("ngClass",e.VKq(27,rL,t.isAllSelectedGiorniValidita(n)))("checked",t.isAllSelectedGiorniValidita(n))("indeterminate",!t.isAllSelectedGiorniValidita(n)&&!t.isAllDeselectedGiorniValidita(n)),e.xp6(1),e.hij(" ",e.lcZ(12,19,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",t.giorniValidita),e.xp6(2),e.Q6J("ngModel",t.pianoTariffario.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(17,21,"bo.pianoTariffario.proprieta.isAttivo")," "),e.xp6(2),e.Q6J("ngIf",null!=t.dettagli),e.xp6(3),e.Oqu(e.lcZ(22,23,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.pianoTariffario.oid>0),e.xp6(2),e.Oqu(e.lcZ(26,25,"globals.annulla"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.Q7,_.On,ne.d,z.X$],styles:["mat-cell[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%]{padding-left:10px!important;padding-right:10px!important}"]});class Gn extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.pianoTariffario=new v.Lq3,this.dettagli=[],this.displayedColumns=["edit","nome","isAttivo","delete"],this.showTable=!0}ngOnInit(){this.headerService.setTitle("sbm.configurazione.pianiTariffari.title")}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getPianiTariffari().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.pianoTariffario=new v.Lq3(-1),this.dettagli=[],this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.pianoTariffario=Object.assign({},o.pianoTariffario),this.dettagli=o.dettagli,this.showTable=!1,this.containerService.scrollToTop()}onBackEvent(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}ngOnDestroy(){this.headerService.clearTitle()}}Gn.\u0275fac=function(o){return new(o||Gn)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Gn.\u0275cmp=e.Xpm({type:Gn,selectors:[["app-piani-tariffari"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:27,vars:11,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","isAttivo"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"_pianoTariffario","dettagli","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary","disabled","",3,"checked"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,cL,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,sL,1,0,"mat-header-cell",8),e.YNc(10,pL,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,dL,3,3,"mat-header-cell",8),e.YNc(13,mL,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,_L,3,3,"mat-header-cell",8),e.YNc(16,uL,2,1,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,gL,1,0,"mat-header-cell",8),e.YNc(19,hL,4,0,"mat-cell",14),e.BQk(),e.YNc(20,fL,1,0,"mat-header-row",15),e.YNc(21,CL,1,1,"mat-row",16),e.qZA()(),e.TgZ(22,"div",17)(23,"mat-paginator",18),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(24,"div",19)(25,"app-piani-tariffari-edit",20,21),e.NdJ("backEvent",function(){return t.onBackEvent()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("_pianoTariffario",t.pianoTariffario)("dettagli",t.dettagli))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Kn,z.X$]});class $n extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.portale=new v.$Ys(-1),this.getPortaliRQ=new d.k$g(new d.aQR("nome",c.nI.Asc))}ngOnInit(){this.portale.portale=new v.BIO(-1)}save(){if(null!=this.portale.portale&&this.portale.portale.oid>0&&this.portale.nome&&null!=this.portale.ubicazioneIstat&&this.portale.ubicazioneIstat.oid>0){this.setIsLoading(!0),this.portale.albergo=new v.Z$(this.sessionService.getOidAlbergo());let o=new d.Ftj;o.portale=this.portale,this.apiService.setPortale(o).subscribe(t=>{this.setIsLoading(!1),(null==t.errori||0==t.errori.length)&&this.dialogRef.close(t.data.obj)})}else this.showError("globals.messages.inserireDati")}}$n.\u0275fac=function(o){return new(o||$n)(e.Y36(A.s),e.Y36(j.m))},$n.\u0275cmp=e.Xpm({type:$n,selectors:[["app-portali-add"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:20,vars:22,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"mb-3"],[1,"row"],[1,"col-6"],["displayMember","nome",3,"dataLoader","placeholder","required","valueChange"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",3)(7,"div",4)(8,"app-view-select",5),e.NdJ("valueChange",function(a){return t.portale.portale.oid=a.oid}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",4)(11,"app-view-select",6),e.NdJ("valueChange",function(a){return t.portale.ubicazioneIstat=a}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"mat-form-field",7)(14,"input",8),e.NdJ("ngModelChange",function(a){return t.portale.nome=a}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",9)(17,"button",10),e.NdJ("click",function(){return t.save()}),e._uU(18),e.ALo(19,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,12,"sbm.configurazione.portali.creaPortale")),e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliViewSelect(t.getPortaliRQ,!1))("placeholder",e.lcZ(9,14,"bo.portaleXAlbergo.proprieta.portale"))("required",!0),e.xp6(3),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect(null,!1))("value",t.portale.ubicazioneIstat)("placeholder",e.lcZ(12,16,"bo.portaleXAlbergo.proprieta.ubicazioneIstat"))("required",!0),e.xp6(3),e.Q6J("placeholder",e.lcZ(15,18,"bo.portaleXAlbergo.proprieta.nome"))("ngModel",t.portale.nome),e.xp6(4),e.Oqu(e.lcZ(19,20,"globals.salva")))},dependencies:[w.X,h.eB,M.v_,b.k0,F.aO,_.Fj,_.JJ,_.Q7,_.On,ne.d,z.X$]});class Bn{constructor(){}}Bn.\u0275fac=function(o){return new(o||Bn)},Bn.\u0275cmp=e.Xpm({type:Bn,selectors:[["app-calcola-retta-errori-modal"]],inputs:{portaleOid:"portaleOid",dialogRef:"dialogRef"},decls:4,vars:4,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"portaleOid","showErrori","dialogRef"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"app-calcola-retta",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("portaleOid",t.portaleOid)("showErrori",!0)("dialogRef",t.dialogRef))},dependencies:[h.eB,F.aO,Et]});var es=Y(10244);function bL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"app-color-picker",12),e.NdJ("valueChange",function(a){const r=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.model[r].valore=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"button",13),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.model[l].valore=null)}),e.TgZ(5,"i",14),e._uU(6," settings_backup_restore "),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.xp6(2),e.Q6J("value",a.model[n].valore)("options",a.colorPickerOptions)("placeholder",e.lcZ(3,3,t.value))}}function vL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,bL,7,5,"div",4),e.ALo(3,"selectEnum"),e.qZA(),e.TgZ(4,"p",5),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"app-css-editor",6),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.ubicazioneIstatCss.cssStyle=a)}),e.qZA(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.init())}),e._uU(13),e.ALo(14,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",e.xi3(3,5,t.enumHtmlElement,"htmlElement")),e.xp6(3),e.Oqu(e.lcZ(6,8,"interfaces.css-configuration.css")),e.xp6(2),e.Q6J("value",t.ubicazioneIstatCss.cssStyle),e.xp6(3),e.Oqu(e.lcZ(11,10,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(14,12,"globals.annulla"))}}class Vn extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.cssLoaderService=n,this.colorPickerOptions=new d.Aaf,this.model=[new v.NpK],this.ubicazioneIstatCss=new v.NpK,this.enumHtmlElement=c.SL,this.initialized=!1}ngOnInit(){this.init(),this.colorPickerOptions.width="185px"}init(){this.setIsLoading(!0),this.initialized=!1,this.cssLoaderService.getUbicazioniIstatCss(this.sessionService.getOidAlbergo(),this.page,this.oidUbicazioneIstat).then(o=>{let t=0,n="";this.model=[];do{n=this.getEnumKeyOriginal(c.SL,t);let a=new v.NpK;if(a.albergo=new v.Z$(this.sessionService.getOidAlbergo()),a.ubicazioneIstat=new v.Dgg(this.oidUbicazioneIstat),a.pagina=this.page,null!=n){a.htmlElement=c.SL[n],a.cssStyle=null;let l=o.filter(r=>r.htmlElement==a.htmlElement&&null!=r.valore&&null==r.cssStyle);l.length>0?a.valore=l[0].valore:a.valore=null,t++}else{a.valore=null;let l=o.filter(r=>null!=r.cssStyle&&null==r.valore);l.length>0?a.cssStyle=l[0].cssStyle:a.cssStyle=null,this.ubicazioneIstatCss=a}this.model.push(a)}while(null!=n);this.initialized=!0,this.setIsLoading(!1)})}save(){this.setIsLoading(!0),this.apiService.setUbicazioniIstatCss(this.model).subscribe(()=>{this.setIsLoading(!1),this.showInfo("interfaces.css-configuration.impostazioniGraficheSalvate")})}}Vn.\u0275fac=function(o){return new(o||Vn)(e.Y36(A.s),e.Y36(j.m),e.Y36(es.e))},Vn.\u0275cmp=e.Xpm({type:Vn,selectors:[["app-css-configuration"]],inputs:{oidUbicazioneIstat:"oidUbicazioneIstat",page:"page"},features:[e.qOj],decls:3,vars:1,consts:[[1,"div-help","mb-2"],["class","rounded border mat-elevation-z1 p-3 bg-white",4,"ngIf"],[1,"rounded","border","mat-elevation-z1","p-3","bg-white"],[1,"row","ml-n1","mr-n1"],["class","col-6 col-sm-4 col-md-3 col-lg-2 pr-1 pl-1",4,"ngFor","ngForOf"],[1,"font-weight-bold","m-0"],[3,"value","valueChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"col-6","col-sm-4","col-md-3","col-lg-2","pr-1","pl-1"],[1,"color-input","align-middle"],[3,"value","options","placeholder","valueChange"],["mat-icon-button","","color","primary",1,"align-middle",3,"click"],[1,"material-icons"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._uU(1,"Dopo aver salvato le modifiche per visualizzarle online sulla pagina dedicata, effettuare un CTRL+F5"),e.qZA(),e.YNc(2,vL,15,14,"div",1)),2&o&&(e.xp6(2),e.Q6J("ngIf",t.initialized))},dependencies:[m.sg,m.O5,h.eB,We.h,li,Te.A,z.X$],styles:[".color-input[_ngcontent-%COMP%]{width:calc(100% - 40px);display:inline-block}"]});const TL=function(i){return{selected:i}};function xL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",3),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onUbicazioneIstatClick(l.oid))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,TL,t.oid==n.oidUbicazioneIstat)),e.xp6(1),e.hij(" ",t.nome," ")}}function ZL(i,o){if(1&i&&e._UZ(0,"app-css-configuration",4),2&i){const t=e.oxw();e.Q6J("oidUbicazioneIstat",t.oidUbicazioneIstat)("page",t.page)}}class ot extends f.H{constructor(o){super(),this.apiService=o,this.ubicazioniIstat=[]}ngOnInit(){this.setIsLoading(!0),this.apiService.getUbicazioniIstatFilter(new d.k$g(new d.aQR("ordinamento"))).subscribe(o=>{this.ubicazioniIstat=o.data,this.ubicazioniIstat.length>0&&(this.oidUbicazioneIstat=this.ubicazioniIstat[0].oid),this.setIsLoading(!1)})}onUbicazioneIstatClick(o){this.oidUbicazioneIstat=null,setTimeout(()=>{this.oidUbicazioneIstat=o},200)}}function AL(i,o){1&i&&e.GkF(0)}function wL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-group",5),e.NdJ("selectedTabChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onTabChange(a.index))}),e.TgZ(1,"mat-tab",6),e.ALo(2,"translate"),e.YNc(3,AL,1,0,"ng-container",7),e.qZA(),e.TgZ(4,"mat-tab",6),e.ALo(5,"translate"),e.TgZ(6,"div",8),e._UZ(7,"app-css-configuration-ubicazioni-istat",9),e.qZA()()()}if(2&i){const t=e.oxw(),n=e.MAs(6);e.xp6(1),e.Q6J("label",e.lcZ(2,4,"sbm.configurazione.portali.IFrame")),e.xp6(2),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("label",e.lcZ(5,6,"sbm.configurazione.portali.configurazioneStile")),e.xp6(3),e.Q6J("page",t.pagina)}}function zL(i,o){1&i&&e.GkF(0)}function ML(i,o){if(1&i&&(e.ynx(0),e.YNc(1,zL,1,0,"ng-container",7),e.BQk()),2&i){e.oxw();const t=e.MAs(6);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function qL(i,o){if(1&i&&(e._UZ(0,"app-url",10)(1,"div",11),e.ALo(2,"safeHtml")),2&i){const t=e.oxw();e.Q6J("url",t.iFrameHtml)("showOnlyCopyButton",!0),e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,3,t.iFrameHtml),e.oJD)}}ot.\u0275fac=function(o){return new(o||ot)(e.Y36(A.s))},ot.\u0275cmp=e.Xpm({type:ot,selectors:[["app-css-configuration-ubicazioni-istat"]],inputs:{page:"page"},features:[e.qOj],decls:3,vars:2,consts:[[1,"mb-3"],["class","d-inline-block ubicazione-istat p-2 rounded-lg mr-2",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"oidUbicazioneIstat","page",4,"ngIf"],[1,"d-inline-block","ubicazione-istat","p-2","rounded-lg","mr-2",3,"ngClass","click"],[3,"oidUbicazioneIstat","page"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,xL,2,4,"span",1),e.qZA(),e.YNc(2,ZL,1,2,"app-css-configuration",2)),2&o&&(e.xp6(1),e.Q6J("ngForOf",t.ubicazioniIstat),e.xp6(1),e.Q6J("ngIf",null!=t.oidUbicazioneIstat))},dependencies:[m.mk,m.sg,m.O5,Vn],styles:[".selected[_ngcontent-%COMP%]{color:#e91e63!important;border:1px solid #e91e63!important}.ubicazione-istat[_ngcontent-%COMP%]{font-size:16px;font-weight:600;cursor:pointer;border:1px solid #aaaaaa;background-color:#fff}"]});class Xn extends f.H{constructor(){super(),this.height=1e3}ngOnInit(){this.iFrameHtml='<iframe src="'+this.url+'" frameborder="0" width="100%" height="'+this.height+'"></iframe>'}onTabChange(o){1==o&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},200)}}function PL(i,o){if(1&i&&(e.TgZ(0,"span",11),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.note)}}function kL(i,o){if(1&i&&(e.TgZ(0,"div")(1,"b",9),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.YNc(5,PL,2,1,"span",10),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.portaleXAlbergo.nome),e.xp6(2),e.Oqu(t.tipoCameraOTA.descrizione+" - "+t.tariffaOTA.descrizione),e.xp6(1),e.Q6J("ngIf",!!t.note)}}function SL(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",6)(1,"mat-expansion-panel-header",7),e._uU(2),e.qZA(),e.YNc(3,kL,6,3,"div",8),e.qZA()),2&i){const t=o.$implicit;e.Q6J("togglePosition","before"),e.xp6(1),e.Q6J("collapsedHeight","50px")("expandedHeight","50px"),e.xp6(1),e.Oqu(t.tipoCamera.descrizione),e.xp6(1),e.Q6J("ngForOf",t.viewTipoCamereTariffe)}}function yL(i,o){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,SL,4,5,"mat-expansion-panel",5),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.configurazione)}}function JL(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",12),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"div",13),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali.errori")),e.xp6(2),e.Q6J("innerHtml",t.localizationService.getTranslationFromErrori(t.errori),e.oJD)}}Xn.\u0275fac=function(o){return new(o||Xn)},Xn.\u0275cmp=e.Xpm({type:Xn,selectors:[["app-condividi-iframe"]],inputs:{url:"url",height:"height",pagina:"pagina"},features:[e.qOj],decls:7,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","dialog-tab-group",3,"selectedTabChange",4,"ngIf"],[4,"ngIf"],["iframeTemplate",""],[1,"dialog-tab-group",3,"selectedTabChange"],[3,"label"],[4,"ngTemplateOutlet"],[1,"mt-3"],[3,"page"],[3,"url","showOnlyCopyButton"],[3,"innerHTML"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,wL,8,8,"mat-tab-group",2),e.YNc(4,ML,2,1,"ng-container",3),e.YNc(5,qL,3,5,"ng-template",null,4,e.W1O)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.pagina),e.xp6(1),e.Q6J("ngIf",null==t.pagina))},dependencies:[m.O5,m.tP,h.eB,ee.SK,ee.R7,F.aO,Be,ot,Bc.z,z.X$]});class jn extends f.H{constructor(o,t){super(),this.apiService=o,this.localizationService=t}ngOnInit(){this.setIsLoading(!0),this.apiService.getConfigurazionePortaleMaster(this.oidPortale).subscribe(o=>{this.configurazione=o.data.filter(t=>null!=t.viewTipoCamereTariffe&&t.viewTipoCamereTariffe.length>0),this.apiService.controllaConfigurazionePortaleMaster(this.oidPortale).subscribe(t=>{this.errori=t.data,this.setIsLoading(!1)})})}}jn.\u0275fac=function(o){return new(o||jn)(e.Y36(A.s),e.Y36(Oe.o))},jn.\u0275cmp=e.Xpm({type:jn,selectors:[["app-configurazione-risorse-tariffe-master"]],inputs:{oidPortale:"oidPortale"},features:[e.qOj],decls:5,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","border rounded-xl",4,"ngIf"],[4,"ngIf"],[1,"border","rounded-xl"],[3,"togglePosition",4,"ngFor","ngForOf"],[3,"togglePosition"],[1,"tipo-camera",3,"collapsedHeight","expandedHeight"],[4,"ngFor","ngForOf"],[1,"mr-2"],["class","note-risorsaTariffa ml-2",4,"ngIf"],[1,"note-risorsaTariffa","ml-2"],[1,"mt-4","mb-3"],[1,"errori-div",3,"innerHtml"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,yL,2,1,"div",2),e.YNc(4,JL,5,4,"ng-container",3)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.configurazione&&t.configurazione.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.errori&&t.errori.length>0))},dependencies:[m.sg,m.O5,h.eB,ye.ib,ye.yz,F.aO,z.X$],styles:["mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none!important}.tipo-camera[_ngcontent-%COMP%]{font-weight:500;font-size:18px}.note-risorsaTariffa[_ngcontent-%COMP%]{font-size:16px;color:red}"]});class Wn{constructor(){}}function EL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",29)(1,"mat-checkbox",30),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(a?l.masterTogglePrenotazioni():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selectionPrenotazioni.hasValue()&&t.isAllSelectedPrenotazioni())("indeterminate",t.selectionPrenotazioni.hasValue()&&!t.isAllSelectedPrenotazioni())}}function NL(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",31)(1,"mat-checkbox",32),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(a?p.selectionPrenotazioni.toggle(r.codice):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionPrenotazioni.isSelected(t.codice))}}function OL(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.codiceOTA")))}function LL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codice)}}function DL(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.arrivo")))}function IL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.arrivo)}}function QL(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.partenza")))}function UL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.partenza)}}function YL(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tipoCameraOTA")))}function RL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.tipoCamera)}}function FL(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tariffaOTA")))}function HL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.tariffa)}}function KL(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.cognome")))}function GL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.cognome)}}function $L(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.nome")))}function BL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function VL(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.email")))}function XL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.email)}}function jL(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.importo")))}function WL(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.importo))}}function eD(i,o){1&i&&e._UZ(0,"mat-header-row",33)}function tD(i,o){1&i&&e._UZ(0,"mat-row")}function iD(i,o){if(1&i&&(e.TgZ(0,"div",11)(1,"mat-table",12),e.ynx(2,13),e.YNc(3,EL,2,2,"mat-header-cell",14),e.YNc(4,NL,2,1,"mat-cell",15),e.BQk(),e.ynx(5,16),e.YNc(6,OL,3,3,"mat-header-cell",17),e.YNc(7,LL,2,1,"mat-cell",18),e.BQk(),e.ynx(8,19),e.YNc(9,DL,3,3,"mat-header-cell",17),e.YNc(10,IL,2,1,"mat-cell",18),e.BQk(),e.ynx(11,20),e.YNc(12,QL,3,3,"mat-header-cell",17),e.YNc(13,UL,2,1,"mat-cell",18),e.BQk(),e.ynx(14,21),e.YNc(15,YL,3,3,"mat-header-cell",17),e.YNc(16,RL,2,1,"mat-cell",18),e.BQk(),e.ynx(17,22),e.YNc(18,FL,3,3,"mat-header-cell",17),e.YNc(19,HL,2,1,"mat-cell",18),e.BQk(),e.ynx(20,23),e.YNc(21,KL,3,3,"mat-header-cell",17),e.YNc(22,GL,2,1,"mat-cell",18),e.BQk(),e.ynx(23,24),e.YNc(24,$L,3,3,"mat-header-cell",17),e.YNc(25,BL,2,1,"mat-cell",18),e.BQk(),e.ynx(26,25),e.YNc(27,VL,3,3,"mat-header-cell",17),e.YNc(28,XL,2,1,"mat-cell",18),e.BQk(),e.ynx(29,26),e.YNc(30,jL,3,3,"mat-header-cell",17),e.YNc(31,WL,3,3,"mat-cell",18),e.BQk(),e.YNc(32,eD,1,0,"mat-header-row",27),e.YNc(33,tD,1,0,"mat-row",28),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.prenotazioni),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}Wn.\u0275fac=function(o){return new(o||Wn)},Wn.\u0275cmp=e.Xpm({type:Wn,selectors:[["app-facebook-help-modal"]],decls:11,vars:7,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"font-weight-bold","mb-3","text-center"],["src","\\assets\\images\\sbm\\chat_fb.JPG",1,"w-100"],["src","\\assets\\images\\sbm\\chat_fb2.JPG",1,"w-100"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h5",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"img",3),e.TgZ(7,"h5",2),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"img",4)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,3,"sbm.configurazione.portali.attivazioneFacebook")),e.xp6(4),e.Oqu(e.lcZ(9,5,"sbm.configurazione.portali.attivazioneFacebookLink")))},dependencies:[h.eB,F.aO,z.X$]});class ea extends f.H{constructor(o,t){super(),this.apiService=o,this.localizationService=t,this.selectionPrenotazioni=new me.Ov(!0,[]),this.displayedColumns=["select","codice","arrivo","partenza","tipoCamera","tariffa","cognome","nome","email","importo"]}recuperaPrenotazioniClick(){this.recuperaPrenotazioni(this.codiciPrenotazione.split(";"),!1)}creaPrenotazioniClick(){this.recuperaPrenotazioni(this.selectionPrenotazioni.selected,!0)}recuperaPrenotazioni(o,t){this.setIsLoading(!0);let n=new d.MdM;n.oidPortaleXAlbergo=this.oidPortale,n.codiciPrenotazione=o,n.isCreaPrenotazione=t,this.apiService.recuperaPrenotazioni(n).subscribe(a=>{if(this.setIsLoading(!1),null!=a)if(a.tipoEsito==c.pp.NessunErrore)t?null!=a.risultati&&a.risultati.length>0?this.showInfo("globals.successoOperazione").then(()=>this.dialogRef.close()):this.showError("globals.messages.errore"):null!=a.risultati&&a.risultati.length>0?(this.selectionPrenotazioni=new me.Ov(!0,[]),this.prenotazioni=a.risultati,this.masterTogglePrenotazioni()):this.showError("sbm.configurazione.portali.nessunaPrenotazione");else{let l=this.localizationService.getTranslationSync("globals.messages.errore");a.dettaglioErrore&&(l+="<br/>"+a.dettaglioErrore),a.dettaglioWarning&&(l+="<br/>"+a.dettaglioWarning),this.showError(l)}else this.showError("globals.messages.errore")})}isAllSelectedPrenotazioni(){return this.selectionPrenotazioni.selected.length==this.prenotazioni.length}masterTogglePrenotazioni(){this.isAllSelectedPrenotazioni()?this.selectionPrenotazioni.clear():this.prenotazioni.forEach(o=>this.selectionPrenotazioni.select(o.codice))}}ea.\u0275fac=function(o){return new(o||ea)(e.Y36(A.s),e.Y36(Oe.o))},ea.\u0275cmp=e.Xpm({type:ea,selectors:[["app-recupera-prenotazioni-modal"]],inputs:{oidPortale:"oidPortale",dialogRef:"dialogRef"},features:[e.qOj],decls:20,vars:17,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"mt-3",3,"disabled","click"],["class","mat-table-container-border-rounded",4,"ngIf"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",3,"matDialogClose"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-edit",4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","codice"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","tipoCamera"],["matColumnDef","tariffa"],["matColumnDef","cognome"],["matColumnDef","nome"],["matColumnDef","email"],["matColumnDef","importo"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-th-edit"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-edit"],["color","primary",3,"checked","click","change"],[1,"mat-table-header"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"input",5),e.NdJ("ngModelChange",function(a){return t.codiciPrenotazione=a}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",3)(9,"button",6),e.NdJ("click",function(){return t.recuperaPrenotazioniClick()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.YNc(12,iD,34,4,"div",7),e.TgZ(13,"div",8)(14,"button",9),e.NdJ("click",function(){return t.creaPrenotazioniClick()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",10),e._uU(18),e.ALo(19,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.Q6J("placeholder",e.lcZ(7,9,"sbm.configurazione.portali.codiciPrenotazione"))("ngModel",t.codiciPrenotazione),e.xp6(3),e.Q6J("disabled",!t.codiciPrenotazione),e.xp6(1),e.Oqu(e.lcZ(11,11,"sbm.configurazione.portali.recuperaPrenotazioni")),e.xp6(2),e.Q6J("ngIf",null!=t.prenotazioni&&t.prenotazioni.length>0),e.xp6(2),e.Q6J("disabled",0==t.selectionPrenotazioni.selected.length),e.xp6(1),e.Oqu(e.lcZ(16,13,"sbm.configurazione.portali.creaPrenotazioni")),e.xp6(3),e.Oqu(e.lcZ(19,15,"globals.annulla")))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,F.aO,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.JJ,_.On,ke.f,z.X$],styles:[".mat-column-select[_ngcontent-%COMP%]{width:80px!important;max-width:80px!important;min-width:80px!important}"]});var kc=Y(85029);function oD(i,o){1&i&&e._UZ(0,"mat-progress-bar",13)}class Rt extends f.H{constructor(o){super(),this.apiService=o,this.rq=new d.plr,this.synchronizing=!1}ngOnInit(){this.rq.oidPortale=this.oidPortale,this.dal&&this.al?(this.rq.dal=this.dal,this.rq.al=this.al):(this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.oneMonthFromToday))}sincronizzaDisponibilita(){this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.synchronizing=!0,this.dialogRef.disableClose=!0,this.apiService.sincronizzaDisponibilita(this.rq).subscribe(()=>{this.synchronizing=!1,this.dialogRef.disableClose=!1,this.showInfo("globals.operazioneCompletata").then(()=>{this.dialogRef.close()})})}}Rt.\u0275fac=function(o){return new(o||Rt)(e.Y36(A.s))},Rt.\u0275cmp=e.Xpm({type:Rt,selectors:[["app-sincronizza-disponibilita-modal"]],inputs:{oidPortale:"oidPortale",dal:"dal",al:"al",dialogRef:"dialogRef"},features:[e.qOj],decls:26,vars:24,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple","disabled"],[1,"material-icons-round"],[1,"mb-3"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","disabled","ngModelChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["mode","indeterminate",4,"ngIf"],[1,"text-right","mt-3"],["mat-flat-button","","color","primary",3,"disabled","click"],["mode","indeterminate"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",3)(7,"div",4)(8,"mat-form-field",5)(9,"input",6),e.NdJ("ngModelChange",function(a){return t.rq.dal=a}),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"mat-datepicker-toggle",7)(12,"mat-datepicker",null,8),e.qZA()(),e.TgZ(14,"div",4)(15,"mat-form-field",5)(16,"input",6),e.NdJ("ngModelChange",function(a){return t.rq.al=a}),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"mat-datepicker-toggle",7)(19,"mat-datepicker",null,9),e.qZA()()(),e.YNc(21,oD,1,0,"mat-progress-bar",10),e.TgZ(22,"div",11)(23,"button",12),e.NdJ("click",function(){return t.sincronizzaDisponibilita()}),e._uU(24),e.ALo(25,"translate"),e.qZA()()),2&o){const n=e.MAs(13),a=e.MAs(20);e.Q6J("disableRipple",!0)("disabled",t.synchronizing),e.xp6(4),e.hij(" ",e.lcZ(5,16,"sbm.configurazione.portali.sincronizzaDisponibilita"),"\n"),e.xp6(5),e.s9C("placeholder",e.lcZ(10,18,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal)("disabled",t.synchronizing),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(17,20,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al)("disabled",t.synchronizing),e.xp6(2),e.Q6J("for",a),e.xp6(3),e.Q6J("ngIf",t.synchronizing),e.xp6(2),e.Q6J("disabled",t.synchronizing),e.xp6(1),e.Oqu(e.lcZ(25,22,"sbm.configurazione.portali.sincronizza"))}},dependencies:[m.O5,w.X,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,kc.eI,F.aO,_.Fj,_.JJ,_.On,z.X$]});class ta{constructor(){}}function nD(i,o){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}ta.\u0275fac=function(o){return new(o||ta)},ta.\u0275cmp=e.Xpm({type:ta,selectors:[["app-tracciamenti-help-modal"]],decls:46,vars:1,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],[1,"code"],[1,"row","mt-3"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"h4"),e._uU(6,"Google Analytics"),e.qZA(),e.TgZ(7,"h6"),e._uU(8,'E\' possibile tracciare le visite e le conversioni tra il booking engine ed il sito web della struttura, per avere misurazioni complete e report ancora pi\xf9 accurati. Verr\xe0 tracciata ogni visita sulla sezione "Traffico" di Google Analytics e ogni prenotazione conclusa sulla sezione "eCommerce" di Google Analytics '),e.qZA()(),e.TgZ(9,"div",3)(10,"h6"),e._uU(11,"Visualizzazione Web Booking:"),e.qZA(),e.TgZ(12,"p",4),e._uU(13,"send : pageview"),e.qZA(),e.TgZ(14,"p",4),e._uU(15,"ecommerce : addTransaction"),e.qZA()()(),e.TgZ(16,"div",5)(17,"div",3)(18,"h4"),e._uU(19,"Google Tag Manager"),e.qZA(),e.TgZ(20,"h6"),e._uU(21," E' possibile inserire eventi personalizzati per tracciare click e azioni dell'utente su Google Analytics "),e.qZA()(),e.TgZ(22,"div",3)(23,"h6"),e._uU(24,"Visualizzazione Web Booking:"),e.qZA(),e.TgZ(25,"p",4),e._uU(26," event: page , pageName: booking "),e.qZA(),e.TgZ(27,"h6"),e._uU(28,"MyPage visualizzato:"),e.qZA(),e.TgZ(29,"p",4),e._uU(30," event: page , pageName: mypage "),e.qZA(),e.TgZ(31,"h6"),e._uU(32,"Prenotazione Completata:"),e.qZA(),e.TgZ(33,"p",4),e._uU(34," event: 'new_booking/new_booking_mypage',"),e._UZ(35,"br"),e._uU(36," booking: hotelId: , hotelName: , portalId: , portalNome: , transactionId: , currencyCode: 'EUR', rooms: , roomNights: , totalAmount: , totalAmountTax: , checkInDate: , checkOutDate: , lingua: "),e.qZA()()(),e.TgZ(37,"div",5)(38,"div",3)(39,"h4"),e._uU(40,"Facebook"),e.qZA()(),e.TgZ(41,"div",3)(42,"h6"),e._uU(43,"Visualizzazione Web Booking"),e.qZA(),e.TgZ(44,"p",4),e._uU(45," track : PageView "),e.qZA()()()),2&o&&e.Q6J("disableRipple",!0)},dependencies:[h.eB,F.aO],styles:[".code[_ngcontent-%COMP%]{font-style:italic;font-size:smaller}"]});const ft=function(i){return{"mt-n4":i}};function aD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.booking[r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.Q6J("ngClass",e.VKq(3,ft,n>0)),e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",a.model.booking[t.name])}}function lD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.enumerations.mealPlanType[r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",n.model.enumerations.mealPlanType[t.name])}}function rD(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider",15),e.YNc(5,aD,8,5,"div",16),e.YNc(6,lD,8,2,"div",17),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,3,"sbm.configurazione.portali.booking")),e.xp6(3),e.Q6J("ngForOf",t.bookingFieldsFiltered),e.xp6(1),e.Q6J("ngForOf",t.mealPlanTypeFieldsFiltered)}}function cD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model["booking-day-use"][r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.Q6J("ngClass",e.VKq(3,ft,n>0)),e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",a.model["booking-day-use"][t.name])}}function sD(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider",15),e.YNc(5,cD,8,5,"div",16),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali.bookingDayUse")),e.xp6(3),e.Q6J("ngForOf",t.bookingDayUseFieldsFiltered)}}function pD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.interfaces["pagamento-form"][r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.Q6J("ngClass",e.VKq(3,ft,n>0)),e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",a.model.interfaces["pagamento-form"][t.name])}}function dD(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider",15),e.YNc(5,pD,8,5,"div",16),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali.pagamento-form")),e.xp6(3),e.Q6J("ngForOf",t.pagamentoFormFieldsFiltered)}}function mD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.interfaces["form-v1"][r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.Q6J("ngClass",e.VKq(3,ft,n>0)),e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",a.model.interfaces["form-v1"][t.name])}}function _D(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider",15),e.YNc(5,mD,8,5,"div",16),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali.form-richiesta")),e.xp6(3),e.Q6J("ngForOf",t.formV1FieldsFiltered)}}function uD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.booking["my-page"][r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.Q6J("ngClass",e.VKq(3,ft,n>0)),e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",a.model.booking["my-page"][t.name])}}function gD(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider",15),e.YNc(5,uD,8,5,"div",16),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali.my-page")),e.xp6(3),e.Q6J("ngForOf",t.myPageFieldsFiltered)}}function hD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.booking.paymail[r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.Q6J("ngClass",e.VKq(3,ft,n>0)),e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",a.model.booking.paymail[t.name])}}function fD(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider",15),e.YNc(5,hD,8,5,"div",16),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali.paymail")),e.xp6(3),e.Q6J("ngForOf",t.paymailFieldsFiltered)}}function CD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.myself[r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.Q6J("ngClass",e.VKq(3,ft,n>0)),e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",a.model.myself[t.name])}}function bD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model["myself-mobile"][r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",n.model["myself-mobile"][t.name])}}function vD(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider",15),e.YNc(5,CD,8,5,"div",16),e.YNc(6,bD,8,2,"div",17),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,3,"sbm.configurazione.portali.myself")),e.xp6(3),e.Q6J("ngForOf",t.mySelfFieldsFiltered),e.xp6(1),e.Q6J("ngForOf",t.mySelfMobileFieldsFiltered)}}function TD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.booking["sondaggio-form"][r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.Q6J("ngClass",e.VKq(3,ft,n>0)),e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",a.model.booking["sondaggio-form"][t.name])}}function xD(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider",15),e.YNc(5,TD,8,5,"div",16),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali.sondaggioForm")),e.xp6(3),e.Q6J("ngForOf",t.sondaggioFormFieldsFiltered)}}function ZD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.globals[r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(4);e.Q6J("ngClass",e.VKq(3,ft,n>0)),e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",a.model.globals[t.name])}}function AD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20)(4,"mat-form-field",21)(5,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.model.globals.messages[r.name]=a)}),e.qZA()()(),e.TgZ(6,"div",23),e._UZ(7,"mat-divider"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(2),e.hij(" ",t.value," "),e.xp6(3),e.Q6J("ngModel",n.model.globals.messages[t.name])}}function wD(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"mat-divider",15),e.YNc(5,ZD,8,5,"div",16),e.YNc(6,AD,8,2,"div",17),e.BQk()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,3,"sbm.configurazione.portali.generiche")),e.xp6(3),e.Q6J("ngForOf",t.genericFieldsFiltered),e.xp6(1),e.Q6J("ngForOf",t.genericMessagesFieldsFiltered)}}function zD(i,o){if(1&i&&(e.ynx(0),e.YNc(1,rD,7,5,"ng-container",2),e.YNc(2,sD,6,4,"ng-container",2),e.YNc(3,dD,6,4,"ng-container",2),e.YNc(4,_D,6,4,"ng-container",2),e.YNc(5,gD,6,4,"ng-container",2),e.YNc(6,fD,6,4,"ng-container",2),e.YNc(7,vD,7,5,"ng-container",2),e.YNc(8,xD,6,4,"ng-container",2),e.YNc(9,wD,7,5,"ng-container",2),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.bookingFieldsFiltered.length>0||t.mealPlanTypeFieldsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",t.bookingDayUseFieldsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",t.pagamentoFormFieldsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",t.formV1FieldsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",t.myPageFieldsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",t.paymailFieldsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",t.mySelfFieldsFiltered.length>0||t.mySelfMobileFieldsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",t.sondaggioFormFieldsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",t.genericFieldsFiltered.length>0||t.genericMessagesFieldsFiltered.length>0)}}function MD(i,o){1&i&&(e.ynx(0),e.TgZ(1,"h4",25),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"sbm.configurazione.portali.nessunaTraduzione")," "))}function qD(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"div",4)(3,"div",5)(4,"mat-form-field",6)(5,"input",7),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.filtro=a)})("input",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearch())}),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",5)(8,"mat-form-field",6)(9,"mat-select",8),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.sezione=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearch())}),e.ALo(10,"translate"),e._UZ(11,"mat-option",9),e.YNc(12,nD,3,4,"mat-option",10),e.ALo(13,"selectEnum"),e.qZA()()()(),e.YNc(14,zD,10,9,"ng-container",2),e.YNc(15,MD,4,3,"ng-container",2),e.qZA(),e.TgZ(16,"div",11)(17,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.init(!0))}),e._uU(21),e.ALo(22,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.filtro)("placeholder",e.lcZ(6,10,"sbm.configurazione.portali.filtroTraduzioni")),e.xp6(4),e.Q6J("ngModel",t.sezione)("placeholder",e.lcZ(10,12,"sbm.configurazione.portali.sezione")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(13,14,t.enumSezione,"sezioneTraduzioni")),e.xp6(2),e.Q6J("ngIf",t.bookingFieldsFiltered.length>0||t.bookingDayUseFieldsFiltered.length>0||t.pagamentoFormFieldsFiltered.length>0||t.formV1FieldsFiltered.length>0||t.myPageFieldsFiltered.length>0||t.paymailFieldsFiltered.length>0||t.mySelfFieldsFiltered.length>0||t.mySelfMobileFieldsFiltered.length>0||t.mealPlanTypeFieldsFiltered.length>0||t.sondaggioFormFieldsFiltered.length>0||t.genericFieldsFiltered.length>0||t.genericMessagesFieldsFiltered.length>0),e.xp6(1),e.Q6J("ngIf",0==t.bookingFieldsFiltered.length&&0==t.bookingDayUseFieldsFiltered.length&&0==t.pagamentoFormFieldsFiltered.length&&0==t.formV1FieldsFiltered.length&&0==t.myPageFieldsFiltered.length&&0==t.paymailFieldsFiltered.length&&0==t.mySelfFieldsFiltered.length&&0==t.mySelfMobileFieldsFiltered.length&&0==t.mealPlanTypeFieldsFiltered.length&&0==t.sondaggioFormFieldsFiltered.length&&0==t.genericFieldsFiltered.length&&0==t.genericMessagesFieldsFiltered.length),e.xp6(3),e.Oqu(e.lcZ(19,17,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(22,19,"sbm.configurazione.portali.reset"))}}class ia extends f.H{constructor(o){super(),this.http=o,this.bookingFields=[],this.bookingDayUseFields=[],this.pagamentoFormFields=[],this.formV1Fields=[],this.myPageFields=[],this.paymailFields=[],this.mySelfFields=[],this.mySelfMobileFields=[],this.mealPlanTypeFields=[],this.sondaggioFormFields=[],this.genericFields=[],this.genericMessagesFields=[],this.bookingFieldsFiltered=[],this.bookingDayUseFieldsFiltered=[],this.pagamentoFormFieldsFiltered=[],this.formV1FieldsFiltered=[],this.myPageFieldsFiltered=[],this.paymailFieldsFiltered=[],this.mySelfFieldsFiltered=[],this.mySelfMobileFieldsFiltered=[],this.mealPlanTypeFieldsFiltered=[],this.sondaggioFormFieldsFiltered=[],this.genericFieldsFiltered=[],this.genericMessagesFieldsFiltered=[],this.model={},this.initialized=!1,this.enumSezione=c.YV}ngOnInit(){this.setIsLoading(!0),this.http.get("/assets/i18n/"+this.lingua+".json").subscribe({next:o=>{this.originalJSON=o,this.init()},error:()=>{this.http.get("/assets/i18n/it.json").subscribe({next:o=>{this.originalJSON=o,this.init()},error:()=>{}})}})}init(o=!1){if(this.bookingFields=[],this.bookingDayUseFields=[],this.pagamentoFormFields=[],this.formV1Fields=[],this.myPageFields=[],this.paymailFields=[],this.mySelfFields=[],this.mySelfMobileFields=[],this.mealPlanTypeFields=[],this.sondaggioFormFields=[],this.genericFields=[],this.genericMessagesFields=[],null!=this.originalJSON){let t={};try{t=JSON.parse(this.traduzioni)}catch(n){}if(null!=this.originalJSON.booking){this.model.booking=JSON.parse(JSON.stringify(this.originalJSON.booking));for(let n in this.model.booking)"object"!=typeof this.model.booking[n]?this.bookingFields.push({name:n,value:this.model.booking[n]}):delete this.model.booking[n];if(!o&&null!=t&&null!=t.booking)for(let n in t.booking)null!=this.model.booking[n]&&(this.model.booking[n]=t.booking[n]);if(null!=this.originalJSON.booking["my-page"]){for(let n in this.originalJSON.booking["my-page"])this.myPageFields.push({name:n,value:this.originalJSON.booking["my-page"][n]});if(this.model.booking["my-page"]=JSON.parse(JSON.stringify(this.originalJSON.booking["my-page"])),!o&&null!=t&&null!=t.booking&&null!=t.booking["my-page"])for(let n in t.booking["my-page"])null!=this.model.booking["my-page"][n]&&(this.model.booking["my-page"][n]=t.booking["my-page"][n])}if(null!=this.originalJSON.booking.paymail){for(let n in this.originalJSON.booking.paymail)this.paymailFields.push({name:n,value:this.originalJSON.booking.paymail[n]});if(this.model.booking.paymail=JSON.parse(JSON.stringify(this.originalJSON.booking.paymail)),!o&&null!=t&&null!=t.booking&&null!=t.booking.paymail)for(let n in t.booking.paymail)null!=this.model.booking.paymail[n]&&(this.model.booking.paymail[n]=t.booking.paymail[n])}if(null!=this.originalJSON.booking["sondaggio-form"]){for(let n in this.originalJSON.booking["sondaggio-form"])this.sondaggioFormFields.push({name:n,value:this.originalJSON.booking["sondaggio-form"][n]});if(this.model.booking["sondaggio-form"]=JSON.parse(JSON.stringify(this.originalJSON.booking["sondaggio-form"])),!o&&null!=t&&null!=t.booking&&null!=t.booking["sondaggio-form"])for(let n in t.booking["sondaggio-form"])null!=this.model.booking["sondaggio-form"][n]&&(this.model.booking["sondaggio-form"][n]=t.booking["sondaggio-form"][n])}}if(null!=this.originalJSON["booking-day-use"]){for(let n in this.originalJSON["booking-day-use"])this.bookingDayUseFields.push({name:n,value:this.originalJSON["booking-day-use"][n]});if(this.model["booking-day-use"]=JSON.parse(JSON.stringify(this.originalJSON["booking-day-use"])),!o&&null!=t&&null!=t["booking-day-use"])for(let n in t["booking-day-use"])null!=this.model["booking-day-use"][n]&&(this.model["booking-day-use"][n]=t["booking-day-use"][n])}if(null!=this.originalJSON.interfaces){if(this.model.interfaces={},null!=this.originalJSON.interfaces["pagamento-form"]){for(let n in this.originalJSON.interfaces["pagamento-form"])this.pagamentoFormFields.push({name:n,value:this.originalJSON.interfaces["pagamento-form"][n]});if(this.model.interfaces["pagamento-form"]=JSON.parse(JSON.stringify(this.originalJSON.interfaces["pagamento-form"])),!o&&null!=t&&null!=t.interfaces&&null!=t.interfaces["pagamento-form"])for(let n in t.interfaces["pagamento-form"])null!=this.model.interfaces["pagamento-form"][n]&&(this.model.interfaces["pagamento-form"][n]=t.interfaces["pagamento-form"][n])}if(null!=this.originalJSON.interfaces["form-v1"]){for(let n in this.originalJSON.interfaces["form-v1"])this.formV1Fields.push({name:n,value:this.originalJSON.interfaces["form-v1"][n]});if(this.model.interfaces["form-v1"]=JSON.parse(JSON.stringify(this.originalJSON.interfaces["form-v1"])),!o&&null!=t&&null!=t.interfaces&&null!=t.interfaces["form-v1"])for(let n in t.interfaces["form-v1"])null!=this.model.interfaces["form-v1"][n]&&(this.model.interfaces["form-v1"][n]=t.interfaces["form-v1"][n])}}if(null!=this.originalJSON.myself){this.model.myself=JSON.parse(JSON.stringify(this.originalJSON.myself)),null!=this.model.myself.login&&delete this.model.myself.login;for(let n in this.model.myself)this.mySelfFields.push({name:n,value:this.model.myself[n]});if(!o&&null!=t&&null!=t.myself)for(let n in t.myself)null!=this.model.myself[n]&&(this.model.myself[n]=t.myself[n])}if(null!=this.originalJSON["myself-mobile"]){this.model["myself-mobile"]=JSON.parse(JSON.stringify(this.originalJSON["myself-mobile"]));for(let n in this.model["myself-mobile"])this.mySelfMobileFields.push({name:n,value:this.model["myself-mobile"][n]});if(!o&&null!=t&&null!=t["myself-mobile"])for(let n in t["myself-mobile"])null!=this.model["myself-mobile"][n]&&(this.model["myself-mobile"][n]=t["myself-mobile"][n])}if(null!=this.originalJSON.enumerations&&(this.model.enumerations={},null!=this.originalJSON.enumerations.mealPlanType)){for(let n in this.originalJSON.enumerations.mealPlanType)this.mealPlanTypeFields.push({name:n,value:this.originalJSON.enumerations.mealPlanType[n]});if(this.model.enumerations.mealPlanType=JSON.parse(JSON.stringify(this.originalJSON.enumerations.mealPlanType)),!o&&null!=t&&null!=t.enumerations&&null!=t.enumerations.mealPlanType)for(let n in t.enumerations.mealPlanType)null!=this.model.enumerations.mealPlanType[n]&&(this.model.enumerations.mealPlanType[n]=t.enumerations.mealPlanType[n])}if(null!=this.originalJSON.globals){this.model.globals={};let n=["required","conferma","annulla","si","no","previous","next","stampa","haiQualcheDomanda"];for(let a of n)this.genericFields.push({name:a,value:this.originalJSON.globals[a]}),this.model.globals[a]=this.originalJSON.globals[a],o||null!=t&&null!=t.globals&&null!=t.globals[a]&&(this.model.globals[a]=t.globals[a]);if(null!=this.originalJSON.globals.messages){this.model.globals.messages={};let a=["emailNonValida","inserireDati","prenotazioneCompletata","passwordNonValida","datiSalvati","fileNonValido","fileTroppoGrande"];for(let l of a)this.genericMessagesFields.push({name:l,value:this.originalJSON.globals.messages[l]}),this.model.globals.messages[l]=this.originalJSON.globals.messages[l],o||null!=t&&null!=t.globals&&null!=t.globals.messages&&null!=t.globals.messages[l]&&(this.model.globals.messages[l]=t.globals.messages[l])}}}this.filtro=null,this.sezione=null,this.onSearch(),this.initialized=!0,this.setIsLoading(!1)}save(){this.dialogRef.close(JSON.stringify(this.model))}onSearch(){if(this.filtro){let o=this.filtro.toLowerCase();this.bookingFieldsFiltered=this.bookingFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.booking[t.name].toString().toLowerCase().includes(o)),this.bookingDayUseFieldsFiltered=this.bookingDayUseFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model["booking-day-use"][t.name].toString().toLowerCase().includes(o)),this.pagamentoFormFieldsFiltered=this.pagamentoFormFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.interfaces["pagamento-form"][t.name].toString().toLowerCase().includes(o)),this.formV1FieldsFiltered=this.formV1Fields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.interfaces["form-v1"][t.name].toString().toLowerCase().includes(o)),this.myPageFieldsFiltered=this.myPageFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.booking["my-page"][t.name].toString().toLowerCase().includes(o)),this.paymailFieldsFiltered=this.paymailFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.booking.paymail[t.name].toString().toLowerCase().includes(o)),this.mySelfFieldsFiltered=this.mySelfFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.myself[t.name].toString().toLowerCase().includes(o)),this.mySelfMobileFieldsFiltered=this.mySelfMobileFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model["myself-mobile"][t.name].toString().toLowerCase().includes(o)),this.mealPlanTypeFieldsFiltered=this.mealPlanTypeFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.enumerations.mealPlanType[t.name].toString().toLowerCase().includes(o)),this.sondaggioFormFieldsFiltered=this.sondaggioFormFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.booking["sondaggio-form"][t.name].toString().toLowerCase().includes(o)),this.genericFieldsFiltered=this.genericFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.globals[t.name].toString().toLowerCase().includes(o)),this.genericMessagesFieldsFiltered=this.genericMessagesFields.filter(t=>t.value.toString().toLowerCase().includes(o)||this.model.globals.messages[t.name].toString().toLowerCase().includes(o))}else this.bookingFieldsFiltered=this.bookingFields,this.bookingDayUseFieldsFiltered=this.bookingDayUseFields,this.pagamentoFormFieldsFiltered=this.pagamentoFormFields,this.formV1FieldsFiltered=this.formV1Fields,this.myPageFieldsFiltered=this.myPageFields,this.paymailFieldsFiltered=this.paymailFields,this.mySelfFieldsFiltered=this.mySelfFields,this.mySelfMobileFieldsFiltered=this.mySelfMobileFields,this.mealPlanTypeFieldsFiltered=this.mealPlanTypeFields,this.sondaggioFormFieldsFiltered=this.sondaggioFormFields,this.genericFieldsFiltered=this.genericFields,this.genericMessagesFieldsFiltered=this.genericMessagesFields;null!=this.sezione&&(this.sezione!=c.YV.Booking&&(this.bookingFieldsFiltered=[],this.mealPlanTypeFieldsFiltered=[]),this.sezione!=c.YV.BookingDayUse&&(this.bookingDayUseFieldsFiltered=[]),this.sezione!=c.YV.PagamentoForm&&(this.pagamentoFormFieldsFiltered=[]),this.sezione!=c.YV.FormRichiesta&&(this.formV1FieldsFiltered=[]),this.sezione!=c.YV.MyPage&&(this.myPageFieldsFiltered=[]),this.sezione!=c.YV.Paymail&&(this.paymailFieldsFiltered=[]),this.sezione!=c.YV.MySelf&&(this.mySelfFieldsFiltered=[],this.mySelfMobileFieldsFiltered=[]),this.sezione!=c.YV.SondaggioForm&&(this.sondaggioFormFieldsFiltered=[]),this.sezione!=c.YV.Generiche&&(this.genericFieldsFiltered=[],this.genericMessagesFieldsFiltered=[]))}}ia.\u0275fac=function(o){return new(o||ia)(e.Y36(gc.eN))},ia.\u0275cmp=e.Xpm({type:ia,selectors:[["app-traduzioni-edit-modal"]],inputs:{lingua:"lingua",traduzioni:"traduzioni",dialogRef:"dialogRef"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[1,"content","pt-3","pr-4","pl-4"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"ngModel","placeholder","ngModelChange","input"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"buttons-div","d-flex","align-items-center","justify-content-end"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",1,"mr-3",3,"click"],[1,"mb-3"],[1,"ml-4"],["class","row mb-3 pl-4",3,"ngClass",4,"ngFor","ngForOf"],["class","row mb-3 pl-4 mt-n4",4,"ngFor","ngForOf"],[1,"row","mb-3","pl-4",3,"ngClass"],[1,"col-6","pt-2","font-weight-bold","text-small"],[1,"col-6","pt-2"],[1,"w-100","traduzioni-edit-input"],["autocompleteOff","","type","text","matInput","",3,"ngModel","ngModelChange"],[1,"col-12","mt-n2"],[1,"row","mb-3","pl-4","mt-n4"],[1,"border","rounded","p-3"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,qD,23,21,"ng-container",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.initialized))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,Yt.d,F.aO,_.Fj,_.JJ,_.On,Te.A,z.X$],styles:[".text-small[_ngcontent-%COMP%]{font-size:14px}  .traduzioni-edit-input .mat-form-field-infix{border-top:0!important}.content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:calc(100% - 60px);overflow:auto}.buttons-div[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:60px}"]});const PD=function(i,o){return{fadeInLeftInverted:i,fadeInLeft:o}};function kD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.info.emit())}),e.TgZ(2,"i",3),e._uU(3,"info"),e.qZA()(),e.TgZ(4,"span",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeAlert())}),e.TgZ(8,"i",3),e._uU(9,"clear"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.WLB(6,PD,t.closing,!t.closing)),e.xp6(1),e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(6,4,t._message)),e.xp6(2),e.Q6J("disableRipple",!0)}}class nt{set message(o){this._message=null!=o?o.toString():null,this.closing=!1,this.closed=!1}constructor(){this.info=new e.vpe,this.closing=!1,this.closed=!1}closeAlert(){this.closing=!0,setTimeout(()=>{this.closed=!0},500)}}nt.\u0275fac=function(o){return new(o||nt)},nt.\u0275cmp=e.Xpm({type:nt,selectors:[["app-alert"]],inputs:{message:"message"},outputs:{info:"info"},decls:1,vars:1,consts:[["class","alert-container text-nowrap",3,"ngClass",4,"ngIf"],[1,"alert-container","text-nowrap",3,"ngClass"],["mat-icon-button","",1,"info-button","align-middle","mr-2",3,"disableRipple","click"],[1,"material-icons-round","small-icon"],[1,"d-inline-block","align-middle","text-wrap"],["mat-icon-button","",1,"alert-close-button",3,"disableRipple","click"]],template:function(o,t){1&o&&e.YNc(0,kD,10,9,"div",0),2&o&&e.Q6J("ngIf",!!t._message&&!t.closed)},dependencies:[m.mk,m.O5,h.eB,z.X$],styles:[".alert-container[_ngcontent-%COMP%]{color:#856404;background-color:#fff3cd;position:relative;margin-bottom:1rem;border:1px solid #efc54d;border-radius:.25rem;padding:.75rem 4rem .75rem 1.25rem}.alert-close-button[_ngcontent-%COMP%]{position:absolute;z-index:2;width:20px;height:20px;line-height:20px;top:15px;right:10px}.info-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.small-icon[_ngcontent-%COMP%]{font-size:20px;line-height:20px}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate3d(-100%,0,0)}to{opacity:1;transform:none}}.fadeInLeft[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeInLeft;animation-duration:1s;animation-fill-mode:both;animation-timing-function:cubic-bezier(.075,.82,.165,1)}@keyframes _ngcontent-%COMP%_fadeInLeftInverted{0%{opacity:1;transform:none}to{opacity:0;transform:translate3d(-100%,0,0)}}.fadeInLeftInverted[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeInLeftInverted;animation-duration:1s;animation-fill-mode:both;animation-timing-function:cubic-bezier(.075,.82,.165,1) reverse}"]});var Sc=Y(23478);const SD=function(i,o){return{"pr-1":i,"pl-1":o}};function yD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.dialogRef.close(l))}),e.TgZ(2,"img",9),e.NdJ("error",function(){const l=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.onImageLoadError(l))}),e.ALo(3,"safeUrl"),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index;e.Q6J("ngClass",e.WLB(4,SD,n%2==0,n%2==1)),e.xp6(2),e.Q6J("src",e.lcZ(3,2,t),e.LSH)}}function JD(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",4),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",5),e.YNc(5,yD,4,7,"div",6),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"interfaces.image-library.selezionaImmagine")),e.xp6(3),e.Q6J("ngForOf",t.immagini)}}function ED(i,o){1&i&&(e.TgZ(0,"h4",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"interfaces.image-library.nessunaImmagine"),"\n"))}class oa{set _immagini(o){this.immagini=o,null!=this.immagini&&(this.immagini=this.immagini.filter(t=>!!t))}constructor(){}onImageLoadError(o){this.immagini.splice(o,1)}}function ND(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",5)(1,"input",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.annuncio.id=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("placeholder",e.lcZ(2,2,"sbm.configurazione.portali.configurazione-annuncio-airbnb.idAnnuncio"))("ngModel",t.annuncio.id)}}function OD(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function LD(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function DD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteAnnuncio())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.eliminaAnnuncio")))}function ID(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveAnnuncio())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,DD,3,3,"button",14),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali."+(t.annuncio.id?"modificaAnnuncio":"aggiungiAnnuncio"))),e.xp6(2),e.Q6J("ngIf",!!t.annuncio.id)}}oa.\u0275fac=function(o){return new(o||oa)},oa.\u0275cmp=e.Xpm({type:oa,selectors:[["app-image-library"]],inputs:{dialogRef:"dialogRef",_immagini:"_immagini"},decls:5,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],["class","border rounded p-3",4,"ngIf"],[1,"mb-3"],[1,"row"],["class","col-6 mt-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-6","mt-2",3,"ngClass"],[1,"image-container","border","rounded","p-3","w-100","d-flex","justify-content-center","align-items-center",3,"click"],[1,"mw-100","mh-100","rounded",3,"src","error"],[1,"border","rounded","p-3"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,JD,6,4,"ng-container",2),e.YNc(4,ED,3,3,"h4",3)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.immagini&&t.immagini.length>0),e.xp6(1),e.Q6J("ngIf",null==t.immagini||0==t.immagini.length))},dependencies:[m.mk,m.sg,m.O5,h.eB,F.aO,Sc.Q,z.X$],styles:[".image-container[_ngcontent-%COMP%]{height:300px;cursor:pointer}.image-container[_ngcontent-%COMP%]:hover{box-shadow:0 3px 5px -1px #0003,0 5px 8px #00000024,0 1px 14px #0000001f}"]});class na extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.annuncio=new d.u_3,this.initialized=!1,this.tipiAnnuncio=["apartment","condominium","serviced_apartment","casa_particular","bnb","lodge","minsu","ryokan","boutique_hotel","aparthotel","hostel","hotel","resort","heritage_hotel","bungalow","cabin","chalet","cottage","dome_house","earthhouse","farm_stay","house","houseboat","hut","lighthouse","tiny_house","townhouse","villa","cycladic_house","dammuso","shepherds_hut","trullo","pension","vacation_home"],this.tipiCameraAnnuncio=["private_room","shared_room","entire_home","hotel_room"]}ngOnInit(){this.setIsLoading(!0),this.apiService.getAnnuncioAirbnb(this.oidTipoCamera).subscribe(o=>{this.annuncio=o.data,this.initialized=!0,this.setIsLoading(!1)})}saveAnnuncio(){this.setIsLoading(!0),this.apiService.setAnnuncioAirbnb(this.oidTipoCamera,this.annuncio).subscribe(o=>{this.setIsLoading(!1),null!=o.errori&&0!=o.errori.length||!o.data.success?(null==o.errori||0==o.errori.length)&&this.showError("globals.messages.errore"):this.showInfo("globals.successoOperazione"),this.dialogRef.close(o.data.listingId)})}deleteAnnuncio(){this.showDialogConfirm("globals.effettuareOperazione").then(()=>{this.setIsLoading(!0),this.apiService.deleteAnnuncioAirbnb(this.oidTipoCamera).subscribe(o=>{this.setIsLoading(!1),o.data?this.showInfo("globals.successoOperazione").then(()=>this.dialogRef.close()):(null==o.errori||0==o.errori.length)&&this.showError("globals.messages.errore").then(()=>this.dialogRef.close())})},()=>{})}}na.\u0275fac=function(o){return new(o||na)(e.Y36(A.s),e.Y36(C.t))},na.\u0275cmp=e.Xpm({type:na,selectors:[["app-annuncio-airbnb-modal"]],inputs:{oidTipoCamera:"oidTipoCamera",dialogRef:"dialogRef"},features:[e.qOj],decls:34,vars:29,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","w-100",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"w-100"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","matInput","","type","number",3,"placeholder","ngModel","ngModelChange","blur"],["class","text-right",4,"ngIf"],["autocompleteOff","","matInput","","readonly","",3,"placeholder","ngModel","ngModelChange"],[3,"value"],[1,"text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,ND,3,4,"mat-form-field",2),e.TgZ(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.annuncio.tipo=a}),e.ALo(8,"translate"),e.YNc(9,OD,2,2,"mat-option",7),e.qZA()()(),e.TgZ(10,"div",4)(11,"mat-form-field",5)(12,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.annuncio.tipoCamera=a}),e.ALo(13,"translate"),e.YNc(14,LD,2,2,"mat-option",7),e.qZA()()()(),e.TgZ(15,"div",3)(16,"div",4)(17,"mat-form-field",5)(18,"input",8),e.NdJ("ngModelChange",function(a){return t.annuncio.letti=a})("blur",function(){return t.annuncio.letti=t.utility.clamp(t.annuncio.letti,0)}),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",4)(21,"mat-form-field",5)(22,"input",8),e.NdJ("ngModelChange",function(a){return t.annuncio.camereDaLetto=a})("blur",function(){return t.annuncio.camereDaLetto=t.utility.clamp(t.annuncio.camereDaLetto,0)}),e.ALo(23,"translate"),e.qZA()()()(),e.TgZ(24,"div",3)(25,"div",4)(26,"mat-form-field",5)(27,"input",8),e.NdJ("ngModelChange",function(a){return t.annuncio.bagni=a})("blur",function(){return t.annuncio.bagni=t.utility.clamp(t.annuncio.bagni,0)}),e.ALo(28,"translate"),e.qZA()()(),e.TgZ(29,"div",4)(30,"mat-form-field",5)(31,"input",8),e.NdJ("ngModelChange",function(a){return t.annuncio.numeroPersone=a})("blur",function(){return t.annuncio.numeroPersone=t.utility.clamp(t.annuncio.numeroPersone,1)}),e.ALo(32,"translate"),e.qZA()()()(),e.YNc(33,ID,5,4,"div",9)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",!!t.annuncio.id),e.xp6(4),e.Q6J("placeholder",e.lcZ(8,17,"sbm.configurazione.portali.configurazione-annuncio-airbnb.tipoAnnuncio"))("ngModel",t.annuncio.tipo),e.xp6(2),e.Q6J("ngForOf",t.tipiAnnuncio),e.xp6(3),e.Q6J("placeholder",e.lcZ(13,19,"sbm.configurazione.portali.configurazione-annuncio-airbnb.tipoCameraAnnuncio"))("ngModel",t.annuncio.tipoCamera),e.xp6(2),e.Q6J("ngForOf",t.tipiCameraAnnuncio),e.xp6(4),e.Q6J("placeholder",e.lcZ(19,21,"sbm.configurazione.portali.configurazione-annuncio-airbnb.numeroLetti"))("ngModel",t.annuncio.letti),e.xp6(4),e.Q6J("placeholder",e.lcZ(23,23,"sbm.configurazione.portali.configurazione-annuncio-airbnb.camereDaLetto"))("ngModel",t.annuncio.camereDaLetto),e.xp6(5),e.Q6J("placeholder",e.lcZ(28,25,"sbm.configurazione.portali.configurazione-annuncio-airbnb.numeroBagni"))("ngModel",t.annuncio.bagni),e.xp6(4),e.Q6J("placeholder",e.lcZ(32,27,"sbm.configurazione.portali.configurazione-annuncio-airbnb.numeroMassimoPersone"))("ngModel",t.annuncio.numeroPersone),e.xp6(2),e.Q6J("ngIf",t.initialized))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,_.Fj,_.wV,_.JJ,_.On,z.X$]});class aa extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.configurazione=new d.px1}ngOnInit(){this.setIsLoading(!0),this.apiService.getConfigurazioneTipoCameraAirbnb(this.oidTipoCamera).subscribe(o=>{null==o.errori||0==o.errori.length?this.configurazione=o.data:this.dialogRef.close(),this.setIsLoading(!1)})}save(){this.setIsLoading(!0),this.apiService.setConfigurazioneTipoCameraAirbnb(this.oidTipoCamera,this.configurazione).subscribe(o=>{this.setIsLoading(!1),o.data?this.showInfo("globals.successoOperazione").then(()=>this.dialogRef.close()):(null==o.errori||0==o.errori.length)&&this.showError("globals.messages.errore")})}}function QD(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",20)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.BQk()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.configurazione.portali.nessunaRisorsa")))}function UD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",21)(1,"mat-checkbox",22),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleRisorse():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionRisorse.hasValue()&&t.isAllSelectedRisorse())("indeterminate",t.selectionRisorse.hasValue()&&!t.isAllSelectedRisorse())}}function YD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",23)(1,"mat-checkbox",24),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionRisorse.toggle(r.codice):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionRisorse.isSelected(t.codice))}}function RD(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.codice")))}function FD(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codice)}}function HD(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.descrizione")))}function KD(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function GD(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.tipoCamera")))}function $D(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.tipoCamera?null:t.tipoCamera.nome)}}function BD(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.tipoCameraHotel")))}function VD(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.tipoCameraHotel?null:t.tipoCameraHotel.nome)}}function XD(i,o){1&i&&e._UZ(0,"mat-header-row",25)}function jD(i,o){1&i&&e._UZ(0,"mat-row")}function WD(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.importaRisorse(!1))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.importaRisorse())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",0==t.selectionRisorse.selected.length),e.xp6(1),e.Oqu(e.lcZ(3,4,"sbm.configurazione.portali.importaSelezionate")),e.xp6(2),e.Q6J("disabled",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(1),e.Oqu(e.lcZ(6,6,"sbm.configurazione.portali.importaTutte"))}}aa.\u0275fac=function(o){return new(o||aa)(e.Y36(A.s),e.Y36(C.t))},aa.\u0275cmp=e.Xpm({type:aa,selectors:[["app-configurazione-risorsa-airbnb-modal"]],inputs:{oidTipoCamera:"oidTipoCamera",dialogRef:"dialogRef"},features:[e.qOj],decls:98,vars:68,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange","blur"],["matSuffix",""],[1,"col-4"],[1,"text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.durataMinimaSoggiornoDefault=a})("blur",function(){return t.configurazione.durataMinimaSoggiornoDefault=t.utility.clamp(t.configurazione.durataMinimaSoggiornoDefault,0)}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.durataMassimaSoggiornoDefault=a})("blur",function(){return t.configurazione.durataMassimaSoggiornoDefault=t.utility.clamp(t.configurazione.durataMassimaSoggiornoDefault,0)}),e.ALo(11,"translate"),e.qZA()()()(),e.TgZ(12,"div",2)(13,"div",3)(14,"mat-form-field",4)(15,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.minimoOreAnticipoPrenotazione=a})("blur",function(){return t.configurazione.minimoOreAnticipoPrenotazione=t.utility.clamp(t.configurazione.minimoOreAnticipoPrenotazione,0)}),e.ALo(16,"translate"),e.qZA()()(),e.TgZ(17,"div",3)(18,"mat-form-field",4)(19,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.prezzoGiornalieroDefault=a})("blur",function(){return t.configurazione.prezzoGiornalieroDefault=t.utility.clamp(t.configurazione.prezzoGiornalieroDefault,0)}),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"span",6),e._uU(22,"\u20ac"),e.qZA()()()(),e.TgZ(23,"div",2)(24,"div",7)(25,"mat-form-field",4)(26,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.spesePulizia=a})("blur",function(){return t.configurazione.spesePulizia=t.utility.clamp(t.configurazione.spesePulizia,0)}),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"span",6),e._uU(29,"\u20ac"),e.qZA()()(),e.TgZ(30,"div",7)(31,"mat-form-field",4)(32,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.speseDeposito=a})("blur",function(){return t.configurazione.speseDeposito=t.utility.clamp(t.configurazione.speseDeposito,0)}),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"span",6),e._uU(35,"\u20ac"),e.qZA()()(),e.TgZ(36,"div",7)(37,"mat-form-field",4)(38,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.speseBiancheria=a})("blur",function(){return t.configurazione.speseBiancheria=t.utility.clamp(t.configurazione.speseBiancheria,0)}),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"span",6),e._uU(41,"\u20ac"),e.qZA()()()(),e.TgZ(42,"div",2)(43,"div",7)(44,"mat-form-field",4)(45,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.personeInclusePrezzo=a})("blur",function(){return t.configurazione.personeInclusePrezzo=t.utility.clamp(t.configurazione.personeInclusePrezzo,1)}),e.ALo(46,"translate"),e.qZA()()(),e.TgZ(47,"div",7)(48,"mat-form-field",4)(49,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.prezzoPersonaExtra=a})("blur",function(){return t.configurazione.prezzoPersonaExtra=t.utility.clamp(t.configurazione.prezzoPersonaExtra,0)}),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"span",6),e._uU(52,"\u20ac"),e.qZA()()(),e.TgZ(53,"div",7)(54,"mat-form-field",4)(55,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.prezzoWeekend=a})("blur",function(){return t.configurazione.prezzoWeekend=t.utility.clamp(t.configurazione.prezzoWeekend,0)}),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"span",6),e._uU(58,"\u20ac"),e.qZA()()()(),e.TgZ(59,"div",2)(60,"div",3)(61,"mat-form-field",4)(62,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.scontoMassimoGiorniPrimaCheckIn=a})("blur",function(){return t.configurazione.scontoMassimoGiorniPrimaCheckIn=t.utility.clamp(t.configurazione.scontoMassimoGiorniPrimaCheckIn,0,100)}),e.ALo(63,"translate"),e.qZA(),e.TgZ(64,"span",6),e._uU(65,"%"),e.qZA()()(),e.TgZ(66,"div",3)(67,"mat-form-field",4)(68,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.giorniMassimiScontoPrimaCheckIn=a})("blur",function(){return t.configurazione.giorniMassimiScontoPrimaCheckIn=t.utility.clamp(t.configurazione.giorniMassimiScontoPrimaCheckIn,0)}),e.ALo(69,"translate"),e.qZA()()()(),e.TgZ(70,"div",2)(71,"div",3)(72,"mat-form-field",4)(73,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.scontoMinimoGiorniPrimaCheckIn=a})("blur",function(){return t.configurazione.scontoMinimoGiorniPrimaCheckIn=t.utility.clamp(t.configurazione.scontoMinimoGiorniPrimaCheckIn,0,100)}),e.ALo(74,"translate"),e.qZA(),e.TgZ(75,"span",6),e._uU(76,"%"),e.qZA()()(),e.TgZ(77,"div",3)(78,"mat-form-field",4)(79,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.giorniMinimiScontoPrimaCheckIn=a})("blur",function(){return t.configurazione.giorniMinimiScontoPrimaCheckIn=t.utility.clamp(t.configurazione.giorniMinimiScontoPrimaCheckIn,0)}),e.ALo(80,"translate"),e.qZA()()()(),e.TgZ(81,"div",2)(82,"div",3)(83,"mat-form-field",4)(84,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.scontoPrenotazioniSettimanali=a})("blur",function(){return t.configurazione.scontoPrenotazioniSettimanali=t.utility.clamp(t.configurazione.scontoPrenotazioniSettimanali,0,100)}),e.ALo(85,"translate"),e.qZA(),e.TgZ(86,"span",6),e._uU(87,"%"),e.qZA()()(),e.TgZ(88,"div",3)(89,"mat-form-field",4)(90,"input",5),e.NdJ("ngModelChange",function(a){return t.configurazione.scontoPrenotazioniMensili=a})("blur",function(){return t.configurazione.scontoPrenotazioniMensili=t.utility.clamp(t.configurazione.scontoPrenotazioniMensili,0,100)}),e.ALo(91,"translate"),e.qZA(),e.TgZ(92,"span",6),e._uU(93,"%"),e.qZA()()()(),e.TgZ(94,"div",8)(95,"button",9),e.NdJ("click",function(){return t.save()}),e._uU(96),e.ALo(97,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.Q6J("placeholder",e.lcZ(7,34,"sbm.configurazione.portali.configurazione-risorsa-airbnb.durataMinimaSoggiornoDefault"))("ngModel",t.configurazione.durataMinimaSoggiornoDefault),e.xp6(4),e.Q6J("placeholder",e.lcZ(11,36,"sbm.configurazione.portali.configurazione-risorsa-airbnb.durataMassimaSoggiornoDefault"))("ngModel",t.configurazione.durataMassimaSoggiornoDefault),e.xp6(5),e.Q6J("placeholder",e.lcZ(16,38,"sbm.configurazione.portali.configurazione-risorsa-airbnb.minimoOreAnticipoPrenotazione"))("ngModel",t.configurazione.minimoOreAnticipoPrenotazione),e.xp6(4),e.Q6J("placeholder",e.lcZ(20,40,"sbm.configurazione.portali.configurazione-risorsa-airbnb.prezzoGiornalieroDefault"))("ngModel",t.configurazione.prezzoGiornalieroDefault),e.xp6(7),e.Q6J("placeholder",e.lcZ(27,42,"sbm.configurazione.portali.configurazione-risorsa-airbnb.spesePulizia"))("ngModel",t.configurazione.spesePulizia),e.xp6(6),e.Q6J("placeholder",e.lcZ(33,44,"sbm.configurazione.portali.configurazione-risorsa-airbnb.speseDeposito"))("ngModel",t.configurazione.speseDeposito),e.xp6(6),e.Q6J("placeholder",e.lcZ(39,46,"sbm.configurazione.portali.configurazione-risorsa-airbnb.speseBiancheria"))("ngModel",t.configurazione.speseBiancheria),e.xp6(7),e.Q6J("placeholder",e.lcZ(46,48,"sbm.configurazione.portali.configurazione-risorsa-airbnb.personeInclusePrezzo"))("ngModel",t.configurazione.personeInclusePrezzo),e.xp6(4),e.Q6J("placeholder",e.lcZ(50,50,"sbm.configurazione.portali.configurazione-risorsa-airbnb.prezzoPersonaExtra"))("ngModel",t.configurazione.prezzoPersonaExtra),e.xp6(6),e.Q6J("placeholder",e.lcZ(56,52,"sbm.configurazione.portali.configurazione-risorsa-airbnb.prezzoWeekend"))("ngModel",t.configurazione.prezzoWeekend),e.xp6(7),e.Q6J("placeholder",e.lcZ(63,54,"sbm.configurazione.portali.configurazione-risorsa-airbnb.scontoMassimoGiorniPrimaCheckIn"))("ngModel",t.configurazione.scontoMassimoGiorniPrimaCheckIn),e.xp6(6),e.Q6J("placeholder",e.lcZ(69,56,"sbm.configurazione.portali.configurazione-risorsa-airbnb.giorniMassimiScontoPrimaCheckIn"))("ngModel",t.configurazione.giorniMassimiScontoPrimaCheckIn),e.xp6(5),e.Q6J("placeholder",e.lcZ(74,58,"sbm.configurazione.portali.configurazione-risorsa-airbnb.scontoMinimoGiorniPrimaCheckIn"))("ngModel",t.configurazione.scontoMinimoGiorniPrimaCheckIn),e.xp6(6),e.Q6J("placeholder",e.lcZ(80,60,"sbm.configurazione.portali.configurazione-risorsa-airbnb.giorniMinimiScontoPrimaCheckIn"))("ngModel",t.configurazione.giorniMinimiScontoPrimaCheckIn),e.xp6(5),e.Q6J("placeholder",e.lcZ(85,62,"sbm.configurazione.portali.configurazione-risorsa-airbnb.scontoPrenotazioniSettimanali"))("ngModel",t.configurazione.scontoPrenotazioniSettimanali),e.xp6(6),e.Q6J("placeholder",e.lcZ(91,64,"sbm.configurazione.portali.configurazione-risorsa-airbnb.scontoPrenotazioniMensili"))("ngModel",t.configurazione.scontoPrenotazioniMensili),e.xp6(6),e.Oqu(e.lcZ(97,66,"globals.salva")))},dependencies:[w.X,h.eB,M.v_,M.nX,b.k0,F.aO,_.Fj,_.wV,_.JJ,_.On,z.X$]});class la extends f.H{constructor(o){super(),this.apiService=o,this.displayedColumns=["select","codice","descrizione","tipoCamera","tipoCameraHotel"],this.selectionRisorse=new me.Ov(!0,[]),this.initialized=!1}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getRisorsePortale(this.oidPortale).subscribe(o=>{this.dataSource=new s.r4(o.data.risorse||[]),this.dataSource.paginator=this.paginator,this.initialized=!0,this.setIsLoading(!1)})}importaRisorse(o=!0){this.setIsLoading(!0);let t=new d.P4G(this.oidPortale);t.codiciRisorse=o?null:this.selectionRisorse.selected,this.apiService.importaRisorse(t).subscribe(n=>{this.setIsLoading(!1),this.showInfo("globals.operazioneCompletata").then(()=>{this.dialogRef.close(n.data)})})}resetSelectedRisorse(){this.selectionRisorse=new me.Ov(!0,[])}isAllSelectedRisorse(){return this.selectionRisorse.selected.length==(this.paginator.hasNextPage()?this.paginator.pageSize:this.dataSource.data.length%this.paginator.pageSize)}masterToggleRisorse(){this.isAllSelectedRisorse()?this.selectionRisorse.clear():this.dataSource.data.slice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize).forEach(o=>this.selectionRisorse.select(o.codice))}}function eI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}la.\u0275fac=function(o){return new(o||la)(e.Y36(A.s))},la.\u0275cmp=e.Xpm({type:la,selectors:[["app-risorse-modal"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{oidPortale:"oidPortale",dialogRef:"dialogRef"},features:[e.qOj],decls:27,vars:10,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-edit",4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","codice"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","descrizione"],["matColumnDef","tipoCamera"],["matColumnDef","tipoCameraHotel"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["class","mt-3 text-right",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-th-edit"],["color","primary",1,"d-inline-block","mt-2",3,"checked","indeterminate","change"],[1,"mat-td-edit"],["color","primary",1,"d-inline-block","mt-2",3,"checked","click","change"],[1,"mat-table-header"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,QD,5,3,"ng-container",2),e.TgZ(4,"div",3)(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,UD,2,2,"mat-header-cell",7),e.YNc(9,YD,2,1,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,RD,3,3,"mat-header-cell",10),e.YNc(12,FD,2,1,"mat-cell",11),e.BQk(),e.ynx(13,12),e.YNc(14,HD,3,3,"mat-header-cell",10),e.YNc(15,KD,2,1,"mat-cell",11),e.BQk(),e.ynx(16,13),e.YNc(17,GD,3,3,"mat-header-cell",10),e.YNc(18,$D,2,1,"mat-cell",11),e.BQk(),e.ynx(19,14),e.YNc(20,BD,3,3,"mat-header-cell",10),e.YNc(21,VD,2,1,"mat-cell",11),e.BQk(),e.YNc(22,XD,1,0,"mat-header-row",15),e.YNc(23,jD,1,0,"mat-row",16),e.qZA()(),e.TgZ(24,"div",17)(25,"mat-paginator",18),e.NdJ("page",function(){return t.resetSelectedRisorse()}),e.qZA()()(),e.YNc(26,WD,7,8,"div",19)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.dataSource&&(null==t.dataSource.data||0==t.dataSource.data.length)),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",t.initialized))},dependencies:[m.O5,V.FC,h.eB,F.aO,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,z.X$],styles:[".mat-column-select[_ngcontent-%COMP%]{width:80px!important;max-width:80px!important;min-width:80px!important}"]});class ra extends f.H{constructor(o){super(),this.apiService=o}save(){this.setIsLoading(!0),this.apiService.setCalendarioTipoCameraOTA(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.portali.calendarioSalvato").then(()=>{this.dialogRef.close(!0)})})}delete(){this.showDialogConfirm("sbm.configurazione.portali.eliminareCalendario").then(o=>{this.modelEdit.isDeleted=!0,this.setIsLoading(!0),this.apiService.setCalendarioTipoCameraOTA(this.modelEdit).subscribe(()=>{this.dialogRef.close(!0)})},o=>{})}}function tI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",3),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",20)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.portali.nessunCalendario")))}function iI(i,o){1&i&&e._UZ(0,"mat-header-cell")}function oI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",21)(1,"button",22,23),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(3,"i",24),e._uU(4,"more_vert"),e.qZA()(),e.TgZ(5,"mat-menu",null,25)(7,"button",26),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.MAs(2),T=e.oxw();return a.stopPropagation(),T.edit(r),e.KtG(p.closeMenu())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",27),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.MAs(2),T=e.oxw();return a.stopPropagation(),T.utilityService.openUrlInNewTab(r.url),e.KtG(p.closeMenu())}),e._uU(11),e.ALo(12,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.MAs(6);e.xp6(1),e.Q6J("matMenuTriggerFor",n),e.xp6(7),e.Oqu(e.lcZ(9,4,"sbm.configurazione.portali.modifica")),e.xp6(2),e.Q6J("disabled",!t.url),e.xp6(1),e.Oqu(e.lcZ(12,6,"sbm.configurazione.portali.apri"))}}function nI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTACalendar.proprieta.nome"),""))}function aI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function lI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTACalendar.proprieta.guid"),""))}function rI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.guid)}}function cI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTACalendar.proprieta.url"),""))}function sI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.url)}}function pI(i,o){1&i&&e._UZ(0,"mat-header-cell",28)}function dI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",29)(1,"button",30),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",31),e._uU(3,"delete"),e.qZA()()()}}function mI(i,o){1&i&&e._UZ(0,"mat-header-row",32)}function _I(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",33),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utilityService.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}ra.\u0275fac=function(o){return new(o||ra)(e.Y36(A.s))},ra.\u0275cmp=e.Xpm({type:ra,selectors:[["app-calendari-edit"]],inputs:{dialogRef:"dialogRef",modelEdit:"modelEdit"},features:[e.qOj],decls:19,vars:23,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"placeholder","url","showOnlyCopyButton","urlDisabled","urlChange"],["color","primary",1,"d-inline-block","mt-2",3,"ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.nome=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.guid=a}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"app-url",4),e.NdJ("urlChange",function(a){return t.modelEdit.url=a}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.isClosed=a}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",6)(15,"button",7),e.NdJ("click",function(){return t.save()}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,eI,3,3,"button",8),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.s9C("placeholder",e.lcZ(5,13,"bo.tipoCameraOTACalendar.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.nome),e.xp6(3),e.s9C("placeholder",e.lcZ(8,15,"bo.tipoCameraOTACalendar.proprieta.guid")),e.Q6J("ngModel",t.modelEdit.guid),e.xp6(2),e.Q6J("placeholder",e.lcZ(10,17,"bo.tipoCameraOTACalendar.proprieta.url"))("url",t.modelEdit.url)("showOnlyCopyButton",!0)("urlDisabled",!1),e.xp6(2),e.Q6J("ngModel",t.modelEdit.isClosed),e.xp6(1),e.hij(" ",e.lcZ(13,19,"bo.tipoCameraOTACalendar.proprieta.isClosed"),"\n"),e.xp6(4),e.Oqu(e.lcZ(17,21,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.modelEdit&&null!=t.modelEdit.oid&&t.modelEdit.oid>0))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,F.aO,_.Fj,_.JJ,_.On,Be,z.X$]});class ca extends f.H{set _risorsaOid(o){null!=o&&o>0&&(this.risorsaOid=o,this.download())}constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utilityService=n,this.displayedColumns=["edit","nome","guid","url","delete"]}download(){this.setIsLoading(!0),this.apiService.getCalendariTipoCameraOTA(this.risorsaOid).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){let o=new v.C8i(-1);o.tipoCameraOTA=new v.OR4(this.risorsaOid),o.guid=zc(),this.openEditModal(o)}edit(o){this.openEditModal(Object.assign({},o))}delete(o){this.showDialogConfirm("sbm.configurazione.portali.eliminareCalendario").then(t=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setCalendarioTipoCameraOTA(o).subscribe(()=>{this.download()})},t=>{})}openEditModal(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(ra,t),a=n.componentInstance;a.modelEdit=o,a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&this.download()})}}function uI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.isSelected=a)}),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngModel",t.isSelected),e.xp6(1),e.Oqu(t.componenteXVariazione.nome)}}function gI(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"mat-checkbox",4),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.selectDeselectAll())}),e.qZA(),e.TgZ(3,"h5",5),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.YNc(6,uI,3,2,"div",6),e.TgZ(7,"div",7)(8,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("checked",t.isAllSelected())("indeterminate",t.isSomeSelected()&&!t.isAllSelected()),e.xp6(2),e.Oqu(e.lcZ(5,6,"sbm.configurazione.portali.selezionaComponenti")),e.xp6(2),e.Q6J("ngForOf",t.rq),e.xp6(2),e.Q6J("disabled",!t.isSomeSelected()),e.xp6(1),e.Oqu(e.lcZ(10,8,"globals.salva"))}}ca.\u0275fac=function(o){return new(o||ca)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},ca.\u0275cmp=e.Xpm({type:ca,selectors:[["app-calendari"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{_risorsaOid:"_risorsaOid"},features:[e.qOj],decls:26,vars:8,consts:[[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","guid"],["matColumnDef","url"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-td-edit"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor","click"],["menuTrigger","matMenuTrigger"],[1,"material-icons","mat-table-edit-row"],["appMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.YNc(0,tI,8,3,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"i",3),e._uU(4,"add"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,iI,1,0,"mat-header-cell",7),e.YNc(9,oI,13,8,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,nI,3,3,"mat-header-cell",7),e.YNc(12,aI,2,1,"mat-cell",10),e.BQk(),e.ynx(13,11),e.YNc(14,lI,3,3,"mat-header-cell",7),e.YNc(15,rI,2,1,"mat-cell",10),e.BQk(),e.ynx(16,12),e.YNc(17,cI,3,3,"mat-header-cell",7),e.YNc(18,sI,2,1,"mat-cell",10),e.BQk(),e.ynx(19,13),e.YNc(20,pI,1,0,"mat-header-cell",14),e.YNc(21,dI,4,0,"mat-cell",15),e.BQk(),e.YNc(22,mI,1,0,"mat-header-row",16),e.YNc(23,_I,1,1,"mat-row",17),e.qZA()(),e.TgZ(24,"div",18),e._UZ(25,"mat-paginator",19),e.qZA()()),2&o&&(e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize))},dependencies:[m.O5,h.eB,Ie.W0,Ie.tN,Ie.D8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,z.X$]});class sa extends f.H{constructor(o){super(),this.apiService=o,this.rq=[],this.componentiDaEliminare=[],this.initialized=!1}ngOnInit(){this.setIsLoading(!0),this.apiService.getComponentiXVariazione().subscribe(o=>{for(let t of o.data){let n=new v._0;n.tipoCameraOTA=new v.OR4(this.oidRisorsa),n.componenteXVariazione=t,n.isAttiva=!0;let a=this.componenti.filter(l=>null!=l.componenteXVariazione&&l.componenteXVariazione.oid==t.oid);a.length>0&&(n.oid=a[0].oid,n.isAttiva=a[0].isAttiva,n.isSelected=a[0].isAttiva,n.toDelete=a[0].isAttiva,a.length>1&&(this.componentiDaEliminare=this.componentiDaEliminare.concat(a.slice(1,a.length)))),this.rq.push(n)}this.initialized=!0,this.setIsLoading(!1)})}save(){this.setIsLoading(!0),this.componentiDaEliminare.forEach(t=>t.isDeleted=!0),this.rq.filter(t=>t.oid>0&&!t.isSelected&&t.toDelete).forEach(t=>t.isDeleted=!0),this.rq.filter(t=>t.oid>0&&t.isSelected&&!t.isAttiva).forEach(t=>t.isAttiva=!0);let o=this.rq.filter(t=>t.isSelected||t.oid>0).concat(this.componentiDaEliminare);this.apiService.setComponentiTipoCameraOTA(o).subscribe(()=>{this.setIsLoading(!1),this.dialogRef.close(!0)})}isAllSelected(){return this.rq.every(o=>o.isSelected)}isSomeSelected(){return this.rq.some(o=>o.isSelected)}selectDeselectAll(){this.isAllSelected()?this.rq.forEach(o=>o.isSelected=!1):this.rq.forEach(o=>o.isSelected=!0)}}function hI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}sa.\u0275fac=function(o){return new(o||sa)(e.Y36(A.s))},sa.\u0275cmp=e.Xpm({type:sa,selectors:[["app-componenti-add"]],inputs:{oidRisorsa:"oidRisorsa",componenti:"componenti",dialogRef:"dialogRef"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[1,"mb-2"],["color","primary",1,"d-inline-block","selectAll",3,"checked","indeterminate","click"],[1,"mb-0","ml-2","d-inline-block"],[4,"ngFor","ngForOf"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],["color","primary",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,gI,11,10,"ng-container",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.initialized))},dependencies:[m.sg,m.O5,V.FC,h.eB,F.aO,_.JJ,_.On,z.X$],styles:[".selectAll[_ngcontent-%COMP%]{position:relative;top:2px}"]});class pa extends f.H{constructor(o){super(),this.apiService=o,this.backEvent=new e.vpe}save(){this.setIsLoading(!0),this.apiService.setComponenteTipoCameraOTA(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.portali.componenteSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione.portali.eliminareComponente").then(t=>{null!=o&&(this.modelEdit=o),this.modelEdit.isDeleted=!0,this.setIsLoading(!0),this.apiService.setComponenteTipoCameraOTA(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function fI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",3),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",22)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.portali.nessunComponente")))}function CI(i,o){1&i&&e._UZ(0,"mat-header-cell")}function bI(i,o){1&i&&(e.TgZ(0,"mat-cell",23)(1,"button",24)(2,"i",25),e._uU(3,"edit"),e.qZA()()())}function vI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTAXComponente.proprieta.componenteXVariazione"),""))}function TI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.componenteXVariazione?t.componenteXVariazione.nome:""," ")}}function xI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTAXComponente.proprieta.isAttiva"),""))}function ZI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",26),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttiva)("disabled",!0)}}function AI(i,o){1&i&&e._UZ(0,"mat-header-cell",27)}function wI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",28)(1,"button",29),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(28);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",30),e._uU(3,"delete"),e.qZA()()()}}function zI(i,o){1&i&&e._UZ(0,"mat-header-row",31)}function MI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",32),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}pa.\u0275fac=function(o){return new(o||pa)(e.Y36(A.s))},pa.\u0275cmp=e.Xpm({type:pa,selectors:[["app-componenti-edit"]],inputs:{modelEdit:"modelEdit"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:16,vars:16,consts:[[1,"row"],[1,"col-4"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",1,"d-inline-block","mt-3",3,"ngModel","ngModelChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-view-select",2),e.NdJ("valueChange",function(a){return t.modelEdit.componenteXVariazione=a}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",1)(5,"mat-checkbox",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.isAttiva=a}),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",4)(9,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,hI,3,3,"button",6),e.TgZ(13,"button",7),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(14),e.ALo(15,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("dataLoader",t.apiService.getComponentiXVariazioneViewSelect())("value",t.modelEdit.componenteXVariazione)("placeholder",e.lcZ(3,8,"bo.tipoCameraOTAXComponente.proprieta.componenteXVariazione")),e.xp6(3),e.Q6J("ngModel",t.modelEdit.isAttiva),e.xp6(1),e.hij(" ",e.lcZ(7,10,"bo.tipoCameraOTAXComponente.proprieta.isAttiva")," "),e.xp6(4),e.Oqu(e.lcZ(11,12,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.modelEdit&&null!=t.modelEdit.oid&&t.modelEdit.oid>0),e.xp6(2),e.Oqu(e.lcZ(15,14,"globals.annulla")))},dependencies:[m.O5,V.FC,h.eB,_.JJ,_.On,ne.d,z.X$]});class da extends f.H{set _risorsaOid(o){null!=o&&o>0&&(this.risorsaOid=o,this.download())}constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.componente=new v._0,this.showTable=!0,this.displayedColumns=["edit","componenteXVariazione","isAttiva","delete"]}download(){this.setIsLoading(!0),this.apiService.getComponentiTipoCameraOTA(this.risorsaOid).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.showTable=!0,this.setIsLoading(!1)})}add(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh";let t=this.showModalDialog(sa,o),n=t.componentInstance;n.oidRisorsa=this.risorsaOid,n.componenti=this.dataSource.data,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.download()})}edit(o){this.componente=Object.assign({},o),this.showTable=!1}deleteAll(){this.showDialogConfirm("globals.effettuareOperazione").then(o=>{this.setIsLoading(!0),this.dataSource.data.forEach(t=>t.isDeleted=!0),this.apiService.setComponentiTipoCameraOTA(this.dataSource.data).subscribe(()=>{this.download()})},o=>{})}}function qI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"app-view-select",15),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.portale=a)})("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.portaleOid=a.oid)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",2)(5,"app-view-select",10),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateGetTipiCameraOtaRQ())}),e.ALo(6,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(t.getPortaliRQ,!1))("value",t.portale)("placeholder",e.lcZ(3,8,"globals.portale")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraOTAViewSelect(t.portaleOid,null,!1))("value",t.modelEdit.tipoCameraOTA)("placeholder",e.lcZ(6,10,"bo.tipoCameraOTAUpgrade.proprieta.tipoCameraOTA"))("forceDownload",!0)("required",!0)}}function PI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}da.\u0275fac=function(o){return new(o||da)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},da.\u0275cmp=e.Xpm({type:da,selectors:[["app-componenti"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{_risorsaOid:"_risorsaOid"},features:[e.qOj],decls:29,vars:13,consts:[[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","componenteXVariazione"],[4,"matCellDef"],["matColumnDef","isAttiva"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],[3,"modelEdit","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary",3,"checked","disabled"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.YNc(0,fI,8,3,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"i",3),e._uU(4,"add"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,CI,1,0,"mat-header-cell",7),e.YNc(9,bI,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,vI,3,3,"mat-header-cell",7),e.YNc(12,TI,2,1,"mat-cell",10),e.BQk(),e.ynx(13,11),e.YNc(14,xI,3,3,"mat-header-cell",7),e.YNc(15,ZI,2,2,"mat-cell",10),e.BQk(),e.ynx(16,12),e.YNc(17,AI,1,0,"mat-header-cell",13),e.YNc(18,wI,4,0,"mat-cell",14),e.BQk(),e.YNc(19,zI,1,0,"mat-header-row",15),e.YNc(20,MI,1,1,"mat-row",16),e.qZA()(),e.TgZ(21,"div",17),e._UZ(22,"mat-paginator",18),e.qZA(),e.TgZ(23,"button",19),e.NdJ("click",function(){return t.deleteAll()}),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",1)(27,"app-componenti-edit",20,21),e.NdJ("backEvent",function(){return t.download()}),e.qZA()()),2&o&&(e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(2),e.Oqu(e.lcZ(25,11,"globals.eliminaTutte")),e.xp6(2),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("modelEdit",t.componente))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,pa,z.X$]});class ma extends f.H{set _modelEdit(o){this.modelEdit=o,this.init()}constructor(o){super(),this.apiService=o,this.portaleOid=-1,this.backEvent=new e.vpe,this.getPortaliRQ=d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number),this.initialized=!1}ngOnInit(){this.portaleOidReceived=this.portaleOid>0,this.portaleOidReceived||this.apiService.getPortaliFilter(this.getPortaliRQ).subscribe(o=>{o.data.length>0&&(this.portaleDefault=o.data[0])}),this.initialized=!0}init(){this.initialized&&(this.portaleOidReceived||(null!=this.modelEdit.tipoCameraOTA&&null!=this.modelEdit.tipoCameraOTA.portaleXAlbergo?this.portale=this.modelEdit.tipoCameraOTA.portaleXAlbergo:this.portale=this.portaleDefault,this.portaleOid=this.portale.oid),this.updateGetTipiCameraOtaRQ())}save(){null!=this.modelEdit.tipoCameraOTA&&this.modelEdit.tipoCameraOTA.oid>0&&null!=this.modelEdit.tipoCameraOTAVendita&&this.modelEdit.tipoCameraOTAVendita.oid>0&&this.modelEdit.dal&&this.modelEdit.al?(this.setIsLoading(!0),this.modelEdit.dal=this.getDate(this.modelEdit.dal),this.modelEdit.al=this.getDate(this.modelEdit.al),this.apiService.setUpgradeGratuitoTipoCameraOTA(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.portali.upgradeGratuitoSalvato").then(()=>{this.backEvent.emit()})})):this.showError("globals.messages.inserireDati")}delete(o){this.showDialogConfirm("sbm.configurazione.portali.eliminareUpgradeGratuito").then(t=>{null!=o&&(this.modelEdit=o),this.modelEdit.isDeleted=!0,this.setIsLoading(!0),this.apiService.setUpgradeGratuitoTipoCameraOTA(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}updateGetTipiCameraOtaRQ(){null!=this.modelEdit.tipoCameraOTA?this.getTipiCameraOtaRQ=d.k$g.fromFilter("oid",c.Hp.NotEqual,this.modelEdit.tipoCameraOTA.oid.toString(),c.NM.Number):this.getTipiCameraOtaRQ=null}}function kI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",3),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",28)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.portali.nessunUpgradeGratuito")))}function SI(i,o){1&i&&e._UZ(0,"mat-header-cell")}function yI(i,o){1&i&&(e.TgZ(0,"mat-cell",29)(1,"button",30)(2,"i",31),e._uU(3,"edit"),e.qZA()()())}function JI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.portale")))}function EI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=(null==t.tipoCameraOTA?null:t.tipoCameraOTA.portaleXAlbergo)?t.tipoCameraOTA.portaleXAlbergo.nome:"")}}function NI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTAUpgrade.proprieta.tipoCameraOTA")))}function OI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCameraOTA?t.tipoCameraOTA.descrizione:"")}}function LI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTAUpgrade.proprieta.dal")))}function DI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dal,"dd/MM/yyyy"))}}function II(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTAUpgrade.proprieta.al")))}function QI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.al,"dd/MM/yyyy"))}}function UI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTAUpgrade.proprieta.disponibiliMinime")))}function YI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.disponibiliMinime)}}function RI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTAUpgrade.proprieta.durataMinimaSoggiorno")))}function FI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMinimaSoggiorno)}}function HI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTAUpgrade.proprieta.giorniAnticipoSoggiorno")))}function KI(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.giorniAnticipoSoggiorno)}}function GI(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTAUpgrade.proprieta.tipoCameraOTAVendita")))}function $I(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCameraOTAVendita?t.tipoCameraOTAVendita.descrizione:"")}}function BI(i,o){1&i&&e._UZ(0,"mat-header-cell",32)}function VI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",33)(1,"button",34),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(43);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",35),e._uU(3,"delete"),e.qZA()()()}}function XI(i,o){1&i&&e._UZ(0,"mat-header-row",36)}function jI(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",37),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}ma.\u0275fac=function(o){return new(o||ma)(e.Y36(A.s))},ma.\u0275cmp=e.Xpm({type:ma,selectors:[["app-upgrade-gratuiti-edit"]],inputs:{portaleOid:"portaleOid",_modelEdit:"_modelEdit"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:39,vars:39,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","","required","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],[1,"col-4"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","descrizione",3,"dataLoader","value","placeholder","forceDownload","required","valueChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.YNc(0,qI,7,12,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",4),e.NdJ("ngModelChange",function(a){return t.modelEdit.dal=a}),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"mat-datepicker-toggle",5)(7,"mat-datepicker",null,6),e.qZA()(),e.TgZ(9,"div",2)(10,"mat-form-field",3)(11,"input",4),e.NdJ("ngModelChange",function(a){return t.modelEdit.al=a}),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"mat-datepicker-toggle",5)(14,"mat-datepicker",null,7),e.qZA()()(),e.TgZ(16,"div",1)(17,"div",8)(18,"mat-form-field",3)(19,"input",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.disponibiliMinime=a}),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"div",8)(22,"mat-form-field",3)(23,"input",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.durataMinimaSoggiorno=a}),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"div",8)(26,"mat-form-field",3)(27,"input",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.giorniAnticipoSoggiorno=a}),e.ALo(28,"translate"),e.qZA()()()(),e.TgZ(29,"app-view-select",10),e.NdJ("valueChange",function(a){return t.modelEdit.tipoCameraOTAVendita=a}),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"div",11)(32,"button",12),e.NdJ("click",function(){return t.save()}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.YNc(35,PI,3,3,"button",13),e.TgZ(36,"button",14),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(37),e.ALo(38,"translate"),e.qZA()()),2&o){const n=e.MAs(8),a=e.MAs(15);e.Q6J("ngIf",!t.portaleOidReceived),e.xp6(4),e.s9C("placeholder",e.lcZ(5,23,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.modelEdit.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(12,25,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.modelEdit.al),e.xp6(2),e.Q6J("for",a),e.xp6(6),e.s9C("placeholder",e.lcZ(20,27,"bo.tipoCameraOTAUpgrade.proprieta.disponibiliMinime")),e.Q6J("ngModel",t.modelEdit.disponibiliMinime),e.xp6(4),e.s9C("placeholder",e.lcZ(24,29,"bo.tipoCameraOTAUpgrade.proprieta.durataMinimaSoggiorno")),e.Q6J("ngModel",t.modelEdit.durataMinimaSoggiorno),e.xp6(4),e.s9C("placeholder",e.lcZ(28,31,"bo.tipoCameraOTAUpgrade.proprieta.giorniAnticipoSoggiorno")),e.Q6J("ngModel",t.modelEdit.giorniAnticipoSoggiorno),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTipiCameraOTAViewSelect(t.portaleOid,t.getTipiCameraOtaRQ,!1))("value",t.modelEdit.tipoCameraOTAVendita)("placeholder",e.lcZ(30,33,"bo.tipoCameraOTAUpgrade.proprieta.tipoCameraOTAVendita"))("forceDownload",!0)("required",!0),e.xp6(4),e.Oqu(e.lcZ(34,35,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.modelEdit&&null!=t.modelEdit.oid&&t.modelEdit.oid>0),e.xp6(2),e.Oqu(e.lcZ(38,37,"globals.annulla"))}},dependencies:[m.O5,w.X,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,_.Fj,_.wV,_.JJ,_.Q7,_.On,ne.d,z.X$]});const WI=function(i){return{"edit-container":i}};class wi extends f.H{set _risorsaOid(o){null!=o&&o>0&&(this.risorsaOid=o,this.download())}constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.upgradeGratuito=new v.uno,this.showTable=!0}ngOnInit(){this.displayedColumns=["edit"],(null==this.risorsaOid||this.risorsaOid<=0)&&(this.displayedColumns=this.displayedColumns.concat(["portale","tipoCameraOTA"]),this.download()),this.displayedColumns=this.displayedColumns.concat(["dal","al","disponibiliMinime","durataMinimaSoggiorno","giorniAnticipoSoggiorno","tipoCameraOTAVendita","delete"])}download(){this.setIsLoading(!0),(this.risorsaOid>0?this.apiService.getUpgradeGratuitiTipoCameraOTA(this.risorsaOid):this.apiService.getUpgradeGratuiti()).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.showTable=!0,this.setIsLoading(!1)})}add(){let o=new v.uno(-1);this.risorsaOid>0&&(o.tipoCameraOTA=new v.OR4(this.risorsaOid)),this.edit(o)}edit(o){this.upgradeGratuito=Object.assign({},o),this.showTable=!1}}wi.\u0275fac=function(o){return new(o||wi)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},wi.\u0275cmp=e.Xpm({type:wi,selectors:[["app-upgrade-gratuiti"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{_risorsaOid:"_risorsaOid",portaleOid:"portaleOid"},features:[e.qOj],decls:44,vars:14,consts:[[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","portale"],[4,"matCellDef"],["matColumnDef","tipoCameraOTA"],["matColumnDef","dal"],["matColumnDef","al"],["matColumnDef","disponibiliMinime"],["matColumnDef","durataMinimaSoggiorno"],["matColumnDef","giorniAnticipoSoggiorno"],["matColumnDef","tipoCameraOTAVendita"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[3,"hidden","ngClass"],[3,"_modelEdit","portaleOid","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.YNc(0,kI,8,3,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"i",3),e._uU(4,"add"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,SI,1,0,"mat-header-cell",7),e.YNc(9,yI,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,JI,3,3,"mat-header-cell",7),e.YNc(12,EI,2,1,"mat-cell",10),e.BQk(),e.ynx(13,11),e.YNc(14,NI,3,3,"mat-header-cell",7),e.YNc(15,OI,2,1,"mat-cell",10),e.BQk(),e.ynx(16,12),e.YNc(17,LI,3,3,"mat-header-cell",7),e.YNc(18,DI,3,4,"mat-cell",10),e.BQk(),e.ynx(19,13),e.YNc(20,II,3,3,"mat-header-cell",7),e.YNc(21,QI,3,4,"mat-cell",10),e.BQk(),e.ynx(22,14),e.YNc(23,UI,3,3,"mat-header-cell",7),e.YNc(24,YI,2,1,"mat-cell",10),e.BQk(),e.ynx(25,15),e.YNc(26,RI,3,3,"mat-header-cell",7),e.YNc(27,FI,2,1,"mat-cell",10),e.BQk(),e.ynx(28,16),e.YNc(29,HI,3,3,"mat-header-cell",7),e.YNc(30,KI,2,1,"mat-cell",10),e.BQk(),e.ynx(31,17),e.YNc(32,GI,3,3,"mat-header-cell",7),e.YNc(33,$I,2,1,"mat-cell",10),e.BQk(),e.ynx(34,18),e.YNc(35,BI,1,0,"mat-header-cell",19),e.YNc(36,VI,4,0,"mat-cell",20),e.BQk(),e.YNc(37,XI,1,0,"mat-header-row",21),e.YNc(38,jI,1,1,"mat-row",22),e.qZA()(),e.TgZ(39,"div",23),e._UZ(40,"mat-paginator",24),e.qZA()(),e.TgZ(41,"div",25)(42,"app-upgrade-gratuiti-edit",26,27),e.NdJ("backEvent",function(){return t.download()}),e.qZA()()),2&o&&(e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable)("ngClass",e.VKq(12,WI,null==t.portaleOid||t.portaleOid<=0)),e.xp6(1),e.Q6J("_modelEdit",t.upgradeGratuito)("portaleOid",t.portaleOid))},dependencies:[m.mk,m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,ma,m.uU,z.X$]});const eQ=["panel1"],tQ=["panel2"],iQ=["panel3"],oQ=["panel4"],nQ=["panel6"],aQ=["panel7"],lQ=["panel8"],rQ=["panel9"];function cQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",3),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",29)(5,"h4",30),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.portali.nessunaRisorsa")))}function sQ(i,o){1&i&&e._UZ(0,"mat-header-cell")}function pQ(i,o){1&i&&(e.TgZ(0,"mat-cell",31)(1,"button",32)(2,"i",33),e._uU(3,"edit"),e.qZA()()())}function dQ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.oid"),""))}function mQ(i,o){1&i&&(e.TgZ(0,"i",35),e.ALo(1,"translate"),e._uU(2,"warning"),e.qZA()),2&i&&e.Q6J("matTooltip",e.lcZ(1,1,"sbm.configurazione.portali.erroreConfigurazioneMaster"))}function _Q(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"span"),e._uU(2),e.qZA(),e.YNc(3,mQ,3,3,"i",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.oid),e.xp6(1),e.Q6J("ngIf",t.erroreConfigurazioneMaster)}}function uQ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.codice"),""))}function gQ(i,o){1&i&&(e.TgZ(0,"div",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.configurazione.portali.servizioGiornaliero")," "))}function hQ(i,o){1&i&&(e.TgZ(0,"div",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.configurazione.portali.senzaDisponibilita")," "))}function fQ(i,o){if(1&i&&(e.TgZ(0,"mat-cell",36)(1,"div",37),e._uU(2),e.qZA(),e.YNc(3,gQ,3,3,"div",38),e.YNc(4,hQ,3,3,"div",39),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.codice," "),e.xp6(1),e.Q6J("ngIf",t.isDayUse),e.xp6(1),e.Q6J("ngIf",t.isTipoCameraPMS)}}function CQ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.descrizione"),""))}function bQ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function vQ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.tipoCamera"),""))}function TQ(i,o){1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"globals.nonAttivo")," "))}function xQ(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",37),e._uU(2),e.qZA(),e.YNc(3,TQ,3,3,"div",42),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.tipoCamera.nome),e.xp6(1),e.Q6J("ngIf",!t.tipoCamera.isDisponibile)}}function ZQ(i,o){if(1&i&&(e.TgZ(0,"mat-cell",36),e.YNc(1,xQ,4,2,"ng-container",0),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.tipoCamera)}}function AQ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.tipoCameraHotel"),""))}function wQ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.tipoCameraHotel?null:t.tipoCameraHotel.nome)}}function zQ(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.isUsoSingola"),""))}function MQ(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",44),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isUsoSingola)("disabled",!0)}}function qQ(i,o){1&i&&(e.TgZ(0,"mat-header-cell",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.ordinamento"),""))}function PQ(i,o){if(1&i&&(e.TgZ(0,"mat-cell",45),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.ordinamento," ")}}function kQ(i,o){1&i&&e._UZ(0,"mat-header-cell")}function SQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",46)(1,"button",47),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",48),e._uU(3,"delete"),e.qZA()()()}}function yQ(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function JQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",50),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function EQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.leggiRisorse())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.leggiRisorse")))}function NQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",53)(1,"div",54)(2,"mat-form-field",37)(3,"input",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tipoCameraOTA.occupazioneStandard=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",56),e._uU(6," Numero di persone possibili per l'occupazione standard. Utilizzato da SBM per la pubblicazione del prezzo base (letto da Planning) in caso di derived prices. "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.tipoCameraOTA.proprieta.occupazioneStandard"))("ngModel",t.modelEdit.tipoCameraOTA.occupazioneStandard)}}function OQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",53)(1,"div",54)(2,"mat-form-field",37)(3,"input",80),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tipoCameraOTA.disponibileFinoAlleOre=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",56),e._uU(6," Indica l'orario fino al quale \xe8 possibile prenotare la camera per arrivi in data odierna "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.tipoCameraOTA.proprieta.disponibileFinoAlleOre"))("ngModel",t.modelEdit.tipoCameraOTA.disponibileFinoAlleOre)}}function LQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",53)(1,"div",54)(2,"mat-form-field",37)(3,"input",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tipoCameraOTA.numeroAdultiCalcoloPastiOTA=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",56),e._uU(6," Numero adulti per il calcolo dei pasti sul portale "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.tipoCameraOTA.proprieta.numeroAdultiCalcoloPastiOTA"))("ngModel",t.modelEdit.tipoCameraOTA.numeroAdultiCalcoloPastiOTA)}}function DQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",53)(1,"div",54)(2,"mat-form-field",37)(3,"input",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tipoCameraOTA.prezzoExtraBed=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",56),e._uU(6," PrezzoExtraBed: viene aggiunto al prezzo e inviato al portale Bed&BreakFast "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.tipoCameraOTA.proprieta.prezzoExtraBed"))("ngModel",t.modelEdit.tipoCameraOTA.prezzoExtraBed)}}function IQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",53)(1,"div",54)(2,"app-view-select",81),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tipoCameraOTA.tipoCameraSelfCheckin=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",56),e._uU(5," Risorsa del portale Passepartout utilizzata per la visualizzazione della descrizione nel Self Checkin "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("dataLoader",t.apiService.getTipiCameraOTAViewSelect(t.oidPortalePassepartout))("value",t.modelEdit.tipoCameraOTA.tipoCameraSelfCheckin)("placeholder",e.lcZ(3,3,"bo.tipoCameraOTA.proprieta.tipoCameraSelfCheckin"))}}function QQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",60)(1,"div",54)(2,"mat-checkbox",61),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tipoCameraOTA.isVisualizzaInRichiestaDisponibilita=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",56),e._uU(6," Visualizza la risorsa nel form richiesta "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tipoCameraOTA.isVisualizzaInRichiestaDisponibilita),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tipoCameraOTA.proprieta.isVisualizzaInRichiestaDisponibilita")," ")}}function UQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",60)(1,"div",54)(2,"mat-checkbox",82),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tipoCameraOTA.isDayUse=a)})("change",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(a.checked?null:l.modelEdit.tipoCameraOTA.isIllimitata=!1)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",56),e._uU(6,' L\u2019impostazione del parametro "Servizi Giornalieri" \xe8 utilizzata per impostare la risorsa come prenotabile nel portale '),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tipoCameraOTA.isDayUse),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tipoCameraOTA.proprieta.isDayUse")," ")}}function YQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",83)(1,"div",54)(2,"mat-checkbox",84),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tipoCameraOTA.isIllimitata=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",56),e._uU(6,' Il parametro "Illimitata" \xe8 utilizzato per impostare la risorsa come illimitata (\xe8 attivabile solamente se il parametro "Servizi Giornalieri" \xe8 attivo) '),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tipoCameraOTA.isIllimitata)("disabled",!t.modelEdit.tipoCameraOTA.isDayUse),e.xp6(1),e.hij(" ",e.lcZ(4,3,"bo.tipoCameraOTA.proprieta.isIllimitata")," ")}}function RQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",90)(1,"mat-form-field",91)(2,"input",55),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(3);return e.KtG(r.modelEdit.tipiCameraOTAXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"app-editor",92),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(3);return e.KtG(r.modelEdit.tipiCameraOTAXLingua[l].descrizione=a)}),e.qZA()(),e.TgZ(8,"div",76),e._uU(9),e.ALo(10,"translate"),e.TgZ(11,"app-editor",92),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(3);return e.KtG(r.modelEdit.tipiCameraOTAXLingua[l].descrizioneDettagliata=a)}),e.qZA()()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw(3);e.Q6J("label",n.lingua.nome),e.xp6(2),e.Q6J("placeholder",e.lcZ(3,9,"bo.tipoCameraOTAXLingua.proprieta.nome"))("ngModel",l.modelEdit.tipiCameraOTAXLingua[a].nome),e.xp6(3),e.hij(" ",e.lcZ(6,11,"bo.tipoCameraOTAXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.tipiCameraOTAXLingua[a].descrizione),e.xp6(2),e.hij(" ",e.lcZ(10,13,"bo.tipoCameraOTAXLingua.proprieta.descrizioneDettagliata")," "),e.xp6(2),e.Q6J("id","descrizioneDettagliata"+a)("text",l.modelEdit.tipiCameraOTAXLingua[a].descrizioneDettagliata)}}function FQ(i,o){if(1&i&&(e.ynx(0),e.YNc(1,RQ,12,15,"mat-tab",89),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}const Mt=function(i){return{"mb-3 border-bottom":i}};function HQ(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",85,86)(2,"mat-expansion-panel-header",68),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-tab-group",87),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.selectedIndex1=a)}),e.YNc(6,FQ,2,1,"ng-container",88),e.qZA()()}if(2&i){const t=e.MAs(1),n=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(6,Mt,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(4,4,"globals.traduzioni")," "),e.xp6(2),e.Q6J("selectedIndex",n.selectedIndex1),e.xp6(1),e.Q6J("ngForOf",n.modelEdit.tipiCameraOTAXLingua)}}function KQ(i,o){if(1&i&&(e.TgZ(0,"mat-option",103),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function GQ(i,o){1&i&&e.GkF(0)}function $Q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.deleteAllImages())}),e.TgZ(1,"i",98),e._uU(2,"delete"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.configurazione.portali.eliminaImmagini")))}function BQ(i,o){1&i&&e.GkF(0)}const ts=function(i){return{image:i}};function VQ(i,o){if(1&i&&(e.TgZ(0,"div",106),e.YNc(1,BQ,1,0,"ng-container",97),e.qZA()),2&i){const t=e.oxw().$implicit;e.oxw(2);const n=e.MAs(26);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,ts,t))}}function XQ(i,o){if(1&i&&(e.ynx(0),e.YNc(1,VQ,2,4,"div",105),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.isDefault)}}function jQ(i,o){if(1&i&&(e.TgZ(0,"div",53),e.YNc(1,XQ,2,1,"ng-container",88),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.images)}}function WQ(i,o){1&i&&(e.TgZ(0,"div",107)(1,"span",108),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.portali.nessunaImmagineInserita")))}function e9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"img",114),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().image,l=e.oxw(3);return e.KtG(l.editImage(a))}),e.qZA()}if(2&i){const t=e.oxw().image;e.Q6J("src",t.urlImmagine,e.LSH)}}function t9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"img",115),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.addImage(!0))}),e.qZA()}}function i9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",116),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().image,l=e.oxw(3);return e.KtG(l.deleteImage(a))}),e.TgZ(1,"i",117),e._uU(2,"delete"),e.qZA()()}}function o9(i,o){if(1&i&&(e.TgZ(0,"div",109)(1,"div",110),e.YNc(2,e9,1,1,"img",111),e.YNc(3,t9,1,0,"img",112),e.qZA(),e.YNc(4,i9,3,0,"button",113),e.qZA()),2&i){const t=o.image;e.xp6(2),e.Q6J("ngIf",null!=t&&!!t.urlImmagine),e.xp6(1),e.Q6J("ngIf",null==t||!t.urlImmagine),e.xp6(1),e.Q6J("ngIf",null!=t&&!!t.urlImmagine)}}function n9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",76)(1,"mat-form-field",37)(2,"mat-select",93),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tipoCameraOTA.tipoVisualizzazioneImmagine=a)}),e.ALo(3,"translate"),e.YNc(4,KQ,3,4,"mat-option",94),e.ALo(5,"selectEnum"),e.qZA()(),e.TgZ(6,"div",53)(7,"div",95),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",53)(11,"div",96),e.YNc(12,GQ,1,0,"ng-container",97),e.qZA()(),e.TgZ(13,"div",76)(14,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addImage())}),e.TgZ(15,"i",98),e._uU(16,"add_circle_outline"),e.qZA(),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.YNc(19,$Q,5,3,"button",99),e.qZA(),e.TgZ(20,"div",100),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.YNc(23,jQ,2,1,"div",59),e.YNc(24,WQ,4,3,"div",101),e.YNc(25,o9,5,3,"ng-template",null,102,e.W1O),e.TgZ(27,"button",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openImageLibrary())}),e._uU(28),e.ALo(29,"translate"),e.qZA()()}if(2&i){const t=e.MAs(26),n=e.oxw(2);e.xp6(2),e.s9C("placeholder",e.lcZ(3,12,"bo.tipoCameraOTA.proprieta.tipoVisualizzazioneImmagine")),e.Q6J("ngModel",n.modelEdit.tipoCameraOTA.tipoVisualizzazioneImmagine),e.xp6(2),e.Q6J("ngForOf",e.xi3(5,14,n.enumTipoVisualizzazioneImmagine,"tipoVisualizzazioneImmagine")),e.xp6(4),e.hij(" ",e.lcZ(9,17,"sbm.configurazione.portali.immaginePrincipale")," "),e.xp6(4),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(25,ts,n.getDefaultImage())),e.xp6(5),e.Oqu(e.lcZ(18,19,"sbm.configurazione.portali.aggiungiImmagine")),e.xp6(2),e.Q6J("ngIf",n.images.length>0),e.xp6(2),e.hij(" ",e.lcZ(22,21,"sbm.configurazione.portali.altreImmaginiDellaCamera")," "),e.xp6(2),e.Q6J("ngIf",n.getImages().length>0),e.xp6(1),e.Q6J("ngIf",0==n.getImages().length),e.xp6(4),e.Oqu(e.lcZ(29,23,"sbm.configurazione.portali.libreriaImmagini"))}}function a9(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",118)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.BQk()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.configurazione.portali.salvareRisorsa")))}function l9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",126)(1,"mat-checkbox",127),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleServizi():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionServizi.hasValue()&&t.isAllSelectedServizi())("indeterminate",t.selectionServizi.hasValue()&&!t.isAllSelectedServizi())}}function r9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",128)(1,"mat-checkbox",129),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionServizi.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionServizi.isSelected(t.oid))}}function c9(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.servizio.proprieta.nome"),""))}function s9(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function p9(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function d9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",130),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}const zi=function(){return["nome","select"]};function m9(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",66,119)(2,"mat-expansion-panel-header",68),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",120)(6,"mat-table",5),e.ynx(7,121),e.YNc(8,l9,2,2,"mat-header-cell",122),e.YNc(9,r9,2,1,"mat-cell",123),e.BQk(),e.ynx(10,124),e.YNc(11,c9,3,3,"mat-header-cell",7),e.YNc(12,s9,2,1,"mat-cell",10),e.BQk(),e.YNc(13,p9,1,0,"mat-header-row",22),e.YNc(14,d9,1,1,"mat-row",125),e.qZA()()()),2&i){const t=e.MAs(1),n=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(8,Mt,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(4,6,"sbm.configurazione.portali.serviziAbilitati")," "),e.xp6(3),e.Q6J("dataSource",n.servizi),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(10,zi))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(11,zi))}}function _9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",126)(1,"mat-checkbox",127),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleSupplementi():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionSupplementi.hasValue()&&t.isAllSelectedSupplementi())("indeterminate",t.selectionSupplementi.hasValue()&&!t.isAllSelectedSupplementi())}}function u9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",128)(1,"mat-checkbox",129),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionSupplementi.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionSupplementi.isSelected(t.oid))}}function g9(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.supplemento.proprieta.nome"),""))}function h9(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function f9(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function C9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",130),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function b9(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",66,131)(2,"mat-expansion-panel-header",68),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",120)(6,"mat-table",5),e.ynx(7,121),e.YNc(8,_9,2,2,"mat-header-cell",122),e.YNc(9,u9,2,1,"mat-cell",123),e.BQk(),e.ynx(10,124),e.YNc(11,g9,3,3,"mat-header-cell",7),e.YNc(12,h9,2,1,"mat-cell",10),e.BQk(),e.YNc(13,f9,1,0,"mat-header-row",22),e.YNc(14,C9,1,1,"mat-row",125),e.qZA()()()),2&i){const t=e.MAs(1),n=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(8,Mt,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(4,6,"sbm.configurazione.portali.supplementiAbilitati")," "),e.xp6(3),e.Q6J("dataSource",n.supplementi),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(10,zi))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(11,zi))}}function v9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",126)(1,"mat-checkbox",127),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleSistemazioni():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionSistemazioni.hasValue()&&t.isAllSelectedSistemazioni())("indeterminate",t.selectionSistemazioni.hasValue()&&!t.isAllSelectedSistemazioni())}}function T9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",128)(1,"mat-checkbox",129),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionSistemazioni.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionSistemazioni.isSelected(t.oid))}}function x9(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sistemazione.proprieta.nome"),""))}function Z9(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function A9(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function w9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",130),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function z9(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",66,132)(2,"mat-expansion-panel-header",68),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",120)(6,"mat-table",5),e.ynx(7,121),e.YNc(8,v9,2,2,"mat-header-cell",122),e.YNc(9,T9,2,1,"mat-cell",123),e.BQk(),e.ynx(10,124),e.YNc(11,x9,3,3,"mat-header-cell",7),e.YNc(12,Z9,2,1,"mat-cell",10),e.BQk(),e.YNc(13,A9,1,0,"mat-header-row",22),e.YNc(14,w9,1,1,"mat-row",125),e.qZA()()()),2&i){const t=e.MAs(1),n=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(8,Mt,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(4,6,"sbm.configurazione.portali.sistemazioni")," "),e.xp6(3),e.Q6J("dataSource",n.sistemazioni),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(10,zi))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(11,zi))}}function M9(i,o){if(1&i&&e._UZ(0,"app-componenti",133),2&i){const t=e.oxw(2);e.Q6J("_risorsaOid",t.modelEdit.tipoCameraOTA.oid)}}function q9(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",118)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.BQk()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.configurazione.portali.salvareRisorsaComponenti")))}function P9(i,o){if(1&i&&e._UZ(0,"app-upgrade-gratuiti",134),2&i){const t=e.oxw(2);e.Q6J("_risorsaOid",t.modelEdit.tipoCameraOTA.oid)("portaleOid",t.oidPortale)}}function k9(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",118)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.BQk()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.configurazione.portali.salvareRisorsaUpgradeGratuiti")))}function S9(i,o){if(1&i&&e._UZ(0,"app-calendari",133),2&i){const t=e.oxw(2);e.Q6J("_risorsaOid",t.modelEdit.tipoCameraOTA.oid)}}function y9(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",118)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.BQk()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.configurazione.portali.salvareRisorsaCalendari")))}function J9(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.configurazioneAirbnb())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.annuncioAirbnb())}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali.configurazioneAirbnb")),e.xp6(3),e.Oqu(e.lcZ(6,4,"sbm.configurazione.portali.annuncioAirbnb")))}function E9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",135),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function N9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",53)(2,"div",54)(3,"mat-form-field",37)(4,"input",55),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.codice=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",56),e._uU(7," Impostare il codice della tipologia di camera "),e.qZA()(),e.TgZ(8,"div",53)(9,"div",54)(10,"mat-form-field",37)(11,"input",55),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.descrizione=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",56),e._uU(14," Impostare la descrizione interna della tipologia di camera (visualizzabile nel planning e nella extranet) "),e.qZA()(),e.TgZ(15,"div",53)(16,"div",54)(17,"app-view-select",57),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.tipoCamera=a)}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",56),e._uU(20," Impostare la tipologia di camera "),e.qZA()(),e.TgZ(21,"div",53)(22,"div",54)(23,"app-view-select",57),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.tipoCameraHotel=a)}),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",56),e._uU(26,' La colonna "TipoCameraHotel" viene utilizzato quando si creano tipi camera virtuali. Se valorizzata la prenotazione verr\xe0 importata su questa Tipologia Camera '),e.qZA()(),e.TgZ(27,"div",53)(28,"div",54)(29,"app-view-select",57),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.ubicazioneIstatHotel=a)}),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"div",56),e._uU(32,' La colonna "UbicazioneIstatHotel" viene utilizzata solo in fase di importazione delle prenotazioni. Se valorizzata la prenotazione verr\xe0 importata su questa Ubicazione Istat (lasciando vuoto viene importata su quella del portale) '),e.qZA()(),e.TgZ(33,"div",53)(34,"div",54)(35,"mat-form-field",37)(36,"input",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.ordinamento=a)}),e.ALo(37,"translate"),e.qZA()()(),e.TgZ(38,"div",56),e._uU(39," E' possibile impostare l'ordinamento di visualizzazione "),e.qZA()(),e.YNc(40,NQ,7,4,"div",59),e.TgZ(41,"div",53)(42,"div",54)(43,"mat-form-field",37)(44,"input",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.disponibiliMassime=a)}),e.ALo(45,"translate"),e.qZA()()(),e.TgZ(46,"div",56),e._uU(47," E' possibile impostare un limite massimo di camere prenotabili (contemporaneamente) "),e.qZA()(),e.TgZ(48,"div",53)(49,"div",54)(50,"mat-form-field",37)(51,"input",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.disponibiliDaScalareMaster=a)}),e.ALo(52,"translate"),e.qZA()()(),e.TgZ(53,"div",56),e._uU(54,' E\' possibile impostare un valore da scalare dal portale master. Esempio se si vuole vendere 1 camera in meno di quelle disponibili. Una volta eseguita la modifica occorre effettuare una "Sincronizzazione disponibilit\xe0 del portale Master" '),e.qZA()(),e.TgZ(55,"div",53)(56,"div",54)(57,"mat-form-field",37)(58,"input",55),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.rateType=a)}),e.ALo(59,"translate"),e.qZA()()(),e.TgZ(60,"div",56),e._uU(61," Indica il tipo di Rate per il portale "),e.qZA()(),e.TgZ(62,"div",53)(63,"div",54)(64,"mat-form-field",37)(65,"input",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.dimensione=a)}),e.ALo(66,"translate"),e.qZA()()(),e.TgZ(67,"div",56),e._uU(68," Indicare la dimensione della camera da visuallizare nel web. 0 per non visualizzare niente "),e.qZA()(),e.YNc(69,OQ,7,4,"div",59),e.YNc(70,LQ,7,4,"div",59),e.YNc(71,DQ,7,4,"div",59),e.YNc(72,IQ,6,5,"div",59),e.TgZ(73,"div",53)(74,"div",54)(75,"mat-form-field",37)(76,"input",55),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.roomName=a)}),e.ALo(77,"translate"),e.qZA()()(),e.TgZ(78,"div",56),e._uU(79),e.qZA()(),e.TgZ(80,"div",53)(81,"div",54)(82,"mat-form-field",37)(83,"input",55),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.roomClassificationCode=a)}),e.ALo(84,"translate"),e.qZA()()(),e.TgZ(85,"div",56),e._uU(86," Da compilare per alcuni portali: Room Classification Code per HRS, Generic per NetStorming/Whl "),e.qZA()(),e.TgZ(87,"div",60)(88,"div",54)(89,"mat-checkbox",61),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.isUsoSingola=a)}),e._uU(90),e.ALo(91,"translate"),e.qZA()(),e.TgZ(92,"div",56),e._uU(93,' L\'impostazione della colonna "Uso Singola" \xe8 utilizzata per i portali che utilizzano le tariffe DUS (ad esempio Booking.com) '),e.qZA()(),e.TgZ(94,"div",60)(95,"div",54)(96,"mat-checkbox",61),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.isRisorsaCrm=a)}),e._uU(97),e.ALo(98,"translate"),e.qZA()(),e.TgZ(99,"div",56),e._uU(100," Attivando questa opzione la Risorsa sar\xe0 vendibile solo tramite un preventivo CRM "),e.qZA()(),e.TgZ(101,"div",60)(102,"div",54)(103,"mat-checkbox",61),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA.isTipoCameraPMS=a)}),e._uU(104),e.ALo(105,"translate"),e.qZA()(),e.TgZ(106,"div",56),e._uU(107," Risorsa interna (senza disponibilit\xe0). La risorsa non sar\xe0 presente nel planning e vendibile online "),e.qZA()(),e.YNc(108,QQ,7,4,"div",62),e.YNc(109,UQ,7,4,"div",62),e.YNc(110,YQ,7,5,"div",63),e.TgZ(111,"mat-accordion",64),e.YNc(112,HQ,7,8,"mat-expansion-panel",65),e.TgZ(113,"mat-expansion-panel",66,67)(115,"mat-expansion-panel-header",68),e._uU(116),e.ALo(117,"translate"),e.qZA(),e.YNc(118,n9,30,27,"div",69),e.YNc(119,a9,5,3,"ng-container",0),e.qZA(),e.YNc(120,m9,15,12,"mat-expansion-panel",70),e.YNc(121,b9,15,12,"mat-expansion-panel",70),e.YNc(122,z9,15,12,"mat-expansion-panel",70),e.TgZ(123,"mat-expansion-panel",66,71)(125,"mat-expansion-panel-header",68),e._uU(126),e.ALo(127,"translate"),e.qZA(),e.YNc(128,M9,1,1,"app-componenti",72),e.YNc(129,q9,5,3,"ng-container",0),e.qZA(),e.TgZ(130,"mat-expansion-panel",66,73)(132,"mat-expansion-panel-header",68),e._uU(133),e.ALo(134,"translate"),e.qZA(),e.YNc(135,P9,1,2,"app-upgrade-gratuiti",74),e.YNc(136,k9,5,3,"ng-container",0),e.qZA(),e.TgZ(137,"mat-expansion-panel",66,75)(139,"mat-expansion-panel-header",68),e._uU(140),e.ALo(141,"translate"),e.qZA(),e.YNc(142,S9,1,1,"app-calendari",72),e.YNc(143,y9,5,3,"ng-container",0),e.qZA()(),e.TgZ(144,"div",76)(145,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(146),e.ALo(147,"translate"),e.qZA(),e.YNc(148,J9,7,6,"ng-container",0),e.YNc(149,E9,3,3,"button",78),e.TgZ(150,"button",79),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancel())}),e._uU(151),e.ALo(152,"translate"),e.qZA()()()}if(2&i){const t=e.MAs(114),n=e.MAs(124),a=e.MAs(131),l=e.MAs(138),r=e.oxw();e.xp6(4),e.Q6J("placeholder",e.lcZ(5,66,"bo.tipoCameraOTA.proprieta.codice"))("ngModel",r.modelEdit.tipoCameraOTA.codice),e.xp6(7),e.Q6J("placeholder",e.lcZ(12,68,"bo.tipoCameraOTA.proprieta.descrizione"))("ngModel",r.modelEdit.tipoCameraOTA.descrizione),e.xp6(6),e.Q6J("dataLoader",r.apiService.getTipiCameraViewSelect(null,!1))("value",r.modelEdit.tipoCameraOTA.tipoCamera)("placeholder",e.lcZ(18,70,"bo.tipoCameraOTA.proprieta.tipoCamera")),e.xp6(6),e.Q6J("dataLoader",r.apiService.getTipiCameraViewSelect())("value",r.modelEdit.tipoCameraOTA.tipoCameraHotel)("placeholder",e.lcZ(24,72,"bo.tipoCameraOTA.proprieta.tipoCameraHotel")),e.xp6(6),e.Q6J("dataLoader",r.apiService.getUbicazioniIstatViewSelect())("value",r.modelEdit.tipoCameraOTA.ubicazioneIstatHotel)("placeholder",e.lcZ(30,74,"bo.tipoCameraOTA.proprieta.ubicazioneIstatHotel")),e.xp6(7),e.Q6J("placeholder",e.lcZ(37,76,"bo.tipoCameraOTA.proprieta.ordinamento"))("ngModel",r.modelEdit.tipoCameraOTA.ordinamento),e.xp6(4),e.Q6J("ngIf",r.isVisualizzaOccupazioneStandard()),e.xp6(4),e.Q6J("placeholder",e.lcZ(45,78,"bo.tipoCameraOTA.proprieta.disponibiliMassime"))("ngModel",r.modelEdit.tipoCameraOTA.disponibiliMassime),e.xp6(7),e.Q6J("placeholder",e.lcZ(52,80,"bo.tipoCameraOTA.proprieta.disponibiliDaScalareMaster"))("ngModel",r.modelEdit.tipoCameraOTA.disponibiliDaScalareMaster),e.xp6(7),e.Q6J("placeholder",e.lcZ(59,82,"bo.tipoCameraOTA.proprieta.rateType"))("ngModel",r.modelEdit.tipoCameraOTA.rateType),e.xp6(7),e.Q6J("placeholder",e.lcZ(66,84,"bo.tipoCameraOTA.proprieta.dimensione"))("ngModel",r.modelEdit.tipoCameraOTA.dimensione),e.xp6(4),e.Q6J("ngIf",r.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",!r.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",!r.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",!r.isPortalePassepartout&&r.oidPortalePassepartout>0),e.xp6(4),e.Q6J("placeholder",e.lcZ(77,86,"bo.tipoCameraOTA.proprieta.roomName"))("ngModel",r.modelEdit.tipoCameraOTA.roomName),e.xp6(3),e.hij(" ",r.isPortalePassepartout?"Da compilare per codice Trip Advisor":"Da compilare per alcuni portali: Room Characteristic Code per HotelBeds"," "),e.xp6(4),e.Q6J("placeholder",e.lcZ(84,88,"bo.tipoCameraOTA.proprieta.roomClassificationCode"))("ngModel",r.modelEdit.tipoCameraOTA.roomClassificationCode),e.xp6(6),e.Q6J("ngModel",r.modelEdit.tipoCameraOTA.isUsoSingola),e.xp6(1),e.hij(" ",e.lcZ(91,90,"bo.tipoCameraOTA.proprieta.isUsoSingola")," "),e.xp6(6),e.Q6J("ngModel",r.modelEdit.tipoCameraOTA.isRisorsaCrm),e.xp6(1),e.hij(" ",e.lcZ(98,92,"bo.tipoCameraOTA.proprieta.isRisorsaCrm")," "),e.xp6(6),e.Q6J("ngModel",r.modelEdit.tipoCameraOTA.isTipoCameraPMS),e.xp6(1),e.hij(" ",e.lcZ(105,94,"bo.tipoCameraOTA.proprieta.isTipoCameraPMS")," "),e.xp6(4),e.Q6J("ngIf",r.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",r.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",r.isPortalePassepartout),e.xp6(2),e.Q6J("ngIf",r.isPortalePassepartout),e.xp6(3),e.Q6J("ngClass",e.VKq(108,Mt,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(117,96,"sbm.configurazione.portali.immagini")," "),e.xp6(2),e.Q6J("ngIf",r.modelEdit.tipoCameraOTA.oid>0),e.xp6(1),e.Q6J("ngIf",null==r.modelEdit.tipoCameraOTA.oid||r.modelEdit.tipoCameraOTA.oid<=0),e.xp6(1),e.Q6J("ngIf",r.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",r.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",r.isPortalePassepartout),e.xp6(3),e.Q6J("ngClass",e.VKq(110,Mt,n.expanded)),e.xp6(1),e.hij(" ",e.lcZ(127,98,"sbm.configurazione.portali.configurazionePersone")," "),e.xp6(2),e.Q6J("ngIf",r.modelEdit.tipoCameraOTA.oid>0),e.xp6(1),e.Q6J("ngIf",null==r.modelEdit.tipoCameraOTA.oid||r.modelEdit.tipoCameraOTA.oid<=0),e.xp6(3),e.Q6J("ngClass",e.VKq(112,Mt,a.expanded)),e.xp6(1),e.hij(" ",e.lcZ(134,100,"sbm.configurazione.portali.upgradeGratuiti")," "),e.xp6(2),e.Q6J("ngIf",r.modelEdit.tipoCameraOTA.oid>0),e.xp6(1),e.Q6J("ngIf",null==r.modelEdit.tipoCameraOTA.oid||r.modelEdit.tipoCameraOTA.oid<=0),e.xp6(3),e.Q6J("ngClass",e.VKq(114,Mt,l.expanded)),e.xp6(1),e.hij(" ",e.lcZ(141,102,"sbm.configurazione.portali.calendari")," "),e.xp6(2),e.Q6J("ngIf",r.modelEdit.tipoCameraOTA.oid>0),e.xp6(1),e.Q6J("ngIf",null==r.modelEdit.tipoCameraOTA.oid||r.modelEdit.tipoCameraOTA.oid<=0),e.xp6(3),e.Oqu(e.lcZ(147,104,"globals.salva")),e.xp6(2),e.Q6J("ngIf",r.portaleXAlbergo.tipoPortale==r.enumTipoPortale.AirBnb&&r.modelEdit.tipoCameraOTA.oid>0),e.xp6(1),e.Q6J("ngIf",r.modelEdit.tipoCameraOTA.oid>0),e.xp6(2),e.Oqu(e.lcZ(152,106,"globals.annulla"))}}class _a extends f.H{set _risorse(o){null!=o&&(this.risorse=o,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.selectedIndex1=0)}constructor(o,t,n,a){super(),this.apiService=o,this.containerService=t,this.utility=n,this.sessionService=a,this.onRisorseImportate=new e.vpe,this.selectionServizi=new me.Ov(!0,[]),this.selectionSupplementi=new me.Ov(!0,[]),this.selectionModalitaPagamento=new me.Ov(!0,[]),this.selectionSistemazioni=new me.Ov(!0,[]),this.showTable=!0,this.displayedColumns=["edit","oid","codice","descrizione","tipoCamera.nome","tipoCameraHotel.nome","isUsoSingola","ordinamento","delete"],this.selectedIndex1=0,this.images=[],this.enumTipoVisualizzazioneImmagine=c.eZ,this.enumTipoPortale=c.Q}ngOnInit(){this.apiService.getTipiCameraViewSelect(null,!1).subscribe(o=>{null!=o&&null!=o.data&&o.data.length>0&&(this.tipoCameraDefault=o.data[0])})}ngAfterViewInit(){null!=this.dataSource&&(this.dataSource.paginator=this.paginator)}init(){this.selectionServizi=new me.Ov(!0,[]),this.selectionSupplementi=new me.Ov(!0,[]),this.selectionModalitaPagamento=new me.Ov(!0,[]),this.selectionSistemazioni=new me.Ov(!0,[]),this.modelEdit=new d.bbP,null==this.modelEdit.tipoCameraOTA.tipoCamera&&(this.modelEdit.tipoCameraOTA.tipoCamera=this.tipoCameraDefault);for(let o of this.lingue){let t=new v.kdq;t.lingua=o,this.modelEdit.tipiCameraOTAXLingua.push(t)}}isVisualizzaOccupazioneStandard(){return!(!this.portaleXAlbergo||this.portaleXAlbergo.tipoPortale!=c.Q.Expedia&&this.portaleXAlbergo.tipoPortale!=c.Q.Agoda&&this.portaleXAlbergo.tipoPortale!=c.Q.YieldPlanet)}add(){this.containerService.scrollToTop(),this.init(),this.selectedIndex1=0,this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.containerService.scrollToTop(),this.init(),this.setIsLoading(!0),this.apiService.getTipiCameraOTAXLinguaXImmagini(o.oid).subscribe(t=>{this.modelEdit.tipoCameraOTA=Object.assign({},o);for(let n of t.data.tipiCameraOTAXLingua)if(null!=n.lingua){let a=this.modelEdit.tipiCameraOTAXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.tipiCameraOTAXLingua[a].tipoCameraOTA=this.modelEdit.tipoCameraOTA,this.modelEdit.tipiCameraOTAXLingua[a].nome=n.nome,this.modelEdit.tipiCameraOTAXLingua[a].descrizione=n.descrizione,this.modelEdit.tipiCameraOTAXLingua[a].descrizioneDettagliata=n.descrizioneDettagliata)}if(null==this.modelEdit.tipoCameraOTA.tipoCamera&&(this.modelEdit.tipoCameraOTA.tipoCamera=this.tipoCameraDefault),this.images=t.data.immaginiXTipoCameraOTA,this.modelEdit.tipoCameraOTA.oidServizi){let n=this.modelEdit.tipoCameraOTA.oidServizi.split(";");for(let a of n)""!=a&&!isNaN(+a)&&-1!=this.servizi.findIndex(l=>l.oid==+a)&&this.selectionServizi.toggle(+a)}if(this.modelEdit.tipoCameraOTA.oidSupplementiAbilitati){let n=this.modelEdit.tipoCameraOTA.oidSupplementiAbilitati.split(";");for(let a of n)""!=a&&!isNaN(+a)&&-1!=this.supplementi.findIndex(l=>l.oid==+a)&&this.selectionSupplementi.toggle(+a)}if(this.modelEdit.tipoCameraOTA.oidModalitaPagamento){let n=this.modelEdit.tipoCameraOTA.oidModalitaPagamento.split(";");for(let a of n)""!=a&&!isNaN(+a)&&-1!=this.modalitaPagamento.findIndex(l=>l.oid==+a)&&this.selectionModalitaPagamento.toggle(+a)}if(this.modelEdit.tipoCameraOTA.oidSistemazioni){let n=this.modelEdit.tipoCameraOTA.oidSistemazioni.split(";");for(let a of n)""!=a&&!isNaN(+a)&&-1!=this.sistemazioni.findIndex(l=>l.oid==+a)&&this.selectionSistemazioni.toggle(+a)}this.selectedIndex1=0,this.showTable=!1,this.containerService.scrollToTop(),this.setIsLoading(!1)})}cancel(){this.images=[],this.showTable=!0,this.containerService.scrollToTop()}delete(o){this.setIsLoading(!0);let t=new d.AS0;t.oidRisorsa=null!=o?o.oid:this.modelEdit.tipoCameraOTA.oid,this.apiService.checkDisponibilitaFuturePubblicate(t).subscribe(n=>{this.setIsLoading(!1),n.data?this.showError("sbm.configurazione.portali.impossibileCancellareRisorsa"):this.showDialogConfirm("sbm.configurazione.portali.eliminareRisorsa").then(a=>{null!=o&&(this.modelEdit=new d.bbP,this.modelEdit.tipoCameraOTA=o),this.modelEdit.tipoCameraOTA.isDeleted=!0,this.save()},a=>{})})}save(){this.setIsLoading(!0),this.modelEdit.tipoCameraOTA.oidServizi=this.selectionServizi.selected.toString().replace(/,/g,";"),this.modelEdit.tipoCameraOTA.oidSupplementiAbilitati=this.selectionSupplementi.selected.toString().replace(/,/g,";"),this.modelEdit.tipoCameraOTA.oidModalitaPagamento=this.selectionModalitaPagamento.selected.toString().replace(/,/g,";"),this.modelEdit.tipoCameraOTA.oidSistemazioni=this.selectionSistemazioni.selected.toString().replace(/,/g,";"),this.modelEdit.tipoCameraOTA.portaleXAlbergo=new v.$Ys,this.modelEdit.tipoCameraOTA.portaleXAlbergo.oid=this.oidPortale;for(let o of this.modelEdit.tipiCameraOTAXLingua)o.tipoCameraOTA=this.modelEdit.tipoCameraOTA;this.apiService.setTipoCameraOTA(this.modelEdit).subscribe(o=>{if(this.modelEdit.tipoCameraOTA.oid>0){let p=this.utility.findIndexByOid(this.risorse,this.modelEdit.tipoCameraOTA.oid);this.modelEdit.tipoCameraOTA.isDeleted?this.risorse.splice(p,1):this.risorse[p]=o.data.obj,this.dataSource=new s.r4(this.risorse),this.dataSource.paginator=this.paginator,this.showTable=!0,this.containerService.scrollToTop(),this.setIsLoading(!1)}else{var t,n,a,l,r;this.risorse.push(o.data.obj),this.edit(o.data.obj),this.dataSource=new s.r4(this.risorse),this.dataSource.paginator=this.paginator,null===(t=this.panel1)||void 0===t||t.close(),null===(n=this.panel2)||void 0===n||n.close(),null===(a=this.panel3)||void 0===a||a.close(),null===(l=this.panel4)||void 0===l||l.close(),null===(r=this.panel6)||void 0===r||r.close(),this.panel7.close(),this.panel8.close(),this.panel9.close()}})}isAllSelectedServizi(){return this.selectionServizi.selected.length==this.servizi.length}masterToggleServizi(){this.isAllSelectedServizi()?this.selectionServizi.clear():this.servizi.forEach(o=>this.selectionServizi.select(o.oid))}isAllSelectedSupplementi(){return this.selectionSupplementi.selected.length==this.supplementi.length}masterToggleSupplementi(){this.isAllSelectedSupplementi()?this.selectionSupplementi.clear():this.supplementi.forEach(o=>this.selectionSupplementi.select(o.oid))}isAllSelectedModalitaPagamento(){return this.selectionModalitaPagamento.selected.length==this.modalitaPagamento.length}masterToggleModalitaPagamento(){this.isAllSelectedModalitaPagamento()?this.selectionModalitaPagamento.clear():this.modalitaPagamento.forEach(o=>this.selectionModalitaPagamento.select(o.oid))}isAllSelectedSistemazioni(){return this.selectionSistemazioni.selected.length==this.sistemazioni.length}masterToggleSistemazioni(){this.isAllSelectedSistemazioni()?this.selectionSistemazioni.clear():this.sistemazioni.forEach(o=>this.selectionSistemazioni.select(o.oid))}deleteAllImages(){this.showDialogConfirm("sbm.configurazione.portali.eliminareImmagini").then(o=>{this.setIsLoading(!0),this.apiService.deleteAllImagesTipoCamera(this.modelEdit.tipoCameraOTA.oid).subscribe(()=>{this.images=this.images.filter(t=>t.isDefault),this.setIsLoading(!1)})},o=>{})}getImages(){return this.images.filter(o=>!o.isDefault)}getDefaultImage(){return this.images.find(o=>o.isDefault)}tabChanged(o){0==o&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},200)}leggiRisorse(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh",o.maxHeight="80vh";let t=this.showModalDialog(la,o),n=t.componentInstance;n.oidPortale=this.oidPortale,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&a.length>0&&this.onRisorseImportate.emit(a)})}openImageLibrary(){this.setIsLoading(!0),this.apiService.getImmaginiRisorsePortale(this.oidPortale).subscribe(o=>{this.setIsLoading(!1);let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(oa,t),a=n.componentInstance;a.immagini=o.data,a.dialogRef=n,n.afterClosed().subscribe(l=>{if(l){let r=new v.uQq;r.urlImmagine=l,r.isAttiva=!0,r.tipoCameraOTA=new v.OR4(this.modelEdit.tipoCameraOTA.oid),this.setIsLoading(!0),this.apiService.setImmagineTipoCameraOTA(r).subscribe(p=>{null!=p.data&&(r=p.data.obj,this.images.push(r)),this.setIsLoading(!1)})}})})}editImage(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(bo.u,t),a=n.componentInstance;a.image=Object.assign({},o),a.dialogRef=n,n.afterClosed().subscribe(l=>{null!=l&&(this.setIsLoading(!0),this.apiService.setImmagineTipoCameraOTA(l).subscribe(r=>{if(l.oid>0){let p=this.utility.findIndexByOid(this.images,l.oid);l.isDeleted?this.images.splice(p,1):this.images[p]=r.data.obj}else this.images.push(r.data.obj);this.setIsLoading(!1)}))})}addImage(o=!1){let t=new v.uQq;t.tipoCameraOTA=new v.OR4(this.modelEdit.tipoCameraOTA.oid),t.isDefault=o,t.isAttiva=!0,t.descrizione="",this.editImage(t)}deleteImage(o){this.showDialogConfirm("globals.eliminareImmagine").then(t=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setImmagineTipoCameraOTA(o).subscribe(()=>{let n=this.utility.findIndexByOid(this.images,o.oid);this.images.splice(n,1),this.setIsLoading(!1)})},t=>{})}configurazioneAirbnb(){let o=new d.Zpt;o.width="70vw";let t=this.showModalDialog(aa,o),n=t.componentInstance;n.oidTipoCamera=this.modelEdit.tipoCameraOTA.oid,n.dialogRef=t}annuncioAirbnb(){let o=new d.Zpt;o.width="70vw";let t=this.showModalDialog(na,o),n=t.componentInstance;n.oidTipoCamera=this.modelEdit.tipoCameraOTA.oid,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&(this.modelEdit.tipoCameraOTA.codice=a)})}}function O9(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",20)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.BQk()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.configurazione.portali.nessunaTariffa")))}function L9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",21)(1,"mat-checkbox",22),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleTariffe():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionTariffe.hasValue()&&t.isAllSelectedTariffe())("indeterminate",t.selectionTariffe.hasValue()&&!t.isAllSelectedTariffe())}}function D9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",23)(1,"mat-checkbox",24),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionTariffe.toggle(r.codice):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionTariffe.isSelected(t.codice))}}function I9(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tariffaOTA.proprieta.codice")))}function Q9(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codice)}}function U9(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tariffaOTA.proprieta.descrizione")))}function Y9(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function R9(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tariffaOTA.proprieta.codiceRoomType")))}function F9(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codiceRoomType)}}function H9(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tariffaOTA.proprieta.codiceAlternativo")))}function K9(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codiceAlternativo)}}function G9(i,o){1&i&&e._UZ(0,"mat-header-row",25)}function $9(i,o){1&i&&e._UZ(0,"mat-row")}function B9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.importaTariffe(!1))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.importaTariffe())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",0==t.selectionTariffe.selected.length),e.xp6(1),e.Oqu(e.lcZ(3,4,"sbm.configurazione.portali.importaSelezionate")),e.xp6(2),e.Q6J("disabled",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(1),e.Oqu(e.lcZ(6,6,"sbm.configurazione.portali.importaTutte"))}}_a.\u0275fac=function(o){return new(o||_a)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t),e.Y36(j.m))},_a.\u0275cmp=e.Xpm({type:_a,selectors:[["app-risorse-portale"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(eQ,5),e.Gf(tQ,5),e.Gf(iQ,5),e.Gf(oQ,5),e.Gf(nQ,5),e.Gf(aQ,5),e.Gf(lQ,5),e.Gf(rQ,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.panel1=n.first),e.iGM(n=e.CRH())&&(t.panel2=n.first),e.iGM(n=e.CRH())&&(t.panel3=n.first),e.iGM(n=e.CRH())&&(t.panel4=n.first),e.iGM(n=e.CRH())&&(t.panel6=n.first),e.iGM(n=e.CRH())&&(t.panel7=n.first),e.iGM(n=e.CRH())&&(t.panel8=n.first),e.iGM(n=e.CRH())&&(t.panel9=n.first)}},inputs:{portaleXAlbergo:"portaleXAlbergo",isPortalePassepartout:"isPortalePassepartout",oidPortale:"oidPortale",oidPortalePassepartout:"oidPortalePassepartout",servizi:"servizi",supplementi:"supplementi",modalitaPagamento:"modalitaPagamento",sistemazioni:"sistemazioni",_risorse:"_risorse"},outputs:{onRisorseImportate:"onRisorseImportate"},features:[e.qOj],decls:43,vars:10,consts:[[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","oid"],[4,"matCellDef"],["matColumnDef","codice"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","descrizione"],["matColumnDef","tipoCamera.nome"],["matColumnDef","tipoCameraHotel.nome"],["matColumnDef","isUsoSingola"],["matColumnDef","ordinamento"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["mat-flat-button","","color","primary","class","mt-3",3,"click",4,"ngIf"],["class","edit-container mr-n3 ml-n3",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"m-0"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["class","material-icons ml-1 align-middle warning-icon mb-1",3,"matTooltip",4,"ngIf"],[1,"material-icons","ml-1","align-middle","warning-icon","mb-1",3,"matTooltip"],[1,"flex-wrap"],[1,"w-100"],["class","w-100 servizioGiornaliero",4,"ngIf"],["class","w-100 tipoCameraPMS",4,"ngIf"],[1,"w-100","servizioGiornaliero"],[1,"w-100","tipoCameraPMS"],["class","w-100 color-red",4,"ngIf"],[1,"w-100","color-red"],["color","primary",3,"checked","disabled"],[1,"justify-content-center"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],[1,"edit-container","mr-n3","ml-n3"],[1,"row"],[1,"col-4"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],["class","row mt-3",4,"ngIf"],["class","row mt-2 mb-3 pl-4",4,"ngIf"],[1,"d-block","mt-3"],["class","mat-elevation-z0 border rounded risorse-traduzioni-panel mb-3",4,"ngIf"],[1,"mat-elevation-z0","border","rounded","mb-3"],["panel2",""],[3,"ngClass"],["class","mt-3",4,"ngIf"],["class","mat-elevation-z0 border rounded mb-3",4,"ngIf"],["panel7",""],[3,"_risorsaOid",4,"ngIf"],["panel8",""],[3,"_risorsaOid","portaleOid",4,"ngIf"],["panel9",""],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["autocompleteOff","","type","time","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["color","primary",3,"ngModel","ngModelChange","change"],[1,"row","mt-2","mb-3","pl-4"],["color","primary",3,"ngModel","disabled","ngModelChange"],[1,"mat-elevation-z0","border","rounded","risorse-traduzioni-panel","mb-3"],["panel1",""],[1,"mb-3","risorseTabGroup",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"w-100","mt-3"],[3,"id","text","textChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6","col-md-3","text-center"],[1,"col-6","col-md-3"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"material-icons","mb-1","mr-1"],["mat-flat-button","","color","primary","class","mt-1",3,"click",4,"ngIf"],[1,"mt-3","mb-3"],["class","border rounded-lg mat-elevation-z1 pr-3 pl-3 pt-2 pb-2",4,"ngIf"],["imageTemplate",""],[3,"value"],["mat-flat-button","","color","primary",1,"mt-1",3,"click"],["class","col-2",4,"ngIf"],[1,"col-2"],[1,"border","rounded-lg","mat-elevation-z1","pr-3","pl-3","pt-2","pb-2"],[1,"font-weight-bold"],[1,"imageRow"],[1,"imageHeight"],["class","rounded",3,"src","click",4,"ngIf"],["class","rounded","src","assets/images/sbm/no-image.png",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","class","delete-button",3,"click",4,"ngIf"],[1,"rounded",3,"src","click"],["src","assets/images/sbm/no-image.png",1,"rounded",3,"click"],["mat-icon-button","","color","primary",1,"delete-button",3,"click"],[1,"material-icons","delete-icon"],[1,"p-3","mt-3","ml-2","mr-2","mb-2","border","rounded-lg","mat-elevation-z1"],["panel3",""],[1,"mat-table-container-border-rounded","mb-3"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["panel4",""],["panel6",""],[3,"_risorsaOid"],[3,"_risorsaOid","portaleOid"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.YNc(0,cQ,8,3,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"i",3),e._uU(4,"add"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,sQ,1,0,"mat-header-cell",7),e.YNc(9,pQ,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,dQ,3,3,"mat-header-cell",7),e.YNc(12,_Q,4,2,"mat-cell",10),e.BQk(),e.ynx(13,11),e.YNc(14,uQ,3,3,"mat-header-cell",7),e.YNc(15,fQ,5,3,"mat-cell",12),e.BQk(),e.ynx(16,13),e.YNc(17,CQ,3,3,"mat-header-cell",7),e.YNc(18,bQ,2,1,"mat-cell",10),e.BQk(),e.ynx(19,14),e.YNc(20,vQ,3,3,"mat-header-cell",7),e.YNc(21,ZQ,2,1,"mat-cell",12),e.BQk(),e.ynx(22,15),e.YNc(23,AQ,3,3,"mat-header-cell",7),e.YNc(24,wQ,2,1,"mat-cell",10),e.BQk(),e.ynx(25,16),e.YNc(26,zQ,3,3,"mat-header-cell",7),e.YNc(27,MQ,2,2,"mat-cell",10),e.BQk(),e.ynx(28,17),e.YNc(29,qQ,3,3,"mat-header-cell",18),e.YNc(30,PQ,2,1,"mat-cell",19),e.BQk(),e.ynx(31,20),e.YNc(32,kQ,1,0,"mat-header-cell",7),e.YNc(33,SQ,4,0,"mat-cell",21),e.BQk(),e.YNc(34,yQ,1,0,"mat-header-row",22),e.YNc(35,JQ,1,1,"mat-row",23),e.qZA()(),e.TgZ(36,"div",24)(37,"button",25),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"Risorse",t.displayedColumns.slice(1,t.displayedColumns.length-1))}),e.TgZ(38,"i",3),e._uU(39,"get_app"),e.qZA()(),e.TgZ(40,"mat-paginator",26),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.YNc(41,EQ,3,3,"button",27),e.YNc(42,N9,153,116,"div",28)),2&o&&(e.Q6J("ngIf",t.showTable&&(null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length)),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",t.showTable),e.xp6(1),e.Q6J("ngIf",!t.showTable))},dependencies:[m.mk,m.sg,m.O5,m.tP,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ee.SK,ee.R7,ye.pp,ye.ib,ye.yz,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.wV,_.JJ,_.On,Me.P,ne.d,ca,da,wi,Te.A,z.X$],styles:[".mat-table[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-top:10px}  .risorseTabGroup .mat-tab-body{overflow:hidden!important}  .risorseTabGroup .mat-tab-body-content{overflow:hidden!important}textarea[_ngcontent-%COMP%]{resize:none!important}.imageHeight[_ngcontent-%COMP%]{max-height:150px!important;text-align:center;width:100%}.imageRow[_ngcontent-%COMP%]{height:150px!important;display:flex;align-items:center;justify-content:center;margin-bottom:1rem;position:relative}img[_ngcontent-%COMP%]{max-height:150px!important;max-width:100%!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#f0f0f0!important}.delete-button[_ngcontent-%COMP%]{position:absolute;bottom:15px;right:15px;height:26px!important;width:26px!important;line-height:26px!important}.delete-icon[_ngcontent-%COMP%]{height:26px!important;width:26px!important;font-size:26px!important;line-height:26px!important}  .risorse-traduzioni-panel .mat-expansion-panel-body{min-height:500px!important}.servizioGiornaliero[_ngcontent-%COMP%]{color:#aaa;font-size:13px;font-style:italic}.tipoCameraPMS[_ngcontent-%COMP%]{color:red;font-size:small;font-style:italic}.warning-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px;color:red}"]});class ua extends f.H{constructor(o){super(),this.apiService=o,this.displayedColumns=["select","codice","descrizione","codiceRoomType","codiceAlternativo"],this.selectionTariffe=new me.Ov(!0,[]),this.initialized=!1}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getTariffePortale(this.oidPortale).subscribe(o=>{this.dataSource=new s.r4(o.data.tariffe||[]),this.dataSource.paginator=this.paginator,this.initialized=!0,this.setIsLoading(!1)})}importaTariffe(o=!0){this.setIsLoading(!0);let t=new d.Fh9(this.oidPortale);t.codiciTariffe=o?null:this.selectionTariffe.selected,this.apiService.importaTariffe(t).subscribe(n=>{this.setIsLoading(!1),this.showInfo("globals.operazioneCompletata").then(()=>{this.dialogRef.close(n.data)})})}resetSelectedTariffe(){this.selectionTariffe=new me.Ov(!0,[])}isAllSelectedTariffe(){return this.selectionTariffe.selected.length==(this.paginator.hasNextPage()?this.paginator.pageSize:this.dataSource.data.length%this.paginator.pageSize)}masterToggleTariffe(){this.isAllSelectedTariffe()?this.selectionTariffe.clear():this.dataSource.data.slice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize).forEach(o=>this.selectionTariffe.select(o.codice))}}function V9(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",3),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",36)(5,"h4",37),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.portali.nessunaTariffa")))}function X9(i,o){1&i&&e._UZ(0,"mat-header-cell")}function j9(i,o){1&i&&(e.TgZ(0,"mat-cell",38)(1,"button",39)(2,"i",40),e._uU(3,"edit"),e.qZA()()())}function W9(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.oid"),""))}function eU(i,o){1&i&&(e.TgZ(0,"i",42),e.ALo(1,"translate"),e._uU(2,"warning"),e.qZA()),2&i&&e.Q6J("matTooltip",e.lcZ(1,1,"sbm.configurazione.portali.erroreConfigurazioneMaster"))}function tU(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"span"),e._uU(2),e.qZA(),e.YNc(3,eU,3,3,"i",41),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.oid),e.xp6(1),e.Q6J("ngIf",t.erroreConfigurazioneMaster)}}function iU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.codice"),""))}function oU(i,o){1&i&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.configurazione.portali.servizioGiornaliero")," "))}function nU(i,o){1&i&&(e.TgZ(0,"div",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.configurazione.portali.promozioniPresenti")," "))}function aU(i,o){if(1&i&&(e.TgZ(0,"div",47),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" Var. Master ",t.codiceMaster+" "+t.valoreVariazionePrezzoMaster+(t.tipoVariazionePrezzoMaster==n.enumTipoValore.Euro?"\u20ac":"%")," ")}}function lU(i,o){1&i&&(e.TgZ(0,"div",48),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.configurazione.portali.senzaDisponibilita")," "))}function rU(i,o){if(1&i&&(e.TgZ(0,"mat-cell",43)(1,"div",44),e._uU(2),e.qZA(),e.YNc(3,oU,3,3,"div",45),e.YNc(4,nU,3,3,"div",45),e.YNc(5,aU,2,1,"div",45),e.YNc(6,lU,3,3,"div",46),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.codice," "),e.xp6(1),e.Q6J("ngIf",t.isDayUse),e.xp6(1),e.Q6J("ngIf",!!t.oidPromozioni),e.xp6(1),e.Q6J("ngIf",!!t.codiceMaster),e.xp6(1),e.Q6J("ngIf",t.isTariffaPMS)}}function cU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.descrizione"),""))}function sU(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function pU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.trattamento")," "))}function dU(i,o){1&i&&(e.TgZ(0,"div",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"globals.nonAttivo")," "))}function mU(i,o){1&i&&(e.TgZ(0,"div",50),e._UZ(1,"span",51),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.portali.trattamentoNonImpostato")))}function _U(i,o){if(1&i&&(e.TgZ(0,"mat-cell",43)(1,"div",44),e._uU(2),e.qZA(),e.YNc(3,dU,3,3,"div",49),e.YNc(4,mU,4,3,"div",49),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(null==t.trattamento?null:t.trattamento.nome),e.xp6(1),e.Q6J("ngIf",!(null!=t.trattamento&&t.trattamento.isDisponibile)),e.xp6(1),e.Q6J("ngIf",null==t.trattamento)}}function uU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tariffaOTA.proprieta.trattamentoUsoSingola")))}function gU(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.trattamentoUsoSingola?null:t.trattamentoUsoSingola.nome)}}function hU(i,o){1&i&&(e.TgZ(0,"mat-header-cell",52),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.isMobile"),""))}function fU(i,o){if(1&i&&(e.TgZ(0,"mat-cell",52),e._UZ(1,"mat-checkbox",53),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isMobile)("disabled",!0)}}function CU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.listino"),""))}function bU(i,o){1&i&&(e.TgZ(0,"div",50),e._UZ(1,"span",51),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.portali.listinoNonImpostato")))}function vU(i,o){if(1&i&&(e.TgZ(0,"mat-cell",43)(1,"div",44),e._uU(2),e.qZA(),e.YNc(3,bU,4,3,"div",49),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(null==t.listino?null:t.listino.nome),e.xp6(1),e.Q6J("ngIf",null==t.listino)}}function TU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.pianoTariffario"),""))}function xU(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.pianoTariffario?null:t.pianoTariffario.nome)}}function ZU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.politicaCancellazione"),""))}function AU(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.politicaCancellazione?null:t.politicaCancellazione.nome)}}function wU(i,o){1&i&&(e.TgZ(0,"mat-header-cell",52),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.ordinamento"),""))}function zU(i,o){if(1&i&&(e.TgZ(0,"mat-cell",52),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ordinamento)}}function MU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.validaDal"),""))}function qU(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.validaDal,"dd/MM/yyyy"))}}function PU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.validaAl"),""))}function kU(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.validaAl,"dd/MM/yyyy"))}}function SU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.prezzoMinimo"),""))}function yU(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.prezzoMinimo>0?e.lcZ(2,1,t.prezzoMinimo):"")}}function JU(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTA.proprieta.prezzoMassimo"),""))}function EU(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.prezzoMassimo>0?e.lcZ(2,1,t.prezzoMassimo):"")}}function NU(i,o){1&i&&e._UZ(0,"mat-header-cell")}function OU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",54)(1,"button",55),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",56),e._uU(3,"delete"),e.qZA()()()}}function LU(i,o){1&i&&e._UZ(0,"mat-header-row",57)}function DU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",58),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function IU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.leggiTariffe())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.leggiTariffe")))}function QU(i,o){if(1&i&&(e.TgZ(0,"p"),e._UZ(1,"app-alert",85),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("message",t)}}function UU(i,o){if(1&i&&(e.TgZ(0,"mat-option",88),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function YU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"mat-form-field",44)(3,"mat-select",86),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.mealPlanType=a)}),e.ALo(4,"translate"),e.YNc(5,UU,3,4,"mat-option",87),e.ALo(6,"selectEnum"),e.qZA()()(),e.TgZ(7,"div",65),e._uU(8," Impostare i pasti compresi in questa tariffa (filtro per trattamento) "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.s9C("placeholder",e.lcZ(4,3,"bo.tariffaOTA.proprieta.mealPlanType")),e.Q6J("ngModel",t.modelEdit.tariffaOTA.mealPlanType),e.xp6(2),e.Q6J("ngForOf",e.xi3(6,5,t.enumMealPlanType,"mealPlanType"))}}function RU(i,o){if(1&i&&(e.TgZ(0,"mat-option",88),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function FU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"mat-form-field",44)(3,"mat-select",86),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.tipoVisualizzazioneTariffe=a)}),e.ALo(4,"translate"),e.YNc(5,RU,3,4,"mat-option",87),e.ALo(6,"selectEnum"),e.qZA()()(),e.TgZ(7,"div",65),e._uU(8," Impostare il tipo di visualizzazione se si vogliono vedere solo le promozioni "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.s9C("placeholder",e.lcZ(4,3,"bo.tariffaOTA.proprieta.tipoVisualizzazioneTariffe")),e.Q6J("ngModel",t.modelEdit.tariffaOTA.tipoVisualizzazioneTariffe),e.xp6(2),e.Q6J("ngForOf",e.xi3(6,5,t.enumTipoVisualizzazioneTariffe,"tipoVisualizzazioneTariffe"))}}function HU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.promozione=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",65),e._uU(5," Impostare la promozione di tipo sconto per questa tariffa "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("dataLoader",t.apiService.getPromozioniViewSelect(t.getPromozioniRQ))("value",t.promozione)("placeholder",e.lcZ(3,3,"bo.tariffaOTA.proprieta.promozione"))}}function KU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.pianoTariffario=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",65),e._uU(5," Impostare il piano tariffario (NB: se impostato la politica di cancellazione e lo sconto verrano presi dal piano tariffario) "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("dataLoader",t.apiService.getPianiTariffariViewSelect())("value",t.modelEdit.tariffaOTA.pianoTariffario)("placeholder",e.lcZ(3,3,"bo.tariffaOTA.proprieta.pianoTariffario"))}}function GU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",64),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.modelEdit.tariffaOTA.codiceHotelDE=a)}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("placeholder",e.lcZ(1,2,"bo.tariffaOTA.proprieta.codiceHotelDE"))("ngModel",t.modelEdit.tariffaOTA.codiceHotelDE)}}function $U(i,o){if(1&i&&(e.TgZ(0,"mat-option",88),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.codice),e.xp6(1),e.hij(" ",t.descrizione," ")}}function BU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-select",86),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.modelEdit.tariffaOTA.codiceHotelDE=a)}),e.ALo(1,"translate"),e.YNc(2,$U,2,2,"mat-option",87),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("ngModel",t.modelEdit.tariffaOTA.codiceHotelDE)("placeholder",e.lcZ(1,3,"bo.tariffaOTA.proprieta.codiceHotelDE")),e.xp6(2),e.Q6J("ngForOf",t.codiciTrattamento)}}function VU(i,o){if(1&i&&(e.TgZ(0,"div",62)(1,"div",63)(2,"mat-form-field",44),e.YNc(3,GU,2,4,"input",89),e.YNc(4,BU,3,5,"mat-select",90),e.qZA()(),e.TgZ(5,"div",65),e._uU(6," Codice trattamento portale (da inserire solo per alcuni portali) "),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",null==t.codiciTrattamento||0==t.codiciTrattamento.length),e.xp6(1),e.Q6J("ngIf",null!=t.codiciTrattamento&&t.codiciTrattamento.length>0)}}function XU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"mat-form-field",44)(3,"input",64),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.codiceAlternativo=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",65),e._uU(6," Se valorizzata verr\xe0 usata quella tariffa per il calcolo dei giorni extra pacchetto e non la configurazione del trattamento "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.tariffaOTA.proprieta.codiceAlternativoExtraPacchetto"))("ngModel",t.modelEdit.tariffaOTA.codiceAlternativo)}}function jU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"mat-form-field",44)(3,"input",64),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.codiceAlternativo=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",65),e._uU(6," Codice alternativo per lo scarico delle prenotazioni "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("placeholder",e.lcZ(4,2,"bo.tariffaOTA.proprieta.codiceAlternativo"))("ngModel",t.modelEdit.tariffaOTA.codiceAlternativo)}}function WU(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.isPrezzoAggiornabile=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",65),e._uU(6," Invia il prezzo della tariffa al portale "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tariffaOTA.isPrezzoAggiornabile),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tariffaOTA.proprieta.isPrezzoAggiornabile")," ")}}function eY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",78)(1,"div",63)(2,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.isMobile=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",65),e._uU(6," Attiva la tariffa solo nella versione mobile "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tariffaOTA.isMobile),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tariffaOTA.proprieta.isMobile")," ")}}function tY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",78)(1,"div",63)(2,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.isOffertaSegreta=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",65),e._uU(6," Offerta segreta. Permette di prenotare la tariffa solo per utenti registrati "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tariffaOTA.isOffertaSegreta),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tariffaOTA.proprieta.isOffertaSegreta")," ")}}function iY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",78)(1,"div",63)(2,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.isVisualizzaServiziBooking=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",65),e._uU(6," Visualizza i servizi della tariffa sotto la descrizione nella pagina dei risultati "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tariffaOTA.isVisualizzaServiziBooking),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tariffaOTA.proprieta.isVisualizzaServiziBooking")," ")}}function oY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",78)(1,"div",63)(2,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.isDayUse=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",65),e._uU(6,' L\u2019impostazione del parametro "Servizi Giornalieri" \xe8 utilizzata per impostare la tariffa come prenotabile nel portale '),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tariffaOTA.isDayUse),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tariffaOTA.proprieta.isDayUse")," ")}}function nY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",78)(1,"div",63)(2,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.isVisualizzaInRichiestaDisponibilita=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",65),e._uU(6," Visualizza la tariffa nel form richiesta "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tariffaOTA.isVisualizzaInRichiestaDisponibilita),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tariffaOTA.proprieta.isVisualizzaInRichiestaDisponibilita")," ")}}function aY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",78)(1,"div",63)(2,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.isInEvidenza=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",65),e._uU(6," Visualizza la tariffa in evidenza come risultato prima delle camere "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tariffaOTA.isInEvidenza),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tariffaOTA.proprieta.isInEvidenza")," ")}}function lY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",78)(1,"div",63)(2,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.isCreaProduzionePMS=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",65),e._uU(6," Crea la produzione (extra/supplementi automatici) su Welcome per le prenotazioni collegate a questa tariffa "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tariffaOTA.isCreaProduzionePMS),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tariffaOTA.proprieta.isCreaProduzionePMS")," ")}}function rY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",78)(1,"div",63)(2,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.isInviaGoogleHotel=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",65),e._uU(6," Invia la tariffa a Google Hotel "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.tariffaOTA.isInviaGoogleHotel),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.tariffaOTA.proprieta.isInviaGoogleHotel")," ")}}function cY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",97),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(3);return a.preventDefault(),e.KtG(l.verificaCodiceMaster())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.verifica")))}function sY(i,o){if(1&i&&(e.TgZ(0,"mat-option",88),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}ua.\u0275fac=function(o){return new(o||ua)(e.Y36(A.s))},ua.\u0275cmp=e.Xpm({type:ua,selectors:[["app-tariffe-modal"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{oidPortale:"oidPortale",dialogRef:"dialogRef"},features:[e.qOj],decls:27,vars:10,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-edit",4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","codice"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","descrizione"],["matColumnDef","codiceRoomType"],["matColumnDef","codiceAlternativo"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["class","mt-3 text-right",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-th-edit"],["color","primary",1,"d-inline-block","mt-2",3,"checked","indeterminate","change"],[1,"mat-td-edit"],["color","primary",1,"d-inline-block","mt-2",3,"checked","click","change"],[1,"mat-table-header"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,O9,5,3,"ng-container",2),e.TgZ(4,"div",3)(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,L9,2,2,"mat-header-cell",7),e.YNc(9,D9,2,1,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,I9,3,3,"mat-header-cell",10),e.YNc(12,Q9,2,1,"mat-cell",11),e.BQk(),e.ynx(13,12),e.YNc(14,U9,3,3,"mat-header-cell",10),e.YNc(15,Y9,2,1,"mat-cell",11),e.BQk(),e.ynx(16,13),e.YNc(17,R9,3,3,"mat-header-cell",10),e.YNc(18,F9,2,1,"mat-cell",11),e.BQk(),e.ynx(19,14),e.YNc(20,H9,3,3,"mat-header-cell",10),e.YNc(21,K9,2,1,"mat-cell",11),e.BQk(),e.YNc(22,G9,1,0,"mat-header-row",15),e.YNc(23,$9,1,0,"mat-row",16),e.qZA()(),e.TgZ(24,"div",17)(25,"mat-paginator",18),e.NdJ("page",function(){return t.resetSelectedTariffe()}),e.qZA()()(),e.YNc(26,B9,7,8,"div",19)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.dataSource&&(null==t.dataSource.data||0==t.dataSource.data.length)),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",t.initialized))},dependencies:[m.O5,V.FC,h.eB,F.aO,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,z.X$],styles:[".mat-column-select[_ngcontent-%COMP%]{width:80px!important;max-width:80px!important;min-width:80px!important}"]});const pY=function(i,o){return{codiceMasterInput:i,"w-100":o}};function dY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",91)(1,"mat-card-title",92),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",62)(5,"div",63)(6,"mat-form-field",93)(7,"input",64),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.codiceMaster=a)}),e.ALo(8,"translate"),e.qZA()(),e.YNc(9,cY,3,3,"a",94),e.qZA(),e.TgZ(10,"div",63)(11,"mat-form-field",44)(12,"mat-select",86,95),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.tipoVariazionePrezzoMaster=a)}),e.ALo(14,"translate"),e.YNc(15,sY,3,4,"mat-option",87),e.ALo(16,"selectEnum"),e.qZA()()(),e.TgZ(17,"div",63)(18,"mat-form-field",44)(19,"input",68),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.tariffaOTA.valoreVariazionePrezzoMaster=a)}),e.ALo(20,"translate"),e.qZA()()()(),e.TgZ(21,"div",96),e._uU(22),e.ALo(23,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,11,"sbm.configurazione.portali.opzioniVariazioneMaster")," "),e.xp6(4),e.Q6J("ngClass",e.WLB(24,pY,!!t.modelEdit.tariffaOTA.codiceMaster,!t.modelEdit.tariffaOTA.codiceMaster)),e.xp6(1),e.Q6J("placeholder",e.lcZ(8,13,"bo.tariffaOTA.proprieta.codiceMaster"))("ngModel",t.modelEdit.tariffaOTA.codiceMaster),e.xp6(2),e.Q6J("ngIf",!!t.modelEdit.tariffaOTA.codiceMaster),e.xp6(3),e.s9C("placeholder",e.lcZ(14,15,"bo.tariffaOTA.proprieta.tipoVariazionePrezzoMaster")),e.Q6J("ngModel",t.modelEdit.tariffaOTA.tipoVariazionePrezzoMaster),e.xp6(3),e.Q6J("ngForOf",e.xi3(16,17,t.enumTipoValore,"tipoValore")),e.xp6(4),e.Q6J("placeholder",e.lcZ(20,20,"bo.tariffaOTA.proprieta.valoreVariazionePrezzoMaster"))("ngModel",t.modelEdit.tariffaOTA.valoreVariazionePrezzoMaster),e.xp6(3),e.Oqu(e.lcZ(23,22,"sbm.configurazione.portali.opzioniVariazioneMasterNote"))}}function mY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",115)(1,"mat-form-field",116)(2,"input",64),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(3);return e.KtG(r.modelEdit.tariffeOTAXLingua[l].descrizione=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"app-editor",117),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(3);return e.KtG(r.modelEdit.tariffeOTAXLingua[l].descrizioneDettagliata=a)}),e.qZA()()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw(3);e.Q6J("label",n.lingua.nome),e.xp6(2),e.Q6J("placeholder",e.lcZ(3,6,"bo.tariffaOTAXLingua.proprieta.descrizione"))("ngModel",l.modelEdit.tariffeOTAXLingua[a].descrizione),e.xp6(3),e.hij(" ",e.lcZ(6,8,"bo.tariffaOTAXLingua.proprieta.descrizioneDettagliata")," "),e.xp6(2),e.Q6J("id","descrizioneDettagliata"+a)("text",l.modelEdit.tariffeOTAXLingua[a].descrizioneDettagliata)}}function _Y(i,o){if(1&i&&(e.ynx(0),e.YNc(1,mY,8,10,"mat-tab",114),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function uY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",118)(1,"mat-checkbox",119),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return a&&l.masterToggleServizi(),e.KtG(l.initAlerts())}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionServizi.hasValue()&&t.isAllSelectedServizi())("indeterminate",t.selectionServizi.hasValue()&&!t.isAllSelectedServizi())}}function gY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",120)(1,"mat-checkbox",121),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return a&&p.selectionServizi.toggle(r.oid),e.KtG(p.initAlerts())}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionServizi.isSelected(t.oid))}}function hY(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.servizio.proprieta.nome"),""))}function fY(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function CY(i,o){1&i&&e._UZ(0,"mat-header-row",57)}function bY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",122),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function vY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",118)(1,"mat-checkbox",119),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return a&&l.masterToggleModalitaPagamento(),e.KtG(l.initAlerts())}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionModalitaPagamento.hasValue()&&t.isAllSelectedModalitaPagamento())("indeterminate",t.selectionModalitaPagamento.hasValue()&&!t.isAllSelectedModalitaPagamento())}}function TY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",120)(1,"mat-checkbox",121),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return a&&p.selectionModalitaPagamento.toggle(r.oid),e.KtG(p.initAlerts())}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionModalitaPagamento.isSelected(t.oid))}}function xY(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.nome"),""))}function ZY(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function AY(i,o){1&i&&e._UZ(0,"mat-header-row",57)}function wY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",122),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function zY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",118)(1,"mat-checkbox",119),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterTogglePromozioni():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionPromozioni.hasValue()&&t.isAllSelectedPromozioni())("indeterminate",t.selectionPromozioni.hasValue()&&!t.isAllSelectedPromozioni())}}function MY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",120)(1,"mat-checkbox",121),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionPromozioni.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionPromozioni.isSelected(t.oid))}}function qY(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.promozione.proprieta.nome"),""))}function PY(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function kY(i,o){1&i&&e._UZ(0,"mat-header-row",57)}function SY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",122),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function yY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",118)(1,"mat-checkbox",119),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleSupplementi():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionSupplementi.hasValue()&&t.isAllSelectedSupplementi())("indeterminate",t.selectionSupplementi.hasValue()&&!t.isAllSelectedSupplementi())}}function JY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",120)(1,"mat-checkbox",121),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionSupplementi.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionSupplementi.isSelected(t.oid))}}function EY(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.supplemento.proprieta.nome"),""))}function NY(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function OY(i,o){1&i&&e._UZ(0,"mat-header-row",57)}function LY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",122),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}const ga=function(i){return{"mb-3 border-bottom":i}},qt=function(){return["nome","select"]};function DY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",98,99)(3,"mat-expansion-panel-header",93),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-tab-group",100),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.selectedIndex=a)}),e.YNc(7,_Y,2,1,"ng-container",61),e.qZA()(),e.TgZ(8,"mat-expansion-panel",101,102)(10,"mat-expansion-panel-header",93),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",103)(14,"mat-table",5),e.ynx(15,104),e.YNc(16,uY,2,2,"mat-header-cell",105),e.YNc(17,gY,2,1,"mat-cell",106),e.BQk(),e.ynx(18,107),e.YNc(19,hY,3,3,"mat-header-cell",7),e.YNc(20,fY,2,1,"mat-cell",10),e.BQk(),e.YNc(21,CY,1,0,"mat-header-row",29),e.YNc(22,bY,1,1,"mat-row",108),e.qZA()()(),e.TgZ(23,"mat-expansion-panel",101,109)(25,"mat-expansion-panel-header",93),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",103)(29,"mat-table",5),e.ynx(30,104),e.YNc(31,vY,2,2,"mat-header-cell",105),e.YNc(32,TY,2,1,"mat-cell",106),e.BQk(),e.ynx(33,107),e.YNc(34,xY,3,3,"mat-header-cell",7),e.YNc(35,ZY,2,1,"mat-cell",10),e.BQk(),e.YNc(36,AY,1,0,"mat-header-row",29),e.YNc(37,wY,1,1,"mat-row",108),e.qZA()()(),e.TgZ(38,"mat-expansion-panel",101,110)(40,"mat-expansion-panel-header",93),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"div",103)(44,"mat-table",5),e.ynx(45,104),e.YNc(46,zY,2,2,"mat-header-cell",105),e.YNc(47,MY,2,1,"mat-cell",106),e.BQk(),e.ynx(48,107),e.YNc(49,qY,3,3,"mat-header-cell",7),e.YNc(50,PY,2,1,"mat-cell",10),e.BQk(),e.YNc(51,kY,1,0,"mat-header-row",29),e.YNc(52,SY,1,1,"mat-row",108),e.qZA()()(),e.TgZ(53,"mat-expansion-panel",101,111)(55,"mat-expansion-panel-header",93),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"mat-checkbox",112),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.isVisualizzaSoloSupplementiAttivi=a)})("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onIsVisualizzaSoloSupplementiAttiviChange())}),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"div",113)(62,"mat-table",5),e.ynx(63,104),e.YNc(64,yY,2,2,"mat-header-cell",105),e.YNc(65,JY,2,1,"mat-cell",106),e.BQk(),e.ynx(66,107),e.YNc(67,EY,3,3,"mat-header-cell",7),e.YNc(68,NY,2,1,"mat-cell",10),e.BQk(),e.YNc(69,OY,1,0,"mat-header-row",29),e.YNc(70,LY,1,1,"mat-row",108),e.qZA()()()()}if(2&i){const t=e.MAs(2),n=e.MAs(9),a=e.MAs(24),l=e.MAs(39),r=e.MAs(54),p=e.oxw(2);e.xp6(3),e.Q6J("ngClass",e.VKq(42,ga,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(5,30,"globals.traduzioni")," "),e.xp6(2),e.Q6J("selectedIndex",p.selectedIndex),e.xp6(1),e.Q6J("ngForOf",p.modelEdit.tariffeOTAXLingua),e.xp6(3),e.Q6J("ngClass",e.VKq(44,ga,n.expanded)),e.xp6(1),e.hij(" ",e.lcZ(12,32,"sbm.configurazione.portali.serviziAbilitati")," "),e.xp6(3),e.Q6J("dataSource",p.servizi),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(46,qt))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(47,qt)),e.xp6(3),e.Q6J("ngClass",e.VKq(48,ga,a.expanded)),e.xp6(1),e.hij(" ",e.lcZ(27,34,"sbm.configurazione.portali.modalitaPagamentoAbilitate")," "),e.xp6(3),e.Q6J("dataSource",p.modalitaPagamento),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(50,qt))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(51,qt)),e.xp6(3),e.Q6J("ngClass",e.VKq(52,ga,l.expanded)),e.xp6(1),e.hij(" ",e.lcZ(42,36,"sbm.configurazione.portali.promozioniAbilitate")," "),e.xp6(3),e.Q6J("dataSource",p.promozioni),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(54,qt))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(55,qt)),e.xp6(3),e.Q6J("ngClass",e.VKq(56,ga,r.expanded)),e.xp6(1),e.hij(" ",e.lcZ(57,38,"sbm.configurazione.portali.supplementiAbilitati")," "),e.xp6(2),e.Q6J("ngModel",p.isVisualizzaSoloSupplementiAttivi),e.xp6(1),e.hij(" ",e.lcZ(60,40,"sbm.configurazione.portali.visualizzaSoloSupplementiAttivi"),""),e.xp6(3),e.Q6J("dataSource",p.supplementiFiltered),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(58,qt))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(59,qt))}}function IY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",123),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function QY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",60),e.YNc(1,QU,2,1,"p",61),e.TgZ(2,"div",62)(3,"div",63)(4,"mat-form-field",44)(5,"input",64),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.codice=a)}),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",65),e._uU(8," Impostare il codice della tariffa "),e.qZA()(),e.TgZ(9,"div",62)(10,"div",63)(11,"mat-form-field",44)(12,"input",64),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.descrizione=a)}),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",65),e._uU(15," Impostare la descrizione interna della tariffa (visualizzabile nel planning e nella extranet) "),e.qZA()(),e.YNc(16,YU,9,8,"div",66),e.YNc(17,FU,9,8,"div",66),e.TgZ(18,"div",62)(19,"div",63)(20,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.trattamento=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.initAlerts())}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",65),e._uU(23," Impostare il trattamento per questa tariffa "),e.qZA()(),e.YNc(24,HU,6,5,"div",66),e.TgZ(25,"div",62)(26,"div",63)(27,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.trattamentoUsoSingola=a)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",65),e._uU(30," Impostare il trattamento Uso Singola per questa tariffa "),e.qZA()(),e.TgZ(31,"div",62)(32,"div",63)(33,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.listino=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.initAlerts())}),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",65),e._uU(36," Impostare il listino per il calcolo del prezzo "),e.qZA()(),e.TgZ(37,"div",62)(38,"div",63)(39,"mat-form-field",44)(40,"input",68),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.tax=a)}),e.ALo(41,"translate"),e.qZA()()(),e.TgZ(42,"div",65),e._uU(43," Tasse (%), valido per alcuni portali che utilizzano il net rate "),e.qZA()(),e.TgZ(44,"div",62)(45,"div",63)(46,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.credito=a)}),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"div",65),e._uU(49," Impostare il credito che verr\xe0 usato in fase di creazione della prenotazione "),e.qZA()(),e.TgZ(50,"div",62)(51,"div",63)(52,"mat-form-field",44)(53,"input",68),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.discount=a)}),e.ALo(54,"translate"),e.qZA()()(),e.TgZ(55,"div",65),e._uU(56," Impostare lo sconto percentuale "),e.qZA()(),e.TgZ(57,"div",62)(58,"div",63)(59,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.politicaCancellazione=a)}),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"div",65),e._uU(62," Impostare la politica di cancellazione. Se vuota verr\xe0 considerata quella nel periodo del listino per il giorno di arrivo "),e.qZA()(),e.YNc(63,KU,6,5,"div",66),e.TgZ(64,"div",62)(65,"div",63)(66,"mat-form-field",44)(67,"input",68),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.ordinamento=a)}),e.ALo(68,"translate"),e.qZA()()(),e.TgZ(69,"div",65),e._uU(70," Impostare l'ordinamento di visualizzazione della tariffa "),e.qZA()(),e.TgZ(71,"div",62)(72,"div",63)(73,"mat-form-field",44)(74,"input",69),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.prezzoMinimo=a)}),e.ALo(75,"translate"),e.qZA()()(),e.TgZ(76,"div",65),e._uU(77," Impostare il prezzo minimo della tariffa "),e.qZA()(),e.TgZ(78,"div",62)(79,"div",63)(80,"mat-form-field",44)(81,"input",69),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.prezzoMassimo=a)}),e.ALo(82,"translate"),e.qZA()()(),e.TgZ(83,"div",65),e._uU(84," Impostare il prezzo massimo della tariffa "),e.qZA()(),e.TgZ(85,"div",62)(86,"div",63)(87,"app-view-select",67),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.arrotondamento=a)}),e.ALo(88,"translate"),e.qZA()(),e.TgZ(89,"div",65),e._uU(90," Impostare l'arrotondamento "),e.qZA()(),e.TgZ(91,"div",62)(92,"div",63)(93,"mat-form-field",44)(94,"input",70),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.validaDal=a)}),e.ALo(95,"translate"),e.qZA(),e._UZ(96,"mat-datepicker-toggle",71),e.TgZ(97,"mat-datepicker-toggle",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.tariffaOTA.validaDal=null)}),e.TgZ(98,"mat-icon",73),e._uU(99,"clear"),e.qZA()(),e._UZ(100,"mat-datepicker",74,75),e.qZA(),e.TgZ(102,"mat-form-field",44)(103,"input",70),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.validaAl=a)}),e.ALo(104,"translate"),e.qZA(),e._UZ(105,"mat-datepicker-toggle",71),e.TgZ(106,"mat-datepicker-toggle",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.tariffaOTA.validaAl=null)}),e.TgZ(107,"mat-icon",73),e._uU(108,"clear"),e.qZA()(),e._UZ(109,"mat-datepicker",74,76),e.qZA()(),e.TgZ(111,"div",65),e._uU(112," Periodo di validit\xe0 della tariffa "),e.qZA()(),e.YNc(113,VU,7,2,"div",66),e.YNc(114,XU,7,4,"div",66),e.YNc(115,jU,7,4,"div",66),e.YNc(116,WU,7,4,"div",66),e.YNc(117,eY,7,4,"div",77),e.YNc(118,tY,7,4,"div",77),e.YNc(119,iY,7,4,"div",77),e.YNc(120,oY,7,4,"div",77),e.TgZ(121,"div",78)(122,"div",63)(123,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.isVisualizzaInAPI=a)}),e._uU(124),e.ALo(125,"translate"),e.qZA()(),e.TgZ(126,"div",65),e._uU(127," Visualizza la tariffa nelle API "),e.qZA()(),e.YNc(128,nY,7,4,"div",77),e.YNc(129,aY,7,4,"div",77),e.TgZ(130,"div",78)(131,"div",63)(132,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.isTariffaPMS=a)}),e._uU(133),e.ALo(134,"translate"),e.qZA()(),e.TgZ(135,"div",65),e._uU(136," Tariffa interna (senza disponibilit\xe0). La tariffa non sar\xe0 presente nel planning e vendibile online "),e.qZA()(),e.TgZ(137,"div",78)(138,"div",63)(139,"mat-checkbox",79),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA.isApplicaVariazioneXTrattamento=a)}),e._uU(140),e.ALo(141,"translate"),e.qZA()(),e.TgZ(142,"div",65),e._uU(143," Applica la variazione per trattamento presente sul listino a tutti i trattamenti derivati alla modifica del prezzo sul planning (da impostare solo sulla tariffa base) "),e.qZA()(),e.YNc(144,lY,7,4,"div",77),e.YNc(145,rY,7,4,"div",77),e.YNc(146,dY,24,27,"mat-card",80),e.YNc(147,DY,71,60,"mat-accordion",0),e.TgZ(148,"div",81)(149,"button",82),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(150),e.ALo(151,"translate"),e.qZA(),e.YNc(152,IY,3,3,"button",83),e.TgZ(153,"button",84),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancel())}),e._uU(154),e.ALo(155,"translate"),e.qZA()()()}if(2&i){const t=e.MAs(101),n=e.MAs(110),a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.alerts),e.xp6(4),e.Q6J("placeholder",e.lcZ(6,72,"bo.tariffaOTA.proprieta.codice"))("ngModel",a.modelEdit.tariffaOTA.codice),e.xp6(7),e.Q6J("placeholder",e.lcZ(13,74,"bo.tariffaOTA.proprieta.descrizione"))("ngModel",a.modelEdit.tariffaOTA.descrizione),e.xp6(4),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(3),e.Q6J("dataLoader",a.apiService.getTrattamentiViewSelect(a.getTrattamentiRQ,!1))("value",a.modelEdit.tariffaOTA.trattamento)("placeholder",e.lcZ(21,76,"bo.tariffaOTA.proprieta.trattamento")),e.xp6(4),e.Q6J("ngIf",!a.isPortalePassepartout),e.xp6(3),e.Q6J("dataLoader",a.apiService.getTrattamentiViewSelect(a.getTrattamentiRQ))("value",a.modelEdit.tariffaOTA.trattamentoUsoSingola)("placeholder",e.lcZ(28,78,"bo.tariffaOTA.proprieta.trattamentoUsoSingola")),e.xp6(6),e.Q6J("dataLoader",a.apiService.getListiniViewSelect(null,!1))("value",a.modelEdit.tariffaOTA.listino)("placeholder",e.lcZ(34,80,"bo.tariffaOTA.proprieta.listino")),e.xp6(7),e.Q6J("placeholder",e.lcZ(41,82,"bo.tariffaOTA.proprieta.tax"))("ngModel",a.modelEdit.tariffaOTA.tax),e.xp6(6),e.Q6J("dataLoader",a.apiService.getCreditiViewSelect())("value",a.modelEdit.tariffaOTA.credito)("placeholder",e.lcZ(47,84,"bo.tariffaOTA.proprieta.credito")),e.xp6(7),e.Q6J("placeholder",e.lcZ(54,86,"bo.tariffaOTA.proprieta.discount"))("ngModel",a.modelEdit.tariffaOTA.discount),e.xp6(6),e.Q6J("dataLoader",a.apiService.getCancellazioniViewSelect())("value",a.modelEdit.tariffaOTA.politicaCancellazione)("placeholder",e.lcZ(60,88,"bo.tariffaOTA.proprieta.politicaCancellazione")),e.xp6(4),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(4),e.Q6J("placeholder",e.lcZ(68,90,"bo.tariffaOTA.proprieta.ordinamento"))("ngModel",a.modelEdit.tariffaOTA.ordinamento),e.xp6(7),e.Q6J("nullable",!0)("placeholder",e.lcZ(75,92,"bo.tariffaOTA.proprieta.prezzoMinimo"))("ngModel",a.modelEdit.tariffaOTA.prezzoMinimo),e.xp6(7),e.Q6J("nullable",!0)("placeholder",e.lcZ(82,94,"bo.tariffaOTA.proprieta.prezzoMassimo"))("ngModel",a.modelEdit.tariffaOTA.prezzoMassimo),e.xp6(6),e.Q6J("dataLoader",a.apiService.getArrotondamentiViewSelect())("value",a.modelEdit.tariffaOTA.arrotondamento)("placeholder",e.lcZ(88,96,"bo.tariffaOTA.proprieta.arrotondamento")),e.xp6(7),e.s9C("placeholder",e.lcZ(95,98,"bo.tariffaOTA.proprieta.validaDal")),e.Q6J("matDatepicker",t)("ngModel",a.modelEdit.tariffaOTA.validaDal),e.xp6(2),e.Q6J("for",t),e.xp6(4),e.Q6J("startAt",a.utility.isNullDate(a.modelEdit.tariffaOTA.validaDal)?a.today:null),e.xp6(3),e.s9C("placeholder",e.lcZ(104,100,"bo.tariffaOTA.proprieta.validaAl")),e.Q6J("matDatepicker",n)("ngModel",a.modelEdit.tariffaOTA.validaAl),e.xp6(2),e.Q6J("for",n),e.xp6(4),e.Q6J("startAt",a.utility.isNullDate(a.modelEdit.tariffaOTA.validaAl)?a.today:null),e.xp6(4),e.Q6J("ngIf",!a.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",a.isPortalePassepartout&&a.isTrattamentoPacchetto()),e.xp6(1),e.Q6J("ngIf",a.tipoPortale==a.enumTipoPortale.Expedia||a.tipoPortale==a.enumTipoPortale.BookingExpert||a.tipoPortale==a.enumTipoPortale.VerticalBooking),e.xp6(1),e.Q6J("ngIf",a.tipoPortale==a.enumTipoPortale.NetStorming||a.tipoPortale==a.enumTipoPortale.Whl),e.xp6(1),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(3),e.Q6J("ngModel",a.modelEdit.tariffaOTA.isVisualizzaInAPI),e.xp6(1),e.hij(" ",e.lcZ(125,102,"bo.tariffaOTA.proprieta.isVisualizzaInAPI")," "),e.xp6(4),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(1),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(3),e.Q6J("ngModel",a.modelEdit.tariffaOTA.isTariffaPMS),e.xp6(1),e.hij(" ",e.lcZ(134,104,"bo.tariffaOTA.proprieta.isTariffaPMS")," "),e.xp6(6),e.Q6J("ngModel",a.modelEdit.tariffaOTA.isApplicaVariazioneXTrattamento),e.xp6(1),e.hij(" ",e.lcZ(141,106,"bo.tariffaOTA.proprieta.isApplicaVariazioneXTrattamento")," "),e.xp6(4),e.Q6J("ngIf",a.isVisualizzaFlagCreaProduzionePMS()),e.xp6(1),e.Q6J("ngIf",a.isGoogleHotelsTravelAttivo),e.xp6(1),e.Q6J("ngIf",!a.isPortaleMaster),e.xp6(1),e.Q6J("ngIf",a.isPortalePassepartout),e.xp6(3),e.Oqu(e.lcZ(151,108,"globals.salva")),e.xp6(2),e.Q6J("ngIf",a.modelEdit.tariffaOTA.oid>0),e.xp6(2),e.Oqu(e.lcZ(155,110,"globals.annulla"))}}class ha extends f.H{set _supplementi(o){null!=o&&(this.supplementi=o,this.onIsVisualizzaSoloSupplementiAttiviChange())}set _tariffe(o){null!=o&&(this.tariffe=o,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.showTable=!0,this.containerService.scrollToTop())}constructor(o,t,n,a){super(),this.apiService=o,this.containerService=t,this.utility=n,this.sessionService=a,this.onTariffeImportate=new e.vpe,this.supplementi=[],this.supplementiFiltered=[],this.selectionServizi=new me.Ov(!0,[]),this.selectionModalitaPagamento=new me.Ov(!0,[]),this.selectionPromozioni=new me.Ov(!0,[]),this.selectionSupplementi=new me.Ov(!0,[]),this.showTable=!0,this.displayedColumns=["edit","oid","codice","descrizione","trattamento.nome","trattamentoUsoSingola.nome","isMobile","listino.nome","pianoTariffario.nome","politicaCancellazione.nome","ordinamento","validaDal","validaAl","prezzoMinimo","prezzoMassimo","delete"],this.selectedIndex=0,this.enumTipoValore=c.jy,this.enumMealPlanType=c.jH,this.enumTipoVisualizzazioneTariffe=c.wY,this.alerts=[],this.getTrattamentiRQ=d.k$g.fromFilter("isDisponibile",c.Hp.IsTrue),this.getPromozioniRQ=d.k$g.fromFilter("tipoPromozione",c.Hp.Equal,c.$l.Sconto.toString(),c.NM.Number),this.promozione=new v.Und(-1),this.isVisualizzaSoloSupplementiAttivi=!0,this.enumTipoPortale=c.Q}ngOnInit(){this.apiService.getTrattamentiViewSelect(this.getTrattamentiRQ,!1).subscribe(o=>{null!=o&&null!=o.data&&o.data.length>0&&(this.trattamentoDefault=o.data[0])}),this.apiService.getListiniViewSelect(null,!1).subscribe(o=>{null!=o&&null!=o.data&&o.data.length>0&&(this.listinoDefault=o.data[0])})}isVisualizzaFlagCreaProduzionePMS(){return!(!this.isPortalePassepartout&&!this.isPortaleCreaProduzionePMS())}isPortaleCreaProduzionePMS(){return this.tipoPortale==c.Q.MyReply||this.tipoPortale==c.Q.Siteminder||this.tipoPortale==c.Q.SimpleBooking||this.tipoPortale==c.Q.VerticalBooking}ngAfterViewInit(){null!=this.dataSource&&(this.dataSource.paginator=this.paginator)}init(){this.selectionServizi=new me.Ov(!0,[]),this.selectionModalitaPagamento=new me.Ov(!0,[]),this.selectionPromozioni=new me.Ov(!0,[]),this.selectionSupplementi=new me.Ov(!0,[]),this.modelEdit=new d.ymY,this.modelEdit&&this.modelEdit.tariffaOTA&&this.isVisualizzaFlagCreaProduzionePMS()&&(this.modelEdit.tariffaOTA.isCreaProduzionePMS=!0),this.modelEdit.tariffaOTA.isInviaGoogleHotel=!0,null==this.modelEdit.tariffaOTA.trattamento&&(this.modelEdit.tariffaOTA.trattamento=this.trattamentoDefault),null==this.modelEdit.tariffaOTA.listino&&(this.modelEdit.tariffaOTA.listino=this.listinoDefault);for(let o of this.lingue){let t=new v.zzg;t.lingua=o,this.modelEdit.tariffeOTAXLingua.push(t)}this.selectedIndex=0}isTrattamentoPacchetto(){return null!=this.modelEdit&&null!=this.modelEdit.tariffaOTA.trattamento&&this.modelEdit.tariffaOTA.trattamento.tipoServizio==c.k8.Pacchetto}initAlerts(){this.alerts=[],this.isPortalePassepartout&&((null==this.selectionServizi||null==this.selectionServizi.selected||this.selectionServizi.selected.length<=0)&&this.alerts.push(new String("sbm.configurazione.portali.tariffaSenzaServizi")),(null==this.selectionModalitaPagamento||null==this.selectionModalitaPagamento.selected||this.selectionModalitaPagamento.selected.length<=0)&&this.alerts.push(new String("sbm.configurazione.portali.tariffaSenzaModalitaDiPagamento")),(null==this.modelEdit.tariffaOTA.listino||this.modelEdit.tariffaOTA.listino.oid<=0)&&this.alerts.push(new String("sbm.configurazione.portali.tariffaSenzaListino")),(null==this.modelEdit.tariffaOTA.trattamento||this.modelEdit.tariffaOTA.trattamento.oid<=0)&&this.alerts.push(new String("sbm.configurazione.portali.tariffaSenzaTrattamento")))}add(){this.init(),this.initAlerts(),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.init(),this.setIsLoading(!0),this.apiService.getTariffeOTAXLingua(o.oid).subscribe(t=>{this.modelEdit.tariffaOTA=Object.assign({},o),null==this.modelEdit.tariffaOTA.isCreaProduzionePMS&&this.isVisualizzaFlagCreaProduzionePMS()&&(this.modelEdit.tariffaOTA.isCreaProduzionePMS=!0);for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.tariffeOTAXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.tariffeOTAXLingua[a].tariffaOTA=this.modelEdit.tariffaOTA,this.modelEdit.tariffeOTAXLingua[a].descrizione=n.descrizione,this.modelEdit.tariffeOTAXLingua[a].descrizioneDettagliata=n.descrizioneDettagliata)}if(null==this.modelEdit.tariffaOTA.trattamento&&(this.modelEdit.tariffaOTA.trattamento=this.trattamentoDefault),null==this.modelEdit.tariffaOTA.listino&&(this.modelEdit.tariffaOTA.listino=this.listinoDefault),this.modelEdit.tariffaOTA.oidServizi){let n=this.modelEdit.tariffaOTA.oidServizi.split(";");for(let a of n)""!=a&&!isNaN(+a)&&-1!=this.servizi.findIndex(l=>l.oid==+a)&&this.selectionServizi.toggle(+a)}if(this.modelEdit.tariffaOTA.oidModalitaPagamento){let n=this.modelEdit.tariffaOTA.oidModalitaPagamento.split(";");for(let a of n)""!=a&&!isNaN(+a)&&-1!=this.modalitaPagamento.findIndex(l=>l.oid==+a)&&this.selectionModalitaPagamento.toggle(+a)}if(this.modelEdit.tariffaOTA.oidPromozioni){let n=this.modelEdit.tariffaOTA.oidPromozioni.split(";");for(let a of n)""!=a&&!isNaN(+a)&&-1!=this.promozioni.findIndex(l=>l.oid==+a)&&this.selectionPromozioni.toggle(+a)}if(this.modelEdit.tariffaOTA.oidSupplementiAbilitati){let n=this.modelEdit.tariffaOTA.oidSupplementiAbilitati.split(";");for(let a of n)""!=a&&!isNaN(+a)&&-1!=this.supplementi.findIndex(l=>l.oid==+a)&&this.selectionSupplementi.toggle(+a)}if(this.modelEdit.tariffaOTA.oidPromozioni&&!isNaN(+this.modelEdit.tariffaOTA.oidPromozioni)){let n=this.utility.findItemByOid(this.promozioni,+this.modelEdit.tariffaOTA.oidPromozioni);this.promozione=null!=n?n:new v.Und(-1)}else this.promozione=new v.Und(-1);this.initAlerts(),this.showTable=!1,this.containerService.scrollToTop(),this.setIsLoading(!1)})}cancel(){this.showTable=!0,this.containerService.scrollToTop()}delete(o){this.setIsLoading(!0);let t=new d.AS0;t.oidTariffa=null!=o?o.oid:this.modelEdit.tariffaOTA.oid,this.apiService.checkDisponibilitaFuturePubblicate(t).subscribe(n=>{this.setIsLoading(!1),n.data?this.showError("sbm.configurazione.portali.impossibileCancellareTariffa"):this.showDialogConfirm("sbm.configurazione.portali.eliminareTariffa").then(a=>{null!=o&&(this.modelEdit=new d.ymY,this.modelEdit.tariffaOTA=o),this.modelEdit.tariffaOTA.isDeleted=!0,this.save()},a=>{})})}save(){this.setIsLoading(!0),this.modelEdit.tariffaOTA.validaDal=this.getDate(this.modelEdit.tariffaOTA.validaDal),this.modelEdit.tariffaOTA.validaAl=this.getDate(this.modelEdit.tariffaOTA.validaAl),this.modelEdit.tariffaOTA.oidServizi=this.selectionServizi.selected.toString().replace(/,/g,";"),this.modelEdit.tariffaOTA.oidModalitaPagamento=this.selectionModalitaPagamento.selected.toString().replace(/,/g,";"),this.modelEdit.tariffaOTA.oidPromozioni=this.selectionPromozioni.selected.toString().replace(/,/g,";"),this.modelEdit.tariffaOTA.oidSupplementiAbilitati=this.selectionSupplementi.selected.toString().replace(/,/g,";"),this.modelEdit.tariffaOTA.portaleXAlbergo=new v.$Ys,this.modelEdit.tariffaOTA.portaleXAlbergo.oid=this.oidPortale,this.isPortalePassepartout||(null!=this.promozione&&this.promozione.oid>0?this.modelEdit.tariffaOTA.oidPromozioni=this.promozione.oid.toString():this.modelEdit.tariffaOTA.oidPromozioni=null);for(let o of this.modelEdit.tariffeOTAXLingua)o.tariffaOTA=this.modelEdit.tariffaOTA;this.apiService.setTariffaOTA(this.modelEdit).subscribe(o=>{if(this.modelEdit.tariffaOTA.oid>0){let t=this.utility.findIndexByOid(this.tariffe,this.modelEdit.tariffaOTA.oid);this.modelEdit.tariffaOTA.isDeleted?this.tariffe.splice(t,1):this.tariffe[t]=o.data.obj}else this.tariffe.push(o.data.obj);this.dataSource=new s.r4(this.tariffe),this.dataSource.paginator=this.paginator,this.showTable=!0,this.containerService.scrollToTop(),this.setIsLoading(!1)})}isAllSelectedServizi(){return this.selectionServizi.selected.length==this.servizi.length}masterToggleServizi(){this.isAllSelectedServizi()?this.selectionServizi.clear():this.servizi.forEach(o=>this.selectionServizi.select(o.oid))}isAllSelectedModalitaPagamento(){return this.selectionModalitaPagamento.selected.length==this.modalitaPagamento.length}masterToggleModalitaPagamento(){this.isAllSelectedModalitaPagamento()?this.selectionModalitaPagamento.clear():this.modalitaPagamento.forEach(o=>this.selectionModalitaPagamento.select(o.oid))}isAllSelectedPromozioni(){return this.selectionPromozioni.selected.length==this.promozioni.length}masterTogglePromozioni(){this.isAllSelectedPromozioni()?this.selectionPromozioni.clear():this.promozioni.forEach(o=>this.selectionPromozioni.select(o.oid))}isAllSelectedSupplementi(){return this.selectionSupplementi.selected.length>=this.supplementiFiltered.length}masterToggleSupplementi(){this.isAllSelectedSupplementi()?this.selectionSupplementi.clear():this.supplementiFiltered.forEach(o=>this.selectionSupplementi.select(o.oid))}leggiTariffe(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh",o.maxHeight="80vh";let t=this.showModalDialog(ua,o),n=t.componentInstance;n.oidPortale=this.oidPortale,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&a.length>0&&this.onTariffeImportate.emit(a)})}verificaCodiceMaster(){this.setIsLoading(!0),this.apiService.verificaCodiceMaster(this.modelEdit.tariffaOTA.oid,this.modelEdit.tariffaOTA.codiceMaster).subscribe(o=>{this.setIsLoading(!1),o.data?this.showInfo("sbm.configurazione.portali.codiceMasterValido"):this.showError("sbm.configurazione.portali.codiceMasterNonValido")})}onIsVisualizzaSoloSupplementiAttiviChange(){this.isVisualizzaSoloSupplementiAttivi?this.supplementiFiltered=this.supplementi.filter(o=>o.isDisponibile):this.supplementiFiltered=this.supplementi}}function UY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",3),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",23)(5,"h4",24),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.portali.nessunaRecensione")))}function YY(i,o){1&i&&e._UZ(0,"mat-header-cell")}function RY(i,o){1&i&&(e.TgZ(0,"mat-cell",25)(1,"button",26)(2,"i",27),e._uU(3,"edit"),e.qZA()()())}function FY(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.recensione.proprieta.data"),""))}function HY(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function KY(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.recensione.proprieta.nome"),""))}function GY(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function $Y(i,o){1&i&&(e.TgZ(0,"mat-header-cell",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.recensione.proprieta.isVisualizzaInHomePage"),""))}function BY(i,o){if(1&i&&(e.TgZ(0,"mat-cell",28),e._UZ(1,"mat-checkbox",29),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isVisualizzaInHomePage)("disabled",!0)}}function VY(i,o){1&i&&(e.TgZ(0,"mat-header-cell",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.recensione.proprieta.isVisualizzaMyPage"),""))}function XY(i,o){if(1&i&&(e.TgZ(0,"mat-cell",28),e._UZ(1,"mat-checkbox",29),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isVisualizzaMyPage)("disabled",!0)}}function jY(i,o){1&i&&e._UZ(0,"mat-header-cell")}function WY(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",30)(1,"button",31),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",32),e._uU(3,"delete"),e.qZA()()()}}function eR(i,o){1&i&&e._UZ(0,"mat-header-row",33)}function tR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",34),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function iR(i,o){if(1&i&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&i){const t=o.index;e.Q6J("value",t+1),e.xp6(1),e.hij(" ",t+1," ")}}function oR(i,o){if(1&i&&(e.TgZ(0,"mat-option",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function nR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",57)(1,"mat-form-field",58)(2,"input",59),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.recensioniXLingua[l].titolo=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",51),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"app-editor",60),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.recensioniXLingua[l].descrizione=a)}),e.qZA()()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw(2);e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.recensioneXLingua.proprieta.titolo")),e.Q6J("ngModel",l.modelEdit.recensioniXLingua[a].titolo),e.xp6(3),e.hij(" ",e.lcZ(6,8,"bo.recensioneXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.recensioniXLingua[a].descrizione)}}function aR(i,o){if(1&i&&(e.ynx(0),e.YNc(1,nR,8,10,"mat-tab",56),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function lR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function rR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",35)(1,"div",36)(2,"div",37)(3,"mat-form-field",38)(4,"input",39),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.recensione.nome=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",37)(7,"mat-form-field",38)(8,"input",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.recensione.data=a)}),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"mat-datepicker-toggle",41)(11,"mat-datepicker",42,43),e.qZA()(),e.TgZ(13,"div",37)(14,"mat-form-field",38)(15,"mat-select",44),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.recensione.voto=a)}),e.ALo(16,"translate"),e.YNc(17,iR,2,2,"mat-option",45),e.qZA()()(),e.TgZ(18,"div",37)(19,"mat-form-field",38)(20,"mat-select",44),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.recensione.fonte=a)}),e.ALo(21,"translate"),e.YNc(22,oR,3,4,"mat-option",45),e.ALo(23,"selectEnum"),e.qZA()()()(),e.TgZ(24,"mat-form-field",38)(25,"input",39),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.recensione.url=a)}),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"mat-form-field",38)(28,"input",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.recensione.limiteCaratteri=a)}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div")(31,"mat-checkbox",47),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.recensione.isVisualizzaInHomePage=a)}),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div")(35,"mat-checkbox",47),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.recensione.isVisualizzaMyPage=a)}),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",48)(39,"mat-tab-group",49),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedIndex=a)}),e.YNc(40,aR,2,1,"ng-container",50),e.qZA()(),e.TgZ(41,"div",51)(42,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.YNc(45,lR,3,3,"button",53),e.TgZ(46,"button",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancel())}),e._uU(47),e.ALo(48,"translate"),e.qZA()()()}if(2&i){const t=e.MAs(12),n=e.oxw();e.xp6(4),e.Q6J("placeholder",e.lcZ(5,26,"bo.recensione.proprieta.nome"))("ngModel",n.modelEdit.recensione.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(9,28,"bo.recensione.proprieta.data")),e.Q6J("matDatepicker",t)("ngModel",n.modelEdit.recensione.data),e.xp6(2),e.Q6J("for",t),e.xp6(1),e.Q6J("startAt",n.utility.isNullDate(n.modelEdit.recensione.data)?n.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(16,30,"bo.recensione.proprieta.voto")),e.Q6J("ngModel",n.modelEdit.recensione.voto),e.xp6(2),e.Q6J("ngForOf",n.utility.counter(5)),e.xp6(3),e.s9C("placeholder",e.lcZ(21,32,"bo.recensione.proprieta.fonte")),e.Q6J("ngModel",n.modelEdit.recensione.fonte),e.xp6(2),e.Q6J("ngForOf",e.xi3(23,34,n.enumFonteRecensione,"fonteRecensione")),e.xp6(3),e.Q6J("placeholder",e.lcZ(26,37,"bo.recensione.proprieta.url"))("ngModel",n.modelEdit.recensione.url),e.xp6(3),e.Q6J("placeholder",e.lcZ(29,39,"bo.recensione.proprieta.limiteCaratteri"))("ngModel",n.modelEdit.recensione.limiteCaratteri),e.xp6(3),e.Q6J("ngModel",n.modelEdit.recensione.isVisualizzaInHomePage),e.xp6(1),e.hij(" ",e.lcZ(33,41,"bo.recensione.proprieta.isVisualizzaInHomePage")," "),e.xp6(3),e.Q6J("ngModel",n.modelEdit.recensione.isVisualizzaMyPage),e.xp6(1),e.hij(" ",e.lcZ(37,43,"bo.recensione.proprieta.isVisualizzaMyPage")," "),e.xp6(3),e.Q6J("selectedIndex",n.selectedIndex),e.xp6(1),e.Q6J("ngForOf",n.modelEdit.recensioniXLingua),e.xp6(3),e.Oqu(e.lcZ(44,45,"globals.salva")),e.xp6(2),e.Q6J("ngIf",n.modelEdit.recensione.oid>0),e.xp6(2),e.Oqu(e.lcZ(48,47,"globals.annulla"))}}ha.\u0275fac=function(o){return new(o||ha)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t),e.Y36(j.m))},ha.\u0275cmp=e.Xpm({type:ha,selectors:[["app-tariffe-portale"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{isPortalePassepartout:"isPortalePassepartout",isPortaleMaster:"isPortaleMaster",tipoPortale:"tipoPortale",oidPortale:"oidPortale",servizi:"servizi",modalitaPagamento:"modalitaPagamento",promozioni:"promozioni",codiciTrattamento:"codiciTrattamento",isGoogleHotelsTravelAttivo:"isGoogleHotelsTravelAttivo",_supplementi:"_supplementi",_tariffe:"_tariffe"},outputs:{onTariffeImportate:"onTariffeImportate"},features:[e.qOj],decls:64,vars:10,consts:[[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","oid"],[4,"matCellDef"],["matColumnDef","codice"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","descrizione"],["matColumnDef","trattamento.nome"],["matColumnDef","trattamentoUsoSingola.nome"],["matColumnDef","isMobile"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","listino.nome"],["matColumnDef","pianoTariffario.nome"],["matColumnDef","politicaCancellazione.nome"],["matColumnDef","ordinamento"],["matColumnDef","validaDal"],["matColumnDef","validaAl"],["matColumnDef","prezzoMinimo"],["matColumnDef","prezzoMassimo"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["mat-flat-button","","color","primary","class","mt-3",3,"click",4,"ngIf"],["class","edit-container mr-n3 ml-n3",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"m-0"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["class","material-icons ml-1 align-middle warning-icon mb-1",3,"matTooltip",4,"ngIf"],[1,"material-icons","ml-1","align-middle","warning-icon","mb-1",3,"matTooltip"],[1,"flex-wrap"],[1,"w-100"],["class","w-100 subtitle",4,"ngIf"],["class","w-100 tariffaPMS",4,"ngIf"],[1,"w-100","subtitle"],[1,"w-100","tariffaPMS"],["class","w-100 color-red",4,"ngIf"],[1,"w-100","color-red"],[1,"warning-icon"],[1,"justify-content-center"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],[1,"edit-container","mr-n3","ml-n3"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-4"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["class","row",4,"ngIf"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"nullable","placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],[3,"startAt"],["validaDal",""],["validaAl",""],["class","row mt-3",4,"ngIf"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],["class","mat-elevation-z0 mt-3 mb-3",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"message"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","placeholder","ngModelChange",4,"ngIf"],[1,"mat-elevation-z0","mt-3","mb-3"],[1,"mb-3"],[3,"ngClass"],["href","#","class","color-pink ml-3 align-bottom mb-3 d-inline-block font-weight-bold",3,"click",4,"ngIf"],["tipoValore",""],[1,"font-weight-bold","text-small"],["href","#",1,"color-pink","ml-3","align-bottom","mb-3","d-inline-block","font-weight-bold",3,"click"],[1,"mat-elevation-z0","border","rounded","tariffe-traduzioni-panel","mb-3"],["panel1",""],[1,"mb-3",3,"selectedIndex","selectedIndexChange"],[1,"mat-elevation-z0","border","rounded","mb-3"],["panel2",""],[1,"mat-table-container-border-rounded","mb-3"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],["panel3",""],["panel4",""],["panel5",""],["color","primary",3,"ngModel","ngModelChange","change"],[1,"mat-table-container-border-rounded","mt-2","mb-3"],[3,"label",4,"ngIf"],[3,"label"],[1,"w-100","mt-3"],[3,"id","text","textChange"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.YNc(0,V9,8,3,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"i",3),e._uU(4,"add"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,X9,1,0,"mat-header-cell",7),e.YNc(9,j9,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,W9,3,3,"mat-header-cell",7),e.YNc(12,tU,4,2,"mat-cell",10),e.BQk(),e.ynx(13,11),e.YNc(14,iU,3,3,"mat-header-cell",7),e.YNc(15,rU,7,5,"mat-cell",12),e.BQk(),e.ynx(16,13),e.YNc(17,cU,3,3,"mat-header-cell",7),e.YNc(18,sU,2,1,"mat-cell",10),e.BQk(),e.ynx(19,14),e.YNc(20,pU,3,3,"mat-header-cell",7),e.YNc(21,_U,5,3,"mat-cell",12),e.BQk(),e.ynx(22,15),e.YNc(23,uU,3,3,"mat-header-cell",7),e.YNc(24,gU,2,1,"mat-cell",10),e.BQk(),e.ynx(25,16),e.YNc(26,hU,3,3,"mat-header-cell",17),e.YNc(27,fU,2,2,"mat-cell",18),e.BQk(),e.ynx(28,19),e.YNc(29,CU,3,3,"mat-header-cell",7),e.YNc(30,vU,4,2,"mat-cell",12),e.BQk(),e.ynx(31,20),e.YNc(32,TU,3,3,"mat-header-cell",7),e.YNc(33,xU,2,1,"mat-cell",10),e.BQk(),e.ynx(34,21),e.YNc(35,ZU,3,3,"mat-header-cell",7),e.YNc(36,AU,2,1,"mat-cell",10),e.BQk(),e.ynx(37,22),e.YNc(38,wU,3,3,"mat-header-cell",17),e.YNc(39,zU,2,1,"mat-cell",18),e.BQk(),e.ynx(40,23),e.YNc(41,MU,3,3,"mat-header-cell",7),e.YNc(42,qU,3,4,"mat-cell",10),e.BQk(),e.ynx(43,24),e.YNc(44,PU,3,3,"mat-header-cell",7),e.YNc(45,kU,3,4,"mat-cell",10),e.BQk(),e.ynx(46,25),e.YNc(47,SU,3,3,"mat-header-cell",7),e.YNc(48,yU,3,3,"mat-cell",10),e.BQk(),e.ynx(49,26),e.YNc(50,JU,3,3,"mat-header-cell",7),e.YNc(51,EU,3,3,"mat-cell",10),e.BQk(),e.ynx(52,27),e.YNc(53,NU,1,0,"mat-header-cell",7),e.YNc(54,OU,4,0,"mat-cell",28),e.BQk(),e.YNc(55,LU,1,0,"mat-header-row",29),e.YNc(56,DU,1,1,"mat-row",30),e.qZA()(),e.TgZ(57,"div",31)(58,"button",32),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"Tariffe",t.displayedColumns.slice(1,t.displayedColumns.length-1))}),e.TgZ(59,"i",3),e._uU(60,"get_app"),e.qZA()(),e.TgZ(61,"mat-paginator",33),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.YNc(62,IU,3,3,"button",34),e.YNc(63,QY,156,112,"div",35)),2&o&&(e.Q6J("ngIf",t.showTable&&(null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length)),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(49),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",t.showTable),e.xp6(1),e.Q6J("ngIf",!t.showTable))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,g.x8,qe.S$,qe.mi,ee.SK,ee.R7,ye.pp,ye.ib,ye.yz,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.wV,_.JJ,_.On,Me.P,nt,ne.d,m.uU,Te.A,ke.f,z.X$],styles:["mat-card[_ngcontent-%COMP%]{border:1px solid lightgrey}mat-card-title[_ngcontent-%COMP%]{font-weight:400;font-size:18px}.mat-table[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-top:10px}.mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#f0f0f0!important}  .tariffe-traduzioni-panel .mat-expansion-panel-body{min-height:400px!important}.subtitle[_ngcontent-%COMP%]{color:#aaa;font-size:13px;font-style:italic}.codiceMasterInput[_ngcontent-%COMP%]{width:calc(100% - 80px)}.text-small[_ngcontent-%COMP%]{font-size:14px}.tariffaPMS[_ngcontent-%COMP%]{color:red;font-size:small;font-style:italic}.warning-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px;color:red}"]});class fa extends f.H{set _recensioni(o){null!=o&&(this.recensioni=o,this.dataSource=new s.r4(o),this.showTable=!0,this.containerService.scrollToTop())}constructor(o,t,n,a){super(),this.apiService=o,this.containerService=t,this.utility=n,this.sessionService=a,this.showTable=!0,this.displayedColumns=["edit","data","nome","isVisualizzaInHomePage","isVisualizzaMyPage","delete"],this.selectedIndex=0,this.enumFonteRecensione=c.Fb}ngAfterViewInit(){null!=this.dataSource&&(this.dataSource.paginator=this.paginator)}init(){this.modelEdit=new d.xXr;for(let o of this.lingue){let t=new v.Cg_;t.lingua=o,this.modelEdit.recensioniXLingua.push(t)}this.selectedIndex=0}add(){this.init(),this.modelEdit.recensione.voto=1,this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.init(),this.setIsLoading(!0),this.apiService.getRecensioniXLingua(o.oid).subscribe(t=>{this.modelEdit.recensione=Object.assign({},o);for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.recensioniXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.recensioniXLingua[a].recensione=this.modelEdit.recensione,this.modelEdit.recensioniXLingua[a].titolo=n.titolo,this.modelEdit.recensioniXLingua[a].descrizione=n.descrizione)}this.modelEdit.recensione.voto<1&&(this.modelEdit.recensione.voto=1),this.modelEdit.recensione.voto>5&&(this.modelEdit.recensione.voto=5),this.showTable=!1,this.containerService.scrollToTop(),this.setIsLoading(!1)})}cancel(){this.showTable=!0,this.containerService.scrollToTop()}delete(o){this.showDialogConfirm("sbm.configurazione.portali.eliminareRecensione").then(t=>{null!=o&&(this.modelEdit=new d.xXr,this.modelEdit.recensione=o),this.modelEdit.recensione.isDeleted=!0,this.save()},t=>{})}save(){this.setIsLoading(!0),this.modelEdit.recensione.portaleXAlbergo=new v.$Ys,this.modelEdit.recensione.portaleXAlbergo.oid=this.oidPortale,null==this.modelEdit.recensione.data?this.modelEdit.recensione.data=this.getDate(this.today):this.modelEdit.recensione.data=this.getDate(this.modelEdit.recensione.data);for(let o of this.modelEdit.recensioniXLingua)o.recensione=this.modelEdit.recensione;this.apiService.setRecensione(this.modelEdit).subscribe(o=>{if(this.modelEdit.recensione.oid>0){let t=this.utility.findIndexByOid(this.recensioni,this.modelEdit.recensione.oid);this.modelEdit.recensione.isDeleted?this.recensioni.splice(t,1):this.recensioni[t]=o.data.obj}else this.recensioni.push(o.data.obj);this.dataSource=new s.r4(this.recensioni),this.dataSource.paginator=this.paginator,this.showTable=!0,this.containerService.scrollToTop(),this.setIsLoading(!1)})}}function cR(i,o){if(1&i&&(e.TgZ(0,"mat-option",5),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}fa.\u0275fac=function(o){return new(o||fa)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t),e.Y36(j.m))},fa.\u0275cmp=e.Xpm({type:fa,selectors:[["app-recensioni"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{oidPortale:"oidPortale",_recensioni:"_recensioni"},features:[e.qOj],decls:30,vars:9,consts:[[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","data"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","isVisualizzaInHomePage"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","isVisualizzaMyPage"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["class","edit-container mr-n3 ml-n3",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"m-0"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[1,"edit-container","mr-n3","ml-n3"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["data",""],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"tab-group-container","mt-3"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],[3,"label",4,"ngIf"],[3,"label"],[1,"w-100","mt-3"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.YNc(0,UY,8,3,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"i",3),e._uU(4,"add"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,YY,1,0,"mat-header-cell",7),e.YNc(9,RY,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,FY,3,3,"mat-header-cell",7),e.YNc(12,HY,3,4,"mat-cell",10),e.BQk(),e.ynx(13,11),e.YNc(14,KY,3,3,"mat-header-cell",7),e.YNc(15,GY,2,1,"mat-cell",10),e.BQk(),e.ynx(16,12),e.YNc(17,$Y,3,3,"mat-header-cell",13),e.YNc(18,BY,2,2,"mat-cell",14),e.BQk(),e.ynx(19,15),e.YNc(20,VY,3,3,"mat-header-cell",13),e.YNc(21,XY,2,2,"mat-cell",14),e.BQk(),e.ynx(22,16),e.YNc(23,jY,1,0,"mat-header-cell",7),e.YNc(24,WY,4,0,"mat-cell",17),e.BQk(),e.YNc(25,eR,1,0,"mat-header-row",18),e.YNc(26,tR,1,1,"mat-row",19),e.qZA()(),e.TgZ(27,"div",20)(28,"mat-paginator",21),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.YNc(29,rR,49,49,"div",22)),2&o&&(e.Q6J("ngIf",t.showTable&&(null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length)),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",!t.showTable))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,ee.SK,ee.R7,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.wV,_.JJ,_.On,Me.P,m.uU,Te.A,z.X$],styles:[".tab-group-container[_ngcontent-%COMP%]{min-height:400px}"]});class Mi extends f.H{constructor(){super(),this.enumTipoValore=c.jy}}Mi.\u0275fac=function(o){return new(o||Mi)},Mi.\u0275cmp=e.Xpm({type:Mi,selectors:[["app-derived-price-edit"]],inputs:{derivedPrice:"derivedPrice",dialogRef:"dialogRef"},features:[e.qOj],decls:14,vars:19,consts:[[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"click"],[3,"value"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-form-field",0)(1,"input",1),e.NdJ("ngModelChange",function(a){return t.derivedPrice.persone=a}),e.ALo(2,"translate"),e.qZA()(),e.TgZ(3,"mat-form-field",0)(4,"input",1),e.NdJ("ngModelChange",function(a){return t.derivedPrice.variazione=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"mat-form-field",0)(7,"mat-select",2),e.NdJ("ngModelChange",function(a){return t.derivedPrice.tipoVariazione=a}),e.ALo(8,"translate"),e.YNc(9,cR,3,4,"mat-option",3),e.ALo(10,"selectEnum"),e.qZA()(),e.TgZ(11,"button",4),e.NdJ("click",function(){return t.dialogRef.close(t.derivedPrice)}),e._uU(12),e.ALo(13,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("placeholder",e.lcZ(2,8,"bo.tariffaOTAXTipoCameraOTA.proprieta.persone"))("ngModel",t.derivedPrice.persone),e.xp6(3),e.Q6J("placeholder",e.lcZ(5,10,"bo.tariffaOTAXTipoCameraOTA.proprieta.variazione"))("ngModel",t.derivedPrice.variazione),e.xp6(3),e.Q6J("ngModel",t.derivedPrice.tipoVariazione)("placeholder",e.lcZ(8,12,"bo.tariffaOTAXTipoCameraOTA.proprieta.tipoVariazione")),e.xp6(2),e.Q6J("ngForOf",e.xi3(10,14,t.enumTipoValore,"tipoValore")),e.xp6(3),e.Oqu(e.lcZ(13,17,"globals.salva")))},dependencies:[m.sg,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,_.Fj,_.wV,_.JJ,_.On,Te.A,z.X$]});const is=function(i){return{"mt-3":i}};function sR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw().index,T=e.oxw(2);return e.KtG(T.rq[p*T.tariffe.length+r].isSelected=a)}),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw().index,l=e.oxw(2);e.Q6J("ngClass",e.VKq(3,is,0==n)),e.xp6(1),e.Q6J("ngModel",l.rq[a*l.tariffe.length+n].isSelected),e.xp6(1),e.Oqu(t.descrizione)}}function pR(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"h5"),e._uU(2),e.qZA(),e.YNc(3,sR,3,5,"div",7),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Q6J("ngClass",e.VKq(3,is,n>0)),e.xp6(2),e.Oqu(t.descrizione),e.xp6(1),e.Q6J("ngForOf",a.tariffe)}}function dR(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,pR,4,5,"div",3),e.TgZ(2,"div",4)(3,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tipiCamera),e.xp6(2),e.Q6J("disabled",t.checkDisabled()),e.xp6(1),e.Oqu(e.lcZ(5,3,"globals.salva"))}}class Ca extends f.H{constructor(o){super(),this.apiService=o,this.rq=[],this.initialized=!1}ngOnInit(){this.setIsLoading(!0),this.apiService.getTipiCameraOTA(this.oidPortale).subscribe(o=>{this.tipiCamera=o.data,this.apiService.getTariffeOTA(this.oidPortale).subscribe(t=>{this.tariffe=t.data;for(let n of this.tipiCamera)for(let a of this.tariffe){let l=new v.zm6;l.portaleXAlbergo=new v.$Ys(this.oidPortale),l.tipoCameraOTA=new v.OR4(n.oid),l.tariffaOTA=new v.HfG(a.oid),this.rq.push(l)}this.initialized=!0,this.setIsLoading(!1)})})}save(){this.setIsLoading(!0),this.apiService.setTariffaOTAXTipoCameraOTAMultiple(this.rq.filter(o=>o.isSelected)).subscribe(o=>{this.setIsLoading(!1),this.dialogRef.close(o.data)})}checkDisabled(){return this.rq.every(o=>!o.isSelected)}}function mR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",7),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",25)(5,"h4",26),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.portali.nessunaRisorsaTariffa")))}function _R(i,o){1&i&&e._UZ(0,"mat-header-cell")}function uR(i,o){1&i&&(e.TgZ(0,"mat-cell",27)(1,"button",28)(2,"i",29),e._uU(3,"edit"),e.qZA()()())}function gR(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTAXTipoCameraOTA.proprieta.tipoCameraOTA"),""))}function hR(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div")(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",30),e._uU(5),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(null==t.tipoCameraOTA?null:t.tipoCameraOTA.descrizione),e.xp6(2),e.Oqu(null==t.tipoCameraOTA?null:t.tipoCameraOTA.codice)}}function fR(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTAXTipoCameraOTA.proprieta.tariffaOTA"),""))}function CR(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div")(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",30),e._uU(5),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(null==t.tariffaOTA?null:t.tariffaOTA.descrizione),e.xp6(2),e.Oqu(null==t.tariffaOTA?null:t.tariffaOTA.codice)}}function bR(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTAXTipoCameraOTA.proprieta.isUsoSingola"),""))}function vR(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",31),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isUsoSingola)("disabled",!0)}}function TR(i,o){1&i&&e._UZ(0,"mat-header-cell")}function xR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",32)(1,"button",33),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",34),e._uU(3,"delete"),e.qZA()()()}}function ZR(i,o){1&i&&e._UZ(0,"mat-header-row",35)}function AR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",36),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function wR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",38)(1,"mat-form-field",56)(2,"input",57),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.codicePianoRestrizioni=a)}),e.ALo(3,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.s9C("placeholder",e.lcZ(3,2,"bo.tariffaOTAXTipoCameraOTA.proprieta.codicePianoRestrizioni")),e.Q6J("ngModel",t.modelEdit.codicePianoRestrizioni)}}function zR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",58)(1,"mat-checkbox",59),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(a?l.masterToggleComponentiXVariazione():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selectionComponentiXVariazione.hasValue()&&t.isAllSelectedComponentiXVariazione())("indeterminate",t.selectionComponentiXVariazione.hasValue()&&!t.isAllSelectedComponentiXVariazione())}}function MR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",60)(1,"mat-checkbox",61),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(a?p.selectionComponentiXVariazione.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionComponentiXVariazione.isSelected(t.oid))}}function qR(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.componenteXVariazione.proprieta.nome"),""))}function PR(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function kR(i,o){1&i&&e._UZ(0,"mat-header-row",35)}function SR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",62),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function yR(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",56)(2,"input",68),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.modelEdit.leadingOccupancy=a)}),e.ALo(3,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(3);e.xp6(2),e.s9C("placeholder",e.lcZ(3,2,"bo.tariffaOTAXTipoCameraOTA.proprieta.leadingOccupancy")),e.Q6J("ngModel",t.modelEdit.leadingOccupancy)}}function JR(i,o){1&i&&(e.TgZ(0,"div",69)(1,"h4",26),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.portali.nessunDerivedPrice")))}function ER(i,o){1&i&&e._UZ(0,"mat-header-cell")}function NR(i,o){1&i&&(e.TgZ(0,"mat-cell",27)(1,"button",28)(2,"i",29),e._uU(3,"edit"),e.qZA()()())}function OR(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTAXTipoCameraOTA.proprieta.persone"),""))}function LR(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.persone)}}function DR(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTAXTipoCameraOTA.proprieta.variazione"),""))}function IR(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.variazione)}}function QR(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tariffaOTAXTipoCameraOTA.proprieta.tipoVariazione"),""))}function UR(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoValore,t.tipoVariazione,"tipoValore")))}}function YR(i,o){1&i&&e._UZ(0,"mat-header-cell")}function RR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",32)(1,"button",33),e.NdJ("click",function(a){const r=e.CHM(t).index,p=e.oxw(4);return a.stopPropagation(),e.KtG(p.deleteDerivedPrice(r))}),e.TgZ(2,"i",34),e._uU(3,"delete"),e.qZA()()()}}function FR(i,o){1&i&&e._UZ(0,"mat-header-row",35)}function HR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",75),e.NdJ("click",function(){const a=e.CHM(t),l=a.$implicit,r=a.index,p=e.oxw(4);return e.KtG(p.editDerivedPrice(l,r))}),e.qZA()}}function KR(i,o){if(1&i&&(e.TgZ(0,"div",70)(1,"mat-table",9),e.ynx(2,10),e.YNc(3,ER,1,0,"mat-header-cell",11),e.YNc(4,NR,4,0,"mat-cell",12),e.BQk(),e.ynx(5,71),e.YNc(6,OR,3,3,"mat-header-cell",11),e.YNc(7,LR,2,1,"mat-cell",14),e.BQk(),e.ynx(8,72),e.YNc(9,DR,3,3,"mat-header-cell",11),e.YNc(10,IR,2,1,"mat-cell",14),e.BQk(),e.ynx(11,73),e.YNc(12,QR,3,3,"mat-header-cell",11),e.YNc(13,UR,3,3,"mat-cell",14),e.BQk(),e.ynx(14,17),e.YNc(15,YR,1,0,"mat-header-cell",11),e.YNc(16,RR,4,0,"mat-cell",18),e.BQk(),e.YNc(17,FR,1,0,"mat-header-row",19),e.YNc(18,HR,1,0,"mat-row",74),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("dataSource",t.modelEdit.derivedPrices.derivedPrices),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumnsDerivedPrices)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsDerivedPrices)}}function GR(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.save(!0))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.portali.pubblicaDerivedPrices")))}Ca.\u0275fac=function(o){return new(o||Ca)(e.Y36(A.s))},Ca.\u0275cmp=e.Xpm({type:Ca,selectors:[["app-risorse-tariffe-add"]],inputs:{oidPortale:"oidPortale",dialogRef:"dialogRef"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"ngClass"],["class","ml-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"ml-3",3,"ngClass"],["color","primary",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,dR,6,5,"ng-container",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.initialized))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,F.aO,_.JJ,_.On,z.X$]});const os=function(i){return{"mb-3 border-bottom":i}};function $R(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",63,64)(2,"mat-expansion-panel-header",44),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,yR,4,4,"ng-container",5),e.TgZ(6,"div",65)(7,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addDerivedPrice())}),e.TgZ(8,"i",7),e._uU(9,"add"),e.qZA()()(),e.YNc(10,JR,4,3,"div",66),e.YNc(11,KR,19,4,"div",67),e.YNc(12,GR,4,3,"ng-container",5),e.qZA()}if(2&i){const t=e.MAs(1),n=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(8,os,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(4,6,"sbm.configurazione.portali.derivedPrices")," "),e.xp6(2),e.Q6J("ngIf",n.isShowLeadingOccupancy()),e.xp6(5),e.Q6J("ngIf",null==n.modelEdit.derivedPrices||null==n.modelEdit.derivedPrices.derivedPrices||0==n.modelEdit.derivedPrices.derivedPrices.length),e.xp6(1),e.Q6J("ngIf",null!=n.modelEdit.derivedPrices&&null!=n.modelEdit.derivedPrices.derivedPrices&&n.modelEdit.derivedPrices.derivedPrices.length>0),e.xp6(1),e.Q6J("ngIf",n.isShowPubblicaDerivedPrices())}}function BR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}const ns=function(){return["nome","select"]};function VR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",2)(2,"div",38)(3,"app-view-select",39),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tipoCameraOTA=a)}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",38)(6,"app-view-select",39),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tariffaOTA=a)}),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,wR,4,4,"div",40),e.TgZ(9,"div",38)(10,"mat-checkbox",41),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.isUsoSingola=a)}),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"mat-accordion")(14,"mat-expansion-panel",42,43)(16,"mat-expansion-panel-header",44),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",45)(20,"mat-table",9),e.ynx(21,46),e.YNc(22,zR,2,2,"mat-header-cell",47),e.YNc(23,MR,2,1,"mat-cell",48),e.BQk(),e.ynx(24,49),e.YNc(25,qR,3,3,"mat-header-cell",11),e.YNc(26,PR,2,1,"mat-cell",14),e.BQk(),e.YNc(27,kR,1,0,"mat-header-row",19),e.YNc(28,SR,1,1,"mat-row",50),e.qZA()()(),e.YNc(29,$R,13,10,"mat-expansion-panel",51),e.qZA(),e.TgZ(30,"div",52)(31,"button",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.YNc(34,BR,3,3,"button",54),e.TgZ(35,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancel())}),e._uU(36),e.ALo(37,"translate"),e.qZA()()()}if(2&i){const t=e.MAs(15),n=e.oxw();e.xp6(3),e.Q6J("dataLoader",n.apiService.getTipiCameraOTAViewSelect(n.oidPortale,null,!1))("value",n.modelEdit.tipoCameraOTA)("placeholder",e.lcZ(4,19,"bo.tariffaOTAXTipoCameraOTA.proprieta.tipoCameraOTA")),e.xp6(3),e.Q6J("dataLoader",n.apiService.getTariffeOTAViewSelect(n.oidPortale,null,!1))("value",n.modelEdit.tariffaOTA)("placeholder",e.lcZ(7,21,"bo.tariffaOTAXTipoCameraOTA.proprieta.tariffaOTA")),e.xp6(2),e.Q6J("ngIf",n.isShowCodicePianoRestrizioni()),e.xp6(2),e.Q6J("ngModel",n.modelEdit.isUsoSingola),e.xp6(1),e.hij(" ",e.lcZ(12,23,"bo.tariffaOTAXTipoCameraOTA.proprieta.isUsoSingola")," "),e.xp6(5),e.Q6J("ngClass",e.VKq(31,os,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(18,25,"bo.tariffaOTAXTipoCameraOTA.proprieta.oidComponentiXVariazione")," "),e.xp6(3),e.Q6J("dataSource",n.componentiXVariazione),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(33,ns))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(34,ns)),e.xp6(1),e.Q6J("ngIf",n.hasModelloPrezzo),e.xp6(3),e.Oqu(e.lcZ(33,27,"globals.salva")),e.xp6(2),e.Q6J("ngIf",n.modelEdit.oid>0),e.xp6(2),e.Oqu(e.lcZ(37,29,"globals.annulla"))}}class ba extends f.H{set _risorseTariffe(o){null!=o&&(this.risorseTariffe=o,this.dataSource=new s.r4(o),this.dataSource.paginator=this.paginator,this.showTable=!0,this.containerService.scrollToTop())}constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.selectionComponentiXVariazione=new me.Ov(!0,[]),this.filters=[],this.showTable=!0,this.displayedColumns=["edit","tipoCameraOTA","tariffaOTA","isUsoSingola","delete"],this.displayedColumnsDerivedPrices=["edit","persone","variazione","tipoVariazione","delete"],this.enumTipoValore=c.jy}ngOnInit(){this.filters.push(new d.wn$("tipoCameraOTA.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tariffaOTA.oid",c.Hp.Equal,"",c.NM.Number))}ngAfterViewInit(){null!=this.dataSource&&(this.dataSource.paginator=this.paginator)}init(){this.selectionComponentiXVariazione=new me.Ov(!0,[]),this.modelEdit=new v.zm6}isShowLeadingOccupancy(){return!(!this.portaleXAlbergo||this.portaleXAlbergo.tipoPortale!=c.Q.BookingCom)}isShowPubblicaDerivedPrices(){return!(!this.portaleXAlbergo||this.portaleXAlbergo.tipoPortale!=c.Q.BookingCom)}isShowCodicePianoRestrizioni(){return!(!this.portaleXAlbergo||this.portaleXAlbergo.tipoPortale!=c.Q.WuBook)}onSearch(o,t){this.setIsLoading(!0),this.filters[o].value=t;let n=new d.k$g;n.filters=this.utility.getFilters(this.filters),this.apiService.getTariffeOTAXTipiCameraOTAFilter(this.oidPortale,n).subscribe(a=>{this.risorseTariffe=a.data,this.dataSource=new s.r4(this.risorseTariffe),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)}),this.paginator.firstPage()}add(){this.init(),this.showTable=!1,this.containerService.scrollToTop()}addMultiple(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh";let t=this.showModalDialog(Ca,o),n=t.componentInstance;n.oidPortale=this.oidPortale,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&(a.forEach(l=>this.risorseTariffe.push(l)),this.dataSource=new s.r4(this.risorseTariffe),this.dataSource.paginator=this.paginator)})}edit(o){if(this.init(),this.modelEdit=JSON.parse(JSON.stringify(o)),this.modelEdit.oidComponentiXVariazione){let t=this.modelEdit.oidComponentiXVariazione.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.componentiXVariazione.findIndex(a=>a.oid==+n)&&this.selectionComponentiXVariazione.toggle(+n)}this.showTable=!1,this.containerService.scrollToTop()}cancel(){this.showTable=!0,this.containerService.scrollToTop()}delete(o){this.showDialogConfirm("sbm.configurazione.portali.eliminareRisorsaTariffa").then(t=>{null!=o&&(this.modelEdit=o),this.modelEdit.isDeleted=!0,this.save()},t=>{})}save(o=!1){this.setIsLoading(!0),this.modelEdit.oidComponentiXVariazione=this.selectionComponentiXVariazione.selected.toString().replace(/,/g,";"),this.modelEdit.portaleXAlbergo=new v.$Ys,this.modelEdit.portaleXAlbergo.oid=this.oidPortale,this.apiService.setTariffaOTAXTipoCameraOTA(this.modelEdit).subscribe(t=>{if(this.modelEdit.oid>0){let n=this.utility.findIndexByOid(this.risorseTariffe,this.modelEdit.oid);this.modelEdit.isDeleted?this.risorseTariffe.splice(n,1):this.risorseTariffe[n]=t.data.obj}else this.risorseTariffe.push(t.data.obj);if(this.dataSource=new s.r4(this.risorseTariffe),this.dataSource.paginator=this.paginator,o){this.modelEdit=t.data.obj;let n=new d.mEi;n.oidTariffaOTAXTipoCameraOTA=this.modelEdit.oid,this.apiService.pubblicaDerivedPrices(n).subscribe(a=>{this.setIsLoading(!1),null!=a?a.dettaglioErrore?this.showError("sbm.configurazione.portali.errorePubblicazione").then(()=>{this.showInfo(a.dettaglioErrore)}):this.showInfo("sbm.configurazione.portali.successoPubblicazione").then(()=>{a.dettaglioWarning&&this.showInfo(a.dettaglioWarning)}):this.showError("sbm.configurazione.portali.errorePubblicazione")})}else this.showTable=!0,this.containerService.scrollToTop(),this.setIsLoading(!1)})}isAllSelectedComponentiXVariazione(){return this.selectionComponentiXVariazione.selected.length==this.componentiXVariazione.length}masterToggleComponentiXVariazione(){this.isAllSelectedComponentiXVariazione()?this.selectionComponentiXVariazione.clear():this.componentiXVariazione.forEach(o=>this.selectionComponentiXVariazione.select(o.oid))}addDerivedPrice(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog(Mi,o),n=t.componentInstance;n.derivedPrice=new d.usi,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&(this.modelEdit.derivedPrices.derivedPrices.push(a),this.modelEdit.derivedPrices.derivedPrices=this.modelEdit.derivedPrices.derivedPrices.slice())})}editDerivedPrice(o,t){let n=new d.Zpt;n.width="80vw";let a=this.showModalDialog(Mi,n),l=a.componentInstance;l.derivedPrice=JSON.parse(JSON.stringify(o)),l.dialogRef=a,a.afterClosed().subscribe(r=>{null!=r&&(this.modelEdit.derivedPrices.derivedPrices[t]=r,this.modelEdit.derivedPrices.derivedPrices=this.modelEdit.derivedPrices.derivedPrices.slice())})}deleteDerivedPrice(o){this.showDialogConfirm("sbm.configurazione.portali.eliminareDerivedPrice").then(t=>{this.modelEdit.derivedPrices.derivedPrices.splice(o,1),this.modelEdit.derivedPrices.derivedPrices=this.modelEdit.derivedPrices.derivedPrices.slice()},t=>{})}}function XR(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",3),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",19)(5,"h4",20),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.portali.nessunSourceBrand")))}function jR(i,o){1&i&&e._UZ(0,"mat-header-cell")}function WR(i,o){1&i&&(e.TgZ(0,"mat-cell",21)(1,"button",22)(2,"i",23),e._uU(3,"edit"),e.qZA()()())}function eF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.sourceBrandXAgenzia.proprieta.agenzia")))}function tF(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.agenzia?null:t.agenzia.ragioneSociale)}}function iF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.sourceBrandXAgenzia.proprieta.codiceSourceBrand")))}function oF(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codiceSourceBrand)}}function nF(i,o){1&i&&e._UZ(0,"mat-header-cell")}function aF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",24)(1,"button",25),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",26),e._uU(3,"delete"),e.qZA()()()}}function lF(i,o){1&i&&e._UZ(0,"mat-header-row",27)}function rF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",28),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function cF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function sF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"app-view-select",32),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.sourceBrand.agenzia=a)}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",31)(6,"mat-form-field",33)(7,"input",34),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.sourceBrand.codiceSourceBrand=a)}),e.ALo(8,"translate"),e.qZA()()()(),e.TgZ(9,"div",35)(10,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,cF,3,3,"button",37),e.TgZ(14,"button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancel())}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("dataLoader",t.apiService.getAgenzieViewSelect(null,!1))("value",t.sourceBrand.agenzia)("placeholder",e.lcZ(4,8,"bo.sourceBrandXAgenzia.proprieta.agenzia")),e.xp6(4),e.Q6J("placeholder",e.lcZ(8,10,"bo.sourceBrandXAgenzia.proprieta.codiceSourceBrand"))("ngModel",t.sourceBrand.codiceSourceBrand),e.xp6(4),e.Oqu(e.lcZ(12,12,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.sourceBrand.oid>0),e.xp6(2),e.Oqu(e.lcZ(16,14,"globals.annulla"))}}ba.\u0275fac=function(o){return new(o||ba)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},ba.\u0275cmp=e.Xpm({type:ba,selectors:[["app-risorse-tariffe"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{portaleXAlbergo:"portaleXAlbergo",hasModelloPrezzo:"hasModelloPrezzo",oidPortale:"oidPortale",componentiXVariazione:"componentiXVariazione",_risorseTariffe:"_risorseTariffe"},features:[e.qOj],decls:39,vars:21,consts:[[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],["displayMember","descrizione",3,"dataLoader","placeholder","valueChange"],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","tipoCameraOTA"],[4,"matCellDef"],["matColumnDef","tariffaOTA"],["matColumnDef","isUsoSingola"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],["class","edit-container mr-n3 ml-n3",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"m-0"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"font-small","font-italic"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[1,"edit-container","mr-n3","ml-n3"],[1,"col-3"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["class","col-3",4,"ngIf"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[1,"mat-elevation-z0","border","rounded"],["panel1",""],[3,"ngClass"],[1,"mat-table-container-border-rounded","mb-3"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],["class","mat-elevation-z0 border rounded mt-3",4,"ngIf"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],[1,"mat-elevation-z0","border","rounded","mt-3"],["panel2",""],[1,"mt-3"],["class","border rounded-lg mat-elevation-z1 p-4",4,"ngIf"],["class","mat-table-container-border-rounded",4,"ngIf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-table-container-border-rounded"],["matColumnDef","persone"],["matColumnDef","variazione"],["matColumnDef","tipoVariazione"],[3,"click",4,"matRowDef","matRowDefColumns"],[3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-view-select",4),e.NdJ("valueChange",function(a){return t.onSearch(0,a.oid>0?a.oid.toString():"")}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",3)(7,"app-view-select",4),e.NdJ("valueChange",function(a){return t.onSearch(1,a.oid>0?a.oid.toString():"")}),e.ALo(8,"translate"),e.qZA()()()(),e.YNc(9,mR,8,3,"div",5),e.TgZ(10,"div",0)(11,"button",6),e.NdJ("click",function(){return t.add()}),e.TgZ(12,"i",7),e._uU(13,"add"),e.qZA()(),e.TgZ(14,"div",8)(15,"mat-table",9),e.ynx(16,10),e.YNc(17,_R,1,0,"mat-header-cell",11),e.YNc(18,uR,4,0,"mat-cell",12),e.BQk(),e.ynx(19,13),e.YNc(20,gR,3,3,"mat-header-cell",11),e.YNc(21,hR,6,2,"mat-cell",14),e.BQk(),e.ynx(22,15),e.YNc(23,fR,3,3,"mat-header-cell",11),e.YNc(24,CR,6,2,"mat-cell",14),e.BQk(),e.ynx(25,16),e.YNc(26,bR,3,3,"mat-header-cell",11),e.YNc(27,vR,2,2,"mat-cell",14),e.BQk(),e.ynx(28,17),e.YNc(29,TR,1,0,"mat-header-cell",11),e.YNc(30,xR,4,0,"mat-cell",18),e.BQk(),e.YNc(31,ZR,1,0,"mat-header-row",19),e.YNc(32,AR,1,1,"mat-row",20),e.qZA()(),e.TgZ(33,"div",21)(34,"mat-paginator",22),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(35,"button",23),e.NdJ("click",function(){return t.addMultiple()}),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.YNc(38,VR,38,35,"div",24)),2&o&&(e.Q6J("hidden",!t.showTable),e.xp6(4),e.Q6J("dataLoader",t.apiService.getTipiCameraOTAViewSelect(t.oidPortale))("placeholder",e.lcZ(5,15,"bo.tariffaOTAXTipoCameraOTA.proprieta.tipoCameraOTA")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTariffeOTAViewSelect(t.oidPortale))("placeholder",e.lcZ(8,17,"bo.tariffaOTAXTipoCameraOTA.proprieta.tariffaOTA")),e.xp6(2),e.Q6J("ngIf",t.showTable&&(null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length)),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(2),e.Oqu(e.lcZ(37,19,"sbm.configurazione.portali.aggiungi")),e.xp6(2),e.Q6J("ngIf",!t.showTable))},dependencies:[m.mk,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ye.pp,ye.ib,ye.yz,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.wV,_.JJ,_.On,ne.d,z.X$],styles:[".mat-table[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-top:10px}.mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#f0f0f0!important}"]});class va extends f.H{set _sourceBrands(o){null!=o&&(this.dataSource=new s.r4(o),this.showTable=!0,this.containerService.scrollToTop())}constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.displayedColumns=["edit","agenzia","codiceSourceBrand","delete"],this.showTable=!0}ngAfterViewInit(){null!=this.dataSource&&(this.dataSource.paginator=this.paginator)}add(){this.sourceBrand=new v.vSn(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.sourceBrand=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}cancel(){this.showTable=!0,this.containerService.scrollToTop()}delete(o){this.showDialogConfirm("sbm.configurazione.portali.eliminareSourceBrand").then(t=>{null!=o&&(this.sourceBrand=o),this.sourceBrand.isDeleted=!0,this.save()},t=>{})}save(){this.setIsLoading(!0),this.sourceBrand.portaleXAlbergo=new v.$Ys(this.oidPortale),this.apiService.setSourceBrand(this.sourceBrand).subscribe(o=>{if(this.sourceBrand.oid>0){let t=this.utility.findIndexByOid(this.dataSource.data,this.sourceBrand.oid);this.sourceBrand.isDeleted?this.dataSource.data.splice(t,1):this.dataSource.data[t]=o.data.obj}else this.dataSource.data.push(o.data.obj);this.dataSource=new s.r4(this.dataSource.data),this.dataSource.paginator=this.paginator,this.cancel(),this.setIsLoading(!1)})}}function pF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell")(1,"mat-checkbox",16),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(a?l.masterToggleTariffe():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selectionTariffe.hasValue()&&t.isAllSelectedTariffe())("indeterminate",t.selectionTariffe.hasValue()&&!t.isAllSelectedTariffe())}}function dF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-checkbox",17),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(a?p.selectionTariffe.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionTariffe.isSelected(t.oid))}}function mF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.portale")))}function _F(i,o){if(1&i&&e._UZ(0,"img",19),2&i){const t=e.oxw(2).$implicit;e.Q6J("src",t.portaleXAlbergo.portale.urlImmagineIcona,e.LSH)}}function uF(i,o){if(1&i&&(e.ynx(0),e.YNc(1,_F,1,1,"img",18),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!(null==t.portaleXAlbergo||null==t.portaleXAlbergo.portale||!t.portaleXAlbergo.portale.urlImmagineIcona)),e.xp6(2),e.Oqu(t.portaleXAlbergo.nome)}}function gF(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,uF,4,2,"ng-container",3),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.portaleXAlbergo)}}function hF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tariffaOTA.proprieta.descrizione")))}function fF(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function CF(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function bF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function vF(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5",6),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",7)(5,"mat-table",8),e.ynx(6,9),e.YNc(7,pF,2,2,"mat-header-cell",10),e.YNc(8,dF,2,1,"mat-cell",11),e.BQk(),e.ynx(9,12),e.YNc(10,mF,3,3,"mat-header-cell",10),e.YNc(11,gF,2,1,"mat-cell",11),e.BQk(),e.ynx(12,13),e.YNc(13,hF,3,3,"mat-header-cell",10),e.YNc(14,fF,2,1,"mat-cell",11),e.BQk(),e.YNc(15,CF,1,0,"mat-header-row",14),e.YNc(16,bF,1,1,"mat-row",15),e.qZA()(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.configurazione.portali.tariffePortaliCollegati")),e.xp6(3),e.Q6J("dataSource",t.tariffePortaliCollegati),e.xp6(10),e.Q6J("matHeaderRowDef",t.columnsTariffe)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.columnsTariffe)}}va.\u0275fac=function(o){return new(o||va)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},va.\u0275cmp=e.Xpm({type:va,selectors:[["app-source-brands"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{oidPortale:"oidPortale",_sourceBrands:"_sourceBrands"},features:[e.qOj],decls:24,vars:9,consts:[[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","agenzia"],[4,"matCellDef"],["matColumnDef","codiceSourceBrand"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["class","edit-containe mr-n3 ml-n3",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"m-0"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[1,"edit-containe","mr-n3","ml-n3"],[1,"row"],[1,"col-6"],["displayMember","ragioneSociale",3,"dataLoader","value","placeholder","valueChange"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.YNc(0,XR,8,3,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"i",3),e._uU(4,"add"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-table",5),e.ynx(7,6),e.YNc(8,jR,1,0,"mat-header-cell",7),e.YNc(9,WR,4,0,"mat-cell",8),e.BQk(),e.ynx(10,9),e.YNc(11,eF,3,3,"mat-header-cell",7),e.YNc(12,tF,2,1,"mat-cell",10),e.BQk(),e.ynx(13,11),e.YNc(14,iF,3,3,"mat-header-cell",7),e.YNc(15,oF,2,1,"mat-cell",10),e.BQk(),e.ynx(16,12),e.YNc(17,nF,1,0,"mat-header-cell",7),e.YNc(18,aF,4,0,"mat-cell",13),e.BQk(),e.YNc(19,lF,1,0,"mat-header-row",14),e.YNc(20,rF,1,1,"mat-row",15),e.qZA()(),e.TgZ(21,"div",16)(22,"mat-paginator",17),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.YNc(23,sF,17,16,"div",18)),2&o&&(e.Q6J("ngIf",t.showTable&&(null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length)),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",!t.showTable))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,ne.d,z.X$]});class Ta extends f.H{constructor(o){super(),this.apiService=o,this.rq=new d.a$D,this.tariffePortaliCollegatiList=[],this.tariffePortaliCollegati=[],this.selectionTariffe=new me.Ov(!0,[]),this.columnsTariffe=["select","portaleXAlbergo","descrizione"]}ngOnInit(){this.setIsLoading(!0),this.apiService.getTariffePortaliCollegati(this.oidPortale).subscribe(o=>{this.tariffePortaliCollegatiList=o.data,this.setIsLoading(!1)})}isAllSelectedTariffe(){return this.selectionTariffe.selected.length==this.tariffePortaliCollegati.length}masterToggleTariffe(){this.isAllSelectedTariffe()?this.selectionTariffe.clear():this.tariffePortaliCollegati.forEach(o=>this.selectionTariffe.select(o.oid))}save(){this.setIsLoading(!0),this.rq.oidTariffePortaliCollegati=this.selectionTariffe.selected,this.apiService.collegaTariffePortaleMaster(this.rq).subscribe(()=>{this.dialogRef.close(!0)})}onTariffaPortaleMasterChange(o){this.selectionTariffe.clear(),this.tariffePortaliCollegati=this.tariffePortaliCollegatiList.filter(t=>t.codiceMaster!=o)}}Ta.\u0275fac=function(o){return new(o||Ta)(e.Y36(A.s))},Ta.\u0275cmp=e.Xpm({type:Ta,selectors:[["app-collega-tariffa-portale-master"]],inputs:{oidPortale:"oidPortale",dialogRef:"dialogRef"},features:[e.qOj],decls:10,vars:10,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["displayMember","descrizione",3,"dataLoader","placeholder","valueChange"],[4,"ngIf"],[1,"text-right","mt-3"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"mb-3"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","portaleXAlbergo"],["matColumnDef","descrizione"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],["color","primary",1,"mt-2",3,"checked","indeterminate","change"],["color","primary",1,"mt-2",3,"checked","click","change"],["class","portale-icon mr-1",3,"src",4,"ngIf"],[1,"portale-icon","mr-1",3,"src"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"app-view-select",2),e.NdJ("valueChange",function(a){return t.rq.oidTariffaPortaleMaster=a.oid,t.onTariffaPortaleMasterChange(a.codice)}),e.ALo(4,"translate"),e.qZA(),e.YNc(5,vF,17,7,"ng-container",3),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(8),e.ALo(9,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTariffeOTAViewSelect(t.oidPortale,null,!1))("placeholder",e.lcZ(4,6,"sbm.configurazione.portali.tariffaPortaleMaster")),e.xp6(2),e.Q6J("ngIf",null!=t.tariffePortaliCollegati&&t.tariffePortaliCollegati.length>0),e.xp6(2),e.Q6J("disabled",null==t.rq.oidTariffaPortaleMaster||t.rq.oidTariffaPortaleMaster<=0||0==t.selectionTariffe.selected.length),e.xp6(1),e.Oqu(e.lcZ(9,8,"globals.salva")))},dependencies:[m.O5,V.FC,h.eB,F.aO,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,ne.d,z.X$],styles:[".portale-icon[_ngcontent-%COMP%]{width:24px;height:24px}.mat-column-select[_ngcontent-%COMP%]{width:80px!important;max-width:80px!important;min-width:80px!important}"]});class xa extends f.H{constructor(o){super(),this.apiService=o,this.risorsa=new d.bbP}save(){this.setIsLoading(!0),this.risorsa.tipoCameraOTA.portaleXAlbergo=new v.$Ys(this.oidPortale),this.apiService.setTipoCameraOTA(this.risorsa).subscribe(()=>{this.apiService.getTipiCameraOTA(this.oidPortale).subscribe(o=>{this.setIsLoading(!1),this.dialogRef.close(o.data)})})}}xa.\u0275fac=function(o){return new(o||xa)(e.Y36(A.s))},xa.\u0275cmp=e.Xpm({type:xa,selectors:[["app-risorsa-portale-master-add"]],inputs:{oidPortale:"oidPortale",dialogRef:"dialogRef"},features:[e.qOj],decls:15,vars:19,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange"],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.risorsa.tipoCameraOTA.codice=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.risorsa.tipoCameraOTA.descrizione=a}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"app-view-select",4),e.NdJ("valueChange",function(a){return t.risorsa.tipoCameraOTA.tipoCamera=a}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",5)(12,"button",6),e.NdJ("click",function(){return t.save()}),e._uU(13),e.ALo(14,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("placeholder",e.lcZ(5,11,"bo.tipoCameraOTA.proprieta.codice"))("ngModel",t.risorsa.tipoCameraOTA.codice),e.xp6(3),e.Q6J("placeholder",e.lcZ(8,13,"bo.tipoCameraOTA.proprieta.descrizione"))("ngModel",t.risorsa.tipoCameraOTA.descrizione),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect(null,!1))("value",t.risorsa.tipoCameraOTA.tipoCamera)("placeholder",e.lcZ(10,15,"bo.tipoCameraOTA.proprieta.tipoCamera"))("required",!0),e.xp6(3),e.Q6J("disabled",!t.risorsa.tipoCameraOTA.codice||!t.risorsa.tipoCameraOTA.descrizione||null==t.risorsa.tipoCameraOTA.tipoCamera||null==t.risorsa.tipoCameraOTA.tipoCamera.oid||t.risorsa.tipoCameraOTA.tipoCamera.oid<=0),e.xp6(1),e.Oqu(e.lcZ(14,17,"globals.salva")))},dependencies:[w.X,h.eB,M.v_,b.k0,F.aO,_.Fj,_.JJ,_.Q7,_.On,ne.d,z.X$]});class Za extends f.H{constructor(o){super(),this.apiService=o,this.tariffa=new d.ymY,this.getTrattamentiRQ=d.k$g.fromFilter("isDisponibile",c.Hp.IsTrue)}save(){this.setIsLoading(!0),this.tariffa.tariffaOTA.portaleXAlbergo=new v.$Ys(this.oidPortale),this.apiService.setTariffaOTA(this.tariffa).subscribe(()=>{this.apiService.getTariffeOTA(this.oidPortale).subscribe(o=>{this.setIsLoading(!1),this.dialogRef.close(o.data)})})}}function TF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.verificaCodiceMaster())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.verifica")))}function xF(i,o){if(1&i&&(e.TgZ(0,"mat-option",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}Za.\u0275fac=function(o){return new(o||Za)(e.Y36(A.s))},Za.\u0275cmp=e.Xpm({type:Za,selectors:[["app-tariffa-portale-master-add"]],inputs:{oidPortale:"oidPortale",dialogRef:"dialogRef"},features:[e.qOj],decls:17,vars:25,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange"],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.tariffa.tariffaOTA.codice=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.tariffa.tariffaOTA.descrizione=a}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"app-view-select",4),e.NdJ("valueChange",function(a){return t.tariffa.tariffaOTA.trattamento=a}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"app-view-select",4),e.NdJ("valueChange",function(a){return t.tariffa.tariffaOTA.listino=a}),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",5)(14,"button",6),e.NdJ("click",function(){return t.save()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("placeholder",e.lcZ(5,15,"bo.tariffaOTA.proprieta.codice"))("ngModel",t.tariffa.tariffaOTA.codice),e.xp6(3),e.Q6J("placeholder",e.lcZ(8,17,"bo.tariffaOTA.proprieta.descrizione"))("ngModel",t.tariffa.tariffaOTA.descrizione),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTrattamentiViewSelect(t.getTrattamentiRQ,!1))("value",t.tariffa.tariffaOTA.trattamento)("placeholder",e.lcZ(10,19,"bo.tariffaOTA.proprieta.trattamento"))("required",!0),e.xp6(2),e.Q6J("dataLoader",t.apiService.getListiniViewSelect(null,!1))("value",t.tariffa.tariffaOTA.listino)("placeholder",e.lcZ(12,21,"bo.tariffaOTA.proprieta.listino"))("required",!0),e.xp6(3),e.Q6J("disabled",!t.tariffa.tariffaOTA.codice||!t.tariffa.tariffaOTA.descrizione||null==t.tariffa.tariffaOTA.trattamento||null==t.tariffa.tariffaOTA.trattamento.oid||t.tariffa.tariffaOTA.trattamento.oid<=0||null==t.tariffa.tariffaOTA.listino||null==t.tariffa.tariffaOTA.listino.oid||t.tariffa.tariffaOTA.listino.oid<=0),e.xp6(1),e.Oqu(e.lcZ(16,23,"globals.salva")))},dependencies:[w.X,h.eB,M.v_,b.k0,F.aO,_.Fj,_.JJ,_.Q7,_.On,ne.d,z.X$]});const ZF=function(i,o){return{codiceMasterInput:i,"w-100":o}};class Aa extends f.H{constructor(o){super(),this.apiService=o,this.enumTipoValore=c.jy}verificaCodiceMaster(){this.setIsLoading(!0),this.apiService.verificaCodiceMaster(this.tariffa.oid,this.tariffa.codiceMaster).subscribe(o=>{this.setIsLoading(!1),o.data?this.showInfo("sbm.configurazione.portali.codiceMasterValido"):this.showError("sbm.configurazione.portali.codiceMasterNonValido")})}save(){this.setIsLoading(!0),this.apiService.updateTariffaOTA(this.tariffa).subscribe(()=>{this.setIsLoading(!1),this.dialogRef.close(!0)})}}function AF(i,o){1&i&&(e.TgZ(0,"div",8)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.portali.nessunaVariazione")))}function wF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergoVariazioni.proprieta.dal")))}function zF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",26)(2,"input",27),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.dal=a)})("ngModelChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onDalChange(l))}),e.qZA(),e._UZ(3,"mat-datepicker-toggle",28)(4,"mat-datepicker",29,30),e.qZA()()}if(2&i){const t=o.$implicit,n=e.MAs(5),a=e.oxw(2);e.xp6(2),e.Q6J("matDatepicker",n)("ngModel",t.dal),e.xp6(1),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",a.utility.isNullDate(t.dal)?a.today:null)}}function MF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergoVariazioni.proprieta.al")))}function qF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",31)(2,"input",27),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.al=a)})("ngModelChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onAlChange(l))}),e.qZA(),e._UZ(3,"mat-datepicker-toggle",28)(4,"mat-datepicker",29,32),e.qZA(),e.TgZ(6,"button",33),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.sincronizzaDisponibilita(l.dal,l.al))}),e.ALo(7,"translate"),e.TgZ(8,"mat-icon"),e._uU(9,"refresh"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.MAs(5),a=e.oxw(2);e.xp6(2),e.Q6J("matDatepicker",n)("ngModel",t.al),e.xp6(1),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",a.utility.isNullDate(t.al)?a.today:null),e.xp6(2),e.Q6J("matTooltip",e.lcZ(7,5,"sbm.configurazione.portali.sincronizzaDisponibilita"))}}function PF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergoVariazioni.proprieta.giorniValidita")))}function kF(i,o){if(1&i&&(e.TgZ(0,"mat-option",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumGiornoSettimana,t,"giornoSettimanaBreve"))," ")}}Aa.\u0275fac=function(o){return new(o||Aa)(e.Y36(A.s))},Aa.\u0275cmp=e.Xpm({type:Aa,selectors:[["app-tariffa-portale-master-edit"]],inputs:{tariffa:"tariffa",dialogRef:"dialogRef"},features:[e.qOj],decls:24,vars:25,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-4"],[3,"ngClass"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["href","#","class","color-pink ml-3 align-bottom mb-3 d-inline-block font-weight-bold",3,"click",4,"ngIf"],[1,"w-100"],[3,"ngModel","placeholder","ngModelChange"],["tipoValore",""],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"text-right"],["mat-flat-button","","color","primary",3,"click"],["href","#",1,"color-pink","ml-3","align-bottom","mb-3","d-inline-block","font-weight-bold",3,"click"],[3,"value"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"input",5),e.NdJ("ngModelChange",function(a){return t.tariffa.codiceMaster=a}),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,TF,3,3,"a",6),e.qZA(),e.TgZ(9,"div",3)(10,"mat-form-field",7)(11,"mat-select",8,9),e.NdJ("ngModelChange",function(a){return t.tariffa.tipoVariazionePrezzoMaster=a}),e.ALo(13,"translate"),e.YNc(14,xF,3,4,"mat-option",10),e.ALo(15,"selectEnum"),e.qZA()()(),e.TgZ(16,"div",3)(17,"mat-form-field",7)(18,"input",11),e.NdJ("ngModelChange",function(a){return t.tariffa.valoreVariazionePrezzoMaster=a}),e.ALo(19,"translate"),e.qZA()()()(),e.TgZ(20,"div",12)(21,"button",13),e.NdJ("click",function(){return t.save()}),e._uU(22),e.ALo(23,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(5),e.Q6J("ngClass",e.WLB(22,ZF,!!t.tariffa.codiceMaster,!t.tariffa.codiceMaster)),e.xp6(1),e.Q6J("placeholder",e.lcZ(7,11,"bo.tariffaOTA.proprieta.codiceMaster"))("ngModel",t.tariffa.codiceMaster),e.xp6(2),e.Q6J("ngIf",!!t.tariffa.codiceMaster),e.xp6(3),e.Q6J("ngModel",t.tariffa.tipoVariazionePrezzoMaster)("placeholder",e.lcZ(13,13,"bo.tariffaOTA.proprieta.tipoVariazionePrezzoMaster")),e.xp6(3),e.Q6J("ngForOf",e.xi3(15,15,t.enumTipoValore,"tipoValore")),e.xp6(4),e.Q6J("placeholder",e.lcZ(19,18,"bo.tariffaOTA.proprieta.valoreVariazionePrezzoMaster"))("ngModel",t.tariffa.valoreVariazionePrezzoMaster),e.xp6(4),e.Oqu(e.lcZ(23,20,"globals.salva")))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,_.Fj,_.wV,_.JJ,_.On,Te.A,z.X$],styles:[".codiceMasterInput[_ngcontent-%COMP%]{width:calc(100% - 80px)}"]});const SF=function(i){return{"color-pink":i}};function yF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",34)(2,"mat-select",35,36),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.giorniValiditaSelected=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onVariazioneModificata())}),e.TgZ(4,"mat-checkbox",37),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.MAs(3),T=e.oxw(2);return a.preventDefault(),e.KtG(T.onSelectDeselectAllClickGiorniValidita(p,r))}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,kF,3,4,"mat-option",38),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.MAs(3),a=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.giorniValiditaSelected),e.xp6(2),e.Q6J("ngClass",e.VKq(8,SF,a.isAllSelectedGiorniValidita(n)))("checked",a.isAllSelectedGiorniValidita(n))("indeterminate",!a.isAllSelectedGiorniValidita(n)&&!a.isAllDeselectedGiorniValidita(n)),e.xp6(1),e.hij(" ",e.lcZ(6,6,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",a.giorniValidita)}}function JF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergoVariazioni.proprieta.portaleXAlbergo")))}function EF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"app-view-select",40),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.portaleXAlbergo=a)})("valueChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return l.tipoCameraOTA=null,e.KtG(r.onVariazioneModificata())}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("dataLoader",n.apiService.getPortaliXAlbergoViewSelect(n.getPortaliRQ,!1))("title",e.lcZ(2,4,"bo.portaleXAlbergoVariazioni.proprieta.portaleXAlbergo"))("required",!0)("value",t.portaleXAlbergo)}}function NF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergoVariazioni.proprieta.tipoCameraOTA")))}function OF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"app-view-select",41),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.tipoCameraOTA=a)})("valueChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onVariazioneModificata())}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("dataLoader",null!=t.portaleXAlbergo?n.apiService.getTipiCameraOTAViewSelect(t.portaleXAlbergo.oid):null)("forceDownload",!0)("title",e.lcZ(2,4,"bo.portaleXAlbergoVariazioni.proprieta.tipoCameraOTA"))("value",t.tipoCameraOTA)}}function LF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergoVariazioni.proprieta.tariffaOTA")))}function DF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"app-view-select",41),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.tariffaOTA=a)})("valueChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onVariazioneModificata())}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("dataLoader",null!=t.portaleXAlbergo?n.apiService.getTariffeOTAViewSelect(t.portaleXAlbergo.oid):null)("forceDownload",!0)("title",e.lcZ(2,4,"bo.portaleXAlbergoVariazioni.proprieta.tariffaOTA"))("value",t.tariffaOTA)}}function IF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergoVariazioni.proprieta.durataMinimaSoggiorno")))}function QF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",26)(2,"input",42),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.durataMinimaSoggiorno=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onVariazioneModificata())}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.durataMinimaSoggiorno)}}function UF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergoVariazioni.proprieta.variazioniDisponibili")))}function YF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",26)(2,"input",42),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.variazioniDisponibili=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onVariazioneModificata())}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.variazioniDisponibili)}}function RF(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergoVariazioni.proprieta.valoreVariazione")))}function FF(i,o){if(1&i&&(e.TgZ(0,"mat-option",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function HF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",43)(2,"input",42),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.valoreVariazione=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onVariazioneModificata())}),e.qZA()(),e.TgZ(3,"mat-form-field",44)(4,"mat-select",45),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.tipoValoreVariazione=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onVariazioneModificata())}),e.YNc(5,FF,3,4,"mat-option",38),e.ALo(6,"selectEnum"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.valoreVariazione),e.xp6(2),e.Q6J("ngModel",t.tipoValoreVariazione),e.xp6(1),e.Q6J("ngForOf",e.xi3(6,3,n.enumTipoValore,"tipoValore"))}}function KF(i,o){1&i&&e._UZ(0,"mat-header-cell")}function GF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",46)(1,"button",47),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.deleteVariazione(l))}),e.TgZ(2,"i",48),e._uU(3,"delete"),e.qZA()()()}}function $F(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function BF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",50),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function VF(i,o){if(1&i&&(e.TgZ(0,"div",9)(1,"mat-table",10),e.ynx(2,11),e.YNc(3,wF,3,3,"mat-header-cell",12),e.YNc(4,zF,6,4,"mat-cell",13),e.BQk(),e.ynx(5,14),e.YNc(6,MF,3,3,"mat-header-cell",12),e.YNc(7,qF,10,7,"mat-cell",13),e.BQk(),e.ynx(8,15),e.YNc(9,PF,3,3,"mat-header-cell",12),e.YNc(10,yF,8,10,"mat-cell",13),e.BQk(),e.ynx(11,16),e.YNc(12,JF,3,3,"mat-header-cell",12),e.YNc(13,EF,3,6,"mat-cell",13),e.BQk(),e.ynx(14,17),e.YNc(15,NF,3,3,"mat-header-cell",12),e.YNc(16,OF,3,6,"mat-cell",13),e.BQk(),e.ynx(17,18),e.YNc(18,LF,3,3,"mat-header-cell",12),e.YNc(19,DF,3,6,"mat-cell",13),e.BQk(),e.ynx(20,19),e.YNc(21,IF,3,3,"mat-header-cell",12),e.YNc(22,QF,3,1,"mat-cell",13),e.BQk(),e.ynx(23,20),e.YNc(24,UF,3,3,"mat-header-cell",12),e.YNc(25,YF,3,1,"mat-cell",13),e.BQk(),e.ynx(26,21),e.YNc(27,RF,3,3,"mat-header-cell",12),e.YNc(28,HF,7,6,"mat-cell",13),e.BQk(),e.ynx(29,22),e.YNc(30,KF,1,0,"mat-header-cell",12),e.YNc(31,GF,4,0,"mat-cell",23),e.BQk(),e.YNc(32,$F,1,0,"mat-header-row",24),e.YNc(33,BF,1,1,"mat-row",25),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.variazioni),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}class wa extends f.H{constructor(o,t){super(),this.apiService=o,this.utility=t,this.onVariazioniModificate=new e.vpe,this.displayedColumns=["dal","al","giorniValidita","portaleXAlbergo","tipoCameraOTA","tariffaOTA","durataMinimaSoggiorno","variazioniDisponibili","valoreVariazione","delete"],this.giorniValidita=[],this.enumGiornoSettimana=c.cw,this.enumTipoValore=c.jy}ngOnInit(){this.giorniValidita=[c.cw.Lunedi,c.cw.Martedi,c.cw.Mercoledi,c.cw.Giovedi,c.cw.Venerdi,c.cw.Sabato,c.cw.Domenica],this.variazioni.forEach(o=>{if(o.giorniValiditaSelected=[],o.giorniValidita){let t=o.giorniValidita.split(";");for(let n of t)""!=n&&!isNaN(+n)&&+n in c.cw&&o.giorniValiditaSelected.push(+n)}0==o.giorniValiditaSelected.length&&(o.giorniValiditaSelected=this.giorniValidita.slice())}),this.getPortaliRQ=d.k$g.fromFilter("portaleXAlbergoMaster.oid",c.Hp.Equal,this.oidPortale.toString(),c.NM.Number),this.variazioniOriginal=JSON.stringify(this.variazioni),this.onVariazioneModificata()}addVariazione(){let o=new v.LNO;o.dal=this.getDate(u()),o.al=this.getDate(u().add(1,"month")),o.giorniValiditaSelected=this.giorniValidita.slice(),o.durataMinimaSoggiorno=0,o.variazioniDisponibili=0,o.valoreVariazione=0,o.tipoValoreVariazione=c.jy.Euro,this.variazioni.push(o),this.variazioni=this.variazioni.slice(),this.onVariazioneModificata()}deleteVariazione(o){this.showDialogConfirm("sbm.configurazione.portali.eliminareVariazione").then(t=>{this.variazioni.splice(o,1),this.variazioni=this.variazioni.slice(),this.onVariazioneModificata()},t=>{})}onDalChange(o){setTimeout(()=>{o.dal=this.getDate(o.dal),(null==o.al||u(o.dal)>u(o.al))&&(o.al=o.dal),this.onVariazioneModificata()},200)}onAlChange(o){setTimeout(()=>{o.al=this.getDate(o.al),(null==o.dal||u(o.dal)>u(o.al))&&(o.dal=o.al),this.onVariazioneModificata()},200)}onSelectDeselectAllClickGiorniValidita(o,t){this.isAllSelectedGiorniValidita(o)?t.giorniValiditaSelected=[]:t.giorniValiditaSelected=this.giorniValidita.slice(),this.onVariazioneModificata()}isAllSelectedGiorniValidita(o){return o.selected.length==this.giorniValidita.length}isAllDeselectedGiorniValidita(o){return 0==o.selected.length}save(o=!1){return new Promise((t,n)=>{if(this.variazioni.some(a=>!a.dal||!a.al||null==a.portaleXAlbergo||null==a.portaleXAlbergo.oid||a.portaleXAlbergo.oid<=0))this.showError("globals.messages.inserireDati"),n();else{this.setIsLoading(!0),this.variazioni.forEach(l=>{l.dal=this.getDate(l.dal),l.al=this.getDate(l.al),l.giorniValidita=l.giorniValiditaSelected.join(";"),l.portaleXAlbergoMaster=new v.$Ys(this.oidPortale)});let a=new d.tKX;a.oidPortale=this.oidPortale,a.variazioniXPeriodo=this.variazioni,this.apiService.setVariazioniXPeriodoPortaleMaster(a).subscribe(()=>{this.variazioniOriginal=JSON.stringify(this.variazioni),this.onVariazioneModificata(),this.setIsLoading(!1),o&&this.showInfo("sbm.configurazione.portali.variazioniSalvate"),t()})}})}onVariazioneModificata(){this.onVariazioniModificate.emit(JSON.stringify(this.variazioni)!=this.variazioniOriginal)}sincronizzaDisponibilita(o,t){this.save().then(()=>{let n=new d.Zpt;n.width="50vw";let a=this.showModalDialog(Rt,n),l=a.componentInstance;l.oidPortale=this.oidPortale,o&&t?(l.dal=o,l.al=t):this.variazioni.length>0&&(l.dal=this.getDate(u.min(this.variazioni.map(r=>u(this.getDate(r.dal))))),l.al=this.getDate(u.max(this.variazioni.map(r=>u(this.getDate(r.al)))))),l.dialogRef=a},()=>{})}}function XF(i,o){if(1&i&&e._UZ(0,"img",31),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.portaleXAlbergo.portale.urlImmagineIcona,e.LSH)}}function jF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(5);return a.stopPropagation(),e.KtG(r.rimuoviCollegamentoTariffa(l.tariffaOTA))}),e.TgZ(1,"i",33),e._uU(2,"clear"),e.qZA()()}2&i&&e.Q6J("disableRipple",!0)}wa.\u0275fac=function(o){return new(o||wa)(e.Y36(A.s),e.Y36(C.t))},wa.\u0275cmp=e.Xpm({type:wa,selectors:[["app-variazioni-periodo-portale-master"]],inputs:{oidPortale:"oidPortale",variazioni:"variazioni"},outputs:{onVariazioniModificate:"onVariazioniModificate"},features:[e.qOj],decls:13,vars:8,consts:[[1,"p-3"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],["class","mat-table-container-border-rounded",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","dal"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","al"],["matColumnDef","giorniValidita"],["matColumnDef","portaleXAlbergo"],["matColumnDef","tipoCameraOTA"],["matColumnDef","tariffaOTA"],["matColumnDef","durataMinimaSoggiorno"],["matColumnDef","variazioniDisponibili"],["matColumnDef","valoreVariazione"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"w-100","text-right"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["dal",""],[1,"al-input","text-right"],["al",""],["mat-icon-button","","color","primary",1,"sincronizzaDisponibilita",3,"matTooltip","click"],[1,"w-100"],["multiple","",3,"ngModel","ngModelChange","selectionChange"],["selectGiorniValidita",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["displayMember","nome",3,"dataLoader","title","required","value","valueChange"],["displayMember","descrizione",3,"dataLoader","forceDownload","title","value","valueChange"],["autocompleteOff","","type","number","matInput","",3,"ngModel","ngModelChange"],[1,"valoreVariazioneInput","text-right"],[1,"tipoValoreVariazioneSelect"],[3,"ngModel","ngModelChange","selectionChange"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return t.addVariazione()}),e.TgZ(2,"i",2),e._uU(3,"add"),e.qZA()(),e.YNc(4,AF,4,3,"div",3),e.YNc(5,VF,34,4,"div",4),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return t.save()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return t.sincronizzaDisponibilita()}),e._uU(11),e.ALo(12,"translate"),e.qZA()()()),2&o&&(e.xp6(4),e.Q6J("ngIf",0==t.variazioni.length),e.xp6(1),e.Q6J("ngIf",t.variazioni.length>0),e.xp6(3),e.Oqu(e.lcZ(9,4,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(12,6,"sbm.configurazione.portali.sincronizzaDisponibilita")))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.On,ne.d,Te.A,z.X$],styles:["mat-cell[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%]{padding-left:10px!important;padding-right:10px!important}.valoreVariazioneInput[_ngcontent-%COMP%]{width:calc(100% - 30px)}.tipoValoreVariazioneSelect[_ngcontent-%COMP%]{width:30px}.al-input[_ngcontent-%COMP%]{width:calc(100% - 40px)}.sincronizzaDisponibilita[_ngcontent-%COMP%]{width:40px}"]});const yc=function(i){return{"pb-2":i}};function WF(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr",24),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(5);return e.KtG(r.editTariffa(l.tariffaOTA))}),e.TgZ(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",4),e.YNc(4,XF,1,1,"img",26),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"td",27)(9,"span",20),e._uU(10),e.qZA(),e.TgZ(11,"button",28)(12,"i",29),e._uU(13,"edit"),e.qZA()(),e.YNc(14,jF,3,1,"button",30),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2).$implicit,l=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(11,yc,n==a.viewTipoCamereTariffe.length-1)),e.xp6(1),e.hij(" ",t.tariffaOTA.codice," "),e.xp6(1),e.Q6J("ngClass",e.VKq(13,yc,n==a.viewTipoCamereTariffe.length-1)),e.xp6(1),e.Q6J("ngIf",!(null==t.portaleXAlbergo||null==t.portaleXAlbergo.portale||!t.portaleXAlbergo.portale.urlImmagineIcona)),e.xp6(2),e.Oqu(t.tariffaOTA.descrizione+(null!=t.tariffaOTA.trattamento&&t.tariffaOTA.trattamento.nome?e.lcZ(7,9,"sbm.configurazione.portali.mappataSuTrattamentoWelcome")+t.tariffaOTA.trattamento.nome+")":"")),e.xp6(2),e.Q6J("ngClass",e.VKq(15,yc,n==a.viewTipoCamereTariffe.length-1)),e.xp6(2),e.Oqu(t.tariffaOTA.valoreVariazionePrezzoMaster+(t.tariffaOTA.tipoVariazionePrezzoMaster==l.enumTipoValore.Euro?" \u20ac":" %")),e.xp6(1),e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",!!t.tariffaOTA.codiceMaster)}}function eH(i,o){if(1&i&&(e.ynx(0),e.YNc(1,WF,15,17,"tr",23),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.viewTipoCamereTariffe)}}function tH(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",16)(2,"td",17)(3,"button",18),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.KtG(l.hidden=!l.hidden)}),e.TgZ(4,"i",19),e._uU(5),e.qZA()(),e.TgZ(6,"span",20),e._uU(7),e.qZA()(),e.TgZ(8,"td",21),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"td"),e.qZA(),e.YNc(12,eH,2,1,"ng-container",22),e.BQk()}if(2&i){const t=o.$implicit;e.xp6(3),e.Q6J("disableRipple",!0),e.xp6(2),e.Oqu(t.hidden?"keyboard_arrow_down":"keyboard_arrow_up"),e.xp6(2),e.Oqu(t.tipoCamera.codice),e.xp6(2),e.hij(" ",t.tipoCamera.descrizione+(null!=t.tipoCamera.tipoCamera&&t.tipoCamera.tipoCamera.nome?e.lcZ(10,5,"sbm.configurazione.portali.mappataSuTipoCameraWelcome")+t.tipoCamera.tipoCamera.nome+")":"")," "),e.xp6(3),e.Q6J("ngIf",!t.hidden)}}function iH(i,o){if(1&i&&(e.TgZ(0,"table",11)(1,"tr")(2,"th",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"th",13),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"th",14),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.YNc(11,tH,13,7,"ng-container",15),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,4,"sbm.configurazione.portali.codiceTipoCameraTariffa")),e.xp6(3),e.Oqu(e.lcZ(7,6,"sbm.configurazione.portali.descrizioneTipoCameraTariffa")),e.xp6(3),e.Oqu(e.lcZ(10,8,"bo.tariffaOTA.proprieta.valoreVariazionePrezzoMaster")),e.xp6(2),e.Q6J("ngForOf",t.configurazioneFiltered)}}function oH(i,o){1&i&&(e.TgZ(0,"h5",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.nessunaTariffa")))}const nH=function(i){return{"mt-3":i}};function aH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"app-view-select",5),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tipoCamera=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onTipoCameraSelected())}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"a",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addRisorsa())}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"a",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addTariffa())}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"a",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.collegaTariffa())}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",8),e.YNc(13,iH,12,10,"table",9),e.YNc(14,oH,3,3,"h5",10),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(20,nH,null!=t.variazioni)),e.xp6(1),e.Tol("tipoCamera-select mr-3"),e.Q6J("block",!1)("dataLoader",t.apiService.getTipiCameraViewSelect())("value",t.tipoCamera)("placeholder",e.lcZ(2,12,"globals.tipoCamera")),e.xp6(3),e.Oqu(e.lcZ(5,14,"sbm.configurazione.portali.aggiungiTipoCamera")),e.xp6(3),e.Oqu(e.lcZ(8,16,"sbm.configurazione.portali.aggiungiTariffa")),e.xp6(3),e.Oqu(e.lcZ(11,18,"sbm.configurazione.portali.collegaTariffa")),e.xp6(3),e.Q6J("ngIf",t.configurazioneFiltered.length>0),e.xp6(1),e.Q6J("ngIf",0==t.configurazioneFiltered.length)}}function lH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",1),e.ALo(1,"translate"),e.TgZ(2,"app-variazioni-periodo-portale-master",35),e.NdJ("onVariazioniModificate",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onVariazioniModificate.emit(a))}),e.qZA(),e.TgZ(3,"div",36),e._uU(4,"Queste variazioni verranno applicate dopo la variazione presente sulla tariffa, per applicarle \xe8 necessario sincronizzare le disponibilit\xe0"),e.qZA(),e.TgZ(5,"div",36),e._uU(6,"Durata min soggiorno: utilizzando il valore -1 il dato non viene propagato ai portali collegati"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("label",e.lcZ(1,3,"sbm.configurazione.portali.variazioniPeriodo")),e.xp6(2),e.Q6J("oidPortale",t.oidPortale)("variazioni",t.variazioni)}}const rH=function(i){return{noVariazioni:i}};class za extends f.H{constructor(o){super(),this.apiService=o,this.onRisorsaAdd=new e.vpe,this.onTariffaAdd=new e.vpe,this.onVariazioniModificate=new e.vpe,this.enumTipoValore=c.jy}ngOnInit(){this.download(),this.downloadVariazioniXPeriodo()}download(){this.setIsLoading(!0),this.apiService.getConfigurazionePortaleMaster(this.oidPortale).subscribe(o=>{o.data.forEach(t=>{null!=t.viewTipoCamereTariffe&&(t.viewTipoCamereTariffe=t.viewTipoCamereTariffe.filter(n=>n.isValid))}),this.configurazione=o.data.filter(t=>null!=t.viewTipoCamereTariffe&&t.viewTipoCamereTariffe.length>0),this.onTipoCameraSelected(),this.setIsLoading(!1)})}editTariffa(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Aa,t),a=n.componentInstance;a.tariffa=JSON.parse(JSON.stringify(o)),a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&this.download()})}addRisorsa(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(xa,o),n=t.componentInstance;n.oidPortale=this.oidPortale,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&a.length>0&&this.onRisorsaAdd.emit(a)})}addTariffa(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Za,o),n=t.componentInstance;n.oidPortale=this.oidPortale,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&a.length>0&&this.onTariffaAdd.emit(a)})}rimuoviCollegamentoTariffa(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0),o.codiceMaster=null,this.apiService.updateTariffaOTA(o).subscribe(()=>this.download())})}collegaTariffa(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog(Ta,o),n=t.componentInstance;n.oidPortale=this.oidPortale,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.download()})}onTipoCameraSelected(){var o;(null===(o=this.tipoCamera)||void 0===o?void 0:o.oid)>0?this.configurazioneFiltered=this.configurazione.filter(t=>{var n;return(null===(n=t.tipoCamera)||void 0===n||null===(n=n.tipoCamera)||void 0===n?void 0:n.oid)==this.tipoCamera.oid}):this.configurazioneFiltered=this.configurazione}downloadVariazioniXPeriodo(){this.apiService.getVariazioniXPeriodoPortaleMaster(this.oidPortale).subscribe(o=>this.variazioni=o.data)}}za.\u0275fac=function(o){return new(o||za)(e.Y36(A.s))},za.\u0275cmp=e.Xpm({type:za,selectors:[["app-associazioni-tariffe-portale-master"]],inputs:{oidPortale:"oidPortale"},outputs:{onRisorsaAdd:"onRisorsaAdd",onTariffaAdd:"onTariffaAdd",onVariazioniModificate:"onVariazioniModificate"},features:[e.qOj],decls:5,vars:8,consts:[[1,"associazioni-tariffe-portale-master-tab-group",3,"ngClass"],[3,"label"],[3,"ngClass",4,"ngIf"],[3,"label",4,"ngIf"],[3,"ngClass"],["displayMember","nome",3,"block","dataLoader","value","placeholder","valueChange"],["mat-button","","color","primary",1,"mr-2",3,"click"],["mat-button","","color","primary",3,"click"],[1,"border","rounded","bg-white"],["class","w-100",4,"ngIf"],["class","p-3 mb-0",4,"ngIf"],[1,"w-100"],[1,"pl-3","pt-2","pb-2"],[1,"pt-2","pb-2"],[1,"text-center","pt-2","pb-2","pr-4"],[4,"ngFor","ngForOf"],[1,"border-top"],[1,"pb-2","pt-2","pl-2"],["mat-icon-button","",1,"expand-button","mr-1",3,"disableRipple","click"],[1,"material-icons","expand-icon"],[1,"font-weight-bold"],[1,"pb-2","pt-2","font-weight-bold"],[4,"ngIf"],["class","cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"click"],[1,"codiceTariffa",3,"ngClass"],["class","portale-icon mr-1",3,"src",4,"ngIf"],[1,"text-center","pr-4",3,"ngClass"],["color","primary","mat-icon-button","",1,"edit-button","ml-2",3,"disableRipple"],[1,"material-icons","edit-icon"],["color","primary","class","delete-button float-right","mat-icon-button","",3,"disableRipple","click",4,"ngIf"],[1,"portale-icon","mr-1",3,"src"],["color","primary","mat-icon-button","",1,"delete-button","float-right",3,"disableRipple","click"],[1,"material-icons","delete-icon","font-weight-bold"],[1,"p-3","mb-0"],[3,"oidPortale","variazioni","onVariazioniModificate"],[1,"mt-2","div-help"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-tab-group",0)(1,"mat-tab",1),e.ALo(2,"translate"),e.YNc(3,aH,15,22,"div",2),e.qZA(),e.YNc(4,lH,7,5,"mat-tab",3),e.qZA()),2&o&&(e.Q6J("ngClass",e.VKq(6,rH,null==t.variazioni)),e.xp6(1),e.Q6J("label",e.lcZ(2,4,"sbm.configurazione.portali.risorseTariffeTab")),e.xp6(2),e.Q6J("ngIf",null!=t.configurazioneFiltered),e.xp6(1),e.Q6J("ngIf",null!=t.variazioni))},dependencies:[m.mk,m.sg,m.O5,h.eB,h.Nr,ee.SK,ee.R7,ne.d,wa,z.X$],styles:[".expand-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.expand-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.edit-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px;bottom:2px}.edit-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.delete-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px;bottom:2px}.delete-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.portale-icon[_ngcontent-%COMP%]{width:24px;height:24px}table[_ngcontent-%COMP%]{table-layout:fixed}th[_ngcontent-%COMP%]{background-color:#f0f0f0}.codiceTariffa[_ngcontent-%COMP%]{padding-left:calc(.75rem + 20px)}.tipoCamera-select[_ngcontent-%COMP%]{width:200px}  .associazioni-tariffe-portale-master-tab-group.noVariazioni .mat-tab-header{display:none!important}"]});const cH=["tabGroup"],sH=["privacyFileSelect"],pH=["reportFileSelect"];function dH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function mH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.chainCode=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"bo.portaleXAlbergo.proprieta.chainCode")),e.Q6J("ngModel",t.modelEdit.portale.chainCode)}}function _H(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.fromPartyID=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"bo.portaleXAlbergo.proprieta.fromPartyID")),e.Q6J("ngModel",t.modelEdit.portale.fromPartyID)}}function uH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function gH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",44)(1,"mat-card",29)(2,"mat-card-title",28),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-form-field",8)(6,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.tipoBilanciamentoInterno=a)}),e.ALo(7,"translate"),e.YNc(8,uH,3,4,"mat-option",11),e.ALo(9,"selectEnum"),e.qZA()(),e.TgZ(10,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isAggiornaDisponibilitaCollegateAltriPortali=a)}),e._uU(11),e.ALo(12,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,6,"sbm.configurazione.portali.opzioniBilanciamento")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(7,8,"bo.portaleXAlbergo.proprieta.tipoBilanciamentoInterno")),e.Q6J("ngModel",t.modelEdit.portale.tipoBilanciamentoInterno),e.xp6(2),e.Q6J("ngForOf",e.xi3(9,10,t.enumTipoBilanciamentoInterno,"tipoBilanciamentoInterno")),e.xp6(2),e.Q6J("ngModel",t.modelEdit.portale.isAggiornaDisponibilitaCollegateAltriPortali),e.xp6(1),e.hij(" ",e.lcZ(12,13,"bo.portaleXAlbergo.proprieta.isAggiornaDisponibilitaCollegateAltriPortali")," ")}}function hH(i,o){1&i&&e._UZ(0,"mat-divider")}function fH(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6)(2,"div",21)(3,"button",51),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onEdit(l.oid))}),e.TgZ(4,"i",52),e._uU(5,"edit"),e.qZA()()(),e.TgZ(6,"div",53),e._uU(7),e.qZA(),e.TgZ(8,"div",53),e._uU(9),e.qZA(),e.TgZ(10,"div",53),e._uU(11),e.qZA()(),e.YNc(12,hH,1,0,"mat-divider",25),e.BQk()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.xp6(7),e.hij(" ",t.oid," "),e.xp6(2),e.hij(" ",t.nome," "),e.xp6(2),e.hij(" ",a.getEnumKeyOriginal(a.enumTipoPortale,t.tipoPortale)," "),e.xp6(1),e.Q6J("ngIf",n<a.portaliCollegati.length-1)}}const CH=function(i){return{"pl-0":i}};function bH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"mat-card",47)(2,"mat-card-title",28),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"mat-divider"),e.YNc(6,fH,13,4,"ng-container",48),e.qZA(),e.TgZ(7,"div",49)(8,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sincronizzaDisponibilita())}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.apriConfigurazione())}),e._uU(12),e.ALo(13,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(11,CH,null==t.modelEdit.portale.portaleXAlbergoMaster)),e.xp6(3),e.hij(" ",e.lcZ(4,5,"sbm.configurazione.portali.portaliInclusi")," "),e.xp6(3),e.Q6J("ngForOf",t.portaliCollegati),e.xp6(3),e.Oqu(e.lcZ(10,7,"sbm.configurazione.portali.sincronizzaDisponibilita")),e.xp6(3),e.Oqu(e.lcZ(13,9,"sbm.configurazione.portali.controllaConfigurazione"))}}function vH(i,o){if(1&i&&(e.TgZ(0,"div",41),e.YNc(1,gH,13,15,"div",42),e.YNc(2,bH,14,13,"div",43),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.portale.portaleXAlbergoMaster),e.xp6(1),e.Q6J("ngIf",null!=t.portaliCollegati&&t.portaliCollegati.length>0)}}function TH(i,o){if(1&i){const t=e.EpF();e.ynx(0),e._UZ(1,"app-url",54),e.ALo(2,"translate"),e._UZ(3,"app-url",54),e.ALo(4,"translate"),e._UZ(5,"app-url",54),e.ALo(6,"translate"),e._UZ(7,"app-url",54),e.ALo(8,"translate"),e._UZ(9,"app-url",54),e.ALo(10,"translate"),e.TgZ(11,"app-url",55),e.NdJ("onExtraButtonClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.condividiIFrame(a.getUrlFormRichiesta(),800,a.enumPagina.Richiesta))}),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"app-url",55),e.NdJ("onExtraButtonClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.condividiIFrame(a.getUrlFormRichiestaDayUse(),800,a.enumPagina.Richiesta))}),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"app-url",55),e.NdJ("onExtraButtonClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.condividiIFrame(a.getUrlRecensioni(),400))}),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"app-url",54),e.ALo(18,"translate"),e._UZ(19,"app-url",54),e.ALo(20,"translate"),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("placeholder",e.lcZ(2,23,"sbm.configurazione.portali.urlWebBooking"))("url",t.getUrlWebBooking()),e.xp6(2),e.Q6J("placeholder",e.lcZ(4,25,"sbm.configurazione.portali.urlWebBookingDayUse"))("url",t.getUrlWebBookingDayUse()),e.xp6(2),e.Q6J("placeholder",e.lcZ(6,27,"sbm.configurazione.portali.urlWebBookingExtra"))("url",t.getUrlWebBookingExtra()),e.xp6(2),e.Q6J("placeholder",e.lcZ(8,29,"sbm.configurazione.portali.urlWebBookingDisplayOnly"))("url",t.getUrlWebBookingDisplayOnly()),e.xp6(2),e.Q6J("placeholder",e.lcZ(10,31,"sbm.configurazione.portali.urlPacchetti"))("url",t.getUrlPacchetti()),e.xp6(2),e.Q6J("placeholder",e.lcZ(12,33,"sbm.configurazione.portali.urlRichiesta"))("url",t.getUrlFormRichiesta())("extraButtonIcon","share"),e.xp6(2),e.Q6J("placeholder",e.lcZ(14,35,"sbm.configurazione.portali.urlRichiestaDayUse"))("url",t.getUrlFormRichiestaDayUse())("extraButtonIcon","share"),e.xp6(2),e.Q6J("placeholder",e.lcZ(16,37,"sbm.configurazione.portali.urlRecensioni"))("url",t.getUrlRecensioni())("extraButtonIcon","share"),e.xp6(2),e.Q6J("placeholder",e.lcZ(18,39,"sbm.configurazione.portali.urlDms"))("url",t.getUrlDms()),e.xp6(2),e.Q6J("placeholder",e.lcZ(20,41,"sbm.configurazione.portali.urlSelfCheckIn"))("url",t.getUrlCheckIn())}}function xH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",28)(1,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isApriTariffaSeDisponibiliMaggioreZero=a)}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isApriCtaCtdSeDisponibiliMaggioreZero=a)}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isChiudiTariffaSeDisponibiliMinoreZero=a)}),e._uU(10),e.ALo(11,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.modelEdit.portale.isApriTariffaSeDisponibiliMaggioreZero),e.xp6(1),e.hij(" ",e.lcZ(3,6,"bo.portaleXAlbergo.proprieta.isApriTariffaSeDisponibiliMaggioreZero")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isApriCtaCtdSeDisponibiliMaggioreZero),e.xp6(1),e.hij(" ",e.lcZ(7,8,"bo.portaleXAlbergo.proprieta.isApriCtaCtdSeDisponibiliMaggioreZero")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isChiudiTariffaSeDisponibiliMinoreZero),e.xp6(1),e.hij(" ",e.lcZ(11,10,"bo.portaleXAlbergo.proprieta.isChiudiTariffaSeDisponibiliMinoreZero")," ")}}function ZH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function AH(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.modelEdit.portale.isGoogleHotelsTravelAttivo=a)}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"br"),e.BQk()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.modelEdit.portale.isGoogleHotelsTravelAttivo),e.xp6(1),e.hij(" ",e.lcZ(3,2,"bo.portaleXAlbergo.proprieta.isGoogleHotelsTravelAttivo")," ")}}function wH(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isTripConnectAttivo=a)}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isGardaSeeAttivo=a)}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isTrivagoAttivo=a)}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"mat-checkbox",67),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isColazioneTrivagoAttiva=a)}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"br"),e.YNc(17,AH,5,4,"ng-container",25),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.modelEdit.portale.isTripConnectAttivo),e.xp6(1),e.hij(" ",e.lcZ(3,9,"bo.portaleXAlbergo.proprieta.isTripConnectAttivo")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isGardaSeeAttivo),e.xp6(1),e.hij(" ",e.lcZ(7,11,"bo.portaleXAlbergo.proprieta.isGardaSeeAttivo")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isTrivagoAttivo),e.xp6(1),e.hij(" ",e.lcZ(11,13,"bo.portaleXAlbergo.proprieta.isTrivagoAttivo")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isColazioneTrivagoAttiva),e.xp6(1),e.hij(" ",e.lcZ(15,15,"bo.portaleXAlbergo.proprieta.isColazioneTrivagoAttiva")," "),e.xp6(3),e.Q6J("ngIf",t.getPortaleXAlbergoFormRS.isCanActivateGoogleHotelsTravel)}}function zH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isPubblicaPrezzi=a)}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"br"),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.modelEdit.portale.isPubblicaPrezzi),e.xp6(1),e.hij(" ",e.lcZ(3,2,"bo.portaleXAlbergo.proprieta.isPubblicaPrezzi")," ")}}function MH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isPubblicaRegolePrenotazione=a)}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.modelEdit.portale.isPubblicaRegolePrenotazione),e.xp6(1),e.hij(" ",e.lcZ(3,2,"bo.portaleXAlbergo.proprieta.isPubblicaRegolePrenotazione")," ")}}function qH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isImportaPrenotazioniConfermateMrPreno=a)}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isImportaCaparraMrPreno=a)}),e._uU(6),e.ALo(7,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.modelEdit.portale.isImportaPrenotazioniConfermateMrPreno),e.xp6(1),e.hij(" ",e.lcZ(3,4,"bo.portaleXAlbergo.proprieta.isImportaPrenotazioniConfermateMrPreno")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isImportaCaparraMrPreno),e.xp6(1),e.hij(" ",e.lcZ(7,6,"bo.portaleXAlbergo.proprieta.isImportaCaparraMrPreno")," ")}}function PH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function kH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.modelEdit.portale.modelloPrezzo=a)}),e.ALo(2,"translate"),e.YNc(3,PH,3,4,"mat-option",11),e.ALo(4,"selectEnum"),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.s9C("placeholder",e.lcZ(2,3,"bo.portaleXAlbergo.proprieta.modelloPrezzo")),e.Q6J("ngModel",t.modelEdit.portale.modelloPrezzo),e.xp6(2),e.Q6J("ngForOf",e.xi3(4,5,t.enumModelloPrezzo,"modelloPrezzo"))}}function SH(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.modelEdit.portale.creditoHotelCollect=a)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.modelEdit.portale.creditoPortaleCollect=a)}),e.ALo(4,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("dataLoader",t.apiService.getCreditiViewSelect())("value",t.modelEdit.portale.creditoHotelCollect)("placeholder",e.lcZ(2,6,"bo.portaleXAlbergo.proprieta.creditoHotelCollect")),e.xp6(2),e.Q6J("dataLoader",t.apiService.getCreditiViewSelect())("value",t.modelEdit.portale.creditoPortaleCollect)("placeholder",e.lcZ(4,8,"bo.portaleXAlbergo.proprieta.creditoPortaleCollect"))}}function yH(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,kH,5,8,"mat-form-field",15),e.YNc(2,SH,5,10,"ng-container",25),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.modelEdit.portale.hasModelloPrezzo),e.xp6(1),e.Q6J("ngIf",t.isPortaleExpedia())}}function JH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"div",30)(2,"mat-card",29)(3,"mat-card-title",28),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isPrenotazioniConfermateAutomaticamente=a)}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isModificaPrenotazioneInWelcome=a)}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isEliminaPrenotazioneInWelcome=a)}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isAvvisaNuovaPrenotazione=a)}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"mat-checkbox",56),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isRipristinaDisponibilitaSuCancellazione=a)}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"br"),e.TgZ(26,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isInviaMailConfermaPassepartoutAuto=a)}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e._UZ(29,"br"),e.TgZ(30,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isDividiCaparraCamere=a)}),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"mat-form-field",57)(34,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.statoPrenotazioneWelcomeDefault=a)}),e.ALo(35,"translate"),e._UZ(36,"mat-option",40),e.YNc(37,ZH,3,4,"mat-option",11),e.ALo(38,"selectEnum"),e.qZA()(),e.TgZ(39,"mat-form-field",8)(40,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.numeroGiorniScadenzaOpzione=a)}),e.ALo(41,"translate"),e.qZA()()(),e.TgZ(42,"div",58)(43,"div",30)(44,"mat-form-field",8)(45,"input",59),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.dataInizioGestione=a)}),e.ALo(46,"translate"),e.qZA(),e._UZ(47,"mat-datepicker-toggle",60),e.TgZ(48,"mat-datepicker-toggle",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.portale.dataInizioGestione=null)}),e.TgZ(49,"mat-icon",62),e._uU(50,"clear"),e.qZA()(),e._UZ(51,"mat-datepicker",63,64),e.qZA()(),e.TgZ(53,"div",30)(54,"mat-form-field",8)(55,"input",59),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.dataFineGestione=a)}),e.ALo(56,"translate"),e.qZA(),e._UZ(57,"mat-datepicker-toggle",60),e.TgZ(58,"mat-datepicker-toggle",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.portale.dataFineGestione=null)}),e.TgZ(59,"mat-icon",62),e._uU(60,"clear"),e.qZA()(),e._UZ(61,"mat-datepicker",63,65),e.qZA()()()(),e.TgZ(63,"div",30),e.YNc(64,wH,18,17,"ng-container",25),e.TgZ(65,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isApriTariffaSeDisponibiliMaggioreZero=a)}),e._uU(66),e.ALo(67,"translate"),e.qZA(),e._UZ(68,"br"),e.TgZ(69,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isApriCtaCtdSeDisponibiliMaggioreZero=a)}),e._uU(70),e.ALo(71,"translate"),e.qZA(),e._UZ(72,"br"),e.TgZ(73,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isChiudiTariffaSeDisponibiliMinoreZero=a)}),e._uU(74),e.ALo(75,"translate"),e.qZA(),e._UZ(76,"br"),e.TgZ(77,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaRichiesteCrm=a)}),e._uU(78),e.ALo(79,"translate"),e.qZA(),e._UZ(80,"br"),e.TgZ(81,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isAggiornaMinMaxStayMaster=a)}),e._uU(82),e.ALo(83,"translate"),e.qZA(),e._UZ(84,"br"),e.YNc(85,zH,5,4,"div",25),e.YNc(86,MH,4,4,"div",25),e.YNc(87,qH,8,8,"div",25),e.TgZ(88,"div",49)(89,"app-view-select",66),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.parametroMercatoDefault=a)}),e.ALo(90,"translate"),e.qZA(),e.TgZ(91,"app-view-select",66),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.parametroCanaleVenditaDefault=a)}),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.sondaggioDefault=a)}),e.ALo(94,"translate"),e.qZA()(),e.YNc(95,yH,3,2,"div",25),e.qZA()()}if(2&i){const t=e.MAs(52),n=e.MAs(62),a=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,56,"sbm.configurazione.portali.prenotazioni")," "),e.xp6(2),e.Q6J("ngModel",a.modelEdit.portale.isPrenotazioniConfermateAutomaticamente),e.xp6(1),e.hij(" ",e.lcZ(8,58,"bo.portaleXAlbergo.proprieta.isPrenotazioniConfermateAutomaticamente")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isModificaPrenotazioneInWelcome),e.xp6(1),e.hij(" ",e.lcZ(12,60,"bo.portaleXAlbergo.proprieta.isModificaPrenotazioneInWelcome")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isEliminaPrenotazioneInWelcome),e.xp6(1),e.hij(" ",e.lcZ(16,62,"bo.portaleXAlbergo.proprieta.isEliminaPrenotazioneInWelcome")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isAvvisaNuovaPrenotazione),e.xp6(1),e.hij(" ",e.lcZ(20,64,"bo.portaleXAlbergo.proprieta.isAvvisaNuovaPrenotazione")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isRipristinaDisponibilitaSuCancellazione)("disabled",a.isRipristinaDisponibilitaSuCancellazioneDisabled),e.xp6(1),e.hij(" ",e.lcZ(24,66,"bo.portaleXAlbergo.proprieta.isRipristinaDisponibilitaSuCancellazione")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isInviaMailConfermaPassepartoutAuto),e.xp6(1),e.hij(" ",e.lcZ(28,68,"bo.portaleXAlbergo.proprieta.isInviaMailConfermaPassepartoutAuto")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isDividiCaparraCamere),e.xp6(1),e.hij(" ",e.lcZ(32,70,"bo.portaleXAlbergo.proprieta.isDividiCaparraCamere")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(35,72,"bo.portaleXAlbergo.proprieta.statoPrenotazioneWelcomeDefault")),e.Q6J("ngModel",a.modelEdit.portale.statoPrenotazioneWelcomeDefault),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(38,74,a.enumStatoPrenotazioneWelcome,"statoPrenotazioneWelcome")),e.xp6(3),e.s9C("placeholder",e.lcZ(41,77,"bo.portaleXAlbergo.proprieta.numeroGiorniScadenzaOpzione")),e.Q6J("ngModel",a.modelEdit.portale.numeroGiorniScadenzaOpzione),e.xp6(5),e.s9C("placeholder",e.lcZ(46,79,"bo.portaleXAlbergo.proprieta.dataInizioGestione")),e.Q6J("matDatepicker",t)("ngModel",a.modelEdit.portale.dataInizioGestione),e.xp6(2),e.Q6J("for",t),e.xp6(4),e.Q6J("startAt",a.utility.isNullDate(a.modelEdit.portale.dataInizioGestione)?a.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(56,81,"bo.portaleXAlbergo.proprieta.dataFineGestione")),e.Q6J("matDatepicker",n)("ngModel",a.modelEdit.portale.dataFineGestione),e.xp6(2),e.Q6J("for",n),e.xp6(4),e.Q6J("startAt",a.utility.isNullDate(a.modelEdit.portale.dataFineGestione)?a.today:null),e.xp6(3),e.Q6J("ngIf",a.isPortalePassepartout()),e.xp6(1),e.Q6J("ngModel",a.modelEdit.portale.isApriTariffaSeDisponibiliMaggioreZero),e.xp6(1),e.hij(" ",e.lcZ(67,83,"bo.portaleXAlbergo.proprieta.isApriTariffaSeDisponibiliMaggioreZero")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isApriCtaCtdSeDisponibiliMaggioreZero),e.xp6(1),e.hij(" ",e.lcZ(71,85,"bo.portaleXAlbergo.proprieta.isApriCtaCtdSeDisponibiliMaggioreZero")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isChiudiTariffaSeDisponibiliMinoreZero),e.xp6(1),e.hij(" ",e.lcZ(75,87,"bo.portaleXAlbergo.proprieta.isChiudiTariffaSeDisponibiliMinoreZero")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaRichiesteCrm),e.xp6(1),e.hij(" ",e.lcZ(79,89,"bo.portaleXAlbergo.proprieta.isVisualizzaRichiesteCrm")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isAggiornaMinMaxStayMaster),e.xp6(1),e.hij(" ",e.lcZ(83,91,"bo.portaleXAlbergo.proprieta.isAggiornaMinMaxStayMaster")," "),e.xp6(3),e.Q6J("ngIf",a.modelEdit.portale.isPubblicaPrezziAttivo),e.xp6(1),e.Q6J("ngIf",a.modelEdit.portale.isPubblicaRegolePrenotazioneAttivo),e.xp6(1),e.Q6J("ngIf",a.isPortaleMRPreno()),e.xp6(2),e.Q6J("dataLoader",a.apiService.getParametriRicercaViewSelect(a.getParametriRicercaMercatoRQ))("value",a.modelEdit.portale.parametroMercatoDefault)("placeholder",e.lcZ(90,93,"bo.portaleXAlbergo.proprieta.parametroMercatoDefault")),e.xp6(2),e.Q6J("dataLoader",a.apiService.getParametriRicercaViewSelect(a.getParametriRicercaCanaleVenditaRQ))("value",a.modelEdit.portale.parametroCanaleVenditaDefault)("placeholder",e.lcZ(92,95,"bo.portaleXAlbergo.proprieta.parametroCanaleVenditaDefault")),e.xp6(2),e.Q6J("dataLoader",a.apiService.getSondaggiViewSelect())("value",a.modelEdit.portale.sondaggioDefault)("placeholder",e.lcZ(94,97,"bo.portaleXAlbergo.proprieta.sondaggioDefault")),e.xp6(2),e.Q6J("ngIf",a.modelEdit.portale.hasModelloPrezzo||a.isPortaleExpedia())}}function EH(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.configurazione.portali.licenzaNonAttiva")," "))}function NH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function OH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function LH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function DH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function IH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}const qi=function(i){return{"color-pink":i}};function QH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",68)(1,"mat-card-title",28),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",41)(5,"div",69)(6,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isEtaRiduzioniAttiva=a)}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaDisponibilitaCalendario=a)}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaPrezzoCalendario=a)}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaLogo=a)}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaCalendarioMobile=a)}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"br"),e.TgZ(26,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isRichiediDisponibilitaStep1Visualizzata=a)}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e._UZ(29,"br"),e.TgZ(30,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaPrezzoMinimo=a)}),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isDisattivaRichiestaBambiniBooking=a)}),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"br"),e.TgZ(38,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaBannerCookiesBooking=a)}),e._uU(39),e.ALo(40,"translate"),e.qZA(),e._UZ(41,"br"),e.TgZ(42,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isProponiNottiCalendarioBooking=a)}),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"mat-form-field",57)(46,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.camerePrenotabili=a)}),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"mat-form-field",8)(49,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.adultiDefaultInPrenotazione=a)}),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"mat-form-field",8)(52,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.numeroMassimoAdulti=a)}),e.ALo(53,"translate"),e.qZA()(),e.TgZ(54,"mat-form-field",8)(55,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.numeroMassimoRiduzioni=a)}),e.ALo(56,"translate"),e.qZA()(),e.TgZ(57,"mat-form-field",8)(58,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.etaMinimaBambini=a)}),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"mat-form-field",8)(61,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.etaMassimaBambini=a)}),e.ALo(62,"translate"),e.qZA()(),e.TgZ(63,"mat-form-field",8)(64,"input",70),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.numeroUltimePrenotazioni=a)}),e.ALo(65,"translate"),e.qZA()(),e.TgZ(66,"mat-form-field",8)(67,"input",70),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.numeroPersoneCollegate=a)}),e.ALo(68,"translate"),e.qZA()(),e.TgZ(69,"mat-form-field",8)(70,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.simboloValuta=a)}),e.ALo(71,"translate"),e.qZA()()(),e.TgZ(72,"div",69)(73,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaSoloTariffaMigliore=a)}),e._uU(74),e.ALo(75,"translate"),e.qZA(),e._UZ(76,"br"),e.TgZ(77,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isFiltroTariffaAttivo=a)}),e._uU(78),e.ALo(79,"translate"),e.qZA(),e._UZ(80,"br"),e.TgZ(81,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaTotaleSoggiornoSeNonDisponibile=a)}),e._uU(82),e.ALo(83,"translate"),e.qZA(),e._UZ(84,"br"),e.TgZ(85,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaCamereNonPrenotabili=a)}),e._uU(86),e.ALo(87,"translate"),e.qZA(),e._UZ(88,"br"),e.TgZ(89,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isComparazioneTariffeAttivo=a)}),e._uU(90),e.ALo(91,"translate"),e.qZA(),e._UZ(92,"br"),e.TgZ(93,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaDateAlternative=a)}),e._uU(94),e.ALo(95,"translate"),e.qZA(),e._UZ(96,"br"),e.TgZ(97,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isCamereLibereStep1Visualizzate=a)}),e._uU(98),e.ALo(99,"translate"),e.qZA(),e._UZ(100,"br"),e.TgZ(101,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isPaxStep1Visualizzate=a)}),e._uU(102),e.ALo(103,"translate"),e.qZA(),e._UZ(104,"br"),e.TgZ(105,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isEscludiTariffeMinLosInferiore=a)}),e._uU(106),e.ALo(107,"translate"),e.qZA(),e._UZ(108,"br"),e.TgZ(109,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isEscludiTariffeMaxLosSuperiore=a)}),e._uU(110),e.ALo(111,"translate"),e.qZA(),e._UZ(112,"br"),e.TgZ(113,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isEscludiPromozioniNonPrenotabili=a)}),e._uU(114),e.ALo(115,"translate"),e.qZA(),e._UZ(116,"br"),e.TgZ(117,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isControllaDurateSoggiornoSulGiornoDiArrivo=a)}),e._uU(118),e.ALo(119,"translate"),e.qZA(),e._UZ(120,"br"),e.TgZ(121,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isDurataPacchettoUgualeARichiesta=a)}),e._uU(122),e.ALo(123,"translate"),e.qZA(),e._UZ(124,"br"),e.TgZ(125,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isSupplementiConPrezzoMaggioreZero=a)}),e._uU(126),e.ALo(127,"translate"),e.qZA(),e._UZ(128,"br"),e.TgZ(129,"mat-checkbox",56),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVerificaCartaCredito=a)}),e._uU(130),e.ALo(131,"translate"),e.qZA(),e.YNc(132,EH,3,3,"div",25),e._UZ(133,"br"),e.TgZ(134,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaCRO=a)}),e._uU(135),e.ALo(136,"translate"),e.qZA(),e._UZ(137,"br"),e.TgZ(138,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isRichiediInformazioniOspiti=a)}),e._uU(139),e.ALo(140,"translate"),e.qZA(),e._UZ(141,"br"),e.TgZ(142,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isAccettaContrattoPrenotazioneStep2=a)}),e._uU(143),e.ALo(144,"translate"),e.qZA(),e._UZ(145,"br"),e.TgZ(146,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaCondizioniPrenotazioneStep2=a)}),e._uU(147),e.ALo(148,"translate"),e.qZA(),e._UZ(149,"br"),e.TgZ(150,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaDettaglioGiornaliero=a)}),e._uU(151),e.ALo(152,"translate"),e.qZA(),e._UZ(153,"br"),e.TgZ(154,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isAttivaSpedizioneBookingExtra=a)}),e._uU(155),e.ALo(156,"translate"),e.qZA(),e._UZ(157,"br"),e.TgZ(158,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isNascondiPromozioniSeVieneInseritoCodicePromozionale=a)}),e._uU(159),e.ALo(160,"translate"),e.qZA(),e._UZ(161,"br"),e.TgZ(162,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isNascondiPromozioniInEvidenza=a)}),e._uU(163),e.ALo(164,"translate"),e.qZA(),e._UZ(165,"br"),e.TgZ(166,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaDescrizionePoliticaCancellazione=a)}),e._uU(167),e.ALo(168,"translate"),e.qZA(),e._UZ(169,"br"),e.TgZ(170,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaDescrizioneDettagliataTariffa=a)}),e._uU(171),e.ALo(172,"translate"),e.qZA(),e._UZ(173,"br"),e.TgZ(174,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isCreaPrenotazioniPrezziScontati=a)}),e._uU(175),e.ALo(176,"translate"),e.qZA(),e._UZ(177,"br"),e.TgZ(178,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaTariffeEspanseBooking=a)}),e._uU(179),e.ALo(180,"translate"),e.qZA(),e._UZ(181,"br"),e.TgZ(182,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isRichiediDatiFatturazioneBooking=a)}),e._uU(183),e.ALo(184,"translate"),e.qZA(),e.TgZ(185,"mat-form-field",57)(186,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.tipoOrdinamentoTariffe=a)}),e.ALo(187,"translate"),e.YNc(188,NH,3,4,"mat-option",11),e.ALo(189,"selectEnum"),e.qZA()(),e.TgZ(190,"mat-form-field",8)(191,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.tipoVisualizzazioneGrigliaDisponibilita=a)}),e.ALo(192,"translate"),e.YNc(193,OH,3,4,"mat-option",11),e.ALo(194,"selectEnum"),e.qZA()(),e.TgZ(195,"mat-form-field",8)(196,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.tipoVisualizzazioneBanner=a)}),e.ALo(197,"translate"),e.YNc(198,LH,3,4,"mat-option",11),e.ALo(199,"selectEnum"),e.qZA()(),e.TgZ(200,"mat-form-field",8)(201,"input",71),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.timeoutChiusuraBanner=a)}),e.ALo(202,"translate"),e.qZA()(),e.TgZ(203,"mat-form-field",8)(204,"mat-select",72,73),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedCampiObbligatoriBooking=a)}),e.ALo(206,"translate"),e.TgZ(207,"mat-checkbox",74),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(205),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickCampiObbligatoriBooking(l))}),e._uU(208),e.ALo(209,"translate"),e.qZA(),e.YNc(210,DH,3,4,"mat-option",11),e.ALo(211,"selectEnum"),e.qZA()(),e.TgZ(212,"mat-form-field",8)(213,"mat-select",72,75),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedCampiObbligatoriECommerce=a)}),e.ALo(215,"translate"),e.TgZ(216,"mat-checkbox",74),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(214),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickCampiObbligatoriECommerce(l))}),e._uU(217),e.ALo(218,"translate"),e.qZA(),e.YNc(219,IH,3,4,"mat-option",11),e.ALo(220,"selectEnum"),e.qZA()()()()()}if(2&i){const t=e.MAs(205),n=e.MAs(214),a=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,123,"sbm.configurazione.portali.paginaPrenotazioneWeb")," "),e.xp6(4),e.Q6J("ngModel",a.modelEdit.portale.isEtaRiduzioniAttiva),e.xp6(1),e.hij(" ",e.lcZ(8,125,"bo.portaleXAlbergo.proprieta.isEtaRiduzioniAttiva")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaDisponibilitaCalendario),e.xp6(1),e.hij(" ",e.lcZ(12,127,"bo.portaleXAlbergo.proprieta.isVisualizzaDisponibilitaCalendario")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaPrezzoCalendario),e.xp6(1),e.hij(" ",e.lcZ(16,129,"bo.portaleXAlbergo.proprieta.isVisualizzaPrezzoCalendario")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaLogo),e.xp6(1),e.hij(" ",e.lcZ(20,131,"bo.portaleXAlbergo.proprieta.isVisualizzaLogo")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaCalendarioMobile),e.xp6(1),e.hij(" ",e.lcZ(24,133,"bo.portaleXAlbergo.proprieta.isVisualizzaCalendarioMobile")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isRichiediDisponibilitaStep1Visualizzata),e.xp6(1),e.hij(" ",e.lcZ(28,135,"bo.portaleXAlbergo.proprieta.isRichiediDisponibilitaStep1Visualizzata")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaPrezzoMinimo),e.xp6(1),e.hij(" ",e.lcZ(32,137,"bo.portaleXAlbergo.proprieta.isVisualizzaPrezzoMinimo")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isDisattivaRichiestaBambiniBooking),e.xp6(1),e.hij(" ",e.lcZ(36,139,"bo.portaleXAlbergo.proprieta.isDisattivaRichiestaBambiniBooking")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaBannerCookiesBooking),e.xp6(1),e.hij(" ",e.lcZ(40,141,"bo.portaleXAlbergo.proprieta.isVisualizzaBannerCookiesBooking")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isProponiNottiCalendarioBooking),e.xp6(1),e.hij(" ",e.lcZ(44,143,"bo.portaleXAlbergo.proprieta.isProponiNottiCalendarioBooking")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(47,145,"bo.portaleXAlbergo.proprieta.camerePrenotabili")),e.Q6J("ngModel",a.modelEdit.portale.camerePrenotabili),e.xp6(3),e.s9C("placeholder",e.lcZ(50,147,"bo.portaleXAlbergo.proprieta.adultiDefaultInPrenotazione")),e.Q6J("ngModel",a.modelEdit.portale.adultiDefaultInPrenotazione),e.xp6(3),e.s9C("placeholder",e.lcZ(53,149,"bo.portaleXAlbergo.proprieta.numeroMassimoAdulti")),e.Q6J("ngModel",a.modelEdit.portale.numeroMassimoAdulti),e.xp6(3),e.s9C("placeholder",e.lcZ(56,151,"bo.portaleXAlbergo.proprieta.numeroMassimoRiduzioni")),e.Q6J("ngModel",a.modelEdit.portale.numeroMassimoRiduzioni),e.xp6(3),e.s9C("placeholder",e.lcZ(59,153,"bo.portaleXAlbergo.proprieta.etaMinimaBambini")),e.Q6J("ngModel",a.modelEdit.portale.etaMinimaBambini),e.xp6(3),e.s9C("placeholder",e.lcZ(62,155,"bo.portaleXAlbergo.proprieta.etaMassimaBambini")),e.Q6J("ngModel",a.modelEdit.portale.etaMassimaBambini),e.xp6(3),e.s9C("placeholder",e.lcZ(65,157,"bo.portaleXAlbergo.proprieta.numeroUltimePrenotazioni")),e.Q6J("ngModel",a.modelEdit.portale.numeroUltimePrenotazioni),e.xp6(3),e.s9C("placeholder",e.lcZ(68,159,"bo.portaleXAlbergo.proprieta.numeroPersoneCollegate")),e.Q6J("ngModel",a.modelEdit.portale.numeroPersoneCollegate),e.xp6(3),e.s9C("placeholder",e.lcZ(71,161,"bo.portaleXAlbergo.proprieta.simboloValuta")),e.Q6J("ngModel",a.modelEdit.portale.simboloValuta),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaSoloTariffaMigliore),e.xp6(1),e.hij(" ",e.lcZ(75,163,"bo.portaleXAlbergo.proprieta.isVisualizzaSoloTariffaMigliore")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isFiltroTariffaAttivo),e.xp6(1),e.hij(" ",e.lcZ(79,165,"bo.portaleXAlbergo.proprieta.isFiltroTariffaAttivo")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaTotaleSoggiornoSeNonDisponibile),e.xp6(1),e.hij(" ",e.lcZ(83,167,"bo.portaleXAlbergo.proprieta.isVisualizzaTotaleSoggiornoSeNonDisponibile")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaCamereNonPrenotabili),e.xp6(1),e.hij(" ",e.lcZ(87,169,"bo.portaleXAlbergo.proprieta.isVisualizzaCamereNonPrenotabili")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isComparazioneTariffeAttivo),e.xp6(1),e.hij(" ",e.lcZ(91,171,"bo.portaleXAlbergo.proprieta.isComparazioneTariffeAttivo")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaDateAlternative),e.xp6(1),e.hij(" ",e.lcZ(95,173,"bo.portaleXAlbergo.proprieta.isVisualizzaDateAlternative")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isCamereLibereStep1Visualizzate),e.xp6(1),e.hij(" ",e.lcZ(99,175,"bo.portaleXAlbergo.proprieta.isCamereLibereStep1Visualizzate")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isPaxStep1Visualizzate),e.xp6(1),e.hij(" ",e.lcZ(103,177,"bo.portaleXAlbergo.proprieta.isPaxStep1Visualizzate")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isEscludiTariffeMinLosInferiore),e.xp6(1),e.hij(" ",e.lcZ(107,179,"bo.portaleXAlbergo.proprieta.isEscludiTariffeMinLosInferiore")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isEscludiTariffeMaxLosSuperiore),e.xp6(1),e.hij(" ",e.lcZ(111,181,"bo.portaleXAlbergo.proprieta.isEscludiTariffeMaxLosSuperiore")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isEscludiPromozioniNonPrenotabili),e.xp6(1),e.hij(" ",e.lcZ(115,183,"bo.portaleXAlbergo.proprieta.isEscludiPromozioniNonPrenotabili")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isControllaDurateSoggiornoSulGiornoDiArrivo),e.xp6(1),e.hij(" ",e.lcZ(119,185,"bo.portaleXAlbergo.proprieta.isControllaDurateSoggiornoSulGiornoDiArrivo")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isDurataPacchettoUgualeARichiesta),e.xp6(1),e.hij(" ",e.lcZ(123,187,"bo.portaleXAlbergo.proprieta.isDurataPacchettoUgualeARichiesta")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isSupplementiConPrezzoMaggioreZero),e.xp6(1),e.hij(" ",e.lcZ(127,189,"bo.portaleXAlbergo.proprieta.isSupplementiConPrezzoMaggioreZero")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVerificaCartaCredito)("disabled",!a.sessionService.is3DSecureAttivo()),e.xp6(1),e.hij(" ",e.lcZ(131,191,"bo.portaleXAlbergo.proprieta.isVerificaCartaCredito")," "),e.xp6(2),e.Q6J("ngIf",!a.sessionService.is3DSecureAttivo()),e.xp6(2),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaCRO),e.xp6(1),e.hij(" ",e.lcZ(136,193,"bo.portaleXAlbergo.proprieta.isVisualizzaCRO")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isRichiediInformazioniOspiti),e.xp6(1),e.hij(" ",e.lcZ(140,195,"bo.portaleXAlbergo.proprieta.isRichiediInformazioniOspiti")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isAccettaContrattoPrenotazioneStep2),e.xp6(1),e.hij(" ",e.lcZ(144,197,"bo.portaleXAlbergo.proprieta.isAccettaContrattoPrenotazioneStep2")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaCondizioniPrenotazioneStep2),e.xp6(1),e.hij(" ",e.lcZ(148,199,"bo.portaleXAlbergo.proprieta.isVisualizzaCondizioniPrenotazioneStep2")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaDettaglioGiornaliero),e.xp6(1),e.hij(" ",e.lcZ(152,201,"bo.portaleXAlbergo.proprieta.isVisualizzaDettaglioGiornaliero")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isAttivaSpedizioneBookingExtra),e.xp6(1),e.hij(" ",e.lcZ(156,203,"bo.portaleXAlbergo.proprieta.isAttivaSpedizioneBookingExtra")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isNascondiPromozioniSeVieneInseritoCodicePromozionale),e.xp6(1),e.hij(" ",e.lcZ(160,205,"bo.portaleXAlbergo.proprieta.isNascondiPromozioniSeVieneInseritoCodicePromozionale")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isNascondiPromozioniInEvidenza),e.xp6(1),e.hij(" ",e.lcZ(164,207,"bo.portaleXAlbergo.proprieta.isNascondiPromozioniInEvidenza")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaDescrizionePoliticaCancellazione),e.xp6(1),e.hij(" ",e.lcZ(168,209,"bo.portaleXAlbergo.proprieta.isVisualizzaDescrizionePoliticaCancellazione")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaDescrizioneDettagliataTariffa),e.xp6(1),e.hij(" ",e.lcZ(172,211,"bo.portaleXAlbergo.proprieta.isVisualizzaDescrizioneDettagliataTariffa")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isCreaPrenotazioniPrezziScontati),e.xp6(1),e.hij(" ",e.lcZ(176,213,"bo.portaleXAlbergo.proprieta.isCreaPrenotazioniPrezziScontati")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isVisualizzaTariffeEspanseBooking),e.xp6(1),e.hij(" ",e.lcZ(180,215,"bo.portaleXAlbergo.proprieta.isVisualizzaTariffeEspanseBooking")," "),e.xp6(3),e.Q6J("ngModel",a.modelEdit.portale.isRichiediDatiFatturazioneBooking),e.xp6(1),e.hij(" ",e.lcZ(184,217,"bo.portaleXAlbergo.proprieta.isRichiediDatiFatturazioneBooking")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(187,219,"bo.portaleXAlbergo.proprieta.tipoOrdinamentoTariffe")),e.Q6J("ngModel",a.modelEdit.portale.tipoOrdinamentoTariffe),e.xp6(2),e.Q6J("ngForOf",e.xi3(189,221,a.enumTipoOrdinamentoTariffe,"tipoOrdinamentoTariffe")),e.xp6(3),e.s9C("placeholder",e.lcZ(192,224,"bo.portaleXAlbergo.proprieta.tipoVisualizzazioneGrigliaDisponibilita")),e.Q6J("ngModel",a.modelEdit.portale.tipoVisualizzazioneGrigliaDisponibilita),e.xp6(2),e.Q6J("ngForOf",e.xi3(194,226,a.enumTipoVisualizzazioneGrigliaDisponibilita,"tipoVisualizzazioneGrigliaDisponibilita")),e.xp6(3),e.s9C("placeholder",e.lcZ(197,229,"bo.portaleXAlbergo.proprieta.tipoVisualizzazioneBanner")),e.Q6J("ngModel",a.modelEdit.portale.tipoVisualizzazioneBanner),e.xp6(2),e.Q6J("ngForOf",e.xi3(199,231,a.enumTipoVisualizzazioneBanner,"tipoVisualizzazioneBanner")),e.xp6(3),e.s9C("placeholder",e.lcZ(202,234,"bo.portaleXAlbergo.proprieta.timeoutChiusuraBanner")),e.Q6J("nullable",!0)("ngModel",a.modelEdit.portale.timeoutChiusuraBanner),e.xp6(3),e.Q6J("placeholder",e.lcZ(206,236,"bo.portaleXAlbergo.proprieta.campiObbligatoriBooking"))("ngModel",a.selectedCampiObbligatoriBooking),e.xp6(3),e.Q6J("ngClass",e.VKq(250,qi,a.isAllSelectedCampiObbligatoriBooking(t)))("checked",a.isAllSelectedCampiObbligatoriBooking(t))("indeterminate",!a.isAllSelectedCampiObbligatoriBooking(t)&&!a.isAllDeselected(t)),e.xp6(1),e.hij(" ",e.lcZ(209,238,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",e.xi3(211,240,a.enumCampoObbligatorioBooking,"campoObbligatorioBooking")),e.xp6(3),e.Q6J("placeholder",e.lcZ(215,243,"bo.portaleXAlbergo.proprieta.campiObbligatoriECommerce"))("ngModel",a.selectedCampiObbligatoriECommerce),e.xp6(3),e.Q6J("ngClass",e.VKq(252,qi,a.isAllSelectedCampiObbligatoriECommerce(n)))("checked",a.isAllSelectedCampiObbligatoriECommerce(n))("indeterminate",!a.isAllSelectedCampiObbligatoriECommerce(n)&&!a.isAllDeselected(n)),e.xp6(1),e.hij(" ",e.lcZ(218,245,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",e.xi3(220,247,a.enumCampoObbligatorioECommerce,"campoObbligatorioECommerce"))}}function UH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",68)(1,"mat-card-title",28),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",6)(5,"div",76)(6,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaInComparatoreTariffe=a)}),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",76)(10,"mat-form-field",8)(11,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.nomePortaleCompatoreTariffe=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",76)(14,"mat-form-field",8)(15,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.importoMinimoXCompatoreTariffe=a)}),e.ALo(16,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,7,"sbm.configurazione.portali.comparatoreTariffe")," "),e.xp6(4),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaInComparatoreTariffe),e.xp6(1),e.hij(" ",e.lcZ(8,9,"bo.portaleXAlbergo.proprieta.isVisualizzaInComparatoreTariffe")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(12,11,"bo.portaleXAlbergo.proprieta.nomePortaleCompatoreTariffe")),e.Q6J("ngModel",t.modelEdit.portale.nomePortaleCompatoreTariffe),e.xp6(4),e.s9C("placeholder",e.lcZ(16,13,"bo.portaleXAlbergo.proprieta.importoMinimoXCompatoreTariffe")),e.Q6J("ngModel",t.modelEdit.portale.importoMinimoXCompatoreTariffe)}}function YH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",68)(1,"mat-card-title",28)(2,"span",77),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",78),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openTracciamentiHelp())}),e.TgZ(6,"span",79),e._uU(7,"help"),e.qZA()()(),e.TgZ(8,"div",6)(9,"div",21)(10,"mat-form-field",8)(11,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.googleUA=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",21)(14,"mat-form-field",8)(15,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.googleGTM=a)}),e.ALo(16,"translate"),e.qZA()()(),e.TgZ(17,"div",21)(18,"mat-form-field",8)(19,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.facebookPixel=a)}),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"div",21)(22,"mat-form-field",8)(23,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.affiliredID=a)}),e.ALo(24,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,9,"sbm.configurazione.portali.tracciamenti")),e.xp6(8),e.s9C("placeholder",e.lcZ(12,11,"bo.portaleXAlbergo.proprieta.googleUA")),e.Q6J("ngModel",t.modelEdit.portale.googleUA),e.xp6(4),e.s9C("placeholder",e.lcZ(16,13,"bo.portaleXAlbergo.proprieta.googleGTM")),e.Q6J("ngModel",t.modelEdit.portale.googleGTM),e.xp6(4),e.s9C("placeholder",e.lcZ(20,15,"bo.portaleXAlbergo.proprieta.facebookPixel")),e.Q6J("ngModel",t.modelEdit.portale.facebookPixel),e.xp6(4),e.s9C("placeholder",e.lcZ(24,17,"bo.portaleXAlbergo.proprieta.affiliredID")),e.Q6J("ngModel",t.modelEdit.portale.affiliredID)}}function RH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",68)(1,"mat-card-title",28)(2,"span",77),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",78),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openFacebookHelp())}),e.TgZ(6,"span",79),e._uU(7,"help"),e.qZA()()(),e.TgZ(8,"div",6)(9,"div",76)(10,"mat-form-field",8)(11,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.facebookPageId=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",76)(14,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaChatFacebookBooking=a)}),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",76)(18,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaChatFacebookMyPage=a)}),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,7,"sbm.configurazione.portali.chat")),e.xp6(8),e.s9C("placeholder",e.lcZ(12,9,"bo.portaleXAlbergo.proprieta.facebookPageId")),e.Q6J("ngModel",t.modelEdit.portale.facebookPageId),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaChatFacebookBooking),e.xp6(1),e.hij(" ",e.lcZ(16,11,"bo.portaleXAlbergo.proprieta.isVisualizzaChatFacebookBooking")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaChatFacebookMyPage),e.xp6(1),e.hij(" ",e.lcZ(20,13,"bo.portaleXAlbergo.proprieta.isVisualizzaChatFacebookMyPage")," ")}}function FH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumCampoObbligatorioFormRichiesta,t,"campoObbligatorioFormRichiesta"))," ")}}function HH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",80)(1,"mat-card-title"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",6)(5,"div",21)(6,"mat-form-field",8)(7,"mat-select",72,81),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedCampiObbligatoriFormRichiesta=a)}),e.ALo(9,"translate"),e.TgZ(10,"mat-checkbox",74),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(8),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickCampiObbligatoriFormRichiesta(l))}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,FH,3,4,"mat-option",11),e.qZA()()(),e.TgZ(14,"div",82)(15,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isInviaEmailHotelFormRichiesta=a)}),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",82)(19,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaTipoCameraFormRichiesta=a)}),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",82)(23,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaTrattamentoFormRichiesta=a)}),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",82)(27,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isDisattivaRichiestaBambiniFormRichiesta=a)}),e._uU(28),e.ALo(29,"translate"),e.qZA()()(),e.TgZ(30,"div",6)(31,"div",21)(32,"mat-form-field",8)(33,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.bannerFormRichiesta=a)}),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"div",21)(36,"app-color-picker",19),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.coloreBannerFormRichiesta=a)}),e.ALo(37,"translate"),e.qZA()()(),e.TgZ(38,"app-url",55),e.NdJ("onExtraButtonClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.condividiIFrame(a.getUrlFormRichiesta(),800,a.enumPagina.Richiesta))}),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"app-url",55),e.NdJ("onExtraButtonClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.condividiIFrame(a.getUrlFormRichiestaDayUse(),800,a.enumPagina.Richiesta))}),e.ALo(41,"translate"),e.qZA()()}if(2&i){const t=e.MAs(8),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,26,"sbm.configurazione.portali.parametriFormRichiesta")," "),e.xp6(5),e.Q6J("placeholder",e.lcZ(9,28,"bo.portaleXAlbergo.proprieta.campiObbligatoriFormRichiesta"))("ngModel",n.selectedCampiObbligatoriFormRichiesta),e.xp6(3),e.Q6J("ngClass",e.VKq(48,qi,n.isAllSelectedCampiObbligatoriFormRichiesta(t)))("checked",n.isAllSelectedCampiObbligatoriFormRichiesta(t))("indeterminate",!n.isAllSelectedCampiObbligatoriFormRichiesta(t)&&!n.isAllDeselected(t)),e.xp6(1),e.hij(" ",e.lcZ(12,30,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",n.campiObbligatoriFormRichiesta),e.xp6(2),e.Q6J("ngModel",n.modelEdit.portale.isInviaEmailHotelFormRichiesta),e.xp6(1),e.hij(" ",e.lcZ(17,32,"bo.portaleXAlbergo.proprieta.isInviaEmailHotelFormRichiesta")," "),e.xp6(3),e.Q6J("ngModel",n.modelEdit.portale.isVisualizzaTipoCameraFormRichiesta),e.xp6(1),e.hij(" ",e.lcZ(21,34,"bo.portaleXAlbergo.proprieta.isVisualizzaTipoCameraFormRichiesta")," "),e.xp6(3),e.Q6J("ngModel",n.modelEdit.portale.isVisualizzaTrattamentoFormRichiesta),e.xp6(1),e.hij(" ",e.lcZ(25,36,"bo.portaleXAlbergo.proprieta.isVisualizzaTrattamentoFormRichiesta")," "),e.xp6(3),e.Q6J("ngModel",n.modelEdit.portale.isDisattivaRichiestaBambiniFormRichiesta),e.xp6(1),e.hij(" ",e.lcZ(29,38,"bo.portaleXAlbergo.proprieta.isDisattivaRichiestaBambiniFormRichiesta")," "),e.xp6(5),e.Q6J("placeholder",e.lcZ(34,40,"bo.portaleXAlbergo.proprieta.bannerFormRichiesta"))("ngModel",n.modelEdit.portale.bannerFormRichiesta),e.xp6(3),e.Q6J("value",n.modelEdit.portale.coloreBannerFormRichiesta)("placeholder",e.lcZ(37,42,"bo.portaleXAlbergo.proprieta.coloreBannerFormRichiesta")),e.xp6(2),e.Q6J("placeholder",e.lcZ(39,44,"sbm.configurazione.portali.urlRichiesta"))("url",n.getUrlFormRichiesta())("extraButtonIcon","share"),e.xp6(2),e.Q6J("placeholder",e.lcZ(41,46,"sbm.configurazione.portali.urlRichiestaDayUse"))("url",n.getUrlFormRichiestaDayUse())("extraButtonIcon","share")}}function KH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",76)(2,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.isProgressivoPreventivoXUbicazione=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",76)(6,"mat-form-field",8)(7,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.ubicazioneIstat.prefissoCodicePreventivo=a)}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",76)(10,"mat-form-field",8)(11,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.portale.ubicazioneIstat.prossimoNumeroPreventivo=a)}),e.ALo(12,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.portale.isProgressivoPreventivoXUbicazione),e.xp6(1),e.hij(" ",e.lcZ(4,6,"bo.portaleXAlbergo.proprieta.isProgressivoPreventivoXUbicazione")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(8,8,"bo.ubicazioneIstat.proprieta.prefissoCodicePreventivo")),e.Q6J("ngModel",t.modelEdit.portale.ubicazioneIstat.prefissoCodicePreventivo),e.xp6(4),e.s9C("placeholder",e.lcZ(12,10,"bo.ubicazioneIstat.proprieta.prossimoNumeroPreventivo")),e.Q6J("ngModel",t.modelEdit.portale.ubicazioneIstat.prossimoNumeroPreventivo)}}function GH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function $H(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumCampoObbligatorioFormRichiesta,t,"campoObbligatorioFormRichiesta"))," ")}}function BH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function VH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function XH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function jH(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.nome)}}function WH(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",26)(1,"mat-expansion-panel-header"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,KH,13,12,"div",83),e.TgZ(5,"div",6)(6,"div",76)(7,"mat-form-field",8)(8,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.templateDescrizioneDettaglioProposta=a)}),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",84),e._uU(11," es. [NomeTipoCameraOTA] [DescrizioneTariffaOTA] [NomePromozione] [NomeRiduzione] "),e.qZA()(),e.TgZ(12,"div",58)(13,"div",30)(14,"mat-form-field",8)(15,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.versioneMyPage=a)}),e.ALo(16,"translate"),e.YNc(17,GH,3,4,"mat-option",11),e.ALo(18,"selectEnum"),e.qZA()(),e.TgZ(19,"mat-form-field",8)(20,"mat-select",72,85),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedCampiObbligatoriPreventivo=a)}),e.ALo(22,"translate"),e.TgZ(23,"mat-checkbox",74),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(21),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickCampiObbligatoriPreventivo(l))}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.YNc(26,$H,3,4,"mat-option",11),e.qZA()(),e.TgZ(27,"mat-form-field",8)(28,"mat-select",72,86),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedCampiObbligatoriMyPage=a)}),e.ALo(30,"translate"),e.TgZ(31,"mat-checkbox",74),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(29),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickCampiObbligatoriMyPage(l))}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.YNc(34,BH,3,4,"mat-option",11),e.ALo(35,"selectEnum"),e.qZA()(),e.TgZ(36,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.templateStampaPrenotazioneMyPage=a)}),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"mat-form-field",8)(39,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.percentualeMinimaScontoMyPage=a)}),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"mat-form-field",8)(42,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.camerePrenotabiliCrm=a)}),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"mat-form-field",8)(45,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.tipoScontoDefaultDettagliPreventivo=a)}),e.ALo(46,"translate"),e.YNc(47,VH,3,4,"mat-option",11),e.ALo(48,"selectEnum"),e.qZA()(),e.TgZ(49,"mat-form-field",8)(50,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.tipoRichiestaDefault=a)}),e.ALo(51,"translate"),e._UZ(52,"mat-option",40),e.YNc(53,XH,3,4,"mat-option",11),e.ALo(54,"selectEnum"),e.qZA()()(),e.TgZ(55,"div",30)(56,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaDettagliPropostaMyPage=a)}),e._uU(57),e.ALo(58,"translate"),e.qZA(),e._UZ(59,"br"),e.TgZ(60,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaInformazioniPropostaMyPage=a)}),e._uU(61),e.ALo(62,"translate"),e.qZA(),e._UZ(63,"br"),e.TgZ(64,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaProposteEspanse=a)}),e._uU(65),e.ALo(66,"translate"),e.qZA(),e._UZ(67,"br"),e.TgZ(68,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isAggiungiMessaggiAutomaticiChatPreventivo=a)}),e._uU(69),e.ALo(70,"translate"),e.qZA(),e._UZ(71,"br"),e.TgZ(72,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isDividiRettaPerOspite=a)}),e._uU(73),e.ALo(74,"translate"),e.qZA(),e._UZ(75,"br"),e.TgZ(76,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaRiepilogoPagamentoMyPage=a)}),e._uU(77),e.ALo(78,"translate"),e.qZA(),e._UZ(79,"br"),e.TgZ(80,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isApplicaTassaSoggiornoCRM=a)}),e._uU(81),e.ALo(82,"translate"),e.qZA(),e._UZ(83,"br"),e.TgZ(84,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isDisattivaCheckInMyPage=a)}),e._uU(85),e.ALo(86,"translate"),e.qZA(),e._UZ(87,"br"),e.TgZ(88,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isNascondiChatMyPage=a)}),e._uU(89),e.ALo(90,"translate"),e.qZA(),e._UZ(91,"br"),e.TgZ(92,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isInviaMailConfermaPagamentoManualeCrm=a)}),e._uU(93),e.ALo(94,"translate"),e.qZA(),e._UZ(95,"br"),e.TgZ(96,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaRifiutaOffertaMyPage=a)}),e._uU(97),e.ALo(98,"translate"),e.qZA(),e.TgZ(99,"mat-form-field",87)(100,"mat-select",72,88),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedModalitaPagamentoRichiestaCaparra=a)}),e.ALo(102,"translate"),e.TgZ(103,"mat-checkbox",74),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(101),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickModalitaPagamentoRichiestaCaparra(l))}),e._uU(104),e.ALo(105,"translate"),e.qZA(),e.YNc(106,jH,2,2,"mat-option",11),e.qZA()(),e.TgZ(107,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.templateDefaultRichiestaCaparra=a)}),e.ALo(108,"translate"),e.qZA(),e.TgZ(109,"mat-form-field",8)(110,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.emailMyPage=a)}),e.ALo(111,"translate"),e.qZA()()()()()}if(2&i){const t=e.MAs(21),n=e.MAs(29),a=e.MAs(101),l=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,69,"sbm.configurazione.portali.parametriCrm")," "),e.xp6(2),e.Q6J("ngIf",null!=l.modelEdit.portale.ubicazioneIstat),e.xp6(4),e.s9C("placeholder",e.lcZ(9,71,"bo.portaleXAlbergo.proprieta.templateDescrizioneDettaglioProposta")),e.Q6J("ngModel",l.modelEdit.portale.templateDescrizioneDettaglioProposta),e.xp6(7),e.s9C("placeholder",e.lcZ(16,73,"bo.portaleXAlbergo.proprieta.versioneMyPage")),e.Q6J("ngModel",l.modelEdit.portale.versioneMyPage),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,75,l.enumVersioneMyPage,"versioneMyPage")),e.xp6(3),e.Q6J("placeholder",e.lcZ(22,78,"bo.portaleXAlbergo.proprieta.campiObbligatoriPreventivo"))("ngModel",l.selectedCampiObbligatoriPreventivo),e.xp6(3),e.Q6J("ngClass",e.VKq(135,qi,l.isAllSelectedCampiObbligatoriPreventivo(t)))("checked",l.isAllSelectedCampiObbligatoriPreventivo(t))("indeterminate",!l.isAllSelectedCampiObbligatoriPreventivo(t)&&!l.isAllDeselected(t)),e.xp6(1),e.hij(" ",e.lcZ(25,80,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",l.campiObbligatoriPreventivo),e.xp6(2),e.Q6J("placeholder",e.lcZ(30,82,"bo.portaleXAlbergo.proprieta.campiObbligatoriMyPage"))("ngModel",l.selectedCampiObbligatoriMyPage),e.xp6(3),e.Q6J("ngClass",e.VKq(137,qi,l.isAllSelectedCampiObbligatoriMyPage(n)))("checked",l.isAllSelectedCampiObbligatoriMyPage(n))("indeterminate",!l.isAllSelectedCampiObbligatoriMyPage(n)&&!l.isAllDeselected(n)),e.xp6(1),e.hij(" ",e.lcZ(33,84,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",e.xi3(35,86,l.enumCampoObbligatorioMyPage,"campoObbligatorioMyPage")),e.xp6(2),e.Q6J("dataLoader",l.apiService.getTemplatesViewSelect(l.getTemplatesStampaRQ))("value",l.modelEdit.portale.templateStampaPrenotazioneMyPage)("placeholder",e.lcZ(37,89,"bo.portaleXAlbergo.proprieta.templateStampaPrenotazioneMyPage")),e.xp6(3),e.s9C("placeholder",e.lcZ(40,91,"bo.portaleXAlbergo.proprieta.percentualeMinimaScontoMyPage")),e.Q6J("ngModel",l.modelEdit.portale.percentualeMinimaScontoMyPage),e.xp6(3),e.s9C("placeholder",e.lcZ(43,93,"bo.portaleXAlbergo.proprieta.camerePrenotabiliCrm")),e.Q6J("ngModel",l.modelEdit.portale.camerePrenotabiliCrm),e.xp6(3),e.s9C("placeholder",e.lcZ(46,95,"bo.portaleXAlbergo.proprieta.tipoScontoDefaultDettagliPreventivo")),e.Q6J("ngModel",l.modelEdit.portale.tipoScontoDefaultDettagliPreventivo),e.xp6(2),e.Q6J("ngForOf",e.xi3(48,97,l.enumTipoValore,"tipoValore")),e.xp6(3),e.s9C("placeholder",e.lcZ(51,100,"bo.portaleXAlbergo.proprieta.tipoRichiestaDefault")),e.Q6J("ngModel",l.modelEdit.portale.tipoRichiestaDefault),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(54,102,l.enumTipoRichiesta,"tipoRichiestaPreventivo")),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isVisualizzaDettagliPropostaMyPage),e.xp6(1),e.hij(" ",e.lcZ(58,105,"bo.portaleXAlbergo.proprieta.isVisualizzaDettagliPropostaMyPage")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isVisualizzaInformazioniPropostaMyPage),e.xp6(1),e.hij(" ",e.lcZ(62,107,"bo.portaleXAlbergo.proprieta.isVisualizzaInformazioniPropostaMyPage")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isVisualizzaProposteEspanse),e.xp6(1),e.hij(" ",e.lcZ(66,109,"bo.portaleXAlbergo.proprieta.isVisualizzaProposteEspanse")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isAggiungiMessaggiAutomaticiChatPreventivo),e.xp6(1),e.hij(" ",e.lcZ(70,111,"bo.portaleXAlbergo.proprieta.isAggiungiMessaggiAutomaticiChatPreventivo")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isDividiRettaPerOspite),e.xp6(1),e.hij(" ",e.lcZ(74,113,"bo.portaleXAlbergo.proprieta.isDividiRettaPerOspite")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isVisualizzaRiepilogoPagamentoMyPage),e.xp6(1),e.hij(" ",e.lcZ(78,115,"bo.portaleXAlbergo.proprieta.isVisualizzaRiepilogoPagamentoMyPage")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isApplicaTassaSoggiornoCRM),e.xp6(1),e.hij(" ",e.lcZ(82,117,"bo.portaleXAlbergo.proprieta.isApplicaTassaSoggiornoCRM")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isDisattivaCheckInMyPage),e.xp6(1),e.hij(" ",e.lcZ(86,119,"bo.portaleXAlbergo.proprieta.isDisattivaCheckInMyPage")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isNascondiChatMyPage),e.xp6(1),e.hij(" ",e.lcZ(90,121,"bo.portaleXAlbergo.proprieta.isNascondiChatMyPage")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isInviaMailConfermaPagamentoManualeCrm),e.xp6(1),e.hij(" ",e.lcZ(94,123,"bo.portaleXAlbergo.proprieta.isInviaMailConfermaPagamentoManualeCrm")," "),e.xp6(3),e.Q6J("ngModel",l.modelEdit.portale.isVisualizzaRifiutaOffertaMyPage),e.xp6(1),e.hij(" ",e.lcZ(98,125,"bo.portaleXAlbergo.proprieta.isVisualizzaRifiutaOffertaMyPage")," "),e.xp6(3),e.Q6J("placeholder",e.lcZ(102,127,"bo.portaleXAlbergo.proprieta.modalitaPagamentoDefaultRichiestaCaparra"))("ngModel",l.selectedModalitaPagamentoRichiestaCaparra),e.xp6(3),e.Q6J("ngClass",e.VKq(139,qi,l.isAllSelectedModalitaPagamentoRichiestaCaparra(a)))("checked",l.isAllSelectedModalitaPagamentoRichiestaCaparra(a))("indeterminate",!l.isAllSelectedModalitaPagamentoRichiestaCaparra(a)&&!l.isAllDeselected(a)),e.xp6(1),e.Oqu(e.lcZ(105,129,"globals.selezionaDeselezionaTutti")),e.xp6(2),e.Q6J("ngForOf",l.modalitaPagamentoMyPage),e.xp6(1),e.Q6J("dataLoader",l.apiService.getTemplatesViewSelect(l.getTemplatesRichiestaCaparraRQ))("value",l.modelEdit.portale.templateDefaultRichiestaCaparra)("placeholder",e.lcZ(108,131,"bo.portaleXAlbergo.proprieta.templateDefaultRichiestaCaparra")),e.xp6(3),e.s9C("placeholder",e.lcZ(111,133,"bo.portaleXAlbergo.proprieta.emailMyPage")),e.Q6J("ngModel",l.modelEdit.portale.emailMyPage)}}function eK(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function tK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",26)(1,"mat-expansion-panel-header"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",6)(5,"div",76)(6,"div",6)(7,"div",89)(8,"app-color-picker",19),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.coloreSelfCheckIn=a)}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",90)(11,"button",91),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.portale.coloreSelfCheckIn=null)}),e.TgZ(12,"i",92),e._uU(13," settings_backup_restore "),e.qZA()()()()(),e.TgZ(14,"div",76)(15,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isRichiediPasswordSelfCheckIn=a)}),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",76)(19,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isAttivaBookingExtraSelfCheckIn=a)}),e._uU(20),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"div",6)(23,"div",76)(24,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isAttivaUpSellingSelfCheckIn=a)}),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",76)(28,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isAttivaCancellazioneSelfCheckIn=a)}),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"div",76)(32,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaTuttiDatiSelfCheckIn=a)}),e._uU(33),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"div",6)(36,"div",76)(37,"mat-form-field",8)(38,"input",93),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.dominiOTASelfCheckIn=a)}),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",76)(41,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.linguaDefaultSelfCheckIn=a)}),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"div",76)(44,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaRiepilogoPrenotazioneSelfCheckIn=a)}),e._uU(45),e.ALo(46,"translate"),e.qZA()()(),e.TgZ(47,"div",6)(48,"div",76)(49,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.templateStampaPrenotazioneSelfCheckIn=a)}),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"div",76)(52,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isBloccaModificaDatiCheckIn=a)}),e._uU(53),e.ALo(54,"translate"),e.qZA()(),e.TgZ(55,"div",76)(56,"mat-checkbox",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isNascondiChatSelfCheckIn=a)}),e._uU(57),e.ALo(58,"translate"),e.qZA()()(),e.TgZ(59,"div",6)(60,"div",76)(61,"mat-form-field",8)(62,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.tipoVisualizzazioneImmaginePrenotazione=a)}),e.ALo(63,"translate"),e.YNc(64,eK,3,4,"mat-option",11),e.ALo(65,"selectEnum"),e.qZA()()(),e.TgZ(66,"div",76)(67,"mat-form-field",8)(68,"input",94),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.orarioDiArrivoMinimoSelfCheckIn=a)}),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"button",95),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.portale.orarioDiArrivoMinimoSelfCheckIn=null)}),e.TgZ(71,"mat-icon",96),e._uU(72,"clear"),e.qZA()()()(),e.TgZ(73,"div",76)(74,"mat-form-field",8)(75,"input",94),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.orarioDiArrivoMassimoSelfCheckIn=a)}),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"button",95),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.portale.orarioDiArrivoMassimoSelfCheckIn=null)}),e.TgZ(78,"mat-icon",96),e._uU(79,"clear"),e.qZA()()()()(),e.TgZ(80,"div",6)(81,"div",76)(82,"mat-checkbox",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.isVisualizzaPrenotazioneEliminataSelfCheckIn=a)}),e._uU(83),e.ALo(84,"translate"),e.qZA()()(),e._UZ(85,"app-url",54),e.ALo(86,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,38,"sbm.configurazione.portali.parametriSelfCheckIn")," "),e.xp6(6),e.Q6J("value",t.modelEdit.portale.coloreSelfCheckIn)("placeholder",e.lcZ(9,40,"bo.portaleXAlbergo.proprieta.coloreSelfCheckIn")),e.xp6(7),e.Q6J("ngModel",t.modelEdit.portale.isRichiediPasswordSelfCheckIn),e.xp6(1),e.hij(" ",e.lcZ(17,42,"bo.portaleXAlbergo.proprieta.isRichiediPasswordSelfCheckIn")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isAttivaBookingExtraSelfCheckIn),e.xp6(1),e.hij(" ",e.lcZ(21,44,"bo.portaleXAlbergo.proprieta.isAttivaBookingExtraSelfCheckIn")," "),e.xp6(4),e.Q6J("ngModel",t.modelEdit.portale.isAttivaUpSellingSelfCheckIn),e.xp6(1),e.hij(" ",e.lcZ(26,46,"bo.portaleXAlbergo.proprieta.isAttivaUpSellingSelfCheckIn")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isAttivaCancellazioneSelfCheckIn),e.xp6(1),e.hij(" ",e.lcZ(30,48,"bo.portaleXAlbergo.proprieta.isAttivaCancellazioneSelfCheckIn")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaTuttiDatiSelfCheckIn),e.xp6(1),e.hij(" ",e.lcZ(34,50,"bo.portaleXAlbergo.proprieta.isVisualizzaTuttiDatiSelfCheckIn")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(39,52,"bo.portaleXAlbergo.proprieta.dominiOTASelfCheckIn")),e.Q6J("ngModel",t.modelEdit.portale.dominiOTASelfCheckIn),e.xp6(3),e.Q6J("dataLoader",t.apiService.getLingueViewSelect())("value",t.modelEdit.portale.linguaDefaultSelfCheckIn)("placeholder",e.lcZ(42,54,"bo.portaleXAlbergo.proprieta.linguaDefaultSelfCheckIn")),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaRiepilogoPrenotazioneSelfCheckIn),e.xp6(1),e.hij(" ",e.lcZ(46,56,"bo.portaleXAlbergo.proprieta.isVisualizzaRiepilogoPrenotazioneSelfCheckIn")," "),e.xp6(4),e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesStampaRQ))("value",t.modelEdit.portale.templateStampaPrenotazioneSelfCheckIn)("placeholder",e.lcZ(50,58,"bo.portaleXAlbergo.proprieta.templateStampaPrenotazioneSelfCheckIn")),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isBloccaModificaDatiCheckIn),e.xp6(1),e.hij(" ",e.lcZ(54,60,"bo.portaleXAlbergo.proprieta.isBloccaModificaDatiCheckIn")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isNascondiChatSelfCheckIn),e.xp6(1),e.hij(" ",e.lcZ(58,62,"bo.portaleXAlbergo.proprieta.isNascondiChatSelfCheckIn")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(63,64,"bo.portaleXAlbergo.proprieta.tipoVisualizzazioneImmaginePrenotazione")),e.Q6J("ngModel",t.modelEdit.portale.tipoVisualizzazioneImmaginePrenotazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(65,66,t.enumTipoVisualizzazioneImmaginePrenotazione,"tipoVisualizzazioneImmaginePrenotazione")),e.xp6(4),e.s9C("placeholder",e.lcZ(69,69,"bo.portaleXAlbergo.proprieta.orarioDiArrivoMinimoSelfCheckIn")),e.Q6J("ngModel",t.modelEdit.portale.orarioDiArrivoMinimoSelfCheckIn),e.xp6(7),e.s9C("placeholder",e.lcZ(76,71,"bo.portaleXAlbergo.proprieta.orarioDiArrivoMassimoSelfCheckIn")),e.Q6J("ngModel",t.modelEdit.portale.orarioDiArrivoMassimoSelfCheckIn),e.xp6(7),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaPrenotazioneEliminataSelfCheckIn),e.xp6(1),e.hij(" ",e.lcZ(84,73,"bo.portaleXAlbergo.proprieta.isVisualizzaPrenotazioneEliminataSelfCheckIn")," "),e.xp6(2),e.Q6J("placeholder",e.lcZ(86,75,"sbm.configurazione.portali.urlSelfCheckIn"))("url",t.getUrlCheckIn())}}function iK(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function oK(i,o){if(1&i&&(e.TgZ(0,"mat-option",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function nK(i,o){if(1&i&&(e.TgZ(0,"mat-option",100),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(77);e.Q6J("value",t.twoLetterISOLanguageName)("hidden",!(!n.value||t.displayName&&t.displayName.toLowerCase().includes(n.value.toLowerCase()))),e.xp6(1),e.hij(" ",t.displayName+" ("+t.twoLetterISOLanguageName+")"," ")}}function aK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",26)(1,"mat-expansion-panel-header"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-form-field",8)(5,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.nomeStruttura=a)}),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",6)(8,"div",76)(9,"mat-form-field",8)(10,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.indirizzo=a)}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",76)(13,"mat-form-field",8)(14,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.citta=a)}),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"div",97)(17,"mat-form-field",8)(18,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.cap=a)}),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",97)(21,"mat-form-field",8)(22,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.provincia=a)}),e.ALo(23,"translate"),e.qZA()()()(),e.TgZ(24,"div",6)(25,"div",76)(26,"mat-form-field",8)(27,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.telefono=a)}),e.ALo(28,"translate"),e.qZA()()(),e.TgZ(29,"div",76)(30,"mat-form-field",8)(31,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.telefonoWhatsApp=a)}),e.ALo(32,"translate"),e.qZA()()(),e.TgZ(33,"div",76)(34,"mat-form-field",8)(35,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.fax=a)}),e.ALo(36,"translate"),e.qZA()()()(),e.TgZ(37,"div",6)(38,"div",30)(39,"mat-form-field",8)(40,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.email=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onEmailChange())}),e.ALo(41,"translate"),e.qZA()()(),e.TgZ(42,"div",30)(43,"mat-form-field",8)(44,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.campoPersonalizzatoEmail=a)}),e.ALo(45,"translate"),e.qZA()()()(),e.TgZ(46,"div",6)(47,"div",76)(48,"mat-form-field",8)(49,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.linkSitoWeb=a)}),e.ALo(50,"translate"),e.qZA()()(),e.TgZ(51,"div",76)(52,"mat-form-field",8)(53,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.tipologia=a)}),e.ALo(54,"translate"),e.YNc(55,iK,3,4,"mat-option",11),e.ALo(56,"selectEnum"),e.qZA()()(),e.TgZ(57,"div",76)(58,"mat-form-field",8)(59,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.stelle=a)}),e.ALo(60,"translate"),e.YNc(61,oK,3,4,"mat-option",11),e.ALo(62,"selectEnum"),e.qZA()()()(),e.TgZ(63,"div",6)(64,"div",76)(65,"mat-form-field",8)(66,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.partitaIva=a)}),e.ALo(67,"translate"),e.qZA()()(),e.TgZ(68,"div",76)(69,"mat-form-field",8)(70,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.numeroCCIA=a)}),e.ALo(71,"translate"),e.qZA()()(),e.TgZ(72,"div",76)(73,"mat-form-field",8)(74,"mat-select",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.twoLetterCountryCode=a)}),e.ALo(75,"translate"),e._UZ(76,"app-select-search",null,98)(78,"mat-option",40),e.YNc(79,nK,2,3,"mat-option",99),e.qZA()()()(),e.TgZ(80,"div",6)(81,"div",76)(82,"mat-form-field",8)(83,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.latitude=a)}),e.ALo(84,"translate"),e.qZA()()(),e.TgZ(85,"div",76)(86,"mat-form-field",8)(87,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.longitude=a)}),e.ALo(88,"translate"),e.qZA()()()(),e.TgZ(89,"mat-form-field",8)(90,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.urlIFrameGoogleMap=a)}),e.ALo(91,"translate"),e.qZA()(),e.TgZ(92,"mat-form-field",8)(93,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.googlePlaceId=a)}),e.ALo(94,"translate"),e.qZA()(),e.TgZ(95,"div",6)(96,"div",30)(97,"mat-form-field",8)(98,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.urlFacebook=a)}),e.ALo(99,"translate"),e.qZA()()(),e.TgZ(100,"div",30)(101,"mat-form-field",8)(102,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.urlInstagram=a)}),e.ALo(103,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,48,"sbm.configurazione.portali.datiAnagraficiTab")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(6,50,"bo.portaleXAlbergo.proprieta.nomeStruttura")),e.Q6J("ngModel",t.modelEdit.portale.nomeStruttura),e.xp6(5),e.s9C("placeholder",e.lcZ(11,52,"bo.portaleXAlbergo.proprieta.indirizzo")),e.Q6J("ngModel",t.modelEdit.portale.indirizzo),e.xp6(4),e.s9C("placeholder",e.lcZ(15,54,"bo.portaleXAlbergo.proprieta.citta")),e.Q6J("ngModel",t.modelEdit.portale.citta),e.xp6(4),e.s9C("placeholder",e.lcZ(19,56,"bo.portaleXAlbergo.proprieta.cap")),e.Q6J("ngModel",t.modelEdit.portale.cap),e.xp6(4),e.s9C("placeholder",e.lcZ(23,58,"bo.portaleXAlbergo.proprieta.provincia")),e.Q6J("ngModel",t.modelEdit.portale.provincia),e.xp6(5),e.s9C("placeholder",e.lcZ(28,60,"bo.portaleXAlbergo.proprieta.telefono")),e.Q6J("ngModel",t.modelEdit.portale.telefono),e.xp6(4),e.s9C("placeholder",e.lcZ(32,62,"bo.portaleXAlbergo.proprieta.telefonoWhatsapp")),e.Q6J("ngModel",t.modelEdit.portale.telefonoWhatsApp),e.xp6(4),e.s9C("placeholder",e.lcZ(36,64,"bo.portaleXAlbergo.proprieta.fax")),e.Q6J("ngModel",t.modelEdit.portale.fax),e.xp6(5),e.s9C("placeholder",e.lcZ(41,66,"bo.portaleXAlbergo.proprieta.email")),e.Q6J("ngModel",t.modelEdit.portale.email),e.xp6(4),e.s9C("placeholder",e.lcZ(45,68,"bo.portaleXAlbergo.proprieta.campoPersonalizzatoEmail")),e.Q6J("ngModel",t.modelEdit.portale.campoPersonalizzatoEmail),e.xp6(5),e.s9C("placeholder",e.lcZ(50,70,"bo.portaleXAlbergo.proprieta.linkSitoWeb")),e.Q6J("ngModel",t.modelEdit.portale.linkSitoWeb),e.xp6(4),e.s9C("placeholder",e.lcZ(54,72,"bo.portaleXAlbergo.proprieta.tipologia")),e.Q6J("ngModel",t.modelEdit.portale.tipologia),e.xp6(2),e.Q6J("ngForOf",e.xi3(56,74,t.enumTipologiaAlbergo,"tipologiaAlbergo")),e.xp6(4),e.s9C("placeholder",e.lcZ(60,77,"bo.portaleXAlbergo.proprieta.stelle")),e.Q6J("ngModel",t.modelEdit.portale.stelle),e.xp6(2),e.Q6J("ngForOf",e.xi3(62,79,t.enumStelleAlbergo,"stelleAlbergo")),e.xp6(5),e.s9C("placeholder",e.lcZ(67,82,"bo.portaleXAlbergo.proprieta.partitaIva")),e.Q6J("ngModel",t.modelEdit.portale.partitaIva),e.xp6(4),e.s9C("placeholder",e.lcZ(71,84,"bo.portaleXAlbergo.proprieta.numeroCCIA")),e.Q6J("ngModel",t.modelEdit.portale.numeroCCIA),e.xp6(4),e.s9C("placeholder",e.lcZ(75,86,"bo.portaleXAlbergo.proprieta.twoLetterCountryCode")),e.Q6J("ngModel",t.modelEdit.portale.twoLetterCountryCode),e.xp6(5),e.Q6J("ngForOf",t.getPortaleXAlbergoFormRS.countries),e.xp6(4),e.s9C("placeholder",e.lcZ(84,88,"bo.portaleXAlbergo.proprieta.latitude")),e.Q6J("ngModel",t.modelEdit.portale.latitude),e.xp6(4),e.s9C("placeholder",e.lcZ(88,90,"bo.portaleXAlbergo.proprieta.longitude")),e.Q6J("ngModel",t.modelEdit.portale.longitude),e.xp6(3),e.s9C("placeholder",e.lcZ(91,92,"bo.portaleXAlbergo.proprieta.urlIFrameGoogleMap")),e.Q6J("ngModel",t.modelEdit.portale.urlIFrameGoogleMap),e.xp6(3),e.s9C("placeholder",e.lcZ(94,94,"bo.portaleXAlbergo.proprieta.googlePlaceId")),e.Q6J("ngModel",t.modelEdit.portale.googlePlaceId),e.xp6(5),e.s9C("placeholder",e.lcZ(99,96,"bo.portaleXAlbergo.proprieta.urlFacebook")),e.Q6J("ngModel",t.modelEdit.portale.urlFacebook),e.xp6(4),e.s9C("placeholder",e.lcZ(103,98,"bo.portaleXAlbergo.proprieta.urlInstagram")),e.Q6J("ngModel",t.modelEdit.portale.urlInstagram)}}function lK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",111)(1,"mat-checkbox",112),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(a?l.masterToggleServizi():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selectionServizi.hasValue()&&t.isAllSelectedServizi())("indeterminate",t.selectionServizi.hasValue()&&!t.isAllSelectedServizi())}}function rK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",113)(1,"mat-checkbox",114),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(a?p.selectionServizi.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionServizi.isSelected(t.oid))}}function cK(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.servizio.proprieta.nome"),""))}function sK(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function pK(i,o){1&i&&e._UZ(0,"mat-header-row",115)}function dK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",116),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}const as=function(){return["nome","select"]};function mK(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",26)(1,"mat-expansion-panel-header"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",101)(5,"mat-table",102),e.ynx(6,103),e.YNc(7,lK,2,2,"mat-header-cell",104),e.YNc(8,rK,2,1,"mat-cell",105),e.BQk(),e.ynx(9,106),e.YNc(10,cK,3,3,"mat-header-cell",107),e.YNc(11,sK,2,1,"mat-cell",108),e.BQk(),e.YNc(12,pK,1,0,"mat-header-row",109),e.YNc(13,dK,1,1,"mat-row",110),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"sbm.configurazione.portali.serviziAbilitati")," "),e.xp6(3),e.Q6J("dataSource",t.servizi),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(7,as))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(8,as))}}function _K(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",111)(1,"mat-checkbox",112),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(a?l.masterToggleArticoli():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selectionArticoli.hasValue()&&t.isAllSelectedArticoli())("indeterminate",t.selectionArticoli.hasValue()&&!t.isAllSelectedArticoli())}}function uK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",113)(1,"mat-checkbox",114),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(a?p.selectionArticoli.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionArticoli.isSelected(t.oid))}}function gK(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.articolo.proprieta.nome")))}function hK(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function fK(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.articolo.proprieta.descrizione")))}function CK(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function bK(i,o){1&i&&e._UZ(0,"mat-header-row",115)}function vK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",116),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}const ls=function(){return["nome","descrizione","select"]};function TK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",26)(1,"mat-expansion-panel-header"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.portale.listinoBookingExtra=a)}),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",101)(7,"mat-table",102),e.ynx(8,103),e.YNc(9,_K,2,2,"mat-header-cell",104),e.YNc(10,uK,2,1,"mat-cell",105),e.BQk(),e.ynx(11,106),e.YNc(12,gK,3,3,"mat-header-cell",107),e.YNc(13,hK,2,1,"mat-cell",108),e.BQk(),e.ynx(14,117),e.YNc(15,fK,3,3,"mat-header-cell",107),e.YNc(16,CK,2,1,"mat-cell",108),e.BQk(),e.YNc(17,bK,1,0,"mat-header-row",109),e.YNc(18,vK,1,1,"mat-row",110),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,8,"sbm.configurazione.portali.articoli")," "),e.xp6(2),e.Q6J("dataLoader",t.apiService.getListiniViewSelect())("value",t.modelEdit.portale.listinoBookingExtra)("placeholder",e.lcZ(5,10,"bo.portaleXAlbergo.proprieta.listinoBookingExtra")),e.xp6(3),e.Q6J("dataSource",t.articoli),e.xp6(10),e.Q6J("matHeaderRowDef",e.DdM(12,ls))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(13,ls))}}function xK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",126)(1,"app-image",127),e.NdJ("edit",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.editImageList(l))})("delete",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.deleteImageList(l))}),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("container",!1)("url",t.urlImmagine)("deleteAlwaysVisible",!0)}}function ZK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",26)(1,"mat-expansion-panel-header"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",118)(5,"div",119)(6,"app-image",120),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage(a.enumTipoImmagine.Sfondo))})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage(a.enumTipoImmagine.Sfondo))}),e.qZA()(),e.TgZ(7,"div",119)(8,"app-image",120),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage(a.enumTipoImmagine.SfondoBookingExtra))})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage(a.enumTipoImmagine.SfondoBookingExtra))}),e.qZA()(),e.TgZ(9,"div",119)(10,"app-image",120),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage(a.enumTipoImmagine.Struttura))})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage(a.enumTipoImmagine.Struttura))}),e.qZA()(),e.TgZ(11,"div",119)(12,"app-image",120),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage(a.enumTipoImmagine.Logo))})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage(a.enumTipoImmagine.Logo))}),e.qZA()(),e.TgZ(13,"div",119)(14,"app-image",120),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage(a.enumTipoImmagine.LogoMobile))})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage(a.enumTipoImmagine.LogoMobile))}),e.qZA()()(),e._UZ(15,"hr"),e.TgZ(16,"div",6),e.YNc(17,xK,2,3,"div",121),e.TgZ(18,"div",76)(19,"div",122)(20,"div",123)(21,"button",124),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addImageList())}),e.TgZ(22,"i",125),e._uU(23,"add_circle_outline"),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,17,"sbm.configurazione.portali.immaginiTab")," "),e.xp6(4),e.Q6J("container",!1)("url",t.modelEdit.portale.urlImmagineSfondo)("title","sbm.configurazione.portali.immagineSfondo"),e.xp6(2),e.Q6J("container",!1)("url",t.modelEdit.portale.urlImmagineSfondoBookingExtra)("title","sbm.configurazione.portali.immagineSfondoBookingExtra"),e.xp6(2),e.Q6J("container",!1)("url",t.modelEdit.portale.urlImmagine)("title","sbm.configurazione.portali.immagineStruttura"),e.xp6(2),e.Q6J("container",!1)("url",t.modelEdit.portale.urlImmagineLogo)("title","sbm.configurazione.portali.immagineLogo"),e.xp6(2),e.Q6J("container",!1)("url",t.modelEdit.portale.urlImmagineLogoMobile)("title","sbm.configurazione.portali.immagineLogoMobile"),e.xp6(3),e.Q6J("ngForOf",t.immagini)}}function AK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",128)(1,"app-associazioni-tariffe-portale-master",129),e.NdJ("onRisorsaAdd",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.risorse=a)})("onTariffaAdd",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tariffe=a)})("onVariazioniModificate",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.variazioniModificate=a)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("oidPortale",t.modelEdit.portale.oid)}}function wK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",128)(1,"app-risorse-portale",130),e.NdJ("onRisorseImportate",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.risorse=a)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("_risorse",t.risorse)("oidPortale",t.modelEdit.portale.oid)("portaleXAlbergo",t.modelEdit.portale)("oidPortalePassepartout",t.getPortaleXAlbergoFormRS.oidPortalePassepartout)("isPortalePassepartout",t.isPortalePassepartout())("servizi",t.serviziCamera)("supplementi",t.supplementi)("modalitaPagamento",t.modalitaPagamento)("sistemazioni",t.sistemazioni)}}function zK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",128)(1,"app-tariffe-portale",131),e.NdJ("onTariffeImportate",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tariffe=a)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("_tariffe",t.tariffe)("oidPortale",t.modelEdit.portale.oid)("tipoPortale",t.modelEdit.portale.tipoPortale)("isPortalePassepartout",t.isPortalePassepartout())("isPortaleMaster",t.isPortaleMaster())("servizi",t.serviziTariffa)("modalitaPagamento",t.modalitaPagamento)("promozioni",t.promozioni)("_supplementi",t.supplementi)("codiciTrattamento",t.getPortaleXAlbergoFormRS.codiciTrattamento)("isGoogleHotelsTravelAttivo",t.modelEdit.portale.isGoogleHotelsTravelAttivo)}}function MK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",4)(1,"div",134)(2,"div")(3,"div",135),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"app-editor",136),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].descrizione=a)}),e.qZA()(),e.TgZ(7,"div",49)(8,"div",135),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"app-editor",136),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].condizionePrenotazione=a)}),e.qZA()(),e.TgZ(12,"div",49)(13,"div",135),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"app-editor",136),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].descrizioneBookingDayUse=a)}),e.qZA()(),e.TgZ(17,"div",49)(18,"div",135),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"app-editor",136),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].descrizioneBookingExtra=a)}),e.qZA()(),e.TgZ(22,"div",49)(23,"div",135),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"app-editor",136),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].descrizioneFinale=a)}),e.qZA()(),e.TgZ(27,"div",49)(28,"div",135),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"app-editor",136),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].condizioneContratto=a)}),e.qZA()(),e.TgZ(32,"div",49)(33,"div",135),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"app-editor",136),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].testoSelfCheckIn=a)}),e.qZA()(),e.TgZ(37,"div",49)(38,"div",135),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"div",137)(42,"mat-form-field",138)(43,"textarea",139),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].descrizionePopup=a)}),e.qZA()()()(),e.TgZ(44,"mat-form-field",57)(45,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].bulletPoint1=a)}),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"mat-form-field",8)(48,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].bulletPoint2=a)}),e.ALo(49,"translate"),e.qZA()(),e.TgZ(50,"mat-form-field",8)(51,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.portaliXLingua[l].bulletPoint3=a)}),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"div",140)(54,"div",141)(55,"mat-form-field",8),e._UZ(56,"input",142),e.ALo(57,"translate"),e.qZA()(),e.TgZ(58,"div",143)(59,"button",144),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.resetTraduzioniUrl(a))}),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"button",145),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.openTraduzioniEdit(a))}),e._uU(63),e.ALo(64,"translate"),e.qZA()()(),e.TgZ(65,"div",140)(66,"div",141)(67,"mat-form-field",8)(68,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.urlPrivacy=a)}),e.ALo(69,"translate"),e.qZA()()(),e.TgZ(70,"div",146)(71,"input",147,148),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.privacyFileSelected(a.target,l))}),e.qZA(),e.TgZ(73,"button",144),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.resetPrivacyUrl(a))}),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"button",145),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.downloadPrivacy(a.lingua.codice))}),e._uU(77),e.ALo(78,"translate"),e.qZA()()(),e.TgZ(79,"div",140)(80,"div",141)(81,"mat-form-field",8)(82,"input",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.urlNewsLetter=a)}),e.ALo(83,"translate"),e.qZA()()(),e.TgZ(84,"div",146)(85,"input",147,148),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.newsLetterFileSelected(a.target,l))}),e.qZA(),e.TgZ(87,"button",144),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.resetNewsLetterUrl(a))}),e._uU(88),e.ALo(89,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw(2);e.Q6J("label",n.lingua.nome),e.xp6(4),e.Oqu(e.lcZ(5,44,"sbm.configurazione.portali.introduzione")),e.xp6(2),e.Q6J("id","introduzione"+a)("text",l.modelEdit.portaliXLingua[a].descrizione),e.xp6(3),e.Oqu(e.lcZ(10,46,"sbm.configurazione.portali.condizioniPrenotazione")),e.xp6(2),e.Q6J("id","condizionePrenotazione"+a)("text",l.modelEdit.portaliXLingua[a].condizionePrenotazione),e.xp6(3),e.Oqu(e.lcZ(15,48,"bo.portaleXAlbergoXLingua.proprieta.descrizioneBookingDayUse")),e.xp6(2),e.Q6J("id","descrizioneBookingDayUse"+a)("text",l.modelEdit.portaliXLingua[a].descrizioneBookingDayUse),e.xp6(3),e.Oqu(e.lcZ(20,50,"bo.portaleXAlbergoXLingua.proprieta.descrizioneBookingExtra")),e.xp6(2),e.Q6J("id","descrizioneBookingExtra"+a)("text",l.modelEdit.portaliXLingua[a].descrizioneBookingExtra),e.xp6(3),e.Oqu(e.lcZ(25,52,"bo.portaleXAlbergoXLingua.proprieta.descrizioneFinale")),e.xp6(2),e.Q6J("id","descrizioneFinale"+a)("text",l.modelEdit.portaliXLingua[a].descrizioneFinale),e.xp6(3),e.Oqu(e.lcZ(30,54,"sbm.configurazione.portali.condizioniContratto")),e.xp6(2),e.Q6J("id","condizioniContratto"+a)("text",l.modelEdit.portaliXLingua[a].condizioneContratto),e.xp6(3),e.Oqu(e.lcZ(35,56,"bo.portaleXAlbergoXLingua.proprieta.testoSelfCheckIn")),e.xp6(2),e.Q6J("id","testoSelfCheckIn"+a)("text",l.modelEdit.portaliXLingua[a].testoSelfCheckIn),e.xp6(3),e.Oqu(e.lcZ(40,58,"bo.portaleXAlbergoXLingua.proprieta.descrizionePopup")),e.xp6(4),e.Q6J("ngModel",l.modelEdit.portaliXLingua[a].descrizionePopup),e.xp6(2),e.s9C("placeholder",e.lcZ(46,60,"bo.portaleXAlbergoXLingua.proprieta.bulletPoint1")),e.Q6J("ngModel",l.modelEdit.portaliXLingua[a].bulletPoint1),e.xp6(3),e.s9C("placeholder",e.lcZ(49,62,"bo.portaleXAlbergoXLingua.proprieta.bulletPoint2")),e.Q6J("ngModel",l.modelEdit.portaliXLingua[a].bulletPoint2),e.xp6(3),e.s9C("placeholder",e.lcZ(52,64,"bo.portaleXAlbergoXLingua.proprieta.bulletPoint3")),e.Q6J("ngModel",l.modelEdit.portaliXLingua[a].bulletPoint3),e.xp6(5),e.s9C("placeholder",e.lcZ(57,66,"bo.portaleXAlbergoXLingua.proprieta.urlTraduzioni")),e.Q6J("value",n.urlTraduzioni?n.urlTraduzioni:""),e.xp6(3),e.Q6J("disabled",!n.urlTraduzioni),e.xp6(1),e.Oqu(e.lcZ(61,68,"sbm.configurazione.portali.reset")),e.xp6(3),e.Oqu(e.lcZ(64,70,"globals.modifica")),e.xp6(5),e.s9C("placeholder",e.lcZ(69,72,"bo.portaleXAlbergoXLingua.proprieta.urlPrivacy")),e.Q6J("ngModel",n.urlPrivacy),e.xp6(5),e.Q6J("disabled",!n.urlPrivacy),e.xp6(1),e.Oqu(e.lcZ(75,74,"sbm.configurazione.portali.reset")),e.xp6(3),e.Oqu(e.lcZ(78,76,"sbm.configurazione.portali.download")),e.xp6(5),e.s9C("placeholder",e.lcZ(83,78,"bo.portaleXAlbergoXLingua.proprieta.urlNewsLetter")),e.Q6J("ngModel",n.urlNewsLetter),e.xp6(5),e.Q6J("disabled",!n.urlNewsLetter),e.xp6(1),e.Oqu(e.lcZ(89,80,"sbm.configurazione.portali.reset"))}}function qK(i,o){if(1&i&&(e.ynx(0),e.YNc(1,MK,90,82,"mat-tab",133),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function PK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-group",132),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedIndex1=a)}),e.YNc(1,qK,2,1,"ng-container",48),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("selectedIndex",t.selectedIndex1),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.portaliXLingua)}}function kK(i,o){if(1&i&&(e.TgZ(0,"div",128),e._UZ(1,"app-recensioni",149),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("_recensioni",t.recensioni)("oidPortale",t.modelEdit.portale.oid)}}function SK(i,o){if(1&i&&(e.TgZ(0,"div",128),e._UZ(1,"app-risorse-tariffe",150),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("_risorseTariffe",t.risorseTariffe)("componentiXVariazione",t.componentiXVariazione)("portaleXAlbergo",t.modelEdit.portale)("oidPortale",t.modelEdit.portale.oid)("hasModelloPrezzo",t.modelEdit.portale.hasModelloPrezzo)}}function yK(i,o){if(1&i&&(e.TgZ(0,"div",128),e._UZ(1,"app-source-brands",151),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("_sourceBrands",t.sourceBrands)("oidPortale",t.modelEdit.portale.oid)}}function JK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",152),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.save(!1,!0))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.test")))}function EK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",152),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.save(!1,!1,!0))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.controllaGoogleHotels")))}function NK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",156),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.generaTokenAirbnb())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.modelEdit.portale.userID),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.configurazione.portali.generaToken"))}}function OK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",157),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.recuperaPrenotazioni())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.recuperaPrenotazioni")))}function LK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",152),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",152),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backEvent.emit())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,JK,3,3,"button",153),e.YNc(11,EK,3,3,"button",153),e.YNc(12,NK,3,4,"button",154),e.YNc(13,OK,3,3,"button",155),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,7,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(6,9,"globals.elimina")),e.xp6(3),e.Oqu(e.lcZ(9,11,"globals.annulla")),e.xp6(2),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.modelEdit.portale.isGoogleHotelsTravelAttivo),e.xp6(1),e.Q6J("ngIf",t.isPortaleAirbnb()),e.xp6(1),e.Q6J("ngIf",t.modelEdit.portale.isRecuperaPrenotazioni)}}const DK=function(i){return{"mt-3":i}};class Ma extends f.H{set _modalitaPagamento(o){null!=o&&(this.modalitaPagamento=o,this.modalitaPagamentoMyPage=o.filter(t=>t.isAttivoMyPage))}set oidPortale(o){null!=o&&this.onEdit(o)}set nomePortale(o){o&&this.headerService.setTitle(o.toString(),!0)}constructor(o,t,n,a,l,r,p,T,L){super(),this.apiService=o,this.sessionService=t,this.containerService=n,this.localizationService=a,this.fileSaverService=l,this.http=r,this.utility=p,this.headerService=T,this.localStorage=L,this.backEvent=new e.vpe,this.getPortaleXAlbergoFormRS=new d.KMW,this.modelEdit=new d.Ftj,this.selectedIndex=0,this.selectedIndex1=0,this.expanded=!0,this.enumTipoPortale=c.Q,this.enumStato=c.V6,this.enumTipoAnalytics=c.Vx,this.enumTipoBilanciamentoInterno=c.bF,this.enumStatoPrenotazioneWelcome=c.Kg,this.enumTipoVisualizzazioneGrigliaDisponibilita=c.lm,this.enumTipologiaAlbergo=c.X1,this.enumStelleAlbergo=c.bm,this.enumPagina=c.I8,this.enumTipoValore=c.jy,this.enumTipoVisualizzazioneImmaginePrenotazione=c.UH,this.selectionServizi=new me.Ov(!0,[]),this.selectionArticoli=new me.Ov(!0,[]),this.enumTipoImmagine=c.kW,this.enumTipoOrdinamentoTariffe=c.Wc,this.enumTipoRichiesta=c.GY,this.enumVersioneMyPage=c.wA,this.enumModelloPrezzo=c.J1,this.enumCampoObbligatorioFormRichiesta=c.i0,this.enumCampoObbligatorioMyPage=c.y6,this.enumCampoObbligatorioBooking=c.Ox,this.enumCampoObbligatorioECommerce=c.FV,this.selectedCampiObbligatoriPreventivo=[],this.selectedCampiObbligatoriFormRichiesta=[],this.selectedCampiObbligatoriMyPage=[],this.selectedCampiObbligatoriBooking=[],this.selectedCampiObbligatoriECommerce=[],this.selectedModalitaPagamentoRichiestaCaparra=[],this.campiObbligatoriPreventivo=[],this.campiObbligatoriFormRichiesta=[],this.campiObbligatoriMyPage=[],this.campiObbligatoriBooking=[],this.campiObbligatoriECommerce=[],this.enumTipoVisualizzazioneBanner=c.M5,this.getTemplatesStampaRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.Equal,c.hQ.Prenotazione.toString(),c.NM.Number),this.getPortaliMasterRQ=d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Master.toString(),c.NM.Number),this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getTemplatesRichiestaCaparraRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.Equal,c.hQ.PreventivoRichiestaCaparra.toString(),c.NM.Number),this.variazioniModificate=!1,this.modalitaPagamento=[],this.modalitaPagamentoMyPage=[],this.isRipristinaDisponibilitaSuCancellazioneDisabled=!1}ngOnInit(){this.campiObbligatoriPreventivo=Object.keys(this.enumCampoObbligatorioFormRichiesta).map(o=>this.enumCampoObbligatorioFormRichiesta[o]).filter(o=>!isNaN(o)).filter(o=>o!=c.i0.Note&&o!=c.i0.TipoCamera&&o!=c.i0.Tariffa),this.campiObbligatoriFormRichiesta=[c.i0.Cellulare,c.i0.Note,c.i0.TipoCamera,c.i0.Tariffa,c.i0.MotivoViaggio,c.i0.Nome],this.campiObbligatoriMyPage=Object.keys(this.enumCampoObbligatorioMyPage).map(o=>this.enumCampoObbligatorioMyPage[o]).filter(o=>!isNaN(o)),this.campiObbligatoriBooking=Object.keys(this.enumCampoObbligatorioBooking).map(o=>this.enumCampoObbligatorioBooking[o]).filter(o=>!isNaN(o)),this.campiObbligatoriECommerce=Object.keys(this.enumCampoObbligatorioECommerce).map(o=>this.enumCampoObbligatorioECommerce[o]).filter(o=>!isNaN(o)),this.localStorageSub=this.localStorage.observe("oauth2Success").subscribe(o=>{null!=this.oauth2Window&&(this.oauth2Window.close(),1==o?this.showInfo("sbm.configurazione.portali.tokenGenerato"):0==o&&this.showError("sbm.configurazione.portali.erroreGenerazioneToken"))})}ngAfterViewInit(){const o=this.tabGroup._handleClick;this.tabGroup._handleClick=(t,n,a)=>{1==this.selectedIndex&&1!=a&&this.variazioniModificate?this.showDialogConfirm("sbm.configurazione.portali.variazioniNonSalvate").then(l=>o.apply(this.tabGroup,[t,n,a]),l=>{}):o.apply(this.tabGroup,[t,n,a])}}onEdit(o){this.modelEdit=new d.Ftj,this.risorse=[],this.tariffe=[],this.recensioni=[],this.blocchiHtml=[],this.risorseTariffe=[],this.selectedIndex=0,this.selectedIndex1=0,this.expanded=!0,this.selectionServizi=new me.Ov(!0,[]),this.selectionArticoli=new me.Ov(!0,[]),this.selectedCampiObbligatoriPreventivo=[],this.selectedCampiObbligatoriFormRichiesta=[],this.selectedCampiObbligatoriMyPage=[],this.selectedCampiObbligatoriBooking=[],this.selectedCampiObbligatoriECommerce=[],this.selectedModalitaPagamentoRichiestaCaparra=[],this.portaliCollegati=[],window.dispatchEvent(new Event("resize")),this.containerService.scrollToTop(),this.portaleOid=o;for(let t of this.lingue){let n=new v.LQJ;n.lingua=t,this.modelEdit.portaliXLingua.push(n)}null!=this.portaleOid&&-1!=this.portaleOid&&this.download()}download(o=!1){this.setIsLoading(!0),this.apiService.getPortaleXAlbergoForm(this.portaleOid).subscribe(t=>{this.getPortaleXAlbergoFormRS=t.data,this.apiService.getPortaliXLingua(this.portaleOid).subscribe(n=>{if(null!=n.data&&null!=n.data.portale&&null!=n.data.portale.portaliXLingua&&n.data.portale.portaliXLingua.length>0){this.init(n.data.portale.portale);for(let a of n.data.portale.portaliXLingua)if(null!=a.lingua){let l=this.modelEdit.portaliXLingua.findIndex(r=>r.lingua.oid==a.lingua.oid);l>=0&&(this.modelEdit.portaliXLingua[l].portaleXAlbergo=a.portaleXAlbergo,this.modelEdit.portaliXLingua[l].descrizione=a.descrizione,this.modelEdit.portaliXLingua[l].condizionePrenotazione=a.condizionePrenotazione,this.modelEdit.portaliXLingua[l].descrizioneBookingDayUse=a.descrizioneBookingDayUse,this.modelEdit.portaliXLingua[l].descrizioneBookingExtra=a.descrizioneBookingExtra,this.modelEdit.portaliXLingua[l].descrizioneFinale=a.descrizioneFinale,this.modelEdit.portaliXLingua[l].descrizionePopup=a.descrizionePopup,this.modelEdit.portaliXLingua[l].condizioneContratto=a.condizioneContratto,this.modelEdit.portaliXLingua[l].testoSelfCheckIn=a.testoSelfCheckIn,this.modelEdit.portaliXLingua[l].bulletPoint1=a.bulletPoint1,this.modelEdit.portaliXLingua[l].bulletPoint2=a.bulletPoint2,this.modelEdit.portaliXLingua[l].bulletPoint3=a.bulletPoint3,this.modelEdit.portaliXLingua[l].traduzioniJSON=a.traduzioniJSON,this.modelEdit.portaliXLingua[l].urlTraduzioni=a.urlTraduzioni,this.modelEdit.portaliXLingua[l].urlPrivacy=a.urlPrivacy,this.modelEdit.portaliXLingua[l].urlNewsLetter=a.urlNewsLetter,this.modelEdit.portaliXLingua[l].urlReport=a.urlReport)}this.setIsLoading(!1),o&&this.showInfo("sbm.configurazione.portali.portaleSalvato").then(()=>{setTimeout(()=>{this.containerService.scrollToTop()},200)})}else this.apiService.getPortale(this.portaleOid).subscribe(a=>{null!=a.data&&null!=a.data.portale&&(this.init(a.data.portale),o&&this.showInfo("sbm.configurazione.portali.portaleSalvato").then(()=>{setTimeout(()=>{this.containerService.scrollToTop()},200)})),this.setIsLoading(!1)})})})}init(o){this.risorse=null==o.risorse?[]:o.risorse,this.tariffe=null==o.tariffe?[]:o.tariffe,this.recensioni=null==o.recensioni?[]:o.recensioni,this.blocchiHtml=null==o.blocchiHtml?[]:o.blocchiHtml,this.risorseTariffe=null==o.risorseTariffe?[]:o.risorseTariffe,this.immagini=null==o.immagini?[]:o.immagini,this.portaliCollegati=null==o.portaliCollegati?[]:o.portaliCollegati,this.sourceBrands=null==o.sourceBrands?[]:o.sourceBrands,this.modelEdit.portale=o.portale,this.passwordMask=this.modelEdit.portale.passwordMask;try{this.modelEdit.portale.coloreHex=Z(this.modelEdit.portale.colore).hex()}catch(t){}if(this.selectionServizi=new me.Ov(!0,[]),this.modelEdit.portale.oidServizi){let t=this.modelEdit.portale.oidServizi.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.servizi.findIndex(a=>a.oid==+n)&&this.selectionServizi.toggle(+n)}if(this.selectionArticoli=new me.Ov(!0,[]),this.modelEdit.portale.oidArticoliBookingExtra){let t=this.modelEdit.portale.oidArticoliBookingExtra.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.articoli.findIndex(a=>a.oid==+n)&&this.selectionArticoli.toggle(+n)}if(this.selectedCampiObbligatoriPreventivo=[],this.modelEdit.portale.campiObbligatoriPreventivo){let t=this.modelEdit.portale.campiObbligatoriPreventivo.split(";");for(let n of t)""!=n&&!isNaN(+n)&&+n in c.i0&&this.selectedCampiObbligatoriPreventivo.push(+n)}if(this.selectedCampiObbligatoriFormRichiesta=[],this.modelEdit.portale.campiObbligatoriFormRichiesta){let t=this.modelEdit.portale.campiObbligatoriFormRichiesta.split(";");for(let n of t)""!=n&&!isNaN(+n)&&+n in c.i0&&this.selectedCampiObbligatoriFormRichiesta.push(+n)}if(this.selectedCampiObbligatoriMyPage=[],this.modelEdit.portale.campiObbligatoriMyPage){let t=this.modelEdit.portale.campiObbligatoriMyPage.split(";");for(let n of t)""!=n&&!isNaN(+n)&&+n in c.y6&&this.selectedCampiObbligatoriMyPage.push(+n)}if(this.selectedCampiObbligatoriBooking=[],this.modelEdit.portale.campiObbligatoriBooking){let t=this.modelEdit.portale.campiObbligatoriBooking.split(";");for(let n of t)""!=n&&!isNaN(+n)&&+n in c.Ox&&this.selectedCampiObbligatoriBooking.push(+n)}if(this.selectedCampiObbligatoriECommerce=[],this.modelEdit.portale.campiObbligatoriECommerce){let t=this.modelEdit.portale.campiObbligatoriECommerce.split(";");for(let n of t)""!=n&&!isNaN(+n)&&+n in c.FV&&this.selectedCampiObbligatoriECommerce.push(+n)}if(this.selectedModalitaPagamentoRichiestaCaparra=[],this.modelEdit.portale.modalitaPagamentoDefaultRichiestaCaparra){let t=this.modelEdit.portale.modalitaPagamentoDefaultRichiestaCaparra.split(";");for(let n of t)""!=n&&!isNaN(+n)&&this.selectedModalitaPagamentoRichiestaCaparra.push(+n)}this.onUbicazioneChange(),this.onEmailChange(),this.modelEdit.portale.isModificaDisponibiliAttiva,this.sessionService.is3DSecureAttivo()||(this.modelEdit.portale.isVerificaCartaCredito=!1),null!=o.portale.ubicazioneIstat&&(this.prossimoNumeroPreventivoOriginal=o.portale.ubicazioneIstat.prossimoNumeroPreventivo)}save(o=!0,t=!1,n=!1,a=null){this.setIsLoading(!0);for(let r of this.modelEdit.portaliXLingua)r.portaleXAlbergo=this.modelEdit.portale;if(this.modelEdit.portale.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.portale.oidServizi=this.selectionServizi.selected.toString().replace(/,/g,";"),this.modelEdit.portale.oidArticoliBookingExtra=this.selectionArticoli.selected.toString().replace(/,/g,";"),this.modelEdit.portale.campiObbligatoriPreventivo=this.selectedCampiObbligatoriPreventivo.join(";"),this.modelEdit.portale.campiObbligatoriFormRichiesta=this.selectedCampiObbligatoriFormRichiesta.join(";"),this.modelEdit.portale.campiObbligatoriMyPage=this.selectedCampiObbligatoriMyPage.join(";"),this.modelEdit.portale.campiObbligatoriBooking=this.selectedCampiObbligatoriBooking.join(";"),this.modelEdit.portale.campiObbligatoriECommerce=this.selectedCampiObbligatoriECommerce.join(";"),this.modelEdit.portale.modalitaPagamentoDefaultRichiestaCaparra=this.selectedModalitaPagamentoRichiestaCaparra.join(";"),this.modelEdit.portale.coloreHex)try{this.modelEdit.portale.colore=Z(this.modelEdit.portale.coloreHex).rgbNumber()}catch(r){}let l;this.modelEdit.portale.dataInizioGestione=this.getDate(this.modelEdit.portale.dataInizioGestione),this.modelEdit.portale.dataFineGestione=this.getDate(this.modelEdit.portale.dataFineGestione),null!=this.modelEdit.portale.ubicazioneIstat&&(l=this.modelEdit.portale.ubicazioneIstat.prossimoNumeroPreventivo,l==this.prossimoNumeroPreventivoOriginal&&(this.modelEdit.portale.ubicazioneIstat.prossimoNumeroPreventivo=null)),this.apiService.setPortale(this.modelEdit).subscribe(r=>{if(this.setIsLoading(!1),null==r.errori||0==r.errori.length){if(null!=r.data&&null!=r.data.obj&&null!=r.data.details){this.portaleOid=r.data.obj.oid,this.headerService.setTitle(r.data.obj.nome,!0);let p=r.data.details;for(let T of p)if(null!=T.lingua){let L=this.modelEdit.portaliXLingua.find(G=>null!=G.lingua&&G.lingua.codice==T.lingua.codice);null!=L&&(L.urlTraduzioni=T.urlTraduzioni,L.urlPrivacy=T.urlPrivacy,L.urlNewsLetter=T.urlNewsLetter,L.urlReport=T.urlReport)}}for(let p of this.modelEdit.portaliXLingua)p.privacyText=null,p.newsLetterText=null,p.traduzioniText=null,p.reportText=null;for(let p of this.privacyFileSelect.toArray())p.nativeElement.value="";for(let p of this.reportFileSelect.toArray())p.nativeElement.value="";this.selectedIndex1=0,null!=this.modelEdit.portale.ubicazioneIstat&&(this.modelEdit.portale.ubicazioneIstat.prossimoNumeroPreventivo=l,this.prossimoNumeroPreventivoOriginal=l),o?this.showInfo("sbm.configurazione.portali.portaleSalvato").then(()=>{setTimeout(()=>{this.containerService.scrollToTop()},200)}):t?this.openCalcolaRettaErrori():n?this.checkGoogleHotels():null!=a&&a()}})}delete(o){this.setIsLoading(!0);let t=new d.AS0;t.oidPortale=null!=o?o.oid:this.portaleOid,this.apiService.checkDisponibilitaFuturePubblicate(t).subscribe(n=>{this.setIsLoading(!1),n.data?this.showError("sbm.configurazione.portali.impossibileCancellarePortale"):this.showDialogConfirm("sbm.configurazione.portali.eliminarePortale").then(a=>{null!=o&&(this.modelEdit.portale=o),this.modelEdit.portale.isDeleted=!0,this.setIsLoading(!0),this.apiService.setPortale(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},a=>{})})}isAllSelectedServizi(){return this.selectionServizi.selected.length==this.servizi.length}masterToggleServizi(){this.isAllSelectedServizi()?this.selectionServizi.clear():this.servizi.forEach(o=>this.selectionServizi.select(o.oid))}isAllSelectedArticoli(){return this.selectionArticoli.selected.length==this.articoli.length}masterToggleArticoli(){this.isAllSelectedArticoli()?this.selectionArticoli.clear():this.articoli.forEach(o=>this.selectionArticoli.select(o.oid))}editImage(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Ve.t,t),a=n.componentInstance;a._url=o==c.kW.Sfondo?this.modelEdit.portale.urlImmagineSfondo:o==c.kW.SfondoBookingExtra?this.modelEdit.portale.urlImmagineSfondoBookingExtra:o==c.kW.Logo?this.modelEdit.portale.urlImmagineLogo:o==c.kW.Struttura?this.modelEdit.portale.urlImmagine:o==c.kW.LogoMobile?this.modelEdit.portale.urlImmagineLogoMobile:"",a.title=o==c.kW.Sfondo?"sbm.configurazione.portali.immagineSfondo":o==c.kW.SfondoBookingExtra?"sbm.configurazione.portali.immagineSfondoBookingExtra":o==c.kW.Logo?"sbm.configurazione.portali.immagineLogo":o==c.kW.Struttura?"sbm.configurazione.portali.immagineStruttura":o==c.kW.LogoMobile?"sbm.configurazione.portali.immagineLogoMobile":"",a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){this.setIsLoading(!0);let r=new d.fwL;r.oid=this.modelEdit.portale.oid,r.tipoImmagine=o,r.base64=l,this.apiService.setImmaginePortale(r).subscribe(p=>{null!=p.data&&(o==c.kW.Logo?this.modelEdit.portale.urlImmagineLogo=p.data.url:o==c.kW.LogoMobile?this.modelEdit.portale.urlImmagineLogoMobile=p.data.url:o==c.kW.Sfondo?this.modelEdit.portale.urlImmagineSfondo=p.data.url:o==c.kW.SfondoBookingExtra?this.modelEdit.portale.urlImmagineSfondoBookingExtra=p.data.url:o==c.kW.Struttura&&(this.modelEdit.portale.urlImmagine=p.data.url)),this.setIsLoading(!1)})}})}deleteImage(o){this.showDialogConfirm("globals.eliminareImmagine").then(t=>{this.setIsLoading(!0);let n=new d.fwL;n.oid=this.modelEdit.portale.oid,n.tipoImmagine=o,n.base64="",this.apiService.setImmaginePortale(n).subscribe(a=>{null!=a.data&&(o==c.kW.Logo?this.modelEdit.portale.urlImmagineLogo=a.data.url:o==c.kW.LogoMobile?this.modelEdit.portale.urlImmagineLogoMobile=a.data.url:o==c.kW.Sfondo?this.modelEdit.portale.urlImmagineSfondo=a.data.url:o==c.kW.SfondoBookingExtra?this.modelEdit.portale.urlImmagineSfondoBookingExtra=a.data.url:o==c.kW.Struttura&&(this.modelEdit.portale.urlImmagine=a.data.url)),this.setIsLoading(!1)})},t=>{})}editImageList(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(bo.u,t),a=n.componentInstance;a.image=Object.assign({},o),a.dialogRef=n,n.afterClosed().subscribe(l=>{null!=l&&(this.setIsLoading(!0),this.apiService.setImmaginePortaleList(l).subscribe(r=>{if(l.oid>0){let p=this.utility.findIndexByOid(this.immagini,l.oid);l.isDeleted?this.immagini.splice(p,1):this.immagini[p]=r.data.obj}else this.immagini.push(r.data.obj);this.setIsLoading(!1)}))})}addImageList(){let o=new v.lbJ;o.portaleXAlbergo=new v.$Ys(this.portaleOid),o.isAttiva=!0,this.editImageList(o)}deleteImageList(o){this.showDialogConfirm("globals.eliminareImmagine").then(()=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setImmaginePortaleList(o).subscribe(()=>{let t=this.utility.findIndexByOid(this.immagini,o.oid);this.immagini.splice(t,1),this.setIsLoading(!1)})},()=>{})}privacyFileSelected(o,t){let n=null==o.files||0==o.files.length?null:o.files[0];if(null!=n&&"text/html"==n.type){const a=new FileReader;a.readAsText(n),a.onload=()=>{let l=a.result.toString();l?di.fromBuffer(Uint8Array.from(l.split(""),r=>r.charCodeAt(0)),(r,p)=>{r||null==p||"text/html"!=p.mime?(o.value="",this.showError("globals.messages.fileNonValido")):(t.urlPrivacy=null,t.privacyText=l)}):(o.value="",this.showError("globals.messages.fileNonValido"))}}else o.value="",this.showError("globals.messages.fileNonValido")}newsLetterFileSelected(o,t){let n=null==o.files||0==o.files.length?null:o.files[0];if(null!=n&&"text/html"==n.type){const a=new FileReader;a.readAsText(n),a.onload=()=>{let l=a.result.toString();l?di.fromBuffer(Uint8Array.from(l.split(""),r=>r.charCodeAt(0)),(r,p)=>{r||null==p||"text/html"!=p.mime?(o.value="",this.showError("globals.messages.fileNonValido")):(t.urlNewsLetter=null,t.newsLetterText=l)}):(o.value="",this.showError("globals.messages.fileNonValido"))}}else o.value="",this.showError("globals.messages.fileNonValido")}reportFileSelected(o,t){let n=null==o.files||0==o.files.length?null:o.files[0];if(null!=n&&"text/xml"==n.type){const a=new FileReader;a.readAsText(n),a.onload=()=>{let l=a.result.toString();l?di.fromBuffer(Uint8Array.from(l.split(""),r=>r.charCodeAt(0)),(r,p)=>{r||null==p||!p.mime?(t.urlReport=null,t.reportText=l):(o.value="",this.showError("globals.messages.fileNonValido"))}):(o.value="",this.showError("globals.messages.fileNonValido"))}}else o.value="",this.showError("globals.messages.fileNonValido")}resetTraduzioniUrl(o){this.showDialogConfirm("sbm.configurazione.portali.resetUrlTraduzioni").then(t=>{o.urlTraduzioni=null,o.traduzioniJSON=null},t=>{})}resetPrivacyUrl(o){this.showDialogConfirm("sbm.configurazione.portali.resetUrlPrivacy").then(t=>{o.urlPrivacy=null},t=>{})}resetNewsLetterUrl(o){this.showDialogConfirm("sbm.configurazione.portali.resetUrlNewsLetter").then(t=>{o.urlNewsLetter=null},t=>{})}resetReportUrl(o){this.showDialogConfirm("sbm.configurazione.portali.resetUrlReport").then(t=>{o.urlReport=null},t=>{})}openTraduzioniEdit(o){let t=new d.Zpt;t.width="80vw",t.minHeight="80vh";let n=this.showModalDialog(ia,t),a=n.componentInstance;a.lingua=o.lingua.codice,a.traduzioni=o.traduzioniJSON,a.dialogRef=n,n.afterClosed().subscribe(l=>{null!=l&&(o.urlTraduzioni=null,o.traduzioniText=l,o.traduzioniJSON=l,this.save(!1))})}downloadPrivacy(o){this.http.get("/assets/privacy/privacy-"+o+".html",{responseType:"text"}).subscribe({next:t=>{this.utility.exportHtml("privacy-"+o,t)},error:()=>{this.http.get("/assets/privacy/privacy-it.html",{responseType:"text"}).subscribe({next:t=>{this.utility.exportHtml("privacy-it",t)},error:()=>{}})}})}downloadReport(o){this.http.get("/assets/report/confermaprenotazione-"+o+".xml",{responseType:"text"}).subscribe({next:t=>{this.fileSaverService.save(new Blob([t],{type:"text/xml"}),"confermaprenotazione-"+o+".xml")},error:()=>{this.http.get("/assets/report/confermaprenotazione-it.xml",{responseType:"text"}).subscribe({next:t=>{this.fileSaverService.save(new Blob([t],{type:"text/xml"}),"confermaprenotazione-it.xml")},error:()=>{}})}})}isPortaleExpedia(){return this.modelEdit.portale.tipoPortale==c.Q.Expedia}isPortaleMRPreno(){return this.modelEdit.portale.tipoPortale==c.Q.MyReply}isPortalePassepartout(){return this.modelEdit.portale.tipoPortale==c.Q.Passepartout}isPortaleMaster(){return this.modelEdit.portale.tipoPortale==c.Q.Master}isPortaleAirbnb(){return this.modelEdit.portale.tipoPortale==c.Q.AirBnb}getUrlWebBooking(){return window.location.origin+"/booking?oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice}getUrlCheckIn(){return window.location.origin+"/self-checkin?oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice}getUrlWebBookingDayUse(){return window.location.origin+"/booking?dayUse=true&oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice}getUrlWebBookingExtra(){return window.location.origin+"/booking?extraSelect=true&oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice}getUrlWebBookingDisplayOnly(){return window.location.origin+"/booking?isDisplayOnly=true&oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice}getUrlPacchetti(){return window.location.origin+"/booking?isPacchetti=true&oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice}getUrlFormRichiesta(){return window.location.origin+"/booking/formv1?oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice}getUrlFormRichiestaDayUse(){return window.location.origin+"/booking/formv1?oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice+"&dayUse=true"}getUrlRecensioni(){return window.location.origin+"/booking/recensioni?oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice}getUrlDms(){return window.location.origin+"/dms/hotel?oidPortale="+this.portaleOid+"&lingua="+this.localizationService.currentLanguage.codice}condividiIFrame(o,t,n){let a=new d.Zpt;a.width="80vw";let r=this.showModalDialog(Xn,a).componentInstance;r.url=o,r.height=t,r.pagina=n}sincronizzaDisponibilita(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Rt,o),n=t.componentInstance;n.oidPortale=this.modelEdit.portale.oid,n.dialogRef=t}apriConfigurazione(){let o=new d.Zpt;o.width="50vw",o.height="80vh",this.showModalDialog(jn,o).componentInstance.oidPortale=this.modelEdit.portale.oid}onUbicazioneChange(){null==this.modelEdit.portale.ubicazioneIstat||this.modelEdit.portale.ubicazioneIstat.oid<=0?this.alert=new String("sbm.configurazione.portali.ubicazioneNonAssegnata"):this.alert=null}onEmailChange(){this.isPortalePassepartout()&&!this.modelEdit.portale.email?this.alertEmail=new String("sbm.configurazione.portali.emailNonAssegnata"):this.alertEmail=null}openFacebookHelp(){let o=new d.Zpt;o.width="50vw",this.showModalDialog(Wn,o)}openTracciamentiHelp(){let o=new d.Zpt;o.width="50vw",this.showModalDialog(ta,o)}onSelectDeselectAllClickCampiObbligatoriPreventivo(o){this.isAllSelectedCampiObbligatoriPreventivo(o)?this.selectedCampiObbligatoriPreventivo=[]:this.selectedCampiObbligatoriPreventivo=this.campiObbligatoriPreventivo.slice()}isAllSelectedCampiObbligatoriPreventivo(o){return o.selected.length==this.campiObbligatoriPreventivo.length}onSelectDeselectAllClickCampiObbligatoriFormRichiesta(o){this.isAllSelectedCampiObbligatoriFormRichiesta(o)?this.selectedCampiObbligatoriFormRichiesta=[]:this.selectedCampiObbligatoriFormRichiesta=this.campiObbligatoriFormRichiesta.slice()}isAllSelectedCampiObbligatoriFormRichiesta(o){return o.selected.length==this.campiObbligatoriFormRichiesta.length}onSelectDeselectAllClickCampiObbligatoriMyPage(o){this.isAllSelectedCampiObbligatoriMyPage(o)?this.selectedCampiObbligatoriMyPage=[]:this.selectedCampiObbligatoriMyPage=this.campiObbligatoriMyPage.slice()}isAllSelectedCampiObbligatoriMyPage(o){return o.selected.length==this.campiObbligatoriMyPage.length}onSelectDeselectAllClickCampiObbligatoriBooking(o){this.isAllSelectedCampiObbligatoriBooking(o)?this.selectedCampiObbligatoriBooking=[]:this.selectedCampiObbligatoriBooking=this.campiObbligatoriBooking.slice()}isAllSelectedCampiObbligatoriBooking(o){return o.selected.length==this.campiObbligatoriBooking.length}onSelectDeselectAllClickCampiObbligatoriECommerce(o){this.isAllSelectedCampiObbligatoriECommerce(o)?this.selectedCampiObbligatoriECommerce=[]:this.selectedCampiObbligatoriECommerce=this.campiObbligatoriECommerce.slice()}isAllSelectedCampiObbligatoriECommerce(o){return o.selected.length==this.campiObbligatoriECommerce.length}onSelectDeselectAllClickModalitaPagamentoRichiestaCaparra(o){this.isAllSelectedModalitaPagamentoRichiestaCaparra(o)?this.selectedModalitaPagamentoRichiestaCaparra=[]:this.selectedModalitaPagamentoRichiestaCaparra=this.modalitaPagamentoMyPage.map(t=>t.oid)}isAllSelectedModalitaPagamentoRichiestaCaparra(o){return o.selected.length==this.modalitaPagamentoMyPage.length}isAllDeselected(o){return 0==o.selected.length}openCalcolaRettaErrori(){let o=new d.Zpt;o.width="80vw",o.minHeight="80vh",o.maxHeight="95vh",o.panelClass="no-padding-dialog";let t=this.showModalDialog(Bn,o),n=t.componentInstance;n.portaleOid=this.modelEdit.portale.oid,n.dialogRef=t}checkGoogleHotels(){this.setIsLoading(!0),this.apiService.testConnectionPortaleXAlbergo(this.modelEdit.portale.oid).subscribe(o=>{if(this.setIsLoading(!1),o.data)if(o.data.isTestOk)this.showInfo("sbm.configurazione.portali.googleHotelsAttivo");else{let t=[];o.data.isErrorResponse||t.push(new d.zRL("sbm.configurazione.portali.googleHotelsNonAttivo")),o.data.errori&&o.data.errori.length>0&&o.data.errori.forEach(n=>{t.push(new d.zRL(n.valore))}),this.showErrors(t)}})}generaTokenAirbnb(){this.save(!1,!1,!1,()=>this.oauth2Window=window.open("https://www.airbnb.com/oauth2/auth?client_id="+this.modelEdit.portale.userID+"&redirect_uri="+encodeURI(window.location.origin+"/sbm/oauth2")+"&scope=property_management&state="+this.modelEdit.portale.oid))}recuperaPrenotazioni(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog(ea,o),n=t.componentInstance;n.oidPortale=this.modelEdit.portale.oid,n.dialogRef=t}ngOnDestroy(){this.localStorageSub.unsubscribe()}}Ma.\u0275fac=function(o){return new(o||Ma)(e.Y36(A.s),e.Y36(j.m),e.Y36(te.J),e.Y36(Oe.o),e.Y36(_c.m9),e.Y36(gc.eN),e.Y36(C.t),e.Y36(ie.r),e.Y36(lt.n))},Ma.\u0275cmp=e.Xpm({type:Ma,selectors:[["app-portali-edit"]],viewQuery:function(o,t){if(1&o&&(e.Gf(cH,5),e.Gf(sH,5),e.Gf(pH,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.tabGroup=n.first),e.iGM(n=e.CRH())&&(t.privacyFileSelect=n),e.iGM(n=e.CRH())&&(t.reportFileSelect=n)}},inputs:{servizi:"servizi",articoli:"articoli",serviziCamera:"serviziCamera",serviziTariffa:"serviziTariffa",supplementi:"supplementi",sistemazioni:"sistemazioni",promozioni:"promozioni",componentiXVariazione:"componentiXVariazione",_modalitaPagamento:"_modalitaPagamento",oidPortale:"oidPortale",nomePortale:"nomePortale"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:167,vars:192,consts:[[3,"message"],[3,"ngClass"],[3,"selectedIndex","selectedIndexChange","selectedTabChange"],["tabGroup",""],[3,"label"],[1,"mat-elevation-z0","border","portaliEditPanel","mt-3",3,"expanded","expandedChange"],[1,"row"],[1,"col-4","col-md-2"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","disabled","",3,"placeholder","value"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","disabled","ngModelChange"],["class","w-100",4,"ngIf"],["displayMember","nome",3,"dataLoader","value","placeholder","disabled","valueChange"],["type","password","matInput","","autocomplete","new-password",3,"placeholder","value","focus","blur","keyup.enter","input"],["passwordInput",""],[3,"value","placeholder","valueChange"],["displayMember","ragioneSociale",3,"dataLoader","value","placeholder","disabled","valueChange"],[1,"col-3"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",1,"mb-3",3,"ngModel","ngModelChange"],["class","row mb-3",4,"ngIf"],[4,"ngIf"],[1,"mat-elevation-z0","border","portaliEditPanel","mt-3"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"mat-elevation-z0"],[1,"col-6"],["color","primary",3,"ngModel","ngModelChange"],["class","mat-elevation-z0 mb-3",4,"ngIf"],["class","mat-elevation-z0 border mt-3",4,"ngIf"],["class","mat-elevation-z0 border portaliEditPanel mt-3",4,"ngIf"],[3,"label","aria-labelledby"],["class","container-fluid p-3",4,"ngIf"],[3,"label","disabled"],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["class","mt-3",4,"ngIf"],[3,"value"],[1,"row","mb-3"],["class","col-12 col-md-4",4,"ngIf"],["class","col-12 col-md-8",3,"ngClass",4,"ngIf"],[1,"col-12","col-md-4"],["color","primary",1,"d-inline-block","mt-3",3,"ngModel","ngModelChange"],[1,"col-12","col-md-8",3,"ngClass"],[1,"mat-elevation-z0","pb-0"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-edit-row"],[1,"col-3","d-flex","align-items-center"],[3,"placeholder","url"],[3,"placeholder","url","extraButtonIcon","onExtraButtonClick"],["color","primary",3,"ngModel","disabled","ngModelChange"],[1,"w-100","mt-3"],[1,"row","mt-3"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],[3,"startAt"],["datePicker1",""],["datePicker2",""],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["color","primary",1,"ml-2",3,"ngModel","ngModelChange"],[1,"mat-elevation-z0","mb-3"],[1,"col-12","col-md-6"],["autocompleteOff","","type","number","matInput","",3,"ngModel","placeholder","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"nullable","placeholder","ngModel","ngModelChange"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectCampiObbligatoriBooking",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],["selectCampiObbligatoriECommerce",""],[1,"col-4"],[1,"d-inline-block","align-middle"],["mat-icon-button","",1,"align-middle","help-button","ml-2",3,"click"],[1,"material-icons","help-icon"],[1,"mat-elevation-z0","border","mt-3"],["selectCampiObbligatoriFormRichiesta",""],[1,"col"],["class","row",4,"ngIf"],[1,"col-8","div-help"],["selectCampiObbligatoriPreventivo",""],["selectCampiObbligatoriMyPage",""],[1,"w-100","mt-2"],["modalitaPagamentoDefaultRichiestaCaparraSelect",""],[1,"col-10"],[1,"col-2","p-0"],["mat-icon-button","","color","primary",1,"mt-2","ml-n2",3,"click"],[1,"material-icons"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","matInput","","type","time",3,"placeholder","ngModel","ngModelChange"],["mat-icon-button","","matSuffix","",3,"click"],[1,"color-red"],[1,"col-2"],["selectSearch",""],[3,"value","hidden",4,"ngFor","ngForOf"],[3,"value","hidden"],[1,"mat-table-container-border-rounded","mb-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["matColumnDef","descrizione"],[1,"row","pb-3"],[1,"image-col"],[3,"container","url","title","edit","delete"],["class","col-4 pb-3",4,"ngFor","ngForOf"],[1,"imageRow"],[1,"imageHeight"],["mat-icon-button","","color","primary",1,"add-button",3,"click"],[1,"material-icons","add-icon"],[1,"col-4","pb-3"],[3,"container","url","deleteAlwaysVisible","edit","delete"],[1,"container-fluid","p-3"],[3,"oidPortale","onRisorsaAdd","onTariffaAdd","onVariazioniModificate"],[3,"_risorse","oidPortale","portaleXAlbergo","oidPortalePassepartout","isPortalePassepartout","servizi","supplementi","modalitaPagamento","sistemazioni","onRisorseImportate"],[3,"_tariffe","oidPortale","tipoPortale","isPortalePassepartout","isPortaleMaster","servizi","modalitaPagamento","promozioni","_supplementi","codiciTrattamento","isGoogleHotelsTravelAttivo","onTariffeImportate"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngIf"],[1,"edit-container","mt-3"],[1,"font-weight-bold"],[3,"id","text","textChange"],[1,"descrizione-popup-textarea-container","p-3"],[1,"w-100","descrizione-popup-textarea"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"ngModel","ngModelChange"],[1,"row","m-0"],[1,"col-4","p-0"],["autocompleteOff","","type","text","matInput","","disabled","","readonly","",3,"placeholder","value"],[1,"col-8","pt-2"],["mat-flat-button","","color","primary",1,"mr-2",3,"disabled","click"],["mat-stroked-button","","color","blank",3,"click"],[1,"col-8","p-0"],["autocompleteOff","","type","file","accept",".html",1,"ml-3","mt-3",3,"change"],["privacyFileSelect",""],[3,"_recensioni","oidPortale"],[3,"_risorseTariffe","componentiXVariazione","portaleXAlbergo","oidPortale","hasModelloPrezzo"],[3,"_sourceBrands","oidPortale"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank","class","mr-1",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",3,"click"]],template:function(o,t){if(1&o){const n=e.EpF();e._UZ(0,"app-alert",0),e.TgZ(1,"div",1),e._UZ(2,"app-alert",0),e.qZA(),e.TgZ(3,"mat-tab-group",2,3),e.NdJ("selectedIndexChange",function(l){return t.selectedIndex=l})("selectedTabChange",function(){return t.selectedIndex1=0}),e.TgZ(5,"mat-tab",4),e.ALo(6,"translate"),e.TgZ(7,"mat-accordion")(8,"mat-expansion-panel",5),e.NdJ("expandedChange",function(l){return t.expanded=l}),e.TgZ(9,"mat-expansion-panel-header"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",6)(13,"div",7)(14,"mat-form-field",8),e._UZ(15,"input",9),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",7)(18,"mat-form-field",8)(19,"mat-select",10),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.stato=l}),e.ALo(20,"translate"),e.YNc(21,dH,3,4,"mat-option",11),e.ALo(22,"selectEnum"),e.qZA()()(),e.TgZ(23,"div",7)(24,"mat-form-field",8)(25,"input",12),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.nome=l}),e.ALo(26,"translate"),e.qZA()()(),e.TgZ(27,"div",7)(28,"mat-form-field",8)(29,"input",13),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.ordinamento=l}),e.ALo(30,"translate"),e.qZA()()(),e.TgZ(31,"div",7)(32,"mat-form-field",8)(33,"input",14),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.hotelCode=l}),e.ALo(34,"translate"),e.qZA()(),e.YNc(35,mH,3,4,"mat-form-field",15),e.YNc(36,_H,3,4,"mat-form-field",15),e.qZA(),e.TgZ(37,"div",7)(38,"app-view-select",16),e.NdJ("valueChange",function(l){return t.modelEdit.portale.portaleXAlbergoMaster=l}),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",6)(41,"div",7)(42,"mat-form-field",8)(43,"input",12),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.userID=l}),e.ALo(44,"translate"),e.qZA()()(),e.TgZ(45,"div",7)(46,"mat-form-field",8)(47,"input",17,18),e.NdJ("focus",function(){return t.modelEdit.portale.passwordMask=""})("blur",function(){return null==t.modelEdit.portale.password?t.modelEdit.portale.passwordMask=t.passwordMask:null})("keyup.enter",function(){e.CHM(n);const l=e.MAs(48);let r;return t.modelEdit.portale.password=null!==(r=l.value)&&void 0!==r?r:"",e.KtG(l.blur())})("input",function(){e.CHM(n);const l=e.MAs(48);let r;return e.KtG(t.modelEdit.portale.password=null!==(r=l.value)&&void 0!==r?r:"")}),e.ALo(49,"translate"),e.qZA()()(),e.TgZ(50,"div",7)(51,"app-color-picker",19),e.NdJ("valueChange",function(l){return t.modelEdit.portale.coloreHex=l}),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"div",7)(54,"app-view-select",20),e.NdJ("valueChange",function(l){return t.modelEdit.portale.agenzia=l}),e.ALo(55,"translate"),e.qZA()(),e.TgZ(56,"div",7)(57,"app-view-select",20),e.NdJ("valueChange",function(l){return t.modelEdit.portale.agenziaCrm=l}),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"div",7)(60,"app-view-select",16),e.NdJ("valueChange",function(l){return t.modelEdit.portale.trattamentoDefault=l}),e.ALo(61,"translate"),e.qZA()()(),e.TgZ(62,"div",6)(63,"div",21)(64,"app-view-select",22),e.NdJ("valueChange",function(l){return t.modelEdit.portale.ubicazioneIstat=l})("valueChange",function(){return t.onUbicazioneChange()}),e.ALo(65,"translate"),e.qZA()(),e.TgZ(66,"div",21)(67,"mat-form-field",8)(68,"input",12),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.email=l})("ngModelChange",function(){return t.onEmailChange()}),e.ALo(69,"translate"),e.qZA()()(),e.TgZ(70,"div",21)(71,"app-view-select",22),e.NdJ("valueChange",function(l){return t.modelEdit.portale.accountMailCrm=l}),e.ALo(72,"translate"),e.qZA()(),e.TgZ(73,"div",21)(74,"mat-form-field",8)(75,"input",12),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.codiceValuta=l}),e.ALo(76,"translate"),e.qZA()()()(),e.TgZ(77,"mat-checkbox",23),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isAttivo=l}),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.YNc(80,vH,3,2,"div",24),e.YNc(81,TH,21,43,"ng-container",25),e.qZA(),e.TgZ(82,"mat-expansion-panel",26)(83,"mat-expansion-panel-header"),e._uU(84),e.ALo(85,"translate"),e.qZA(),e.YNc(86,xH,12,12,"div",27),e.YNc(87,JH,96,99,"div",24),e.TgZ(88,"div",28)(89,"mat-card",29)(90,"mat-card-title",28),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"div",6)(94,"div",30)(95,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isVisualizzaPrimaPubblicazione=l}),e._uU(96),e.ALo(97,"translate"),e.qZA()(),e.TgZ(98,"div",30)(99,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isVisualizzaPrenotate=l}),e._uU(100),e.ALo(101,"translate"),e.qZA()(),e.TgZ(102,"div",30)(103,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isVisualizzaPrezzo=l}),e._uU(104),e.ALo(105,"translate"),e.qZA()(),e.TgZ(106,"div",30)(107,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isAttivoDurataSoggiornoMinimo=l}),e._uU(108),e.ALo(109,"translate"),e.qZA()(),e.TgZ(110,"div",30)(111,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isAttivoDurataSoggiornoMassimo=l}),e._uU(112),e.ALo(113,"translate"),e.qZA()(),e.TgZ(114,"div",30)(115,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isVisualizzaSogliaMinimaMassima=l}),e._uU(116),e.ALo(117,"translate"),e.qZA()(),e.TgZ(118,"div",30)(119,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isAttivoCta=l}),e._uU(120),e.ALo(121,"translate"),e.qZA()(),e.TgZ(122,"div",30)(123,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isAttivoCtd=l}),e._uU(124),e.ALo(125,"translate"),e.qZA()(),e.TgZ(126,"div",30)(127,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isAttivaFascia=l}),e._uU(128),e.ALo(129,"translate"),e.qZA()(),e.TgZ(130,"div",30)(131,"mat-checkbox",31),e.NdJ("ngModelChange",function(l){return t.modelEdit.portale.isAttivoVariazioneDisponibili=l}),e._uU(132),e.ALo(133,"translate"),e.qZA()()()()(),e.YNc(134,QH,221,254,"mat-card",32),e.YNc(135,UH,17,15,"mat-card",32),e.YNc(136,YH,25,19,"mat-card",32),e.YNc(137,RH,21,15,"mat-card",32),e.YNc(138,HH,42,50,"mat-card",33),e.qZA(),e.YNc(139,WH,112,141,"mat-expansion-panel",34),e.YNc(140,tK,87,77,"mat-expansion-panel",34),e.YNc(141,aK,104,100,"mat-expansion-panel",34),e.YNc(142,mK,14,9,"mat-expansion-panel",34),e.YNc(143,TK,19,14,"mat-expansion-panel",34),e.YNc(144,ZK,24,19,"mat-expansion-panel",34),e.qZA()(),e.TgZ(145,"mat-tab",35),e.ALo(146,"translate"),e.YNc(147,AK,2,1,"div",36),e.qZA(),e.TgZ(148,"mat-tab",4),e.ALo(149,"translate"),e.YNc(150,wK,2,9,"div",36),e.qZA(),e.TgZ(151,"mat-tab",4),e.ALo(152,"translate"),e.YNc(153,zK,2,11,"div",36),e.qZA(),e.TgZ(154,"mat-tab",37),e.ALo(155,"translate"),e.YNc(156,PK,2,2,"mat-tab-group",38),e.qZA(),e.TgZ(157,"mat-tab",37),e.ALo(158,"translate"),e.YNc(159,kK,2,2,"div",36),e.qZA(),e.TgZ(160,"mat-tab",4),e.ALo(161,"translate"),e.YNc(162,SK,2,5,"div",36),e.qZA(),e.TgZ(163,"mat-tab",37),e.ALo(164,"translate"),e.YNc(165,yK,2,2,"div",36),e.qZA()(),e.YNc(166,LK,14,13,"div",39)}2&o&&(e.Q6J("message",t.alert),e.xp6(1),e.Q6J("ngClass",e.VKq(190,DK,!!t.alert)),e.xp6(1),e.Q6J("message",t.alertEmail),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(2),e.Q6J("label",e.lcZ(6,111,"sbm.configurazione.portali.datiGeneraliTab")),e.xp6(3),e.Q6J("expanded",t.expanded),e.xp6(2),e.hij(" ",e.lcZ(11,113,"sbm.configurazione.portali.datiGeneraliTab")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(16,115,"bo.portaleXAlbergo.proprieta.portale")),e.Q6J("value",null!=t.modelEdit.portale.portale?t.modelEdit.portale.portale.nome:" "),e.xp6(4),e.s9C("placeholder",e.lcZ(20,117,"bo.portaleXAlbergo.proprieta.stato")),e.Q6J("ngModel",t.modelEdit.portale.stato),e.xp6(2),e.Q6J("ngForOf",e.xi3(22,119,t.enumStato,"statoPortaleXAlbergo")),e.xp6(4),e.s9C("placeholder",e.lcZ(26,122,"bo.portaleXAlbergo.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.portale.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(30,124,"bo.portaleXAlbergo.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.portale.ordinamento),e.xp6(4),e.s9C("placeholder",e.lcZ(34,126,"bo.portaleXAlbergo.proprieta.hotelCode")),e.Q6J("ngModel",t.modelEdit.portale.hotelCode)("disabled",t.isPortaleMaster()),e.xp6(2),e.Q6J("ngIf",t.modelEdit.portale.isChainCodeAttivo),e.xp6(1),e.Q6J("ngIf",t.modelEdit.portale.isFromPartyIDAttivo),e.xp6(2),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(t.getPortaliMasterRQ))("value",t.modelEdit.portale.portaleXAlbergoMaster)("placeholder",e.lcZ(39,128,"bo.portaleXAlbergo.proprieta.portaleXAlbergoMaster"))("disabled",t.isPortaleMaster()),e.xp6(5),e.s9C("placeholder",e.lcZ(44,130,"bo.portaleXAlbergo.proprieta.userID")),e.Q6J("ngModel",t.modelEdit.portale.userID),e.xp6(4),e.s9C("placeholder",e.lcZ(49,132,"bo.portaleXAlbergo.proprieta.password")),e.Q6J("value",t.modelEdit.portale.passwordMask),e.xp6(4),e.Q6J("value",t.modelEdit.portale.coloreHex)("placeholder",e.lcZ(52,134,"bo.portaleXAlbergo.proprieta.colore")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getAgenzieViewSelect())("value",t.modelEdit.portale.agenzia)("placeholder",e.lcZ(55,136,"bo.portaleXAlbergo.proprieta.agenzia"))("disabled",t.isPortaleMaster()),e.xp6(3),e.Q6J("dataLoader",t.apiService.getAgenzieViewSelect())("value",t.modelEdit.portale.agenziaCrm)("placeholder",e.lcZ(58,138,"bo.portaleXAlbergo.proprieta.agenziaCrm"))("disabled",t.isPortaleMaster()),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTrattamentiViewSelect())("value",t.modelEdit.portale.trattamentoDefault)("placeholder",e.lcZ(61,140,"bo.portaleXAlbergo.proprieta.trattamentoDefault"))("disabled",t.isPortaleMaster()),e.xp6(4),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.modelEdit.portale.ubicazioneIstat)("placeholder",e.lcZ(65,142,"bo.portaleXAlbergo.proprieta.ubicazioneIstat")),e.xp6(4),e.s9C("placeholder",e.lcZ(69,144,"bo.portaleXAlbergo.proprieta.email")),e.Q6J("ngModel",t.modelEdit.portale.email),e.xp6(3),e.Q6J("dataLoader",t.apiService.getAccountMailViewSelect())("value",t.modelEdit.portale.accountMailCrm)("placeholder",e.lcZ(72,146,"bo.portaleXAlbergo.proprieta.accountMailCrm")),e.xp6(4),e.s9C("placeholder",e.lcZ(76,148,"bo.portaleXAlbergo.proprieta.codiceValuta")),e.Q6J("ngModel",t.modelEdit.portale.codiceValuta),e.xp6(2),e.Q6J("ngModel",t.modelEdit.portale.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(79,150,"bo.portaleXAlbergo.proprieta.isAttivo")," "),e.xp6(2),e.Q6J("ngIf",null==t.modelEdit.portale.portaleXAlbergoMaster||null!=t.portaliCollegati&&t.portaliCollegati.length>0),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(3),e.hij(" ",e.lcZ(85,152,"sbm.configurazione.portali.parametriTab")," "),e.xp6(2),e.Q6J("ngIf",t.isPortaleMaster()),e.xp6(1),e.Q6J("ngIf",!t.isPortaleMaster()),e.xp6(4),e.hij(" ",e.lcZ(92,154,"sbm.configurazione.portali.planningDisponibilitaWeb")," "),e.xp6(4),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaPrimaPubblicazione),e.xp6(1),e.hij(" ",e.lcZ(97,156,"bo.portaleXAlbergo.proprieta.isVisualizzaPrimaPubblicazione")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaPrenotate),e.xp6(1),e.hij(" ",e.lcZ(101,158,"bo.portaleXAlbergo.proprieta.isVisualizzaPrenotate")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaPrezzo),e.xp6(1),e.hij(" ",e.lcZ(105,160,"bo.portaleXAlbergo.proprieta.isVisualizzaPrezzo")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isAttivoDurataSoggiornoMinimo),e.xp6(1),e.hij(" ",e.lcZ(109,162,"bo.portaleXAlbergo.proprieta.isAttivoDurataSoggiornoMinimo")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isAttivoDurataSoggiornoMassimo),e.xp6(1),e.hij(" ",e.lcZ(113,164,"bo.portaleXAlbergo.proprieta.isAttivoDurataSoggiornoMassimo")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isVisualizzaSogliaMinimaMassima),e.xp6(1),e.hij(" ",e.lcZ(117,166,"bo.portaleXAlbergo.proprieta.isVisualizzaSogliaMinimaMassima")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isAttivoCta),e.xp6(1),e.hij(" ",e.lcZ(121,168,"bo.portaleXAlbergo.proprieta.isAttivoCta")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isAttivoCtd),e.xp6(1),e.hij(" ",e.lcZ(125,170,"bo.portaleXAlbergo.proprieta.isAttivoCtd")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isAttivaFascia),e.xp6(1),e.hij(" ",e.lcZ(129,172,"bo.portaleXAlbergo.proprieta.isAttivaFascia")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.portale.isAttivoVariazioneDisponibili),e.xp6(1),e.hij(" ",e.lcZ(133,174,"bo.portaleXAlbergo.proprieta.isAttivoVariazioneDisponibili")," "),e.xp6(2),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()||t.isPortaleAirbnb()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("ngIf",t.isPortalePassepartout()),e.xp6(1),e.Q6J("label",e.lcZ(146,176,"sbm.configurazione.portali.associazioniTariffeTab"))("aria-labelledby",t.isPortaleMaster()?"":"hidden"),e.xp6(2),e.Q6J("ngIf",1==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(149,178,"sbm.configurazione.portali.risorseTab")),e.xp6(2),e.Q6J("ngIf",2==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(152,180,"sbm.configurazione.portali.tariffeTab")),e.xp6(2),e.Q6J("ngIf",3==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(155,182,"sbm.configurazione.portali.descrizioniTab"))("disabled",!t.isPortalePassepartout()),e.xp6(2),e.Q6J("ngIf",4==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(158,184,"sbm.configurazione.portali.recensioniTab"))("disabled",!t.isPortalePassepartout()),e.xp6(2),e.Q6J("ngIf",5==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(161,186,"sbm.configurazione.portali.risorseTariffeTab")),e.xp6(2),e.Q6J("ngIf",6==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(164,188,"sbm.configurazione.portali.sourceBrandsTab"))("disabled",!t.modelEdit.portale.isSourceBrandXAgenziaAttivo),e.xp6(2),e.Q6J("ngIf",7==t.selectedIndex),e.xp6(1),e.Q6J("ngIf",0==t.selectedIndex||4==t.selectedIndex))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,it.IC,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,g.x8,Yt.d,qe.S$,qe.mi,ee.SK,ee.R7,ye.pp,ye.ib,ye.yz,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.On,We.h,Me.P,nt,ne.d,Ge.c,Be,R,_a,ha,fa,ba,va,za,Te.A,z.X$],styles:["mat-card[_ngcontent-%COMP%]{border:1px solid lightgrey}mat-card-title[_ngcontent-%COMP%]{font-weight:400;font-size:18px}  .portaliEditPanel .mat-content{font-size:20px!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{color:#000000de!important;background-color:#fff!important}.imageHeight[_ngcontent-%COMP%]{max-height:180px!important;text-align:center;width:100%}.imageRow[_ngcontent-%COMP%]{height:180px!important;display:flex;align-items:center;margin-bottom:1rem}.add-icon[_ngcontent-%COMP%]{height:60px!important;width:60px!important;font-size:60px!important;line-height:60px!important}.add-button[_ngcontent-%COMP%]{height:60px!important;width:60px!important;line-height:60px!important}  .descrizione-popup-textarea .mat-form-field-underline{visibility:hidden!important}  .descrizione-popup-textarea .mat-form-field-wrapper{padding-bottom:0!important}  .descrizione-popup-textarea .mat-form-field-infix{border-top:0!important}.descrizione-popup-textarea-container[_ngcontent-%COMP%]{border:1px solid #ddd}textarea.mat-input-element[_ngcontent-%COMP%]{margin:0;padding:0}.help-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.help-icon[_ngcontent-%COMP%]{font-size:20px;line-height:20px}.image-col[_ngcontent-%COMP%]{flex:1;padding-right:15px;padding-left:15px}"]});const IK=function(i){return{selected:i}};function QK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",36),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onPortaleMasterSelected(l.oid.toString()))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,IK,n.filters[2].value==t.oid.toString())),e.xp6(1),e.hij(" ",t.nome," ")}}function UK(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",11),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",37)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.portali.nessunPortale")))}function YK(i,o){1&i&&e._UZ(0,"mat-header-cell")}function RK(i,o){1&i&&(e.TgZ(0,"mat-cell",38)(1,"button",39)(2,"i",40),e._uU(3,"edit"),e.qZA()()())}function FK(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergo.proprieta.oid")))}function HK(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.oid)}}function KK(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergo.proprieta.nome")))}function GK(i,o){if(1&i&&e._UZ(0,"img",44),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.portale.urlImmagineIcona,e.LSH)}}function $K(i,o){if(1&i&&(e.TgZ(0,"div",45),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.portaleXAlbergoMaster.nome)}}function BK(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,GK,1,1,"img",41),e.TgZ(2,"div",42)(3,"div"),e._uU(4),e.qZA(),e.YNc(5,$K,2,1,"div",43),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.portale&&!!t.portale.urlImmagineIcona),e.xp6(3),e.Oqu(t.nome),e.xp6(1),e.Q6J("ngIf",null!=t.portaleXAlbergoMaster)}}function VK(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergo.proprieta.ubicazioneIstat")))}function XK(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.ubicazioneIstat?null:t.ubicazioneIstat.nome)}}function jK(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergo.proprieta.portale")))}function WK(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.portale?null:t.portale.nome)}}function eG(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergo.proprieta.hotelCode")))}function tG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.hotelCode)}}function iG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",46),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.portaleXAlbergo.proprieta.isAttivo")))}function oG(i,o){if(1&i&&(e.TgZ(0,"mat-cell",46),e._UZ(1,"mat-checkbox",47),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)("disabled",!0)}}function nG(i,o){1&i&&e._UZ(0,"mat-header-cell")}function aG(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.openUrlBooking(l.oid))}),e.TgZ(1,"i",50),e._uU(2,"open_in_new"),e.qZA()()}}function lG(i,o){if(1&i&&(e.TgZ(0,"mat-cell",46),e.YNc(1,aG,3,0,"button",48),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.tipoPortale==n.enumTipoPortale.Passepartout)}}function rG(i,o){1&i&&e._UZ(0,"mat-header-cell")}function cG(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",51)(1,"button",49),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(57);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",50),e._uU(3,"delete"),e.qZA()()()}}function sG(i,o){1&i&&e._UZ(0,"mat-header-row",52)}function pG(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",53),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function dG(i,o){if(1&i&&(e.TgZ(0,"div",54)(1,"h4",55),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"div",56),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.portali.possibiliErrori")),e.xp6(2),e.Q6J("innerHtml",t.localizationService.getTranslationFromErrori(t.errori),e.oJD)}}const mG=function(i){return{"mb-0":i}};class qa extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.localizationService=l,this.showTable=!0,this.displayedColumns=["edit","oid","nome","ubicazioneIstat","portale","hotelCode","isAttivo","view","delete"],this.enumCategoriaServizio=c.Zd,this.enumTipoPortale=c.Q,this.portaliMaster=[]}ngOnInit(){this.headerService.setTitle("sbm.configurazione.portali.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("portale.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$(["oid","portaleXAlbergoMaster.oid"],c.Hp.Equal,"",c.NM.Number)),this.rq.sorting=[new d.aQR("ordinamento",c.nI.Asc)],this.setIsLoading(!0),this.apiService.getPortaliView().subscribe(o=>{this.servizi=o.data.servizi.filter(t=>t.categoria==this.enumCategoriaServizio.Tutte||t.categoria==this.enumCategoriaServizio.Hotel),this.serviziCamera=o.data.servizi.filter(t=>t.categoria==this.enumCategoriaServizio.Tutte||t.categoria==this.enumCategoriaServizio.Camera),this.serviziTariffa=o.data.servizi.filter(t=>t.categoria==this.enumCategoriaServizio.Tutte||t.categoria==this.enumCategoriaServizio.Tariffa),this.articoli=o.data.articoli,this.supplementi=o.data.supplementi,this.sistemazioni=o.data.sistemazioni,this.modalitaPagamento=o.data.modalitaPagamento,this.promozioni=o.data.promozioni,this.componentiXVariazione=o.data.componentiXVariazione,this.download(!0)})}onSearch(o,t){this.filters[o].value=t,this.download(),this.paginator.firstPage()}onPortaleMasterSelected(o){this.filters[2].value==o?(this.filters[2].value="",this.rq.sorting=[new d.aQR("ordinamento",c.nI.Asc)]):(this.filters[2].value=o,this.rq.sorting=[new d.aQR("portale.tipoPortale",c.nI.Desc)]),this.download(),this.paginator.firstPage()}download(o=!1){this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPortaliFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o?this.apiService.getErroriAlbergo().subscribe(n=>{this.errori=n.data,this.apiService.getPortaliFilter(d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Master.toString(),c.NM.Number)).subscribe(a=>{this.portaliMaster=a.data,this.filters[2].value&&null==this.portaliMaster.find(l=>l.oid==+this.filters[2].value)?this.onPortaleMasterSelected(this.filters[2].value):this.setIsLoading(!1)})}):this.setIsLoading(!1)})}add(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog($n,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&this.edit(a)})}edit(o){this.nomePortale=new String(o.nome),this.portaleOid=new Number(o.oid),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this),!0)}openUrlBooking(o){this.utility.openUrlInNewTab(window.location.origin+"/booking?oidPortale="+o+"&lingua="+this.localizationService.currentLanguage.codice)}onBack(){this.showTable=!0,this.download(!0),this.containerService.scrollToTop(),this.headerService.hideElenco(),this.headerService.setTitle("sbm.configurazione.portali.title")}funzionalitaPortali(){let o=new d.Zpt;o.width="90vw",this.showModalDialog(ci,o).componentInstance.configuration=!1}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}function _G(i,o){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.nome," ")}}function uG(i,o){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.nome," ")}}function gG(i,o){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.nome," ")}}function hG(i,o){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.nome," ")}}qa.\u0275fac=function(o){return new(o||qa)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t),e.Y36(Oe.o))},qa.\u0275cmp=e.Xpm({type:qa,selectors:[["app-portali"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:58,vars:37,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-4"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],["mat-flat-button","","color","primary",1,"funzionalita-portali-button",3,"click"],[1,"mt-3","mb-3"],["class","d-inline-block portale-master p-2 rounded-lg mr-2",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-mini-fab","","color","button-add",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","oid"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","ubicazioneIstat"],["matColumnDef","portale"],["matColumnDef","hotelCode"],["matColumnDef","isAttivo"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","view"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container",3,"ngClass"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["class","mt-3 border rounded-xl p-3 bg-white",4,"ngIf"],[3,"nomePortale","oidPortale","servizi","serviziCamera","serviziTariffa","articoli","supplementi","sistemazioni","_modalitaPagamento","promozioni","componentiXVariazione","backEvent"],["editComponent",""],[1,"d-inline-block","portale-master","p-2","rounded-lg","mr-2",3,"ngClass","click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["class","portale-icon mr-1",3,"src",4,"ngIf"],[1,"d-inline-block"],["class","font-small font-italic",4,"ngIf"],[1,"portale-icon","mr-1",3,"src"],[1,"font-small","font-italic"],[1,"justify-content-center"],["color","primary",3,"checked","disabled"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-td-delete"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[1,"mt-3","border","rounded-xl","p-3","bg-white"],[1,"mb-3"],[1,"errori-div",3,"innerHtml"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"app-view-select",5),e.NdJ("valueChange",function(a){return t.onSearch(0,-1==a.oid?"":a.oid.toString())}),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",4)(8,"app-view-select",5),e.NdJ("valueChange",function(a){return t.onSearch(1,-1==a.oid?"":a.oid.toString())}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",4)(11,"button",6),e.NdJ("click",function(){return t.funzionalitaPortali()}),e._uU(12),e.ALo(13,"translate"),e.qZA()()()(),e.TgZ(14,"div",7),e.YNc(15,QK,2,4,"span",8),e.qZA(),e.YNc(16,UK,8,3,"div",9),e.TgZ(17,"div",1)(18,"button",10),e.NdJ("click",function(){return t.add()}),e.TgZ(19,"i",11),e._uU(20,"add"),e.qZA()(),e.TgZ(21,"div",12)(22,"mat-table",13),e.ynx(23,14),e.YNc(24,YK,1,0,"mat-header-cell",15),e.YNc(25,RK,4,0,"mat-cell",16),e.BQk(),e.ynx(26,17),e.YNc(27,FK,3,3,"mat-header-cell",15),e.YNc(28,HK,2,1,"mat-cell",18),e.BQk(),e.ynx(29,19),e.YNc(30,KK,3,3,"mat-header-cell",15),e.YNc(31,BK,6,3,"mat-cell",18),e.BQk(),e.ynx(32,20),e.YNc(33,VK,3,3,"mat-header-cell",15),e.YNc(34,XK,2,1,"mat-cell",18),e.BQk(),e.ynx(35,21),e.YNc(36,jK,3,3,"mat-header-cell",15),e.YNc(37,WK,2,1,"mat-cell",18),e.BQk(),e.ynx(38,22),e.YNc(39,eG,3,3,"mat-header-cell",15),e.YNc(40,tG,2,1,"mat-cell",18),e.BQk(),e.ynx(41,23),e.YNc(42,iG,3,3,"mat-header-cell",24),e.YNc(43,oG,2,2,"mat-cell",25),e.BQk(),e.ynx(44,26),e.YNc(45,nG,1,0,"mat-header-cell",15),e.YNc(46,lG,2,1,"mat-cell",25),e.BQk(),e.ynx(47,27),e.YNc(48,rG,1,0,"mat-header-cell",15),e.YNc(49,cG,4,0,"mat-cell",28),e.BQk(),e.YNc(50,sG,1,0,"mat-header-row",29),e.YNc(51,pG,1,1,"mat-row",30),e.qZA()(),e.TgZ(52,"div",31)(53,"mat-paginator",32),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()(),e.YNc(54,dG,5,4,"div",33),e.qZA()(),e.TgZ(55,"div",1)(56,"app-portali-edit",34,35),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliViewSelect())("placeholder",e.lcZ(6,29,"globals.portale")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("placeholder",e.lcZ(9,31,"globals.ubicazioneIstat")),e.xp6(4),e.Oqu(e.lcZ(13,33,"sbm.amministrazione.portali.funzionalitaPortali")),e.xp6(3),e.Q6J("ngForOf",t.portaliMaster),e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngClass",e.VKq(35,mG,null!=t.errori&&t.errori.length>0)),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",null!=t.errori&&t.errori.length>0),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("nomePortale",t.nomePortale)("oidPortale",t.portaleOid)("servizi",t.servizi)("serviziCamera",t.serviziCamera)("serviziTariffa",t.serviziTariffa)("articoli",t.articoli)("supplementi",t.supplementi)("sistemazioni",t.sistemazioni)("_modalitaPagamento",t.modalitaPagamento)("promozioni",t.promozioni)("componentiXVariazione",t.componentiXVariazione))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,ne.d,Ma,z.X$],styles:[".errori-div[_ngcontent-%COMP%]{max-height:300px;overflow:auto}.selected[_ngcontent-%COMP%]{color:#e91e63!important;border:1px solid #e91e63!important}.portale-master[_ngcontent-%COMP%]{font-size:16px;font-weight:600;cursor:pointer;border:1px solid #aaaaaa;background-color:#fff}.funzionalita-portali-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}"]});const fc=function(i){return{"color-pink":i}};class Pa extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.rq=new d.z_s,this.selectedPortali=[],this.selectedTrattamenti=[],this.selectedTipiCamere=[],this.selectedModalitaPagamento=[],this.portali=[],this.tipiCamere=[],this.trattamenti=[],this.modalitaPagamento=[]}ngOnInit(){this.setIsLoading(!0),this.rq.promozione=new v.Und,this.rq.promozione.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.apiService.getCreaPromozioneView().subscribe(o=>{this.portali=o.data.portali,this.tipiCamere=o.data.tipiCamere,this.trattamenti=o.data.trattamenti,this.modalitaPagamento=o.data.modalitaPagamento,this.setIsLoading(!1)})}onSelectDeselectAllClickTrattamenti(o){this.isAllSelectedTrattamenti(o)?this.selectedTrattamenti=[]:this.selectedTrattamenti=this.trattamenti.map(t=>t.oid)}isAllSelectedTrattamenti(o){return o.selected.length==this.trattamenti.length}onSelectDeselectAllClickModalitaPagamento(o){this.isAllSelectedModalitaPagamento(o)?this.selectedModalitaPagamento=[]:this.selectedModalitaPagamento=this.modalitaPagamento.map(t=>t.oid)}isAllSelectedModalitaPagamento(o){return o.selected.length==this.modalitaPagamento.length}onSelectDeselectAllClickTipiCamere(o){this.isAllSelectedTipiCamere(o)?this.selectedTipiCamere=[]:this.selectedTipiCamere=this.tipiCamere.map(t=>t.oid)}isAllSelectedTipiCamere(o){return o.selected.length==this.tipiCamere.length}onSelectDeselectAllClickPortali(o){this.isAllSelectedPortali(o)?this.selectedPortali=[]:this.selectedPortali=this.portali.map(t=>t.oid)}isAllSelectedPortali(o){return o.selected.length==this.portali.length}isAllDeselected(o){return 0==o.selected.length}save(){this.rq.tipiCamere=this.selectedTipiCamere,this.rq.trattamenti=this.selectedTrattamenti,this.rq.modalitaPagamento=this.selectedModalitaPagamento,this.rq.portali=this.selectedPortali,this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.setIsLoading(!0),this.apiService.creaPromozione(this.rq).subscribe(o=>{this.dialogRef.close(o.data)})}dalChange(){(!this.rq.al||u(this.rq.dal)>u(this.rq.al))&&(this.rq.al=this.rq.dal)}alChange(){(!this.rq.dal||u(this.rq.al)<u(this.rq.dal))&&(this.rq.dal=this.rq.al)}}Pa.\u0275fac=function(o){return new(o||Pa)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},Pa.\u0275cmp=e.Xpm({type:Pa,selectors:[["app-promozioni-new"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:65,vars:83,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"div-help","mb-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],[1,"row"],[1,"col-6"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],[3,"startAt"],["dal",""],["al",""],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectTipiCamere",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value",4,"ngFor","ngForOf"],["selectTrattamenti",""],["selectModalitaPagamento",""],["selectPortali",""],["autocompleteOff","","type","number","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2),e._uU(4," Crea una promozione di tipo sconto impostando i valori richiesti\n"),e.qZA(),e.TgZ(5,"mat-form-field",3)(6,"input",4),e.NdJ("ngModelChange",function(l){return t.rq.promozione.nome=l}),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"mat-form-field",3)(11,"input",7),e.NdJ("ngModelChange",function(l){return t.rq.dal=l})("dateChange",function(){return t.dalChange()}),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"mat-datepicker-toggle",8)(14,"mat-datepicker",9,10),e.qZA()(),e.TgZ(16,"div",6)(17,"mat-form-field",3)(18,"input",7),e.NdJ("ngModelChange",function(l){return t.rq.al=l})("dateChange",function(){return t.alChange()}),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"mat-datepicker-toggle",8)(21,"mat-datepicker",9,11),e.qZA()()(),e.TgZ(23,"mat-form-field",3)(24,"mat-select",12,13),e.NdJ("ngModelChange",function(l){return t.selectedTipiCamere=l}),e.ALo(26,"translate"),e.TgZ(27,"mat-checkbox",14),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(25);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickTipiCamere(r))}),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.YNc(30,_G,2,2,"mat-option",15),e.qZA()(),e.TgZ(31,"mat-form-field",3)(32,"mat-select",12,16),e.NdJ("ngModelChange",function(l){return t.selectedTrattamenti=l}),e.ALo(34,"translate"),e.TgZ(35,"mat-checkbox",14),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(33);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickTrattamenti(r))}),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.YNc(38,uG,2,2,"mat-option",15),e.qZA()(),e.TgZ(39,"mat-form-field",3)(40,"mat-select",12,17),e.NdJ("ngModelChange",function(l){return t.selectedModalitaPagamento=l}),e.ALo(42,"translate"),e.TgZ(43,"mat-checkbox",14),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(41);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickModalitaPagamento(r))}),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.YNc(46,gG,2,2,"mat-option",15),e.qZA()(),e.TgZ(47,"mat-form-field",3)(48,"mat-select",12,18),e.NdJ("ngModelChange",function(l){return t.selectedPortali=l}),e.ALo(50,"translate"),e.TgZ(51,"mat-checkbox",14),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(49);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickPortali(r))}),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.YNc(54,hG,2,2,"mat-option",15),e.qZA()(),e.TgZ(55,"mat-form-field",3)(56,"input",19),e.NdJ("ngModelChange",function(l){return t.rq.sconto=l}),e.ALo(57,"translate"),e.qZA()(),e.TgZ(58,"mat-form-field",3)(59,"input",20),e.NdJ("ngModelChange",function(l){return t.rq.durataMinimaSoggiorno=l}),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"div",21)(62,"button",22),e.NdJ("click",function(){return t.save()}),e._uU(63),e.ALo(64,"translate"),e.qZA()()}if(2&o){const n=e.MAs(15),a=e.MAs(22),l=e.MAs(25),r=e.MAs(33),p=e.MAs(41),T=e.MAs(49);e.Q6J("disableRipple",!0),e.xp6(6),e.s9C("placeholder",e.lcZ(7,47,"bo.promozione.proprieta.nome")),e.Q6J("ngModel",t.rq.promozione.nome),e.xp6(5),e.s9C("placeholder",e.lcZ(12,49,"interfaces.crea-promozione.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.dal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(19,51,"interfaces.crea-promozione.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.al)?t.today:null),e.xp6(3),e.Q6J("placeholder",e.lcZ(26,53,"interfaces.crea-promozione.tipiCamere"))("ngModel",t.selectedTipiCamere),e.xp6(3),e.Q6J("ngClass",e.VKq(75,fc,t.isAllSelectedTipiCamere(l)))("checked",t.isAllSelectedTipiCamere(l))("indeterminate",!t.isAllSelectedTrattamenti(l)&&!t.isAllDeselected(l)),e.xp6(1),e.hij(" ",e.lcZ(29,55,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",t.tipiCamere),e.xp6(2),e.Q6J("placeholder",e.lcZ(34,57,"interfaces.crea-promozione.trattamenti"))("ngModel",t.selectedTrattamenti),e.xp6(3),e.Q6J("ngClass",e.VKq(77,fc,t.isAllSelectedTrattamenti(r)))("checked",t.isAllSelectedTrattamenti(r))("indeterminate",!t.isAllSelectedTrattamenti(r)&&!t.isAllDeselected(r)),e.xp6(1),e.hij(" ",e.lcZ(37,59,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",t.trattamenti),e.xp6(2),e.Q6J("placeholder",e.lcZ(42,61,"interfaces.crea-promozione.modalitaPagamento"))("ngModel",t.selectedModalitaPagamento),e.xp6(3),e.Q6J("ngClass",e.VKq(79,fc,t.isAllSelectedModalitaPagamento(p)))("checked",t.isAllSelectedModalitaPagamento(p))("indeterminate",!t.isAllSelectedModalitaPagamento(p)&&!t.isAllDeselected(p)),e.xp6(1),e.hij(" ",e.lcZ(45,63,"globals.selezionaDeselezionaTutti"),""),e.xp6(2),e.Q6J("ngForOf",t.modalitaPagamento),e.xp6(2),e.Q6J("placeholder",e.lcZ(50,65,"interfaces.crea-promozione.portali"))("ngModel",t.selectedPortali),e.xp6(3),e.Q6J("ngClass",e.VKq(81,fc,t.isAllSelectedPortali(T)))("checked",t.isAllSelectedPortali(T))("indeterminate",!t.isAllSelectedPortali(T)&&!t.isAllDeselected(T)),e.xp6(1),e.hij(" ",e.lcZ(53,67,"globals.selezionaDeselezionaTutti"),""),e.xp6(2),e.Q6J("ngForOf",t.portali),e.xp6(2),e.s9C("placeholder",e.lcZ(57,69,"interfaces.crea-promozione.sconto")),e.Q6J("ngModel",t.rq.sconto),e.xp6(3),e.s9C("placeholder",e.lcZ(60,71,"interfaces.crea-promozione.durataMinimaSoggiorno")),e.Q6J("ngModel",t.rq.durataMinimaSoggiorno),e.xp6(3),e.Q6J("disabled",!t.rq.promozione.nome||null==t.rq.sconto||t.rq.sconto<0),e.xp6(1),e.Oqu(e.lcZ(64,73,"globals.salva"))}},dependencies:[m.mk,m.sg,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,F.aO,_.Fj,_.wV,_.JJ,_.Q7,_.On,z.X$]});const fG=["sortVariazioniTipoCamera"],CG=["sortVariazioniTrattamento"],bG=["sortVariazioniDurata"],vG=["sortVariazioniComponente"],TG=["sortVariazioniTipoPasto"],xG=["sortVariazioniComponenteTipoCamera"],ZG=["sortVariazioniPersona"],AG=["sortVariazioniPianoFamiglia"],wG=["sortVariazioniGiorniAnticipo"];function zG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXTipoCamera.proprieta.tipoCamera")," "))}function MG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCamera?t.tipoCamera.nome:"")}}function qG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXTipoCamera.proprieta.giornoSettimana")," "))}function PG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumGiornoSettimana,t.giornoSettimana,"giornoSettimana"))," ")}}function kG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXTipoCamera.proprieta.valoreStringa")," "))}function SG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.valoreStringa," ")}}function yG(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function JG(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function EG(i,o){1&i&&(e.TgZ(0,"h4",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.listini.nessunaVariazione")))}function NG(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",6),e.ALo(1,"translate"),e.TgZ(2,"div",7)(3,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dataSourceVariazioniTipoCamera.filter=a.oid>0?a.oid.toString():"")}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",9)(6,"mat-table",10,11),e.ynx(8,12),e.YNc(9,zG,3,3,"mat-header-cell",13),e.YNc(10,MG,2,1,"mat-cell",14),e.BQk(),e.ynx(11,15),e.YNc(12,qG,3,3,"mat-header-cell",13),e.YNc(13,PG,3,3,"mat-cell",14),e.BQk(),e.ynx(14,16),e.YNc(15,kG,3,3,"mat-header-cell",13),e.YNc(16,SG,2,1,"mat-cell",14),e.BQk(),e.YNc(17,yG,1,0,"mat-header-row",17),e.YNc(18,JG,1,1,"mat-row",18),e.qZA()(),e.YNc(19,EG,3,3,"h4",3),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,9,"sbm.tabelle.listini.variazioniTipoCamera")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(4,11,"globals.tipoCamera")),e.xp6(2),e.Q6J("hidden",null!=t.dataSourceVariazioniTipoCamera&&null!=t.dataSourceVariazioniTipoCamera.filteredData&&0==t.dataSourceVariazioniTipoCamera.filteredData.length),e.xp6(1),e.Q6J("dataSource",t.dataSourceVariazioniTipoCamera),e.xp6(11),e.Q6J("matHeaderRowDef",t.displayedColumnsVariazioniTipoCamera)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsVariazioniTipoCamera),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniTipoCamera&&null!=t.dataSourceVariazioniTipoCamera.filteredData&&0==t.dataSourceVariazioniTipoCamera.filteredData.length)}}function OG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXTrattamento.proprieta.tipoCamera")," "))}function LG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCamera?t.tipoCamera.nome:"")}}function DG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXTrattamento.proprieta.trattamento")," "))}function IG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.trattamento?t.trattamento.nome:"")}}function QG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXTrattamento.proprieta.valoreStringa")," "))}function UG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.valoreStringa," ")}}function YG(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function RG(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function FG(i,o){1&i&&(e.TgZ(0,"h4",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.listini.nessunaVariazione")))}function HG(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",6),e.ALo(1,"translate"),e.TgZ(2,"div",7)(3,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dataSourceVariazioniTrattamento.filter=a.oid>0?a.oid.toString():"")}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",9)(6,"mat-table",10,23),e.ynx(8,12),e.YNc(9,OG,3,3,"mat-header-cell",13),e.YNc(10,LG,2,1,"mat-cell",14),e.BQk(),e.ynx(11,24),e.YNc(12,DG,3,3,"mat-header-cell",13),e.YNc(13,IG,2,1,"mat-cell",14),e.BQk(),e.ynx(14,16),e.YNc(15,QG,3,3,"mat-header-cell",13),e.YNc(16,UG,2,1,"mat-cell",14),e.BQk(),e.YNc(17,YG,1,0,"mat-header-row",17),e.YNc(18,RG,1,1,"mat-row",18),e.qZA()(),e.YNc(19,FG,3,3,"h4",3),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,9,"sbm.tabelle.listini.variazioniTrattamento")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(4,11,"globals.tipoCamera")),e.xp6(2),e.Q6J("hidden",null!=t.dataSourceVariazioniTrattamento&&null!=t.dataSourceVariazioniTrattamento.filteredData&&0==t.dataSourceVariazioniTrattamento.filteredData.length),e.xp6(1),e.Q6J("dataSource",t.dataSourceVariazioniTrattamento),e.xp6(11),e.Q6J("matHeaderRowDef",t.displayedColumnsVariazioniTrattamento)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsVariazioniTrattamento),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniTrattamento&&null!=t.dataSourceVariazioniTrattamento.filteredData&&0==t.dataSourceVariazioniTrattamento.filteredData.length)}}function KG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXDurata.proprieta.tipoCamera")," "))}function GG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCamera?t.tipoCamera.nome:"")}}function $G(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXDurata.proprieta.giornoInizio")," "))}function BG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.giornoInizio," ")}}function VG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXDurata.proprieta.giornoFine")," "))}function XG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.giornoFine," ")}}function jG(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXDurata.proprieta.valoreStringa")," "))}function WG(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.valoreStringa," ")}}function e$(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function t$(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function i$(i,o){1&i&&(e.TgZ(0,"h4",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.listini.nessunaVariazione")))}function o$(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",6),e.ALo(1,"translate"),e.TgZ(2,"div",7)(3,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dataSourceVariazioniDurata.filter=a.oid>0?a.oid.toString():"")}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",9)(6,"mat-table",10,25),e.ynx(8,12),e.YNc(9,KG,3,3,"mat-header-cell",13),e.YNc(10,GG,2,1,"mat-cell",14),e.BQk(),e.ynx(11,26),e.YNc(12,$G,3,3,"mat-header-cell",13),e.YNc(13,BG,2,1,"mat-cell",14),e.BQk(),e.ynx(14,27),e.YNc(15,VG,3,3,"mat-header-cell",13),e.YNc(16,XG,2,1,"mat-cell",14),e.BQk(),e.ynx(17,16),e.YNc(18,jG,3,3,"mat-header-cell",13),e.YNc(19,WG,2,1,"mat-cell",14),e.BQk(),e.YNc(20,e$,1,0,"mat-header-row",17),e.YNc(21,t$,1,1,"mat-row",18),e.qZA()(),e.YNc(22,i$,3,3,"h4",3),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,9,"sbm.tabelle.listini.variazioniDurata")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(4,11,"globals.tipoCamera")),e.xp6(2),e.Q6J("hidden",null!=t.dataSourceVariazioniDurata&&null!=t.dataSourceVariazioniDurata.filteredData&&0==t.dataSourceVariazioniDurata.filteredData.length),e.xp6(1),e.Q6J("dataSource",t.dataSourceVariazioniDurata),e.xp6(14),e.Q6J("matHeaderRowDef",t.displayedColumnsVariazioniDurata)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsVariazioniDurata),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniDurata&&null!=t.dataSourceVariazioniDurata.filteredData&&0==t.dataSourceVariazioniDurata.filteredData.length)}}function n$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXComponente.proprieta.tipoCamera")," "))}function a$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCamera?t.tipoCamera.nome:"")}}function l$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXComponente.proprieta.trattamento")," "))}function r$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.trattamento?t.trattamento.nome:"")}}function c$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXComponente.proprieta.componenteXVariazione")," "))}function s$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.componenteXVariazione?t.componenteXVariazione.nome:"")}}function p$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXComponente.proprieta.valoreStringa")," "))}function d$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.valoreStringa," ")}}function m$(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function _$(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function u$(i,o){1&i&&(e.TgZ(0,"h4",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.listini.nessunaVariazione")))}function g$(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",6),e.ALo(1,"translate"),e.TgZ(2,"div",7)(3,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dataSourceVariazioniComponente.filter=a.oid>0?a.oid.toString():"")}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",9)(6,"mat-table",10,28),e.ynx(8,12),e.YNc(9,n$,3,3,"mat-header-cell",13),e.YNc(10,a$,2,1,"mat-cell",14),e.BQk(),e.ynx(11,24),e.YNc(12,l$,3,3,"mat-header-cell",13),e.YNc(13,r$,2,1,"mat-cell",14),e.BQk(),e.ynx(14,29),e.YNc(15,c$,3,3,"mat-header-cell",13),e.YNc(16,s$,2,1,"mat-cell",14),e.BQk(),e.ynx(17,16),e.YNc(18,p$,3,3,"mat-header-cell",13),e.YNc(19,d$,2,1,"mat-cell",14),e.BQk(),e.YNc(20,m$,1,0,"mat-header-row",17),e.YNc(21,_$,1,1,"mat-row",18),e.qZA()(),e.YNc(22,u$,3,3,"h4",3),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,9,"sbm.tabelle.listini.variazioniComponente")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(4,11,"globals.tipoCamera")),e.xp6(2),e.Q6J("hidden",null!=t.dataSourceVariazioniComponente&&null!=t.dataSourceVariazioniComponente.filteredData&&0==t.dataSourceVariazioniComponente.filteredData.length),e.xp6(1),e.Q6J("dataSource",t.dataSourceVariazioniComponente),e.xp6(14),e.Q6J("matHeaderRowDef",t.displayedColumnsVariazioniComponente)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsVariazioniComponente),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniComponente&&null!=t.dataSourceVariazioniComponente.filteredData&&0==t.dataSourceVariazioniComponente.filteredData.length)}}function h$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXTipoPasto.proprieta.tipoComponentePrenotazione")," "))}function f$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoComponentePrenotazione,t.tipoComponentePrenotazione,"tipoComponentePrenotazione")))}}function C$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXTipoPasto.proprieta.tipoPasto")," "))}function b$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoPasto,t.tipoPasto,"tipoPasto")))}}function v$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXTipoPasto.proprieta.valore")," "))}function T$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",t.valore+" "+(t.tipoValore==n.enumTipoValore.Euro?"\u20ac":"%")," ")}}function x$(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function Z$(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function A$(i,o){if(1&i&&(e.TgZ(0,"mat-tab",6),e.ALo(1,"translate"),e.TgZ(2,"div",30)(3,"mat-table",31,32),e.ynx(5,33),e.YNc(6,h$,3,3,"mat-header-cell",13),e.YNc(7,f$,3,3,"mat-cell",14),e.BQk(),e.ynx(8,34),e.YNc(9,C$,3,3,"mat-header-cell",13),e.YNc(10,b$,3,3,"mat-cell",14),e.BQk(),e.ynx(11,35),e.YNc(12,v$,3,3,"mat-header-cell",13),e.YNc(13,T$,2,1,"mat-cell",14),e.BQk(),e.YNc(14,x$,1,0,"mat-header-row",17),e.YNc(15,Z$,1,1,"mat-row",18),e.qZA()()()),2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,5,"sbm.tabelle.listini.variazioniTipoPasto")),e.xp6(3),e.Q6J("dataSource",t.dataSourceVariazioniTipoPasto),e.xp6(11),e.Q6J("matHeaderRowDef",t.displayedColumnsVariazioniTipoPasto)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsVariazioniTipoPasto)}}function w$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXComponenteXTipoCamera.proprieta.tipoCamera")," "))}function z$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCamera?t.tipoCamera.nome:"")}}function M$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXComponenteXTipoCamera.proprieta.adulti")," "))}function q$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.adulti," ")}}function P$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXComponenteXTipoCamera.proprieta.adultiPaganti")," "))}function k$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.adultiPaganti," ")}}function S$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXComponenteXTipoCamera.proprieta.componente")," "))}function y$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.componente?t.componente.nome:"")}}function J$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXComponenteXTipoCamera.proprieta.valore")," "))}function E$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.valore," ")}}function N$(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function O$(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function L$(i,o){1&i&&(e.TgZ(0,"h4",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.listini.nessunaVariazione")))}function D$(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",6),e.ALo(1,"translate"),e.TgZ(2,"div",36)(3,"div",37)(4,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return l.variazioniComponenteTipoCameraFilter.oidTipoCamera=a.oid>0?a.oid:null,e.KtG(l.updateVariazioniComponenteTipoCameraFilter())}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",38)(7,"mat-form-field",39)(8,"input",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.variazioniComponenteTipoCameraFilter.adulti=a)})("input",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateVariazioniComponenteTipoCameraFilter())}),e.ALo(9,"translate"),e.qZA()()()(),e.TgZ(10,"div",9)(11,"mat-table",10,41),e.ynx(13,12),e.YNc(14,w$,3,3,"mat-header-cell",13),e.YNc(15,z$,2,1,"mat-cell",14),e.BQk(),e.ynx(16,42),e.YNc(17,M$,3,3,"mat-header-cell",13),e.YNc(18,q$,2,1,"mat-cell",14),e.BQk(),e.ynx(19,43),e.YNc(20,P$,3,3,"mat-header-cell",13),e.YNc(21,k$,2,1,"mat-cell",14),e.BQk(),e.ynx(22,44),e.YNc(23,S$,3,3,"mat-header-cell",13),e.YNc(24,y$,2,1,"mat-cell",14),e.BQk(),e.ynx(25,35),e.YNc(26,J$,3,3,"mat-header-cell",13),e.YNc(27,E$,2,1,"mat-cell",14),e.BQk(),e.YNc(28,N$,1,0,"mat-header-row",17),e.YNc(29,O$,1,1,"mat-row",18),e.qZA()(),e.YNc(30,L$,3,3,"h4",3),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,12,"sbm.tabelle.listini.variazioniComponenteTipoCamera")),e.xp6(4),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(5,14,"globals.tipoCamera")),e.xp6(4),e.Q6J("nullable",!0)("placeholder",e.lcZ(9,16,"bo.variazionePrezzoXArticoloXComponenteXTipoCamera.proprieta.adulti"))("ngModel",t.variazioniComponenteTipoCameraFilter.adulti),e.xp6(2),e.Q6J("hidden",null!=t.dataSourceVariazioniComponenteTipoCamera&&null!=t.dataSourceVariazioniComponenteTipoCamera.filteredData&&0==t.dataSourceVariazioniComponenteTipoCamera.filteredData.length),e.xp6(1),e.Q6J("dataSource",t.dataSourceVariazioniComponenteTipoCamera),e.xp6(17),e.Q6J("matHeaderRowDef",t.displayedColumnsVariazioniComponenteTipoCamera)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsVariazioniComponenteTipoCamera),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniComponenteTipoCamera&&null!=t.dataSourceVariazioniComponenteTipoCamera.filteredData&&0==t.dataSourceVariazioniComponenteTipoCamera.filteredData.length)}}function I$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPersona.proprieta.tipoCamera")," "))}function Q$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCamera?t.tipoCamera.nome:"")}}function U$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPersona.proprieta.componente")," "))}function Y$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.componente?t.componente.nome:"")}}function R$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPersona.proprieta.valore")," "))}function F$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",t.valore+" "+(t.tipoValore==n.enumTipoValore.Euro?"\u20ac":"%")," ")}}function H$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPersona.proprieta.paxInizio")," "))}function K$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.paxInizio," ")}}function G$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPersona.proprieta.paxFine")," "))}function $$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.paxFine," ")}}function B$(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPersona.proprieta.minAdulti")," "))}function V$(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.minAdulti," ")}}function X$(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function j$(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function W$(i,o){1&i&&(e.TgZ(0,"h4",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.listini.nessunaVariazione")))}function eB(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",6),e.ALo(1,"translate"),e.TgZ(2,"div",7)(3,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dataSourceVariazioniPersona.filter=a.oid>0?a.oid.toString():"")}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",9)(6,"mat-table",10,45),e.ynx(8,12),e.YNc(9,I$,3,3,"mat-header-cell",13),e.YNc(10,Q$,2,1,"mat-cell",14),e.BQk(),e.ynx(11,44),e.YNc(12,U$,3,3,"mat-header-cell",13),e.YNc(13,Y$,2,1,"mat-cell",14),e.BQk(),e.ynx(14,35),e.YNc(15,R$,3,3,"mat-header-cell",13),e.YNc(16,F$,2,1,"mat-cell",14),e.BQk(),e.ynx(17,46),e.YNc(18,H$,3,3,"mat-header-cell",13),e.YNc(19,K$,2,1,"mat-cell",14),e.BQk(),e.ynx(20,47),e.YNc(21,G$,3,3,"mat-header-cell",13),e.YNc(22,$$,2,1,"mat-cell",14),e.BQk(),e.ynx(23,48),e.YNc(24,B$,3,3,"mat-header-cell",13),e.YNc(25,V$,2,1,"mat-cell",14),e.BQk(),e.YNc(26,X$,1,0,"mat-header-row",17),e.YNc(27,j$,1,1,"mat-row",18),e.qZA()(),e.YNc(28,W$,3,3,"h4",3),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,9,"sbm.tabelle.listini.variazioniPersona")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(4,11,"globals.tipoCamera")),e.xp6(2),e.Q6J("hidden",null!=t.dataSourceVariazioniPersona&&null!=t.dataSourceVariazioniPersona.filteredData&&0==t.dataSourceVariazioniPersona.filteredData.length),e.xp6(1),e.Q6J("dataSource",t.dataSourceVariazioniPersona),e.xp6(20),e.Q6J("matHeaderRowDef",t.displayedColumnsVariazioniPersona)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsVariazioniPersona),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniPersona&&null!=t.dataSourceVariazioniPersona.filteredData&&0==t.dataSourceVariazioniPersona.filteredData.length)}}function tB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPianoFamiglia.proprieta.tipoCamera")," "))}function iB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCamera?t.tipoCamera.nome:"")}}function oB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPianoFamiglia.proprieta.componenteXVariazione")," "))}function nB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.componenteXVariazione?t.componenteXVariazione.nome:"")}}function aB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPianoFamiglia.proprieta.numeroAdulti")," "))}function lB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.numeroAdulti)}}function rB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPianoFamiglia.proprieta.numeroBambini")," "))}function cB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.numeroBambini)}}function sB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPianoFamiglia.proprieta.numeroEnfant")," "))}function pB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.numeroEnfant)}}function dB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXPianoFamiglia.proprieta.quotePaganti")," "))}function mB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.quotePaganti)}}function _B(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function uB(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function gB(i,o){1&i&&(e.TgZ(0,"h4",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.listini.nessunaVariazione")))}function hB(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",6),e.ALo(1,"translate"),e.TgZ(2,"div",7)(3,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dataSourceVariazioniPianoFamiglia.filter=a.oid>0?a.oid.toString():"")}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",9)(6,"mat-table",10,49),e.ynx(8,12),e.YNc(9,tB,3,3,"mat-header-cell",13),e.YNc(10,iB,2,1,"mat-cell",14),e.BQk(),e.ynx(11,29),e.YNc(12,oB,3,3,"mat-header-cell",13),e.YNc(13,nB,2,1,"mat-cell",14),e.BQk(),e.ynx(14,50),e.YNc(15,aB,3,3,"mat-header-cell",13),e.YNc(16,lB,2,1,"mat-cell",14),e.BQk(),e.ynx(17,51),e.YNc(18,rB,3,3,"mat-header-cell",13),e.YNc(19,cB,2,1,"mat-cell",14),e.BQk(),e.ynx(20,52),e.YNc(21,sB,3,3,"mat-header-cell",13),e.YNc(22,pB,2,1,"mat-cell",14),e.BQk(),e.ynx(23,53),e.YNc(24,dB,3,3,"mat-header-cell",13),e.YNc(25,mB,2,1,"mat-cell",14),e.BQk(),e.YNc(26,_B,1,0,"mat-header-row",17),e.YNc(27,uB,1,1,"mat-row",18),e.qZA()(),e.YNc(28,gB,3,3,"h4",3),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,9,"sbm.tabelle.listini.variazioniPianoFamiglia")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(4,11,"globals.tipoCamera")),e.xp6(2),e.Q6J("hidden",null!=t.dataSourceVariazioniPianoFamiglia&&null!=t.dataSourceVariazioniPianoFamiglia.filteredData&&0==t.dataSourceVariazioniPianoFamiglia.filteredData.length),e.xp6(1),e.Q6J("dataSource",t.dataSourceVariazioniPianoFamiglia),e.xp6(20),e.Q6J("matHeaderRowDef",t.displayedColumnsVariazioniPianoFamiglia)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsVariazioniPianoFamiglia),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniPianoFamiglia&&null!=t.dataSourceVariazioniPianoFamiglia.filteredData&&0==t.dataSourceVariazioniPianoFamiglia.filteredData.length)}}function fB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXGiorniAnticipo.proprieta.tipoCamera")," "))}function CB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCamera?t.tipoCamera.nome:"")}}function bB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXGiorniAnticipo.proprieta.da")," "))}function vB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.da)}}function TB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXGiorniAnticipo.proprieta.a")," "))}function xB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.a)}}function ZB(i,o){1&i&&(e.TgZ(0,"mat-header-cell",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.variazionePrezzoXArticoloXGiorniAnticipo.proprieta.valoreStringa")," "))}function AB(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.valoreStringa)}}function wB(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function zB(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function MB(i,o){1&i&&(e.TgZ(0,"h4",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.listini.nessunaVariazione")))}function qB(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",6),e.ALo(1,"translate"),e.TgZ(2,"div",7)(3,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.dataSourceVariazioniGiorniAnticipo.filter=a.oid>0?a.oid.toString():"")}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",9)(6,"mat-table",10,54),e.ynx(8,12),e.YNc(9,fB,3,3,"mat-header-cell",13),e.YNc(10,CB,2,1,"mat-cell",14),e.BQk(),e.ynx(11,55),e.YNc(12,bB,3,3,"mat-header-cell",13),e.YNc(13,vB,2,1,"mat-cell",14),e.BQk(),e.ynx(14,56),e.YNc(15,TB,3,3,"mat-header-cell",13),e.YNc(16,xB,2,1,"mat-cell",14),e.BQk(),e.ynx(17,16),e.YNc(18,ZB,3,3,"mat-header-cell",13),e.YNc(19,AB,2,1,"mat-cell",14),e.BQk(),e.YNc(20,wB,1,0,"mat-header-row",17),e.YNc(21,zB,1,1,"mat-row",18),e.qZA()(),e.YNc(22,MB,3,3,"h4",3),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("label",e.lcZ(1,9,"sbm.tabelle.listini.variazioniGiorniAnticipo")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(4,11,"globals.tipoCamera")),e.xp6(2),e.Q6J("hidden",null!=t.dataSourceVariazioniGiorniAnticipo&&null!=t.dataSourceVariazioniGiorniAnticipo.filteredData&&0==t.dataSourceVariazioniGiorniAnticipo.filteredData.length),e.xp6(1),e.Q6J("dataSource",t.dataSourceVariazioniGiorniAnticipo),e.xp6(14),e.Q6J("matHeaderRowDef",t.displayedColumnsVariazioniGiorniAnticipo)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsVariazioniGiorniAnticipo),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniGiorniAnticipo&&null!=t.dataSourceVariazioniGiorniAnticipo.filteredData&&0==t.dataSourceVariazioniGiorniAnticipo.filteredData.length)}}function PB(i,o){if(1&i&&(e.TgZ(0,"mat-tab-group",4),e.YNc(1,NG,20,13,"mat-tab",5),e.YNc(2,HG,20,13,"mat-tab",5),e.YNc(3,o$,23,13,"mat-tab",5),e.YNc(4,g$,23,13,"mat-tab",5),e.YNc(5,A$,16,7,"mat-tab",5),e.YNc(6,D$,31,18,"mat-tab",5),e.YNc(7,eB,29,13,"mat-tab",5),e.YNc(8,hB,29,13,"mat-tab",5),e.YNc(9,qB,23,13,"mat-tab",5),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniTipoCamera&&null!=t.dataSourceVariazioniTipoCamera.data&&t.dataSourceVariazioniTipoCamera.data.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniTrattamento&&null!=t.dataSourceVariazioniTrattamento.data&&t.dataSourceVariazioniTrattamento.data.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniDurata&&null!=t.dataSourceVariazioniDurata.data&&t.dataSourceVariazioniDurata.data.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniComponente&&null!=t.dataSourceVariazioniComponente.data&&t.dataSourceVariazioniComponente.data.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniTipoPasto&&null!=t.dataSourceVariazioniTipoPasto.data&&t.dataSourceVariazioniTipoPasto.data.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniComponenteTipoCamera&&null!=t.dataSourceVariazioniComponenteTipoCamera.data&&t.dataSourceVariazioniComponenteTipoCamera.data.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniPersona&&null!=t.dataSourceVariazioniPersona.data&&t.dataSourceVariazioniPersona.data.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniPianoFamiglia&&null!=t.dataSourceVariazioniPianoFamiglia.data&&t.dataSourceVariazioniPianoFamiglia.data.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourceVariazioniGiorniAnticipo&&null!=t.dataSourceVariazioniGiorniAnticipo.data&&t.dataSourceVariazioniGiorniAnticipo.data.length>0)}}function kB(i,o){1&i&&(e.TgZ(0,"h4",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.listini.nessunaVariazione")))}class Pi extends f.H{set prezzo(o){null!=o&&(this.dataSourceVariazioniTipoCamera=new s.r4(o.variazioniTipoCamera),this.dataSourceVariazioniTipoCamera.filterPredicate=this.filterPredicate,this.dataSourceVariazioniTipoCamera.sortingDataAccessor=this.utility.getPropertyValue,o.variazioniTipoCamera.length>0&&(this.nessunVariazionePresente=!1),this.dataSourceVariazioniTrattamento=new s.r4(o.variazioniTrattamento),this.dataSourceVariazioniTrattamento.filterPredicate=this.filterPredicate,this.dataSourceVariazioniTrattamento.sortingDataAccessor=this.utility.getPropertyValue,o.variazioniTrattamento.length>0&&(this.nessunVariazionePresente=!1),this.dataSourceVariazioniDurata=new s.r4(o.variazioniDurata),this.dataSourceVariazioniDurata.filterPredicate=this.filterPredicate,this.dataSourceVariazioniDurata.sortingDataAccessor=this.utility.getPropertyValue,o.variazioniDurata.length>0&&(this.nessunVariazionePresente=!1),this.dataSourceVariazioniComponente=new s.r4(o.variazioniComponente),this.dataSourceVariazioniComponente.filterPredicate=this.filterPredicate,this.dataSourceVariazioniComponente.sortingDataAccessor=this.utility.getPropertyValue,o.variazioniComponente.length>0&&(this.nessunVariazionePresente=!1),this.dataSourceVariazioniTipoPasto=new s.r4(o.variazioniTipoPasto),o.variazioniTipoPasto.length>0&&(this.nessunVariazionePresente=!1),this.dataSourceVariazioniComponenteTipoCamera=new s.r4(o.variazioniComponenteTipoCamera),this.dataSourceVariazioniComponenteTipoCamera.filterPredicate=this.filterPredicateVariazioniComponenteTipoCamera,this.dataSourceVariazioniComponenteTipoCamera.sortingDataAccessor=this.utility.getPropertyValue,o.variazioniComponenteTipoCamera.length>0&&(this.nessunVariazionePresente=!1),this.dataSourceVariazioniPersona=new s.r4(o.variazioniPersona),this.dataSourceVariazioniPersona.filterPredicate=this.filterPredicate,this.dataSourceVariazioniPersona.sortingDataAccessor=this.utility.getPropertyValue,o.variazioniPersona.length>0&&(this.nessunVariazionePresente=!1),this.dataSourceVariazioniPianoFamiglia=new s.r4(o.variazioniPianoFamiglia),this.dataSourceVariazioniPianoFamiglia.filterPredicate=this.filterPredicate,this.dataSourceVariazioniPianoFamiglia.sortingDataAccessor=this.utility.getPropertyValue,o.variazioniPianoFamiglia.length>0&&(this.nessunVariazionePresente=!1),this.dataSourceVariazioniGiorniAnticipo=new s.r4(o.variazioniGiorniAnticipo),this.dataSourceVariazioniGiorniAnticipo.filterPredicate=this.filterPredicate,this.dataSourceVariazioniGiorniAnticipo.sortingDataAccessor=this.utility.getPropertyValue,o.variazioniGiorniAnticipo.length>0&&(this.nessunVariazionePresente=!1))}constructor(o,t){super(),this.apiService=o,this.utility=t,this.displayedColumnsVariazioniTipoCamera=["tipoCamera.nome","giornoSettimana","valoreStringa"],this.displayedColumnsVariazioniTrattamento=["tipoCamera.nome","trattamento.nome","valoreStringa"],this.displayedColumnsVariazioniDurata=["tipoCamera.nome","giornoInizio","giornoFine","valoreStringa"],this.displayedColumnsVariazioniComponente=["tipoCamera.nome","trattamento.nome","componenteXVariazione.nome","valoreStringa"],this.displayedColumnsVariazioniTipoPasto=["tipoComponentePrenotazione","tipoPasto","valore"],this.displayedColumnsVariazioniComponenteTipoCamera=["tipoCamera.nome","adulti","adultiPaganti","componente.nome","valore"],this.displayedColumnsVariazioniPersona=["tipoCamera.nome","componente.nome","valore","paxInizio","paxFine","minAdulti"],this.displayedColumnsVariazioniPianoFamiglia=["tipoCamera.nome","componenteXVariazione.nome","numeroAdulti","numeroBambini","numeroEnfant","quotePaganti"],this.displayedColumnsVariazioniGiorniAnticipo=["tipoCamera.nome","da","a","valoreStringa"],this.variazioniComponenteTipoCameraFilter=new d.v7w,this.enumGiornoSettimana=c.cw,this.enumTipoPasto=c.C2,this.enumTipoComponentePrenotazione=c.dE,this.enumTipoValore=c.jy,this.nessunVariazionePresente=!0}ngAfterViewInit(){this.dataSourceVariazioniTipoCamera.sort=this.sortVariazioniTipoCamera,this.dataSourceVariazioniTrattamento.sort=this.sortVariazioniTrattamento,this.dataSourceVariazioniDurata.sort=this.sortVariazioniDurata,this.dataSourceVariazioniComponente.sort=this.sortVariazioniComponente,this.dataSourceVariazioniTipoPasto.sort=this.sortVariazioniTipoPasto,this.dataSourceVariazioniComponenteTipoCamera.sort=this.sortVariazioniComponenteTipoCamera,this.dataSourceVariazioniPersona.sort=this.sortVariazioniPersona,this.dataSourceVariazioniPianoFamiglia.sort=this.sortVariazioniPianoFamiglia,this.dataSourceVariazioniGiorniAnticipo.sort=this.sortVariazioniGiorniAnticipo}filterPredicate(o,t){return!t||null!=o.tipoCamera&&o.tipoCamera.oid==+t}filterPredicateVariazioniComponenteTipoCamera(o,t){if(t){let n=JSON.parse(t);return(null==n.oidTipoCamera||null!=o.tipoCamera&&o.tipoCamera.oid==n.oidTipoCamera)&&(null==n.adulti||o.adulti==n.adulti)}return!0}updateVariazioniComponenteTipoCameraFilter(){this.dataSourceVariazioniComponenteTipoCamera.filter=JSON.stringify(this.variazioniComponenteTipoCameraFilter)}}function SB(i,o){1&i&&(e.TgZ(0,"h5",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.promozioni.nessunaTariffaCollegata")))}function yB(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.portaleXAlbergo.nome+" - "+t.descrizione)}}function JB(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,yB,2,1,"div",5),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.configurazione.promozioni.tariffeCollegate")),e.xp6(2),e.Q6J("ngForOf",t.tariffe)}}Pi.\u0275fac=function(o){return new(o||Pi)(e.Y36(A.s),e.Y36(C.t))},Pi.\u0275cmp=e.Xpm({type:Pi,selectors:[["app-dettaglio-variazioni-modal"]],viewQuery:function(o,t){if(1&o&&(e.Gf(fG,5),e.Gf(CG,5),e.Gf(bG,5),e.Gf(vG,5),e.Gf(TG,5),e.Gf(xG,5),e.Gf(ZG,5),e.Gf(AG,5),e.Gf(wG,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.sortVariazioniTipoCamera=n.first),e.iGM(n=e.CRH())&&(t.sortVariazioniTrattamento=n.first),e.iGM(n=e.CRH())&&(t.sortVariazioniDurata=n.first),e.iGM(n=e.CRH())&&(t.sortVariazioniComponente=n.first),e.iGM(n=e.CRH())&&(t.sortVariazioniTipoPasto=n.first),e.iGM(n=e.CRH())&&(t.sortVariazioniComponenteTipoCamera=n.first),e.iGM(n=e.CRH())&&(t.sortVariazioniPersona=n.first),e.iGM(n=e.CRH())&&(t.sortVariazioniPianoFamiglia=n.first),e.iGM(n=e.CRH())&&(t.sortVariazioniGiorniAnticipo=n.first)}},inputs:{prezzo:"prezzo"},features:[e.qOj],decls:5,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","dialog-tab-group",4,"ngIf"],["class","border rounded p-3",4,"ngIf"],[1,"dialog-tab-group"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"mat-table-container-border-rounded",3,"hidden"],["matSort","","matSortActive","tipoCamera","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource"],["sortVariazioniTipoCamera","matSort"],["matColumnDef","tipoCamera.nome"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","giornoSettimana"],["matColumnDef","valoreStringa"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],[1,"border","rounded","p-3"],["sortVariazioniTrattamento","matSort"],["matColumnDef","trattamento.nome"],["sortVariazioniDurata","matSort"],["matColumnDef","giornoInizio"],["matColumnDef","giornoFine"],["sortVariazioniComponente","matSort"],["matColumnDef","componenteXVariazione.nome"],[1,"mat-table-container-border-rounded","mt-3"],["matSort","","matSortActive","tipoComponentePrenotazione","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource"],["sortVariazioniTipoPasto","matSort"],["matColumnDef","tipoComponentePrenotazione"],["matColumnDef","tipoPasto"],["matColumnDef","valore"],[1,"row","no-gutters","mt-3"],[1,"col-6","pr-3"],[1,"col-6","pl-3"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"nullable","placeholder","ngModel","ngModelChange","input"],["sortVariazioniComponenteTipoCamera","matSort"],["matColumnDef","adulti"],["matColumnDef","adultiPaganti"],["matColumnDef","componente.nome"],["sortVariazioniPersona","matSort"],["matColumnDef","paxInizio"],["matColumnDef","paxFine"],["matColumnDef","minAdulti"],["sortVariazioniPianoFamiglia","matSort"],["matColumnDef","numeroAdulti"],["matColumnDef","numeroBambini"],["matColumnDef","numeroEnfant"],["matColumnDef","quotePaganti"],["sortVariazioniGiorniAnticipo","matSort"],["matColumnDef","da"],["matColumnDef","a"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,PB,10,9,"mat-tab-group",2),e.YNc(4,kB,3,3,"h4",3)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",!t.nessunVariazionePresente),e.xp6(1),e.Q6J("ngIf",t.nessunVariazionePresente))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,ee.SK,ee.R7,F.aO,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,_.Fj,_.wV,_.JJ,_.On,ne.d,z.X$]});class ka extends f.H{constructor(o){super(),this.apiService=o}ngOnInit(){this.setIsLoading(!0),this.apiService.getTariffeCollegatePromozione(this.oidPromozione).subscribe(o=>{this.tariffe=o.data,this.setIsLoading(!1)})}}ka.\u0275fac=function(o){return new(o||ka)(e.Y36(A.s))},ka.\u0275cmp=e.Xpm({type:ka,selectors:[["app-tariffe-collegate-promozione-modal"]],inputs:{oidPromozione:"oidPromozione"},features:[e.qOj],decls:5,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","mb-0",4,"ngIf"],[4,"ngIf"],[1,"mb-0"],[4,"ngFor","ngForOf"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,SB,3,3,"h5",2),e.YNc(4,JB,5,4,"ng-container",3)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null==t.tariffe||0==t.tariffe.length),e.xp6(1),e.Q6J("ngIf",null!=t.tariffe&&t.tariffe.length>0))},dependencies:[m.sg,m.O5,h.eB,F.aO,z.X$]});const EB=["panel1"],NB=["panel2"],OB=["panel3"],LB=["panel4"],DB=["panel5"],IB=["panel6"],QB=["panel7"],UB=["panel8"];function YB(i,o){if(1&i&&(e.TgZ(0,"mat-option",64),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function RB(i,o){if(1&i&&(e.TgZ(0,"mat-option",64),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumGiornoSettimana,t,"giornoSettimana"))," ")}}function FB(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",64),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(3,2,t.value)," ")}}function HB(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",64),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(3,2,t.value)," ")}}function KB(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",2)(2,"mat-checkbox",24),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.promozione.isVisualizzaPrezziNetti=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",5),e._uU(6," Visualizza il prezzo finale scontato senza riportare lo sconto (solo per promozioni di tipo sconto) "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.modelEdit.promozione.isVisualizzaPrezziNetti),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.promozione.proprieta.isVisualizzaPrezziNetti")," ")}}function GB(i,o){if(1&i&&(e.TgZ(0,"mat-option",64),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumGiornoSettimana,t,"giornoSettimana"))," ")}}function $B(i,o){1&i&&(e.TgZ(0,"div",70)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.promozioni.nessunDettaglio")))}function BB(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPromozione.proprieta.modalitaCalcoloPrezzo")))}function VB(i,o){if(1&i&&(e.TgZ(0,"mat-option",64),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(4);e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumModalitaCalcoloPrezzo,t,"modalitaCalcoloPrezzo"))," ")}}function XB(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",3)(2,"mat-select",86),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.modalitaCalcoloPrezzo=a)}),e.YNc(3,VB,3,4,"mat-option",8),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(2),e.Q6J("value",t.modalitaCalcoloPrezzo),e.xp6(1),e.Q6J("ngForOf",n.modalitaCalcoloPrezzoValues)}}function jB(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPromozione.proprieta.data")))}function WB(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",87)(2,"input",88),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.data=a)}),e.qZA(),e._UZ(3,"mat-datepicker-toggle",17),e.TgZ(4,"mat-datepicker-toggle",89),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.KtG(l.data=null)}),e.TgZ(5,"mat-icon",90),e._uU(6,"clear"),e.qZA()(),e._UZ(7,"mat-datepicker",18,91),e.qZA()()}if(2&i){const t=o.$implicit,n=e.MAs(8),a=e.oxw(3);e.xp6(2),e.Q6J("matDatepicker",n)("ngModel",t.data),e.xp6(1),e.Q6J("for",n),e.xp6(4),e.Q6J("startAt",a.utility.isNullDate(t.data)?a.today:null)}}function eV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPromozione.proprieta.articolo")))}function tV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"app-view-select",92),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.articolo=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("title",e.lcZ(2,3,"bo.dettaglioPromozione.proprieta.articolo"))("dataLoader",n.apiService.getArticoliViewSelect(n.getArticoliRQ))("value",t.articolo)}}function iV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPromozione.proprieta.riduzione")))}function oV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"app-view-select",92),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.riduzione=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("title",e.lcZ(2,3,"bo.dettaglioPromozione.proprieta.riduzione"))("dataLoader",n.apiService.getRiduzioniViewSelect())("value",t.riduzione)}}function nV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPromozione.proprieta.listino")))}function aV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"app-view-select",92),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.listino=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("title",e.lcZ(2,3,"bo.dettaglioPromozione.proprieta.listino"))("dataLoader",n.apiService.getListiniViewSelect())("value",t.listino)}}function lV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPromozione.proprieta.tipoDisponibilitaArticolo")))}function rV(i,o){if(1&i&&(e.TgZ(0,"mat-option",64),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function cV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",3)(2,"mat-select",93),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.tipoDisponibilitaArticolo=a)}),e.YNc(3,rV,3,4,"mat-option",8),e.ALo(4,"selectEnum"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(2),e.Q6J("panelClass","unlimited-width-select")("value",t.tipoDisponibilitaArticolo),e.xp6(1),e.Q6J("ngForOf",e.xi3(4,3,n.enumTipoDisponibilitaArticolo,"tipoDisponibilitaArticolo"))}}function sV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPromozione.proprieta.quantita")))}function pV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",87)(2,"input",94),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.quantita=a)}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.quantita)}}function dV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPromozione.proprieta.importo")))}function mV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",87)(2,"input",94),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.importo=a)}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.importo)}}function _V(i,o){1&i&&(e.TgZ(0,"mat-header-cell",95),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.dettaglioPromozione.proprieta.isPerPersona")))}function uV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",95)(1,"mat-checkbox",24),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.isPerPersona=a)}),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngModel",t.isPerPersona)}}function gV(i,o){1&i&&e._UZ(0,"mat-header-cell")}function hV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",96)(1,"button",97),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(3);return e.KtG(r.deleteDettaglio(l))}),e.TgZ(2,"i",98),e._uU(3,"delete"),e.qZA()()()}}function fV(i,o){1&i&&e._UZ(0,"mat-header-row",99)}function CV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",100),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function bV(i,o){if(1&i&&(e.TgZ(0,"div",71)(1,"mat-table",72),e.ynx(2,73),e.YNc(3,BB,3,3,"mat-header-cell",41),e.YNc(4,XB,4,2,"mat-cell",42),e.BQk(),e.ynx(5,74),e.YNc(6,jB,3,3,"mat-header-cell",41),e.YNc(7,WB,9,4,"mat-cell",42),e.BQk(),e.ynx(8,75),e.YNc(9,eV,3,3,"mat-header-cell",41),e.YNc(10,tV,3,5,"mat-cell",42),e.BQk(),e.ynx(11,76),e.YNc(12,iV,3,3,"mat-header-cell",41),e.YNc(13,oV,3,5,"mat-cell",42),e.BQk(),e.ynx(14,77),e.YNc(15,nV,3,3,"mat-header-cell",41),e.YNc(16,aV,3,5,"mat-cell",42),e.BQk(),e.ynx(17,78),e.YNc(18,lV,3,3,"mat-header-cell",41),e.YNc(19,cV,5,6,"mat-cell",42),e.BQk(),e.ynx(20,79),e.YNc(21,sV,3,3,"mat-header-cell",41),e.YNc(22,pV,3,1,"mat-cell",42),e.BQk(),e.ynx(23,80),e.YNc(24,dV,3,3,"mat-header-cell",41),e.YNc(25,mV,3,1,"mat-cell",42),e.BQk(),e.ynx(26,81),e.YNc(27,_V,3,3,"mat-header-cell",82),e.YNc(28,uV,2,1,"mat-cell",83),e.BQk(),e.ynx(29,84),e.YNc(30,gV,1,0,"mat-header-cell",41),e.YNc(31,hV,4,0,"mat-cell",85),e.BQk(),e.YNc(32,fV,1,0,"mat-header-row",43),e.YNc(33,CV,1,1,"mat-row",44),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("dataSource",t.modelEdit.dettagli),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumnsDettagli)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsDettagli)}}function vV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",65)(1,"button",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addDettaglio())}),e.TgZ(2,"i",67),e._uU(3,"add"),e.qZA()(),e.YNc(4,$B,4,3,"div",68),e.YNc(5,bV,34,4,"div",69),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",0==t.modelEdit.dettagli.length),e.xp6(1),e.Q6J("ngIf",t.modelEdit.dettagli.length>0)}}function TV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",101)(1,"mat-checkbox",102),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return a&&l.masterToggleModalitaPagamento(),e.KtG(l.initAlert())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionModalitaPagamento.hasValue()&&t.isAllSelectedModalitaPagamento())("indeterminate",t.selectionModalitaPagamento.hasValue()&&!t.isAllSelectedModalitaPagamento())}}function xV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",103)(1,"mat-checkbox",104),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a&&p.selectionModalitaPagamento.toggle(r.oid),e.KtG(p.initAlert())}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionModalitaPagamento.isSelected(t.oid))}}function ZV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.modalitaPagamento.proprieta.nome")))}function AV(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function wV(i,o){1&i&&e._UZ(0,"mat-header-row",99)}function zV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",100),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function MV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",101)(1,"mat-checkbox",102),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleTipiCamera():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionTipiCamera.hasValue()&&t.isAllSelectedTipiCamera())("indeterminate",t.selectionTipiCamera.hasValue()&&!t.isAllSelectedTipiCamera())}}function qV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",103)(1,"mat-checkbox",104),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionTipiCamera.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionTipiCamera.isSelected(t.oid))}}function PV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCamera.proprieta.nome")))}function kV(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function SV(i,o){1&i&&e._UZ(0,"mat-header-row",99)}function yV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",100),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function JV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",101)(1,"mat-checkbox",102),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleTrattamenti():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionTrattamenti.hasValue()&&t.isAllSelectedTrattamenti())("indeterminate",t.selectionTrattamenti.hasValue()&&!t.isAllSelectedTrattamenti())}}function EV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",103)(1,"mat-checkbox",104),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionTrattamenti.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionTrattamenti.isSelected(t.oid))}}function NV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.trattamento.proprieta.nome")))}function OV(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function LV(i,o){1&i&&e._UZ(0,"mat-header-row",99)}function DV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",100),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function IV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",101)(1,"mat-checkbox",102),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleComponentiXVariazione():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionComponentiXVariazione.hasValue()&&t.isAllSelectedComponentiXVariazione())("indeterminate",t.selectionComponentiXVariazione.hasValue()&&!t.isAllSelectedComponentiXVariazione())}}function QV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",103)(1,"mat-checkbox",104),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionComponentiXVariazione.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionComponentiXVariazione.isSelected(t.oid))}}function UV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.componenteXVariazione.proprieta.nome")))}function YV(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function RV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.componenteXVariazione.proprieta.descrizioneRiduzioni")))}function FV(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizioneRiduzioni)}}function HV(i,o){1&i&&e._UZ(0,"mat-header-row",99)}function KV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",100),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function GV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",101)(1,"mat-checkbox",102),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleLingue():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionLingue.hasValue()&&t.isAllSelectedLingue())("indeterminate",t.selectionLingue.hasValue()&&!t.isAllSelectedLingue())}}function $V(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",103)(1,"mat-checkbox",104),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionLingue.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionLingue.isSelected(t.oid))}}function BV(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.lingua.proprieta.nome")))}function VV(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function XV(i,o){1&i&&e._UZ(0,"mat-header-row",99)}function jV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",100),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function WV(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",101)(1,"mat-checkbox",102),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleSupplementi():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionSupplementi.hasValue()&&t.isAllSelectedSupplementi())("indeterminate",t.selectionSupplementi.hasValue()&&!t.isAllSelectedSupplementi())}}function eX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",103)(1,"mat-checkbox",104),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionSupplementi.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionSupplementi.isSelected(t.oid))}}function tX(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.supplemento.proprieta.nome")))}function iX(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function oX(i,o){1&i&&e._UZ(0,"mat-header-row",99)}function nX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",100),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function aX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",106)(1,"mat-form-field",107)(2,"input",108),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.promozioniXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"app-editor",109),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.promozioniXLingua[l].descrizione=a)}),e.qZA()(),e.TgZ(8,"div",110),e._uU(9),e.ALo(10,"translate"),e.TgZ(11,"app-editor",109),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.promozioniXLingua[l].descrizioneDettagliata=a)}),e.qZA()()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,9,"bo.promozioneXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.promozioniXLingua[a].nome),e.xp6(3),e.hij(" ",e.lcZ(6,11,"bo.promozioneXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.promozioniXLingua[a].descrizione),e.xp6(2),e.hij(" ",e.lcZ(10,13,"bo.promozioneXLingua.proprieta.descrizioneDettagliata")," "),e.xp6(2),e.Q6J("id","descrizioneDettagliata"+a)("text",l.modelEdit.promozioniXLingua[a].descrizioneDettagliata)}}function lX(i,o){if(1&i&&(e.ynx(0),e.YNc(1,aX,12,15,"mat-tab",105),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function rX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"div",111)(2,"app-image",112),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage(a.enumTipoImmagine.Immagine))})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage(a.enumTipoImmagine.Immagine))}),e.qZA()(),e.TgZ(3,"div",113)(4,"app-image",112),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage(a.enumTipoImmagine.ImmagineEvidenza))})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage(a.enumTipoImmagine.ImmagineEvidenza))}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.modelEdit.promozione.urlImmagine),e.xp6(2),e.Q6J("title","sbm.configurazione.promozioni.immagineEvidenza")("url",t.modelEdit.promozione.urlImmagineEvidenza)}}function cX(i,o){1&i&&(e.TgZ(0,"div",114)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.promozioni.salvarePromozione")))}function sX(i,o){1&i&&(e.TgZ(0,"mat-header-cell",126),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.listinoXPeriodo.proprieta.dal"),""))}function pX(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dal,"dd/MM/yyyy"))}}function dX(i,o){1&i&&(e.TgZ(0,"mat-header-cell",126),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.listinoXPeriodo.proprieta.al"),""))}function mX(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.al,"dd/MM/yyyy"))}}function _X(i,o){1&i&&(e.TgZ(0,"mat-header-cell",126),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.prezzo"),""))}function uX(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.hij("",t.prezzo+(t.tipoValore==n.enumTipoValore.Euro?" \u20ac":" %")," ")}}function gX(i,o){1&i&&(e.TgZ(0,"mat-header-cell",126),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.fascia"),""))}function hX(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.fascia)}}function fX(i,o){1&i&&(e.TgZ(0,"mat-header-cell",126),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.politicaCancellazione"),""))}function CX(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.politicaCancellazione?t.politicaCancellazione.nome:"")}}function bX(i,o){1&i&&(e.TgZ(0,"mat-header-cell",126),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.durataMinimaSoggiorno"),""))}function vX(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMinimaSoggiorno)}}function TX(i,o){1&i&&(e.TgZ(0,"mat-header-cell",126),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.durataMassimaSoggiorno"),""))}function xX(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMassimaSoggiorno)}}function ZX(i,o){1&i&&e._UZ(0,"mat-header-cell")}function AX(i,o){1&i&&(e.TgZ(0,"mat-cell",96)(1,"button",127)(2,"i",128),e._uU(3,"more_vert"),e.qZA()()())}function wX(i,o){1&i&&e._UZ(0,"mat-header-row",99)}function zX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",129),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oidPrezzoXArticolo))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.utility.checkClick(a)?p.openDetails(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oidPrezzoXArticolo?t.oidPrezzoXArticolo:"")}}function MX(i,o){if(1&i&&(e.TgZ(0,"div",60)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",71)(5,"mat-table",115),e.ynx(6,116),e.YNc(7,sX,3,3,"mat-header-cell",117),e.YNc(8,pX,3,4,"mat-cell",42),e.BQk(),e.ynx(9,118),e.YNc(10,dX,3,3,"mat-header-cell",117),e.YNc(11,mX,3,4,"mat-cell",42),e.BQk(),e.ynx(12,119),e.YNc(13,_X,3,3,"mat-header-cell",117),e.YNc(14,uX,2,1,"mat-cell",42),e.BQk(),e.ynx(15,120),e.YNc(16,gX,3,3,"mat-header-cell",117),e.YNc(17,hX,2,1,"mat-cell",42),e.BQk(),e.ynx(18,121),e.YNc(19,fX,3,3,"mat-header-cell",117),e.YNc(20,CX,2,1,"mat-cell",42),e.BQk(),e.ynx(21,122),e.YNc(22,bX,3,3,"mat-header-cell",117),e.YNc(23,vX,2,1,"mat-cell",42),e.BQk(),e.ynx(24,123),e.YNc(25,TX,3,3,"mat-header-cell",117),e.YNc(26,xX,2,1,"mat-cell",42),e.BQk(),e.ynx(27,124),e.YNc(28,ZX,1,0,"mat-header-cell",41),e.YNc(29,AX,4,0,"mat-cell",85),e.BQk(),e.YNc(30,wX,1,0,"mat-header-row",43),e.YNc(31,zX,1,1,"mat-row",125),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.configurazione.promozioni.periodi")),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function qX(i,o){1&i&&(e.TgZ(0,"div",70)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.promozioni.nessunPeriodo")))}function PX(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.listinoXPeriodo.proprieta.dal"),""))}function kX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",87)(2,"input",132),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.dal=a)})("dateChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onDalChange(l))}),e.qZA(),e._UZ(3,"mat-datepicker-toggle",17)(4,"mat-datepicker",18,133),e.qZA()()}if(2&i){const t=o.$implicit,n=e.MAs(5),a=e.oxw(3);e.xp6(2),e.Q6J("matDatepicker",n)("ngModel",t.dal),e.xp6(1),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",a.utility.isNullDate(t.dal)?a.today:null)}}function SX(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.listinoXPeriodo.proprieta.al"),""))}function yX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",87)(2,"input",132),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.al=a)})("dateChange",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onAlChange(l))}),e.qZA(),e._UZ(3,"mat-datepicker-toggle",17)(4,"mat-datepicker",18,134),e.qZA()()}if(2&i){const t=o.$implicit,n=e.MAs(5),a=e.oxw(3);e.xp6(2),e.Q6J("matDatepicker",n)("ngModel",t.al),e.xp6(1),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",a.utility.isNullDate(t.al)?a.today:null)}}function JX(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.prezzo"),""))}function EX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",87)(2,"input",135),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.prezzo=a)}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.prezzo)}}function NX(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.tipoValore"),""))}function OX(i,o){if(1&i&&(e.TgZ(0,"mat-option",64),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function LX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",3)(2,"mat-select",136),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.tipoValore=a)}),e.YNc(3,OX,3,4,"mat-option",8),e.ALo(4,"selectEnum"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(2),e.Q6J("value",t.tipoValore),e.xp6(1),e.Q6J("ngForOf",e.xi3(4,2,n.enumTipoValore,"tipoValore"))}}function DX(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.durataMinimaSoggiorno"),""))}function IX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",87)(2,"input",94),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.durataMinimaSoggiorno=a)}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.durataMinimaSoggiorno)}}function QX(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.durataMassimaSoggiorno"),""))}function UX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",87)(2,"input",94),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.durataMassimaSoggiorno=a)}),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngModel",t.durataMassimaSoggiorno)}}function YX(i,o){1&i&&e._UZ(0,"mat-header-cell")}function RX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.deletePeriodo(a))}),e.TgZ(1,"i",98),e._uU(2,"delete"),e.qZA()()}}function FX(i,o){if(1&i&&(e.TgZ(0,"mat-cell",96),e.YNc(1,RX,3,0,"button",137),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.oidPrezzoXArticolo>0)}}function HX(i,o){1&i&&e._UZ(0,"mat-header-row",99)}function KX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",100),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oidPrezzoXArticolo))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&t.oidPrezzoXArticolo>0?t.oidPrezzoXArticolo:"")}}function GX(i,o){if(1&i&&(e.TgZ(0,"div",71)(1,"mat-table",130),e.ynx(2,116),e.YNc(3,PX,3,3,"mat-header-cell",41),e.YNc(4,kX,6,4,"mat-cell",42),e.BQk(),e.ynx(5,118),e.YNc(6,SX,3,3,"mat-header-cell",41),e.YNc(7,yX,6,4,"mat-cell",42),e.BQk(),e.ynx(8,119),e.YNc(9,JX,3,3,"mat-header-cell",41),e.YNc(10,EX,3,1,"mat-cell",42),e.BQk(),e.ynx(11,131),e.YNc(12,NX,3,3,"mat-header-cell",41),e.YNc(13,LX,5,5,"mat-cell",42),e.BQk(),e.ynx(14,122),e.YNc(15,DX,3,3,"mat-header-cell",41),e.YNc(16,IX,3,1,"mat-cell",42),e.BQk(),e.ynx(17,123),e.YNc(18,QX,3,3,"mat-header-cell",41),e.YNc(19,UX,3,1,"mat-cell",42),e.BQk(),e.ynx(20,84),e.YNc(21,YX,1,0,"mat-header-cell",41),e.YNc(22,FX,2,1,"mat-cell",85),e.BQk(),e.YNc(23,HX,1,0,"mat-header-row",43),e.YNc(24,KX,1,1,"mat-row",44),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("dataSource",t.modelEdit.periodi),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumnsPromozioniSconto)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsPromozioniSconto)}}function $X(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"h4",60),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addPeriodo())}),e.TgZ(5,"i",67),e._uU(6,"add"),e.qZA()(),e.YNc(7,qX,4,3,"div",68),e.YNc(8,GX,25,4,"div",69),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"sbm.configurazione.promozioni.periodi")),e.xp6(5),e.Q6J("ngIf",0==t.modelEdit.periodi.length),e.xp6(1),e.Q6J("ngIf",t.modelEdit.periodi.length>0)}}function BX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",138),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function VX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",138),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.controllaTariffeCollegate())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.promozioni.controllaTariffeCollegate")))}const rs=function(i){return{"color-pink":i}},Pt=function(i){return{"mb-3 border-bottom":i}},pt=function(){return["nome","select"]},cs=function(){return["nome","descrizioneRiduzioni","select"]};class Sa extends f.H{set _supplementi(o){null!=o&&(this.supplementi=o,this.onIsVisualizzaSoloSupplementiAttiviChange())}set promozione(o){if(null!=o){if(this.selectedIndex=0,this.selectionModalitaPagamento=new me.Ov(!0,[]),this.selectionTipiCamera=new me.Ov(!0,[]),this.selectionTrattamenti=new me.Ov(!0,[]),this.selectionComponentiXVariazione=new me.Ov(!0,[]),this.selectionLingue=new me.Ov(!0,[]),this.selectionSupplementi=new me.Ov(!0,[]),this.panel1.close(),this.panel2.close(),this.panel3.close(),this.panel4.close(),this.panel5.close(),this.panel6.close(),this.panel7.close(),this.panel8.close(),this.modelEdit=new d.cJ6,this.modelEdit.promozione=o,this.modelEdit.promozione.oidModalitaPagamento){let t=this.modelEdit.promozione.oidModalitaPagamento.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.modalitaPagamento.findIndex(a=>a.oid==+n)&&this.selectionModalitaPagamento.toggle(+n)}if(this.modelEdit.promozione.oidTipoCamera){let t=this.modelEdit.promozione.oidTipoCamera.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.tipiCamera.findIndex(a=>a.oid==+n)&&this.selectionTipiCamera.toggle(+n)}if(this.modelEdit.promozione.oidTrattamenti){let t=this.modelEdit.promozione.oidTrattamenti.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.trattamenti.findIndex(a=>a.oid==+n)&&this.selectionTrattamenti.toggle(+n)}if(this.modelEdit.promozione.oidComponentiXVariazione){let t=this.modelEdit.promozione.oidComponentiXVariazione.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.componentiXVariazione.findIndex(a=>a.oid==+n)&&this.selectionComponentiXVariazione.toggle(+n)}if(this.modelEdit.promozione.oidLingueAttive){let t=this.modelEdit.promozione.oidLingueAttive.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.lingue.findIndex(a=>a.oid==+n)&&this.selectionLingue.toggle(+n)}if(this.modelEdit.promozione.oidSupplementiAbilitati){let t=this.modelEdit.promozione.oidSupplementiAbilitati.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.supplementi.findIndex(a=>a.oid==+n)&&this.selectionSupplementi.toggle(+n)}if(this.giorniValiditaSelected=[],this.modelEdit.promozione.giorniValidita){let t=this.modelEdit.promozione.giorniValidita.split(";");for(let n of t)""!=n&&!isNaN(+n)&&+n in c.cw&&this.giorniValiditaSelected.push(+n)}0==this.giorniValiditaSelected.length&&(this.giorniValiditaSelected=this.giorniValidita.slice()),this.giorniArrivoValidiSelected=[],this.modelEdit.promozione.isLunedi&&this.giorniArrivoValidiSelected.push(c.cw.Lunedi),this.modelEdit.promozione.isMartedi&&this.giorniArrivoValidiSelected.push(c.cw.Martedi),this.modelEdit.promozione.isMercoledi&&this.giorniArrivoValidiSelected.push(c.cw.Mercoledi),this.modelEdit.promozione.isGiovedi&&this.giorniArrivoValidiSelected.push(c.cw.Giovedi),this.modelEdit.promozione.isVenerdi&&this.giorniArrivoValidiSelected.push(c.cw.Venerdi),this.modelEdit.promozione.isSabato&&this.giorniArrivoValidiSelected.push(c.cw.Sabato),this.modelEdit.promozione.isDomenica&&this.giorniArrivoValidiSelected.push(c.cw.Domenica),this.initAlert();for(let t of this.lingue){let n=new v.SD_;n.lingua=t,this.modelEdit.promozioniXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getPromozioneDetails(o.oid).subscribe(t=>{this.quantitaPrenotata=t.data.quantitaPrenotata,this.modelEdit.dettagli=t.data.dettagli,this.modelEdit.promozione.isExtranet&&this.modelEdit.promozione.tipoPromozione==c.$l.Sconto?this.modelEdit.periodi=t.data.prezzi:(this.dataSource=new s.r4(t.data.prezzi),setTimeout(()=>{this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=this.utility.getPropertyValue},200)),this.apiService.getPromozioniXLingua(o.oid).subscribe(n=>{if(null!=n.data&&n.data.length>0)for(let a of n.data)if(null!=a.lingua){let l=this.modelEdit.promozioniXLingua.findIndex(r=>r.lingua.oid==a.lingua.oid);l>=0&&(this.modelEdit.promozioniXLingua[l].promozione=a.promozione,this.modelEdit.promozioniXLingua[l].nome=a.nome,this.modelEdit.promozioniXLingua[l].descrizione=a.descrizione,this.modelEdit.promozioniXLingua[l].descrizioneDettagliata=a.descrizioneDettagliata)}this.setIsLoading(!1)})})):this.editing=!1}}constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.localizationService=n,this.utility=a,this.modelEdit=new d.cJ6,this.editing=!1,this.selectedIndex=0,this.enumTipoPromozione=c.$l,this.enumTipoImmagine=c._u,this.selectionModalitaPagamento=new me.Ov(!0,[]),this.selectionTipiCamera=new me.Ov(!0,[]),this.selectionTrattamenti=new me.Ov(!0,[]),this.selectionComponentiXVariazione=new me.Ov(!0,[]),this.selectionLingue=new me.Ov(!0,[]),this.displayedColumns=["dal","al","prezzo","fascia","politicaCancellazione.nome","durataMinimaSoggiorno","durataMassimaSoggiorno","details"],this.displayedColumnsPromozioniSconto=["dal","al","prezzo","tipoValore","durataMinimaSoggiorno","durataMassimaSoggiorno","delete"],this.enumTipoValore=c.jy,this.enumTipoApplicazionePromozione=c.Ww,this.enumValiditaOffertaPeriodo=c.V9,this.giorniValidita=[],this.giorniValiditaSelected=[],this.giorniArrivoValidiSelected=[],this.enumGiornoSettimana=c.cw,this.enumTipoDisponibilitaArticolo=c.Bw,this.enumModalitaCalcoloPrezzo=c.kS,this.modalitaCalcoloPrezzoValues=[c.kS.FissaGiornaliera,c.kS.FissaPerData,c.kS.UltimaNotte,c.kS.PrimoGiorno],this.displayedColumnsDettagli=["modalitaCalcoloPrezzo","data","articolo","riduzione","listino","tipoDisponibilitaArticolo","quantita","importo","isPerPersona","delete"],this.getArticoliRQ=d.k$g.fromFilter("tipoArticolo",c.Hp.In,"("+c.ix.Extra+", "+c.ix.Supplemento+")",c.NM.Number),this.selectionSupplementi=new me.Ov(!0,[]),this.supplementiFiltered=[],this.supplementi=[],this.isVisualizzaSoloSupplementiAttivi=!0,this.backEvent=new e.vpe}ngOnInit(){this.giorniValidita=[c.cw.Lunedi,c.cw.Martedi,c.cw.Mercoledi,c.cw.Giovedi,c.cw.Venerdi,c.cw.Sabato,c.cw.Domenica]}save(){if(0==this.modelEdit.dettagli.length||this.modelEdit.dettagli.every(o=>null!=o.articolo&&o.articolo.oid>0&&null!=o.modalitaCalcoloPrezzo)){for(let o of this.modelEdit.promozioniXLingua)o.promozione=this.modelEdit.promozione;this.modelEdit.promozione.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.promozione.oidModalitaPagamento=this.selectionModalitaPagamento.selected.toString().replace(/,/g,";"),this.modelEdit.promozione.oidTipoCamera=this.selectionTipiCamera.selected.toString().replace(/,/g,";"),this.modelEdit.promozione.oidTrattamenti=this.selectionTrattamenti.selected.toString().replace(/,/g,";"),this.modelEdit.promozione.oidComponentiXVariazione=this.selectionComponentiXVariazione.selected.toString().replace(/,/g,";"),this.modelEdit.promozione.oidLingueAttive=this.selectionLingue.selected.toString().replace(/,/g,";"),this.modelEdit.promozione.oidSupplementiAbilitati=this.selectionSupplementi.selected.toString().replace(/,/g,";"),this.modelEdit.promozione.giorniValidita=this.giorniValiditaSelected.join(";"),this.modelEdit.promozione.isLunedi=this.giorniArrivoValidiSelected.includes(c.cw.Lunedi),this.modelEdit.promozione.isMartedi=this.giorniArrivoValidiSelected.includes(c.cw.Martedi),this.modelEdit.promozione.isMercoledi=this.giorniArrivoValidiSelected.includes(c.cw.Mercoledi),this.modelEdit.promozione.isGiovedi=this.giorniArrivoValidiSelected.includes(c.cw.Giovedi),this.modelEdit.promozione.isVenerdi=this.giorniArrivoValidiSelected.includes(c.cw.Venerdi),this.modelEdit.promozione.isSabato=this.giorniArrivoValidiSelected.includes(c.cw.Sabato),this.modelEdit.promozione.isDomenica=this.giorniArrivoValidiSelected.includes(c.cw.Domenica),this.modelEdit.promozione.prenotabileDal=this.getDate(this.modelEdit.promozione.prenotabileDal),this.modelEdit.promozione.prenotabileAl=this.getDate(this.modelEdit.promozione.prenotabileAl),this.modelEdit.dettagli.forEach(o=>o.data=this.getDate(o.data)),null!=this.modelEdit.periodi&&this.modelEdit.periodi.forEach(o=>{o.dal=this.getDate(o.dal),o.al=this.getDate(o.al)}),this.setIsLoading(!0),this.apiService.setPromozione(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.promozioni.promozioneSalvata").then(()=>{this.editing?this.backEvent.emit():(this.modelEdit.promozione=o.data.promozione,this.modelEdit.promozioniXLingua=o.data.promozioniXLingua,this.modelEdit.dettagli=o.data.dettagli,this.modelEdit.promozione.isExtranet&&this.modelEdit.promozione.tipoPromozione==c.$l.Sconto&&(this.modelEdit.periodi=o.data.periodi),this.editing=!0,setTimeout(()=>{this.selectedIndex=0},200))})})}else this.showError("globals.messages.inserireDati")}delete(o){this.showDialogConfirm("sbm.configurazione.promozioni.eliminarePromozione").then(t=>{null!=o&&(this.modelEdit.promozione=o),this.modelEdit.promozione.isDeleted=!0,this.setIsLoading(!0),this.apiService.setPromozione(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}editImage(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Ve.t,t),a=n.componentInstance;a._url=o==c._u.Immagine?this.modelEdit.promozione.urlImmagine:o==c._u.ImmagineEvidenza?this.modelEdit.promozione.urlImmagineEvidenza:"",a.title=o==c._u.Immagine?"globals.immagine":o==c._u.ImmagineEvidenza?"sbm.configurazione.promozioni.immagineEvidenza":"",a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){this.setIsLoading(!0);let r=new d.a1y;r.oid=this.modelEdit.promozione.oid,r.tipoImmagine=o,r.base64=l,this.apiService.setImmaginePromozione(r).subscribe(p=>{null!=p.data&&(o==c._u.Immagine?this.modelEdit.promozione.urlImmagine=p.data.url:o==c._u.ImmagineEvidenza&&(this.modelEdit.promozione.urlImmagineEvidenza=p.data.url)),this.setIsLoading(!1)})}})}deleteImage(o){this.showDialogConfirm("globals.eliminareImmagine").then(t=>{this.setIsLoading(!0);let n=new d.a1y;n.oid=this.modelEdit.promozione.oid,n.tipoImmagine=o,n.base64="",this.apiService.setImmaginePromozione(n).subscribe(a=>{null!=a.data&&(o==c._u.Immagine?this.modelEdit.promozione.urlImmagine=a.data.url:o==c._u.ImmagineEvidenza&&(this.modelEdit.promozione.urlImmagineEvidenza=a.data.url)),this.setIsLoading(!1)})},t=>{})}isAllSelectedModalitaPagamento(){return this.selectionModalitaPagamento.selected.length==this.modalitaPagamento.length}masterToggleModalitaPagamento(){this.isAllSelectedModalitaPagamento()?this.selectionModalitaPagamento.clear():this.modalitaPagamento.forEach(o=>this.selectionModalitaPagamento.select(o.oid))}isAllSelectedTipiCamera(){return this.selectionTipiCamera.selected.length==this.tipiCamera.length}masterToggleTipiCamera(){this.isAllSelectedTipiCamera()?this.selectionTipiCamera.clear():this.tipiCamera.forEach(o=>this.selectionTipiCamera.select(o.oid))}isAllSelectedTrattamenti(){return this.selectionTrattamenti.selected.length==this.trattamenti.length}masterToggleTrattamenti(){this.isAllSelectedTrattamenti()?this.selectionTrattamenti.clear():this.trattamenti.forEach(o=>this.selectionTrattamenti.select(o.oid))}isAllSelectedComponentiXVariazione(){return this.selectionComponentiXVariazione.selected.length==this.componentiXVariazione.length}masterToggleComponentiXVariazione(){this.isAllSelectedComponentiXVariazione()?this.selectionComponentiXVariazione.clear():this.componentiXVariazione.forEach(o=>this.selectionComponentiXVariazione.select(o.oid))}isAllSelectedLingue(){return this.selectionLingue.selected.length==this.lingue.length}masterToggleLingue(){this.isAllSelectedLingue()?this.selectionLingue.clear():this.lingue.forEach(o=>this.selectionLingue.select(o.oid))}openDetails(o){let t=new d.Zpt;t.width="80vw",t.height="80vh",this.showModalDialog(Pi,t).componentInstance.prezzo=o}getUrlPromozione(){return window.location.origin+"/booking/offer?oidPromozione="+this.modelEdit.promozione.oid+"&lingua="+this.localizationService.currentLanguage.codice}initAlert(){null==this.selectionModalitaPagamento||null==this.selectionModalitaPagamento.selected||this.selectionModalitaPagamento.selected.length<=0?this.alert=new String("sbm.configurazione.promozioni.promozioneSenzaModalitaDiPagamento"):this.alert=null}onSelectDeselectAllClickGiorniValidita(o){this.isAllSelectedGiorniValidita(o)?this.giorniValiditaSelected=[]:this.giorniValiditaSelected=this.giorniValidita.slice()}onSelectDeselectAllClickGiorniArrivoValidi(o){this.isAllSelectedGiorniValidita(o)?this.giorniArrivoValidiSelected=[]:this.giorniArrivoValidiSelected=this.giorniValidita.slice()}isAllSelectedGiorniValidita(o){return o.selected.length==this.giorniValidita.length}isAllDeselectedGiorniValidita(o){return 0==o.selected.length}addDettaglio(){this.modelEdit.dettagli.push(new v.USC),this.modelEdit.dettagli=this.modelEdit.dettagli.slice()}deleteDettaglio(o){this.showDialogConfirm("sbm.configurazione.promozioni.eliminareDettaglio").then(t=>{this.modelEdit.dettagli.splice(o,1),this.modelEdit.dettagli=this.modelEdit.dettagli.slice()},t=>{})}addPeriodo(){let o=new d.YEq;o.dal=this.getDate(u()),o.al=this.getDate(u()),o.tipoValore=c.jy.Percentuale,o.prezzo=0,this.modelEdit.periodi.push(o),this.modelEdit.periodi=this.modelEdit.periodi.slice()}deletePeriodo(o){this.showDialogConfirm("sbm.configurazione.promozioni.eliminarePeriodo").then(t=>{this.modelEdit.periodi.splice(o,1),this.modelEdit.periodi=this.modelEdit.periodi.slice()},t=>{})}onDalChange(o){setTimeout(()=>{o.dal=this.getDate(o.dal),(null==o.al||u(o.dal)>u(o.al))&&(o.al=o.dal)},200)}onAlChange(o){setTimeout(()=>{o.al=this.getDate(o.al),(null==o.dal||u(o.dal)>u(o.al))&&(o.dal=o.al)},200)}controllaTariffeCollegate(){let o=new d.Zpt;o.width="50vw",this.showModalDialog(ka,o).componentInstance.oidPromozione=this.modelEdit.promozione.oid}onIsVisualizzaSoloSupplementiAttiviChange(){this.isVisualizzaSoloSupplementiAttivi?this.supplementiFiltered=this.supplementi.filter(o=>o.isDisponibile):this.supplementiFiltered=this.supplementi}isAllSelectedSupplementi(){return this.selectionSupplementi.selected.length>=this.supplementiFiltered.length}masterToggleSupplementi(){this.isAllSelectedSupplementi()?this.selectionSupplementi.clear():this.supplementiFiltered.forEach(o=>this.selectionSupplementi.select(o.oid))}}function XX(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",10),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",37)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.promozioni.nessunaPromozione")))}function jX(i,o){1&i&&e._UZ(0,"mat-header-cell")}function WX(i,o){1&i&&(e.TgZ(0,"mat-cell",38)(1,"button",39)(2,"i",40),e._uU(3,"edit"),e.qZA()()())}function ej(i,o){1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.immagine"),""))}function tj(i,o){if(1&i&&e._UZ(0,"img",43),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagineEvidenza,e.LSH)}}function ij(i,o){if(1&i&&(e.TgZ(0,"mat-cell",41),e.YNc(1,tj,1,1,"img",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlImmagineEvidenza)}}function oj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.promozione.proprieta.nome"),""))}function nj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nome+(t.isExtranet?e.lcZ(2,1,"sbm.configurazione.promozioni.soloWeb"):"")," ")}}function aj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.promozione.proprieta.tipoPromozione"),""))}function lj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoPromozione,t.tipoPromozione,"tipoPromozione"))," ")}}function rj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.promozione.proprieta.ordinamento"),""))}function cj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ordinamento)}}function sj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.promozione.proprieta.isAttiva"),""))}function pj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",44),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttiva)("disabled",!0)}}function dj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.promozione.proprieta.isAttivaSoloMobile"),""))}function mj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",44),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivaSoloMobile)("disabled",!0)}}function _j(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.promozione.proprieta.isVisualizzaInHomePage"),""))}function uj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",44),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isVisualizzaInHomePage)("disabled",!0)}}function gj(i,o){1&i&&e._UZ(0,"mat-header-cell")}function hj(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"button",45),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.duplica(r.oid))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"globals.duplica")))}function fj(i,o){1&i&&e._UZ(0,"mat-header-cell",46)}function Cj(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",47)(1,"button",48),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(52);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",49),e._uU(3,"delete"),e.qZA()()()}}function bj(i,o){1&i&&e._UZ(0,"mat-header-row",50)}function vj(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",51),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Sa.\u0275fac=function(o){return new(o||Sa)(e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o),e.Y36(C.t))},Sa.\u0275cmp=e.Xpm({type:Sa,selectors:[["app-promozioni-edit"]],viewQuery:function(o,t){if(1&o&&(e.Gf(EB,5),e.Gf(NB,5),e.Gf(OB,5),e.Gf(LB,5),e.Gf(DB,5),e.Gf(IB,5),e.Gf(QB,5),e.Gf(UB,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.panel1=n.first),e.iGM(n=e.CRH())&&(t.panel2=n.first),e.iGM(n=e.CRH())&&(t.panel3=n.first),e.iGM(n=e.CRH())&&(t.panel4=n.first),e.iGM(n=e.CRH())&&(t.panel5=n.first),e.iGM(n=e.CRH())&&(t.panel6=n.first),e.iGM(n=e.CRH())&&(t.panel7=n.first),e.iGM(n=e.CRH())&&(t.panel8=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{componentiXVariazione:"componentiXVariazione",modalitaPagamento:"modalitaPagamento",tipiCamera:"tipiCamera",trattamenti:"trattamenti",_supplementi:"_supplementi",promozione:"promozione"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:314,vars:251,consts:[[3,"message"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["disabled","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["multiple","",3,"placeholder","ngModel","disabled","ngModelChange"],["selectGiorniArrivoValidi",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","disabled","ngModelChange"],[1,"col-6"],["autocompleteOff","","type","number","matInput","","readonly","","disabled","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","disabled","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["dal",""],["al",""],[3,"ngModel","placeholder","ngModelChange"],[4,"ngFor","ngForOf"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3","mb-3"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectGiorniValidita",""],[3,"placeholder","url"],[1,"mt-n2","mb-4","div-help"],["class","mb-4",4,"ngIf"],[1,"mat-elevation-z0","border","rounded","mb-3"],["panel1",""],[3,"ngClass"],[1,"mat-table-container-border-rounded","mb-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],["panel7",""],["panel8",""],["panel5",""],["matColumnDef","descrizioneRiduzioni"],["panel4",""],["panel6",""],["color","primary",3,"ngModel","ngModelChange","change"],[1,"mat-table-container-border-rounded","mt-2","mb-3"],["panel2",""],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],["panel3",""],["class","row mt-3 mb-3",4,"ngIf"],["class","mt-3 mb-3 p-3 border rounded",4,"ngIf"],["class","mt-4",4,"ngIf"],[4,"ngIf"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],[1,"mb-4"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],["class","border rounded-lg mat-elevation-z1 p-4",4,"ngIf"],["class","mat-table-container-border-rounded",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],[1,"mat-table-container-border-rounded"],[1,"mat-table","dettagli-table",3,"dataSource"],["matColumnDef","modalitaCalcoloPrezzo"],["matColumnDef","data"],["matColumnDef","articolo"],["matColumnDef","riduzione"],["matColumnDef","listino"],["matColumnDef","tipoDisponibilitaArticolo"],["matColumnDef","quantita"],["matColumnDef","importo"],["matColumnDef","isPerPersona"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],[3,"value","valueChange"],[1,"w-100","text-right"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["data",""],["displayMember","nome",1,"w-100",3,"title","dataLoader","value","valueChange"],[3,"panelClass","value","valueChange"],["autocompleteOff","","type","number","matInput","",3,"ngModel","ngModelChange"],[1,"justify-content-center"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],[1,"mt-3"],[1,"col-6","pr-1"],[3,"title","url","edit","delete"],[1,"col-6","pl-1"],[1,"mt-3","mb-3","p-3","border","rounded"],["matSort","","matSortActive","dal","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource"],["matColumnDef","dal"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","al"],["matColumnDef","prezzo"],["matColumnDef","fascia"],["matColumnDef","politicaCancellazione.nome"],["matColumnDef","durataMinimaSoggiorno"],["matColumnDef","durataMassimaSoggiorno"],["matColumnDef","details"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[1,"mat-table","periodi-table",3,"dataSource"],["matColumnDef","tipoValore"],["autocompleteOff","","type","text","matInput","","readonly","","required","",3,"matDatepicker","ngModel","ngModelChange","dateChange"],["dalPeriodo",""],["alPeriodo",""],["autocompleteOff","","type","number","matInput","","required","",3,"ngModel","ngModelChange"],["required","",3,"value","valueChange"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o){const n=e.EpF();e._UZ(0,"app-alert",0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",4),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.nome=l}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",5),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.TgZ(9,"div",1)(10,"div",2)(11,"mat-form-field",3)(12,"input",6),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.ordinamento=l}),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",5),e._uU(15," Ordinamento di visualizzazione della promozione "),e.qZA()(),e.TgZ(16,"div",1)(17,"div",2)(18,"mat-form-field",3)(19,"mat-select",7),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.tipoPromozione=l}),e.ALo(20,"translate"),e.YNc(21,YB,3,4,"mat-option",8),e.ALo(22,"selectEnum"),e.qZA()()(),e.TgZ(23,"div",5),e._uU(24," Tipo di promozione (Sconto / Piano Famiglia, ...) "),e.qZA()(),e.TgZ(25,"div",1)(26,"div",2)(27,"app-view-select",9),e.NdJ("valueChange",function(l){return t.modelEdit.promozione.politicaCancellazione=l}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",5),e._uU(30," Politica di cancellazione per la promozione. Se vuota verr\xe0 considerata quella nel periodo della promozione per il giorno di arrivo "),e.qZA()(),e.TgZ(31,"div",1)(32,"div",2)(33,"mat-form-field",3)(34,"input",4),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.codicePromozione=l}),e.ALo(35,"translate"),e.qZA()()(),e.TgZ(36,"div",5),e._uU(37," Inserire il campo codice solo se la promozione \xe8 visibile tramite il codice Promo nel Booking Engine "),e.qZA()(),e.TgZ(38,"div",1)(39,"div",2)(40,"mat-form-field",3)(41,"mat-select",10,11),e.NdJ("ngModelChange",function(l){return t.giorniArrivoValidiSelected=l}),e.ALo(43,"translate"),e.TgZ(44,"mat-checkbox",12),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(42);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickGiorniArrivoValidi(r))}),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.YNc(47,RB,3,4,"mat-option",8),e.qZA()()(),e.TgZ(48,"div",5),e._uU(49," Giorni della settimana di arrivo validi "),e.qZA()(),e.TgZ(50,"div",1)(51,"div",2)(52,"mat-form-field",3)(53,"input",13),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.minimoGiorniDiAnticipo=l}),e.ALo(54,"translate"),e.qZA()()(),e.TgZ(55,"div",5),e._uU(56," Giorni di anticipo minimi "),e.qZA()(),e.TgZ(57,"div",1)(58,"div",2)(59,"mat-form-field",3)(60,"input",13),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.massimoGiorniDiAnticipo=l}),e.ALo(61,"translate"),e.qZA()()(),e.TgZ(62,"div",5),e._uU(63," Giorni di anticipo massimi "),e.qZA()(),e.TgZ(64,"div",1)(65,"div",2)(66,"div",1)(67,"div",14)(68,"mat-form-field",3)(69,"input",15),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.quantitaMassima=l}),e.ALo(70,"translate"),e.qZA()()(),e.TgZ(71,"div",14)(72,"mat-form-field",3)(73,"input",15),e.NdJ("ngModelChange",function(l){return t.quantitaPrenotata=l}),e.ALo(74,"translate"),e.qZA()()()()(),e.TgZ(75,"div",5),e._uU(76," Quantit\xe0 massima prenotabile "),e.qZA()(),e.TgZ(77,"div",1)(78,"div",2)(79,"mat-form-field",3)(80,"input",16),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.prenotabileDal=l}),e.ALo(81,"translate"),e.qZA(),e._UZ(82,"mat-datepicker-toggle",17)(83,"mat-datepicker",18,19),e.qZA(),e.TgZ(85,"mat-form-field",3)(86,"input",16),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.prenotabileAl=l}),e.ALo(87,"translate"),e.qZA(),e._UZ(88,"mat-datepicker-toggle",17)(89,"mat-datepicker",18,20),e.qZA()(),e.TgZ(91,"div",5),e._uU(92," Indica l'intervallo di quando \xe8 prenotabile la promozione (la data di prenotazione deve compresa nell'intervallo di date inserite) "),e.qZA()(),e.TgZ(93,"div",1)(94,"div",2)(95,"mat-form-field",3)(96,"mat-select",21),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.tipoApplicazione=l}),e.ALo(97,"translate"),e.YNc(98,FB,4,4,"ng-container",22),e.ALo(99,"selectEnum"),e.qZA()()(),e.TgZ(100,"div",5),e._uU(101," Seleziona dove viene proposta la promozione (solo Web, solo Crm o entrambi) "),e.qZA()(),e.TgZ(102,"div",1)(103,"div",2)(104,"mat-form-field",3)(105,"mat-select",21),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.validitaOffertaPeriodo=l}),e.ALo(106,"translate"),e.YNc(107,HB,4,4,"ng-container",22),e.ALo(108,"selectEnum"),e.qZA()()(),e.TgZ(109,"div",5),e._uU(110," Imposta se la promozione viene applicata anche se valida solo per alcuni giorni "),e.qZA()(),e.TgZ(111,"div",1)(112,"div",2)(113,"mat-form-field",3)(114,"input",6),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.prezzoHome=l}),e.ALo(115,"translate"),e.qZA()()(),e.TgZ(116,"div",5),e._uU(117," Inserire il prezzo visualizzato nella home di booking "),e.qZA()(),e.TgZ(118,"div",23)(119,"div",2)(120,"mat-checkbox",24),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.isUsaPrezzoBaseHome=l}),e._uU(121),e.ALo(122,"translate"),e.qZA()(),e.TgZ(123,"div",5),e._uU(124," Utilizza il prezzo home per il calcolo della promozione (diversamente verr\xe0 usato il prezzo della tariffa pubblicata per quel giorno) "),e.qZA()(),e.YNc(125,KB,7,4,"div",25),e.TgZ(126,"div",23)(127,"div",2)(128,"mat-checkbox",24),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.isAttiva=l}),e._uU(129),e.ALo(130,"translate"),e.qZA()(),e.TgZ(131,"div",5),e._uU(132," Attiva la promozione "),e.qZA()(),e.TgZ(133,"div",23)(134,"div",2)(135,"mat-checkbox",24),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.isAttivaSoloMobile=l}),e._uU(136),e.ALo(137,"translate"),e.qZA()(),e.TgZ(138,"div",5),e._uU(139," Attiva la promozione solo per dispositivi mobile "),e.qZA()(),e.TgZ(140,"div",23)(141,"div",2)(142,"mat-checkbox",24),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.isAttivaTariffaScontata=l}),e._uU(143),e.ALo(144,"translate"),e.qZA()(),e.TgZ(145,"div",5),e._uU(146," Applica la promozione sul prezzo scontato della tariffa "),e.qZA()(),e.TgZ(147,"div",23)(148,"div",2)(149,"mat-checkbox",24),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.isVisualizzaSoloDescrizionePromozione=l}),e._uU(150),e.ALo(151,"translate"),e.qZA()(),e.TgZ(152,"div",5),e._uU(153," Visualizza il nome della promozione al posto della tariffa nei risultati e nei template "),e.qZA()(),e.TgZ(154,"div",23)(155,"div",2)(156,"mat-checkbox",24),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.isVisualizzaInHomePage=l}),e._uU(157),e.ALo(158,"translate"),e.qZA()(),e.TgZ(159,"div",5),e._uU(160," Visualizza nella home del Booking Engine "),e.qZA()(),e.TgZ(161,"div",23)(162,"div",2)(163,"mat-checkbox",24),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.isApplicaPoliticaCancellazioneTariffa=l}),e._uU(164),e.ALo(165,"translate"),e.qZA()(),e.TgZ(166,"div",5),e._uU(167," Applica la politica di cancellazione della tariffa se non impostata sulla promozione "),e.qZA()(),e.TgZ(168,"div",26)(169,"div",2)(170,"mat-checkbox",24),e.NdJ("ngModelChange",function(l){return t.modelEdit.promozione.isOffertaSegreta=l}),e._uU(171),e.ALo(172,"translate"),e.qZA()(),e.TgZ(173,"div",5),e._uU(174," Offerta segreta. Permette di prenotare la promozione solo per utenti registrati "),e.qZA()(),e.TgZ(175,"div",1)(176,"div",2)(177,"mat-form-field",3)(178,"mat-select",27,28),e.NdJ("ngModelChange",function(l){return t.giorniValiditaSelected=l}),e.ALo(180,"translate"),e.TgZ(181,"mat-checkbox",12),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(179);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickGiorniValidita(r))}),e._uU(182),e.ALo(183,"translate"),e.qZA(),e.YNc(184,GB,3,4,"mat-option",8),e.qZA()()(),e.TgZ(185,"div",5),e._uU(186," Giorni per i quali viene applicata la promozione, per gli altri giorni rimane il prezzo della tariffa. "),e.qZA()(),e._UZ(187,"app-url",29),e.ALo(188,"translate"),e.TgZ(189,"div",30),e._uU(190," Se si vuole visualizzare la promozione per un singolo portale aggiungere il parametro all'url &oidPortale=OID\n"),e.qZA(),e.YNc(191,vV,6,2,"div",31),e.TgZ(192,"mat-accordion")(193,"mat-expansion-panel",32,33)(195,"mat-expansion-panel-header",34),e._uU(196),e.ALo(197,"translate"),e.qZA(),e.TgZ(198,"div",35)(199,"mat-table",36),e.ynx(200,37),e.YNc(201,TV,2,2,"mat-header-cell",38),e.YNc(202,xV,2,1,"mat-cell",39),e.BQk(),e.ynx(203,40),e.YNc(204,ZV,3,3,"mat-header-cell",41),e.YNc(205,AV,2,1,"mat-cell",42),e.BQk(),e.YNc(206,wV,1,0,"mat-header-row",43),e.YNc(207,zV,1,1,"mat-row",44),e.qZA()()(),e.TgZ(208,"mat-expansion-panel",32,45)(210,"mat-expansion-panel-header",34),e._uU(211),e.ALo(212,"translate"),e.qZA(),e.TgZ(213,"div",35)(214,"mat-table",36),e.ynx(215,37),e.YNc(216,MV,2,2,"mat-header-cell",38),e.YNc(217,qV,2,1,"mat-cell",39),e.BQk(),e.ynx(218,40),e.YNc(219,PV,3,3,"mat-header-cell",41),e.YNc(220,kV,2,1,"mat-cell",42),e.BQk(),e.YNc(221,SV,1,0,"mat-header-row",43),e.YNc(222,yV,1,1,"mat-row",44),e.qZA()()(),e.TgZ(223,"mat-expansion-panel",32,46)(225,"mat-expansion-panel-header",34),e._uU(226),e.ALo(227,"translate"),e.qZA(),e.TgZ(228,"div",35)(229,"mat-table",36),e.ynx(230,37),e.YNc(231,JV,2,2,"mat-header-cell",38),e.YNc(232,EV,2,1,"mat-cell",39),e.BQk(),e.ynx(233,40),e.YNc(234,NV,3,3,"mat-header-cell",41),e.YNc(235,OV,2,1,"mat-cell",42),e.BQk(),e.YNc(236,LV,1,0,"mat-header-row",43),e.YNc(237,DV,1,1,"mat-row",44),e.qZA()()(),e.TgZ(238,"mat-expansion-panel",32,47)(240,"mat-expansion-panel-header",34),e._uU(241),e.ALo(242,"translate"),e.qZA(),e.TgZ(243,"div",35)(244,"mat-table",36),e.ynx(245,37),e.YNc(246,IV,2,2,"mat-header-cell",38),e.YNc(247,QV,2,1,"mat-cell",39),e.BQk(),e.ynx(248,40),e.YNc(249,UV,3,3,"mat-header-cell",41),e.YNc(250,YV,2,1,"mat-cell",42),e.BQk(),e.ynx(251,48),e.YNc(252,RV,3,3,"mat-header-cell",41),e.YNc(253,FV,2,1,"mat-cell",42),e.BQk(),e.YNc(254,HV,1,0,"mat-header-row",43),e.YNc(255,KV,1,1,"mat-row",44),e.qZA()()(),e.TgZ(256,"mat-expansion-panel",32,49)(258,"mat-expansion-panel-header",34),e._uU(259),e.ALo(260,"translate"),e.qZA(),e.TgZ(261,"div",35)(262,"mat-table",36),e.ynx(263,37),e.YNc(264,GV,2,2,"mat-header-cell",38),e.YNc(265,$V,2,1,"mat-cell",39),e.BQk(),e.ynx(266,40),e.YNc(267,BV,3,3,"mat-header-cell",41),e.YNc(268,VV,2,1,"mat-cell",42),e.BQk(),e.YNc(269,XV,1,0,"mat-header-row",43),e.YNc(270,jV,1,1,"mat-row",44),e.qZA()()(),e.TgZ(271,"mat-expansion-panel",32,50)(273,"mat-expansion-panel-header",34),e._uU(274),e.ALo(275,"translate"),e.qZA(),e.TgZ(276,"mat-checkbox",51),e.NdJ("ngModelChange",function(l){return t.isVisualizzaSoloSupplementiAttivi=l})("change",function(){return t.onIsVisualizzaSoloSupplementiAttiviChange()}),e._uU(277),e.ALo(278,"translate"),e.qZA(),e.TgZ(279,"div",52)(280,"mat-table",36),e.ynx(281,37),e.YNc(282,WV,2,2,"mat-header-cell",38),e.YNc(283,eX,2,1,"mat-cell",39),e.BQk(),e.ynx(284,40),e.YNc(285,tX,3,3,"mat-header-cell",41),e.YNc(286,iX,2,1,"mat-cell",42),e.BQk(),e.YNc(287,oX,1,0,"mat-header-row",43),e.YNc(288,nX,1,1,"mat-row",44),e.qZA()()(),e.TgZ(289,"mat-expansion-panel",32,53)(291,"mat-expansion-panel-header",34),e._uU(292),e.ALo(293,"translate"),e.qZA(),e.TgZ(294,"mat-tab-group",54),e.NdJ("selectedIndexChange",function(l){return t.selectedIndex=l}),e.YNc(295,lX,2,1,"ng-container",22),e.qZA()(),e.TgZ(296,"mat-expansion-panel",32,55)(298,"mat-expansion-panel-header",34),e._uU(299),e.ALo(300,"translate"),e.qZA(),e.YNc(301,rX,5,4,"div",56),e.YNc(302,cX,4,3,"div",57),e.qZA()(),e.YNc(303,MX,32,7,"div",58),e.YNc(304,$X,9,5,"ng-container",59),e.TgZ(305,"div",60)(306,"button",61),e.NdJ("click",function(){return t.save()}),e._uU(307),e.ALo(308,"translate"),e.qZA(),e.YNc(309,BX,3,3,"button",62),e.YNc(310,VX,3,3,"button",62),e.TgZ(311,"button",63),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(312),e.ALo(313,"translate"),e.qZA()()}if(2&o){const n=e.MAs(42),a=e.MAs(84),l=e.MAs(90),r=e.MAs(179),p=e.MAs(194),T=e.MAs(209),L=e.MAs(224),G=e.MAs(239),W=e.MAs(257),be=e.MAs(272),Ze=e.MAs(290),Je=e.MAs(297);e.Q6J("message",t.alert),e.xp6(4),e.s9C("placeholder",e.lcZ(5,131,"bo.promozione.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.promozione.nome),e.xp6(3),e.hij(" Ultima sincronizzazione Welcome: ",e.xi3(8,133,t.modelEdit.promozione.dataModificaWelcome,"dd/MM/yyyy HH:mm")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(13,136,"bo.promozione.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.promozione.ordinamento),e.xp6(7),e.s9C("placeholder",e.lcZ(20,138,"bo.promozione.proprieta.tipoPromozione")),e.Q6J("ngModel",t.modelEdit.promozione.tipoPromozione),e.xp6(2),e.Q6J("ngForOf",e.xi3(22,140,t.enumTipoPromozione,"tipoPromozione")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getCancellazioniViewSelect())("value",t.modelEdit.promozione.politicaCancellazione)("placeholder",e.lcZ(28,143,"bo.promozione.proprieta.politicaCancellazione")),e.xp6(7),e.s9C("placeholder",e.lcZ(35,145,"bo.promozione.proprieta.codicePromozione")),e.Q6J("ngModel",t.modelEdit.promozione.codicePromozione),e.xp6(7),e.Q6J("placeholder",e.lcZ(43,147,"sbm.configurazione.promozioni.giorniArrivoValidi"))("ngModel",t.giorniArrivoValidiSelected)("disabled",!t.modelEdit.promozione.isExtranet),e.xp6(3),e.Q6J("ngClass",e.VKq(219,rs,t.isAllSelectedGiorniValidita(n)))("checked",t.isAllSelectedGiorniValidita(n))("indeterminate",!t.isAllSelectedGiorniValidita(n)&&!t.isAllDeselectedGiorniValidita(n)),e.xp6(1),e.hij(" ",e.lcZ(46,149,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",t.giorniValidita),e.xp6(6),e.s9C("placeholder",e.lcZ(54,151,"bo.promozione.proprieta.minimoGiorniDiAnticipo")),e.Q6J("ngModel",t.modelEdit.promozione.minimoGiorniDiAnticipo)("disabled",!t.modelEdit.promozione.isExtranet),e.xp6(7),e.s9C("placeholder",e.lcZ(61,153,"bo.promozione.proprieta.massimoGiorniDiAnticipo")),e.Q6J("ngModel",t.modelEdit.promozione.massimoGiorniDiAnticipo)("disabled",!t.modelEdit.promozione.isExtranet),e.xp6(9),e.s9C("placeholder",e.lcZ(70,155,"bo.promozione.proprieta.quantitaMassima")),e.Q6J("ngModel",t.modelEdit.promozione.quantitaMassima),e.xp6(4),e.s9C("placeholder",e.lcZ(74,157,"bo.promozione.proprieta.quantitaPrenotata")),e.Q6J("ngModel",t.quantitaPrenotata),e.xp6(7),e.s9C("placeholder",e.lcZ(81,159,"bo.promozione.proprieta.prenotabileDal")),e.Q6J("matDatepicker",a)("ngModel",t.modelEdit.promozione.prenotabileDal)("disabled",!t.modelEdit.promozione.isExtranet),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.promozione.prenotabileDal)?t.today:null),e.xp6(3),e.s9C("placeholder",e.lcZ(87,161,"bo.promozione.proprieta.prenotabileAl")),e.Q6J("matDatepicker",l)("ngModel",t.modelEdit.promozione.prenotabileAl)("disabled",!t.modelEdit.promozione.isExtranet),e.xp6(2),e.Q6J("for",l),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.promozione.prenotabileAl)?t.today:null),e.xp6(7),e.s9C("placeholder",e.lcZ(97,163,"bo.promozione.proprieta.tipoApplicazione")),e.Q6J("ngModel",t.modelEdit.promozione.tipoApplicazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(99,165,t.enumTipoApplicazionePromozione,"tipoApplicazionePromozione")),e.xp6(7),e.s9C("placeholder",e.lcZ(106,168,"bo.promozione.proprieta.validitaOffertaPeriodo")),e.Q6J("ngModel",t.modelEdit.promozione.validitaOffertaPeriodo),e.xp6(2),e.Q6J("ngForOf",e.xi3(108,170,t.enumValiditaOffertaPeriodo,"validitaOffertaPeriodo")),e.xp6(7),e.s9C("placeholder",e.lcZ(115,173,"bo.promozione.proprieta.prezzoHome")),e.Q6J("ngModel",t.modelEdit.promozione.prezzoHome),e.xp6(6),e.Q6J("ngModel",t.modelEdit.promozione.isUsaPrezzoBaseHome),e.xp6(1),e.hij(" ",e.lcZ(122,175,"bo.promozione.proprieta.isUsaPrezzoBaseHome")," "),e.xp6(4),e.Q6J("ngIf",t.modelEdit.promozione.tipoPromozione==t.enumTipoPromozione.Sconto),e.xp6(3),e.Q6J("ngModel",t.modelEdit.promozione.isAttiva),e.xp6(1),e.hij(" ",e.lcZ(130,177,"bo.promozione.proprieta.isAttiva")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.promozione.isAttivaSoloMobile),e.xp6(1),e.hij(" ",e.lcZ(137,179,"bo.promozione.proprieta.isAttivaSoloMobile")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.promozione.isAttivaTariffaScontata),e.xp6(1),e.hij(" ",e.lcZ(144,181,"bo.promozione.proprieta.isAttivaTariffaScontata")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.promozione.isVisualizzaSoloDescrizionePromozione),e.xp6(1),e.hij(" ",e.lcZ(151,183,"bo.promozione.proprieta.isVisualizzaSoloDescrizionePromozione")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.promozione.isVisualizzaInHomePage),e.xp6(1),e.hij(" ",e.lcZ(158,185,"bo.promozione.proprieta.isVisualizzaInHomePage")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.promozione.isApplicaPoliticaCancellazioneTariffa),e.xp6(1),e.hij(" ",e.lcZ(165,187,"bo.promozione.proprieta.isApplicaPoliticaCancellazioneTariffa")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.promozione.isOffertaSegreta),e.xp6(1),e.hij(" ",e.lcZ(172,189,"bo.promozione.proprieta.isOffertaSegreta")," "),e.xp6(7),e.Q6J("placeholder",e.lcZ(180,191,"bo.promozione.proprieta.giorniValidita"))("ngModel",t.giorniValiditaSelected),e.xp6(3),e.Q6J("ngClass",e.VKq(221,rs,t.isAllSelectedGiorniValidita(r)))("checked",t.isAllSelectedGiorniValidita(r))("indeterminate",!t.isAllSelectedGiorniValidita(r)&&!t.isAllDeselectedGiorniValidita(r)),e.xp6(1),e.hij(" ",e.lcZ(183,193,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",t.giorniValidita),e.xp6(3),e.Q6J("placeholder",e.lcZ(188,195,"bo.promozione.proprieta.urlPromozione"))("url",t.getUrlPromozione()),e.xp6(4),e.Q6J("ngIf",null!=t.modelEdit.dettagli),e.xp6(4),e.Q6J("ngClass",e.VKq(223,Pt,p.expanded)),e.xp6(1),e.hij(" ",e.lcZ(197,197,"sbm.configurazione.promozioni.modalitaPagamentoAbilitate")," "),e.xp6(3),e.Q6J("dataSource",t.modalitaPagamento),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(225,pt))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(226,pt)),e.xp6(3),e.Q6J("ngClass",e.VKq(227,Pt,T.expanded)),e.xp6(1),e.hij(" ",e.lcZ(212,199,"sbm.configurazione.promozioni.tipiCameraAbilitati")," "),e.xp6(3),e.Q6J("dataSource",t.tipiCamera),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(229,pt))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(230,pt)),e.xp6(3),e.Q6J("ngClass",e.VKq(231,Pt,L.expanded)),e.xp6(1),e.hij(" ",e.lcZ(227,201,"sbm.configurazione.promozioni.trattamentiAbilitati")," "),e.xp6(3),e.Q6J("dataSource",t.trattamenti),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(233,pt))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(234,pt)),e.xp6(3),e.Q6J("ngClass",e.VKq(235,Pt,G.expanded)),e.xp6(1),e.hij(" ",e.lcZ(242,203,"sbm.configurazione.promozioni.combinazioniRiduzioni")," "),e.xp6(3),e.Q6J("dataSource",t.componentiXVariazione),e.xp6(10),e.Q6J("matHeaderRowDef",e.DdM(237,cs))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(238,cs)),e.xp6(3),e.Q6J("ngClass",e.VKq(239,Pt,W.expanded)),e.xp6(1),e.hij(" ",e.lcZ(260,205,"sbm.configurazione.promozioni.lingueAbilitate")," "),e.xp6(3),e.Q6J("dataSource",t.lingue),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(241,pt))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(242,pt)),e.xp6(3),e.Q6J("ngClass",e.VKq(243,Pt,be.expanded)),e.xp6(1),e.hij(" ",e.lcZ(275,207,"sbm.configurazione.promozioni.supplementiAbilitati")," "),e.xp6(2),e.Q6J("ngModel",t.isVisualizzaSoloSupplementiAttivi),e.xp6(1),e.Oqu(e.lcZ(278,209,"sbm.configurazione.promozioni.visualizzaSoloSupplementiAttivi")),e.xp6(3),e.Q6J("dataSource",t.supplementiFiltered),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(245,pt))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(246,pt)),e.xp6(3),e.Q6J("ngClass",e.VKq(247,Pt,Ze.expanded)),e.xp6(1),e.hij(" ",e.lcZ(293,211,"globals.traduzioni")," "),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.promozioniXLingua),e.xp6(3),e.Q6J("ngClass",e.VKq(249,Pt,Je.expanded)),e.xp6(1),e.hij(" ",e.lcZ(300,213,"sbm.configurazione.promozioni.immagini")," "),e.xp6(2),e.Q6J("ngIf",t.modelEdit.promozione.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.promozione.oid||t.modelEdit.promozione.oid<=0),e.xp6(1),e.Q6J("ngIf",(!t.modelEdit.promozione.isExtranet||t.modelEdit.promozione.tipoPromozione!=t.enumTipoPromozione.Sconto)&&null!=t.dataSource&&null!=t.dataSource.data&&t.dataSource.data.length>0),e.xp6(1),e.Q6J("ngIf",t.modelEdit.promozione.isExtranet&&t.modelEdit.promozione.tipoPromozione==t.enumTipoPromozione.Sconto&&null!=t.modelEdit.periodi),e.xp6(3),e.Oqu(e.lcZ(308,215,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(1),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(313,217,"globals.annulla"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,g.x8,ee.SK,ee.R7,ye.pp,ye.ib,ye.yz,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,_.Fj,_.wV,_.JJ,_.Q7,_.On,Me.P,nt,ne.d,Ge.c,Be,m.uU,Te.A,z.X$],styles:[".mat-table[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-top:10px}.mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#f0f0f0!important}.dettagli-table[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%], .dettagli-table[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{padding-left:10px!important;padding-right:10px!important}.periodi-table[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%], .periodi-table[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{padding-left:10px!important;padding-right:10px!important}"]});class ya extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","immagine","nome","tipo","ordinamento","isAttiva","isAttivaSoloMobile","isVisualizzaInHomePage","duplica","delete"],this.modalitaPagamento=[],this.tipiCamera=[],this.trattamenti=[],this.supplementi=[],this.componentiXVariazione=[],this.enumTipoPromozione=c.$l,this.rq=new d.k$g}ngOnInit(){this.setIsLoading(!0),this.headerService.setTitle("sbm.configurazione.promozioni.title"),this.rq.sorting=[new d.aQR("ordinamento")],this.filters=[],this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.apiService.getPromozioniView().subscribe(o=>{this.componentiXVariazione=o.data.componentiXVariazione,this.modalitaPagamento=o.data.modalitaPagamento,this.tipiCamera=o.data.tipiCamera,this.trattamenti=o.data.trattamenti,this.supplementi=o.data.supplementi,this.download()})}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPromozioniFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}add(){let o=new d.Zpt;o.width="60vw",o.minHeight="30vh";let t=this.showModalDialog(Pa,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&this.edit(a)})}edit(o){this.promozione=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBackEvent.bind(this))}duplica(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0),this.apiService.duplicaPromozione(o).subscribe(n=>{this.edit(n.data)})},t=>{})}onBackEvent(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}function Tj(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"span",18),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"i"),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"bo.sistemazione.proprieta.iconaCss")+": "),e.xp6(2),e.Tol(t.modelEdit.sistemazione.iconaCss+" align-middle ml-1")}}function xj(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",1)(2,"app-image",20),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.modelEdit.sistemazione.urlImmagine)}}function Zj(i,o){1&i&&(e.TgZ(0,"div",21)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.sistemazioni.salvareSistemazione")))}function Aj(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",23)(1,"mat-form-field",24)(2,"input",25),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.sistemazioniXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",26),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.sistemazioniXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.sistemazioneXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.sistemazioniXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.sistemazioneXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.sistemazioniXLingua[a].descrizione)}}function wj(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Aj,7,10,"mat-tab",22),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function zj(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}ya.\u0275fac=function(o){return new(o||ya)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},ya.\u0275cmp=e.Xpm({type:ya,selectors:[["app-promozioni"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:53,vars:20,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["nomeSearch",""],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","immagine"],["class","img-cell",4,"matHeaderCellDef"],["class","img-cell",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","tipo"],["matColumnDef","ordinamento"],["matColumnDef","isAttiva"],["matColumnDef","isAttivaSoloMobile"],["matColumnDef","isVisualizzaInHomePage"],["matColumnDef","duplica"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"promozione","modalitaPagamento","tipiCamera","trattamenti","_supplementi","componentiXVariazione","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"img-cell"],["class","m-2",3,"src",4,"ngIf"],[1,"m-2",3,"src"],["color","primary",3,"checked","disabled"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,XX,8,3,"div",8),e.TgZ(10,"div",1)(11,"button",9),e.NdJ("click",function(){return t.add()}),e.TgZ(12,"i",10),e._uU(13,"add"),e.qZA()(),e.TgZ(14,"div",11)(15,"mat-table",12),e.ynx(16,13),e.YNc(17,jX,1,0,"mat-header-cell",14),e.YNc(18,WX,4,0,"mat-cell",15),e.BQk(),e.ynx(19,16),e.YNc(20,ej,3,3,"mat-header-cell",17),e.YNc(21,ij,2,1,"mat-cell",18),e.BQk(),e.ynx(22,19),e.YNc(23,oj,3,3,"mat-header-cell",14),e.YNc(24,nj,3,3,"mat-cell",20),e.BQk(),e.ynx(25,21),e.YNc(26,aj,3,3,"mat-header-cell",14),e.YNc(27,lj,3,3,"mat-cell",20),e.BQk(),e.ynx(28,22),e.YNc(29,rj,3,3,"mat-header-cell",14),e.YNc(30,cj,2,1,"mat-cell",20),e.BQk(),e.ynx(31,23),e.YNc(32,sj,3,3,"mat-header-cell",14),e.YNc(33,pj,2,2,"mat-cell",20),e.BQk(),e.ynx(34,24),e.YNc(35,dj,3,3,"mat-header-cell",14),e.YNc(36,mj,2,2,"mat-cell",20),e.BQk(),e.ynx(37,25),e.YNc(38,_j,3,3,"mat-header-cell",14),e.YNc(39,uj,2,2,"mat-cell",20),e.BQk(),e.ynx(40,26),e.YNc(41,gj,1,0,"mat-header-cell",14),e.YNc(42,hj,4,3,"mat-cell",20),e.BQk(),e.ynx(43,27),e.YNc(44,fj,1,0,"mat-header-cell",28),e.YNc(45,Cj,4,0,"mat-cell",29),e.BQk(),e.YNc(46,bj,1,0,"mat-header-row",30),e.YNc(47,vj,1,1,"mat-row",31),e.qZA()(),e.TgZ(48,"div",32)(49,"mat-paginator",33),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(50,"div",34)(51,"app-promozioni-edit",35,36),e.NdJ("backEvent",function(){return t.onBackEvent()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,18,"bo.promozione.proprieta.nome")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("promozione",t.promozione)("modalitaPagamento",t.modalitaPagamento)("tipiCamera",t.tipiCamera)("trattamenti",t.trattamenti)("_supplementi",t.supplementi)("componentiXVariazione",t.componentiXVariazione))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Sa,z.X$],styles:["img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.img-cell[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]});const Mj=function(i){return{"ml-3":i}};class Ja extends f.H{set sistemazione(o){if(null!=o){this.modelEdit=new d.WGm,this.modelEdit.sistemazione=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.Nn4;n.lingua=t,this.modelEdit.sistemazioniXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getSistemazioniXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.sistemazioniXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.sistemazioniXLingua[a].sistemazione=n.sistemazione,this.modelEdit.sistemazioniXLingua[a].nome=n.nome,this.modelEdit.sistemazioniXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.containerService=n,this.modelEdit=new d.WGm,this.editing=!1,this.selectedIndex=0,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.sistemazioniXLingua)o.sistemazione=this.modelEdit.sistemazione;this.modelEdit.sistemazione.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setSistemazione(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.sistemazioni.sistemazioneSalvata").then(()=>{this.editing?this.backEvent.emit():(this.modelEdit.sistemazione=o.data.obj,this.editing=!0,setTimeout(()=>{this.containerService.scrollToTop(),this.selectedIndex=0},200))})})}delete(o){this.showDialogConfirm("sbm.configurazione.sistemazioni.eliminareSistemazione").then(t=>{null!=o&&(this.modelEdit.sistemazione=o),this.modelEdit.sistemazione.isDeleted=!0,this.setIsLoading(!0),this.apiService.setSistemazione(this.modelEdit).subscribe(n=>{this.backEvent.emit()})},t=>{})}editIcon(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Qt,o),n=t.componentInstance;n.icon=this.modelEdit.sistemazione.iconaCss,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&(this.modelEdit.sistemazione.iconaCss=a)})}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.modelEdit.sistemazione.urlImmagine,n.maximumFileSize=1e5,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.tcG;l.oid=this.modelEdit.sistemazione.oid,l.base64=a,this.apiService.setImmagineSistemazione(l).subscribe(r=>{null!=r.data&&(this.modelEdit.sistemazione.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.tcG;t.oid=this.modelEdit.sistemazione.oid,t.base64="",this.apiService.setImmagineSistemazione(t).subscribe(n=>{null!=n.data&&(this.modelEdit.sistemazione.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}}function qj(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",26)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.sistemazioni.nessunaSistemazione")))}function Pj(i,o){1&i&&e._UZ(0,"mat-header-cell")}function kj(i,o){1&i&&(e.TgZ(0,"mat-cell",27)(1,"button",28)(2,"i",29),e._uU(3,"edit"),e.qZA()()())}function Sj(i,o){1&i&&(e.TgZ(0,"mat-header-cell",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.immagine"),""))}function yj(i,o){if(1&i&&e._UZ(0,"img",32),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagine,e.LSH)}}function Jj(i,o){if(1&i&&(e.TgZ(0,"mat-cell",30),e.YNc(1,yj,1,1,"img",31),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlImmagine)}}function Ej(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sistemazione.proprieta.iconaCss"),""))}function Nj(i,o){if(1&i&&e._UZ(0,"i"),2&i){const t=e.oxw().$implicit;e.Tol(t.iconaCss)}}function Oj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Nj,1,2,"i",33),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.iconaCss)}}function Lj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.sistemazione.proprieta.nome"),""))}function Dj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function Ij(i,o){1&i&&e._UZ(0,"mat-header-cell",34)}function Qj(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",35)(1,"button",36),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(29);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",37),e._uU(3,"delete"),e.qZA()()()}}function Uj(i,o){1&i&&e._UZ(0,"mat-header-row",38)}function Yj(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",39),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Ja.\u0275fac=function(o){return new(o||Ja)(e.Y36(A.s),e.Y36(j.m),e.Y36(te.J))},Ja.\u0275cmp=e.Xpm({type:Ja,selectors:[["app-sistemazioni-edit"]],inputs:{sistemazione:"sistemazione"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:28,vars:27,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-6","pt-3"],[4,"ngIf"],["mat-flat-button","","color","primary",1,"align-middle",3,"ngClass","click"],[1,"col-4"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],[1,"col-8","div-help"],["class","row mt-3 mb-3",4,"ngIf"],["class","mt-3 mb-3 p-3 border rounded",4,"ngIf"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"align-middle"],[1,"row","mt-3","mb-3"],[3,"title","url","edit","delete"],[1,"mt-3","mb-3","p-3","border","rounded"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.sistemazione.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e.YNc(6,Tj,5,5,"ng-container",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return t.editIcon()}),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",0)(11,"div",7)(12,"app-view-select",8),e.NdJ("valueChange",function(a){return t.modelEdit.sistemazione.preparazioneCameraWelcome=a}),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",9),e._uU(15," Impostare la preparazione camera di welcome che verr\xe0 associata alla prenotazione "),e.qZA()(),e.YNc(16,xj,3,2,"div",10),e.YNc(17,Zj,4,3,"div",11),e.TgZ(18,"mat-tab-group",12),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(19,wj,2,1,"ng-container",13),e.qZA(),e.TgZ(20,"div",14)(21,"button",15),e.NdJ("click",function(){return t.save()}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.YNc(24,zj,3,3,"button",16),e.TgZ(25,"button",17),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,15,"bo.sistemazione.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.sistemazione.nome),e.xp6(3),e.Q6J("ngIf",!!t.modelEdit.sistemazione.iconaCss),e.xp6(1),e.Q6J("ngClass",e.VKq(25,Mj,!!t.modelEdit.sistemazione.iconaCss)),e.xp6(1),e.Oqu(e.lcZ(9,17,"sbm.configurazione.sistemazioni.selezionaIcona")),e.xp6(4),e.Q6J("dataLoader",t.apiService.getPreparazioniCameraViewSelect())("value",t.modelEdit.sistemazione.preparazioneCameraWelcome)("placeholder",e.lcZ(13,19,"bo.sistemazione.proprieta.preparazioneCameraWelcome")),e.xp6(4),e.Q6J("ngIf",t.modelEdit.sistemazione.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.sistemazione.oid||t.modelEdit.sistemazione.oid<=0),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.sistemazioniXLingua),e.xp6(3),e.Oqu(e.lcZ(23,21,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(27,23,"globals.annulla")))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.JJ,_.On,Me.P,ne.d,Ge.c,z.X$]});class Ea extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","immagine","icona","nome","delete"]}ngOnInit(){this.headerService.setTitle("sbm.configurazione.sistemazioni.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getSistemazioni().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.sistemazione=new v.HYq(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.sistemazione=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}function Rj(i,o){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Fj(i,o){1&i&&(e.TgZ(0,"div")(1,"div",35)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.configurazione.upSellingRichiesti.nessunUpSelling")))}function Hj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneUpSelling.proprieta.upSelling")))}function Kj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.upSelling?null:t.upSelling.nome)}}function Gj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.cliente")))}function $j(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.prenotazione||null==t.prenotazione.cliente?null:t.prenotazione.cliente.ragioneSociale)}}function Bj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneUpSelling.proprieta.prenotazione")))}function Vj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.prenotazione&&t.prenotazione.codicePrenotazione?null==t.prenotazione?null:t.prenotazione.codicePrenotazione:null==t.prenotazione?null:t.prenotazione.codiceOTA)}}function Xj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneUpSelling.proprieta.tipoCamera")))}function jj(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.tipoCamera?null:t.tipoCamera.nome)}}function Wj(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneUpSelling.proprieta.statoUpSelling")))}function eW(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoUpSelling,t.statoUpSelling,"statoUpSelling")))}}function tW(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneUpSelling.proprieta.prezzo")))}function iW(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.prezzo))}}function oW(i,o){1&i&&e._UZ(0,"mat-header-cell")}function nW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",36)(1,"button",37),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.delete(l))}),e.TgZ(2,"i",38),e._uU(3,"delete"),e.qZA()()()}}function aW(i,o){1&i&&e._UZ(0,"mat-header-row",39)}function lW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",40),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Ea.\u0275fac=function(o){return new(o||Ea)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Ea.\u0275cmp=e.Xpm({type:Ea,selectors:[["app-sistemazioni"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:30,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","immagine"],["class","img-cell",4,"matHeaderCellDef"],["class","img-cell",4,"matCellDef"],["matColumnDef","icona"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"sistemazione","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"img-cell"],["class","m-2 immagine-sistemazione",3,"src",4,"ngIf"],[1,"m-2","immagine-sistemazione",3,"src"],[3,"class",4,"ngIf"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,qj,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,Pj,1,0,"mat-header-cell",8),e.YNc(10,kj,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,Sj,3,3,"mat-header-cell",11),e.YNc(13,Jj,2,1,"mat-cell",12),e.BQk(),e.ynx(14,13),e.YNc(15,Ej,3,3,"mat-header-cell",8),e.YNc(16,Oj,2,1,"mat-cell",14),e.BQk(),e.ynx(17,15),e.YNc(18,Lj,3,3,"mat-header-cell",8),e.YNc(19,Dj,2,1,"mat-cell",14),e.BQk(),e.ynx(20,16),e.YNc(21,Ij,1,0,"mat-header-cell",17),e.YNc(22,Qj,4,0,"mat-cell",18),e.BQk(),e.YNc(23,Uj,1,0,"mat-header-row",19),e.YNc(24,Yj,1,1,"mat-row",20),e.qZA()(),e.TgZ(25,"div",21)(26,"mat-paginator",22),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(27,"div",23)(28,"app-sistemazioni-edit",24,25),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("sistemazione",t.sistemazione))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Ja,z.X$],styles:[".img-cell[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]});class Na extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.utility=n,this.containerService=a,this.displayedColumns=["upSelling","cliente","prenotazione","tipoCamera","stato","prezzo","delete"],this.enumStatoUpSelling=c.JX}ngOnInit(){this.headerService.setTitle("sbm.configurazione.upSellingRichiesti.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("prenotazione.arrivo",c.Hp.GreaterEqual,"",c.NM.Date)),this.filters.push(new d.wn$("prenotazione.arrivo",c.Hp.LowerEqual,"",c.NM.Date)),this.filters.push(new d.wn$(["prenotazione.codicePrenotazione","prenotazione.codiceOTA"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("statoUpSelling",c.Hp.Equal,"",c.NM.Number))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getUpSellingsRichiestiFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(!n),this.paginator.firstPage()}delete(o){this.showDialogConfirm("sbm.configurazione.upSellingRichiesti.eliminareUpSelling").then(t=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setRichiestaUpSelling(o).subscribe(()=>{this.download()})},t=>{})}ngOnDestroy(){this.headerService.clearTitle()}}Na.\u0275fac=function(o){return new(o||Na)(e.Y36(A.s),e.Y36(ie.r),e.Y36(C.t),e.Y36(te.J))},Na.\u0275cmp=e.Xpm({type:Na,selectors:[["app-up-selling-richiesti"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:56,vars:27,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"value","dateChange"],["matSuffix","",3,"for"],["picker",""],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["codiceSearch",""],[3,"placeholder","value","selectionChange"],["statoUpSellingSelect",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","upSelling"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","cliente"],["matColumnDef","prenotazione"],["matColumnDef","tipoCamera"],["matColumnDef","stato"],["matColumnDef","prezzo"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(13);return e.KtG(l.open())}),e.TgZ(9,"input",6),e.NdJ("dateChange",function(l){return null!=l.value?t.filters[0].value=t.getDate(l.value):null}),e.qZA(),e.TgZ(10,"input",7),e.NdJ("dateChange",function(l){return null!=l.value?t.onSearch(1,t.getDate(l.value)):null}),e.qZA()(),e._UZ(11,"mat-datepicker-toggle",8)(12,"mat-date-range-picker",null,9),e.qZA()(),e.TgZ(14,"div",3)(15,"mat-form-field",4)(16,"input",10,11),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(17);return e.KtG(t.onSearch(2,l.value,!1))}),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"div",3)(20,"mat-form-field",4)(21,"mat-select",12,13),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(22);return e.KtG(t.onSearch(3,l.value))}),e.ALo(23,"translate"),e._UZ(24,"mat-option",14),e.YNc(25,Rj,3,4,"mat-option",15),e.ALo(26,"selectEnum"),e.qZA()()()()(),e.YNc(27,Fj,5,3,"div",16),e.TgZ(28,"div",17)(29,"div",18)(30,"mat-table",19),e.ynx(31,20),e.YNc(32,Hj,3,3,"mat-header-cell",21),e.YNc(33,Kj,2,1,"mat-cell",22),e.BQk(),e.ynx(34,23),e.YNc(35,Gj,3,3,"mat-header-cell",21),e.YNc(36,$j,2,1,"mat-cell",22),e.BQk(),e.ynx(37,24),e.YNc(38,Bj,3,3,"mat-header-cell",21),e.YNc(39,Vj,2,1,"mat-cell",22),e.BQk(),e.ynx(40,25),e.YNc(41,Xj,3,3,"mat-header-cell",21),e.YNc(42,jj,2,1,"mat-cell",22),e.BQk(),e.ynx(43,26),e.YNc(44,Wj,3,3,"mat-header-cell",21),e.YNc(45,eW,3,3,"mat-cell",22),e.BQk(),e.ynx(46,27),e.YNc(47,tW,3,3,"mat-header-cell",21),e.YNc(48,iW,3,3,"mat-cell",22),e.BQk(),e.ynx(49,28),e.YNc(50,oW,1,0,"mat-header-cell",21),e.YNc(51,nW,4,0,"mat-cell",29),e.BQk(),e.YNc(52,aW,1,0,"mat-header-row",30),e.YNc(53,lW,1,1,"mat-row",31),e.qZA()(),e.TgZ(54,"div",32)(55,"mat-paginator",33),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()}if(2&o){const n=e.MAs(13);e.xp6(6),e.Oqu(e.lcZ(7,18,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("value",t.filters[0].value),e.xp6(1),e.Q6J("value",t.filters[1].value),e.xp6(1),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(18,20,"bo.prenotazione.proprieta.codicePrenotazione")),e.Q6J("value",t.filters[2].value),e.xp6(5),e.s9C("placeholder",e.lcZ(23,22,"bo.prenotazioneUpSelling.proprieta.statoUpSelling")),e.Q6J("value",t.filters[3].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(26,24,t.enumStatoUpSelling,"statoUpSelling")),e.xp6(2),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,M.$V,M.nX,b.k0,re.CK,y.nW,y.wx,y.zY,y.By,y._g,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Te.A,ke.f,z.X$]});const rW=["panel"];function cW(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function sW(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.nome," ")}}function pW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",28)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-editor",34),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw();return e.KtG(r.modelEdit.upSellingXLingua[l].testoIniziale=a)}),e.qZA(),e.TgZ(5,"div",28),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"app-editor",34),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw();return e.KtG(r.modelEdit.upSellingXLingua[l].note=a)}),e.qZA()()}if(2&i){const t=e.oxw(2).index,n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,6,"bo.upSellingXLingua.proprieta.testoIniziale")),e.xp6(2),e.Q6J("id","testoiniziale"+t)("text",n.modelEdit.upSellingXLingua[t].testoIniziale),e.xp6(2),e.Oqu(e.lcZ(7,8,"bo.upSellingXLingua.proprieta.note")),e.xp6(2),e.Q6J("id","note"+t)("text",n.modelEdit.upSellingXLingua[t].note)}}function dW(i,o){if(1&i&&(e.TgZ(0,"mat-tab",26),e.YNc(1,pW,9,10,"div",27),e.qZA()),2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(1),e.Q6J("ngIf",l.selectedIndex1==a)}}function mW(i,o){if(1&i&&(e.ynx(0),e.YNc(1,dW,2,2,"mat-tab",33),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function _W(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",45)(1,"mat-checkbox",46),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(a?l.masterToggleTrattamenti():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selectionTrattamenti.hasValue()&&t.isAllSelectedTrattamenti())("indeterminate",t.selectionTrattamenti.hasValue()&&!t.isAllSelectedTrattamenti())}}function uW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",47)(1,"mat-checkbox",48),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(a?p.selectionTrattamenti.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionTrattamenti.isSelected(t.oid))}}function gW(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.trattamento.proprieta.nome")))}function hW(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function fW(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function CW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",50),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function bW(i,o){if(1&i&&(e.TgZ(0,"div",28)(1,"div",35)(2,"mat-table",36),e.ynx(3,37),e.YNc(4,_W,2,2,"mat-header-cell",38),e.YNc(5,uW,2,1,"mat-cell",39),e.BQk(),e.ynx(6,40),e.YNc(7,gW,3,3,"mat-header-cell",41),e.YNc(8,hW,2,1,"mat-cell",42),e.BQk(),e.YNc(9,fW,1,0,"mat-header-row",43),e.YNc(10,CW,1,1,"mat-row",44),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.dataSourceTrattamenti),e.xp6(7),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function vW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",45)(1,"mat-checkbox",46),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(a?l.masterToggleArticoli():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selectionArticoli.hasValue()&&t.isAllSelectedArticoli())("indeterminate",t.selectionArticoli.hasValue()&&!t.isAllSelectedArticoli())}}function TW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",47)(1,"mat-checkbox",48),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(a?p.selectionArticoli.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionArticoli.isSelected(t.oid))}}function xW(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.articolo.proprieta.nome")))}function ZW(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function AW(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function wW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",50),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function zW(i,o){if(1&i&&(e.TgZ(0,"div",28)(1,"div",35)(2,"mat-table",36),e.ynx(3,37),e.YNc(4,vW,2,2,"mat-header-cell",38),e.YNc(5,TW,2,1,"mat-cell",39),e.BQk(),e.ynx(6,40),e.YNc(7,xW,3,3,"mat-header-cell",41),e.YNc(8,ZW,2,1,"mat-cell",42),e.BQk(),e.YNc(9,AW,1,0,"mat-header-row",43),e.YNc(10,wW,1,1,"mat-row",44),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.dataSourceArticoli),e.xp6(7),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function MW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}const qW=function(i){return{"color-pink":i}},PW=function(i){return{"mb-3 border-bottom":i}};class Oa extends f.H{set trattamenti(o){this.dataSourceTrattamenti=new s.r4(o)}set articoli(o){this.dataSourceArticoli=new s.r4(o)}set upSelling(o){if(null!=o){if(this.selectedIndex=0,this.selectedIndex1=0,this.selectionTrattamenti=new me.Ov(!0,[]),this.selectionArticoli=new me.Ov(!0,[]),this.selectedTipiCamera=[],this.panel.close(),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},200),this.modelEdit=new d.slp,this.modelEdit.upSelling=o,null!=this.modelEdit.upSelling){if(this.modelEdit.upSelling.oidTipiCamereUpgrade){let t=this.modelEdit.upSelling.oidTipiCamereUpgrade.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.tipiCamera.findIndex(a=>a.oid==+n)&&this.selectedTipiCamera.push(+n)}if(this.modelEdit.upSelling.oidTrattamentiAbilitati){let t=this.modelEdit.upSelling.oidTrattamentiAbilitati.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.dataSourceTrattamenti.data.findIndex(a=>a.oid==+n)&&this.selectionTrattamenti.toggle(+n)}if(this.modelEdit.upSelling.oidArticoliAbilitati){let t=this.modelEdit.upSelling.oidArticoliAbilitati.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.dataSourceArticoli.data.findIndex(a=>a.oid==+n)&&this.selectionArticoli.toggle(+n)}}for(let t of this.lingue){let n=new v.ULO;n.lingua=t,this.modelEdit.upSellingXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getUpSellingsXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.upSellingXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.upSellingXLingua[a].upSelling=n.upSelling,this.modelEdit.upSellingXLingua[a].testoIniziale=n.testoIniziale,this.modelEdit.upSellingXLingua[a].note=n.note)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.modelEdit=new d.slp,this.editing=!1,this.selectedIndex=0,this.selectedIndex1=0,this.displayedColumns=["nome","select"],this.selectionTrattamenti=new me.Ov(!0,[]),this.selectionArticoli=new me.Ov(!0,[]),this.enumTipoPrenotazione=c.DS,this.selectedTipiCamera=[],this.backEvent=new e.vpe}save(){this.modelEdit.upSelling.arrivoDal=this.getDate(this.modelEdit.upSelling.arrivoDal),this.modelEdit.upSelling.arrivoAl=this.getDate(this.modelEdit.upSelling.arrivoAl),this.modelEdit.upSelling.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.upSelling.oidTipiCamereUpgrade=this.selectedTipiCamera.join(";"),this.modelEdit.upSelling.oidTrattamentiAbilitati=this.selectionTrattamenti.selected.toString().replace(/,/g,";"),this.modelEdit.upSelling.oidArticoliAbilitati=this.selectionArticoli.selected.toString().replace(/,/g,";");for(let o of this.modelEdit.upSellingXLingua)o.upSelling=this.modelEdit.upSelling;this.setIsLoading(!0),this.apiService.setUpSelling(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.upSelling.upSellingSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione.upSelling.eliminareUpSelling").then(t=>{null!=o&&(this.modelEdit.upSelling=o),this.modelEdit.upSelling.isDeleted=!0,this.setIsLoading(!0),this.apiService.setUpSelling(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}isAllSelectedTrattamenti(){return this.selectionTrattamenti.selected.length==this.dataSourceTrattamenti.data.length}masterToggleTrattamenti(){this.isAllSelectedTrattamenti()?this.selectionTrattamenti.clear():this.dataSourceTrattamenti.data.forEach(o=>this.selectionTrattamenti.select(o.oid))}isAllSelectedArticoli(){return this.selectionArticoli.selected.length==this.dataSourceArticoli.data.length}masterToggleArticoli(){this.isAllSelectedArticoli()?this.selectionArticoli.clear():this.dataSourceArticoli.data.forEach(o=>this.selectionArticoli.select(o.oid))}isAllSelectedTipiCamera(o){return o.selected.length==this.tipiCamera.length}isAllDeselectedTipiCamera(o){return 0==o.selected.length}onSelectDeselectAllClickTipiCamera(o){this.isAllSelectedTipiCamera(o)?this.selectedTipiCamera=[]:this.selectedTipiCamera=this.tipiCamera.map(t=>t.oid)}}function kW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",26)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.upSelling.nessunUpSelling")))}function SW(i,o){1&i&&e._UZ(0,"mat-header-cell")}function yW(i,o){1&i&&(e.TgZ(0,"mat-cell",27)(1,"button",28)(2,"i",29),e._uU(3,"edit"),e.qZA()()())}function JW(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.upSelling.proprieta.nome"),""))}function EW(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function NW(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.upSelling.proprieta.arrivoDal"),""))}function OW(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.arrivoDal,"dd/MM/yyyy"))}}function LW(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.upSelling.proprieta.arrivoAl"),""))}function DW(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.arrivoAl,"dd/MM/yyyy"))}}function IW(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.upSelling.proprieta.tipoPrenotazione"),""))}function QW(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(null!=t.tipoPrenotazione?e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoPrenotazione,t.tipoPrenotazione,"tipoPrenotazione")):"")}}function UW(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.upSelling.proprieta.isAttivo"),""))}function YW(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",30),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)("disabled",!0)}}function RW(i,o){1&i&&e._UZ(0,"mat-header-cell",31)}function FW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",32)(1,"button",33),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(35);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",34),e._uU(3,"delete"),e.qZA()()()}}function HW(i,o){1&i&&e._UZ(0,"mat-header-row",35)}function KW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",36),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Oa.\u0275fac=function(o){return new(o||Oa)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},Oa.\u0275cmp=e.Xpm({type:Oa,selectors:[["app-up-selling-edit"]],viewQuery:function(o,t){if(1&o&&e.Gf(rW,5),2&o){let n;e.iGM(n=e.CRH())&&(t.panel=n.first)}},inputs:{tipiCamera:"tipiCamera",trattamenti:"trattamenti",articoli:"articoli",upSelling:"upSelling"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:86,vars:98,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[1,"col-4"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["arrivoDal",""],["arrivoAl",""],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"border","mat-elevation-z0"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectTipiCamera",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"border","mat-elevation-z0","mt-3"],[1,"mat-elevation-z0","border","rounded","up-selling-traduzioni-panel","mt-3","mb-3"],["panel",""],[3,"ngClass"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"tab-group-container"],[3,"label"],["class","mt-3",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],[3,"label",4,"ngIf"],[3,"id","text","textChange"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.nome=l}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-checkbox",4),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.isAttivo=l}),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",0)(10,"div",5)(11,"mat-form-field",2)(12,"input",6),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.arrivoDal=l}),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"mat-datepicker-toggle",7)(15,"mat-datepicker",8,9),e.qZA()(),e.TgZ(17,"div",5)(18,"mat-form-field",2)(19,"input",6),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.arrivoAl=l}),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"mat-datepicker-toggle",7)(22,"mat-datepicker",8,10),e.qZA()(),e.TgZ(24,"div",5)(25,"mat-form-field",2)(26,"mat-select",11),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.tipoPrenotazione=l}),e.ALo(27,"translate"),e.YNc(28,cW,3,4,"mat-option",12),e.ALo(29,"selectEnum"),e.qZA()()()(),e.TgZ(30,"mat-card",13)(31,"mat-card-title"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"app-view-select",14),e.NdJ("valueChange",function(l){return t.modelEdit.upSelling.tipoCameraPrenotazione=l}),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"mat-form-field",2)(37,"mat-select",15,16),e.NdJ("ngModelChange",function(l){return t.selectedTipiCamera=l}),e.ALo(39,"translate"),e.TgZ(40,"mat-checkbox",17),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(38);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickTipiCamera(r))}),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.YNc(43,sW,2,2,"mat-option",12),e.qZA()(),e.TgZ(44,"mat-form-field",2)(45,"input",18),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.disponibiliMinime=l}),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"mat-form-field",2)(48,"input",18),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.durataMinimaSoggiorno=l}),e.ALo(49,"translate"),e.qZA()(),e.TgZ(50,"mat-form-field",2)(51,"input",18),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.sconto=l}),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"mat-form-field",2)(54,"input",18),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.prezzoCameraUpgrade=l}),e.ALo(55,"translate"),e.qZA()()(),e.TgZ(56,"mat-card",19)(57,"mat-card-title"),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"mat-form-field",2)(61,"input",18),e.NdJ("ngModelChange",function(l){return t.modelEdit.upSelling.scontoArticoli=l}),e.ALo(62,"translate"),e.qZA()()(),e.TgZ(63,"mat-expansion-panel",20,21)(65,"mat-expansion-panel-header",22),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"mat-tab-group",23),e.NdJ("selectedIndexChange",function(l){return t.selectedIndex1=l}),e.YNc(69,mW,2,1,"ng-container",24),e.qZA()(),e.TgZ(70,"div",25)(71,"mat-tab-group",23),e.NdJ("selectedIndexChange",function(l){return t.selectedIndex=l}),e.TgZ(72,"mat-tab",26),e.ALo(73,"translate"),e.YNc(74,bW,11,4,"div",27),e.qZA(),e.TgZ(75,"mat-tab",26),e.ALo(76,"translate"),e.YNc(77,zW,11,4,"div",27),e.qZA()()(),e.TgZ(78,"div",28)(79,"button",29),e.NdJ("click",function(){return t.save()}),e._uU(80),e.ALo(81,"translate"),e.qZA(),e.YNc(82,MW,3,3,"button",30),e.TgZ(83,"button",31),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(84),e.ALo(85,"translate"),e.qZA()()}if(2&o){const n=e.MAs(16),a=e.MAs(23),l=e.MAs(38),r=e.MAs(64);e.xp6(3),e.s9C("placeholder",e.lcZ(4,51,"bo.upSelling.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.upSelling.nome),e.xp6(3),e.Q6J("ngModel",t.modelEdit.upSelling.isAttivo),e.xp6(1),e.Oqu(e.lcZ(8,53,"bo.upSelling.proprieta.isAttivo")),e.xp6(5),e.s9C("placeholder",e.lcZ(13,55,"bo.upSelling.proprieta.arrivoDal")),e.Q6J("matDatepicker",n)("ngModel",t.modelEdit.upSelling.arrivoDal),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.upSelling.arrivoDal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(20,57,"bo.upSelling.proprieta.arrivoAl")),e.Q6J("matDatepicker",a)("ngModel",t.modelEdit.upSelling.arrivoAl),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.upSelling.arrivoAl)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(27,59,"bo.upSelling.proprieta.tipoPrenotazione")),e.Q6J("ngModel",t.modelEdit.upSelling.tipoPrenotazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(29,61,t.enumTipoPrenotazione,"tipoPrenotazione")),e.xp6(4),e.hij(" ",e.lcZ(33,64,"sbm.configurazione.upSelling.upSellingCamera")," "),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("value",t.modelEdit.upSelling.tipoCameraPrenotazione)("placeholder",e.lcZ(35,66,"bo.upSelling.proprieta.tipoCameraPrenotazione")),e.xp6(3),e.Q6J("placeholder",e.lcZ(39,68,"sbm.configurazione.upSelling.tipiCameraUpgrade"))("ngModel",t.selectedTipiCamera),e.xp6(3),e.Q6J("ngClass",e.VKq(94,qW,t.isAllSelectedTipiCamera(l)))("checked",t.isAllSelectedTipiCamera(l))("indeterminate",!t.isAllSelectedTipiCamera(l)&&!t.isAllDeselectedTipiCamera(l)),e.xp6(1),e.hij(" ",e.lcZ(42,70,"globals.selezionaDeselezionaTutti")," "),e.xp6(2),e.Q6J("ngForOf",t.tipiCamera),e.xp6(2),e.s9C("placeholder",e.lcZ(46,72,"bo.upSelling.proprieta.disponibiliMinime")),e.Q6J("ngModel",t.modelEdit.upSelling.disponibiliMinime),e.xp6(3),e.s9C("placeholder",e.lcZ(49,74,"bo.upSelling.proprieta.durataMinimaSoggiorno")),e.Q6J("ngModel",t.modelEdit.upSelling.durataMinimaSoggiorno),e.xp6(3),e.s9C("placeholder",e.lcZ(52,76,"bo.upSelling.proprieta.sconto")),e.Q6J("ngModel",t.modelEdit.upSelling.sconto),e.xp6(3),e.s9C("placeholder",e.lcZ(55,78,"bo.upSelling.proprieta.prezzoCameraUpgrade")),e.Q6J("ngModel",t.modelEdit.upSelling.prezzoCameraUpgrade),e.xp6(4),e.hij(" ",e.lcZ(59,80,"sbm.configurazione.upSelling.upSellingSupplementiExtra")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(62,82,"bo.upSelling.proprieta.scontoArticoli")),e.Q6J("ngModel",t.modelEdit.upSelling.scontoArticoli),e.xp6(4),e.Q6J("ngClass",e.VKq(96,PW,r.expanded)),e.xp6(1),e.hij(" ",e.lcZ(67,84,"globals.traduzioni")," "),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex1),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.upSellingXLingua),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(73,86,"sbm.configurazione.upSelling.trattamentiAbilitati")),e.xp6(2),e.Q6J("ngIf",0==t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(76,88,"sbm.configurazione.upSelling.articoliAbilitati")),e.xp6(2),e.Q6J("ngIf",1==t.selectedIndex),e.xp6(3),e.Oqu(e.lcZ(81,90,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(85,92,"globals.annulla"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,qe.S$,qe.mi,ee.SK,ee.R7,ye.ib,ye.yz,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.On,Me.P,ne.d,Te.A,z.X$],styles:[".tab-group-container[_ngcontent-%COMP%]{min-height:450px}.mat-table[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-top:10px}  .up-selling-traduzioni-panel .mat-expansion-panel-body{min-height:400px!important}"]});class La extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","arrivoDal","arrivoAl","tipoPrenotazione","isAttivo","delete"],this.tipiCamera=[],this.trattamenti=[],this.articoli=[],this.enumTipoPrenotazione=c.DS}ngOnInit(){this.headerService.setTitle("sbm.configurazione.upSelling.title"),this.setIsLoading(!0),this.apiService.getUpSellingView().subscribe(o=>{this.tipiCamera=o.data.tipiCamera,this.trattamenti=o.data.trattamenti,this.articoli=o.data.articoli,this.download()})}ngOnDestroy(){this.headerService.clearTitle()}download(){this.setIsLoading(!0),this.apiService.getUpSellings().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.upSelling=new v.KHR(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.upSelling=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}La.\u0275fac=function(o){return new(o||La)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},La.\u0275cmp=e.Xpm({type:La,selectors:[["app-up-selling"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:36,vars:13,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","arrivoDal"],["matColumnDef","arrivoAl"],["matColumnDef","tipoPrenotazione"],["matColumnDef","isAttivo"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"upSelling","tipiCamera","trattamenti","articoli","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary",3,"checked","disabled"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,kW,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,SW,1,0,"mat-header-cell",8),e.YNc(10,yW,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,JW,3,3,"mat-header-cell",8),e.YNc(13,EW,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,NW,3,3,"mat-header-cell",8),e.YNc(16,OW,3,4,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,LW,3,3,"mat-header-cell",8),e.YNc(19,DW,3,4,"mat-cell",11),e.BQk(),e.ynx(20,14),e.YNc(21,IW,3,3,"mat-header-cell",8),e.YNc(22,QW,3,3,"mat-cell",11),e.BQk(),e.ynx(23,15),e.YNc(24,UW,3,3,"mat-header-cell",8),e.YNc(25,YW,2,2,"mat-cell",11),e.BQk(),e.ynx(26,16),e.YNc(27,RW,1,0,"mat-header-cell",17),e.YNc(28,FW,4,0,"mat-cell",18),e.BQk(),e.YNc(29,HW,1,0,"mat-header-row",19),e.YNc(30,KW,1,1,"mat-row",20),e.qZA()(),e.TgZ(31,"div",21)(32,"mat-paginator",22),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(33,"div",23)(34,"app-up-selling-edit",24,25),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("upSelling",t.upSelling)("tipiCamera",t.tipiCamera)("trattamenti",t.trattamenti)("articoli",t.articoli))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Oa,m.uU,z.X$]});class Da{constructor(){}}function GW(i,o){if(1&i&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.nome," ")}}function $W(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.generaCodiceGoogleAuthenticator())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.utenti.visualizzaQrCodeGoogleAuthenticator")))}function BW(i,o){1&i&&(e.TgZ(0,"div",22)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.utenti.nessunPermesso")))}function VW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",35),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterTogglePermessi():null)}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("checked",t.selectionPermessi.hasValue()&&t.isAllSelectedPermessi())("indeterminate",t.selectionPermessi.hasValue()&&!t.isAllSelectedPermessi())}}function XW(i,o){if(1&i&&(e.TgZ(0,"mat-header-cell",33),e.YNc(1,VW,1,2,"mat-checkbox",34),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.permessiFilter)}}function jW(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",36)(1,"mat-checkbox",37),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return a.preventDefault(),a.stopPropagation(),e.KtG(p.selectionPermessi.toggle(r))}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selectionPermessi.isSelected(t))}}function WW(i,o){1&i&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.configurazione.utenti.permesso"),""))}function eee(i,o){if(1&i&&(e.TgZ(0,"mat-cell",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoPermesso,t,"tipoPermesso")))}}function tee(i,o){1&i&&e._UZ(0,"mat-header-row",39)}function iee(i,o){1&i&&e._UZ(0,"mat-row")}Da.\u0275fac=function(o){return new(o||Da)},Da.\u0275cmp=e.Xpm({type:Da,selectors:[["app-google-authenticator-qr-code-modal"]],inputs:{codice:"codice",qrCode:"qrCode"},decls:10,vars:6,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"pr-3","pl-3","pt-3"],[1,"text-wrap","mt-2","mb-0"],[3,"src"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"h5",3),e._uU(8),e.qZA()(),e._UZ(9,"img",4)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(5),e.Oqu(e.lcZ(6,4,"sbm.configurazione.utenti.googleAuthenticatorHelp")),e.xp6(3),e.Oqu(t.codice),e.xp6(1),e.Q6J("src",t.qrCode,e.LSH))},dependencies:[h.eB,F.aO,z.X$],styles:["img[_ngcontent-%COMP%]{width:520px;height:520px}"]});const ss=function(){return["nome","select"]};function oee(i,o){if(1&i&&(e.TgZ(0,"div",23)(1,"mat-table",24),e.ynx(2,25),e.YNc(3,XW,2,1,"mat-header-cell",26),e.YNc(4,jW,2,1,"mat-cell",27),e.BQk(),e.ynx(5,28),e.YNc(6,WW,3,3,"mat-header-cell",29),e.YNc(7,eee,3,3,"mat-cell",30),e.BQk(),e.YNc(8,tee,1,0,"mat-header-row",31),e.YNc(9,iee,1,0,"mat-row",32),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.permessiFiltered),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(4,ss))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(5,ss))}}function nee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}class Ia extends f.H{set _utente(o){if(null!=o){if(this.utente=o,null==this.utente.utente.ubicazioneIstat&&(this.utente.utente.ubicazioneIstat=new v.Dgg(-1)),this.permessiFilter=null,this.permessiFiltered=this.permessi,this.permessi.forEach(t=>this.selectionPermessi.select(t)),null!=this.utente.permessi)for(let t of this.permessi)(this.permessiDisabilitatiDefault.includes(t)&&!this.utente.permessi.includes(t)||!this.permessiDisabilitatiDefault.includes(t)&&this.utente.permessi.includes(t))&&this.selectionPermessi.toggle(t);this.containerService.scrollToTop()}}constructor(o,t,n,a,l,r,p){super(),this.apiService=o,this.sessionService=t,this.navigationService=n,this.localStorage=a,this.containerService=l,this.localizationService=r,this.utility=p,this.backEvent=new e.vpe,this.permessi=[],this.permessiFiltered=[],this.selectionPermessi=new me.Ov(!0,[]),this.enumTipoPermesso=c.Zr,this.enumRuoloUtente=c.Gt,this.ubicazioniIstat=[],this.permessiDisabilitatiDefault=[c.Zr.ModificaModalitaPagamentoPrenotazione]}ngOnInit(){this.permessi=Object.keys(this.enumTipoPermesso).map(o=>this.enumTipoPermesso[o]).filter(o=>!isNaN(o)),this.permessiFiltered=this.permessi,this.apiService.getUbicazioniIstatAssociateAPortale().subscribe(o=>{this.ubicazioniIstat=o.data})}save(){this.setIsLoading(!0);let o=new d.if_;o.utente=this.utente.utente,o.permessi=[];for(let t of this.permessi)if(this.permessiDisabilitatiDefault.includes(t)&&this.selectionPermessi.isSelected(t)||!this.permessiDisabilitatiDefault.includes(t)&&!this.selectionPermessi.isSelected(t)){let n=new v.PCP;n.tipoPermesso=t,n.utente=this.utente.utente,o.permessi.push(n)}this.apiService.setPermessiUtente(o).subscribe(t=>{this.utente.utente.oid==this.sessionService.getOidUtente()?(null!=this.utente.utente.ubicazioneIstat&&this.utente.utente.ubicazioneIstat.oid>0?this.sessionService.sessione.utente.ubicazioneIstat=this.utility.findItemByOid(this.ubicazioniIstat,this.utente.utente.ubicazioneIstat.oid):this.sessionService.sessione.utente.ubicazioneIstat=null,this.sessionService.sessione.utente.permessi=t.data,this.localStorage.set(this.sessionService.SESSION_KEY,this.sessionService.sessione),this.navigationService.init().then(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.utenti.utenteSalvato").then(()=>{let n=this.sessionService.getPermessiUtente();null!=n&&n.includes("utenti")?this.utility.openPageSbm("dashboard"):this.backEvent.emit(),this.navigationService.resetCategory()})})):(this.setIsLoading(!1),this.showInfo("sbm.configurazione.utenti.utenteSalvato").then(()=>{this.backEvent.emit()}))})}delete(o){this.showDialogConfirm("sbm.configurazione.utenti.eliminareUtente").then(t=>{null!=o&&(this.utente.utente=o,null==this.utente.utente.ubicazioneIstat&&(this.utente.utente.ubicazioneIstat=new v.Dgg(-1))),this.utente.utente.isDeleted=!0,this.setIsLoading(!0),this.apiService.setUtente(this.utente.utente).subscribe(()=>{this.backEvent.emit()})},t=>{})}isAllSelectedPermessi(){return this.selectionPermessi.selected.length==this.permessi.length}masterTogglePermessi(){this.isAllSelectedPermessi()?this.selectionPermessi.clear():this.permessi.forEach(o=>this.selectionPermessi.select(o))}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.utente.utente.urlImmagine,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.vK5;l.oid=this.utente.utente.oid,l.base64=a,this.apiService.setImmagineUtente(l).subscribe(r=>{null!=r.data&&(this.utente.utente.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.vK5;t.oid=this.utente.utente.oid,t.base64="",this.apiService.setImmagineUtente(t).subscribe(n=>{null!=n.data&&(this.utente.utente.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}onSearch(){this.permessiFilter?this.permessiFiltered=this.permessi.filter(o=>this.localizationService.getTranslationSync(this.getEnumKeyTranslation(c.Zr,o,"tipoPermesso")).toLowerCase().includes(this.permessiFilter.toLowerCase())):this.permessiFiltered=this.permessi}generaCodiceGoogleAuthenticator(){this.setIsLoading(!0),this.apiService.generaCodiceGoogleAuthenticator(this.utente.utente.oid).subscribe(o=>{if(this.setIsLoading(!1),o.data.codice&&o.data.qrCode){let t=new d.Zpt;t.width="520px",t.panelClass="no-padding-dialog";let a=this.showModalDialog(Da,t).componentInstance;a.codice=o.data.codice,a.qrCode=o.data.qrCode}})}}function aee(i,o){1&i&&(e.TgZ(0,"div",33)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.configurazione.utenti.nessunUtente")))}function lee(i,o){1&i&&e._UZ(0,"mat-header-cell")}function ree(i,o){1&i&&(e.TgZ(0,"mat-cell",34)(1,"button",35)(2,"i",36),e._uU(3,"edit"),e.qZA()()())}function cee(i,o){1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.utente.proprieta.username"),""))}function see(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.utente.username," ")}}function pee(i,o){1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.utente.proprieta.ubicazioneIstat"),""))}function dee(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null==t.utente.ubicazioneIstat?null:t.utente.ubicazioneIstat.nome," ")}}function mee(i,o){1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.utente.proprieta.ruolo"),""))}function _ee(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumRuolo,t.utente.ruolo,"ruolo"))," ")}}function uee(i,o){1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.utente.proprieta.descrizione"),""))}function gee(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.utente.descrizione," ")}}function hee(i,o){1&i&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.utente.proprieta.isAttivo"),""))}function fee(i,o){if(1&i&&(e.TgZ(0,"mat-cell",39),e._UZ(1,"mat-checkbox",40),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("disabled",!0)("checked",t.utente.isAttivo)}}function Cee(i,o){1&i&&e._UZ(0,"mat-header-cell")}function bee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.sblocca(l))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.configurazione.utenti.sblocca")," "))}function vee(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,bee,3,3,"button",41),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isAccountBloccato)}}function Tee(i,o){1&i&&e._UZ(0,"mat-header-cell")}function xee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit;e.oxw();const r=e.MAs(43);return a.stopPropagation(),e.KtG(r.delete(l.utente))}),e.TgZ(1,"i",46),e._uU(2,"delete"),e.qZA()()}}function Zee(i,o){if(1&i&&(e.TgZ(0,"mat-cell",43),e.YNc(1,xee,3,0,"button",44),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.utente.oid!=n.sessionService.getOidUtente())}}function Aee(i,o){1&i&&e._UZ(0,"mat-header-row",47)}function wee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",48),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.utente.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.utente.oid?t.utente.oid:"")}}Ia.\u0275fac=function(o){return new(o||Ia)(e.Y36(A.s),e.Y36(j.m),e.Y36(Ae.f),e.Y36(lt.n),e.Y36(te.J),e.Y36(Oe.o),e.Y36(C.t))},Ia.\u0275cmp=e.Xpm({type:Ia,selectors:[["app-utenti-edit"]],inputs:{_utente:"_utente"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:45,vars:40,consts:[[1,"font-weight-bold"],[1,"row","mt-3","mb-3"],[1,"col-6"],[3,"title","url","edit","delete"],[1,"row"],[1,"w-100"],[3,"ngModel","placeholder","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],["color","primary",1,"isAutenticazioneADueFattoriAttiva",3,"ngModel","ngModelChange","change"],["mat-flat-button","","color","primary","class","ml-4",3,"click",4,"ngIf"],[1,"row","mt-3"],[1,"col-4"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange","input"],["class","border rounded-lg p-3",4,"ngIf"],["class","mat-table-container-border-rounded mb-3",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","primary",1,"ml-4",3,"click"],[1,"border","rounded-lg","p-3"],[1,"mat-table-container-border-rounded","mb-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],["class","justify-content-start",4,"matHeaderCellDef"],["class","justify-content-start",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change",4,"ngIf"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click"],[1,"justify-content-start"],[1,"mat-table-header"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div")(1,"span",0),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"div")(6,"span",0),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",1)(12,"div",2)(13,"app-image",3),e.NdJ("edit",function(){return t.editImage()})("delete",function(){return t.deleteImage()}),e.qZA()()(),e.TgZ(14,"div",4)(15,"div",2)(16,"mat-form-field",5)(17,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.utente.utente.ubicazioneIstat.oid=a}),e.ALo(18,"translate"),e._UZ(19,"mat-option",7),e.YNc(20,GW,2,2,"mat-option",8),e.qZA()()(),e.TgZ(21,"div",2)(22,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.utente.utente.isAttivo=a}),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"div")(26,"mat-checkbox",10),e.NdJ("ngModelChange",function(a){return t.utente.utente.isAutenticazioneADueFattoriAttiva=a})("change",function(){return t.utente.utente.isAutenticazioneADueFattoriAttiva?t.generaCodiceGoogleAuthenticator():null}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.YNc(29,$W,3,3,"button",11),e.qZA(),e.TgZ(30,"div",12)(31,"div",13)(32,"mat-form-field",5)(33,"input",14),e.NdJ("ngModelChange",function(a){return t.permessiFilter=a})("input",function(){return t.onSearch()}),e.ALo(34,"translate"),e.qZA()()()(),e.YNc(35,BW,4,3,"div",15),e.YNc(36,oee,10,6,"div",16),e.TgZ(37,"div",17)(38,"button",18),e.NdJ("click",function(){return t.save()}),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.YNc(41,nee,3,3,"button",19),e.TgZ(42,"button",20),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(43),e.ALo(44,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,22,"bo.utente.proprieta.descrizione")+": "),e.xp6(2),e.hij(" ",t.utente.utente.descrizione?t.utente.utente.descrizione:"---","\n"),e.xp6(3),e.Oqu(e.lcZ(8,24,"bo.utente.proprieta.ruolo")+": "),e.xp6(2),e.hij(" ",e.lcZ(10,26,t.getEnumKeyTranslation(t.enumRuoloUtente,t.utente.utente.ruolo,"ruolo")),"\n"),e.xp6(4),e.Q6J("title","globals.immagine")("url",t.utente.utente.urlImmagine),e.xp6(4),e.Q6J("ngModel",t.utente.utente.ubicazioneIstat.oid)("placeholder",e.lcZ(18,28,"bo.utente.proprieta.ubicazioneIstat")),e.xp6(2),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",t.ubicazioniIstat),e.xp6(2),e.Q6J("ngModel",t.utente.utente.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(24,30,"bo.utente.proprieta.isAttivo")," "),e.xp6(3),e.Q6J("ngModel",t.utente.utente.isAutenticazioneADueFattoriAttiva),e.xp6(1),e.hij(" ",e.lcZ(28,32,"bo.utente.proprieta.isAutenticazioneADueFattoriAttiva")," "),e.xp6(2),e.Q6J("ngIf",t.utente.utente.isAutenticazioneADueFattoriAttiva),e.xp6(4),e.Q6J("placeholder",e.lcZ(34,34,"sbm.configurazione.utenti.filtraPermessi"))("ngModel",t.permessiFilter),e.xp6(2),e.Q6J("ngIf",0==t.permessiFiltered.length),e.xp6(1),e.Q6J("ngIf",t.permessiFiltered.length>0),e.xp6(3),e.Oqu(e.lcZ(40,36,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.sessionService.getRuoloUtente()==t.enumRuoloUtente.SuperAdmin&&t.utente.utente.oid!=t.sessionService.getOidUtente()),e.xp6(2),e.Oqu(e.lcZ(44,38,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.JJ,_.On,Ge.c,z.X$],styles:[".mat-table-container-border-rounded[_ngcontent-%COMP%]{max-height:500px}.isAutenticazioneADueFattoriAttiva[_ngcontent-%COMP%]{top:5px}"]});class Qa extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.sessionService=l,this.pageSize=25,this.displayedColumns=[],this.utente=new d.ruR,this.showTable=!0,this.enumRuolo=c.Gt,this.search=!1}ngOnInit(){this.displayedColumns=["edit","username","ubicazioneIstat","ruolo","descrizione","isAttivo"],this.sessionService.isAdmin()&&(this.displayedColumns.push("sblocca"),this.displayedColumns.push("delete")),this.headerService.setTitle("sbm.configurazione.utenti.title"),this.rq=new d.k$g,this.rq.skip=0,this.rq.take=this.pageSize,this.sorting=new d.aQR("username",c.nI.Desc),this.filters=[],this.filters.push(new d.wn$("username",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}onSearch(o,t){this.search=!0,this.filters[o].value=t,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onSortChange(o){this.sorting.field=o.active,this.sorting.type="asc"==o.direction?c.nI.Asc:c.nI.Desc,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}download(){this.search||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[this.sorting],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getUtentiFilter(this.rq).subscribe(o=>{this.data=o.data,this.totalRecords=o.totalRecords,this.search?this.search=!1:this.setIsLoading(!1)})}edit(o){this.utente=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}sblocca(o){this.setIsLoading(!0),this.apiService.sbloccaUtente(o.utente.oid).subscribe(()=>{this.setIsLoading(!1),o.isAccountBloccato=!1,this.showInfo("sbm.configurazione.utenti.utenteSbloccato")})}ngOnDestroy(){this.headerService.clearTitle()}}function zee(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Mee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Qa.\u0275fac=function(o){return new(o||Qa)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t),e.Y36(j.m))},Qa.\u0275cmp=e.Xpm({type:Qa,selectors:[["app-utenti"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:44,vars:16,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["usernameSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"mat-table-container"],["matSort","","matSortActive","username","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","username"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","ubicazioneIstat"],["matColumnDef","ruolo"],["matColumnDef","descrizione"],["matColumnDef","isAttivo"],["mat-sort-header","","class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","sblocca"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[1,"edit-container",3,"hidden"],[3,"_utente","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center"],["color","primary",3,"disabled","checked"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,aee,4,3,"div",8),e.TgZ(10,"div",1)(11,"div",9)(12,"mat-table",10),e.NdJ("matSortChange",function(l){return t.onSortChange(l)}),e.ynx(13,11),e.YNc(14,lee,1,0,"mat-header-cell",12),e.YNc(15,ree,4,0,"mat-cell",13),e.BQk(),e.ynx(16,14),e.YNc(17,cee,3,3,"mat-header-cell",15),e.YNc(18,see,2,1,"mat-cell",16),e.BQk(),e.ynx(19,17),e.YNc(20,pee,3,3,"mat-header-cell",15),e.YNc(21,dee,2,1,"mat-cell",16),e.BQk(),e.ynx(22,18),e.YNc(23,mee,3,3,"mat-header-cell",15),e.YNc(24,_ee,3,3,"mat-cell",16),e.BQk(),e.ynx(25,19),e.YNc(26,uee,3,3,"mat-header-cell",15),e.YNc(27,gee,2,1,"mat-cell",16),e.BQk(),e.ynx(28,20),e.YNc(29,hee,3,3,"mat-header-cell",21),e.YNc(30,fee,2,2,"mat-cell",22),e.BQk(),e.ynx(31,23),e.YNc(32,Cee,1,0,"mat-header-cell",12),e.YNc(33,vee,2,1,"mat-cell",16),e.BQk(),e.ynx(34,24),e.YNc(35,Tee,1,0,"mat-header-cell",12),e.YNc(36,Zee,2,1,"mat-cell",25),e.BQk(),e.YNc(37,Aee,1,0,"mat-header-row",26),e.YNc(38,wee,1,1,"mat-row",27),e.qZA()(),e.TgZ(39,"div",28)(40,"mat-paginator",29),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()(),e.TgZ(41,"div",30)(42,"app-utenti-edit",31,32),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,14,"bo.utente.proprieta.username")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.data),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("_utente",t.utente))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,Ia,z.X$],styles:[".mat-column-sblocca[_ngcontent-%COMP%]{max-width:150px}"]});class Ua extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe,this.enumTipoOperazioneWebHooks=c.ji}save(){this.webHook.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setWebHook(this.webHook).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.webHooks.webHookSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.configurazione.webHooks.eliminareWebHook").then(t=>{null!=o&&(this.webHook=o),this.webHook.isDeleted=!0,this.setIsLoading(!0),this.apiService.setWebHook(this.webHook).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function qee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",23)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.webHooks.nessunWebHook")))}function Pee(i,o){1&i&&e._UZ(0,"mat-header-cell")}function kee(i,o){1&i&&(e.TgZ(0,"mat-cell",24)(1,"button",25)(2,"i",26),e._uU(3,"edit"),e.qZA()()())}function See(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.webHooks.proprieta.descrizione"),""))}function yee(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.descrizione," ")}}function Jee(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.webHooks.proprieta.tipo"),""))}function Eee(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoOperazioneWebHooks,t.tipo,"tipoOperazioneWebHooks"))," ")}}function Nee(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.webHooks.proprieta.url"),""))}function Oee(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.url," ")}}function Lee(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Dee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",27)(1,"button",28),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(29);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",29),e._uU(3,"delete"),e.qZA()()()}}function Iee(i,o){1&i&&e._UZ(0,"mat-header-row",30)}function Qee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",31),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Ua.\u0275fac=function(o){return new(o||Ua)(e.Y36(A.s),e.Y36(j.m))},Ua.\u0275cmp=e.Xpm({type:Ua,selectors:[["app-web-hooks-edit"]],inputs:{webHook:"webHook"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:23,vars:23,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.webHook.descrizione=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"mat-select",4),e.NdJ("ngModelChange",function(a){return t.webHook.tipo=a}),e.ALo(8,"translate"),e.YNc(9,zee,3,4,"mat-option",5),e.ALo(10,"selectEnum"),e.qZA()()(),e.TgZ(11,"div",1)(12,"mat-form-field",2)(13,"input",3),e.NdJ("ngModelChange",function(a){return t.webHook.url=a}),e.ALo(14,"translate"),e.qZA()()()(),e.TgZ(15,"div",6)(16,"button",7),e.NdJ("click",function(){return t.save()}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.YNc(19,Mee,3,3,"button",8),e.TgZ(20,"button",9),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(21),e.ALo(22,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,10,"bo.webHooks.proprieta.descrizione")),e.Q6J("ngModel",t.webHook.descrizione),e.xp6(4),e.s9C("placeholder",e.lcZ(8,12,"bo.webHooks.proprieta.tipo")),e.Q6J("ngModel",t.webHook.tipo),e.xp6(2),e.Q6J("ngForOf",e.xi3(10,14,t.enumTipoOperazioneWebHooks,"tipoOperazioneWebHooks")),e.xp6(4),e.s9C("placeholder",e.lcZ(14,17,"bo.webHooks.proprieta.url")),e.Q6J("ngModel",t.webHook.url),e.xp6(4),e.Oqu(e.lcZ(18,19,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.webHook.oid>0),e.xp6(2),e.Oqu(e.lcZ(22,21,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,_.Fj,_.JJ,_.On,Te.A,z.X$]});class Ya extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.webHook=new v.pns,this.displayedColumns=["edit","descrizione","tipo","url","delete"],this.showTable=!0,this.enumTipoOperazioneWebHooks=c.ji}ngOnInit(){this.headerService.setTitle("sbm.configurazione.webHooks.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getWebHooks().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.webHook=new v.pns(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.webHook=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBackEvent(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}}function Uee(i,o){if(1&i&&(e.TgZ(0,"mat-tab",6)(1,"div",7),e._UZ(2,"app-inner-html",8),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("label",t.lingua.nome),e.xp6(2),e.Q6J("_text",t.testo)}}function Yee(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Uee,3,2,"mat-tab",5),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function Ree(i,o){if(1&i&&(e.TgZ(0,"mat-tab-group",3),e.YNc(1,Yee,2,1,"ng-container",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.templates)}}Ya.\u0275fac=function(o){return new(o||Ya)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Ya.\u0275cmp=e.Xpm({type:Ya,selectors:[["app-web-hooks"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:30,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","descrizione"],[4,"matCellDef"],["matColumnDef","tipo"],["matColumnDef","url"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"webHook","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,qee,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,Pee,1,0,"mat-header-cell",8),e.YNc(10,kee,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,See,3,3,"mat-header-cell",8),e.YNc(13,yee,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,Jee,3,3,"mat-header-cell",8),e.YNc(16,Eee,3,3,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,Nee,3,3,"mat-header-cell",8),e.YNc(19,Oee,2,1,"mat-cell",11),e.BQk(),e.ynx(20,14),e.YNc(21,Lee,1,0,"mat-header-cell",8),e.YNc(22,Dee,4,0,"mat-cell",15),e.BQk(),e.YNc(23,Iee,1,0,"mat-header-row",16),e.YNc(24,Qee,1,1,"mat-row",17),e.qZA()(),e.TgZ(25,"div",18)(26,"mat-paginator",19),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(27,"div",20)(28,"app-web-hooks-edit",21,22),e.NdJ("backEvent",function(){return t.onBackEvent()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("webHook",t.webHook))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Ua,z.X$]});class ki extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.templates=[]}ngOnInit(){this.setIsLoading(!0),this.apiService.getTemplatesXLingua(this.oidTemplate).subscribe(o=>{let t=o.data;for(let n of this.lingue){let a=new v.L92,l=t.find(r=>null!=r.lingua&&r.lingua.oid==n.oid);a.lingua=n,null!=l&&(a.testo=l.testo),this.templates.push(a)}this.setIsLoading(!1)})}}ki.\u0275fac=function(o){return new(o||ki)(e.Y36(A.s),e.Y36(j.m))},ki.\u0275cmp=e.Xpm({type:ki,selectors:[["app-template-preview"]],inputs:{oidTemplate:"oidTemplate"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","dialog-tab-group",4,"ngIf"],[1,"dialog-tab-group"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"border","rounded","p-3","mt-3","testo-container"],[3,"_text"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,Ree,2,1,"mat-tab-group",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.templates&&t.templates.length>0))},dependencies:[m.sg,m.O5,h.eB,ee.SK,ee.R7,F.aO,rt.W],styles:[".testo-container[_ngcontent-%COMP%]{height:500px;overflow:auto}"]});const ps=function(i){return{"color-pink font-weight-bold":i}};function Fee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",10),e.NdJ("change",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onModelloAutomatismoChecked(l))}),e.TgZ(1,"span",11),e.NdJ("mousedown",function(a){return a.stopPropagation()})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.onModelloAutomatismoSelected(a,r))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,ps,null!=n.workFlow&&n.workFlow.modelloAutomatismo==t)),e.xp6(1),e.Oqu(e.lcZ(3,2,n.getEnumKeyTranslation(n.enumModelloAutomatismo,t,"modelloAutomatismo")))}}function Hee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",10),e.NdJ("change",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onModelloAutomatismoChecked(l))}),e.TgZ(1,"span",11),e.NdJ("mousedown",function(a){return a.stopPropagation()})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.onModelloAutomatismoSelected(a,r))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(4,ps,null!=n.workFlow&&n.workFlow.modelloAutomatismo==t)),e.xp6(1),e.Oqu(e.lcZ(3,2,n.getEnumKeyTranslation(n.enumModelloAutomatismo,t,"modelloAutomatismo")))}}function Kee(i,o){if(1&i&&(e.TgZ(0,"div",3)(1,"h5",4),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Hee,4,6,"mat-checkbox",5),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"enumerations.tipoWorkFlow.preventivi")),e.xp6(2),e.Q6J("ngForOf",t.modelliAutomatismoPreventivi)}}function Gee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-select",16),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workFlow.template=a)})("onViewButtonClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openTemplatePreview())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesPrenotazioneRQ,!1))("value",t.workFlow.template)("placeholder",e.lcZ(1,5,"bo.workFlow.proprieta.template"))("showViewButton",!0)("required",!0)}}function $ee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-select",16),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workFlow.template=a)})("onViewButtonClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openTemplatePreview())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesPreventivoRQ,!1))("value",t.workFlow.template)("placeholder",e.lcZ(1,5,"bo.workFlow.proprieta.template"))("showViewButton",!0)("required",!0)}}function Bee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",17)(1,"input",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workFlow.giorniCampoFiltroWorkFlow=a)})("blur",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.workFlow.campoFiltroWorkFlow<0?a.workFlow.giorniCampoFiltroWorkFlow=0:null)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("placeholder",e.lcZ(2,2,t.labelGiorni.get(t.workFlow.modelloAutomatismo)))("ngModel",t.workFlow.giorniCampoFiltroWorkFlow)}}function Vee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-select",19),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workFlow.politicaCancellazione=a)})("valueChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onPoliticaCancellazioneChange())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("dataLoader",t.apiService.getCancellazioniViewSelect(null,!1))("value",t.workFlow.politicaCancellazione)("placeholder",e.lcZ(1,4,"bo.workFlow.proprieta.politicaCancellazione"))("required",!0)}}function Xee(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",12),e.YNc(2,Gee,2,7,"app-view-select",13),e.YNc(3,$ee,2,7,"app-view-select",13),e.qZA(),e.YNc(4,Bee,3,4,"mat-form-field",14),e.YNc(5,Vee,2,6,"app-view-select",15),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.workFlow.tipoWorkFlow==t.enumTipoWorkFlow.Prenotazioni),e.xp6(1),e.Q6J("ngIf",t.workFlow.tipoWorkFlow==t.enumTipoWorkFlow.Preventivi),e.xp6(1),e.Q6J("ngIf",t.labelGiorni.has(t.workFlow.modelloAutomatismo)),e.xp6(1),e.Q6J("ngIf",t.workFlow.modelloAutomatismo==t.enumModelloAutomatismo.ReminderArrivo)}}class Ra extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.localizationService=n,this.workFlows=[],this.modelliAutomatismoPrenotazioni=[c.aS.UnGiornoDopoCreazionePrenotazione,c.aS.RecallCaparra,c.aS.RicevutaCaparra,c.aS.InvitoCheckIn,c.aS.Disdetta,c.aS.ComunicazionePostStay,c.aS.ReminderArrivo],this.modelliAutomatismoPreventivi=[c.aS.RecallPreventivoScaduto,c.aS.RecallPreventivoInviato,c.aS.RecallPreventivoVisualizzato,c.aS.ReminderScadenzaCaparra],this.enumModelloAutomatismo=c.aS,this.enumTipoWorkFlow=c.iK,this.getTemplatesPreventivoRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.In,"("+c.hQ.Preventivo+", "+c.hQ.PreventivoAccettato+", "+c.hQ.PreventivoRifiutato+", "+c.hQ.PreventivoRichiestaCaparra+", "+c.hQ.PreventivoPrenotato+")",c.NM.Number),this.getTemplatesPrenotazioneRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.In,"("+c.hQ.Prenotazione+", "+c.hQ.PrenotazioneConfermata+", "+c.hQ.PrenotazioneRifiutata+")",c.NM.Number),this.labelGiorni=new Map([[c.aS.RecallCaparra,"sbm.configurazione.workFlows.giorniPrimaArrivo"],[c.aS.InvitoCheckIn,"sbm.configurazione.workFlows.giorniPrimaArrivo"],[c.aS.ComunicazionePostStay,"sbm.configurazione.workFlows.giorniDopoPartenza"],[c.aS.ReminderArrivo,"sbm.configurazione.workFlows.giorniPrimaArrivo"],[c.aS.RecallPreventivoScaduto,"sbm.configurazione.workFlows.giorniDopoScadenza"],[c.aS.RecallPreventivoInviato,"sbm.configurazione.workFlows.giorniDopoInvio"],[c.aS.RecallPreventivoVisualizzato,"sbm.configurazione.workFlows.giorniPrimaScadenza"],[c.aS.ReminderScadenzaCaparra,"sbm.configurazione.workFlows.giorniPrimaScadenzaAccontoCaparra"]])}openTemplatePreview(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh",this.showModalDialog(ki,o).componentInstance.oidTemplate=this.workFlow.template.oid}onPoliticaCancellazioneChange(){this.workFlow.giorniCampoFiltroWorkFlow=Math.ceil(this.workFlow.politicaCancellazione.oreCancellazioneGratuitaPrimaCheckIn/24)+1}save(){this.setIsLoading(!0),this.apiService.setWorkFlows(this.workFlows).subscribe(()=>{this.dialogRef.close(!0)})}onModelloAutomatismoChecked(o){if(this.workFlows.find(t=>t.modelloAutomatismo==o))this.workFlow=null,this.workFlows=this.workFlows.filter(t=>t.modelloAutomatismo!=o);else{switch(this.workFlow=new v.f2m,this.workFlow.modelloAutomatismo=o,this.workFlow.descrizione=this.localizationService.getTranslationSync(this.getEnumKeyTranslation(c.aS,o,"modelloAutomatismo")),this.workFlow.tipoWorkFlow=this.modelliAutomatismoPrenotazioni.includes(o)?c.iK.Prenotazioni:c.iK.Preventivi,this.workFlow.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.workFlow.isAttivo=!0,o){case c.aS.UnGiornoDopoCreazionePrenotazione:this.workFlow.campoFiltroWorkFlow=c.wV.DataCreazione,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniDopo,this.workFlow.giorniCampoFiltroWorkFlow=1;break;case c.aS.RecallCaparra:this.workFlow.campoFiltroWorkFlow=c.wV.Arrivo,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniPrima,this.workFlow.giorniCampoFiltroWorkFlow=0,this.workFlow.statoPrenotazioneWelcome=c.Kg.Prenotata,this.workFlow.isCaparra=!1;break;case c.aS.RicevutaCaparra:this.workFlow.campoFiltroWorkFlow=c.wV.DataCaparra,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniDopo,this.workFlow.giorniCampoFiltroWorkFlow=0,this.workFlow.statoPrenotazioneWelcome=c.Kg.Confermata,this.workFlow.isCaparra=!0;break;case c.aS.InvitoCheckIn:this.workFlow.campoFiltroWorkFlow=c.wV.Arrivo,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniPrima,this.workFlow.giorniCampoFiltroWorkFlow=0,this.workFlow.isCheckInOnlineEseguito=!1;break;case c.aS.Disdetta:this.workFlow.campoFiltroWorkFlow=c.wV.DataCancellazione,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniDopo,this.workFlow.giorniCampoFiltroWorkFlow=0,this.workFlow.statoPrenotazioneWelcome=c.Kg.Eliminata;break;case c.aS.ComunicazionePostStay:this.workFlow.campoFiltroWorkFlow=c.wV.Partenza,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniDopo,this.workFlow.giorniCampoFiltroWorkFlow=0;break;case c.aS.ReminderArrivo:this.workFlow.campoFiltroWorkFlow=c.wV.Arrivo,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniPrima,this.workFlow.giorniCampoFiltroWorkFlow=0;break;case c.aS.RecallPreventivoScaduto:this.workFlow.statoPreventivoIniziale=c.N4.Scaduto,this.workFlow.statoPreventivoFinale=c.N4.Scaduto,this.workFlow.campoFiltroWorkFlow=c.wV.DataScadenza,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniDopo,this.workFlow.giorniCampoFiltroWorkFlow=0;break;case c.aS.RecallPreventivoInviato:this.workFlow.statoPreventivoIniziale=c.N4.Inviato,this.workFlow.statoPreventivoFinale=c.N4.Inviato,this.workFlow.campoFiltroWorkFlow=c.wV.DataInvioPreventivo,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniDopo,this.workFlow.giorniCampoFiltroWorkFlow=0;break;case c.aS.RecallPreventivoVisualizzato:this.workFlow.statoPreventivoIniziale=c.N4.Visualizzato,this.workFlow.statoPreventivoFinale=c.N4.Visualizzato,this.workFlow.campoFiltroWorkFlow=c.wV.DataScadenza,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniPrima,this.workFlow.giorniCampoFiltroWorkFlow=0;break;case c.aS.ReminderScadenzaCaparra:this.workFlow.statoPreventivoIniziale=c.N4.InAttesaPagamento,this.workFlow.statoPreventivoFinale=c.N4.InAttesaPagamento,this.workFlow.campoFiltroWorkFlow=c.wV.DataScadenzaAccontoCaparra,this.workFlow.condizioneCampoFiltroWorkFlow=c.f.GiorniPrima,this.workFlow.giorniCampoFiltroWorkFlow=0}this.workFlows.push(this.workFlow)}}onModelloAutomatismoSelected(o,t){let n=this.workFlows.find(a=>a.modelloAutomatismo==t);null!=n&&(o.preventDefault(),this.workFlow=n)}isSaveDisabled(){return 0==this.workFlows.length||this.workFlows.some(o=>null==o.template||null==o.template.oid||o.template.oid<=0||o.modelloAutomatismo==c.aS.ReminderArrivo&&(null==o.politicaCancellazione||null==o.politicaCancellazione.oid||o.politicaCancellazione.oid<=0))}}function jee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",3),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.add(l.key))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.value))}}Ra.\u0275fac=function(o){return new(o||Ra)(e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o))},Ra.\u0275cmp=e.Xpm({type:Ra,selectors:[["app-workflows-add-from-model"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:15,vars:11,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],[1,"mb-3"],["color","primary","class","d-block",3,"change",4,"ngFor","ngForOf"],["class","col-6",4,"ngIf"],[4,"ngIf"],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],["color","primary",1,"d-block",3,"change"],[3,"ngClass","mousedown","click"],[1,"mt-3"],["displayMember","nome",3,"dataLoader","value","placeholder","showViewButton","required","valueChange","onViewButtonClick",4,"ngIf"],["class","w-100",4,"ngIf"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange",4,"ngIf"],["displayMember","nome",3,"dataLoader","value","placeholder","showViewButton","required","valueChange","onViewButtonClick"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange","blur"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"h5",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,Fee,4,6,"mat-checkbox",5),e.qZA(),e.YNc(9,Kee,5,4,"div",6),e.qZA(),e.YNc(10,Xee,6,4,"ng-container",7),e.TgZ(11,"div",8)(12,"button",9),e.NdJ("click",function(){return t.save()}),e._uU(13),e.ALo(14,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(6),e.Oqu(e.lcZ(7,7,"enumerations.tipoWorkFlow.prenotazioni")),e.xp6(2),e.Q6J("ngForOf",t.modelliAutomatismoPrenotazioni),e.xp6(1),e.Q6J("ngIf",t.sessionService.isCrmAttivo()),e.xp6(1),e.Q6J("ngIf",null!=t.workFlow),e.xp6(2),e.Q6J("disabled",t.isSaveDisabled()),e.xp6(1),e.Oqu(e.lcZ(14,9,"globals.salva")))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,F.aO,_.Fj,_.wV,_.JJ,_.On,ne.d,z.X$]});class Fa{constructor(o){this.sessionService=o,this.enumTipoWorkFlow=c.iK,this.excludedTipoWorkFlow=this.sessionService.isCrmAttivo()?[]:[c.iK.Preventivi,c.iK.CreazionePreventivo]}add(o){let t=new v.f2m(-1);t.tipoWorkFlow=o,this.dialogRef.close(t)}}Fa.\u0275fac=function(o){return new(o||Fa)(e.Y36(j.m))},Fa.\u0275cmp=e.Xpm({type:Fa,selectors:[["app-workflows-add"]],inputs:{dialogRef:"dialogRef"},decls:5,vars:7,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["mat-flat-button","","color","primary","class","w-100 mt-2",3,"click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",1,"w-100","mt-2",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,jee,3,3,"button",2),e.ALo(4,"selectEnum")),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngForOf",e.gM2(4,2,t.enumTipoWorkFlow,"tipoWorkFlow",!0,t.excludedTipoWorkFlow)))},dependencies:[m.sg,h.eB,F.aO,Te.A,z.X$]});const ds=function(i,o){return{"border-top":i,"border-bottom":o}};function Wee(i,o){if(1&i&&(e.TgZ(0,"div",12)(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",14),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Q6J("ngClass",e.WLB(6,ds,0==n,n<a.ultimeEsecuzioni.length-1)),e.xp6(2),e.hij(" ",t.descrizione," "),e.xp6(2),e.hij(" ",e.xi3(5,3,t.data,"dd/MM/yyyy HH:mm:ss")," ")}}function ete(i,o){if(1&i&&(e.TgZ(0,"mat-card",9)(1,"mat-card-title",10),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Wee,6,9,"div",11),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.configurazione.workFlows.ultimeEsecuzioni")," "),e.xp6(2),e.Q6J("ngForOf",t.ultimeEsecuzioni)}}function tte(i,o){if(1&i&&(e.TgZ(0,"div",12)(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",14),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Q6J("ngClass",e.WLB(6,ds,0==n,n<a.prossimeEsecuzioni.length-1)),e.xp6(2),e.hij(" ",t.descrizione," "),e.xp6(2),e.hij(" ",e.xi3(5,3,t.data,"dd/MM/yyyy HH:mm")," ")}}function ite(i,o){if(1&i&&(e.TgZ(0,"mat-card",15)(1,"mat-card-title",10)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",16),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,tte,6,9,"div",11),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"sbm.configurazione.workFlows.prossimeEsecuzioni")),e.xp6(3),e.Oqu(e.lcZ(7,5,"sbm.configurazione.workFlows.previsioneEsecuzioni")),e.xp6(2),e.Q6J("ngForOf",t.prossimeEsecuzioni)}}function ote(i,o){1&i&&(e.TgZ(0,"mat-card",17)(1,"mat-card-title",10),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"sbm.configurazione.workFlows.nessunaEsecuzione")," "))}function nte(i,o){if(1&i&&e._UZ(0,"app-notifiche-email",18),2&i){const t=e.oxw();e.Q6J("data",t.notificheEmail)}}class Si extends f.H{constructor(o){super(),this.apiService=o}ngOnInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getWorkFlowDetail(this.oidWorkFlow).subscribe(o=>{this.ultimeEsecuzioni=o.data.ultimeEsecuzioni,this.prossimeEsecuzioni=o.data.prossimeEsecuzioni,this.setIsLoading(!1)})}downloadNotificheEmail(){null==this.notificheEmail&&(this.setIsLoading(!0),this.apiService.getNotificheEmailWorkFlow(this.oidWorkFlow).subscribe(o=>{this.notificheEmail=o.data,this.setIsLoading(!1)}))}}function ate(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function lte(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function rte(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"div",0)(4,"div",20)(5,"mat-form-field",2)(6,"mat-select",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.statoPreventivoIniziale=a)}),e.ALo(7,"translate"),e.YNc(8,ate,3,4,"mat-option",11),e.ALo(9,"selectEnum"),e.qZA()()(),e.TgZ(10,"div",20)(11,"mat-form-field",2)(12,"mat-select",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.statoPreventivoFinale=a)}),e.ALo(13,"translate"),e.YNc(14,lte,3,4,"mat-option",11),e.ALo(15,"selectEnum"),e.qZA()()()()(),e._UZ(16,"div",4),e.qZA(),e.TgZ(17,"div",0)(18,"div",1)(19,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.template=a)})("onViewButtonClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openTemplatePreview())}),e.ALo(20,"translate"),e.qZA()(),e._UZ(21,"div",4),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(6),e.s9C("placeholder",e.lcZ(7,10,"bo.workFlow.proprieta.statoPreventivoIniziale")),e.Q6J("ngModel",t.workflow.statoPreventivoIniziale),e.xp6(2),e.Q6J("ngForOf",e.xi3(9,12,t.enumStatoPreventivo,"statoPreventivo")),e.xp6(4),e.s9C("placeholder",e.lcZ(13,15,"bo.workFlow.proprieta.statoPreventivoFinale")),e.Q6J("ngModel",t.workflow.statoPreventivoFinale),e.xp6(2),e.Q6J("ngForOf",e.xi3(15,17,t.enumStatoPreventivo,"statoPreventivo")),e.xp6(5),e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesPreventivoRQ))("value",t.workflow.template)("placeholder",e.lcZ(20,20,"bo.workFlow.proprieta.template"))("showViewButton",!0)}}function cte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.template=a)})("onViewButtonClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openTemplatePreview())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesPrenotazioneRQ))("value",t.workflow.template)("placeholder",e.lcZ(1,4,"bo.workFlow.proprieta.template"))("showViewButton",!0)}}function ste(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.template=a)})("onViewButtonClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openTemplatePreview())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesPagamentiRQ))("value",t.workflow.template)("placeholder",e.lcZ(1,4,"bo.workFlow.proprieta.template"))("showViewButton",!0)}}function pte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.template=a)})("onViewButtonClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openTemplatePreview())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesPrenotazioneRQ))("value",t.workflow.template)("placeholder",e.lcZ(1,4,"bo.workFlow.proprieta.template"))("showViewButton",!0)}}function dte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-select",22),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.template=a)})("onViewButtonClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openTemplatePreview())}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesCreazionePreventivoRQ))("value",t.workflow.template)("placeholder",e.lcZ(1,4,"bo.workFlow.proprieta.template"))("showViewButton",!0)}}function mte(i,o){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,cte,2,6,"app-view-select",23),e.YNc(3,ste,2,6,"app-view-select",23),e.YNc(4,pte,2,6,"app-view-select",23),e.YNc(5,dte,2,6,"app-view-select",23),e.qZA(),e._UZ(6,"div",4),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Prenotazioni),e.xp6(1),e.Q6J("ngIf",t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Pagamenti),e.xp6(1),e.Q6J("ngIf",t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Sondaggi),e.xp6(1),e.Q6J("ngIf",t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.CreazionePreventivo)}}function _te(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"app-view-select",24),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.codicePromozione=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",4),e._uU(5," Utilizzare il tag [CodicePromozionale] all'interno del template "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("dataLoader",t.apiService.getCodiciPromozioneViewSelect())("value",t.workflow.codicePromozione)("placeholder",e.lcZ(3,3,"bo.workFlow.proprieta.codicePromozione"))}}function ute(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.sondaggio=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",4),e._uU(5," Impostare il sondaggio da assegnare alla prenotazione "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("dataLoader",t.apiService.getSondaggiViewSelect())("value",t.workflow.sondaggio)("placeholder",e.lcZ(3,3,"bo.workFlow.proprieta.sondaggio"))}}function gte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.modalitaPagamentoPayMail=a)}),e.ALo(3,"translate"),e.qZA()(),e._UZ(4,"div",4),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("dataLoader",t.apiService.getModalitaPagamentoViewSelect())("value",t.workflow.modalitaPagamentoPayMail)("placeholder",e.lcZ(3,3,"bo.workFlow.proprieta.modalitaPagamentoPayMail"))}}function hte(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.nome)}}function fte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",1)(2,"mat-checkbox",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.isManuale=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"div",4),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.workflow.isManuale),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.workFlow.proprieta.isManuale")," ")}}function Cte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",1)(2,"mat-checkbox",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.isInviaEmailHotel=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",4),e._uU(6," Invia l'email solo all'hotel (nessuna email verr\xe0 inviata al cliente) "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.workflow.isInviaEmailHotel),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.workFlow.proprieta.isInviaEmailHotel")," ")}}function bte(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function vte(i,o){if(1&i&&(e.ynx(0),e.YNc(1,bte,3,4,"mat-option",39),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.checkFiltroCampoWorkFlow(t.key))}}function Tte(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function xte(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"app-view-select",40),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.mercato=a)}),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"div",4),e.qZA(),e.TgZ(6,"div",0)(7,"div",1)(8,"app-view-select",40),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.canaleVendita=a)}),e.ALo(9,"translate"),e.qZA()(),e._UZ(10,"div",4),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaMercatoRQ))("value",t.workflow.mercato)("placeholder",e.lcZ(4,6,"bo.workFlow.proprieta.mercato")),e.xp6(5),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaCanaleVenditaRQ))("value",t.workflow.canaleVendita)("placeholder",e.lcZ(9,8,"bo.workFlow.proprieta.canaleVendita"))}}function Zte(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.tag=a)}),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"div",4),e.qZA(),e.TgZ(6,"div",35),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-radio-group",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.isCaparra=a)}),e.TgZ(10,"mat-radio-button",37),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"mat-radio-button",37),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-radio-button",38),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("dataLoader",t.apiService.getTagCrmViewSelect())("value",t.workflow.tag)("placeholder",e.lcZ(4,11,"bo.workFlow.proprieta.tag")),e.xp6(4),e.Oqu(e.lcZ(8,13,"bo.workFlow.proprieta.isCaparra")),e.xp6(2),e.Q6J("ngModel",t.workflow.isCaparra),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(12,15,"globals.si")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(15,17,"globals.no")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(18,19,"globals.indifferente"))}}function Ate(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",35),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-radio-group",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.isRifiutata=a)}),e.TgZ(5,"mat-radio-button",37),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-radio-button",37),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"mat-radio-button",38),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",35),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"mat-radio-group",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.isConPreventivo=a)}),e.TgZ(18,"mat-radio-button",37),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-radio-button",37),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-radio-button",38),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,16,"bo.workFlow.proprieta.isRifiutata")),e.xp6(2),e.Q6J("ngModel",t.workflow.isRifiutata),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(7,18,"globals.si")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(10,20,"globals.no")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(13,22,"globals.indifferente")),e.xp6(3),e.Oqu(e.lcZ(16,24,"bo.workFlow.proprieta.isConPreventivo")),e.xp6(2),e.Q6J("ngModel",t.workflow.isConPreventivo),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(20,26,"globals.si")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(23,28,"globals.no")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(26,30,"globals.indifferente"))}}function wte(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function zte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.importoPayMail=a)}),e.ALo(4,"translate"),e.YNc(5,wte,3,4,"mat-option",11),e.ALo(6,"selectEnum"),e.qZA()()(),e._UZ(7,"div",4),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.s9C("placeholder",e.lcZ(4,3,"bo.workFlow.proprieta.importoPayMail")),e.Q6J("ngModel",t.workflow.importoPayMail),e.xp6(2),e.Q6J("ngForOf",e.xi3(6,5,t.enumImportoPayMail,"importoPayMail"))}}function Mte(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function qte(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Pte(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-form-field",2)(4,"mat-select",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.tipoPrenotazione=a)}),e.ALo(5,"translate"),e._UZ(6,"mat-option",10),e.YNc(7,Mte,3,4,"mat-option",11),e.ALo(8,"selectEnum"),e.qZA()()(),e._UZ(9,"div",4),e.qZA(),e.TgZ(10,"div",0)(11,"div",1)(12,"mat-form-field",2)(13,"mat-select",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.statoPrenotazioneWelcome=a)}),e.ALo(14,"translate"),e._UZ(15,"mat-option",10),e.YNc(16,qte,3,4,"mat-option",11),e.ALo(17,"selectEnum"),e.qZA()()(),e._UZ(18,"div",4),e.qZA(),e.TgZ(19,"div",0)(20,"div",1)(21,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.politicaCancellazione=a)}),e.ALo(22,"translate"),e.qZA()(),e._UZ(23,"div",4),e.qZA(),e.TgZ(24,"div",0)(25,"div",1)(26,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.tipoCamera=a)}),e.ALo(27,"translate"),e.qZA()(),e._UZ(28,"div",4),e.qZA(),e.TgZ(29,"div",0)(30,"div",1)(31,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.trattamento=a)}),e.ALo(32,"translate"),e.qZA()(),e._UZ(33,"div",4),e.qZA(),e.TgZ(34,"div",0)(35,"div",1)(36,"app-view-select",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.modalitaPagamento=a)}),e.ALo(37,"translate"),e.qZA()(),e._UZ(38,"div",4),e.qZA(),e.TgZ(39,"div",35),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"mat-radio-group",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.isCaparra=a)}),e.TgZ(43,"mat-radio-button",37),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"mat-radio-button",37),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"mat-radio-button",38),e._uU(50),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"div",35),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"mat-radio-group",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.isCheckInOnlineEseguito=a)}),e.TgZ(56,"mat-radio-button",37),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.TgZ(59,"mat-radio-button",37),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"mat-radio-button",38),e._uU(63),e.ALo(64,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(4),e.s9C("placeholder",e.lcZ(5,36,"bo.workFlow.proprieta.tipoPrenotazione")),e.Q6J("ngModel",t.workflow.tipoPrenotazione),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(8,38,t.enumTipoPrenotazione,"tipoPrenotazione")),e.xp6(6),e.s9C("placeholder",e.lcZ(14,41,"bo.workFlow.proprieta.statoPrenotazioneWelcome")),e.Q6J("ngModel",t.workflow.statoPrenotazioneWelcome),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(17,43,t.enumStatoPrenotazioneWelcome,"statoPrenotazioneWelcome")),e.xp6(5),e.Q6J("dataLoader",t.apiService.getCancellazioniViewSelect())("value",t.workflow.politicaCancellazione)("placeholder",e.lcZ(22,46,"bo.workFlow.proprieta.politicaCancellazione")),e.xp6(5),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("value",t.workflow.tipoCamera)("placeholder",e.lcZ(27,48,"bo.workFlow.proprieta.tipoCamera")),e.xp6(5),e.Q6J("dataLoader",t.apiService.getTrattamentiViewSelect())("value",t.workflow.trattamento)("placeholder",e.lcZ(32,50,"bo.workFlow.proprieta.trattamento")),e.xp6(5),e.Q6J("dataLoader",t.apiService.getModalitaPagamentoViewSelect())("value",t.workflow.modalitaPagamento)("placeholder",e.lcZ(37,52,"bo.workFlow.proprieta.modalitaPagamento")),e.xp6(4),e.Oqu(e.lcZ(41,54,"bo.workFlow.proprieta.isCaparraPrenotazione")),e.xp6(2),e.Q6J("ngModel",t.workflow.isCaparra),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(45,56,"globals.si")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(48,58,"globals.no")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(51,60,"globals.indifferente")),e.xp6(3),e.Oqu(e.lcZ(54,62,"bo.workFlow.proprieta.isCheckInOnlineEseguito")),e.xp6(2),e.Q6J("ngModel",t.workflow.isCheckInOnlineEseguito),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(58,64,"globals.si")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(61,66,"globals.no")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(64,68,"globals.indifferente"))}}function kte(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Ste(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-form-field",2)(4,"input",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.numeroCamereDisponibiliMinimeCreazionePreventivo=a)}),e.ALo(5,"translate"),e.qZA()()(),e._UZ(6,"div",4),e.qZA(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"mat-select",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.modalitaSelezioneTariffaCreazionePreventivo=a)}),e.ALo(11,"translate"),e.YNc(12,kte,3,4,"mat-option",11),e.ALo(13,"selectEnum"),e.qZA()()(),e._UZ(14,"div",4),e.qZA(),e.TgZ(15,"div",0)(16,"div",1)(17,"mat-checkbox",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.workflow.isInviaPreventivo=a)}),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e._UZ(20,"div",4),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(4),e.s9C("placeholder",e.lcZ(5,7,"bo.workFlow.proprieta.numeroCamereDisponibiliMinimeCreazionePreventivo")),e.Q6J("ngModel",t.workflow.numeroCamereDisponibiliMinimeCreazionePreventivo),e.xp6(6),e.s9C("placeholder",e.lcZ(11,9,"bo.workFlow.proprieta.modalitaSelezioneTariffaCreazionePreventivo")),e.Q6J("ngModel",t.workflow.modalitaSelezioneTariffaCreazionePreventivo),e.xp6(2),e.Q6J("ngForOf",e.xi3(13,11,t.enumModalitaSelezioneTariffaWorkFlowCreazionePreventivo,"modalitaSelezioneTariffaWorkFlowCreazionePreventivo")),e.xp6(5),e.Q6J("ngModel",t.workflow.isInviaPreventivo),e.xp6(1),e.hij(" ",e.lcZ(19,14,"bo.workFlow.proprieta.isInviaPreventivo")," ")}}function yte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",25)(1,"mat-card-title"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",0)(5,"div",1)(6,"mat-form-field",2)(7,"mat-select",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.campoFiltroWorkFlow=a)}),e.ALo(8,"translate"),e.YNc(9,vte,2,1,"ng-container",26),e.ALo(10,"selectEnum"),e.qZA()()(),e._UZ(11,"div",4),e.qZA(),e.TgZ(12,"div",0)(13,"div",1)(14,"mat-form-field",2)(15,"mat-select",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.condizioneCampoFiltroWorkFlow=a)}),e.ALo(16,"translate"),e.YNc(17,Tte,3,4,"mat-option",11),e.ALo(18,"selectEnum"),e.qZA()()(),e._UZ(19,"div",4),e.qZA(),e.TgZ(20,"div",0)(21,"div",1)(22,"mat-form-field",2)(23,"input",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.giorniCampoFiltroWorkFlow=a)}),e.ALo(24,"translate"),e.qZA()()(),e._UZ(25,"div",4),e.qZA(),e.TgZ(26,"div",0)(27,"div",1)(28,"div",0)(29,"div",20)(30,"mat-form-field",2)(31,"input",28),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.orarioInizio=a)}),e.ALo(32,"translate"),e.qZA()()(),e.TgZ(33,"div",20)(34,"mat-form-field",2)(35,"input",28),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.orarioFine=a)}),e.ALo(36,"translate"),e.qZA()()()()(),e._UZ(37,"div",4),e.qZA(),e.TgZ(38,"div",0)(39,"div",1)(40,"mat-form-field",2)(41,"input",29),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.dataInizioAutomatismo=a)}),e.ALo(42,"translate"),e.qZA(),e._UZ(43,"mat-datepicker-toggle",30),e.TgZ(44,"mat-datepicker-toggle",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.workflow.dataInizioAutomatismo=null)}),e.TgZ(45,"mat-icon",32),e._uU(46,"clear"),e.qZA()(),e._UZ(47,"mat-datepicker",33,34),e.qZA()(),e._UZ(49,"div",4),e.qZA(),e.YNc(50,xte,11,10,"ng-container",6),e.YNc(51,Zte,19,21,"ng-container",6),e.YNc(52,Ate,27,32,"ng-container",6),e.YNc(53,zte,8,8,"div",7),e.YNc(54,Pte,65,70,"ng-container",6),e.YNc(55,Ste,21,16,"ng-container",6),e.TgZ(56,"div",35),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.TgZ(59,"mat-radio-group",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.isPrivacy=a)}),e.TgZ(60,"mat-radio-button",37),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"mat-radio-button",38),e._uU(64),e.ALo(65,"translate"),e.qZA()(),e.TgZ(66,"div",35),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"mat-radio-group",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.isNewsLetter=a)}),e.TgZ(70,"mat-radio-button",37),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"mat-radio-button",38),e._uU(74),e.ALo(75,"translate"),e.qZA()(),e.TgZ(76,"div",35),e._uU(77),e.ALo(78,"translate"),e.qZA(),e.TgZ(79,"mat-radio-group",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.isCodiceTessera=a)}),e.TgZ(80,"mat-radio-button",37),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-radio-button",37),e._uU(84),e.ALo(85,"translate"),e.qZA(),e.TgZ(86,"mat-radio-button",38),e._uU(87),e.ALo(88,"translate"),e.qZA()(),e.TgZ(89,"div",35),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.TgZ(92,"mat-radio-group",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.workflow.isEmailCompilata=a)}),e.TgZ(93,"mat-radio-button",37),e._uU(94),e.ALo(95,"translate"),e.qZA(),e.TgZ(96,"mat-radio-button",38),e._uU(97),e.ALo(98,"translate"),e.qZA()()()}if(2&i){const t=e.MAs(48),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,50,"sbm.configurazione.workFlows.condizioni")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(8,52,"bo.workFlow.proprieta.campoFiltroWorkFlow")),e.Q6J("ngModel",n.workflow.campoFiltroWorkFlow),e.xp6(2),e.Q6J("ngForOf",e.xi3(10,54,n.enumCampoFiltroWorkFlow,"campoFiltroWorkFlow")),e.xp6(6),e.s9C("placeholder",e.lcZ(16,57,"bo.workFlow.proprieta.condizioneCampoFiltroWorkFlow")),e.Q6J("ngModel",n.workflow.condizioneCampoFiltroWorkFlow),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,59,n.enumCondizioneCampoFiltroWorkFlow,"condizioneCampoFiltroWorkFlow")),e.xp6(6),e.s9C("placeholder",e.lcZ(24,62,"bo.workFlow.proprieta.giorniCampoFiltroWorkFlow")),e.Q6J("ngModel",n.workflow.giorniCampoFiltroWorkFlow),e.xp6(8),e.s9C("placeholder",e.lcZ(32,64,"bo.workFlow.proprieta.orarioInizio")),e.Q6J("ngModel",n.workflow.orarioInizio),e.xp6(4),e.s9C("placeholder",e.lcZ(36,66,"bo.workFlow.proprieta.orarioFine")),e.Q6J("ngModel",n.workflow.orarioFine),e.xp6(6),e.Q6J("matDatepicker",t)("placeholder",e.lcZ(42,68,"bo.workFlow.proprieta.dataInizioAutomatismo"))("ngModel",n.workflow.dataInizioAutomatismo),e.xp6(2),e.Q6J("for",t),e.xp6(4),e.Q6J("startAt",n.utility.isNullDate(n.workflow.dataInizioAutomatismo)?n.today:null),e.xp6(3),e.Q6J("ngIf",n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Preventivi||n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Prenotazioni||n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Pagamenti||n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Sondaggi),e.xp6(1),e.Q6J("ngIf",n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Preventivi),e.xp6(1),e.Q6J("ngIf",n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Richieste),e.xp6(1),e.Q6J("ngIf",n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Pagamenti),e.xp6(1),e.Q6J("ngIf",n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Prenotazioni||n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Pagamenti||n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.Sondaggi),e.xp6(1),e.Q6J("ngIf",n.workflow.tipoWorkFlow==n.enumTipoWorkFlow.CreazionePreventivo),e.xp6(2),e.Oqu(e.lcZ(58,70,"bo.workFlow.proprieta.isPrivacy")),e.xp6(2),e.Q6J("ngModel",n.workflow.isPrivacy),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(62,72,"globals.si")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(65,74,"globals.indifferente")),e.xp6(3),e.Oqu(e.lcZ(68,76,"bo.workFlow.proprieta.isNewsLetter")),e.xp6(2),e.Q6J("ngModel",n.workflow.isNewsLetter),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(72,78,"globals.si")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(75,80,"globals.indifferente")),e.xp6(3),e.Oqu(e.lcZ(78,82,"bo.workFlow.proprieta.isCodiceTessera")),e.xp6(2),e.Q6J("ngModel",n.workflow.isCodiceTessera),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(82,84,"globals.si")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(85,86,"globals.no")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(88,88,"globals.indifferente")),e.xp6(3),e.Oqu(e.lcZ(91,90,"bo.workFlow.proprieta.isEmailCompilata")),e.xp6(2),e.Q6J("ngModel",n.workflow.isEmailCompilata),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(95,92,"globals.si")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(98,94,"globals.indifferente"))}}function Jte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function Ete(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openDetail())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.dettagli")))}Si.\u0275fac=function(o){return new(o||Si)(e.Y36(A.s))},Si.\u0275cmp=e.Xpm({type:Si,selectors:[["app-workflow-detail-modal"]],inputs:{oidWorkFlow:"oidWorkFlow"},features:[e.qOj],decls:14,vars:11,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"selectedTabChange"],[3,"label"],[1,"mt-3"],["class","border mat-elevation-z0 pb-0",4,"ngIf"],["class","border mat-elevation-z0 mt-3 pb-0",4,"ngIf"],["class","border mat-elevation-z0",4,"ngIf"],[3,"data",4,"ngIf"],[1,"border","mat-elevation-z0","pb-0"],[1,"text-center"],["class","row pt-2 pb-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"row","pt-2","pb-2",3,"ngClass"],[1,"col-9"],[1,"col-3","font-italic","font-small"],[1,"border","mat-elevation-z0","mt-3","pb-0"],[1,"font-small","font-italic"],[1,"border","mat-elevation-z0"],[3,"data"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-tab-group",2),e.NdJ("selectedTabChange",function(a){return 1==a.index?t.downloadNotificheEmail():null}),e.TgZ(4,"mat-tab",3),e.ALo(5,"translate"),e.TgZ(6,"div",4),e.YNc(7,ete,5,4,"mat-card",5),e.YNc(8,ite,9,7,"mat-card",6),e.YNc(9,ote,4,3,"mat-card",7),e.qZA()(),e.TgZ(10,"mat-tab",3),e.ALo(11,"translate"),e.TgZ(12,"div",4),e.YNc(13,nte,1,1,"app-notifiche-email",8),e.qZA()()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("label",e.lcZ(5,7,"sbm.configurazione.workFlows.esecuzioni")),e.xp6(3),e.Q6J("ngIf",null!=t.ultimeEsecuzioni&&t.ultimeEsecuzioni.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.prossimeEsecuzioni&&t.prossimeEsecuzioni.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.ultimeEsecuzioni&&0==t.ultimeEsecuzioni.length&&null!=t.prossimeEsecuzioni&&0==t.prossimeEsecuzioni.length),e.xp6(1),e.Q6J("label",e.lcZ(11,9,"sbm.configurazione.workFlows.inviiEffettuati")),e.xp6(3),e.Q6J("ngIf",null!=t.notificheEmail))},dependencies:[m.mk,m.sg,m.O5,h.eB,qe.S$,qe.mi,ee.SK,ee.R7,F.aO,gt,m.uU,z.X$]});class Ha extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.backEvent=new e.vpe,this.enumStatoPreventivo=c.N4,this.enumCampoFiltroWorkFlow=c.wV,this.enumCondizioneCampoFiltroWorkFlow=c.f,this.getTemplatesPreventivoRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.In,"("+c.hQ.Preventivo+", "+c.hQ.PreventivoAccettato+", "+c.hQ.PreventivoRifiutato+", "+c.hQ.PreventivoRichiestaCaparra+", "+c.hQ.PreventivoPrenotato+")",c.NM.Number),this.getTemplatesPrenotazioneRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.In,"("+c.hQ.Prenotazione+", "+c.hQ.PrenotazioneConfermata+", "+c.hQ.PrenotazioneRifiutata+")",c.NM.Number),this.getTemplatesPagamentiRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.In,"("+c.hQ.PayMail+", "+c.hQ.PayMailPagato+")",c.NM.Number),this.getTemplatesCreazionePreventivoRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.Equal,c.hQ.Preventivo.toString(),c.NM.Number),this.enumTipoWorkFlow=c.iK,this.enumTipoPrenotazione=c.DS,this.enumImportoPayMail=c.Ht,this.enumStatoPrenotazioneWelcome=c.Kg,this.enumModalitaSelezioneTariffaWorkFlowCreazionePreventivo=c.oV,this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.lingueAttive=[]}ngOnInit(){this.lingueAttive=this.sessionService.getLingue()}save(){if(this.isValido()){if(this.workflow.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.workflow.coloreHex)try{this.workflow.colore=Z(this.workflow.coloreHex).rgbNumber()}catch(o){}this.workflow.dataInizioAutomatismo=this.getDate(this.workflow.dataInizioAutomatismo),this.setIsLoading(!0),this.apiService.setWorkFlow(this.workflow).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.configurazione.workFlows.workFlowSalvato").then(()=>{this.backEvent.emit()})})}else this.showError("sbm.configurazione.workFlows.statiWorkFlowErrati")}isValido(){return!(this.workflow.statoPreventivoFinale==c.N4.Prenotato&&(this.workflow.statoPreventivoIniziale==c.N4.Bozza||this.workflow.statoPreventivoIniziale==c.N4.Inviato||this.workflow.statoPreventivoIniziale==c.N4.Visualizzato)||this.workflow.statoPreventivoFinale==c.N4.InAttesaPagamento&&(this.workflow.statoPreventivoIniziale==c.N4.Bozza||this.workflow.statoPreventivoIniziale==c.N4.Inviato||this.workflow.statoPreventivoIniziale==c.N4.Visualizzato))}delete(o){this.showDialogConfirm("sbm.configurazione.workFlows.eliminareWorkFlow").then(t=>{null!=o&&(this.workflow=o),this.workflow.isDeleted=!0,this.setIsLoading(!0),this.apiService.setWorkFlow(this.workflow).subscribe(()=>{this.backEvent.emit()})},t=>{})}checkFiltroCampoWorkFlow(o){return this.workflow.tipoWorkFlow==c.iK.Preventivi||this.workflow.tipoWorkFlow==c.iK.Prenotazioni&&(o==c.wV.Arrivo||o==c.wV.ArrivoMinoreUguale||o==c.wV.Partenza||o==c.wV.DataScadenza||o==c.wV.DataCreazione||o==c.wV.DataCancellazione||o==c.wV.DataCaparra)||this.workflow.tipoWorkFlow==c.iK.Pagamenti&&(o==c.wV.Arrivo||o==c.wV.ArrivoMinoreUguale||o==c.wV.Partenza||o==c.wV.DataScadenza||o==c.wV.DataCreazione||o==c.wV.DataCancellazione)||this.workflow.tipoWorkFlow==c.iK.Sondaggi&&(o==c.wV.Arrivo||o==c.wV.Partenza||o==c.wV.DataCreazione||o==c.wV.DataCancellazione)||this.workflow.tipoWorkFlow==c.iK.Richieste&&(o==c.wV.Arrivo||o==c.wV.Partenza||o==c.wV.DataCreazione)||this.workflow.tipoWorkFlow==c.iK.CreazionePreventivo&&(o==c.wV.Arrivo||o==c.wV.Partenza||o==c.wV.DataCreazione)}openDetail(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh",this.showModalDialog(Si,o).componentInstance.oidWorkFlow=this.workflow.oid}openTemplatePreview(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh",this.showModalDialog(ki,o).componentInstance.oidTemplate=this.workflow.template.oid}}Ha.\u0275fac=function(o){return new(o||Ha)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},Ha.\u0275cmp=e.Xpm({type:Ha,selectors:[["app-workflows-edit"]],inputs:{workflow:"workflow"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:61,vars:48,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],[3,"value","placeholder","valueChange"],[4,"ngIf"],["class","row",4,"ngIf"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[3,"placeholder","compareWith","ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","primary",3,"ngModel","ngModelChange"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3"],["class","mat-elevation-z0 border mt-3",4,"ngIf"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"col-6"],[3,"ngModel","placeholder","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","showViewButton","valueChange","onViewButtonClick"],["displayMember","nome",3,"dataLoader","value","placeholder","showViewButton","valueChange","onViewButtonClick",4,"ngIf"],["displayMember","codice",3,"dataLoader","value","placeholder","valueChange"],[1,"mat-elevation-z0","border","mt-3"],[4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","time","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],[3,"startAt"],["datePickerInizioAutomatismo",""],[1,"mt-3","mb-3"],[3,"ngModel","ngModelChange"],["color","primary",1,"mr-2",3,"value"],["color","primary",3,"value"],[3,"value",4,"ngIf"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.workflow.descrizione=a}),e.ALo(4,"translate"),e.qZA()()(),e._UZ(5,"div",4),e.qZA(),e.TgZ(6,"div",0)(7,"div",1)(8,"app-color-picker",5),e.NdJ("valueChange",function(a){return t.workflow.coloreHex=a}),e.ALo(9,"translate"),e.qZA()(),e._UZ(10,"div",4),e.qZA(),e.YNc(11,rte,22,22,"ng-container",6),e.YNc(12,mte,7,4,"div",7),e.TgZ(13,"div",0)(14,"div",1)(15,"app-view-select",8),e.NdJ("valueChange",function(a){return t.workflow.ubicazioneIstat=a}),e.ALo(16,"translate"),e.qZA()(),e._UZ(17,"div",4),e.qZA(),e.YNc(18,_te,6,5,"div",7),e.YNc(19,ute,6,5,"div",7),e.YNc(20,gte,5,5,"div",7),e.TgZ(21,"div",0)(22,"div",1)(23,"mat-form-field",2)(24,"mat-select",9),e.NdJ("ngModelChange",function(a){return t.workflow.linguaDefault=a}),e.ALo(25,"translate"),e._UZ(26,"mat-option",10),e.YNc(27,hte,2,2,"mat-option",11),e.qZA()()(),e._UZ(28,"div",4),e.qZA(),e.TgZ(29,"div",0)(30,"div",1)(31,"mat-form-field",2)(32,"input",3),e.NdJ("ngModelChange",function(a){return t.workflow.emailAggiuntiva=a}),e.ALo(33,"translate"),e.qZA()()(),e.TgZ(34,"div",4),e._uU(35," Email opzionale a cui inviare una copia della mail all'esecuzione dell'automatismo "),e.qZA()(),e.TgZ(36,"div",0)(37,"div",1)(38,"mat-checkbox",12),e.NdJ("ngModelChange",function(a){return t.workflow.isAttivo=a}),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e._UZ(41,"div",4),e.qZA(),e.YNc(42,fte,6,4,"div",13),e.TgZ(43,"div",14)(44,"div",1)(45,"mat-checkbox",12),e.NdJ("ngModelChange",function(a){return t.workflow.isAggiungiPromemoria=a}),e._uU(46),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"div",4),e._uU(49," Aggiunge un promemoria all'interno di Welcome "),e.qZA()(),e.YNc(50,Cte,7,4,"div",13),e.YNc(51,yte,99,96,"mat-card",15),e.TgZ(52,"div",16)(53,"button",17),e.NdJ("click",function(){return t.save()}),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.YNc(56,Jte,3,3,"button",18),e.YNc(57,Ete,3,3,"button",18),e.TgZ(58,"button",19),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(59),e.ALo(60,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,30,"bo.workFlow.proprieta.descrizione")),e.Q6J("ngModel",t.workflow.descrizione),e.xp6(5),e.Q6J("value",t.workflow.coloreHex)("placeholder",e.lcZ(9,32,"bo.workFlow.proprieta.colore")),e.xp6(3),e.Q6J("ngIf",t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Preventivi),e.xp6(1),e.Q6J("ngIf",t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Prenotazioni||t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Pagamenti||t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Sondaggi||t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.CreazionePreventivo),e.xp6(3),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.workflow.ubicazioneIstat)("placeholder",e.lcZ(16,34,"bo.workFlow.proprieta.ubicazioneIstat")),e.xp6(3),e.Q6J("ngIf",t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Prenotazioni),e.xp6(1),e.Q6J("ngIf",t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Sondaggi),e.xp6(1),e.Q6J("ngIf",t.workflow.tipoWorkFlow==t.enumTipoWorkFlow.Pagamenti),e.xp6(4),e.Q6J("placeholder",e.lcZ(25,36,"bo.workFlow.proprieta.linguaDefault"))("compareWith",t.compareWithOid)("ngModel",t.workflow.linguaDefault),e.xp6(2),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",t.lingueAttive),e.xp6(5),e.s9C("placeholder",e.lcZ(33,38,"bo.workFlow.proprieta.emailAggiuntiva")),e.Q6J("ngModel",t.workflow.emailAggiuntiva),e.xp6(6),e.Q6J("ngModel",t.workflow.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(40,40,"bo.workFlow.proprieta.isAttivo")," "),e.xp6(3),e.Q6J("ngIf",t.workflow.tipoWorkFlow!=t.enumTipoWorkFlow.CreazionePreventivo),e.xp6(3),e.Q6J("ngModel",t.workflow.isAggiungiPromemoria),e.xp6(1),e.hij(" ",e.lcZ(47,42,"bo.workFlow.proprieta.isAggiungiPromemoria")," "),e.xp6(4),e.Q6J("ngIf",t.workflow.tipoWorkFlow!=t.enumTipoWorkFlow.CreazionePreventivo),e.xp6(1),e.Q6J("ngIf",!t.workflow.isManuale),e.xp6(3),e.Oqu(e.lcZ(55,44,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.workflow.oid>0),e.xp6(1),e.Q6J("ngIf",t.workflow.oid>0),e.xp6(2),e.Oqu(e.lcZ(60,46,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,He.OY,He.vy,g.x8,qe.S$,qe.mi,Ue.Hw,_.Fj,_.wV,_.JJ,_.On,We.h,ne.d,Te.A,z.X$]});const Nte=function(i){return{selected:i}};function Ote(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",41),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onTipoWorkFlowSelected(l.key.toString()))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(4,Nte,n.filters[0].value==t.key.toString())),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Lte(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",7),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",42)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.configurazione.workFlows.nessunWorkFlow")))}function Dte(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Ite(i,o){1&i&&(e.TgZ(0,"mat-cell",43)(1,"button",44)(2,"i",45),e._uU(3,"edit"),e.qZA()()())}function Qte(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.descrizione"),""))}function Ute(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.descrizione," ")}}function Yte(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.tipoWorkFlow"),""))}function Rte(i,o){if(1&i&&(e.TgZ(0,"div",48),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.ultimaEsecuzione,"dd/MM/yyyy HH:mm:ss")," ")}}function Fte(i,o){if(1&i&&(e.TgZ(0,"mat-cell",46)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Rte,3,4,"div",47),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,n.getEnumKeyTranslation(n.enumTipoWorkFlow,t.tipoWorkFlow,"tipoWorkFlow"))," "),e.xp6(2),e.Q6J("ngIf",!n.utility.isNullDate(t.ultimaEsecuzione))}}function Hte(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.dettagli"),""))}function Kte(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,n.getEnumKeyTranslation(n.enumStatoPreventivo,t.statoPreventivoIniziale,"statoPreventivo"))," -> ",e.lcZ(3,4,n.getEnumKeyTranslation(n.enumStatoPreventivo,t.statoPreventivoFinale,"statoPreventivo"))," ")}}function Gte(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Kte,4,6,"div",5),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.tipoWorkFlow==n.enumTipoWorkFlow.Preventivi)}}function $te(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.campoFiltroWorkFlow"),""))}function Bte(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumCampoFiltroWorkFlow,t.campoFiltroWorkFlow,"campoFiltroWorkFlow"))," ")}}function Vte(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Bte,3,3,"ng-container",5),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.isManuale)}}function Xte(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.condizioneCampoFiltroWorkFlow"),""))}function jte(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumCondizioneCampoFiltroWorkFlow,t.condizioneCampoFiltroWorkFlow,"condizioneCampoFiltroWorkFlow"))," ")}}function Wte(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,jte,3,3,"ng-container",5),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.isManuale)}}function eie(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.giorniCampoFiltroWorkFlow"),""))}function tie(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.giorniCampoFiltroWorkFlow," ")}}function iie(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,tie,2,1,"ng-container",5),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.isManuale)}}function oie(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.template"),""))}function nie(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.template?t.template.nome:""," ")}}function aie(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.isAttivo"),""))}function lie(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._UZ(1,"mat-checkbox",50),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)}}function rie(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.isManuale"),""))}function cie(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._UZ(1,"mat-checkbox",50),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isManuale)}}function sie(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.colore"),""))}function pie(i,o){if(1&i&&e._UZ(0,"mat-cell",51),2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex)}}function die(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.numeroEsecuzioni"),""))}function mie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",49)(1,"span",52),e._uU(2),e.qZA(),e.TgZ(3,"button",53),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.openDetail(r))}),e.TgZ(4,"span",54),e._uU(5," info "),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.numeroEsecuzioni)}}function _ie(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.workFlow.proprieta.numeroErrori"),""))}function uie(i,o){1&i&&(e.TgZ(0,"span",56),e._uU(1,"warning_amber"),e.qZA())}function gie(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e.YNc(1,uie,2,0,"span",55),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.numeroErrori>0)}}function hie(i,o){1&i&&e._UZ(0,"mat-header-cell")}function fie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"button",57),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.duplica(r.oid))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"globals.duplica")))}function Cie(i,o){1&i&&e._UZ(0,"mat-header-cell")}function bie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",58)(1,"button",59),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(66);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",60),e._uU(3,"delete"),e.qZA()()()}}function vie(i,o){1&i&&e._UZ(0,"mat-header-row",61)}function Tie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",62),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function xie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.createFromModel())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.workFlows.nuovoDaModello")))}class Ka extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.sessionService=a,this.utility=l,this.workflow=new v.f2m,this.displayedColumns=["edit","descrizione","tipoWorkFlow","dettagli","campoFiltroWorkFlow","condizioneCampoFiltroWorkFlow","giorniCampoFiltroWorkFlow","template","isAttivo","isManuale","colore","numeroEsecuzioni","numeroErrori","duplica","delete"],this.showTable=!0,this.enumStatoPreventivo=c.N4,this.enumCampoFiltroWorkFlow=c.wV,this.enumCondizioneCampoFiltroWorkFlow=c.f,this.enumTipoWorkFlow=c.iK,this.excludedTipoWorkFlow=this.sessionService.isCrmAttivo()?[]:[c.iK.Preventivi,c.iK.CreazionePreventivo]}ngOnInit(){this.headerService.setTitle("sbm.configurazione.workFlows.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("tipoWorkFlow",c.Hp.Equal,"",c.NM.Number)),this.download()}download(){this.setIsLoading(!0),this.rq.filters=this.utility.getFilters(this.filters),this.apiService.getWorkFlowsFilter(this.rq).subscribe(o=>{for(let t of o.data)try{t.coloreHex=Z(t.colore).hex()}catch(n){}this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Fa,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&(this.workflow=a,this.showTable=!1)})}edit(o){this.workflow=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBackEvent(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}onTipoWorkFlowSelected(o){this.filters[0].value==o?this.filters[0].value="":this.filters[0].value=o,this.download(),this.paginator.firstPage()}openDetail(o){let t=new d.Zpt;t.width="80vw",t.minHeight="30vh",this.showModalDialog(Si,t).componentInstance.oidWorkFlow=o.oid}duplica(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0),this.apiService.duplicaWorkflow(o).subscribe(n=>{this.setIsLoading(!1);try{n.data.coloreHex=Z(n.data.colore).hex()}catch(a){}this.edit(n.data)})},t=>{})}createFromModel(){let o=new d.Zpt;o.width="75vw";let t=this.showModalDialog(Ra,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.download()})}ngOnDestroy(){this.headerService.clearTitle()}}function Zie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Ka.\u0275fac=function(o){return new(o||Ka)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(j.m),e.Y36(C.t))},Ka.\u0275cmp=e.Xpm({type:Ka,selectors:[["app-workflows"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:67,vars:18,consts:[[1,"p-3"],[1,"div-help","mb-3"],[3,"hidden"],[1,"mt-3","mb-3"],["class","d-inline-block tipo-workflow p-2 rounded-lg mr-2",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","descrizione"],[4,"matCellDef"],["matColumnDef","tipoWorkFlow"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","dettagli"],["matColumnDef","campoFiltroWorkFlow"],["matColumnDef","condizioneCampoFiltroWorkFlow"],["matColumnDef","giorniCampoFiltroWorkFlow"],["matColumnDef","template"],["matColumnDef","isAttivo"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","isManuale"],["matColumnDef","colore"],["class","rounded",3,"backgroundColor",4,"matCellDef"],["matColumnDef","numeroEsecuzioni"],["matColumnDef","numeroErrori"],["matColumnDef","duplica"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["class","mt-3","mat-flat-button","","color","primary",3,"click",4,"ngIf"],[1,"edit-container",3,"hidden"],[3,"workflow","backEvent"],["editComponent",""],[1,"d-inline-block","tipo-workflow","p-2","rounded-lg","mr-2",3,"ngClass","click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"flex-wrap"],["class","small font-italic",4,"ngIf"],[1,"small","font-italic"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"rounded"],[1,"d-inline-block","align-middle"],["mat-icon-button","",1,"align-middle","ml-2","info-button",3,"click"],[1,"material-icons","info-icon"],["class","material-icons-round color-red warning-icon",4,"ngIf"],[1,"material-icons-round","color-red","warning-icon"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," NB: per attivare l'invio degli automatismi assicurarsi che sia attiva l'azione automatica all'interno del server Welcome CRM->Esegui automatismi web "),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,Ote,3,6,"span",4),e.ALo(6,"selectEnum"),e.qZA(),e.YNc(7,Lte,8,3,"div",5),e.TgZ(8,"div",2)(9,"button",6),e.NdJ("click",function(){return t.add()}),e.TgZ(10,"i",7),e._uU(11,"add"),e.qZA()(),e.TgZ(12,"div",8)(13,"mat-table",9),e.ynx(14,10),e.YNc(15,Dte,1,0,"mat-header-cell",11),e.YNc(16,Ite,4,0,"mat-cell",12),e.BQk(),e.ynx(17,13),e.YNc(18,Qte,3,3,"mat-header-cell",11),e.YNc(19,Ute,2,1,"mat-cell",14),e.BQk(),e.ynx(20,15),e.YNc(21,Yte,3,3,"mat-header-cell",11),e.YNc(22,Fte,5,4,"mat-cell",16),e.BQk(),e.ynx(23,17),e.YNc(24,Hte,3,3,"mat-header-cell",11),e.YNc(25,Gte,2,1,"mat-cell",14),e.BQk(),e.ynx(26,18),e.YNc(27,$te,3,3,"mat-header-cell",11),e.YNc(28,Vte,2,1,"mat-cell",14),e.BQk(),e.ynx(29,19),e.YNc(30,Xte,3,3,"mat-header-cell",11),e.YNc(31,Wte,2,1,"mat-cell",14),e.BQk(),e.ynx(32,20),e.YNc(33,eie,3,3,"mat-header-cell",11),e.YNc(34,iie,2,1,"mat-cell",14),e.BQk(),e.ynx(35,21),e.YNc(36,oie,3,3,"mat-header-cell",11),e.YNc(37,nie,2,1,"mat-cell",14),e.BQk(),e.ynx(38,22),e.YNc(39,aie,3,3,"mat-header-cell",23),e.YNc(40,lie,2,1,"mat-cell",24),e.BQk(),e.ynx(41,25),e.YNc(42,rie,3,3,"mat-header-cell",23),e.YNc(43,cie,2,1,"mat-cell",24),e.BQk(),e.ynx(44,26),e.YNc(45,sie,3,3,"mat-header-cell",11),e.YNc(46,pie,1,2,"mat-cell",27),e.BQk(),e.ynx(47,28),e.YNc(48,die,3,3,"mat-header-cell",23),e.YNc(49,mie,6,1,"mat-cell",24),e.BQk(),e.ynx(50,29),e.YNc(51,_ie,3,3,"mat-header-cell",23),e.YNc(52,gie,2,1,"mat-cell",24),e.BQk(),e.ynx(53,30),e.YNc(54,hie,1,0,"mat-header-cell",11),e.YNc(55,fie,4,3,"mat-cell",14),e.BQk(),e.ynx(56,31),e.YNc(57,Cie,1,0,"mat-header-cell",11),e.YNc(58,bie,4,0,"mat-cell",32),e.BQk(),e.YNc(59,vie,1,0,"mat-header-row",33),e.YNc(60,Tie,1,1,"mat-row",34),e.qZA()(),e.TgZ(61,"div",35)(62,"mat-paginator",36),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.YNc(63,xie,3,3,"button",37),e.qZA(),e.TgZ(64,"div",38)(65,"app-workflows-edit",39,40),e.NdJ("backEvent",function(){return t.onBackEvent()}),e.qZA()()()),2&o&&(e.xp6(3),e.Q6J("hidden",!t.showTable),e.xp6(2),e.Q6J("ngForOf",e.gM2(6,13,t.enumTipoWorkFlow,"tipoWorkFlow",!0,t.excludedTipoWorkFlow)),e.xp6(2),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(46),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("workflow",t.workflow))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Ha,m.uU,Te.A,z.X$],styles:[".selected[_ngcontent-%COMP%]{color:#e91e63!important;border:1px solid #e91e63!important}.tipo-workflow[_ngcontent-%COMP%]{font-size:16px;font-weight:600;cursor:pointer;border:1px solid #aaaaaa;background-color:#fff}.info-button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px;margin-bottom:1px}.info-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}"]});class Ga extends f.H{set _albergo(o){null!=o&&(this.albergo=o,this.albergoOriginal=JSON.parse(JSON.stringify(this.albergo)))}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe,this.albergo=new v.x9Z,this.getTemplatesTrasferimentoRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.Equal,c.hQ.TrasferimentoPrenotazioni.toString(),c.NM.Number)}save(){this.albergo.utente&&this.albergo.password&&this.albergo.azienda&&this.albergo.server&&this.albergo.porta?(this.setIsLoading(!0),this.albergo.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.apiService.setAlbergoCrs(this.albergo).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.crs.impostazioni.albergoCrsSalvato").then(()=>{this.backEvent.emit()})})):this.showError("globals.messages.inserireDati")}authenticate(){return this.setIsLoading(!0),new Promise((o,t)=>{let n=new d.SjM;n.username=this.albergo.utente,n.password=this.albergo.password,n.oidAlbergo=this.albergo.oidAlbergoWeb,n.dominio=this.albergo.url,n.server=this.albergo.server,n.porta=this.albergo.porta.toString(),n.database=this.albergo.azienda,n.idClientApp="SBM",this.apiService.authenticateWelcome(n).subscribe(a=>{null!=a&&null!=a.utente&&null!=a.albergo&&a.utente.token?o(a.albergo.oidAlbergoWeb):(this.setIsLoading(!1),t())})})}testConnessione(){this.authenticate().then(o=>{this.albergoOriginal.utente=this.albergo.utente,this.albergoOriginal.password=this.albergo.password,this.albergoOriginal.azienda=this.albergo.azienda,this.albergoOriginal.server=this.albergo.server,this.albergoOriginal.porta=this.albergo.porta,this.albergoOriginal.oidAlbergoWeb=o,this.apiService.setAlbergoCrs(this.albergoOriginal).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.crs.impostazioni.datiServerValidi",{oidAlbergoWeb:o})})},()=>{this.showError("sbm.crs.impostazioni.datiServerNonValidi")})}delete(o){this.showDialogConfirm("sbm.crs.impostazioni.eliminareAlbergoCrs").then(t=>{null!=o&&(this.albergo=o),this.albergo.isDeleted=!0,this.setIsLoading(!0),this.apiService.setAlbergoCrs(this.albergo).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function Aie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",29)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.crs.impostazioni.nessunAlbergoCrs")))}function wie(i,o){1&i&&e._UZ(0,"mat-header-cell")}function zie(i,o){1&i&&(e.TgZ(0,"mat-cell",30)(1,"button",31)(2,"i",32),e._uU(3,"edit"),e.qZA()()())}function Mie(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.albergoCrs.proprieta.descrizione")))}function qie(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function Pie(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.albergoCrs.proprieta.azienda")))}function kie(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.azienda)}}function Sie(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.albergoCrs.proprieta.isAttivo")))}function yie(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)}}function Jie(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.albergoCrs.proprieta.isInvioPrenotazioni")))}function Eie(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isInvioPrenotazioni)}}function Nie(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.albergoCrs.proprieta.isRicezionePrenotazioni")))}function Oie(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isRicezionePrenotazioni)}}function Lie(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Die(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",35)(1,"button",36),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.apriSmartCloud(r))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.crs.impostazioni.accedi")))}function Iie(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Qie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",37)(1,"button",38),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(38);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",39),e._uU(3,"delete"),e.qZA()()()}}function Uie(i,o){1&i&&e._UZ(0,"mat-header-row",40)}function Yie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",41),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Ga.\u0275fac=function(o){return new(o||Ga)(e.Y36(A.s),e.Y36(j.m))},Ga.\u0275cmp=e.Xpm({type:Ga,selectors:[["app-albergo-crs-edit"]],inputs:{_albergo:"_albergo"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:49,vars:59,consts:[[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"value","placeholder","valueChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"mt-3","mb-2","font-weight-bold"],[1,"border","rounded","p-3"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["type","password","matInput","","autocomplete","new-password","required","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"mt-3"],["color","primary",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-form-field",0)(1,"input",1),e.NdJ("ngModelChange",function(a){return t.albergo.descrizione=a}),e.ALo(2,"translate"),e.qZA()(),e.TgZ(3,"app-color-picker",2),e.NdJ("valueChange",function(a){return t.albergo.colore=a}),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"app-view-select",3),e.NdJ("valueChange",function(a){return t.albergo.templateRicezionePrenotazioni=a}),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"h5",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",5)(11,"mat-form-field",0)(12,"input",6),e.NdJ("ngModelChange",function(a){return t.albergo.utente=a}),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"mat-form-field",0)(15,"input",7),e.NdJ("ngModelChange",function(a){return t.albergo.password=a}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"mat-form-field",0)(18,"input",6),e.NdJ("ngModelChange",function(a){return t.albergo.server=a}),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"mat-form-field",0)(21,"input",8),e.NdJ("ngModelChange",function(a){return t.albergo.porta=a}),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"mat-form-field",0)(24,"input",6),e.NdJ("ngModelChange",function(a){return t.albergo.azienda=a}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"button",9),e.NdJ("click",function(){return t.testConnessione()}),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",10)(30,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isAttivo=a}),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"div")(34,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isRicezionePrenotazioni=a}),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"div")(38,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.albergo.isInvioPrenotazioni=a}),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"div",10)(42,"button",12),e.NdJ("click",function(){return t.save()}),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.YNc(45,Zie,3,3,"button",13),e.TgZ(46,"button",14),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(47),e.ALo(48,"translate"),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("placeholder",e.lcZ(2,29,"bo.albergoCrs.proprieta.descrizione"))("ngModel",t.albergo.descrizione),e.xp6(2),e.Q6J("value",t.albergo.colore)("placeholder",e.lcZ(4,31,"bo.albergoCrs.proprieta.colore")),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesTrasferimentoRQ))("value",t.albergo.templateRicezionePrenotazioni)("placeholder",e.lcZ(6,33,"bo.albergoCrs.proprieta.templateRicezionePrenotazioni")),e.xp6(3),e.Oqu(e.lcZ(9,35,"sbm.crs.impostazioni.datiCollegamentoServer")),e.xp6(4),e.Q6J("placeholder",e.lcZ(13,37,"bo.albergoCrs.proprieta.utente"))("ngModel",t.albergo.utente),e.xp6(3),e.Q6J("placeholder",e.lcZ(16,39,"bo.albergoCrs.proprieta.password"))("ngModel",t.albergo.password),e.xp6(3),e.Q6J("placeholder",e.lcZ(19,41,"bo.albergoCrs.proprieta.server"))("ngModel",t.albergo.server),e.xp6(3),e.Q6J("placeholder",e.lcZ(22,43,"bo.albergoCrs.proprieta.porta"))("ngModel",t.albergo.porta),e.xp6(3),e.Q6J("placeholder",e.lcZ(25,45,"bo.albergoCrs.proprieta.azienda"))("ngModel",t.albergo.azienda),e.xp6(2),e.Q6J("disabled",!(t.albergo.utente&&t.albergo.password&&t.albergo.azienda&&t.albergo.server&&t.albergo.porta)),e.xp6(1),e.Oqu(e.lcZ(28,47,"sbm.crs.impostazioni.testConnessione")),e.xp6(3),e.Q6J("ngModel",t.albergo.isAttivo),e.xp6(1),e.Oqu(e.lcZ(32,49,"bo.albergoCrs.proprieta.isAttivo")),e.xp6(3),e.Q6J("ngModel",t.albergo.isRicezionePrenotazioni),e.xp6(1),e.hij(" ",e.lcZ(36,51,"bo.albergoCrs.proprieta.isRicezionePrenotazioni"),""),e.xp6(3),e.Q6J("ngModel",t.albergo.isInvioPrenotazioni),e.xp6(1),e.hij(" ",e.lcZ(40,53,"bo.albergoCrs.proprieta.isInvioPrenotazioni"),""),e.xp6(4),e.Oqu(e.lcZ(44,55,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.albergo&&t.albergo.oid>0),e.xp6(2),e.Oqu(e.lcZ(48,57,"globals.annulla")))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,_.Fj,_.wV,_.JJ,_.Q7,_.On,We.h,ne.d,z.X$]});class $a extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.albergo=new v.x9Z,this.showTable=!0,this.displayedColumns=["edit","descrizione","azienda","isAttivo","isInvioPrenotazioni","isRicezionePrenotazioni","login","delete"]}ngOnInit(){this.headerService.setTitle("sbm.crs.impostazioni.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getAlberghiCrs().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.albergo=new v.x9Z(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.albergo=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}apriSmartCloud(o){this.utility.openUrlInNewTab("http://"+o.server+":"+o.porta+"?server="+o.server+"&azienda="+o.azienda+"&porta="+o.porta+"&utente="+o.utente+"&password="+o.password)}}function Rie(i,o){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("value",t.oidAlbergoWeb)("disabled",n.rq.oidAlberghi.includes(t.oidAlbergoWeb)&&n.rq.oidAlberghi.length<=1),e.xp6(1),e.hij(" ",t.descrizione," ")}}$a.\u0275fac=function(o){return new(o||$a)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},$a.\u0275cmp=e.Xpm({type:$a,selectors:[["app-configurazione-crs"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:39,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","descrizione"],[4,"matCellDef"],["matColumnDef","azienda"],["matColumnDef","isAttivo"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","isInvioPrenotazioni"],["matColumnDef","isRicezionePrenotazioni"],["matColumnDef","login"],["class","justify-content-end",4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"_albergo","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"justify-content-end"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Aie,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,wie,1,0,"mat-header-cell",8),e.YNc(10,zie,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,Mie,3,3,"mat-header-cell",8),e.YNc(13,qie,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,Pie,3,3,"mat-header-cell",8),e.YNc(16,kie,2,1,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,Sie,3,3,"mat-header-cell",14),e.YNc(19,yie,2,1,"mat-cell",15),e.BQk(),e.ynx(20,16),e.YNc(21,Jie,3,3,"mat-header-cell",14),e.YNc(22,Eie,2,1,"mat-cell",15),e.BQk(),e.ynx(23,17),e.YNc(24,Nie,3,3,"mat-header-cell",14),e.YNc(25,Oie,2,1,"mat-cell",15),e.BQk(),e.ynx(26,18),e.YNc(27,Lie,1,0,"mat-header-cell",8),e.YNc(28,Die,4,3,"mat-cell",19),e.BQk(),e.ynx(29,20),e.YNc(30,Iie,1,0,"mat-header-cell",8),e.YNc(31,Qie,4,0,"mat-cell",21),e.BQk(),e.YNc(32,Uie,1,0,"mat-header-row",22),e.YNc(33,Yie,1,1,"mat-row",23),e.qZA()(),e.TgZ(34,"div",24)(35,"mat-paginator",25),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(36,"div",26)(37,"app-albergo-crs-edit",27,28),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("_albergo",t.albergo))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Ga,z.X$]});const Fie=function(i){return{"month-selected":i}};function Hie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",26),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw();return e.KtG(r.monthSelected(l))}),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,Fie,a.selectedMonth==n&&a.selectedYear==a.currentYear)),e.xp6(1),e.hij(" ",e.lcZ(3,2,t)," ")}}function Kie(i,o){if(1&i&&(e.TgZ(0,"b",45),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"momentFormat"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,e.Dn7(3,3,t,"MMMM YYYY",n.getLocale())))}}function Gie(i,o){if(1&i&&(e.TgZ(0,"td",43),e.YNc(1,Kie,4,7,"b",44),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(0==n||1==a.getDateNumber(t))&&a.viewMonth(t))}}const $ie=function(i){return{color:i}};function Bie(i,o){if(1&i&&(e.TgZ(0,"td",46)(1,"div"),e._uU(2),e.ALo(3,"momentFormat"),e.qZA(),e.TgZ(4,"b",47),e._uU(5),e.ALo(6,"momentFormat"),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngStyle",e.VKq(11,$ie,n.isWeekend(t)?"#ff7a7a":null)),e.xp6(2),e.Oqu(e.Dn7(3,3,t,"ddd",n.getLocale())),e.xp6(3),e.Oqu(e.Dn7(6,7,t,"DD",n.getLocale()))}}function Vie(i,o){if(1&i&&e._UZ(0,"img",54),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.icona,e.LSH)}}const ms=function(i){return{"border-bottom":i}};function Xie(i,o){if(1&i&&(e.TgZ(0,"div",55),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(2,ms,n<a.tipiCamera.length-1)),e.xp6(1),e.Oqu(t.descrizione)}}function jie(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw().index,l=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(2,ms,n<l.tipiCamera.length-1)),e.xp6(1),e.Oqu(t.giorni[a].disponibili)}}function Wie(i,o){if(1&i&&(e.TgZ(0,"td",56),e.YNc(1,jie,2,4,"div",57),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.tipiCamera)}}function eoe(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td",48),e.YNc(2,Vie,1,1,"img",49),e.TgZ(3,"span",50),e._uU(4),e.qZA()(),e.TgZ(5,"td",51),e.YNc(6,Xie,2,4,"div",52),e.qZA(),e.YNc(7,Wie,2,1,"td",53),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!!t.icona),e.xp6(2),e.Oqu(t.nome),e.xp6(2),e.Q6J("ngForOf",t.tipiCamera),e.xp6(1),e.Q6J("ngForOf",n.giorni)}}function toe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"div",2)(3,"div",29)(4,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.previous30Days())}),e.TgZ(5,"span",31),e._uU(6,"keyboard_arrow_left"),e.qZA(),e.TgZ(7,"span",32),e._uU(8,"keyboard_arrow_left"),e.qZA(),e._uU(9," 30gg "),e.qZA(),e.TgZ(10,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.previous15Days())}),e.TgZ(11,"span",31),e._uU(12,"keyboard_arrow_left"),e.qZA(),e._uU(13," 15gg "),e.qZA()(),e.TgZ(14,"div",34)(15,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.next15Days())}),e._uU(16," 15gg "),e.TgZ(17,"span",31),e._uU(18,"keyboard_arrow_right"),e.qZA()(),e.TgZ(19,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.next30Days())}),e._uU(20," 30gg "),e.TgZ(21,"span",35),e._uU(22,"keyboard_arrow_right"),e.qZA(),e.TgZ(23,"span",31),e._uU(24,"keyboard_arrow_right"),e.qZA()()()()(),e.TgZ(25,"table")(26,"tr"),e._UZ(27,"td",36)(28,"td",37),e.YNc(29,Gie,2,1,"td",38),e.qZA(),e.TgZ(30,"tr"),e._UZ(31,"td",39)(32,"td",40),e.YNc(33,Bie,7,13,"td",41),e.qZA(),e.YNc(34,eoe,8,4,"tr",42),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(29),e.Q6J("ngForOf",t.giorni),e.xp6(4),e.Q6J("ngForOf",t.giorni),e.xp6(1),e.Q6J("ngForOf",t.portali)}}function ioe(i,o){1&i&&(e.TgZ(0,"div",59)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.crs.disponibilita.nessunaDisponibilita")))}const ooe=function(i){return{"color-pink":i}};class Ba extends f.H{constructor(o,t){super(),this.apiService=o,this.localizationService=t,this.rq=new d.CC7,this.alberghiCrs=[],this.months=[]}ngOnInit(){this.setIsLoading(!0),this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.oneMonthFromToday),this.currentYear=u().year(),this.fillMonths(),this.apiService.getAlberghiCrsFilter(d.k$g.fromFilters([new d.wn$("oidAlbergoWeb",c.Hp.Greater,"0",c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)])).subscribe(o=>{this.alberghiCrs=o.data,this.rq.oidAlberghi=this.alberghiCrs.map(t=>t.oidAlbergoWeb),this.download()}),this.sub=this.localizationService.languageChanged.subscribe(()=>{this.fillMonths()})}download(){this.setIsLoading(!0),this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.apiService.getPlanningDisponibilitaCrs(this.rq).subscribe(o=>{this.giorni=o.data.giorni,this.portali=o.data.portali,this.setIsLoading(!1)})}dalChange(){u(this.rq.dal).startOf("day")>u(this.rq.al).startOf("day")&&(this.rq.al=this.getDate(u(this.rq.dal).add(1,"day"))),this.download(),this.selectedMonth=null,this.selectedYear=null}alChange(){u(this.rq.al).startOf("day")<u(this.rq.dal).startOf("day")&&(this.rq.dal=this.getDate(u(this.rq.al).add(-1,"day"))),this.download(),this.selectedMonth=null,this.selectedYear=null}fillMonths(){this.months=[];for(let o=0;o<12;o++)this.months.push(u().set("month",o).format("MMM"))}nextYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear++,this.setIsLoading(!1)},500)}previousYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear--,this.setIsLoading(!1)},500)}monthSelected(o){let t=u().set("year",this.currentYear).set("month",o).set("date",1);this.rq.dal=this.getDate(t),this.rq.al=this.getDate(t.set("date",t.daysInMonth())),this.selectedMonth=o,this.selectedYear=this.currentYear,this.download()}getDateNumber(o){return u(o).date()}viewMonth(o){return u(o).month()==u(this.rq.al).month()?u(this.rq.al).date()-u(o).date()>=2:u(o).daysInMonth()-u(o).date()>=2}isWeekend(o){let t=u(o);return 6==t.day()||0==t.day()}returnToToday(){this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.oneMonthFromToday),this.download(),this.selectedMonth=null,this.selectedYear=null}previous30Days(){this.rq.dal=this.getDate(u(this.rq.dal).subtract(30,"day")),this.rq.al=this.getDate(u(this.rq.al).subtract(30,"day")),this.download(),this.selectedMonth=null,this.selectedYear=null}previous15Days(){this.rq.dal=this.getDate(u(this.rq.dal).subtract(15,"day")),this.rq.al=this.getDate(u(this.rq.al).subtract(15,"day")),this.download(),this.selectedMonth=null,this.selectedYear=null}next15Days(){this.rq.dal=this.getDate(u(this.rq.dal).add(15,"day")),this.rq.al=this.getDate(u(this.rq.al).add(15,"day")),this.download(),this.selectedMonth=null,this.selectedYear=null}next30Days(){this.rq.dal=this.getDate(u(this.rq.dal).add(30,"day")),this.rq.al=this.getDate(u(this.rq.al).add(30,"day")),this.download(),this.selectedMonth=null,this.selectedYear=null}onSelectAllClick(){this.rq.oidAlberghi.length<this.alberghiCrs.length&&(this.rq.oidAlberghi=this.alberghiCrs.map(o=>o.oidAlbergoWeb),this.download())}isAllSelectedAlberghi(o){return o.selected.length==this.alberghiCrs.length}isAllDeselected(o){return 0==o.selected.length}ngOnDestroy(){this.sub.unsubscribe()}}Ba.\u0275fac=function(o){return new(o||Ba)(e.Y36(A.s),e.Y36(Oe.o))},Ba.\u0275cmp=e.Xpm({type:Ba,selectors:[["app-disponibilita-crs"]],features:[e.qOj],decls:49,vars:44,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["multiple","",3,"panelClass","placeholder","ngModel","ngModelChange","selectionChange"],["selectAlberghi",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value","disabled",4,"ngFor","ngForOf"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"col-4","text-right"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],[1,"row","mb-2","mr-0","ml-0"],[1,"col-month-select","col-year-previous"],[1,"year-cell","border","rounded","p-1",3,"click"],[1,"align-middle"],["class","col-month-select",4,"ngFor","ngForOf"],[1,"col-month-select","col-year-next"],["class","planning-container position-relative",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"value","disabled"],[1,"col-month-select"],[1,"month-select-cell","rounded","p-1",3,"ngClass","click"],[1,"planning-container","position-relative"],[1,"p-3","position-sticky","next-previous-days-container"],[1,"col-6"],["mat-stroked-button","","color","blank",1,"mr-1",3,"click"],[1,"material-icons"],[1,"material-icons","ml-n3"],["mat-stroked-button","","color","blank",3,"click"],[1,"col-6","text-right"],[1,"material-icons","mr-n3"],[1,"sticky-left","no-outline"],[1,"sticky-left","sticky-left-tipo-camera","no-outline"],["class","td-mese",4,"ngFor","ngForOf"],[1,"sticky-left"],[1,"sticky-left","sticky-left-tipo-camera"],["class","td-giorno",3,"ngStyle",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"td-mese"],["class","mese",4,"ngIf"],[1,"mese"],[1,"td-giorno",3,"ngStyle"],[1,"giorno"],[1,"sticky-left","font-weight-bold","td-portale"],["class","portale-icon ml-1 mr-1 align-middle",3,"src",4,"ngIf"],[1,"d-inline-block","align-middle"],[1,"sticky-left","sticky-left-tipo-camera","p-0"],["class","div-tipo-camera",3,"ngClass",4,"ngFor","ngForOf"],["class","p-0",4,"ngFor","ngForOf"],[1,"portale-icon","ml-1","mr-1","align-middle",3,"src"],[1,"div-tipo-camera",3,"ngClass"],[1,"p-0"],["class","div-tipo-camera justify-content-center",3,"ngClass",4,"ngFor","ngForOf"],[1,"div-tipo-camera","justify-content-center",3,"ngClass"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-select",5,6),e.NdJ("ngModelChange",function(a){return t.rq.oidAlberghi=a})("selectionChange",function(){return t.download()}),e.ALo(7,"translate"),e.TgZ(8,"mat-checkbox",7),e.NdJ("click",function(a){return a.preventDefault(),t.onSelectAllClick()}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,Rie,2,3,"mat-option",8),e.qZA()()(),e.TgZ(12,"div",3)(13,"mat-form-field",4)(14,"input",9),e.NdJ("ngModelChange",function(a){return t.rq.dal=a})("dateChange",function(){return t.dalChange()}),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"mat-datepicker-toggle",10)(17,"mat-datepicker",null,11),e.qZA()(),e.TgZ(19,"div",3)(20,"mat-form-field",4)(21,"input",9),e.NdJ("ngModelChange",function(a){return t.rq.al=a})("dateChange",function(){return t.alChange()}),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"mat-datepicker-toggle",10)(24,"mat-datepicker",null,12),e.qZA()()(),e.TgZ(26,"div",2)(27,"div",3)(28,"app-view-select",13),e.NdJ("valueChange",function(a){return t.tipoCamera=a})("valueChange",function(){return t.rq.nomeTipoCamera=t.tipoCamera.nome,t.rq.nomeTipoCameraStandard=null,t.tipoCameraStandard=null,t.download()}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",3)(31,"app-view-select",13),e.NdJ("valueChange",function(a){return t.tipoCameraStandard=a})("valueChange",function(){return t.rq.nomeTipoCameraStandard=t.tipoCameraStandard.nome,t.rq.nomeTipoCamera=null,t.tipoCamera=null,t.download()}),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"div",14)(34,"button",15),e.NdJ("click",function(){return t.returnToToday()}),e._uU(35),e.ALo(36,"translate"),e.qZA()()()(),e.TgZ(37,"div",16)(38,"div",17)(39,"div",18),e.NdJ("click",function(){return t.previousYearClick()}),e.TgZ(40,"span",19),e._uU(41),e.qZA()()(),e.YNc(42,Hie,4,6,"div",20),e.TgZ(43,"div",21)(44,"div",18),e.NdJ("click",function(){return t.nextYearClick()}),e.TgZ(45,"span",19),e._uU(46),e.qZA()()()(),e.YNc(47,toe,35,3,"div",22),e.YNc(48,ioe,4,3,"div",23),e.qZA()),2&o){const n=e.MAs(6),a=e.MAs(18),l=e.MAs(25);e.xp6(5),e.Q6J("panelClass","prenotazioni-crs-albergo-select")("placeholder",e.lcZ(7,28,"sbm.crs.disponibilita.alberghi"))("ngModel",t.rq.oidAlberghi),e.xp6(3),e.Q6J("ngClass",e.VKq(42,ooe,t.isAllSelectedAlberghi(n)))("checked",t.isAllSelectedAlberghi(n))("indeterminate",!t.isAllSelectedAlberghi(n)&&!t.isAllDeselected(n)),e.xp6(1),e.hij(" ",e.lcZ(10,30,"globals.selezionaTutti"),""),e.xp6(2),e.Q6J("ngForOf",t.alberghiCrs),e.xp6(3),e.Q6J("matDatepicker",a)("placeholder",e.lcZ(15,32,"globals.dal"))("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",a),e.xp6(5),e.Q6J("matDatepicker",l)("placeholder",e.lcZ(22,34,"globals.al"))("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",l),e.xp6(5),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("value",t.tipoCamera)("placeholder",e.lcZ(29,36,"globals.tipoCamera")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraStandardViewSelect())("value",t.tipoCameraStandard)("placeholder",e.lcZ(32,38,"sbm.crs.disponibilita.tipoCameraStandard")),e.xp6(4),e.Oqu(e.lcZ(36,40,"sbm.crs.disponibilita.oggi")),e.xp6(6),e.Oqu(t.currentYear-1),e.xp6(1),e.Q6J("ngForOf",t.months),e.xp6(4),e.Oqu(t.currentYear+1),e.xp6(1),e.Q6J("ngIf",null!=t.portali&&t.portali.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.portali&&0==t.portali.length)}},dependencies:[m.mk,m.sg,m.O5,m.PC,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,_.Fj,_.JJ,_.On,ne.d,m.rS,K.H,z.X$],styles:["td[_ngcontent-%COMP%]{white-space:nowrap;background-color:#fff;border:1px solid #dddddd;padding:5px 8px}.td-mese[_ngcontent-%COMP%]{border:none!important;background-color:transparent}.td-giorno[_ngcontent-%COMP%]{font-size:small;text-align:center}.sticky-left[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;z-index:1020;outline:1px solid #dddddd;border:none;outline-offset:-1px}.sticky-left-tipo-camera[_ngcontent-%COMP%]{left:250px!important}.no-outline[_ngcontent-%COMP%]{outline:none;background-color:transparent!important}.giorno[_ngcontent-%COMP%], .mese[_ngcontent-%COMP%]{display:inline-block!important;width:41px!important}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #dddddd}.div-tipo-camera[_ngcontent-%COMP%]{padding:2px 8px;display:flex;align-items:center;height:30px;font-size:14px}.planning-container[_ngcontent-%COMP%]{border-radius:5px;border-style:solid;border-width:thin;border-color:#0000001a;background-color:#fff;overflow:auto}.td-portale[_ngcontent-%COMP%]{width:250px!important;min-width:250px!important;max-width:250px!important;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.next-previous-days-container[_ngcontent-%COMP%]{top:0;left:0}.portale-icon[_ngcontent-%COMP%]{width:24px;height:24px}  .disponibilita-crs-albergo-select .mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled{background-color:#e91e63!important}  .disponibilita-crs-albergo-select .mat-option.mat-option-disabled{color:#e91e63!important}"]});var noe=Y(96755);function aoe(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",n.getAlbergoCrs(t.albergo.oid).descrizione+" - "+t.nome," ")}}function loe(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"globals.portale")),e.xp6(3),e.Oqu(t.portaleXAlbergo.nome)}}function roe(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"globals.cliente")),e.xp6(3),e.Oqu(t.cliente.nome+" "+t.cliente.cognome)}}function coe(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.prenotazione.proprieta.tipoCamera")),e.xp6(3),e.Oqu(t.tipoCamera.nome)}}function soe(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.prenotazione.proprieta.trattamento")),e.xp6(3),e.Oqu(t.trattamento.nome)}}function poe(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.prenotazione.proprieta.sourceBrand")),e.xp6(3),e.Oqu(t.sourceBrand)}}function doe(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function moe(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function _oe(i,o){if(1&i&&(e.TgZ(0,"span",32),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();e.xp6(1),e.Oqu(n.rq.prenotazioni[t].disponibili>=0?n.rq.prenotazioni[t].disponibili:"---")}}function uoe(i,o){1&i&&e._UZ(0,"mat-spinner",33),2&i&&e.Q6J("diameter",14)}function goe(i,o){if(1&i&&(e.TgZ(0,"span",32),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();e.xp6(1),e.Oqu(n.rq.prenotazioni[t].totale>=0?e.lcZ(2,1,n.rq.prenotazioni[t].totale):"---")}}function hoe(i,o){1&i&&e._UZ(0,"mat-spinner",33),2&i&&e.Q6J("diameter",14)}function foe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),e.YNc(4,loe,6,4,"div",13),e.TgZ(5,"div",14)(6,"div",15),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",16),e._uU(10),e.qZA()(),e.TgZ(11,"div",14)(12,"div",15),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",16),e._uU(16),e.ALo(17,"date"),e.ALo(18,"date"),e.qZA()(),e.YNc(19,roe,6,4,"div",13),e.qZA(),e.TgZ(20,"div",17)(21,"div",14)(22,"div",15),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"div",16),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.YNc(28,coe,6,4,"div",13),e.YNc(29,soe,6,4,"div",13),e.YNc(30,poe,6,4,"div",13),e.qZA()()(),e.TgZ(31,"span",18),e._uU(32,"keyboard_arrow_right"),e.qZA(),e.TgZ(33,"div",19)(34,"div",11)(35,"div",20)(36,"div",21)(37,"mat-form-field",22)(38,"mat-select",3),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw();return e.KtG(p.rq.prenotazioni[r].oidTipoCamera=a)})("selectionChange",function(){const l=e.CHM(t).index,r=e.oxw();return e.KtG(r.getDisponibili(r.rq.prenotazioni[l]))}),e.ALo(39,"translate"),e.YNc(40,doe,2,2,"mat-option",4),e.qZA()()(),e.TgZ(41,"div",21)(42,"mat-form-field",22)(43,"mat-select",3),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw();return e.KtG(p.rq.prenotazioni[r].oidTariffa=a)})("selectionChange",function(){const l=e.CHM(t).index,r=e.oxw();return e.KtG(r.getDisponibili(r.rq.prenotazioni[l]))}),e.ALo(44,"translate"),e.YNc(45,moe,2,2,"mat-option",4),e.qZA()()()(),e.TgZ(46,"mat-form-field",22)(47,"textarea",23),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw();return e.KtG(p.rq.prenotazioni[r].noteTrasferimento=a)}),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"div")(50,"div",24)(51,"span",25),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.YNc(54,_oe,2,1,"span",26),e.YNc(55,uoe,1,1,"mat-spinner",27),e.qZA(),e.TgZ(56,"div",28)(57,"span",25),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.YNc(60,goe,3,3,"span",26),e.YNc(61,hoe,1,1,"mat-spinner",27),e.qZA(),e.TgZ(62,"mat-form-field",29)(63,"input",30),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw();return e.KtG(p.rq.prenotazioni[r].totaleNuovaPrenotazione=a)}),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"span",31),e._uU(66,"\u20ac"),e.qZA()()()()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(4),e.Q6J("ngIf",null!=t.portaleXAlbergo),e.xp6(3),e.Oqu(e.lcZ(8,28,"globals.codice")),e.xp6(3),e.Oqu(t.codicePrenotazione?t.codicePrenotazione:t.codiceOTA),e.xp6(3),e.Oqu(e.lcZ(14,30,"sbm.crs.prenotazioni.periodo")),e.xp6(3),e.Oqu(e.xi3(17,32,t.arrivo,"dd/MM/yyyy")+" -> "+e.xi3(18,35,t.partenza,"dd/MM/yyyy")),e.xp6(3),e.Q6J("ngIf",null!=t.cliente),e.xp6(4),e.Oqu(e.lcZ(24,38,"bo.prenotazione.proprieta.tipoPrenotazione")),e.xp6(3),e.Oqu(e.lcZ(27,40,a.getEnumKeyTranslation(a.enumTipoPrenotazione,t.tipoPrenotazione,"tipoPrenotazione"))),e.xp6(2),e.Q6J("ngIf",null!=t.tipoCamera),e.xp6(1),e.Q6J("ngIf",null!=t.trattamento),e.xp6(1),e.Q6J("ngIf",!!t.sourceBrand),e.xp6(8),e.Q6J("placeholder",e.lcZ(39,42,"globals.tipoCamera"))("ngModel",a.rq.prenotazioni[n].oidTipoCamera),e.xp6(2),e.Q6J("ngForOf",a.tipiCamera),e.xp6(3),e.Q6J("placeholder",e.lcZ(44,44,"globals.tariffa"))("ngModel",a.rq.prenotazioni[n].oidTariffa),e.xp6(2),e.Q6J("ngForOf",a.tariffe),e.xp6(2),e.Q6J("placeholder",e.lcZ(48,46,"bo.prenotazione.proprieta.noteTrasferimentoPrenotazione"))("ngModel",a.rq.prenotazioni[n].noteTrasferimento),e.xp6(5),e.Oqu(e.lcZ(53,48,"sbm.crs.prenotazioni.disponibili")),e.xp6(2),e.Q6J("ngIf",null!=a.rq.prenotazioni[n].disponibili),e.xp6(1),e.Q6J("ngIf",null==a.rq.prenotazioni[n].disponibili),e.xp6(3),e.Oqu(e.lcZ(59,50,"sbm.crs.prenotazioni.totale")),e.xp6(2),e.Q6J("ngIf",null!=a.rq.prenotazioni[n].totale),e.xp6(1),e.Q6J("ngIf",null==a.rq.prenotazioni[n].totale),e.xp6(2),e.Q6J("placeholder",e.lcZ(64,52,"sbm.crs.prenotazioni.totaleNuovaPrenotazione"))("ngModel",a.rq.prenotazioni[n].totaleNuovaPrenotazione)("readonly",null==a.rq.prenotazioni[n].totale)}}class Va extends f.H{constructor(o,t,n){super(),this.apiService=o,this.utility=t,this.sessionService=n,this.enumTipoPrenotazione=c.DS,this.portali=[],this.tipiCamera=[],this.tariffe=[],this.rq=new d.xBL}ngOnInit(){this.setIsLoading(!0),this.rq.prenotazioni=this.prenotazioni.map(a=>{var l;let r=new d.oRB;return r.noteTrasferimento="Trasferita da "+this.getAlbergoCrs(a.oidAlbergo).descrizione+" -> "+(null===(l=a.portaleXAlbergo)||void 0===l?void 0:l.nome)+" il "+u().format("DD/MM/YYYY")+" da "+this.sessionService.getUtente(),r}),this.rq.prenotazioni.forEach(a=>a.disponibili=-1),this.rq.prenotazioni.forEach(a=>a.totale=-1),this.rq.prenotazioni.forEach(a=>a.totaleNuovaPrenotazione=0);let o,t=this.prenotazioni.filter(a=>null!=a.portaleXAlbergo);t.length>0&&this.prenotazioni.every(a=>null==a.portaleXAlbergo||a.portaleXAlbergo.oid==t[0].portaleXAlbergo.oid)&&(o=t[0].portaleXAlbergo.oid);let n=d.k$g.fromFilters([new d.wn$("albergo.oid",c.Hp.In,"("+this.alberghiCrsRicezionePrenotazioni.map(a=>a.oidAlbergoWeb).join(",")+")",c.NM.Number),new d.wn$("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)]);null!=o&&n.filters.push(new d.wn$("oid",c.Hp.NotEqual,o.toString(),c.NM.Number)),this.apiService.getPortaliXAlbergoAdminFilter(n).subscribe(a=>{this.portali=a.data,this.portali.length>0?(this.rq.oidPortale=this.portali[0].oid,this.onPortaleChange()):this.setIsLoading(!1)})}onPortaleChange(){var o;this.setIsLoading(!0),this.rq.oidTemplate=null===(o=this.getAlbergoCrs(this.utility.findItemByOid(this.portali,this.rq.oidPortale).albergo.oid).templateRicezionePrenotazioni)||void 0===o?void 0:o.oid;let t=new d.ID2;t.oidPortale=this.rq.oidPortale,this.apiService.getTrasferisciPrenotazioniView(t).subscribe(n=>{this.tipiCamera=n.data.tipiCamera,this.tariffe=n.data.tariffe;let a=0;for(let p of this.prenotazioni){var l,r;let T,L;null!=p.tipoCameraOTA&&(T=this.tipiCamera.find(G=>!!G.codice&&!!p.tipoCameraOTA.codice&&G.codice.toLowerCase()==p.tipoCameraOTA.codice.toLowerCase()||!!G.descrizione&&!!p.tipoCameraOTA.descrizione&&G.descrizione.toLowerCase()==p.tipoCameraOTA.descrizione.toLowerCase())),null!=p.tariffaOTA&&(L=this.tariffe.find(G=>!!G.codice&&!!p.tariffaOTA.codice&&G.codice.toLowerCase()==p.tariffaOTA.codice.toLowerCase()||!!G.descrizione&&!!p.tariffaOTA.descrizione&&G.descrizione.toLowerCase()==p.tariffaOTA.descrizione.toLowerCase())),this.rq.prenotazioni[a].oidPrenotazione=p.oid,this.rq.prenotazioni[a].oidTipoCamera=null===(l=T)||void 0===l?void 0:l.oid,this.rq.prenotazioni[a].oidTariffa=null===(r=L)||void 0===r?void 0:r.oid,this.getDisponibili(this.rq.prenotazioni[a]),a++}this.setIsLoading(!1)})}trasferisciPrenotazioni(){let o=this.prenotazioni.filter(t=>{var n;return(null===(n=t.portaleXAlbergo)||void 0===n?void 0:n.oid)==this.rq.oidPortale});o.length>0?this.showError("sbm.crs.prenotazioni.erroreTrasferimento",{value:o.map(t=>t.codicePrenotazione?t.codicePrenotazione:t.codiceOTA).join(", ")}):(this.setIsLoading(!0),this.apiService.trasferisciPrenotazioni(this.rq).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.crs.prenotazioni.prenotazioniTrasferite").then(()=>{this.dialogRef.close(!0)})}))}checkTipiCameraTariffeSelected(){return null==this.rq.prenotazioni||this.rq.prenotazioni.some(o=>null==o.oidTipoCamera||o.oidTipoCamera<=0||null==o.oidTariffa||o.oidTariffa<=0||o.totaleNuovaPrenotazione<=0)}getAlbergoCrs(o){return this.alberghiCrs.find(t=>t.oidAlbergoWeb==o)}getDisponibili(o){if(o.oidTipoCamera>0&&o.oidTariffa>0){let t=new d.dnF;t.oidPrenotazione=o.oidPrenotazione,t.oidTipoCamera=o.oidTipoCamera,t.oidTariffa=o.oidTariffa,t.oidPortale=this.rq.oidPortale,o.disponibili=null,o.totale=null,o.totaleNuovaPrenotazione=0,this.apiService.getDisponibiliCrs(t).subscribe(n=>{o.disponibili=n.data.disponibili,o.totale=n.data.totale,o.totaleNuovaPrenotazione=o.totale})}else o.disponibili=-1,o.totale=-1,o.totaleNuovaPrenotazione=0}}function Coe(i,o){if(1&i&&(e.TgZ(0,"mat-option",77),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oidAlbergoWeb),e.xp6(1),e.hij(" ",t.descrizione," ")}}function boe(i,o){if(1&i&&(e.TgZ(0,"mat-option",77),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function voe(i,o){if(1&i&&(e.TgZ(0,"mat-option",77),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Toe(i,o){1&i&&(e.TgZ(0,"div",78)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.crs.prenotazioni.nessunaPrenotazione")))}function xoe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.trasferisciPrenotazioni())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.crs.prenotazioni.trasferisci")))}function Zoe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",82),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(a?l.masterTogglePrenotazioni():null)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("checked",t.selectionPrenotazioni.hasValue()&&t.isAllSelectedPrenotazioni())("indeterminate",t.selectionPrenotazioni.hasValue()&&!t.isAllSelectedPrenotazioni())}}function Aoe(i,o){if(1&i&&(e.TgZ(0,"mat-header-cell",80),e.YNc(1,Zoe,1,2,"mat-checkbox",81),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isTrasferimentoAttivo&&t.isPrenotazioniCheckVisible())}}function woe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",85),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return e.KtG(a?r.selectionPrenotazioni.toggle(l.oid):null)}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("checked",n.selectionPrenotazioni.isSelected(t.oid))}}function zoe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",83),e.YNc(1,woe,1,1,"mat-checkbox",84),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.isTrasferimentoAttivo&&n.isPrenotazioneCheckVisible(t))}}function Moe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function qoe(i,o){1&i&&(e.TgZ(0,"mat-cell",83)(1,"button",86)(2,"i",87),e._uU(3,"edit"),e.qZA()()())}function Poe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",88),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.albergo")))}function koe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",89),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Udp("background-color",n.getAlbergoCrs(t.oidAlbergo).colore),e.Q6J("appInvertColor",n.getAlbergoCrs(t.oidAlbergo).colore),e.xp6(1),e.hij(" ",n.getAlbergoCrs(t.oidAlbergo).descrizione," ")}}function Soe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",90),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.portale")))}function yoe(i,o){if(1&i&&e._UZ(0,"img",95),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.portaleXAlbergo.portale.urlImmagineIcona,e.LSH)}}function Joe(i,o){1&i&&(e.TgZ(0,"b"),e._uU(1,"PMS"),e.qZA())}function Eoe(i,o){1&i&&(e.TgZ(0,"b"),e._uU(1,"CRM"),e.qZA())}function Noe(i,o){1&i&&(e.TgZ(0,"b"),e._uU(1,"EXT"),e.qZA())}Va.\u0275fac=function(o){return new(o||Va)(e.Y36(A.s),e.Y36(C.t),e.Y36(j.m))},Va.\u0275cmp=e.Xpm({type:Va,selectors:[["app-trasferisci-prenotazioni-modal"]],inputs:{prenotazioni:"prenotazioni",alberghiCrs:"alberghiCrs",alberghiCrsRicezionePrenotazioni:"alberghiCrsRicezionePrenotazioni",dialogRef:"dialogRef"},features:[e.qOj],decls:12,vars:11,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100","font-weight-bold"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","row no-gutters mb-2 position-relative",4,"ngFor","ngForOf"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"row","no-gutters","mb-2","position-relative"],[1,"col-6","pr-4"],[1,"border","rounded","p-3","h-100"],[1,"row","mr-n2","ml-n2"],["class","col-3 pr-2 pl-2",4,"ngIf"],[1,"col-3","pr-2","pl-2"],[1,"font-weight-bold"],[1,"text-small"],[1,"row","mr-n2","ml-n2","mt-3"],[1,"material-icons-round","position-absolute","arrow"],[1,"col-6","pl-4"],[1,"row"],[1,"col-6"],[1,"w-100"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","3",3,"placeholder","ngModel","ngModelChange"],[1,"d-inline-block","mr-3"],[1,"d-inline-block","align-middle","mr-1"],["class","d-inline-block align-middle",4,"ngIf"],["class","d-inline-block align-middle",3,"diameter",4,"ngIf"],[1,"d-inline-block","mr-4"],[1,"totaleNuovaPrenotazione"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","readonly","ngModelChange"],["matSuffix",""],[1,"d-inline-block","align-middle"],[1,"d-inline-block","align-middle",3,"diameter"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"mat-select",3),e.NdJ("ngModelChange",function(a){return t.rq.oidPortale=a})("selectionChange",function(){return t.onPortaleChange()}),e.ALo(5,"translate"),e.YNc(6,aoe,2,2,"mat-option",4),e.qZA()(),e.YNc(7,foe,67,54,"div",5),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return t.trasferisciPrenotazioni()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("placeholder",e.lcZ(5,7,"globals.portale"))("ngModel",t.rq.oidPortale),e.xp6(2),e.Q6J("ngForOf",t.portali),e.xp6(1),e.Q6J("ngForOf",t.prenotazioni),e.xp6(2),e.Q6J("disabled",null==t.rq.oidPortale||t.rq.oidPortale<=0||t.checkTipiCameraTariffeSelected()),e.xp6(1),e.Oqu(e.lcZ(11,9,"sbm.crs.prenotazioni.trasferisci")))},dependencies:[m.sg,m.O5,w.X,h.eB,it.IC,M.v_,M.nX,b.k0,re.CK,g.x8,noe.sN,F.aO,_.Fj,_.wV,_.JJ,_.On,m.uU,ke.f,z.X$],styles:["textarea[_ngcontent-%COMP%]{resize:none}.arrow[_ngcontent-%COMP%]{font-size:40px;line-height:40px;width:40px;height:40px;top:calc(50% - 20px);left:calc(50% - 20px)}.text-small[_ngcontent-%COMP%]{font-size:14px}.totaleNuovaPrenotazione[_ngcontent-%COMP%]{width:150px}"]});const Ooe=function(i){return{"mt-1":i}};function Loe(i,o){if(1&i&&(e.TgZ(0,"div",96),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,Ooe,(t.tipoPrenotazione==n.enumTipoPrenotazione.WebBooking||t.tipoPrenotazione==n.enumTipoPrenotazione.OTA)&&null!=t.portaleXAlbergo.portale&&!!t.portaleXAlbergo.portale.urlImmagineIcona)),e.xp6(1),e.hij(" ",t.portaleXAlbergo.nome,"")}}function Doe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",91),e.YNc(1,yoe,1,1,"img",92),e.YNc(2,Joe,2,0,"b",93),e.YNc(3,Eoe,2,0,"b",93),e.YNc(4,Noe,2,0,"b",93),e.YNc(5,Loe,2,4,"div",94),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",(t.tipoPrenotazione==n.enumTipoPrenotazione.WebBooking||t.tipoPrenotazione==n.enumTipoPrenotazione.OTA)&&null!=t.portaleXAlbergo&&null!=t.portaleXAlbergo.portale&&!!t.portaleXAlbergo.portale.urlImmagineIcona),e.xp6(1),e.Q6J("ngIf",t.tipoPrenotazione==n.enumTipoPrenotazione.PMS),e.xp6(1),e.Q6J("ngIf",t.tipoPrenotazione==n.enumTipoPrenotazione.CRM),e.xp6(1),e.Q6J("ngIf",t.tipoPrenotazione==n.enumTipoPrenotazione.API),e.xp6(1),e.Q6J("ngIf",null!=t.portaleXAlbergo&&!!t.portaleXAlbergo.nome)}}function Ioe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.codicePrenotazione")))}function Qoe(i,o){if(1&i&&(e.TgZ(0,"div",101),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("(ota: ",t.codiceOTA,")")}}function Uoe(i,o){if(1&i&&(e.TgZ(0,"div",101),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("(prev: ",t.preventivo.codicePreventivo,")")}}function Yoe(i,o){1&i&&(e.TgZ(0,"div",102),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.prenotazioni.nonImportata"),""))}function Roe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",98)(2,"div"),e._uU(3),e.qZA(),e.YNc(4,Qoe,2,1,"div",99),e.YNc(5,Uoe,2,1,"div",99),e.YNc(6,Yoe,3,3,"div",100),e.qZA()()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.codicePrenotazione),e.xp6(1),e.Q6J("ngIf",!!t.codiceOTA),e.xp6(1),e.Q6J("ngIf",null!=t.preventivo),e.xp6(1),e.Q6J("ngIf",!t.importata)}}function Foe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.dataPren")))}function Hoe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataPren,"dd/MM/yyyy"))}}function Koe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.arrivo")))}function Goe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.arrivo,"dd/MM/yyyy"),"")}}function $oe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.partenza")))}function Boe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.partenza,"dd/MM/yyyy"),"")}}function Voe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.pax")))}function Xoe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.pax,"")}}function joe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.cliente")))}function Woe(i,o){1&i&&(e.TgZ(0,"span",106),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.isCheckInOnlineEseguito")))}function ene(i,o){if(1&i&&(e.TgZ(0,"div",98)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",104),e._uU(4),e.qZA(),e.YNc(5,Woe,3,3,"span",105),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(null==t.cliente?null:t.cliente.ragioneSociale),e.xp6(2),e.Oqu(null==t.cliente?null:t.cliente.email),e.xp6(1),e.Q6J("ngIf",t.isCheckInOnlineEseguito)}}function tne(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,ene,6,3,"div",103),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.cliente)}}function ine(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tipoCameraOTA")))}function one(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t.tipoCamera?null:t.tipoCamera.nome," ")}}function nne(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,one,2,1,"span",93),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null==t.tipoCameraOTA),e.xp6(2),e.Oqu(null==t.tipoCameraOTA||null==t.tipoCameraOTA.tipoCamera?null:t.tipoCameraOTA.tipoCamera.nome)}}function ane(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tariffaOTA")))}function lne(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.tariffaOTA.trattamento.nome," ")}}function rne(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.trattamento.nome," ")}}function cne(i,o){if(1&i&&(e.TgZ(0,"div",109),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.promozione.nome," ")}}function sne(i,o){if(1&i&&(e.TgZ(0,"mat-cell",107),e.YNc(1,lne,2,1,"span",93),e.YNc(2,rne,2,1,"span",93),e.YNc(3,cne,2,1,"div",108),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.tariffaOTA&&null!=t.tariffaOTA.trattamento),e.xp6(1),e.Q6J("ngIf",(null==t.tariffaOTA||null==t.tariffaOTA.trattamento)&&null!=t.trattamento),e.xp6(1),e.Q6J("ngIf",null!=t.promozione)}}function pne(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.statoPrenotazione")))}function dne(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.prenotazioni.cancellata")))}function mne(i,o){if(1&i&&(e.TgZ(0,"div",112),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"date"),e.ALo(4,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.dataRichiestaCancellazione?e.lcZ(2,1,"sbm.prenotazioni.richiestaCancellazioneIl")+e.xi3(3,3,t.dataRichiestaCancellazione,"dd/MM/yyyy HH:mm:ss"):e.lcZ(4,6,"sbm.prenotazioni.richiestaCancellazione")," ")}}function _ne(i,o){1&i&&(e.TgZ(0,"div",113),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"enumerations.statoPrenotazione.trasferita")," "))}function une(i,o){if(1&i&&(e.TgZ(0,"mat-cell",107)(1,"div",5),e._uU(2),e.ALo(3,"translate"),e.YNc(4,dne,3,3,"span",93),e.qZA(),e.YNc(5,mne,5,8,"div",110),e.YNc(6,_ne,3,3,"div",111),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.hij(" ",null!=t.statoPrenotazioneWelcome?e.lcZ(3,4,n.getEnumKeyTranslation(n.enumStatoPrenotazioneWelcome,t.statoPrenotazioneWelcome,"statoPrenotazioneWelcome")):t.statoPrenotazionePortale," "),e.xp6(2),e.Q6J("ngIf",!t.statoPrenotazionePortale&&null==t.statoPrenotazioneWelcome&&t.isEliminata),e.xp6(1),e.Q6J("ngIf",t.statoPrenotazione==n.enumStatoPrenotazione.CancellazioneRichiesta),e.xp6(1),e.Q6J("ngIf",t.statoPrenotazione==n.enumStatoPrenotazione.Trasferita)}}function gne(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.parametroMercato")))}function hne(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.parametroMercato?t.parametroMercato.descrizione:"")}}function fne(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.crs.prenotazioni.agenziaAzienda")))}function Cne(i,o){if(1&i&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.agenzia.ragioneSociale)}}function bne(i,o){if(1&i&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.azienda.ragioneSociale)}}function vne(i,o){if(1&i&&(e.TgZ(0,"mat-cell",107),e.YNc(1,Cne,2,1,"div",114),e.YNc(2,bne,2,1,"div",114),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.agenzia),e.xp6(1),e.Q6J("ngIf",null!=t.azienda)}}function Tne(i,o){1&i&&(e.TgZ(0,"mat-header-cell",97),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.noteTrasferimentoPrenotazione")))}function xne(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.noteTrasferimentoPrenotazione)}}function Zne(i,o){1&i&&(e.TgZ(0,"mat-header-cell",90),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.sourceBrand")))}function Ane(i,o){if(1&i&&(e.TgZ(0,"mat-cell",115),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.sourceBrand)}}function wne(i,o){1&i&&(e.TgZ(0,"mat-header-cell",116),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.importo")))}function zne(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"b",117),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.importo)," ")}}function Mne(i,o){1&i&&(e.TgZ(0,"mat-header-cell",116),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.sconto")))}function qne(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"b",117),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.sconto)," ")}}function Pne(i,o){1&i&&e._UZ(0,"mat-header-row",118)}const kne=function(i){return{"prenotazione-cancellata":i}};function Sne(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",119),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,kne,null!=t.dataCancellazione))("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}const yne=function(i){return{"color-pink":i}};class Xa extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.sessionService=a,this.utility=l,this.displayedColumns=["select","edit","albergo","portaleXAlbergo.nome","codiceOTA","dataPren","arrivo","partenza","pax","cliente.ragioneSociale","tipoCamera.nome","trattamento.nome","statoPrenotazionePortale","parametroMercato.descrizione","agenzia.ragioneSociale","noteTrasferimentoPrenotazione","sourceBrand","importo","sconto"],this.pageSize=25,this.showTable=!0,this.search=!1,this.enumStatoPrenotazioneWelcome=c.Kg,this.enumStatoPrenotazione=c.gp,this.enumTipoPrenotazione=c.DS,this.alberghiCrs=[],this.selectedAlberghi=[],this.selectionPrenotazioni=new me.Ov(!0,[]),this.isTrasferimentoAttivo=!0,this.enumVisualizzaPrenotazioniCentroPrenotazioni=c.Dg,this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaSegmentoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Segmento.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaFonteRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Fonte.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getAgenzieRQ=d.k$g.fromFilters([new d.wn$("tipoAnagrafica",c.Hp.Equal,c.dp.Agenzia.toString(),c.NM.Number),new d.wn$("ragioneSociale",c.Hp.IsNotNullOrEmpty)]),this.getAziendeRQ=d.k$g.fromFilters([new d.wn$("tipoAnagrafica",c.Hp.Equal,c.dp.Azienda.toString(),c.NM.Number),new d.wn$("ragioneSociale",c.Hp.IsNotNullOrEmpty)])}ngOnInit(){this.rq=new d.k$g,this.rq.skip=0,this.rq.take=this.pageSize,this.sorting=new d.aQR("dataPren",c.nI.Desc),this.headerService.setTitle("sbm.crs.prenotazioni.title"),this.filters=[],this.filters.push(new d.wn$("albergo.oid",c.Hp.In,"",c.NM.Number)),this.filters.push(new d.wn$("arrivo",c.Hp.GreaterEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("arrivo",c.Hp.LowerEqual,this.getDate(this.oneYearFromToday),c.NM.Date)),this.filters.push(new d.wn$("partenza",c.Hp.GreaterEqual,"",c.NM.Date)),this.filters.push(new d.wn$("partenza",c.Hp.LowerEqual,"",c.NM.Date)),this.filters.push(new d.wn$("cliente.cognome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$(["cliente.email","cliente.cellulare"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$(["codicePrenotazione","codiceOTA"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("tipoCamera.nome",c.Hp.Equal,"",c.NM.String)),this.filters.push(new d.wn$("tipoCamera.tipoCameraStandard.nome",c.Hp.Equal,"",c.NM.String)),this.filters.push(new d.wn$("tipoPrenotazione",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("sourceBrand",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("parametroMercato.descrizione",c.Hp.Equal,"",c.NM.String)),this.filters.push(new d.wn$("parametroCanaleVendita.descrizione",c.Hp.Equal,"",c.NM.String)),this.filters.push(new d.wn$("parametroFonte.descrizione",c.Hp.Equal,"",c.NM.String)),this.filters.push(new d.wn$("parametroSegmento.descrizione",c.Hp.Equal,"",c.NM.String)),this.filters.push(new d.wn$("agenzia.ragioneSociale",c.Hp.Equal,"",c.NM.String)),this.filters.push(new d.wn$("azienda.ragioneSociale",c.Hp.Equal,"",c.NM.String)),this.filters.push(new d.wn$("isEliminata",c.Hp.IsTrue,null,null,!1,c.Hp.IsFalse,!0)),this.filters.push(new d.wn$("statoPrenotazione",c.Hp.NotEqual,c.gp.Trasferita.toString(),c.NM.Number,!1,c.Hp.Equal));let o=this.sessionService.getPermessiUtente();null!=o&&(this.isTrasferimentoAttivo=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.TrasferimentoPrenotazioniCrs)))}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getAlberghiCrsFilter(d.k$g.fromFilters([new d.wn$("oidAlbergoWeb",c.Hp.Greater,"0",c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)])).subscribe(o=>{this.alberghiCrs=o.data,this.selectedAlberghi=this.alberghiCrs.map(t=>t.oidAlbergoWeb),this.onAlberghiSelectedChange()})}onSortChange(o){this.sorting.field=o.active,this.sorting.type="asc"==o.direction?c.nI.Asc:c.nI.Desc,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}onSearch(o,t,n,a,l=!0){null!=t?(this.search=!l,this.filters[o].value=t):null!=n?(this.filters[o].active=n,this.filters[o].inverted=!1):(this.filters[o].inverted=a,this.filters[o].active=!1),0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}download(){this.selectionPrenotazioni=new me.Ov(!0,[]),this.alberghiCrs.length>0&&this.selectedAlberghi.length>0?(this.search||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[this.sorting],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPrenotazioniCrs(this.rq).subscribe(o=>{this.data=o.data,this.totalRecords=o.totalRecords,this.search?this.search=!1:this.setIsLoading(!1)})):(this.data=[],this.totalRecords=0,this.search=!1,this.setIsLoading(!1))}edit(o){this.prenotazione=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}export(){this.setIsLoading(!0);let o=new d.k$g;o.sorting=[this.sorting],o.filters=this.utility.getFilters(this.filters),this.apiService.getPrenotazioniCrs(o).subscribe(t=>{this.utility.exportToCsv(t.data,"PrenotazioniCrs",this.displayedColumns.slice(2,this.displayedColumns.length)),this.setIsLoading(!1)})}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}onAlberghiSelectedChange(){this.onSearch(0,"("+this.selectedAlberghi.join(",")+")")}onSelectDeselectAllAlberghiClick(o){this.isAllSelectedAlberghi(o)?this.selectedAlberghi=[]:this.selectedAlberghi=this.alberghiCrs.map(t=>t.oidAlbergoWeb),this.onAlberghiSelectedChange()}isAllSelectedAlberghi(o){return o.selected.length==this.alberghiCrs.length}isAllDeselected(o){return 0==o.selected.length}onArrivoDalChange(o){let t=u(o).startOf("day"),n=this.filters[2].value?u(this.filters[2].value).startOf("day"):null;null!=n&&n.isBefore(t)&&(this.filters[2].value=this.getDate(t)),this.onSearch(1,this.getDate(o))}onArrivoAlChange(o){let t=this.filters[1].value?u(this.filters[1].value).startOf("day"):null,n=u(o).startOf("day");null!=t&&t.isAfter(n)&&(this.filters[1].value=this.getDate(n)),this.onSearch(2,this.getDate(o))}onPartenzaDalChange(o){let t=u(o).startOf("day"),n=this.filters[4].value?u(this.filters[4].value).startOf("day"):null;null!=n&&n.isBefore(t)&&(this.filters[4].value=this.getDate(t)),this.onSearch(3,this.getDate(o))}onPartenzaAlChange(o){let t=this.filters[3].value?u(this.filters[3].value).startOf("day"):null,n=u(o).startOf("day");null!=t&&t.isAfter(n)&&(this.filters[3].value=this.getDate(n)),this.onSearch(4,this.getDate(o))}getAlbergoCrs(o){return this.alberghiCrs.find(t=>t.oidAlbergoWeb==o)}isPrenotazioneCheckVisible(o){let t=this.getAlbergoCrs(o.oidAlbergo);return u(o.arrivo).startOf("day").isSameOrAfter(u().startOf("day"))&&t.isInvioPrenotazioni}isPrenotazioniCheckVisible(){return null!=this.data&&this.data.some(o=>this.isPrenotazioneCheckVisible(o))}isAllSelectedPrenotazioni(){return this.selectionPrenotazioni.selected.length==this.data.filter(n=>this.isPrenotazioneCheckVisible(n)).length}masterTogglePrenotazioni(){this.isAllSelectedPrenotazioni()?this.selectionPrenotazioni.clear():this.data.filter(o=>this.isPrenotazioneCheckVisible(o)).forEach(o=>this.selectionPrenotazioni.select(o.oid))}trasferisciPrenotazioni(){let o=new d.Zpt;o.width="90vw";let t=this.showModalDialog(Va,o),n=t.componentInstance;n.prenotazioni=this.utility.findItemsByOid(this.data,this.selectionPrenotazioni.selected),n.alberghiCrs=this.alberghiCrs,n.alberghiCrsRicezionePrenotazioni=this.alberghiCrs.filter(a=>a.isRicezionePrenotazioni),n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.download()})}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}function Jne(i,o){if(1&i&&(e._UZ(0,"ngx-charts-pie-chart",7),e.ALo(1,"translate")),2&i){const t=e.oxw();e.Q6J("results",t.chart)("scheme","cool")("labels",!1)("legend",!0)("legendTitle",e.lcZ(1,7,"sbm.dashboard.legenda"))("legendPosition",t.enumLegendPosition.Below)("gradient",!1)}}function Ene(i,o){if(1&i&&e._UZ(0,"ngx-charts-bar-horizontal",8),2&i){const t=e.oxw();e.Q6J("results",t.chart)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!1)("maxXAxisTickLength",16)("gradient",!1)}}function Nne(i,o){if(1&i&&e._UZ(0,"ngx-charts-bar-vertical",8),2&i){const t=e.oxw();e.Q6J("results",t.chart)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!1)("maxXAxisTickLength",16)("gradient",!1)}}function One(i,o){if(1&i&&(e._UZ(0,"ngx-charts-line-chart",9),e.ALo(1,"translate")),2&i){const t=e.oxw();e.Q6J("results",t.advancedChart)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!0)("legendTitle",e.lcZ(1,11,"sbm.dashboard.legenda"))("maxXAxisTickLength",16)("yAxisTickFormatting",t.axisFormatY)("xAxisTickFormatting",t.axisFormatX)("legendPosition",t.enumLegendPosition.Below)("gradient",!1)}}function Lne(i,o){if(1&i&&(e._UZ(0,"ngx-charts-area-chart",9),e.ALo(1,"translate")),2&i){const t=e.oxw();e.Q6J("results",t.advancedChart)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!0)("legendTitle",e.lcZ(1,11,"sbm.dashboard.legenda"))("maxXAxisTickLength",16)("yAxisTickFormatting",t.axisFormatY)("xAxisTickFormatting",t.axisFormatX)("legendPosition",t.enumLegendPosition.Below)("gradient",!1)}}Xa.\u0275fac=function(o){return new(o||Xa)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(j.m),e.Y36(C.t))},Xa.\u0275cmp=e.Xpm({type:Xa,selectors:[["app-prenotazioni-crs"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:197,vars:125,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],["multiple","",3,"panelClass","placeholder","ngModel","ngModelChange","selectionChange"],["selectAlberghi",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["cognomeSearch",""],["emailCellulareSearch",""],["codicePrenotazioneSearch",""],[1,"row","font-weight-bold"],[1,"col-6"],[1,"row","mt-1"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","value","dateChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],["datePickerArrivoDal",""],["datePickerArrivoAl",""],["datePickerPartenzaDal",""],["datePickerPartenzaAl",""],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[3,"placeholder","value","selectionChange"],["tipoPrenotazioneSelect",""],["value",""],["sourceBrandSearch",""],["displayMember","descrizione",3,"dataLoader","placeholder","valueChange"],["displayMember","ragioneSociale",3,"dataLoader","placeholder","valueChange"],["visualizzaPrenotazioniSelect",""],[1,"d-inline-block","mt-4",3,"label","valueChange"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],[1,"mat-table-container","mt-3"],["matSort","","matSortActive","dataPren","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","select"],["class","mat-th-edit",4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["matColumnDef","albergo"],["class","justify-content-center pr-3 pl-3",4,"matHeaderCellDef"],["class","justify-content-center align-self-stretch pr-3 pl-3 rounded",3,"backgroundColor","appInvertColor",4,"matCellDef"],["matColumnDef","portaleXAlbergo.nome"],["class","justify-content-center","mat-sort-header","",4,"matHeaderCellDef"],["class","justify-content-center flex-wrap pt-1",4,"matCellDef"],["matColumnDef","codiceOTA"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","dataPren"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","pax"],["matColumnDef","cliente.ragioneSociale"],["matColumnDef","tipoCamera.nome"],["matColumnDef","trattamento.nome"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","statoPrenotazionePortale"],["matColumnDef","parametroMercato.descrizione"],["matColumnDef","agenzia.ragioneSociale"],["matColumnDef","noteTrasferimentoPrenotazione"],["matColumnDef","sourceBrand"],["mat-sort-header","","class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","importo"],["mat-sort-header","","class","justify-content-end",4,"matHeaderCellDef"],["matColumnDef","sconto"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"ngClass","matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[3,"_prenotazione","backEvent"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-th-edit"],["class","d-inline-block mt-4","color","primary",3,"checked","indeterminate","change",4,"ngIf"],["color","primary",1,"d-inline-block","mt-4",3,"checked","indeterminate","change"],[1,"mat-td-edit"],["class","d-inline-block mt-2","color","primary",3,"checked","click","change",4,"ngIf"],["color","primary",1,"d-inline-block","mt-2",3,"checked","click","change"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center","pr-3","pl-3"],[1,"justify-content-center","align-self-stretch","pr-3","pl-3","rounded",3,"appInvertColor"],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center","flex-wrap","pt-1"],["class","portale-icon",3,"src",4,"ngIf"],[4,"ngIf"],["class","w-100 font-small text-center",3,"ngClass",4,"ngIf"],[1,"portale-icon",3,"src"],[1,"w-100","font-small","text-center",3,"ngClass"],["mat-sort-header",""],[1,"d-flex","flex-column"],["class","codiceOTAGrid",4,"ngIf"],["class","color-red font-small",4,"ngIf"],[1,"codiceOTAGrid"],[1,"color-red","font-small"],["class","d-flex flex-column",4,"ngIf"],[1,"cliente-email"],["class","cliente-checkin",4,"ngIf"],[1,"cliente-checkin"],[1,"flex-wrap"],["class","font-italic small w-100",4,"ngIf"],[1,"font-italic","small","w-100"],["class","w-100 richiesta-cancellazione",4,"ngIf"],["class","w-100 trasferita",4,"ngIf"],[1,"w-100","richiesta-cancellazione"],[1,"w-100","trasferita"],["class","w-100",4,"ngIf"],[1,"justify-content-center"],["mat-sort-header","",1,"justify-content-end"],[1,"w-100","pr-3","text-right"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"ngClass","matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-select",6,7),e.NdJ("ngModelChange",function(l){return t.selectedAlberghi=l})("selectionChange",function(){return t.onAlberghiSelectedChange()}),e.ALo(8,"translate"),e.TgZ(9,"mat-checkbox",8),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(7);return l.preventDefault(),e.KtG(t.onSelectDeselectAllAlberghiClick(r))}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,Coe,2,2,"mat-option",9),e.qZA()()(),e.TgZ(13,"div",4)(14,"mat-form-field",5)(15,"input",10,11),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(16);return e.KtG(t.onSearch(5,l.value,null,null,!1))}),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",4)(19,"mat-form-field",5)(20,"input",10,12),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(21);return e.KtG(t.onSearch(6,l.value,null,null,!1))}),e.ALo(22,"translate"),e.qZA()()(),e.TgZ(23,"div",4)(24,"mat-form-field",5)(25,"input",10,13),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(26);return e.KtG(t.onSearch(7,l.value,null,null,!1))}),e.ALo(27,"translate"),e.qZA()()()(),e.TgZ(28,"div",14)(29,"div",15),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",15),e._uU(33),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",16)(36,"div",4)(37,"mat-form-field",5)(38,"input",17),e.NdJ("dateChange",function(l){return t.onArrivoDalChange(l.value)}),e.ALo(39,"translate"),e.qZA(),e._UZ(40,"mat-datepicker-toggle",18),e.TgZ(41,"mat-datepicker-toggle",19),e.NdJ("click",function(){return t.onSearch(1,"")}),e.TgZ(42,"mat-icon",20),e._uU(43,"clear"),e.qZA()(),e._UZ(44,"mat-datepicker",null,21),e.qZA()(),e.TgZ(46,"div",4)(47,"mat-form-field",5)(48,"input",17),e.NdJ("dateChange",function(l){return t.onArrivoAlChange(l.value)}),e.ALo(49,"translate"),e.qZA(),e._UZ(50,"mat-datepicker-toggle",18),e.TgZ(51,"mat-datepicker-toggle",19),e.NdJ("click",function(){return t.onSearch(2,"")}),e.TgZ(52,"mat-icon",20),e._uU(53,"clear"),e.qZA()(),e._UZ(54,"mat-datepicker",null,22),e.qZA()(),e.TgZ(56,"div",4)(57,"mat-form-field",5)(58,"input",17),e.NdJ("dateChange",function(l){return t.onPartenzaDalChange(l.value)}),e.ALo(59,"translate"),e.qZA(),e._UZ(60,"mat-datepicker-toggle",18),e.TgZ(61,"mat-datepicker-toggle",19),e.NdJ("click",function(){return t.onSearch(3,"")}),e.TgZ(62,"mat-icon",20),e._uU(63,"clear"),e.qZA()(),e._UZ(64,"mat-datepicker",null,23),e.qZA()(),e.TgZ(66,"div",4)(67,"mat-form-field",5)(68,"input",17),e.NdJ("dateChange",function(l){return t.onPartenzaAlChange(l.value)}),e.ALo(69,"translate"),e.qZA(),e._UZ(70,"mat-datepicker-toggle",18),e.TgZ(71,"mat-datepicker-toggle",19),e.NdJ("click",function(){return t.onSearch(4,"")}),e.TgZ(72,"mat-icon",20),e._uU(73,"clear"),e.qZA()(),e._UZ(74,"mat-datepicker",null,24),e.qZA()()(),e.TgZ(76,"div",3)(77,"div",4)(78,"app-view-select",25),e.NdJ("valueChange",function(l){return t.tipoCamera=l})("valueChange",function(){return t.tipoCameraStandard=null,t.filters[9].value="",t.onSearch(8,t.tipoCamera.nome)}),e.ALo(79,"translate"),e.qZA()(),e.TgZ(80,"div",4)(81,"app-view-select",25),e.NdJ("valueChange",function(l){return t.tipoCameraStandard=l})("valueChange",function(){return t.tipoCamera=null,t.filters[8].value="",t.onSearch(9,t.tipoCameraStandard.nome)}),e.ALo(82,"translate"),e.qZA()(),e.TgZ(83,"div",4)(84,"mat-form-field",5)(85,"mat-select",26,27),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(86);return e.KtG(t.onSearch(10,l.value))}),e.ALo(87,"translate"),e._UZ(88,"mat-option",28),e.YNc(89,boe,2,2,"mat-option",9),e.ALo(90,"selectEnum"),e.qZA()()(),e.TgZ(91,"div",4)(92,"mat-form-field",5)(93,"input",10,29),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(94);return e.KtG(t.onSearch(11,l.value,null,!1))}),e.ALo(95,"translate"),e.qZA()()()(),e.TgZ(96,"div",3)(97,"div",4)(98,"app-view-select",30),e.NdJ("valueChange",function(l){return t.onSearch(12,l.descrizione)}),e.ALo(99,"translate"),e.qZA()(),e.TgZ(100,"div",4)(101,"app-view-select",30),e.NdJ("valueChange",function(l){return t.onSearch(13,l.descrizione)}),e.ALo(102,"translate"),e.qZA()(),e.TgZ(103,"div",4)(104,"app-view-select",30),e.NdJ("valueChange",function(l){return t.onSearch(14,l.descrizione)}),e.ALo(105,"translate"),e.qZA()(),e.TgZ(106,"div",4)(107,"app-view-select",30),e.NdJ("valueChange",function(l){return t.onSearch(15,l.descrizione)}),e.ALo(108,"translate"),e.qZA()()(),e.TgZ(109,"div",3)(110,"div",15)(111,"app-view-select",31),e.NdJ("valueChange",function(l){return t.onSearch(16,l.ragioneSociale)}),e.ALo(112,"translate"),e.qZA()(),e.TgZ(113,"div",15)(114,"app-view-select",31),e.NdJ("valueChange",function(l){return t.onSearch(17,l.ragioneSociale)}),e.ALo(115,"translate"),e.qZA()()(),e.TgZ(116,"div",3)(117,"div",15)(118,"mat-form-field",5)(119,"mat-select",26,32),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(120);return e.KtG(t.onSearch(19,null,l.value==t.enumVisualizzaPrenotazioniCentroPrenotazioni.DaTrasferire||null,l.value==t.enumVisualizzaPrenotazioniCentroPrenotazioni.Trasferite||null))}),e.ALo(121,"translate"),e.YNc(122,voe,3,4,"mat-option",9),e.ALo(123,"selectEnum"),e.qZA()()(),e.TgZ(124,"div",15)(125,"app-indeterminate-checkbox",33),e.NdJ("valueChange",function(l){return null==l?t.onSearch(18,null,!1):1==l?t.onSearch(18,null,!0):t.onSearch(18,null,null,!0)}),e.qZA()()()(),e.YNc(126,Toe,4,3,"div",34),e.TgZ(127,"div",1),e.YNc(128,xoe,3,3,"button",35),e.TgZ(129,"div",36)(130,"mat-table",37),e.NdJ("matSortChange",function(l){return t.onSortChange(l)}),e.ynx(131,38),e.YNc(132,Aoe,2,1,"mat-header-cell",39),e.YNc(133,zoe,2,1,"mat-cell",40),e.BQk(),e.ynx(134,41),e.YNc(135,Moe,1,0,"mat-header-cell",42),e.YNc(136,qoe,4,0,"mat-cell",40),e.BQk(),e.ynx(137,43),e.YNc(138,Poe,3,3,"mat-header-cell",44),e.YNc(139,koe,2,4,"mat-cell",45),e.BQk(),e.ynx(140,46),e.YNc(141,Soe,3,3,"mat-header-cell",47),e.YNc(142,Doe,6,5,"mat-cell",48),e.BQk(),e.ynx(143,49),e.YNc(144,Ioe,3,3,"mat-header-cell",50),e.YNc(145,Roe,7,4,"mat-cell",51),e.BQk(),e.ynx(146,52),e.YNc(147,Foe,3,3,"mat-header-cell",50),e.YNc(148,Hoe,3,4,"mat-cell",51),e.BQk(),e.ynx(149,53),e.YNc(150,Koe,3,3,"mat-header-cell",50),e.YNc(151,Goe,3,4,"mat-cell",51),e.BQk(),e.ynx(152,54),e.YNc(153,$oe,3,3,"mat-header-cell",50),e.YNc(154,Boe,3,4,"mat-cell",51),e.BQk(),e.ynx(155,55),e.YNc(156,Voe,3,3,"mat-header-cell",50),e.YNc(157,Xoe,2,1,"mat-cell",51),e.BQk(),e.ynx(158,56),e.YNc(159,joe,3,3,"mat-header-cell",50),e.YNc(160,tne,2,1,"mat-cell",51),e.BQk(),e.ynx(161,57),e.YNc(162,ine,3,3,"mat-header-cell",50),e.YNc(163,nne,4,2,"mat-cell",51),e.BQk(),e.ynx(164,58),e.YNc(165,ane,3,3,"mat-header-cell",50),e.YNc(166,sne,4,3,"mat-cell",59),e.BQk(),e.ynx(167,60),e.YNc(168,pne,3,3,"mat-header-cell",42),e.YNc(169,une,7,6,"mat-cell",59),e.BQk(),e.ynx(170,61),e.YNc(171,gne,3,3,"mat-header-cell",50),e.YNc(172,hne,2,1,"mat-cell",51),e.BQk(),e.ynx(173,62),e.YNc(174,fne,3,3,"mat-header-cell",50),e.YNc(175,vne,3,2,"mat-cell",59),e.BQk(),e.ynx(176,63),e.YNc(177,Tne,3,3,"mat-header-cell",50),e.YNc(178,xne,2,1,"mat-cell",51),e.BQk(),e.ynx(179,64),e.YNc(180,Zne,3,3,"mat-header-cell",65),e.YNc(181,Ane,2,1,"mat-cell",66),e.BQk(),e.ynx(182,67),e.YNc(183,wne,3,3,"mat-header-cell",68),e.YNc(184,zne,4,3,"mat-cell",51),e.BQk(),e.ynx(185,69),e.YNc(186,Mne,3,3,"mat-header-cell",68),e.YNc(187,qne,4,3,"mat-cell",51),e.BQk(),e.YNc(188,Pne,1,0,"mat-header-row",70),e.YNc(189,Sne,1,4,"mat-row",71),e.qZA()(),e.TgZ(190,"div",72)(191,"button",73),e.NdJ("click",function(){return t.export()}),e.TgZ(192,"i",74),e._uU(193,"get_app"),e.qZA()(),e.TgZ(194,"mat-paginator",75),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()(),e.TgZ(195,"div",1)(196,"app-prenotazioni-edit",76),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()}if(2&o){const n=e.MAs(7),a=e.MAs(45),l=e.MAs(55),r=e.MAs(65),p=e.MAs(75);e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.Q6J("panelClass","prenotazioni-crs-albergo-select")("placeholder",e.lcZ(8,72,"sbm.crs.prenotazioni.alberghi"))("ngModel",t.selectedAlberghi),e.xp6(3),e.Q6J("ngClass",e.VKq(123,yne,t.isAllSelectedAlberghi(n)))("checked",t.isAllSelectedAlberghi(n))("indeterminate",!t.isAllSelectedAlberghi(n)&&!t.isAllDeselected(n)),e.xp6(1),e.hij(" ",e.lcZ(11,74,"globals.selezionaTutti"),""),e.xp6(2),e.Q6J("ngForOf",t.alberghiCrs),e.xp6(3),e.s9C("placeholder",e.lcZ(17,76,"bo.cliente.proprieta.cognome")),e.Q6J("value",t.filters[5].value),e.xp6(5),e.s9C("placeholder",e.lcZ(22,78,"sbm.crs.prenotazioni.emailCellulare")),e.Q6J("value",t.filters[6].value),e.xp6(5),e.s9C("placeholder",e.lcZ(27,80,"bo.prenotazione.proprieta.codicePrenotazione")),e.Q6J("value",t.filters[7].value),e.xp6(5),e.hij(" ",e.lcZ(31,82,"bo.prenotazione.proprieta.arrivo")," "),e.xp6(3),e.hij(" ",e.lcZ(34,84,"bo.prenotazione.proprieta.partenza")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(39,86,"globals.dal")),e.Q6J("matDatepicker",a)("value",t.filters[1].value),e.xp6(2),e.Q6J("for",a),e.xp6(8),e.s9C("placeholder",e.lcZ(49,88,"globals.al")),e.Q6J("matDatepicker",l)("value",t.filters[2].value),e.xp6(2),e.Q6J("for",l),e.xp6(8),e.s9C("placeholder",e.lcZ(59,90,"globals.dal")),e.Q6J("matDatepicker",r)("value",t.filters[3].value),e.xp6(2),e.Q6J("for",r),e.xp6(8),e.s9C("placeholder",e.lcZ(69,92,"globals.al")),e.Q6J("matDatepicker",p)("value",t.filters[4].value),e.xp6(2),e.Q6J("for",p),e.xp6(8),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("value",t.tipoCamera)("placeholder",e.lcZ(79,94,"globals.tipoCamera")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraStandardViewSelect())("value",t.tipoCameraStandard)("placeholder",e.lcZ(82,96,"sbm.crs.disponibilita.tipoCameraStandard")),e.xp6(4),e.s9C("placeholder",e.lcZ(87,98,"bo.prenotazione.proprieta.tipoPrenotazione")),e.Q6J("value",t.filters[10].value),e.xp6(4),e.Q6J("ngForOf",e.Dn7(90,100,t.enumTipoPrenotazione,"tipoPrenotazione",!1)),e.xp6(4),e.s9C("placeholder",e.lcZ(95,104,"bo.prenotazione.proprieta.sourceBrand")),e.Q6J("value",t.filters[11].value),e.xp6(5),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaMercatoRQ))("placeholder",e.lcZ(99,106,"bo.prenotazione.proprieta.parametroMercato")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaCanaleVenditaRQ))("placeholder",e.lcZ(102,108,"bo.prenotazione.proprieta.parametroCanaleVendita")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaFonteRQ))("placeholder",e.lcZ(105,110,"bo.prenotazione.proprieta.parametroFonte")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaSegmentoRQ))("placeholder",e.lcZ(108,112,"bo.prenotazione.proprieta.parametroSegmento")),e.xp6(4),e.Q6J("dataLoader",t.apiService.getAgenzieViewSelect(t.getAgenzieRQ))("placeholder",e.lcZ(112,114,"bo.prenotazione.proprieta.agenzia")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getAgenzieViewSelect(t.getAziendeRQ))("placeholder",e.lcZ(115,116,"bo.prenotazione.proprieta.azienda")),e.xp6(5),e.Q6J("placeholder",e.lcZ(121,118,"sbm.crs.prenotazioni.visualizzaPrenotazioni"))("value",t.enumVisualizzaPrenotazioniCentroPrenotazioni.Tutte),e.xp6(3),e.Q6J("ngForOf",e.xi3(123,120,t.enumVisualizzaPrenotazioniCentroPrenotazioni,"visualizzaPrenotazioniCentroPrenotazioni")),e.xp6(3),e.Q6J("label","bo.prenotazione.proprieta.isEliminata"),e.xp6(1),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(1),e.Q6J("ngIf",t.selectionPrenotazioni.selected.length>0),e.xp6(2),e.Q6J("dataSource",t.data),e.xp6(58),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("_prenotazione",t.prenotazione)}},dependencies:[m.mk,m.sg,m.O5,k.Z,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,g.x8,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,_.JJ,_.On,ne.d,st,Lt,m.uU,Te.A,ke.f,z.X$],styles:[".cliente-email[_ngcontent-%COMP%]{font-size:small;font-style:italic}.cliente-checkin[_ngcontent-%COMP%], .richiesta-cancellazione[_ngcontent-%COMP%], .trasferita[_ngcontent-%COMP%]{font-size:11px;font-style:italic;color:red}.mat-table[_ngcontent-%COMP%]{min-width:2500px!important}.codiceOTAGrid[_ngcontent-%COMP%]{font-size:x-small;font-style:italic}  .prenotazione-cancellata mat-cell:not(.mat-column-albergo){color:red!important}.mat-column-select[_ngcontent-%COMP%]{width:80px!important;max-width:80px!important;min-width:80px!important}"]});class yi extends f.H{constructor(){super(),this.enumTipoGrafico=c.F3,this.enumLegendPosition=Ke.tV}ngAfterViewInit(){setTimeout(()=>{window.dispatchEvent(new Event("resize"))},200)}axisFormatY(o){return o+" \u20ac"}axisFormatX(o){return"<"==o||">"==o?"":o}}function Dne(i,o){if(1&i&&(e.TgZ(0,"mat-option",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Ine(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",2)(2,"div",20)(3,"div",21)(4,"div"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",22),e._uU(8),e.qZA()(),e.TgZ(9,"div",23)(10,"div"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",22),e._uU(14),e.qZA()(),e.TgZ(15,"div",24)(16,"div"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",22),e._uU(20),e.qZA()()(),e.TgZ(21,"div",25)(22,"div",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openChart(a.enumTipoGrafico.ColumnChart,a.graficoAlberghi,null))}),e._UZ(23,"ngx-charts-bar-vertical",27),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,13,"sbm.dashboard-admin.numeroHotel")," "),e.xp6(3),e.hij(" ",t.numeroAlberghi," "),e.xp6(3),e.hij(" ",e.lcZ(12,15,"sbm.dashboard-admin.numeroPortali")," "),e.xp6(3),e.hij(" ",t.numeroPortali," "),e.xp6(3),e.hij(" ",e.lcZ(18,17,"sbm.dashboard-admin.numeroRicercheWeb")," "),e.xp6(3),e.hij(" ",t.numeroRicercheWeb," "),e.xp6(3),e.Q6J("results",t.graficoAlberghi)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!1)("maxXAxisTickLength",16)("gradient",!1)}}function Qne(i,o){if(1&i&&(e.TgZ(0,"div",32)(1,"div",33)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",22),e._uU(6),e.qZA(),e.TgZ(7,"div",34),e._uU(8),e.ALo(9,"eurCurrency"),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,n.getEnumKeyTranslation(n.enumTipoPrenotazione,t.tipo,"tipoPrenotazione"))," "),e.xp6(3),e.hij(" ",t.numero," "),e.xp6(2),e.hij(" ",e.lcZ(9,5,t.totale)," ")}}function Une(i,o){if(1&i&&(e.TgZ(0,"div",28)(1,"h4",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",30),e.YNc(5,Qne,10,7,"div",31),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.dashboard-admin.numeroPrenotazioni")),e.xp6(3),e.Q6J("ngForOf",t.prenotazioni)}}function Yne(i,o){if(1&i&&(e.TgZ(0,"div",28)(1,"h4",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",30)(5,"div",32)(6,"div",35)(7,"div"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",22),e._uU(11),e.qZA()()(),e.TgZ(12,"div",32)(13,"div",36)(14,"div"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",22),e._uU(18),e.qZA()()(),e.TgZ(19,"div",32)(20,"div",36)(21,"div"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",22),e._uU(25),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,7,"sbm.dashboard-admin.numeroPreventivi")),e.xp6(6),e.hij(" ",e.lcZ(9,9,"sbm.dashboard-admin.numeroHotelCrm")," "),e.xp6(3),e.hij(" ",t.numeroAlberghiCrm," "),e.xp6(4),e.hij(" ",e.lcZ(16,11,"sbm.dashboard-admin.creati")," "),e.xp6(3),e.hij(" ",t.numeroPreventiviCreati," "),e.xp6(4),e.hij(" ",e.lcZ(23,13,"sbm.dashboard-admin.inviati")," "),e.xp6(3),e.hij(" ",t.numeroPreventiviInviati," ")}}function Rne(i,o){if(1&i&&(e.TgZ(0,"div",28)(1,"h4",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",30)(5,"div",32)(6,"div",37)(7,"div"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",22),e._uU(11),e.qZA()()(),e.TgZ(12,"div",32)(13,"div",36)(14,"div"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",22),e._uU(18),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.dashboard-admin.numeroSondaggi")),e.xp6(6),e.hij(" ",e.lcZ(9,7,"sbm.dashboard-admin.sondaggiConfigurati")," "),e.xp6(3),e.hij(" ",t.numeroSondaggiConfigurati," "),e.xp6(4),e.hij(" ",e.lcZ(16,9,"sbm.dashboard-admin.sondaggiCompilati")," "),e.xp6(3),e.hij(" ",t.numeroRisposteSondaggi," ")}}function Fne(i,o){if(1&i&&(e.TgZ(0,"div",32)(1,"div",38)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",22),e._uU(6),e.qZA(),e.TgZ(7,"div",34),e._uU(8),e.ALo(9,"eurCurrency"),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,n.getEnumKeyTranslation(n.enumTipoModalitaPagamento,t.tipo,"tipoModalitaPagamento"))," "),e.xp6(3),e.hij(" ",t.numero," "),e.xp6(2),e.hij(" ",e.lcZ(9,5,t.importo)," ")}}function Hne(i,o){if(1&i&&(e.TgZ(0,"div",28)(1,"h4",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",30),e.YNc(5,Fne,10,7,"div",31),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.dashboard-admin.numeroTransazioni")),e.xp6(3),e.Q6J("ngForOf",t.transazioni)}}function Kne(i,o){if(1&i&&(e.TgZ(0,"div",32)(1,"div",40)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",22),e._uU(5),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.hij(" ",t.nome," "),e.xp6(2),e.hij(" ",t.numero," ")}}function Gne(i,o){if(1&i&&(e.TgZ(0,"div",39)(1,"h4",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",30),e.YNc(5,Kne,6,2,"div",31),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.dashboard-admin.numeroPortali")),e.xp6(3),e.Q6J("ngForOf",t.portali)}}function $ne(i,o){if(1&i&&(e.TgZ(0,"div",32)(1,"div",37)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",22),e._uU(6),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,2,n.getEnumKeyTranslation(n.enumTipoNotificaEmail,t.tipo,"tipoNotificaEmail"))," "),e.xp6(3),e.hij(" ",t.numero," ")}}function Bne(i,o){if(1&i&&(e.TgZ(0,"div",39)(1,"h4",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",30),e.YNc(5,$ne,7,4,"div",31),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.dashboard-admin.notificheEmail")),e.xp6(3),e.Q6J("ngForOf",t.notificheEmail)}}function Vne(i,o){1&i&&e._UZ(0,"mat-divider",48)}function Xne(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",45)(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"span",46),e._uU(5),e.qZA()(),e.YNc(6,Vne,1,0,"mat-divider",47),e.BQk()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.xp6(3),e.Oqu(t.descrizione),e.xp6(2),e.Oqu(t.numero),e.xp6(1),e.Q6J("ngIf",n<a.errori.length-1)}}function jne(i,o){if(1&i&&(e.TgZ(0,"div",25)(1,"div",43),e.YNc(2,Xne,7,3,"ng-container",44),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.errori)}}function Wne(i,o){if(1&i&&(e.TgZ(0,"div",39)(1,"h4",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"div",20)(6,"div",41)(7,"div"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",22),e._uU(11),e.qZA()()(),e.YNc(12,jne,3,1,"div",42),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"sbm.dashboard-admin.erroriPubblicazione")),e.xp6(6),e.hij(" ",e.lcZ(9,6,"sbm.dashboard-admin.numeroErrori")," "),e.xp6(3),e.hij(" ",t.numeroErrori," "),e.xp6(1),e.Q6J("ngIf",t.errori.length>0)}}yi.\u0275fac=function(o){return new(o||yi)},yi.\u0275cmp=e.Xpm({type:yi,selectors:[["app-chart-modal"]],inputs:{tipoGrafico:"tipoGrafico",chart:"chart",advancedChart:"advancedChart"},features:[e.qOj],decls:10,vars:6,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"container-fluid","p-3","chart-modal-chart-container","w-100","h-100"],[1,"h-100","w-100"],[3,"results","scheme","labels","legend","legendTitle","legendPosition","gradient",4,"ngIf"],[3,"results","scheme","xAxis","yAxis","legend","maxXAxisTickLength","gradient",4,"ngIf"],[3,"results","scheme","xAxis","yAxis","legend","legendTitle","maxXAxisTickLength","yAxisTickFormatting","xAxisTickFormatting","legendPosition","gradient",4,"ngIf"],[3,"results","scheme","labels","legend","legendTitle","legendPosition","gradient"],[3,"results","scheme","xAxis","yAxis","legend","maxXAxisTickLength","gradient"],[3,"results","scheme","xAxis","yAxis","legend","legendTitle","maxXAxisTickLength","yAxisTickFormatting","xAxisTickFormatting","legendPosition","gradient"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,Jne,2,9,"ngx-charts-pie-chart",4),e.YNc(6,Ene,1,7,"ngx-charts-bar-horizontal",5),e.YNc(7,Nne,1,7,"ngx-charts-bar-vertical",5),e.YNc(8,One,2,13,"ngx-charts-line-chart",6),e.YNc(9,Lne,2,13,"ngx-charts-area-chart",6),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(5),e.Q6J("ngIf",t.tipoGrafico==t.enumTipoGrafico.PieChart),e.xp6(1),e.Q6J("ngIf",t.tipoGrafico==t.enumTipoGrafico.BarChart),e.xp6(1),e.Q6J("ngIf",t.tipoGrafico==t.enumTipoGrafico.ColumnChart),e.xp6(1),e.Q6J("ngIf",t.tipoGrafico==t.enumTipoGrafico.LineChart),e.xp6(1),e.Q6J("ngIf",t.tipoGrafico==t.enumTipoGrafico.AreaChart))},dependencies:[m.O5,h.eB,F.aO,Ke.rt,Ke.$e,Ke.K$,Ke.Dw,Ke.JU,z.X$],styles:[".chart-modal-chart-container[_ngcontent-%COMP%]{padding-bottom:100px!important}  .chart-modal-chart-container .chart-legend{margin-top:1rem!important}"]});class ja extends f.H{constructor(o,t){super(),this.apiService=o,this.headerService=t,this.tipoFiltro=c.LH.Personalizzato,this.enumTipoFiltroDashboard=c.LH,this.enumTipoPrenotazione=c.DS,this.enumTipoNotificaEmail=c.Ip,this.enumTipoModalitaPagamento=c.sc,this.enumTipoGrafico=c.F3,this.requests=[]}ngOnInit(){this.headerService.setTitle("sbm.dashboard-admin.title"),this.rq=new d.sFj,this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.today),this.downloadAll()}downloadAll(){this.downloadAlberghi(),this.downloadPrenotazioni(),this.downloadPreventivi(),this.downloadNotificheEmail(),this.downloadPortali(),this.downloadErrori(),this.downloadTransazioni(),this.downloadSondaggi()}onFiltraPerArrivoChange(){this.downloadAlberghi(),this.downloadPrenotazioni(),this.downloadPreventivi(),this.downloadTransazioni(),this.downloadSondaggi()}downloadAlberghi(){this.setIsLoading(!0);let o=this.apiService.getAlberghiDashboardAdmin(this.rq).subscribe(t=>{this.numeroAlberghi=t.data.numero,this.numeroPortali=t.data.numeroPortali,this.numeroRicercheWeb=t.data.numeroRicercheWeb,this.graficoAlberghi=this.checkResults(t.data.grafico.results),o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadPrenotazioni(){this.setIsLoading(!0);let o=this.apiService.getPrenotazioniDashboardAdmin(this.rq).subscribe(t=>{this.prenotazioni=t.data,o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadPreventivi(){this.setIsLoading(!0);let o=this.apiService.getPreventiviDashboardAdmin(this.rq).subscribe(t=>{this.numeroAlberghiCrm=t.data.numeroAlberghiCrm,this.numeroPreventiviCreati=t.data.numeroCreati,this.numeroPreventiviInviati=t.data.numeroInviati,o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadNotificheEmail(){this.setIsLoading(!0);let o=this.apiService.getNotificheEmailDashboardAdmin(this.rq).subscribe(t=>{this.notificheEmail=t.data,o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadPortali(){this.setIsLoading(!0);let o=this.apiService.getPortaliDashboardAdmin(this.rq).subscribe(t=>{this.portali=t.data,o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadErrori(){this.setIsLoading(!0);let o=this.apiService.getErroriDashboardAdmin(this.rq).subscribe(t=>{this.numeroErrori=t.data.numero,this.errori=t.data.errori,o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadTransazioni(){this.setIsLoading(!0);let o=this.apiService.getTransazioniDashboardAdmin(this.rq).subscribe(t=>{this.transazioni=t.data,o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadSondaggi(){this.setIsLoading(!0);let o=this.apiService.getSondaggiDashboardAdmin(this.rq).subscribe(t=>{this.numeroSondaggiConfigurati=t.data.numero,this.numeroRisposteSondaggi=t.data.numeroRisposte,o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}onDateChange(){this.tipoFiltro=c.LH.Personalizzato,this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.downloadAll()}onFiltroChange(){let o=u();switch(this.tipoFiltro){case c.LH.Oggi:this.rq.dal=this.getDate(u()),this.rq.al=this.rq.dal;break;case c.LH.Ieri:this.rq.dal=this.getDate(u().subtract(1,"day")),this.rq.al=this.rq.dal;break;case c.LH.UltimaSettimana:this.rq.dal=this.getDate(u().subtract(7,"day")),this.rq.al=this.getDate(o);break;case c.LH.QuestoMese:this.rq.dal=this.getDate(u().set("date",1)),this.rq.al=this.getDate(u().set("date",u().daysInMonth()));break;case c.LH.Ultimi30Giorni:this.rq.dal=this.getDate(u().subtract(30,"day")),this.rq.al=this.getDate(o);break;case c.LH.Ultimi90Giorni:this.rq.dal=this.getDate(u().subtract(90,"day")),this.rq.al=this.getDate(o);break;case c.LH.AnnoCorrente:this.rq.dal=this.getDate(u().set("month",0).set("date",1)),this.rq.al=this.getDate(u().set("month",11).set("date",31))}this.downloadAll()}checkResults(o){if(null!=o)for(let t of o)if(t.value>0)return o;return[]}openChart(o,t,n){let a=new d.Zpt;a.width="65vw",a.height="80vh",a.panelClass="no-padding-overflow-dialog";let r=this.showModalDialog(yi,a).componentInstance;r.tipoGrafico=o,r.chart=t,r.advancedChart=n}ngOnDestroy(){this.headerService.clearTitle()}}function eae(i,o){if(1&i&&(e.TgZ(0,"mat-option",15),e.ALo(1,"translate"),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(6);e.Q6J("value",t.key)("hidden",!!n.value&&!e.lcZ(1,3,t.value).toLowerCase().includes(n.value.toLowerCase())),e.xp6(2),e.hij(" ",e.lcZ(3,5,t.value)," ")}}function tae(i,o){if(1&i&&e._UZ(0,"app-inner-html",16),2&i){const t=e.oxw();e.Q6J("_text",t.templateHtml)}}ja.\u0275fac=function(o){return new(o||ja)(e.Y36(A.s),e.Y36(ie.r))},ja.\u0275cmp=e.Xpm({type:ja,selectors:[["app-dashboard-admin"]],features:[e.qOj],decls:39,vars:33,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","matEndDate","","readonly","",3,"placeholder","ngModel","dateChange","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["color","primary",3,"ngModel","ngModelChange","change"],["class","border rounded bg-white p-3",4,"ngIf"],[1,"row","mr-n1","ml-n1","mt-2"],[1,"col-6","pl-1","pr-1"],["class","border rounded bg-white p-3 h-100",4,"ngIf"],["class","border rounded bg-white p-3 mt-2",4,"ngIf"],[3,"value"],[1,"border","rounded","bg-white","p-3"],[1,"col-3"],[1,"numero-container","numero-container-alberghi","p-2","text-center"],[1,"font-weight-bold","numero"],[1,"numero-container","numero-container-portali","p-2","text-center","mt-2"],[1,"numero-container","p-2","text-center","mt-2"],[1,"col-9"],[1,"alberghi-chart-container","cursor-pointer",3,"click"],[3,"results","scheme","xAxis","yAxis","legend","maxXAxisTickLength","gradient"],[1,"border","rounded","bg-white","p-3","h-100"],[1,"font-weight-bold","mb-3"],[1,"d-flex","mr-n1","ml-n1"],["class","numero-col text-center pr-1 pl-1",4,"ngFor","ngForOf"],[1,"numero-col","text-center","pr-1","pl-1"],[1,"numero-container","numero-container-prenotazioni","p-2"],[1,"prenotazioni-totale"],[1,"numero-container","numero-container-alberghi","p-2"],[1,"numero-container","numero-container-preventivi","p-2"],[1,"numero-container","p-2"],[1,"numero-container","numero-container-transazioni","p-2"],[1,"border","rounded","bg-white","p-3","mt-2"],[1,"numero-container","numero-portali-container","p-2"],[1,"numero-container","numero-container-errori","p-2","text-center"],["class","col-9",4,"ngIf"],[1,"border","rounded","pt-2","pb-2"],[4,"ngFor","ngForOf"],[1,"pr-3","pl-3"],[1,"float-right","font-weight-bold"],["class","mt-2 mb-2",4,"ngIf"],[1,"mt-2","mb-2"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(15);return e.KtG(l.open())}),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(l){return t.rq.dal=l}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("dateChange",function(l){return null!=l.value?t.onDateChange():null})("ngModelChange",function(l){return t.rq.al=l}),e.ALo(12,"translate"),e.qZA()(),e._UZ(13,"mat-datepicker-toggle",8)(14,"mat-date-range-picker",null,9),e.qZA()(),e.TgZ(16,"div",3)(17,"mat-form-field",4)(18,"mat-select",10),e.NdJ("ngModelChange",function(l){return t.tipoFiltro=l})("selectionChange",function(){return t.onFiltroChange()}),e.ALo(19,"translate"),e.YNc(20,Dne,3,4,"mat-option",11),e.ALo(21,"selectEnum"),e.qZA()()()(),e.TgZ(22,"mat-checkbox",12),e.NdJ("ngModelChange",function(l){return t.rq.isFiltraArrivo=l})("change",function(){return t.onFiltraPerArrivoChange()}),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.YNc(25,Ine,24,19,"div",13),e.TgZ(26,"div",14)(27,"div",15),e.YNc(28,Une,6,4,"div",16),e.qZA(),e.TgZ(29,"div",15),e.YNc(30,Yne,26,15,"div",16),e.qZA()(),e.TgZ(31,"div",14)(32,"div",15),e.YNc(33,Rne,19,11,"div",16),e.qZA(),e.TgZ(34,"div",15),e.YNc(35,Hne,6,4,"div",16),e.qZA()(),e.YNc(36,Gne,6,4,"div",17),e.YNc(37,Bne,6,4,"div",17),e.YNc(38,Wne,13,8,"div",17),e.qZA()}if(2&o){const n=e.MAs(15);e.xp6(6),e.Oqu(e.lcZ(7,20,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.s9C("placeholder",e.lcZ(10,22,"globals.dal")),e.Q6J("ngModel",t.rq.dal),e.xp6(2),e.s9C("placeholder",e.lcZ(12,24,"globals.al")),e.Q6J("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(19,26,"sbm.dashboard.tipoFiltro")),e.Q6J("ngModel",t.tipoFiltro),e.xp6(2),e.Q6J("ngForOf",e.xi3(21,28,t.enumTipoFiltroDashboard,"tipoFiltroDashboard")),e.xp6(2),e.Q6J("ngModel",t.rq.isFiltraArrivo),e.xp6(1),e.Oqu(e.lcZ(24,31,"sbm.dashboard.filtraPerArrivo")),e.xp6(2),e.Q6J("ngIf",null!=t.graficoAlberghi),e.xp6(3),e.Q6J("ngIf",null!=t.prenotazioni&&t.prenotazioni.length>0),e.xp6(2),e.Q6J("ngIf",t.numeroPreventiviCreati>0||t.numeroPreventiviInviati>0),e.xp6(3),e.Q6J("ngIf",t.numeroSondaggiConfigurati>0||t.numeroRisposteSondaggi>0),e.xp6(2),e.Q6J("ngIf",null!=t.transazioni&&t.transazioni.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.portali&&t.portali.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.notificheEmail&&t.notificheEmail.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.errori)}},dependencies:[m.sg,m.O5,w.X,V.FC,M.v_,M.$V,M.nX,re.CK,y.nW,y.wx,y.zY,y.By,y._g,g.x8,Yt.d,_.Fj,_.JJ,_.On,Ke.K$,Te.A,ke.f,z.X$],styles:[".numero[_ngcontent-%COMP%]{font-size:26px}.prenotazioni-totale[_ngcontent-%COMP%]{font-size:12px;font-style:italic}.numero-container[_ngcontent-%COMP%]{border-radius:7px;color:#fff;background-color:#67d9a4}.numero-container-prenotazioni[_ngcontent-%COMP%]{background-color:#275bbb!important}.numero-container-preventivi[_ngcontent-%COMP%]{background-color:#f1c13a!important}.numero-container-alberghi[_ngcontent-%COMP%]{background-color:#ff7a7a!important}.numero-container-portali[_ngcontent-%COMP%]{background-color:#ef7aff!important}.numero-container-errori[_ngcontent-%COMP%], .numero-container-transazioni[_ngcontent-%COMP%]{background-color:#ff7a7a!important}.numero-portali-container[_ngcontent-%COMP%]{background-color:#275bbb!important}.numero-col[_ngcontent-%COMP%]{flex:1;max-width:25%}.alberghi-chart-container[_ngcontent-%COMP%]{width:100%;height:300px}"]});const iae=function(i,o){return[i,"tipoTemplate",!0,null,null,o]};class Wa extends f.H{constructor(o,t,n,a){super(),this.headerService=o,this.sessionService=t,this.apiService=n,this.containerService=a,this.rq=new d.Kgw,this.enumTipoTemplate=c.hQ,this.enumSortingType=c.nI}ngOnInit(){this.containerService.scrollToTop(),this.headerService.setTitle("Test mail"),this.rq.email="maichol.pruccoli@passepartout.sm",this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.onTipoTemplateChange()}onTipoTemplateChange(o=null){null==o?this.dataLoader=this.apiService.getTemplatesViewSelect(null,!1):(this.dataLoader=this.apiService.getTemplatesViewSelect(d.k$g.fromFilter("tipoTemplate",c.Hp.Equal,o.toString(),c.NM.Number),!1),this.selectedTemplate=null,this.rq.oidTemplate=null)}viewAnteprima(){[c.hQ.Prenotazione,c.hQ.PrenotazioneConfermata,c.hQ.PrenotazioneRifiutata,c.hQ.PrenotazioneUpSelling,c.hQ.PrenotazioneUpSellingArticoli].includes(this.selectedTemplate.tipoTemplate)?(this.setIsLoading(!0),this.apiService.getPrenotazioniAssociate(this.rq.oid).subscribe(t=>{this.replaceTags(t.data.map(n=>n.prenotazione.oid))})):this.replaceTags()}replaceTags(o){if(null!=this.rq.oidTemplate&&this.rq.oidTemplate>0&&null!=this.rq.oid&&this.rq.oid>0){this.setIsLoading(!0);let t=new d.spf;switch(t.oidTemplate=this.rq.oidTemplate,t.oidLingua=1,this.selectedTemplate.tipoTemplate){case c.hQ.Generico:case c.hQ.Cliente:t.oidCliente=this.rq.oid;break;case c.hQ.Prenotazione:case c.hQ.PrenotazioneConfermata:case c.hQ.PrenotazioneRifiutata:case c.hQ.PrenotazioneUpSelling:case c.hQ.PrenotazioneUpSellingArticoli:case c.hQ.PrenotazioneRoomServiceArticoli:t.oidPrenotazioni=o;break;case c.hQ.PrenotazioneECommmerce:t.oidPrenotazioneExtra=this.rq.oid;break;case c.hQ.RichiestaRifiutata:case c.hQ.RichiestaDisponibilitaHotel:case c.hQ.RichiestaDisponibilitaCliente:t.oidRichiesta=this.rq.oid;break;case c.hQ.CheckinOnlineEseguito:t.oidComponente=this.rq.oid;break;case c.hQ.Preventivo:case c.hQ.PreventivoAccettato:case c.hQ.PreventivoRifiutato:case c.hQ.PreventivoRichiestaCaparra:case c.hQ.PreventivoContenuto:case c.hQ.PreventivoPrenotato:case c.hQ.PreventivoRinnovaRichiesta:t.oidPreventivo=this.rq.oid;break;case c.hQ.Sondaggio:t.oidRisposta=this.rq.oid;break;case c.hQ.RecuperaPassword:t.oidAlbergo=this.rq.oidAlbergo,t.oidCliente=this.rq.oid;break;case c.hQ.PayMail:t.oidTransazione=this.rq.oid;break;case c.hQ.Voucher:t.oidVoucher=this.rq.oid}this.apiService.replaceTagsTemplate(t).subscribe(n=>{this.templateHtml=n.data.testo,this.setIsLoading(!1)})}else this.templateHtml=null}send(){this.setIsLoading(!0),this.apiService.testMail(this.rq).subscribe(()=>{this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}Wa.\u0275fac=function(o){return new(o||Wa)(e.Y36(ie.r),e.Y36(j.m),e.Y36(A.s),e.Y36(te.J))},Wa.\u0275cmp=e.Xpm({type:Wa,selectors:[["app-test-mail"]],features:[e.qOj],decls:21,vars:20,consts:[[1,"p-3"],[1,"edit-container"],[1,"w-100"],["placeholder","Tipo template",3,"selectionChange"],["tipoTemplateSelect",""],["selectSearch",""],[3,"value"],[3,"value","hidden",4,"ngFor","ngForOf"],["displayMember","nome","placeholder","Template",3,"dataLoader","forceDownload","value","valueChange"],["autocompleteOff","","type","number","matInput","","placeholder","Oid",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"mt-3",3,"disabled","click"],[1,"border","rounded-lg","p-3","mt-3","html-container","overflow-auto"],[3,"_text",4,"ngIf"],[1,"w-100","mt-3"],["autocompleteOff","","matInput","","placeholder","Email",3,"ngModel","ngModelChange"],[3,"value","hidden"],[3,"_text"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",3,4),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(4);return e.KtG(t.onTipoTemplateChange(l.value))}),e._UZ(5,"app-select-search",null,5)(7,"mat-option",6),e.YNc(8,eae,4,7,"mat-option",7),e.ALo(9,"selectEnum"),e.qZA()(),e.TgZ(10,"app-view-select",8),e.NdJ("valueChange",function(l){return t.selectedTemplate=l})("valueChange",function(){return t.rq.oidTemplate=t.selectedTemplate.oid}),e.qZA(),e.TgZ(11,"mat-form-field",2)(12,"input",9),e.NdJ("ngModelChange",function(l){return t.rq.oid=l}),e.qZA()(),e.TgZ(13,"button",10),e.NdJ("click",function(){return t.viewAnteprima()}),e._uU(14,"Anteprima"),e.qZA(),e.TgZ(15,"div",11),e.YNc(16,tae,1,1,"app-inner-html",12),e.qZA(),e.TgZ(17,"mat-form-field",13)(18,"input",14),e.NdJ("ngModelChange",function(l){return t.rq.email=l}),e.qZA()(),e.TgZ(19,"button",10),e.NdJ("click",function(){return t.send()}),e._uU(20,"Invia"),e.qZA()()()}2&o&&(e.xp6(7),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.G7q(9,10,e.WLB(17,iae,t.enumTipoTemplate,t.enumSortingType.Asc))),e.xp6(2),e.Q6J("dataLoader",t.dataLoader)("forceDownload",!0)("value",t.selectedTemplate),e.xp6(2),e.Q6J("ngModel",t.rq.oid),e.xp6(1),e.Q6J("disabled",null==t.rq.oidTemplate||t.rq.oidTemplate<=0||null==t.rq.oid||t.rq.oid<=0),e.xp6(3),e.Q6J("ngIf",!!t.templateHtml),e.xp6(2),e.Q6J("ngModel",t.rq.email),e.xp6(1),e.Q6J("disabled",null==t.rq.oidTemplate||t.rq.oidTemplate<=0||null==t.rq.oid||t.rq.oid<=0))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,_.Fj,_.wV,_.JJ,_.On,rt.W,ne.d,R,Te.A,z.X$],styles:[".html-container[_ngcontent-%COMP%]{height:400px}"]});class el extends f.H{constructor(o,t){super(),this.apiSevice=o,this.sessionService=t}ngOnInit(){}}function oae(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function nae(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function aae(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}el.\u0275fac=function(o){return new(o||el)(e.Y36(A.s),e.Y36(j.m))},el.\u0275cmp=e.Xpm({type:el,selectors:[["app-test-welcome"]],features:[e.qOj],decls:0,vars:0,template:function(o,t){}});class tl extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.backEvent=new e.vpe,this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.enumTipoPrenotazione=c.DS,this.enumTipoBookingRules=c.A2}save(){this.bookingRule.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.bookingRule.dal=this.getDate(this.bookingRule.dal),this.bookingRule.al=this.getDate(this.bookingRule.al),this.setIsLoading(!0),this.apiService.setBookingRule(this.bookingRule).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.disponibilita.booking-rules.bookingRuleSalvata").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.disponibilita.booking-rules.eliminareBookingRule").then(t=>{null!=o&&(this.bookingRule=o),this.bookingRule.isDeleted=!0,this.setIsLoading(!0),this.apiService.setBookingRule(this.bookingRule).subscribe(()=>{this.backEvent.emit()})},t=>{})}}tl.\u0275fac=function(o){return new(o||tl)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},tl.\u0275cmp=e.Xpm({type:tl,selectors:[["app-booking-rules-edit"]],inputs:{bookingRule:"bookingRule"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:63,vars:82,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","string","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"mat-elevation-z0","border","mt-3"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["dal",""],["al",""],[3,"value"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.bookingRule.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-checkbox",4),e.NdJ("ngModelChange",function(a){return t.bookingRule.isAttiva=a}),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"mat-form-field",2)(10,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.bookingRule.tipo=a}),e.ALo(11,"translate"),e.YNc(12,oae,3,4,"mat-option",6),e.ALo(13,"selectEnum"),e.qZA()(),e.TgZ(14,"mat-form-field",2)(15,"input",7),e.NdJ("ngModelChange",function(a){return t.bookingRule.variazionePrezzo=a}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"app-view-select",8),e.NdJ("valueChange",function(a){return t.bookingRule.fascia=a}),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.bookingRule.isChiudiDisponibilita=a}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"mat-card",10)(23,"mat-card-title"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",0)(27,"div",1)(28,"mat-form-field",2)(29,"input",11),e.NdJ("ngModelChange",function(a){return t.bookingRule.dal=a}),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"mat-datepicker-toggle",12)(32,"mat-datepicker",13,14),e.qZA()(),e.TgZ(34,"div",1)(35,"mat-form-field",2)(36,"input",11),e.NdJ("ngModelChange",function(a){return t.bookingRule.al=a}),e.ALo(37,"translate"),e.qZA(),e._UZ(38,"mat-datepicker-toggle",12)(39,"mat-datepicker",13,15),e.qZA()()(),e.TgZ(41,"mat-form-field",2)(42,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.bookingRule.tipoPrenotazione=a}),e.ALo(43,"translate"),e._UZ(44,"mat-option",16),e.YNc(45,nae,3,4,"mat-option",6),e.ALo(46,"selectEnum"),e.qZA()(),e.TgZ(47,"app-view-select",17),e.NdJ("valueChange",function(a){return t.bookingRule.mercato=a}),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"app-view-select",17),e.NdJ("valueChange",function(a){return t.bookingRule.canaleVendita=a}),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"app-view-select",8),e.NdJ("valueChange",function(a){return t.bookingRule.tipoCamera=a}),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"app-view-select",8),e.NdJ("valueChange",function(a){return t.bookingRule.trattamento=a}),e.ALo(54,"translate"),e.qZA()(),e.TgZ(55,"div",18)(56,"button",19),e.NdJ("click",function(){return t.save()}),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.YNc(59,aae,3,3,"button",20),e.TgZ(60,"button",21),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(61),e.ALo(62,"translate"),e.qZA()()),2&o){const n=e.MAs(33),a=e.MAs(40);e.xp6(3),e.s9C("placeholder",e.lcZ(4,44,"bo.bookingRules.proprieta.nome")),e.Q6J("ngModel",t.bookingRule.nome),e.xp6(3),e.Q6J("ngModel",t.bookingRule.isAttiva),e.xp6(1),e.hij(" ",e.lcZ(8,46,"bo.bookingRules.proprieta.isAttiva")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(11,48,"bo.bookingRules.proprieta.tipo")),e.Q6J("ngModel",t.bookingRule.tipo),e.xp6(2),e.Q6J("ngForOf",e.xi3(13,50,t.enumTipoBookingRules,"tipoBookingRules")),e.xp6(3),e.s9C("placeholder",e.lcZ(16,53,"bo.bookingRules.proprieta.variazionePrezzo")),e.Q6J("ngModel",t.bookingRule.variazionePrezzo),e.xp6(2),e.Q6J("dataLoader",t.apiService.getFasceViewSelect())("value",t.bookingRule.fascia)("placeholder",e.lcZ(18,55,"bo.bookingRules.proprieta.fascia")),e.xp6(2),e.Q6J("ngModel",t.bookingRule.isChiudiDisponibilita),e.xp6(1),e.Oqu(e.lcZ(21,57,"bo.bookingRules.proprieta.isChiudiDisponibilita")),e.xp6(4),e.hij(" ",e.lcZ(25,59,"sbm.configurazione.workFlows.condizioni")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(30,61,"bo.bookingRules.proprieta.dal")),e.Q6J("matDatepicker",n)("ngModel",t.bookingRule.dal),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.bookingRule.dal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(37,63,"bo.bookingRules.proprieta.al")),e.Q6J("matDatepicker",a)("ngModel",t.bookingRule.al),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.bookingRule.al)?t.today:null),e.xp6(3),e.s9C("placeholder",e.lcZ(43,65,"bo.bookingRules.proprieta.tipoPrenotazione")),e.Q6J("ngModel",t.bookingRule.tipoPrenotazione),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(46,67,t.enumTipoPrenotazione,"tipoPrenotazione")),e.xp6(2),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaMercatoRQ))("value",t.bookingRule.mercato)("placeholder",e.lcZ(48,70,"bo.bookingRules.proprieta.mercato")),e.xp6(2),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaCanaleVenditaRQ))("value",t.bookingRule.canaleVendita)("placeholder",e.lcZ(50,72,"bo.bookingRules.proprieta.canaleVendita")),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("value",t.bookingRule.tipoCamera)("placeholder",e.lcZ(52,74,"bo.bookingRules.proprieta.tipoCamera")),e.xp6(2),e.Q6J("dataLoader",t.apiService.getTrattamentiViewSelect())("value",t.bookingRule.trattamento)("placeholder",e.lcZ(54,76,"bo.bookingRules.proprieta.trattamento")),e.xp6(4),e.Oqu(e.lcZ(58,78,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.bookingRule.oid>0),e.xp6(2),e.Oqu(e.lcZ(62,80,"globals.annulla"))}},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,qe.S$,qe.mi,_.Fj,_.wV,_.JJ,_.On,ne.d,Te.A,z.X$]});const lae=function(i){return{selected:i}};function rae(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",27),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onTipoBookingRuleSelected(l.key.toString()))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(4,lae,n.filters[0].value==t.key.toString())),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function cae(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",6),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",28)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.disponibilita.booking-rules.nessunaBookingRule")))}function sae(i,o){1&i&&e._UZ(0,"mat-header-cell")}function pae(i,o){1&i&&(e.TgZ(0,"mat-cell",29)(1,"button",30)(2,"i",31),e._uU(3,"edit"),e.qZA()()())}function dae(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.bookingRules.proprieta.nome")))}function mae(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nome," ")}}function _ae(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.bookingRules.proprieta.tipo")))}function uae(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoBookingRules,t.tipo,"tipoBookingRules"))," ")}}function gae(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.bookingRules.proprieta.dal")))}function hae(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.dal,"dd/MM/yyyy")," ")}}function fae(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.bookingRules.proprieta.al")))}function Cae(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.al,"dd/MM/yyyy")," ")}}function bae(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.bookingRules.proprieta.isAttiva")))}function vae(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",32),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttiva)}}function Tae(i,o){1&i&&e._UZ(0,"mat-header-cell")}function xae(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",33)(1,"button",34),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(39);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",35),e._uU(3,"delete"),e.qZA()()()}}function Zae(i,o){1&i&&e._UZ(0,"mat-header-row",36)}function Aae(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",37),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}class il extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.bookingRule=new v.xG$,this.displayedColumns=["edit","nome","tipo","dal","al","isAttiva","delete"],this.showTable=!0,this.enumTipoBookingRules=c.A2}ngOnInit(){this.headerService.setTitle("sbm.disponibilita.booking-rules.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("tipo",c.Hp.Equal,"",c.NM.Number))}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.rq.filters=this.utility.getFilters(this.filters),this.apiService.getBookingRulesFilter(this.rq).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.bookingRule=new v.xG$(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.bookingRule=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBackEvent(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}onTipoBookingRuleSelected(o){this.filters[0].value==o?this.filters[0].value="":this.filters[0].value=o,this.download(),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle()}}il.\u0275fac=function(o){return new(o||il)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},il.\u0275cmp=e.Xpm({type:il,selectors:[["app-booking-rules"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:40,vars:15,consts:[[1,"p-3"],[3,"hidden"],[1,"mb-3"],["class","d-inline-block tipo-booking-rule p-2 rounded-lg mr-2",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","tipo"],["matColumnDef","dal"],["matColumnDef","al"],["matColumnDef","isAttiva"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"bookingRule","backEvent"],["editComponent",""],[1,"d-inline-block","tipo-booking-rule","p-2","rounded-lg","mr-2",3,"ngClass","click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary","disabled","",3,"checked"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,rae,3,6,"span",3),e.ALo(4,"selectEnum"),e.qZA(),e.YNc(5,cae,8,3,"div",4),e.TgZ(6,"div",1)(7,"button",5),e.NdJ("click",function(){return t.add()}),e.TgZ(8,"i",6),e._uU(9,"add"),e.qZA()(),e.TgZ(10,"div",7)(11,"mat-table",8),e.ynx(12,9),e.YNc(13,sae,1,0,"mat-header-cell",10),e.YNc(14,pae,4,0,"mat-cell",11),e.BQk(),e.ynx(15,12),e.YNc(16,dae,3,3,"mat-header-cell",10),e.YNc(17,mae,2,1,"mat-cell",13),e.BQk(),e.ynx(18,14),e.YNc(19,_ae,3,3,"mat-header-cell",10),e.YNc(20,uae,3,3,"mat-cell",13),e.BQk(),e.ynx(21,15),e.YNc(22,gae,3,3,"mat-header-cell",10),e.YNc(23,hae,3,4,"mat-cell",13),e.BQk(),e.ynx(24,16),e.YNc(25,fae,3,3,"mat-header-cell",10),e.YNc(26,Cae,3,4,"mat-cell",13),e.BQk(),e.ynx(27,17),e.YNc(28,bae,3,3,"mat-header-cell",10),e.YNc(29,vae,2,1,"mat-cell",13),e.BQk(),e.ynx(30,18),e.YNc(31,Tae,1,0,"mat-header-cell",10),e.YNc(32,xae,4,0,"mat-cell",19),e.BQk(),e.YNc(33,Zae,1,0,"mat-header-row",20),e.YNc(34,Aae,1,1,"mat-row",21),e.qZA()(),e.TgZ(35,"div",22)(36,"mat-paginator",23),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(37,"div",24)(38,"app-booking-rules-edit",25,26),e.NdJ("backEvent",function(){return t.onBackEvent()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(2),e.Q6J("ngForOf",e.xi3(4,12,t.enumTipoBookingRules,"tipoBookingRules")),e.xp6(2),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("bookingRule",t.bookingRule))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,tl,m.uU,Te.A,z.X$],styles:[".selected[_ngcontent-%COMP%]{color:#e91e63!important;border:1px solid #e91e63!important}.tipo-booking-rule[_ngcontent-%COMP%]{font-size:16px;font-weight:600;cursor:pointer;border:1px solid #aaaaaa;background-color:#fff}"]});class dt{constructor(o){this.apiService=o,this.showPubblicazioneBox=!1,this.isPubblicazioneInCorso=!1,this.pubblicaSubject=new qc.x,this.codaPubblicazione=[],this.onPubblicazioneStarted=new e.vpe,this.onPubblicazioneFinished=new e.vpe}pubblicaPortale(o,t=!1){if(t||!this.isPubblicazioneInCorso){let n=new d.uIb;n.oidPortale=o.oid,this.apiService.getGiorniDaPubblicare(n).subscribe(a=>{a.data.length>0?(this.onPubblicazioneStarted.emit(o),this.giorniDaPubblicare=a.data,this.portale=o,this.isPubblicazioneInCorso=!0,this.showPubblicazioneBox=!0,this.pubblicaSubject.next()):null!=this.codaPubblicazione&&this.codaPubblicazione.length>0?this.pubblicaPortale(this.codaPubblicazione.shift(),!0):this.isPubblicazioneInCorso=!1})}}pubblicaPortali(o){o.length>0&&(this.codaPubblicazione=JSON.parse(JSON.stringify(o)),this.pubblicaPortale(this.codaPubblicazione.shift()))}}function wae(i,o){if(1&i&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}function zae(i,o){if(1&i&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij("",t.descrizione," ")}}function Mae(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.risultatiVisible=!a.risultatiVisible)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.risultatiVisible?"sbm.disponibilita.pubblica-disponibilita.nascondiRisultati":"sbm.disponibilita.pubblica-disponibilita.mostraRisultati"))}}function qae(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",30),e._uU(14),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.portale),e.xp6(2),e.Oqu(t.tipoCamera),e.xp6(2),e.Oqu(t.tariffa),e.xp6(2),e.Oqu(t.giorno),e.xp6(2),e.Oqu(t.statoPubblicazione),e.xp6(2),e.Oqu(t.statoPortale),e.xp6(2),e.Oqu(t.disponibili)}}function Pae(i,o){if(1&i&&(e.TgZ(0,"div",17)(1,"table",5)(2,"tr")(3,"th"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"th"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th",30),e._uU(22),e.ALo(23,"translate"),e.qZA()(),e.YNc(24,qae,15,7,"tr",31),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,8,"bo.disponibilitaXPortaleXAlbergo.proprieta.portale")),e.xp6(3),e.Oqu(e.lcZ(8,10,"bo.disponibilitaXPortaleXAlbergo.proprieta.tipoCamera")),e.xp6(3),e.Oqu(e.lcZ(11,12,"bo.disponibilitaXPortaleXAlbergo.proprieta.tariffa")),e.xp6(3),e.Oqu(e.lcZ(14,14,"bo.disponibilitaXPortaleXAlbergo.proprieta.giorno")),e.xp6(3),e.Oqu(e.lcZ(17,16,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoPubblicazione")),e.xp6(3),e.Oqu(e.lcZ(20,18,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoPortaleXAlbergo")),e.xp6(3),e.Oqu(e.lcZ(23,20,"bo.disponibilitaXPortaleXAlbergo.proprieta.disponibili")),e.xp6(2),e.Q6J("ngForOf",t.risultati)}}function kae(i,o){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,Pae,25,22,"div",29),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=t.risultati&&t.risultati.length>0)}}dt.\u0275fac=function(o){return new(o||dt)(e.LFG(A.s))},dt.\u0275prov=e.Yz7({token:dt,factory:dt.\u0275fac,providedIn:"root"});const _s=function(i){return{"color-pink":i}};class Ct extends f.H{constructor(o,t){super(),this.apiService=o,this.pubblicazioneService=t,this.tipiCamera=[],this.tariffe=[],this.rq=new d.t16,this.risultati=[],this.publicated=!1,this.risultatiVisible=!1}ngOnInit(){this.setIsLoading(!0),this.rq.oidPortale=this.portale.oid,this.dal&&(this.rq.dal=this.dal),this.al&&(this.rq.al=this.al),null!=this.oidTipoCamera&&this.oidTipoCamera>0&&this.rq.oidTipiCamera.push(this.oidTipoCamera),null!=this.oidTariffa&&this.oidTariffa>0&&this.rq.oidTariffe.push(this.oidTariffa),this.apiService.getPortaliXAlbergoViewSelect(null,!1).subscribe(o=>{o.data.length>0&&((null==this.rq.oidPortale||this.rq.oidPortale<=0)&&(this.rq.oidPortale=o.data[0].oid,this.portale=new v.$Ys(this.rq.oidPortale),this.portale.nome=o.data[0].nome),this.apiService.getTipiCameraOTA(this.rq.oidPortale).subscribe(t=>{this.tipiCamera=t.data,this.apiService.getTariffeOTA(this.rq.oidPortale).subscribe(n=>{this.tariffe=n.data,this.setIsLoading(!1)})}))})}pubblica(){this.setIsLoading(!0),this.risultatiVisible=!1,this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.apiService.pubblicaDisponibilita(this.rq).subscribe(o=>{this.setIsLoading(!1),null!=o?(this.dettaglioErrore=o.dettaglioErrore,this.dettaglioWarning=o.dettaglioWarning,this.risultati=o.risultati,o.tipoEsito==c.pp.NessunErrore?this.showInfo("sbm.disponibilita.pubblica-disponibilita.successoPubblicazione"):this.showError("sbm.disponibilita.pubblica-disponibilita.errorePubblicazione")):this.showError("sbm.disponibilita.pubblica-disponibilita.errorePubblicazione"),this.publicated=!0})}onPortaleChange(){this.setIsLoading(!0),this.rq.oidPortale=this.portale.oid,this.rq.oidTipiCamera=[],this.rq.oidTariffe=[],this.apiService.getTipiCameraOTA(this.rq.oidPortale).subscribe(o=>{this.tipiCamera=o.data,this.apiService.getTariffeOTA(this.rq.oidPortale).subscribe(t=>{this.tariffe=t.data,this.setIsLoading(!1)})})}onSelectDeselectAllClickTipiCamere(o){this.isAllSelectedTipiCamere(o)?this.rq.oidTipiCamera=[]:(this.rq.oidTipiCamera=this.tipiCamera.map(t=>t.oid),o.close())}isAllSelectedTipiCamere(o){return o.selected.length==this.tipiCamera.length}onSelectDeselectAllClickTariffe(o){this.isAllSelectedTariffe(o)?this.rq.oidTariffe=[]:(this.rq.oidTariffe=this.tariffe.map(t=>t.oid),o.close())}isAllSelectedTariffe(o){return o.selected.length==this.tariffe.length}isAllDeselected(o){return 0==o.selected.length}next31Days(){this.rq.dal=this.getDate(u(this.rq.al).add(1,"day")),this.rq.al=this.getDate(u(this.rq.dal).add(31,"day"))}dalChange(){u(this.rq.dal)>u(this.rq.al)&&(this.rq.al=this.rq.dal)}alChange(){u(this.rq.al)<u(this.rq.dal)&&(this.rq.dal=this.rq.al)}pubblicaDisponibilitaFutura(){this.setIsLoading(!0);let o=new d.uIb;o.oidPortale=this.portale.oid,this.apiService.getGiorniDaPubblicare(o).subscribe(t=>{this.setIsLoading(!1),t.data.length>0?this.pubblicazioneService.pubblicaPortale({oid:this.portale.oid,nome:this.portale.nome},!0):this.showError("sbm.disponibilita.pubblica-disponibilita.nessunaDisponibilitaDaPubblicare")})}}Ct.\u0275fac=function(o){return new(o||Ct)(e.Y36(A.s),e.Y36(dt))},Ct.\u0275cmp=e.Xpm({type:Ct,selectors:[["app-pubblica-disponibilita"]],inputs:{dialogRef:"dialogRef",portale:"portale",oidTipoCamera:"oidTipoCamera",oidTariffa:"oidTariffa",dal:"dal",al:"al"},features:[e.qOj],decls:57,vars:65,consts:[["mat-icon-button","",1,"modal-close-button",3,"disableRipple","click"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["id","pubblica-camere-select","panelClass","pubblica-camere-select-panel","multiple","",3,"placeholder","ngModel","ngModelChange"],["selectTipiCamera",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value",4,"ngFor","ngForOf"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectTariffe",""],["color","primary",1,"mt-2",3,"ngModel","ngModelChange"],[1,"border","rounded","p-3","log"],[3,"_text"],[1,"text-right","mt-3"],["mat-flat-button","","color","blank",3,"click",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"mt-4"],["id","pubblica-button","mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"disabled","click"],[3,"value"],["mat-flat-button","","color","blank",3,"click"],[1,"mt-3"],["class","border rounded p-3 log",4,"ngIf"],[1,"text-center"],[4,"ngFor","ngForOf"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"button",0),e.NdJ("click",function(){return t.dialogRef.close(t.publicated)}),e.TgZ(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"app-view-select",4),e.NdJ("valueChange",function(l){return t.portale=l})("valueChange",function(){return t.onPortaleChange()}),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"mat-form-field",5)(8,"input",6),e.NdJ("ngModelChange",function(l){return t.rq.dal=l})("dateChange",function(){return t.dalChange()}),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"mat-datepicker-toggle",7)(11,"mat-datepicker",null,8),e.qZA(),e.TgZ(13,"mat-form-field",5)(14,"input",6),e.NdJ("ngModelChange",function(l){return t.rq.al=l})("dateChange",function(){return t.alChange()}),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"mat-datepicker-toggle",7)(17,"mat-datepicker",null,9),e.qZA(),e.TgZ(19,"mat-form-field",5)(20,"mat-select",10,11),e.NdJ("ngModelChange",function(l){return t.rq.oidTipiCamera=l}),e.ALo(22,"translate"),e.TgZ(23,"mat-checkbox",12),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(21);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickTipiCamere(r))}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.YNc(26,wae,2,2,"mat-option",13),e.qZA()(),e.TgZ(27,"mat-form-field",5)(28,"mat-select",14,15),e.NdJ("ngModelChange",function(l){return t.rq.oidTariffe=l}),e.ALo(30,"translate"),e.TgZ(31,"mat-checkbox",12),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(29);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickTariffe(r))}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.YNc(34,zae,2,2,"mat-option",13),e.qZA()(),e.TgZ(35,"mat-checkbox",16),e.NdJ("ngModelChange",function(l){return t.rq.isForzaPubblicazione=l}),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",3)(39,"h5"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"div",17),e._UZ(43,"app-inner-html",18),e.qZA(),e.TgZ(44,"div",19),e.YNc(45,Mae,3,3,"button",20),e.qZA()()(),e.YNc(46,kae,2,1,"div",21),e.TgZ(47,"div",22)(48,"button",23),e.NdJ("click",function(){return t.pubblica()}),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"button",24),e.NdJ("click",function(){return t.next31Days()}),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"button",25),e.NdJ("click",function(){return t.pubblicaDisponibilitaFutura()}),e._uU(55),e.ALo(56,"translate"),e.qZA()()}if(2&o){const n=e.MAs(12),a=e.MAs(18),l=e.MAs(21),r=e.MAs(29);e.Q6J("disableRipple",!0),e.xp6(5),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(null,!1))("value",t.portale)("placeholder",e.lcZ(6,37,"globals.portale")),e.xp6(3),e.s9C("placeholder",e.lcZ(9,39,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(4),e.s9C("placeholder",e.lcZ(15,41,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(4),e.Q6J("placeholder",e.lcZ(22,43,"sbm.disponibilita.pubblica-disponibilita.applicaATipiCamere"))("ngModel",t.rq.oidTipiCamera),e.xp6(3),e.Q6J("ngClass",e.VKq(61,_s,t.isAllSelectedTipiCamere(l)))("checked",t.isAllSelectedTipiCamere(l))("indeterminate",!t.isAllSelectedTipiCamere(l)&&!t.isAllDeselected(l)),e.xp6(1),e.Oqu(e.lcZ(25,45,"globals.selezionaDeselezionaTutti")),e.xp6(2),e.Q6J("ngForOf",t.tipiCamera),e.xp6(2),e.Q6J("placeholder",e.lcZ(30,47,"sbm.disponibilita.pubblica-disponibilita.applicaATariffe"))("ngModel",t.rq.oidTariffe),e.xp6(3),e.Q6J("ngClass",e.VKq(63,_s,t.isAllSelectedTariffe(r)))("checked",t.isAllSelectedTariffe(r))("indeterminate",!t.isAllSelectedTariffe(r)&&!t.isAllDeselected(r)),e.xp6(1),e.Oqu(e.lcZ(33,49,"globals.selezionaDeselezionaTutti")),e.xp6(2),e.Q6J("ngForOf",t.tariffe),e.xp6(1),e.Q6J("ngModel",t.rq.isForzaPubblicazione),e.xp6(1),e.Oqu(e.lcZ(37,51,"sbm.disponibilita.pubblica-disponibilita.forzaPubblicazione")),e.xp6(4),e.Oqu(e.lcZ(41,53,"sbm.disponibilita.pubblica-disponibilita.logPubblicazione")),e.xp6(3),e.Q6J("_text",(t.dettaglioWarning?t.dettaglioWarning+"<br><br>":"")+(t.dettaglioErrore?t.dettaglioErrore:"")),e.xp6(2),e.Q6J("ngIf",t.publicated&&null!=t.risultati&&t.risultati.length>0),e.xp6(1),e.Q6J("ngIf",t.risultatiVisible),e.xp6(2),e.Q6J("disabled",null==t.rq.oidPortale||t.rq.oidPortale<=0||!t.rq.dal||!t.rq.al||null==t.rq.oidTipiCamera||0==t.rq.oidTipiCamera.length||t.pubblicazioneService.isPubblicazioneInCorso),e.xp6(1),e.Oqu(e.lcZ(50,55,"sbm.disponibilita.pubblica-disponibilita.pubblica")),e.xp6(3),e.Oqu(e.lcZ(53,57,"sbm.disponibilita.pubblica-disponibilita.prossimi31Giorni")),e.xp6(2),e.Q6J("disabled",null==t.portale||null==t.portale.oid||t.portale.oid<=0||t.pubblicazioneService.isPubblicazioneInCorso),e.xp6(1),e.Oqu(e.lcZ(56,59,"sbm.disponibilita.pubblica-disponibilita.pubblicaDisponibilitaFutura"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,_.Fj,_.JJ,_.On,rt.W,ne.d,z.X$],styles:[".log[_ngcontent-%COMP%]{height:300px;overflow:auto}"]});class ol extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.localizationService=n}ngOnInit(){this.fascia.oid>0?this.title=this.localizationService.getTranslationSync("sbm.disponibilita.calendario-fasce.modificaFascia",{oid:this.fascia.oid,nome:this.fascia.nome}):this.title=this.localizationService.getTranslationSync("sbm.disponibilita.calendario-fasce.creaNuovaFascia")}save(){this.setIsLoading(!0),this.fascia.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.apiService.salvaFascia(this.fascia).subscribe(()=>{this.dialogRef.close(!0)})}}function Sae(i,o){1&i&&(e.TgZ(0,"button",17)(1,"i",18),e._uU(2,"edit"),e.qZA()())}function yae(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",13),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid.toString()))})("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.modificaFascia(l))}),e.TgZ(2,"div",8),e.YNc(3,Sae,3,0,"button",14),e.TgZ(4,"span",15),e._uU(5),e.qZA()(),e.TgZ(6,"div",8),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.TgZ(10,"div",8),e._uU(11),e.qZA()(),e._UZ(12,"mat-divider",16),e.BQk()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid.toString():""),e.xp6(2),e.Q6J("ngIf",n.modificaFasceEnabled),e.xp6(1),e.Udp("background-color",t.coloreHex),e.Q6J("appInvertColor",t.coloreHex),e.xp6(1),e.Oqu(t.nome),e.xp6(2),e.hij(" ",null!=t.ubicazioneIstat?t.ubicazioneIstat.nome:""," "),e.xp6(2),e.hij(" ",t.ordinamento," "),e.xp6(2),e.hij(" ",t.descrizioneVariazione," ")}}function Jae(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",7)(2,"div",8)(3,"span",9),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",8)(7,"span",9),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",10)(11,"span",9),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",8)(15,"span",9),e._uU(16),e.ALo(17,"translate"),e.qZA()()(),e._UZ(18,"mat-divider",11),e.YNc(19,yae,13,9,"ng-container",12),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,5,"bo.fascia.proprieta.nome")),e.xp6(4),e.Oqu(e.lcZ(9,7,"bo.fascia.proprieta.ubicazioneIstat")),e.xp6(4),e.Oqu(e.lcZ(13,9,"bo.fascia.proprieta.ordinamento")),e.xp6(4),e.Oqu(e.lcZ(17,11,"bo.fascia.proprieta.descrizioneVariazione")),e.xp6(3),e.Q6J("ngForOf",t.fasce)}}function Eae(i,o){1&i&&(e.TgZ(0,"h5",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.disponibilita.calendario-fasce.nessunaFascia"),"\n"))}ol.\u0275fac=function(o){return new(o||ol)(e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o))},ol.\u0275cmp=e.Xpm({type:ol,selectors:[["app-modifica-fascia"]],inputs:{fascia:"fascia",dialogRef:"dialogRef"},features:[e.qOj],decls:28,vars:28,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"ngModel","placeholder","ngModelChange"],["autocompleteOff","","type","number","matInput","","disabled","",3,"ngModel","placeholder","ngModelChange"],["disabled","",3,"value","placeholder","valueChange"],[1,"col-6"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"text-right","mt-3"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h3"),e._uU(4),e.qZA(),e.TgZ(5,"div",2)(6,"div",3)(7,"mat-form-field",4)(8,"input",5),e.NdJ("ngModelChange",function(a){return t.fascia.nome=a}),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",3)(11,"mat-form-field",4)(12,"input",6),e.NdJ("ngModelChange",function(a){return t.fascia.ordinamento=a}),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",3)(15,"app-color-picker",7),e.NdJ("valueChange",function(a){return t.fascia.coloreHex=a}),e.ALo(16,"translate"),e.qZA()()(),e.TgZ(17,"div",2)(18,"div",8)(19,"app-view-select",9),e.NdJ("valueChange",function(a){return t.fascia.ubicazioneIstat=a}),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",8)(22,"app-view-select",9),e.NdJ("valueChange",function(a){return t.fascia.politicaCancellazione=a}),e.ALo(23,"translate"),e.qZA()()(),e.TgZ(24,"div",10)(25,"button",11),e.NdJ("click",function(){return t.save()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(t.title),e.xp6(4),e.s9C("placeholder",e.lcZ(9,16,"bo.fascia.proprieta.nome")),e.Q6J("ngModel",t.fascia.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(13,18,"bo.fascia.proprieta.ordinamento")),e.Q6J("ngModel",t.fascia.ordinamento),e.xp6(3),e.Q6J("value",t.fascia.coloreHex)("placeholder",e.lcZ(16,20,"bo.fascia.proprieta.colore")),e.xp6(4),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect(null,!1))("value",t.fascia.ubicazioneIstat)("placeholder",e.lcZ(20,22,"globals.ubicazioneIstat")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getCancellazioniViewSelect())("value",t.fascia.politicaCancellazione)("placeholder",e.lcZ(23,24,"bo.fascia.proprieta.politicaCancellazione")),e.xp6(3),e.Q6J("disabled",!t.fascia.nome),e.xp6(1),e.Oqu(e.lcZ(27,26,"globals.salva")))},dependencies:[w.X,h.eB,M.v_,b.k0,F.aO,_.Fj,_.wV,_.JJ,_.Q7,_.On,We.h,ne.d,z.X$]});class nl extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.isFasceModificate=!1,this.modificaFasceEnabled=!0}ngOnInit(){this.download();let o=this.sessionService.getPermessiUtente();null!=o&&(this.modificaFasceEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaFasceCalendario)))}download(o=!0){o&&this.setIsLoading(!0);let t=new d.k$g(new d.aQR("ordinamento",c.nI.Asc));t.filters=[],this.oidUbicazioneIstat>0&&t.filters.push(new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,this.oidUbicazioneIstat.toString(),c.NM.Number)),this.nome&&t.filters.push(new d.wn$("nome",c.Hp.Contains,this.nome,c.NM.String)),this.apiService.getFasceFilter(t).subscribe(n=>{this.fasce=n.data,this.fasce.forEach(a=>{try{a.coloreHex=Z(a.colore).hex()}catch(l){}}),o&&this.setIsLoading(!1)})}modificaFascia(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(ol,t),a=n.componentInstance;a.fascia=Object.assign({},o),a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&(this.isFasceModificate=!0,this.download())})}}function Nae(i,o){if(1&i&&(e.TgZ(0,"mat-option",25),e._UZ(1,"span",26),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(27);e.Q6J("value",t.oid)("hidden",!(!n.value||t.nome&&t.nome.toLowerCase().includes(n.value.toLowerCase()))),e.xp6(1),e.Udp("background-color",t.coloreHex),e.xp6(2),e.Oqu(t.nome)}}function Oae(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}nl.\u0275fac=function(o){return new(o||nl)(e.Y36(A.s),e.Y36(j.m))},nl.\u0275cmp=e.Xpm({type:nl,selectors:[["app-elenco-fasce"]],inputs:{oidUbicazioneIstat:"oidUbicazioneIstat"},features:[e.qOj],decls:11,vars:10,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"mb-2"],[1,"w-25"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange","input"],[4,"ngIf"],["class","border rounded p-3",4,"ngIf"],[1,"row","no-gutters"],[1,"col-3"],[1,"font-weight-bold"],[1,"col-3","text-center"],[1,"mt-3","mb-1"],[4,"ngFor","ngForOf"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",1,"row","no-gutters","cursor-pointer",3,"matTooltip","contextmenu","click"],["mat-icon-button","","color","primary","class","edit-button mr-4",4,"ngIf"],[1,"d-inline-block","nome-fascia",3,"appInvertColor"],[1,"mt-1","mb-1"],["mat-icon-button","","color","primary",1,"edit-button","mr-4"],[1,"material-icons","edit-icon"],[1,"border","rounded","p-3"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h3",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-form-field",3)(7,"input",4),e.NdJ("ngModelChange",function(a){return t.nome=a})("input",function(){return t.download(!1)}),e.ALo(8,"translate"),e.qZA()(),e.YNc(9,Jae,20,13,"div",5),e.YNc(10,Eae,3,3,"h5",6)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,6,"sbm.disponibilita.calendario-fasce.fasce")),e.xp6(3),e.Q6J("placeholder",e.lcZ(8,8,"bo.fascia.proprieta.nome"))("ngModel",t.nome),e.xp6(2),e.Q6J("ngIf",null!=t.fasce&&t.fasce.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.fasce&&0==t.fasce.length))},dependencies:[m.sg,m.O5,k.Z,w.X,h.eB,M.v_,b.k0,Yt.d,F.aO,q.Kd,_.Fj,_.JJ,_.On,z.X$],styles:[".nome-fascia[_ngcontent-%COMP%]{padding:0 3px;border-radius:5px;border:1px solid #666666}.edit-button[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px}.edit-icon[_ngcontent-%COMP%]{font-size:20px}"]});const Lae=function(i){return{"color-pink":i}};class al extends f.H{constructor(o,t){super(),this.calendarioFasceService=o,this.apiService=t,this.rq=new d.oXc}get model(){return this.calendarioFasceService.model}ngOnInit(){this.rq.oidPortale=this.model.oidPortale,this.rq.dal=this.getDate(u().year(this.model.selectedYear).startOf("month")),this.rq.al=this.getDate(u().year(this.model.selectedYear).endOf("month")),this.rq.oidTipiCamera=this.model.tipiCamera.map(o=>o.oid),this.rq.oidFascia=-1,this.rq.dayOfWeeks=new d.RUf}dalChange(){u(this.rq.dal)>u(this.rq.al)&&(this.rq.al=this.rq.dal)}alChange(){u(this.rq.al)<u(this.rq.dal)&&(this.rq.dal=this.rq.al)}save(){this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al);let o="globals.effettuareOperazione";(null==this.rq.oidFascia||this.rq.oidFascia<=0)&&(o="sbm.disponibilita.calendario-fasce.confermaRimozioneFascia"),this.showDialogConfirm(o).then(t=>{this.setIsLoading(!0),this.apiService.salvaFasce(this.rq).subscribe(n=>{this.setIsLoading(!1),n&&n.listaDisponibilita&&n.listaDisponibilita.length>0?this.dialogRef.close(this.calendarioFasceService.updateDisponibilitaXFasce(n.listaDisponibilita)):this.dialogRef.close()})},t=>{})}onSelectDeselectAllClick(o){this.isAllSelected(o)?this.rq.oidTipiCamera=[]:this.rq.oidTipiCamera=this.model.tipiCamera.map(t=>t.oid)}isAllSelected(o){return o.selected.length==this.model.tipiCamera.length}isAllDeselected(o){return 0==o.selected.length}}function Dae(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function Iae(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.pubblica())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.calendario-fasce.pubblica")))}function Qae(i,o){if(1&i&&(e.TgZ(0,"div",25),e._UZ(1,"app-mese",26),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("model",t)("oidFascia",n.selectedFascia)}}function Uae(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Qae,2,2,"div",24),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.model.mesiXDisponibilita)}}function Yae(i,o){if(1&i&&(e.TgZ(0,"mat-tab",23),e.YNc(1,Uae,2,1,"ng-container",16),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Q6J("label",t.toString()),e.xp6(1),e.Q6J("ngIf",a.tabIndex==n)}}function Rae(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"mat-checkbox",32),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.selectedFascia=a.checked?l.oid:-1)}),e.qZA(),e.TgZ(2,"span",33),e._uU(3),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectedFascia==t.oid),e.xp6(1),e.Udp("background-color",t.coloreHex),e.Q6J("appInvertColor",t.coloreHex),e.xp6(1),e.Oqu(t.nome)}}function Fae(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Rae,4,5,"div",30),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!n.nomeFascia||!!t.nome&&t.nome.toLowerCase().includes(n.nomeFascia.toLowerCase()))}}function Hae(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"h4",27),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-form-field",8)(5,"input",28),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.nomeFascia=a)})("input",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectedFascia=-1)}),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",5),e.YNc(8,Fae,2,1,"ng-container",29),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"sbm.disponibilita.calendario-fasce.fasce")),e.xp6(3),e.Q6J("placeholder",e.lcZ(6,6,"bo.fascia.proprieta.nome"))("ngModel",t.nomeFascia),e.xp6(3),e.Q6J("ngForOf",t.model.fasce)}}function Kae(i,o){1&i&&(e.TgZ(0,"h5",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.disponibilita.calendario-fasce.nessunaFascia")," "))}function Gae(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",17)(2,"div",18)(3,"mat-tab-group",19),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tabIndex=a)})("selectedTabChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedTabChange())}),e.YNc(4,Yae,2,2,"mat-tab",20),e.qZA()()(),e.TgZ(5,"div",21),e.YNc(6,Hae,9,8,"ng-container",16),e.YNc(7,Kae,3,3,"h5",22),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("hidden",null==t.model.years||0==t.model.years.length),e.xp6(2),e.Q6J("selectedIndex",t.tabIndex),e.xp6(1),e.Q6J("ngForOf",t.model.years),e.xp6(2),e.Q6J("ngIf",null!=t.model.fasce&&t.model.fasce.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.model.fasce&&0==t.model.fasce.length)}}al.\u0275fac=function(o){return new(o||al)(e.Y36(De),e.Y36(A.s))},al.\u0275cmp=e.Xpm({type:al,selectors:[["app-modifica-periodo-fascia"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:74,vars:76,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","matInput","","readonly","",3,"matDatepicker","ngModel","placeholder","ngModelChange","dateChange"],["matSuffix","",3,"for"],["pickerDal",""],["pickerAl",""],[3,"ngModel","placeholder","ngModelChange"],["selectSearch",""],[3,"value"],[3,"value","hidden",4,"ngFor","ngForOf"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["select",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-2"],["color","primary",1,"mr-2",3,"ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"color-pink","mt-3","font-weight-bold"],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value","hidden"],[1,"span-coloreFascia","mr-2"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h3"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",2)(7,"div",3)(8,"mat-form-field",4)(9,"input",5),e.NdJ("ngModelChange",function(l){return t.rq.dal=l})("dateChange",function(){return t.dalChange()}),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"mat-datepicker-toggle",6)(12,"mat-datepicker",null,7),e.qZA()(),e.TgZ(14,"div",3)(15,"mat-form-field",4)(16,"input",5),e.NdJ("ngModelChange",function(l){return t.rq.al=l})("dateChange",function(){return t.alChange()}),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"mat-datepicker-toggle",6)(19,"mat-datepicker",null,8),e.qZA()()(),e.TgZ(21,"div",2)(22,"div",3)(23,"mat-form-field",4)(24,"mat-select",9),e.NdJ("ngModelChange",function(l){return t.rq.oidFascia=l}),e.ALo(25,"translate"),e._UZ(26,"app-select-search",null,10)(28,"mat-option",11),e.YNc(29,Nae,4,5,"mat-option",12),e.qZA()()(),e.TgZ(30,"div",3)(31,"mat-form-field",4)(32,"mat-select",13,14),e.NdJ("ngModelChange",function(l){return t.rq.oidTipiCamera=l}),e.ALo(34,"translate"),e.TgZ(35,"mat-checkbox",15),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(33);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClick(r))}),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.YNc(38,Oae,2,2,"mat-option",16),e.qZA()()()(),e.TgZ(39,"div",17)(40,"mat-checkbox",18),e.NdJ("ngModelChange",function(l){return t.rq.dayOfWeeks.isLun=l}),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"mat-checkbox",18),e.NdJ("ngModelChange",function(l){return t.rq.dayOfWeeks.isMar=l}),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"mat-checkbox",18),e.NdJ("ngModelChange",function(l){return t.rq.dayOfWeeks.isMer=l}),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"mat-checkbox",18),e.NdJ("ngModelChange",function(l){return t.rq.dayOfWeeks.isGio=l}),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"mat-checkbox",18),e.NdJ("ngModelChange",function(l){return t.rq.dayOfWeeks.isVen=l}),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"mat-checkbox",18),e.NdJ("ngModelChange",function(l){return t.rq.dayOfWeeks.isSab=l}),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"mat-checkbox",19),e.NdJ("ngModelChange",function(l){return t.rq.dayOfWeeks.isDom=l}),e._uU(59),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"button",20),e.NdJ("click",function(){return t.rq.dayOfWeeks.selezionaTutti()}),e._uU(62),e.ALo(63,"translate"),e.qZA(),e.TgZ(64,"button",21),e.NdJ("click",function(){return t.rq.dayOfWeeks.deselezionaTutti()}),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"p",22),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"div",23)(71,"button",24),e.NdJ("click",function(){return t.save()}),e._uU(72),e.ALo(73,"translate"),e.qZA()()}if(2&o){const n=e.MAs(13),a=e.MAs(20),l=e.MAs(33);e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,40,"globals.opzioniPropagazione")),e.xp6(5),e.s9C("placeholder",e.lcZ(10,42,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(17,44,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(6),e.s9C("placeholder",e.lcZ(25,46,"bo.disponibilitaXPortaleXAlbergo.proprieta.fascia")),e.Q6J("ngModel",t.rq.oidFascia),e.xp6(4),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",null==t.model?null:t.model.fasce),e.xp6(3),e.Q6J("placeholder",e.lcZ(34,48,"globals.tipiCamera"))("ngModel",t.rq.oidTipiCamera),e.xp6(3),e.Q6J("ngClass",e.VKq(74,Lae,t.isAllSelected(l)))("checked",t.isAllSelected(l))("indeterminate",!t.isAllSelected(l)&&!t.isAllDeselected(l)),e.xp6(1),e.Oqu(e.lcZ(37,50,"globals.selezionaDeselezionaTutti")),e.xp6(2),e.Q6J("ngForOf",t.model.tipiCamera),e.xp6(2),e.Q6J("ngModel",t.rq.dayOfWeeks.isLun),e.xp6(1),e.hij(" ",e.lcZ(42,52,"globals.dayOfWeeks.lun")," "),e.xp6(2),e.Q6J("ngModel",t.rq.dayOfWeeks.isMar),e.xp6(1),e.hij(" ",e.lcZ(45,54,"globals.dayOfWeeks.mar")," "),e.xp6(2),e.Q6J("ngModel",t.rq.dayOfWeeks.isMer),e.xp6(1),e.hij(" ",e.lcZ(48,56,"globals.dayOfWeeks.mer")," "),e.xp6(2),e.Q6J("ngModel",t.rq.dayOfWeeks.isGio),e.xp6(1),e.hij(" ",e.lcZ(51,58,"globals.dayOfWeeks.gio")," "),e.xp6(2),e.Q6J("ngModel",t.rq.dayOfWeeks.isVen),e.xp6(1),e.hij(" ",e.lcZ(54,60,"globals.dayOfWeeks.ven")," "),e.xp6(2),e.Q6J("ngModel",t.rq.dayOfWeeks.isSab),e.xp6(1),e.hij(" ",e.lcZ(57,62,"globals.dayOfWeeks.sab")," "),e.xp6(2),e.Q6J("ngModel",t.rq.dayOfWeeks.isDom),e.xp6(1),e.hij(" ",e.lcZ(60,64,"globals.dayOfWeeks.dom")," "),e.xp6(3),e.Oqu(e.lcZ(63,66,"globals.selezionaTutti")),e.xp6(3),e.Oqu(e.lcZ(66,68,"globals.deselezionaTutti")),e.xp6(3),e.Oqu(e.lcZ(69,70,"sbm.disponibilita.calendario-fasce.modificaPossibile")),e.xp6(3),e.Q6J("disabled",!t.rq.dayOfWeeks.isGiornoSelezionato()||null==t.rq.oidTipiCamera||0==t.rq.oidTipiCamera.length),e.xp6(1),e.Oqu(e.lcZ(73,72,"globals.salva"))}},dependencies:[m.mk,m.sg,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,F.aO,_.Fj,_.JJ,_.On,R,z.X$],styles:[".span-coloreFascia[_ngcontent-%COMP%]{width:10px;height:10px;display:inline-block}"]});class ll extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.calendarioFasceService=t,this.headerService=n,this.sessionService=a,this.model=new d.LSJ,this.pubblicaDisponibilitaEnabled=!0,this.selectedFascia=-1,this.tabIndex=null,this.initialized=!1,this.getPortaliRQ=d.k$g.fromFilters([new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,null,c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)]),this.ubicazioneIstatDisabled=!1}ngOnInit(){this.headerService.setTitle("sbm.disponibilita.calendario-fasce.title");let o=this.sessionService.getPermessiUtente();null!=o&&(this.pubblicaDisponibilitaEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.PubblicazioneDisponibilita))),this.sessionService.isPubblicaWS()&&(this.pubblicaDisponibilitaEnabled=!1);let t=this.sessionService.getUbicazioneIstat();null!=t&&(this.getPortaliRQ.filters[0].value=t.oid.toString(),this.ubicazioneIstatDisabled=!0,this.ubicazioneIstat=t),this.loadData()}loadData(){this.setIsLoading(!0);let o=new d.QQy;o.oidPortale=this.model.portale?this.model.portale.oid:null,o.selectedYear=null!=this.tabIndex?this.model.years[this.tabIndex]:null,o.oidAlbergo=this.sessionService.getOidAlbergo(),null!=this.ubicazioneIstat&&(o.oidUbicazioneIstat=this.ubicazioneIstat.oid),this.apiService.getCalendarioFasceForm(o).subscribe(t=>{this.setIsLoading(!1),t&&(this.model=t,this.checkDisponibilitaNonPubblicate(),this.tabIndex=this.model.years.indexOf(this.model.selectedYear),this.calendarioFasceService.model=this.model),this.initialized=!0})}loadEvents(){null!=this.appMesi&&this.appMesi.length>0&&this.appMesi.forEach(o=>{o.loadEvents()})}selectedTabChange(){this.model.mesiXDisponibilita=[],this.loadData()}fasceClicked(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh";let t=this.showModalDialog(nl,o),n=t.componentInstance;n.oidUbicazioneIstat=this.model.oidUbicazioneIstat,t.afterClosed().subscribe(()=>{n.isFasceModificate&&this.loadData()})}opzioniPropagazioneClicked(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(al,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.loadEvents()})}pubblica(){let o=new d.Zpt;o.width="80vw",o.disableClose=!0;let t=this.showModalDialog(Ct,o),n=t.componentInstance;n.dialogRef=t,n.portale=this.model.portale,n.oidTipoCamera=this.calendarioFasceService.oidTipoCamera,t.afterClosed().subscribe(a=>{a&&this.loadData()})}checkDisponibilitaNonPubblicate(){this.apiService.checkDisponibilitaFutureNonPubblicate(this.model.oidPortale).subscribe(o=>{o.data?this.alert=new String("sbm.disponibilita.calendario-fasce.disponibilitaNonPubblicate"):this.alert=null})}onPortaleChange(){this.calendarioFasceService.oidTipoCamera=null,this.loadData()}onUbicazioneChange(){null!=this.ubicazioneIstat&&this.ubicazioneIstat.oid>0?(this.getPortaliRQ.filters[0].value=this.ubicazioneIstat.oid.toString(),this.loadData()):this.getPortaliRQ.filters[0].value=null}ngOnDestroy(){this.headerService.clearTitle()}}function $ae(i,o){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}function Bae(i,o){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}ll.\u0275fac=function(o){return new(o||ll)(e.Y36(A.s),e.Y36(De),e.Y36(ie.r),e.Y36(j.m))},ll.\u0275cmp=e.Xpm({type:ll,selectors:[["app-calendario-fasce"]],viewQuery:function(o,t){if(1&o&&e.Gf(fe,5),2&o){let n;e.iGM(n=e.CRH())&&(t.appMesi=n)}},features:[e.qOj],decls:25,vars:27,consts:[[1,"float-right","mr-3","ubicazione-container"],["displayMember","nome",3,"disabled","dataLoader","value","placeholder","valueChange"],[1,"p-3"],[3,"message","info"],[1,"filter"],[1,"row"],[1,"col-3"],["displayMember","nome",3,"dataLoader","value","placeholder","forceDownload","valueChange"],[1,"w-100"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6","pt-2"],["mat-flat-button","","color","primary","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],[4,"ngIf"],[1,"calendari-container","pr-5",3,"hidden"],[1,"border","rounded-lg","bg-white"],[3,"selectedIndex","selectedIndexChange","selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"fasce-container"],["class","border rounded p-3 bg-white",4,"ngIf"],[3,"label"],["class","div-calendario d-inline-block mr-3 ml-3 mt-3",4,"ngFor","ngForOf"],[1,"div-calendario","d-inline-block","mr-3","ml-3","mt-3"],[3,"model","oidFascia"],[1,"mb-2"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange","input"],[4,"ngFor","ngForOf"],["class","col-6 mb-1 p-0",4,"ngIf"],[1,"col-6","mb-1","p-0"],["color","primary",1,"d-inline-block","align-middle","ml-2","mt-1","mr-1",3,"checked","change"],[1,"d-inline-block","align-middle","nome-fascia",3,"appInvertColor"],[1,"border","rounded","p-3","bg-white"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"app-view-select",1),e.NdJ("valueChange",function(a){return t.ubicazioneIstat=a})("valueChange",function(){return t.onUbicazioneChange()}),e.ALo(2,"translate"),e.qZA()(),e.TgZ(3,"div",2)(4,"app-alert",3),e.NdJ("info",function(){return t.pubblica()}),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"app-view-select",7),e.NdJ("valueChange",function(a){return t.model.portale=a})("valueChange",function(){return t.onPortaleChange()}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",6)(11,"mat-form-field",8)(12,"mat-select",9),e.NdJ("ngModelChange",function(a){return t.calendarioFasceService.oidTipoCamera=a})("selectionChange",function(){return t.loadEvents()}),e.ALo(13,"translate"),e._UZ(14,"mat-option",10),e.YNc(15,Dae,2,2,"mat-option",11),e.qZA()()(),e.TgZ(16,"div",12),e.YNc(17,Iae,3,3,"button",13),e.TgZ(18,"button",14),e.NdJ("click",function(){return t.opzioniPropagazioneClicked()}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",15),e.NdJ("click",function(){return t.fasceClicked()}),e._uU(22),e.ALo(23,"translate"),e.qZA()()()(),e.YNc(24,Gae,8,5,"ng-container",16),e.qZA()),2&o&&(e.xp6(1),e.Q6J("disabled",t.ubicazioneIstatDisabled)("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.ubicazioneIstat)("placeholder",e.lcZ(2,17,"globals.ubicazioneIstat")),e.xp6(3),e.Q6J("message",t.alert),e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(t.getPortaliRQ,!1))("value",t.model.portale)("placeholder",e.lcZ(9,19,"globals.portale"))("forceDownload",!0),e.xp6(4),e.s9C("placeholder",e.lcZ(13,21,"globals.tipoCamera")),e.Q6J("ngModel",t.calendarioFasceService.oidTipoCamera),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.model.tipiCamera),e.xp6(2),e.Q6J("ngIf",t.pubblicaDisponibilitaEnabled),e.xp6(2),e.Oqu(e.lcZ(20,23,"globals.opzioniPropagazione")),e.xp6(3),e.Oqu(e.lcZ(23,25,"sbm.disponibilita.calendario-fasce.fasce")),e.xp6(2),e.Q6J("ngIf",t.initialized))},dependencies:[m.sg,m.O5,k.Z,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ee.SK,ee.R7,_.Fj,_.JJ,_.On,nt,ne.d,fe,z.X$],styles:[".div-calendario[_ngcontent-%COMP%]{vertical-align:top}.calendari-container[_ngcontent-%COMP%]{width:calc(100% - 300px);display:inline-block;vertical-align:top}.fasce-container[_ngcontent-%COMP%]{width:300px;display:inline-block;vertical-align:top}.nome-fascia[_ngcontent-%COMP%]{padding:3px;border-radius:5px;width:75px;max-width:75px;min-width:75px;text-align:center;font-size:x-small;min-height:21px;border:1px solid #666666;font-weight:600}.ubicazione-container[_ngcontent-%COMP%]{margin-top:-40px}"]});const us=function(i){return{"color-pink":i}};function Vae(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",5)(2,"mat-select",31,32),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.oidTipiCamera=a)}),e.ALo(4,"translate"),e.TgZ(5,"mat-checkbox",33),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(3),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickTipiCamera(l))}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,$ae,2,2,"mat-option",24),e.qZA()(),e.TgZ(9,"mat-form-field",5)(10,"mat-select",31,34),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.oidTariffe=a)}),e.ALo(12,"translate"),e.TgZ(13,"mat-checkbox",33),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(11),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickTariffe(l))}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.YNc(16,Bae,2,2,"mat-option",24),e.qZA()(),e.BQk()}if(2&i){const t=e.MAs(3),n=e.MAs(11),a=e.oxw();e.xp6(2),e.Q6J("placeholder",e.lcZ(4,14,"sbm.disponibilita.copia-tariffe.copiaTipiCamere"))("ngModel",a.rq.oidTipiCamera),e.xp6(3),e.Q6J("ngClass",e.VKq(22,us,a.isAllSelectedTipiCamera(t)))("checked",a.isAllSelectedTipiCamera(t))("indeterminate",!a.isAllSelectedTipiCamera(t)&&!a.isAllDeselected(t)),e.xp6(1),e.Oqu(e.lcZ(7,16,"globals.selezionaDeselezionaTutti")),e.xp6(2),e.Q6J("ngForOf",a.tipiCamera),e.xp6(2),e.Q6J("placeholder",e.lcZ(12,18,"sbm.disponibilita.copia-tariffe.copiaTariffe"))("ngModel",a.rq.oidTariffe),e.xp6(3),e.Q6J("ngClass",e.VKq(24,us,a.isAllSelectedTariffe(n)))("checked",a.isAllSelectedTariffe(n))("indeterminate",!a.isAllSelectedTariffe(n)&&!a.isAllDeselected(n)),e.xp6(1),e.Oqu(e.lcZ(15,20,"globals.selezionaDeselezionaTutti")),e.xp6(2),e.Q6J("ngForOf",a.tariffe)}}function Xae(i,o){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}function jae(i,o){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}function Wae(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",5)(2,"mat-select",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.oidTariffaDa=a)}),e.ALo(3,"translate"),e.YNc(4,Xae,2,2,"mat-option",24),e.qZA()(),e.TgZ(5,"mat-form-field",5)(6,"mat-select",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.oidTariffaA=a)}),e.ALo(7,"translate"),e.YNc(8,jae,2,2,"mat-option",24),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("placeholder",e.lcZ(3,6,"sbm.disponibilita.copia-tariffe.copiaDa"))("ngModel",t.rq.oidTariffaDa),e.xp6(2),e.Q6J("ngForOf",t.tariffe),e.xp6(2),e.Q6J("placeholder",e.lcZ(7,8,"sbm.disponibilita.copia-tariffe.copiaA"))("ngModel",t.rq.oidTariffaA),e.xp6(2),e.Q6J("ngForOf",t.tariffe)}}function ele(i,o){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}class rl extends f.H{constructor(o,t,n){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.rq=new d.WeG,this.tipiCamera=[],this.tariffe=[],this.enumTipoValore=c.jy}ngOnInit(){this.setIsLoading(!0),this.headerService.setTitle("sbm.disponibilita.copia-tariffe.title"),this.rq.dalDa=this.getDate(this.today),this.rq.alDa=this.getDate(this.oneMonthFromToday),this.rq.dalA=this.getDate(this.today.add(364,"days")),this.rq.alA=this.getDate(this.oneMonthFromToday.add(364,"days")),this.rq.isCopiaSingolaTariffa=!1,this.rq.giorni=new d.RUf,this.apiService.getPortaliXAlbergoViewSelect(null,!1).subscribe(o=>{o.data.length>0?(this.portale=o.data[0],this.onPortaleChange()):this.setIsLoading(!1)})}onPortaleChange(){this.setIsLoading(!0),this.rq.oidPortale=this.portale.oid,this.rq.oidTipiCamera=[],this.rq.oidTariffe=[],this.apiService.getTipiCameraOTA(this.rq.oidPortale).subscribe(o=>{this.tipiCamera=o.data,this.apiService.getTariffeOTA(this.rq.oidPortale).subscribe(t=>{this.tariffe=t.data,this.tariffe.length>0&&(this.rq.oidTariffaDa=this.tariffe[0].oid,this.rq.oidTariffaA=this.tariffe[0].oid),this.setIsLoading(!1)})})}onSelectDeselectAllClickTipiCamera(o){this.isAllSelectedTipiCamera(o)?this.rq.oidTipiCamera=[]:this.rq.oidTipiCamera=this.tipiCamera.map(t=>t.oid)}isAllSelectedTipiCamera(o){return o.selected.length==this.tipiCamera.length}onSelectDeselectAllClickTariffe(o){this.isAllSelectedTariffe(o)?this.rq.oidTariffe=[]:this.rq.oidTariffe=this.tariffe.map(t=>t.oid)}isAllSelectedTariffe(o){return o.selected.length==this.tariffe.length}isAllDeselected(o){return 0==o.selected.length}onVariazionePrezzoInput(o){o.value?this.rq.variazionePrezzo=+o.value:this.rq.variazionePrezzo=0}copiaDisponibilita(){this.setIsLoading(!0),this.rq.dalDa=this.getDate(this.rq.dalDa),this.rq.alDa=this.getDate(this.rq.alDa),this.rq.dalA=this.getDate(this.rq.dalA),this.rq.alA=this.getDate(this.rq.alA),this.apiService.copiaDisponibilita(this.rq).subscribe(()=>{this.setIsLoading(!1),this.showInfo("globals.operazioneCompletata").then(()=>{this.containerService.scrollToTop()})})}dalDaChange(){u(this.rq.dalDa)>u(this.rq.alDa)&&(this.rq.alDa=this.getDate(this.rq.dalDa)),this.updateAlA()}alDaChange(){u(this.rq.alDa)<u(this.rq.dalDa)&&(this.rq.dalDa=this.getDate(this.rq.alDa)),this.updateAlA()}dalAChange(){u(this.rq.dalA)>u(this.rq.alA)&&(this.rq.alA=this.getDate(this.rq.dalA)),this.updateAlA()}updateAlA(){let o=u(this.rq.alDa).diff(this.rq.dalDa,"days");this.rq.alA=this.getDate(u(this.rq.dalA).add(o,"days"))}ngOnDestroy(){this.headerService.clearTitle()}}function tle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"input",30),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.onDisponibiliTariffaInput(a.target))}),e.ALo(2,"translate"),e.qZA()()}2&i&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.pubblicate")))}function ile(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"input",30),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.onVariazioneDisponibiliTariffaInput(a.target))}),e.ALo(2,"translate"),e.qZA()()}2&i&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.variazioneDisponibili")))}function ole(i,o){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,tle,3,3,"mat-form-field",29),e.YNc(2,ile,3,3,"mat-form-field",29),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.modificaDisponibiliEnabled),e.xp6(1),e.Q6J("ngIf",t.modificaVariazioneDisponibiliEnabled)}}function nle(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"mat-checkbox",26),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.camereInVenditaVisible=a)})("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.modificaCamereInVenditaChange())}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,ole,3,2,"div",27),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.camereInVenditaVisible),e.xp6(1),e.Oqu(e.lcZ(4,3,"sbm.disponibilita.planning.modificaCamereInVendita")),e.xp6(2),e.Q6J("ngIf",t.camereInVenditaVisible)}}function ale(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",28)(1,"mat-form-field",6)(2,"input",30),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.onDurataMinimaSoggiornoTariffaInput(a.target))}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"mat-form-field",6)(5,"input",30),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.onDurataMassimaSoggiornoTariffaInput(a.target))}),e.ALo(6,"translate"),e.qZA()()()}2&i&&(e.xp6(2),e.s9C("placeholder",e.lcZ(3,2,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMinimaSoggiorno")),e.xp6(3),e.s9C("placeholder",e.lcZ(6,4,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMassimaSoggiorno")))}function lle(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"mat-checkbox",26),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.durataMinimaMassimaSoggiornoVisible=a)})("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.modificaDurataMinimaMassimaSoggiornoChange())}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,ale,7,6,"div",27),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.durataMinimaMassimaSoggiornoVisible),e.xp6(1),e.hij(" ",e.lcZ(4,3,"sbm.disponibilita.planning.modificaDurataMinimaMassimaSoggiorno")," "),e.xp6(2),e.Q6J("ngIf",t.durataMinimaMassimaSoggiornoVisible)}}function rle(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function cle(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function sle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",28)(1,"mat-form-field",6)(2,"mat-select",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.disponibilita.statoCta=a)}),e.ALo(3,"translate"),e._UZ(4,"mat-option",32),e.YNc(5,rle,3,4,"mat-option",33),e.ALo(6,"selectEnum"),e.qZA()(),e.TgZ(7,"mat-form-field",6)(8,"mat-select",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.disponibilita.statoCtd=a)}),e.ALo(9,"translate"),e._UZ(10,"mat-option",32),e.YNc(11,cle,3,4,"mat-option",33),e.ALo(12,"selectEnum"),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("ngModel",t.disponibilita.statoCta)("placeholder",e.lcZ(3,8,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoCta")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(6,10,t.enumStatoCtaCtd,"statoCtaCtd")),e.xp6(3),e.Q6J("ngModel",t.disponibilita.statoCtd)("placeholder",e.lcZ(9,13,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoCtd")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(12,15,t.enumStatoCtaCtd,"statoCtaCtd"))}}function ple(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"mat-checkbox",26),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.statoCtaCtdVisible=a)})("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.modificaStatoCtaCtdChange())}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,sle,13,18,"div",27),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.statoCtaCtdVisible),e.xp6(1),e.Oqu(e.lcZ(4,3,"sbm.disponibilita.planning.modificaStatoCtaCtd")),e.xp6(2),e.Q6J("ngIf",t.statoCtaCtdVisible)}}function dle(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function mle(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",6)(2,"input",30),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.onPrezzoTariffaInput(a.target))}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"mat-form-field",6)(5,"input",30),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.onPrezzoUsoSingolaTariffaInput(a.target))}),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"mat-form-field",43)(8,"input",30),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.onVariazionePrezzoTariffaInput(a.target))}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"mat-form-field",44)(11,"mat-select",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.disponibilita.tipoVariazionePrezzo=a)}),e.YNc(12,dle,3,4,"mat-option",33),e.ALo(13,"selectEnum"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(3);e.xp6(2),e.s9C("placeholder",e.lcZ(3,5,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzo")),e.xp6(3),e.s9C("placeholder",e.lcZ(6,7,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzoUsoSingola")),e.xp6(3),e.s9C("placeholder",e.lcZ(9,9,"sbm.disponibilita.planning.aumentaDiminuisciPrezzo")),e.xp6(3),e.Q6J("ngModel",t.disponibilita.tipoVariazionePrezzo),e.xp6(1),e.Q6J("ngForOf",e.xi3(13,11,t.enumTipoValore,"tipoValore"))}}function _le(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",3)(2,"div",34),e.YNc(3,mle,14,14,"ng-container",24),e.TgZ(4,"app-view-select",35),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.disponibilita.oidFascia=a.oid)}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",34)(7,"div",36)(8,"mat-checkbox",37),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.disponibilita.isApplicaPrezzoListino=a)}),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",38)(12,"mat-checkbox",37),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.disponibilita.isSovrascriviPrezziBloccati=a)}),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div",39),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"mat-radio-group",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.disponibilita.isBloccaPrezzo=a)}),e.TgZ(19,"mat-radio-button",41),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"mat-radio-button",41),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"mat-radio-button",42),e._uU(26),e.ALo(27,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.modificaPrezzoEnabled),e.xp6(1),e.Q6J("dataLoader",t.apiService.getFasceViewSelect())("placeholder",e.lcZ(5,15,"bo.disponibilitaXPortaleXAlbergo.proprieta.fascia")),e.xp6(4),e.Q6J("ngModel",t.disponibilita.isApplicaPrezzoListino),e.xp6(1),e.Oqu(e.lcZ(10,17,"sbm.disponibilita.planning.isApplicaPrezzoListino")),e.xp6(3),e.Q6J("ngModel",t.disponibilita.isSovrascriviPrezziBloccati),e.xp6(1),e.Oqu(e.lcZ(14,19,"sbm.disponibilita.planning.isSovrascriviPrezziBloccati")),e.xp6(3),e.Oqu(e.lcZ(17,21,"sbm.disponibilita.planning.isBloccaPrezzo")),e.xp6(2),e.Q6J("ngModel",t.disponibilita.isBloccaPrezzo),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(21,23,"sbm.disponibilita.planning.bloccato")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(24,25,"sbm.disponibilita.planning.nonBloccato")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(27,27,"sbm.disponibilita.planning.invariato"))}}function ule(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function gle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-select",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.disponibilita.stato=a)}),e.ALo(2,"translate"),e._UZ(3,"mat-option",32),e.YNc(4,ule,3,4,"mat-option",33),e.ALo(5,"selectEnum"),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.disponibilita.stato)("placeholder",e.lcZ(2,4,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoPortaleXAlbergo")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(5,6,t.enumStatoPortale,"statoPortaleXAlbergo"))}}function hle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",25)(1,"mat-checkbox",37),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.disponibilita.isSbloccaStatoPortaleCollegatoMaster=a)}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.disponibilita.isSbloccaStatoPortaleCollegatoMaster),e.xp6(1),e.Oqu(e.lcZ(3,2,"sbm.disponibilita.planning.isSbloccaStatoPortaleCollegatoMaster"))}}function fle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",28),e.YNc(1,gle,6,9,"mat-form-field",29),e.TgZ(2,"div",39),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-radio-group",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.disponibilita.isBloccaStato=a)}),e.TgZ(6,"mat-radio-button",41),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-radio-button",41),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"mat-radio-button",42),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.YNc(15,hle,4,4,"div",45),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.modificaStatoPortaleEnabled),e.xp6(2),e.Oqu(e.lcZ(4,10,"sbm.disponibilita.planning.isBloccaStato")),e.xp6(2),e.Q6J("ngModel",t.disponibilita.isBloccaStato),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(8,12,"sbm.disponibilita.planning.bloccato")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(11,14,"sbm.disponibilita.planning.nonBloccato")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(14,16,"sbm.disponibilita.planning.invariato")),e.xp6(2),e.Q6J("ngIf",t.portale.tipoPortale==t.enumTipoPortale.Master)}}function Cle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.YNc(1,nle,6,5,"ng-container",24),e.YNc(2,lle,6,5,"ng-container",24),e.YNc(3,ple,6,5,"ng-container",24),e.TgZ(4,"div",25)(5,"mat-checkbox",26),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.prezzoFasciaVisible=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modificaPrezzoFasciaChange())}),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,_le,28,29,"div",27),e.TgZ(9,"div",25)(10,"mat-checkbox",26),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.statoVisible=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modificaStatoChange())}),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.YNc(13,fle,16,18,"div",27),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.modificaDisponibiliEnabled||t.modificaVariazioneDisponibiliEnabled),e.xp6(1),e.Q6J("ngIf",t.modificaMinMaxStayEnabled),e.xp6(1),e.Q6J("ngIf",t.modificaStatoCtaCtdEnabled),e.xp6(2),e.Q6J("ngModel",t.prezzoFasciaVisible),e.xp6(1),e.Oqu(e.lcZ(7,9,"sbm.disponibilita.planning.modificaPrezzoFascia")),e.xp6(2),e.Q6J("ngIf",t.prezzoFasciaVisible),e.xp6(2),e.Q6J("ngModel",t.statoVisible),e.xp6(1),e.Oqu(e.lcZ(12,11,"sbm.disponibilita.planning.modificaStato")),e.xp6(2),e.Q6J("ngIf",t.statoVisible)}}function ble(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione,"")}}function vle(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione,"")}}function Tle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",28)(1,"mat-checkbox",56),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.isSelected=a)})("change",function(){e.CHM(t);const a=e.oxw(3);return a.selectedTipiCamera=[],e.KtG(a.selectedTariffe=[])}),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngModel",t.isSelected),e.xp6(1),e.Oqu(t.descrizione)}}rl.\u0275fac=function(o){return new(o||rl)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J))},rl.\u0275cmp=e.Xpm({type:rl,selectors:[["app-copia-tariffe"]],features:[e.qOj],decls:97,vars:98,consts:[[1,"p-3"],[1,"edit-container"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["dalDa",""],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","ngModel","ngModelChange","dateChange"],["alDa",""],["dalA",""],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","ngModel","ngModelChange"],["alA",""],["color","primary",1,"mr-3",3,"ngModel","ngModelChange"],["mat-flat-button","","color","blank",1,"mr-2",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"mt-3"],["color","primary",1,"d-inline-block","mt-3","mb-3",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"variazionePrezzoInput"],["autocompleteOff","","type","number","matInput","",3,"placeholder","input"],[1,"variazionePrezzoTipoSelect","text-right"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-2"],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-3","mb-1"],["color","primary",1,"mr-2",3,"value"],["color","primary",3,"value"],["mat-flat-button","","color","primary",3,"disabled","click"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectTipiCamera",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],["selectTariffe",""],[3,"value"],[3,"placeholder","ngModel","ngModelChange"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-view-select",2),e.NdJ("valueChange",function(a){return t.portale=a})("valueChange",function(){return t.onPortaleChange()}),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"input",6),e.NdJ("ngModelChange",function(a){return t.rq.dalDa=a})("dateChange",function(){return t.dalDaChange()}),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"mat-datepicker-toggle",7)(10,"mat-datepicker",null,8),e.qZA()(),e.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"input",9),e.NdJ("ngModelChange",function(a){return t.rq.alDa=a})("dateChange",function(){return t.alDaChange()}),e.qZA(),e._UZ(15,"mat-datepicker-toggle",7)(16,"mat-datepicker",null,10),e.qZA()(),e.TgZ(18,"div",4)(19,"mat-form-field",5)(20,"input",6),e.NdJ("ngModelChange",function(a){return t.rq.dalA=a})("dateChange",function(){return t.dalAChange()}),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"mat-datepicker-toggle",7)(23,"mat-datepicker",null,11),e.qZA()(),e.TgZ(25,"div",4)(26,"mat-form-field",5)(27,"input",12),e.NdJ("ngModelChange",function(a){return t.rq.alA=a}),e.qZA(),e._UZ(28,"mat-datepicker",null,13),e.qZA()()(),e.TgZ(30,"div")(31,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isLun=a}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isMar=a}),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isMer=a}),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isGio=a}),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isVen=a}),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isSab=a}),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){return t.rq.giorni.isDom=a}),e._uU(50),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"div")(53,"button",15),e.NdJ("click",function(){return t.rq.giorni.selezionaTutti()}),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"button",16),e.NdJ("click",function(){return t.rq.giorni.deselezionaTutti()}),e._uU(57),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"div",17)(60,"mat-checkbox",18),e.NdJ("ngModelChange",function(a){return t.rq.isCopiaSingolaTariffa=a}),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.YNc(63,Vae,17,26,"ng-container",19),e.YNc(64,Wae,9,10,"ng-container",19),e.TgZ(65,"mat-form-field",20)(66,"input",21),e.NdJ("input",function(a){return t.onVariazionePrezzoInput(a.target)}),e.ALo(67,"translate"),e.qZA()(),e.TgZ(68,"mat-form-field",22)(69,"mat-select",23),e.NdJ("ngModelChange",function(a){return t.rq.tipoVariazionePrezzo=a}),e.YNc(70,ele,3,4,"mat-option",24),e.ALo(71,"selectEnum"),e.qZA()(),e.TgZ(72,"div",25)(73,"mat-checkbox",26),e.NdJ("ngModelChange",function(a){return t.rq.isApplicaPrezzoListino=a}),e._uU(74),e.ALo(75,"translate"),e.qZA()(),e.TgZ(76,"div",25)(77,"mat-checkbox",26),e.NdJ("ngModelChange",function(a){return t.rq.isCopiaDurataMinimaMassimaSoggiorno=a}),e._uU(78),e.ALo(79,"translate"),e.qZA()(),e.TgZ(80,"div",27),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-radio-group",23),e.NdJ("ngModelChange",function(a){return t.rq.isBloccaPrezzo=a}),e.TgZ(84,"mat-radio-button",28),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"mat-radio-button",28),e._uU(88),e.ALo(89,"translate"),e.qZA(),e.TgZ(90,"mat-radio-button",29),e._uU(91),e.ALo(92,"translate"),e.qZA()()(),e.TgZ(93,"div",17)(94,"button",30),e.NdJ("click",function(){return t.copiaDisponibilita()}),e._uU(95),e.ALo(96,"translate"),e.qZA()()()()),2&o){const n=e.MAs(11),a=e.MAs(17),l=e.MAs(24),r=e.MAs(29);e.xp6(2),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(null,!1))("value",t.portale)("placeholder",e.lcZ(3,53,"globals.portale")),e.xp6(5),e.Q6J("matDatepicker",n)("placeholder",e.lcZ(8,55,"sbm.disponibilita.copia-tariffe.copiaDa"))("ngModel",t.rq.dalDa),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.Q6J("matDatepicker",a)("ngModel",t.rq.alDa),e.xp6(1),e.Q6J("for",a),e.xp6(5),e.Q6J("matDatepicker",l)("placeholder",e.lcZ(21,57,"sbm.disponibilita.copia-tariffe.copiaA"))("ngModel",t.rq.dalA),e.xp6(2),e.Q6J("for",l),e.xp6(5),e.Q6J("matDatepicker",r)("ngModel",t.rq.alA),e.xp6(4),e.Q6J("ngModel",t.rq.giorni.isLun),e.xp6(1),e.hij(" ",e.lcZ(33,59,"globals.dayOfWeeks.lun")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isMar),e.xp6(1),e.hij(" ",e.lcZ(36,61,"globals.dayOfWeeks.mar")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isMer),e.xp6(1),e.hij(" ",e.lcZ(39,63,"globals.dayOfWeeks.mer")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isGio),e.xp6(1),e.hij(" ",e.lcZ(42,65,"globals.dayOfWeeks.gio")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isVen),e.xp6(1),e.hij(" ",e.lcZ(45,67,"globals.dayOfWeeks.ven")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isSab),e.xp6(1),e.hij(" ",e.lcZ(48,69,"globals.dayOfWeeks.sab")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isDom),e.xp6(1),e.hij(" ",e.lcZ(51,71,"globals.dayOfWeeks.dom")," "),e.xp6(4),e.Oqu(e.lcZ(55,73,"globals.selezionaTutti")),e.xp6(3),e.Oqu(e.lcZ(58,75,"globals.deselezionaTutti")),e.xp6(3),e.Q6J("ngModel",t.rq.isCopiaSingolaTariffa),e.xp6(1),e.hij(" ",e.lcZ(62,77,"sbm.disponibilita.copia-tariffe.copiaSingolaTariffa")," "),e.xp6(2),e.Q6J("ngIf",!t.rq.isCopiaSingolaTariffa),e.xp6(1),e.Q6J("ngIf",t.rq.isCopiaSingolaTariffa),e.xp6(2),e.s9C("placeholder",e.lcZ(67,79,"sbm.disponibilita.copia-tariffe.aumentaDiminuisciPrezzo")),e.xp6(3),e.Q6J("ngModel",t.rq.tipoVariazionePrezzo),e.xp6(1),e.Q6J("ngForOf",e.xi3(71,81,t.enumTipoValore,"tipoValore")),e.xp6(3),e.Q6J("ngModel",t.rq.isApplicaPrezzoListino),e.xp6(1),e.Oqu(e.lcZ(75,84,"sbm.disponibilita.copia-tariffe.applicaPrezzoListino")),e.xp6(3),e.Q6J("ngModel",t.rq.isCopiaDurataMinimaMassimaSoggiorno),e.xp6(1),e.Oqu(e.lcZ(79,86,"sbm.disponibilita.copia-tariffe.copiaDurataMinimaMassimaSoggiorno")),e.xp6(3),e.Oqu(e.lcZ(82,88,"sbm.disponibilita.copia-tariffe.isBloccaPrezzo")),e.xp6(2),e.Q6J("ngModel",t.rq.isBloccaPrezzo),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(86,90,"sbm.disponibilita.copia-tariffe.bloccato")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(89,92,"sbm.disponibilita.copia-tariffe.nonBloccato")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(92,94,"sbm.disponibilita.copia-tariffe.invariato")),e.xp6(3),e.Q6J("disabled",!t.rq.giorni.isGiornoSelezionato()||t.rq.isCopiaSingolaTariffa&&(null==t.rq.oidTariffaDa||t.rq.oidTariffaDa<=0||null==t.rq.oidTariffaA||t.rq.oidTariffaA<=0)||!t.rq.isCopiaSingolaTariffa&&(null==t.rq.oidTipiCamera||0==t.rq.oidTipiCamera.length||null==t.rq.oidTariffe||0==t.rq.oidTariffe.length)),e.xp6(1),e.Oqu(e.lcZ(96,96,"globals.salva"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,He.OY,He.vy,g.x8,_.Fj,_.JJ,_.On,ne.d,Te.A,z.X$],styles:[".variazionePrezzoInput[_ngcontent-%COMP%]{width:calc(100% - 50px)}.variazionePrezzoTipoSelect[_ngcontent-%COMP%]{width:50px}"]});const xle=function(i){return{"mt-1":i}};function Zle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",54)(1,"div")(2,"mat-checkbox",51),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw(2);return a.preventDefault(),e.KtG(p.onSelectDeselectAllClickTariffe(r))}),e._uU(3),e.qZA()(),e.YNc(4,Tle,3,2,"div",55),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Q6J("ngClass",e.VKq(5,xle,n>0)),e.xp6(2),e.Q6J("checked",a.isAllSelectedTariffe(t))("indeterminate",!a.isAllSelectedTariffe(t)&&!a.isAllDeselectedTariffe(t)),e.xp6(1),e.Oqu(t.tipoCamera.descrizione),e.xp6(1),e.Q6J("ngForOf",t.tariffe)}}const Jc=function(i){return{"color-pink":i}};function Ale(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"div",2)(2,"mat-form-field",6)(3,"mat-select",47,48),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedTipiCamera=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateSelectedAssociazioniTipiCamereTariffe())}),e.ALo(5,"translate"),e.TgZ(6,"mat-checkbox",49),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(4),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickTipiCamereAssociazioni(l))}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,ble,2,2,"mat-option",33),e.qZA()(),e.TgZ(10,"mat-form-field",6)(11,"mat-select",47,50),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedTariffe=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateSelectedAssociazioniTipiCamereTariffe())}),e.ALo(13,"translate"),e.TgZ(14,"mat-checkbox",49),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(12),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickTariffeAssociazioni(l))}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,vle,2,2,"mat-option",33),e.qZA()(),e.TgZ(18,"mat-checkbox",51),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.onSelectDeselectAllClickTipiCamere())}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",52),e.YNc(22,Zle,5,7,"div",53),e.qZA()()()}if(2&i){const t=e.MAs(4),n=e.MAs(12),a=e.oxw();e.xp6(3),e.Q6J("placeholder",e.lcZ(5,18,"sbm.disponibilita.planning.applicaATipiCamere"))("ngModel",a.selectedTipiCamera),e.xp6(3),e.Q6J("ngClass",e.VKq(28,Jc,a.isAllSelectedTipiCamereAssociazioni(t)))("checked",a.isAllSelectedTipiCamereAssociazioni(t))("indeterminate",!a.isAllSelectedTipiCamereAssociazioni(t)&&!a.isAllDeselected(t)),e.xp6(1),e.hij(" ",e.lcZ(8,20,"globals.selezionaDeselezionaTutti"),""),e.xp6(2),e.Q6J("ngForOf",a.tipiCamere),e.xp6(2),e.Q6J("placeholder",e.lcZ(13,22,"sbm.disponibilita.planning.applicaATariffe"))("ngModel",a.selectedTariffe),e.xp6(3),e.Q6J("ngClass",e.VKq(30,Jc,a.isAllSelectedTariffeAssociazioni(n)))("checked",a.isAllSelectedTariffeAssociazioni(n))("indeterminate",!a.isAllSelectedTariffeAssociazioni(n)&&!a.isAllDeselected(n)),e.xp6(1),e.hij(" ",e.lcZ(16,24,"globals.selezionaDeselezionaTutti"),""),e.xp6(2),e.Q6J("ngForOf",a.tariffe),e.xp6(1),e.Q6J("checked",a.isAllSelectedTipiCamere())("indeterminate",!a.isAllSelectedTipiCamere()&&!a.isAllDeselectedTipiCamere()),e.xp6(1),e.Oqu(e.lcZ(20,26,"globals.selezionaDeselezionaTutti")),e.xp6(3),e.Q6J("ngForOf",a.associazioniTipiCamereTariffe)}}function wle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",64)(1,"mat-form-field",6)(2,"input",30),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.onDisponibiliInput(a.target,l))}),e.ALo(3,"translate"),e.qZA()()()}2&i&&(e.xp6(2),e.s9C("placeholder",e.lcZ(3,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.disponibili")))}function zle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",60)(1,"button",65),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.updateStatoPortale(a.oid,l.enumStatoPortale.Chiuso))}),e.TgZ(2,"i",66),e._uU(3,"power_settings_new"),e.qZA()(),e.TgZ(4,"button",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.updateStatoPortale(a.oid,l.enumStatoPortale.Aperto))}),e.TgZ(5,"i",68),e._uU(6,"play_arrow"),e.qZA()()()}}function Mle(i,o){if(1&i&&(e.TgZ(0,"div",59)(1,"div",60)(2,"span",61),e._uU(3),e.qZA()(),e.YNc(4,wle,4,3,"div",62),e.YNc(5,zle,7,0,"div",63),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.descrizione),e.xp6(1),e.Q6J("ngIf",n.modificaDisponibiliEnabled),e.xp6(1),e.Q6J("ngIf",n.modificaStatoPortaleEnabled)}}function qle(i,o){if(1&i&&(e.TgZ(0,"mat-tab",16),e.ALo(1,"translate"),e.TgZ(2,"div",57),e.YNc(3,Mle,6,3,"div",58),e.qZA()()),2&i){const t=e.oxw();e.Q6J("label",e.lcZ(1,2,"sbm.disponibilita.planning.disponibili")),e.xp6(3),e.Q6J("ngForOf",t.tipiCamere)}}function Ple(i,o){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione,"")}}function kle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",16),e.ALo(1,"translate"),e.TgZ(2,"div",69)(3,"mat-form-field",6)(4,"mat-select",70,71),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedTipiCameraAggiornaDisponibili=a)}),e.ALo(6,"translate"),e.TgZ(7,"mat-checkbox",49),e.NdJ("click",function(a){e.CHM(t);const l=e.MAs(5),r=e.oxw();return a.preventDefault(),e.KtG(r.onSelectDeselectAllClickTipiCamereAggiornaDisponibili(l))}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,Ple,2,2,"mat-option",33),e.qZA()(),e.TgZ(11,"button",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.aggiornaDisponibili())}),e._uU(12),e.ALo(13,"translate"),e.qZA()()()}if(2&i){const t=e.MAs(5),n=e.oxw();e.Q6J("label",e.lcZ(1,10,"sbm.disponibilita.planning.disponibiliHotel")),e.xp6(4),e.Q6J("placeholder",e.lcZ(6,12,"sbm.disponibilita.planning.aggiornaTipiCamere"))("ngModel",n.selectedTipiCameraAggiornaDisponibili),e.xp6(3),e.Q6J("ngClass",e.VKq(18,Jc,n.isAllSelectedTipiCamereAggiornaDisponibili(t)))("checked",n.isAllSelectedTipiCamereAggiornaDisponibili(t))("indeterminate",!n.isAllSelectedTipiCamereAggiornaDisponibili(t)&&!n.isAllDeselected(t)),e.xp6(1),e.hij(" ",e.lcZ(9,14,"globals.selezionaDeselezionaTutti"),""),e.xp6(2),e.Q6J("ngForOf",n.tipiCamere),e.xp6(1),e.Q6J("disabled",!n.days.isGiornoSelezionato()||0==n.selectedTipiCameraAggiornaDisponibili.length),e.xp6(1),e.Oqu(e.lcZ(13,16,"sbm.disponibilita.planning.aggiornaDisponibili"))}}function Sle(i,o){if(1&i&&(e.TgZ(0,"td",78),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function yle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",83)(1,"input",30),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw().index,p=e.oxw(2);return e.KtG(p.onPrezzoInput(a.target,r,l))}),e.ALo(2,"translate"),e.qZA()()}2&i&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzo")))}function Jle(i,o){if(1&i&&(e.TgZ(0,"td",81),e.YNc(1,yle,3,3,"mat-form-field",82),e.qZA()),2&i){const t=o.$implicit,n=e.oxw().$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.checkAssociazioniRisorseTariffe(n.oid,t.oid))}}function Ele(i,o){if(1&i&&(e.TgZ(0,"tr",74)(1,"td",79),e._uU(2),e.qZA(),e.YNc(3,Jle,2,1,"td",80),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(t.descrizione),e.xp6(1),e.Q6J("ngForOf",n.tariffe)}}function Nle(i,o){if(1&i&&(e.TgZ(0,"mat-tab",16),e.ALo(1,"translate"),e.TgZ(2,"div",73)(3,"table")(4,"tr",74),e._UZ(5,"td",75),e.YNc(6,Sle,2,1,"td",76),e.qZA(),e.YNc(7,Ele,4,2,"tr",77),e.qZA()()()),2&i){const t=e.oxw();e.Q6J("label",e.lcZ(1,3,"sbm.disponibilita.planning.tariffe")),e.xp6(6),e.Q6J("ngForOf",t.tariffe),e.xp6(1),e.Q6J("ngForOf",t.tipiCamere)}}function Ole(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",84),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save(!1))}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"globals.salvaChiudi")),e.xp6(3),e.Oqu(e.lcZ(6,4,"globals.salva")))}class kt extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.localizationService=t,this.sessionService=n,this.pubblicazioneService=a,this.selectedTipiCameraAggiornaDisponibili=[],this.selectedTipiCamera=[],this.selectedTariffe=[],this.tipiCamere=[],this.tariffe=[],this.associazioniTipiCamereTariffe=[],this.enumStatoCtaCtd=c.L5,this.enumStatoPortale=c.V6,this.enumTipoPortale=c.Q,this.updated=!1,this.enumTipoValore=c.jy,this.buttonsVisible=!0}ngOnInit(){this.selectedIndex=0,this.camereInVenditaVisible=!1,this.durataMinimaMassimaSoggiornoVisible=!1,this.statoCtaCtdVisible=!1,this.prezzoFasciaVisible=!1,this.statoVisible=!1,this.modificaPrezzoEnabled=!0,this.modificaStatoCtaCtdEnabled=!0,this.modificaStatoPortaleEnabled=!0,this.modificaMinMaxStayEnabled=!0,this.days=new d.RUf;let o=this.sessionService.getPermessiUtente();null!=o&&(this.modificaPrezzoEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaPrezzoPlanning)),this.modificaStatoCtaCtdEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoCtaCtdPlanning)),this.modificaStatoPortaleEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoPortalePlanning)),this.modificaMinMaxStayEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaMinMaxStayPlanning))),this.modificaDisponibiliEnabled=this.sessionService.isModificaDisponibiliEnabled(),this.modificaVariazioneDisponibiliEnabled=this.sessionService.isModificaVariazioneDisponibiliEnabled(),this.init(),this.updatePeriodoDalAl()}init(){this.setIsLoading(!0),null!=this.portale&&(this.modificaDisponibiliEnabled=this.portale.isModificaDisponibiliAttiva),this.rq=new d.hCv,this.apiService.getModificaBlocchiForm(this.portale.oid).subscribe(o=>{this.tipiCamere=o.data.tipiCamera,this.tariffe=o.data.tariffe,this.associazioniTipiCamereTariffe=o.data.associazioniTipiCamereTariffe,this.updateSelectedAssociazioniTipiCamereTariffe();for(let t of this.tipiCamere){let n=new d.dw0;n.tipoCameraOid=t.oid,this.rq.tipiCamera.push(n);for(let a of this.tariffe){let l=new d.LU0;l.tipoCameraOid=t.oid,l.tariffaOid=a.oid,this.rq.tariffe.push(l)}}this.disponibilita=null,setTimeout(()=>{this.disponibilita=new d.LU0(this.portale.tipoPortale)},200),this.setIsLoading(!1)})}save(o=!0){if(this.days.isGiornoSelezionato()){this.rq.oidPortale=this.portale.oid,this.rq.dal=this.getDate(this.dalDate),this.rq.al=this.getDate(this.alDate),this.rq.giorni=this.days;let t=JSON.parse(JSON.stringify(this.rq));if(t.tipiCamera=t.tipiCamera.filter(n=>n.disponibili>=0),this.currentTab==this.localizationService.getTranslationSync("sbm.disponibilita.planning.tariffe"))t.tariffe=t.tariffe.filter(n=>n.prezzo>=0);else if(t.tariffe=[],this.disponibilita.disponibili>=0||null!=this.disponibilita.variazioneDisponibili||this.disponibilita.prezzo>=0||this.disponibilita.prezzoUsoSingola>=0||0!=this.disponibilita.variazionePrezzo||this.disponibilita.durataMinimaSoggiorno>=0||this.disponibilita.durataMassimaSoggiorno>=0||null!=this.disponibilita.statoCta||null!=this.disponibilita.statoCtd||this.disponibilita.oidFascia>0||this.disponibilita.isApplicaPrezzoListino||this.disponibilita.isSovrascriviPrezziBloccati||null!=this.disponibilita.stato||null!=this.disponibilita.isBloccaPrezzo||null!=this.disponibilita.isBloccaStato||this.disponibilita.isSbloccaStatoPortaleCollegatoMaster)for(let n of this.associazioniTipiCamereTariffe)for(let a of n.tariffe.filter(l=>l.isSelected)){let l=JSON.parse(JSON.stringify(this.disponibilita));l.tipoCameraOid=n.tipoCamera.oid,l.tariffaOid=a.oid,t.tariffe.push(l)}t.tipiCamera.length>0||t.tariffe.length>0?(this.setIsLoading(!0),this.apiService.updateAllDisponibilita(t).subscribe(()=>{o?(this.dialogRef.close(!0),this.pubblicazioneService.pubblicaPortale(this.portale)):(this.updated=!0,this.setIsLoading(!1),this.showInfo("globals.operazioneCompletata"))})):this.showError("globals.messages.inserireDati")}else this.showError("sbm.disponibilita.planning.selezionareAlmenoUnGiorno")}aggiornaDisponibili(){this.setIsLoading(!0);let o=new d.cEv;o.oidPortale=this.portale.oid,o.dal=this.getDate(this.dalDate),o.al=this.getDate(this.alDate),o.giorni=this.days,o.oidTipiCamera=this.selectedTipiCameraAggiornaDisponibili,this.apiService.updateFromDisponibiliHotel(o).subscribe(t=>{(null==t.errori||0==t.errori.length)&&(this.updated=!0,this.setIsLoading(!1),this.showInfo("globals.operazioneCompletata"))})}updatePeriodoDalAl(){this.periodoDalAl=this.localizationService.getTranslationSync("sbm.disponibilita.planning.periodoDalAl",{dal:u(this.dalDate).format("DD/MM/YYYY"),al:u(this.alDate).format("DD/MM/YYYY")})}onDisponibiliInput(o,t){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),""==o.value?this.rq.tipiCamera[t].disponibili=-1:this.rq.tipiCamera[t].disponibili=+o.value}onPrezzoInput(o,t,n){+o.value<0&&(o.value="0"),""==o.value?(this.rq.tariffe[n+t*this.tariffe.length].prezzo=-1,this.rq.tariffe[n+t*this.tariffe.length].isBloccaPrezzo=!1):(this.rq.tariffe[n+t*this.tariffe.length].prezzo=+o.value,this.rq.tariffe[n+t*this.tariffe.length].isBloccaPrezzo=!0)}onDisponibiliTariffaInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),""==o.value?this.disponibilita.disponibili=-1:this.disponibilita.disponibili=+o.value}onVariazioneDisponibiliTariffaInput(o){+o.value<-100?o.value="-100":+o.value>100&&(o.value="100"),""==o.value?this.disponibilita.variazioneDisponibili=null:this.disponibilita.variazioneDisponibili=+o.value}onDurataMinimaSoggiornoTariffaInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),""==o.value?this.disponibilita.durataMinimaSoggiorno=-1:this.disponibilita.durataMinimaSoggiorno=+o.value}onDurataMassimaSoggiornoTariffaInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),""==o.value?this.disponibilita.durataMassimaSoggiorno=-1:this.disponibilita.durataMassimaSoggiorno=+o.value}onPrezzoTariffaInput(o){+o.value<0&&(o.value="0"),""==o.value?this.disponibilita.prezzo=-1:this.disponibilita.prezzo=+o.value}onPrezzoUsoSingolaTariffaInput(o){+o.value<0&&(o.value="0"),""==o.value?this.disponibilita.prezzoUsoSingola=-1:this.disponibilita.prezzoUsoSingola=+o.value}onVariazionePrezzoTariffaInput(o){""==o.value?this.disponibilita.variazionePrezzo=0:this.disponibilita.variazionePrezzo=+o.value}updateStatoPortale(o,t){this.days.isGiornoSelezionato()?this.showDialogConfirm("globals.effettuareOperazione").then(n=>{this.setIsLoading(!0);let a=new d.hCv;a.oidPortale=this.portale.oid,a.dal=this.getDate(this.dalDate),a.al=this.getDate(this.alDate),a.giorni=this.days;let l=new d.dw0;l.tipoCameraOid=o,l.stato=t,a.tipiCamera=[l],this.apiService.updateAllDisponibilita(a).subscribe(()=>{this.setIsLoading(!1),this.showInfo("globals.operazioneCompletata"),this.updated=!0})},n=>{}):this.showError("sbm.disponibilita.planning.selezionareAlmenoUnGiorno")}onSelectDeselectAllClickTipiCamereAggiornaDisponibili(o){this.isAllSelectedTipiCamereAggiornaDisponibili(o)?this.selectedTipiCameraAggiornaDisponibili=[]:this.selectedTipiCameraAggiornaDisponibili=this.tipiCamere.map(t=>t.oid)}isAllSelectedTipiCamereAggiornaDisponibili(o){return o.selected.length==this.tipiCamere.length}onSelectDeselectAllClickTipiCamere(){this.isAllSelectedTipiCamere()?this.associazioniTipiCamereTariffe.forEach(o=>o.tariffe.forEach(t=>t.isSelected=!1)):this.associazioniTipiCamereTariffe.forEach(o=>o.tariffe.forEach(t=>t.isSelected=!0)),this.selectedTipiCamera=[],this.selectedTariffe=[]}isAllSelectedTipiCamere(){return this.associazioniTipiCamereTariffe.every(o=>o.tariffe.every(t=>t.isSelected))}isAllDeselectedTipiCamere(){return this.associazioniTipiCamereTariffe.every(o=>o.tariffe.every(t=>!t.isSelected))}onSelectDeselectAllClickTariffe(o){this.isAllSelectedTariffe(o)?o.tariffe.forEach(t=>t.isSelected=!1):o.tariffe.forEach(t=>t.isSelected=!0),this.selectedTipiCamera=[],this.selectedTariffe=[]}isAllSelectedTariffe(o){return o.tariffe.every(t=>t.isSelected)}isAllDeselectedTariffe(o){return o.tariffe.every(t=>!t.isSelected)}isAllDeselected(o){return 0==o.selected.length}onTabChange(o){this.currentTab=o,o==this.localizationService.getTranslationSync("sbm.disponibilita.planning.disponibiliHotel")?this.buttonsVisible=!1:this.buttonsVisible=!0}checkAssociazioniRisorseTariffe(o,t){let n=this.associazioniTipiCamereTariffe.find(a=>a.tipoCamera.oid==o);return null!=n&&null!=n.tariffe.find(a=>a.oid==t)}onSelectDeselectAllClickTipiCamereAssociazioni(o){this.isAllSelectedTipiCamereAssociazioni(o)?this.selectedTipiCamera=[]:this.selectedTipiCamera=this.tipiCamere.map(t=>t.oid),this.updateSelectedAssociazioniTipiCamereTariffe()}isAllSelectedTipiCamereAssociazioni(o){return o.selected.length==this.tipiCamere.length}onSelectDeselectAllClickTariffeAssociazioni(o){this.isAllSelectedTariffeAssociazioni(o)?this.selectedTariffe=[]:this.selectedTariffe=this.tariffe.map(t=>t.oid),this.updateSelectedAssociazioniTipiCamereTariffe()}isAllSelectedTariffeAssociazioni(o){return o.selected.length==this.tariffe.length}updateSelectedAssociazioniTipiCamereTariffe(){for(let o of this.associazioniTipiCamereTariffe)for(let t of o.tariffe)!(this.selectedTipiCamera.length>0||this.selectedTariffe.length>0)||0!=this.selectedTipiCamera.length&&!this.selectedTipiCamera.includes(o.tipoCamera.oid)||0!=this.selectedTariffe.length&&!this.selectedTariffe.includes(t.oid)?t.isSelected=!1:t.isSelected=!0}dalChange(){u(this.dalDate)>u(this.alDate)&&(this.alDate=this.dalDate),this.updatePeriodoDalAl()}alChange(){u(this.alDate)<u(this.dalDate)&&(this.dalDate=this.alDate),this.updatePeriodoDalAl()}modificaCamereInVenditaChange(){this.disponibilita.disponibili=-1,this.disponibilita.variazioneDisponibili=null}modificaDurataMinimaMassimaSoggiornoChange(){this.disponibilita.durataMinimaSoggiorno=-1,this.disponibilita.durataMassimaSoggiorno=-1}modificaStatoCtaCtdChange(){this.disponibilita.statoCta=null,this.disponibilita.statoCtd=null}modificaPrezzoFasciaChange(){this.disponibilita.prezzo=-1,this.disponibilita.prezzoUsoSingola=-1,this.disponibilita.variazionePrezzo=0,this.disponibilita.tipoVariazionePrezzo=c.jy.Euro,this.disponibilita.oidFascia=-1,this.disponibilita.isApplicaPrezzoListino=!1,this.disponibilita.isSovrascriviPrezziBloccati=!1,this.disponibilita.isBloccaPrezzo=null}modificaStatoChange(){this.disponibilita.stato=null,this.disponibilita.isBloccaStato=null}}function Lle(i,o){if(1&i&&(e.TgZ(0,"mat-option",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Dle(i,o){if(1&i&&(e.TgZ(0,"mat-option",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Ile(i,o){if(1&i&&(e.TgZ(0,"mat-option",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Qle(i,o){if(1&i&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.dispo.note)}}function Ule(i,o){if(1&i&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function Yle(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",24),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Ule,2,1,"div",25),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.disponibilita.elenco-disponibilita.variazioniXTipoPasto")),e.xp6(2),e.Q6J("ngForOf",t.info.variazioniXTipoPasto)}}function Rle(i,o){if(1&i&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function Fle(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",24),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Rle,2,1,"div",25),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.disponibilita.elenco-disponibilita.variazioniXTrattamento")),e.xp6(2),e.Q6J("ngForOf",t.info.variazioniXTrattamento)}}function Hle(i,o){if(1&i&&(e.TgZ(0,"div",20)(1,"div",1)(2,"div",4)(3,"div",21),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",22),e._uU(7),e.qZA(),e.YNc(8,Yle,5,4,"ng-container",23),e.qZA(),e.TgZ(9,"div",4)(10,"div",21),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",22),e._uU(14),e.qZA(),e.YNc(15,Fle,5,4,"ng-container",23),e.qZA()()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,6,"sbm.disponibilita.elenco-disponibilita.trattamento")),e.xp6(3),e.Oqu(t.info.trattamento?t.info.trattamento:"---"),e.xp6(1),e.Q6J("ngIf",null!=t.info.variazioniXTipoPasto&&t.info.variazioniXTipoPasto.length>0),e.xp6(3),e.Oqu(e.lcZ(12,8,"sbm.disponibilita.elenco-disponibilita.listino")),e.xp6(3),e.Oqu(t.info.listino?t.info.listino:"---"),e.xp6(1),e.Q6J("ngIf",null!=t.info.variazioniXTrattamento&&t.info.variazioniXTrattamento.length>0)}}function Kle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete.emit(a.dispo))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}kt.\u0275fac=function(o){return new(o||kt)(e.Y36(A.s),e.Y36(Oe.o),e.Y36(j.m),e.Y36(dt))},kt.\u0275cmp=e.Xpm({type:kt,selectors:[["app-aggiorna-disponibilita"]],inputs:{dalDate:"dalDate",alDate:"alDate",portale:"portale",selectedTipiCameraAggiornaDisponibili:"selectedTipiCameraAggiornaDisponibili",selectedTipiCamera:"selectedTipiCamera",selectedTariffe:"selectedTariffe",dialogRef:"dialogRef"},features:[e.qOj],decls:67,vars:63,consts:[["mat-icon-button","",1,"modal-close-button",3,"disableRipple","click"],[1,"material-icons-round"],[1,"white-container-padding"],[1,"row"],[1,"col-4","col-lg-3"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["dal",""],["al",""],["color","primary",1,"mr-3",3,"ngModel","ngModelChange"],["mat-flat-button","","color","blank",1,"mr-2",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"white-container-padding","mt-3"],[1,"aggiornaDisponibilitaTabGroup","dialog-tab-group","w-100","h-100",3,"selectedIndex","selectedIndexChange","selectedTabChange"],[3,"label"],[1,"p-3","overflow-auto","h-100","w-100","background-color-light-grey"],[1,"col-12","col-lg-6"],["class","white-container-padding",4,"ngIf"],["class","col-12 col-lg-6 mt-3 mt-lg-0",4,"ngIf"],[3,"label",4,"ngIf"],[1,"mt-3","text-right","white-container-padding"],[1,"font-weight-bold","d-block","d-lg-inline-block","mb-2","mb-lg-0"],[4,"ngIf"],[1,"mt-3"],["color","primary",3,"ngModel","ngModelChange","change"],["class","pl-3",4,"ngIf"],[1,"pl-3"],["class","w-100",4,"ngIf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","input"],[3,"ngModel","placeholder","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"mt-4"],["color","primary",3,"ngModel","ngModelChange"],[1,"ml-4"],[1,"mb-3","mt-3"],[3,"ngModel","ngModelChange"],["color","primary",1,"mr-2",3,"value"],["color","primary",3,"value"],[1,"variazionePrezzoInput"],[1,"variazionePrezzoTipoSelect","text-right"],["class","mt-3",4,"ngIf"],[1,"col-12","col-lg-6","mt-3","mt-lg-0"],["multiple","",3,"placeholder","ngModel","ngModelChange","selectionChange"],["selectTipiCamera",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],["selectTariffe",""],["color","primary",1,"font-weight-bold","color-pink",3,"checked","indeterminate","click"],[1,"tipicamere-tariffe-container","p-3","background-color-light-grey","border","rounded"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","pl-3",4,"ngFor","ngForOf"],["color","primary",1,"tariffa-check",3,"ngModel","ngModelChange","change"],[1,"p-0","overflow-y","fixed-height-tab-group-body","pt-2"],["class","row fixed-height-row",4,"ngFor","ngForOf"],[1,"row","fixed-height-row"],[1,"col-3","fixed-height-col"],[1,"label","font-weight-bold"],["class","col-5 fixed-height-col",4,"ngIf"],["class","col-3 fixed-height-col",4,"ngIf"],[1,"col-5","fixed-height-col"],["mat-mini-fab","",1,"closeButtonAggiornaDisponibilita","mr-3","mt-3",3,"click"],[1,"material-icons","closeIconAggiornaDisponibilita"],["mat-mini-fab","",1,"openButtonAggiornaDisponibilita","mt-3",3,"click"],[1,"material-icons","openIconAggiornaDisponibilita"],[1,"p-3"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectTipiCameraAggiornaDisponibili",""],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"p-0","overflow-auto","fixed-height-tab-group-body"],[1,"fixed-height-row"],[1,"sticky-top-left"],["class","sticky-row text-center font-weight-bold",4,"ngFor","ngForOf"],["class","fixed-height-row",4,"ngFor","ngForOf"],[1,"sticky-row","text-center","font-weight-bold"],[1,"sticky-column","td-tipocamera","font-weight-bold"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],["class","fixed-width text-center",4,"ngIf"],[1,"fixed-width","text-center"],["mat-flat-button","","color","primary",1,"ml-4","mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return t.dialogRef.close(t.updated),t.updated?t.pubblicazioneService.pubblicaPortale(t.portale):null}),e.TgZ(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"app-view-select",5),e.NdJ("valueChange",function(a){return t.portale=a})("valueChange",function(){return t.init()}),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",4)(9,"mat-form-field",6)(10,"input",7),e.NdJ("ngModelChange",function(a){return t.dalDate=a})("dateChange",function(){return t.dalChange()}),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"mat-datepicker-toggle",8)(13,"mat-datepicker",null,9),e.qZA()(),e.TgZ(15,"div",4)(16,"mat-form-field",6)(17,"input",7),e.NdJ("ngModelChange",function(a){return t.alDate=a})("dateChange",function(){return t.alChange()}),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"mat-datepicker-toggle",8)(20,"mat-datepicker",null,10),e.qZA()()(),e.TgZ(22,"div")(23,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.days.isLun=a}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.days.isMar=a}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.days.isMer=a}),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.days.isGio=a}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.days.isVen=a}),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.days.isSab=a}),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.days.isDom=a}),e._uU(42),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"div")(45,"button",12),e.NdJ("click",function(){return t.days.selezionaTutti()}),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.TgZ(48,"button",13),e.NdJ("click",function(){return t.days.deselezionaTutti()}),e._uU(49),e.ALo(50,"translate"),e.qZA()()(),e.TgZ(51,"div",14)(52,"mat-tab-group",15),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a})("selectedTabChange",function(a){return t.onTabChange(a.tab.textLabel)}),e.TgZ(53,"mat-tab",16),e.ALo(54,"translate"),e.TgZ(55,"div",17)(56,"div",3)(57,"div",18),e.YNc(58,Cle,14,13,"div",19),e.qZA(),e.YNc(59,Ale,23,32,"div",20),e.qZA()()(),e.YNc(60,qle,4,4,"mat-tab",21),e.YNc(61,kle,14,20,"mat-tab",21),e.YNc(62,Nle,8,5,"mat-tab",21),e.qZA()(),e.TgZ(63,"div",22)(64,"span",23),e._uU(65),e.qZA(),e.YNc(66,Ole,7,6,"ng-container",24),e.qZA()),2&o){const n=e.MAs(14),a=e.MAs(21);e.Q6J("disableRipple",!0),e.xp6(6),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(null,!1))("value",t.portale)("placeholder",e.lcZ(7,37,"sbm.disponibilita.planning.portale")),e.xp6(4),e.s9C("placeholder",e.lcZ(11,39,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.dalDate),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(18,41,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.alDate),e.xp6(2),e.Q6J("for",a),e.xp6(4),e.Q6J("ngModel",t.days.isLun),e.xp6(1),e.hij(" ",e.lcZ(25,43,"globals.dayOfWeeks.lun")," "),e.xp6(2),e.Q6J("ngModel",t.days.isMar),e.xp6(1),e.hij(" ",e.lcZ(28,45,"globals.dayOfWeeks.mar")," "),e.xp6(2),e.Q6J("ngModel",t.days.isMer),e.xp6(1),e.hij(" ",e.lcZ(31,47,"globals.dayOfWeeks.mer")," "),e.xp6(2),e.Q6J("ngModel",t.days.isGio),e.xp6(1),e.hij(" ",e.lcZ(34,49,"globals.dayOfWeeks.gio")," "),e.xp6(2),e.Q6J("ngModel",t.days.isVen),e.xp6(1),e.hij(" ",e.lcZ(37,51,"globals.dayOfWeeks.ven")," "),e.xp6(2),e.Q6J("ngModel",t.days.isSab),e.xp6(1),e.hij(" ",e.lcZ(40,53,"globals.dayOfWeeks.sab")," "),e.xp6(2),e.Q6J("ngModel",t.days.isDom),e.xp6(1),e.hij(" ",e.lcZ(43,55,"globals.dayOfWeeks.dom")," "),e.xp6(4),e.Oqu(e.lcZ(47,57,"globals.selezionaTutti")),e.xp6(3),e.Oqu(e.lcZ(50,59,"globals.deselezionaTutti")),e.xp6(3),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("label",e.lcZ(54,61,"sbm.disponibilita.planning.modificaPrezziEDisponibilita")),e.xp6(5),e.Q6J("ngIf",null!=t.disponibilita),e.xp6(1),e.Q6J("ngIf",t.associazioniTipiCamereTariffe.length>0),e.xp6(1),e.Q6J("ngIf",t.modificaDisponibiliEnabled||t.modificaStatoPortaleEnabled),e.xp6(1),e.Q6J("ngIf",!!t.sessionService.getUrlApiWelcome()),e.xp6(1),e.Q6J("ngIf",t.modificaPrezzoEnabled),e.xp6(3),e.Oqu(t.periodoDalAl),e.xp6(1),e.Q6J("ngIf",t.buttonsVisible)}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,He.OY,He.vy,g.x8,ee.SK,ee.R7,_.Fj,_.JJ,_.On,ne.d,Te.A,z.X$],styles:[".label[_ngcontent-%COMP%]{display:block!important;margin-top:20px!important}.fixed-height-row[_ngcontent-%COMP%], .fixed-height-col[_ngcontent-%COMP%]{height:50px}  .aggiornaDisponibilitaTabGroup .mat-tab-body-content{overflow:hidden!important}  .fixed-width{width:100px!important}  .fixed-width-small{width:50px!important}.sticky-column[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;background-color:#fff;z-index:1000}.sticky-row[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;background-color:#fff;z-index:1000}.sticky-top-left[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;left:0;background-color:#fff;z-index:2000}td[_ngcontent-%COMP%]{padding:5px}.td-tipocamera[_ngcontent-%COMP%]{padding-right:20px}.fixed-height-tab-group-body[_ngcontent-%COMP%]{height:400px;width:100%}.overflow-y[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}.openButtonAggiornaDisponibilita[_ngcontent-%COMP%]{color:#fff;background-color:#61b95f;width:28px;height:28px;line-height:28px;box-shadow:none;margin-bottom:1px}  .openButtonAggiornaDisponibilita .mat-button-wrapper{padding:0!important}.closeButtonAggiornaDisponibilita[_ngcontent-%COMP%]{color:#fff;background-color:#d55152;width:28px;height:28px;line-height:28px;box-shadow:none;margin-bottom:1px}  .closeButtonAggiornaDisponibilita .mat-button-wrapper{padding:0!important}.openIconAggiornaDisponibilita[_ngcontent-%COMP%], .closeIconAggiornaDisponibilita[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.variazionePrezzoInput[_ngcontent-%COMP%]{width:calc(100% - 50px)}.variazionePrezzoTipoSelect[_ngcontent-%COMP%]{width:50px}.tipicamere-tariffe-container[_ngcontent-%COMP%]{max-height:250px;overflow:auto;font-size:smaller}.tariffa-check[_ngcontent-%COMP%]{height:18px}@media (max-width: 991px){.modal-close-button[_ngcontent-%COMP%]{position:fixed!important}}"]});const Gle=function(i,o){return{"col-8":i,"col-12":o}};class Ji extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.back=new e.vpe,this.delete=new e.vpe,this.enumStatoCtaCtd=c.L5,this.enumStatoPortale=c.V6,this.modificaPrezzoEnabled=!0,this.modificaStatoCtaCtdEnabled=!0,this.modificaStatoPortaleEnabled=!0,this.modificaMinMaxStayEnabled=!0}ngOnInit(){this.setIsLoading(!0);let o=this.sessionService.getPermessiUtente();null!=o&&(this.modificaPrezzoEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaPrezzoPlanning)),this.modificaStatoCtaCtdEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoCtaCtdPlanning)),this.modificaStatoPortaleEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoPortalePlanning)),this.modificaMinMaxStayEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaMinMaxStayPlanning))),this.apiService.getInfoDisponibilita(this.dispo.oid).subscribe(t=>{this.info=t.data,this.setIsLoading(!1)})}save(){this.setIsLoading(!0);let o=new d.fCT;o.disponibilita=this.dispo,this.apiService.updateDisponibilita(o).subscribe(t=>{this.setIsLoading(!1),null!=t.data&&t.data.length>0?this.back.emit(t.data[0]):this.back.emit(null)})}onDurataMinimaSoggiornoInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100")}onDurataMinimaSoggiornoBlur(o,t){""==o.value?o.value=t<=0?"":t.toString():this.dispo.durataMinimaSoggiorno=+o.value,+o.value<=0&&(o.value="")}onDurataMassimaSoggiornoInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100")}onDurataMassimaSoggiornoBlur(o,t){""==o.value?o.value=t<=0?"":t.toString():this.dispo.durataMassimaSoggiorno=+o.value,+o.value<=0&&(o.value="")}onPrezzoInput(o){+o.value<0&&(o.value="0")}onPrezzoBlur(o,t){""==o.value?o.value=t<=0?"":t.toString():this.dispo.prezzo=+o.value,+o.value<=0&&(o.value="")}onPrezzoUsoSingolaInput(o){+o.value<0&&(o.value="0")}onPrezzoUsoSingolaBlur(o,t){""==o.value?o.value=t<=0?"":t.toString():this.dispo.prezzoUsoSingola=+o.value,+o.value<=0&&(o.value="")}}Ji.\u0275fac=function(o){return new(o||Ji)(e.Y36(A.s),e.Y36(j.m))},Ji.\u0275cmp=e.Xpm({type:Ji,selectors:[["app-disponibilita-edit"]],inputs:{eliminaDisponibilitaEnabled:"eliminaDisponibilitaEnabled",dispo:"dispo",modal:"modal"},outputs:{back:"back",delete:"delete"},features:[e.qOj],decls:71,vars:83,consts:[[1,"mb-4"],[1,"row"],[3,"ngClass"],[1,"mb-3"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","value","disabled","input","blur"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[1,"mt-3","mb-3"],[3,"ngModel","placeholder","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","font-small font-italic",4,"ngIf"],["class","col-4",4,"ngIf"],[1,"text-right","mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],[1,"font-small","font-italic"],[1,"col-4"],[1,"font-weight-bold"],[1,"text-small"],[4,"ngIf"],[1,"font-weight-bold","mt-3"],["class","text-small",4,"ngFor","ngForOf"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"h4",0),e._uU(1),e.ALo(2,"date"),e.qZA(),e.TgZ(3,"div",1)(4,"div",2)(5,"h5",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",1)(9,"div",4)(10,"mat-form-field",5)(11,"input",6),e.NdJ("input",function(a){return t.onPrezzoInput(a.target)})("blur",function(a){return t.onPrezzoBlur(a.target,t.dispo.prezzo)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",4)(14,"app-view-select",7),e.NdJ("valueChange",function(a){return t.dispo.fasciaAttiva=a}),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"div",1)(17,"div",4)(18,"mat-form-field",5)(19,"input",6),e.NdJ("input",function(a){return t.onPrezzoUsoSingolaInput(a.target)})("blur",function(a){return t.onPrezzoUsoSingolaBlur(a.target,t.dispo.prezzoUsoSingola)}),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"div",4)(22,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.dispo.isPrezzoBloccato=a}),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"h5",9),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",1)(29,"div",4)(30,"mat-form-field",5)(31,"input",6),e.NdJ("input",function(a){return t.onDurataMinimaSoggiornoInput(a.target)})("blur",function(a){return t.onDurataMinimaSoggiornoBlur(a.target,t.dispo.durataMinimaSoggiorno)}),e.ALo(32,"translate"),e.qZA()()(),e.TgZ(33,"div",4)(34,"mat-form-field",5)(35,"input",6),e.NdJ("input",function(a){return t.onDurataMassimaSoggiornoInput(a.target)})("blur",function(a){return t.onDurataMassimaSoggiornoBlur(a.target,t.dispo.durataMassimaSoggiorno)}),e.ALo(36,"translate"),e.qZA()()()(),e.TgZ(37,"div",1)(38,"div",4)(39,"mat-form-field",5)(40,"mat-select",10),e.NdJ("ngModelChange",function(a){return t.dispo.statoCta=a}),e.ALo(41,"translate"),e.YNc(42,Lle,3,4,"mat-option",11),e.ALo(43,"selectEnum"),e.qZA()()(),e.TgZ(44,"div",4)(45,"mat-form-field",5)(46,"mat-select",10),e.NdJ("ngModelChange",function(a){return t.dispo.statoCtd=a}),e.ALo(47,"translate"),e.YNc(48,Dle,3,4,"mat-option",11),e.ALo(49,"selectEnum"),e.qZA()()()(),e.TgZ(50,"div",1)(51,"div",4)(52,"mat-form-field",5)(53,"mat-select",10),e.NdJ("ngModelChange",function(a){return t.dispo.statoPortaleXAlbergo=a}),e.ALo(54,"translate"),e.YNc(55,Ile,3,4,"mat-option",11),e.ALo(56,"selectEnum"),e.qZA()()(),e.TgZ(57,"div",4)(58,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.dispo.isStatoPortaleXAlbergoBloccato=a}),e._uU(59),e.ALo(60,"translate"),e.qZA()()(),e.YNc(61,Qle,2,1,"div",12),e.qZA(),e.YNc(62,Hle,16,10,"div",13),e.qZA(),e.TgZ(63,"div",14)(64,"button",15),e.NdJ("click",function(){return t.save()}),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.YNc(67,Kle,3,3,"button",16),e.TgZ(68,"button",17),e.NdJ("click",function(){return t.back.emit()}),e._uU(69),e.ALo(70,"translate"),e.qZA()()),2&o&&(e.xp6(1),e.Oqu((null!=t.dispo.portaleXAlbergo&&t.dispo.portaleXAlbergo.nome?(null==t.dispo.portaleXAlbergo?null:t.dispo.portaleXAlbergo.nome)+" - ":"")+(null==t.dispo.tipoCameraOTA?null:t.dispo.tipoCameraOTA.descrizione)+" - "+(null==t.dispo.tariffaOTA?null:t.dispo.tariffaOTA.descrizione)+" - "+e.xi3(2,40,t.dispo.giorno,"dd/MM/yyyy")),e.xp6(3),e.Q6J("ngClass",e.WLB(80,Gle,null!=t.info,null==t.info)),e.xp6(2),e.Oqu(e.lcZ(7,43,"sbm.disponibilita.elenco-disponibilita.prezzi")),e.xp6(5),e.s9C("placeholder",e.lcZ(12,45,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzo")),e.Q6J("value",t.dispo.prezzo<=0?"":t.dispo.prezzo)("disabled",!t.modificaPrezzoEnabled),e.xp6(3),e.Q6J("dataLoader",t.apiService.getFasceViewSelect())("value",t.dispo.fasciaAttiva)("placeholder",e.lcZ(15,47,"bo.disponibilitaXPortaleXAlbergo.proprieta.fascia")),e.xp6(5),e.s9C("placeholder",e.lcZ(20,49,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzoUsoSingola")),e.Q6J("value",t.dispo.prezzoUsoSingola<=0?"":t.dispo.prezzoUsoSingola)("disabled",!t.modificaPrezzoEnabled),e.xp6(3),e.Q6J("ngModel",t.dispo.isPrezzoBloccato),e.xp6(1),e.hij(" ",e.lcZ(24,51,"bo.disponibilitaXPortaleXAlbergo.proprieta.isPrezzoBloccato")," "),e.xp6(3),e.Oqu(e.lcZ(27,53,"sbm.disponibilita.elenco-disponibilita.restrizioni")),e.xp6(5),e.s9C("placeholder",e.lcZ(32,55,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMinimaSoggiorno")),e.Q6J("value",t.dispo.durataMinimaSoggiorno<=0?"":t.dispo.durataMinimaSoggiorno)("disabled",!t.modificaMinMaxStayEnabled),e.xp6(4),e.s9C("placeholder",e.lcZ(36,57,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMassimaSoggiorno")),e.Q6J("value",t.dispo.durataMassimaSoggiorno<=0?"":t.dispo.durataMassimaSoggiorno)("disabled",!t.modificaMinMaxStayEnabled),e.xp6(5),e.s9C("placeholder",e.lcZ(41,59,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoCta")),e.Q6J("ngModel",t.dispo.statoCta)("disabled",!t.modificaStatoCtaCtdEnabled),e.xp6(2),e.Q6J("ngForOf",e.xi3(43,61,t.enumStatoCtaCtd,"statoCtaCtd")),e.xp6(4),e.s9C("placeholder",e.lcZ(47,64,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoCtd")),e.Q6J("ngModel",t.dispo.statoCtd)("disabled",!t.modificaStatoCtaCtdEnabled),e.xp6(2),e.Q6J("ngForOf",e.xi3(49,66,t.enumStatoCtaCtd,"statoCtaCtd")),e.xp6(5),e.s9C("placeholder",e.lcZ(54,69,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoPortaleXAlbergo")),e.Q6J("ngModel",t.dispo.statoPortaleXAlbergo)("disabled",!t.modificaStatoPortaleEnabled),e.xp6(2),e.Q6J("ngForOf",e.xi3(56,71,t.enumStatoPortale,"statoPortaleXAlbergo")),e.xp6(3),e.Q6J("ngModel",t.dispo.isStatoPortaleXAlbergoBloccato),e.xp6(1),e.hij(" ",e.lcZ(60,74,"bo.disponibilitaXPortaleXAlbergo.proprieta.isStatoPortaleXAlbergoBloccato")," "),e.xp6(2),e.Q6J("ngIf",!!t.dispo.note),e.xp6(1),e.Q6J("ngIf",null!=t.info),e.xp6(3),e.Oqu(e.lcZ(66,76,"globals.salva")),e.xp6(2),e.Q6J("ngIf",!t.modal&&t.eliminaDisponibilitaEnabled),e.xp6(2),e.Oqu(e.lcZ(70,78,"globals.annulla")))},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,_.JJ,_.On,ne.d,m.uU,Te.A,z.X$],styles:[".text-small[_ngcontent-%COMP%]{font-size:15px}"]});class Ei{constructor(){}}function $le(i,o){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.nome)}}function Ble(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",4)(1,"input",27),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.onDisponibiliInput(a.target))}),e.ALo(2,"translate"),e.qZA()()}2&i&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.pubblicate")))}function Vle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",4)(1,"input",27),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.onVariazioneDisponibiliInput(a.target))}),e.ALo(2,"translate"),e.qZA()()}2&i&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.variazioneDisponibili")))}function Xle(i,o){if(1&i&&(e.TgZ(0,"div",25),e.YNc(1,Ble,3,3,"mat-form-field",26),e.YNc(2,Vle,3,3,"mat-form-field",26),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.modificaDisponibiliEnabled),e.xp6(1),e.Q6J("ngIf",t.modificaVariazioneDisponibiliEnabled)}}function jle(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",18)(2,"mat-checkbox",19),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.camereInVenditaVisible=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,Xle,3,2,"div",20),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.camereInVenditaVisible),e.xp6(1),e.Oqu(e.lcZ(4,3,"sbm.disponibilita.planning.modificaCamereInVendita")),e.xp6(2),e.Q6J("ngIf",t.camereInVenditaVisible)}}function Wle(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",25)(1,"mat-form-field",4)(2,"input",27),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onDurataMinimaSoggiornoInput(a.target))}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"mat-form-field",4)(5,"input",27),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onDurataMassimaSoggiornoInput(a.target))}),e.ALo(6,"translate"),e.qZA()()()}2&i&&(e.xp6(2),e.s9C("placeholder",e.lcZ(3,2,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMinimaSoggiorno")),e.xp6(3),e.s9C("placeholder",e.lcZ(6,4,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMassimaSoggiorno")))}function ere(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",18)(2,"mat-checkbox",19),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.durataMinimaMassimaSoggiornoVisible=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,Wle,7,6,"div",20),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.durataMinimaMassimaSoggiornoVisible),e.xp6(1),e.hij("",e.lcZ(4,3,"sbm.disponibilita.planning.modificaDurataMinimaMassimaSoggiorno")," "),e.xp6(2),e.Q6J("ngIf",t.durataMinimaMassimaSoggiornoVisible)}}function tre(i,o){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function ire(i,o){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function ore(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",25)(1,"mat-form-field",4)(2,"mat-select",28),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.disponibilita.statoCta=a)}),e.ALo(3,"translate"),e._UZ(4,"mat-option",24),e.YNc(5,tre,3,4,"mat-option",16),e.ALo(6,"selectEnum"),e.qZA()(),e.TgZ(7,"mat-form-field",4)(8,"mat-select",28),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.disponibilita.statoCtd=a)}),e.ALo(9,"translate"),e._UZ(10,"mat-option",24),e.YNc(11,ire,3,4,"mat-option",16),e.ALo(12,"selectEnum"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.disponibilita.statoCta)("placeholder",e.lcZ(3,8,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoCta")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(6,10,t.enumStatoCtaCtd,"statoCtaCtd")),e.xp6(3),e.Q6J("ngModel",t.disponibilita.statoCtd)("placeholder",e.lcZ(9,13,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoCtd")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(12,15,t.enumStatoCtaCtd,"statoCtaCtd"))}}function nre(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",18)(2,"mat-checkbox",19),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.statoCtaCtdVisible=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,ore,13,18,"div",20),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.statoCtaCtdVisible),e.xp6(1),e.Oqu(e.lcZ(4,3,"sbm.disponibilita.planning.modificaStatoCtaCtd")),e.xp6(2),e.Q6J("ngIf",t.statoCtaCtdVisible)}}function are(i,o){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function lre(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",4)(2,"input",27),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onPrezzoInput(a.target))}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"mat-form-field",4)(5,"input",27),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onPrezzoUsoSingolaInput(a.target))}),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"mat-form-field",36)(8,"input",27),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onVariazionePrezzoInput(a.target))}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"mat-form-field",37)(11,"mat-select",33),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.disponibilita.tipoVariazionePrezzo=a)}),e.YNc(12,are,3,4,"mat-option",16),e.ALo(13,"selectEnum"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.s9C("placeholder",e.lcZ(3,5,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzo")),e.xp6(3),e.s9C("placeholder",e.lcZ(6,7,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzoUsoSingola")),e.xp6(3),e.s9C("placeholder",e.lcZ(9,9,"sbm.disponibilita.planning.aumentaDiminuisciPrezzo")),e.xp6(3),e.Q6J("ngModel",t.disponibilita.tipoVariazionePrezzo),e.xp6(1),e.Q6J("ngForOf",e.xi3(13,11,t.enumTipoValore,"tipoValore"))}}function rre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",29)(2,"div",3),e.YNc(3,lre,14,14,"ng-container",17),e.TgZ(4,"app-view-select",30),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.fasciaSelected=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.disponibilita.oidFascia=a.fasciaSelected.oid)}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",3)(7,"div",31)(8,"mat-checkbox",19),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.disponibilita.isApplicaPrezzoListino=a)}),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",32),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"mat-radio-group",33),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.disponibilita.isBloccaPrezzo=a)}),e.TgZ(15,"mat-radio-button",34),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"mat-radio-button",34),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-radio-button",35),e._uU(22),e.ALo(23,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.modificaPrezzoEnabled),e.xp6(1),e.Q6J("dataLoader",t.apiService.getFasceViewSelect())("value",t.fasciaSelected)("placeholder",e.lcZ(5,14,"bo.disponibilitaXPortaleXAlbergo.proprieta.fascia")),e.xp6(4),e.Q6J("ngModel",t.disponibilita.isApplicaPrezzoListino),e.xp6(1),e.Oqu(e.lcZ(10,16,"sbm.disponibilita.planning.isApplicaPrezzoListino")),e.xp6(3),e.Oqu(e.lcZ(13,18,"sbm.disponibilita.planning.isBloccaPrezzo")),e.xp6(2),e.Q6J("ngModel",t.disponibilita.isBloccaPrezzo),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(17,20,"sbm.disponibilita.planning.bloccato")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(20,22,"sbm.disponibilita.planning.nonBloccato")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(23,24,"sbm.disponibilita.planning.invariato"))}}function cre(i,o){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function sre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",4)(1,"mat-select",28),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.disponibilita.stato=a)}),e.ALo(2,"translate"),e._UZ(3,"mat-option",24),e.YNc(4,cre,3,4,"mat-option",16),e.ALo(5,"selectEnum"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.disponibilita.stato)("placeholder",e.lcZ(2,4,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoPortaleXAlbergo")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(5,6,t.enumStatoPortale,"statoPortaleXAlbergo"))}}function pre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",25),e.YNc(1,sre,6,9,"mat-form-field",26),e.TgZ(2,"div",32),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-radio-group",33),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.disponibilita.isBloccaStato=a)}),e.TgZ(6,"mat-radio-button",34),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-radio-button",34),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"mat-radio-button",35),e._uU(13),e.ALo(14,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.modificaStatoPortaleEnabled),e.xp6(2),e.Oqu(e.lcZ(4,9,"sbm.disponibilita.planning.isBloccaStato")),e.xp6(2),e.Q6J("ngModel",t.disponibilita.isBloccaStato),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(8,11,"sbm.disponibilita.planning.bloccato")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(11,13,"sbm.disponibilita.planning.nonBloccato")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(14,15,"sbm.disponibilita.planning.invariato"))}}Ei.\u0275fac=function(o){return new(o||Ei)},Ei.\u0275cmp=e.Xpm({type:Ei,selectors:[["app-disponibilita-edit-modal"]],inputs:{dispo:"dispo",dialogRef:"dialogRef"},decls:4,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"dispo","modal","back"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"app-disponibilita-edit",2),e.NdJ("back",function(a){return t.dialogRef.close(a)}),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("dispo",t.dispo)("modal",!0))},dependencies:[h.eB,F.aO,Ji]});const dre=function(i){return{"color-pink":i}};class cl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.utility=t,this.localizationService=n,this.sessionService=a,this.selectedTariffe=[],this.rq=new d.WLZ,this.disponibilita=new d.Tcy,this.camereInVenditaVisible=!1,this.durataMinimaMassimaSoggiornoVisible=!1,this.statoCtaCtdVisible=!1,this.prezzoFasciaVisible=!1,this.statoVisible=!1,this.fasciaSelected=new v.nnO(-1),this.enumStatoCtaCtd=c.L5,this.enumStatoPortale=c.V6,this.enumTipoPortale=c.Q,this.enumTipoValore=c.jy,this.modificaDisponibiliEnabled=!0,this.modificaVariazioneDisponibiliEnabled=!0,this.modificaPrezzoEnabled=!0,this.modificaStatoCtaCtdEnabled=!0,this.modificaStatoPortaleEnabled=!0,this.modificaMinMaxStayEnabled=!0}ngOnInit(){this.rq.dal=this.dal,this.rq.al=this.al,this.rq.isAggiornaTariffeCollegate=!1,this.rq.giorni=new d.RUf,this.updatePeriodoDalAl();let o=this.sessionService.getPermessiUtente();null!=o&&(this.modificaPrezzoEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaPrezzoPlanning)),this.modificaStatoCtaCtdEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoCtaCtdPlanning)),this.modificaStatoPortaleEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoPortalePlanning)),this.modificaMinMaxStayEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaMinMaxStayPlanning))),this.modificaDisponibiliEnabled=this.sessionService.isModificaDisponibiliEnabled(),this.modificaVariazioneDisponibiliEnabled=this.sessionService.isModificaVariazioneDisponibiliEnabled(),null!=this.portale&&(this.modificaDisponibiliEnabled=this.portale.isModificaDisponibiliAttiva)}onSelectDeselectAllClickTariffe(o){this.isAllSelectedTariffe(o)?this.selectedTariffe=[]:this.selectedTariffe=this.tipoCamera.tariffe.map(t=>t.oid)}isAllSelectedTariffe(o){return o.selected.length==this.tipoCamera.tariffe.length}isAllDeselected(o){return 0==o.selected.length}onDisponibiliInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),""==o.value?this.disponibilita.disponibili=-1:this.disponibilita.disponibili=+o.value}onVariazioneDisponibiliInput(o){+o.value<-100?o.value="-100":+o.value>100&&(o.value="100"),""==o.value?this.disponibilita.variazioneDisponibili=null:this.disponibilita.variazioneDisponibili=+o.value}onDurataMinimaSoggiornoInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),""==o.value?this.disponibilita.durataMinimaSoggiorno=-1:this.disponibilita.durataMinimaSoggiorno=+o.value}onDurataMassimaSoggiornoInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),""==o.value?this.disponibilita.durataMassimaSoggiorno=-1:this.disponibilita.durataMassimaSoggiorno=+o.value}onPrezzoInput(o){+o.value<0&&(o.value="0"),""==o.value?this.disponibilita.prezzo=-1:this.disponibilita.prezzo=+o.value}onPrezzoUsoSingolaInput(o){+o.value<0&&(o.value="0"),""==o.value?this.disponibilita.prezzoUsoSingola=-1:this.disponibilita.prezzoUsoSingola=+o.value}onVariazionePrezzoInput(o){""==o.value?this.disponibilita.variazionePrezzo=0:this.disponibilita.variazionePrezzo=+o.value}save(){if(this.disponibilita.prezzo>=0||this.disponibilita.prezzoUsoSingola>=0||this.disponibilita.disponibili>=0||null!=this.disponibilita.variazioneDisponibili||null!=this.disponibilita.variazionePrezzo&&0!=this.disponibilita.variazionePrezzo||this.disponibilita.oidFascia>0||null!=this.disponibilita.isBloccaPrezzo||this.disponibilita.durataMinimaSoggiorno>=0||this.disponibilita.durataMassimaSoggiorno>=0||null!=this.disponibilita.statoCta||null!=this.disponibilita.statoCtd||this.disponibilita.isApplicaPrezzoListino||null!=this.disponibilita.stato||null!=this.disponibilita.isBloccaStato){this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.rq.prezzi=[];let o=JSON.parse(JSON.stringify(this.disponibilita));o.oidPortale=this.portale.oid,o.tipoCameraOid=this.tipoCamera.oid,this.rq.prezzi.push(o);for(let t of this.selectedTariffe){let n=this.utility.findItemByOid(this.tipoCamera.tariffe,t);for(let a of n.portaliTipiCamera){let l=JSON.parse(JSON.stringify(this.disponibilita));l.oidPortale=a.portale.oid,l.tipoCameraOid=a.tipoCamera.oid,l.tariffaOid=n.oid,this.rq.prezzi.push(l)}}this.setIsLoading(!0),this.apiService.updatePrezzi(this.rq).subscribe(()=>{this.dialogRef.close(!0)})}else this.showError("globals.messages.inserireDati")}updatePeriodoDalAl(){this.periodoDalAl=this.localizationService.getTranslationSync("sbm.disponibilita.planning.periodoDalAl",{dal:u(this.rq.dal).format("DD/MM/YYYY"),al:u(this.rq.al).format("DD/MM/YYYY")})}}function mre(i,o){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}function _re(i,o){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.nome)}}function ure(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.pubblica())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.planning.pubblica")))}function gre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.aggiornaDisponibilita())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.opzioniPropagazione")))}function hre(i,o){if(1&i&&(e.TgZ(0,"div",28)(1,"span",42),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.disponibilita.planning.tipoPubblicazioneAttivitaAutomaticaAttiva")),e.xp6(3),e.Oqu(t.sessionService.getTipoPubblicazioneAttivitaAutomatica())}}cl.\u0275fac=function(o){return new(o||cl)(e.Y36(A.s),e.Y36(C.t),e.Y36(Oe.o),e.Y36(j.m))},cl.\u0275cmp=e.Xpm({type:cl,selectors:[["app-disponibilita-master-edit"]],inputs:{portale:"portale",tipoCamera:"tipoCamera",dal:"dal",al:"al",dialogRef:"dialogRef"},features:[e.qOj],decls:76,vars:78,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"row","mt-3"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["dal",""],["al",""],["color","primary",1,"mr-3",3,"ngModel","ngModelChange"],["mat-flat-button","","color","blank",1,"mr-2",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"w-100","mt-3"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["selectTariffe",""],["color","primary",1,"mat-option","select-all-multiple-select",3,"ngClass","checked","indeterminate","click"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mt-3"],["color","primary",3,"ngModel","ngModelChange"],["class","pl-3",4,"ngIf"],[1,"text-right","mt-3"],[1,"font-weight-bold","mr-4"],["mat-flat-button","","color","primary",3,"click"],[3,"value"],[1,"pl-3"],["class","w-100",4,"ngIf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","input"],[3,"ngModel","placeholder","ngModelChange"],[1,"row"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"mt-4"],[1,"mb-3","mt-3"],[3,"ngModel","ngModelChange"],["color","primary",1,"mr-2",3,"value"],["color","primary",3,"value"],[1,"variazionePrezzoInput"],[1,"variazionePrezzoTipoSelect","text-right"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4"),e._uU(4),e.qZA(),e.TgZ(5,"div",2)(6,"div",3)(7,"mat-form-field",4)(8,"input",5),e.NdJ("ngModelChange",function(l){return t.rq.dal=l})("dateChange",function(){return t.updatePeriodoDalAl()}),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"mat-datepicker-toggle",6)(11,"mat-datepicker",null,7),e.qZA()(),e.TgZ(13,"div",3)(14,"mat-form-field",4)(15,"input",5),e.NdJ("ngModelChange",function(l){return t.rq.al=l})("dateChange",function(){return t.updatePeriodoDalAl()}),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"mat-datepicker-toggle",6)(18,"mat-datepicker",null,8),e.qZA()()(),e.TgZ(20,"div")(21,"mat-checkbox",9),e.NdJ("ngModelChange",function(l){return t.rq.giorni.isLun=l}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-checkbox",9),e.NdJ("ngModelChange",function(l){return t.rq.giorni.isMar=l}),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"mat-checkbox",9),e.NdJ("ngModelChange",function(l){return t.rq.giorni.isMer=l}),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"mat-checkbox",9),e.NdJ("ngModelChange",function(l){return t.rq.giorni.isGio=l}),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"mat-checkbox",9),e.NdJ("ngModelChange",function(l){return t.rq.giorni.isVen=l}),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"mat-checkbox",9),e.NdJ("ngModelChange",function(l){return t.rq.giorni.isSab=l}),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"mat-checkbox",9),e.NdJ("ngModelChange",function(l){return t.rq.giorni.isDom=l}),e._uU(40),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"div")(43,"button",10),e.NdJ("click",function(){return t.rq.giorni.selezionaTutti()}),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"button",11),e.NdJ("click",function(){return t.rq.giorni.deselezionaTutti()}),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"mat-form-field",12)(50,"mat-select",13,14),e.NdJ("ngModelChange",function(l){return t.selectedTariffe=l}),e.ALo(52,"translate"),e.TgZ(53,"mat-checkbox",15),e.NdJ("click",function(l){e.CHM(n);const r=e.MAs(51);return l.preventDefault(),e.KtG(t.onSelectDeselectAllClickTariffe(r))}),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.YNc(56,$le,2,2,"mat-option",16),e.qZA()(),e.YNc(57,jle,6,5,"ng-container",17),e.YNc(58,ere,6,5,"ng-container",17),e.YNc(59,nre,6,5,"ng-container",17),e.TgZ(60,"div",18)(61,"mat-checkbox",19),e.NdJ("ngModelChange",function(l){return t.prezzoFasciaVisible=l}),e._uU(62),e.ALo(63,"translate"),e.qZA()(),e.YNc(64,rre,24,26,"div",20),e.TgZ(65,"div",18)(66,"mat-checkbox",19),e.NdJ("ngModelChange",function(l){return t.statoVisible=l}),e._uU(67),e.ALo(68,"translate"),e.qZA()(),e.YNc(69,pre,15,17,"div",20),e.TgZ(70,"div",21)(71,"span",22),e._uU(72),e.qZA(),e.TgZ(73,"button",23),e.NdJ("click",function(){return t.save()}),e._uU(74),e.ALo(75,"translate"),e.qZA()()}if(2&o){const n=e.MAs(12),a=e.MAs(19),l=e.MAs(51);e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(t.portale.nome+" - "+t.tipoCamera.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(9,44,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(16,46,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(4),e.Q6J("ngModel",t.rq.giorni.isLun),e.xp6(1),e.hij(" ",e.lcZ(23,48,"globals.dayOfWeeks.lun")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isMar),e.xp6(1),e.hij(" ",e.lcZ(26,50,"globals.dayOfWeeks.mar")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isMer),e.xp6(1),e.hij(" ",e.lcZ(29,52,"globals.dayOfWeeks.mer")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isGio),e.xp6(1),e.hij(" ",e.lcZ(32,54,"globals.dayOfWeeks.gio")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isVen),e.xp6(1),e.hij(" ",e.lcZ(35,56,"globals.dayOfWeeks.ven")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isSab),e.xp6(1),e.hij(" ",e.lcZ(38,58,"globals.dayOfWeeks.sab")," "),e.xp6(2),e.Q6J("ngModel",t.rq.giorni.isDom),e.xp6(1),e.hij(" ",e.lcZ(41,60,"globals.dayOfWeeks.dom")," "),e.xp6(4),e.Oqu(e.lcZ(45,62,"globals.selezionaTutti")),e.xp6(3),e.Oqu(e.lcZ(48,64,"globals.deselezionaTutti")),e.xp6(3),e.Q6J("placeholder",e.lcZ(52,66,"sbm.disponibilita.planning.applicaATariffe"))("ngModel",t.selectedTariffe),e.xp6(3),e.Q6J("ngClass",e.VKq(76,dre,t.isAllSelectedTariffe(l)))("checked",t.isAllSelectedTariffe(l))("indeterminate",!t.isAllSelectedTariffe(l)&&!t.isAllDeselected(l)),e.xp6(1),e.Oqu(e.lcZ(55,68,"globals.selezionaDeselezionaTutti")),e.xp6(2),e.Q6J("ngForOf",t.tipoCamera.tariffe),e.xp6(1),e.Q6J("ngIf",t.modificaDisponibiliEnabled||t.modificaVariazioneDisponibiliEnabled),e.xp6(1),e.Q6J("ngIf",t.modificaMinMaxStayEnabled),e.xp6(1),e.Q6J("ngIf",t.modificaStatoCtaCtdEnabled),e.xp6(2),e.Q6J("ngModel",t.prezzoFasciaVisible),e.xp6(1),e.Oqu(e.lcZ(63,70,"sbm.disponibilita.planning.modificaPrezzoFascia")),e.xp6(2),e.Q6J("ngIf",t.prezzoFasciaVisible),e.xp6(2),e.Q6J("ngModel",t.statoVisible),e.xp6(1),e.Oqu(e.lcZ(68,72,"sbm.disponibilita.planning.modificaStato")),e.xp6(2),e.Q6J("ngIf",t.statoVisible),e.xp6(3),e.Oqu(t.periodoDalAl),e.xp6(2),e.Oqu(e.lcZ(75,74,"globals.salva"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,He.OY,He.vy,g.x8,F.aO,_.Fj,_.JJ,_.On,ne.d,Te.A,z.X$],styles:[".variazionePrezzoInput[_ngcontent-%COMP%]{width:calc(100% - 50px)}.variazionePrezzoTipoSelect[_ngcontent-%COMP%]{width:50px}"]});const fre=function(i){return{"month-selected":i}};function Cre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",43)(1,"div",44),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw();return e.KtG(r.monthSelected(l))}),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,fre,a.selectedMonth==n&&a.selectedYear==a.currentYear)),e.xp6(1),e.hij(" ",e.lcZ(3,2,t)," ")}}function bre(i,o){if(1&i&&(e.TgZ(0,"div",69),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.tipoCameraHotel)}}function vre(i,o){if(1&i&&(e.TgZ(0,"div",70),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.disponibiliMassime")+": "+t.disponibiliMassime)}}function Tre(i,o){if(1&i&&(e.TgZ(0,"b",73),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"momentFormat"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,e.Dn7(3,3,t,"MMMM YYYY",n.getLocale())))}}function xre(i,o){if(1&i&&(e.TgZ(0,"td",71),e.YNc(1,Tre,4,7,"b",72),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(0==n||1==a.getDateNumber(t))&&a.viewMonth(t))}}const Zre=function(i){return{color:i}};function Are(i,o){if(1&i&&(e.TgZ(0,"td",74),e._uU(1),e.ALo(2,"momentFormat"),e._UZ(3,"br"),e.TgZ(4,"b",75),e._uU(5),e.ALo(6,"momentFormat"),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("ngStyle",e.VKq(11,Zre,n.isWeekend(t)?"#ff7a7a":null)),e.xp6(1),e.hij(" ",e.Dn7(2,3,t,"ddd",n.getLocale()),""),e.xp6(4),e.Oqu(e.Dn7(6,7,t,"DD",n.getLocale()))}}function wre(i,o){if(1&i&&(e.TgZ(0,"td",76),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Udp("background-color",t.colore),e.Q6J("appInvertColor",t.colore),e.uIk("colspan",t.durata>0?t.durata:1),e.xp6(1),e.hij(" ",t.nome," ")}}function zre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",77),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.editDisponibilitaMaster(r,l.data))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Tol("cursor-pointer td-disponibiliMaster font-big text-center "+n.getCssStato(t)),e.xp6(1),e.hij(" ",t.empty?"":t.disponibili," ")}}function Mre(i,o){if(1&i&&e._UZ(0,"img",83),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.icona,e.LSH)}}function qre(i,o){1&i&&e.GkF(0)}const Pre=function(i){return{"background-color":i}};function kre(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",91),e._uU(2),e.qZA(),e._UZ(3,"div",92),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.fascia.nome),e.xp6(1),e.Q6J("ngStyle",e.VKq(2,Pre,t.fascia.coloreHex))}}const Sre=function(i,o){return{"border-bottom":i,"stato-bloccato":o}},yre=function(i){return{colore:i}},Jre=function(i){return{"prezzo-bloccato":i}};function Ere(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",86),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw().$implicit,p=e.oxw().$implicit,T=e.oxw(3);return e.KtG(T.editDisponibilita(p,r.tipoCamera,r.tariffa,l))}),e.TgZ(1,"div",87)(2,"div"),e._uU(3),e.qZA(),e.YNc(4,qre,1,0,"ng-container",88),e.qZA(),e.TgZ(5,"div",89),e._uU(6),e.ALo(7,"eurCurrency"),e.qZA(),e.TgZ(8,"div",90),e.YNc(9,kre,4,4,"ng-container",38),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(5),a=e.MAs(95);e.xp6(1),e.Tol("font-small font-weight-bold text-center p-1 "+n.getCssStato(t)),e.Q6J("ngClass",e.WLB(11,Sre,!t.empty,t.isStatoBloccato)),e.xp6(2),e.Oqu(t.empty?"":t.disponibili),e.xp6(1),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(14,yre,n.getColoreStatoStatoPubblicazione(t))),e.xp6(1),e.Q6J("ngClass",e.VKq(16,Jre,t.isPrezzoBloccato)),e.xp6(1),e.Oqu(t.empty?"":e.lcZ(7,9,t.prezzo)),e.xp6(3),e.Q6J("ngIf",null!=t.fascia)}}function Nre(i,o){if(1&i&&(e.TgZ(0,"tr",62)(1,"td",84),e._uU(2),e.qZA(),e.YNc(3,Ere,10,18,"td",85),e.qZA()),2&i){const t=o.$implicit,n=e.oxw().$implicit;e.Q6J("hidden",n.hidden),e.xp6(2),e.hij(" ",t.tipoCamera.descrizione+" - "+t.tariffa.descrizione," "),e.xp6(1),e.Q6J("ngForOf",t.giorni)}}function Ore(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td",78)(3,"button",79),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.KtG(l.hidden=!l.hidden)}),e.TgZ(4,"i",66),e._uU(5),e.qZA()(),e.YNc(6,Mre,1,1,"img",80),e.TgZ(7,"span",81),e._uU(8),e.qZA()(),e._UZ(9,"td"),e.qZA(),e.YNc(10,Nre,4,3,"tr",82),e.BQk()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(3),e.Q6J("disableRipple",!0),e.xp6(2),e.Oqu(t.hidden?"keyboard_arrow_down":"keyboard_arrow_up"),e.xp6(1),e.Q6J("ngIf",!!t.icona),e.xp6(2),e.Oqu(t.nome),e.xp6(1),e.uIk("colspan",n.planning.giorni.length),e.xp6(1),e.Q6J("ngForOf",t.tipiCameraTariffe)}}function Lre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",46),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.editDisponibilitaMaster(l))}),e.TgZ(1,"mat-card-title",47)(2,"div"),e._uU(3),e.qZA(),e.YNc(4,bre,2,1,"div",48),e.YNc(5,vre,3,3,"div",49),e.TgZ(6,"div",50)(7,"button",51),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.stopPropagation(),e.KtG(l.previous30Days())}),e.TgZ(8,"span",52),e._uU(9,"keyboard_arrow_left"),e.qZA(),e.TgZ(10,"span",53),e._uU(11,"keyboard_arrow_left"),e.qZA(),e._uU(12," 30gg "),e.qZA(),e.TgZ(13,"button",54),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.stopPropagation(),e.KtG(l.previous15Days())}),e.TgZ(14,"span",52),e._uU(15,"keyboard_arrow_left"),e.qZA(),e._uU(16," 15gg "),e.qZA()(),e.TgZ(17,"div",55)(18,"button",51),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.stopPropagation(),e.KtG(l.next15Days())}),e._uU(19," 15gg "),e.TgZ(20,"span",52),e._uU(21,"keyboard_arrow_right"),e.qZA()(),e.TgZ(22,"button",54),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(2);return a.stopPropagation(),e.KtG(l.next30Days())}),e._uU(23," 30gg "),e.TgZ(24,"span",56),e._uU(25,"keyboard_arrow_right"),e.qZA(),e.TgZ(26,"span",52),e._uU(27,"keyboard_arrow_right"),e.qZA()()()(),e.TgZ(28,"mat-card-content",57),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(29,"table")(30,"tr"),e._UZ(31,"td",58),e.YNc(32,xre,2,1,"td",59),e.qZA(),e.TgZ(33,"tr"),e._UZ(34,"td",60),e.YNc(35,Are,7,13,"td",61),e.qZA(),e.TgZ(36,"tr",62)(37,"td",60),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.YNc(40,wre,2,5,"td",63),e.qZA(),e.TgZ(41,"tr",64)(42,"td",60)(43,"button",65),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.showHidePortali(l))}),e.TgZ(44,"i",66),e._uU(45),e.qZA()(),e.TgZ(46,"span",35),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.YNc(49,zre,2,3,"td",67),e.qZA(),e.YNc(50,Ore,11,6,"ng-container",68),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.nome),e.xp6(1),e.Q6J("ngIf",!!t.tipoCameraHotel),e.xp6(1),e.Q6J("ngIf",t.disponibiliMassime>0),e.xp6(27),e.Q6J("ngForOf",n.planning.giorni),e.xp6(3),e.Q6J("ngForOf",n.planning.giorni),e.xp6(1),e.Q6J("hidden",!n.eventi),e.xp6(2),e.Oqu(e.lcZ(39,13,"sbm.disponibilita.planning.eventi")),e.xp6(2),e.Q6J("ngForOf",n.planning.eventi),e.xp6(3),e.Q6J("disableRipple",!0),e.xp6(2),e.Oqu(n.isAllVisiblePortali(t)?"keyboard_arrow_up":"keyboard_arrow_down"),e.xp6(2),e.Oqu(e.lcZ(48,15,"bo.disponibilitaXPortaleXAlbergo.proprieta.disponibili")),e.xp6(2),e.Q6J("ngForOf",t.giorni),e.xp6(1),e.Q6J("ngForOf",t.portali)}}function Dre(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Lre,51,17,"mat-card",45),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.planning.tipiCamere)}}function Ire(i,o){1&i&&(e.TgZ(0,"div",93)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.disponibilita.planning.nessunaDisponibilita")))}const Qre=function(i){return{border:i}};function Ure(i,o){if(1&i&&(e.TgZ(0,"div",94),e._uU(1),e.qZA()),2&i){const t=o.colore;e.Udp("background-color",t),e.Q6J("ngClass",e.VKq(4,Qre,!!t)),e.xp6(1),e.hij(" ",t?"#":""," ")}}class sl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.sessionService=n,this.translationService=a,this.rq=new d.isw,this.portale=new v.$Ys,this.tipiCamera=[],this.trattamenti=[],this.months=[],this.eventi=!1,this.pubblicaDisponibilitaEnabled=!0,this.modificaBlocchiEnabled=!0,this.getPortaliRQ=d.k$g.fromFilters([new d.wn$("portale.tipoPortale",c.Hp.Equal,c.Q.Master.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)]),this.enumStatoPubblicazione=c.Eq}ngOnInit(){this.headerService.setTitle("sbm.disponibilita.planning-master.title"),this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.oneMonthFromToday),this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.currentYear=u().year(),this.fillMonths(),this.setIsLoading(!0);let o=this.sessionService.getUbicazioneIstat();null!=o&&this.getPortaliRQ.filters.push(new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,o.oid.toString(),c.NM.Number)),this.apiService.getPortaliXAlbergoViewSelect(this.getPortaliRQ,!1).subscribe(a=>{a.data.length>0?(this.portale=a.data[0],this.rq.oidPortaleXAlbergo=this.portale.oid,this.checkDisponibilitaNonPubblicate(),this.apiService.getTipiCameraOTA(this.rq.oidPortaleXAlbergo).subscribe(l=>{this.tipiCamera=l.data,this.apiService.getTrattamenti().subscribe(r=>{this.trattamenti=r.data.map(p=>p.trattamento),this.loadData()})})):(this.setIsLoading(!1),this.planning=new d.dnG,this.planning.tipiCamere=[])});let t=this.sessionService.getAlbergo();try{this.colorePlanningGiornoNonPubblicato=Z(t.colorePlanningGiornoNonPubblicato).hex(),this.colorePlanningGiornoModificatoDaPubblicare=Z(t.colorePlanningGiornoModificatoDaPubblicare).hex(),this.colorePlanningGiornoPubblicatoParzialmente=Z(t.colorePlanningGiornoPubblicatoParzialmente).hex()}catch(a){}let n=this.sessionService.getPermessiUtente();null!=n&&(this.pubblicaDisponibilitaEnabled=!n.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.PubblicazioneDisponibilita)),this.modificaBlocchiEnabled=!n.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaBlocchiPlanning))),this.sessionService.isPubblicaWS()&&(this.pubblicaDisponibilitaEnabled=!1),this.sub=this.translationService.languageChanged.subscribe(()=>{this.fillMonths()})}dalChange(){if(u(this.rq.dal)>u(this.rq.al)){let o=u(this.rq.dal).add(1,"month");this.rq.al=this.getDate(o)}this.loadData()}alChange(){if(u(this.rq.al)<u(this.rq.dal)){let o=u(this.rq.al).add(-1,"month");this.rq.dal=this.getDate(o)}this.loadData()}fillMonths(){this.months=[];for(let o=0;o<12;o++)this.months.push(u().set("month",o).format("MMM"))}nextYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear++,this.setIsLoading(!1)},500)}previousYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear--,this.setIsLoading(!1)},500)}monthSelected(o){let t=u().set("year",this.currentYear).set("month",o).set("date",1);this.rq.dal=this.getDate(t),this.rq.al=this.getDate(t.set("date",t.daysInMonth())),this.selectedMonth=o,this.selectedYear=this.currentYear,this.loadData()}previous30Days(){this.rq.dal=this.getDate(u(this.rq.dal).subtract(30,"day")),this.rq.al=this.getDate(u(this.rq.al).subtract(30,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}previous15Days(){this.rq.dal=this.getDate(u(this.rq.dal).subtract(15,"day")),this.rq.al=this.getDate(u(this.rq.al).subtract(15,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}next15Days(){this.rq.dal=this.getDate(u(this.rq.dal).add(15,"day")),this.rq.al=this.getDate(u(this.rq.al).add(15,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}next30Days(){this.rq.dal=this.getDate(u(this.rq.dal).add(30,"day")),this.rq.al=this.getDate(u(this.rq.al).add(30,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}loadData(){this.setIsLoading(!0),this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.apiService.getPlanningMaster(this.rq).subscribe(o=>{this.planning=o.data,this.setIsLoading(!1)})}getCssStato(o){return o.empty?"vuoto":o.stato==c.V6.Aperto?"aperto":o.stato==c.V6.Chiuso?"chiuso":""}aggiornaDisponibilita(){let o=new d.Zpt;o.width="70vw",o.disableClose=!0,o.panelClass="grey-background-dialog";let t=this.showModalDialog(kt,o),n=t.componentInstance;n.dalDate=this.rq.dal,n.alDate=this.rq.al,n.portale=this.portale,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}viewMonth(o){return u(o).month()==u(this.rq.al).month()?u(this.rq.al).date()-u(o).date()>=2:u(o).daysInMonth()-u(o).date()>=2}onPortaleChange(){this.setIsLoading(!0),this.rq.oidPortaleXAlbergo=this.portale.oid,this.rq.oidTipoCamera=null,this.checkDisponibilitaNonPubblicate(),this.apiService.getTipiCameraOTA(this.rq.oidPortaleXAlbergo).subscribe(o=>{this.tipiCamera=o.data,this.loadData()})}pubblica(){let o=new d.Zpt;o.width="80vw",o.disableClose=!0;let t=this.showModalDialog(Ct,o),n=t.componentInstance;n.dialogRef=t,n.portale=this.portale,n.oidTipoCamera=this.rq.oidTipoCamera,n.dal=this.rq.dal,n.al=this.rq.al,t.afterClosed().subscribe(a=>{a&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}editDisponibilita(o,t,n,a){let l=new d.Zpt;l.width="70vw";let r=this.showModalDialog(Ei,l),p=r.componentInstance,T=new v.fq$(a.oid);T.portaleXAlbergo=new v.$Ys(o.oid),T.portaleXAlbergo.nome=o.nome,T.tipoCameraOTA=new v.OR4(t.oid),T.tipoCameraOTA.descrizione=t.descrizione,T.tariffaOTA=new v.HfG(n.oid),T.tariffaOTA.descrizione=n.descrizione,T.giorno=this.getDate(a.data),T.prezzo=a.prezzo,T.prezzoUsoSingola=a.prezzoUsoSingola,T.statoCta=a.statoCta,T.statoCtd=a.statoCtd,T.statoPortaleXAlbergo=a.stato,T.durataMinimaSoggiorno=a.durataMinimaSoggiorno,T.durataMassimaSoggiorno=a.durataMassimaSoggiorno,T.isPrezzoBloccato=a.isPrezzoBloccato,T.isStatoPortaleXAlbergoBloccato=a.isStatoBloccato,T.fasciaAttiva=a.fascia,p.dispo=T,p.dialogRef=r,r.afterClosed().subscribe(L=>{null!=L&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}isWeekend(o){let t=u(o);return 6==t.day()||0==t.day()}checkDisponibilitaNonPubblicate(){this.apiService.checkDisponibilitaFutureNonPubblicate(this.rq.oidPortaleXAlbergo).subscribe(o=>{o.data?this.alert=new String("sbm.disponibilita.planning.disponibilitaNonPubblicate"):this.alert=null})}returnToToday(){this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.oneMonthFromToday),this.loadData(),this.selectedMonth=null,this.selectedYear=null}getDateNumber(o){return u(o).date()}editDisponibilitaMaster(o,t){let n=new d.Zpt;n.width="70vw";let a=this.showModalDialog(cl,n),l=a.componentInstance;l.portale=this.portale,l.tipoCamera=o,l.dal=t||this.rq.dal,l.al=t||this.rq.al,l.dialogRef=a,a.afterClosed().subscribe(r=>{r&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}sincronizzaDisponibilita(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Rt,o),n=t.componentInstance;n.oidPortale=this.portale.oid,n.dialogRef=t}getColoreStatoStatoPubblicazione(o){if(!o.empty){if(o.statoPubblicazione==c.Eq.ModificatoDaPubblicare)return this.colorePlanningGiornoModificatoDaPubblicare?this.colorePlanningGiornoModificatoDaPubblicare:"#FFFF00";if(o.statoPubblicazione==c.Eq.NonPubblicato)return this.colorePlanningGiornoNonPubblicato?this.colorePlanningGiornoNonPubblicato:"#FF0000";if(o.statoPubblicazione==c.Eq.PubblicatoParzialmente)return this.colorePlanningGiornoPubblicatoParzialmente?this.colorePlanningGiornoPubblicatoParzialmente:"#FFA500"}return""}isAllVisiblePortali(o){return o.portali.every(t=>!t.hidden)}showHidePortali(o){this.isAllVisiblePortali(o)?o.portali.forEach(t=>t.hidden=!0):o.portali.forEach(t=>t.hidden=!1)}ngOnDestroy(){this.headerService.clearTitle(),this.sub.unsubscribe()}}sl.\u0275fac=function(o){return new(o||sl)(e.Y36(A.s),e.Y36(ie.r),e.Y36(j.m),e.Y36(Oe.o))},sl.\u0275cmp=e.Xpm({type:sl,selectors:[["app-planning-master"]],features:[e.qOj],decls:96,vars:72,consts:[["mat-flat-button","","color","primary",1,"float-right","mr-3","oggiButton",3,"click"],[1,"p-3"],[3,"message","info"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-4","pt-2"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","blank","class","ml-2",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",1,"ml-2",3,"click"],["class","mt-2",4,"ngIf"],[1,"row","mb-3"],[1,"col-4","text-left"],["color","primary",3,"ngModel","ngModelChange"],[1,"col-8","text-right"],["src","/assets/images/sbm/lock.png",1,"rectangle","align-top","border","rounded"],[1,"mr-2"],[1,"aperto","rectangle","text-center","rounded"],[1,"chiuso","rectangle","text-center","rounded"],[1,"mt-2"],[1,"nonPubblicato","rectangle","text-center","rounded"],[1,"modificatoDaPubblicare","rectangle","text-center","rounded"],[1,"pubblicatoParzialmente","rectangle","text-center","rounded"],[1,"row","mb-2","mr-0","ml-0"],[1,"col-month-select","col-year-previous"],[1,"year-cell","border","rounded","p-1",3,"click"],[1,"align-middle"],["class","col-month-select",4,"ngFor","ngForOf"],[1,"col-month-select","col-year-next"],[4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-3 mt-3 bg-white",4,"ngIf"],["statoPubblicazioneTemplate",""],["mat-flat-button","","color","primary",3,"click"],[1,"font-weight-bold"],[1,"col-month-select"],[1,"month-select-cell","rounded","p-1",3,"ngClass","click"],["class","p-0 mb-3 scrollable-content border mat-elevation-z0 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"p-0","mb-3","scrollable-content","border","mat-elevation-z0","cursor-pointer",3,"click"],[1,"text-center","mb-3","pt-2"],["class","tipoCameraHotel",4,"ngIf"],["class","disponibiliMassime",4,"ngIf"],[1,"position-absolute","previous-buttons"],["mat-stroked-button","","color","blank",1,"mr-1",3,"click"],[1,"material-icons"],[1,"material-icons","ml-n3"],["mat-stroked-button","","color","blank",3,"click"],[1,"position-absolute","next-buttons"],[1,"material-icons","mr-n3"],[1,"cursor-default",3,"click"],[1,"sticky-left","no-outline"],["class","td-mese",4,"ngFor","ngForOf"],[1,"sticky-left"],["class","td-giorno",3,"ngStyle",4,"ngFor","ngForOf"],[3,"hidden"],["class","td-evento",3,"backgroundColor","appInvertColor",4,"ngFor","ngForOf"],[1,"tr-disponibiliMaster"],["mat-icon-button","",1,"expand-button","mr-1",3,"disableRipple","click"],[1,"material-icons","expand-icon"],[3,"class","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tipoCameraHotel"],[1,"disponibiliMassime"],[1,"td-mese"],["class","mese",4,"ngIf"],[1,"mese"],[1,"td-giorno",3,"ngStyle"],[1,"giorno"],[1,"td-evento",3,"appInvertColor"],[3,"click"],[1,"font-weight-bold","sticky-left"],["mat-icon-button","",1,"expand-button",3,"disableRipple","click"],["class","portale-icon ml-1 mr-1 align-middle",3,"src",4,"ngIf"],[1,"font-weight-bold","align-middle"],[3,"hidden",4,"ngFor","ngForOf"],[1,"portale-icon","ml-1","mr-1","align-middle",3,"src"],[1,"sticky-left","font-italic"],["class","cursor-pointer p-0",3,"click",4,"ngFor","ngForOf"],[1,"cursor-pointer","p-0",3,"click"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"font-small","text-center","p-1",3,"ngClass"],[1,"font-smaller","text-center","p-1","border-top","fascia"],[1,"nomeFascia"],[1,"border","rounded","w-100","coloreFascia",3,"ngStyle"],[1,"border","rounded-lg","mat-elevation-z1","p-3","mt-3","bg-white"],[1,"stato-pubblicazione","d-inline-block",3,"ngClass"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return t.returnToToday()}),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"app-alert",2),e.NdJ("info",function(){return t.pubblica()}),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"input",7),e.NdJ("ngModelChange",function(a){return t.rq.dal=a})("dateChange",function(){return t.dalChange(),t.selectedMonth=null,t.selectedYear=null}),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"mat-datepicker-toggle",8)(12,"mat-datepicker",null,9),e.qZA()(),e.TgZ(14,"div",5)(15,"mat-form-field",6)(16,"input",7),e.NdJ("ngModelChange",function(a){return t.rq.al=a})("dateChange",function(){return t.alChange(),t.selectedMonth=null,t.selectedYear=null}),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"mat-datepicker-toggle",8)(19,"mat-datepicker",null,10),e.qZA()(),e.TgZ(21,"div",5)(22,"app-view-select",11),e.NdJ("valueChange",function(a){return t.portale=a})("valueChange",function(){return t.onPortaleChange()}),e.ALo(23,"translate"),e.qZA()()(),e.TgZ(24,"div",4)(25,"div",5)(26,"mat-form-field",6)(27,"mat-select",12),e.NdJ("ngModelChange",function(a){return t.rq.oidTipoCamera=a})("selectionChange",function(){return t.loadData()}),e.ALo(28,"translate"),e._UZ(29,"mat-option",13),e.YNc(30,mre,2,2,"mat-option",14),e.qZA()()(),e.TgZ(31,"div",5)(32,"mat-form-field",6)(33,"mat-select",12),e.NdJ("ngModelChange",function(a){return t.rq.oidTrattamento=a})("selectionChange",function(){return t.loadData()}),e.ALo(34,"translate"),e._UZ(35,"mat-option",13),e.YNc(36,_re,2,2,"mat-option",14),e.qZA()()(),e.TgZ(37,"div",15),e.YNc(38,ure,3,3,"button",16),e.YNc(39,gre,3,3,"button",17),e.TgZ(40,"button",18),e.NdJ("click",function(){return t.sincronizzaDisponibilita()}),e._uU(41),e.ALo(42,"translate"),e.qZA()()(),e.YNc(43,hre,6,4,"div",19),e.qZA(),e.TgZ(44,"div",20)(45,"div",21)(46,"mat-checkbox",22),e.NdJ("ngModelChange",function(a){return t.eventi=a}),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"div",23)(50,"div"),e._UZ(51,"img",24),e._uU(52,"\xa0"),e.TgZ(53,"span",25),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"span",26),e._uU(57,"\xa0"),e.qZA(),e.TgZ(58,"span",25),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"span",27),e._uU(62,"\xa0"),e.qZA(),e.TgZ(63,"span"),e._uU(64),e.ALo(65,"translate"),e.qZA()(),e.TgZ(66,"div",28)(67,"span",29),e._uU(68,"#"),e.qZA(),e.TgZ(69,"span",25),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"span",30),e._uU(73,"#"),e.qZA(),e.TgZ(74,"span",25),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"span",31),e._uU(78,"#"),e.qZA(),e.TgZ(79,"span",25),e._uU(80),e.ALo(81,"translate"),e.qZA()()()(),e.TgZ(82,"div",32)(83,"div",33)(84,"div",34),e.NdJ("click",function(){return t.previousYearClick()}),e.TgZ(85,"span",35),e._uU(86),e.qZA()()(),e.YNc(87,Cre,4,6,"div",36),e.TgZ(88,"div",37)(89,"div",34),e.NdJ("click",function(){return t.nextYearClick()}),e.TgZ(90,"span",35),e._uU(91),e.qZA()()()(),e.YNc(92,Dre,2,1,"ng-container",38),e.YNc(93,Ire,4,3,"div",39),e.qZA(),e.YNc(94,Ure,2,6,"ng-template",null,40,e.W1O)),2&o){const n=e.MAs(13),a=e.MAs(20);e.xp6(1),e.Oqu(e.lcZ(2,44,"sbm.disponibilita.planning.oggi")),e.xp6(3),e.Q6J("message",t.alert),e.xp6(5),e.s9C("placeholder",e.lcZ(10,46,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(17,48,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(t.getPortaliRQ,!1))("value",t.portale)("placeholder",e.lcZ(23,50,"sbm.disponibilita.planning.portale")),e.xp6(5),e.s9C("placeholder",e.lcZ(28,52,"sbm.disponibilita.planning.tipoCamera")),e.Q6J("ngModel",t.rq.oidTipoCamera),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.tipiCamera),e.xp6(3),e.s9C("placeholder",e.lcZ(34,54,"globals.trattamento")),e.Q6J("ngModel",t.rq.oidTrattamento),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.trattamenti),e.xp6(2),e.Q6J("ngIf",t.pubblicaDisponibilitaEnabled),e.xp6(1),e.Q6J("ngIf",t.modificaBlocchiEnabled),e.xp6(2),e.Oqu(e.lcZ(42,56,"sbm.disponibilita.planning-master.sincronizzaDisponibilita")),e.xp6(2),e.Q6J("ngIf",!!t.sessionService.getTipoPubblicazioneAttivitaAutomatica()),e.xp6(3),e.Q6J("ngModel",t.eventi),e.xp6(1),e.hij(" ",e.lcZ(48,58,"sbm.disponibilita.planning.eventi")," "),e.xp6(7),e.Oqu(e.lcZ(55,60,"sbm.disponibilita.planning.bloccato")),e.xp6(5),e.Oqu(e.lcZ(60,62,"sbm.disponibilita.planning.aperto")),e.xp6(5),e.Oqu(e.lcZ(65,64,"sbm.disponibilita.planning.chiuso")),e.xp6(3),e.Udp("background-color",t.colorePlanningGiornoNonPubblicato?t.colorePlanningGiornoNonPubblicato:"#FF0000"),e.xp6(3),e.Oqu(e.lcZ(71,66,"sbm.disponibilita.planning.nonPubblicato")),e.xp6(2),e.Udp("background-color",t.colorePlanningGiornoModificatoDaPubblicare?t.colorePlanningGiornoModificatoDaPubblicare:"#FFFF00"),e.xp6(3),e.Oqu(e.lcZ(76,68,"sbm.disponibilita.planning.modificatoDaPubblicare")),e.xp6(2),e.Udp("background-color",t.colorePlanningGiornoPubblicatoParzialmente?t.colorePlanningGiornoPubblicatoParzialmente:"#FFA500"),e.xp6(3),e.Oqu(e.lcZ(81,70,"sbm.disponibilita.planning.pubblicatoParzialmente")),e.xp6(6),e.Oqu(t.currentYear-1),e.xp6(1),e.Q6J("ngForOf",t.months),e.xp6(4),e.Oqu(t.currentYear+1),e.xp6(1),e.Q6J("ngIf",null!=t.planning&&null!=t.planning.tipiCamere&&t.planning.tipiCamere.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.planning&&null!=t.planning.tipiCamere&&0==t.planning.tipiCamere.length)}},dependencies:[m.mk,m.sg,m.O5,m.tP,m.PC,k.Z,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,qe.S$,qe.Qi,qe.mi,_.Fj,_.JJ,_.On,nt,ne.d,m.rS,ke.f,K.H,z.X$],styles:[".mat-card.scrollable-content[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-direction:column}.mat-card.scrollable-content[_ngcontent-%COMP%] > .mat-card-title-group[_ngcontent-%COMP%]{display:block}.mat-card.scrollable-content[_ngcontent-%COMP%] > .mat-card-content[_ngcontent-%COMP%]{overflow-y:auto}.rectangle[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;margin-left:4px;margin-right:4px}.aperto[_ngcontent-%COMP%]{background-color:#67d9a4}.vuoto[_ngcontent-%COMP%]{background-color:#fff}.chiuso[_ngcontent-%COMP%]{background-color:#ff7a7a}.tr-disponibiliMaster[_ngcontent-%COMP%]{line-height:25px}.td-giorno[_ngcontent-%COMP%]{font-size:small;text-align:center}.td-evento[_ngcontent-%COMP%]{font-size:small;text-align:center;height:30px!important}.td-disponibiliMaster[_ngcontent-%COMP%]{text-align:center;font-weight:700}.giorno[_ngcontent-%COMP%], .mese[_ngcontent-%COMP%]{display:inline-block!important;width:41px!important}.tipoCameraHotel[_ngcontent-%COMP%]{font-style:italic;font-size:16px;color:#666}.disponibiliMassime[_ngcontent-%COMP%]{font-style:italic;font-size:12px;color:#999}td[_ngcontent-%COMP%]{white-space:nowrap;background-color:#fff;border:1px solid #dddddd;padding:5px 8px}.td-mese[_ngcontent-%COMP%]{border:none!important;background-color:transparent}.expand-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.expand-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.next-buttons[_ngcontent-%COMP%]{top:10px;right:10px}.previous-buttons[_ngcontent-%COMP%]{top:10px;left:10px}.sticky-left[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;z-index:1020;outline:1px solid #dddddd;border:none;outline-offset:-1px}.no-outline[_ngcontent-%COMP%]{outline:none;background-color:transparent!important}.oggiButton[_ngcontent-%COMP%]{margin-top:-35px}.portale-icon[_ngcontent-%COMP%]{width:24px;height:24px}.prezzo-bloccato[_ngcontent-%COMP%]{background-image:url(/assets/images/sbm/lock.png);background-size:cover;background-repeat:no-repeat}.stato-bloccato[_ngcontent-%COMP%]{background-image:url(/assets/images/sbm/lock-big.png);background-size:cover;background-repeat:no-repeat}.rectangle.chiuso[_ngcontent-%COMP%], .rectangle.nonPubblicato[_ngcontent-%COMP%], .rectangle.modificatoDaPubblicare[_ngcontent-%COMP%], .rectangle.pubblicatoParzialmente[_ngcontent-%COMP%]{line-height:20px}.stato-pubblicazione[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px;border-radius:10px;line-height:16px}.nomeFascia[_ngcontent-%COMP%]{max-width:100px;overflow:hidden;text-overflow:ellipsis}.coloreFascia[_ngcontent-%COMP%]{height:10px}.fascia[_ngcontent-%COMP%]{height:35px}"]});var gs=Y(23207);function Yre(i,o){if(1&i&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}function Rre(i,o){if(1&i&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.Oqu(t.descrizione)}}function Fre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.pubblica())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.planning.pubblica")))}function Hre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.aggiornaDisponibilita())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.opzioniPropagazione")))}function Kre(i,o){if(1&i&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.disponibilita.planning.tipoPubblicazioneAttivitaAutomaticaAttiva")),e.xp6(3),e.Oqu(t.sessionService.getTipoPubblicazioneAttivitaAutomatica())}}function Gre(i,o){if(1&i&&(e.TgZ(0,"mat-radio-button",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.Oqu(e.lcZ(2,2,t.value))}}const $re=function(i){return{"month-selected":i}};function Bre(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",39),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw();return e.KtG(r.monthSelected(l))}),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,$re,a.selectedMonth==n&&a.selectedYear==a.currentYear)),e.xp6(1),e.hij(" ",e.lcZ(3,2,t)," ")}}function Vre(i,o){if(1&i&&(e.TgZ(0,"b",64),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"momentFormat"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,e.Dn7(3,3,t,"MMMM YYYY",n.getLocale())))}}function Xre(i,o){if(1&i&&(e.TgZ(0,"td",62),e.YNc(1,Vre,4,7,"b",63),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(0==n||1==a.getDateNumber(t))&&a.viewMonth(t))}}const jre=function(i){return{color:i}};function Wre(i,o){if(1&i&&(e.TgZ(0,"td",65),e._uU(1),e.ALo(2,"momentFormat"),e._UZ(3,"br"),e.TgZ(4,"b",66),e._uU(5),e.ALo(6,"momentFormat"),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngStyle",e.VKq(11,jre,n.isWeekend(t)?"#ff7a7a":null)),e.xp6(1),e.hij(" ",e.Dn7(2,3,t,"ddd",n.getLocale()),""),e.xp6(4),e.Oqu(e.Dn7(6,7,t,"DD",n.getLocale()))}}function ece(i,o){if(1&i&&(e.TgZ(0,"td",67),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Udp("background-color",t.colore),e.Q6J("appInvertColor",t.colore),e.uIk("colspan",t.durata>0?t.durata:1),e.xp6(1),e.hij(" ",t.nome," ")}}function tce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",76),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.onDisponibiliInput(a.target))})("blur",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.onDisponibiliBlur(a.target,r.disponibili,T,p))})("keyup.enter",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.onDisponibiliBlur(a.target,r.disponibili,T,p))}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.Q6J("value",t.disponibili)("disabled",!n.modificaDisponibiliEnabled)}}function ice(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",77),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onDisponibiliFocus(l,a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.xp6(1),e.Oqu(t.disponibili)}}function oce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",76),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.onDurataMinimaSoggiornoInput(a.target))})("blur",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.onDurataMinimaSoggiornoBlur(a.target,r.durataMinimaSoggiorno,T,p))})("keyup.enter",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.onDurataMinimaSoggiornoBlur(a.target,r.durataMinimaSoggiorno,T,p))}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.Q6J("value",t.durataMinimaSoggiorno)("disabled",!n.modificaMinMaxStayEnabled)}}function nce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",77),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onDurataMinimaSoggiornoFocus(l,a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.xp6(1),e.Oqu(t.durataMinimaSoggiorno)}}function ace(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",76),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.onDurataMassimaSoggiornoInput(a.target))})("blur",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.onDurataMassimaSoggiornoBlur(a.target,r.durataMassimaSoggiorno,T,p))})("keyup.enter",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.onDurataMassimaSoggiornoBlur(a.target,r.durataMassimaSoggiorno,T,p))}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.Q6J("value",t.durataMassimaSoggiorno)("disabled",!n.modificaMinMaxStayEnabled)}}function lce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",77),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onDurataMassimaSoggiornoFocus(l,a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.xp6(1),e.Oqu(t.durataMassimaSoggiorno)}}function rce(i,o){if(1&i&&(e.TgZ(0,"mat-option",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(2);e.Q6J("value",t.oid)("hidden",!(!n.value||t.nome&&t.nome.toLowerCase().includes(n.value.toLowerCase()))),e.xp6(1),e.hij(" ",t.nome," ")}}function cce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-select",78),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.fascia.oid=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw(),l=a.index,r=a.$implicit,p=e.oxw().index,T=e.oxw(2);return e.KtG(T.updateDisponibilita(p,l,null,null,null,null,r.fascia.oid))})("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.fasciaSelectOpen=!0)})("openedChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.fasciaSelectOpen=a)}),e._UZ(1,"app-select-search",null,79),e.TgZ(3,"mat-option",15),e._uU(4,"--"),e.qZA(),e.YNc(5,rce,2,3,"mat-option",80),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.Q6J("ngModel",t.fascia.oid),e.xp6(3),e.Q6J("value",-1),e.xp6(2),e.Q6J("ngForOf",n.fasce)}}function sce(i,o){if(1&i&&(e.TgZ(0,"span",82),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.xp6(1),e.Oqu(-1==t.fascia.oid?"--":t.fascia.nome)}}const pce=function(i,o){return{"cursor-pointer":i,"stato-bloccato":o}};function dce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",70),e.NdJ("click",function(){const a=e.CHM(t),l=a.index,r=a.$implicit,p=e.oxw().index,T=e.oxw(2);return e.KtG(T.tipoModifica==T.enumTipoModificaPlanningCamera.Stato&&T.modificaStatoPortaleEnabled?T.updateDisponibilita(p,l,null,null,null,r.stato==T.enumStatoPortale.Aperto?T.enumStatoPortale.Chiuso:T.enumStatoPortale.Aperto,null):null)})("mouseenter",function(){const l=e.CHM(t).index,r=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.tipoModifica==p.enumTipoModificaPlanningCamera.Disponibili?p.onDisponibiliMouseEnter(r,l):p.tipoModifica==p.enumTipoModificaPlanningCamera.DurataMinimaSoggiorno?p.onDurataMinimaSoggiornoMouseEnter(r,l):p.tipoModifica==p.enumTipoModificaPlanningCamera.DurataMassimaSoggiorno?p.onDurataMassimaSoggiornoMouseEnter(r,l):p.tipoModifica==p.enumTipoModificaPlanningCamera.Fascia?p.onFasciaMouseEnter(r,l):null)})("mouseleave",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.save=!1)}),e.TgZ(1,"div",71),e.YNc(2,tce,1,4,"input",72),e.YNc(3,ice,2,3,"span",73),e.qZA(),e.TgZ(4,"div",71),e.YNc(5,oce,1,4,"input",72),e.YNc(6,nce,2,3,"span",73),e.qZA(),e.TgZ(7,"div",71),e.YNc(8,ace,1,4,"input",72),e.YNc(9,lce,2,3,"span",73),e.qZA(),e.TgZ(10,"div",71),e.YNc(11,cce,6,5,"mat-select",74),e.YNc(12,sce,2,3,"span",75),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw().$implicit,l=e.oxw(2);e.Udp("background-color",l.getBackgroundColor(t)),e.Q6J("ngClass",e.WLB(15,pce,l.tipoModifica==l.enumTipoModificaPlanningCamera.Stato&&l.modificaStatoPortaleEnabled,l.tipoModifica==l.enumTipoModificaPlanningCamera.Stato&&t.isStatoPortaleXAlbergoBloccato)),e.xp6(1),e.Q6J("hidden",l.tipoModifica!=l.enumTipoModificaPlanningCamera.Disponibili),e.xp6(1),e.Q6J("ngIf",a.inputVisibleDisponibili==n),e.xp6(1),e.Q6J("ngIf",a.inputVisibleDisponibili!=n),e.xp6(1),e.Q6J("hidden",l.tipoModifica!=l.enumTipoModificaPlanningCamera.DurataMinimaSoggiorno),e.xp6(1),e.Q6J("ngIf",a.inputVisibleDurataMinimaSoggiorno==n),e.xp6(1),e.Q6J("ngIf",a.inputVisibleDurataMinimaSoggiorno!=n),e.xp6(1),e.Q6J("hidden",l.tipoModifica!=l.enumTipoModificaPlanningCamera.DurataMassimaSoggiorno),e.xp6(1),e.Q6J("ngIf",a.inputVisibleDurataMassimaSoggiorno==n),e.xp6(1),e.Q6J("ngIf",a.inputVisibleDurataMassimaSoggiorno!=n),e.xp6(1),e.Q6J("hidden",l.tipoModifica!=l.enumTipoModificaPlanningCamera.Fascia),e.xp6(1),e.Q6J("ngIf",a.selectVisibleFascia==n),e.xp6(1),e.Q6J("ngIf",a.selectVisibleFascia!=n)}}function mce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",68),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetInput())}),e._uU(2),e.qZA(),e.YNc(3,dce,13,18,"td",69),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.nome),e.xp6(1),e.Q6J("ngForOf",t.giorni)}}function _ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",40)(1,"div",41)(2,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.previous30Days())}),e.TgZ(3,"span",43),e._uU(4,"keyboard_arrow_left"),e.qZA(),e.TgZ(5,"span",44),e._uU(6,"keyboard_arrow_left"),e.qZA(),e._uU(7," 30gg "),e.qZA(),e.TgZ(8,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.previous15Days())}),e.TgZ(9,"span",43),e._uU(10,"keyboard_arrow_left"),e.qZA(),e._uU(11," 15gg "),e.qZA()(),e.TgZ(12,"div",46)(13,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cellWidth=a.cellWidth-10)}),e.TgZ(14,"i",43),e._uU(15,"remove"),e.qZA()(),e.TgZ(16,"span",48),e._uU(17,"Zoom"),e.qZA(),e.TgZ(18,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cellWidth=a.cellWidth+10)}),e.TgZ(19,"i",43),e._uU(20,"add"),e.qZA()()(),e.TgZ(21,"div",49)(22,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.next15Days())}),e._uU(23," 15gg "),e.TgZ(24,"span",43),e._uU(25,"keyboard_arrow_right"),e.qZA()(),e.TgZ(26,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.next30Days())}),e._uU(27," 30gg "),e.TgZ(28,"span",50),e._uU(29,"keyboard_arrow_right"),e.qZA(),e.TgZ(30,"span",43),e._uU(31,"keyboard_arrow_right"),e.qZA()()(),e.TgZ(32,"div",51)(33,"table",52),e.NdJ("mousemove",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.mouseStill=!1)})("mouseleave",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updatingDisponibilita||a.fasciaSelectOpen?null:a.resetInput())}),e.TgZ(34,"tr",53),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.resetInput())}),e._UZ(35,"td",54),e.YNc(36,Xre,2,1,"td",55),e.qZA(),e.TgZ(37,"tr",53),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.resetInput())}),e._UZ(38,"td",56),e.YNc(39,Wre,7,13,"td",57),e.qZA(),e.TgZ(40,"tr",58),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.resetInput())}),e._UZ(41,"td",59),e.YNc(42,ece,2,5,"td",60),e.qZA(),e.YNc(43,mce,4,2,"tr",61),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(13),e.Q6J("disabled",t.cellWidth<=35),e.xp6(5),e.Q6J("disabled",t.cellWidth>=95),e.xp6(18),e.Q6J("ngForOf",t.planning.giorni),e.xp6(3),e.Q6J("ngForOf",t.planning.giorni),e.xp6(1),e.Q6J("hidden",!t.eventi),e.xp6(2),e.Q6J("ngForOf",t.planning.eventi),e.xp6(1),e.Q6J("ngForOf",t.planning.tipiCamere)}}function uce(i,o){1&i&&(e.TgZ(0,"div",83)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.disponibilita.planning.nessunaDisponibilita")))}class pl extends f.H{constructor(o,t,n,a,l,r){super(),this.apiService=o,this.headerService=t,this.sessionService=n,this.translationService=a,this.parametriService=l,this.utility=r,this.tipiCamera=[],this.tariffe=[],this.fasce=[],this.save=!1,this.months=[],this.enumStatoPortale=c.V6,this.enumTipoModificaPlanningCamera=c.wc,this.pubblicaDisponibilitaEnabled=!0,this.modificaBlocchiEnabled=!0,this.modificaDisponibiliEnabled=!0,this.modificaStatoPortaleEnabled=!0,this.modificaMinMaxStayEnabled=!0,this.tipoModifica=c.wc.Disponibili,this.cellWidth=35,this.mouseStill=!1,this.updatingDisponibilita=!1,this.fasciaSelectOpen=!1,this.eventi=!1,this.getPortaliRQ=d.k$g.fromFilters([new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,null,c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)]),this.ubicazioneIstatDisabled=!1}ngOnInit(){this.headerService.setTitle("sbm.disponibilita.planning-tipo-camera.title"),this.rq=new d.zhW,this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.oneMonthFromToday),this.rq.oidTipoCamera=-1,this.rq.oidTariffa=-1,this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.currentYear=u().year(),this.fillMonths(),this.setIsLoading(!0);let o=this.sessionService.getUbicazioneIstat();null!=o&&(this.getPortaliRQ.filters[0].value=o.oid.toString(),this.ubicazioneIstatDisabled=!0,this.ubicazioneIstat=o),this.getPortali(),this.sub=this.translationService.languageChanged.subscribe(()=>{this.fillMonths()});let t=this.sessionService.getPermessiUtente();null!=t&&(this.pubblicaDisponibilitaEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.PubblicazioneDisponibilita)),this.modificaBlocchiEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaBlocchiPlanning)),this.modificaStatoPortaleEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoPortalePlanning)),this.modificaMinMaxStayEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaMinMaxStayPlanning))),this.sessionService.isPubblicaWS()&&(this.pubblicaDisponibilitaEnabled=!1),this.modificaDisponibiliEnabled=this.sessionService.isModificaDisponibiliEnabled()}getPortali(){this.setIsLoading(!0),this.apiService.getPortaliXAlbergoViewSelect(this.getPortaliRQ,!1).subscribe(o=>{o.data.length>0?(this.portale=o.data[0],this.modificaDisponibiliEnabled=this.portale.isModificaDisponibiliAttiva,this.rq.oidPortaleXAlbergo=this.portale.oid,this.checkDisponibilitaNonPubblicate(),this.apiService.getTipiCameraOTA(this.rq.oidPortaleXAlbergo).subscribe(t=>{this.tipiCamera=t.data,this.apiService.getTariffeOTA(this.rq.oidPortaleXAlbergo).subscribe(n=>{this.tariffe=n.data;let a=new d.k$g;null!=this.portale.ubicazioneIstat&&(a.filters=[new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,this.portale.ubicazioneIstat.oid.toString(),c.NM.Number)]),a.sorting=[new d.aQR("ordinamento",c.nI.Asc)],this.apiService.getFasceFilter(a).subscribe(l=>{this.fasce=l.data;for(let r of this.fasce)try{r.coloreHex=Z(r.colore).hex()}catch(p){}this.loadData()})})})):this.setIsLoading(!1)})}fillMonths(){this.months=[];for(let o=0;o<12;o++)this.months.push(u().set("month",o).format("MMM"))}nextYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear++,this.setIsLoading(!1)},500)}previousYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear--,this.setIsLoading(!1)},500)}monthSelected(o){let t=u().set("year",this.currentYear).set("month",o).set("date",1);this.rq.dal=this.getDate(t),this.rq.al=this.getDate(t.set("date",t.daysInMonth())),this.selectedMonth=o,this.selectedYear=this.currentYear,this.loadData()}previous30Days(){this.rq.dal=this.getDate(u(this.rq.dal).subtract(30,"day")),this.rq.al=this.getDate(u(this.rq.al).subtract(30,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}previous15Days(){this.rq.dal=this.getDate(u(this.rq.dal).subtract(15,"day")),this.rq.al=this.getDate(u(this.rq.al).subtract(15,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}next15Days(){this.rq.dal=this.getDate(u(this.rq.dal).add(15,"day")),this.rq.al=this.getDate(u(this.rq.al).add(15,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}next30Days(){this.rq.dal=this.getDate(u(this.rq.dal).add(30,"day")),this.rq.al=this.getDate(u(this.rq.al).add(30,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}loadData(){this.setIsLoading(!0),this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.apiService.getPlanning(this.rq).subscribe(o=>{this.planning=o.data,this.setIsLoading(!1)})}aggiornaDisponibilita(){let o=new d.Zpt;o.width="70vw",o.disableClose=!0,o.panelClass="grey-background-dialog";let t=this.showModalDialog(kt,o),n=t.componentInstance;n.dalDate=this.rq.dal,n.alDate=this.rq.al,n.portale=this.portale,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}updateDisponibilita(o,t,n,a,l,r,p){if(null!=n||null!=p||null!=a||null!=l||null!=r){this.updatingDisponibilita=!0,this.setIsLoading(!0);let T=this.planning.tipiCamere[o].oid,L=this.planning.tipiCamere[o].giorni[t].data,G=new d.fCT;G.disponibilita=new v.fq$,G.disponibilita.portaleXAlbergo=new v.$Ys(this.rq.oidPortaleXAlbergo),G.disponibilita.tipoCameraOTA=new v.OR4(T),G.tariffe=this.planning.tipiCamere[o].tariffe,G.disponibilita.giorno=this.getDate(L),null!=n&&(G.disponibilita.disponibili=n,this.planning.tipiCamere[o].giorni[t].disponibili=n),null!=p&&(G.disponibilita.fasciaAttiva=p>0?this.utility.findItemByOid(this.fasce,p):new v.nnO(-1),this.planning.tipiCamere[o].giorni[t].fascia=Object.assign({},G.disponibilita.fasciaAttiva)),null!=a&&(G.disponibilita.durataMinimaSoggiorno=a,this.planning.tipiCamere[o].giorni[t].durataMinimaSoggiorno=a),null!=l&&(G.disponibilita.durataMassimaSoggiorno=l,this.planning.tipiCamere[o].giorni[t].durataMassimaSoggiorno=l),null!=r&&(G.disponibilita.statoPortaleXAlbergo=r,this.planning.tipiCamere[o].giorni[t].stato=r),this.apiService.updateDisponibilita(G).subscribe(W=>{if(null!=W.data&&W.data.length==this.planning.tipiCamere[o].tariffe.length){let be=0;for(let Ze of this.planning.tipiCamere[o].tariffe)Ze.prezzi[t]=new d.M9J(W.data[be]),be++}this.checkDisponibilitaNonPubblicate(),this.save=!1,this.setIsLoading(!1),setTimeout(()=>{this.updatingDisponibilita=!1},200)})}else this.save=!1}viewMonth(o){return u(o).month()==u(this.rq.al).month()?u(this.rq.al).date()-u(o).date()>=2:u(o).daysInMonth()-u(o).date()>=2}onDisponibiliInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),this.save=!0}onDisponibiliBlur(o,t,n,a){""==o.value?(this.save=!1,o.value=t.toString()):this.save&&this.updateDisponibilita(n,a,+o.value,null,null,null,null)}onDurataMinimaSoggiornoInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),this.save=!0}onDurataMinimaSoggiornoBlur(o,t,n,a){""==o.value?(this.save=!1,o.value=t<=0?"":t.toString()):this.save&&this.updateDisponibilita(n,a,null,+o.value,null,null,null),+o.value<=0&&(o.value="")}onDurataMassimaSoggiornoInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),this.save=!0}onDurataMassimaSoggiornoBlur(o,t,n,a){""==o.value?(this.save=!1,o.value=t<=0?"":t.toString()):this.save&&this.updateDisponibilita(n,a,null,null,+o.value,null,null),+o.value<=0&&(o.value="")}onPortaleChange(){this.setIsLoading(!0),this.modificaDisponibiliEnabled=this.portale.isModificaDisponibiliAttiva,this.rq.oidPortaleXAlbergo=this.portale.oid,this.rq.oidTipoCamera=-1,this.rq.oidTariffa=-1,this.checkDisponibilitaNonPubblicate(),this.apiService.getTipiCameraOTA(this.rq.oidPortaleXAlbergo).subscribe(o=>{this.tipiCamera=o.data,this.apiService.getTariffeOTA(this.rq.oidPortaleXAlbergo).subscribe(t=>{this.tariffe=t.data;let n=new d.k$g;null!=this.portale.ubicazioneIstat&&(n.filters=[new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,this.portale.ubicazioneIstat.oid.toString(),c.NM.Number)]),n.sorting=[new d.aQR("ordinamento",c.nI.Asc)],this.apiService.getFasceFilter(n).subscribe(a=>{this.fasce=a.data;for(let l of this.fasce)try{l.coloreHex=Z(l.colore).hex()}catch(r){}this.loadData()})})})}pubblica(){let o=new d.Zpt;o.width="80vw",o.disableClose=!0;let t=this.showModalDialog(Ct,o),n=t.componentInstance;n.dialogRef=t,n.portale=this.portale,n.oidTipoCamera=this.rq.oidTipoCamera,n.oidTariffa=this.rq.oidTariffa,n.dal=this.rq.dal,n.al=this.rq.al,t.afterClosed().subscribe(a=>{a&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}isWeekend(o){let t=u(o);return 6==t.day()||0==t.day()}checkDisponibilitaNonPubblicate(){this.apiService.checkDisponibilitaFutureNonPubblicate(this.rq.oidPortaleXAlbergo).subscribe(o=>{o.data?this.alert=new String("sbm.disponibilita.planning.disponibilitaNonPubblicate"):this.alert=null})}returnToToday(){this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.oneMonthFromToday),this.loadData(),this.selectedMonth=null,this.selectedYear=null}getDateNumber(o){return u(o).date()}dalChange(){if(u(this.rq.dal)>u(this.rq.al)){let o=u(this.rq.dal).add(1,"month");this.rq.al=this.getDate(o)}this.loadData()}alChange(){if(u(this.rq.al)<u(this.rq.dal)){let o=u(this.rq.al).add(-1,"month");this.rq.dal=this.getDate(o)}this.loadData()}onDisponibiliFocus(o,t){this.mouseStill=!0,this.resetInput(),o.inputVisibleDisponibili=t}onDisponibiliMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.inputVisibleDisponibili=t)}onFasciaMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.selectVisibleFascia=t)}onDurataMinimaSoggiornoFocus(o,t){this.mouseStill=!0,this.resetInput(),o.inputVisibleDurataMinimaSoggiorno=t}onDurataMinimaSoggiornoMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.inputVisibleDurataMinimaSoggiorno=t)}onDurataMassimaSoggiornoFocus(o,t){this.mouseStill=!0,this.resetInput(),o.inputVisibleDurataMassimaSoggiorno=t}onDurataMassimaSoggiornoMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.inputVisibleDurataMassimaSoggiorno=t)}resetInput(){if(null!=this.planning&&null!=this.planning.tipiCamere)for(let o of this.planning.tipiCamere)this.resetInputTipoCamera(o);this.fasciaSelectOpen=!1}resetInputTipoCamera(o){o.inputVisibleDisponibili=-1,o.selectVisibleFascia=-1,o.inputVisibleDurataMinimaSoggiorno=-1,o.inputVisibleDurataMassimaSoggiorno=-1}onUbicazioneChange(){null!=this.ubicazioneIstat&&this.ubicazioneIstat.oid>0?(this.getPortaliRQ.filters[0].value=this.ubicazioneIstat.oid.toString(),this.getPortali()):this.getPortaliRQ.filters[0].value=null}getBackgroundColor(o){if(this.tipoModifica==c.wc.Disponibili){if(o.disponibili<=0)return"#ff7a7a"}else if(this.tipoModifica==c.wc.DurataMinimaSoggiorno){if(o.durataMinimaSoggiorno>0)return"#fae996"}else if(this.tipoModifica==c.wc.DurataMassimaSoggiorno){if(o.durataMassimaSoggiorno>0)return"#fae996"}else{if(this.tipoModifica==c.wc.Stato)return o.stato==c.V6.Aperto?"#67d9a4":"#ff7a7a";if(this.tipoModifica==c.wc.Fascia)return o.fascia.coloreHex}return null}ngOnDestroy(){this.headerService.clearTitle(),this.sub.unsubscribe()}}function gce(i,o){if(1&i&&e._UZ(0,"img",24),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.iconaPortale,e.LSH)}}function hce(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.updateStato(a.oidPortale,a.tariffaOid,l.enumStatoPortale.Chiuso))}),e.TgZ(2,"i",26),e._uU(3,"power_settings_new"),e.qZA()(),e.TgZ(4,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.updateStato(a.oidPortale,a.tariffaOid,l.enumStatoPortale.Aperto))}),e.TgZ(5,"i",28),e._uU(6,"play_arrow"),e.qZA()(),e.BQk()}}function fce(i,o){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Cce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"mat-form-field",29)(2,"input",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.variazionePrezzo=a)})("input",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.checkPrezzo(a))}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"mat-form-field",31)(5,"mat-select",32),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.tipoVariazionePrezzo=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.checkPrezzo(a))}),e.YNc(6,fce,3,4,"mat-option",33),e.ALo(7,"selectEnum"),e.qZA()()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"sbm.disponibilita.planning.aumentoRiduzionePrezzo")),e.Q6J("ngModel",t.variazionePrezzo),e.xp6(3),e.Q6J("ngModel",t.tipoVariazionePrezzo),e.xp6(1),e.Q6J("ngForOf",e.xi3(7,6,n.enumTipoValore,"tipoValore"))}}function bce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"mat-checkbox",35),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.sbloccaStatoPortaleCollegatoMaster=a)}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.sbloccaStatoPortaleCollegatoMaster),e.xp6(1),e.Oqu(e.lcZ(3,2,"sbm.disponibilita.planning.isSbloccaStatoPortaleCollegatoMaster"))}}function vce(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"div",12),e.YNc(3,gce,1,1,"img",13),e._uU(4),e.qZA(),e.TgZ(5,"div",14),e.YNc(6,hce,7,0,"ng-container",15),e.qZA(),e.TgZ(7,"div",14)(8,"app-view-select",16),e.NdJ("valueChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.fascia=a)})("valueChange",function(){const l=e.CHM(t).$implicit;return e.KtG(l.oidFascia=l.fascia.oid)}),e.ALo(9,"translate"),e.qZA()(),e.YNc(10,Cce,8,9,"div",17),e.qZA(),e.TgZ(11,"div",2),e.YNc(12,bce,4,4,"div",18),e.TgZ(13,"div",19)(14,"div",20),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"mat-radio-group",21),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.isBloccaPrezzo=a)}),e.TgZ(18,"mat-radio-button",22),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-radio-button",22),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-radio-button",23),e._uU(25),e.ALo(26,"translate"),e.qZA()()()(),e.BQk()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngIf",!!t.iconaPortale),e.xp6(1),e.hij(" ",t.nomePortale+" - "+t.nomeTariffa," "),e.xp6(2),e.Q6J("ngIf",n.modificaStatoPortaleEnabled),e.xp6(2),e.Q6J("dataLoader",n.apiService.getFasceViewSelect())("value",t.fascia)("placeholder",e.lcZ(9,16,"bo.disponibilitaXPortaleXAlbergo.proprieta.fascia")),e.xp6(2),e.Q6J("ngIf",n.modificaPrezzoEnabled),e.xp6(2),e.Q6J("ngIf",n.portale.tipoPortale==n.enumTipoPortale.Master),e.xp6(3),e.Oqu(e.lcZ(16,18,"sbm.disponibilita.planning.isBloccaPrezzo")),e.xp6(2),e.Q6J("ngModel",t.isBloccaPrezzo),e.xp6(1),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(20,20,"sbm.disponibilita.planning.bloccato")),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(23,22,"sbm.disponibilita.planning.nonBloccato")),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Oqu(e.lcZ(26,24,"sbm.disponibilita.planning.invariato"))}}pl.\u0275fac=function(o){return new(o||pl)(e.Y36(A.s),e.Y36(ie.r),e.Y36(j.m),e.Y36(Oe.o),e.Y36(et),e.Y36(C.t))},pl.\u0275cmp=e.Xpm({type:pl,selectors:[["app-planning-tipo-camera"]],features:[e.qOj],decls:63,vars:58,consts:[[1,"float-right","mr-3","oggiButton-container"],["displayMember","nome",1,"mr-4",3,"block","disabled","dataLoader","value","placeholder","valueChange"],["mat-flat-button","","color","primary",3,"click"],[1,"p-3"],[3,"message","info"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["displayMember","nome",3,"dataLoader","value","placeholder","forceDownload","valueChange"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-4","pt-2"],["mat-flat-button","","color","primary","class","ml-2 mr-2",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"mb-3"],[3,"ngModel","ngModelChange"],["color","primary","class","mr-3",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mb-3",3,"ngModel","ngModelChange"],[1,"row","mb-2","mr-0","ml-0"],[1,"col-month-select","col-year-previous"],[1,"year-cell","border","rounded","p-1",3,"click"],[1,"align-middle"],["class","col-month-select",4,"ngFor","ngForOf"],[1,"col-month-select","col-year-next"],["class","position-relative",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],["mat-flat-button","","color","primary",1,"ml-2","mr-2",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"mt-2"],[1,"font-weight-bold"],["color","primary",1,"mr-3",3,"value"],[1,"col-month-select"],[1,"month-select-cell","rounded","p-1",3,"ngClass","click"],[1,"position-relative"],[1,"position-absolute","previous-buttons"],["mat-stroked-button","","color","blank",1,"mr-1",3,"click"],[1,"material-icons"],[1,"material-icons","ml-n3"],["mat-stroked-button","","color","blank",3,"click"],[1,"w-100","text-center","pt-2"],["mat-icon-button","",1,"align-middle",3,"disabled","click"],[1,"d-inline-block","align-middle"],[1,"position-absolute","next-buttons"],[1,"material-icons","mr-n3"],[1,"w-100","overflow-auto","border","rounded-xl","mt-3","bg-white"],[3,"mousemove","mouseleave"],[3,"mouseenter"],[1,"sticky-left","no-outline"],["class","td-mese",4,"ngFor","ngForOf"],[1,"sticky-left"],["class","td-giorno",3,"ngStyle",4,"ngFor","ngForOf"],[3,"hidden","mouseenter"],[1,"sticky-left","td-evento"],["class","td-evento",3,"backgroundColor","appInvertColor",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"td-mese"],["class","mese",4,"ngIf"],[1,"mese"],[1,"td-giorno",3,"ngStyle"],[1,"giorno"],[1,"td-evento",3,"appInvertColor"],[1,"sticky-left","font-weight-bold","pr-3","pl-3",3,"mouseenter"],["class","text-center",3,"ngClass","backgroundColor","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"text-center",3,"ngClass","click","mouseenter","mouseleave"],[3,"hidden"],["autocompleteOff","","type","number","class","planning-camera-input rounded","appAutofocus","",3,"value","width","disabled","input","blur","keyup.enter",4,"ngIf"],["tabindex","0","class","d-inline-block planning-camera-input rounded",3,"width","focus",4,"ngIf"],["class","planning-camera-input rounded",3,"ngModel","width","ngModelChange","selectionChange","click","openedChange",4,"ngIf"],["class","d-inline-block planning-camera-input span-fascia rounded",3,"width",4,"ngIf"],["autocompleteOff","","type","number","appAutofocus","",1,"planning-camera-input","rounded",3,"value","disabled","input","blur","keyup.enter"],["tabindex","0",1,"d-inline-block","planning-camera-input","rounded",3,"focus"],[1,"planning-camera-input","rounded",3,"ngModel","ngModelChange","selectionChange","click","openedChange"],["selectSearch",""],[3,"value","hidden",4,"ngFor","ngForOf"],[3,"value","hidden"],[1,"d-inline-block","planning-camera-input","span-fascia","rounded"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"app-view-select",1),e.NdJ("valueChange",function(a){return t.ubicazioneIstat=a})("valueChange",function(){return t.onUbicazioneChange()}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return t.returnToToday()}),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",3)(7,"app-alert",4),e.NdJ("info",function(){return t.pubblica()}),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"input",9),e.NdJ("ngModelChange",function(a){return t.rq.dal=a})("dateChange",function(){return t.dalChange(),t.selectedMonth=null,t.selectedYear=null}),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"mat-datepicker-toggle",10)(15,"mat-datepicker",null,11),e.qZA()(),e.TgZ(17,"div",7)(18,"mat-form-field",8)(19,"input",9),e.NdJ("ngModelChange",function(a){return t.rq.al=a})("dateChange",function(){return t.alChange(),t.selectedMonth=null,t.selectedYear=null}),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"mat-datepicker-toggle",10)(22,"mat-datepicker",null,12),e.qZA()(),e.TgZ(24,"div",7)(25,"app-view-select",13),e.NdJ("valueChange",function(a){return t.portale=a})("valueChange",function(){return t.onPortaleChange()}),e.ALo(26,"translate"),e.qZA()()(),e.TgZ(27,"div",6)(28,"div",7)(29,"mat-form-field",8)(30,"mat-select",14),e.NdJ("ngModelChange",function(a){return t.rq.oidTipoCamera=a})("selectionChange",function(){return t.loadData()}),e.ALo(31,"translate"),e._UZ(32,"mat-option",15),e.YNc(33,Yre,2,2,"mat-option",16),e.qZA()()(),e.TgZ(34,"div",7)(35,"mat-form-field",8)(36,"mat-select",14),e.NdJ("ngModelChange",function(a){return t.rq.oidTariffa=a})("selectionChange",function(){return t.loadData()}),e.ALo(37,"translate"),e._UZ(38,"mat-option",15),e.YNc(39,Rre,2,2,"mat-option",16),e.qZA()()(),e.TgZ(40,"div",17),e.YNc(41,Fre,3,3,"button",18),e.YNc(42,Hre,3,3,"button",19),e.qZA()(),e.YNc(43,Kre,6,4,"div",20),e.qZA(),e.TgZ(44,"div",21)(45,"mat-radio-group",22),e.NdJ("ngModelChange",function(a){return t.tipoModifica=a}),e.YNc(46,Gre,3,4,"mat-radio-button",23),e.ALo(47,"selectEnum"),e.qZA()(),e.TgZ(48,"mat-checkbox",24),e.NdJ("ngModelChange",function(a){return t.eventi=a}),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"div",25)(52,"div",26)(53,"div",27),e.NdJ("click",function(){return t.previousYearClick()}),e.TgZ(54,"span",28),e._uU(55),e.qZA()()(),e.YNc(56,Bre,4,6,"div",29),e.TgZ(57,"div",30)(58,"div",27),e.NdJ("click",function(){return t.nextYearClick()}),e.TgZ(59,"span",28),e._uU(60),e.qZA()()()(),e.YNc(61,_ce,44,7,"div",31),e.YNc(62,uce,4,3,"div",32),e.qZA()),2&o){const n=e.MAs(16),a=e.MAs(23);e.xp6(1),e.Q6J("block",!1)("disabled",t.ubicazioneIstatDisabled)("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.ubicazioneIstat)("placeholder",e.lcZ(2,39,"globals.ubicazioneIstat")),e.xp6(3),e.Oqu(e.lcZ(5,41,"sbm.disponibilita.planning.oggi")),e.xp6(3),e.Q6J("message",t.alert),e.xp6(5),e.s9C("placeholder",e.lcZ(13,43,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(20,45,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(t.getPortaliRQ,!1))("value",t.portale)("placeholder",e.lcZ(26,47,"sbm.disponibilita.planning.portale"))("forceDownload",!0),e.xp6(5),e.s9C("placeholder",e.lcZ(31,49,"sbm.disponibilita.planning.tipoCamera")),e.Q6J("ngModel",t.rq.oidTipoCamera),e.xp6(2),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",t.tipiCamera),e.xp6(3),e.s9C("placeholder",e.lcZ(37,51,"sbm.disponibilita.planning.tariffa")),e.Q6J("ngModel",t.rq.oidTariffa),e.xp6(2),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",t.tariffe),e.xp6(2),e.Q6J("ngIf",t.pubblicaDisponibilitaEnabled),e.xp6(1),e.Q6J("ngIf",t.modificaBlocchiEnabled),e.xp6(1),e.Q6J("ngIf",!!t.sessionService.getTipoPubblicazioneAttivitaAutomatica()),e.xp6(2),e.Q6J("ngModel",t.tipoModifica),e.xp6(1),e.Q6J("ngForOf",e.xi3(47,53,t.enumTipoModificaPlanningCamera,"tipoModificaPlanningCamera")),e.xp6(2),e.Q6J("ngModel",t.eventi),e.xp6(1),e.hij(" ",e.lcZ(50,56,"sbm.disponibilita.planning.eventi")," "),e.xp6(6),e.Oqu(t.currentYear-1),e.xp6(1),e.Q6J("ngForOf",t.months),e.xp6(4),e.Oqu(t.currentYear+1),e.xp6(1),e.Q6J("ngIf",null!=t.planning&&null!=t.planning.tipiCamere&&t.planning.tipiCamere.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.planning&&null!=t.planning.tipiCamere&&0==t.planning.tipiCamere.length)}},dependencies:[m.mk,m.sg,m.O5,m.PC,k.Z,w.X,gs.U,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,He.OY,He.vy,g.x8,_.Fj,_.JJ,_.On,nt,ne.d,R,m.rS,Te.A,K.H,z.X$],styles:['.td-giorno[_ngcontent-%COMP%]{font-size:small;text-align:center}.td-evento[_ngcontent-%COMP%]{font-size:small;text-align:center;height:30px!important}  .planning-camera-input .mat-select-arrow{border-right:0!important;border-top:0!important;border-left:1px!important;margin:0 1px!important}  .planning-camera-input .mat-select-value{font-size:15px!important;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,Liberation Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"!important}td[_ngcontent-%COMP%]{padding:4px;white-space:nowrap;background-color:#fff;border:1px solid #dddddd;width:50px;height:37px}.planning-camera-input[_ngcontent-%COMP%]{text-align:center;border-color:#d3d3d3;border-style:solid;border-width:thin;font-size:15px!important;background-color:#fff}.giorno[_ngcontent-%COMP%], .mese[_ngcontent-%COMP%]{display:inline-block!important;width:41px!important}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}select[_ngcontent-%COMP%]{-o-appearance:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.td-mese[_ngcontent-%COMP%]{border:none!important;background-color:transparent}.next-buttons[_ngcontent-%COMP%]{top:10px;right:0}.previous-buttons[_ngcontent-%COMP%]{top:10px;left:0}.sticky-left[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;z-index:1020;outline:1px solid #dddddd;border:none;outline-offset:-1px}.no-outline[_ngcontent-%COMP%]{outline:none;background-color:transparent!important}.oggiButton-container[_ngcontent-%COMP%]{margin-top:-40px}.span-fascia[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:bottom;padding-right:2px;padding-bottom:1px}.stato-bloccato[_ngcontent-%COMP%]{background-image:url(/assets/images/sbm/lock.png);background-size:cover;background-repeat:no-repeat}']});class dl extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.rqPrezzi=new d.WLZ,this.rqStato=new d.hCv,this.enumStatoPortale=c.V6,this.enumTipoValore=c.jy,this.statoPortaleUpdated=!1,this.modificaPrezzoEnabled=!0,this.modificaStatoPortaleEnabled=!0,this.sbloccaStatoPortaleCollegatoMaster=!1,this.enumTipoPortale=c.Q}ngOnInit(){this.setIsLoading(!0),this.rqPrezzi.dal=this.dal,this.rqPrezzi.al=this.al,this.rqPrezzi.isAggiornaTariffeCollegate=!0,this.rqPrezzi.prezzi=[];let o=new d.Tcy;o.oidPortale=this.portale.oid,o.nomePortale=this.portale.nome,o.iconaPortale=null!=this.portale.portale?this.portale.portale.urlImmagineIcona:"",o.tariffaOid=this.tariffa.oid,o.nomeTariffa=this.tariffa.nome,o.tipoCameraOid=this.tipoCamera.oid,this.rqPrezzi.prezzi.push(o),this.rqStato.dal=this.dal,this.rqStato.al=this.al;let t=new d.LU0;t.tipoCameraOid=this.tipoCamera.oid,this.rqStato.tariffe=[t],this.apiService.getTariffeCollegate(this.tipoCamera.oid,this.tariffa.oid).subscribe(a=>{if(a.data.length>0)for(let l of a.data){let r=new d.Tcy;r.oidPortale=l.portaleXAlbergo.oid,r.nomePortale=l.portaleXAlbergo.nome,r.iconaPortale=null!=l.portaleXAlbergo.portale?l.portaleXAlbergo.portale.urlImmagineIcona:"",r.tariffaOid=l.tariffaOTA.oid,r.nomeTariffa=l.tariffaOTA.descrizione,r.tipoCameraOid=l.tipoCameraOTA.oid,this.rqPrezzi.prezzi.push(r)}this.setIsLoading(!1)});let n=this.sessionService.getPermessiUtente();null!=n&&(this.modificaPrezzoEnabled=!n.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaPrezzoPlanning)),this.modificaStatoPortaleEnabled=!n.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoPortalePlanning)))}updateStato(o,t,n){this.showDialogConfirm("globals.effettuareOperazione").then(a=>{this.setIsLoading(!0),this.rqStato.dal=this.getDate(this.rqPrezzi.dal),this.rqStato.al=this.getDate(this.rqPrezzi.al),this.rqStato.oidPortale=o,this.rqStato.tariffe[0].tariffaOid=t,this.rqStato.tariffe[0].stato=n,this.rqStato.tariffe[0].isSbloccaStatoPortaleCollegatoMaster=this.sbloccaStatoPortaleCollegatoMaster,this.apiService.updateAllDisponibilita(this.rqStato).subscribe(()=>{this.statoPortaleUpdated=!0,this.showInfo("globals.operazioneCompletata"),this.setIsLoading(!1)})},a=>{})}updatePrezzi(){this.rqPrezzi.prezzi.some(o=>0!=o.variazionePrezzo||o.oidFascia>0||null!=o.isBloccaPrezzo)?(this.setIsLoading(!0),this.rqPrezzi.dal=this.getDate(this.rqPrezzi.dal),this.rqPrezzi.al=this.getDate(this.rqPrezzi.al),this.apiService.updatePrezzi(this.rqPrezzi).subscribe(()=>{let o=this.rqPrezzi.prezzi.filter(t=>t.oidPortale==this.portale.oid)[0];0!=o.variazionePrezzo||o.oidFascia>0||null!=o.isBloccaPrezzo?this.dialogRef.close(!0):this.dialogRef.close(this.statoPortaleUpdated),this.setIsLoading(!1)})):this.showError("globals.messages.inserireDati")}checkPrezzo(o){setTimeout(()=>{o.tipoVariazionePrezzo==c.jy.Percentuale&&o.variazionePrezzo<-100&&(o.variazionePrezzo=-100)},200)}}function Tce(i,o){if(1&i&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij("",t.descrizione," ")}}function xce(i,o){if(1&i&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij("",t.descrizione," ")}}function Zce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.pubblica())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.planning.pubblica")))}function Ace(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.aggiornaDisponibilita())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.opzioniPropagazione")))}function wce(i,o){if(1&i&&(e.TgZ(0,"div",33)(1,"span",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.disponibilita.planning.tipoPubblicazioneAttivitaAutomaticaAttiva")),e.xp6(3),e.Oqu(t.sessionService.getTipoPubblicazioneAttivitaAutomatica())}}dl.\u0275fac=function(o){return new(o||dl)(e.Y36(A.s),e.Y36(j.m))},dl.\u0275cmp=e.Xpm({type:dl,selectors:[["app-planning-tariffe-edit"]],inputs:{portale:"portale",tipoCamera:"tipoCamera",tariffa:"tariffa",dal:"dal",al:"al",dialogRef:"dialogRef"},features:[e.qOj],decls:23,vars:17,consts:[["mat-icon-button","",1,"modal-close-button",3,"disableRipple","click"],[1,"material-icons-round"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],[4,"ngFor","ngForOf"],[1,"text-right","mt-4"],["mat-flat-button","","color","primary",3,"click"],[1,"col-3","d-flex","align-items-center","font-weight-bold"],["class","portale-icon mr-1",3,"src",4,"ngIf"],[1,"col-3"],[4,"ngIf"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["class","col-3",4,"ngIf"],["class","col-6",4,"ngIf"],[1,"col-6"],[1,"mb-2","font-weight-bold"],[3,"ngModel","ngModelChange"],["color","primary",1,"mr-2",3,"value"],["color","primary",3,"value"],[1,"portale-icon","mr-1",3,"src"],["mat-mini-fab","",1,"closeButtonAggiornaDisponibilita","mr-3","mt-3",3,"click"],[1,"material-icons","closeIconAggiornaDisponibilita"],["mat-mini-fab","",1,"openButtonAggiornaDisponibilita","mt-3",3,"click"],[1,"material-icons","openIconAggiornaDisponibilita"],[1,"prezzo-input"],["autocompleteOff","","type","number","matInput","",3,"ngModel","placeholder","ngModelChange","input"],[1,"tipoValore-input","text-right"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary",3,"ngModel","ngModelChange"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return t.dialogRef.close(t.statoPortaleUpdated)}),e.TgZ(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"input",5),e.NdJ("ngModelChange",function(a){return t.rqPrezzi.dal=a}),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"mat-datepicker-toggle",6)(9,"mat-datepicker",null,7),e.qZA()(),e.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"input",5),e.NdJ("ngModelChange",function(a){return t.rqPrezzi.al=a}),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"mat-datepicker-toggle",6)(16,"mat-datepicker",null,8),e.qZA()()(),e.YNc(18,vce,27,26,"ng-container",9),e.TgZ(19,"div",10)(20,"button",11),e.NdJ("click",function(){return t.updatePrezzi()}),e._uU(21),e.ALo(22,"translate"),e.qZA()()),2&o){const n=e.MAs(10),a=e.MAs(17);e.Q6J("disableRipple",!0),e.xp6(6),e.s9C("placeholder",e.lcZ(7,11,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rqPrezzi.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(14,13,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rqPrezzi.al),e.xp6(2),e.Q6J("for",a),e.xp6(3),e.Q6J("ngForOf",t.rqPrezzi.prezzi),e.xp6(3),e.Oqu(e.lcZ(22,15,"globals.salva"))}},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,He.OY,He.vy,g.x8,_.Fj,_.wV,_.JJ,_.On,ne.d,Te.A,z.X$],styles:[".openButtonAggiornaDisponibilita[_ngcontent-%COMP%]{color:#fff;background-color:#61b95f;width:28px;height:28px;line-height:28px;box-shadow:none;margin-bottom:1px}  .openButtonAggiornaDisponibilita .mat-button-wrapper{padding:0!important}.closeButtonAggiornaDisponibilita[_ngcontent-%COMP%]{color:#fff;background-color:#d55152;width:28px;height:28px;line-height:28px;box-shadow:none;margin-bottom:1px}  .closeButtonAggiornaDisponibilita .mat-button-wrapper{padding:0!important}.openIconAggiornaDisponibilita[_ngcontent-%COMP%], .closeIconAggiornaDisponibilita[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.prezzo-input[_ngcontent-%COMP%]{width:calc(100% - 50px)}.tipoValore-input[_ngcontent-%COMP%]{width:50px}"]});const zce=function(i){return{"month-selected":i}};function Mce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",48)(1,"div",49),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw();return e.KtG(r.monthSelected(l))}),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,zce,a.selectedMonth==n&&a.selectedYear==a.currentYear)),e.xp6(1),e.hij(" ",e.lcZ(3,2,t)," ")}}function qce(i,o){if(1&i&&(e.TgZ(0,"div",83),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.tipoCameraHotel)}}function Pce(i,o){if(1&i&&(e.TgZ(0,"div",84),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCameraOTA.proprieta.disponibiliMassime")+": "+t.disponibiliMassime)}}function kce(i,o){if(1&i&&(e.TgZ(0,"b",87),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"momentFormat"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,e.Dn7(3,3,t,"MMMM YYYY",n.getLocale())))}}function Sce(i,o){if(1&i&&(e.TgZ(0,"td",85),e.YNc(1,kce,4,7,"b",86),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(0==n||1==a.getDateNumber(t))&&a.viewMonth(t))}}const yce=function(i){return{color:i}},Jce=function(i){return{"planning-giorno-selected":i}};function Ece(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",88),e.NdJ("click",function(a){const r=e.CHM(t).index,p=e.oxw().index,T=e.oxw(2);return a.stopPropagation(),e.KtG(T.onGiornoClick(r,p))})("mouseenter",function(){const l=e.CHM(t).index,r=e.oxw(3);return e.KtG(r.endIndex=l)}),e._uU(1),e.ALo(2,"momentFormat"),e._UZ(3,"br"),e.TgZ(4,"b",89),e._uU(5),e.ALo(6,"momentFormat"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw().index,l=e.oxw(2);e.Q6J("ngStyle",e.VKq(12,yce,l.isWeekend(t)?"#ff7a7a":null))("ngClass",e.VKq(14,Jce,l.checkGiornoSelected(n,a))),e.xp6(1),e.hij(" ",e.Dn7(2,4,t,"ddd",l.getLocale()),""),e.xp6(4),e.Oqu(e.Dn7(6,8,t,"DD",l.getLocale()))}}function Nce(i,o){if(1&i&&(e.TgZ(0,"td",90),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Udp("background-color",t.colore),e.Q6J("appInvertColor",t.colore),e.uIk("colspan",t.durata>0?t.durata:1),e.xp6(1),e.hij(" ",t.nome," ")}}function Oce(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(),r=l.index,p=l.$implicit,T=e.oxw(2);return e.KtG(T.updateDisponibilita(r,a,null,null,null,p.tariffe,null,null,null,null,T.enumStatoPortale.Chiuso,null,null,null,T.enumTipoModificaStatoPortaliCollegati.ChiudiEBlocca))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(),r=l.index,p=l.$implicit,T=e.oxw(2);return e.KtG(T.updateDisponibilita(r,a,null,null,null,p.tariffe,null,null,null,null,T.enumStatoPortale.Chiuso,null,null,null,T.enumTipoModificaStatoPortaliCollegati.ChiudiSenzaBloccare))}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.disponibilita.planning.chiudiEBloccaPortaliCollegati")),e.xp6(3),e.Oqu(e.lcZ(6,4,"sbm.disponibilita.planning.chiudiSenzaBloccarePortaliCollegati")))}function Lce(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(),r=l.index,p=l.$implicit,T=e.oxw(2);return e.KtG(T.updateDisponibilita(r,a,null,null,null,p.tariffe,null,null,null,null,T.enumStatoPortale.Aperto,null,null,null,T.enumTipoModificaStatoPortaliCollegati.Apri))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(),r=l.index,p=l.$implicit,T=e.oxw(2);return e.KtG(T.updateDisponibilita(r,a,null,null,null,p.tariffe,null,null,null,null,T.enumStatoPortale.Aperto,null,null,null,T.enumTipoModificaStatoPortaliCollegati.ApriNonBloccati))}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.disponibilita.planning.apriPortaliCollegati")),e.xp6(3),e.Oqu(e.lcZ(6,4,"sbm.disponibilita.planning.apriPortaliCollegatiNonBloccati")))}function Dce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",91),e.NdJ("click",function(){const a=e.CHM(t),l=a.index,r=a.$implicit,p=e.MAs(5),T=e.oxw(),L=T.index,G=T.$implicit,W=e.oxw(2);return e.KtG(W.onStatoClick(L,l,G.tariffe,r,p))}),e.TgZ(1,"span",92),e.ALo(2,"translate"),e._uU(3),e.qZA(),e._UZ(4,"div",93,94),e.TgZ(6,"mat-menu",95,96),e.YNc(8,Oce,7,6,"ng-container",43),e.YNc(9,Lce,7,6,"ng-container",43),e.qZA()()}if(2&i){const t=o.$implicit,n=e.MAs(7),a=e.oxw(3);e.Tol("cursor-pointer td-disponibiliHotel text-center "+a.getCssStato(t)),e.xp6(1),e.Udp("width",a.cellWidth+"px"),e.Q6J("matTooltip",t.empty||0==t.variazioneDisponibiliHotel?null:e.lcZ(2,9,"sbm.disponibilita.planning.variazioneDisponibiliHotel")+t.variazioneDisponibiliHotel),e.xp6(2),e.Oqu(t.empty?"":t.disponibiliHotel+(0!=t.variazioneDisponibiliHotel?" *":"")),e.xp6(1),e.Q6J("matMenuTriggerFor",n),e.xp6(4),e.Q6J("ngIf",!t.empty&&t.stato==a.enumStatoPortale.Aperto),e.xp6(1),e.Q6J("ngIf",t.empty||t.stato==a.enumStatoPortale.Chiuso)}}function Ice(i,o){if(1&i&&(e.TgZ(0,"td",98),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.empty?"":t.percentualeOccupazione," ")}}function Qce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",102),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.onDisponibiliInput(a.target))})("blur",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw(),L=T.index,G=T.$implicit,W=e.oxw(2);return e.KtG(W.onDisponibiliBlur(a.target,r.disponibili,L,p,G.tariffe))})("keyup.enter",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw(),L=T.index,G=T.$implicit,W=e.oxw(2);return e.KtG(W.onDisponibiliBlur(a.target,r.disponibili,L,p,G.tariffe))})("wheel",function(a){return a.preventDefault()}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("value",t.disponibili)("disabled",!n.modificaDisponibiliEnabled)}}function Uce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",103),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onDisponibiliFocus(l,a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.disponibili)}}function Yce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",99),e.NdJ("mouseenter",function(){const l=e.CHM(t).index,r=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.onDisponibiliMouseEnter(r,l))})("mouseleave",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.save=!1)}),e.YNc(1,Qce,1,2,"input",100),e.YNc(2,Uce,2,1,"span",101),e.qZA()}if(2&i){const t=o.index,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.inputVisibleDisponibili==t),e.xp6(1),e.Q6J("ngIf",n.inputVisibleDisponibili!=t)}}function Rce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",107),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.onVariazioneDisponibiliInput(a.target))})("blur",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw(),L=T.index,G=T.$implicit,W=e.oxw(2);return e.KtG(W.onVariazioneDisponibiliBlur(a.target,r.variazioneDisponibili,L,p,G.tariffe))})("keyup.enter",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw(),L=T.index,G=T.$implicit,W=e.oxw(2);return e.KtG(W.onVariazioneDisponibiliBlur(a.target,r.variazioneDisponibili,L,p,G.tariffe))})("wheel",function(a){return a.preventDefault()}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("value",t.variazioneDisponibili)}}function Fce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",108),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onVariazioneDisponibiliFocus(l,a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.variazioneDisponibili)}}function Hce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",104),e.NdJ("mouseenter",function(){const l=e.CHM(t).index,r=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.onVariazioneDisponibiliMouseEnter(r,l))})("mouseleave",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.save=!1)}),e.YNc(1,Rce,1,1,"input",105),e.YNc(2,Fce,2,1,"span",106),e.qZA()}if(2&i){const t=o.index,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.inputVisibleVariazioneDisponibili==t),e.xp6(1),e.Q6J("ngIf",n.inputVisibleVariazioneDisponibili!=t)}}function Kce(i,o){if(1&i&&(e.TgZ(0,"mat-option",116),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(2);e.Q6J("value",t.oid)("hidden",!(!n.value||t.nome&&t.nome.toLowerCase().includes(n.value.toLowerCase()))),e.xp6(1),e.hij(" ",t.nome," ")}}function Gce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-select",113),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.fascia.oid=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw(),l=a.index,r=a.$implicit,p=e.oxw(),T=p.index,L=p.$implicit,G=e.oxw(2);return e.KtG(G.updateDisponibilita(T,l,null,null,null,L.tariffe,null,null,null,null,null,r.fascia.oid,null,null,null))})("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.fasciaSelectOpen=!0)})("openedChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.fasciaSelectOpen=a)}),e._UZ(1,"app-select-search",null,114),e.TgZ(3,"mat-option",15),e._uU(4,"--"),e.qZA(),e.YNc(5,Kce,2,3,"mat-option",115),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.Q6J("ngModel",t.fascia.oid),e.xp6(3),e.Q6J("value",-1),e.xp6(2),e.Q6J("ngForOf",n.fasce)}}function $ce(i,o){if(1&i&&(e.TgZ(0,"span",117),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Udp("width",n.cellWidth+"px"),e.xp6(1),e.Oqu(-1==t.fascia.oid?"--":t.fascia.nome)}}const Ec=function(i){return{"background-color":i}};function Bce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",109),e.NdJ("mouseenter",function(){const l=e.CHM(t).index,r=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.onFasciaMouseEnter(r,l))}),e.YNc(1,Gce,6,5,"mat-select",110),e.YNc(2,$ce,2,3,"span",111),e._UZ(3,"div",112),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",a.selectVisibleFascia==n),e.xp6(1),e.Q6J("ngIf",a.selectVisibleFascia!=n),e.xp6(1),e.Q6J("ngStyle",e.VKq(3,Ec,t.fascia.coloreHex))}}const hs=function(i){return{"td-bloccato":i}};function Vce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",129),e.NdJ("click",function(){const a=e.CHM(t),l=a.index,r=a.$implicit,p=e.oxw().index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.modificaStatoPortaleEnabled?L.updateDisponibilita(T,l,p,null,null,null,null,null,null,null,r.stato==L.enumStatoPortale.Aperto?L.enumStatoPortale.Chiuso:L.enumStatoPortale.Aperto,null,null,null,null):null)}),e.TgZ(1,"span",130),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.Tol("cursor-pointer text-center "+n.getCssStatoPrezzo(t)),e.Q6J("ngClass",e.VKq(6,hs,t.isStatoBloccato)),e.xp6(1),e.Udp("background-color",n.getColoreStatoStatoPubblicazione(t)),e.xp6(1),e.Oqu(t.empty?"":t.infoRiga)}}function Xce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",136),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(6);return e.KtG(l.onPrezzoUsoSingolaInput(a.target))})("blur",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw(2).index,L=e.oxw().index,G=e.oxw(2);return e.KtG(G.onPrezzoUsoSingolaBlur(a.target,r.prezzoUsoSingola,L,p,T))})("keyup.enter",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw(2).index,L=e.oxw().index,G=e.oxw(2);return e.KtG(G.onPrezzoUsoSingolaBlur(a.target,r.prezzoUsoSingola,L,p,T))})("wheel",function(a){return a.preventDefault()}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(5);e.Q6J("value",t.prezzoUsoSingola)("disabled",!n.modificaPrezzoEnabled)}}function jce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",137),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(2).$implicit,r=e.oxw(3);return e.KtG(r.onPrezzoUsoSingolaFocus(l,a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.prezzoUsoSingola)}}function Wce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",132),e.NdJ("mouseenter",function(){const l=e.CHM(t).index,r=e.oxw(2).$implicit,p=e.oxw(3);return e.KtG(p.onPrezzoUsoSingolaMouseEnter(r,l))})("mouseleave",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.save=!1)}),e.TgZ(1,"div",133),e.YNc(2,Xce,1,2,"input",134),e.YNc(3,jce,2,1,"span",135),e.qZA()()}if(2&i){const t=o.index,n=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngIf",n.inputVisiblePrezzoUsoSingola==t),e.xp6(1),e.Q6J("ngIf",n.inputVisiblePrezzoUsoSingola!=t)}}function ese(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",123),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.resetInput())}),e.TgZ(2,"span",124),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,Wce,4,2,"td",131),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(e.lcZ(4,2,"sbm.disponibilita.planning.prezzoUsoSingola")),e.xp6(2),e.Q6J("ngForOf",t.prezzi)}}function tse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",139),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw(3);return a.hidden=!1,e.KtG(l.checkRestrizioniIndeterminate())}),e.TgZ(1,"i",140),e._uU(2,"keyboard_arrow_down"),e.qZA()()}2&i&&e.Q6J("disableRipple",!0)}function ise(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",139),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,l=e.oxw(3);return a.hidden=!0,e.KtG(l.checkRestrizioniIndeterminate())}),e.TgZ(1,"i",140),e._uU(2,"keyboard_arrow_up"),e.qZA()()}2&i&&e.Q6J("disableRipple",!0)}function ose(i,o){if(1&i&&(e.ynx(0),e.YNc(1,tse,3,1,"button",138),e.YNc(2,ise,3,1,"button",138),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.hidden),e.xp6(1),e.Q6J("ngIf",!t.hidden)}}function nse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",143),e.NdJ("click",function(a){return a.stopPropagation()})("input",function(a){e.CHM(t);const l=e.oxw(5);return e.KtG(l.onPrezzoInput(a.target))})("blur",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw().index,G=e.oxw(2);return e.KtG(G.onPrezzoBlur(a.target,r.prezzo,L,p,T))})("keyup.enter",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw().index,G=e.oxw(2);return e.KtG(G.onPrezzoBlur(a.target,r.prezzo,L,p,T))})("wheel",function(a){return a.preventDefault()}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(4);e.Q6J("value",t.prezzo)("disabled",!n.modificaPrezzoEnabled)}}function ase(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",137),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.onPrezzoFocus(l,a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.prezzo)}}function lse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",141),e.NdJ("click",function(){const a=e.CHM(t),l=a.$implicit,r=a.index,p=e.oxw().index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.editDisponibilita(l,T,r,p))})("mouseenter",function(){const l=e.CHM(t).index,r=e.oxw().$implicit,p=e.oxw(3);return e.KtG(p.onPrezzoMouseEnter(r,l))})("mouseleave",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.save=!1)}),e.TgZ(1,"div",133),e.YNc(2,nse,1,2,"input",142),e.YNc(3,ase,2,1,"span",135),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(3,hs,t.isPrezzoBloccato)),e.xp6(2),e.Q6J("ngIf",a.inputVisiblePrezzo==n),e.xp6(1),e.Q6J("ngIf",a.inputVisiblePrezzo!=n)}}function rse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",147),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(5);return e.KtG(l.onDurataMinimaSoggiornoInput(a.target))})("blur",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw().index,G=e.oxw(2);return e.KtG(G.onDurataMinimaSoggiornoBlur(a.target,r.durataMinimaSoggiorno,L,p,T))})("keyup.enter",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw().index,G=e.oxw(2);return e.KtG(G.onDurataMinimaSoggiornoBlur(a.target,r.durataMinimaSoggiorno,L,p,T))})("wheel",function(a){return a.preventDefault()}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(4);e.Q6J("value",t.durataMinimaSoggiorno<=0?"":t.durataMinimaSoggiorno)("disabled",!n.modificaMinMaxStayEnabled)}}function cse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",148),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.onDurataMinimaSoggiornoFocus(l,a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.durataMinimaSoggiorno<=0?"--":t.durataMinimaSoggiorno)}}function sse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",144),e.NdJ("mouseenter",function(){const l=e.CHM(t).index,r=e.oxw().$implicit,p=e.oxw(3);return e.KtG(p.onDurataMinimaSoggiornoMouseEnter(r,l))})("mouseleave",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.save=!1)}),e.YNc(1,rse,1,2,"input",145),e.YNc(2,cse,2,1,"span",146),e.qZA()}if(2&i){const t=o.index,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.inputVisibleDurataMinimaSoggiorno==t),e.xp6(1),e.Q6J("ngIf",n.inputVisibleDurataMinimaSoggiorno!=t)}}function pse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",151),e.NdJ("input",function(a){e.CHM(t);const l=e.oxw(5);return e.KtG(l.onDurataMassimaSoggiornoInput(a.target))})("blur",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw().index,G=e.oxw(2);return e.KtG(G.onDurataMassimaSoggiornoBlur(a.target,r.durataMassimaSoggiorno,L,p,T))})("keyup.enter",function(a){e.CHM(t);const l=e.oxw(),r=l.$implicit,p=l.index,T=e.oxw().index,L=e.oxw().index,G=e.oxw(2);return e.KtG(G.onDurataMassimaSoggiornoBlur(a.target,r.durataMassimaSoggiorno,L,p,T))})("wheel",function(a){return a.preventDefault()}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(4);e.Q6J("value",t.durataMassimaSoggiorno<=0?"":t.durataMassimaSoggiorno)("disabled",!n.modificaMinMaxStayEnabled)}}function dse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",152),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.onDurataMassimaSoggiornoFocus(l,a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.durataMassimaSoggiorno<=0?"--":t.durataMassimaSoggiorno)}}function mse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",144),e.NdJ("mouseenter",function(){const l=e.CHM(t).index,r=e.oxw().$implicit,p=e.oxw(3);return e.KtG(p.onDurataMassimaSoggiornoMouseEnter(r,l))})("mouseleave",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.save=!1)}),e.YNc(1,pse,1,2,"input",149),e.YNc(2,dse,2,1,"span",150),e.qZA()}if(2&i){const t=o.index,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.inputVisibleDurataMassimaSoggiorno==t),e.xp6(1),e.Q6J("ngIf",n.inputVisibleDurataMassimaSoggiorno!=t)}}function _se(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",153)(1,"div",154),e.NdJ("click",function(){const a=e.CHM(t),l=a.index,r=a.$implicit,p=e.oxw().index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.modificaStatoCtaCtdEnabled?L.updateDisponibilita(T,l,p,null,null,null,null,null,r.statoCta==L.enumStatoCtaCtd.Aperto?L.enumStatoCtaCtd.Chiuso:L.enumStatoCtaCtd.Aperto,null,null,null,null,null,null):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("ngStyle",e.VKq(1,Ec,t.statoCta==n.enumStatoCtaCtd.Aperto?"#67d9a4":"#ff7a7a"))}}function use(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",153)(1,"div",154),e.NdJ("click",function(){const a=e.CHM(t),l=a.index,r=a.$implicit,p=e.oxw().index,T=e.oxw().index,L=e.oxw(2);return e.KtG(L.modificaStatoCtaCtdEnabled?L.updateDisponibilita(T,l,p,null,null,null,null,null,null,r.statoCtd==L.enumStatoCtaCtd.Aperto?L.enumStatoCtaCtd.Chiuso:L.enumStatoCtaCtd.Aperto,null,null,null,null,null):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("ngStyle",e.VKq(1,Ec,t.statoCtd==n.enumStatoCtaCtd.Aperto?"#67d9a4":"#ff7a7a"))}}function gse(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",118),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.resetInput())}),e.TgZ(2,"td",119)(3,"div",120),e._uU(4),e.qZA(),e.TgZ(5,"i",121),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.modificaTariffa(r,l))}),e.qZA()(),e.YNc(6,Vce,3,8,"td",122),e.qZA(),e.YNc(7,ese,6,4,"tr",43),e.TgZ(8,"tr")(9,"td",123),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.resetInput())}),e.YNc(10,ose,3,2,"ng-container",43),e.TgZ(11,"span",124),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.YNc(14,lse,4,5,"td",125),e.qZA(),e.TgZ(15,"tr",79)(16,"td",77),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.resetInput())}),e.TgZ(17,"span",126),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.YNc(20,sse,3,2,"td",127),e.qZA(),e.TgZ(21,"tr",79)(22,"td",77),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.resetInput())}),e.TgZ(23,"span",126),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.YNc(26,mse,3,2,"td",127),e.qZA(),e.TgZ(27,"tr",71),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.resetInput())}),e.TgZ(28,"td",69)(29,"span",126),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e.YNc(32,_se,2,3,"td",128),e.qZA(),e.TgZ(33,"tr",71),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.resetInput())}),e.TgZ(34,"td",69)(35,"span",126),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.YNc(38,use,2,3,"td",128),e.qZA(),e.BQk()}if(2&i){const t=o.$implicit,n=e.oxw().$implicit,a=e.oxw(2);e.xp6(4),e.Oqu(t.nome),e.xp6(2),e.Q6J("ngForOf",t.prezzi),e.xp6(1),e.Q6J("ngIf",n.isUsoSingola),e.xp6(3),e.Q6J("ngIf",a.portale.isAttivoDurataSoggiornoMinimo||a.portale.isAttivoDurataSoggiornoMassimo||a.portale.isAttivoCta||a.portale.isAttivoCtd),e.xp6(2),e.Oqu(e.lcZ(13,18,"sbm.disponibilita.planning.prezzo")),e.xp6(2),e.Q6J("ngForOf",t.prezzi),e.xp6(1),e.Q6J("hidden",t.hidden||!a.portale.isAttivoDurataSoggiornoMinimo),e.xp6(3),e.Oqu(e.lcZ(19,20,"sbm.disponibilita.planning.durataMinSoggiorno")),e.xp6(2),e.Q6J("ngForOf",t.prezzi),e.xp6(1),e.Q6J("hidden",t.hidden||!a.portale.isAttivoDurataSoggiornoMassimo),e.xp6(3),e.Oqu(e.lcZ(25,22,"sbm.disponibilita.planning.durataMaxSoggiorno")),e.xp6(2),e.Q6J("ngForOf",t.prezzi),e.xp6(1),e.Q6J("hidden",t.hidden||!a.portale.isAttivoCta),e.xp6(3),e.Oqu(e.lcZ(31,24,"sbm.disponibilita.planning.statoCta")),e.xp6(2),e.Q6J("ngForOf",t.prezzi),e.xp6(1),e.Q6J("hidden",t.hidden||!a.portale.isAttivoCtd),e.xp6(3),e.Oqu(e.lcZ(37,26,"sbm.disponibilita.planning.statoCtd")),e.xp6(2),e.Q6J("ngForOf",t.prezzi)}}function hse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card",51)(1,"mat-card-title",52)(2,"div"),e._uU(3),e.qZA(),e.YNc(4,qce,2,1,"div",53),e.YNc(5,Pce,3,3,"div",54),e.TgZ(6,"div",55)(7,"button",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.cellWidth=a.cellWidth-10)}),e.TgZ(8,"i",57),e._uU(9,"remove"),e.qZA()(),e.TgZ(10,"span",58),e._uU(11,"Zoom"),e.qZA(),e.TgZ(12,"button",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.cellWidth=a.cellWidth+10)}),e.TgZ(13,"i",57),e._uU(14,"add"),e.qZA()()(),e.TgZ(15,"div",59)(16,"button",60),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.previous30Days())}),e.TgZ(17,"span",57),e._uU(18,"keyboard_arrow_left"),e.qZA(),e.TgZ(19,"span",61),e._uU(20,"keyboard_arrow_left"),e.qZA(),e._uU(21," 30gg "),e.qZA(),e.TgZ(22,"button",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.previous15Days())}),e.TgZ(23,"span",57),e._uU(24,"keyboard_arrow_left"),e.qZA(),e._uU(25," 15gg "),e.qZA()(),e.TgZ(26,"div",63)(27,"button",60),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.next15Days())}),e._uU(28," 15gg "),e.TgZ(29,"span",57),e._uU(30,"keyboard_arrow_right"),e.qZA()(),e.TgZ(31,"button",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.next30Days())}),e._uU(32," 30gg "),e.TgZ(33,"span",64),e._uU(34,"keyboard_arrow_right"),e.qZA(),e.TgZ(35,"span",57),e._uU(36,"keyboard_arrow_right"),e.qZA()()()(),e.TgZ(37,"mat-card-content")(38,"table",65),e.NdJ("mousemove",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.mouseStill=!1)})("mouseleave",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updatingDisponibilita||a.fasciaSelectOpen?null:a.resetInput())}),e.TgZ(39,"tr",66),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetInput())}),e._UZ(40,"td",67),e.YNc(41,Sce,2,1,"td",68),e.qZA(),e.TgZ(42,"tr",66),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetInput())}),e._UZ(43,"td",69),e.YNc(44,Ece,7,16,"td",70),e.qZA(),e.TgZ(45,"tr",71),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetInput())}),e.TgZ(46,"td",69),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.YNc(49,Nce,2,5,"td",72),e.qZA(),e.TgZ(50,"tr",73),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetInput())}),e.TgZ(51,"td",69),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.YNc(54,Dce,10,11,"td",74),e.qZA(),e.TgZ(55,"tr",75),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetInput())}),e.TgZ(56,"td",69),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.YNc(59,Ice,2,1,"td",76),e.qZA(),e.TgZ(60,"tr")(61,"td",77),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetInput())}),e._uU(62),e.ALo(63,"translate"),e.qZA(),e.YNc(64,Yce,3,2,"td",78),e.qZA(),e.TgZ(65,"tr",79)(66,"td",77),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetInput())}),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.YNc(69,Hce,3,2,"td",80),e.qZA(),e.TgZ(70,"tr",79)(71,"td",77),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetInput())}),e._uU(72),e.ALo(73,"translate"),e.qZA(),e.YNc(74,Bce,4,5,"td",81),e.qZA(),e.YNc(75,gse,39,28,"ng-container",82),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.nome),e.xp6(1),e.Q6J("ngIf",!!t.tipoCameraHotel),e.xp6(1),e.Q6J("ngIf",t.disponibiliMassime>0),e.xp6(2),e.Q6J("disabled",n.cellWidth<=35),e.xp6(5),e.Q6J("disabled",n.cellWidth>=95),e.xp6(29),e.Q6J("ngForOf",n.planning.giorni),e.xp6(3),e.Q6J("ngForOf",n.planning.giorni),e.xp6(1),e.Q6J("hidden",!n.eventi),e.xp6(2),e.Oqu(e.lcZ(48,25,"sbm.disponibilita.planning.eventi")),e.xp6(2),e.Q6J("ngForOf",n.planning.eventi),e.xp6(1),e.Q6J("hidden",!n.disponibili),e.xp6(2),e.Oqu(e.lcZ(53,27,"bo.disponibilitaXPortaleXAlbergo.proprieta.disponibili")),e.xp6(2),e.Q6J("ngForOf",t.giorni),e.xp6(1),e.Q6J("hidden",!n.occupazione),e.xp6(2),e.hij("",e.lcZ(58,29,"bo.disponibilitaXPortaleXAlbergo.proprieta.percentualeOccupazione")," "),e.xp6(2),e.Q6J("ngForOf",t.giorni),e.xp6(3),e.hij(" ",e.lcZ(63,31,"bo.disponibilitaXPortaleXAlbergo.proprieta.pubblicate"),""),e.xp6(2),e.Q6J("ngForOf",t.giorni),e.xp6(1),e.Q6J("hidden",!n.portale.isAttivoVariazioneDisponibili),e.xp6(2),e.hij(" ",e.lcZ(68,33,"bo.disponibilitaXPortaleXAlbergo.proprieta.variazioneDisponibili"),""),e.xp6(2),e.Q6J("ngForOf",t.giorni),e.xp6(1),e.Q6J("hidden",!n.portale.isAttivaFascia),e.xp6(2),e.Oqu(e.lcZ(73,35,"sbm.disponibilita.planning.fascia")),e.xp6(2),e.Q6J("ngForOf",t.giorni),e.xp6(1),e.Q6J("ngForOf",t.tariffe)}}function fse(i,o){if(1&i&&(e.ynx(0),e.YNc(1,hse,76,37,"mat-card",50),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.planning.tipiCamere)}}function Cse(i,o){1&i&&(e.TgZ(0,"div",155)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.disponibilita.planning.nessunaDisponibilita")))}class ml extends f.H{constructor(o,t,n,a,l,r,p){super(),this.apiService=o,this.headerService=t,this.sessionService=n,this.translationService=a,this.parametriService=l,this.pubblicazioneService=r,this.utility=p,this.portale=new v.$Ys,this.tipiCamera=[],this.tariffe=[],this.fasce=[],this.save=!1,this.months=[],this.disponibili=!0,this.occupazione=!0,this.restrizioniChecked=!1,this.restrizioniIndeterminate=!1,this.eventi=!1,this.enumStatoPortale=c.V6,this.enumStatoPubblicazione=c.Eq,this.enumStatoCtaCtd=c.L5,this.pubblicaDisponibilitaEnabled=!0,this.modificaBlocchiEnabled=!0,this.modificaDisponibiliEnabled=!0,this.modificaVariazioneDisponibiliEnabled=!0,this.modificaPrezzoEnabled=!0,this.modificaStatoCtaCtdEnabled=!0,this.modificaStatoPortaleEnabled=!0,this.modificaMinMaxStayEnabled=!0,this.mouseStill=!1,this.startIndex=null,this.endIndex=null,this.cameraIndex=null,this.updatingDisponibilita=!1,this.fasciaSelectOpen=!1,this.getPortaliRQ=d.k$g.fromFilters([new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,null,c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)]),this.cellWidth=35,this.ubicazioneIstatDisabled=!1,this.enumTipoModificaStatoPortaliCollegati=c.Lo}ngOnInit(){this.headerService.setTitle("sbm.disponibilita.planning.title"),this.albergo=this.sessionService.getAlbergo();try{this.albergo.colorePlanningGiornoNonPubblicatoHex=Z(this.albergo.colorePlanningGiornoNonPubblicato).hex(),this.albergo.colorePlanningGiornoModificatoDaPubblicareHex=Z(this.albergo.colorePlanningGiornoModificatoDaPubblicare).hex(),this.albergo.colorePlanningGiornoPubblicatoParzialmenteHex=Z(this.albergo.colorePlanningGiornoPubblicatoParzialmente).hex()}catch(n){}this.rq=new d.zhW,this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.oneMonthFromToday),this.rq.oidTipoCamera=-1,this.rq.oidTariffa=-1,this.rq.oidAlbergo=this.albergo.oid,this.currentYear=u().year(),this.fillMonths(),this.occupazione=null==this.parametriService.parametri.isPercentualeOccupazioneChecked||this.parametriService.parametri.isPercentualeOccupazioneChecked,this.disponibili=null==this.parametriService.parametri.isDisponibiliChecked||this.parametriService.parametri.isDisponibiliChecked,this.isRestrizioniChecked=null!=this.parametriService.parametri.isRestrizioniChecked&&this.parametriService.parametri.isRestrizioniChecked,this.setIsLoading(!0);let o=this.sessionService.getUbicazioneIstat();null!=o&&(this.getPortaliRQ.filters[0].value=o.oid.toString(),this.ubicazioneIstatDisabled=!0,this.ubicazioneIstat=o),this.getPortali(),this.sub=this.translationService.languageChanged.subscribe(()=>{this.fillMonths()});let t=this.sessionService.getPermessiUtente();null!=t&&(this.pubblicaDisponibilitaEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.PubblicazioneDisponibilita)),this.modificaBlocchiEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaBlocchiPlanning)),this.modificaPrezzoEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaPrezzoPlanning)),this.modificaStatoCtaCtdEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoCtaCtdPlanning)),this.modificaStatoPortaleEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoPortalePlanning)),this.modificaMinMaxStayEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaMinMaxStayPlanning))),this.sessionService.isPubblicaWS()&&(this.pubblicaDisponibilitaEnabled=!1),this.modificaDisponibiliEnabled=this.sessionService.isModificaDisponibiliEnabled(),this.modificaVariazioneDisponibiliEnabled=this.sessionService.isModificaVariazioneDisponibiliEnabled(),this.sub1=this.pubblicazioneService.onPubblicazioneFinished.subscribe(n=>{n.oid==this.portale.oid&&this.loadData()})}getPortali(){this.setIsLoading(!0),this.apiService.getPortaliXAlbergoViewSelect(this.getPortaliRQ,!1).subscribe(o=>{o.data.length>0?(this.portale=o.data[0],this.modificaDisponibiliEnabled=this.portale.isModificaDisponibiliAttiva,this.rq.oidPortaleXAlbergo=this.portale.oid,this.checkDisponibilitaNonPubblicate(),this.apiService.getTipiCameraOTA(this.rq.oidPortaleXAlbergo).subscribe(t=>{this.tipiCamera=t.data,this.apiService.getTariffeOTA(this.rq.oidPortaleXAlbergo).subscribe(n=>{this.tariffe=n.data;let a=new d.k$g;null!=this.portale.ubicazioneIstat&&(a.filters=[new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,this.portale.ubicazioneIstat.oid.toString(),c.NM.Number)]),a.sorting=[new d.aQR("ordinamento",c.nI.Asc)],this.apiService.getFasceFilter(a).subscribe(l=>{this.fasce=l.data;for(let r of this.fasce)try{r.coloreHex=Z(r.colore).hex()}catch(p){}this.loadData()})})})):this.setIsLoading(!1)})}dalChange(){u(this.rq.dal)>u(this.rq.al)&&(this.rq.al=this.getDate(u(this.rq.dal).add(1,"month"))),this.loadData()}alChange(){u(this.rq.al)<u(this.rq.dal)&&(this.rq.dal=this.getDate(u(this.rq.al).add(-1,"month"))),this.loadData()}fillMonths(){this.months=[];for(let o=0;o<12;o++)this.months.push(u().set("month",o).format("MMM"))}nextYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear++,this.setIsLoading(!1)},500)}previousYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear--,this.setIsLoading(!1)},500)}monthSelected(o){let t=u().set("year",this.currentYear).set("month",o).set("date",1);this.rq.dal=this.getDate(t),this.rq.al=this.getDate(t.set("date",t.daysInMonth())),this.selectedMonth=o,this.selectedYear=this.currentYear,this.loadData()}previous30Days(){this.rq.dal=this.getDate(u(this.rq.dal).subtract(30,"day")),this.rq.al=this.getDate(u(this.rq.al).subtract(30,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}previous15Days(){this.rq.dal=this.getDate(u(this.rq.dal).subtract(15,"day")),this.rq.al=this.getDate(u(this.rq.al).subtract(15,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}next15Days(){this.rq.dal=this.getDate(u(this.rq.dal).add(15,"day")),this.rq.al=this.getDate(u(this.rq.al).add(15,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}next30Days(){this.rq.dal=this.getDate(u(this.rq.dal).add(30,"day")),this.rq.al=this.getDate(u(this.rq.al).add(30,"day")),this.loadData(),this.selectedMonth=null,this.selectedYear=null}loadData(){this.setIsLoading(!0),this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.apiService.getPlanning(this.rq).subscribe(o=>{this.planning=o.data,this.isRestrizioniChecked?this.onRestrizioniChange(!0):this.onRestrizioniChange(!1),this.setIsLoading(!1)})}getCssStato(o){return o.empty?"vuoto":o.isStatoTariffeDifferente?"misto":o.stato==c.V6.Aperto?"aperto":o.stato==c.V6.Chiuso?"chiuso":""}getCssStatoPrezzo(o){if(o.empty)return"vuoto";if(o.infoRiga){if(o.infoRiga.includes("!"))return"disp0";if(o.infoRiga.includes("*")){if(o.stato==c.V6.Aperto)return"restrizioni";if(o.stato==c.V6.Chiuso)return"chiuso"}else{if(o.stato==c.V6.Aperto)return"aperto";if(o.stato==c.V6.Chiuso)return"chiuso"}}else{if(o.stato==c.V6.Aperto)return"aperto";if(o.stato==c.V6.Chiuso)return"chiuso"}return""}getColoreStatoStatoPubblicazione(o){if(!o.empty){if(o.statoPubblicazione==c.Eq.ModificatoDaPubblicare)return this.albergo.colorePlanningGiornoModificatoDaPubblicareHex?this.albergo.colorePlanningGiornoModificatoDaPubblicareHex:"#FFFF00";if(o.statoPubblicazione==c.Eq.NonPubblicato)return this.albergo.colorePlanningGiornoNonPubblicatoHex?this.albergo.colorePlanningGiornoNonPubblicatoHex:"#FF0000";if(o.statoPubblicazione==c.Eq.PubblicatoParzialmente)return this.albergo.colorePlanningGiornoPubblicatoParzialmenteHex?this.albergo.colorePlanningGiornoPubblicatoParzialmenteHex:"#FFA500"}return""}aggiornaDisponibilita(o=this.rq.dal,t=this.rq.al,n,a){let l=new d.Zpt;l.width="70vw",l.disableClose=!0,l.panelClass="grey-background-dialog";let r=this.showModalDialog(kt,l),p=r.componentInstance;p.dalDate=o,p.alDate=t,p.portale=this.portale,n>0&&(p.selectedTipiCameraAggiornaDisponibili=[n],p.selectedTipiCamera=[n]),null!=a&&(p.selectedTariffe=a),p.dialogRef=r,r.afterClosed().subscribe(T=>{T&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}updateDisponibilita(o,t,n,a,l,r,p,T,L,G,W,be,Ze,Je,$e){if(null!=l||null!=a||null!=be||null!=p||null!=T||null!=L||null!=G||null!=W||null!=Ze||null!=Je||null!=$e){this.updatingDisponibilita=!0,this.setIsLoading(!0);let _t=this.planning.tipiCamere[o].oid,vt=null,Tt=null;null!=n?(vt=this.planning.tipiCamere[o].tariffe[n].oid,Tt=this.planning.tipiCamere[o].tariffe[n].prezzi[t].data):Tt=this.planning.tipiCamere[o].giorni[t].data;let Re=new d.fCT;Re.disponibilita=new v.fq$,Re.disponibilita.portaleXAlbergo=new v.$Ys(this.rq.oidPortaleXAlbergo),Re.disponibilita.tipoCameraOTA=new v.OR4(_t),null!=vt&&(Re.disponibilita.tariffaOTA=new v.HfG(vt)),null!=a&&(Re.disponibilita.disponibili=a,this.planning.tipiCamere[o].giorni[t].disponibili=a),null!=Je&&(Re.disponibilita.variazioneDisponibili=Je,this.planning.tipiCamere[o].giorni[t].variazioneDisponibili=Je),null!=l&&(Re.disponibilita.prezzo=l),null!=Ze&&(Re.disponibilita.prezzoUsoSingola=Ze),null!=be&&(Re.disponibilita.fasciaAttiva=be>0?this.utility.findItemByOid(this.fasce,be):new v.nnO(-1),this.planning.tipiCamere[o].giorni[t].fascia=Object.assign({},Re.disponibilita.fasciaAttiva)),null!=p&&(Re.disponibilita.durataMinimaSoggiorno=p),null!=T&&(Re.disponibilita.durataMassimaSoggiorno=T),null!=L&&(Re.disponibilita.statoCta=L),null!=G&&(Re.disponibilita.statoCtd=G),null!=W&&(Re.disponibilita.statoPortaleXAlbergo=W,null==n&&(this.planning.tipiCamere[o].giorni[t].stato=W)),null!=$e&&(Re.disponibilita.tipoModificaStatoPortaliCollegati=$e),Re.disponibilita.giorno=this.getDate(Tt),null!=r&&(Re.tariffe=r),this.apiService.updateDisponibilita(Re).subscribe(Kt=>{if(null!=Kt.data){if(null==n){if(Kt.data.length==this.planning.tipiCamere[o].tariffe.length){let Ii=0;for(let pc of this.planning.tipiCamere[o].tariffe)pc.prezzi[t]=new d.M9J(Kt.data[Ii]),Ii++}}else if(Kt.data.length>0){this.planning.tipiCamere[o].tariffe[n].prezzi[t]=new d.M9J(Kt.data[0]);let Ii=Kt.data.slice(1);for(let pc of Ii)if(null!=pc.tariffaOTA){let ws=this.planning.tipiCamere[o].tariffe.find(eMe=>eMe.oid==pc.tariffaOTA.oid);null!=ws&&(ws.prezzi[t]=new d.M9J(pc))}}let Wze=this.planning.tipiCamere[o].tariffe[0].prezzi[t].stato;this.planning.tipiCamere[o].giorni[t].isStatoTariffeDifferente=!1,this.planning.tipiCamere[o].giorni[t].empty=!1;for(let Ii of this.planning.tipiCamere[o].tariffe)if(Ii.prezzi[t].stato!=Wze){this.planning.tipiCamere[o].giorni[t].isStatoTariffeDifferente=!0;break}}this.checkDisponibilitaNonPubblicate(),this.save=!1,this.setIsLoading(!1),setTimeout(()=>{this.updatingDisponibilita=!1},200)})}else this.save=!1}viewMonth(o){return u(o).month()==u(this.rq.al).month()?u(this.rq.al).date()-u(o).date()>=2:u(o).daysInMonth()-u(o).date()>=2}onDisponibiliInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),this.save=!0}onDisponibiliBlur(o,t,n,a,l){""==o.value?(this.save=!1,o.value=t.toString()):this.save&&this.updateDisponibilita(n,a,null,+o.value,null,l,null,null,null,null,null,null,null,null,null)}onVariazioneDisponibiliInput(o){+o.value<-100?o.value="-100":+o.value>100&&(o.value="100"),this.save=!0}onVariazioneDisponibiliBlur(o,t,n,a,l){""==o.value?(this.save=!1,o.value=t.toString()):this.save&&this.updateDisponibilita(n,a,null,null,null,l,null,null,null,null,null,null,null,+o.value,null)}onPrezzoInput(o){+o.value<0&&(o.value="0"),this.save=!0}onPrezzoBlur(o,t,n,a,l){""==o.value?(this.save=!1,o.value=t.toString()):this.save&&(this.planning.tipiCamere[n].tariffe[l].prezzi[a].prezzo=o.value,this.updateDisponibilita(n,a,l,null,+o.value,null,null,null,null,null,null,null,null,null,null))}onPrezzoUsoSingolaInput(o){+o.value<0&&(o.value="0"),this.save=!0}onPrezzoUsoSingolaBlur(o,t,n,a,l){""==o.value?(this.save=!1,o.value=t.toString()):this.save&&(this.planning.tipiCamere[n].tariffe[l].prezzi[a].prezzoUsoSingola=o.value,this.updateDisponibilita(n,a,l,null,null,null,null,null,null,null,null,null,+o.value,null,null))}onDurataMinimaSoggiornoInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),this.save=!0}onDurataMinimaSoggiornoBlur(o,t,n,a,l){""==o.value?(this.save=!1,o.value=t<=0?"":t.toString()):this.save&&(this.planning.tipiCamere[n].tariffe[l].prezzi[a].durataMinimaSoggiorno=o.value,this.updateDisponibilita(n,a,l,null,null,null,+o.value,null,null,null,null,null,null,null,null)),+o.value<=0&&(o.value="")}onDurataMassimaSoggiornoInput(o){+o.value<0?o.value="0":+o.value>100&&(o.value="100"),this.save=!0}onDurataMassimaSoggiornoBlur(o,t,n,a,l){""==o.value?(this.save=!1,o.value=t<=0?"":t.toString()):this.save&&(this.planning.tipiCamere[n].tariffe[l].prezzi[a].durataMassimaSoggiorno=o.value,this.updateDisponibilita(n,a,l,null,null,null,null,+o.value,null,null,null,null,null,null,null)),+o.value<=0&&(o.value="")}onPortaleChange(){this.setIsLoading(!0),this.modificaDisponibiliEnabled=this.portale.isModificaDisponibiliAttiva,this.rq.oidPortaleXAlbergo=this.portale.oid,this.rq.oidTipoCamera=-1,this.rq.oidTariffa=-1,this.checkDisponibilitaNonPubblicate(),this.apiService.getTipiCameraOTA(this.rq.oidPortaleXAlbergo).subscribe(o=>{this.tipiCamera=o.data,this.apiService.getTariffeOTA(this.rq.oidPortaleXAlbergo).subscribe(t=>{this.tariffe=t.data;let n=new d.k$g;null!=this.portale.ubicazioneIstat&&(n.filters=[new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,this.portale.ubicazioneIstat.oid.toString(),c.NM.Number)]),n.sorting=[new d.aQR("ordinamento",c.nI.Asc)],this.apiService.getFasceFilter(n).subscribe(a=>{this.fasce=a.data;for(let l of this.fasce)try{l.coloreHex=Z(l.colore).hex()}catch(r){}this.loadData()})})})}pubblica(){let o=new d.Zpt;o.width="80vw",o.disableClose=!0;let t=this.showModalDialog(Ct,o),n=t.componentInstance;n.dialogRef=t,n.portale=this.portale,n.oidTipoCamera=this.rq.oidTipoCamera,n.oidTariffa=this.rq.oidTariffa,n.dal=this.rq.dal,n.al=this.rq.al,t.afterClosed().subscribe(a=>{a&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}editDisponibilita(o,t,n,a){let l=new d.Zpt;l.width="70vw";let r=this.showModalDialog(Ei,l),p=r.componentInstance,T=new v.fq$(o.oid);T.portaleXAlbergo=new v.$Ys(this.rq.oidPortaleXAlbergo),T.portaleXAlbergo.nome=this.portale.nome,T.tipoCameraOTA=new v.OR4(this.planning.tipiCamere[t].oid),T.tipoCameraOTA.descrizione=this.planning.tipiCamere[t].nome,T.tariffaOTA=new v.HfG(this.planning.tipiCamere[t].tariffe[a].oid),T.tariffaOTA.descrizione=this.planning.tipiCamere[t].tariffe[a].nome,T.giorno=this.getDate(this.planning.tipiCamere[t].tariffe[a].prezzi[n].data),T.prezzo=o.prezzo,T.prezzoUsoSingola=o.prezzoUsoSingola,T.statoCta=o.statoCta,T.statoCtd=o.statoCtd,T.statoPortaleXAlbergo=o.stato,T.durataMinimaSoggiorno=o.durataMinimaSoggiorno,T.durataMassimaSoggiorno=o.durataMassimaSoggiorno,T.isPrezzoBloccato=o.isPrezzoBloccato,T.isStatoPortaleXAlbergoBloccato=o.isStatoBloccato,o.oidFascia>0&&(T.fasciaAttiva=this.utility.findItemByOid(this.fasce,o.oidFascia)),p.dispo=T,p.dialogRef=r,r.afterClosed().subscribe(L=>{null!=L&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}onRestrizioniChange(o){null!=this.planning&&null!=this.planning.tipiCamere&&(o?(this.planning.tipiCamere.forEach(t=>null!=t.tariffe?t.tariffe.forEach(n=>n.hidden=!1):null),this.restrizioniChecked=!0):(this.planning.tipiCamere.forEach(t=>null!=t.tariffe?t.tariffe.forEach(n=>n.hidden=!0):null),this.restrizioniChecked=!1),this.restrizioniIndeterminate=!1)}checkRestrizioniIndeterminate(){if(this.restrizioniIndeterminate=!1,null!=this.planning&&null!=this.planning.tipiCamere){let o=this.planning.tipiCamere[0].tariffe[0].hidden;for(let t of this.planning.tipiCamere)if(null!=t.tariffe&&t.tariffe.length>0){for(let n of t.tariffe)if(n.hidden!=o){this.restrizioniChecked=!1,this.restrizioniIndeterminate=!0;break}if(this.restrizioniIndeterminate)break}this.restrizioniIndeterminate||(this.restrizioniChecked=!o)}}isWeekend(o){let t=u(o);return 6==t.day()||0==t.day()}checkDisponibilitaNonPubblicate(){this.apiService.checkDisponibilitaFutureNonPubblicate(this.rq.oidPortaleXAlbergo).subscribe(o=>{o.data?this.alert=new String("sbm.disponibilita.planning.disponibilitaNonPubblicate"):this.alert=null})}modificaTariffa(o,t){let n=new d.Zpt;n.width="70vw",n.disableClose=!0;let a=this.showModalDialog(dl,n),l=a.componentInstance;l.portale=this.portale,l.tipoCamera=o,l.tariffa=t,l.dal=this.rq.dal,l.al=this.rq.al,l.dialogRef=a,a.afterClosed().subscribe(r=>{r&&(this.checkDisponibilitaNonPubblicate(),this.loadData())})}returnToToday(){this.rq.dal=this.getDate(this.today),this.rq.al=this.getDate(this.oneMonthFromToday),this.loadData(),this.selectedMonth=null,this.selectedYear=null}getDateNumber(o){return u(o).date()}onDisponibiliFocus(o,t){this.mouseStill=!0,this.resetInput(),o.inputVisibleDisponibili=t}onDisponibiliMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.inputVisibleDisponibili=t)}onVariazioneDisponibiliFocus(o,t){this.mouseStill=!0,this.resetInput(),o.inputVisibleVariazioneDisponibili=t}onVariazioneDisponibiliMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.inputVisibleVariazioneDisponibili=t)}onFasciaMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.selectVisibleFascia=t)}onPrezzoFocus(o,t){this.mouseStill=!0,this.resetInput(),o.inputVisiblePrezzo=t}onPrezzoMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.inputVisiblePrezzo=t)}onPrezzoUsoSingolaFocus(o,t){this.mouseStill=!0,this.resetInput(),o.inputVisiblePrezzoUsoSingola=t}onPrezzoUsoSingolaMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.inputVisiblePrezzoUsoSingola=t)}onDurataMinimaSoggiornoFocus(o,t){this.mouseStill=!0,this.resetInput(),o.inputVisibleDurataMinimaSoggiorno=t}onDurataMinimaSoggiornoMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.inputVisibleDurataMinimaSoggiorno=t)}onDurataMassimaSoggiornoFocus(o,t){this.mouseStill=!0,this.resetInput(),o.inputVisibleDurataMassimaSoggiorno=t}onDurataMassimaSoggiornoMouseEnter(o,t){this.mouseStill||(this.resetInput(),o.inputVisibleDurataMassimaSoggiorno=t)}onGiornoClick(o,t){if(null==this.startIndex)this.startIndex=o,this.endIndex=o,this.cameraIndex=t;else{let n=this.planning.giorni[this.startIndex],a=this.planning.giorni[o];this.aggiornaDisponibilita(u(n)<u(a)?n:a,u(n)<u(a)?a:n,this.planning.tipiCamere[t].oid,this.planning.tipiCamere[t].tariffe.map(l=>l.oid)),this.startIndex=null,this.endIndex=null,this.cameraIndex=null}}checkGiornoSelected(o,t){return null!=this.startIndex&&null!=this.endIndex&&null!=this.cameraIndex&&this.cameraIndex==t&&(this.startIndex<this.endIndex?o>=this.startIndex&&o<=this.endIndex:o>=this.endIndex&&o<=this.startIndex)}resetInput(){if(null!=this.planning&&null!=this.planning.tipiCamere)for(let o of this.planning.tipiCamere)if(this.resetInputTipoCamera(o),null!=o.tariffe&&o.tariffe.length>0)for(let t of o.tariffe)this.resetInputTariffa(t);this.fasciaSelectOpen=!1}resetInputTipoCamera(o){o.inputVisibleDisponibili=-1,o.inputVisibleVariazioneDisponibili=-1,o.selectVisibleFascia=-1}resetInputTariffa(o){o.inputVisiblePrezzoUsoSingola=-1,o.inputVisiblePrezzo=-1,o.inputVisibleDurataMinimaSoggiorno=-1,o.inputVisibleDurataMassimaSoggiorno=-1}onUbicazioneChange(){null!=this.ubicazioneIstat&&this.ubicazioneIstat.oid>0?(this.getPortaliRQ.filters[0].value=this.ubicazioneIstat.oid.toString(),this.getPortali()):this.getPortaliRQ.filters[0].value=null}onStatoClick(o,t,n,a,l){this.modificaStatoPortaleEnabled&&(this.portale.tipoPortale==c.Q.Master?l.openMenu():this.updateDisponibilita(o,t,null,null,null,n,null,null,null,null,a.empty||a.stato!=c.V6.Aperto?c.V6.Aperto:c.V6.Chiuso,null,null,null,null))}ngOnDestroy(){this.headerService.clearTitle(),this.sub.unsubscribe(),this.sub1.unsubscribe()}}ml.\u0275fac=function(o){return new(o||ml)(e.Y36(A.s),e.Y36(ie.r),e.Y36(j.m),e.Y36(Oe.o),e.Y36(et),e.Y36(dt),e.Y36(C.t))},ml.\u0275cmp=e.Xpm({type:ml,selectors:[["app-planning"]],features:[e.qOj],decls:113,vars:96,consts:[[1,"float-right","mr-3","oggiButton-container"],["displayMember","nome",1,"mr-4",3,"block","disabled","dataLoader","value","placeholder","valueChange"],["mat-flat-button","","color","primary",3,"click"],[1,"p-3",3,"click"],[3,"message","info"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["displayMember","nome",3,"dataLoader","value","placeholder","forceDownload","valueChange"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-4","pt-2"],["id","planning-pubblica-button","mat-flat-button","","color","primary","class","ml-2 mr-2",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"row","mb-3"],[1,"col-4","text-left"],["color","primary",1,"mr-3",3,"ngModel","ngModelChange","change"],["color","primary",1,"mr-3",3,"checked","indeterminate","change"],["color","primary",3,"ngModel","ngModelChange"],[1,"col-8","text-right"],["src","/assets/images/sbm/lock.png",1,"rectangle","align-top","border","rounded"],[1,"mr-2"],[1,"aperto","rectangle","text-center","rounded"],[1,"chiuso","rectangle","text-center","rounded"],[1,"misto","rectangle","text-center","rounded"],[1,"pieno","chiuso","rectangle","text-center","rounded"],[1,"mt-2"],[1,"nonPubblicato","rectangle","text-center","rounded"],[1,"modificatoDaPubblicare","rectangle","text-center","rounded"],[1,"pubblicatoParzialmente","rectangle","text-center","rounded"],[1,"row","mb-2","mr-0","ml-0"],[1,"col-month-select","col-year-previous"],[1,"year-cell","border","rounded","p-1",3,"click"],[1,"align-middle"],["class","col-month-select",4,"ngFor","ngForOf"],[1,"col-month-select","col-year-next"],[4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],["id","planning-pubblica-button","mat-flat-button","","color","primary",1,"ml-2","mr-2",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"font-weight-bold"],[1,"col-month-select"],[1,"month-select-cell","rounded","p-1",3,"ngClass","click"],["class","p-0 mb-3 scrollable-content border planning-card",4,"ngFor","ngForOf"],[1,"p-0","mb-3","scrollable-content","border","planning-card"],[1,"text-center","pt-2"],["class","tipoCameraHotel",4,"ngIf"],["class","disponibiliMassime",4,"ngIf"],[1,"w-100","text-center","zoom"],["mat-icon-button","",1,"align-middle",3,"disabled","click"],[1,"material-icons"],[1,"d-inline-block","align-middle","mr-1","ml-1"],[1,"position-absolute","previous-buttons"],["mat-stroked-button","","color","blank",1,"mr-1",3,"click"],[1,"material-icons","ml-n3"],["mat-stroked-button","","color","blank",3,"click"],[1,"position-absolute","next-buttons"],[1,"material-icons","mr-n3"],[3,"mousemove","mouseleave"],[3,"mouseenter"],[1,"sticky-left","no-outline"],["class","td-mese",4,"ngFor","ngForOf"],[1,"sticky-left"],["class","td-giorno cursor-pointer",3,"ngStyle","ngClass","click","mouseenter",4,"ngFor","ngForOf"],[3,"hidden","mouseenter"],["class","td-evento",3,"backgroundColor","appInvertColor",4,"ngFor","ngForOf"],[1,"tr-disponibiliHotel",3,"hidden","mouseenter"],[3,"class","click",4,"ngFor","ngForOf"],[1,"tr-percentuale",3,"hidden","mouseenter"],["class","td-percentualeOccupazione",4,"ngFor","ngForOf"],[1,"sticky-left",3,"mouseenter"],["class","td-pubblicate text-center",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[3,"hidden"],["class","td-variazioneDisponibili text-center",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],["class","td-fascia text-center",3,"mouseenter",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tipoCameraHotel"],[1,"disponibiliMassime"],[1,"td-mese"],["class","mese",4,"ngIf"],[1,"mese"],[1,"td-giorno","cursor-pointer",3,"ngStyle","ngClass","click","mouseenter"],[1,"giorno"],[1,"td-evento",3,"appInvertColor"],[3,"click"],[1,"d-inline-block",3,"matTooltip"],[1,"invisible",3,"matMenuTriggerFor"],["tipoModificaStatoPortaliCollegatiMenuTrigger","matMenuTrigger"],[1,"unlimited-width-menu"],["tipoModificaStatoPortaliCollegatiMenu",""],["mat-menu-item","",3,"click"],[1,"td-percentualeOccupazione"],[1,"td-pubblicate","text-center",3,"mouseenter","mouseleave"],["autocompleteOff","","type","number","class","input-pubblicate rounded","appAutofocus","",3,"value","disabled","input","blur","keyup.enter","wheel",4,"ngIf"],["tabindex","0","class","d-inline-block input-pubblicate rounded",3,"focus",4,"ngIf"],["autocompleteOff","","type","number","appAutofocus","",1,"input-pubblicate","rounded",3,"value","disabled","input","blur","keyup.enter","wheel"],["tabindex","0",1,"d-inline-block","input-pubblicate","rounded",3,"focus"],[1,"td-variazioneDisponibili","text-center",3,"mouseenter","mouseleave"],["autocompleteOff","","type","number","class","input-variazioneDisponibili rounded","appAutofocus","",3,"value","input","blur","keyup.enter","wheel",4,"ngIf"],["tabindex","0","class","d-inline-block input-variazioneDisponibili rounded",3,"focus",4,"ngIf"],["autocompleteOff","","type","number","appAutofocus","",1,"input-variazioneDisponibili","rounded",3,"value","input","blur","keyup.enter","wheel"],["tabindex","0",1,"d-inline-block","input-variazioneDisponibili","rounded",3,"focus"],[1,"td-fascia","text-center",3,"mouseenter"],["class","select-fascia rounded",3,"ngModel","width","ngModelChange","selectionChange","click","openedChange",4,"ngIf"],["class","d-inline-block select-fascia span-fascia",3,"width",4,"ngIf"],[1,"border","rounded","w-100","statoCtaCtd",3,"ngStyle"],[1,"select-fascia","rounded",3,"ngModel","ngModelChange","selectionChange","click","openedChange"],["selectSearch",""],[3,"value","hidden",4,"ngFor","ngForOf"],[3,"value","hidden"],[1,"d-inline-block","select-fascia","span-fascia"],[1,"tr-stato",3,"mouseenter"],[1,"font-weight-bold","sticky-left"],[1,"d-inline-block","tariffa","mr-1"],[1,"fas","fa-bolt","cursor-pointer",3,"click"],[3,"class","ngClass","click",4,"ngFor","ngForOf"],[1,"prezzo-td","sticky-left",2,"padding-top","5px !important","padding-bottom","5px !important",3,"mouseenter"],[1,"tariffa-col1","prezzo-col","ml-1"],["class","cursor-pointer","style","padding: 4px;",3,"ngClass","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"tariffa-col1"],["class","text-center","style","padding: 4px;",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],["class","text-center","style","padding: 4px;",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"stato-pubblicazione"],["style","padding: 4px;",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[2,"padding","4px",3,"mouseenter","mouseleave"],[1,"text-center","div-prezzo"],["autocompleteOff","","type","number","class","input-prezzo text-center rounded","appAutofocus","",3,"value","disabled","input","blur","keyup.enter","wheel",4,"ngIf"],["tabindex","0","class","d-inline-block input-prezzo text-center rounded",3,"focus",4,"ngIf"],["autocompleteOff","","type","number","appAutofocus","",1,"input-prezzo","text-center","rounded",3,"value","disabled","input","blur","keyup.enter","wheel"],["tabindex","0",1,"d-inline-block","input-prezzo","text-center","rounded",3,"focus"],["class","expand-button","mat-icon-button","",3,"disableRipple","click",4,"ngIf"],["mat-icon-button","",1,"expand-button",3,"disableRipple","click"],[1,"material-icons","expand-icon"],[1,"cursor-pointer",2,"padding","4px",3,"ngClass","click","mouseenter","mouseleave"],["autocompleteOff","","type","number","class","input-prezzo text-center rounded","appAutofocus","",3,"value","disabled","click","input","blur","keyup.enter","wheel",4,"ngIf"],["autocompleteOff","","type","number","appAutofocus","",1,"input-prezzo","text-center","rounded",3,"value","disabled","click","input","blur","keyup.enter","wheel"],[1,"text-center",2,"padding","4px",3,"mouseenter","mouseleave"],["autocompleteOff","","type","number","placeholder","--","class","input-durataMinimaSoggiorno text-center","appAutofocus","",3,"value","disabled","input","blur","keyup.enter","wheel",4,"ngIf"],["tabindex","0","class","d-inline-block input-durataMinimaSoggiorno text-center",3,"focus",4,"ngIf"],["autocompleteOff","","type","number","placeholder","--","appAutofocus","",1,"input-durataMinimaSoggiorno","text-center",3,"value","disabled","input","blur","keyup.enter","wheel"],["tabindex","0",1,"d-inline-block","input-durataMinimaSoggiorno","text-center",3,"focus"],["autocompleteOff","","type","number","placeholder","--","class","input-durataMassimaSoggiorno text-center","appAutofocus","",3,"value","disabled","input","blur","keyup.enter","wheel",4,"ngIf"],["tabindex","0","class","d-inline-block input-durataMassimaSoggiorno text-center",3,"focus",4,"ngIf"],["autocompleteOff","","type","number","placeholder","--","appAutofocus","",1,"input-durataMassimaSoggiorno","text-center",3,"value","disabled","input","blur","keyup.enter","wheel"],["tabindex","0",1,"d-inline-block","input-durataMassimaSoggiorno","text-center",3,"focus"],[1,"text-center",2,"padding","4px"],[1,"border","rounded","w-100","statoCtaCtd",3,"ngStyle","click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"app-view-select",1),e.NdJ("valueChange",function(a){return t.ubicazioneIstat=a})("valueChange",function(){return t.onUbicazioneChange()}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return t.returnToToday()}),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",3),e.NdJ("click",function(){return t.startIndex=null}),e.TgZ(7,"app-alert",4),e.NdJ("info",function(){return t.pubblica()}),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"input",9),e.NdJ("ngModelChange",function(a){return t.rq.dal=a})("dateChange",function(){return t.dalChange(),t.selectedMonth=null,t.selectedYear=null}),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"mat-datepicker-toggle",10)(15,"mat-datepicker",null,11),e.qZA()(),e.TgZ(17,"div",7)(18,"mat-form-field",8)(19,"input",9),e.NdJ("ngModelChange",function(a){return t.rq.al=a})("dateChange",function(){return t.alChange(),t.selectedMonth=null,t.selectedYear=null}),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"mat-datepicker-toggle",10)(22,"mat-datepicker",null,12),e.qZA()(),e.TgZ(24,"div",7)(25,"app-view-select",13),e.NdJ("valueChange",function(a){return t.portale=a})("valueChange",function(){return t.onPortaleChange()}),e.ALo(26,"translate"),e.qZA()()(),e.TgZ(27,"div",6)(28,"div",7)(29,"mat-form-field",8)(30,"mat-select",14),e.NdJ("ngModelChange",function(a){return t.rq.oidTipoCamera=a})("selectionChange",function(){return t.loadData()}),e.ALo(31,"translate"),e._UZ(32,"mat-option",15),e.YNc(33,Tce,2,2,"mat-option",16),e.qZA()()(),e.TgZ(34,"div",7)(35,"mat-form-field",8)(36,"mat-select",14),e.NdJ("ngModelChange",function(a){return t.rq.oidTariffa=a})("selectionChange",function(){return t.loadData()}),e.ALo(37,"translate"),e._UZ(38,"mat-option",15),e.YNc(39,xce,2,2,"mat-option",16),e.qZA()()(),e.TgZ(40,"div",17),e.YNc(41,Zce,3,3,"button",18),e.YNc(42,Ace,3,3,"button",19),e.qZA()(),e.YNc(43,wce,6,4,"div",20),e.qZA(),e.TgZ(44,"div",21)(45,"div",22)(46,"mat-checkbox",23),e.NdJ("ngModelChange",function(a){return t.disponibili=a})("change",function(a){return t.parametriService.setParametro("isDisponibiliChecked",a.checked)}),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"mat-checkbox",23),e.NdJ("ngModelChange",function(a){return t.occupazione=a})("change",function(a){return t.parametriService.setParametro("isPercentualeOccupazioneChecked",a.checked)}),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"mat-checkbox",24),e.NdJ("change",function(a){return t.onRestrizioniChange(a.checked),t.parametriService.setParametro("isRestrizioniChecked",a.checked),t.isRestrizioniChecked=a.checked}),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"mat-checkbox",25),e.NdJ("ngModelChange",function(a){return t.eventi=a}),e._uU(56),e.ALo(57,"translate"),e.qZA()(),e.TgZ(58,"div",26)(59,"div"),e._UZ(60,"img",27),e._uU(61,"\xa0"),e.TgZ(62,"span",28),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"span",29),e._uU(66,"\xa0"),e.qZA(),e.TgZ(67,"span",28),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"span",30),e._uU(71,"\xa0"),e.qZA(),e.TgZ(72,"span",28),e._uU(73),e.ALo(74,"translate"),e.qZA(),e.TgZ(75,"span",31),e._uU(76,"*"),e.qZA(),e.TgZ(77,"span",28),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"span",32),e._uU(81,"!"),e.qZA(),e.TgZ(82,"span",28),e._uU(83),e.ALo(84,"translate"),e.qZA()(),e.TgZ(85,"div",33)(86,"span",34),e._uU(87,"#"),e.qZA(),e.TgZ(88,"span",28),e._uU(89),e.ALo(90,"translate"),e.qZA(),e.TgZ(91,"span",35),e._uU(92,"#"),e.qZA(),e.TgZ(93,"span",28),e._uU(94),e.ALo(95,"translate"),e.qZA(),e.TgZ(96,"span",36),e._uU(97,"#"),e.qZA(),e.TgZ(98,"span",28),e._uU(99),e.ALo(100,"translate"),e.qZA()()()(),e.TgZ(101,"div",37)(102,"div",38)(103,"div",39),e.NdJ("click",function(){return t.previousYearClick()}),e.TgZ(104,"span",40),e._uU(105),e.qZA()()(),e.YNc(106,Mce,4,6,"div",41),e.TgZ(107,"div",42)(108,"div",39),e.NdJ("click",function(){return t.nextYearClick()}),e.TgZ(109,"span",40),e._uU(110),e.qZA()()()(),e.YNc(111,fse,2,1,"ng-container",43),e.YNc(112,Cse,4,3,"div",44),e.qZA()),2&o){const n=e.MAs(16),a=e.MAs(23);e.xp6(1),e.Q6J("block",!1)("disabled",t.ubicazioneIstatDisabled)("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.ubicazioneIstat)("placeholder",e.lcZ(2,58,"globals.ubicazioneIstat")),e.xp6(3),e.Oqu(e.lcZ(5,60,"sbm.disponibilita.planning.oggi")),e.xp6(3),e.Q6J("message",t.alert),e.xp6(5),e.s9C("placeholder",e.lcZ(13,62,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(20,64,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(t.getPortaliRQ,!1))("value",t.portale)("placeholder",e.lcZ(26,66,"sbm.disponibilita.planning.portale"))("forceDownload",!0),e.xp6(5),e.s9C("placeholder",e.lcZ(31,68,"sbm.disponibilita.planning.tipoCamera")),e.Q6J("ngModel",t.rq.oidTipoCamera),e.xp6(2),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",t.tipiCamera),e.xp6(3),e.s9C("placeholder",e.lcZ(37,70,"sbm.disponibilita.planning.tariffa")),e.Q6J("ngModel",t.rq.oidTariffa),e.xp6(2),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",t.tariffe),e.xp6(2),e.Q6J("ngIf",t.pubblicaDisponibilitaEnabled),e.xp6(1),e.Q6J("ngIf",t.modificaBlocchiEnabled),e.xp6(1),e.Q6J("ngIf",!!t.sessionService.getTipoPubblicazioneAttivitaAutomatica()),e.xp6(3),e.Q6J("ngModel",t.disponibili),e.xp6(1),e.hij(" ",e.lcZ(48,72,"sbm.disponibilita.planning.disponibili")," "),e.xp6(2),e.Q6J("ngModel",t.occupazione),e.xp6(1),e.hij(" ",e.lcZ(51,74,"sbm.disponibilita.planning.percentualeOccupazione")," "),e.xp6(2),e.Q6J("checked",t.restrizioniChecked)("indeterminate",t.restrizioniIndeterminate),e.xp6(1),e.hij(" ",e.lcZ(54,76,"sbm.disponibilita.planning.restrizioni")," "),e.xp6(2),e.Q6J("ngModel",t.eventi),e.xp6(1),e.hij(" ",e.lcZ(57,78,"sbm.disponibilita.planning.eventi")," "),e.xp6(7),e.Oqu(e.lcZ(64,80,"sbm.disponibilita.planning.bloccato")),e.xp6(5),e.Oqu(e.lcZ(69,82,"sbm.disponibilita.planning.aperto")),e.xp6(5),e.Oqu(e.lcZ(74,84,"sbm.disponibilita.planning.chiuso")),e.xp6(5),e.Oqu(e.lcZ(79,86,"sbm.disponibilita.planning.restrizioni")),e.xp6(5),e.Oqu(e.lcZ(84,88,"sbm.disponibilita.planning.pieno")),e.xp6(3),e.Udp("background-color",t.albergo.colorePlanningGiornoNonPubblicatoHex?t.albergo.colorePlanningGiornoNonPubblicatoHex:"#FF0000"),e.xp6(3),e.Oqu(e.lcZ(90,90,"sbm.disponibilita.planning.nonPubblicato")),e.xp6(2),e.Udp("background-color",t.albergo.colorePlanningGiornoModificatoDaPubblicareHex?t.albergo.colorePlanningGiornoModificatoDaPubblicareHex:"#FFFF00"),e.xp6(3),e.Oqu(e.lcZ(95,92,"sbm.disponibilita.planning.modificatoDaPubblicare")),e.xp6(2),e.Udp("background-color",t.albergo.colorePlanningGiornoPubblicatoParzialmenteHex?t.albergo.colorePlanningGiornoPubblicatoParzialmenteHex:"#FFA500"),e.xp6(3),e.Oqu(e.lcZ(100,94,"sbm.disponibilita.planning.pubblicatoParzialmente")),e.xp6(6),e.Oqu(t.currentYear-1),e.xp6(1),e.Q6J("ngForOf",t.months),e.xp6(4),e.Oqu(t.currentYear+1),e.xp6(1),e.Q6J("ngIf",null!=t.planning&&null!=t.planning.tipiCamere&&t.planning.tipiCamere.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.planning&&null!=t.planning.tipiCamere&&0==t.planning.tipiCamere.length)}},dependencies:[m.mk,m.sg,m.O5,m.PC,k.Z,w.X,gs.U,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,Ie.W0,Ie.tN,Ie.D8,qe.S$,qe.Qi,qe.mi,q.Kd,_.Fj,_.JJ,_.On,nt,ne.d,R,m.rS,K.H,z.X$],styles:[".mat-card.scrollable-content[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-direction:column}.mat-card.scrollable-content[_ngcontent-%COMP%] > .mat-card-title-group[_ngcontent-%COMP%]{display:block}.mat-card.scrollable-content[_ngcontent-%COMP%] > .mat-card-content[_ngcontent-%COMP%]{overflow-y:hidden;overflow-x:auto}.rectangle[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;margin-left:4px;margin-right:4px}.stato-pubblicazione[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px;border-radius:10px}.aperto[_ngcontent-%COMP%]{background-color:#67d9a4}.vuoto[_ngcontent-%COMP%]{background-color:#fff}.chiuso[_ngcontent-%COMP%]{background-color:#ff7a7a}.misto[_ngcontent-%COMP%]{background-color:#fae996}.disp0[_ngcontent-%COMP%]{background-color:#ff7a7a}.restrizioni[_ngcontent-%COMP%]{background-color:#fae996}.tr-stato[_ngcontent-%COMP%]{line-height:14px}.tr-percentuale[_ngcontent-%COMP%], .tr-disponibiliHotel[_ngcontent-%COMP%]{line-height:25px}.td-giorno[_ngcontent-%COMP%]{font-size:small;text-align:center}.td-evento[_ngcontent-%COMP%]{font-size:small;text-align:center;height:30px!important}.disponibili[_ngcontent-%COMP%]{text-align:center;border-style:none}.div-prezzo[_ngcontent-%COMP%]{height:25px}.input-prezzo[_ngcontent-%COMP%]{height:25px;width:100%;border:1px solid lightgray;padding:1px 2px;background-color:#fff;overflow:hidden}.select-fascia[_ngcontent-%COMP%]{height:17px;text-align:center;font-size:smaller}.span-fascia[_ngcontent-%COMP%]{text-overflow:ellipsis;padding-right:5px;white-space:nowrap;overflow:hidden;vertical-align:bottom;margin-bottom:1px}  .select-fascia .mat-select-arrow{border-right:0!important;margin:0!important}.input-durataMinimaSoggiorno[_ngcontent-%COMP%], .input-durataMassimaSoggiorno[_ngcontent-%COMP%]{height:20px;width:100%;font-size:smaller;text-align:end;border-style:none;padding:1px 2px}.tariffa-col1[_ngcontent-%COMP%]{font-style:italic;font-size:smaller;margin-left:2em}.td-pubblicate[_ngcontent-%COMP%], .td-variazioneDisponibili[_ngcontent-%COMP%], .td-fascia[_ngcontent-%COMP%]{padding:4px}.input-pubblicate[_ngcontent-%COMP%]{height:25px;width:100%;text-align:center;border-color:#d3d3d3;border-style:solid;border-width:thin;font-weight:700;padding:1px 2px}.input-variazioneDisponibili[_ngcontent-%COMP%]{height:25px;width:100%;text-align:center;border:none;padding:2px}.td-disponibiliHotel[_ngcontent-%COMP%], .td-percentualeOccupazione[_ngcontent-%COMP%]{text-align:center;font-weight:700}.giorno[_ngcontent-%COMP%], .mese[_ngcontent-%COMP%]{display:inline-block!important;width:41px!important}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;appearance:textfield;-moz-appearance:textfield}.rectangle.chiuso[_ngcontent-%COMP%], .rectangle.nonPubblicato[_ngcontent-%COMP%], .rectangle.modificatoDaPubblicare[_ngcontent-%COMP%], .rectangle.pubblicatoParzialmente[_ngcontent-%COMP%]{line-height:20px}select[_ngcontent-%COMP%]{-o-appearance:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.edit-button[_ngcontent-%COMP%]{width:22px;height:22px;line-height:22px}.edit-icon[_ngcontent-%COMP%]{font-size:16px;line-height:16px}.planning-card[_ngcontent-%COMP%]{box-shadow:none!important}.prezzo-td[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important;vertical-align:bottom!important;width:155px;min-width:155px;max-width:155px}.prezzo-col[_ngcontent-%COMP%]{padding-bottom:1px}.tipoCameraHotel[_ngcontent-%COMP%]{font-style:italic;font-size:16px;color:#666}.disponibiliMassime[_ngcontent-%COMP%]{font-style:italic;font-size:12px;color:#999}td[_ngcontent-%COMP%]{white-space:nowrap;background-color:#fff;border:1px solid #dddddd;padding:5px 8px}td[_ngcontent-%COMP%]:not(.sticky-left){width:60px;min-width:60px;max-width:60px}.td-mese[_ngcontent-%COMP%]{border:none!important;background-color:transparent}.expand-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.expand-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.statoCtaCtd[_ngcontent-%COMP%]{height:10px}.td-bloccato[_ngcontent-%COMP%]{background-image:url(/assets/images/sbm/lock.png);background-size:cover;background-repeat:no-repeat}.next-buttons[_ngcontent-%COMP%]{top:10px;right:10px}.previous-buttons[_ngcontent-%COMP%]{top:10px;left:10px}.sticky-left[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;z-index:1020;outline:1px solid #dddddd;border:none;outline-offset:-1px}.no-outline[_ngcontent-%COMP%]{outline:none;background-color:transparent!important}.oggiButton-container[_ngcontent-%COMP%]{margin-top:-40px}.planning-giorno-selected[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff!important}.tariffa[_ngcontent-%COMP%]{width:calc(100% - 1rem)}.zoom[_ngcontent-%COMP%]{color:#666;font-size:13px}.zoom[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px}.zoom[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;line-height:18px}"]});const bse=function(i){return{"month-selected":i}};function vse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw();return e.KtG(r.monthSelected(l))}),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,bse,a.selectedMonth==n&&a.selectedYear==a.currentYear)),e.xp6(1),e.hij(" ",e.lcZ(3,2,t)," ")}}function Tse(i,o){1&i&&(e.TgZ(0,"div",31)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.disponibilita.rate-checker.nessunaDisponibilita")))}function xse(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.disponibilita.rate-checker.data"),""))}function Zse(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"momentFormat"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,e.Dn7(3,3,t.data,"dddd D MMMM yyyy",n.getLocale())),"")}}function Ase(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",36)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div")(4,"mat-checkbox",37),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.portale.isVisualizzaInComparatoreTariffe=a)})("change",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.updatePortale(a.portale))}),e._uU(5),e.ALo(6,"translate"),e.qZA()()()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.portale.nome),e.xp6(2),e.Q6J("ngModel",t.portale.isVisualizzaInComparatoreTariffe),e.xp6(1),e.hij(" ",e.lcZ(6,3,"bo.portaleXAlbergo.proprieta.isVisualizzaInComparatoreTariffe")," ")}}function wse(i,o){if(1&i&&(e.TgZ(0,"span",41),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw().index;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.prezzi[n].prezzoMinimo)," ")}}function zse(i,o){if(1&i&&(e.TgZ(0,"sub",42),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw().index;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.prezzi[n].prezzoMassimo)," ")}}const Mse=function(i){return{nonDisponibile:i}};function qse(i,o){if(1&i&&(e.TgZ(0,"mat-cell",38),e.YNc(1,wse,3,3,"span",39),e.YNc(2,zse,3,3,"sub",40),e.qZA()),2&i){const t=o.$implicit,n=e.oxw().index;e.Q6J("ngClass",e.VKq(3,Mse,t.prezzi[n].nonDisponibile)),e.xp6(1),e.Q6J("ngIf",t.prezzi[n].prezzoMinimo>0),e.xp6(1),e.Q6J("ngIf",t.prezzi[n].prezzoMassimo>0)}}function Pse(i,o){if(1&i&&(e.ynx(0,33),e.YNc(1,Ase,7,5,"mat-header-cell",34),e.YNc(2,qse,3,5,"mat-cell",35),e.BQk()),2&i){const t=o.$implicit;e.Q6J("matColumnDef",t.portale.oid.toString())}}function kse(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Pse,3,1,"ng-container",32),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.dataSource.data[0].prezzi)}}function Sse(i,o){1&i&&e._UZ(0,"mat-header-row",43)}function yse(i,o){1&i&&e._UZ(0,"mat-row")}class _l extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.translationService=l,this.displayedColumns=[],this.months=[]}ngOnInit(){this.headerService.setTitle("sbm.disponibilita.rate-checker.title"),this.filters=[],this.filters.push(new d.wn$("giorno",c.Hp.GreaterEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("giorno",c.Hp.LowerEqual,this.getDate(this.oneMonthFromToday),c.NM.Date)),this.filters.push(new d.wn$("portaleXAlbergo.ubicazioneIstat.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tipoCameraOTA.tipoCamera.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tariffaOTA.trattamento.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("prezzo",c.Hp.Greater,"0",c.NM.Number)),this.currentYear=u().year(),this.fillMonths(),this.sub=this.translationService.languageChanged.subscribe(()=>{this.fillMonths()})}fillMonths(){this.months=[];for(let o=0;o<12;o++)this.months.push(u().set("month",o).format("MMM"))}nextYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear++,this.setIsLoading(!1)},500)}previousYearClick(){this.setIsLoading(!0),setTimeout(()=>{this.currentYear--,this.setIsLoading(!1)},500)}monthSelected(o){let t=u().set("year",this.currentYear).set("month",o).set("date",1);this.filters[0].value=this.getDate(t),this.filters[1].value=this.getDate(t.set("date",t.daysInMonth())),this.selectedMonth=o,this.selectedYear=this.currentYear,this.download(),this.paginator.firstPage()}ngAfterViewInit(){this.download()}onSearch(o,t){this.filters[o].value=t,this.download(),this.paginator.firstPage()}download(){this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe();let o=new d.k$g;o.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPrezziFilter(o).subscribe(t=>{if(this.displayedColumns=["data"],null!=t.data&&t.data.length>0)for(let n of t.data[0].prezzi)this.displayedColumns.push(n.portale.oid.toString());this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}updatePortale(o){this.setIsLoading(!0),this.apiService.updatePortale(o).subscribe(()=>{this.setIsLoading(!1)})}onDalChange(o){null!=o&&(this.onSearch(1,this.getDate(o)),this.selectedMonth=null,this.selectedYear=null)}ngOnDestroy(){this.headerService.clearTitle(),this.sub.unsubscribe()}}function Jse(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.portale")))}function Ese(i,o){if(1&i&&e._UZ(0,"img",23),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.portaleXAlbergo.portale.urlImmagineIcona,e.LSH)}}function Nse(i,o){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.portaleXAlbergo.portaleXAlbergoMaster.nome)}}function Ose(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,Ese,1,1,"img",19),e.TgZ(2,"div",20)(3,"div",21),e._uU(4),e.qZA(),e.YNc(5,Nse,2,1,"div",22),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!(null==t.portaleXAlbergo.portale||!t.portaleXAlbergo.portale.urlImmagineIcona)),e.xp6(3),e.Oqu(t.portaleXAlbergo.nome),e.xp6(1),e.Q6J("ngIf",null!=t.portaleXAlbergo.portaleXAlbergoMaster)}}function Lse(i,o){1&i&&(e.TgZ(0,"mat-header-cell",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.stato-pubblicazione-portali.percentualePubblicata")))}function Dse(i,o){1&i&&(e.TgZ(0,"mat-progress-bar",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.stato-pubblicazione-portali.inCorso")))}function Ise(i,o){if(1&i&&e._UZ(0,"mat-progress-bar",31),2&i){const t=e.oxw().$implicit;e.Q6J("value",t.percentualePubblicata)}}function Qse(i,o){if(1&i&&(e.TgZ(0,"mat-cell",26)(1,"div",27),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"div",27),e.YNc(5,Dse,3,3,"mat-progress-bar",28),e.YNc(6,Ise,1,1,"mat-progress-bar",29),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(e.xi3(3,3,t.percentualePubblicata,"1.0-2")+"%"),e.xp6(3),e.Q6J("ngIf",t.isPubblicazioneInCorso),e.xp6(1),e.Q6J("ngIf",!t.isPubblicazioneInCorso)}}function Use(i,o){1&i&&(e.TgZ(0,"mat-header-cell",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.stato-pubblicazione-portali.erroriPubblicazione")))}_l.\u0275fac=function(o){return new(o||_l)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t),e.Y36(Oe.o))},_l.\u0275cmp=e.Xpm({type:_l,selectors:[["app-rate-checker"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:47,vars:37,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"placeholder","value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"placeholder","value","dateChange"],["matSuffix","",3,"for"],["picker",""],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"row","mt-3","mb-2","mr-0","ml-0"],[1,"col-month-select","col-year-previous"],[1,"year-cell","border","rounded","p-1",3,"click"],[1,"align-middle"],["class","col-month-select",4,"ngFor","ngForOf"],[1,"col-month-select","col-year-next"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","data"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngIf"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"col-month-select"],[1,"month-select-cell","rounded","p-1",3,"ngClass","click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[3,"matColumnDef",4,"ngFor","ngForOf"],[3,"matColumnDef"],["class","flex-column",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],[1,"flex-column"],["color","primary",1,"rate-checker-checkbox",3,"ngModel","ngModelChange","change"],[3,"ngClass"],["class","prezzoMinimo mr-3",4,"ngIf"],["class","prezzoMassimo",4,"ngIf"],[1,"prezzoMinimo","mr-3"],[1,"prezzoMassimo"],[1,"mat-table-header"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(15);return e.KtG(l.open())}),e.TgZ(9,"input",6),e.NdJ("dateChange",function(l){return null!=l.value?t.filters[0].value=t.getDate(l.value):null}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("dateChange",function(l){return t.onDalChange(l.value)}),e.ALo(12,"translate"),e.qZA()(),e._UZ(13,"mat-datepicker-toggle",8)(14,"mat-date-range-picker",null,9),e.qZA()(),e.TgZ(16,"div",3)(17,"app-view-select",10),e.NdJ("valueChange",function(l){return t.onSearch(2,-1==l.oid?"":l.oid.toString())}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",3)(20,"app-view-select",10),e.NdJ("valueChange",function(l){return t.onSearch(3,-1==l.oid?"":l.oid.toString())}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",3)(23,"app-view-select",10),e.NdJ("valueChange",function(l){return t.onSearch(4,-1==l.oid?"":l.oid.toString())}),e.ALo(24,"translate"),e.qZA()()()(),e.TgZ(25,"div",11)(26,"div",12)(27,"div",13),e.NdJ("click",function(){return t.previousYearClick()}),e.TgZ(28,"span",14),e._uU(29),e.qZA()()(),e.YNc(30,vse,4,6,"div",15),e.TgZ(31,"div",16)(32,"div",13),e.NdJ("click",function(){return t.nextYearClick()}),e.TgZ(33,"span",14),e._uU(34),e.qZA()()()(),e.YNc(35,Tse,4,3,"div",17),e.TgZ(36,"div",18)(37,"div",19)(38,"mat-table",20),e.ynx(39,21),e.YNc(40,xse,3,3,"mat-header-cell",22),e.YNc(41,Zse,4,7,"mat-cell",23),e.BQk(),e.YNc(42,kse,2,1,"ng-container",24),e.YNc(43,Sse,1,0,"mat-header-row",25),e.YNc(44,yse,1,0,"mat-row",26),e.qZA()(),e.TgZ(45,"div",27)(46,"mat-paginator",28),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()}if(2&o){const n=e.MAs(15);e.xp6(6),e.Oqu(e.lcZ(7,25,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.s9C("placeholder",e.lcZ(10,27,"globals.dal")),e.Q6J("value",t.filters[0].value),e.xp6(2),e.s9C("placeholder",e.lcZ(12,29,"globals.al")),e.Q6J("value",t.filters[1].value),e.xp6(2),e.Q6J("for",n),e.xp6(4),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("placeholder",e.lcZ(18,31,"sbm.disponibilita.rate-checker.ubicazioneIstat")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("placeholder",e.lcZ(21,33,"sbm.disponibilita.rate-checker.tipoCamera")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTrattamentiViewSelect())("placeholder",e.lcZ(24,35,"sbm.disponibilita.rate-checker.trattamento")),e.xp6(6),e.Oqu(t.currentYear-1),e.xp6(1),e.Q6J("ngForOf",t.months),e.xp6(4),e.Oqu(t.currentYear+1),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(4),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&t.dataSource.data.length>0),e.xp6(1),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",25)}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,M.v_,M.$V,M.nX,y.nW,y.wx,y.zY,y.By,y._g,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.JJ,_.On,ne.d,m.rS,ke.f,K.H,z.X$],styles:[".nonDisponibile[_ngcontent-%COMP%]{background-color:#ffa9a9}mat-cell[_ngcontent-%COMP%]{justify-content:center}mat-header-cell[_ngcontent-%COMP%]{justify-content:center}.prezzoMassimo[_ngcontent-%COMP%]{font-size:smaller}.prezzoMinimo[_ngcontent-%COMP%]{color:#17bf6a;font-size:large;font-weight:600}.rate-checker-checkbox[_ngcontent-%COMP%]{color:#999}  .rate-checker-checkbox .mat-checkbox-layout{margin-bottom:0!important}"]});const Yse=function(i,o){return{"color-red cursor-pointer":i,"color-green":o}};function Rse(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",25)(1,"div",32),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(l.isErroriPubblicazione?r.visualizzaErrori(l):null)}),e._uU(2,"\xa0"),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(1,Yse,t.isErroriPubblicazione,!t.isErroriPubblicazione))}}function Fse(i,o){1&i&&(e.TgZ(0,"mat-header-cell",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.stato-pubblicazione-portali.statoPubblicazione")))}const Hse=function(i,o){return{"color-red":i,"color-green":o}};function Kse(i,o){if(1&i&&(e.TgZ(0,"mat-cell",25)(1,"div",33),e._uU(2,"\xa0"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(1,Hse,!t.isPubblicazioneAttiva,t.isPubblicazioneAttiva))}}function Gse(i,o){1&i&&e._UZ(0,"mat-header-row",34)}function $se(i,o){1&i&&e._UZ(0,"mat-row")}function Bse(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4)(2,"mat-table",5),e.ynx(3,6),e.YNc(4,Jse,3,3,"mat-header-cell",7),e.YNc(5,Ose,6,3,"mat-cell",8),e.BQk(),e.ynx(6,9),e.YNc(7,Lse,3,3,"mat-header-cell",10),e.YNc(8,Qse,7,6,"mat-cell",11),e.BQk(),e.ynx(9,12),e.YNc(10,Use,3,3,"mat-header-cell",10),e.YNc(11,Rse,3,4,"mat-cell",13),e.BQk(),e.ynx(12,14),e.YNc(13,Fse,3,3,"mat-header-cell",10),e.YNc(14,Kse,3,4,"mat-cell",13),e.BQk(),e.YNc(15,Gse,1,0,"mat-header-row",15),e.YNc(16,$se,1,0,"mat-row",16),e.qZA()(),e.TgZ(17,"div",17)(18,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.forzaPubblicazione())}),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("dataSource",t.statoPubblicazionePortali),e.xp6(13),e.Q6J("matHeaderRowDef",t.columns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.columns),e.xp6(2),e.Q6J("disabled",t.pubblicazioneService.isPubblicazioneInCorso),e.xp6(1),e.Oqu(e.lcZ(20,6,"sbm.disponibilita.stato-pubblicazione-portali.forzaPubblicazione"))}}function Vse(i,o){1&i&&(e.TgZ(0,"div",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.disponibilita.stato-pubblicazione-portali.nessunPortale")," "))}function Xse(i,o){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,Bse,21,8,"ng-container",2),e.YNc(2,Vse,3,3,"div",3),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.statoPubblicazionePortali.length>0),e.xp6(1),e.Q6J("ngIf",0==t.statoPubblicazionePortali.length)}}class ul extends f.H{constructor(o,t,n,a){super(),this.headerService=o,this.apiService=t,this.sessionService=n,this.pubblicazioneService=a,this.columns=["portale","percentualePubblicata","isErrorePubblicazione","isPubblicazioneAttiva"]}ngOnInit(){this.headerService.setTitle("sbm.disponibilita.stato-pubblicazione-portali.title"),this.setIsLoading(!0);let o=new d.skj;o.oidAlbergo=this.sessionService.getOidAlbergo(),this.apiService.getStatoPubblicazionePortali(o).subscribe(t=>{this.statoPubblicazionePortali=t.data,this.setIsLoading(!1)}),this.sub=this.pubblicazioneService.onPubblicazioneStarted.subscribe(t=>{let n=this.statoPubblicazionePortali.find(a=>a.portaleXAlbergo.oid==t.oid);null!=n&&(n.isPubblicazioneInCorso=!0)}),this.sub1=this.pubblicazioneService.onPubblicazioneFinished.subscribe(t=>{let n=this.statoPubblicazionePortali.find(a=>a.portaleXAlbergo.oid==t.oid);null!=n&&(n.isPubblicazioneInCorso=!1)})}visualizzaErrori(o){let t=new d.Zpt;t.width="80vw";let n=this.showModalDialog(It,t),a=n.componentInstance;a.nomePortale=o.portaleXAlbergo.nome,a.dialog=!0,n.afterClosed().subscribe(()=>{a.erroriConfermati&&(o.isErroriPubblicazione=!1)})}forzaPubblicazione(){let o=this.statoPubblicazionePortali.map(t=>t.portaleXAlbergo).filter(t=>t.tipoPortale==c.Q.Master||null==t.portaleXAlbergoMaster);if(o.length>0){this.setIsLoading(!0);let t=new d.uIb;t.oidPortali=o.map(n=>n.oid),this.apiService.getGiorniDaPubblicare(t).subscribe(n=>{this.setIsLoading(!1),n.data.length>0?this.pubblicazioneService.pubblicaPortali(o):this.showError("sbm.disponibilita.stato-pubblicazione-portali.nessunaDisponibilitaDaPubblicare")})}else this.showError("sbm.disponibilita.stato-pubblicazione-portali.nessunaDisponibilitaDaPubblicare")}ngOnDestroy(){this.headerService.clearTitle(),this.sub.unsubscribe(),this.sub1.unsubscribe()}}ul.\u0275fac=function(o){return new(o||ul)(e.Y36(ie.r),e.Y36(A.s),e.Y36(j.m),e.Y36(dt))},ul.\u0275cmp=e.Xpm({type:ul,selectors:[["app-stato-pubblicazione"]],features:[e.qOj],decls:1,vars:1,consts:[["class","p-3",4,"ngIf"],[1,"p-3"],[4,"ngIf"],["class","border rounded p-3 bg-white",4,"ngIf"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","portale"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","percentualePubblicata"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center flex-wrap pt-1",4,"matCellDef"],["matColumnDef","isErrorePubblicazione"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","isPubblicazioneAttiva"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],["class","portale-icon mr-1 align-middle",3,"src",4,"ngIf"],[1,"d-inline-block","align-middle"],[1,"font-weight-bold"],["class","font-small font-italic",4,"ngIf"],[1,"portale-icon","mr-1","align-middle",3,"src"],[1,"font-small","font-italic"],[1,"justify-content-center"],[1,"justify-content-center","flex-wrap","pt-1"],[1,"percentuale-div","text-center"],["mode","indeterminate",4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],["mode","indeterminate"],["mode","determinate",3,"value"],[1,"border","status-circle",3,"ngClass","click"],[1,"border","status-circle",3,"ngClass"],[1,"mat-table-header"],[1,"border","rounded","p-3","bg-white"]],template:function(o,t){1&o&&e.YNc(0,Xse,3,2,"div",0),2&o&&e.Q6J("ngIf",null!=t.statoPubblicazionePortali)},dependencies:[m.mk,m.O5,h.eB,kc.eI,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,m.JJ,z.X$],styles:[".portale-icon[_ngcontent-%COMP%]{width:24px;height:24px}.color-red[_ngcontent-%COMP%]{background-color:#d9534f}.color-green[_ngcontent-%COMP%]{background-color:#00b572}.status-circle[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%}.percentuale-div[_ngcontent-%COMP%]{width:50px}"]});class Ni{constructor(o){this.navigationService=o}}Ni.\u0275fac=function(o){return new(o||Ni)(e.Y36(Ae.f))},Ni.\u0275cmp=e.Xpm({type:Ni,selectors:[["app-tutorial-dialog"]],inputs:{url:"url"},decls:5,vars:4,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["width","100%","height","100%","frameborder","0",3,"src"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"iframe",2),e.ALo(4,"safeUrl")),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("src",e.lcZ(4,2,t.url?t.url:t.navigationService.tutorialUrl),e.uOi))},dependencies:[h.eB,F.aO,Sc.Q]});var fs=Y(31465),Cc=Y(20553),Cs=Y(28245);function jse(i,o){if(1&i&&(e.TgZ(0,"div",16)(1,"h1"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.environmentTitle)}}function Wse(i,o){if(1&i&&(e.TgZ(0,"i",14),e._uU(1),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(t.icon)}}function epe(i,o){if(1&i&&e._UZ(0,"img",25),2&i){const t=e.oxw(3).$implicit;e.Q6J("src",t.iconImage,e.LSH)}}function tpe(i,o){1&i&&(e.TgZ(0,"i",26),e._uU(1,"priority_high"),e.qZA())}function ipe(i,o){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(6);e.xp6(1),e.Oqu(t.navigationService.numeroRoomService)}}function ope(i,o){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(6);e.xp6(1),e.Oqu(t.navigationService.numeroUpSelling)}}function npe(i,o){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(6);e.xp6(1),e.Oqu(t.navigationService.numeroConteggioPiatti)}}function ape(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(3).index,r=e.oxw();return e.KtG(r.onLinkClick(l,a))})("contextmenu",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(3).index,p=e.oxw();return a.preventDefault(),e.KtG(p.onLinkClick(r,l,!1,!0))}),e.TgZ(2,"i",28),e._uU(3,"play_arrow"),e.qZA(),e.TgZ(4,"p",29),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,ipe,2,1,"span",30),e.YNc(8,ope,2,1,"span",30),e.YNc(9,npe,2,1,"span",30),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(),n=t.index,a=t.$implicit,l=e.oxw(3),r=l.index,p=l.$implicit,T=e.oxw();e.xp6(1),e.ekj("link-active",T.navigationService.activeIndex==r&&T.navigationService.activeChildIndex==n),e.Q6J("id",p.title+">"+a.path)("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(6,8,a.title)+(a.info?" ("+a.info+")":"")),e.xp6(2),e.Q6J("ngIf","room-service"==a.path),e.xp6(1),e.Q6J("ngIf","prenotazioni-up-selling"==a.path),e.xp6(1),e.Q6J("ngIf","conteggio-piatti"==a.path)}}function lpe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ape,10,10,"ng-container",17),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("ngIf",!t.hidden&&(!n.filter||n.controlMenu(t)))}}function rpe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",null,18)(2,"mat-expansion-panel",19),e.NdJ("opened",function(){e.CHM(t);const a=e.MAs(1),l=e.oxw(3);return e.KtG(l.onMenuOpen(a))}),e.TgZ(3,"mat-expansion-panel-header",20)(4,"a",21),e.YNc(5,Wse,2,1,"i",22),e.YNc(6,epe,1,1,"img",23),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,tpe,2,0,"i",24),e.qZA()(),e.YNc(11,lpe,2,1,"ng-container",12),e.qZA()()}if(2&i){const t=e.oxw(2),n=t.index,a=t.$implicit,l=e.oxw();e.xp6(2),e.Q6J("expanded",l.navigationService.activeIndex==n),e.xp6(1),e.Q6J("collapsedHeight","50px")("expandedHeight","50px"),e.xp6(1),e.Q6J("id",a.title)("disableRipple",!0),e.xp6(1),e.Q6J("ngIf",!!a.icon),e.xp6(1),e.Q6J("ngIf",!a.icon&&!!a.iconImage),e.xp6(2),e.Oqu(e.lcZ(9,10,a.title)),e.xp6(2),e.Q6J("ngIf","sbm.configurazione-myself.title"==a.title&&(l.navigationService.numeroRoomService>0||l.navigationService.numeroUpSelling>0||l.navigationService.numeroConteggioPiatti>0)),e.xp6(1),e.Q6J("ngForOf",a.childs)}}function cpe(i,o){if(1&i&&(e.TgZ(0,"i",14),e._uU(1),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(t.icon)}}function spe(i,o){if(1&i&&e._UZ(0,"img",25),2&i){const t=e.oxw(3).$implicit;e.Q6J("src",t.iconImage,e.LSH)}}function ppe(i,o){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.navigationService.numeroRichieste)}}function dpe(i,o){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.navigationService.numeroPreventivi)}}function mpe(i,o){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.navigationService.numeroMessaggi)}}function _pe(i,o){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.navigationService.numeroPrenotazioniExtra)}}function upe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).index,l=e.oxw();return e.KtG(l.onLinkClick(a,null))})("contextmenu",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw();return a.preventDefault(),e.KtG(r.onLinkClick(l,null,!1,!0))}),e.YNc(2,cpe,2,1,"i",22),e.YNc(3,spe,1,1,"img",23),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,ppe,2,1,"span",30),e.YNc(8,dpe,2,1,"span",30),e.YNc(9,mpe,2,1,"span",30),e.YNc(10,_pe,2,1,"span",30),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2),n=t.index,a=t.$implicit,l=e.oxw();e.xp6(1),e.ekj("link-active",l.navigationService.activeIndex==n),e.Q6J("id",a.path)("disableRipple",!0),e.xp6(1),e.Q6J("ngIf",!!a.icon),e.xp6(1),e.Q6J("ngIf",!a.icon&&!!a.iconImage),e.xp6(2),e.Oqu(e.lcZ(6,11,a.title)),e.xp6(2),e.Q6J("ngIf","richieste"==a.path),e.xp6(1),e.Q6J("ngIf","preventivi"==a.path),e.xp6(1),e.Q6J("ngIf","messaggi"==a.path),e.xp6(1),e.Q6J("ngIf","prenotazioni-extra"==a.path)}}function gpe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,rpe,12,12,"div",17),e.YNc(2,upe,11,13,"ng-container",17),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.childs&&t.childs.length>0),e.xp6(1),e.Q6J("ngIf",null==t.childs)}}function hpe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,gpe,3,2,"ng-container",17),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.hidden&&(null==n.navigationService.category||null!=t.categories&&t.categories.includes(n.navigationService.category))&&(!n.filter||n.controlMenu(t)))}}const gl=function(i){return{"filter-icon-selected":i}};class hl extends f.H{constructor(o,t,n,a){super(),this.sessionService=o,this.navigationService=t,this.localizationService=n,this.router=a,this.menuClickEvent=new e.vpe,this.enumMenuCategory=c.V8}ngOnInit(){window.innerWidth>=992&&"/sbm/home"==this.router.url&&(this.sessionService.getRuoloUtente()==c.Gt.SuperAdmin||this.sessionService.getCodicePartner()?this.onLinkClick(1,null,!0):this.onLinkClick(0,null,!0)),this.sub=this.navigationService.menuNotFound.subscribe(()=>{window.innerWidth>=992&&this.onLinkClick(0,null,!0)}),Cc.N.production||(this.environmentTitle=Cc.N.environmentName)}logout(){this.showDialogConfirm("sbm.home.effettuareLogout").then(o=>{this.setIsLoading(!0),this.sessionService.clearSessione(),window.location.href="/sbm"},o=>{})}onLinkClick(o,t,n=!1,a=!1){let l=new d.drL;if(l.replaceUrl=n,l.openInNewTab=a,null==t){if(null!=this.panels)for(let r of this.panels.toArray())r.close();l.route=this.navigationService.menuItems[o],this.menuClickEvent.emit(l)}else l.route=this.navigationService.menuItems[o].childs[t],this.menuClickEvent.emit(l)}onMenuOpen(o){setTimeout(()=>{o.scrollIntoView({behavior:"smooth"})},200)}controlMenu(o){return null==o.childs?this.localizationService.getTranslationSync(o.title).toLowerCase().includes(this.filter.toLowerCase()):o.childs.some(t=>this.localizationService.getTranslationSync(t.title).toLowerCase().includes(this.filter.toLowerCase()))}onMenuFilter(){this.navigationService.category=null,setTimeout(()=>{null!=this.panels&&1==this.panels.length&&this.panels.first.open()},100)}ngOnDestroy(){this.sub.unsubscribe()}}function fpe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"i",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw();return e.KtG(l.onLinkClick(a))})("contextmenu",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return a.preventDefault(),e.KtG(r.onLinkClick(l,!1,!0))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(),n=t.index,a=t.$implicit,l=e.oxw();e.ekj("menu-active",l.navigationService.activeIndex==n),e.xp6(1),e.Oqu(a.icon)}}function Cpe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,fpe,2,3,"i",3),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hidden&&t.isImportant)}}hl.\u0275fac=function(o){return new(o||hl)(e.Y36(j.m),e.Y36(Ae.f),e.Y36(Oe.o),e.Y36(je.F0))},hl.\u0275cmp=e.Xpm({type:hl,selectors:[["app-sidebar"]],viewQuery:function(o,t){if(1&o&&e.Gf(ye.ib,5),2&o){let n;e.iGM(n=e.CRH())&&(t.panels=n)}},outputs:{menuClickEvent:"menuClickEvent"},features:[e.qOj],decls:44,vars:47,consts:[[1,"cont"],["class","ml-3 mt-1 mr-1",4,"ngIf"],[1,"pr-2","pl-2","mt-2","mb-1","d-none","d-lg-block"],[1,"filtraMenu","ml-2"],["matTooltipPosition","right","matTooltipClass","categoria-menu-tooltip-class","mat-icon-button","",1,"filter-icon","mr-2",3,"matTooltip","disableRipple","ngClass","click"],[1,"material-icons-round"],["matTooltipPosition","below","matTooltipClass","categoria-menu-tooltip-class","mat-icon-button","",1,"filter-icon","mr-2",3,"matTooltip","disableRipple","ngClass","click"],["matTooltipPosition","below","matTooltipClass","categoria-menu-tooltip-class","mat-icon-button","",1,"filter-icon",3,"matTooltip","disableRipple","ngClass","click"],[1,"w-100","mt-n3","mb-n2","mr-1","ml-1"],["autocompleteOff","","type","search","matInput","",3,"ngModel","ngModelChange"],[1,"material-icons","color-pink","position-absolute","search"],[1,"pt-0"],[4,"ngFor","ngForOf"],["id","logout","mat-list-item","",3,"click"],[1,"material-icons","mr-2"],[1,"mt-3","ml-3","mb-3"],[1,"ml-3","mt-1","mr-1"],[4,"ngIf"],["menuContainer",""],[1,"mat-elevation-z0","sidebarPanel",3,"expanded","opened"],[3,"collapsedHeight","expandedHeight"],["mat-list-item","",1,"expansion-header",3,"id","disableRipple"],["class","material-icons mr-2",4,"ngIf"],["class","image-icon mr-2 mb-1",3,"src",4,"ngIf"],["class","material-icons-round color-red small-icon",4,"ngIf"],[1,"image-icon","mr-2","mb-1",3,"src"],[1,"material-icons-round","color-red","small-icon"],["mat-list-item","",1,"rounded","ml-3","pr-3",3,"id","disableRipple","click","contextmenu"],[1,"material-icons","menu-child-icon"],[1,"ml-2","my-auto"],["class","numero d-none d-lg-block",4,"ngIf"],[1,"numero","d-none","d-lg-block"],["mat-list-item","",1,"rounded",3,"id","disableRipple","click","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,jse,3,1,"div",1),e.TgZ(2,"div",2)(3,"div",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return t.navigationService.category=null}),e.ALo(7,"translate"),e.TgZ(8,"i",5),e._uU(9,"reorder"),e.qZA()(),e.TgZ(10,"button",6),e.NdJ("click",function(){return t.navigationService.category=t.enumMenuCategory.Web,t.filter=null}),e.ALo(11,"translate"),e.TgZ(12,"i",5),e._uU(13,"cloud"),e.qZA()(),e.TgZ(14,"button",6),e.NdJ("click",function(){return t.navigationService.category=t.enumMenuCategory.Crm,t.filter=null}),e.ALo(15,"translate"),e.TgZ(16,"i",5),e._uU(17,"contacts"),e.qZA()(),e.TgZ(18,"button",6),e.NdJ("click",function(){return t.navigationService.category=t.enumMenuCategory.Statistiche,t.filter=null}),e.ALo(19,"translate"),e.TgZ(20,"i",5),e._uU(21,"assessment"),e.qZA()(),e.TgZ(22,"button",7),e.NdJ("click",function(){return t.navigationService.category=t.enumMenuCategory.Configurazione,t.filter=null}),e.ALo(23,"translate"),e.TgZ(24,"i",5),e._uU(25,"settings"),e.qZA()(),e.TgZ(26,"mat-form-field",8)(27,"input",9),e.NdJ("ngModelChange",function(a){return t.filter=a})("ngModelChange",function(){return t.onMenuFilter()}),e.qZA(),e.TgZ(28,"span",10),e._uU(29,"search"),e.qZA()()(),e.TgZ(30,"mat-accordion")(31,"mat-nav-list",11),e.YNc(32,hpe,2,1,"ng-container",12),e.TgZ(33,"a",13),e.NdJ("click",function(){return t.logout()}),e.TgZ(34,"i",14),e._uU(35,"exit_to_app"),e.qZA(),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",15)(39,"span"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"b"),e._uU(43,"2023B"),e.qZA()()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",!!t.environmentTitle),e.xp6(3),e.Oqu(e.lcZ(5,21,"sbm.home.filtraMenu")),e.xp6(2),e.Q6J("matTooltip",e.lcZ(7,23,"sbm.home.tutte"))("disableRipple",!0)("ngClass",e.VKq(37,gl,null==t.navigationService.category)),e.xp6(4),e.Q6J("matTooltip",e.lcZ(11,25,"sbm.home.web"))("disableRipple",!0)("ngClass",e.VKq(39,gl,t.navigationService.category==t.enumMenuCategory.Web)),e.xp6(4),e.Q6J("matTooltip",e.lcZ(15,27,"sbm.home.crm"))("disableRipple",!0)("ngClass",e.VKq(41,gl,t.navigationService.category==t.enumMenuCategory.Crm)),e.xp6(4),e.Q6J("matTooltip",e.lcZ(19,29,"sbm.home.statistiche"))("disableRipple",!0)("ngClass",e.VKq(43,gl,t.navigationService.category==t.enumMenuCategory.Statistiche)),e.xp6(4),e.Q6J("matTooltip",e.lcZ(23,31,"sbm.home.configurazione"))("disableRipple",!0)("ngClass",e.VKq(45,gl,t.navigationService.category==t.enumMenuCategory.Configurazione)),e.xp6(5),e.Q6J("ngModel",t.filter),e.xp6(5),e.Q6J("ngForOf",t.navigationService.menuItems),e.xp6(4),e.hij("",e.lcZ(37,33,"sbm.home.logout")," "),e.xp6(4),e.Oqu(e.lcZ(41,35,"sbm.home.versione")))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,b.k0,Cs.U,Cs.oh,ye.pp,ye.ib,ye.yz,q.Kd,_.Fj,_.JJ,_.On,z.X$],styles:[".link-active[_ngcontent-%COMP%], .link-active[_ngcontent-%COMP%]:hover{background-color:#e91e631a;color:#e91e63}.expansion-header[_ngcontent-%COMP%]{background-color:transparent!important}mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 10px 0 0!important}.sidebarPanel[_ngcontent-%COMP%]{background-color:transparent}  .sidebarPanel .mat-expansion-panel-body{padding:0!important}  .cont{overflow:auto!important}.menu-child-icon[_ngcontent-%COMP%]{font-size:16px}.small-icon[_ngcontent-%COMP%]{font-size:18px}.numero[_ngcontent-%COMP%]{position:absolute;right:10px;background-color:#e6618d;color:#fff;padding-right:7px;padding-left:7px;padding-top:1px;border-radius:10px;font-size:14px;text-align:center}.image-icon[_ngcontent-%COMP%]{width:24px;height:24px}.filtraMenu[_ngcontent-%COMP%]{color:#929292;font-size:12px}.filter-icon[_ngcontent-%COMP%]{color:#bfbfbf}.filter-icon[_ngcontent-%COMP%]:hover{color:#929292}.filter-icon-selected[_ngcontent-%COMP%]{color:#e91e63!important}.search[_ngcontent-%COMP%]{right:0;bottom:5px}  .categoria-menu-tooltip-class{font-size:11px!important}"]});class fl extends f.H{constructor(o,t,n){super(),this.sessionService=o,this.navigationService=t,this.router=n,this.menuClickEvent=new e.vpe}ngOnInit(){window.innerWidth<992&&"/sbm/home"==this.router.url&&this.onLinkClick(0,!0),this.sub=this.navigationService.menuNotFound.subscribe(()=>{window.innerWidth<992&&this.onLinkClick(0,!0)})}logout(){this.showDialogConfirm("sbm.home.effettuareLogout").then(o=>{this.setIsLoading(!0),this.sessionService.clearSessione(),window.location.href="/sbm"},o=>{})}onLinkClick(o,t=!1,n=!1){let a=new d.drL;a.replaceUrl=t,a.openInNewTab=n,a.route=this.navigationService.menuItems[o],this.menuClickEvent.emit(a)}ngOnDestroy(){this.sub.unsubscribe()}}function bpe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.hidePubblicazioneBox())}),e.TgZ(1,"span",6),e._uU(2,"clear"),e.qZA()()}}function vpe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div"),e._UZ(5,"mat-progress-bar",8),e.TgZ(6,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.bloccaPubblicazione())}),e.TgZ(7,"i",10),e._uU(8,"stop_circle"),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,3,"interfaces.pubblica-disponibilita-portale.pubblicazioneInCorso",t.pubblicazioneInCorsoParameters)," "),e.xp6(3),e.Q6J("value",100*t.giorniPubblicati/t.giorniDaPubblicare.length),e.xp6(1),e.Q6J("disabled",t.stoppaPubblicazione)}}function Tpe(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.xi3(2,1,"interfaces.pubblica-disponibilita-portale.pubblicazioneCompletata",t.pubblicazioneCompletataParameters)," ")}}function xpe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"i",12),e._uU(2,"warning"),e.qZA(),e._UZ(3,"div",13),e.ALo(4,"translate"),e.BQk()),2&i){const t=e.oxw(3);e.xp6(3),e.Q6J("innerHTML",e.xi3(4,1,"interfaces.pubblica-disponibilita-portale.errorePubblicazione",t.errorePubblicazioneParameters),e.oJD)}}function Zpe(i,o){if(1&i&&(e.TgZ(0,"div",11),e.YNc(1,Tpe,3,4,"ng-container",3),e.YNc(2,xpe,5,4,"ng-container",3),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.pubblicazioneCompletataConSuccesso),e.xp6(1),e.Q6J("ngIf",!t.pubblicazioneCompletataConSuccesso)}}function Ape(i,o){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,bpe,3,0,"button",2),e.YNc(2,vpe,9,6,"ng-container",3),e.YNc(3,Zpe,3,2,"div",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=t.pubblicazioneCompletataConSuccesso),e.xp6(1),e.Q6J("ngIf",null==t.pubblicazioneCompletataConSuccesso),e.xp6(1),e.Q6J("ngIf",null!=t.pubblicazioneCompletataConSuccesso)}}fl.\u0275fac=function(o){return new(o||fl)(e.Y36(j.m),e.Y36(Ae.f),e.Y36(je.F0))},fl.\u0275cmp=e.Xpm({type:fl,selectors:[["app-menu-mobile"]],outputs:{menuClickEvent:"menuClickEvent"},features:[e.qOj],decls:4,vars:1,consts:[[1,"w-100","overflow-auto","menu-container","mat-elevation-z5","d-flex","align-items-center","pl-4"],[4,"ngFor","ngForOf"],[1,"material-icons","cursor-pointer",3,"click"],["class","material-icons cursor-pointer mr-4",3,"menu-active","click","contextmenu",4,"ngIf"],[1,"material-icons","cursor-pointer","mr-4",3,"click","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Cpe,2,1,"ng-container",1),e.TgZ(2,"i",2),e.NdJ("click",function(){return t.logout()}),e._uU(3,"exit_to_app"),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("ngForOf",t.navigationService.menuItems))},dependencies:[m.sg,m.O5],styles:[".menu-active[_ngcontent-%COMP%], .menu-active[_ngcontent-%COMP%]:hover{color:#e91e63}.menu-container[_ngcontent-%COMP%]{background-color:#eee;height:60px}"]});class Cl extends f.H{get giorniDaPubblicare(){return this.pubblicazioneService.giorniDaPubblicare}get oidPortale(){var o;return null===(o=this.pubblicazioneService.portale)||void 0===o?void 0:o.oid}get nomePortale(){var o;return null===(o=this.pubblicazioneService.portale)||void 0===o?void 0:o.nome}set isPubblicazioneInCorso(o){this.pubblicazioneService.isPubblicazioneInCorso=o}get showPubblicazioneBox(){return this.pubblicazioneService.showPubblicazioneBox}set showPubblicazioneBox(o){this.pubblicazioneService.showPubblicazioneBox=o}get hasCodaPubblicazione(){return null!=this.pubblicazioneService.codaPubblicazione&&this.pubblicazioneService.codaPubblicazione.length>0}constructor(o,t){super(),this.apiService=o,this.pubblicazioneService=t,this.giorniPubblicati=0,this.stoppaPubblicazione=!1}ngOnInit(){this.sub=this.pubblicazioneService.pubblicaSubject.subscribe(()=>this.pubblica())}pubblica(){this.giorniPubblicati=0,this.pubblicazioneCompletataConSuccesso=null,this.pubblicazioneInCorsoParameters={nomePortale:this.nomePortale,data:u(this.giorniDaPubblicare[0]).format("DD/MM/YYYY")};let o=new d.UXc;o.dal=this.giorniDaPubblicare[0],o.al=this.giorniDaPubblicare[this.giorniDaPubblicare.length-1],o.oidPortale=this.oidPortale,this.apiService.bloccaPubblicazioneAutomatica(o).subscribe(t=>{this.oidPubblicazioneWS=t.data.oid,this.pubblicaDisponibilitaGiorno(null)})}pubblicaDisponibilitaGiorno(o){if(0==this.giorniPubblicati||null!=o&&o.tipoEsito==c.pp.NessunErrore)if(this.giorniPubblicati<this.giorniDaPubblicare.length)if(this.stoppaPubblicazione)this.onPubblicazioneCompletata(),this.hidePubblicazioneBox(),this.stoppaPubblicazione=!1;else{let t=new d.aBs;t.data=this.giorniDaPubblicare[this.giorniPubblicati],t.oidPortale=this.oidPortale,this.apiService.pubblicaDisponibilitaGiorno(t).subscribe(n=>{this.giorniPubblicati++,this.pubblicazioneInCorsoParameters={nomePortale:this.nomePortale,data:u(this.giorniDaPubblicare[this.giorniPubblicati]).format("DD/MM/YYYY")},this.pubblicaDisponibilitaGiorno(n)})}else this.pubblicazioneCompletataConSuccesso=!0,this.pubblicazioneCompletataParameters={nomePortale:this.nomePortale},this.onPubblicazioneCompletata(),setTimeout(()=>{this.hidePubblicazioneBox()},5e3);else this.pubblicazioneCompletataConSuccesso=!1,this.errorePubblicazioneParameters={nomePortale:this.nomePortale,errore:null==o?void 0:o.dettaglioErrore},this.onPubblicazioneCompletata(),this.hasCodaPubblicazione&&setTimeout(()=>{this.hidePubblicazioneBox()},5e3)}sbloccaPubblicazioneAutomatica(){let o=new d.VTZ;o.oid=this.oidPubblicazioneWS,this.apiService.sbloccaPubblicazioneAutomatica(o).subscribe()}bloccaPubblicazione(){this.showDialogConfirm("interfaces.pubblica-disponibilita-portale.interromperePubblicazione").then(o=>this.stoppaPubblicazione=!0,o=>{})}onPubblicazioneCompletata(){this.hasCodaPubblicazione||(this.isPubblicazioneInCorso=!1),this.sbloccaPubblicazioneAutomatica(),this.pubblicazioneService.onPubblicazioneFinished.emit(this.pubblicazioneService.portale)}hidePubblicazioneBox(){this.showPubblicazioneBox=!1,this.hasCodaPubblicazione&&this.pubblicazioneService.pubblicaPortale(this.pubblicazioneService.codaPubblicazione.shift(),!0)}ngOnDestroy(){this.sub.unsubscribe()}}Cl.\u0275fac=function(o){return new(o||Cl)(e.Y36(A.s),e.Y36(dt))},Cl.\u0275cmp=e.Xpm({type:Cl,selectors:[["app-pubblica-disponibilita-portale"]],features:[e.qOj],decls:1,vars:1,consts:[["class","rounded bg-white pubblicazione-box p-3 text-wrap",4,"ngIf"],[1,"rounded","bg-white","pubblicazione-box","p-3","text-wrap"],["mat-icon-button","","class","position-absolute hide-pubblicazione-button",3,"click",4,"ngIf"],[4,"ngIf"],["class","font-weight-bold",4,"ngIf"],["mat-icon-button","",1,"position-absolute","hide-pubblicazione-button",3,"click"],[1,"material-icons","hide-pubblicazione-icon"],[1,"mb-2","font-weight-bold"],["mode","determinate",1,"progressBar",3,"value"],["mat-icon-button","","color","primary",1,"ml-3","bloccaPubblicazioneButton",3,"disabled","click"],[1,"material-icons"],[1,"font-weight-bold"],[1,"material-icons","float-left","warning-icon","mr-1"],[3,"innerHTML"]],template:function(o,t){1&o&&e.YNc(0,Ape,4,3,"div",0),2&o&&e.Q6J("ngIf",t.showPubblicazioneBox)},dependencies:[m.O5,h.eB,kc.eI,z.X$],styles:[".flex[_ngcontent-%COMP%]{flex:1}.progressBar[_ngcontent-%COMP%]{display:inline-block;width:calc(100% - 20px - 1rem)}.bloccaPubblicazioneButton[_ngcontent-%COMP%]{width:20px;height:20px}.bloccaPubblicazioneButton[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px;line-height:20px}.pubblicazione-box[_ngcontent-%COMP%]{width:400px;max-height:400px;overflow-y:auto;position:absolute;z-index:1;bottom:1rem;right:1rem;border:1px solid #aaaaaa}.hide-pubblicazione-button[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px;top:5px;right:5px}.hide-pubblicazione-icon[_ngcontent-%COMP%]{font-size:16px}.warning-icon[_ngcontent-%COMP%]{font-size:20px;line-height:20px;margin-top:2px}"]});const wpe=["drawer"];function zpe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openTutorial())}),e.TgZ(1,"span",14),e._uU(2,"help"),e.qZA()()}}function Mpe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",11),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,zpe,3,0,"button",12),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,t.title)),e.xp6(2),e.Q6J("ngIf",!!t.tutorialUrl)}}function qpe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.onElencoClick())}),e.TgZ(1,"span",16),e._uU(2,"keyboard_arrow_left"),e.qZA(),e.TgZ(3,"span",17),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.elencoName)}}class bl extends f.H{beforeUnloadHandler(o){this.sessionService.logoutUtente();const t=Date.now();for(;Date.now()-t<500;);return null}constructor(o,t,n,a,l,r){super(),this.headerService=o,this.containerService=t,this.navigationService=n,this.sessionService=a,this.utility=l,this.apiService=r,this.mode="side",this.title="",this.tutorialUrl=""}ngOnInit(){this.sessionService.isAttachRequestHeaders=!0,this.sub=this.headerService.openDrawer.subscribe(()=>{this.openDrawer()}),this.sub1=this.headerService.closeDrawer.subscribe(()=>{this.closeDrawer()}),this.sub2=this.headerService.elencoVisibleEvent.subscribe(n=>this.elencoName=n),this.sub4=this.containerService.windowResizeEvent.subscribe(n=>{n.width<992?this.mode="over":this.mode="side",null!=this.previousWindowWidth&&(this.previousWindowWidth<992&&n.width>=992||this.previousWindowWidth>=992&&n.width<992)&&this.navigationService.init().then(()=>{this.navigationService.checkUrl(window.location.href)}),this.previousWindowWidth=n.width}),this.sub5=this.navigationService.tutorialUrlChanged.subscribe(n=>setTimeout(()=>{this.tutorialUrl=n},200)),this.sub6=this.headerService.titleChanged.subscribe(n=>setTimeout(()=>{this.title=n},200)),this.headerService.showHeader(c.h4.Sbm),setTimeout(()=>{this.headerService.showNomeAlbergo(),this.headerService.showMenuTrigger()},200),this.sessionService.isLoggedInSbm()&&(this.navigationService.init(),this.apiService.getTutorials().subscribe(n=>{this.navigationService.tutorials=n.data,this.navigationService.checkUrl(window.location.href)}));let o=this.sessionService.getOidUtente(),t=this.sessionService.getClientId();if(o>0&&t){let n=new d.G9p;n.oidUtente=o,n.clientId=t,this.apiService.loginUtente(n).subscribe()}}ngAfterViewInit(){setTimeout(()=>{window.innerWidth<992?this.mode="over":(this.mode="side",this.openDrawer())},500),this.containerService.setScrollingContainer(),this.previousWindowWidth=window.innerWidth}openMenu(o){null!=o&&null!=o.route&&(o.route.url?window.open(o.route.url):o.route.path&&(o.openInNewTab?window.open(this.utility.getUrlPageSbm(o.route.path,o.route.parameters)):(window.innerWidth<992&&this.closeDrawer(),this.utility.openPageSbm(o.route.path,o.route.parameters,o.replaceUrl))))}openDrawer(){this.headerService.drawerClosed&&(this.headerService.setDrawerOpened(),this.drawer.toggle().then(()=>{this.headerService.drawerFinishedOpeningEvent.emit(),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500)}))}closeDrawer(){this.headerService.drawerClosed||this.drawer.close().then(()=>{this.headerService.setDrawerClosed(),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500)})}openTutorial(){let o=new d.Zpt;o.width="80vw",o.height="80vh",o.panelClass="no-padding-overflow-dialog",this.showModalDialog(Ni,o)}onElencoClick(){null!=this.headerService.onElencoClick&&this.headerService.onElencoClick()}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub4.unsubscribe(),this.sub5.unsubscribe(),this.sub6.unsubscribe(),this.sessionService.logoutUtente()}}function Ppe(i,o){if(1&i&&(e.TgZ(0,"mat-option",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function kpe(i,o){if(1&i&&(e.TgZ(0,"mat-option",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Spe(i,o){1&i&&(e.TgZ(0,"div",34)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.log.accessi.nessunAccesso")))}function ype(i,o){1&i&&(e.TgZ(0,"mat-header-cell",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logAccesso.proprieta.dataCreazione")))}function Jpe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataCreazione,"dd/MM/yyyy HH:mm:ss"))}}function Epe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logAccesso.proprieta.tipoErroreLogAccesso")))}function Npe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoErroreLogAccesso,t.tipoErroreLogAccesso,"tipoErroreLogAccesso")))}}function Ope(i,o){1&i&&(e.TgZ(0,"mat-header-cell",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logAccesso.proprieta.tipoLogAccesso")))}function Lpe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoLogAccesso,t.tipoLogAccesso,"tipoLogAccesso")))}}function Dpe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logAccesso.proprieta.isObsoleto")))}function Ipe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",36),e._UZ(1,"mat-checkbox",37),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isObsoleto)}}function Qpe(i,o){1&i&&e._UZ(0,"mat-header-row",38)}function Upe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",39),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}bl.\u0275fac=function(o){return new(o||bl)(e.Y36(ie.r),e.Y36(te.J),e.Y36(Ae.f),e.Y36(j.m),e.Y36(C.t),e.Y36(A.s))},bl.\u0275cmp=e.Xpm({type:bl,selectors:[["app-home"]],viewQuery:function(o,t){if(1&o&&e.Gf(wpe,5),2&o){let n;e.iGM(n=e.CRH())&&(t.drawer=n.first)}},hostBindings:function(o,t){1&o&&e.NdJ("beforeunload",function(a){return t.beforeUnloadHandler(a)},!1,e.Jf7)},features:[e.qOj],decls:13,vars:7,consts:[[1,"drawer-container",3,"hasBackdrop"],["opened","false",1,"homeMatDrawer","no-print","border-right",3,"mode"],["drawer",""],[1,"menu-contents","pl-1","pr-3"],[3,"menuClickEvent"],["id","scrollingContainer",1,"cont","w-100","no-outline","position-relative"],[1,"w-100","d-none","d-lg-block"],[4,"ngIf"],["class","color-pink d-table pl-2 pt-2 font-weight-bold","href","#",3,"click",4,"ngIf"],["name","homeOutlet"],[1,"d-block","d-lg-none"],[1,"ml-3","mb-1","mt-2","page-title","d-inline-block","align-middle"],["mat-icon-button","","class","ml-2 align-middle",3,"click",4,"ngIf"],["mat-icon-button","",1,"ml-2","align-middle",3,"click"],[1,"material-icons","mt-1"],["href","#",1,"color-pink","d-table","pl-2","pt-2","font-weight-bold",3,"click"],[1,"material-icons","align-middle"],[1,"d-inline-block","align-middle"]],template:function(o,t){if(1&o&&(e.TgZ(0,"mat-drawer-container",0)(1,"mat-drawer",1,2)(3,"div",3)(4,"app-sidebar",4),e.NdJ("menuClickEvent",function(a){return t.openMenu(a)}),e.qZA()()(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,Mpe,5,4,"ng-container",7),e.YNc(8,qpe,5,1,"a",8),e.qZA(),e._UZ(9,"router-outlet",9),e.qZA(),e.TgZ(10,"div",10)(11,"app-menu-mobile",4),e.NdJ("menuClickEvent",function(a){return t.openMenu(a)}),e.qZA()(),e._UZ(12,"app-pubblica-disponibilita-portale"),e.qZA()),2&o){const n=e.MAs(2);e.ekj("drawer-opened",n.opened),e.Q6J("hasBackdrop",!1),e.xp6(1),e.Q6J("mode",t.mode),e.xp6(4),e.uIk("tabIndex",0),e.xp6(2),e.Q6J("ngIf",!!t.title&&(!t.elencoName||t.headerService.titleVisibleElenco)),e.xp6(1),e.Q6J("ngIf",!!t.elencoName)}},dependencies:[m.O5,h.eB,fs.jA,fs.kh,je.lC,hl,fl,Cl,z.X$],styles:[".homeMatDrawer[_ngcontent-%COMP%]{width:250px;height:100%;overflow:visible;background-color:#fff}@media (min-width: 992px){.homeMatDrawer[_ngcontent-%COMP%]{width:300px}}.drawer-container[_ngcontent-%COMP%]{height:100%}.menu-contents[_ngcontent-%COMP%]{overflow:auto;height:100%}.cont[_ngcontent-%COMP%]{background-color:#fff}.no-outline[_ngcontent-%COMP%]{outline:none}.page-title[_ngcontent-%COMP%]{border-style:solid;border-width:0px 0px 2px 0;border-color:#e91e6380;display:table}#scrollingContainer[_ngcontent-%COMP%]{height:calc(100% - 60px);background-color:#f4f5f7}@media (min-width: 992px){#scrollingContainer[_ngcontent-%COMP%]{height:100%}}"]});class vl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.rq=new d.k$g,this.displayedColumns=["dataCreazione","tipoErroreLogAccesso","tipoLogAccesso","isObsoleto"],this.enumTipoErroreLogAccesso=c.S6,this.enumTipoLogAccesso=c.GS}ngOnInit(){this.headerService.setTitle("sbm.log.accessi.title"),this.filters=[],this.filters.push(new d.wn$("dataCreazione",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("dataCreazione",c.Hp.LowerEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("tipoErroreLogAccesso",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tipoLogAccesso",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tag3",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(!n),this.paginator.firstPage()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getAccessiFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,o||this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}function Ype(i,o){1&i&&(e.TgZ(0,"div",26)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.log.api-keys.nessunLogApiKey")))}function Rpe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.albergoApiKeysLog.proprieta.dataPrimaRichiesta")))}function Fpe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataPrimaRichiesta,"dd/MM/yyyy HH:mm:ss"))}}function Hpe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.albergoApiKeysLog.proprieta.dataUltimaRichiesta")))}function Kpe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dataUltimaRichiesta,"dd/MM/yyyy HH:mm:ss"))}}function Gpe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.albergoApiKeysLog.proprieta.numeroRichieste")))}function $pe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.numeroRichieste)}}function Bpe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.albergoApiKeysLog.proprieta.operazione")))}function Vpe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.operazione)}}function Xpe(i,o){1&i&&e._UZ(0,"mat-header-row",28)}function jpe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",29),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}vl.\u0275fac=function(o){return new(o||vl)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},vl.\u0275cmp=e.Xpm({type:vl,selectors:[["app-accessi"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:55,vars:35,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"value","dateChange"],["matSuffix","",3,"for"],["picker",""],[3,"placeholder","value","selectionChange"],["tipoErroreLogAccessoSelect",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["tipoLogAccessoSelect",""],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["utenteSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","dataCreazione","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","dataCreazione"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","tipoErroreLogAccesso"],["matColumnDef","tipoLogAccesso"],["matColumnDef","isObsoleto"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-sort-header",""],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(13);return e.KtG(l.open())}),e.TgZ(9,"input",6),e.NdJ("dateChange",function(l){return null!=l.value?t.filters[0].value=t.getDate(l.value):null}),e.qZA(),e.TgZ(10,"input",7),e.NdJ("dateChange",function(l){return null!=l.value?t.onSearch(1,t.getDate(l.value)):null}),e.qZA()(),e._UZ(11,"mat-datepicker-toggle",8)(12,"mat-date-range-picker",null,9),e.qZA()(),e.TgZ(14,"div",3)(15,"mat-form-field",4)(16,"mat-select",10,11),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(17);return e.KtG(t.onSearch(2,l.value))}),e.ALo(18,"translate"),e._UZ(19,"mat-option",12),e.YNc(20,Ppe,3,4,"mat-option",13),e.ALo(21,"selectEnum"),e.qZA()()(),e.TgZ(22,"div",3)(23,"mat-form-field",4)(24,"mat-select",10,14),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(25);return e.KtG(t.onSearch(3,l.value))}),e.ALo(26,"translate"),e._UZ(27,"mat-option",12),e.YNc(28,kpe,3,4,"mat-option",13),e.ALo(29,"selectEnum"),e.qZA()()(),e.TgZ(30,"div",3)(31,"mat-form-field",4)(32,"input",15,16),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(33);return e.KtG(t.onSearch(4,l.value,!1))}),e.ALo(34,"translate"),e.qZA()()()()(),e.YNc(35,Spe,4,3,"div",17),e.TgZ(36,"div",18)(37,"div",19)(38,"mat-table",20),e.NdJ("matSortChange",function(){return null!=t.paginator?t.paginator.firstPage():null}),e.ynx(39,21),e.YNc(40,ype,3,3,"mat-header-cell",22),e.YNc(41,Jpe,3,4,"mat-cell",23),e.BQk(),e.ynx(42,24),e.YNc(43,Epe,3,3,"mat-header-cell",22),e.YNc(44,Npe,3,3,"mat-cell",23),e.BQk(),e.ynx(45,25),e.YNc(46,Ope,3,3,"mat-header-cell",22),e.YNc(47,Lpe,3,3,"mat-cell",23),e.BQk(),e.ynx(48,26),e.YNc(49,Dpe,3,3,"mat-header-cell",27),e.YNc(50,Ipe,2,1,"mat-cell",28),e.BQk(),e.YNc(51,Qpe,1,0,"mat-header-row",29),e.YNc(52,Upe,1,1,"mat-row",30),e.qZA()(),e.TgZ(53,"div",31)(54,"mat-paginator",32),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()}if(2&o){const n=e.MAs(13);e.xp6(6),e.Oqu(e.lcZ(7,21,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("value",t.filters[0].value),e.xp6(1),e.Q6J("value",t.filters[1].value),e.xp6(1),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(18,23,"bo.logAccesso.proprieta.tipoErroreLogAccesso")),e.Q6J("value",t.filters[2].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(21,25,t.enumTipoErroreLogAccesso,"tipoErroreLogAccesso")),e.xp6(4),e.s9C("placeholder",e.lcZ(26,28,"bo.logAccesso.proprieta.tipoLogAccesso")),e.Q6J("value",t.filters[3].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(29,30,t.enumTipoLogAccesso,"tipoLogAccesso")),e.xp6(4),e.Q6J("placeholder",e.lcZ(34,33,"globals.utente"))("value",t.filters[4].value),e.xp6(3),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}},dependencies:[m.sg,m.O5,w.X,V.FC,M.v_,M.$V,M.nX,b.k0,re.CK,y.nW,y.wx,y.zY,y.By,y._g,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,m.uU,Te.A,z.X$]});class Tl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.rq=new d.k$g,this.displayedColumns=["dataPrimaRichiesta","dataUltimaRichiesta","numeroRichieste","operazione"]}ngOnInit(){this.headerService.setTitle("sbm.log.api-keys.title"),this.filters=[],this.filters.push(new d.wn$("dataPrimaRichiesta",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("dataPrimaRichiesta",c.Hp.LowerEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("operazione",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}onSearch(o,t,n=!0){this.filters[o].value=t,this.download(!n),this.paginator.firstPage()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getLogApiKeysFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,o||this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}function Wpe(i,o){1&i&&(e.TgZ(0,"div",34)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.log.prenotazioni-ricevute.nessunaPrenotazioneRicevuta")))}function ede(i,o){1&i&&(e.TgZ(0,"mat-header-cell",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneWS.proprieta.portaleXAlbergo")))}function tde(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.portaleXAlbergo?t.portaleXAlbergo.nome:"")}}function ide(i,o){1&i&&(e.TgZ(0,"mat-header-cell",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneWS.proprieta.arrivo")))}function ode(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.arrivo,"dd/MM/yyyy"))}}function nde(i,o){1&i&&(e.TgZ(0,"mat-header-cell",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneWS.proprieta.partenza")))}function ade(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.partenza,"dd/MM/yyyy"))}}function lde(i,o){1&i&&(e.TgZ(0,"mat-header-cell",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneWS.proprieta.codiceOTA")))}function rde(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.codiceOTA)}}function cde(i,o){1&i&&(e.TgZ(0,"mat-header-cell",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneWS.proprieta.indiceCameraOTA")))}function sde(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.indiceCameraOTA)}}function pde(i,o){1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneWS.proprieta.isImportata")))}function dde(i,o){if(1&i&&(e.TgZ(0,"mat-cell",37),e._UZ(1,"mat-checkbox",38),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isImportata)}}function mde(i,o){1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneWS.proprieta.isModificataSulPortale")))}function _de(i,o){if(1&i&&(e.TgZ(0,"mat-cell",37),e._UZ(1,"mat-checkbox",38),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isModificataSulPortale)}}function ude(i,o){1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneWS.proprieta.isCancellataSulPortale")))}function gde(i,o){if(1&i&&(e.TgZ(0,"mat-cell",37),e._UZ(1,"mat-checkbox",38),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isCancellataSulPortale)}}function hde(i,o){1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazioneWS.proprieta.isRecuperata")))}function fde(i,o){if(1&i&&(e.TgZ(0,"mat-cell",37),e._UZ(1,"mat-checkbox",38),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isRecuperata)}}function Cde(i,o){1&i&&e._UZ(0,"mat-header-row",39)}function bde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",40),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Tl.\u0275fac=function(o){return new(o||Tl)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Tl.\u0275cmp=e.Xpm({type:Tl,selectors:[["app-log-api-keys"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:39,vars:19,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"value","dateChange"],["matSuffix","",3,"for"],["picker",""],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["operazioneSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","dataPrimaRichiesta","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","dataPrimaRichiesta"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","dataUltimaRichiesta"],["matColumnDef","numeroRichieste"],["matColumnDef","operazione"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-sort-header",""],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(13);return e.KtG(l.open())}),e.TgZ(9,"input",6),e.NdJ("dateChange",function(l){return null!=l.value?t.filters[0].value=t.getDate(l.value):null}),e.qZA(),e.TgZ(10,"input",7),e.NdJ("dateChange",function(l){return null!=l.value?t.onSearch(1,t.getDate(l.value)):null}),e.qZA()(),e._UZ(11,"mat-datepicker-toggle",8)(12,"mat-date-range-picker",null,9),e.qZA()(),e.TgZ(14,"div",3)(15,"mat-form-field",4)(16,"input",10,11),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(17);return e.KtG(t.onSearch(2,l.value,!1))}),e.ALo(18,"translate"),e.qZA()()()()(),e.YNc(19,Ype,4,3,"div",12),e.TgZ(20,"div",13)(21,"div",14)(22,"mat-table",15),e.NdJ("matSortChange",function(){return null!=t.paginator?t.paginator.firstPage():null}),e.ynx(23,16),e.YNc(24,Rpe,3,3,"mat-header-cell",17),e.YNc(25,Fpe,3,4,"mat-cell",18),e.BQk(),e.ynx(26,19),e.YNc(27,Hpe,3,3,"mat-header-cell",17),e.YNc(28,Kpe,3,4,"mat-cell",18),e.BQk(),e.ynx(29,20),e.YNc(30,Gpe,3,3,"mat-header-cell",17),e.YNc(31,$pe,2,1,"mat-cell",18),e.BQk(),e.ynx(32,21),e.YNc(33,Bpe,3,3,"mat-header-cell",17),e.YNc(34,Vpe,2,1,"mat-cell",18),e.BQk(),e.YNc(35,Xpe,1,0,"mat-header-row",22),e.YNc(36,jpe,1,1,"mat-row",23),e.qZA()(),e.TgZ(37,"div",24)(38,"mat-paginator",25),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()}if(2&o){const n=e.MAs(13);e.xp6(6),e.Oqu(e.lcZ(7,15,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("value",t.filters[0].value),e.xp6(1),e.Q6J("value",t.filters[1].value),e.xp6(1),e.Q6J("for",n),e.xp6(5),e.Q6J("placeholder",e.lcZ(18,17,"bo.albergoApiKeysLog.proprieta.operazione"))("value",t.filters[2].value),e.xp6(3),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}},dependencies:[m.O5,w.X,M.v_,M.$V,M.nX,b.k0,y.nW,y.wx,y.zY,y.By,y._g,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,m.uU,z.X$]});class xl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.pageSize=25,this.rq=new d.k$g,this.displayedColumns=["portaleXAlbergo.nome","arrivo","partenza","codiceOTA","indiceCameraOTA","isImportata","isModificataSulPortale","isCancellataSulPortale","isRecuperata"],this.search=!1}ngOnInit(){this.headerService.setTitle("sbm.log.prenotazioni-ricevute.title"),this.rq.skip=0,this.rq.take=this.pageSize,this.sorting=new d.aQR("arrivo",c.nI.Desc),this.filters=[],this.filters.push(new d.wn$("portaleXAlbergo.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("arrivo",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("arrivo",c.Hp.LowerEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("codiceOTA",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}onSearch(o,t,n=!0){this.search=!n,this.filters[o].value=t,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onSortChange(o){this.sorting.field=o.active,this.sorting.type="asc"==o.direction?c.nI.Asc:c.nI.Desc,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}download(){this.search||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[this.sorting],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPrenotazioniWSFilter(this.rq).subscribe(o=>{this.data=o.data,this.totalRecords=o.totalRecords,this.search?this.search=!1:this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}xl.\u0275fac=function(o){return new(o||xl)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},xl.\u0275cmp=e.Xpm({type:xl,selectors:[["app-prenotazioni-ricevute"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:57,vars:24,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-4"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"value","dateChange"],["matSuffix","",3,"for"],["picker",""],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["codiceOTASearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","arrivo","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","portaleXAlbergo.nome"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","codiceOTA"],["matColumnDef","indiceCameraOTA"],["matColumnDef","isImportata"],["class","justify-content-center","mat-sort-header","",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","isModificataSulPortale"],["matColumnDef","isCancellataSulPortale"],["matColumnDef","isRecuperata"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-sort-header",""],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-view-select",4),e.NdJ("valueChange",function(l){return t.onSearch(0,-1==l.oid?"":l.oid.toString())}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",3)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"mat-date-range-input",6),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(16);return e.KtG(l.open())}),e.TgZ(12,"input",7),e.NdJ("dateChange",function(l){return null!=l.value?t.filters[1].value=t.getDate(l.value):null}),e.qZA(),e.TgZ(13,"input",8),e.NdJ("dateChange",function(l){return null!=l.value?t.onSearch(2,t.getDate(l.value)):null}),e.qZA()(),e._UZ(14,"mat-datepicker-toggle",9)(15,"mat-date-range-picker",null,10),e.qZA()(),e.TgZ(17,"div",3)(18,"mat-form-field",5)(19,"input",11,12),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(20);return e.KtG(t.onSearch(3,l.value,!1))}),e.ALo(21,"translate"),e.qZA()()()()(),e.YNc(22,Wpe,4,3,"div",13),e.TgZ(23,"div",14)(24,"div",15)(25,"mat-table",16),e.NdJ("matSortChange",function(l){return t.onSortChange(l)}),e.ynx(26,17),e.YNc(27,ede,3,3,"mat-header-cell",18),e.YNc(28,tde,2,1,"mat-cell",19),e.BQk(),e.ynx(29,20),e.YNc(30,ide,3,3,"mat-header-cell",18),e.YNc(31,ode,3,4,"mat-cell",19),e.BQk(),e.ynx(32,21),e.YNc(33,nde,3,3,"mat-header-cell",18),e.YNc(34,ade,3,4,"mat-cell",19),e.BQk(),e.ynx(35,22),e.YNc(36,lde,3,3,"mat-header-cell",18),e.YNc(37,rde,2,1,"mat-cell",19),e.BQk(),e.ynx(38,23),e.YNc(39,cde,3,3,"mat-header-cell",18),e.YNc(40,sde,2,1,"mat-cell",19),e.BQk(),e.ynx(41,24),e.YNc(42,pde,3,3,"mat-header-cell",25),e.YNc(43,dde,2,1,"mat-cell",26),e.BQk(),e.ynx(44,27),e.YNc(45,mde,3,3,"mat-header-cell",25),e.YNc(46,_de,2,1,"mat-cell",26),e.BQk(),e.ynx(47,28),e.YNc(48,ude,3,3,"mat-header-cell",25),e.YNc(49,gde,2,1,"mat-cell",26),e.BQk(),e.ynx(50,29),e.YNc(51,hde,3,3,"mat-header-cell",25),e.YNc(52,fde,2,1,"mat-cell",26),e.BQk(),e.YNc(53,Cde,1,0,"mat-header-row",30),e.YNc(54,bde,1,1,"mat-row",31),e.qZA()(),e.TgZ(55,"div",32)(56,"mat-paginator",33),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()()}if(2&o){const n=e.MAs(16);e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect())("placeholder",e.lcZ(5,18,"globals.portale")),e.xp6(5),e.Oqu(e.lcZ(10,20,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("value",t.filters[1].value),e.xp6(1),e.Q6J("value",t.filters[2].value),e.xp6(1),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(21,22,"bo.prenotazioneWS.proprieta.codiceOTA")),e.Q6J("value",t.filters[3].value),e.xp6(3),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.data),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords)}},dependencies:[m.O5,w.X,V.FC,M.v_,M.$V,M.nX,b.k0,y.nW,y.wx,y.zY,y.By,y._g,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,ne.d,m.uU,z.X$]});var vde=Y(86747),Oi=Y(17321);function Tde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.utility.openPageSbm("preventivi"))}),e.TgZ(1,"span",32),e._uU(2,"arrow_back"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"sbm.mail.tornaAPreventivi")))}function xde(i,o){if(1&i&&(e.TgZ(0,"span",37),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.messageNotSeenCount)}}const bs=function(i){return{"color-pink":i}},vs=function(i){return{"folder-selected":i}};function Zde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tree-node",33)(1,"mat-icon",34),e._uU(2,"lens"),e.qZA(),e.TgZ(3,"span",35),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onFolderClick(l.fullName,l.isAllEmails))}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,xde,2,1,"span",36),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(6,bs,n.rq.folder==t.fullName)),e.xp6(2),e.Q6J("ngClass",e.VKq(8,vs,n.rq.folder==t.fullName)),e.xp6(1),e.Oqu(t.isInbox?e.lcZ(5,4,"sbm.mail.postaInArrivo"):t.name),e.xp6(2),e.Q6J("ngIf",t.messageNotSeenCount>0)}}function Ade(i,o){if(1&i&&(e.TgZ(0,"span",37),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.messageNotSeenCount)}}const wde=function(i){return{"d-none":i}};function zde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-nested-tree-node")(1,"div",38)(2,"button",39)(3,"mat-icon",40),e._uU(4),e.qZA()(),e.TgZ(5,"span",35),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onFolderClick(l.fullName,l.isAllEmails))}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,Ade,2,1,"span",36),e.qZA(),e.TgZ(9,"div",41),e.GkF(10,42),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngClass",e.VKq(8,bs,n.rq.folder==t.fullName)),e.xp6(1),e.Oqu(n.treeControl.isExpanded(t)?"expand_more":"chevron_right"),e.xp6(1),e.Q6J("ngClass",e.VKq(10,vs,n.rq.folder==t.fullName)),e.xp6(1),e.Oqu(t.isInbox?e.lcZ(7,6,"sbm.mail.postaInArrivo"):t.name),e.xp6(2),e.Q6J("ngIf",t.messageNotSeenCount>0),e.xp6(1),e.Q6J("ngClass",e.VKq(12,wde,!n.treeControl.isExpanded(t)))}}function Mde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sendEmail())}),e.TgZ(1,"i",44),e._uU(2,"add"),e.qZA()()}}function qde(i,o){1&i&&(e.TgZ(0,"div")(1,"div",45)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"sbm.mail.nessunMessaggio")))}function Pde(i,o){1&i&&e._UZ(0,"mat-header-cell")}function kde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",46)(1,"button",47),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.creaPreventivo(r))}),e.TgZ(2,"i",48),e._uU(3,"add_circle_outline"),e.qZA()()()}}function Sde(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.mail.date")))}const Nc=function(i){return{"font-weight-bold":i}};function yde(i,o){if(1&i&&(e.TgZ(0,"mat-cell",40),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(5,Nc,!t.isSeen)),e.xp6(1),e.Oqu(e.xi3(2,2,t.date,"dd/MM/yyyy HH:mm:ss"))}}function Jde(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.mail.subject")))}function Ede(i,o){if(1&i&&(e.TgZ(0,"mat-cell",40),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(2,Nc,!t.isSeen)),e.xp6(1),e.Oqu(t.subject)}}function Nde(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.mail.from")))}function Ode(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49)(1,"div",4),e._uU(2),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.qZA()()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(3,Nc,!t.isSeen)),e.xp6(2),e.Oqu(t.fromDisplayName),e.xp6(2),e.Oqu(t.from)}}function Lde(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Dde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.deleteMail(l.id))}),e.TgZ(1,"i",53),e._uU(2,"delete"),e.qZA()()}}function Ide(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",50),e.YNc(1,Dde,3,0,"button",51),e.TgZ(2,"button",52),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.setMailAsNotSeen(r.id))}),e.TgZ(3,"i",53),e._uU(4,"mark_email_unread"),e.qZA()(),e.TgZ(5,"button",47),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.sendEmail(r))}),e.TgZ(6,"i",53),e._uU(7,"reply"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",!n.isAllEmails),e.xp6(1),e.Q6J("disabled",!t.isSeen)}}function Qde(i,o){1&i&&e._UZ(0,"mat-header-row",54)}function Ude(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",55),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.onMailClick(r):null)}),e.qZA()}}function Yde(i,o){if(1&i&&(e.TgZ(0,"h4"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.message.subject)}}const Rde=function(i){return{"message-container-text-body":i}};function Fde(i,o){if(1&i&&(e.TgZ(0,"div",65),e._UZ(1,"app-inner-html",66),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Rde,!t.message.isBodyHtml)),e.xp6(1),e.Q6J("_text",t.message.body)}}function Hde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",67)(1,"div",68)(2,"app-preventivi-add",69),e.NdJ("onPreventivoCreated",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showCreaPreventivo=!1)})("onCloseButtonClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showCreaPreventivo=!1)}),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("cliente",t.cliente)("maxHeight",700)("showOpenPreventivoButton",!0)}}const Kde=function(i,o){return{"col-6 pr-1":i,"col-12":o}};function Gde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",56),e.YNc(2,Yde,2,1,"h4",13),e.TgZ(3,"button",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.back())}),e.TgZ(4,"span",58),e._uU(5,"arrow_back"),e.qZA(),e.TgZ(6,"span",59),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"button",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sendEmail(a.message))}),e.TgZ(10,"span",60),e._uU(11,"reply"),e.qZA(),e.TgZ(12,"span",59),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"button",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.cliente=a.getCliente(a.message),e.KtG(a.showCreaPreventivo=!0)}),e.TgZ(16,"span",58),e._uU(17,"add_circle_outline"),e.qZA(),e.TgZ(18,"span",59),e._uU(19),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"div",62)(22,"div",40),e.YNc(23,Fde,2,4,"div",63),e.qZA(),e.YNc(24,Hde,3,3,"div",64),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!!t.message.subject),e.xp6(5),e.Oqu(e.lcZ(8,7,"globals.indietro")),e.xp6(6),e.Oqu(e.lcZ(14,9,"sbm.mail.rispondi")),e.xp6(6),e.Oqu(e.lcZ(20,11,"sbm.mail.creaPreventivo")),e.xp6(3),e.Q6J("ngClass",e.WLB(13,Kde,t.showCreaPreventivo,!t.showCreaPreventivo)),e.xp6(1),e.Q6J("ngIf",!!t.message.body),e.xp6(1),e.Q6J("ngIf",t.showCreaPreventivo)}}class Zl extends f.H{constructor(o,t,n,a,l,r){super(),this.apiService=o,this.utility=t,this.containerService=n,this.headerService=a,this.sessionService=l,this.route=r,this.accountMailRQ=d.k$g.fromFilter("isScaricaMailCrm",c.Hp.IsTrue),this.rq=new d.AKp,this.pageSize=10,this.folders=[],this.messageCount=0,this.treeControl=new vde.VY(p=>p.folders),this.expandedFolders=[],this.displayedColumns=["edit","date","subject","from","actions"],this.showCreaPreventivo=!1}ngOnInit(){this.setIsLoading(!0),this.headerService.setTitle("sbm.mail.title"),this.apiService.getAccountMailViewSelect(this.accountMailRQ,!1).subscribe(o=>{o.data.length>0?(this.account=o.data[0],this.onAccountMailChange()):this.setIsLoading(!1)}),this.rq.take=this.pageSize,this.sub=this.route.queryParamMap.subscribe(o=>{this.isPreventivi="true"==o.get("isPreventivi")}),this.sessionService.isCrmAttivo()||(this.displayedColumns=this.displayedColumns.slice(1))}onAccountMailChange(){this.folders=[],this.onFolderClick("INBOX",!1,!0)}onFolderClick(o,t,n=!1){this.showCreaPreventivo=!1,this.message=null,this.messages=null,this.subject=null,this.rq.subject=null,this.rq.folder=o,this.isAllEmails=t,this.rq.skip=0,this.paginator.firstPage(),n?this.download():this.downloadFolder()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.downloadFolder(),this.containerService.scrollToTop()}onSearch(){this.showCreaPreventivo=!1,this.message=null,this.messages=null,this.rq.subject=this.subject,this.rq.folder=null,this.isAllEmails=!0,this.rq.skip=0,this.paginator.firstPage(),this.subject?this.searchMail():this.onFolderClick("INBOX",!1)}download(o=!0){o&&this.setIsLoading(!0),this.expandedFolders=[],this.saveExpandedFolders(this.folders),this.apiService.getMail(this.account.oid,this.rq).subscribe(t=>{this.folders=t.data.folders,this.restoreExpandedFolders(this.folders),this.messages=t.data.messages,this.messageCount=t.data.messageCount,o&&this.setIsLoading(!1)})}downloadFolder(){this.setIsLoading(!0),this.apiService.getMailFolder(this.account.oid,this.rq).subscribe(o=>{this.messages=o.data.messages,this.messageCount=o.data.messageCount,this.setIsLoading(!1)})}searchMail(){this.setIsLoading(!0),this.apiService.searchMail(this.account.oid,this.rq).subscribe(o=>{this.messages=o.data.messages,this.messageCount=o.data.messageCount,this.setIsLoading(!1)})}deleteMail(o){this.showDialogConfirm("sbm.mail.eliminareMail").then(t=>{this.setIsLoading(!0);let n=new d.DRV;n.folder=this.rq.folder,n.id=o,this.apiService.deleteMail(this.account.oid,n).subscribe(()=>{this.download()})},t=>{})}setMailAsSeen(o){let t=new d.$9G;t.folder=this.rq.folder,t.isSeen=!0,t.id=o,this.apiService.setMailAsSeen(this.account.oid,t).subscribe(()=>{this.download(!1)})}setMailAsNotSeen(o){this.setIsLoading(!0);let t=new d.$9G;t.folder=this.rq.folder,t.isSeen=!1,t.id=o,this.apiService.setMailAsSeen(this.account.oid,t).subscribe(()=>{this.download()})}onMailClick(o){this.showCreaPreventivo=!1,this.message=o,o.isSeen||this.setMailAsSeen(o.id)}hasChild(o,t){return!!t.folders&&t.folders.length>0}saveExpandedFolders(o){o.forEach(t=>{this.treeControl.isExpanded(t)&&this.expandedFolders.push(t),this.saveExpandedFolders(t.folders)})}restoreExpandedFolders(o){o.forEach(t=>{this.expandedFolders.find(n=>n.fullName==t.fullName)&&this.treeControl.expand(t),this.restoreExpandedFolders(t.folders)})}back(){this.showCreaPreventivo=!1,this.message=null,this.containerService.scrollToTop()}creaPreventivo(o){let t=new d.Zpt;t.disableClose=!0,t.width="50vw",t.height="80vh",t.panelClass="no-padding-overflow-dialog";let n=this.showModalDialog(ui,t),a=n.componentInstance;a.cliente=this.getCliente(o),a.showOpenPreventivoButton=!0,a.dialogRef=n}getCliente(o){let t=new v.c1h;if(o.fromDisplayName){let n=o.fromDisplayName.split(" ");t.nome=n[0],n.length>1&&(t.cognome=n[1])}return t.email=o.from,t}sendEmail(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Qe,t),a=n.componentInstance;a.oidAccount=this.account.oid,a.tipoTemplate=c.hQ.RispostaPostaCrm,a.email=null==o?void 0:o.replyTo,a.oggetto=null==o?void 0:o.subject,a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&this.download()})}ngOnDestroy(){this.headerService.clearTitle(),this.sub.unsubscribe()}}Zl.\u0275fac=function(o){return new(o||Zl)(e.Y36(A.s),e.Y36(C.t),e.Y36(te.J),e.Y36(ie.r),e.Y36(j.m),e.Y36(je.gz))},Zl.\u0275cmp=e.Xpm({type:Zl,selectors:[["app-mail"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:40,vars:23,consts:[["mat-flat-button","","color","primary","class","tornaAPreventiviButton",3,"click",4,"ngIf"],[1,"p-3"],[1,"folders-div","pr-4"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","keyup.enter","ngModelChange"],["matSuffix","",1,"material-icons","cursor-pointer","color-pink","align-bottom","mb-n1",3,"click"],[1,"mt-3"],[1,"folders-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"messages-div"],["mat-mini-fab","","color","primary","class","mat-table-add",3,"click",4,"ngIf"],[4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","date"],[3,"ngClass",4,"matCellDef"],["matColumnDef","subject"],["matColumnDef","from"],["class","flex-wrap",3,"ngClass",4,"matCellDef"],["matColumnDef","actions"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","cursor-pointer",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["hidePageSize","","showFirstLastButtons","",3,"pageSize","length","page"],["mat-flat-button","","color","primary",1,"tornaAPreventiviButton",3,"click"],[1,"material-icons","mr-1","back-icon"],["matTreeNodeToggle",""],[1,"folder-icon",3,"ngClass"],[1,"mr-3","cursor-pointer",3,"ngClass","click"],["class","message-count",4,"ngIf"],[1,"message-count"],[1,"mat-tree-node"],["mat-icon-button","","matTreeNodeToggle","",1,"node-toggle-button"],[3,"ngClass"],["role","group",3,"ngClass"],["matTreeNodeOutlet",""],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-edit-row"],[1,"flex-wrap",3,"ngClass"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"disabled","click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],[1,"cursor-pointer",3,"click"],[1,"mb-3"],["mat-flat-button","","color","primary",1,"back-button","mr-1",3,"click"],[1,"material-icons","d-inline-block","align-middle","mr-1","back-icon"],[1,"d-inline-block","align-middle"],[1,"material-icons","d-inline-block","align-middle","mr-1","mb-1","back-icon"],["mat-flat-button","","color","primary",1,"back-button",3,"click"],[1,"row"],["class","border rounded-lg bg-white message-container p-3",3,"ngClass",4,"ngIf"],["class","col-6 pl-1",4,"ngIf"],[1,"border","rounded-lg","bg-white","message-container","p-3",3,"ngClass"],[3,"_text"],[1,"col-6","pl-1"],[1,"border","rounded-lg","bg-white"],[3,"cliente","maxHeight","showOpenPreventivoButton","onPreventivoCreated","onCloseButtonClick"]],template:function(o,t){1&o&&(e.YNc(0,Tde,6,3,"button",0),e.TgZ(1,"div",1)(2,"div",2)(3,"app-view-select",3),e.NdJ("valueChange",function(a){return t.account=a})("valueChange",function(){return t.onAccountMailChange()}),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-form-field",4)(6,"input",5),e.NdJ("keyup.enter",function(){return t.onSearch()})("ngModelChange",function(a){return t.subject=a}),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"i",6),e.NdJ("click",function(){return t.onSearch()}),e._uU(9,"search"),e.qZA()(),e.TgZ(10,"div",7)(11,"mat-tree",8),e.YNc(12,Zde,7,10,"mat-tree-node",9),e.YNc(13,zde,11,14,"mat-nested-tree-node",10),e.qZA()()(),e.TgZ(14,"div",11),e.YNc(15,Mde,3,0,"button",12),e.YNc(16,qde,5,3,"div",13),e.TgZ(17,"div",14)(18,"div",15)(19,"mat-table",16),e.ynx(20,17),e.YNc(21,Pde,1,0,"mat-header-cell",18),e.YNc(22,kde,4,0,"mat-cell",19),e.BQk(),e.ynx(23,20),e.YNc(24,Sde,3,3,"mat-header-cell",18),e.YNc(25,yde,3,7,"mat-cell",21),e.BQk(),e.ynx(26,22),e.YNc(27,Jde,3,3,"mat-header-cell",18),e.YNc(28,Ede,2,4,"mat-cell",21),e.BQk(),e.ynx(29,23),e.YNc(30,Nde,3,3,"mat-header-cell",18),e.YNc(31,Ode,5,5,"mat-cell",24),e.BQk(),e.ynx(32,25),e.YNc(33,Lde,1,0,"mat-header-cell",18),e.YNc(34,Ide,8,2,"mat-cell",26),e.BQk(),e.YNc(35,Qde,1,0,"mat-header-row",27),e.YNc(36,Ude,1,0,"mat-row",28),e.qZA()(),e.TgZ(37,"div",29)(38,"mat-paginator",30),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()(),e.YNc(39,Gde,25,16,"div",13),e.qZA()()),2&o&&(e.Q6J("ngIf",t.isPreventivi),e.xp6(3),e.Q6J("dataLoader",t.apiService.getAccountMailViewSelect(t.accountMailRQ,!1))("value",t.account)("placeholder",e.lcZ(4,19,"sbm.mail.account")),e.xp6(3),e.Q6J("placeholder",e.lcZ(7,21,"sbm.mail.subject"))("ngModel",t.subject),e.xp6(5),e.Q6J("dataSource",t.folders)("treeControl",t.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",t.hasChild),e.xp6(2),e.Q6J("ngIf",null==t.message&&null!=t.messages),e.xp6(1),e.Q6J("ngIf",null==t.message&&null!=t.messages&&0==t.messages.length),e.xp6(1),e.Q6J("hidden",null!=t.message||null==t.messages||0==t.messages.length),e.xp6(2),e.Q6J("dataSource",t.messages),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSize",t.pageSize)("length",t.messageCount),e.xp6(1),e.Q6J("ngIf",null!=t.message))},dependencies:[m.mk,m.O5,w.X,h.eB,M.v_,M.nX,b.k0,Ue.Hw,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,rt.W,ne.d,Oi.GZ,Oi.fQ,Oi.eu,Oi.gi,Oi.uo,Oi.Ar,_i,m.uU,z.X$],styles:[".folders-tree[_ngcontent-%COMP%]{background-color:transparent}.folders-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:30px}.mat-tree-node[_ngcontent-%COMP%]{min-height:30px;font-size:15px;font-weight:500}.node-toggle-button[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}.folders-div[_ngcontent-%COMP%]{width:350px;display:inline-block;vertical-align:top}.messages-div[_ngcontent-%COMP%]{width:calc(100% - 350px);display:inline-block;vertical-align:top}.back-icon[_ngcontent-%COMP%]{font-size:20px;line-height:20px}.back-button[_ngcontent-%COMP%]{height:30px;line-height:30px}.folder-selected[_ngcontent-%COMP%]{border-radius:50vh;border:1px solid #e91e63;padding:.1rem .25rem;margin-left:calc(-.25rem - 1px);color:#e91e63;margin-right:calc(.75rem - 1px)!important}.message-count[_ngcontent-%COMP%]{display:inline-flex;min-width:20px;height:20px;border-radius:50vh;background-color:#e6618d;color:#fff;padding:2px 5px 1px;align-items:center;justify-content:center;font-size:14px;font-weight:400;float:right}.folder-icon[_ngcontent-%COMP%]{text-align:center;width:30px;height:30px;line-height:30px;font-size:10px}.tornaAPreventiviButton[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.message-container[_ngcontent-%COMP%]{max-height:700px;overflow-y:auto;overflow-x:hidden}.message-container-text-body[_ngcontent-%COMP%]{white-space:pre}"]});const $de=["paginator"],Bde=["paginatorDettaglio"];function Vde(i,o){1&i&&(e.TgZ(0,"div",43)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.marketing.clientiProfilati.nessunCliente")))}const Xde=function(i,o){return{selected:i,"not-selected":o}};function jde(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",44),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.preventDefault(),p.rq.tipoDato=r.key,e.KtG(p.download())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.WLB(4,Xde,n.rq.tipoDato==t.key,n.rq.tipoDato!=t.key)),e.xp6(1),e.Oqu(e.lcZ(2,2,t.value))}}function Wde(i,o){if(1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.getEnumKeyTranslation(t.enumTipoDato,t.rq.tipoDato,"tipoDatoClientiProfilati")))}}function eme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.key)}}function tme(i,o){1&i&&(e.TgZ(0,"mat-header-cell",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.marketing.clientiProfilati.totale")))}function ime(i,o){if(1&i&&(e.TgZ(0,"mat-cell",45),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.totale)}}function ome(i,o){1&i&&(e.TgZ(0,"mat-header-cell",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.marketing.clientiProfilati.totaleEmail")))}function nme(i,o){if(1&i&&(e.TgZ(0,"mat-cell",45),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.totaleEmail)}}function ame(i,o){1&i&&(e.TgZ(0,"mat-header-cell",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.marketing.clientiProfilati.totaleCellulare")))}function lme(i,o){if(1&i&&(e.TgZ(0,"mat-cell",45),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.totaleCellulare)}}function rme(i,o){1&i&&e._UZ(0,"mat-header-cell")}function cme(i,o){1&i&&(e.TgZ(0,"mat-cell",46)(1,"button",47)(2,"i",48),e._uU(3,"remove_red_eye"),e.qZA()()())}function sme(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function pme(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",50),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return r.key=l.key,e.KtG(r.view())}),e.qZA()}}function dme(i,o){1&i&&e._UZ(0,"mat-header-cell")}function mme(i,o){1&i&&(e.TgZ(0,"mat-cell",51)(1,"button",47)(2,"i",48),e._uU(3,"edit"),e.qZA()()())}function _me(i,o){1&i&&e._UZ(0,"mat-header-cell")}function ume(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",51)(1,"button",52),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.openCalcolaRetta(r))}),e.TgZ(2,"i",48),e._uU(3,"add"),e.qZA()()()}}function gme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.cognome")))}function hme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.cognome)}}function fme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.nome")))}function Cme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function bme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.email")))}function vme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.email)}}function Tme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.cellulare")))}function xme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.cellulare)}}function Zme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.provincia")))}function Ame(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.provincia)}}function wme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.nazione")))}function zme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nazione)}}function Mme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.mercato")))}function qme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.mercato?t.mercato.descrizione:"")}}function Pme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.canaleVendita")))}function kme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.canaleVendita?t.canaleVendita.descrizione:"")}}function Sme(i,o){1&i&&(e.TgZ(0,"mat-header-cell",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.privacy")))}function yme(i,o){if(1&i&&(e.TgZ(0,"mat-cell",45),e._UZ(1,"mat-checkbox",53),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.privacy)}}function Jme(i,o){1&i&&(e.TgZ(0,"mat-header-cell",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.newsletter")))}function Eme(i,o){if(1&i&&(e.TgZ(0,"mat-cell",45),e._UZ(1,"mat-checkbox",53),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.newsletter)}}function Nme(i,o){1&i&&e._UZ(0,"mat-header-row",49)}function Ome(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",54),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function Lme(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.dataSourceDettaglio=null)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.indietro")))}function Dme(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-clienti-edit",56),e.NdJ("backEvent",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBack())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("_cliente",t.cliente)}}class Al extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.sessionService=t,this.headerService=n,this.containerService=a,this.utility=l,this.rq=new d.b65,this.columns=["key","totale","totaleEmail","totaleCellulare","view"],this.columnsDettaglio=["edit","add","cognome","nome","email","cellulare","provincia","nazione","mercato.descrizione","canaleVendita.descrizione","privacy","newsletter"],this.enumTipoDato=c.v1,this.filtroTipoDatoClientiProfilati=new Map([[c.v1.Mercato,"mercato.descrizione"],[c.v1.CanaleVendita,"canaleVendita.descrizione"],[c.v1.Segmento,"segmento.descrizione"],[c.v1.Fonte,"fonte.descrizione"],[c.v1.Provincia,"provincia"],[c.v1.Nazione,"nazione"],[c.v1.Tipologia,"tipologia.nome"]])}ngOnInit(){this.headerService.setTitle("sbm.marketing.clientiProfilati.title"),this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.rq.tipoDato=c.v1.Mercato,this.sessionService.isCrmAttivo()||(this.columnsDettaglio=this.columnsDettaglio.filter(o=>"add"!=o))}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getClientiProfilati(this.rq).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}view(){let o;this.setIsLoading(!0),o="non def."==this.key?"('', null)":"('"+this.key+"')";let t=d.k$g.fromFilter(this.filtroTipoDatoClientiProfilati.get(this.rq.tipoDato),c.Hp.In,o,c.NM.Number);this.apiService.getClientiFilter(t).subscribe(n=>{this.dataSourceDettaglio=new s.r4(n.data),this.dataSourceDettaglio.paginator=this.paginatorDettaglio,this.setIsLoading(!1)})}openCalcolaRetta(o){let t=new d.Zpt;t.width="80vw",t.minHeight="80vh",t.maxHeight="95vh",t.panelClass="no-padding-dialog";let n=this.showModalDialog(ut,t),a=n.componentInstance;a.cliente=o,a.dialogRef=n}edit(o){this.cliente=Object.assign({},o),this.headerService.clearTitle(),this.containerService.scrollToTop()}onBack(){this.cliente=null,this.headerService.setTitle("sbm.marketing.clientiProfilati.title"),this.containerService.scrollToTop(),this.view()}ngOnDestroy(){this.headerService.clearTitle()}}function Ime(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",16)(1,"mat-form-field",17)(2,"input",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.motiviViaggioXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",19),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.motiviViaggioXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.motivoViaggioXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.motiviViaggioXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.motivoViaggioXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.motiviViaggioXLingua[a].descrizione)}}function Qme(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Ime,7,10,"mat-tab",15),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function Ume(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Al.\u0275fac=function(o){return new(o||Al)(e.Y36(A.s),e.Y36(j.m),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Al.\u0275cmp=e.Xpm({type:Al,selectors:[["app-clienti-profilati"]],viewQuery:function(o,t){if(1&o&&(e.Gf($de,5),e.Gf(Bde,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.paginatorDettaglio=n.first)}},features:[e.qOj],decls:80,vars:22,consts:[[1,"p-3",3,"hidden"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mb-2"],["href","#","class","mr-2 rounded-lg p-1 d-inline-block",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mat-table-container"],[1,"mat-table","clientiProfilatiTable",3,"dataSource"],["matColumnDef","key"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","totale"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","totaleEmail"],["matColumnDef","totaleCellulare"],["matColumnDef","view"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["paginator",""],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","add"],["matColumnDef","cognome"],["matColumnDef","nome"],["matColumnDef","email"],["matColumnDef","cellulare"],["matColumnDef","provincia"],["matColumnDef","nazione"],["matColumnDef","mercato.descrizione"],["matColumnDef","canaleVendita.descrizione"],["matColumnDef","privacy"],["matColumnDef","newsletter"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative","mb-0"],["paginatorDettaglio",""],["mat-flat-button","","color","primary","class","mt-3",3,"click",4,"ngIf"],[3,"_cliente","backEvent",4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["href","#",1,"mr-2","rounded-lg","p-1","d-inline-block",3,"ngClass","click"],[1,"justify-content-center"],[1,"mat-td-delete"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-table-header"],[3,"click"],[1,"mat-td-edit"],["mat-icon-button","","color","primary",3,"click"],["color","primary","disabled","",3,"checked"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],["mat-flat-button","","color","primary",1,"mt-3",3,"click"],[3,"_cliente","backEvent"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Vde,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3),e.YNc(4,jde,3,7,"a",4),e.ALo(5,"selectEnum"),e.qZA(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,Wde,3,3,"mat-header-cell",8),e.YNc(10,eme,2,1,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,tme,3,3,"mat-header-cell",11),e.YNc(13,ime,2,1,"mat-cell",12),e.BQk(),e.ynx(14,13),e.YNc(15,ome,3,3,"mat-header-cell",11),e.YNc(16,nme,2,1,"mat-cell",12),e.BQk(),e.ynx(17,14),e.YNc(18,ame,3,3,"mat-header-cell",11),e.YNc(19,lme,2,1,"mat-cell",12),e.BQk(),e.ynx(20,15),e.YNc(21,rme,1,0,"mat-header-cell",8),e.YNc(22,cme,4,0,"mat-cell",16),e.BQk(),e.YNc(23,sme,1,0,"mat-header-row",17),e.YNc(24,pme,1,0,"mat-row",18),e.qZA()(),e.TgZ(25,"div",19)(26,"button",20),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"ClientiProfilati",t.columns.slice(0,t.columns.length-1))}),e.TgZ(27,"i",21),e._uU(28,"get_app"),e.qZA()(),e._UZ(29,"mat-paginator",22,23),e.qZA()(),e.TgZ(31,"div",2)(32,"div",5)(33,"mat-table",24),e.ynx(34,25),e.YNc(35,dme,1,0,"mat-header-cell",8),e.YNc(36,mme,4,0,"mat-cell",26),e.BQk(),e.ynx(37,27),e.YNc(38,_me,1,0,"mat-header-cell",8),e.YNc(39,ume,4,0,"mat-cell",26),e.BQk(),e.ynx(40,28),e.YNc(41,gme,3,3,"mat-header-cell",8),e.YNc(42,hme,2,1,"mat-cell",9),e.BQk(),e.ynx(43,29),e.YNc(44,fme,3,3,"mat-header-cell",8),e.YNc(45,Cme,2,1,"mat-cell",9),e.BQk(),e.ynx(46,30),e.YNc(47,bme,3,3,"mat-header-cell",8),e.YNc(48,vme,2,1,"mat-cell",9),e.BQk(),e.ynx(49,31),e.YNc(50,Tme,3,3,"mat-header-cell",8),e.YNc(51,xme,2,1,"mat-cell",9),e.BQk(),e.ynx(52,32),e.YNc(53,Zme,3,3,"mat-header-cell",8),e.YNc(54,Ame,2,1,"mat-cell",9),e.BQk(),e.ynx(55,33),e.YNc(56,wme,3,3,"mat-header-cell",8),e.YNc(57,zme,2,1,"mat-cell",9),e.BQk(),e.ynx(58,34),e.YNc(59,Mme,3,3,"mat-header-cell",8),e.YNc(60,qme,2,1,"mat-cell",9),e.BQk(),e.ynx(61,35),e.YNc(62,Pme,3,3,"mat-header-cell",8),e.YNc(63,kme,2,1,"mat-cell",9),e.BQk(),e.ynx(64,36),e.YNc(65,Sme,3,3,"mat-header-cell",11),e.YNc(66,yme,2,1,"mat-cell",12),e.BQk(),e.ynx(67,37),e.YNc(68,Jme,3,3,"mat-header-cell",11),e.YNc(69,Eme,2,1,"mat-cell",12),e.BQk(),e.YNc(70,Nme,1,0,"mat-header-row",17),e.YNc(71,Ome,1,1,"mat-row",38),e.qZA()(),e.TgZ(72,"div",39)(73,"button",20),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSourceDettaglio.data,"Clienti",t.columnsDettaglio)}),e.TgZ(74,"i",21),e._uU(75,"get_app"),e.qZA()(),e._UZ(76,"mat-paginator",22,40),e.qZA()(),e.YNc(78,Lme,3,3,"button",41),e.qZA(),e.YNc(79,Dme,1,1,"app-clienti-edit",42)),2&o&&(e.Q6J("hidden",null!=t.cliente),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length||null!=t.dataSourceDettaglio&&null!=t.dataSourceDettaglio.data&&0==t.dataSourceDettaglio.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length||null!=t.dataSourceDettaglio),e.xp6(2),e.Q6J("ngForOf",e.xi3(5,19,t.enumTipoDato,"tipoDatoClientiProfilati")),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.columns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.columns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(2),e.Q6J("hidden",null==t.dataSourceDettaglio||null==t.dataSourceDettaglio.data||0==t.dataSourceDettaglio.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSourceDettaglio),e.xp6(37),e.Q6J("matHeaderRowDef",t.columnsDettaglio)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.columnsDettaglio),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(2),e.Q6J("ngIf",null!=t.dataSourceDettaglio),e.xp6(1),e.Q6J("ngIf",null!=t.cliente))},dependencies:[m.mk,m.sg,m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,xi,Te.A,z.X$],styles:[".not-selected[_ngcontent-%COMP%]{border:1px solid #aaaaaa;background-color:#fff}.selected[_ngcontent-%COMP%]{border:1px solid #007bff;background-color:#d8ecf3;font-weight:600}  .clientiProfilatiTable .mat-row{cursor:pointer!important}"]});class wl extends f.H{set motivoViaggio(o){if(null!=o){this.modelEdit=new d.gIE,this.modelEdit.motivoViaggio=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.VBQ;n.lingua=t,this.modelEdit.motiviViaggioXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getMotiviViaggioXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.motiviViaggioXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.motiviViaggioXLingua[a].motivazioneViaggio=n.motivazioneViaggio,this.modelEdit.motiviViaggioXLingua[a].nome=n.nome,this.modelEdit.motiviViaggioXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.gIE,this.editing=!1,this.selectedIndex=0,this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.motiviViaggioXLingua)o.motivazioneViaggio=this.modelEdit.motivoViaggio;this.modelEdit.motivoViaggio.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setMotivoViaggio(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.marketing.motiviViaggio.motivoViaggioSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.marketing.motiviViaggio.eliminareMotivoViaggio").then(t=>{null!=o&&(this.modelEdit.motivoViaggio=o),this.modelEdit.motivoViaggio.isDeleted=!0,this.setIsLoading(!0),this.apiService.setMotivoViaggio(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function Yme(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",26)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.marketing.motiviViaggio.nessunMotivoViaggio")))}function Rme(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Fme(i,o){1&i&&(e.TgZ(0,"mat-cell",27)(1,"button",28)(2,"i",29),e._uU(3,"edit"),e.qZA()()())}function Hme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.motivoViaggio.proprieta.nome"),""))}function Kme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function Gme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.motivoViaggio.proprieta.ordinamento"),""))}function $me(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ordinamento)}}function Bme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.motivoViaggio.proprieta.isAttivoWebBooking"),""))}function Vme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",30),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivoWebBooking)}}function Xme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.motivoViaggio.proprieta.isAttivoFormRichiesta"),""))}function jme(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",30),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivoFormRichiesta)}}function Wme(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.motivoViaggio.proprieta.pianoTariffario"),""))}function e_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.pianoTariffario?t.pianoTariffario.nome:"")}}function t_e(i,o){1&i&&e._UZ(0,"mat-header-cell",31)}function i_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",32)(1,"button",33),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(35);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",34),e._uU(3,"delete"),e.qZA()()()}}function o_e(i,o){1&i&&e._UZ(0,"mat-header-row",35)}function n_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",36),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}wl.\u0275fac=function(o){return new(o||wl)(e.Y36(A.s),e.Y36(j.m))},wl.\u0275cmp=e.Xpm({type:wl,selectors:[["app-motivi-viaggio-edit"]],inputs:{motivoViaggio:"motivoViaggio"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:56,vars:40,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-6","div-help"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.motivoViaggio.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Nome del motivo di viaggio "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.motivoViaggio.ordinamento=a}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",4),e._uU(13," Ordinamento del motivo di viaggio "),e.qZA()(),e.TgZ(14,"div",0)(15,"div",1)(16,"app-view-select",6),e.NdJ("valueChange",function(a){return t.modelEdit.motivoViaggio.pianoTariffario=a}),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",4),e._uU(19," Impostare il piano tariffario "),e.qZA()(),e.TgZ(20,"div",0)(21,"div",1)(22,"app-view-select",6),e.NdJ("valueChange",function(a){return t.modelEdit.motivoViaggio.tagCrm=a}),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",4),e._uU(25," Impostare il tag CRM che viene associato di default al preventivo "),e.qZA()(),e.TgZ(26,"div",0)(27,"div",1)(28,"app-view-select",7),e.NdJ("valueChange",function(a){return t.modelEdit.motivoViaggio.parametroMercato=a}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",4),e._uU(31," Impostare il Mercato che viene associato di default alla prenotazione "),e.qZA()(),e.TgZ(32,"div",0)(33,"div",1)(34,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.motivoViaggio.isAttivoWebBooking=a}),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"div",4),e._uU(38," Attivo su Web Booking "),e.qZA()(),e.TgZ(39,"div",0)(40,"div",1)(41,"mat-checkbox",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.motivoViaggio.isAttivoFormRichiesta=a}),e._uU(42),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"div",4),e._uU(45," Attivo su form richiesta "),e.qZA()(),e.TgZ(46,"mat-tab-group",9),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(47,Qme,2,1,"ng-container",10),e.qZA(),e.TgZ(48,"div",11)(49,"button",12),e.NdJ("click",function(){return t.save()}),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.YNc(52,Ume,3,3,"button",13),e.TgZ(53,"button",14),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(54),e.ALo(55,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,22,"bo.motivoViaggio.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.motivoViaggio.nome),e.xp6(7),e.s9C("placeholder",e.lcZ(11,24,"bo.motivoViaggio.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.motivoViaggio.ordinamento),e.xp6(6),e.Q6J("dataLoader",t.apiService.getPianiTariffariViewSelect())("value",t.modelEdit.motivoViaggio.pianoTariffario)("placeholder",e.lcZ(17,26,"bo.motivoViaggio.proprieta.pianoTariffario")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getTagCrmViewSelect())("value",t.modelEdit.motivoViaggio.tagCrm)("placeholder",e.lcZ(23,28,"bo.motivoViaggio.proprieta.tagCrm")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaMercatoRQ))("value",t.modelEdit.motivoViaggio.parametroMercato)("placeholder",e.lcZ(29,30,"bo.motivoViaggio.proprieta.parametroMercato")),e.xp6(6),e.Q6J("ngModel",t.modelEdit.motivoViaggio.isAttivoWebBooking),e.xp6(1),e.hij(" ",e.lcZ(36,32,"bo.motivoViaggio.proprieta.isAttivoWebBooking")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.motivoViaggio.isAttivoFormRichiesta),e.xp6(1),e.hij(" ",e.lcZ(43,34,"bo.motivoViaggio.proprieta.isAttivoFormRichiesta")," "),e.xp6(4),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.motiviViaggioXLingua),e.xp6(3),e.Oqu(e.lcZ(51,36,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(55,38,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,Me.P,ne.d,z.X$]});class zl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","ordinamento","isAttivoWebBooking","isAttivoFormRichiesta","pianoTariffario","delete"]}ngOnInit(){this.headerService.setTitle("sbm.marketing.motiviViaggio.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getMotiviViaggio().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.motivoViaggio=new v.mmh(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.motivoViaggio=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}zl.\u0275fac=function(o){return new(o||zl)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},zl.\u0275cmp=e.Xpm({type:zl,selectors:[["app-motivi-viaggio"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:36,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","ordinamento"],["matColumnDef","isAttivoWebBooking"],["matColumnDef","isAttivoFormRichiesta"],["matColumnDef","pianoTariffario"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"motivoViaggio","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary","disabled","",3,"checked"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Yme,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,Rme,1,0,"mat-header-cell",8),e.YNc(10,Fme,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,Hme,3,3,"mat-header-cell",8),e.YNc(13,Kme,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,Gme,3,3,"mat-header-cell",8),e.YNc(16,$me,2,1,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,Bme,3,3,"mat-header-cell",8),e.YNc(19,Vme,2,1,"mat-cell",11),e.BQk(),e.ynx(20,14),e.YNc(21,Xme,3,3,"mat-header-cell",8),e.YNc(22,jme,2,1,"mat-cell",11),e.BQk(),e.ynx(23,15),e.YNc(24,Wme,3,3,"mat-header-cell",8),e.YNc(25,e_e,2,1,"mat-cell",11),e.BQk(),e.ynx(26,16),e.YNc(27,t_e,1,0,"mat-header-cell",17),e.YNc(28,i_e,4,0,"mat-cell",18),e.BQk(),e.YNc(29,o_e,1,0,"mat-header-row",19),e.YNc(30,n_e,1,1,"mat-row",20),e.qZA()(),e.TgZ(31,"div",21)(32,"mat-paginator",22),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(33,"div",23)(34,"app-motivi-viaggio-edit",24,25),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("motivoViaggio",t.motivoViaggio))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,wl,z.X$]});class Ml{constructor(o){this.headerService=o}ngOnInit(){this.headerService.setTitle("sbm.marketing.upgradeGratuiti.title")}ngOnDestroy(){this.headerService.clearTitle()}}Ml.\u0275fac=function(o){return new(o||Ml)(e.Y36(ie.r))},Ml.\u0275cmp=e.Xpm({type:Ml,selectors:[["app-upgrade-gratuiti-albergo"]],decls:2,vars:0,consts:[[1,"p-3"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-upgrade-gratuiti"),e.qZA())},dependencies:[wi]});const a_e=["prenotazioniPaginator"],l_e=["preventiviPaginator"],r_e=["prenotazioniPreventiviContainer"];function c_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.utility.openPageSbm("configurazione-impostazioni"))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.impostazioni.title")))}function s_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.utility.openPageSbm("portali"))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.portali.title")))}function p_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.utility.openPageSbm("planning"))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.planning.title")))}function d_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.utility.openPageSbm("planning-master"))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.planning-master.title")))}function m_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.utility.openPageSbm("calendario-fasce"))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.calendario-fasce.title")))}function __e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.utility.openPageSbm("promozioni"))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.promozioni.title")))}function u_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",42),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw();return a.preventDefault(),e.KtG(l.utility.openUrlInNewTab(l.sessionService.getUrlSmartCloud()))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.smartCloud.title")))}function g_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sbloccaAccount())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.configurazione.impostazioni.accountBloccato")))}function h_e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",48)(1,"div")(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",46),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"div")(9,"div",49),e._uU(10),e.qZA(),e.TgZ(11,"div",50)(12,"button",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.confermaErrore())}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.visualizzaTuttiErrori())}),e._uU(16),e.ALo(17,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,5,"sbm.dashboard.ultimoErroreAttivitaAutomatica")),e.xp6(3),e.Oqu(t.utility.isNullDate(t.infoDashboard.dataUltimoErroreAttivitaAutomatica)?"---":e.xi3(7,7,t.infoDashboard.dataUltimoErroreAttivitaAutomatica,"dd/MM/yyyy HH:mm:ss")),e.xp6(4),e.Oqu(t.infoDashboard.ultimoErroreAttivitaAutomatica),e.xp6(3),e.Oqu(e.lcZ(14,10,"globals.conferma")),e.xp6(3),e.Oqu(e.lcZ(17,12,"sbm.dashboard.visualizzaTutti"))}}function f_e(i,o){if(1&i&&(e.TgZ(0,"div",44)(1,"div",7)(2,"div",45)(3,"div")(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span",46),e._uU(8),e.ALo(9,"date"),e.qZA()(),e.TgZ(10,"div")(11,"span"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"span",46),e._uU(15),e.ALo(16,"date"),e.qZA()()(),e.TgZ(17,"div",45)(18,"div")(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"span",46),e._uU(23),e.ALo(24,"date"),e.qZA()(),e.TgZ(25,"div")(26,"span"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"span",46),e._uU(30),e.qZA()()()(),e.YNc(31,h_e,18,14,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,9,"sbm.dashboard.ultimoAggiornamentoDisponibilita")),e.xp6(3),e.Oqu(t.utility.isNullDate(t.infoDashboard.dataUltimaPubblicazioneDisponibilitaHotel)?"---":e.xi3(9,11,t.infoDashboard.dataUltimaPubblicazioneDisponibilitaHotel,"dd/MM/yyyy HH:mm:ss")),e.xp6(4),e.Oqu(e.lcZ(13,14,"sbm.dashboard.ultimoAggiornamentoPrenotazioni")),e.xp6(3),e.Oqu(t.utility.isNullDate(t.infoDashboard.dataUltimoAggiornamentoPrenotazioni)?"---":e.xi3(16,16,t.infoDashboard.dataUltimoAggiornamentoPrenotazioni,"dd/MM/yyyy HH:mm:ss")),e.xp6(5),e.Oqu(e.lcZ(21,19,"sbm.dashboard.ultimaPubblicazione")),e.xp6(3),e.Oqu(t.utility.isNullDate(t.infoDashboard.dataUltimaPubblicazione)?"---":e.xi3(24,21,t.infoDashboard.dataUltimaPubblicazione,"dd/MM/yyyy HH:mm:ss")),e.xp6(4),e.Oqu(e.lcZ(28,24,"sbm.dashboard.codiceweb")),e.xp6(3),e.Oqu(t.infoDashboard.codiceWeb),e.xp6(1),e.Q6J("ngIf",t.infoDashboard.oidErrore>0)}}function C_e(i,o){if(1&i&&(e.TgZ(0,"mat-option",53),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function b_e(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",54)(3,"div"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",22),e._uU(7),e.ALo(8,"eurCurrency"),e.qZA()()(),e.TgZ(9,"div",23)(10,"div",54)(11,"div"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",22),e._uU(15),e.ALo(16,"eurCurrency"),e.qZA()()(),e.TgZ(17,"div",55)(18,"div",54)(19,"div"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"div",22),e._uU(23),e.ALo(24,"eurCurrency"),e.qZA()()(),e.BQk()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,6,"sbm.dashboard.roomRevenue")," "),e.xp6(3),e.hij(" ",t.totali.roomRevenue>0?e.lcZ(8,8,t.totali.roomRevenue):"---"," "),e.xp6(5),e.hij(" ",e.lcZ(13,10,"sbm.dashboard.extraRevenue")," "),e.xp6(3),e.hij(" ",t.totali.extraRevenue>0?e.lcZ(16,12,t.totali.extraRevenue):"---"," "),e.xp6(5),e.hij(" ",e.lcZ(21,14,"sbm.dashboard.adr")," "),e.xp6(3),e.hij(" ",t.totali.ADR>0?e.lcZ(24,16,t.totali.ADR):"---"," ")}}function v_e(i,o){if(1&i&&(e._UZ(0,"mat-tab",28),e.ALo(1,"translate")),2&i){const t=o.$implicit;e.Q6J("label",e.lcZ(1,1,t.value))}}function T_e(i,o){if(1&i&&(e._UZ(0,"ngx-charts-pie-chart",80),e.ALo(1,"translate")),2&i){const t=e.oxw(2);e.Q6J("results",t.graficoPrenotazioni)("scheme","cool")("labels",!1)("legend",!0)("legendTitle",e.lcZ(1,7,"sbm.dashboard.legenda"))("legendPosition",t.enumLegendPosition.Below)("gradient",!1)}}function x_e(i,o){if(1&i&&e._UZ(0,"ngx-charts-bar-horizontal",81),2&i){const t=e.oxw(2);e.Q6J("results",t.graficoPrenotazioni)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!1)("maxXAxisTickLength",16)("gradient",!1)}}function Z_e(i,o){if(1&i&&e._UZ(0,"ngx-charts-bar-vertical",81),2&i){const t=e.oxw(2);e.Q6J("results",t.graficoPrenotazioni)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!1)("maxXAxisTickLength",16)("gradient",!1)}}function A_e(i,o){if(1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.getEnumKeyTranslation(t.enumTipoDatoPrenotazioni,t.rq.tipoDatoPrenotazioni,"tipoDatoPrenotazioniDashboard"))," ")}}function w_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"percent"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.name+" ("+e.xi3(2,1,t.percentuale,"1.0-2")+")","")}}function z_e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"sbm.dashboard.prenotazioni")," "))}function M_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.prenotazioni)}}function q_e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"sbm.dashboard.roomNight")," "))}function P_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.roomNight)}}function k_e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"sbm.dashboard.pax")," "))}function S_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.pax)}}function y_e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",82),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.roomRevenue")," "))}function J_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",83),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.roomRevenue)," ")}}function E_e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",82),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.extraRevenue")," "))}function N_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",83),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.extraRevenue)," ")}}function O_e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",82),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.adr")," "))}function L_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",83),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.ADR)," ")}}function D_e(i,o){1&i&&e._UZ(0,"mat-header-row",84)}function I_e(i,o){1&i&&e._UZ(0,"mat-row")}const Ts=function(i){return{"dashboard-chart-container-legend":i}};function Q_e(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"div",8)(3,"mat-form-field",9)(4,"mat-select",56),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tipoGraficoPrenotazioni=a)}),e.ALo(5,"translate"),e.TgZ(6,"mat-option",53),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-option",53),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"mat-option",53),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"div",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openChart(a.tipoGraficoPrenotazioni,a.graficoPrenotazioni,null))}),e.TgZ(16,"div",58),e.YNc(17,T_e,2,9,"ngx-charts-pie-chart",59),e.YNc(18,x_e,1,7,"ngx-charts-bar-horizontal",60),e.YNc(19,Z_e,1,7,"ngx-charts-bar-vertical",60),e.qZA()()(),e.TgZ(20,"div",36)(21,"div",61)(22,"mat-table",62),e.ynx(23,63),e.YNc(24,A_e,3,3,"mat-header-cell",64),e.YNc(25,w_e,3,4,"mat-cell",65),e.BQk(),e.ynx(26,66),e.YNc(27,z_e,3,3,"mat-header-cell",64),e.YNc(28,M_e,2,1,"mat-cell",65),e.BQk(),e.ynx(29,67),e.YNc(30,q_e,3,3,"mat-header-cell",64),e.YNc(31,P_e,2,1,"mat-cell",65),e.BQk(),e.ynx(32,68),e.YNc(33,k_e,3,3,"mat-header-cell",64),e.YNc(34,S_e,2,1,"mat-cell",65),e.BQk(),e.ynx(35,69),e.YNc(36,y_e,3,3,"mat-header-cell",70),e.YNc(37,J_e,4,3,"mat-cell",65),e.BQk(),e.ynx(38,71),e.YNc(39,E_e,3,3,"mat-header-cell",70),e.YNc(40,N_e,4,3,"mat-cell",65),e.BQk(),e.ynx(41,72),e.YNc(42,O_e,3,3,"mat-header-cell",70),e.YNc(43,L_e,4,3,"mat-cell",65),e.BQk(),e.YNc(44,D_e,1,0,"mat-header-row",73),e.YNc(45,I_e,1,0,"mat-row",74),e.qZA()(),e.TgZ(46,"div",75)(47,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.utility.exportToCsv(a.dataSourcePrenotazioni.data,"Prenotazioni Dashboard ("+a.localizationService.getTranslationSync(a.getEnumKeyTranslation(a.enumTipoDatoPrenotazioni,a.rq.tipoDatoPrenotazioni,"tipoDatoPrenotazioniDashboard"))+")",a.displayedColumnsPrenotazioni))}),e.TgZ(48,"i",77),e._uU(49,"get_app"),e.qZA()(),e._UZ(50,"mat-paginator",78,79),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,17,"sbm.dashboard.tipoGrafico")),e.Q6J("ngModel",t.tipoGraficoPrenotazioni),e.xp6(2),e.Q6J("value",t.enumTipoGrafico.PieChart),e.xp6(1),e.hij(" ",e.lcZ(8,19,t.getEnumKeyTranslation(t.enumTipoGrafico,t.enumTipoGrafico.PieChart,"tipoGrafico"))," "),e.xp6(2),e.Q6J("value",t.enumTipoGrafico.BarChart),e.xp6(1),e.hij(" ",e.lcZ(11,21,t.getEnumKeyTranslation(t.enumTipoGrafico,t.enumTipoGrafico.BarChart,"tipoGrafico"))," "),e.xp6(2),e.Q6J("value",t.enumTipoGrafico.ColumnChart),e.xp6(1),e.hij(" ",e.lcZ(14,23,t.getEnumKeyTranslation(t.enumTipoGrafico,t.enumTipoGrafico.ColumnChart,"tipoGrafico"))," "),e.xp6(2),e.Q6J("ngClass",e.VKq(25,Ts,t.tipoGraficoPrenotazioni==t.enumTipoGrafico.PieChart)),e.xp6(2),e.Q6J("ngIf",t.tipoGraficoPrenotazioni==t.enumTipoGrafico.PieChart),e.xp6(1),e.Q6J("ngIf",t.tipoGraficoPrenotazioni==t.enumTipoGrafico.BarChart),e.xp6(1),e.Q6J("ngIf",t.tipoGraficoPrenotazioni==t.enumTipoGrafico.ColumnChart),e.xp6(3),e.Q6J("dataSource",t.dataSourcePrenotazioni),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumnsPrenotazioni)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsPrenotazioni),e.xp6(5),e.Q6J("pageSize",t.pageSize)}}function U_e(i,o){1&i&&(e.TgZ(0,"h4",85),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.nessunaPrenotazione")," "))}function Y_e(i,o){if(1&i&&(e._UZ(0,"mat-tab",28),e.ALo(1,"translate")),2&i){const t=o.$implicit;e.Q6J("label",e.lcZ(1,1,t.value))}}function R_e(i,o){if(1&i&&(e._UZ(0,"ngx-charts-pie-chart",93),e.ALo(1,"translate")),2&i){const t=e.oxw(2);e.Q6J("results",t.graficoPreventivi)("scheme","cool")("trimLabels",!1)("legend",!0)("legendTitle",e.lcZ(1,7,"sbm.dashboard.legenda"))("legendPosition",t.enumLegendPosition.Below)("gradient",!1)}}function F_e(i,o){if(1&i&&e._UZ(0,"ngx-charts-bar-horizontal",81),2&i){const t=e.oxw(2);e.Q6J("results",t.graficoPreventivi)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!1)("maxXAxisTickLength",16)("gradient",!1)}}function H_e(i,o){if(1&i&&e._UZ(0,"ngx-charts-bar-vertical",81),2&i){const t=e.oxw(2);e.Q6J("results",t.graficoPreventivi)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!1)("maxXAxisTickLength",16)("gradient",!1)}}function K_e(i,o){if(1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.getEnumKeyTranslation(t.enumTipoDatoPreventivi,t.rq.tipoDatoPreventivi,"tipoDatoPreventiviDashboard"))," ")}}function G_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"percent"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.name+" ("+e.xi3(2,1,t.percentuale,"1.0-2")+")","")}}function $_e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"sbm.dashboard.preventivi")," "))}function B_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.preventivi)}}function V_e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"sbm.dashboard.prenotazioni")," "))}function X_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.prenotazioni)}}function j_e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"sbm.dashboard.percentualeConversione")," "))}function W_e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"percent"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij("",e.xi3(2,1,t.percentualeConversione,"1.0-2")," ")}}function eue(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"sbm.dashboard.roomNight")," "))}function tue(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.roomNight)}}function iue(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"sbm.dashboard.pax")," "))}function oue(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.pax)}}function nue(i,o){1&i&&(e.TgZ(0,"mat-header-cell",82),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.revenue")," "))}function aue(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",83),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.revenue)," ")}}function lue(i,o){1&i&&(e.TgZ(0,"mat-header-cell",82),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.adr")," "))}function rue(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",83),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.ADR)," ")}}function cue(i,o){1&i&&e._UZ(0,"mat-header-row",84)}function sue(i,o){1&i&&e._UZ(0,"mat-row")}function pue(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"div",86)(3,"mat-form-field",9)(4,"mat-select",56),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tipoGraficoPreventivi=a)}),e.ALo(5,"translate"),e.TgZ(6,"mat-option",53),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-option",53),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"mat-option",53),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"div",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openChart(a.tipoGraficoPreventivi,a.graficoPreventivi,null))}),e.TgZ(16,"div",58),e.YNc(17,R_e,2,9,"ngx-charts-pie-chart",87),e.YNc(18,F_e,1,7,"ngx-charts-bar-horizontal",60),e.YNc(19,H_e,1,7,"ngx-charts-bar-vertical",60),e.qZA()()(),e.TgZ(20,"div",88)(21,"div",61)(22,"mat-table",62),e.ynx(23,63),e.YNc(24,K_e,3,3,"mat-header-cell",64),e.YNc(25,G_e,3,4,"mat-cell",65),e.BQk(),e.ynx(26,89),e.YNc(27,$_e,3,3,"mat-header-cell",64),e.YNc(28,B_e,2,1,"mat-cell",65),e.BQk(),e.ynx(29,66),e.YNc(30,V_e,3,3,"mat-header-cell",64),e.YNc(31,X_e,2,1,"mat-cell",65),e.BQk(),e.ynx(32,90),e.YNc(33,j_e,3,3,"mat-header-cell",64),e.YNc(34,W_e,3,4,"mat-cell",65),e.BQk(),e.ynx(35,67),e.YNc(36,eue,3,3,"mat-header-cell",64),e.YNc(37,tue,2,1,"mat-cell",65),e.BQk(),e.ynx(38,68),e.YNc(39,iue,3,3,"mat-header-cell",64),e.YNc(40,oue,2,1,"mat-cell",65),e.BQk(),e.ynx(41,91),e.YNc(42,nue,3,3,"mat-header-cell",70),e.YNc(43,aue,4,3,"mat-cell",65),e.BQk(),e.ynx(44,72),e.YNc(45,lue,3,3,"mat-header-cell",70),e.YNc(46,rue,4,3,"mat-cell",65),e.BQk(),e.YNc(47,cue,1,0,"mat-header-row",73),e.YNc(48,sue,1,0,"mat-row",74),e.qZA()(),e.TgZ(49,"div",75)(50,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.utility.exportToCsv(a.dataSourcePreventivi.data,"Preventivi Dashboard ("+a.localizationService.getTranslationSync(a.getEnumKeyTranslation(a.enumTipoDatoPreventivi,a.rq.tipoDatoPreventivi,"tipoDatoPreventiviDashboard"))+")",a.displayedColumnsPreventivi))}),e.TgZ(51,"i",77),e._uU(52,"get_app"),e.qZA()(),e._UZ(53,"mat-paginator",78,92),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,17,"sbm.dashboard.tipoGrafico")),e.Q6J("ngModel",t.tipoGraficoPreventivi),e.xp6(2),e.Q6J("value",t.enumTipoGrafico.PieChart),e.xp6(1),e.hij(" ",e.lcZ(8,19,t.getEnumKeyTranslation(t.enumTipoGrafico,t.enumTipoGrafico.PieChart,"tipoGrafico"))," "),e.xp6(2),e.Q6J("value",t.enumTipoGrafico.BarChart),e.xp6(1),e.hij(" ",e.lcZ(11,21,t.getEnumKeyTranslation(t.enumTipoGrafico,t.enumTipoGrafico.BarChart,"tipoGrafico"))," "),e.xp6(2),e.Q6J("value",t.enumTipoGrafico.ColumnChart),e.xp6(1),e.hij(" ",e.lcZ(14,23,t.getEnumKeyTranslation(t.enumTipoGrafico,t.enumTipoGrafico.ColumnChart,"tipoGrafico"))," "),e.xp6(2),e.Q6J("ngClass",e.VKq(25,Ts,t.tipoGraficoPreventivi==t.enumTipoGrafico.PieChart)),e.xp6(2),e.Q6J("ngIf",t.tipoGraficoPreventivi==t.enumTipoGrafico.PieChart),e.xp6(1),e.Q6J("ngIf",t.tipoGraficoPreventivi==t.enumTipoGrafico.BarChart),e.xp6(1),e.Q6J("ngIf",t.tipoGraficoPreventivi==t.enumTipoGrafico.ColumnChart),e.xp6(3),e.Q6J("dataSource",t.dataSourcePreventivi),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumnsPreventivi)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsPreventivi),e.xp6(5),e.Q6J("pageSize",t.pageSize)}}function due(i,o){1&i&&(e.TgZ(0,"h4",85),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.nessunPreventivo")," "))}function mue(i,o){if(1&i&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij("",t.nome," ")}}function _ue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",94),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openChart(a.enumTipoGrafico.AreaChart,null,a.graficoDisponibilita))}),e.TgZ(1,"div",58),e._UZ(2,"ngx-charts-area-chart",95),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("results",t.graficoDisponibilita)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!0)("legendTitle",e.lcZ(3,11,"sbm.dashboard.legenda"))("maxXAxisTickLength",16)("yAxisTickFormatting",t.axisFormatY)("xAxisTickFormatting",t.axisFormatX)("legendPosition",t.enumLegendPosition.Below)("gradient",!1)}}function uue(i,o){1&i&&(e.TgZ(0,"h4",96),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.nessunaDisponibilita")," "))}function gue(i,o){if(1&i&&e._UZ(0,"img",109),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.portaleXAlbergo.portale.urlImmagineIcona,e.LSH)}}function hue(i,o){1&i&&e._UZ(0,"mat-divider")}function fue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",99),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.openPrenotazione(l.oid))}),e.TgZ(1,"div",100)(2,"div",101),e._uU(3),e.ALo(4,"momentFormat"),e.qZA(),e.TgZ(5,"div",7)(6,"div",102),e.YNc(7,gue,1,1,"img",103),e.qZA(),e.TgZ(8,"div",104)(9,"div",105),e._uU(10),e.qZA(),e.TgZ(11,"div",106),e._uU(12),e.qZA()(),e.TgZ(13,"div",104)(14,"div",107),e._uU(15),e.ALo(16,"translate"),e.ALo(17,"momentFormat"),e.qZA(),e.TgZ(18,"div",108),e._uU(19),e.ALo(20,"translate"),e.ALo(21,"momentFormat"),e.qZA()()()(),e.YNc(22,hue,1,0,"mat-divider",24),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.xp6(3),e.hij(" ",e.Dn7(4,10,t.dataPren,"DD/MM/YYYY - HH:mm",a.getLocale())," "),e.xp6(4),e.Q6J("ngIf",null!=t.portaleXAlbergo&&null!=t.portaleXAlbergo.portale&&!!t.portaleXAlbergo.portale.urlImmagineIcona),e.xp6(3),e.hij(" ",null!=t.portaleXAlbergo?t.portaleXAlbergo.nome:""," "),e.xp6(2),e.AsE(" ",null!=t.tipoCameraOTA?t.tipoCameraOTA.codice:""," - ",null!=t.tariffaOTA?t.tariffaOTA.codice:""," "),e.xp6(3),e.AsE(" ",e.lcZ(16,14,"sbm.dashboard.arrivo")," ",e.Dn7(17,16,t.arrivo,"DD/MM/YYYY",a.getLocale())," "),e.xp6(4),e.AsE(" ",e.lcZ(20,20,"sbm.dashboard.partenza")," ",e.Dn7(21,22,t.partenza,"DD/MM/YYYY",a.getLocale())," "),e.xp6(3),e.Q6J("ngIf",n<a.prenotazioni.length-1)}}function Cue(i,o){if(1&i&&(e.ynx(0),e.YNc(1,fue,23,26,"div",98),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.prenotazioni)}}function bue(i,o){1&i&&(e.TgZ(0,"h6",96),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.nessunaPrenotazione")," "))}function vue(i,o){if(1&i&&(e.TgZ(0,"div",97),e.YNc(1,Cue,2,1,"ng-container",24),e.YNc(2,bue,3,3,"h6",38),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.prenotazioni.length>0),e.xp6(1),e.Q6J("ngIf",0==t.prenotazioni.length)}}function Tue(i,o){1&i&&(e.TgZ(0,"mat-header-cell",115),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.tipoCamera"),""))}function xue(i,o){if(1&i&&(e.TgZ(0,"mat-cell",115),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.tipoCamera)}}function Zue(i,o){if(1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM"))}}function Aue(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw().index;e.xp6(1),e.Oqu(t.date[n].disponibili)}}function wue(i,o){if(1&i&&(e.ynx(0,116),e.YNc(1,Zue,3,4,"mat-header-cell",64),e.YNc(2,Aue,2,1,"mat-cell",65),e.BQk()),2&i){const t=o.index;e.Q6J("matColumnDef",t.toString())}}function zue(i,o){1&i&&e._UZ(0,"mat-header-row",84)}function Mue(i,o){1&i&&e._UZ(0,"mat-row")}function que(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",34),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",110)(5,"mat-table",62),e.ynx(6,111),e.YNc(7,Tue,3,3,"mat-header-cell",112),e.YNc(8,xue,2,1,"mat-cell",113),e.BQk(),e.YNc(9,wue,3,1,"ng-container",114),e.YNc(10,zue,1,0,"mat-header-row",73),e.YNc(11,Mue,1,0,"mat-row",74),e.qZA()(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,6,"sbm.dashboard.disponibiliPerData")),e.xp6(3),e.Q6J("dataSource",t.disponibilita),e.xp6(4),e.Q6J("ngForOf",t.disponibilita[0].date),e.xp6(1),e.Q6J("matHeaderRowDef",t.displayedColumnsDisponibilita)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsDisponibilita)}}function Pue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",94),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openChart(a.enumTipoGrafico.AreaChart,null,a.graficoNotificheEmail))}),e.TgZ(1,"div",58),e._UZ(2,"ngx-charts-area-chart",95),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("results",t.graficoNotificheEmail)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!0)("legendTitle",e.lcZ(3,11,"sbm.dashboard.legenda"))("maxXAxisTickLength",16)("yAxisTickFormatting",t.axisFormatY)("xAxisTickFormatting",t.axisFormatX)("legendPosition",t.enumLegendPosition.Below)("gradient",!1)}}function kue(i,o){1&i&&(e.TgZ(0,"h4",117),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.nessunaNotificaEmail")," "))}function Sue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",119),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openChart(a.enumTipoGrafico.AreaChart,null,a.graficoChiusureGiornaliere))}),e.TgZ(1,"div",58),e._UZ(2,"ngx-charts-area-chart",95),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("results",t.graficoChiusureGiornaliere)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!0)("legendTitle",e.lcZ(3,11,"sbm.dashboard.legenda"))("maxXAxisTickLength",16)("yAxisTickFormatting",t.axisFormatY)("xAxisTickFormatting",t.axisFormatX)("legendPosition",t.enumLegendPosition.Below)("gradient",!1)}}function yue(i,o){1&i&&(e.TgZ(0,"h4",96),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.dashboard.nessunaChiusuraGiornaliera")," "))}function Jue(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"h4",34),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",35)(5,"mat-checkbox",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.isRaggruppaPerMese=a)})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.downloadChiusureGiornaliere())}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,Sue,4,13,"div",118),e.YNc(9,yue,3,3,"h4",38),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.dashboard.chiusureGiornaliere")),e.xp6(3),e.Q6J("ngModel",t.rq.isRaggruppaPerMese),e.xp6(1),e.hij(" ",e.lcZ(7,7,"sbm.dashboard.isRaggruppaPerMese"),""),e.xp6(2),e.Q6J("ngIf",null!=t.graficoChiusureGiornaliere&&t.graficoChiusureGiornaliere.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.graficoChiusureGiornaliere&&0==t.graficoChiusureGiornaliere.length)}}class ql extends f.H{constructor(o,t,n,a,l,r,p){super(),this.apiService=o,this.navigationService=t,this.headerService=n,this.sessionService=a,this.containerService=l,this.localizationService=r,this.utility=p,this.tipoFiltro=c.LH.Personalizzato,this.tipiCamera=[],this.albergo=new v.Z$,this.totali=new d.RlF,this.displayedColumnsPrenotazioni=["name","prenotazioni","roomNight","pax"],this.displayedColumnsPreventivi=["name","preventivi","prenotazioni","percentualeConversione","roomNight","pax"],this.displayedColumnsDisponibilita=["camera"],this.dataSourcePrenotazioni=new s.r4,this.dataSourcePreventivi=new s.r4,this.tipoGraficoPrenotazioni=c.F3.PieChart,this.tipoGraficoPreventivi=c.F3.PieChart,this.enumTipoDatoPrenotazioni=c.vr,this.enumTipoDatoPreventivi=c.rF,this.enumTipoFiltroDashboard=c.LH,this.enumTipoGrafico=c.F3,this.selectedTab=0,this.ubicazioneIstatDisabled=!1,this.requests=[],this.tabIndex=0,this.enumLegendPosition=Ke.tV,this.visualizzazioneDatiEconomiciEnabled=!0,this.visualizzazioneChiusureGiornaliereEnabled=!0}ngOnInit(){this.headerService.setTitle("sbm.dashboard.title"),this.rq=new d.p9D,this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.rq.tipoDatoPrenotazioni=c.vr.Mercato,this.rq.tipoDatoPreventivi=c.rF.Mercato,this.rq.isRaggruppaPerMese=!1,this.rq.dal=this.getDate(this.oneMonthBeforeToday),this.rq.al=this.getDate(this.oneMonthFromToday);let o=this.sessionService.getUbicazioneIstat();null!=o&&(this.ubicazioneIstat=o,this.rq.oidUbicazioneIstat=o.oid,this.ubicazioneIstatDisabled=!0),this.setIsLoading(!0),this.apiService.getTipiCamera().subscribe(n=>{this.tipiCamera=n.data,null!=this.tipiCamera&&this.tipiCamera.length>0&&(this.rq.oidTipoCamera=this.tipiCamera[0].oid,this.downloadDisponibilitaPrezzi())}),this.downloadUltimePrenotazioni(),this.downloadInfoDashboard(),this.downloadAlbergo(),this.sub=this.containerService.windowResizeEvent.subscribe(()=>this.updateScroll());let t=this.sessionService.getPermessiUtente();null!=t&&(this.visualizzazioneDatiEconomiciEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.VisualizzazioneDatiEconomiciDashboard)),this.visualizzazioneChiusureGiornaliereEnabled=!t.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.VisualizzazioneChiusureGiornaliereDashboard))),this.visualizzazioneDatiEconomiciEnabled&&(this.displayedColumnsPrenotazioni=this.displayedColumnsPrenotazioni.concat(["roomRevenue","extraRevenue","ADR"]),this.displayedColumnsPreventivi=this.displayedColumnsPreventivi.concat(["revenue","ADR"]))}ngAfterViewInit(){this.downloadAll(!0)}downloadAll(o=!1){this.downloadTotali(),this.downloadPrenotazioni(),this.downloadPreventivi(),this.downloadDisponibilita(),this.downloadChiusureGiornaliere(),this.downloadNotificheEmail(),o||this.downloadDisponibilitaPrezzi()}downloadAlbergo(){this.apiService.getAlbergo(this.sessionService.getOidAlbergo()).subscribe(o=>{this.albergo=o.data})}downloadTotali(){this.setIsLoading(!0);let o=this.apiService.getTotaliDashboard(this.rq).subscribe(t=>{this.totali=t.data,o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadPrenotazioni(){this.setIsLoading(!0);let o=this.apiService.getPrenotazioniDashboard(this.rq).subscribe(t=>{this.dataSourcePrenotazioni=new s.r4(t.data.prenotazioni),setTimeout(()=>{this.dataSourcePrenotazioni.paginator=this.prenotazioniPaginator},200),this.graficoPrenotazioni=this.checkResults(t.data.grafico.results),o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadPreventivi(){this.setIsLoading(!0);let o=this.apiService.getPreventiviDashboard(this.rq).subscribe(t=>{this.dataSourcePreventivi=new s.r4(t.data.preventivi),setTimeout(()=>{this.dataSourcePreventivi.paginator=this.preventiviPaginator},200),this.graficoPreventivi=this.checkResults(t.data.grafico.results),o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadDisponibilita(){this.setIsLoading(!0);let o=this.apiService.getDisponibilitaDashboard(this.rq).subscribe(t=>{if(this.disponibilita=t.data,this.displayedColumnsDisponibilita=["camera"],null!=t.data&&t.data.length>0){let n=0;for(let a of t.data[0].date)this.displayedColumnsDisponibilita.push(n.toString()),n++}o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadDisponibilitaPrezzi(){this.setIsLoading(!0);let o=this.apiService.getDisponibilitaPrezziDashboard(this.rq).subscribe(t=>{this.graficoDisponibilita=this.checkResultsAdvanced(t.data.results),o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadNotificheEmail(){this.setIsLoading(!0);let o=this.apiService.getNotificheEmailDashboard(this.rq).subscribe(t=>{this.graficoNotificheEmail=this.checkResultsAdvanced(t.data.results),o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadChiusureGiornaliere(){this.setIsLoading(!0);let o=this.apiService.getChiusureGiornaliereDashboard(this.rq).subscribe(t=>{this.graficoChiusureGiornaliere=this.checkResultsAdvanced(t.data.results),o.unsubscribe(),this.requests.every(n=>n.closed)&&(this.requests=[],this.setIsLoading(!1))});this.requests.push(o)}downloadUltimePrenotazioni(){let o=new d.k$g;this.rq.oidUbicazioneIstat&&(o.filters=[new d.wn$("portaleXAlbergo.ubicazioneIstat.oid",c.Hp.Equal,this.rq.oidUbicazioneIstat.toString(),c.NM.Number)]),o.sorting=[new d.aQR("dataPren",c.nI.Desc)],o.take=5,this.prenotazioni=null,this.apiService.getPrenotazioniFilter(o).subscribe(t=>{this.prenotazioni=t.data.prenotazioni})}downloadInfoDashboard(o=!1){o&&this.setIsLoading(!0),this.apiService.getInfoDashboard(this.rq).subscribe(t=>{this.infoDashboard=t.data,o&&this.setIsLoading(!1)})}checkResults(o){if(null!=o)for(let t of o)if(t.value>0)return o;return[]}checkResultsAdvanced(o){let t=!1;if(null!=o)for(let n of o)if(null!=n.series&&(n.name=this.localizationService.getTranslationSync(n.name),1==n.series.length&&(n.series.unshift(new d.yIB("<",0)),n.series.push(new d.yIB(">",0))),!t))for(let a of n.series)if(a.value>0){t=!0;break}return t||(o=[]),o}onFiltroChange(){let o=u();switch(this.tipoFiltro){case c.LH.Oggi:this.rq.dal=this.getDate(u()),this.rq.al=this.rq.dal;break;case c.LH.Ieri:this.rq.dal=this.getDate(u().subtract(1,"day")),this.rq.al=this.rq.dal;break;case c.LH.UltimaSettimana:this.rq.dal=this.getDate(u().subtract(7,"day")),this.rq.al=this.getDate(o);break;case c.LH.QuestoMese:this.rq.dal=this.getDate(u().set("date",1)),this.rq.al=this.getDate(u().set("date",u().daysInMonth()));break;case c.LH.Ultimi30Giorni:this.rq.dal=this.getDate(u().subtract(30,"day")),this.rq.al=this.getDate(o);break;case c.LH.Ultimi90Giorni:this.rq.dal=this.getDate(u().subtract(90,"day")),this.rq.al=this.getDate(o);break;case c.LH.AnnoCorrente:this.rq.dal=this.getDate(u().set("month",0).set("date",1)),this.rq.al=this.getDate(u().set("month",11).set("date",31))}this.downloadAll()}openChart(o,t,n){let a=new d.Zpt;a.width="65vw",a.height="80vh",a.panelClass="no-padding-overflow-dialog";let r=this.showModalDialog(yi,a).componentInstance;r.tipoGrafico=o,r.chart=t,r.advancedChart=n}axisFormatY(o){return o+" \u20ac"}axisFormatX(o){return"<"==o||">"==o?"":o}onTabChange(o){this.tabIndex=o,this.updateScroll()}updateScroll(){null!=this.prenotazioniPreventiviContainer&&this.prenotazioniPreventiviContainer.nativeElement.scrollTo({top:0,left:this.tabIndex*this.prenotazioniPreventiviContainer.nativeElement.offsetWidth,behavior:"smooth"})}onDateChange(){this.tipoFiltro=c.LH.Personalizzato,this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.downloadAll()}ngOnDestroy(){this.sub.unsubscribe(),this.headerService.clearTitle()}sbloccaAccount(){this.setIsLoading(!0),this.apiService.sbloccaAccount(this.sessionService.getOidAlbergo()).subscribe(()=>{this.setIsLoading(!1),this.albergo.isAccountBloccato=!1,this.showInfo("sbm.configurazione.impostazioni.accountSbloccato")})}confermaErrore(){this.setIsLoading(!0);let o=new d.No1;o.oid=this.infoDashboard.oidErrore,this.apiService.setErroreEsaminato(o).subscribe(()=>{this.downloadInfoDashboard(!0)})}visualizzaTuttiErrori(){let o=new d.Zpt;o.width="80vw";let t=this.showModalDialog(It,o),n=t.componentInstance;n.dialog=!0,t.afterClosed().subscribe(()=>{n.erroriConfermati&&this.downloadInfoDashboard(!0)})}onIsFiltraArrivoChange(){this.downloadTotali(),this.downloadPrenotazioni(),this.downloadPreventivi()}checkMenuLink(o){for(let t of this.navigationService.menuItems){if(t.path==o)return!t.hidden;if(null!=t.childs)for(let n of t.childs)if(n.path==o)return!n.hidden}return!1}openPrenotazione(o){this.utility.openUrlInNewTab("/sbm/home/(homeOutlet:prenotazioni)?oidPrenotazione="+o)}}function Eue(i,o){if(1&i&&(e.TgZ(0,"mat-option",6),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.nome," ")}}function Nue(i,o){if(1&i&&(e.TgZ(0,"mat-option",6),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Oue(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Nue,3,4,"mat-option",14),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.key!=n.enumTipoFiltroDashboard.Personalizzato)}}ql.\u0275fac=function(o){return new(o||ql)(e.Y36(A.s),e.Y36(Ae.f),e.Y36(ie.r),e.Y36(j.m),e.Y36(te.J),e.Y36(Oe.o),e.Y36(C.t))},ql.\u0275cmp=e.Xpm({type:ql,selectors:[["app-dashboard"]],viewQuery:function(o,t){if(1&o&&(e.Gf(a_e,5),e.Gf(l_e,5),e.Gf(r_e,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.prenotazioniPaginator=n.first),e.iGM(n=e.CRH())&&(t.preventiviPaginator=n.first),e.iGM(n=e.CRH())&&(t.prenotazioniPreventiviContainer=n.first)}},features:[e.qOj],decls:107,vars:94,consts:[[1,"container-fluid","p-3"],[1,"font-weight-bold","mb-3"],["href","#","class","color-pink mr-3 menu-link",3,"click",4,"ngIf"],["href","#","class","color-pink menu-link",3,"click",4,"ngIf"],["class","mb-3 rounded-xl p-3 accountBloccato cursor-pointer font-weight-bold",3,"click",4,"ngIf"],["class","info font-weight-bold",4,"ngIf"],[1,"filter"],[1,"row"],[1,"col-12","col-md-4"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","matEndDate","","readonly","",3,"placeholder","ngModel","dateChange","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["displayMember","nome",3,"disabled","dataLoader","value","placeholder","valueChange"],["color","primary",3,"ngModel","ngModelChange","change"],[1,"row","mb-4"],[1,"col","text-center","pr-1"],[1,"numero-container","p-3"],[1,"font-weight-bold","totale"],[1,"col","text-center","pr-1","pl-1"],[4,"ngIf"],[1,"border","rounded","mat-elevation-z1","overflow-hidden","text-nowrap","bg-white"],["prenotazioniPreventiviContainer",""],[1,"prenotazioni-preventivi-tab-group","custom-tab-group",3,"selectedTabChange"],[3,"label"],[1,"w-100","align-top","d-inline-block","text-wrap"],[1,"mb-3",3,"selectedIndex","selectedIndexChange","selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"pr-3","pl-3","pb-3"],["class","p-3 border rounded mt-3",4,"ngIf"],[1,"mt-4"],[1,"border","rounded","p-3","mat-elevation-z1","bg-white"],[1,"col-12","col-md-8"],["class","w-100 dashboard-area-chart-container",3,"click",4,"ngIf"],["class","p-3 border rounded",4,"ngIf"],["class","border rounded",4,"ngIf"],["class","p-3 border rounded mb-0",4,"ngIf"],["href","#",1,"color-pink","mr-3","menu-link",3,"click"],["href","#",1,"color-pink","menu-link",3,"click"],[1,"mb-3","rounded-xl","p-3","accountBloccato","cursor-pointer","font-weight-bold",3,"click"],[1,"info","font-weight-bold"],[1,"col-6"],[1,"color-red"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"d-inline-block","color-red","errore-container","mr-3"],[1,"d-inline-block","errori-buttons"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","primary",3,"click"],[3,"value"],[1,"totale-container","p-3"],[1,"col","text-center","pl-1"],[3,"ngModel","placeholder","ngModelChange"],[1,"w-100","dashboard-chart-container",3,"ngClass","click"],[1,"w-100","h-100"],[3,"results","scheme","labels","legend","legendTitle","legendPosition","gradient",4,"ngIf"],[3,"results","scheme","xAxis","yAxis","legend","maxXAxisTickLength","gradient",4,"ngIf"],[1,"mat-table-container"],[1,"mat-table","sbm-dashboard-table",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","prenotazioni"],["matColumnDef","roomNight"],["matColumnDef","pax"],["matColumnDef","roomRevenue"],["class","justify-content-end",4,"matHeaderCellDef"],["matColumnDef","extraRevenue"],["matColumnDef","ADR"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","dashboard-paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSize"],["prenotazioniPaginator",""],[3,"results","scheme","labels","legend","legendTitle","legendPosition","gradient"],[3,"results","scheme","xAxis","yAxis","legend","maxXAxisTickLength","gradient"],[1,"justify-content-end"],[1,"w-100","text-right"],[1,"mat-table-header"],[1,"p-3","border","rounded","mt-3"],[1,"col-4"],[3,"results","scheme","trimLabels","legend","legendTitle","legendPosition","gradient",4,"ngIf"],[1,"col-8"],["matColumnDef","preventivi"],["matColumnDef","percentualeConversione"],["matColumnDef","revenue"],["preventiviPaginator",""],[3,"results","scheme","trimLabels","legend","legendTitle","legendPosition","gradient"],[1,"w-100","dashboard-area-chart-container",3,"click"],[3,"results","scheme","xAxis","yAxis","legend","legendTitle","maxXAxisTickLength","yAxisTickFormatting","xAxisTickFormatting","legendPosition","gradient"],[1,"p-3","border","rounded"],[1,"border","rounded"],["class","cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"click"],[1,"pt-2","pb-2","pr-3","pl-3"],[1,"prenotazione-data"],[1,"col-2","pt-1"],["class","portale-icon",3,"src",4,"ngIf"],[1,"col-5"],[1,"text-center","prenotazione-portale"],[1,"text-center","prenotazione-tipocamera"],[1,"prenotazione-arrivo"],[1,"prenotazione-partenza"],[1,"portale-icon",3,"src"],[1,"mat-table-container-border-rounded"],["matColumnDef","camera"],["class","justify-content-start",4,"matHeaderCellDef"],["class","justify-content-start",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],[1,"justify-content-start"],[3,"matColumnDef"],[1,"p-3","border","rounded","mb-0"],["class","w-100 dashboard-area-chart-container mt-3",3,"click",4,"ngIf"],[1,"w-100","dashboard-area-chart-container","mt-3",3,"click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,c_e,3,3,"a",2),e.YNc(3,s_e,3,3,"a",2),e.YNc(4,p_e,3,3,"a",2),e.YNc(5,d_e,3,3,"a",2),e.YNc(6,m_e,3,3,"a",2),e.YNc(7,__e,3,3,"a",2),e.YNc(8,u_e,3,3,"a",3),e.qZA(),e.YNc(9,g_e,3,3,"div",4),e.YNc(10,f_e,32,26,"div",5),e.TgZ(11,"div",6)(12,"div",7)(13,"div",8)(14,"mat-form-field",9)(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"mat-date-range-input",10),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(25);return e.KtG(l.open())}),e.TgZ(19,"input",11),e.NdJ("ngModelChange",function(l){return t.rq.dal=l}),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"input",12),e.NdJ("dateChange",function(l){return null!=l.value?t.onDateChange():null})("ngModelChange",function(l){return t.rq.al=l}),e.ALo(22,"translate"),e.qZA()(),e._UZ(23,"mat-datepicker-toggle",13)(24,"mat-date-range-picker",null,14),e.qZA()(),e.TgZ(26,"div",8)(27,"mat-form-field",9)(28,"mat-select",15),e.NdJ("ngModelChange",function(l){return t.tipoFiltro=l})("selectionChange",function(){return t.onFiltroChange()}),e.ALo(29,"translate"),e.YNc(30,C_e,3,4,"mat-option",16),e.ALo(31,"selectEnum"),e.qZA()()(),e.TgZ(32,"div",8)(33,"app-view-select",17),e.NdJ("valueChange",function(l){return t.ubicazioneIstat=l})("valueChange",function(){return t.rq.oidUbicazioneIstat=t.ubicazioneIstat.oid,t.downloadAll(),t.downloadUltimePrenotazioni()}),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"mat-checkbox",18),e.NdJ("ngModelChange",function(l){return t.rq.isFiltraArrivo=l})("change",function(){return t.onIsFiltraArrivoChange()}),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",19)(39,"div",20)(40,"div",21)(41,"div"),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"div",22),e._uU(45),e.qZA()()(),e.TgZ(46,"div",23)(47,"div",21)(48,"div"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"div",22),e._uU(52),e.qZA()()(),e.TgZ(53,"div",23)(54,"div",21)(55,"div"),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"div",22),e._uU(59),e.qZA()()(),e.YNc(60,b_e,25,18,"ng-container",24),e.qZA(),e.TgZ(61,"div",25,26)(63,"mat-tab-group",27),e.NdJ("selectedTabChange",function(l){return t.onTabChange(l.index)}),e._UZ(64,"mat-tab",28),e.ALo(65,"translate"),e._UZ(66,"mat-tab",28),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"div",29)(69,"mat-tab-group",30),e.NdJ("selectedIndexChange",function(l){return t.rq.tipoDatoPrenotazioni=l})("selectedTabChange",function(){return t.downloadPrenotazioni()}),e.YNc(70,v_e,2,3,"mat-tab",31),e.ALo(71,"selectEnum"),e.qZA(),e.TgZ(72,"div",32),e.YNc(73,Q_e,52,27,"ng-container",24),e.YNc(74,U_e,3,3,"h4",33),e.qZA()(),e.TgZ(75,"div",29)(76,"mat-tab-group",30),e.NdJ("selectedIndexChange",function(l){return t.rq.tipoDatoPreventivi=l})("selectedTabChange",function(){return t.downloadPreventivi()}),e.YNc(77,Y_e,2,3,"mat-tab",31),e.ALo(78,"selectEnum"),e.qZA(),e.TgZ(79,"div",32),e.YNc(80,pue,55,27,"ng-container",24),e.YNc(81,due,3,3,"h4",33),e.qZA()()(),e.TgZ(82,"h4",34),e._uU(83),e.ALo(84,"translate"),e.qZA(),e.TgZ(85,"div",35)(86,"div",7)(87,"div",36)(88,"mat-form-field",9)(89,"mat-select",15),e.NdJ("ngModelChange",function(l){return t.rq.oidTipoCamera=l})("selectionChange",function(){return t.downloadDisponibilitaPrezzi()}),e.ALo(90,"translate"),e.YNc(91,mue,2,2,"mat-option",16),e.qZA()(),e.YNc(92,_ue,4,13,"div",37),e.YNc(93,uue,3,3,"h4",38),e.qZA(),e.TgZ(94,"div",8)(95,"h6"),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.YNc(98,vue,3,2,"div",39),e.qZA()(),e.YNc(99,que,12,8,"ng-container",24),e.qZA(),e.TgZ(100,"h4",34),e._uU(101),e.ALo(102,"translate"),e.qZA(),e.TgZ(103,"div",35),e.YNc(104,Pue,4,13,"div",37),e.YNc(105,kue,3,3,"h4",40),e.qZA(),e.YNc(106,Jue,10,9,"ng-container",24),e.qZA()}if(2&o){const n=e.MAs(25);e.xp6(2),e.Q6J("ngIf",t.checkMenuLink("configurazione-impostazioni")),e.xp6(1),e.Q6J("ngIf",t.checkMenuLink("portali")),e.xp6(1),e.Q6J("ngIf",t.checkMenuLink("planning")),e.xp6(1),e.Q6J("ngIf",t.checkMenuLink("planning-master")),e.xp6(1),e.Q6J("ngIf",t.checkMenuLink("calendario-fasce")),e.xp6(1),e.Q6J("ngIf",t.checkMenuLink("promozioni")),e.xp6(1),e.Q6J("ngIf",t.checkMenuLink("smartcloud")),e.xp6(1),e.Q6J("ngIf",t.albergo.isAccountBloccato),e.xp6(1),e.Q6J("ngIf",null!=t.infoDashboard),e.xp6(6),e.Oqu(e.lcZ(17,55,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.s9C("placeholder",e.lcZ(20,57,"bo.dashboard.proprieta.dal")),e.Q6J("ngModel",t.rq.dal),e.xp6(2),e.s9C("placeholder",e.lcZ(22,59,"bo.dashboard.proprieta.al")),e.Q6J("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(29,61,"sbm.dashboard.tipoFiltro")),e.Q6J("ngModel",t.tipoFiltro),e.xp6(2),e.Q6J("ngForOf",e.xi3(31,63,t.enumTipoFiltroDashboard,"tipoFiltroDashboard")),e.xp6(3),e.Q6J("disabled",t.ubicazioneIstatDisabled)("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.ubicazioneIstat)("placeholder",e.lcZ(34,66,"globals.ubicazioneIstat")),e.xp6(2),e.Q6J("ngModel",t.rq.isFiltraArrivo),e.xp6(1),e.Oqu(e.lcZ(37,68,"sbm.dashboard.filtraPerArrivo")),e.xp6(6),e.hij(" ",e.lcZ(43,70,"sbm.dashboard.prenotazioni")," "),e.xp6(3),e.hij(" ",t.totali.prenotazioni>0?t.totali.prenotazioni:"---"," "),e.xp6(4),e.hij(" ",e.lcZ(50,72,"sbm.dashboard.roomNight")," "),e.xp6(3),e.hij(" ",t.totali.roomNight>0?t.totali.roomNight:"---"," "),e.xp6(4),e.hij(" ",e.lcZ(57,74,"sbm.dashboard.pax")," "),e.xp6(3),e.hij(" ",t.totali.pax>0?t.totali.pax:"---"," "),e.xp6(1),e.Q6J("ngIf",t.visualizzazioneDatiEconomiciEnabled),e.xp6(4),e.Q6J("label",e.lcZ(65,76,"sbm.dashboard.prenotazioni")),e.xp6(2),e.Q6J("label",e.lcZ(67,78,"sbm.dashboard.preventivi")),e.xp6(3),e.Q6J("selectedIndex",t.rq.tipoDatoPrenotazioni),e.xp6(1),e.Q6J("ngForOf",e.xi3(71,80,t.enumTipoDatoPrenotazioni,"tipoDatoPrenotazioniDashboard")),e.xp6(3),e.Q6J("ngIf",null!=t.graficoPrenotazioni&&t.graficoPrenotazioni.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.graficoPrenotazioni&&0==t.graficoPrenotazioni.length),e.xp6(2),e.Q6J("selectedIndex",t.rq.tipoDatoPreventivi),e.xp6(1),e.Q6J("ngForOf",e.xi3(78,83,t.enumTipoDatoPreventivi,"tipoDatoPreventiviDashboard")),e.xp6(3),e.Q6J("ngIf",null!=t.graficoPreventivi&&t.graficoPreventivi.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.graficoPreventivi&&0==t.graficoPreventivi.length),e.xp6(2),e.Oqu(e.lcZ(84,86,"sbm.dashboard.disponibilita")),e.xp6(6),e.Q6J("ngModel",t.rq.oidTipoCamera)("placeholder",e.lcZ(90,88,"sbm.dashboard.tipoCamera")),e.xp6(2),e.Q6J("ngForOf",t.tipiCamera),e.xp6(1),e.Q6J("ngIf",null!=t.graficoDisponibilita&&t.graficoDisponibilita.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.graficoDisponibilita&&0==t.graficoDisponibilita.length),e.xp6(3),e.Oqu(e.lcZ(97,90,"sbm.dashboard.ultimePrenotazioni")),e.xp6(2),e.Q6J("ngIf",null!=t.prenotazioni),e.xp6(1),e.Q6J("ngIf",null!=t.disponibilita&&t.disponibilita.length>0),e.xp6(2),e.Oqu(e.lcZ(102,92,"sbm.dashboard.notificheEmail")),e.xp6(3),e.Q6J("ngIf",null!=t.graficoNotificheEmail&&t.graficoNotificheEmail.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.graficoNotificheEmail&&0==t.graficoNotificheEmail.length),e.xp6(1),e.Q6J("ngIf",t.visualizzazioneChiusureGiornaliereEnabled)}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.$V,M.nX,re.CK,y.nW,y.wx,y.zY,y.By,y._g,g.x8,Yt.d,ee.SK,ee.R7,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,Ke.rt,Ke.$e,Ke.K$,Ke.JU,ne.d,m.Zx,m.uU,Te.A,ke.f,K.H,z.X$],styles:[".dashboard-chart-container[_ngcontent-%COMP%]{height:200px}.dashboard-chart-container-legend[_ngcontent-%COMP%]{padding-bottom:60px}.dashboard-area-chart-container[_ngcontent-%COMP%]{height:300px;padding-bottom:70px}  .dashboard-area-chart-container .chart-legend{margin-top:1rem!important}  .sbm-dashboard-table mat-cell{justify-content:center}  .sbm-dashboard-table mat-header-cell{justify-content:center}  .sbm-dashboard-table mat-row{min-height:32px!important}  .sbm-dashboard-table mat-header-row{min-height:36px!important}  .sbm-dashboard-table .mat-column-name{justify-content:start!important;flex:0 0 20%!important}.totale[_ngcontent-%COMP%]{font-size:26px}.totale-container[_ngcontent-%COMP%]{border-radius:7px;color:#fff;background-color:#67d9a4}.numero-container[_ngcontent-%COMP%]{border-radius:7px;color:#fff;background-color:#ff7a7a}.rounded[_ngcontent-%COMP%]{border-radius:7px!important}.dashboard-paginator-container[_ngcontent-%COMP%]{margin-bottom:0!important}  .dashboard-paginator-container .mat-paginator-container{min-height:36px!important}.prenotazioni-preventivi-tab-group[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0}  .prenotazioni-preventivi-tab-group .mat-tab-label{width:50%!important;font-size:x-large!important;background-color:#f0f0f0!important}  .prenotazioni-preventivi-tab-group .mat-ink-bar{display:none!important}.prenotazione-data[_ngcontent-%COMP%]{font-size:13px;color:#aaa}.prenotazione-portale[_ngcontent-%COMP%]{font-weight:600;font-size:15px}.prenotazione-arrivo[_ngcontent-%COMP%], .prenotazione-partenza[_ngcontent-%COMP%]{font-size:13px}.prenotazione-tipocamera[_ngcontent-%COMP%]{font-size:15px}.info[_ngcontent-%COMP%]{border-radius:5px;border-style:solid;border-width:thin;border-color:#0000001a;background-color:#fff;padding:1rem;margin-bottom:1rem}.accountBloccato[_ngcontent-%COMP%]{color:red;background-color:#ff00001f}.errore-container[_ngcontent-%COMP%]{max-width:calc(100% - 250px - 1rem)}.errori-buttons[_ngcontent-%COMP%]{width:250px}.errori-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:30px}.menu-link[_ngcontent-%COMP%]{text-decoration:underline;text-underline-offset:2px}.export-button[_ngcontent-%COMP%]{top:0!important;left:10px!important}"]});class Pl extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.containerService=n,this.rq=new d.p9D,this.ubicazioni=[],this.totali=new d.RlF,this.tipoFiltro=c.LH.QuestoMese,this.enumTipoFiltroDashboard=c.LH}ngOnInit(){this.setIsLoading(!0),this.containerService.scrollToTop();let o=this.sessionService.getUbicazioneIstat();this.rq.oidUbicazioneIstat=null!=o?o.oid:-1,this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.apiService.getUbicazioniIstat().subscribe(t=>{this.ubicazioni=t.data,this.onFiltroChange()})}download(){this.setIsLoading(!0),this.apiService.getTotaliDashboard(this.rq).subscribe(o=>{this.totali=o.data,this.setIsLoading(!1)})}onFiltroChange(){let o=u();switch(this.tipoFiltro){case c.LH.Oggi:this.rq.dal=this.getDate(u()),this.rq.al=this.rq.dal;break;case c.LH.Ieri:this.rq.dal=this.getDate(u().subtract(1,"day")),this.rq.al=this.rq.dal;break;case c.LH.UltimaSettimana:this.rq.dal=this.getDate(u().subtract(7,"day")),this.rq.al=this.getDate(o);break;case c.LH.QuestoMese:this.rq.dal=this.getDate(u().set("date",1)),this.rq.al=this.getDate(u().set("date",u().daysInMonth()));break;case c.LH.Ultimi30Giorni:this.rq.dal=this.getDate(u().subtract(30,"day")),this.rq.al=this.getDate(o);break;case c.LH.Ultimi90Giorni:this.rq.dal=this.getDate(u().subtract(90,"day")),this.rq.al=this.getDate(o);break;case c.LH.AnnoCorrente:this.rq.dal=this.getDate(u().set("month",0).set("date",1)),this.rq.al=this.getDate(u().set("month",11).set("date",31))}this.download()}}function Lue(i,o){1&i&&e._UZ(0,"app-dashboard-mobile")}function Due(i,o){1&i&&e._UZ(0,"app-dashboard")}Pl.\u0275fac=function(o){return new(o||Pl)(e.Y36(A.s),e.Y36(j.m),e.Y36(te.J))},Pl.\u0275cmp=e.Xpm({type:Pl,selectors:[["app-dashboard-mobile"]],features:[e.qOj],decls:61,vars:44,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-12","col-sm-6"],[1,"w-100"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","text-center","pl-3","pr-3","pr-sm-1","mt-2"],[1,"numero-container","p-3"],[1,"font-weight-bold","totale"],[1,"col-12","col-sm-6","text-center","pr-3","pl-3","pl-sm-1","mt-2"],[1,"totale-container","p-3"],[3,"value",4,"ngIf"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.rq.oidUbicazioneIstat=a})("selectionChange",function(){return t.download()}),e.ALo(6,"translate"),e._UZ(7,"mat-option",6),e.YNc(8,Eue,2,2,"mat-option",7),e.qZA()()(),e.TgZ(9,"div",3)(10,"mat-form-field",4)(11,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.tipoFiltro=a})("selectionChange",function(){return t.onFiltroChange()}),e.ALo(12,"translate"),e.YNc(13,Oue,2,1,"ng-container",8),e.ALo(14,"selectEnum"),e.qZA()()()()(),e.TgZ(15,"div",2)(16,"div",9)(17,"div",10)(18,"div"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",11),e._uU(22),e.qZA()()(),e.TgZ(23,"div",12)(24,"div",10)(25,"div"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",11),e._uU(29),e.qZA()()(),e.TgZ(30,"div",9)(31,"div",10)(32,"div"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"div",11),e._uU(36),e.qZA()()(),e.TgZ(37,"div",12)(38,"div",13)(39,"div"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"div",11),e._uU(43),e.ALo(44,"eurCurrency"),e.qZA()()(),e.TgZ(45,"div",9)(46,"div",13)(47,"div"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"div",11),e._uU(51),e.ALo(52,"eurCurrency"),e.qZA()()(),e.TgZ(53,"div",12)(54,"div",13)(55,"div"),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"div",11),e._uU(59),e.ALo(60,"eurCurrency"),e.qZA()()()()()),2&o&&(e.xp6(5),e.Q6J("ngModel",t.rq.oidUbicazioneIstat)("placeholder",e.lcZ(6,19,"globals.ubicazioneIstat")),e.xp6(2),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",t.ubicazioni),e.xp6(3),e.s9C("placeholder",e.lcZ(12,21,"sbm.dashboard.tipoFiltro")),e.Q6J("ngModel",t.tipoFiltro),e.xp6(2),e.Q6J("ngForOf",e.xi3(14,23,t.enumTipoFiltroDashboard,"tipoFiltroDashboard")),e.xp6(6),e.hij(" ",e.lcZ(20,26,"sbm.dashboard.prenotazioni")," "),e.xp6(3),e.hij(" ",t.totali.prenotazioni>0?t.totali.prenotazioni:"---"," "),e.xp6(4),e.hij(" ",e.lcZ(27,28,"sbm.dashboard.roomNight")," "),e.xp6(3),e.hij(" ",t.totali.roomNight>0?t.totali.roomNight:"---"," "),e.xp6(4),e.hij(" ",e.lcZ(34,30,"sbm.dashboard.pax")," "),e.xp6(3),e.hij(" ",t.totali.pax>0?t.totali.pax:"---"," "),e.xp6(4),e.hij(" ",e.lcZ(41,32,"sbm.dashboard.roomRevenue")," "),e.xp6(3),e.hij(" ",t.totali.roomRevenue>0?e.lcZ(44,34,t.totali.roomRevenue):"---"," "),e.xp6(5),e.hij(" ",e.lcZ(49,36,"sbm.dashboard.extraRevenue")," "),e.xp6(3),e.hij(" ",t.totali.extraRevenue>0?e.lcZ(52,38,t.totali.extraRevenue):"---"," "),e.xp6(5),e.hij(" ",e.lcZ(57,40,"sbm.dashboard.adr")," "),e.xp6(3),e.hij(" ",t.totali.ADR>0?e.lcZ(60,42,t.totali.ADR):"---"," "))},dependencies:[m.sg,m.O5,M.v_,re.CK,g.x8,_.JJ,_.On,Te.A,ke.f,z.X$],styles:[".totale-container[_ngcontent-%COMP%]{border-radius:7px;color:#fff;background-color:#67d9a4}.numero-container[_ngcontent-%COMP%]{border-radius:7px;color:#fff;background-color:#ff7a7a}"]});class kl{constructor(o){this.containerService=o}}kl.\u0275fac=function(o){return new(o||kl)(e.Y36(te.J))},kl.\u0275cmp=e.Xpm({type:kl,selectors:[["app-dashboard-mobile-desktop"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(o,t){1&o&&(e.YNc(0,Lue,1,0,"app-dashboard-mobile",0),e.YNc(1,Due,1,0,"app-dashboard",0)),2&o&&(e.Q6J("ngIf",1==t.containerService.isMobile),e.xp6(1),e.Q6J("ngIf",0==t.containerService.isMobile))},dependencies:[m.O5,ql,Pl]});class Sl{constructor(){}}Sl.\u0275fac=function(o){return new(o||Sl)},Sl.\u0275cmp=e.Xpm({type:Sl,selectors:[["app-dettaglio-errori-pubblicazione-dialog"]],inputs:{dettaglioWarning:"dettaglioWarning",dettaglioErrore:"dettaglioErrore"},decls:8,vars:5,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"border","rounded","p-3"],[3,"_text"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h5"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",2),e._UZ(7,"app-inner-html",3),e.qZA()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,3,"sbm.disponibilita.elenco-disponibilita.dettaglioErrori")),e.xp6(3),e.Q6J("_text",(t.dettaglioWarning?t.dettaglioWarning+"<br><br>":"")+(t.dettaglioErrore?t.dettaglioErrore:"")))},dependencies:[h.eB,F.aO,rt.W,z.X$]});const Iue=["paginatorTop"];function Que(i,o){if(1&i&&(e.TgZ(0,"mat-option",71),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Uue(i,o){if(1&i&&(e.TgZ(0,"mat-option",71),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function Yue(i,o){if(1&i&&(e.TgZ(0,"mat-option",71),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.descrizione," ")}}function Rue(i,o){if(1&i&&(e.TgZ(0,"mat-option",71),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Fue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",72)(1,"button",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.pubblica())}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.disponibilita.elenco-disponibilita.pubblica")))}function Hue(i,o){1&i&&(e.TgZ(0,"div",74)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.disponibilita.elenco-disponibilita.nessunaDisponibilita")))}function Kue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",null==t.selectionDisponibilita.selected||0==t.selectionDisponibilita.selected.length),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.disponibilita.elenco-disponibilita.eliminaSelezionati"))}}function Gue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",76)(1,"mat-checkbox",77),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleDisponibilita():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionDisponibilita.hasValue()&&t.isAllSelectedDisponibilita())("indeterminate",t.selectionDisponibilita.hasValue()&&!t.isAllSelectedDisponibilita())}}function $ue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",78)(1,"mat-checkbox",79),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionDisponibilita.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionDisponibilita.isSelected(t.oid))}}function Bue(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.portale"),""))}function Vue(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",81)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",82),e._uU(5),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(3),e.Oqu(null==t.portaleXAlbergo?null:t.portaleXAlbergo.nome),e.xp6(2),e.hij(" ",n.getInfoMaster(t)," ")}}function Xue(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.tipoCamera")," "))}function jue(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.tipoCameraOTA?null:t.tipoCameraOTA.descrizione)}}function Wue(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.tariffa"),""))}function ege(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.tariffaOTA?null:t.tariffaOTA.descrizione)}}function tge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.giorno"),""))}function ige(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.giorno,"dd/MM/yyyy"))}}function oge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.disponibili")," "))}function nge(i,o){if(1&i&&(e.TgZ(0,"mat-cell",84),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Udp("background-color",t.statoPortaleXAlbergo==n.enumStatoPortaleXAlbergo.Aperto?"#67d9a4":"#ff7a7a"),e.xp6(1),e.Oqu(t.disponibili)}}function age(i,o){1&i&&(e.TgZ(0,"mat-header-cell",85),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzo"),""))}function lge(i,o){if(1&i&&(e.TgZ(0,"mat-cell",86)(1,"div",87),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.prezzo)+(t.isPrezzoBloccato?" *":"")," ")}}function rge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoPortale")," "))}const cge=function(i){return{statoBloccato:i}};function sge(i,o){if(1&i&&(e.TgZ(0,"mat-cell",88)(1,"div",89),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,cge,t.isStatoPortaleXAlbergoBloccato)),e.xp6(1),e.hij(" ",e.lcZ(3,2,n.getEnumKeyTranslation(n.enumStatoPortaleXAlbergo,t.statoPortaleXAlbergo,"statoPortaleXAlbergo"))," ")}}function pge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoPubblicazione")," "))}function dge(i,o){1&i&&(e.TgZ(0,"span",94),e._uU(1," warning_amber "),e.qZA())}function mge(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.Oqu(t.modalitaModifica==n.enumModalitaModificaDisponibilitaXPortaleXAlbergo.Diretta?" (P)":" (M)")}}function _ge(i,o){if(1&i&&(e.TgZ(0,"div",95)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,mge,2,1,"span",96),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,n.getEnumKeyTranslation(n.enumTipoModifica,t.tipoModifica,"tipoModificaDisponibilitaXPortaleXAlbergo"))),e.xp6(2),e.Q6J("ngIf",t.tipoModifica==n.enumTipoModifica.ManualeWeb)}}function uge(i,o){if(1&i&&(e.TgZ(0,"mat-cell",90)(1,"div",7)(2,"span",91),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,dge,2,0,"span",92),e.qZA(),e.YNc(6,_ge,5,4,"div",93),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,n.getEnumKeyTranslation(n.enumStatoPubblicazionePortale,t.statoPubblicazione,"statoPubblicazionePortale"))," "),e.xp6(2),e.Q6J("ngIf",t.statoPubblicazione!=n.enumStatoPubblicazionePortale.Pubblicato),e.xp6(1),e.Q6J("ngIf",t.tipoModifica!=n.enumTipoModifica.Nessuna)}}function gge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.dataUltimaPubblicazione")," "))}function hge(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.dataUltimaPubblicazione?e.xi3(2,1,t.dataUltimaPubblicazione,"dd/MM/yyyy HH:mm"):""," ")}}function fge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMinimaSoggiorno")," "))}function Cge(i,o){if(1&i&&(e.TgZ(0,"mat-cell",97),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMinimaSoggiorno)}}function bge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMassimaSoggiorno")," "))}function vge(i,o){if(1&i&&(e.TgZ(0,"mat-cell",97),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMassimaSoggiorno)}}function Tge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoCta"),""))}function xge(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoCtaCtd,t.statoCta,"statoCtaCtd"))," ")}}function Zge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoCtd"),""))}function Age(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumStatoCtaCtd,t.statoCtd,"statoCtaCtd"))," ")}}function wge(i,o){1&i&&(e.TgZ(0,"mat-header-cell",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.disponibilitaXPortaleXAlbergo.proprieta.fascia"),""))}function zge(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null==t.fasciaAttiva?null:t.fasciaAttiva.nome)}}function Mge(i,o){1&i&&e._UZ(0,"mat-header-cell")}function qge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",100),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.stopPropagation(),e.KtG(r.delete(l))}),e.TgZ(1,"i",101),e._uU(2,"delete"),e.qZA()()}}function Pge(i,o){if(1&i&&(e.TgZ(0,"mat-cell",98),e.YNc(1,qge,3,0,"button",99),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.eliminaDisponibilitaEnabled)}}function kge(i,o){1&i&&e._UZ(0,"mat-header-row",102)}function Sge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",103),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)&&0==p.selectionDisponibilita.selected.length?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function yge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",104)(1,"button",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.export())}),e.TgZ(2,"i",33),e._uU(3,"get_app"),e.qZA()(),e.TgZ(4,"mat-paginator",105),e.NdJ("page",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.handlePageBottom(a))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("pageSize",t.paginator.pageSize)("pageIndex",t.paginator.pageIndex)("length",t.paginator.length)("pageSizeOptions",t.paginator.pageSizeOptions)}}function Jge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",106)(1,"app-disponibilita-edit",107),e.NdJ("back",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBack())})("delete",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.delete(a))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("dispo",t.disponibilita)("modal",!1)("eliminaDisponibilitaEnabled",t.eliminaDisponibilitaEnabled)}}const Ege=function(){return[10,25,50,100,250,500]};class yl extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.sessionService=a,this.utility=l,this.displayedColumns=["select","portaleXAlbergo.nome","tipoCameraOTA.descrizione","tariffaOTA.descrizione","giorno","disponibili","prezzo","statoPortaleXAlbergo","statoPubblicazione","dataUltimaPubblicazione","durataMinimaSoggiorno","durataMassimaSoggiorno","statoCta","statoCtd","fasciaAttiva.nome","delete"],this.pageSize=25,this.tipiCameraOTA=[],this.tariffeOTA=[],this.showTable=!0,this.disponibilita=new v.fq$,this.enumStatoPubblicazionePortale=c.Eq,this.enumTipoModifica=c.dn,this.enumStatoPortaleXAlbergo=c.V6,this.enumStatoCtaCtd=c.L5,this.enumModalitaModificaDisponibilitaXPortaleXAlbergo=c.Hx,this.pubblicaDisponibilitaEnabled=!0,this.eliminaDisponibilitaEnabled=!0,this.selectionDisponibilita=new me.Ov(!0,[]),this.search=!1,this.portale=new v.$Ys(-1),this.initialized=!1}ngOnInit(){this.headerService.setTitle("sbm.disponibilita.elenco-disponibilita.title"),this.apiService.getTipiCameraOTAAlbergo().subscribe(t=>{this.tipiCameraOTA=t.data}),this.apiService.getTariffeOTAAlbergo().subscribe(t=>{this.tariffeOTA=t.data}),this.rq=new d.k$g,this.rq.skip=0,this.rq.take=this.pageSize,this.sorting=new d.aQR("giorno",c.nI.Desc),this.filters=[],this.filters.push(new d.wn$("portaleXAlbergo.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("giorno",c.Hp.GreaterEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("giorno",c.Hp.LowerEqual,this.getDate(this.oneMonthFromToday),c.NM.Date)),this.filters.push(new d.wn$("statoPubblicazione",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tipoCameraOTA.codice",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("tariffaOTA.codice",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("tipoCameraOTA.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("tariffaOTA.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("prezzo",c.Hp.Equal,"0",c.NM.Number,!1,c.Hp.NotEqual)),this.filters.push(new d.wn$("statoPortaleXAlbergo",c.Hp.Equal,"",c.NM.Number)),this.selectedUbicazione=this.sessionService.getUbicazioneIstat(),this.filters.push(new d.wn$("portaleXAlbergo.ubicazioneIstat.oid",c.Hp.Equal,null!=this.selectedUbicazione?this.selectedUbicazione.oid.toString():"",c.NM.Number));let o=this.sessionService.getPermessiUtente();null!=o&&(this.pubblicaDisponibilitaEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.PubblicazioneDisponibilita)),this.eliminaDisponibilitaEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.EliminazioneDisponibilita))),this.sessionService.isPubblicaWS()&&(this.pubblicaDisponibilitaEnabled=!1)}ngAfterViewInit(){this.download(),setTimeout(()=>{this.initialized=!0},200)}onSortChange(o){null!=o&&o.active&&o.direction?(this.sorting.field=o.active,this.sorting.type="asc"==o.direction?c.nI.Asc:c.nI.Desc):this.sorting=new d.aQR,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}onSearch(o,t,n,a,l=!0){null!=t?(this.search=!l,this.filters[o].value=t):null!=n?(this.filters[o].active=n,this.filters[o].inverted=!1):(this.filters[o].inverted=a,this.filters[o].active=!1),0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}download(){this.selectionDisponibilita=new me.Ov(!0,[]),this.search||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),null!=this.sorting&&this.sorting.field&&null!=this.sorting.type?this.rq.sorting=[this.sorting]:this.rq.sorting=[],this.searchRequest=this.apiService.getDisponibilitaAlbergoFilter(this.rq).subscribe(o=>{this.data=o.data,this.totalRecords=o.totalRecords,this.checkDisponibilitaNonPubblicate(),this.search?this.search=!1:this.setIsLoading(!1)})}pubblica(){let o=new d.Zpt;o.width="80vw",o.disableClose=!0;let t=this.showModalDialog(Ct,o),n=t.componentInstance;n.dialogRef=t,n.portale=this.portale,n.dal=this.filters[1].value,n.al=this.filters[2].value,t.afterClosed().subscribe(a=>{a&&this.download()})}isAllSelectedDisponibilita(){return this.selectionDisponibilita.selected.length==this.data.length}masterToggleDisponibilita(){this.isAllSelectedDisponibilita()?this.selectionDisponibilita.clear():this.data.forEach(o=>this.selectionDisponibilita.select(o.oid))}setDaPubblicare(){this.showDialogConfirm("sbm.disponibilita.elenco-disponibilita.modificareStatoDisponibilita").then(o=>{this.setIsLoading(!0);let t=this.utility.findItemsByOid(this.data,this.selectionDisponibilita.selected);t.forEach(n=>n.statoPubblicazione=c.Eq.ModificatoDaPubblicare),this.apiService.updateMultipleDisponibilita(t).subscribe(()=>{this.download()})},o=>{})}pubblicaSelezionati(){let o=this.utility.findItemsByOid(this.data,this.selectionDisponibilita.selected),t=!0,n=null!=o[0].portaleXAlbergo?o[0].portaleXAlbergo.oid:-1;for(let a of o)if(null==a.portaleXAlbergo||a.portaleXAlbergo.oid!=n){t=!1;break}n>0&&t?this.showDialogConfirm("sbm.disponibilita.elenco-disponibilita.pubblicareDisponibilita").then(a=>{this.setIsLoading(!0);let l=new d.t16;l.oidPortale=n,l.oidDisponibilita=this.selectionDisponibilita.selected,this.apiService.pubblicaDisponibilita(l).subscribe(r=>{this.setIsLoading(!1),null!=r?r.tipoEsito==c.pp.NessunErrore?this.showInfo("sbm.disponibilita.pubblica-disponibilita.successoPubblicazione").then(()=>{this.download()}):this.showError("sbm.disponibilita.pubblica-disponibilita.errorePubblicazione").then(()=>{let p=new d.Zpt;p.width="80vw";let L=this.showModalDialog(Sl,p).componentInstance;L.dettaglioWarning=r.dettaglioWarning,L.dettaglioErrore=r.dettaglioErrore,this.selectionDisponibilita=new me.Ov(!0,[])}):this.showError("sbm.disponibilita.pubblica-disponibilita.errorePubblicazione").then(()=>{this.selectionDisponibilita=new me.Ov(!0,[])})})},a=>{}):this.showError("sbm.disponibilita.elenco-disponibilita.errorePortaleDisponibilita")}edit(o){this.disponibilita=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop()}delete(o){this.showDialogConfirm("sbm.disponibilita.elenco-disponibilita.eliminareDisponibilita").then(t=>{if(this.setIsLoading(!0),null!=o)o.isDeleted=!0,this.selectionDisponibilita.isSelected(o.oid)&&this.selectionDisponibilita.deselect(o.oid),this.apiService.updateMultipleDisponibilita([o]).subscribe(()=>{this.download()});else{let n=this.utility.findItemsByOid(this.data,this.selectionDisponibilita.selected);n.forEach(a=>a.isDeleted=!0),this.apiService.updateMultipleDisponibilita(n).subscribe(()=>{this.download()})}},t=>{})}export(){this.setIsLoading(!0);let o=new d.k$g;o.filters=this.utility.getFilters(this.filters),null!=this.sorting&&this.sorting.field&&null!=this.sorting.type?o.sorting=[this.sorting]:o.sorting=[],this.apiService.getDisponibilitaAlbergoFilter(o).subscribe(t=>{this.utility.exportToCsv(t.data,"Disponibilita",this.displayedColumns.slice(1,this.displayedColumns.length-1)),this.setIsLoading(!1)})}checkDisponibilitaNonPubblicate(){this.apiService.checkDisponibilitaFutureNonPubblicate(+this.filters[0].value).subscribe(o=>{o.data?this.alert=new String("sbm.disponibilita.elenco-disponibilita.disponibilitaNonPubblicate"):this.alert=null})}getInfoMaster(o){return null!=o.disponibilit\u00e0XPortaleXAlbergoMaster&&null!=o.disponibilit\u00e0XPortaleXAlbergoMaster.portaleXAlbergo?o.disponibilit\u00e0XPortaleXAlbergoMaster.portaleXAlbergo.nome:""}onPortaleChange(){this.portale.oid>0?(this.filters[6].value="",this.filters[7].value="",this.apiService.getTipiCameraOTA(this.portale.oid).subscribe(o=>{this.tipiCameraOTA=o.data}),this.apiService.getTariffeOTA(this.portale.oid).subscribe(o=>{this.tariffeOTA=o.data}),this.onSearch(0,this.portale.oid.toString())):(this.apiService.getTipiCameraOTAAlbergo().subscribe(o=>{this.tipiCameraOTA=o.data}),this.apiService.getTariffeOTAAlbergo().subscribe(o=>{this.tariffeOTA=o.data}),this.onSearch(0,""))}handlePageBottom(o){this.paginator.pageSize=o.pageSize,this.paginator.pageIndex=o.pageIndex,this.paginator.page.emit(o)}ngOnDestroy(){this.headerService.clearTitle()}}function Nge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"button",12),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.updateStatoPortale(l.oid,r.enumStatoPortale.Chiuso))}),e.TgZ(5,"i",13),e._uU(6,"power_settings_new"),e.qZA()(),e.TgZ(7,"button",14),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.updateStatoPortale(l.oid,r.enumStatoPortale.Aperto))}),e.TgZ(8,"i",15),e._uU(9,"play_arrow"),e.qZA()()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.descrizione," ")}}yl.\u0275fac=function(o){return new(o||yl)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(j.m),e.Y36(C.t))},yl.\u0275cmp=e.Xpm({type:yl,selectors:[["app-elenco-disponibilita"]],viewQuery:function(o,t){if(1&o&&(e.Gf(Iue,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:148,vars:87,consts:[[1,"p-3"],[3,"hidden"],[3,"message","info"],[1,"filter"],[1,"row"],[1,"col-3"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","value","dateChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],[3,"placeholder","value","selectionChange"],["statoPubblicazioneSearch",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["tipoCameraCodiceSearch",""],["tariffaCodiceSearch",""],["tipoCameraSearch",""],["tariffaSearch",""],["statoPortaleXAlbergoSearch",""],[1,"col-3","pt-4"],[3,"label","valueChange"],["class","col-3 text-right",4,"ngIf"],[1,"font-weight-bold","small"],[1,"statoBloccato-legenda","align-top","border","rounded"],[1,"mt-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",3,"disabled","click",4,"ngIf"],[1,"paginator-container-top","position-relative","mt-4"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],["paginatorTop",""],[1,"mat-table-container-dual-paginator"],["matSort","","matSortActive","giorno","matSortDirection","desc",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","select"],["class","mat-th-edit",4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","portaleXAlbergo.nome"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","tipoCameraOTA.descrizione"],["matColumnDef","tariffaOTA.descrizione"],["matColumnDef","giorno"],["matColumnDef","disponibili"],["mat-sort-header","","class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center rounded",3,"backgroundColor",4,"matCellDef"],["matColumnDef","prezzo"],["mat-sort-header","","class","justify-content-end",4,"matHeaderCellDef"],["class","justify-content-end",4,"matCellDef"],["matColumnDef","statoPortaleXAlbergo"],["class","pr-2 pl-2 align-items-stretch",4,"matCellDef"],["matColumnDef","statoPubblicazione"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","dataUltimaPubblicazione"],["matColumnDef","durataMinimaSoggiorno"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","durataMassimaSoggiorno"],["matColumnDef","statoCta"],["matColumnDef","statoCtd"],["matColumnDef","fasciaAttiva.nome"],["matColumnDef","delete"],[4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],["class","paginator-container-bottom position-relative",4,"ngIf"],["class","edit-container",4,"ngIf"],[3,"value"],[1,"col-3","text-right"],["mat-flat-button","","color","primary",1,"mt-2",3,"click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-flat-button","","color","blank",3,"disabled","click"],[1,"mat-th-edit"],["color","primary",1,"d-inline-block","mt-2",3,"checked","indeterminate","change"],[1,"mat-td-edit"],["color","primary",1,"d-inline-block","mt-2",3,"checked","click","change"],["mat-sort-header",""],[1,"d-flex","flex-column"],[1,"font-italic","text-small"],["mat-sort-header","",1,"justify-content-center"],[1,"justify-content-center","rounded"],["mat-sort-header","",1,"justify-content-end"],[1,"justify-content-end"],[1,"pr-3"],[1,"pr-2","pl-2","align-items-stretch"],[1,"flex","d-flex","align-items-center","justify-content-center",3,"ngClass"],[1,"flex-wrap"],[1,"align-middle"],["class","material-icons-round warning-icon align-middle",4,"ngIf"],["class","w-100 text-small font-italic",4,"ngIf"],[1,"material-icons-round","warning-icon","align-middle"],[1,"w-100","text-small","font-italic"],[4,"ngIf"],[1,"justify-content-center"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[1,"paginator-container-bottom","position-relative"],["showFirstLastButtons","",3,"pageSize","pageIndex","length","pageSizeOptions","page"],[1,"edit-container"],[3,"dispo","modal","eliminaDisponibilitaEnabled","back","delete"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"app-alert",2),e.NdJ("info",function(){return t.pubblica()}),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"app-view-select",6),e.NdJ("valueChange",function(l){return t.portale=l})("valueChange",function(){return t.onPortaleChange()}),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",5)(9,"mat-form-field",7)(10,"input",8),e.NdJ("dateChange",function(l){return t.onSearch(1,t.getDate(l.value))}),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"mat-datepicker-toggle",9)(13,"mat-datepicker",null,10),e.qZA()(),e.TgZ(15,"div",5)(16,"mat-form-field",7)(17,"input",8),e.NdJ("dateChange",function(l){return t.onSearch(2,t.getDate(l.value))}),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"mat-datepicker-toggle",9)(20,"mat-datepicker",null,11),e.qZA()(),e.TgZ(22,"div",5)(23,"mat-form-field",7)(24,"mat-select",12,13),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(25);return e.KtG(t.onSearch(3,l.value))}),e.ALo(26,"translate"),e._UZ(27,"mat-option",14),e.YNc(28,Que,3,4,"mat-option",15),e.ALo(29,"selectEnum"),e.qZA()()()(),e.TgZ(30,"div",4)(31,"div",5)(32,"mat-form-field",7)(33,"input",16,17),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(34);return t.filters[6].value="",e.KtG(t.onSearch(4,l.value,null,null,!1))}),e.ALo(35,"translate"),e.qZA()()(),e.TgZ(36,"div",5)(37,"mat-form-field",7)(38,"input",16,18),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(39);return t.filters[7].value="",e.KtG(t.onSearch(5,l.value,null,null,!1))}),e.ALo(40,"translate"),e.qZA()()(),e.TgZ(41,"div",5)(42,"mat-form-field",7)(43,"mat-select",12,19),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(44);return t.filters[4].value="",e.KtG(t.onSearch(6,l.value))}),e.ALo(45,"translate"),e._UZ(46,"mat-option",14),e.YNc(47,Uue,2,2,"mat-option",15),e.qZA()()(),e.TgZ(48,"div",5)(49,"mat-form-field",7)(50,"mat-select",12,20),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(51);return t.filters[5].value="",e.KtG(t.onSearch(7,l.value))}),e.ALo(52,"translate"),e._UZ(53,"mat-option",14),e.YNc(54,Yue,2,2,"mat-option",15),e.qZA()()()(),e.TgZ(55,"div",4)(56,"div",5)(57,"app-view-select",6),e.NdJ("valueChange",function(l){return t.selectedUbicazione=l})("valueChange",function(){return t.onSearch(10,-1==t.selectedUbicazione.oid?"":t.selectedUbicazione.oid.toString())}),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"div",5)(60,"mat-form-field",7)(61,"mat-select",12,21),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(62);return e.KtG(t.onSearch(9,l.value))}),e.ALo(63,"translate"),e._UZ(64,"mat-option",14),e.YNc(65,Rue,3,4,"mat-option",15),e.ALo(66,"selectEnum"),e.qZA()()(),e.TgZ(67,"div",22)(68,"app-indeterminate-checkbox",23),e.NdJ("valueChange",function(l){return null==l?t.onSearch(8,null,null,!0):t.onSearch(8,null,l)}),e.qZA()(),e.YNc(69,Fue,4,3,"div",24),e.qZA(),e.TgZ(70,"div")(71,"span",25),e._uU(72),e.ALo(73,"translate"),e.qZA(),e._UZ(74,"span",26),e.TgZ(75,"span",25),e._uU(76),e.ALo(77,"translate"),e.qZA()()(),e.TgZ(78,"div",27),e.YNc(79,Hue,4,3,"div",28),e.TgZ(80,"div",1)(81,"button",29),e.NdJ("click",function(){return t.setDaPubblicare()}),e._uU(82),e.ALo(83,"translate"),e.qZA(),e.TgZ(84,"button",29),e.NdJ("click",function(){return t.pubblicaSelezionati()}),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.YNc(87,Kue,3,4,"button",30),e.TgZ(88,"div",31)(89,"button",32),e.NdJ("click",function(){return t.export()}),e.TgZ(90,"i",33),e._uU(91,"get_app"),e.qZA()(),e.TgZ(92,"mat-paginator",34,35),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()(),e.TgZ(94,"div",36)(95,"mat-table",37),e.NdJ("matSortChange",function(l){return t.onSortChange(l)}),e.ynx(96,38),e.YNc(97,Gue,2,2,"mat-header-cell",39),e.YNc(98,$ue,2,1,"mat-cell",40),e.BQk(),e.ynx(99,41),e.YNc(100,Bue,3,3,"mat-header-cell",42),e.YNc(101,Vue,6,2,"mat-cell",43),e.BQk(),e.ynx(102,44),e.YNc(103,Xue,3,3,"mat-header-cell",42),e.YNc(104,jue,2,1,"mat-cell",43),e.BQk(),e.ynx(105,45),e.YNc(106,Wue,3,3,"mat-header-cell",42),e.YNc(107,ege,2,1,"mat-cell",43),e.BQk(),e.ynx(108,46),e.YNc(109,tge,3,3,"mat-header-cell",42),e.YNc(110,ige,3,4,"mat-cell",43),e.BQk(),e.ynx(111,47),e.YNc(112,oge,3,3,"mat-header-cell",48),e.YNc(113,nge,2,3,"mat-cell",49),e.BQk(),e.ynx(114,50),e.YNc(115,age,3,3,"mat-header-cell",51),e.YNc(116,lge,4,3,"mat-cell",52),e.BQk(),e.ynx(117,53),e.YNc(118,rge,3,3,"mat-header-cell",48),e.YNc(119,sge,4,6,"mat-cell",54),e.BQk(),e.ynx(120,55),e.YNc(121,pge,3,3,"mat-header-cell",42),e.YNc(122,uge,7,5,"mat-cell",56),e.BQk(),e.ynx(123,57),e.YNc(124,gge,3,3,"mat-header-cell",42),e.YNc(125,hge,3,4,"mat-cell",43),e.BQk(),e.ynx(126,58),e.YNc(127,fge,3,3,"mat-header-cell",48),e.YNc(128,Cge,2,1,"mat-cell",59),e.BQk(),e.ynx(129,60),e.YNc(130,bge,3,3,"mat-header-cell",48),e.YNc(131,vge,2,1,"mat-cell",59),e.BQk(),e.ynx(132,61),e.YNc(133,Tge,3,3,"mat-header-cell",42),e.YNc(134,xge,3,3,"mat-cell",43),e.BQk(),e.ynx(135,62),e.YNc(136,Zge,3,3,"mat-header-cell",42),e.YNc(137,Age,3,3,"mat-cell",43),e.BQk(),e.ynx(138,63),e.YNc(139,wge,3,3,"mat-header-cell",42),e.YNc(140,zge,2,1,"mat-cell",43),e.BQk(),e.ynx(141,64),e.YNc(142,Mge,1,0,"mat-header-cell",65),e.YNc(143,Pge,2,1,"mat-cell",66),e.BQk(),e.YNc(144,kge,1,0,"mat-header-row",67),e.YNc(145,Sge,1,1,"mat-row",68),e.qZA()(),e.YNc(146,yge,5,4,"div",69),e.qZA()()(),e.YNc(147,Jge,2,3,"div",70),e.qZA()}if(2&o){const n=e.MAs(14),a=e.MAs(21);e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(1),e.Q6J("message",t.alert),e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect())("value",t.portale)("placeholder",e.lcZ(7,52,"bo.disponibilitaXPortaleXAlbergo.proprieta.portale")),e.xp6(4),e.s9C("placeholder",e.lcZ(11,54,"globals.dal")),e.Q6J("matDatepicker",n)("value",t.filters[1].value),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(18,56,"globals.al")),e.Q6J("matDatepicker",a)("value",t.filters[2].value),e.xp6(2),e.Q6J("for",a),e.xp6(5),e.s9C("placeholder",e.lcZ(26,58,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoPubblicazione")),e.Q6J("value",t.filters[3].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(29,60,t.enumStatoPubblicazionePortale,"statoPubblicazionePortale")),e.xp6(5),e.s9C("placeholder",e.lcZ(35,63,"sbm.disponibilita.elenco-disponibilita.codiceTipoCamera")),e.Q6J("value",t.filters[4].value),e.xp6(5),e.s9C("placeholder",e.lcZ(40,65,"sbm.disponibilita.elenco-disponibilita.codiceTariffa")),e.Q6J("value",t.filters[5].value),e.xp6(5),e.s9C("placeholder",e.lcZ(45,67,"bo.disponibilitaXPortaleXAlbergo.proprieta.tipoCamera")),e.Q6J("value",t.filters[6].value),e.xp6(4),e.Q6J("ngForOf",t.tipiCameraOTA),e.xp6(3),e.s9C("placeholder",e.lcZ(52,69,"bo.disponibilitaXPortaleXAlbergo.proprieta.tariffa")),e.Q6J("value",t.filters[7].value),e.xp6(4),e.Q6J("ngForOf",t.tariffeOTA),e.xp6(3),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.selectedUbicazione)("placeholder",e.lcZ(58,71,"globals.ubicazioneIstat")),e.xp6(4),e.s9C("placeholder",e.lcZ(63,73,"bo.disponibilitaXPortaleXAlbergo.proprieta.statoPortaleXAlbergo")),e.Q6J("value",t.filters[9].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(66,75,t.enumStatoPortaleXAlbergo,"statoPortaleXAlbergo")),e.xp6(3),e.Q6J("label","sbm.disponibilita.elenco-disponibilita.disponibilitaConPrezzoA0"),e.xp6(1),e.Q6J("ngIf",t.pubblicaDisponibilitaEnabled),e.xp6(3),e.hij(" ",e.lcZ(73,78,"sbm.disponibilita.elenco-disponibilita.prezzoBloccato")," "),e.xp6(4),e.hij(" ",e.lcZ(77,80,"sbm.disponibilita.elenco-disponibilita.statoBloccato")," "),e.xp6(3),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(1),e.Q6J("disabled",null==t.selectionDisponibilita.selected||0==t.selectionDisponibilita.selected.length),e.xp6(1),e.Oqu(e.lcZ(83,82,"sbm.disponibilita.elenco-disponibilita.impostaDaPubblicareSelezionati")),e.xp6(2),e.Q6J("disabled",null==t.selectionDisponibilita.selected||0==t.selectionDisponibilita.selected.length),e.xp6(1),e.Oqu(e.lcZ(86,84,"sbm.disponibilita.elenco-disponibilita.pubblicaSelezionati")),e.xp6(2),e.Q6J("ngIf",t.eliminaDisponibilitaEnabled),e.xp6(5),e.Q6J("pageSizeOptions",e.DdM(86,Ege))("pageSize",t.pageSize)("length",t.totalRecords),e.xp6(3),e.Q6J("dataSource",t.data),e.xp6(49),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngIf",t.initialized),e.xp6(1),e.Q6J("ngIf",!t.showTable)}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,nt,ne.d,st,Ji,m.uU,Te.A,ke.f,z.X$],styles:[".mat-table[_ngcontent-%COMP%]{min-width:2000px!important}.non-pubblicato[_ngcontent-%COMP%]{font-weight:700;color:red;font-size:larger}.text-small[_ngcontent-%COMP%]{font-size:13px}.mat-column-select[_ngcontent-%COMP%]{width:80px!important;max-width:80px!important;min-width:80px!important}.warning-icon[_ngcontent-%COMP%]{font-size:20px}.small[_ngcontent-%COMP%]{font-size:15px}.statoBloccato-legenda[_ngcontent-%COMP%]{background-image:url(/assets/images/sbm/lock.png);background-size:cover;background-repeat:no-repeat;display:inline-block;width:20px;height:20px;margin-left:4px}.statoBloccato[_ngcontent-%COMP%]{background-image:url(/assets/images/sbm/lock-big.png);background-size:cover;background-repeat:no-repeat}.flex[_ngcontent-%COMP%]{flex:1}"]});class Jl extends f.H{constructor(o){super(),this.apiService=o,this.tipiCamere=[],this.statoPortaleUpdated=!1,this.enumStatoPortale=c.V6}ngOnInit(){this.setIsLoading(!0),this.apiService.getTipiCameraOTA(this.portale.oid).subscribe(o=>{this.tipiCamere=o.data,this.setIsLoading(!1)})}updateStatoPortale(o,t){this.showDialogConfirm("globals.effettuareOperazione").then(n=>{this.setIsLoading(!0);let a=new d.hCv;a.oidPortale=this.portale.oid,a.dal=this.getDate(this.dalDate),a.al=this.getDate(this.alDate);let l=new d.dw0;l.tipoCameraOid=o,l.stato=t,a.tipiCamera=[l],this.apiService.updateAllDisponibilita(a).subscribe(()=>{this.setIsLoading(!1),this.showInfo("globals.operazioneCompletata"),this.statoPortaleUpdated=!0})},n=>{})}}Jl.\u0275fac=function(o){return new(o||Jl)(e.Y36(A.s))},Jl.\u0275cmp=e.Xpm({type:Jl,selectors:[["app-apri-chiudi-periodo-modal"]],inputs:{dalDate:"dalDate",alDate:"alDate",portale:"portale",dialogRef:"dialogRef"},features:[e.qOj],decls:18,vars:19,consts:[["mat-icon-button","",1,"modal-close-button",3,"disableRipple","click"],[1,"material-icons-round"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["dal",""],["al",""],["class","row mt-2",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col-6","font-weight-bold"],[1,"col-6","text-right"],["mat-mini-fab","",1,"closeButtonAggiornaDisponibilita","mr-3",3,"click"],[1,"material-icons","closeIconAggiornaDisponibilita"],["mat-mini-fab","",1,"openButtonAggiornaDisponibilita",3,"click"],[1,"material-icons","openIconAggiornaDisponibilita"]],template:function(o,t){if(1&o&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return t.dialogRef.close(t.statoPortaleUpdated)}),e.TgZ(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"app-view-select",2),e.NdJ("valueChange",function(a){return t.portale=a})("valueChange",function(){return t.ngOnInit()}),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-form-field",3)(6,"input",4),e.NdJ("ngModelChange",function(a){return t.dalDate=a}),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"mat-datepicker-toggle",5)(9,"mat-datepicker",null,6),e.qZA(),e.TgZ(11,"mat-form-field",3)(12,"input",4),e.NdJ("ngModelChange",function(a){return t.alDate=a}),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"mat-datepicker-toggle",5)(15,"mat-datepicker",null,7),e.qZA(),e.YNc(17,Nge,10,1,"div",8)),2&o){const n=e.MAs(10),a=e.MAs(16);e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(null,!1))("value",t.portale)("placeholder",e.lcZ(4,13,"sbm.disponibilita.planning.portale")),e.xp6(3),e.s9C("placeholder",e.lcZ(7,15,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.dalDate),e.xp6(2),e.Q6J("for",n),e.xp6(4),e.s9C("placeholder",e.lcZ(13,17,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.alDate),e.xp6(2),e.Q6J("for",a),e.xp6(3),e.Q6J("ngForOf",t.tipiCamere)}},dependencies:[m.sg,w.X,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,_.Fj,_.JJ,_.On,ne.d,z.X$],styles:[".openButtonAggiornaDisponibilita[_ngcontent-%COMP%]{color:#fff;background-color:#61b95f;width:28px;height:28px;line-height:28px;box-shadow:none;margin-bottom:1px}  .openButtonAggiornaDisponibilita .mat-button-wrapper{padding:0!important}.closeButtonAggiornaDisponibilita[_ngcontent-%COMP%]{color:#fff;background-color:#d55152;width:28px;height:28px;line-height:28px;box-shadow:none;margin-bottom:1px}  .closeButtonAggiornaDisponibilita .mat-button-wrapper{padding:0!important}.openIconAggiornaDisponibilita[_ngcontent-%COMP%], .closeIconAggiornaDisponibilita[_ngcontent-%COMP%]{font-size:18px;line-height:18px}"]});const Oge=["calendar"],Lge=["camereContainer"];function Dge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.apriChiudiPeriodo())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.disponibilita.elenco-disponibilita.apriChiudiPeriodo")))}function Ige(i,o){if(1&i&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(15);e.Q6J("value",t.oid)("hidden",!(!n.value||t.nome&&t.nome.toLowerCase().includes(n.value.toLowerCase()))),e.xp6(1),e.hij(" ",t.nome," ")}}function Qge(i,o){if(1&i&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Uge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"mat-form-field",29)(2,"input",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(3);return e.KtG(r.updateRequest.tipiCamera[l].variazionePrezzo=a)})("blur",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(3);return e.KtG(l.onVariazionePrezzoBlur(a))}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"mat-form-field",31)(5,"mat-select",32),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(3);return e.KtG(r.updateRequest.tipiCamera[l].tipoVariazionePrezzo=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(3);return e.KtG(l.onTipoVariazionePrezzoChange(a))}),e.YNc(6,Qge,3,4,"mat-option",33),e.ALo(7,"selectEnum"),e.qZA()()()}if(2&i){const t=e.oxw().index,n=e.oxw(3);e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"sbm.disponibilita.elenco-disponibilita.aumentoRiduzionePrezzo")),e.Q6J("ngModel",n.updateRequest.tipiCamera[t].variazionePrezzo),e.xp6(3),e.Q6J("ngModel",n.updateRequest.tipiCamera[t].tipoVariazionePrezzo),e.xp6(1),e.Q6J("ngForOf",e.xi3(7,6,n.enumTipoValore,"tipoValore"))}}function Yge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",39)(1,"mat-form-field",22)(2,"input",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2).index,p=e.oxw(3);return e.KtG(p.updateRequest.tariffe[p.getTariffaIndex(r,l)].prezzoUsoSingola=a)})("blur",function(){e.CHM(t);const a=e.oxw().index,l=e.oxw(2).index,r=e.oxw(3);return e.KtG(r.onPrezzoUsoSingolaBlur(r.updateRequest.tariffe[r.getTariffaIndex(l,a)]))}),e.ALo(3,"translate"),e.qZA()()()}if(2&i){const t=e.oxw().index,n=e.oxw(2).index,a=e.oxw(3);e.xp6(2),e.s9C("placeholder",e.lcZ(3,3,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzoUsoSingola")),e.Q6J("disabled",!a.modificaPrezzoEnabled)("ngModel",a.updateRequest.tariffe[a.getTariffaIndex(n,t)].prezzoUsoSingola)}}function Rge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",36)(1,"div",37),e._uU(2),e.qZA(),e.TgZ(3,"div",38)(4,"div",39)(5,"mat-form-field",22)(6,"input",40),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2).index,T=e.oxw(3);return e.KtG(T.updateRequest.tariffe[T.getTariffaIndex(p,r)].prezzo=a)})("blur",function(){const l=e.CHM(t).index,r=e.oxw(2).index,p=e.oxw(3);return e.KtG(p.onPrezzoBlur(p.updateRequest.tariffe[p.getTariffaIndex(r,l)]))}),e.ALo(7,"translate"),e.qZA()()(),e.YNc(8,Yge,4,5,"div",41),e.qZA(),e.TgZ(9,"div",20)(10,"div",21)(11,"mat-form-field",22)(12,"input",40),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2).index,T=e.oxw(3);return e.KtG(T.updateRequest.tariffe[T.getTariffaIndex(p,r)].durataMinimaSoggiorno=a)})("blur",function(){const l=e.CHM(t).index,r=e.oxw(2).index,p=e.oxw(3);return e.KtG(p.onDurataMinimaSoggiornoBlur(p.updateRequest.tariffe[p.getTariffaIndex(r,l)]))}),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",21)(15,"mat-form-field",22)(16,"input",40),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2).index,T=e.oxw(3);return e.KtG(T.updateRequest.tariffe[T.getTariffaIndex(p,r)].durataMassimaSoggiorno=a)})("blur",function(){const l=e.CHM(t).index,r=e.oxw(2).index,p=e.oxw(3);return e.KtG(p.onDurataMassimaSoggiornoBlur(p.updateRequest.tariffe[p.getTariffaIndex(r,l)]))}),e.ALo(17,"translate"),e.qZA()()()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2),l=a.index,r=a.$implicit,p=e.oxw(3);e.xp6(2),e.hij(" ",t.nome," "),e.xp6(4),e.s9C("placeholder",e.lcZ(7,12,"bo.disponibilitaXPortaleXAlbergo.proprieta.prezzo")),e.Q6J("disabled",!p.modificaPrezzoEnabled)("ngModel",p.updateRequest.tariffe[p.getTariffaIndex(l,n)].prezzo)("disabled",!p.modificaPrezzoEnabled),e.xp6(2),e.Q6J("ngIf",r.isUsoSingola),e.xp6(4),e.s9C("placeholder",e.lcZ(13,14,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMinimaSoggiorno")),e.Q6J("disabled",!p.modificaMinMaxStayEnabled)("ngModel",p.updateRequest.tariffe[p.getTariffaIndex(l,n)].durataMinimaSoggiorno),e.xp6(4),e.s9C("placeholder",e.lcZ(17,16,"bo.disponibilitaXPortaleXAlbergo.proprieta.durataMassimaSoggiorno")),e.Q6J("disabled",!p.modificaMinMaxStayEnabled)("ngModel",p.updateRequest.tariffe[p.getTariffaIndex(l,n)].durataMassimaSoggiorno)}}function Fge(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",34),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Rge,18,18,"div",35),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.disponibilita.elenco-disponibilita.tariffe")," "),e.xp6(2),e.Q6J("ngForOf",t.tariffe)}}function Hge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"h5",16),e._uU(2),e.qZA(),e.TgZ(3,"mat-slide-toggle",17),e.NdJ("change",function(a){const r=e.CHM(t).index,p=e.oxw(3);return e.KtG(p.updateRequest.tipiCamera[r].stato=a.checked?p.enumStatoPortale.Aperto:p.enumStatoPortale.Chiuso)}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-form-field",18)(7,"input",19),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(3);return e.KtG(p.updateRequest.tipiCamera[r].disponibili=a)})("blur",function(){const l=e.CHM(t).index,r=e.oxw(3);return e.KtG(r.onDisponibiliBlur(r.updateRequest.tipiCamera[l]))}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",20)(10,"div",21)(11,"mat-form-field",22)(12,"mat-select",23),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(3);return e.KtG(p.updateRequest.tipiCamera[r].oidFascia=a)}),e.ALo(13,"translate"),e._UZ(14,"app-select-search",null,24)(16,"mat-option",25),e.YNc(17,Ige,2,3,"mat-option",26),e.qZA()()(),e.YNc(18,Uge,8,9,"div",27),e.qZA(),e.YNc(19,Fge,5,4,"ng-container",5),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.xp6(2),e.hij(" ",t.nome," "),e.xp6(1),e.Q6J("checked",a.updateRequest.tipiCamera[n].stato==a.enumStatoPortale.Aperto)("disabled",!a.modificaStatoPortaleEnabled),e.xp6(1),e.Oqu(e.lcZ(5,13,"sbm.disponibilita.elenco-disponibilita.aperta")),e.xp6(3),e.s9C("placeholder",e.lcZ(8,15,"bo.disponibilitaXPortaleXAlbergo.proprieta.disponibili")),e.Q6J("ngModel",a.updateRequest.tipiCamera[n].disponibili)("disabled",!a.modificaDisponibiliEnabled),e.xp6(5),e.s9C("placeholder",e.lcZ(13,17,"bo.disponibilitaXPortaleXAlbergo.proprieta.fascia")),e.Q6J("ngModel",a.updateRequest.tipiCamera[n].oidFascia),e.xp6(4),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",a.fasce),e.xp6(1),e.Q6J("ngIf",a.modificaPrezzoEnabled),e.xp6(1),e.Q6J("ngIf",null!=t.tariffe&&t.tariffe.length>0)}}function Kge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.aggiornaDisponibilita())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.opzioniPropagazione")))}function Gge(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"momentFormat"),e.qZA(),e.TgZ(5,"div",10),e.YNc(6,Hge,20,19,"div",11),e.qZA(),e.TgZ(7,"div",12),e.YNc(8,Kge,3,3,"button",13),e.TgZ(9,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.save())}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,4,e.Dn7(4,6,t.selectedDate,"D MMMM YYYY",t.getLocale()))," "),e.xp6(4),e.Q6J("ngForOf",t.tipiCamera),e.xp6(2),e.Q6J("ngIf",t.modificaBlocchiEnabled),e.xp6(2),e.Oqu(e.lcZ(11,10,"globals.salva"))}}function $ge(i,o){1&i&&(e.TgZ(0,"div",43)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.disponibilita.elenco-disponibilita.nessunaDisponibilita")))}function Bge(i,o){if(1&i&&(e.TgZ(0,"div",null,7),e.YNc(2,Gge,12,12,"ng-container",5),e.YNc(3,$ge,4,3,"div",8),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",null!=t.updateRequest&&null!=t.tipiCamera&&t.tipiCamera.length>0),e.xp6(1),e.Q6J("ngIf",null==t.updateRequest||null==t.tipiCamera||0==t.tipiCamera.length)}}class El extends f.H{constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.containerService=n,this.date=u(),this.fasce=[],this.enumStatoPortale=c.V6,this.resetSelectedDateSubject=new qc.x,this.modificaPrezzoEnabled=!0,this.modificaStatoPortaleEnabled=!0,this.modificaDisponibiliEnabled=!0,this.modificaMinMaxStayEnabled=!0,this.modificaBlocchiEnabled=!0,this.enumTipoValore=c.jy,this.getPortaliRQ=d.k$g.fromFilter("isAttivo",c.Hp.IsTrue)}ngOnInit(){this.containerService.scrollToTop();let o=this.sessionService.getPermessiUtente();null!=o&&(this.modificaPrezzoEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaPrezzoPlanning)),this.modificaStatoPortaleEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaStatoPortalePlanning)),this.modificaMinMaxStayEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaMinMaxStayPlanning)),this.modificaBlocchiEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.ModificaBlocchiPlanning))),this.modificaDisponibiliEnabled=this.sessionService.isModificaDisponibiliEnabled(),this.setIsLoading(!0);let t=this.sessionService.getUbicazioneIstat();null!=t&&this.getPortaliRQ.filters.push(new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,t.oid.toString(),c.NM.Number)),this.apiService.getPortaliXAlbergoViewSelect(this.getPortaliRQ,!1).subscribe(n=>{n.data.length>0&&(this.portale=n.data[0],this.onPortaleChange())})}onSelectDate(o){this.selectedDate=this.getDate(o.mDate),this.updateRequest=new d.hCv,this.updateRequest.dal=this.selectedDate,this.updateRequest.al=this.selectedDate,this.updateRequest.oidPortale=this.portale.oid;for(let t of this.tipiCamera){let n=t.giorni.find(a=>u(a.data).isSame(u(this.selectedDate)));if(null==n)return void(this.updateRequest=null);{let a=new d.dw0;a.tipoCameraOid=t.oid,a.disponibili=n.disponibili,a.stato=n.stato,a.oidFascia=null!=n.fascia?n.fascia.oid:-1,this.updateRequest.tipiCamera.push(a)}for(let a of t.tariffe){let l=a.prezzi.find(r=>u(r.data).isSame(u(this.selectedDate)));if(null==l)return void(this.updateRequest=null);{let r=new d.LU0;r.tipoCameraOid=t.oid,r.tariffaOid=a.oid,r.prezzo=l.prezzo,r.prezzoUsoSingola=l.prezzoUsoSingola,r.durataMinimaSoggiorno=l.durataMinimaSoggiorno,r.durataMassimaSoggiorno=l.durataMassimaSoggiorno,this.updateRequest.tariffe.push(r)}}}setTimeout(()=>{window.dispatchEvent(new Event("resize")),this.camereContainer.nativeElement.scrollIntoView({behavior:"smooth"})},200)}loadEvents(){this.setIsLoading(!0),this.selectedDate=null,this.resetSelectedDateSubject.next(),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},200),this.containerService.scrollToTop();let o=new d.zhW;o.oidAlbergo=this.sessionService.getOidAlbergo(),o.oidPortaleXAlbergo=this.portale.oid,o.dal=this.getDate(this.calendar.weeks[0][0].mDate),o.al=this.getDate(this.calendar.weeks[this.calendar.weeks.length-1][this.calendar.weeks[this.calendar.weeks.length-1].length-1].mDate),this.apiService.getPlanning(o).subscribe(t=>{if(this.tipiCamera=t.data.tipiCamere,this.eventsDataSource=new d.FIM,null!=this.tipiCamera&&this.tipiCamera.length>0)for(let n of this.tipiCamera[0].giorni){let a={};a.date=u(n.data),a.customData={oidFascia:n.fascia.oid},a.color=null!=n.fascia?n.fascia.coloreHex:null,this.eventsDataSource.events.push(a)}this.calendar.loadEvents(this.eventsDataSource),this.setIsLoading(!1)})}onPrezzoBlur(o){o.prezzo=Math.max(o.prezzo,0)}onPrezzoUsoSingolaBlur(o){o.prezzoUsoSingola=Math.max(o.prezzoUsoSingola,0)}onDisponibiliBlur(o){o.disponibili=Math.max(o.disponibili,0),o.disponibili=Math.min(o.disponibili,100)}onDurataMinimaSoggiornoBlur(o){o.durataMinimaSoggiorno=Math.max(o.durataMinimaSoggiorno,0),o.durataMinimaSoggiorno=Math.min(o.durataMinimaSoggiorno,100)}onDurataMassimaSoggiornoBlur(o){o.durataMassimaSoggiorno=Math.max(o.durataMassimaSoggiorno,0),o.durataMassimaSoggiorno=Math.min(o.durataMassimaSoggiorno,100)}onVariazionePrezzoBlur(o){let t=this.getTariffaIndex(o,0);for(let n=t;n<t+this.tipiCamera[o].tariffe.length;n++)this.updateRequest.tariffe[n].variazionePrezzo=this.updateRequest.tipiCamera[o].variazionePrezzo}onTipoVariazionePrezzoChange(o){let t=this.getTariffaIndex(o,0);for(let n=t;n<t+this.tipiCamera[o].tariffe.length;n++)this.updateRequest.tariffe[n].tipoVariazionePrezzo=this.updateRequest.tipiCamera[o].tipoVariazionePrezzo}onPortaleChange(){this.setIsLoading(!0),this.modificaDisponibiliEnabled=this.portale.isModificaDisponibiliAttiva;let o=new d.k$g;null!=this.portale.ubicazioneIstat&&(o.filters=[new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,this.portale.ubicazioneIstat.oid.toString(),c.NM.Number)]),o.sorting=[new d.aQR("ordinamento",c.nI.Asc)],this.apiService.getFasceFilter(o).subscribe(t=>{this.fasce=t.data,this.loadEvents()})}save(){this.setIsLoading(!0),this.apiService.updateAllDisponibilita(this.updateRequest).subscribe(()=>{this.setIsLoading(!1),this.showInfo("globals.operazioneCompletata").then(()=>{this.loadEvents()})})}apriChiudiPeriodo(){let o=new d.Zpt;o.width="90vw",o.disableClose=!0;let t=this.showModalDialog(Jl,o),n=t.componentInstance;n.dalDate=this.getDate(this.calendar.weeks[0][0].mDate),n.alDate=this.getDate(this.calendar.weeks[this.calendar.weeks.length-1][this.calendar.weeks[this.calendar.weeks.length-1].length-1].mDate),n.portale=this.portale,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.loadEvents()})}getTariffaIndex(o,t){let n=0;for(let a=0;a<o;a++)n+=this.tipiCamera[a].tariffe.length;return n+t}aggiornaDisponibilita(){let o=new d.Zpt;o.width="100vw",o.maxHeight="100vh",o.disableClose=!0,o.panelClass="grey-background-dialog";let t=this.showModalDialog(kt,o),n=t.componentInstance;n.dalDate=this.selectedDate,n.alDate=this.selectedDate,n.portale=this.portale,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&this.loadEvents()})}ngOnDestroy(){this.resetSelectedDateSubject.complete()}}function Vge(i,o){1&i&&e._UZ(0,"app-disponibilita-mobile")}function Xge(i,o){1&i&&e._UZ(0,"app-elenco-disponibilita")}El.\u0275fac=function(o){return new(o||El)(e.Y36(A.s),e.Y36(j.m),e.Y36(te.J))},El.\u0275cmp=e.Xpm({type:El,selectors:[["app-disponibilita-mobile"]],viewQuery:function(o,t){if(1&o&&(e.Gf(Oge,7),e.Gf(Lge,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.calendar=n.first),e.iGM(n=e.CRH())&&(t.camereContainer=n.first)}},features:[e.qOj],decls:7,vars:14,consts:[[1,"p-2"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[3,"currentDate","eventsDataSource","isChangeMonth","isAutoWidth","isShowDatesOutOfMonth","isSelectDate","resetSelectedDateSubject","onSelectDate","onMonthChanged"],["calendar",""],["mat-flat-button","","color","primary","class","mt-3 w-100 mb-1",3,"click",4,"ngIf"],[4,"ngIf"],["mat-flat-button","","color","primary",1,"mt-3","w-100","mb-1",3,"click"],["camereContainer",""],["class","border rounded-lg mat-elevation-z1 p-4 mt-3 bg-white",4,"ngIf"],[1,"font-weight-bold","pt-3","text-center"],[1,"dispo-container"],["class","mt-3 border rounded-xl p-3 bg-white",4,"ngFor","ngForOf"],[1,"w-100","text-right","pt-2","pr-3","pl-3","save-container","border-top"],["mat-flat-button","","color","blank","class","mr-2",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"mt-3","border","rounded-xl","p-3","bg-white"],[1,"font-weight-bold","d-inline-block"],["color","primary",1,"float-right",3,"checked","disabled","change"],[1,"w-100","mt-3"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","disabled","ngModelChange","blur"],[1,"row"],[1,"col-6"],[1,"w-100"],[3,"placeholder","ngModel","ngModelChange"],["selectSearch",""],[3,"value"],[3,"value","hidden",4,"ngFor","ngForOf"],["class","col-6",4,"ngIf"],[3,"value","hidden"],[1,"prezzo-input"],["autocompleteOff","","type","number","matInput","",3,"ngModel","placeholder","ngModelChange","blur"],[1,"tipoValore-input","text-right"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-0"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"font-weight-bold"],[1,"row","mt-3"],[1,"col"],["autocompleteOff","","type","number","matInput","",3,"placeholder","disabled","ngModel","ngModelChange","blur"],["class","col",4,"ngIf"],["mat-flat-button","","color","blank",1,"mr-2",3,"click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","mt-3","bg-white"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"app-view-select",1),e.NdJ("valueChange",function(a){return t.portale=a})("valueChange",function(){return t.onPortaleChange()}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-calendar",2,3),e.NdJ("onSelectDate",function(a){return t.onSelectDate(a)})("onMonthChanged",function(){return t.loadEvents()}),e.qZA(),e.YNc(5,Dge,3,3,"button",4),e.YNc(6,Bge,4,2,"div",5),e.qZA()),2&o&&(e.xp6(1),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(t.getPortaliRQ,!1))("value",t.portale)("placeholder",e.lcZ(2,12,"globals.portale")),e.xp6(2),e.Q6J("currentDate",t.date)("eventsDataSource",t.eventsDataSource)("isChangeMonth",!0)("isAutoWidth",!0)("isShowDatesOutOfMonth",!0)("isSelectDate",!0)("resetSelectedDateSubject",t.resetSelectedDateSubject),e.xp6(2),e.Q6J("ngIf",t.modificaStatoPortaleEnabled),e.xp6(1),e.Q6J("ngIf",!!t.selectedDate))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,Mc.iZ,_.Fj,_.wV,_.JJ,_.On,X,ne.d,R,m.rS,Te.A,K.H,z.X$],styles:[".prezzo-input[_ngcontent-%COMP%]{width:calc(100% - 50px)}.tipoValore-input[_ngcontent-%COMP%]{width:50px}.save-container[_ngcontent-%COMP%]{position:fixed;bottom:60px;right:0;background-color:#eee;z-index:1}.dispo-container[_ngcontent-%COMP%]{margin-bottom:70px}"]});class Nl{constructor(o){this.containerService=o}}function jge(i,o){if(1&i&&(e.TgZ(0,"mat-option",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Wge(i,o){1&i&&(e.TgZ(0,"div",39)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.messaggi.nessunMessaggio")))}function e1e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.clienteMessaggi.proprieta.data")))}function t1e(i,o){1&i&&(e.TgZ(0,"span",42),e._uU(1,"email"),e.qZA())}function i1e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,t1e,2,0,"span",41),e._uU(2),e.ALo(3,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null==t.dataVisualizzazione),e.xp6(1),e.hij(" ",e.xi3(3,2,t.data,"dd/MM/yyyy")," ")}}function o1e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.preventivo.proprieta.nominativo")))}function n1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.preventivo.cliente?t.preventivo.cliente.ragioneSociale:""," ")}}function a1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.prenotazione.cliente?t.prenotazione.cliente.ragioneSociale:""," ")}}function l1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.transazione.cliente?t.transazione.cliente.ragioneSociale:""," ")}}function r1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.cliente.ragioneSociale," ")}}function c1e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",43),e.YNc(1,n1e,2,1,"ng-container",44),e.YNc(2,a1e,2,1,"ng-container",44),e.YNc(3,l1e,2,1,"ng-container",44),e.YNc(4,r1e,2,1,"ng-container",44),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngSwitch",null!=t.preventivo?0:null!=t.prenotazione?1:null!=t.transazione?2:null!=t.cliente?3:4),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}function s1e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.clienteMessaggi.proprieta.messaggio"),""))}function p1e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.messaggio,t.parametri))}}function d1e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.messaggi.rif")))}function m1e(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"a",47),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.preventDefault(),e.KtG(r.openPreventivo(l.preventivo.oid))}),e._uU(6),e.qZA()(),e.TgZ(7,"div",4),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div",4),e._uU(11),e.ALo(12,"date"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,4,"sbm.messaggi.preventivoN")," "),e.xp6(3),e.hij(" ",t.preventivo.codicePreventivo," "),e.xp6(2),e.hij(" ",e.xi3(9,6,t.preventivo.arrivo,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(12,9,t.preventivo.partenza,"dd/MM/yyyy")," ")}}function _1e(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"a",47),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return a.preventDefault(),e.KtG(r.openPrenotazione(l.prenotazione.oid))}),e._uU(6),e.qZA()(),e.TgZ(7,"div",4),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div",4),e._uU(11),e.ALo(12,"date"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,4,"sbm.messaggi.prenotazioneN")," "),e.xp6(3),e.hij(" ",t.prenotazione.codicePrenotazione?t.prenotazione.codicePrenotazione:t.prenotazione.codiceOTA," "),e.xp6(2),e.hij(" ",e.xi3(9,6,t.prenotazione.arrivo,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(12,9,t.prenotazione.partenza,"dd/MM/yyyy")," ")}}function u1e(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",4)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",4),e._uU(6),e.ALo(7,"date"),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,2,"sbm.messaggi.transazioneN")+t.transazione.oid," "),e.xp6(3),e.hij(" ",e.xi3(7,4,t.transazione.data,"dd/MM/yyyy")," ")}}function g1e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",45),e.YNc(1,m1e,13,12,"ng-container",46),e.YNc(2,_1e,13,12,"ng-container",46),e.YNc(3,u1e,8,7,"ng-container",46),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.preventivo),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazione),e.xp6(1),e.Q6J("ngIf",null!=t.transazione)}}function h1e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.clienteMessaggi.proprieta.pagina")))}function f1e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(null!=t.pagina?e.lcZ(2,1,n.getEnumKeyTranslation(n.enumPaginaMessaggioCliente,t.pagina,"paginaMessaggioCliente")):"")}}function C1e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.ubicazioneIstat")))}function b1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.preventivo.portaleXAlbergo&&null!=t.preventivo.portaleXAlbergo.ubicazioneIstat?t.preventivo.portaleXAlbergo.ubicazioneIstat.nome:""," ")}}function v1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.prenotazione.portaleXAlbergo&&null!=t.prenotazione.portaleXAlbergo.ubicazioneIstat?t.prenotazione.portaleXAlbergo.ubicazioneIstat.nome:""," ")}}function T1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.transazione.prenotazione&&null!=t.transazione.prenotazione.portaleXAlbergo&&null!=t.transazione.prenotazione.portaleXAlbergo.ubicazioneIstat?t.transazione.prenotazione.portaleXAlbergo.ubicazioneIstat.nome:""," ")}}function x1e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",43),e.YNc(1,b1e,2,1,"ng-container",44),e.YNc(2,v1e,2,1,"ng-container",44),e.YNc(3,T1e,2,1,"ng-container",44),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngSwitch",null!=t.preventivo?0:null!=t.prenotazione?1:null!=t.transazione?2:3),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2)}}function Z1e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function A1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",48)(1,"button",49,50),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(3,"i",51),e._uU(4,"more_vert"),e.qZA()(),e.TgZ(5,"mat-menu",null,52)(7,"button",53),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.MAs(2),T=e.oxw();return a.stopPropagation(),T.delete(r.oid),e.KtG(p.closeMenu())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",53),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.MAs(2),T=e.oxw();return a.stopPropagation(),null==r.dataVisualizzazione?T.impostaLetto(r.oid):T.impostaDaLeggere(r.oid),e.KtG(p.closeMenu())}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",53),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.MAs(2),T=e.oxw();return a.stopPropagation(),T.replyToMessage(r),e.KtG(p.closeMenu())}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.MAs(6);e.xp6(1),e.Q6J("matMenuTriggerFor",n),e.xp6(7),e.Oqu(e.lcZ(9,4,"sbm.messaggi.elimina")),e.xp6(3),e.Oqu(e.lcZ(12,6,null==t.dataVisualizzazione?"sbm.messaggi.impostaLetto":"sbm.messaggi.impostaDaLeggere")),e.xp6(3),e.Oqu(e.lcZ(15,8,"sbm.messaggi.rispondi"))}}function w1e(i,o){1&i&&e._UZ(0,"mat-header-row",54)}function z1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",55),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Nl.\u0275fac=function(o){return new(o||Nl)(e.Y36(te.J))},Nl.\u0275cmp=e.Xpm({type:Nl,selectors:[["app-disponibilita-mobile-desktop"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(o,t){1&o&&(e.YNc(0,Vge,1,0,"app-disponibilita-mobile",0),e.YNc(1,Xge,1,0,"app-elenco-disponibilita",0)),2&o&&(e.Q6J("ngIf",1==t.containerService.isMobile),e.xp6(1),e.Q6J("ngIf",0==t.containerService.isMobile))},dependencies:[m.O5,yl,El]});class Ol extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.navigationService=a,this.utility=l,this.displayedColumns=["data","cliente","messaggio","rif","pagina","ubicazioneIstat","details"],this.rq=new d.rlN,this.pageSize=25,this.search=!1,this.enumPaginaMessaggioCliente=c.U0}ngOnInit(){this.headerService.setTitle("sbm.messaggi.title"),this.rq.skip=0,this.rq.take=this.pageSize,this.sorting=new d.aQR("data",c.nI.Desc),this.filters=[],this.filters.push(new d.wn$(["preventivo.cliente.cognome","prenotazione.cliente.cognome","transazione.cliente.cognome","cliente.cognome"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$(["preventivo.cliente.email","prenotazione.cliente.email","transazione.cliente.email","cliente.email"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("preventivo.codicePreventivo",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$(["prenotazione.codicePrenotazione","prenotazione.codiceOTA"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("dataVisualizzazione",c.Hp.IsNull,null,null,!0)),this.filters.push(new d.wn$("pagina",c.Hp.Equal,"",c.NM.Number))}ngAfterViewInit(){this.download()}ngOnDestroy(){this.headerService.clearTitle()}onSortChange(o){this.sorting.field=o.active,this.sorting.type="asc"==o.direction?c.nI.Asc:c.nI.Desc,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onPageChange(){this.rq.skip=this.paginator.pageSize*this.paginator.pageIndex,this.rq.take=this.paginator.pageSize,this.paginator.pageSize!=this.pageSize?(this.pageSize=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}download(){this.search||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[this.sorting],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getMessaggiFilter(this.rq).subscribe(o=>{this.data=o.data,this.totalRecords=o.totalRecords,this.search?this.search=!1:this.setIsLoading(!1)})}onSearch(o,t,n,a=!1){null!=t?(this.search=!a,this.filters[o].value=t):this.filters[o].active=n,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}onUbicazioneIstatChange(o){this.search=!1,this.rq.oidUbicazioneIstat=o,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()}delete(o){this.showDialogConfirm("sbm.messaggi.eliminareMessaggio").then(t=>{this.setIsLoading(!0),this.apiService.eliminaMessaggio(o).subscribe(()=>{this.navigationService.refreshContatoriMenu(),this.download()})},t=>{})}impostaLetto(o){this.showDialogConfirm("sbm.messaggi.impostareLetto").then(t=>{this.setIsLoading(!0),this.apiService.impostaLettoMessaggio(o).subscribe(()=>{this.navigationService.refreshContatoriMenu(),this.download()})},t=>{})}impostaDaLeggere(o){this.showDialogConfirm("sbm.messaggi.impostareDaLeggere").then(t=>{this.setIsLoading(!0),this.apiService.impostaDaLeggereMessaggio(o).subscribe(()=>{this.navigationService.refreshContatoriMenu(),this.download()})},t=>{})}openPreventivo(o){this.utility.openUrlInNewTab("/sbm/home/(homeOutlet:preventivi)?oidPreventivo="+o)}openPrenotazione(o){this.utility.openUrlInNewTab("/sbm/home/(homeOutlet:prenotazioni)?oidPrenotazione="+o)}replyToMessage(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Zt,t),a=n.componentInstance;a.oidMessaggio=o.oid,a.preventivo=o.preventivo,a.prenotazione=o.prenotazione,a.transazione=o.transazione,a.cliente=o.cliente,a.dialogRef=n,n.afterClosed().subscribe(l=>{l&&this.download()})}}function M1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"input",10,11),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(3),l=e.oxw(2);return e.KtG(l.onSearch(1,a.value))}),e.ALo(4,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.s9C("placeholder",e.lcZ(4,2,"bo.cliente.proprieta.email")),e.Q6J("value",t.filters[1].value)}}function q1e(i,o){1&i&&(e.TgZ(0,"div",12)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.messaggi.nessunMessaggio")))}function P1e(i,o){1&i&&(e.TgZ(0,"span",23),e._uU(1,"email"),e.qZA())}function k1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.preventivo.cliente?t.preventivo.cliente.ragioneSociale:""," ")}}function S1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.prenotazione.cliente?t.prenotazione.cliente.ragioneSociale:""," ")}}function y1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.transazione.cliente?t.transazione.cliente.ragioneSociale:""," ")}}function J1e(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.cliente.ragioneSociale," ")}}Ol.\u0275fac=function(o){return new(o||Ol)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(Ae.f),e.Y36(C.t))},Ol.\u0275cmp=e.Xpm({type:Ol,selectors:[["app-messaggi"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:68,vars:41,consts:[[1,"container-fluid","p-3"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["cognomeSearch",""],["emailSearch",""],["codicePreventivoSearch",""],["codicePrenotazioneSearch",""],[3,"placeholder","value","selectionChange"],["paginaSelect",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"col-3","pt-4"],["color","primary",3,"checked","change"],["class","border rounded-lg mat-elevation-z1 p-4 mt-3 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container","mt-3"],["matSort","","matSortActive","data","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","cliente"],[4,"matHeaderCellDef"],[3,"ngSwitch",4,"matCellDef"],["matColumnDef","messaggio"],["matColumnDef","rif"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","pagina"],["matColumnDef","ubicazioneIstat"],["matColumnDef","details"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","mt-3","bg-white"],["mat-sort-header",""],["class","material-icons color-pink mr-2",4,"ngIf"],[1,"material-icons","color-pink","mr-2"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"flex-wrap"],[4,"ngIf"],[1,"font-weight-bold","d-inline","color-pink",3,"click"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor","click"],["menuTrigger","matMenuTrigger"],[1,"material-icons","mat-table-edit-row"],["appMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"input",5,6),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(6);return e.KtG(t.onSearch(0,l.value))}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"input",5,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(11);return e.KtG(t.onSearch(1,l.value))}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",3)(14,"mat-form-field",4)(15,"input",5,8),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(16);return e.KtG(t.onSearch(2,l.value))}),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",3)(19,"mat-form-field",4)(20,"input",5,9),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(21);return e.KtG(t.onSearch(3,l.value))}),e.ALo(22,"translate"),e.qZA()()()(),e.TgZ(23,"div",2)(24,"div",3)(25,"mat-form-field",4)(26,"mat-select",10,11),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(27);return e.KtG(t.onSearch(5,l.value,null,!0))}),e.ALo(28,"translate"),e._UZ(29,"mat-option",12),e.YNc(30,jge,3,4,"mat-option",13),e.ALo(31,"selectEnum"),e.qZA()()(),e.TgZ(32,"div",3)(33,"app-view-select",14),e.NdJ("valueChange",function(l){return t.onUbicazioneIstatChange(l.oid)}),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",15)(36,"mat-checkbox",16),e.NdJ("change",function(l){return t.onSearch(4,null,l.checked)}),e._uU(37),e.ALo(38,"translate"),e.qZA()()()(),e.YNc(39,Wge,4,3,"div",17),e.TgZ(40,"div",18)(41,"div",19)(42,"mat-table",20),e.NdJ("matSortChange",function(l){return t.onSortChange(l)}),e.ynx(43,21),e.YNc(44,e1e,3,3,"mat-header-cell",22),e.YNc(45,i1e,4,5,"mat-cell",23),e.BQk(),e.ynx(46,24),e.YNc(47,o1e,3,3,"mat-header-cell",25),e.YNc(48,c1e,5,5,"mat-cell",26),e.BQk(),e.ynx(49,27),e.YNc(50,s1e,3,3,"mat-header-cell",22),e.YNc(51,p1e,3,4,"mat-cell",23),e.BQk(),e.ynx(52,28),e.YNc(53,d1e,3,3,"mat-header-cell",25),e.YNc(54,g1e,4,3,"mat-cell",29),e.BQk(),e.ynx(55,30),e.YNc(56,h1e,3,3,"mat-header-cell",22),e.YNc(57,f1e,3,3,"mat-cell",23),e.BQk(),e.ynx(58,31),e.YNc(59,C1e,3,3,"mat-header-cell",25),e.YNc(60,x1e,4,4,"mat-cell",26),e.BQk(),e.ynx(61,32),e.YNc(62,Z1e,1,0,"mat-header-cell",25),e.YNc(63,A1e,16,10,"mat-cell",33),e.BQk(),e.YNc(64,w1e,1,0,"mat-header-row",34),e.YNc(65,z1e,1,1,"mat-row",35),e.qZA()(),e.TgZ(66,"div",36)(67,"mat-paginator",37),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()()}2&o&&(e.xp6(5),e.Q6J("placeholder",e.lcZ(7,24,"bo.cliente.proprieta.cognome"))("value",t.filters[0].value),e.xp6(5),e.Q6J("placeholder",e.lcZ(12,26,"bo.cliente.proprieta.email"))("value",t.filters[1].value),e.xp6(5),e.Q6J("placeholder",e.lcZ(17,28,"bo.preventivo.proprieta.codicePreventivo"))("value",t.filters[2].value),e.xp6(5),e.Q6J("placeholder",e.lcZ(22,30,"bo.prenotazione.proprieta.codicePrenotazione"))("value",t.filters[3].value),e.xp6(6),e.Q6J("placeholder",e.lcZ(28,32,"bo.clienteMessaggi.proprieta.pagina"))("value",t.filters[5].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(31,34,t.enumPaginaMessaggioCliente,"paginaMessaggioCliente")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("placeholder",e.lcZ(34,37,"globals.ubicazioneIstat")),e.xp6(3),e.Q6J("checked",t.filters[4].active),e.xp6(1),e.hij(" ",e.lcZ(38,39,"sbm.messaggi.daLeggere")," "),e.xp6(2),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.data),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.totalRecords))},dependencies:[m.sg,m.O5,m.RF,m.n9,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,Ie.W0,Ie.tN,Ie.D8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,ne.d,m.uU,Te.A,z.X$]});const E1e=function(i){return{"mt-3":i}};function N1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return r.messaggioSelected=l,e.KtG(r.previousScroll=r.containerService.container.scrollTop)}),e.TgZ(1,"div",16)(2,"div",17),e.YNc(3,P1e,2,0,"span",18),e.TgZ(4,"span",19),e._uU(5),e.ALo(6,"date"),e.qZA()(),e.TgZ(7,"div",20),e.YNc(8,k1e,2,1,"ng-container",21),e.YNc(9,S1e,2,1,"ng-container",21),e.YNc(10,y1e,2,1,"ng-container",21),e.YNc(11,J1e,2,1,"ng-container",21),e.qZA()(),e.TgZ(12,"div",22),e._uU(13),e.ALo(14,"translate"),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index;e.Q6J("ngClass",e.VKq(15,E1e,n>0)),e.xp6(3),e.Q6J("ngIf",null==t.dataVisualizzazione),e.xp6(2),e.Oqu(e.xi3(6,9,t.data,"dd/MM/yyyy")),e.xp6(2),e.Q6J("ngSwitch",null!=t.preventivo?0:null!=t.prenotazione?1:null!=t.transazione?2:null!=t.cliente?3:4),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(2),e.hij(" ",e.xi3(14,12,t.messaggio,t.parametri)," ")}}function O1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadData())}),e.TgZ(1,"mat-icon",25),e._uU(2,"keyboard_arrow_down"),e.qZA(),e.TgZ(3,"span",25),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"globals.altriRisultati")))}function L1e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,N1e,15,17,"div",13),e.YNc(2,O1e,6,3,"button",14),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.messaggi),e.xp6(1),e.Q6J("ngIf",t.rq.take*(t.pageIndex+1)<t.totalRecords)}}function D1e(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"h4",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.filtersVisible=!a.filtersVisible)}),e.TgZ(5,"i",5),e._uU(6,"search"),e.qZA()(),e.YNc(7,M1e,5,4,"div",6),e.YNc(8,q1e,4,3,"div",7),e.YNc(9,L1e,3,2,"ng-container",1),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"sbm.messaggi.title")," "),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.filtersVisible),e.xp6(1),e.Q6J("ngIf",null!=t.messaggi&&0==t.messaggi.length),e.xp6(1),e.Q6J("ngIf",null!=t.messaggi&&t.messaggi.length>0)}}function I1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-messaggio-send",26),e.NdJ("back",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onBack(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("oidMessaggio",t.messaggioSelected.oid)("preventivo",t.messaggioSelected.preventivo)("prenotazione",t.messaggioSelected.prenotazione)("transazione",t.messaggioSelected.transazione)("cliente",t.messaggioSelected.cliente)}}class Ll extends f.H{constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.rq=new d.rlN,this.pageIndex=0,this.filters=[],this.filtersVisible=!1}ngOnInit(){this.containerService.scrollToTop(),this.rq.skip=0,this.rq.take=10,this.filters.push(new d.wn$("dataVisualizzazione",c.Hp.IsNull,null,null,!0)),this.filters.push(new d.wn$(["preventivo.cliente.email","prenotazione.cliente.email","transazione.cliente.email","cliente.email"],c.Hp.Contains,"",c.NM.String)),this.download()}loadData(){this.pageIndex++,this.rq.skip=this.rq.take*this.pageIndex,this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[new d.aQR("data",c.nI.Desc)],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getMessaggiFilter(this.rq).subscribe(t=>{0==this.pageIndex?this.messaggi=t.data:this.messaggi=this.messaggi.concat(t.data),this.totalRecords=t.totalRecords,o||this.setIsLoading(!1)})}onSearch(o,t){this.filters[o].value=t,this.pageIndex=0,this.rq.skip=0,this.download(!0)}onBack(o){this.messaggioSelected=null,setTimeout(()=>{this.containerService.container.scrollTop=this.previousScroll},0),o&&this.download()}}function Q1e(i,o){1&i&&e._UZ(0,"app-messaggi-mobile")}function U1e(i,o){1&i&&e._UZ(0,"app-messaggi")}Ll.\u0275fac=function(o){return new(o||Ll)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},Ll.\u0275cmp=e.Xpm({type:Ll,selectors:[["app-messaggi-mobile"]],features:[e.qOj],decls:3,vars:2,consts:[[1,"p-2"],[4,"ngIf"],[3,"oidMessaggio","preventivo","prenotazione","transazione","cliente","back",4,"ngIf"],[1,"mb-4","d-inline-block"],["mat-icon-button","","color","primary",1,"float-right","mt-n1",3,"disableRipple","click"],[1,"material-icons"],["class","border rounded mat-elevation-z1 pr-3 pl-3 pt-2 mb-3 bg-white",4,"ngIf"],["class","border rounded mat-elevation-z1 p-3 bg-white",4,"ngIf"],[1,"border","rounded","mat-elevation-z1","pr-3","pl-3","pt-2","mb-3","bg-white"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["emailSearch",""],[1,"border","rounded","mat-elevation-z1","p-3","bg-white"],["class","border rounded-xl mat-elevation-z1 overflow-hidden pr-3 pl-3 pb-3 cursor-pointer bg-white",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","blank","class","mt-4",3,"click",4,"ngIf"],[1,"border","rounded-xl","mat-elevation-z1","overflow-hidden","pr-3","pl-3","pb-3","cursor-pointer","bg-white",3,"ngClass","click"],[1,"row","ml-n3","mr-n3","pt-2","pb-2","background-color-pink"],[1,"col-6"],["class","material-icons mr-2 align-middle",4,"ngIf"],[1,"align-middle"],[1,"col-6",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"mt-3"],[1,"material-icons","mr-2","align-middle"],["mat-flat-button","","color","blank",1,"mt-4",3,"click"],[1,"d-inline-block","align-middle"],[3,"oidMessaggio","preventivo","prenotazione","transazione","cliente","back"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,D1e,10,7,"ng-container",1),e.YNc(2,I1e,1,5,"app-messaggio-send",2),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",null==t.messaggioSelected),e.xp6(1),e.Q6J("ngIf",null!=t.messaggioSelected))},dependencies:[m.mk,m.sg,m.O5,m.RF,m.n9,w.X,h.eB,M.v_,b.k0,Ue.Hw,Wt,m.uU,z.X$]});class Dl{constructor(o){this.containerService=o}}Dl.\u0275fac=function(o){return new(o||Dl)(e.Y36(te.J))},Dl.\u0275cmp=e.Xpm({type:Dl,selectors:[["app-messaggi-mobile-desktop"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(o,t){1&o&&(e.YNc(0,Q1e,1,0,"app-messaggi-mobile",0),e.YNc(1,U1e,1,0,"app-messaggi",0)),2&o&&(e.Q6J("ngIf",1==t.containerService.isMobile),e.xp6(1),e.Q6J("ngIf",0==t.containerService.isMobile))},dependencies:[m.O5,Ol,Ll]});class Il extends f.H{constructor(o){super(),this.apiService=o,this.back=new e.vpe,this.enumStatoPrenotazioneWelcome=c.Kg}sendEmailPrenotazione(){let o=new d.Zpt;o.width="90vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;n.tipoTemplate=c.hQ.Prenotazione,n.prenotazione=this.prenotazione,n.dialogRef=t}save(){this.setIsLoading(!0),this.apiService.setPrenotazione(this.prenotazione).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.prenotazioni.prenotazioneSalvata")})}getSaldo(){return this.prenotazione.importo-this.prenotazione.sconto-this.prenotazione.scontoVoucher-this.prenotazione.caparra}}function Y1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"mat-form-field",11)(4,"input",12,13),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(5),l=e.oxw(2);return e.KtG(l.onSearch(1,a.value))}),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",10)(8,"mat-form-field",11)(9,"input",12,14),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(10),l=e.oxw(2);return e.KtG(l.onSearch(2,a.value))}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",10)(13,"mat-form-field",11)(14,"input",12,15),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(15),l=e.oxw(2);return e.KtG(l.onSearch(3,a.value))}),e.ALo(16,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw(2);e.xp6(4),e.s9C("placeholder",e.lcZ(6,6,"bo.prenotazione.proprieta.codicePrenotazione")),e.Q6J("value",t.filters[1].value),e.xp6(5),e.s9C("placeholder",e.lcZ(11,8,"bo.cliente.proprieta.cognome")),e.Q6J("value",t.filters[2].value),e.xp6(5),e.s9C("placeholder",e.lcZ(16,10,"bo.cliente.proprieta.email")),e.Q6J("value",t.filters[3].value)}}function R1e(i,o){1&i&&(e.TgZ(0,"div",16)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.prenotazioni.nessunaPrenotazione")))}function F1e(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.prenotazioni.cancellata")))}function H1e(i,o){if(1&i&&(e.TgZ(0,"div",21)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",28),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.cliente.ragioneSociale),e.xp6(2),e.Oqu(t.cliente.email)}}Il.\u0275fac=function(o){return new(o||Il)(e.Y36(A.s))},Il.\u0275cmp=e.Xpm({type:Il,selectors:[["app-prenotazioni-mobile-edit"]],inputs:{prenotazione:"prenotazione"},outputs:{back:"back"},features:[e.qOj],decls:86,vars:86,consts:[[1,"font-weight-bold"],[1,"border","mat-elevation-z1","rounded","p-3","mt-4","bg-white"],[1,"w-100","note-textarea",3,"floatLabel"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5",3,"placeholder","ngModel","ngModelChange"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"w-100","mb-1",3,"click"],["mat-flat-button","","color","primary",1,"w-100","mb-1",3,"disabled","click"],["mat-flat-button","","color","blank",1,"w-100",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"h5"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div")(5,"span",0),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div")(11,"span",0),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"div")(17,"span",0),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._uU(20),e.qZA(),e.TgZ(21,"div")(22,"span",0),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._uU(25),e.qZA(),e.TgZ(26,"div")(27,"span",0),e._uU(28),e.ALo(29,"translate"),e.qZA(),e._uU(30),e.qZA(),e.TgZ(31,"div")(32,"span",0),e._uU(33),e.ALo(34,"translate"),e.qZA(),e._uU(35),e.qZA(),e.TgZ(36,"div")(37,"span",0),e._uU(38),e.ALo(39,"translate"),e.qZA(),e._uU(40),e.ALo(41,"eurCurrency"),e.qZA(),e.TgZ(42,"div")(43,"span",0),e._uU(44),e.ALo(45,"translate"),e.qZA(),e._uU(46),e.ALo(47,"eurCurrency"),e.qZA(),e.TgZ(48,"div")(49,"span",0),e._uU(50),e.ALo(51,"translate"),e.qZA(),e._uU(52),e.ALo(53,"eurCurrency"),e.qZA(),e.TgZ(54,"div")(55,"span",0),e._uU(56),e.ALo(57,"translate"),e.qZA(),e._uU(58),e.ALo(59,"eurCurrency"),e.qZA(),e.TgZ(60,"div")(61,"span",0),e._uU(62),e.ALo(63,"translate"),e.qZA(),e._uU(64),e.ALo(65,"eurCurrency"),e.qZA(),e.TgZ(66,"div")(67,"span",0),e._uU(68),e.ALo(69,"translate"),e.qZA(),e._uU(70),e.ALo(71,"eurCurrency"),e.qZA(),e.TgZ(72,"div",1)(73,"mat-form-field",2)(74,"textarea",3),e.NdJ("ngModelChange",function(a){return t.prenotazione.noteP=a}),e.ALo(75,"translate"),e.qZA()()(),e.TgZ(76,"div",4)(77,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"button",6),e.NdJ("click",function(){return t.sendEmailPrenotazione()}),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"button",7),e.NdJ("click",function(){return t.back.emit()}),e._uU(84),e.ALo(85,"translate"),e.qZA()()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,32,"sbm.prenotazioni.prenotazioneN")+(t.prenotazione.codicePrenotazione?t.prenotazione.codicePrenotazione:t.prenotazione.codiceOTA)+(null!=t.prenotazione.statoPrenotazioneWelcome?" - "+e.lcZ(3,34,t.getEnumKeyTranslation(t.enumStatoPrenotazioneWelcome,t.prenotazione.statoPrenotazioneWelcome,"statoPrenotazioneWelcome")):t.prenotazione.statoPrenotazionePortale?" - "+t.prenotazione.statoPrenotazionePortale:"")),e.xp6(5),e.Oqu(e.lcZ(7,36,"bo.prenotazione.proprieta.arrivo")+": "),e.xp6(2),e.hij(" ",t.prenotazione.arrivo?e.xi3(9,38,t.prenotazione.arrivo,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(13,41,"bo.prenotazione.proprieta.partenza")+": "),e.xp6(2),e.hij(" ",t.prenotazione.partenza?e.xi3(15,43,t.prenotazione.partenza,"dd/MM/yyyy"):"---",""),e.xp6(4),e.Oqu(e.lcZ(19,46,"bo.prenotazione.proprieta.pax")+": "),e.xp6(2),e.hij(" ",t.prenotazione.pax?t.prenotazione.pax:"---",""),e.xp6(3),e.Oqu(e.lcZ(24,48,"bo.prenotazione.proprieta.tipoCameraOTA")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.tipoCameraOTA?t.prenotazione.tipoCameraOTA.descrizione?t.prenotazione.tipoCameraOTA.descrizione:"---":null!=t.prenotazione.tipoCamera&&t.prenotazione.tipoCamera.nome?t.prenotazione.tipoCamera.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(29,50,"bo.prenotazione.proprieta.tariffaOTA")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.tariffaOTA?t.prenotazione.tariffaOTA.descrizione?t.prenotazione.tariffaOTA.descrizione:"---":null!=t.prenotazione.trattamento&&t.prenotazione.trattamento.nome?t.prenotazione.trattamento.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(34,52,"bo.prenotazione.proprieta.modalitaPagamento")+": "),e.xp6(2),e.hij(" ",null!=t.prenotazione.modalitaPagamento&&t.prenotazione.modalitaPagamento.nome?t.prenotazione.modalitaPagamento.nome:"---",""),e.xp6(3),e.Oqu(e.lcZ(39,54,"bo.prenotazione.proprieta.importo")+": "),e.xp6(2),e.hij(" ",t.prenotazione.importo?e.lcZ(41,56,t.prenotazione.importo):"---",""),e.xp6(4),e.Oqu(e.lcZ(45,58,"bo.prenotazione.proprieta.sconto")+": "),e.xp6(2),e.hij(" ",t.prenotazione.sconto?e.lcZ(47,60,t.prenotazione.sconto):"---",""),e.xp6(4),e.Oqu(e.lcZ(51,62,"bo.prenotazione.proprieta.scontoVoucher")+": "),e.xp6(2),e.hij(" ",t.prenotazione.scontoVoucher?e.lcZ(53,64,t.prenotazione.scontoVoucher):"---",""),e.xp6(4),e.Oqu(e.lcZ(57,66,"bo.prenotazione.proprieta.totale")+": "),e.xp6(2),e.hij(" ",e.lcZ(59,68,t.prenotazione.importo-t.prenotazione.sconto-t.prenotazione.scontoVoucher),""),e.xp6(4),e.Oqu(e.lcZ(63,70,"bo.prenotazione.proprieta.caparra")+": "),e.xp6(2),e.hij(" ",t.prenotazione.caparra?e.lcZ(65,72,t.prenotazione.caparra):"---",""),e.xp6(4),e.Oqu(e.lcZ(69,74,"bo.prenotazione.proprieta.saldo")+": "),e.xp6(2),e.hij(" ",e.lcZ(71,76,t.getSaldo()),""),e.xp6(3),e.Q6J("floatLabel","always"),e.xp6(1),e.Q6J("placeholder",e.lcZ(75,78,"bo.prenotazione.proprieta.noteP"))("ngModel",t.prenotazione.noteP),e.xp6(4),e.Oqu(e.lcZ(79,80,"globals.salva")),e.xp6(2),e.Q6J("disabled",null==t.prenotazione.cliente||!t.prenotazione.cliente.email),e.xp6(1),e.Oqu(e.lcZ(82,82,"sbm.prenotazioni.inviaEmail")),e.xp6(3),e.Oqu(e.lcZ(85,84,"globals.indietro")))},dependencies:[h.eB,it.IC,M.v_,b.k0,_.Fj,_.JJ,_.On,m.uU,ke.f,z.X$],styles:["textarea.mat-input-element[_ngcontent-%COMP%]{margin:0;padding:0}  .note-textarea .mat-form-field-underline{visibility:hidden!important}  .note-textarea .mat-form-field-wrapper{padding-bottom:0!important}"]});const K1e=function(i){return{"mt-3":i}};function G1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return r.prenotazioneSelected=l,e.KtG(r.previousScroll=r.containerService.container.scrollTop)}),e.TgZ(1,"div",20)(2,"div",21),e._uU(3),e.ALo(4,"translate"),e.YNc(5,F1e,3,3,"span",1),e.qZA(),e.TgZ(6,"div",21),e._uU(7),e.qZA()(),e.TgZ(8,"div",22)(9,"div",23),e._uU(10),e.ALo(11,"date"),e.qZA(),e.YNc(12,H1e,5,2,"div",24),e.qZA(),e.TgZ(13,"div",22)(14,"div",25),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",25),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",9)(21,"div",21),e._uU(22),e.ALo(23,"date"),e.qZA(),e.TgZ(24,"div",21),e._uU(25),e.ALo(26,"date"),e.qZA()(),e.TgZ(27,"div",26)(28,"div",25),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"div",21)(32,"span"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"span",27),e._uU(36),e.ALo(37,"eurCurrency"),e.qZA()()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.Q6J("ngClass",e.VKq(34,K1e,n>0)),e.xp6(3),e.hij(" ",null!=t.statoPrenotazioneWelcome?e.lcZ(4,13,a.getEnumKeyTranslation(a.enumStatoPrenotazioneWelcome,t.statoPrenotazioneWelcome,"statoPrenotazioneWelcome")):t.statoPrenotazionePortale," "),e.xp6(2),e.Q6J("ngIf",!t.statoPrenotazionePortale&&null==t.statoPrenotazioneWelcome&&t.isEliminata),e.xp6(2),e.hij(" ",t.codicePrenotazione?"#"+t.codicePrenotazione:"#"+t.codiceOTA," "),e.xp6(3),e.hij(" ",e.xi3(11,15,t.dataPren,"dd/MM/yyyy")," "),e.xp6(2),e.Q6J("ngIf",null!=t.cliente),e.xp6(3),e.hij(" ",e.lcZ(16,18,"sbm.prenotazioni.arr")," "),e.xp6(3),e.hij(" ",e.lcZ(19,20,"sbm.prenotazioni.part")," "),e.xp6(4),e.hij(" ",e.xi3(23,22,t.arrivo,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(26,25,t.partenza,"dd/MM/yyyy")," "),e.xp6(4),e.hij(" ",e.lcZ(30,28,a.getEnumKeyTranslation(a.enumTipoPrenotazione,t.tipoPrenotazione,"tipoPrenotazione"))," "),e.xp6(4),e.hij(" ",e.lcZ(34,30,"sbm.preventivi.tot")," "),e.xp6(3),e.hij(" ",e.lcZ(37,32,t.importo)," ")}}function $1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadData())}),e.TgZ(1,"mat-icon",30),e._uU(2,"keyboard_arrow_down"),e.qZA(),e.TgZ(3,"span",30),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"globals.altriRisultati")))}function B1e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,G1e,38,36,"div",17),e.YNc(2,$1e,6,3,"button",18),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.prenotazioni),e.xp6(1),e.Q6J("ngIf",t.rq.take*(t.pageIndex+1)<t.totalRecords)}}function V1e(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"h4",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.filtersVisible=!a.filtersVisible)}),e.TgZ(5,"i",5),e._uU(6,"search"),e.qZA()(),e.YNc(7,Y1e,17,12,"div",6),e.YNc(8,R1e,4,3,"div",7),e.YNc(9,B1e,3,2,"ng-container",1),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"sbm.prenotazioni.title")," "),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.filtersVisible),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazioni&&0==t.prenotazioni.length),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazioni&&t.prenotazioni.length>0)}}function X1e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-prenotazioni-mobile-edit",31),e.NdJ("back",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBack())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("prenotazione",t.prenotazioneSelected)}}class Ql extends f.H{constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.pageIndex=0,this.enumStatoPrenotazioneWelcome=c.Kg,this.enumTipoPrenotazione=c.DS,this.filters=[],this.filtersVisible=!1}ngOnInit(){this.containerService.scrollToTop(),this.rq=new d.k$g,this.rq.skip=0,this.rq.take=10,this.filters.push(new d.wn$("isEliminata",c.Hp.IsFalse,null,null,!0)),this.filters.push(new d.wn$(["codiceOTA","codicePrenotazione"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.cognome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.email",c.Hp.Contains,"",c.NM.String)),this.download()}loadData(){this.pageIndex++,this.rq.skip=this.rq.take*this.pageIndex,this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[new d.aQR("dataPren",c.nI.Desc)],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPrenotazioniFilter(this.rq).subscribe(t=>{0==this.pageIndex?this.prenotazioni=t.data.prenotazioni:this.prenotazioni=this.prenotazioni.concat(t.data.prenotazioni),this.totalRecords=t.totalRecords,o||this.setIsLoading(!1)})}onSearch(o,t){this.filters[o].value=t,this.pageIndex=0,this.rq.skip=0,this.download(!0)}onBack(){this.prenotazioneSelected=null,setTimeout(()=>{this.containerService.container.scrollTop=this.previousScroll},0)}}function j1e(i,o){1&i&&e._UZ(0,"app-prenotazioni-mobile")}function W1e(i,o){1&i&&e._UZ(0,"app-prenotazioni")}Ql.\u0275fac=function(o){return new(o||Ql)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},Ql.\u0275cmp=e.Xpm({type:Ql,selectors:[["app-prenotazioni-mobile"]],features:[e.qOj],decls:3,vars:2,consts:[[1,"p-2"],[4,"ngIf"],[3,"prenotazione","back",4,"ngIf"],[1,"mb-4","d-inline-block"],["mat-icon-button","","color","primary",1,"float-right","mt-n1",3,"disableRipple","click"],[1,"material-icons"],["class","border rounded mat-elevation-z1 pr-3 pl-3 pt-2 mb-3 bg-white",4,"ngIf"],["class","border rounded mat-elevation-z1 p-3 bg-white",4,"ngIf"],[1,"border","rounded","mat-elevation-z1","pr-3","pl-3","pt-2","mb-3","bg-white"],[1,"row"],[1,"col-12","col-sm-4","col-md-6"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["codicePrenotazioneSearch",""],["cognomeSearch",""],["emailSearch",""],[1,"border","rounded","mat-elevation-z1","p-3","bg-white"],["class","border rounded-xl mat-elevation-z1 overflow-hidden pr-3 pl-3 pb-3 cursor-pointer bg-white",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","blank","class","mt-4",3,"click",4,"ngIf"],[1,"border","rounded-xl","mat-elevation-z1","overflow-hidden","pr-3","pl-3","pb-3","cursor-pointer","bg-white",3,"ngClass","click"],[1,"row","ml-n3","mr-n3","pt-2","pb-2","background-color-pink"],[1,"col-6"],[1,"row","mt-3"],[1,"col-6","d-flex","align-items-center","font-weight-bold"],["class","col-6",4,"ngIf"],[1,"col-6","font-weight-bold"],[1,"row","mt-4"],[1,"ml-1","text-big","font-weight-bold"],[1,"cliente-email"],["mat-flat-button","","color","blank",1,"mt-4",3,"click"],[1,"d-inline-block","align-middle"],[3,"prenotazione","back"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,V1e,10,7,"ng-container",1),e.YNc(2,X1e,1,1,"app-prenotazioni-mobile-edit",2),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",null==t.prenotazioneSelected),e.xp6(1),e.Q6J("ngIf",null!=t.prenotazioneSelected))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,b.k0,Ue.Hw,Il,m.uU,ke.f,z.X$],styles:[".cliente-email[_ngcontent-%COMP%]{font-size:small;font-style:italic;word-wrap:break-word}.text-big[_ngcontent-%COMP%]{font-size:18px}"]});class Ul{constructor(o){this.containerService=o}}function ehe(i,o){if(1&i&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.preventivo.cliente.ragioneSociale,"\n")}}function the(i,o){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.ALo(6,"translate"),e.qZA()),2&i){const t=e.oxw(),n=t.index,a=t.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,2,"sbm.preventivi.camera")+" "+(n+1)," "),e.xp6(3),e.hij(" ",(a.numeroAdulti>0?a.numeroAdulti+" "+e.lcZ(5,4,"sbm.preventivi.adulti"):"")+(a.numeroAdulti>0&&a.numeroBambini>0?" - ":"")+(a.numeroBambini>0?a.numeroBambini+" "+e.lcZ(6,6,"sbm.preventivi.bambini"):"")," ")}}function ihe(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.preventivi.confermato")," "))}function ohe(i,o){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"date"),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"eurCurrency"),e.qZA(),e.YNc(12,ihe,3,3,"span",11)),2&i){const t=e.oxw(),n=t.index,a=t.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,5,"sbm.preventivi.proposta")+" "+(n+1)," "),e.xp6(3),e.hij(" ",a.proposta.descrizione?a.proposta.descrizione:"---"," "),e.xp6(2),e.hij(" ",e.xi3(7,7,a.proposta.arrivo,"dd/MM/yyyy")+" - "+e.xi3(8,10,a.proposta.partenza,"dd/MM/yyyy")," "),e.xp6(4),e.hij(" ",e.lcZ(11,13,a.proposta.sconto>0?a.proposta.totaleScontato:a.proposta.totale)," "),e.xp6(2),e.Q6J("ngIf",!!a.proposta.dataConferma)}}function nhe(i,o){if(1&i&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.dettagli[0].tipoCameraOTA.descrizione," ")}}function ahe(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.dettagli[0].tariffaOTA.descrizione," ")}}function lhe(i,o){if(1&i&&(e.TgZ(0,"div",38),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.dettagli[0].promozione.nome," ")}}function rhe(i,o){if(1&i&&(e.TgZ(0,"div",29)(1,"div",32),e._uU(2),e.qZA(),e.TgZ(3,"div",39),e._uU(4),e.ALo(5,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.quantita+"x "+(null!=t.articolo?t.articolo.nome:t.descrizione)," "),e.xp6(2),e.hij(" ",e.lcZ(5,2,t.totale)," ")}}function che(i,o){if(1&i&&(e.TgZ(0,"mat-tab"),e.YNc(1,ohe,13,15,"ng-template",27),e.TgZ(2,"div",30)(3,"div",31)(4,"div")(5,"div",32),e.YNc(6,nhe,2,1,"div",33),e.YNc(7,ahe,2,1,"div",11),e.YNc(8,lhe,2,1,"div",34),e.qZA(),e.TgZ(9,"div",35),e._uU(10),e.ALo(11,"eurCurrency"),e.qZA()(),e.TgZ(12,"div",36),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div"),e.YNc(16,rhe,6,4,"div",37),e.qZA()()()()),2&i){const t=o.$implicit;e.xp6(6),e.Q6J("ngIf",null!=t.dettagli[0].tipoCameraOTA),e.xp6(1),e.Q6J("ngIf",null!=t.dettagli[0].tariffaOTA),e.xp6(1),e.Q6J("ngIf",null!=t.dettagli[0].promozione),e.xp6(2),e.hij(" ",e.lcZ(11,6,t.dettagli[0].totale)," "),e.xp6(3),e.hij(" ",e.lcZ(14,8,"sbm.preventivi.supplementiExtra")," "),e.xp6(3),e.Q6J("ngForOf",t.dettagli.slice(1))}}function she(i,o){if(1&i&&(e.TgZ(0,"mat-tab"),e.YNc(1,the,7,8,"ng-template",27),e.TgZ(2,"mat-tab-group",28),e.YNc(3,che,17,10,"mat-tab",26),e.qZA()()),2&i){const t=o.$implicit;e.xp6(3),e.Q6J("ngForOf",t.proposte)}}function phe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",23),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",24)(5,"mat-tab-group",25),e.YNc(6,she,4,1,"mat-tab",26),e.qZA()(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.preventivi.camere")," "),e.xp6(4),e.Q6J("ngForOf",t.camere)}}function dhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",40)(1,"app-url",41),e.NdJ("onExtraButtonClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.utility.openUrlInNewTab(a.getUrlMyPage()+"&mode=config"))}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("placeholder",e.lcZ(2,3,"sbm.preventivi.urlMyPage"))("url",t.getUrlMyPage())("extraButtonIcon","edit")}}function mhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.prenota())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",null==t.preventivo.cliente||t.preventivo.statoPreventivo==t.enumStatoPreventivo.Prenotato||t.preventivo.statoPreventivo==t.enumStatoPreventivo.InAttesaPagamento),e.xp6(1),e.Oqu(e.lcZ(2,2,"sbm.preventivi.prenota"))}}function _he(i,o){if(1&i&&(e.TgZ(0,"button",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){e.oxw();const t=e.MAs(30);e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,"sbm.preventivi.workFlows")," ")}}function uhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.eseguiWorkFlow(l))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex),e.Q6J("appInvertColor",t.coloreHex),e.xp6(1),e.Oqu(t.descrizione)}}Ul.\u0275fac=function(o){return new(o||Ul)(e.Y36(te.J))},Ul.\u0275cmp=e.Xpm({type:Ul,selectors:[["app-prenotazioni-mobile-desktop"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(o,t){1&o&&(e.YNc(0,j1e,1,0,"app-prenotazioni-mobile",0),e.YNc(1,W1e,1,0,"app-prenotazioni",0)),2&o&&(e.Q6J("ngIf",1==t.containerService.isMobile),e.xp6(1),e.Q6J("ngIf",0==t.containerService.isMobile))},dependencies:[m.O5,At,Ql]});class Yl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.containerService=n,this.utility=a,this.back=new e.vpe,this.enumStatoPreventivo=c.N4,this.prenotaPreventivoEnabled=!0}ngOnInit(){let o=this.sessionService.getPermessiUtente();null!=o&&(this.prenotaPreventivoEnabled=!o.includes(this.getEnumKeyOriginal(c.Zr,c.Zr.PrenotazionePreventivo))),this.download(),this.containerService.scrollToTop()}download(){this.setIsLoading(!0),this.apiService.viewPreventivo(this.preventivo.oid).subscribe(o=>{this.camere=o.data.camere,this.modalitaPagamento=o.data.modalitaPagamento,this.workFlows=o.data.workFlows,this.oidModalitaPagamentoRichiestaCaparra=o.data.oidModalitaPagamentoRichiestaCaparra,this.templateRichiestaCaparra=o.data.templateRichiestaCaparra;try{for(let t of this.workFlows)t.coloreHex=Z(t.colore).hex()}catch(t){}this.setIsLoading(!1)})}prenota(){let o=new d.Zpt;o.width="90vw";let t=this.showModalDialog(hi,o),n=t.componentInstance;n.isAccettaConPagamentoImmediato=this.preventivo.isAccettaConPagamentoImmediato,n.caparra=this.preventivo.caparra,n.isCaparraPercentuale=this.preventivo.isCaparraPercentuale,n.camere=this.camere,n.modalitaPagamento=this.modalitaPagamento,n.oidModalitaPagamento=this.oidModalitaPagamentoRichiestaCaparra,n.template=this.templateRichiestaCaparra,n.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&null!=a.oidProposte&&a.oidProposte.length==this.camere.length&&(a.isPrenotazioneExtranet=!0,this.setIsLoading(!0),this.apiService.prenotaPreventivo(a).subscribe(l=>{this.setIsLoading(!1),this.showInfo("globals.messages.prenotazioneCompletata").then(()=>{this.preventivo.statoPreventivo=l.data.preventivo.statoPreventivo,this.download()})}))})}send(){let o=new d.Zpt;o.width="90vw";let t=this.showModalDialog(Qe,o),n=t.componentInstance;this.preventivo.statoPreventivo==c.N4.Accettato?n.tipoTemplate=c.hQ.PreventivoAccettato:this.preventivo.statoPreventivo==c.N4.InAttesaPagamento?n.tipoTemplate=c.hQ.PreventivoRichiestaCaparra:this.preventivo.statoPreventivo==c.N4.Prenotato?n.tipoTemplate=c.hQ.PreventivoPrenotato:n.tipoTemplate=c.hQ.Preventivo,n.preventivo=this.preventivo,n.dialogRef=t,t.afterClosed().subscribe(a=>{a&&(this.preventivo.statoPreventivo=a.statoPreventivo,this.getWorkFlows())})}eseguiWorkFlow(o){this.showDialogConfirm("sbm.preventivi.eseguireWorkFlow").then(t=>{this.setIsLoading(!0);let n=new d.Jie;n.oidWorkFlow=o.oid,n.oidPreventivo=this.preventivo.oid,this.apiService.eseguiWorkFlowPreventivo(n).subscribe(a=>{null!=a&&null!=a.data&&(this.preventivo.statoPreventivo=o.statoPreventivoFinale,this.getWorkFlows())})},t=>{})}getWorkFlows(){this.setIsLoading(!0),this.apiService.getWorkFlowsPreventivo(this.preventivo.oid).subscribe(o=>{this.workFlows=o.data;try{for(let t of this.workFlows)t.coloreHex=Z(t.colore).hex()}catch(t){}this.setIsLoading(!1)})}save(o=!1){this.setIsLoading(!0),this.apiService.getPreventivo(this.preventivo.oid).subscribe(t=>{this.preventivo.statoPreventivo!=t.data.statoPreventivo?(this.setIsLoading(!1),this.showDialogConfirm("sbm.preventivi.statoPreventivoModificato").then(n=>{this.doSave(o)},n=>this.download())):this.doSave(o)})}doSave(o){this.setIsLoading(!0),this.preventivo.dataScadenza=this.getDate(this.preventivo.dataScadenza),this.apiService.setPreventivo(this.preventivo).subscribe(()=>{this.setIsLoading(!1),o?this.utility.openUrlInNewTab(this.getUrlMyPage()+"&isHotel=true"):this.showInfo("sbm.preventivi.preventivoSalvato").then(()=>{this.back.emit()})})}getUrlMyPage(){return window.location.origin+"/booking/mypage?uid="+this.preventivo.uid}apriMyPage(){this.save(!0)}inviaMessaggio(){let o=new d.Zpt;o.width="90vw";let t=this.showModalDialog(Zt,o),n=t.componentInstance;n.preventivo=this.preventivo,n.dialogRef=t}}function ghe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"mat-form-field",11)(4,"input",12,13),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(5),l=e.oxw(2);return e.KtG(l.onSearch(2,a.value))}),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",10)(8,"mat-form-field",11)(9,"input",12,14),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(10),l=e.oxw(2);return e.KtG(l.onSearch(3,a.value))}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",10)(13,"mat-form-field",11)(14,"input",12,15),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(15),l=e.oxw(2);return e.KtG(l.onSearch(4,a.value))}),e.ALo(16,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw(2);e.xp6(4),e.s9C("placeholder",e.lcZ(6,6,"bo.preventivo.proprieta.codicePreventivo")),e.Q6J("value",t.filters[2].value),e.xp6(5),e.s9C("placeholder",e.lcZ(11,8,"bo.cliente.proprieta.cognome")),e.Q6J("value",t.filters[3].value),e.xp6(5),e.s9C("placeholder",e.lcZ(16,10,"bo.cliente.proprieta.email")),e.Q6J("value",t.filters[4].value)}}function hhe(i,o){1&i&&(e.TgZ(0,"div",16)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.preventivi.nessunPreventivo")))}function fhe(i,o){1&i&&(e.TgZ(0,"span",29),e._uU(1,"check"),e.qZA())}function Che(i,o){1&i&&(e.TgZ(0,"span")(1,"span",30),e._uU(2,"check"),e.qZA(),e.TgZ(3,"span",31),e._uU(4,"check"),e.qZA()())}function bhe(i,o){if(1&i&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" - ",t.tagCrm.nome,"")}}function vhe(i,o){if(1&i&&(e.TgZ(0,"span",37),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.Udp("background-color",t.cliente.mercato.coloreHex),e.Q6J("appInvertColor",t.cliente.mercato.coloreHex),e.xp6(1),e.hij(" ",t.cliente.mercato.descrizione," ")}}function The(i,o){if(1&i&&(e.TgZ(0,"span",37),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.Udp("background-color",t.cliente.canaleVendita.coloreHex),e.Q6J("appInvertColor",t.cliente.canaleVendita.coloreHex),e.xp6(1),e.hij(" ",t.cliente.canaleVendita.descrizione," ")}}function xhe(i,o){if(1&i&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.Udp("background-color",t.cliente.fonte.coloreHex),e.Q6J("appInvertColor",t.cliente.fonte.coloreHex),e.xp6(1),e.hij(" ",t.cliente.fonte.descrizione," ")}}function Zhe(i,o){if(1&i&&(e.TgZ(0,"div",21)(1,"div"),e._uU(2),e.YNc(3,bhe,2,1,"span",32),e.qZA(),e.TgZ(4,"div",33),e.YNc(5,vhe,2,4,"span",34),e.YNc(6,The,2,4,"span",34),e.YNc(7,xhe,2,4,"span",35),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.cliente.ragioneSociale," "),e.xp6(1),e.Q6J("ngIf",t.tagCrm),e.xp6(2),e.Q6J("ngIf",null!=t.cliente.mercato),e.xp6(1),e.Q6J("ngIf",null!=t.cliente.canaleVendita),e.xp6(1),e.Q6J("ngIf",null!=t.cliente.fonte)}}Yl.\u0275fac=function(o){return new(o||Yl)(e.Y36(A.s),e.Y36(j.m),e.Y36(te.J),e.Y36(C.t))},Yl.\u0275cmp=e.Xpm({type:Yl,selectors:[["app-preventivi-mobile-edit"]],inputs:{preventivo:"preventivo"},outputs:{back:"back"},features:[e.qOj],decls:38,vars:36,consts:[["class","mt-3",4,"ngIf"],[1,"w-100","mt-3"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],[3,"startAt"],["datePickerScadenza",""],[1,"border","mat-elevation-z1","rounded","p-3","bg-white"],[1,"w-100","note-textarea",3,"floatLabel"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"w-100","mb-1",3,"click"],["mat-flat-button","","class","btn-prenota w-100 mb-1",3,"disabled","click",4,"ngIf"],["mat-flat-button","",1,"btn-send","w-100","mb-1",3,"disabled","click"],["mat-flat-button","","color","blank","class","w-100 mb-1",3,"matMenuTriggerFor",4,"ngIf"],[1,"workflows-menu"],["workFlowsMenu","matMenu"],["mat-menu-item","",3,"backgroundColor","appInvertColor","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","blank",1,"w-100","mb-1",3,"click"],["mat-flat-button","","color","blank",1,"w-100",3,"click"],[1,"mt-4","mb-4","text-center","color-pink"],[1,"camere-container"],[1,"preventiviMobileEditTabGroup","custom-tab-group"],[4,"ngFor","ngForOf"],["mat-tab-label",""],[1,"preventiviMobileEditTabGroup","custom-tab-group","mt-1"],[1,"font-weight-bold"],[1,"p-1","mt-2"],[1,"p-3","border","rounded-xl","mat-elevation-z1","bg-white"],[1,"d-inline-block"],["class","font-weight-bold",4,"ngIf"],["class","font-italic",4,"ngIf"],[1,"d-inline-block","float-right","font-weight-bold"],[1,"font-weight-bold","mt-3","mb-2","color-pink"],["class","font-weight-bold",4,"ngFor","ngForOf"],[1,"font-italic"],[1,"d-inline-block","float-right"],[1,"mt-4"],[3,"placeholder","url","extraButtonIcon","onExtraButtonClick"],["mat-flat-button","",1,"btn-prenota","w-100","mb-1",3,"disabled","click"],["mat-flat-button","","color","blank",1,"w-100","mb-1",3,"matMenuTriggerFor"],["mat-menu-item","",3,"appInvertColor","click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"h5"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA(),e.YNc(4,ehe,2,1,"div",0),e.TgZ(5,"mat-form-field",1)(6,"input",2),e.NdJ("ngModelChange",function(a){return t.preventivo.dataScadenza=a}),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"mat-datepicker-toggle",3),e.TgZ(9,"mat-datepicker-toggle",4),e.NdJ("click",function(){return t.preventivo.dataScadenza=null}),e.TgZ(10,"mat-icon",5),e._uU(11,"clear"),e.qZA()(),e._UZ(12,"mat-datepicker",6,7),e.qZA(),e.TgZ(14,"div",8)(15,"mat-form-field",9)(16,"textarea",10),e.NdJ("ngModelChange",function(a){return t.preventivo.note=a}),e.ALo(17,"translate"),e.qZA()()(),e.YNc(18,phe,7,4,"ng-container",11),e.YNc(19,dhe,3,5,"div",12),e.TgZ(20,"div",13)(21,"button",14),e.NdJ("click",function(){return t.save()}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.YNc(24,mhe,3,4,"button",15),e.TgZ(25,"button",16),e.NdJ("click",function(){return t.send()}),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.YNc(28,_he,3,4,"button",17),e.TgZ(29,"mat-menu",18,19),e.YNc(31,uhe,2,4,"button",20),e.qZA(),e.TgZ(32,"button",21),e.NdJ("click",function(){return t.inviaMessaggio()}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"button",22),e.NdJ("click",function(){return t.back.emit()}),e._uU(36),e.ALo(37,"translate"),e.qZA()()),2&o){const n=e.MAs(13);e.xp6(1),e.Oqu(e.lcZ(2,20,"sbm.preventivi.preventivoN")+t.preventivo.codicePreventivo+" - "+e.lcZ(3,22,t.getEnumKeyTranslation(t.enumStatoPreventivo,t.preventivo.statoPreventivo,"statoPreventivo"))),e.xp6(3),e.Q6J("ngIf",null!=t.preventivo.cliente),e.xp6(2),e.s9C("placeholder",e.lcZ(7,24,"bo.preventivo.proprieta.scadenza")),e.Q6J("matDatepicker",n)("ngModel",t.preventivo.dataScadenza),e.xp6(2),e.Q6J("for",n),e.xp6(4),e.Q6J("startAt",t.utility.isNullDate(t.preventivo.dataScadenza)?t.today:null),e.xp6(3),e.Q6J("floatLabel","always"),e.xp6(1),e.Q6J("placeholder",e.lcZ(17,26,"bo.preventivo.proprieta.note"))("ngModel",t.preventivo.note),e.xp6(2),e.Q6J("ngIf",null!=t.camere&&t.camere.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.preventivo.cliente),e.xp6(3),e.Oqu(e.lcZ(23,28,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.prenotaPreventivoEnabled),e.xp6(1),e.Q6J("disabled",null==t.preventivo.cliente||!t.preventivo.cliente.email),e.xp6(1),e.Oqu(e.lcZ(27,30,"sbm.preventivi.invia")),e.xp6(2),e.Q6J("ngIf",null!=t.workFlows&&t.workFlows.length>0),e.xp6(3),e.Q6J("ngForOf",t.workFlows),e.xp6(2),e.Oqu(e.lcZ(34,32,"globals.inviaMessaggio")),e.xp6(3),e.Oqu(e.lcZ(37,34,"globals.indietro"))}},dependencies:[m.sg,m.O5,k.Z,w.X,h.eB,it.IC,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,y.Q0,Ie.W0,Ie.tN,Ie.D8,ee.SK,ee.gz,ee.R7,Ue.Hw,_.Fj,_.JJ,_.On,Be,m.uU,ke.f,z.X$],styles:[".btn-send[_ngcontent-%COMP%]{color:#fff;background-color:#28a745}.btn-prenota[_ngcontent-%COMP%]{background-color:#2e3f8a;color:#fff}textarea.mat-input-element[_ngcontent-%COMP%]{margin:0;padding:0}  .note-textarea .mat-form-field-underline{visibility:hidden!important}  .note-textarea .mat-form-field-wrapper{padding-bottom:0!important}  .preventiviMobileEditTabGroup .mat-tab-label{height:auto!important;padding:10px!important;opacity:1!important;border-radius:5px!important;border:1px solid #cccccc!important;margin-right:.5rem!important;flex-grow:1!important;transition:.5s cubic-bezier(.35,0,.25,1)!important}  .preventiviMobileEditTabGroup .mat-tab-label .mat-tab-label-content{flex-wrap:wrap!important;width:100%!important;height:100%!important}  .preventiviMobileEditTabGroup .mat-tab-label .mat-tab-label-content span{display:flex!important;flex:1 0 100%!important;justify-content:center!important}  .preventiviMobileEditTabGroup .mat-tab-label-active{background-color:#de5683!important;color:#fff!important}  .preventiviMobileEditTabGroup .mat-ink-bar{visibility:hidden!important}  .preventiviMobileEditTabGroup .mat-tab-header{border:none!important}  .preventiviMobileEditTabGroup .mat-tab-label.mat-ripple{transform:none!important}.camere-container[_ngcontent-%COMP%]{min-height:300px}"]});const Ahe=function(i){return{"mt-3":i}};function whe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return r.preventivoSelected=l,e.KtG(r.previousScroll=r.containerService.container.scrollTop)}),e.TgZ(1,"div",20)(2,"div",21),e.YNc(3,fhe,2,0,"span",22),e.YNc(4,Che,5,0,"span",1),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",21),e._uU(9),e.qZA()(),e.TgZ(10,"div",23)(11,"div",24),e._uU(12),e.ALo(13,"date"),e.qZA(),e.YNc(14,Zhe,8,5,"div",25),e.qZA(),e.TgZ(15,"div",23)(16,"div",26),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",26),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",9)(23,"div",21),e._uU(24),e.ALo(25,"date"),e.qZA(),e.TgZ(26,"div",21),e._uU(27),e.ALo(28,"date"),e.qZA()(),e.TgZ(29,"div",27)(30,"span"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"span",28),e._uU(34),e.ALo(35,"eurCurrency"),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.Q6J("ngClass",e.VKq(32,Ahe,n>0)),e.xp6(3),e.Q6J("ngIf",null!=t.dataInvio&&null==t.dataVisualizzazione),e.xp6(1),e.Q6J("ngIf",null!=t.dataVisualizzazione),e.xp6(2),e.Oqu(e.lcZ(7,13,a.getEnumKeyTranslation(a.enumStatoPreventivo,t.statoPreventivo,"statoPreventivo"))),e.xp6(3),e.hij(" ",t.codicePreventivo," "),e.xp6(3),e.hij(" ",e.xi3(13,15,t.dataPreventivo,"dd/MM/yyyy")," "),e.xp6(2),e.Q6J("ngIf",null!=t.cliente),e.xp6(3),e.hij(" ",e.lcZ(18,18,"sbm.preventivi.arr")," "),e.xp6(3),e.hij(" ",e.lcZ(21,20,"sbm.preventivi.part")," "),e.xp6(4),e.hij(" ",e.xi3(25,22,t.arrivo,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(28,25,t.partenza,"dd/MM/yyyy")," "),e.xp6(4),e.hij(" ",e.lcZ(32,28,"sbm.preventivi.tot")," "),e.xp6(3),e.hij(" ",e.lcZ(35,30,t.totale)," ")}}function zhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadData())}),e.TgZ(1,"mat-icon",40),e._uU(2,"keyboard_arrow_down"),e.qZA(),e.TgZ(3,"span",40),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"globals.altriRisultati")))}function Mhe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,whe,36,34,"div",17),e.YNc(2,zhe,6,3,"button",18),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.preventivi),e.xp6(1),e.Q6J("ngIf",t.rq.take*(t.pageIndex+1)<t.totalRecords)}}function qhe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"h4",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.filtersVisible=!a.filtersVisible)}),e.TgZ(5,"i",5),e._uU(6,"search"),e.qZA()(),e.YNc(7,ghe,17,12,"div",6),e.YNc(8,hhe,4,3,"div",7),e.YNc(9,Mhe,3,2,"ng-container",1),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"sbm.preventivi.title")," "),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.filtersVisible),e.xp6(1),e.Q6J("ngIf",null!=t.preventivi&&0==t.preventivi.length),e.xp6(1),e.Q6J("ngIf",null!=t.preventivi&&t.preventivi.length>0)}}function Phe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-preventivi-mobile-edit",41),e.NdJ("back",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onBack())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("preventivo",t.preventivoSelected)}}class Rl extends f.H{constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.rq=new d.VEC,this.pageIndex=0,this.enumStatoPreventivo=c.N4,this.filters=[],this.filtersVisible=!1}ngOnInit(){this.containerService.scrollToTop(),this.rq.skip=0,this.rq.take=10,this.filters.push(new d.wn$("dataPrenotazione",c.Hp.IsNull,null,null,!0)),this.filters.push(new d.wn$("statoPreventivo",c.Hp.NotEqual,c.N4.Cancellato.toString(),c.NM.Number)),this.filters.push(new d.wn$("codicePreventivo",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.cognome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.email",c.Hp.Contains,"",c.NM.String)),this.download()}loadData(){this.pageIndex++,this.rq.skip=this.rq.take*this.pageIndex,this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[new d.aQR("dataPreventivo",c.nI.Desc)],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getPreventiviFilter(this.rq).subscribe(t=>{for(let n of t.data)try{null!=n.cliente&&(null!=n.cliente.mercato&&(n.cliente.mercato.coloreHex=Z(n.cliente.mercato.colore).hex()),null!=n.cliente.canaleVendita&&(n.cliente.canaleVendita.coloreHex=Z(n.cliente.canaleVendita.colore).hex()),null!=n.cliente.fonte&&(n.cliente.fonte.coloreHex=Z(n.cliente.fonte.colore).hex()))}catch(a){}0==this.pageIndex?this.preventivi=t.data:this.preventivi=this.preventivi.concat(t.data),this.totalRecords=t.totalRecords,o||this.setIsLoading(!1)})}onSearch(o,t){this.filters[o].value=t,this.pageIndex=0,this.rq.skip=0,this.download(!0)}onBack(){this.preventivoSelected=null,setTimeout(()=>{this.containerService.container.scrollTop=this.previousScroll},0)}}function khe(i,o){1&i&&e._UZ(0,"app-preventivi-mobile")}function She(i,o){1&i&&e._UZ(0,"app-preventivi")}Rl.\u0275fac=function(o){return new(o||Rl)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},Rl.\u0275cmp=e.Xpm({type:Rl,selectors:[["app-preventivi-mobile"]],features:[e.qOj],decls:3,vars:2,consts:[[1,"p-2"],[4,"ngIf"],[3,"preventivo","back",4,"ngIf"],[1,"mb-4","d-inline-block"],["mat-icon-button","","color","primary",1,"float-right","mt-n1",3,"disableRipple","click"],[1,"material-icons"],["class","border rounded mat-elevation-z1 pr-3 pl-3 pt-2 mb-3 bg-white",4,"ngIf"],["class","border rounded mat-elevation-z1 p-3 bg-white",4,"ngIf"],[1,"border","rounded","mat-elevation-z1","pr-3","pl-3","pt-2","mb-3","bg-white"],[1,"row"],[1,"col-12","col-sm-4","col-md-6"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["codicePreventivoSearch",""],["cognomeSearch",""],["emailSearch",""],[1,"border","rounded","mat-elevation-z1","p-3","bg-white"],["class","border rounded-xl mat-elevation-z1 overflow-hidden pr-3 pl-3 pb-3 cursor-pointer bg-white",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","blank","class","mt-4",3,"click",4,"ngIf"],[1,"border","rounded-xl","mat-elevation-z1","overflow-hidden","pr-3","pl-3","pb-3","cursor-pointer","bg-white",3,"ngClass","click"],[1,"row","ml-n3","mr-n3","pt-2","pb-2","background-color-pink"],[1,"col-6"],["class","material-icons align-middle mb-1 mr-1",4,"ngIf"],[1,"row","mt-3"],[1,"col-6","d-flex","align-items-center","font-weight-bold"],["class","col-6",4,"ngIf"],[1,"col-6","font-weight-bold"],[1,"mt-4"],[1,"ml-1","text-big","font-weight-bold"],[1,"material-icons","align-middle","mb-1","mr-1"],[1,"material-icons","align-middle","mb-1"],[1,"material-icons","align-middle","mb-1","ml-n3","mr-1"],["class","tagcrm-row",4,"ngIf"],[1,"parametri-ricerca-container"],["class","rounded pr-1 pl-1 mr-1 mt-1 parametro-ricerca",3,"backgroundColor","appInvertColor",4,"ngIf"],["class","rounded pr-1 pl-1 mt-1 parametro-ricerca",3,"backgroundColor","appInvertColor",4,"ngIf"],[1,"tagcrm-row"],[1,"rounded","pr-1","pl-1","mr-1","mt-1","parametro-ricerca",3,"appInvertColor"],[1,"rounded","pr-1","pl-1","mt-1","parametro-ricerca",3,"appInvertColor"],["mat-flat-button","","color","blank",1,"mt-4",3,"click"],[1,"d-inline-block","align-middle"],[3,"preventivo","back"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,qhe,10,7,"ng-container",1),e.YNc(2,Phe,1,1,"app-preventivi-mobile-edit",2),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",null==t.preventivoSelected),e.xp6(1),e.Q6J("ngIf",null!=t.preventivoSelected))},dependencies:[m.mk,m.sg,m.O5,k.Z,w.X,h.eB,M.v_,b.k0,Ue.Hw,Yl,m.uU,ke.f,z.X$],styles:[".parametro-ricerca[_ngcontent-%COMP%]{font-size:11px;padding-top:.1rem!important;padding-bottom:.1rem!important;white-space:nowrap}.tagcrm-row[_ngcontent-%COMP%]{font-size:small;font-style:italic}.parametri-ricerca-container[_ngcontent-%COMP%]{white-space:break-spaces}.text-big[_ngcontent-%COMP%]{font-size:18px}"]});class Fl{constructor(o){this.containerService=o}}function yhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"mat-form-field",8)(2,"input",9,10),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(3),l=e.oxw();return e.KtG(l.onSearch(0,a.value))}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"mat-form-field",8)(6,"input",11,12),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(7),l=e.oxw();return e.KtG(l.onSearch(1,a.value))}),e.ALo(8,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(4,4,"bo.prenotazione.proprieta.codicePrenotazione")),e.Q6J("value",t.filters[0].value),e.xp6(4),e.s9C("placeholder",e.lcZ(8,6,"bo.cliente.proprieta.email")),e.Q6J("value",t.filters[1].value)}}function Jhe(i,o){1&i&&(e.TgZ(0,"div",13)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.transazioni.nessunaTransazione")))}function Ehe(i,o){if(1&i&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.modalitaPagamento.nome," ")}}Fl.\u0275fac=function(o){return new(o||Fl)(e.Y36(te.J))},Fl.\u0275cmp=e.Xpm({type:Fl,selectors:[["app-preventivi-mobile-desktop"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(o,t){1&o&&(e.YNc(0,khe,1,0,"app-preventivi-mobile",0),e.YNc(1,She,1,0,"app-preventivi",0)),2&o&&(e.Q6J("ngIf",1==t.containerService.isMobile),e.xp6(1),e.Q6J("ngIf",0==t.containerService.isMobile))},dependencies:[m.O5,bi,Rl]});const Nhe=function(i){return{"mt-3":i}};function Ohe(i,o){if(1&i&&(e.TgZ(0,"div",16)(1,"div",17)(2,"div",18),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"div",18),e._uU(6),e.qZA()(),e.YNc(7,Ehe,2,1,"div",19),e.TgZ(8,"div",20)(9,"div",21),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",22),e._uU(13),e.ALo(14,"eurCurrency"),e.qZA()()()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Q6J("ngClass",e.VKq(13,Nhe,n>0)),e.xp6(3),e.hij(" ",e.xi3(4,6,t.data,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",null!=t.cliente?t.cliente.ragioneSociale:""," "),e.xp6(1),e.Q6J("ngIf",null!=t.modalitaPagamento),e.xp6(3),e.hij(" ",e.lcZ(11,9,a.getEnumKeyTranslation(a.enumStatoEsecuzioneTransazione,t.statoEsecuzione,"statoEsecuzioneTransazione"))," "),e.xp6(3),e.hij(" ",e.lcZ(14,11,t.importo)," ")}}function Lhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.loadData())}),e.TgZ(1,"mat-icon",25),e._uU(2,"keyboard_arrow_down"),e.qZA(),e.TgZ(3,"span",25),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"globals.altriRisultati")))}function Dhe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Ohe,15,15,"div",14),e.YNc(2,Lhe,6,3,"button",15),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.transazioni),e.xp6(1),e.Q6J("ngIf",t.rq.take*(t.pageIndex+1)<t.totalRecords)}}class Hl extends f.H{constructor(o,t,n){super(),this.apiService=o,this.containerService=t,this.utility=n,this.rq=new d.TGK,this.pageIndex=0,this.filters=[],this.filtersVisible=!1,this.enumStatoEsecuzioneTransazione=c.g_}ngOnInit(){this.containerService.scrollToTop(),this.rq.skip=0,this.rq.take=10,this.filters.push(new d.wn$(["prenotazione.codiceOTA","prenotazione.codicePrenotazione"],c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cliente.email",c.Hp.Contains,"",c.NM.String)),this.download()}loadData(){this.pageIndex++,this.rq.skip=this.rq.take*this.pageIndex,this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.sorting=[new d.aQR("data",c.nI.Desc)],this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getTransazioniFilter(this.rq).subscribe(t=>{0==this.pageIndex?this.transazioni=t.data:this.transazioni=this.transazioni.concat(t.data),this.totalRecords=t.totalRecords,o||this.setIsLoading(!1)})}onSearch(o,t){this.filters[o].value=t,this.pageIndex=0,this.rq.skip=0,this.download(!0)}}function Ihe(i,o){1&i&&e._UZ(0,"app-transazioni-mobile")}function Qhe(i,o){1&i&&e._UZ(0,"app-transazioni")}Hl.\u0275fac=function(o){return new(o||Hl)(e.Y36(A.s),e.Y36(te.J),e.Y36(C.t))},Hl.\u0275cmp=e.Xpm({type:Hl,selectors:[["app-transazioni-mobile"]],features:[e.qOj],decls:10,vars:7,consts:[[1,"p-2"],[1,"mb-4","d-inline-block"],["mat-icon-button","","color","primary",1,"float-right","mt-n1",3,"disableRipple","click"],[1,"material-icons"],["class","border rounded mat-elevation-z1 pr-3 pl-3 pt-2 mb-3 bg-white",4,"ngIf"],["class","border rounded mat-elevation-z1 p-3 bg-white",4,"ngIf"],[4,"ngIf"],[1,"border","rounded","mat-elevation-z1","pr-3","pl-3","pt-2","mb-3","bg-white"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["codicePrenotazioneSearch",""],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["emailSearch",""],[1,"border","rounded","mat-elevation-z1","p-3","bg-white"],["class","border rounded-xl mat-elevation-z1 overflow-hidden pr-3 pl-3 pb-3 cursor-pointer bg-white",3,"ngClass",4,"ngFor","ngForOf"],["mat-flat-button","","color","blank","class","mt-4",3,"click",4,"ngIf"],[1,"border","rounded-xl","mat-elevation-z1","overflow-hidden","pr-3","pl-3","pb-3","cursor-pointer","bg-white",3,"ngClass"],[1,"row","ml-n3","mr-n3","pt-2","pb-2","background-color-pink"],[1,"col-6"],["class","mt-2",4,"ngIf"],[1,"row","mt-2"],[1,"col-6","font-italic"],[1,"col-6","text-right","text-big","font-weight-bold"],[1,"mt-2"],["mat-flat-button","","color","blank",1,"mt-4",3,"click"],[1,"d-inline-block","align-middle"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.filtersVisible=!t.filtersVisible}),e.TgZ(5,"i",3),e._uU(6,"search"),e.qZA()(),e.YNc(7,yhe,9,8,"div",4),e.YNc(8,Jhe,4,3,"div",5),e.YNc(9,Dhe,3,2,"ng-container",6),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,5,"sbm.transazioni.title")," "),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",t.filtersVisible),e.xp6(1),e.Q6J("ngIf",null!=t.transazioni&&0==t.transazioni.length),e.xp6(1),e.Q6J("ngIf",null!=t.transazioni&&t.transazioni.length>0))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,b.k0,Ue.Hw,m.uU,ke.f,z.X$],styles:[".text-big[_ngcontent-%COMP%]{font-size:18px}"]});class Kl{constructor(o){this.containerService=o}}Kl.\u0275fac=function(o){return new(o||Kl)(e.Y36(te.J))},Kl.\u0275cmp=e.Xpm({type:Kl,selectors:[["app-transazioni-mobile-desktop"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(o,t){1&o&&(e.YNc(0,Ihe,1,0,"app-transazioni-mobile",0),e.YNc(1,Qhe,1,0,"app-transazioni",0)),2&o&&(e.Q6J("ngIf",1==t.containerService.isMobile),e.xp6(1),e.Q6J("ngIf",0==t.containerService.isMobile))},dependencies:[m.O5,Ot,Hl]});class Gl{constructor(){}}function Uhe(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.nome)}}function Yhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",5)(1,"mat-select",6),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.accountSelected=a)}),e.ALo(2,"translate"),e.YNc(3,Uhe,2,2,"mat-option",7),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("placeholder",e.lcZ(2,3,"sbm.myForecast.selezionaAccount"))("ngModel",t.accountSelected),e.xp6(2),e.Q6J("ngForOf",t.myForecast)}}function Rhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",12),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(5);return a.preventDefault(),e.KtG(l.apriCondizioniContrattuali())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.myForecast.condizioniContrattuali")))}function Fhe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5",10),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Rhe,3,3,"a",11),e.BQk()),2&i){const t=e.oxw(4);e.xp6(2),e.hij(" ",e.lcZ(3,2,"sbm.myForecast.inFaseDiAttivazione")," "),e.xp6(2),e.Q6J("ngIf",!t.sessionService.isAlbergoDemo())}}function Hhe(i,o){if(1&i&&(e._UZ(0,"iframe",13),e.ALo(1,"safeUrl")),2&i){const t=e.oxw(4);e.Q6J("src",e.lcZ(1,1,t.accountSelected.url),e.uOi)}}function Khe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Fhe,5,4,"ng-container",1),e.YNc(2,Hhe,2,3,"iframe",9),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.accountSelected.stato==t.enumStatoMyForecast.InAttesaDiAttivazione),e.xp6(1),e.Q6J("ngIf",t.accountSelected.stato==t.enumStatoMyForecast.Attivo)}}function Ghe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Yhe,4,5,"mat-form-field",4),e.YNc(2,Khe,3,2,"ng-container",1),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.myForecast.length>1&&(null==t.accountSelected||t.accountSelected.stato==t.enumStatoMyForecast.InAttesaDiAttivazione)),e.xp6(1),e.Q6J("ngIf",null!=t.accountSelected)}}function $he(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(3);return a.preventDefault(),e.KtG(l.apriCondizioniContrattuali())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.myForecast.condizioniContrattuali")))}function Bhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"h4",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",16)(5,"h6",17),e._uU(6," Ti ricordiamo che MyForecast Light non \xe8 un prodotto di Passepartout Spa. "),e.qZA(),e.TgZ(7,"p"),e._uU(8," Per poter utilizzare le relative funzionalit\xe0 dovrai accettare le condizioni di licenza d\u2019uso di Triscele s.r.l., con sede in Italia, "),e.qZA(),e.TgZ(9,"p"),e._uU(10," San Gregorio Di Catania (CT), Viale Europa, 69, 95027, Codice fiscale e Partita IVA n. 05392870878 PEC triscele@mypec.eu "),e.qZA()(),e.YNc(11,$he,3,3,"a",18),e.TgZ(12,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.isActivating=!0)}),e._uU(13),e.ALo(14,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"sbm.myForecast.nonAttivo")),e.xp6(9),e.Q6J("ngIf",!t.sessionService.isAlbergoDemo()),e.xp6(1),e.Q6J("disabled",!t.condizioniContrattualiOpened),e.xp6(1),e.Oqu(e.lcZ(14,6,"sbm.myForecast.attiva"))}}function Vhe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Ghe,3,2,"ng-container",1),e.YNc(2,Bhe,15,8,"div",3),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.myForecast.length>0),e.xp6(1),e.Q6J("ngIf",0==t.myForecast.length)}}function Xhe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-attiva-myforecast",21),e.NdJ("back",function(){e.CHM(t);const a=e.oxw();return a.isActivating=!1,e.KtG(a.ngOnInit())}),e.qZA()}}Gl.\u0275fac=function(o){return new(o||Gl)},Gl.\u0275cmp=e.Xpm({type:Gl,selectors:[["app-myforecast-error"]],decls:3,vars:3,consts:[[1,"text-center","p-4"]],template:function(o,t){1&o&&(e.TgZ(0,"h3",0),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.myForecast.errore"),"\n"))},dependencies:[z.X$]});class $l{constructor(o,t){this.sessionService=o,this.utilityService=t,this.isActivating=!1,this.enumStatoMyForecast=c.Up}ngOnInit(){this.myForecast=this.sessionService.getMyForecast(),1==this.myForecast.length?this.accountSelected=this.myForecast[0]:this.accountSelected=null,this.condizioniContrattualiOpened=this.sessionService.isAlbergoDemo()}apriCondizioniContrattuali(){this.condizioniContrattualiOpened=!0,this.utilityService.openUrlInNewTab("https://app.hellosign.com/s/4d7C88BA")}}$l.\u0275fac=function(o){return new(o||$l)(e.Y36(j.m),e.Y36(C.t))},$l.\u0275cmp=e.Xpm({type:$l,selectors:[["app-myforecast"]],decls:3,vars:2,consts:[[1,"w-100","h-100"],[4,"ngIf"],[3,"back",4,"ngIf"],["class","text-center",4,"ngIf"],["class","ml-3 mt-2 account-select",4,"ngIf"],[1,"ml-3","mt-2","account-select"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","w-100 h-100","frameborder","0",3,"src",4,"ngIf"],[1,"text-center","ml-3","mr-3","mt-4"],["class","d-block mt-3 text-center","href","#",3,"click",4,"ngIf"],["href","#",1,"d-block","mt-3","text-center",3,"click"],["frameborder","0",1,"w-100","h-100",3,"src"],[1,"text-center"],[1,"mb-3","font-weight-bold","pt-4"],[1,"mb-3","ml-3","mr-3"],[1,"mb-3"],["class","d-block","href","#",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",1,"mt-3",3,"disabled","click"],["href","#",1,"d-block",3,"click"],[3,"back"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Vhe,3,2,"ng-container",1),e.YNc(2,Xhe,1,0,"app-attiva-myforecast",2),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",!t.isActivating),e.xp6(1),e.Q6J("ngIf",t.isActivating))},dependencies:[m.sg,m.O5,h.eB,M.v_,re.CK,g.x8,_.JJ,_.On,oi,Sc.Q,z.X$],styles:[".account-select[_ngcontent-%COMP%]{width:400px}"]});class Bl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.route=t,this.localStorage=n,this.sessionService=a}ngOnInit(){this.setIsLoading(!0),this.sessionService.isAttachRequestHeaders=!0,this.sub=this.route.queryParamMap.subscribe(o=>{let t=o.get("code"),n=o.get("state");if(t&&n&&!isNaN(+n)&&+n>0){let a=new d.f_1;a.oidPortale=+n,a.code=t,this.apiService.generaTokenAirbnb(a).subscribe(l=>{this.localStorage.set("oauth2Success",l.data,!0)})}})}ngOnDestroy(){this.sub.unsubscribe()}}function jhe(i,o){if(1&i&&(e.TgZ(0,"div",49)(1,"h5",50),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",51),e._UZ(5,"ngx-charts-area-chart",52),e.ALo(6,"translate"),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,14,"sbm.pickupPreventivi.andamentoPreventivi")),e.xp6(3),e.Q6J("gradient",!1)("results",t.chart)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!0)("legendTitle",e.lcZ(6,16,"sbm.pickupPreventivi.legenda"))("showXAxisLabel",!1)("showYAxisLabel",!1)("yAxisTickFormatting",t.axisFormatY)("xAxisTickFormatting",t.axisFormatX)("rotateXAxisTicks",!0)("legendPosition",t.enumLegendPosition.Below)}}function Whe(i,o){1&i&&(e.TgZ(0,"div",53)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"globals.nessunRisultato")))}Bl.\u0275fac=function(o){return new(o||Bl)(e.Y36(A.s),e.Y36(je.gz),e.Y36(lt.n),e.Y36(j.m))},Bl.\u0275cmp=e.Xpm({type:Bl,selectors:[["app-oauth2"]],features:[e.qOj],decls:0,vars:0,template:function(o,t){}});const efe=function(i,o){return{selected:i,"not-selected":o}};function tfe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",54),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.preventDefault(),p.rq.tipoDato=r.key,e.KtG(p.download())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.WLB(4,efe,n.rq.tipoDato==t.key,n.rq.tipoDato!=t.key)),e.xp6(1),e.Oqu(e.lcZ(2,2,t.value))}}function ife(i,o){if(1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.getEnumKeyTranslation(t.enumTipoDato,t.rq.tipoDato,"tipoDatoPreventiviPickup")))}}function ofe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.key," ")}}function nfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.qZA(),e.YNc(3,ofe,2,1,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.key," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function afe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.preventivi")))}function lfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.preventivi," ")}}function rfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.qZA(),e.YNc(3,lfe,2,1,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.preventivi," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function cfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.roomNight")))}function sfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.roomNight," ")}}function pfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.qZA(),e.YNc(3,sfe,2,1,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.roomNight," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function dfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.revenue")))}function mfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.revenue)," ")}}function _fe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,mfe,3,3,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.revenue)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function ufe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.ADR")))}function gfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.ADR)," ")}}function hfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,gfe,3,3,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.ADR)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function ffe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.prenotazioni")))}function Cfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.prenotazioni," ")}}function bfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.qZA(),e.YNc(3,Cfe,2,1,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.prenotazioni," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function vfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.roomNightPrenotazioni")))}function Tfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.roomNightPrenotazioni," ")}}function xfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.qZA(),e.YNc(3,Tfe,2,1,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.roomNightPrenotazioni," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function Zfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.revenuePrenotazioni")))}function Afe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.revenuePrenotazioni)," ")}}function wfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,Afe,3,3,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.revenuePrenotazioni)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function zfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.ADRPrenotazioni")))}function Mfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.ADRPrenotazioni)," ")}}function qfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,Mfe,3,3,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.ADRPrenotazioni)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function Pfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.cancellazioni")))}function kfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.cancellazioni," ")}}function Sfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.qZA(),e.YNc(3,kfe,2,1,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.cancellazioni," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function yfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.roomNightCancellazioni")))}function Jfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.roomNightCancellazioni," ")}}function Efe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.qZA(),e.YNc(3,Jfe,2,1,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.roomNightCancellazioni," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function Nfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.revenueCancellazioni")))}function Ofe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.revenueCancellazioni)," ")}}function Lfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,Ofe,3,3,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.revenueCancellazioni)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function Dfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.ADRCancellazioni")))}function Ife(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.ADRCancellazioni)," ")}}function Qfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,Ife,3,3,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.ADRCancellazioni)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function Ufe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickupPreventivi.indiceConversione")))}function Yfe(i,o){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e.ALo(2,"percent"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.indiceConversione)," ")}}function Rfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",56),e._uU(2),e.ALo(3,"percent"),e.qZA(),e.YNc(4,Yfe,3,3,"div",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.indiceConversione)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function Ffe(i,o){1&i&&e._UZ(0,"mat-header-row",59)}function Hfe(i,o){1&i&&e._UZ(0,"mat-row")}class Vl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.translationService=n,this.utility=a,this.rq=new d.qVX,this.chart=[],this.displayedColumns=["key","preventivi","roomNight","revenue","ADR","prenotazioni","roomNightPrenotazioni","revenuePrenotazioni","ADRPrenotazioni","cancellazioni","roomNightCancellazioni","revenueCancellazioni","ADRCancellazioni","indiceConversione"],this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.showFilterAdv=!1,this.enumTipoDato=c.wh,this.enumLegendPosition=Ke.tV}ngOnInit(){this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.rq.dataPreventivoDal=this.getDate(this.today),this.rq.dataPreventivoAl=this.getDate(this.today),this.rq.arrivoDal=this.getDate(this.today),this.rq.arrivoAl=this.getDate(this.oneYearFromToday),this.rq.tipoDato=c.wh.Data,this.download()}download(){this.setIsLoading(!0),this.apiService.getPickupPreventivi(this.rq).subscribe(o=>{this.chart=this.checkResultsAdvanced(o.data.grafico.results),this.dataSource=new s.r4(o.data.dati),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}checkResultsAdvanced(o){let t=!1;if(null!=o)for(let n of o)if(null!=n.series&&(n.name=this.translationService.getTranslationSync(n.name),1==n.series.length&&(n.series.unshift(new d.yIB("<",0)),n.series.push(new d.yIB(">",0))),!t))for(let a of n.series)if(a.value>0){t=!0;break}return t||(o=[]),o}onArrivoDalChange(){setTimeout(()=>{this.rq.arrivoDal=this.getDate(this.rq.arrivoDal),(null==this.rq.arrivoAl||u(this.rq.arrivoDal)>u(this.rq.arrivoAl))&&(this.rq.arrivoAl=this.rq.arrivoDal),this.download()},200)}onArrivoAlChange(){setTimeout(()=>{this.rq.arrivoAl=this.getDate(this.rq.arrivoAl),(null==this.rq.arrivoDal||u(this.rq.arrivoDal)>u(this.rq.arrivoAl))&&(this.rq.arrivoDal=this.rq.arrivoAl),this.download()},200)}onDataPreventivoDalChange(){setTimeout(()=>{this.rq.dataPreventivoDal=this.getDate(this.rq.dataPreventivoDal),(null==this.rq.dataPreventivoAl||u(this.rq.dataPreventivoDal)>u(this.rq.dataPreventivoAl))&&(this.rq.dataPreventivoAl=this.rq.dataPreventivoDal),this.download()},200)}onDataPreventivoAlChange(){setTimeout(()=>{this.rq.dataPreventivoAl=this.getDate(this.rq.dataPreventivoAl),(null==this.rq.dataPreventivoDal||u(this.rq.dataPreventivoDal)>u(this.rq.dataPreventivoAl))&&(this.rq.dataPreventivoDal=this.rq.dataPreventivoAl),this.download()},200)}axisFormatY(o){return o%1==0?o.toLocaleString():""}axisFormatX(o){return"<"==o||">"==o?"":o}}function Kfe(i,o){if(1&i&&(e.TgZ(0,"div",43)(1,"h5",44),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",45),e._UZ(5,"ngx-charts-area-chart",46),e.ALo(6,"translate"),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,14,"sbm.pickup.andamentoPrenotazioni")),e.xp6(3),e.Q6J("gradient",!1)("results",t.chart)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!0)("legendTitle",e.lcZ(6,16,"sbm.pickup.legenda"))("showXAxisLabel",!1)("showYAxisLabel",!1)("yAxisTickFormatting",t.axisFormatY)("xAxisTickFormatting",t.axisFormatX)("rotateXAxisTicks",!0)("legendPosition",t.enumLegendPosition.Below)}}function Gfe(i,o){1&i&&(e.TgZ(0,"div",47)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"globals.nessunRisultato")))}Vl.\u0275fac=function(o){return new(o||Vl)(e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o),e.Y36(C.t))},Vl.\u0275cmp=e.Xpm({type:Vl,selectors:[["app-pickup-preventivi"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:114,vars:61,consts:[[1,"container-fluid","p-3"],[1,"filter"],[1,"row","filter-base"],[1,"col-9"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","dateChange","ngModelChange"],["matSuffix","",3,"for"],["datePickerDataPreventivoDal",""],["datePickerDataPreventivoAl",""],["datePickerArrivoDal",""],["datePickerArrivoAl",""],[1,"col-3","text-right","pt-2","font-weight-bold",3,"click"],[1,"align-middle","color-pink","cursor-pointer"],["mat-icon-button","","color","primary",1,"align-middle"],[1,"filter-adv",3,"hidden"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],["displayMember","descrizione",3,"dataLoader","placeholder","valueChange"],["color","primary",3,"ngModel","ngModelChange","change"],["class","w-100 chart-outer-container pt-3 pr-3 pl-3 border mat-elevation-z1 mb-3 bg-white",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mb-2"],["href","#","class","mr-2 rounded-lg p-1 d-inline-block",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mat-table-container"],[1,"mat-table","pickup-table",3,"dataSource"],["matColumnDef","key"],["class","justify-content-center",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","preventivi"],["matColumnDef","roomNight"],["matColumnDef","revenue"],["matColumnDef","ADR"],["matColumnDef","prenotazioni"],["matColumnDef","roomNightPrenotazioni"],["matColumnDef","revenuePrenotazioni"],["matColumnDef","ADRPrenotazioni"],["matColumnDef","cancellazioni"],["matColumnDef","roomNightCancellazioni"],["matColumnDef","revenueCancellazioni"],["matColumnDef","ADRCancellazioni"],["matColumnDef","indiceConversione"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"w-100","chart-outer-container","pt-3","pr-3","pl-3","border","mat-elevation-z1","mb-3","bg-white"],[1,"mb-3"],[1,"w-100","pickup-chart-container"],[3,"gradient","results","scheme","xAxis","yAxis","legend","legendTitle","showXAxisLabel","showYAxisLabel","yAxisTickFormatting","xAxisTickFormatting","rotateXAxisTicks","legendPosition"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["href","#",1,"mr-2","rounded-lg","p-1","d-inline-block",3,"ngClass","click"],[1,"justify-content-center"],[1,"w-100","text-center"],["class","annoPrecedente",4,"ngIf"],[1,"annoPrecedente"],[1,"mat-table-header"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"input",7),e.NdJ("dateChange",function(){return t.onDataPreventivoDalChange()})("ngModelChange",function(a){return t.rq.dataPreventivoDal=a}),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"mat-datepicker-toggle",8)(10,"mat-datepicker",null,9),e.qZA()(),e.TgZ(12,"div",5)(13,"mat-form-field",6)(14,"input",7),e.NdJ("dateChange",function(){return t.onDataPreventivoAlChange()})("ngModelChange",function(a){return t.rq.dataPreventivoAl=a}),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"mat-datepicker-toggle",8)(17,"mat-datepicker",null,10),e.qZA()(),e.TgZ(19,"div",5)(20,"mat-form-field",6)(21,"input",7),e.NdJ("dateChange",function(){return t.onArrivoDalChange()})("ngModelChange",function(a){return t.rq.arrivoDal=a}),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"mat-datepicker-toggle",8)(24,"mat-datepicker",null,11),e.qZA()(),e.TgZ(26,"div",5)(27,"mat-form-field",6)(28,"input",7),e.NdJ("dateChange",function(){return t.onArrivoAlChange()})("ngModelChange",function(a){return t.rq.arrivoAl=a}),e.ALo(29,"translate"),e.qZA(),e._UZ(30,"mat-datepicker-toggle",8)(31,"mat-datepicker",null,12),e.qZA()()()(),e.TgZ(33,"div",13),e.NdJ("click",function(){return t.showFilterAdv=!t.showFilterAdv}),e.TgZ(34,"span",14),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"button",15)(38,"mat-icon"),e._uU(39,"keyboard_arrow_down"),e.qZA()()()(),e.TgZ(40,"div",16)(41,"div",4)(42,"div",5)(43,"app-view-select",17),e.NdJ("valueChange",function(a){return t.rq.oidUbicazioneIstat=a.oid,t.download()}),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",5)(46,"app-view-select",18),e.NdJ("valueChange",function(a){return t.rq.oidMercato=a.oid,t.download()}),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"div",5)(49,"app-view-select",18),e.NdJ("valueChange",function(a){return t.rq.oidCanaleVendita=a.oid,t.download()}),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"div",5)(52,"app-view-select",17),e.NdJ("valueChange",function(a){return t.rq.oidTagCrm=a.oid,t.download()}),e.ALo(53,"translate"),e.qZA()()()(),e.TgZ(54,"mat-checkbox",19),e.NdJ("ngModelChange",function(a){return t.rq.isRaggruppaPerArrivo=a})("change",function(){return t.download()}),e._uU(55),e.ALo(56,"translate"),e.qZA()(),e.YNc(57,jhe,7,18,"div",20),e.YNc(58,Whe,4,3,"div",21),e.TgZ(59,"div",22)(60,"div",23),e.YNc(61,tfe,3,7,"a",24),e.ALo(62,"selectEnum"),e.qZA(),e.TgZ(63,"div",25)(64,"mat-table",26),e.ynx(65,27),e.YNc(66,ife,3,3,"mat-header-cell",28),e.YNc(67,nfe,4,2,"mat-cell",29),e.BQk(),e.ynx(68,30),e.YNc(69,afe,3,3,"mat-header-cell",28),e.YNc(70,rfe,4,2,"mat-cell",29),e.BQk(),e.ynx(71,31),e.YNc(72,cfe,3,3,"mat-header-cell",28),e.YNc(73,pfe,4,2,"mat-cell",29),e.BQk(),e.ynx(74,32),e.YNc(75,dfe,3,3,"mat-header-cell",28),e.YNc(76,_fe,5,4,"mat-cell",29),e.BQk(),e.ynx(77,33),e.YNc(78,ufe,3,3,"mat-header-cell",28),e.YNc(79,hfe,5,4,"mat-cell",29),e.BQk(),e.ynx(80,34),e.YNc(81,ffe,3,3,"mat-header-cell",28),e.YNc(82,bfe,4,2,"mat-cell",29),e.BQk(),e.ynx(83,35),e.YNc(84,vfe,3,3,"mat-header-cell",28),e.YNc(85,xfe,4,2,"mat-cell",29),e.BQk(),e.ynx(86,36),e.YNc(87,Zfe,3,3,"mat-header-cell",28),e.YNc(88,wfe,5,4,"mat-cell",29),e.BQk(),e.ynx(89,37),e.YNc(90,zfe,3,3,"mat-header-cell",28),e.YNc(91,qfe,5,4,"mat-cell",29),e.BQk(),e.ynx(92,38),e.YNc(93,Pfe,3,3,"mat-header-cell",28),e.YNc(94,Sfe,4,2,"mat-cell",29),e.BQk(),e.ynx(95,39),e.YNc(96,yfe,3,3,"mat-header-cell",28),e.YNc(97,Efe,4,2,"mat-cell",29),e.BQk(),e.ynx(98,40),e.YNc(99,Nfe,3,3,"mat-header-cell",28),e.YNc(100,Lfe,5,4,"mat-cell",29),e.BQk(),e.ynx(101,41),e.YNc(102,Dfe,3,3,"mat-header-cell",28),e.YNc(103,Qfe,5,4,"mat-cell",29),e.BQk(),e.ynx(104,42),e.YNc(105,Ufe,3,3,"mat-header-cell",28),e.YNc(106,Rfe,5,4,"mat-cell",29),e.BQk(),e.YNc(107,Ffe,1,0,"mat-header-row",43),e.YNc(108,Hfe,1,0,"mat-row",44),e.qZA()(),e.TgZ(109,"div",45)(110,"button",46),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"PickupPreventivi",t.displayedColumns)}),e.TgZ(111,"i",47),e._uU(112,"get_app"),e.qZA()(),e._UZ(113,"mat-paginator",48),e.qZA()()()),2&o){const n=e.MAs(11),a=e.MAs(18),l=e.MAs(25),r=e.MAs(32);e.xp6(7),e.s9C("placeholder",e.lcZ(8,38,"sbm.pickupPreventivi.dataPreventivoDal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dataPreventivoDal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(15,40,"sbm.pickupPreventivi.dataPreventivoAl")),e.Q6J("matDatepicker",a)("ngModel",t.rq.dataPreventivoAl),e.xp6(2),e.Q6J("for",a),e.xp6(5),e.s9C("placeholder",e.lcZ(22,42,"sbm.pickupPreventivi.arrivoDal")),e.Q6J("matDatepicker",l)("ngModel",t.rq.arrivoDal),e.xp6(2),e.Q6J("for",l),e.xp6(5),e.s9C("placeholder",e.lcZ(29,44,"sbm.pickupPreventivi.arrivoAl")),e.Q6J("matDatepicker",r)("ngModel",t.rq.arrivoAl),e.xp6(2),e.Q6J("for",r),e.xp6(5),e.Oqu(e.lcZ(36,46,"globals.filtriAvanzati")),e.xp6(5),e.Q6J("hidden",!t.showFilterAdv),e.xp6(3),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("placeholder",e.lcZ(44,48,"sbm.pickupPreventivi.ubicazioneIstat")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaMercatoRQ))("placeholder",e.lcZ(47,50,"sbm.pickupPreventivi.mercato")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaCanaleVenditaRQ))("placeholder",e.lcZ(50,52,"sbm.pickupPreventivi.canaleVendita")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTagCrmViewSelect())("placeholder",e.lcZ(53,54,"sbm.pickupPreventivi.tagCrm")),e.xp6(2),e.Q6J("ngModel",t.rq.isRaggruppaPerArrivo),e.xp6(1),e.hij(" ",e.lcZ(56,56,"sbm.pickupPreventivi.isRaggruppaPerArrivo")," "),e.xp6(2),e.Q6J("ngIf",null!=t.chart&&t.chart.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("ngForOf",e.xi3(62,58,t.enumTipoDato,"tipoDatoPreventiviPickup")),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(43),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,Ue.Hw,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,Ke.rt,ne.d,m.Zx,Te.A,ke.f,z.X$],styles:[".pickup-chart-container[_ngcontent-%COMP%]{height:250px}.chart-outer-container[_ngcontent-%COMP%]{padding-bottom:95px;border-radius:7px}  .pickup-chart-container .chart-legend{margin-top:1rem!important}.annoPrecedente[_ngcontent-%COMP%]{color:#999;font-size:12px;width:100%;text-align:center}  .pickup-table .mat-cell{flex-wrap:wrap!important}.not-selected[_ngcontent-%COMP%]{border:1px solid #aaaaaa;background-color:#fff}.selected[_ngcontent-%COMP%]{border:1px solid #007bff;background-color:#d8ecf3;font-weight:600}"]});const $fe=function(i,o){return{selected:i,"not-selected":o}};function Bfe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",48),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.preventDefault(),p.rq.tipoDato=r.key,e.KtG(p.download())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.WLB(4,$fe,n.rq.tipoDato==t.key,n.rq.tipoDato!=t.key)),e.xp6(1),e.Oqu(e.lcZ(2,2,t.value))}}function Vfe(i,o){if(1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.getEnumKeyTranslation(t.enumTipoDato,t.rq.tipoDato,"tipoDatoPrenotazioniPickup")))}}function Xfe(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.key," ")}}function jfe(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50),e._uU(2),e.qZA(),e.YNc(3,Xfe,2,1,"div",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.key," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function Wfe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickup.prenotazioni")))}function e2e(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.prenotazioni," ")}}function t2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50),e._uU(2),e.qZA(),e.YNc(3,e2e,2,1,"div",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.prenotazioni," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function i2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickup.roomNight")))}function o2e(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.roomNight," ")}}function n2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50),e._uU(2),e.qZA(),e.YNc(3,o2e,2,1,"div",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.roomNight," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function a2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickup.revenue")))}function l2e(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.revenue)," ")}}function r2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,l2e,3,3,"div",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.revenue)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function c2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickup.ADR")))}function s2e(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.ADR)," ")}}function p2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,s2e,3,3,"div",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.ADR)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function d2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickup.cancellazioni")))}function m2e(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.cancellazioni," ")}}function _2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50),e._uU(2),e.qZA(),e.YNc(3,m2e,2,1,"div",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.cancellazioni," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function u2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickup.roomNightCancellazioni")))}function g2e(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.datiAnnoPrecedente.roomNightCancellazioni," ")}}function h2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50),e._uU(2),e.qZA(),e.YNc(3,g2e,2,1,"div",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.roomNightCancellazioni," "),e.xp6(1),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function f2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickup.revenueCancellazioni")))}function C2e(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.revenueCancellazioni)," ")}}function b2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,C2e,3,3,"div",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.revenueCancellazioni)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function v2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.pickup.ADRCancellazioni")))}function T2e(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.datiAnnoPrecedente.ADRCancellazioni)," ")}}function x2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell")(1,"div",50),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA(),e.YNc(4,T2e,3,3,"div",51),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.ADRCancellazioni)," "),e.xp6(2),e.Q6J("ngIf",null!=t.datiAnnoPrecedente)}}function Z2e(i,o){1&i&&e._UZ(0,"mat-header-row",53)}function A2e(i,o){1&i&&e._UZ(0,"mat-row")}class Xl extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.translationService=n,this.utility=a,this.rq=new d.jH5,this.chart=[],this.displayedColumns=["key","prenotazioni","roomNight","revenue","ADR","cancellazioni","roomNightCancellazioni","revenueCancellazioni","ADRCancellazioni"],this.getParametriRicercaMercatoRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.Mercato.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=d.k$g.fromFilters([new d.wn$("tipoParametro",c.Hp.Equal,c.E7.CanaleVendita.toString(),c.NM.Number),new d.wn$("isAttivo",c.Hp.IsTrue)],new d.aQR("ordinamento")),this.showFilterAdv=!1,this.enumTipoDato=c.pA,this.enumLegendPosition=Ke.tV}ngOnInit(){this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.rq.dataPrenotazioneDal=this.getDate(this.today),this.rq.dataPrenotazioneAl=this.getDate(this.today),this.rq.arrivoDal=this.getDate(this.today),this.rq.arrivoAl=this.getDate(this.oneYearFromToday),this.rq.tipoDato=c.pA.Data,this.download()}download(){this.setIsLoading(!0),this.apiService.getPickup(this.rq).subscribe(o=>{this.chart=this.checkResultsAdvanced(o.data.grafico.results),this.dataSource=new s.r4(o.data.dati),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}checkResultsAdvanced(o){let t=!1;if(null!=o)for(let n of o)if(null!=n.series&&(n.name=this.translationService.getTranslationSync(n.name),1==n.series.length&&(n.series.unshift(new d.yIB("<",0)),n.series.push(new d.yIB(">",0))),!t))for(let a of n.series)if(a.value>0){t=!0;break}return t||(o=[]),o}onArrivoDalChange(){setTimeout(()=>{this.rq.arrivoDal=this.getDate(this.rq.arrivoDal),(null==this.rq.arrivoAl||u(this.rq.arrivoDal)>u(this.rq.arrivoAl))&&(this.rq.arrivoAl=this.rq.arrivoDal),this.download()},200)}onArrivoAlChange(){setTimeout(()=>{this.rq.arrivoAl=this.getDate(this.rq.arrivoAl),(null==this.rq.arrivoDal||u(this.rq.arrivoDal)>u(this.rq.arrivoAl))&&(this.rq.arrivoDal=this.rq.arrivoAl),this.download()},200)}onDataPrenotazioneDalChange(){setTimeout(()=>{this.rq.dataPrenotazioneDal=this.getDate(this.rq.dataPrenotazioneDal),(null==this.rq.dataPrenotazioneAl||u(this.rq.dataPrenotazioneDal)>u(this.rq.dataPrenotazioneAl))&&(this.rq.dataPrenotazioneAl=this.rq.dataPrenotazioneDal),this.download()},200)}onDataPrenotazioneAlChange(){setTimeout(()=>{this.rq.dataPrenotazioneAl=this.getDate(this.rq.dataPrenotazioneAl),(null==this.rq.dataPrenotazioneDal||u(this.rq.dataPrenotazioneDal)>u(this.rq.dataPrenotazioneAl))&&(this.rq.dataPrenotazioneDal=this.rq.dataPrenotazioneAl),this.download()},200)}axisFormatY(o){return o%1==0?o.toLocaleString():""}axisFormatX(o){return"<"==o||">"==o?"":o}}function w2e(i,o){1&i&&(e.TgZ(0,"div",27)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.plugins.invia-clienti.nessunCliente")))}function z2e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",28)(1,"mat-checkbox",29),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleClienti():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionClienti.hasValue()&&t.isAllSelectedClienti())("indeterminate",t.selectionClienti.hasValue()&&!t.isAllSelectedClienti())}}function M2e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",32),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return e.KtG(a?r.selectionClienti.toggle(l.oid):null)}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("checked",n.selectionClienti.isSelected(t.oid))}}function q2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",30),e.YNc(1,M2e,1,1,"mat-checkbox",31),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.isClienteValido(t))}}function P2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.nome")))}function k2e(i,o){if(1&i&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Udp("background-color",t.mercato.coloreHex),e.Q6J("appInvertColor",t.mercato.coloreHex),e.xp6(1),e.hij(" ",t.mercato.descrizione," ")}}function S2e(i,o){if(1&i&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Udp("background-color",t.canaleVendita.coloreHex),e.Q6J("appInvertColor",t.canaleVendita.coloreHex),e.xp6(1),e.hij(" ",t.canaleVendita.descrizione," ")}}function y2e(i,o){if(1&i&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Udp("background-color",t.fonte.coloreHex),e.Q6J("appInvertColor",t.fonte.coloreHex),e.xp6(1),e.hij(" ",t.fonte.descrizione," ")}}Xl.\u0275fac=function(o){return new(o||Xl)(e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o),e.Y36(C.t))},Xl.\u0275cmp=e.Xpm({type:Xl,selectors:[["app-pickup"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:93,vars:53,consts:[[1,"container-fluid","p-3"],[1,"filter"],[1,"row","filter-base"],[1,"col-9"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","dateChange","ngModelChange"],["matSuffix","",3,"for"],["datePickerDataPrenotazioneDal",""],["datePickerDataPrenotazioneAl",""],["datePickerArrivoDal",""],["datePickerArrivoAl",""],[1,"col-3","text-right","pt-2","font-weight-bold",3,"click"],[1,"align-middle","color-pink","cursor-pointer"],["mat-icon-button","","color","primary",1,"align-middle"],[1,"filter-adv",3,"hidden"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],["displayMember","descrizione",3,"dataLoader","placeholder","valueChange"],["class","w-100 chart-outer-container pt-3 pr-3 pl-3 border mat-elevation-z1 mb-3 bg-white",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mb-2"],["href","#","class","mr-2 rounded-lg p-1 d-inline-block",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mat-table-container"],[1,"mat-table","pickup-table",3,"dataSource"],["matColumnDef","key"],["class","justify-content-center",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","prenotazioni"],["matColumnDef","roomNight"],["matColumnDef","revenue"],["matColumnDef","ADR"],["matColumnDef","cancellazioni"],["matColumnDef","roomNightCancellazioni"],["matColumnDef","revenueCancellazioni"],["matColumnDef","ADRCancellazioni"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"w-100","chart-outer-container","pt-3","pr-3","pl-3","border","mat-elevation-z1","mb-3","bg-white"],[1,"mb-3"],[1,"w-100","pickup-chart-container"],[3,"gradient","results","scheme","xAxis","yAxis","legend","legendTitle","showXAxisLabel","showYAxisLabel","yAxisTickFormatting","xAxisTickFormatting","rotateXAxisTicks","legendPosition"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["href","#",1,"mr-2","rounded-lg","p-1","d-inline-block",3,"ngClass","click"],[1,"justify-content-center"],[1,"w-100","text-center"],["class","annoPrecedente",4,"ngIf"],[1,"annoPrecedente"],[1,"mat-table-header"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"input",7),e.NdJ("dateChange",function(){return t.onDataPrenotazioneDalChange()})("ngModelChange",function(a){return t.rq.dataPrenotazioneDal=a}),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"mat-datepicker-toggle",8)(10,"mat-datepicker",null,9),e.qZA()(),e.TgZ(12,"div",5)(13,"mat-form-field",6)(14,"input",7),e.NdJ("dateChange",function(){return t.onDataPrenotazioneAlChange()})("ngModelChange",function(a){return t.rq.dataPrenotazioneAl=a}),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"mat-datepicker-toggle",8)(17,"mat-datepicker",null,10),e.qZA()(),e.TgZ(19,"div",5)(20,"mat-form-field",6)(21,"input",7),e.NdJ("dateChange",function(){return t.onArrivoDalChange()})("ngModelChange",function(a){return t.rq.arrivoDal=a}),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"mat-datepicker-toggle",8)(24,"mat-datepicker",null,11),e.qZA()(),e.TgZ(26,"div",5)(27,"mat-form-field",6)(28,"input",7),e.NdJ("dateChange",function(){return t.onArrivoAlChange()})("ngModelChange",function(a){return t.rq.arrivoAl=a}),e.ALo(29,"translate"),e.qZA(),e._UZ(30,"mat-datepicker-toggle",8)(31,"mat-datepicker",null,12),e.qZA()()()(),e.TgZ(33,"div",13),e.NdJ("click",function(){return t.showFilterAdv=!t.showFilterAdv}),e.TgZ(34,"span",14),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"button",15)(38,"mat-icon"),e._uU(39,"keyboard_arrow_down"),e.qZA()()()(),e.TgZ(40,"div",16)(41,"div",4)(42,"div",5)(43,"app-view-select",17),e.NdJ("valueChange",function(a){return t.rq.oidUbicazioneIstat=a.oid,t.download()}),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",5)(46,"app-view-select",18),e.NdJ("valueChange",function(a){return t.rq.oidMercato=a.oid,t.download()}),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"div",5)(49,"app-view-select",18),e.NdJ("valueChange",function(a){return t.rq.oidCanaleVendita=a.oid,t.download()}),e.ALo(50,"translate"),e.qZA()()()()(),e.YNc(51,Kfe,7,18,"div",19),e.YNc(52,Gfe,4,3,"div",20),e.TgZ(53,"div",21)(54,"div",22),e.YNc(55,Bfe,3,7,"a",23),e.ALo(56,"selectEnum"),e.qZA(),e.TgZ(57,"div",24)(58,"mat-table",25),e.ynx(59,26),e.YNc(60,Vfe,3,3,"mat-header-cell",27),e.YNc(61,jfe,4,2,"mat-cell",28),e.BQk(),e.ynx(62,29),e.YNc(63,Wfe,3,3,"mat-header-cell",27),e.YNc(64,t2e,4,2,"mat-cell",28),e.BQk(),e.ynx(65,30),e.YNc(66,i2e,3,3,"mat-header-cell",27),e.YNc(67,n2e,4,2,"mat-cell",28),e.BQk(),e.ynx(68,31),e.YNc(69,a2e,3,3,"mat-header-cell",27),e.YNc(70,r2e,5,4,"mat-cell",28),e.BQk(),e.ynx(71,32),e.YNc(72,c2e,3,3,"mat-header-cell",27),e.YNc(73,p2e,5,4,"mat-cell",28),e.BQk(),e.ynx(74,33),e.YNc(75,d2e,3,3,"mat-header-cell",27),e.YNc(76,_2e,4,2,"mat-cell",28),e.BQk(),e.ynx(77,34),e.YNc(78,u2e,3,3,"mat-header-cell",27),e.YNc(79,h2e,4,2,"mat-cell",28),e.BQk(),e.ynx(80,35),e.YNc(81,f2e,3,3,"mat-header-cell",27),e.YNc(82,b2e,5,4,"mat-cell",28),e.BQk(),e.ynx(83,36),e.YNc(84,v2e,3,3,"mat-header-cell",27),e.YNc(85,x2e,5,4,"mat-cell",28),e.BQk(),e.YNc(86,Z2e,1,0,"mat-header-row",37),e.YNc(87,A2e,1,0,"mat-row",38),e.qZA()(),e.TgZ(88,"div",39)(89,"button",40),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"Pickup",t.displayedColumns)}),e.TgZ(90,"i",41),e._uU(91,"get_app"),e.qZA()(),e._UZ(92,"mat-paginator",42),e.qZA()()()),2&o){const n=e.MAs(11),a=e.MAs(18),l=e.MAs(25),r=e.MAs(32);e.xp6(7),e.s9C("placeholder",e.lcZ(8,34,"sbm.pickup.dataPrenotazioneDal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dataPrenotazioneDal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(15,36,"sbm.pickup.dataPrenotazioneAl")),e.Q6J("matDatepicker",a)("ngModel",t.rq.dataPrenotazioneAl),e.xp6(2),e.Q6J("for",a),e.xp6(5),e.s9C("placeholder",e.lcZ(22,38,"sbm.pickup.arrivoDal")),e.Q6J("matDatepicker",l)("ngModel",t.rq.arrivoDal),e.xp6(2),e.Q6J("for",l),e.xp6(5),e.s9C("placeholder",e.lcZ(29,40,"sbm.pickup.arrivoAl")),e.Q6J("matDatepicker",r)("ngModel",t.rq.arrivoAl),e.xp6(2),e.Q6J("for",r),e.xp6(5),e.Oqu(e.lcZ(36,42,"globals.filtriAvanzati")),e.xp6(5),e.Q6J("hidden",!t.showFilterAdv),e.xp6(3),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("placeholder",e.lcZ(44,44,"sbm.pickup.ubicazioneIstat")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaMercatoRQ))("placeholder",e.lcZ(47,46,"sbm.pickup.mercato")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getParametriRicercaViewSelect(t.getParametriRicercaCanaleVenditaRQ))("placeholder",e.lcZ(50,48,"sbm.pickup.canaleVendita")),e.xp6(2),e.Q6J("ngIf",null!=t.chart&&t.chart.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("ngForOf",e.xi3(56,50,t.enumTipoDato,"tipoDatoPrenotazioniPickup")),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,Ue.Hw,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,Ke.rt,ne.d,Te.A,ke.f,z.X$],styles:[".pickup-chart-container[_ngcontent-%COMP%]{height:250px}.chart-outer-container[_ngcontent-%COMP%]{padding-bottom:95px;border-radius:7px}  .pickup-chart-container .chart-legend{margin-top:1rem!important}.annoPrecedente[_ngcontent-%COMP%]{color:#999;font-size:12px;width:100%;text-align:center}  .pickup-table .mat-cell{flex-wrap:wrap!important}.not-selected[_ngcontent-%COMP%]{border:1px solid #aaaaaa;background-color:#fff}.selected[_ngcontent-%COMP%]{border:1px solid #007bff;background-color:#d8ecf3;font-weight:600}"]});const bc=function(i){return{"color-red":i}};function J2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33)(1,"div",34)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"span",35),e.YNc(5,k2e,2,4,"span",36),e.YNc(6,S2e,2,4,"span",36),e.YNc(7,y2e,2,4,"span",37),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(5,bc,!n.isClienteValido(t))),e.xp6(3),e.Oqu(t.nome),e.xp6(2),e.Q6J("ngIf",null!=t.mercato),e.xp6(1),e.Q6J("ngIf",null!=t.canaleVendita),e.xp6(1),e.Q6J("ngIf",null!=t.fonte)}}function E2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.cognome")))}function N2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,bc,!n.isClienteValido(t))),e.xp6(1),e.hij(" ",t.cognome," ")}}function O2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.cellulare")))}function L2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,bc,!n.isClienteValido(t))),e.xp6(1),e.hij(" ",t.cellulare," ")}}function D2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.cliente.proprieta.email")))}function I2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,bc,!n.isClienteValido(t))),e.xp6(1),e.hij(" ",t.email," ")}}function Q2e(i,o){1&i&&e._UZ(0,"mat-header-row",40)}function U2e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",41),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}class Ft extends f.H{constructor(o,t,n,a){super(),this.utility=o,this.apiService=t,this.containerService=n,this.route=a,this.displayedColumns=["select","nome","cognome","cellulare","email"],this.rq=new d.k$g,this.filters=[],this.pageSize=10,this.selectionClienti=new me.Ov(!0,[]),this.onInviaClienti=new e.vpe}ngOnInit(){this.filters.push(new d.wn$("cognome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("email",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("cellulare",c.Hp.Contains,"",c.NM.String)),this.sub=this.route.queryParamMap.subscribe(o=>{let t=o.get("oidApiKey");t&&!isNaN(+t)&&(this.oidApiKey=+t)})}ngAfterViewInit(){this.download()}download(o=!0){o&&this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getClientiFilter(this.rq).subscribe(t=>{for(let n of t.data)try{null!=n.mercato&&(n.mercato.coloreHex=Z(n.mercato.colore).hex()),null!=n.canaleVendita&&(n.canaleVendita.coloreHex=Z(n.canaleVendita.colore).hex()),null!=n.fonte&&(n.fonte.coloreHex=Z(n.fonte.colore).hex())}catch(a){}this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o&&this.setIsLoading(!1)})}inviaClienti(){let o=new d.PKJ;o.oidApiKey=this.oidApiKey,o.oidClienti=this.selectionClienti.selected,this.selectionClienti=new me.Ov(!0,[]),this.onInviaClienti.emit(o)}onSearch(o,t){this.selectionClienti=new me.Ov(!0,[]),this.filters[o].value=t,this.download(!1)}onPageChange(){this.selectionClienti=new me.Ov(!0,[]),this.paginator.pageSize!=this.pageSize&&(this.pageSize=this.paginator.pageSize,this.paginator.firstPage()),this.containerService.scrollToTop()}isAllSelectedClienti(){return this.selectionClienti.selected.length==this.getViewData().length}masterToggleClienti(){this.isAllSelectedClienti()?this.selectionClienti.clear():this.getViewData().forEach(o=>this.selectionClienti.select(o.oid))}getViewData(){return this.dataSource.data.slice(this.paginator.pageIndex*this.pageSize,this.paginator.pageIndex*this.pageSize+this.pageSize).filter(o=>this.isClienteValido(o))}isClienteValido(o){return!!o.ragioneSociale&&!!o.nome&&!!o.cognome&&!!o.email&&this.utility.validateEmail(o.email)}ngOnDestroy(){this.sub.unsubscribe()}}Ft.\u0275fac=function(o){return new(o||Ft)(e.Y36(C.t),e.Y36(A.s),e.Y36(te.J),e.Y36(je.gz))},Ft.\u0275cmp=e.Xpm({type:Ft,selectors:[["app-invia-clienti"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},outputs:{onInviaClienti:"onInviaClienti"},features:[e.qOj],decls:44,vars:24,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["cognomeSearch",""],["emailSearch",""],["cellulareSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-edit",4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","cognome"],["matColumnDef","cellulare"],["matColumnDef","email"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["mat-flat-button","","color","primary",1,"mt-4",3,"disabled","click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-th-edit"],["color","primary",1,"d-inline-block","mt-2",3,"checked","indeterminate","change"],[1,"mat-td-edit"],["class","d-inline-block mt-2","color","primary",3,"checked","click","change",4,"ngIf"],["color","primary",1,"d-inline-block","mt-2",3,"checked","click","change"],[3,"ngClass"],[1,"d-flex","flex-column"],[1,"parametri-ricerca-container"],["class","rounded pr-1 pl-1 mr-1 mt-1 parametro-ricerca",3,"backgroundColor","appInvertColor",4,"ngIf"],["class","rounded pr-1 pl-1 mt-1 parametro-ricerca",3,"backgroundColor","appInvertColor",4,"ngIf"],[1,"rounded","pr-1","pl-1","mr-1","mt-1","parametro-ricerca",3,"appInvertColor"],[1,"rounded","pr-1","pl-1","mt-1","parametro-ricerca",3,"appInvertColor"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"input",5,6),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(6);return e.KtG(t.onSearch(0,l.value))}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"input",5,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(11);return e.KtG(t.onSearch(1,l.value))}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",3)(14,"mat-form-field",4)(15,"input",5,8),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(16);return e.KtG(t.onSearch(2,l.value))}),e.ALo(17,"translate"),e.qZA()()()()(),e.YNc(18,w2e,4,3,"div",9),e.TgZ(19,"div",10)(20,"div",11)(21,"mat-table",12),e.ynx(22,13),e.YNc(23,z2e,2,2,"mat-header-cell",14),e.YNc(24,q2e,2,1,"mat-cell",15),e.BQk(),e.ynx(25,16),e.YNc(26,P2e,3,3,"mat-header-cell",17),e.YNc(27,J2e,8,7,"mat-cell",18),e.BQk(),e.ynx(28,19),e.YNc(29,E2e,3,3,"mat-header-cell",17),e.YNc(30,N2e,2,4,"mat-cell",18),e.BQk(),e.ynx(31,20),e.YNc(32,O2e,3,3,"mat-header-cell",17),e.YNc(33,L2e,2,4,"mat-cell",18),e.BQk(),e.ynx(34,21),e.YNc(35,D2e,3,3,"mat-header-cell",17),e.YNc(36,I2e,2,4,"mat-cell",18),e.BQk(),e.YNc(37,Q2e,1,0,"mat-header-row",22),e.YNc(38,U2e,1,1,"mat-row",23),e.qZA()(),e.TgZ(39,"div",24)(40,"mat-paginator",25),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()(),e.TgZ(41,"button",26),e.NdJ("click",function(){return t.inviaClienti()}),e._uU(42),e.ALo(43,"translate"),e.qZA()()()}2&o&&(e.xp6(5),e.s9C("placeholder",e.lcZ(7,16,"bo.cliente.proprieta.cognome")),e.Q6J("value",t.filters[0].value),e.xp6(5),e.s9C("placeholder",e.lcZ(12,18,"bo.cliente.proprieta.email")),e.Q6J("value",t.filters[1].value),e.xp6(5),e.s9C("placeholder",e.lcZ(17,20,"bo.cliente.proprieta.cellulare")),e.Q6J("value",t.filters[2].value),e.xp6(3),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("disabled",null==t.selectionClienti||0==t.selectionClienti.selected.length),e.xp6(1),e.Oqu(e.lcZ(43,22,"sbm.plugins.invia-clienti.inviaClienti")))},dependencies:[m.mk,m.O5,k.Z,w.X,V.FC,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,z.X$],styles:[".parametro-ricerca[_ngcontent-%COMP%]{font-size:11px;padding-top:.1rem!important;padding-bottom:.1rem!important;white-space:nowrap}.parametri-ricerca-container[_ngcontent-%COMP%]{white-space:break-spaces}"]});class jl extends f.H{constructor(o,t){super(),this.apiService=o,this.headerService=t}ngOnInit(){this.headerService.setTitle("sbm.plugins.active-campaign.title")}inviaClienti(o){this.setIsLoading(!0),(o.oidClienti.length>10?this.apiService.activeCampaignInviaClientiBulk(o):this.apiService.activeCampaignInviaClienti(o)).subscribe(t=>{t.data.success?this.showInfo("sbm.plugins.invia-clienti.clientiInviati"):this.showError("sbm.plugins.invia-clienti.erroreInvioClienti"),this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}function Y2e(i,o){1&i&&(e.TgZ(0,"div",38)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.plugins.invia-prenotazioni.nessunaPrenotazione")))}function R2e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",39)(1,"mat-checkbox",40),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterTogglePrenotazioni():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionPrenotazioni.hasValue()&&t.isAllSelectedPrenotazioni())("indeterminate",t.selectionPrenotazioni.hasValue()&&!t.isAllSelectedPrenotazioni())}}function F2e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",43),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw();return e.KtG(a?r.selectionPrenotazioni.toggle(l.oid):null)}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("checked",n.selectionPrenotazioni.isSelected(t.oid))}}function H2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",41),e.YNc(1,F2e,1,1,"mat-checkbox",42),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.isPrenotazioneValida(t))}}function K2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.portale")))}function G2e(i,o){if(1&i&&e._UZ(0,"img",48),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.portaleXAlbergo.portale.urlImmagineIcona,e.LSH)}}function $2e(i,o){1&i&&(e.TgZ(0,"span")(1,"b"),e._uU(2,"PMS"),e.qZA()())}function B2e(i,o){1&i&&(e.TgZ(0,"span")(1,"b"),e._uU(2,"CRM"),e.qZA()())}function V2e(i,o){1&i&&(e.TgZ(0,"span")(1,"b"),e._uU(2,"EXT"),e.qZA()())}jl.\u0275fac=function(o){return new(o||jl)(e.Y36(A.s),e.Y36(ie.r))},jl.\u0275cmp=e.Xpm({type:jl,selectors:[["app-active-campaign"]],features:[e.qOj],decls:1,vars:0,consts:[[3,"onInviaClienti"]],template:function(o,t){1&o&&(e.TgZ(0,"app-invia-clienti",0),e.NdJ("onInviaClienti",function(a){return t.inviaClienti(a)}),e.qZA())},dependencies:[Ft]});const mt=function(i){return{"color-red":i}};function X2e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",45),e.YNc(1,G2e,1,1,"img",46),e.YNc(2,$2e,3,0,"span",47),e.YNc(3,B2e,3,0,"span",47),e.YNc(4,V2e,3,0,"span",47),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(5,mt,!n.isPrenotazioneValida(t))),e.xp6(1),e.Q6J("ngIf",(t.tipoPrenotazione==n.enumTipoPrenotazione.WebBooking||t.tipoPrenotazione==n.enumTipoPrenotazione.OTA)&&null!=t.portaleXAlbergo&&null!=t.portaleXAlbergo.portale&&!!t.portaleXAlbergo.portale.urlImmagineIcona),e.xp6(1),e.Q6J("ngIf",t.tipoPrenotazione==n.enumTipoPrenotazione.PMS),e.xp6(1),e.Q6J("ngIf",t.tipoPrenotazione==n.enumTipoPrenotazione.CRM),e.xp6(1),e.Q6J("ngIf",t.tipoPrenotazione==n.enumTipoPrenotazione.API)}}function j2e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.codicePrenotazione")))}function W2e(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("(ota: ",t.codiceOTA,")")}}function eCe(i,o){if(1&i&&(e.TgZ(0,"div",52),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("(prev: ",t.preventivo.codicePreventivo,")")}}function tCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49)(1,"div",50)(2,"div"),e._uU(3),e.qZA(),e.YNc(4,W2e,2,1,"div",51),e.YNc(5,eCe,2,1,"div",51),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(4,mt,!n.isPrenotazioneValida(t))),e.xp6(3),e.Oqu(t.codicePrenotazione),e.xp6(1),e.Q6J("ngIf",!!t.codiceOTA),e.xp6(1),e.Q6J("ngIf",null!=t.preventivo)}}function iCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.dataPren")))}function oCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(5,mt,!n.isPrenotazioneValida(t))),e.xp6(1),e.Oqu(e.xi3(2,2,t.dataPren,"dd/MM/yyyy"))}}function nCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.arrivo")))}function aCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(5,mt,!n.isPrenotazioneValida(t))),e.xp6(1),e.Oqu(e.xi3(2,2,t.arrivo,"dd/MM/yyyy"))}}function lCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.partenza")))}function rCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(5,mt,!n.isPrenotazioneValida(t))),e.xp6(1),e.Oqu(e.xi3(2,2,t.partenza,"dd/MM/yyyy"))}}function cCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.pax")))}function sCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,mt,!n.isPrenotazioneValida(t))),e.xp6(1),e.Oqu(t.pax)}}function pCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.cliente")))}function dCe(i,o){if(1&i&&(e.TgZ(0,"div",50)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",54),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(null==t.cliente?null:t.cliente.ragioneSociale),e.xp6(2),e.Oqu(null==t.cliente?null:t.cliente.email)}}function mCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e.YNc(1,dCe,5,2,"div",53),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,mt,!n.isPrenotazioneValida(t))),e.xp6(1),e.Q6J("ngIf",null!=t.cliente)}}function _Ce(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tipoCameraOTA")))}function uCe(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t.tipoCamera?null:t.tipoCamera.nome," ")}}function gCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e.YNc(1,uCe,2,1,"span",47),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(3,mt,!n.isPrenotazioneValida(t))),e.xp6(1),e.Q6J("ngIf",null==t.tipoCameraOTA),e.xp6(2),e.Oqu(null==t.tipoCameraOTA||null==t.tipoCameraOTA.tipoCamera?null:t.tipoCameraOTA.tipoCamera.nome)}}function hCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tariffaOTA")))}function fCe(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.tariffaOTA.trattamento.nome," ")}}function CCe(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.trattamento.nome," ")}}function bCe(i,o){if(1&i&&(e.TgZ(0,"div",57),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.promozione.nome," ")}}function vCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",55),e.YNc(1,fCe,2,1,"span",47),e.YNc(2,CCe,2,1,"span",47),e.YNc(3,bCe,2,1,"div",56),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(4,mt,!n.isPrenotazioneValida(t))),e.xp6(1),e.Q6J("ngIf",null!=t.tariffaOTA&&null!=t.tariffaOTA.trattamento),e.xp6(1),e.Q6J("ngIf",(null==t.tariffaOTA||null==t.tariffaOTA.trattamento)&&null!=t.trattamento),e.xp6(1),e.Q6J("ngIf",null!=t.promozione)}}function TCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.importo")))}function xCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49)(1,"b",59),e._uU(2),e.ALo(3,"eurCurrency"),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(4,mt,!n.isPrenotazioneValida(t))),e.xp6(2),e.hij(" ",e.lcZ(3,2,t.importo)," ")}}function ZCe(i,o){1&i&&e._UZ(0,"mat-header-row",60)}function ACe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",61),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}class bt extends f.H{constructor(o,t,n,a){super(),this.utility=o,this.apiService=t,this.containerService=n,this.route=a,this.displayedColumns=["select","portaleXAlbergo","codiceOTA","dataPren","arrivo","partenza","pax","cliente.ragioneSociale","tipoCamera.nome","trattamento.nome","importo"],this.rq=new d.k$g,this.filters=[],this.enumTipoPrenotazione=c.DS,this.pageSize=10,this.selectionPrenotazioni=new me.Ov(!0,[]),this.isSoloPrenotazioniImportate=!1,this.isSoloPrenotazioniConCameraAssegnata=!1,this.checkCellulare=!1,this.onInviaPrenotazioni=new e.vpe}ngOnInit(){this.rq.sorting=[new d.aQR("dataPren",c.nI.Desc)],this.filters.push(new d.wn$("arrivo",c.Hp.GreaterEqual,this.getDate(this.today),c.NM.Date)),this.filters.push(new d.wn$("arrivo",c.Hp.LowerEqual,this.getDate(this.oneYearFromToday),c.NM.Date)),this.sub=this.route.queryParamMap.subscribe(o=>{let t=o.get("oidApiKey");t&&!isNaN(+t)&&(this.oidApiKey=+t)})}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.rq.filters=this.utility.getFilters(this.filters),this.apiService.getPrenotazioniFilter(this.rq).subscribe(o=>{this.dataSource=new s.r4(o.data.prenotazioni),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}inviaPrenotazioni(){let o=new d.JWD;o.oidApiKey=this.oidApiKey,o.oidPrenotazioni=this.selectionPrenotazioni.selected,this.selectionPrenotazioni=new me.Ov(!0,[]),this.onInviaPrenotazioni.emit(o)}onSearch(o,t){this.selectionPrenotazioni=new me.Ov(!0,[]),this.filters[o].value=t,this.download()}onPageChange(){this.selectionPrenotazioni=new me.Ov(!0,[]),this.paginator.pageSize!=this.pageSize&&(this.pageSize=this.paginator.pageSize,this.paginator.firstPage()),this.containerService.scrollToTop()}isAllSelectedPrenotazioni(){return this.selectionPrenotazioni.selected.length==this.getViewData().length}masterTogglePrenotazioni(){this.isAllSelectedPrenotazioni()?this.selectionPrenotazioni.clear():this.getViewData().forEach(o=>this.selectionPrenotazioni.select(o.oid))}getViewData(){return this.dataSource.data.slice(this.paginator.pageIndex*this.pageSize,this.paginator.pageIndex*this.pageSize+this.pageSize).filter(o=>this.isPrenotazioneValida(o))}isPrenotazioneValida(o){return null!=o.cliente&&!!o.cliente.ragioneSociale&&!!o.cliente.nome&&!!o.cliente.cognome&&!!o.cliente.email&&this.utility.validateEmail(o.cliente.email)&&(!this.isSoloPrenotazioniImportate||!!o.codicePrenotazione)&&(!this.isSoloPrenotazioniConCameraAssegnata||!!o.camera)&&(!this.checkCellulare||this.isCellulareValido(o.cliente.cellulare))}isCellulareValido(o){return!0}ngOnDestroy(){this.sub.unsubscribe()}}bt.\u0275fac=function(o){return new(o||bt)(e.Y36(C.t),e.Y36(A.s),e.Y36(te.J),e.Y36(je.gz))},bt.\u0275cmp=e.Xpm({type:bt,selectors:[["app-invia-prenotazioni"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},inputs:{isSoloPrenotazioniImportate:"isSoloPrenotazioniImportate",isSoloPrenotazioniConCameraAssegnata:"isSoloPrenotazioniConCameraAssegnata",checkCellulare:"checkCellulare"},outputs:{onInviaPrenotazioni:"onInviaPrenotazioni"},features:[e.qOj],decls:60,vars:25,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"placeholder","value","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"placeholder","value","dateChange"],["matSuffix","",3,"for"],["picker",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-edit",4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","portaleXAlbergo"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",3,"ngClass",4,"matCellDef"],["matColumnDef","codiceOTA"],[4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","dataPren"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","pax"],["matColumnDef","cliente.ragioneSociale"],["matColumnDef","tipoCamera.nome"],["matColumnDef","trattamento.nome"],["class","flex-wrap",3,"ngClass",4,"matCellDef"],["matColumnDef","importo"],["class","justify-content-end",4,"matHeaderCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["mat-flat-button","","color","primary",1,"mt-4",3,"disabled","click"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-th-edit"],["color","primary",1,"d-inline-block","mt-2",3,"checked","indeterminate","change"],[1,"mat-td-edit"],["class","d-inline-block mt-2","color","primary",3,"checked","click","change",4,"ngIf"],["color","primary",1,"d-inline-block","mt-2",3,"checked","click","change"],[1,"justify-content-center"],[1,"justify-content-center",3,"ngClass"],["class","portale-icon",3,"src",4,"ngIf"],[4,"ngIf"],[1,"portale-icon",3,"src"],[3,"ngClass"],[1,"d-flex","flex-column"],["class","codiceOTAGrid",4,"ngIf"],[1,"codiceOTAGrid"],["class","d-flex flex-column",4,"ngIf"],[1,"cliente-email"],[1,"flex-wrap",3,"ngClass"],["class","font-italic small w-100",4,"ngIf"],[1,"font-italic","small","w-100"],[1,"justify-content-end"],[1,"w-100","pr-3","text-right"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(15);return e.KtG(l.open())}),e.TgZ(9,"input",6),e.NdJ("dateChange",function(l){return null!=l.value?t.filters[0].value=t.getDate(l.value):null}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("dateChange",function(l){return null!=l.value?t.onSearch(1,t.getDate(l.value)):null}),e.ALo(12,"translate"),e.qZA()(),e._UZ(13,"mat-datepicker-toggle",8)(14,"mat-date-range-picker",null,9),e.qZA()()()(),e.YNc(16,Y2e,4,3,"div",10),e.TgZ(17,"div",11)(18,"div",12)(19,"mat-table",13),e.ynx(20,14),e.YNc(21,R2e,2,2,"mat-header-cell",15),e.YNc(22,H2e,2,1,"mat-cell",16),e.BQk(),e.ynx(23,17),e.YNc(24,K2e,3,3,"mat-header-cell",18),e.YNc(25,X2e,5,7,"mat-cell",19),e.BQk(),e.ynx(26,20),e.YNc(27,j2e,3,3,"mat-header-cell",21),e.YNc(28,tCe,6,6,"mat-cell",22),e.BQk(),e.ynx(29,23),e.YNc(30,iCe,3,3,"mat-header-cell",21),e.YNc(31,oCe,3,7,"mat-cell",22),e.BQk(),e.ynx(32,24),e.YNc(33,nCe,3,3,"mat-header-cell",21),e.YNc(34,aCe,3,7,"mat-cell",22),e.BQk(),e.ynx(35,25),e.YNc(36,lCe,3,3,"mat-header-cell",21),e.YNc(37,rCe,3,7,"mat-cell",22),e.BQk(),e.ynx(38,26),e.YNc(39,cCe,3,3,"mat-header-cell",21),e.YNc(40,sCe,2,4,"mat-cell",22),e.BQk(),e.ynx(41,27),e.YNc(42,pCe,3,3,"mat-header-cell",21),e.YNc(43,mCe,2,4,"mat-cell",22),e.BQk(),e.ynx(44,28),e.YNc(45,_Ce,3,3,"mat-header-cell",21),e.YNc(46,gCe,4,5,"mat-cell",22),e.BQk(),e.ynx(47,29),e.YNc(48,hCe,3,3,"mat-header-cell",21),e.YNc(49,vCe,4,6,"mat-cell",30),e.BQk(),e.ynx(50,31),e.YNc(51,TCe,3,3,"mat-header-cell",32),e.YNc(52,xCe,4,6,"mat-cell",22),e.BQk(),e.YNc(53,ZCe,1,0,"mat-header-row",33),e.YNc(54,ACe,1,1,"mat-row",34),e.qZA()(),e.TgZ(55,"div",35)(56,"mat-paginator",36),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()(),e.TgZ(57,"button",37),e.NdJ("click",function(){return t.inviaPrenotazioni()}),e._uU(58),e.ALo(59,"translate"),e.qZA()()()}if(2&o){const n=e.MAs(15);e.xp6(6),e.Oqu(e.lcZ(7,17,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.s9C("placeholder",e.lcZ(10,19,"bo.prenotazione.proprieta.arrivo")),e.Q6J("value",t.filters[0].value),e.xp6(2),e.s9C("placeholder",e.lcZ(12,21,"bo.prenotazione.proprieta.partenza")),e.Q6J("value",t.filters[1].value),e.xp6(2),e.Q6J("for",n),e.xp6(3),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(34),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("disabled",null==t.selectionPrenotazioni||0==t.selectionPrenotazioni.selected.length),e.xp6(1),e.Oqu(e.lcZ(59,23,"sbm.plugins.invia-prenotazioni.inviaPrenotazioni"))}},dependencies:[m.mk,m.O5,w.X,V.FC,h.eB,M.v_,M.$V,M.nX,y.nW,y.wx,y.zY,y.By,y._g,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,m.uU,ke.f,z.X$],styles:[".cliente-email[_ngcontent-%COMP%]{font-size:small;font-style:italic}.codiceOTAGrid[_ngcontent-%COMP%]{font-size:x-small;font-style:italic}.mat-column-select[_ngcontent-%COMP%]{width:80px!important;max-width:80px!important;min-width:80px!important}"]});class Wl extends f.H{constructor(o,t){super(),this.apiService=o,this.headerService=t}ngOnInit(){this.headerService.setTitle("sbm.plugins.hoau.title")}inviaPrenotazioni(o){this.setIsLoading(!0),this.apiService.hoauInviaPrenotazioni(o).subscribe(t=>{t.data.success?this.showInfo("sbm.plugins.invia-prenotazioni.prenotazioniInviate"):this.showError("sbm.plugins.invia-prenotazioni.erroreInvioPrenotazioni"),this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}Wl.\u0275fac=function(o){return new(o||Wl)(e.Y36(A.s),e.Y36(ie.r))},Wl.\u0275cmp=e.Xpm({type:Wl,selectors:[["app-hoau"]],features:[e.qOj],decls:1,vars:2,consts:[[3,"isSoloPrenotazioniConCameraAssegnata","checkCellulare","onInviaPrenotazioni"]],template:function(o,t){1&o&&(e.TgZ(0,"app-invia-prenotazioni",0),e.NdJ("onInviaPrenotazioni",function(a){return t.inviaPrenotazioni(a)}),e.qZA()),2&o&&e.Q6J("isSoloPrenotazioniConCameraAssegnata",!0)("checkCellulare",!0)},dependencies:[bt]});class er extends f.H{constructor(o,t){super(),this.apiService=o,this.headerService=t}ngOnInit(){this.headerService.setTitle("sbm.plugins.hub-spot.title")}inviaClienti(o){this.setIsLoading(!0),this.apiService.hubSpotInviaClientiBulk(o).subscribe(t=>{t.data.success?this.showInfo("sbm.plugins.invia-clienti.clientiInviati"):this.showError("sbm.plugins.invia-clienti.erroreInvioClienti"),this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}er.\u0275fac=function(o){return new(o||er)(e.Y36(A.s),e.Y36(ie.r))},er.\u0275cmp=e.Xpm({type:er,selectors:[["app-hub-spot"]],features:[e.qOj],decls:1,vars:0,consts:[[3,"onInviaClienti"]],template:function(o,t){1&o&&(e.TgZ(0,"app-invia-clienti",0),e.NdJ("onInviaClienti",function(a){return t.inviaClienti(a)}),e.qZA())},dependencies:[Ft]});const wCe=["fileSelect"];function zCe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",6,7),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.fileSelected(a.target))}),e.qZA()}}function MCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.codiceOTA")))}const Ht=function(i){return{"color-red":i}};function qCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",27),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(2,Ht,!!t.notValidMessage)),e.xp6(1),e.Oqu(t.codiceOTA)}}function PCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.dataPren")))}function kCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",27),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(5,Ht,!!t.notValidMessage)),e.xp6(1),e.Oqu(e.xi3(2,2,t.dataPren,"dd/MM/yyyy"))}}function SCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tipoCameraOTA")))}function yCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",27),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(2,Ht,!!t.notValidMessage)),e.xp6(1),e.Oqu(null!=t.tipoCameraOTA?t.tipoCameraOTA.descrizione:"")}}function JCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.tariffaOTA")))}function ECe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",27),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(2,Ht,!!t.notValidMessage)),e.xp6(1),e.Oqu(null!=t.tariffaOTA?t.tariffaOTA.descrizione:"")}}function NCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.arrivo")))}function OCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",27),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(5,Ht,!!t.notValidMessage)),e.xp6(1),e.Oqu(e.xi3(2,2,t.arrivo,"dd/MM/yyyy"))}}function LCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.partenza")))}function DCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",27),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(5,Ht,!!t.notValidMessage)),e.xp6(1),e.Oqu(e.xi3(2,2,t.partenza,"dd/MM/yyyy"))}}function ICe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.prenotazione.proprieta.componenti")))}function QCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",28),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Ht,!!t.notValidMessage)),e.xp6(1),e.Oqu(n.getComponentiString(t))}}function UCe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.importa-prenotazioni.errori")))}function YCe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",29),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.notValidMessage)}}function RCe(i,o){1&i&&e._UZ(0,"mat-header-row",30)}function FCe(i,o){1&i&&e._UZ(0,"mat-row")}function HCe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",8)(2,"mat-table",9),e.ynx(3,10),e.YNc(4,MCe,3,3,"mat-header-cell",11),e.YNc(5,qCe,2,4,"mat-cell",12),e.BQk(),e.ynx(6,13),e.YNc(7,PCe,3,3,"mat-header-cell",11),e.YNc(8,kCe,3,7,"mat-cell",12),e.BQk(),e.ynx(9,14),e.YNc(10,SCe,3,3,"mat-header-cell",11),e.YNc(11,yCe,2,4,"mat-cell",12),e.BQk(),e.ynx(12,15),e.YNc(13,JCe,3,3,"mat-header-cell",11),e.YNc(14,ECe,2,4,"mat-cell",12),e.BQk(),e.ynx(15,16),e.YNc(16,NCe,3,3,"mat-header-cell",11),e.YNc(17,OCe,3,7,"mat-cell",12),e.BQk(),e.ynx(18,17),e.YNc(19,LCe,3,3,"mat-header-cell",11),e.YNc(20,DCe,3,7,"mat-cell",12),e.BQk(),e.ynx(21,18),e.YNc(22,ICe,3,3,"mat-header-cell",11),e.YNc(23,QCe,2,4,"mat-cell",19),e.BQk(),e.ynx(24,20),e.YNc(25,UCe,3,3,"mat-header-cell",11),e.YNc(26,YCe,2,1,"mat-cell",21),e.BQk(),e.YNc(27,RCe,1,0,"mat-header-row",22),e.YNc(28,FCe,1,0,"mat-row",23),e.qZA()(),e.TgZ(29,"div",24),e._UZ(30,"mat-paginator",25),e.qZA(),e.TgZ(31,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.importa())}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.dataSourcePrenotazioni),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(2),e.Oqu(e.lcZ(33,7,"sbm.plugins.importa-prenotazioni.importa"))}}class tr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.localizationService=n,this.headerService=a,this.columns=["CodicePrenotazione","DataPrenotazione","TipoCamera","Tariffa","Cognome","Nome","Email","Tipo","DataNascita","Note","Arrivo","Partenza"],this.displayedColumns=["codicePrenotazione","dataPrenotazione","tipoCamera","tariffa","arrivo","partenza","componenti","errori"],this.tipiComponenteAdulto=["ADULTO","ADT"],this.tipiComponenteBambino=["BAMBINO","CHD"]}ngOnInit(){this.setIsLoading(!0),this.headerService.setTitle("sbm.plugins.importa-prenotazioni.title"),this.apiService.getPortaliXAlbergoViewSelect(null,!1).subscribe(o=>{o.data.length>0?(this.portale=o.data[0],this.onPortaleChange()):this.setIsLoading(!1)})}onPortaleChange(){this.setIsLoading(!0),this.dataSourcePrenotazioni=null,null!=this.fileSelect&&(this.fileSelect.nativeElement.value=""),this.apiService.getTipiCameraOTA(this.portale.oid).subscribe(o=>{this.tipiCamera=o.data,this.apiService.getTariffeOTA(this.portale.oid).subscribe(t=>{this.tariffe=t.data,this.setIsLoading(!1)})})}fileSelected(o){let t=null==o.files||0==o.files.length?null:o.files[0];if(null!=t&&t.name&&"csv"==t.name.slice(t.name.lastIndexOf(".")+1)){const n=new FileReader;n.readAsText(t),n.onload=()=>{let a=n.result.toString();a?di.fromBuffer(Uint8Array.from(a.split(""),l=>l.charCodeAt(0)),(l,r)=>{l||null==r||!r.mime?this.creaPrenotazioni(a):(o.value="",this.showError("globals.messages.fileNonValido"))}):(o.value="",this.showError("globals.messages.fileNonValido"))}}else o.value="",this.showError("globals.messages.fileNonValido")}creaPrenotazioni(o){let a,t=!1,n=o.split("\r\n");if(1==n.length&&(n=o.split("\r")),1==n.length&&(n=o.split("\n")),n.length>0&&(""==n[n.length-1]&&n.pop(),n.length>1&&(a=n.map(l=>l.split(";")),a[0].every((l,r)=>l==this.columns[r])&&a.every(l=>l.length==this.columns.length)&&(t=!0))),t){let l=[];a.shift();for(let r of a){let p=this.getColumn(r,"CodicePrenotazione"),T=null;if(p&&(T=l.find(be=>be.codiceOTA==p)),null==T){T=new v.iIm,T.albergo=new v.Z$(this.sessionService.getOidAlbergo()),T.portaleXAlbergo=this.portale,T.codiceOTA=p,T.dataPren=this.controlDate(this.getColumn(r,"DataPrenotazione"),T);let be=this.getColumn(r,"TipoCamera");be&&(null!=this.tipiCamera.find(Je=>Je.descrizione.toLowerCase()==be.toLowerCase())?(T.tipoCameraOTA=new v.OR4,T.tipoCameraOTA.descrizione=be):this.addNotValidMessage(T,"sbm.plugins.importa-prenotazioni.tipoCameraNonValido"));let Ze=this.getColumn(r,"Tariffa");Ze&&(null!=this.tariffe.find(Je=>Je.descrizione.toLowerCase()==Ze.toLowerCase())?(T.tariffaOTA=new v.HfG,T.tariffaOTA.descrizione=Ze):this.addNotValidMessage(T,"sbm.plugins.importa-prenotazioni.tariffaNonValida")),T.noteP=this.getColumn(r,"Note"),T.arrivo=this.controlDate(this.getColumn(r,"Arrivo"),T),T.partenza=this.controlDate(this.getColumn(r,"Partenza"),T),l.push(T)}let L=this.getColumn(r,"Tipo"),G=this.tipiComponenteAdulto.find(be=>be.toLowerCase()==L.toLowerCase())?c.dE.Adulto:this.tipiComponenteBambino.find(be=>be.toLowerCase()==L.toLowerCase())?c.dE.Bambino:null;null==G&&(G=c.dE.Adulto,this.addNotValidMessage(T,"sbm.plugins.importa-prenotazioni.tipoComponenteNonValido"));let W=new v.gDg;W.albergo=new v.Z$(this.sessionService.getOidAlbergo()),W.nome=this.getColumn(r,"Nome"),W.cognome=this.getColumn(r,"Cognome"),W.email=this.getColumn(r,"Email"),W.tipoComponentePrenotazione=G,W.dataNascita=this.controlDate(this.getColumn(r,"DataNascita"),T),(null==T.ospiti||null==T.ospiti.find(be=>be.isIntestatarioPrenotazione))&&G==c.dE.Adulto&&(W.isIntestatarioPrenotazione=!0),null==T.ospiti?T.ospiti=[W]:T.ospiti.push(W)}this.dataSourcePrenotazioni=new s.r4(l),setTimeout(()=>{this.dataSourcePrenotazioni.paginator=this.paginator},200),this.errors=l.some(r=>!!r.notValidMessage)}else this.showError("globals.messages.fileNonValido"),this.fileSelect.nativeElement.value=""}getColumn(o,t){if(null!=o&&t){let n=this.columns.findIndex(a=>a.toLowerCase()==t.toLowerCase());if(n>=0)return o[n]}return null}addNotValidMessage(o,t){let n=this.localizationService.getTranslationSync(t);o.notValidMessage?o.notValidMessage.split("\n").includes(n)||(o.notValidMessage+="\n"+n):o.notValidMessage=n}getComponentiString(o){if(null!=o.ospiti&&o.ospiti.length>0){let t="",n=0;for(let a of o.ospiti)n>0&&(t+="\n"),t+=a.nome+" "+a.cognome+" ("+this.localizationService.getTranslationSync(this.getEnumKeyTranslation(c.dE,a.tipoComponentePrenotazione,"tipoComponentePrenotazione"))+")",n++;return t}return""}controlDate(o,t){if(o){let n=u(o,"DD/MM/YYYY",!0);if(n.isValid())return this.getDate(n)}return this.addNotValidMessage(t,"sbm.plugins.importa-prenotazioni.dataNonValida"),this.getDate(u())}importa(){this.errors?this.showDialogConfirm("sbm.plugins.importa-prenotazioni.erroriImportazione").then(o=>{this.importaPrenotazioni()},o=>{}):this.importaPrenotazioni()}importaPrenotazioni(){this.setIsLoading(!0),this.apiService.importaPrenotazioni(this.dataSourcePrenotazioni.data).subscribe(o=>{this.setIsLoading(!1),this.dataSourcePrenotazioni=null,this.fileSelect.nativeElement.value="",this.showInfo("sbm.plugins.importa-prenotazioni.prenotazioniImportate",{numeroPrenotazioni:o.data.length})})}ngOnDestroy(){this.headerService.clearTitle()}}tr.\u0275fac=function(o){return new(o||tr)(e.Y36(A.s),e.Y36(j.m),e.Y36(Oe.o),e.Y36(ie.r))},tr.\u0275cmp=e.Xpm({type:tr,selectors:[["app-importa-prenotazioni"]],viewQuery:function(o,t){if(1&o&&(e.Gf(wCe,5),e.Gf(D.cl,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.fileSelect=n.first),e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:11,vars:12,consts:[[1,"p-3"],[1,"filter"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange"],["autocompleteOff","","type","file","accept",".csv",3,"change",4,"ngIf"],[1,"mt-3","font-weight-bold"],[4,"ngIf"],["autocompleteOff","","type","file","accept",".csv",3,"change"],["fileSelect",""],[1,"mat-table-container","mt-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","codicePrenotazione"],[4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","dataPrenotazione"],["matColumnDef","tipoCamera"],["matColumnDef","tariffa"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","componenti"],["class","wrap",3,"ngClass",4,"matCellDef"],["matColumnDef","errori"],["class","color-red text-center wrap",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-flat-button","","color","primary",1,"mt-4",3,"click"],[3,"ngClass"],[1,"wrap",3,"ngClass"],[1,"color-red","text-center","wrap"],[1,"mat-table-header"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-view-select",2),e.NdJ("valueChange",function(a){return t.portale=a})("valueChange",function(){return t.onPortaleChange()}),e.ALo(3,"translate"),e.qZA(),e.YNc(4,zCe,2,0,"input",3),e.TgZ(5,"div",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA()(),e.YNc(10,HCe,34,9,"ng-container",5),e.qZA()),2&o&&(e.xp6(2),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(null,!1))("value",t.portale)("placeholder",e.lcZ(3,8,"globals.portale"))("required",!0),e.xp6(2),e.Q6J("ngIf",null!=t.portale),e.xp6(2),e.Oqu(e.lcZ(7,10,"sbm.plugins.importa-prenotazioni.formatoFile")),e.xp6(3),e.Oqu(t.columns.join(";")),e.xp6(1),e.Q6J("ngIf",null!=t.dataSourcePrenotazioni&&null!=t.dataSourcePrenotazioni.data&&t.dataSourcePrenotazioni.data.length>0))},dependencies:[m.mk,m.O5,w.X,h.eB,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,ne.d,m.uU,z.X$],styles:[".wrap[_ngcontent-%COMP%]{white-space:pre-wrap}"]});class ir extends f.H{constructor(o,t){super(),this.apiService=o,this.headerService=t}ngOnInit(){this.headerService.setTitle("sbm.plugins.mailchimp.title")}inviaClienti(o){this.setIsLoading(!0),this.apiService.mailchimpInviaClientiBulk(o).subscribe(t=>{t.data.success?this.showInfo("sbm.plugins.invia-clienti.clientiInviati"):this.showError("sbm.plugins.invia-clienti.erroreInvioClienti"),this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}ir.\u0275fac=function(o){return new(o||ir)(e.Y36(A.s),e.Y36(ie.r))},ir.\u0275cmp=e.Xpm({type:ir,selectors:[["app-mailchimp"]],features:[e.qOj],decls:1,vars:0,consts:[[3,"onInviaClienti"]],template:function(o,t){1&o&&(e.TgZ(0,"app-invia-clienti",0),e.NdJ("onInviaClienti",function(a){return t.inviaClienti(a)}),e.qZA())},dependencies:[Ft]});class or extends f.H{constructor(o,t){super(),this.apiService=o,this.headerService=t}ngOnInit(){this.headerService.setTitle("sbm.plugins.philipsCMND.title")}inviaPrenotazioni(o){this.setIsLoading(!0),this.apiService.philipsCMNDInviaPrenotazioni(o).subscribe(t=>{t.data.success?this.showInfo("sbm.plugins.invia-prenotazioni.prenotazioniInviate"):this.showError("sbm.plugins.invia-prenotazioni.erroreInvioPrenotazioni"),this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}or.\u0275fac=function(o){return new(o||or)(e.Y36(A.s),e.Y36(ie.r))},or.\u0275cmp=e.Xpm({type:or,selectors:[["app-philips-cmnd"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"isSoloPrenotazioniImportate","onInviaPrenotazioni"]],template:function(o,t){1&o&&(e.TgZ(0,"app-invia-prenotazioni",0),e.NdJ("onInviaPrenotazioni",function(a){return t.inviaPrenotazioni(a)}),e.qZA()),2&o&&e.Q6J("isSoloPrenotazioniImportate",!0)},dependencies:[bt]});class nr extends f.H{constructor(o,t){super(),this.apiService=o,this.headerService=t}ngOnInit(){this.headerService.setTitle("sbm.plugins.qualitelis.title")}inviaPrenotazioni(o){this.setIsLoading(!0),this.apiService.qualitelisInviaPrenotazioni(o).subscribe(t=>{t.data.success?this.showInfo("sbm.plugins.invia-prenotazioni.prenotazioniInviate"):this.showError("sbm.plugins.invia-prenotazioni.erroreInvioPrenotazioni"),this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}nr.\u0275fac=function(o){return new(o||nr)(e.Y36(A.s),e.Y36(ie.r))},nr.\u0275cmp=e.Xpm({type:nr,selectors:[["app-qualitelis"]],features:[e.qOj],decls:1,vars:0,consts:[[3,"onInviaPrenotazioni"]],template:function(o,t){1&o&&(e.TgZ(0,"app-invia-prenotazioni",0),e.NdJ("onInviaPrenotazioni",function(a){return t.inviaPrenotazioni(a)}),e.qZA())},dependencies:[bt]});class ar extends f.H{constructor(o,t){super(),this.apiService=o,this.headerService=t}ngOnInit(){this.headerService.setTitle("sbm.plugins.scrollidea.title")}inviaPrenotazioni(o){this.setIsLoading(!0),this.apiService.scrollideaInviaPrenotazioni(o).subscribe(t=>{t.data.success?this.showInfo("sbm.plugins.invia-prenotazioni.prenotazioniInviate"):this.showError("sbm.plugins.invia-prenotazioni.erroreInvioPrenotazioni"),this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}function KCe(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.idTipologiaCard),e.xp6(1),e.Oqu(t.tipologiaCard)}}function GCe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",3)(1,"mat-select",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.idTipologiaCard=a)}),e.ALo(2,"translate"),e.YNc(3,KCe,2,2,"mat-option",15),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("placeholder",e.lcZ(2,3,"sbm.plugins.trentino.card.tipologiaCard"))("ngModel",t.rq.idTipologiaCard),e.xp6(2),e.Q6J("ngForOf",t.tipiCarte)}}function $Ce(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",3)(2,"input",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.email=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"mat-form-field",3)(5,"input",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.rq.personeMax=a)})("blur",function(){e.CHM(t);const a=e.oxw();return e.KtG(null!=a.rq.personeMax?a.rq.personeMax<=0?a.rq.personeMax=1:a.rq.personeMax>5?a.rq.personeMax=5:null:null)}),e.ALo(6,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"sbm.plugins.trentino.card.email")),e.Q6J("ngModel",t.rq.email),e.xp6(3),e.s9C("placeholder",e.lcZ(6,6,"sbm.plugins.trentino.card.personeMax")),e.Q6J("ngModel",t.rq.personeMax)}}function BCe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.attivaDisattiva())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.card.attiva?"sbm.plugins.trentino.disattiva":"sbm.plugins.trentino.attiva"))}}ar.\u0275fac=function(o){return new(o||ar)(e.Y36(A.s),e.Y36(ie.r))},ar.\u0275cmp=e.Xpm({type:ar,selectors:[["app-scrollidea"]],features:[e.qOj],decls:1,vars:0,consts:[[3,"onInviaPrenotazioni"]],template:function(o,t){1&o&&(e.TgZ(0,"app-invia-prenotazioni",0),e.NdJ("onInviaPrenotazioni",function(a){return t.inviaPrenotazioni(a)}),e.qZA())},dependencies:[bt]});class lr extends f.H{constructor(o,t,n){super(),this.apiService=o,this.utility=t,this.parametriService=n,this.tipiCarte=[],this.back=new e.vpe,this.rq=new d.BZX}ngOnInit(){this.rq=new d.BZX,this.rq.oidApiKey=this.oidApiKey,this.card.qrCode?(this.rq.idTipologiaCard=this.card.idTipologiaCard,this.rq.dal=this.card.dataInizioValidita,this.rq.al=this.card.scadenzaAssolutaCard,this.rq.personeMax=this.card.personeMax):null!=this.parametriService.parametri.trentinoEmettiCartaRQ&&(this.rq.idTipologiaCard=this.parametriService.parametri.trentinoEmettiCartaRQ.idTipologiaCard,this.rq.dal=this.parametriService.parametri.trentinoEmettiCartaRQ.dal,this.rq.al=this.parametriService.parametri.trentinoEmettiCartaRQ.al,this.rq.personeMax=this.parametriService.parametri.trentinoEmettiCartaRQ.personeMax),this.editingEnabled=!this.card.qrCode||this.card.completa&&u(this.getDate(this.card.dataInizioValidita))>u().startOf("day")}dalChange(){if(!this.rq.al||u(this.rq.dal)>u(this.rq.al)){let o=u(this.rq.dal).add(1,"days");this.rq.al=this.getDate(o)}}alChange(){if(!this.rq.dal||u(this.rq.al)<u(this.rq.dal)){let o=u(this.rq.al).add(-1,"days");this.rq.dal=this.getDate(o)}}save(){let o=!!this.rq.dal&&!!this.rq.al;if(this.card.qrCode||o&&(o=null!=this.rq.idTipologiaCard&&!!this.rq.email&&null!=this.rq.personeMax&&this.rq.personeMax>0&&this.rq.personeMax<=5),o)if(this.setIsLoading(!0),this.rq.dal=this.getDate(this.rq.dal),this.rq.al=this.getDate(this.rq.al),this.card.qrCode){let t=new d.cvS;t.oidApiKey=this.oidApiKey,t.qrCode=this.card.qrCode,t.dal=this.rq.dal,t.al=this.rq.al,t.anniMinori=null!=this.card.elEtaBambini?this.card.elEtaBambini.join(","):"",t.extraSftAlbergatori=this.card.extraSfwAlbergatori,t.idTipologiaCard=this.card.idTipologiaCard,t.nAdulti=this.card.nAdulti,this.apiService.modificaCartaTrentino(t).subscribe(n=>{if(this.setIsLoading(!1),n.data.esito)this.back.emit(!0);else{let a=[new d.zRL("sbm.plugins.trentino.erroreModifica")];if(null!=n.data.motivo&&n.data.motivo.length>0)for(let l of n.data.motivo)a.push(new d.zRL(null,null,l));this.showErrors(a)}})}else this.apiService.emettiCartaTrentino(this.rq).subscribe(t=>{if(this.setIsLoading(!1),t.data.esito)this.parametriService.setParametro("trentinoEmettiCartaRQ",this.rq),this.showInfo("sbm.plugins.trentino.cartaEmessa").then(()=>{this.back.emit(!0)});else{let n=[new d.zRL("sbm.plugins.trentino.erroreEmissione")];if(null!=t.data.motivo&&t.data.motivo.length>0)for(let a of t.data.motivo)n.push(new d.zRL(null,null,a));this.showErrors(n)}});else this.showError("globals.messages.inserireDati")}attivaDisattiva(){this.setIsLoading(!0);let o=new d.gaP;o.oidApiKey=this.oidApiKey,o.qrCode=this.card.qrCode,o.isAttiva=!this.card.attiva,this.apiService.attivaDisattivaCartaTrentino(o).subscribe(t=>{if(this.setIsLoading(!1),o.isAttiva)if(t.data.esito)this.showInfo("sbm.plugins.trentino.attivazioneCompletata").then(()=>{this.back.emit(!0)});else{let n=[new d.zRL("sbm.plugins.trentino.erroreAttivazione")];if(null!=t.data.motivo&&t.data.motivo.length>0)for(let a of t.data.motivo)n.push(new d.zRL(null,null,a));this.showErrors(n)}else if(t.data.esito)this.showInfo("sbm.plugins.trentino.disattivazioneCompletata").then(()=>{this.back.emit(!0)});else{let n=[new d.zRL("sbm.plugins.trentino.erroreDisattivazione")];if(null!=t.data.motivo&&t.data.motivo.length>0)for(let a of t.data.motivo)n.push(new d.zRL(null,null,a));this.showErrors(n)}})}}function VCe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(1,"i",35),e._uU(2,"add"),e.qZA()()}}function XCe(i,o){1&i&&(e.TgZ(0,"div",36)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.plugins.trentino.nessunaCarta")))}function jCe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function WCe(i,o){1&i&&(e.TgZ(0,"mat-cell",37)(1,"button",38)(2,"i",39),e._uU(3,"edit"),e.qZA()()())}function ebe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.trentino.card.tipologiaCard")))}function tbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.tipologiaCard," ")}}function ibe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.trentino.card.dataInizioValidita")))}function obe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.dataInizioValidita,"dd/MM/yyyy")," ")}}function nbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.trentino.card.scadenzaAssolutaCard")))}function abe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.scadenzaAssolutaCard,"dd/MM/yyyy")," ")}}function lbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.trentino.card.dataEmissione")))}function rbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.dataEmissione,"dd/MM/yyyy")," ")}}function cbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.trentino.card.personeMax")))}function sbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",40),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.personeMax," ")}}function pbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.trentino.card.nAdulti")))}function dbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",40),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nAdulti," ")}}function mbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.trentino.card.nBambini")))}function _be(i,o){if(1&i&&(e.TgZ(0,"mat-cell",40),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nBambini," ")}}function ube(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.trentino.card.attiva")))}function gbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",40),e._UZ(1,"mat-checkbox",41),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.attiva)}}function hbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.plugins.trentino.card.completa")))}function fbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",40),e._UZ(1,"mat-checkbox",41),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.completa)}}function Cbe(i,o){1&i&&e._UZ(0,"mat-header-row",42)}function bbe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",43),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}}function vbe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",44)(1,"app-trentino-edit",45),e.NdJ("back",function(a){e.CHM(t);const l=e.oxw();return l.card=null,e.KtG(a?l.download():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("oidApiKey",t.oidApiKey)("card",t.card)("tipiCarte",t.tipiCarte)}}lr.\u0275fac=function(o){return new(o||lr)(e.Y36(A.s),e.Y36(C.t),e.Y36(et))},lr.\u0275cmp=e.Xpm({type:lr,selectors:[["app-trentino-edit"]],inputs:{oidApiKey:"oidApiKey",card:"card",tipiCarte:"tipiCarte"},outputs:{back:"back"},features:[e.qOj],decls:25,vars:26,consts:[["class","w-100",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","","required","",3,"matDatepicker","placeholder","ngModel","disabled","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["validaDal",""],["validaAl",""],[4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-flat-button","","color","blank",3,"click"],["required","",3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","","required","",3,"placeholder","ngModel","ngModelChange","blur"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.YNc(0,GCe,4,5,"mat-form-field",0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",4),e.NdJ("ngModelChange",function(a){return t.rq.dal=a})("ngModelChange",function(){return t.dalChange()}),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"mat-datepicker-toggle",5)(7,"mat-datepicker",6,7),e.qZA()(),e.TgZ(9,"div",2)(10,"mat-form-field",3)(11,"input",4),e.NdJ("ngModelChange",function(a){return t.rq.al=a})("ngModelChange",function(){return t.alChange()}),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"mat-datepicker-toggle",5)(14,"mat-datepicker",6,8),e.qZA()()(),e.YNc(16,$Ce,7,8,"ng-container",9),e.TgZ(17,"div",10),e.YNc(18,BCe,3,3,"button",11),e.TgZ(19,"button",12),e.NdJ("click",function(){return t.save()}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"button",13),e.NdJ("click",function(){return t.back.emit()}),e._uU(23),e.ALo(24,"translate"),e.qZA()()),2&o){const n=e.MAs(8),a=e.MAs(15);e.Q6J("ngIf",!t.card.qrCode),e.xp6(4),e.s9C("placeholder",e.lcZ(5,18,"sbm.plugins.trentino.card.validaDal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal)("disabled",!t.editingEnabled),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.dal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(12,20,"sbm.plugins.trentino.card.validaAl")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al)("disabled",!t.editingEnabled),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.rq.al)?t.today:null),e.xp6(2),e.Q6J("ngIf",!t.card.qrCode),e.xp6(2),e.Q6J("ngIf",!!t.card.qrCode),e.xp6(1),e.Q6J("disabled",!t.editingEnabled),e.xp6(1),e.Oqu(e.lcZ(21,22,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(24,24,"globals.annulla"))}},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,_.Fj,_.wV,_.JJ,_.Q7,_.On,z.X$]});class rr extends f.H{constructor(o,t,n,a,l){super(),this.route=o,this.apiService=t,this.containerService=n,this.headerService=a,this.utility=l,this.rq=new d.zI7,this.displayedColumns=["edit","tipologiaCard","dataInizioValidita","scadenzaAssolutaCard","dataEmissione","personeMax","nAdulti","nBambini","attiva","completa"],this.tipiCarte=[]}ngOnInit(){this.setIsLoading(!0),this.headerService.setTitle("sbm.plugins.trentino.title"),this.sub=this.route.queryParamMap.subscribe(o=>{let t=o.get("oidApiKey");if(t&&!isNaN(+t)){this.oidApiKey=+t;let n=new d.Ngu;n.oidApiKey=this.oidApiKey,this.apiService.getTipiCarteTrentino(n).subscribe(a=>{this.tipiCarte=a.data,this.rq.oidApiKey=this.oidApiKey,this.rq.dal=this.getDate(u()),this.rq.al=this.getDate(this.oneMonthFromToday),this.rq.page=1,this.rq.recordPP=10,this.download()})}})}dalChange(){if(u(this.rq.dal)>u(this.rq.al)){let o=u(this.rq.dal).add(1,"days");this.rq.al=this.getDate(o)}this.rq.page=1,this.download()}alChange(){if(u(this.rq.al)<u(this.rq.dal)){let o=u(this.rq.al).add(-1,"days");this.rq.dal=this.getDate(o)}this.rq.page=1,this.download()}download(){this.setIsLoading(!0),this.apiService.leggiCarteTrentino(this.rq).subscribe(o=>{this.data=o.data.data,this.totalRecords=o.data.nRecord,this.setIsLoading(!1)})}onPageChange(){this.rq.page=this.paginator.pageIndex+1,this.paginator.pageSize!=this.rq.recordPP?(this.rq.recordPP=this.paginator.pageSize,0==this.paginator.pageIndex?this.download():this.paginator.firstPage()):this.download(),this.containerService.scrollToTop()}add(){this.card=new d.kT}edit(o){this.card=Object.assign({},o)}ngOnDestroy(){this.headerService.clearTitle(),this.sub.unsubscribe()}}rr.\u0275fac=function(o){return new(o||rr)(e.Y36(je.gz),e.Y36(A.s),e.Y36(te.J),e.Y36(ie.r),e.Y36(C.t))},rr.\u0275cmp=e.Xpm({type:rr,selectors:[["app-trentino"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:58,vars:24,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["mat-mini-fab","","color","primary","class","mat-table-add",3,"click",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","tipologiaCard"],[4,"matCellDef"],["matColumnDef","dataInizioValidita"],["matColumnDef","scadenzaAssolutaCard"],["matColumnDef","dataEmissione"],["matColumnDef","personeMax"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","nAdulti"],["matColumnDef","nBambini"],["matColumnDef","attiva"],["matColumnDef","completa"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","length","page"],["class","edit-container",4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"mat-table-header"],[3,"click"],[1,"edit-container"],[3,"oidApiKey","card","tipiCarte","back"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6),e.NdJ("ngModelChange",function(a){return t.rq.dal=a})("dateChange",function(){return t.dalChange()}),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"mat-datepicker-toggle",7)(9,"mat-datepicker",null,8),e.qZA()(),e.TgZ(11,"div",4)(12,"mat-form-field",5)(13,"input",6),e.NdJ("ngModelChange",function(a){return t.rq.al=a})("dateChange",function(){return t.alChange()}),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"mat-datepicker-toggle",7)(16,"mat-datepicker",null,9),e.qZA()()()(),e.YNc(18,VCe,3,0,"button",10),e.YNc(19,XCe,4,3,"div",11),e.TgZ(20,"div",1)(21,"div",12)(22,"mat-table",13),e.ynx(23,14),e.YNc(24,jCe,1,0,"mat-header-cell",15),e.YNc(25,WCe,4,0,"mat-cell",16),e.BQk(),e.ynx(26,17),e.YNc(27,ebe,3,3,"mat-header-cell",15),e.YNc(28,tbe,2,1,"mat-cell",18),e.BQk(),e.ynx(29,19),e.YNc(30,ibe,3,3,"mat-header-cell",15),e.YNc(31,obe,3,4,"mat-cell",18),e.BQk(),e.ynx(32,20),e.YNc(33,nbe,3,3,"mat-header-cell",15),e.YNc(34,abe,3,4,"mat-cell",18),e.BQk(),e.ynx(35,21),e.YNc(36,lbe,3,3,"mat-header-cell",15),e.YNc(37,rbe,3,4,"mat-cell",18),e.BQk(),e.ynx(38,22),e.YNc(39,cbe,3,3,"mat-header-cell",23),e.YNc(40,sbe,2,1,"mat-cell",24),e.BQk(),e.ynx(41,25),e.YNc(42,pbe,3,3,"mat-header-cell",23),e.YNc(43,dbe,2,1,"mat-cell",24),e.BQk(),e.ynx(44,26),e.YNc(45,mbe,3,3,"mat-header-cell",23),e.YNc(46,_be,2,1,"mat-cell",24),e.BQk(),e.ynx(47,27),e.YNc(48,ube,3,3,"mat-header-cell",23),e.YNc(49,gbe,2,1,"mat-cell",24),e.BQk(),e.ynx(50,28),e.YNc(51,hbe,3,3,"mat-header-cell",23),e.YNc(52,fbe,2,1,"mat-cell",24),e.BQk(),e.YNc(53,Cbe,1,0,"mat-header-row",29),e.YNc(54,bbe,1,0,"mat-row",30),e.qZA()(),e.TgZ(55,"div",31)(56,"mat-paginator",32),e.NdJ("page",function(){return t.onPageChange()}),e.qZA()()()(),e.YNc(57,vbe,2,3,"div",33),e.qZA()),2&o){const n=e.MAs(10),a=e.MAs(17);e.xp6(1),e.Q6J("hidden",null!=t.card),e.xp6(5),e.s9C("placeholder",e.lcZ(7,20,"globals.dal")),e.Q6J("matDatepicker",n)("ngModel",t.rq.dal),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(14,22,"globals.al")),e.Q6J("matDatepicker",a)("ngModel",t.rq.al),e.xp6(2),e.Q6J("for",a),e.xp6(3),e.Q6J("ngIf",null!=t.data),e.xp6(1),e.Q6J("ngIf",null!=t.data&&0==t.data.length),e.xp6(1),e.Q6J("hidden",null==t.data||0==t.data.length),e.xp6(2),e.Q6J("dataSource",t.data),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.rq.recordPP)("length",t.totalRecords),e.xp6(1),e.Q6J("ngIf",null!=t.card)}},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,_.Fj,_.JJ,_.On,lr,m.uU,z.X$]});class cr extends f.H{constructor(o,t,n){super(),this.apiService=o,this.headerService=t,this.fileSaverService=n}ngOnInit(){this.headerService.setTitle("sbm.plugins.trustyou.title")}inviaPrenotazioni(o){this.setIsLoading(!0),this.apiService.trustyouInviaPrenotazioni(o).subscribe(t=>{t.data.success&&t.data.csv?this.showInfo("sbm.plugins.invia-prenotazioni.prenotazioniInviate").then(()=>{this.fileSaverService.save(new Blob([t.data.csv],{type:"text/csv"}),"trustyou.csv")}):this.showError("sbm.plugins.invia-prenotazioni.erroreInvioPrenotazioni"),this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}function Tbe(i,o){1&i&&(e.TgZ(0,"div",26)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.report.nessunReport")))}function xbe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Zbe(i,o){1&i&&(e.TgZ(0,"mat-cell",27)(1,"button",28)(2,"i",29),e._uU(3,"remove_red_eye"),e.qZA()()())}function Abe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.report.proprieta.data"),""))}function wbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function zbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.report.proprieta.nome"),""))}function Mbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nome," ")}}function qbe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Pbe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",31)(1,"button",32),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.deleteReport(r))}),e.TgZ(2,"i",33),e._uU(3,"delete"),e.qZA()()()}}function kbe(i,o){1&i&&e._UZ(0,"mat-header-row",34)}function Sbe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",35),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.openReport(r.urlReport):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}cr.\u0275fac=function(o){return new(o||cr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(_c.m9))},cr.\u0275cmp=e.Xpm({type:cr,selectors:[["app-trustyou"]],features:[e.qOj],decls:1,vars:0,consts:[[3,"onInviaPrenotazioni"]],template:function(o,t){1&o&&(e.TgZ(0,"app-invia-prenotazioni",0),e.NdJ("onInviaPrenotazioni",function(a){return t.inviaPrenotazioni(a)}),e.qZA())},dependencies:[bt]});class sr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.displayedColumns=["view","data","nome","delete"]}ngOnInit(){this.headerService.setTitle("sbm.report.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("data",c.Hp.GreaterEqual,this.getDate(this.oneMonthBeforeToday),c.NM.Date)),this.filters.push(new d.wn$("data",c.Hp.LowerEqual,this.getDate(this.oneMonthFromToday),c.NM.Date))}ngAfterViewInit(){this.download()}onSearch(o,t){this.filters[o].value=t,this.download(),this.paginator.firstPage()}download(){this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getReportListFilter(this.rq).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.setIsLoading(!1)})}openReport(o){null!=o&&""!=o?this.utility.openUrlInNewTab(o):this.showError("sbm.report.nessunUrl")}deleteReport(o){this.showDialogConfirm("sbm.report.eliminareReport").then(t=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setReport(o).subscribe(()=>{this.download()})},t=>{})}ngOnDestroy(){this.headerService.clearTitle()}}function ybe(i,o){if(1&i&&(e.TgZ(0,"div",36)(1,"div",37)(2,"div",38),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",39),e._uU(6),e.qZA()(),e.TgZ(7,"div",37)(8,"div",38),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",39),e._uU(12),e.qZA()(),e.TgZ(13,"div",37)(14,"div",38),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",39),e._uU(18),e.qZA()(),e.TgZ(19,"div",37)(20,"div",38),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",39),e._uU(24),e.ALo(25,"eurCurrency"),e.qZA()(),e.TgZ(26,"div",37)(27,"div",38),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",39),e._uU(31),e.qZA()(),e.TgZ(32,"div",40)(33,"div",38),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"div",39),e._uU(37),e.ALo(38,"eurCurrency"),e.qZA()()()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,12,"bo.logRicercaPortaleXAlbergo.proprieta.ricercheDesktop")," "),e.xp6(3),e.hij(" ",t.totaleRicercheDesktop," "),e.xp6(3),e.hij(" ",e.lcZ(10,14,"bo.logRicercaPortaleXAlbergo.proprieta.ricercheMobile")," "),e.xp6(3),e.hij(" ",t.totaleRicercheMobile," "),e.xp6(3),e.hij(" ",e.lcZ(16,16,"bo.logRicercaPortaleXAlbergo.proprieta.prenotazioni")," "),e.xp6(3),e.hij(" ",t.totalePrenotazioni," "),e.xp6(3),e.hij(" ",e.lcZ(22,18,"bo.logRicercaPortaleXAlbergo.proprieta.revenue")," "),e.xp6(3),e.hij(" ",e.lcZ(25,20,t.totaleRevenue)," "),e.xp6(4),e.hij(" ",e.lcZ(29,22,"bo.logRicercaPortaleXAlbergo.proprieta.roomNight")," "),e.xp6(3),e.hij(" ",t.totaleRoomNight," "),e.xp6(3),e.hij(" ",e.lcZ(35,24,"bo.logRicercaPortaleXAlbergo.proprieta.adr")," "),e.xp6(3),e.hij(" ",e.lcZ(38,26,t.totaleAdr)," ")}}function Jbe(i,o){1&i&&(e.TgZ(0,"div",41)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.ricerche.nessunaRicerca")))}function Ebe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logRicercaPortaleXAlbergo.proprieta.data")))}function Nbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.data,"dd/MM/yyyy"))}}function Obe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logRicercaPortaleXAlbergo.proprieta.arrivo")))}function Lbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.arrivo,"dd/MM/yyyy"))}}function Dbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logRicercaPortaleXAlbergo.proprieta.ricercheDesktop")))}function Ibe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ricercheDesktop)}}function Qbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logRicercaPortaleXAlbergo.proprieta.ricercheMobile")))}function Ube(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ricercheMobile)}}function Ybe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logRicercaPortaleXAlbergo.proprieta.tariffePrenotabili")))}function Rbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.tariffePrenotabili)}}function Fbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logRicercaPortaleXAlbergo.proprieta.prenotazioni")))}function Hbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.prenotazioni)}}function Kbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logRicercaPortaleXAlbergo.proprieta.revenue")))}function Gbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.revenue))}}function $be(i,o){1&i&&(e.TgZ(0,"mat-header-cell",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logRicercaPortaleXAlbergo.proprieta.roomNight")))}function Bbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.roomNight)}}function Vbe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.logRicercaPortaleXAlbergo.proprieta.adr")))}function Xbe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.ADR))}}function jbe(i,o){1&i&&e._UZ(0,"mat-header-row",43)}function Wbe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",44),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function eve(i,o){if(1&i&&(e.TgZ(0,"div",45)(1,"div",46),e._UZ(2,"ngx-charts-area-chart",47),e.ALo(3,"translate"),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("gradient",!1)("results",t.grafico)("scheme","cool")("xAxis",!0)("yAxis",!0)("legend",!0)("legendTitle",e.lcZ(3,13,"sbm.ricerche.legenda"))("showXAxisLabel",!1)("showYAxisLabel",!1)("yAxisTickFormatting",t.axisFormatY)("xAxisTickFormatting",t.axisFormatX)("rotateXAxisTicks",!0)("legendPosition",t.enumLegendPosition.Below)}}sr.\u0275fac=function(o){return new(o||sr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},sr.\u0275cmp=e.Xpm({type:sr,selectors:[["app-report"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:37,vars:20,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-3"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","value","dateChange"],["matSuffix","",3,"for"],["datePickerDal",""],["datePickerAl",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","data","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","view"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"input",5),e.NdJ("dateChange",function(a){return t.onSearch(0,t.getDate(a.value))}),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-datepicker-toggle",6)(8,"mat-datepicker",null,7),e.qZA()(),e.TgZ(10,"div",3)(11,"mat-form-field",4)(12,"input",5),e.NdJ("dateChange",function(a){return t.onSearch(1,t.getDate(a.value))}),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"mat-datepicker-toggle",6)(15,"mat-datepicker",null,8),e.qZA()()()(),e.YNc(17,Tbe,4,3,"div",9),e.TgZ(18,"div",10)(19,"div",11)(20,"mat-table",12),e.NdJ("matSortChange",function(){return null!=t.paginator?t.paginator.firstPage():null}),e.ynx(21,13),e.YNc(22,xbe,1,0,"mat-header-cell",14),e.YNc(23,Zbe,4,0,"mat-cell",15),e.BQk(),e.ynx(24,16),e.YNc(25,Abe,3,3,"mat-header-cell",17),e.YNc(26,wbe,3,4,"mat-cell",18),e.BQk(),e.ynx(27,19),e.YNc(28,zbe,3,3,"mat-header-cell",17),e.YNc(29,Mbe,2,1,"mat-cell",18),e.BQk(),e.ynx(30,20),e.YNc(31,qbe,1,0,"mat-header-cell",14),e.YNc(32,Pbe,4,0,"mat-cell",21),e.BQk(),e.YNc(33,kbe,1,0,"mat-header-row",22),e.YNc(34,Sbe,1,1,"mat-row",23),e.qZA()(),e.TgZ(35,"div",24)(36,"mat-paginator",25),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()),2&o){const n=e.MAs(9),a=e.MAs(16);e.xp6(5),e.s9C("placeholder",e.lcZ(6,16,"globals.dal")),e.Q6J("matDatepicker",n)("value",t.filters[0].value),e.xp6(2),e.Q6J("for",n),e.xp6(5),e.s9C("placeholder",e.lcZ(13,18,"globals.al")),e.Q6J("matDatepicker",a)("value",t.filters[1].value),e.xp6(2),e.Q6J("for",a),e.xp6(3),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)}},dependencies:[m.O5,w.X,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,m.uU,z.X$]});class pr extends f.H{constructor(o,t,n,a,l){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.translationService=l,this.displayedColumns=["data","arrivo","ricercheDesktop","ricercheMobile","tariffePrenotabili","prenotazioni","revenue","roomNight","ADR"],this.grafico=[],this.getPortaliRQ=d.k$g.fromFilter("portale.tipoPortale",c.Hp.Equal,c.Q.Passepartout.toString(),c.NM.Number),this.enumLegendPosition=Ke.tV,this.rq=new d.$P0}ngOnInit(){this.headerService.setTitle("sbm.ricerche.title"),this.rq.filter.dal=this.getDate(this.oneMonthBeforeToday),this.rq.filter.al=this.getDate(this.today),this.rq.filter.arrivoDal=this.getDate(this.today),this.rq.filter.arrivoAl=this.getDate(this.oneYearFromToday)}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getPortaliXAlbergoViewSelect(this.getPortaliRQ,!1).subscribe(o=>{null!=o&&null!=o.data&&o.data.length>0&&(this.selectedPortale=o.data[0],this.onPortaleChange())})}onPortaleChange(){null!=this.selectedPortale&&(this.rq.filter.oidPortaleXAlbergo=this.selectedPortale.oid,this.onSearch())}onSearch(){this.download(),this.paginator.firstPage()}download(){this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filter.dal=this.getDate(this.rq.filter.dal),this.rq.filter.al=this.getDate(this.rq.filter.al),this.rq.filter.arrivoDal=this.getDate(this.rq.filter.arrivoDal),this.rq.filter.arrivoAl=this.getDate(this.rq.filter.arrivoAl),this.searchRequest=this.apiService.getLogRicerche(this.rq).subscribe(o=>{this.dataSource=new s.r4(o.data.ricerche),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.grafico=this.checkResultsAdvanced(o.data.grafico.results),this.totaleRicercheDesktop=0,this.totaleRicercheMobile=0,this.totalePrenotazioni=0,this.totaleRevenue=0,this.totaleRoomNight=0,this.totaleAdr=0;for(let t of o.data.ricerche)this.totaleRicercheDesktop+=t.ricercheDesktop,this.totaleRicercheMobile+=t.ricercheMobile,this.totalePrenotazioni+=t.prenotazioni,this.totaleRevenue+=t.revenue,this.totaleRoomNight+=t.roomNight,this.totaleAdr+=t.ADR;this.setIsLoading(!1)})}checkResultsAdvanced(o){let t=!1;if(null!=o)for(let n of o)if(null!=n.series&&(n.name=this.translationService.getTranslationSync(n.name),1==n.series.length&&(n.series.unshift(new d.yIB("<",0)),n.series.push(new d.yIB(">",0))),!t))for(let a of n.series)if(a.value>0){t=!0;break}return t||(o=[]),o}axisFormatY(o){return o%1==0?o.toLocaleString():""}axisFormatX(o){return"<"==o||">"==o?"":o}ngOnDestroy(){this.headerService.clearTitle()}}pr.\u0275fac=function(o){return new(o||pr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t),e.Y36(Oe.o))},pr.\u0275cmp=e.Xpm({type:pr,selectors:[["app-ricerche"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:75,vars:45,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],[3,"rangePicker","click"],["autocompleteOff","","matStartDate","","readonly","",3,"placeholder","ngModel","ngModelChange","dateChange"],["autocompleteOff","","matEndDate","","readonly","",3,"placeholder","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["picker",""],["pickerArrivo",""],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",3,"ngModel","ngModelChange","change"],["class","row mt-3 mb-2",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","data","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","data"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","arrivo"],["matColumnDef","ricercheDesktop"],["matColumnDef","ricercheMobile"],["matColumnDef","tariffePrenotabili"],["matColumnDef","prenotazioni"],["matColumnDef","revenue"],["matColumnDef","roomNight"],["matColumnDef","ADR"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","position-relative","mb-0"],["mat-icon-button","",1,"export-button",3,"click"],[1,"material-icons"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["class","w-100 chart-outer-container pt-3 pr-3 pl-3 border mat-elevation-z1 mt-3 bg-white",4,"ngIf"],[1,"row","mt-3","mb-2"],[1,"col-2","border-right","text-center"],[1,"font-weight-bold"],[1,"font-weight-bold","totale"],[1,"col-2","text-center"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-sort-header",""],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],[1,"w-100","chart-outer-container","pt-3","pr-3","pl-3","border","mat-elevation-z1","mt-3","bg-white"],[1,"w-100","ricerche-chart-container"],[3,"gradient","results","scheme","xAxis","yAxis","legend","legendTitle","showXAxisLabel","showYAxisLabel","yAxisTickFormatting","xAxisTickFormatting","rotateXAxisTicks","legendPosition"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(15);return e.KtG(l.open())}),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(l){return t.rq.filter.dal=l})("dateChange",function(){return t.onSearch()}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(l){return t.rq.filter.al=l})("dateChange",function(){return t.onSearch()}),e.ALo(12,"translate"),e.qZA()(),e._UZ(13,"mat-datepicker-toggle",8)(14,"mat-date-range-picker",null,9),e.qZA()(),e.TgZ(16,"div",3)(17,"mat-form-field",4)(18,"mat-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-date-range-input",5),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(28);return e.KtG(l.open())}),e.TgZ(22,"input",6),e.NdJ("ngModelChange",function(l){return t.rq.filter.arrivoDal=l})("dateChange",function(){return t.onSearch()}),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"input",7),e.NdJ("ngModelChange",function(l){return t.rq.filter.arrivoAl=l})("dateChange",function(){return t.onSearch()}),e.ALo(25,"translate"),e.qZA()(),e._UZ(26,"mat-datepicker-toggle",8)(27,"mat-date-range-picker",null,10),e.qZA()(),e.TgZ(29,"div",3)(30,"app-view-select",11),e.NdJ("valueChange",function(l){return t.selectedPortale=l})("valueChange",function(){return t.onPortaleChange()}),e.ALo(31,"translate"),e.qZA()()(),e.TgZ(32,"mat-checkbox",12),e.NdJ("ngModelChange",function(l){return t.rq.isRaggruppaPerArrivo=l})("change",function(){return t.onSearch()}),e._uU(33),e.ALo(34,"translate"),e.qZA()(),e.YNc(35,ybe,39,28,"div",13),e.YNc(36,Jbe,4,3,"div",14),e.TgZ(37,"div",15)(38,"div",16)(39,"mat-table",17),e.NdJ("matSortChange",function(){return t.paginator.firstPage()}),e.ynx(40,18),e.YNc(41,Ebe,3,3,"mat-header-cell",19),e.YNc(42,Nbe,3,4,"mat-cell",20),e.BQk(),e.ynx(43,21),e.YNc(44,Obe,3,3,"mat-header-cell",19),e.YNc(45,Lbe,3,4,"mat-cell",20),e.BQk(),e.ynx(46,22),e.YNc(47,Dbe,3,3,"mat-header-cell",19),e.YNc(48,Ibe,2,1,"mat-cell",20),e.BQk(),e.ynx(49,23),e.YNc(50,Qbe,3,3,"mat-header-cell",19),e.YNc(51,Ube,2,1,"mat-cell",20),e.BQk(),e.ynx(52,24),e.YNc(53,Ybe,3,3,"mat-header-cell",19),e.YNc(54,Rbe,2,1,"mat-cell",20),e.BQk(),e.ynx(55,25),e.YNc(56,Fbe,3,3,"mat-header-cell",19),e.YNc(57,Hbe,2,1,"mat-cell",20),e.BQk(),e.ynx(58,26),e.YNc(59,Kbe,3,3,"mat-header-cell",19),e.YNc(60,Gbe,3,3,"mat-cell",20),e.BQk(),e.ynx(61,27),e.YNc(62,$be,3,3,"mat-header-cell",19),e.YNc(63,Bbe,2,1,"mat-cell",20),e.BQk(),e.ynx(64,28),e.YNc(65,Vbe,3,3,"mat-header-cell",19),e.YNc(66,Xbe,3,3,"mat-cell",20),e.BQk(),e.YNc(67,jbe,1,0,"mat-header-row",29),e.YNc(68,Wbe,1,1,"mat-row",30),e.qZA()(),e.TgZ(69,"div",31)(70,"button",32),e.NdJ("click",function(){return t.utility.exportToCsv(t.dataSource.data,"Ricerche",t.displayedColumns)}),e.TgZ(71,"i",33),e._uU(72,"get_app"),e.qZA()(),e.TgZ(73,"mat-paginator",34),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.YNc(74,eve,4,15,"div",35),e.qZA()}if(2&o){const n=e.MAs(15),a=e.MAs(28);e.xp6(6),e.Oqu(e.lcZ(7,29,"globals.selezionaPeriodo")),e.xp6(2),e.Q6J("rangePicker",n),e.xp6(1),e.s9C("placeholder",e.lcZ(10,31,"globals.dal")),e.Q6J("ngModel",t.rq.filter.dal),e.xp6(2),e.s9C("placeholder",e.lcZ(12,33,"globals.al")),e.Q6J("ngModel",t.rq.filter.al),e.xp6(2),e.Q6J("for",n),e.xp6(6),e.Oqu(e.lcZ(20,35,"sbm.ricerche.selezionaPeriodoArrivo")),e.xp6(2),e.Q6J("rangePicker",a),e.xp6(1),e.s9C("placeholder",e.lcZ(23,37,"sbm.ricerche.arrivoDal")),e.Q6J("ngModel",t.rq.filter.arrivoDal),e.xp6(2),e.s9C("placeholder",e.lcZ(25,39,"sbm.ricerche.arrivoAl")),e.Q6J("ngModel",t.rq.filter.arrivoAl),e.xp6(2),e.Q6J("for",a),e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect(t.getPortaliRQ,!1))("value",t.selectedPortale)("placeholder",e.lcZ(31,41,"globals.portale")),e.xp6(2),e.Q6J("ngModel",t.rq.isRaggruppaPerArrivo),e.xp6(1),e.hij(" ",e.lcZ(34,43,"sbm.ricerche.isRaggruppaPerArrivo")," "),e.xp6(2),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&t.dataSource.data.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(5),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",null!=t.grafico&&t.grafico.length>0)}},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,M.$V,M.nX,y.nW,y.wx,y.zY,y.By,y._g,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,_.Fj,_.JJ,_.On,Ke.rt,ne.d,m.uU,ke.f,z.X$],styles:[".ricerche-chart-container[_ngcontent-%COMP%]{height:400px}.chart-outer-container[_ngcontent-%COMP%]{padding-bottom:95px;border-radius:7px}  .ricerche-chart-container .chart-legend{margin-top:1rem!important}mat-cell[_ngcontent-%COMP%]{justify-content:center}mat-header-cell[_ngcontent-%COMP%]{justify-content:center}.totale[_ngcontent-%COMP%]{font-size:x-large;color:#e91e63}"]});class dr extends f.H{constructor(o){super(),this.apiService=o,this.rq=new d.csV}ngOnInit(){this.rq.oidUtente=this.oidUtente}verificaPinGoogleAuthenticator(){this.setIsLoading(!0),this.apiService.verificaPinGoogleAuthenticator(this.rq).subscribe(o=>{o.data?this.dialogRef.close(!0):(this.setIsLoading(!1),this.showError("sbm.login.pinErratoGoogleAuthenticator"))})}}dr.\u0275fac=function(o){return new(o||dr)(e.Y36(A.s))},dr.\u0275cmp=e.Xpm({type:dr,selectors:[["app-verifica-pin-google-authenticator-modal"]],inputs:{oidUtente:"oidUtente",dialogRef:"dialogRef"},features:[e.qOj],decls:12,vars:8,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"ngModel","ngModelChange","keyup.enter"],[1,"text-right"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h5"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.rq.pin=a})("keyup.enter",function(){return t.verificaPinGoogleAuthenticator()}),e.qZA()(),e.TgZ(8,"div",4)(9,"button",5),e.NdJ("click",function(){return t.verificaPinGoogleAuthenticator()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,4,"sbm.login.inserisciPinGoogleAuthenticator")),e.xp6(3),e.Q6J("ngModel",t.rq.pin),e.xp6(3),e.Oqu(e.lcZ(11,6,"globals.conferma")))},dependencies:[w.X,h.eB,M.v_,b.k0,F.aO,_.Fj,_.JJ,_.On,z.X$]});var tve=Y(94345),ive=Y.n(tve);class mr{ngOnInit(){this.test()}test(){ive().notify("aaaaaaaa")}}mr.\u0275fac=function(o){return new(o||mr)},mr.\u0275cmp=e.Xpm({type:mr,selectors:[["app-testt"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"testt works!"),e.qZA())}});class _r extends f.H{constructor(o,t,n,a,l,r,p,T,L){super(),this.headerService=o,this.sessionService=t,this.route=n,this.router=a,this.utility=l,this.apiService=r,this.localStorage=p,this.containerService=T,this.localizationService=L,this.isLoginInCorso=!1}ngOnInit(){this.headerService.showHeader(c.h4.Sbm),this.backgroundImage=this.utility.getRandomImage(),this.headerService.hideNomeAlbergo(),this.headerService.setDrawerClosed(),this.headerService.hideMenuTrigger(),this.sub=this.route.queryParamMap.subscribe(o=>{let t=o.get("token"),n=o.get("route");if(t){this.setIsLoading(!0);let a=new d.SXA;a.token=t,a.clientId=this.sessionService.getClientId(),this.apiService.checkToken(a).subscribe(l=>{null!=l.data&&null!=l.data.utente&&null!=l.data.albergo?this.eseguiAutenticazioneADueFattori(l.data.utente).then(()=>{let p,T,r=new d.roV;if(r.albergo=l.data.albergo,r.utente=l.data.utente,r.utente.plugins=l.data.plugins,r.utente.permessi=l.data.permessi,r.isMySelf=!1,r.token=l.data.token,r.myForecast=l.data.myForecast,r.isPostaAttiva=l.data.isPostaAttiva,r.email=l.data.email,r.clientId=l.data.clientId,r.lingue=l.data.lingue,this.sessionService.sessione=r,this.localStorage.set(this.sessionService.SESSION_KEY,r),null!=l.data.warnings&&l.data.warnings.length>0&&this.showError(this.localizationService.getTranslationFromArray(l.data.warnings)),n)if("preventivi"==n)p="preventivi";else if("prenotazioni"==n)p="prenotazioni";else if(n.includes("preventivo")){let L=n.split("_");if(2==L.length){let G=L[1];G&&!isNaN(+G)&&(p="preventivi",T={oidPreventivo:G})}}else if(n.includes("prenotazione")){let L=n.split("_");if(2==L.length){let G=L[1];G&&!isNaN(+G)&&(p="prenotazioni",T={oidPrenotazione:G})}}else"pagamenti"==n?p="transazioni":"impostazioniMySelf"==n&&(p="configurazione-impostazioni-myself");p?this.utility.openPageSbm(p,T).then(()=>{this.containerService.messages=l.data.messaggi}):this.router.navigate(["sbm/home"]).then(()=>{this.containerService.messages=l.data.messaggi})},()=>{}):this.setIsLoading(!1)})}})}login(o,t,n){if(!this.isLoginInCorso)if("localhost"==Cc.N.environmentName||o&&t&&n)if(Cc.N.production&&t==n)this.showError("sbm.login.credenzialiNonSicure");else{this.setIsLoading(!0),this.isLoginInCorso=!0;let a=new d.XKe;a.codiceAlbergo=o,a.utente=t||"admin",a.password=n,a.clientId=this.sessionService.getClientId(),this.apiService.authenticate(a).subscribe({next:l=>{this.isLoginInCorso=!1,null!=l&&null!=l.data&&null!=l.data.utente&&null!=l.data.albergo&&l.data.token&&(null==l.errori||0==l.errori.length)&&this.eseguiAutenticazioneADueFattori(l.data.utente).then(()=>{let r=new d.roV;r.albergo=l.data.albergo,r.utente=l.data.utente,null!=r.utente&&(r.utente.permessi=l.data.permessi,r.utente.plugins=l.data.plugins),r.token=l.data.token,r.myForecast=l.data.myForecast,r.lingue=l.data.lingue,r.isPostaAttiva=l.data.isPostaAttiva,r.email=l.data.email,r.clientId=l.data.clientId,r.isMySelf=!1,this.sessionService.sessione=r,this.localStorage.set(this.sessionService.SESSION_KEY,r),null!=l.data.warnings&&l.data.warnings.length>0&&this.showError(this.localizationService.getTranslationFromArray(l.data.warnings)),this.router.navigate(["sbm/home"]).then(()=>{this.containerService.messages=l.data.messaggi})},()=>{})},error:()=>this.isLoginInCorso=!1})}else this.showError("globals.messages.inserireDati")}eseguiAutenticazioneADueFattori(o){return new Promise((t,n)=>{if(o.ruolo!=c.Gt.SuperAdmin&&o.isAutenticazioneADueFattoriAttiva){this.setIsLoading(!1);let a=new d.Zpt;a.width="40vw";let l=this.showModalDialog(dr,a),r=l.componentInstance;r.oidUtente=o.oid,r.dialogRef=l,l.afterClosed().subscribe(p=>{p?(this.setIsLoading(!0),t()):n()})}else t()})}ngOnDestroy(){this.sub.unsubscribe()}}_r.\u0275fac=function(o){return new(o||_r)(e.Y36(ie.r),e.Y36(j.m),e.Y36(je.gz),e.Y36(je.F0),e.Y36(C.t),e.Y36(A.s),e.Y36(lt.n),e.Y36(te.J),e.Y36(Oe.o))},_r.\u0275cmp=e.Xpm({type:_r,selectors:[["app-sbm-login"]],features:[e.qOj],decls:18,vars:14,consts:[[1,"container-fluid","w-100","h-100","pr-3","pl-3","position-absolute","login-outer-container"],[1,"mx-auto","border","mat-elevation-z10","container-fluid","p-3","login-container"],[1,"w-100"],["autocompleteOff","","type","number","matInput","","required","",3,"placeholder","keyup.enter"],["codice",""],["autocompleteOff","","matInput","","required","",3,"placeholder","keyup.enter"],["username",""],["autocompleteOff","","type","password","matInput","","required","",3,"placeholder","keyup.enter"],["password",""],["mat-flat-button","","color","primary",1,"w-100",3,"click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3,4),e.NdJ("keyup.enter",function(){e.CHM(n);const l=e.MAs(4),r=e.MAs(8),p=e.MAs(12);return e.KtG(t.login(l.value,r.value,p.value))}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"mat-form-field",2)(7,"input",5,6),e.NdJ("keyup.enter",function(){e.CHM(n);const l=e.MAs(4),r=e.MAs(8),p=e.MAs(12);return e.KtG(t.login(l.value,r.value,p.value))}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"mat-form-field",2)(11,"input",7,8),e.NdJ("keyup.enter",function(){e.CHM(n);const l=e.MAs(4),r=e.MAs(8),p=e.MAs(12);return e.KtG(t.login(l.value,r.value,p.value))}),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"button",9),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(4),r=e.MAs(8),p=e.MAs(12);return e.KtG(t.login(l.value,r.value,p.value))}),e._uU(15),e.ALo(16,"translate"),e.qZA()()(),e._UZ(17,"app-testt")}2&o&&(e.Udp("background-image",t.backgroundImage),e.xp6(3),e.Q6J("placeholder",e.lcZ(5,6,"sbm.login.codice")),e.xp6(4),e.Q6J("placeholder",e.lcZ(9,8,"sbm.login.username")),e.xp6(4),e.Q6J("placeholder",e.lcZ(13,10,"sbm.login.password")),e.xp6(4),e.Oqu(e.lcZ(16,12,"sbm.login.login")))},dependencies:[w.X,h.eB,M.v_,b.k0,mr,z.X$],styles:[".login-container[_ngcontent-%COMP%]{margin-top:100px;background-color:#fff;border-radius:5px;width:400px;max-width:100%}.login-outer-container[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover}"]});class ur{constructor(o){this.headerService=o,this.enumPagina=c.I8}ngOnInit(){this.headerService.setTitle("sbm.stile-css.booking.title")}ngOnDestroy(){this.headerService.clearTitle()}}ur.\u0275fac=function(o){return new(o||ur)(e.Y36(ie.r))},ur.\u0275cmp=e.Xpm({type:ur,selectors:[["app-configurazione-booking"]],decls:2,vars:1,consts:[[1,"p-3"],[3,"page"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-css-configuration-ubicazioni-istat",1),e.qZA()),2&o&&(e.xp6(1),e.Q6J("page",t.enumPagina.Booking))},dependencies:[ot]});class gr{constructor(o){this.headerService=o,this.enumPagina=c.I8}ngOnInit(){this.headerService.setTitle("sbm.stile-css.form-richiesta.title")}ngOnDestroy(){this.headerService.clearTitle()}}gr.\u0275fac=function(o){return new(o||gr)(e.Y36(ie.r))},gr.\u0275cmp=e.Xpm({type:gr,selectors:[["app-configurazione-form-richiesta"]],decls:2,vars:1,consts:[[1,"p-3"],[3,"page"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-css-configuration-ubicazioni-istat",1),e.qZA()),2&o&&(e.xp6(1),e.Q6J("page",t.enumPagina.Richiesta))},dependencies:[ot]});class hr{constructor(o){this.headerService=o,this.enumPagina=c.I8}ngOnInit(){this.headerService.setTitle("sbm.stile-css.mypage.title")}ngOnDestroy(){this.headerService.clearTitle()}}hr.\u0275fac=function(o){return new(o||hr)(e.Y36(ie.r))},hr.\u0275cmp=e.Xpm({type:hr,selectors:[["app-configurazione-mypage"]],decls:2,vars:1,consts:[[1,"p-3"],[3,"page"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-css-configuration-ubicazioni-istat",1),e.qZA()),2&o&&(e.xp6(1),e.Q6J("page",t.enumPagina.MyPage))},dependencies:[ot]});class fr{constructor(o){this.headerService=o,this.enumPagina=c.I8}ngOnInit(){this.headerService.setTitle("sbm.stile-css.myself-mobile.title")}ngOnDestroy(){this.headerService.clearTitle()}}fr.\u0275fac=function(o){return new(o||fr)(e.Y36(ie.r))},fr.\u0275cmp=e.Xpm({type:fr,selectors:[["app-configurazione-myself-mobile"]],decls:2,vars:1,consts:[[1,"p-3"],[3,"page"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-css-configuration-ubicazioni-istat",1),e.qZA()),2&o&&(e.xp6(1),e.Q6J("page",t.enumPagina.MySelfMobile))},dependencies:[ot]});class Cr{constructor(o){this.headerService=o,this.enumPagina=c.I8}ngOnInit(){this.headerService.setTitle("sbm.stile-css.myself.title")}ngOnDestroy(){this.headerService.clearTitle()}}Cr.\u0275fac=function(o){return new(o||Cr)(e.Y36(ie.r))},Cr.\u0275cmp=e.Xpm({type:Cr,selectors:[["app-configurazione-myself"]],decls:2,vars:1,consts:[[1,"p-3"],[3,"page"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-css-configuration-ubicazioni-istat",1),e.qZA()),2&o&&(e.xp6(1),e.Q6J("page",t.enumPagina.MySelf))},dependencies:[ot]});class br{constructor(o){this.headerService=o,this.enumPagina=c.I8}ngOnInit(){this.headerService.setTitle("sbm.stile-css.paymail.title")}ngOnDestroy(){this.headerService.clearTitle()}}br.\u0275fac=function(o){return new(o||br)(e.Y36(ie.r))},br.\u0275cmp=e.Xpm({type:br,selectors:[["app-configurazione-paymail"]],decls:2,vars:1,consts:[[1,"p-3"],[3,"page"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-css-configuration-ubicazioni-istat",1),e.qZA()),2&o&&(e.xp6(1),e.Q6J("page",t.enumPagina.Paymail))},dependencies:[ot]});class vr{constructor(o){this.headerService=o,this.enumPagina=c.I8}ngOnInit(){this.headerService.setTitle("sbm.stile-css.sondaggio.title")}ngOnDestroy(){this.headerService.clearTitle()}}function ove(i,o){if(1&i&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function nve(i,o){1&i&&(e.TgZ(0,"div",28)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.storico.nessunoStorico")))}function ave(i,o){1&i&&(e.TgZ(0,"mat-header-cell",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.portaleXAlbergoStorico.proprieta.portaleXAlbergo"),""))}function lve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.portaleXAlbergo?t.portaleXAlbergo.nome:""," ")}}function rve(i,o){1&i&&(e.TgZ(0,"mat-header-cell",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.portaleXAlbergoStorico.proprieta.anno"),""))}function cve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.anno," ")}}function sve(i,o){1&i&&(e.TgZ(0,"mat-header-cell",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.portaleXAlbergoStorico.proprieta.richieste"),""))}function pve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.richieste," ")}}function dve(i,o){1&i&&(e.TgZ(0,"mat-header-cell",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.portaleXAlbergoStorico.proprieta.prenotazioni"),""))}function mve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.prenotazioni," ")}}function _ve(i,o){1&i&&(e.TgZ(0,"mat-header-cell",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.portaleXAlbergoStorico.proprieta.prenotazioniEuro"),""))}function uve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.prenotazioniEuro)," ")}}function gve(i,o){1&i&&(e.TgZ(0,"mat-header-cell",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.portaleXAlbergoStorico.proprieta.preventivi"),""))}function hve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.preventivi," ")}}function fve(i,o){1&i&&(e.TgZ(0,"mat-header-cell",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.portaleXAlbergoStorico.proprieta.preventiviEuro"),""))}function Cve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.preventiviEuro)," ")}}function bve(i,o){1&i&&e._UZ(0,"mat-header-row",30)}function vve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",31),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}vr.\u0275fac=function(o){return new(o||vr)(e.Y36(ie.r))},vr.\u0275cmp=e.Xpm({type:vr,selectors:[["app-configurazione-sondaggio"]],decls:2,vars:1,consts:[[1,"p-3"],[3,"page"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-css-configuration-ubicazioni-istat",1),e.qZA()),2&o&&(e.xp6(1),e.Q6J("page",t.enumPagina.Sondaggio))},dependencies:[ot]});class Tr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.displayedColumns=["portaleXAlbergo.nome","anno","richieste","prenotazioni","prenotazioniEuro","preventivi","preventiviEuro"],this.years=[]}ngOnInit(){this.headerService.setTitle("sbm.storico.title"),this.rq=new d.k$g,this.filters=[],this.filters.push(new d.wn$("portaleXAlbergo.oid",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("anno",c.Hp.Equal,"",c.NM.Number));let o=u().year()-9;for(let t=o;t<o+10;t++)this.years.push(t)}onSearch(o,t){this.filters[o].value=t,this.download(),this.paginator.firstPage()}download(){this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getStoricoAlbergoFilter(this.rq).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=this.utility.getPropertyValue,this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.download()}}function Tve(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioArrotondamento.proprieta.da"),""))}function xve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.da)}}function Zve(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioArrotondamento.proprieta.a"),""))}function Ave(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.a)}}function wve(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioArrotondamento.proprieta.tipoArrotondamento"),""))}function zve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoArrotondamento,t.tipoArrotondamento,"tipoArrotondamento"))," ")}}function Mve(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioArrotondamento.proprieta.precisione"),""))}function qve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.precisione)}}function Pve(i,o){1&i&&e._UZ(0,"mat-header-row",20)}function kve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",21),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function Sve(i,o){if(1&i&&(e.TgZ(0,"div",8)(1,"h5",9),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",10)(5,"mat-table",11),e.ynx(6,12),e.YNc(7,Tve,3,3,"mat-header-cell",13),e.YNc(8,xve,2,1,"mat-cell",14),e.BQk(),e.ynx(9,15),e.YNc(10,Zve,3,3,"mat-header-cell",13),e.YNc(11,Ave,2,1,"mat-cell",14),e.BQk(),e.ynx(12,16),e.YNc(13,wve,3,3,"mat-header-cell",13),e.YNc(14,zve,3,3,"mat-cell",14),e.BQk(),e.ynx(15,17),e.YNc(16,Mve,3,3,"mat-header-cell",13),e.YNc(17,qve,2,1,"mat-cell",14),e.BQk(),e.YNc(18,Pve,1,0,"mat-header-row",18),e.YNc(19,kve,1,1,"mat-row",19),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.tabelle.arrotondamenti.dettagli")),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function yve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Tr.\u0275fac=function(o){return new(o||Tr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Tr.\u0275cmp=e.Xpm({type:Tr,selectors:[["app-storico"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:42,vars:17,consts:[[1,"p-3"],[1,"filter"],[1,"row"],[1,"col-6"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[1,"w-100"],[3,"placeholder","value","selectionChange"],["annoSearch",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],["matSort","","matSortActive","anno","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","portaleXAlbergo.nome"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","anno"],["matColumnDef","richieste"],["matColumnDef","prenotazioni"],["matColumnDef","prenotazioniEuro"],["matColumnDef","preventivi"],["matColumnDef","preventiviEuro"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["mat-sort-header",""],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-view-select",4),e.NdJ("valueChange",function(l){return t.onSearch(0,l.oid>0?l.oid.toString():"")}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",3)(7,"mat-form-field",5)(8,"mat-select",6,7),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(9);return e.KtG(t.onSearch(1,l.value))}),e.ALo(10,"translate"),e._UZ(11,"mat-option",8),e.YNc(12,ove,2,2,"mat-option",9),e.qZA()()()()(),e.YNc(13,nve,4,3,"div",10),e.TgZ(14,"div",11)(15,"div",12)(16,"mat-table",13),e.NdJ("matSortChange",function(){return null!=t.paginator?t.paginator.firstPage():null}),e.ynx(17,14),e.YNc(18,ave,3,3,"mat-header-cell",15),e.YNc(19,lve,2,1,"mat-cell",16),e.BQk(),e.ynx(20,17),e.YNc(21,rve,3,3,"mat-header-cell",15),e.YNc(22,cve,2,1,"mat-cell",16),e.BQk(),e.ynx(23,18),e.YNc(24,sve,3,3,"mat-header-cell",15),e.YNc(25,pve,2,1,"mat-cell",16),e.BQk(),e.ynx(26,19),e.YNc(27,dve,3,3,"mat-header-cell",15),e.YNc(28,mve,2,1,"mat-cell",16),e.BQk(),e.ynx(29,20),e.YNc(30,_ve,3,3,"mat-header-cell",15),e.YNc(31,uve,3,3,"mat-cell",16),e.BQk(),e.ynx(32,21),e.YNc(33,gve,3,3,"mat-header-cell",15),e.YNc(34,hve,2,1,"mat-cell",16),e.BQk(),e.ynx(35,22),e.YNc(36,fve,3,3,"mat-header-cell",15),e.YNc(37,Cve,3,3,"mat-cell",16),e.BQk(),e.YNc(38,bve,1,0,"mat-header-row",23),e.YNc(39,vve,1,1,"mat-row",24),e.qZA()(),e.TgZ(40,"div",25)(41,"mat-paginator",26),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()}2&o&&(e.xp6(4),e.Q6J("dataLoader",t.apiService.getPortaliXAlbergoViewSelect())("placeholder",e.lcZ(5,13,"bo.portaleXAlbergoStorico.proprieta.portaleXAlbergo")),e.xp6(4),e.s9C("placeholder",e.lcZ(10,15,"bo.portaleXAlbergoStorico.proprieta.anno")),e.Q6J("value",t.filters[1].value),e.xp6(4),e.Q6J("ngForOf",t.years),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize))},dependencies:[m.sg,m.O5,M.v_,re.CK,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,ne.d,ke.f,z.X$]});class xr extends f.H{set dettagli(o){this.dataSource=new s.r4(o)}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe,this.displayedColumns=["da","a","tipoArrotondamento","precisione"],this.enumTipoArrotondamento=c.z9}save(){this.arrotondamento.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setArrotondamento(this.arrotondamento).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.arrotondamenti.arrotondamentoSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.tabelle.arrotondamenti.eliminareArrotondamento").then(t=>{null!=o&&(this.arrotondamento=o),this.arrotondamento.isDeleted=!0,this.setIsLoading(!0),this.apiService.setArrotondamento(this.arrotondamento).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function Jve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",22)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.tabelle.arrotondamenti.nessunArrotondamento")))}function Eve(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Nve(i,o){1&i&&(e.TgZ(0,"mat-cell",23)(1,"button",24)(2,"i",25),e._uU(3,"edit"),e.qZA()()())}function Ove(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.arrotondamento.proprieta.nome"),""))}function Lve(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.arrotondamento.nome)}}function Dve(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.arrotondamento.proprieta.descrizione"),""))}function Ive(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.arrotondamento.descrizione," ")}}function Qve(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Uve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",26)(1,"button",27),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(26);return a.stopPropagation(),e.KtG(p.delete(r.arrotondamento))}),e.TgZ(2,"i",28),e._uU(3,"delete"),e.qZA()()()}}function Yve(i,o){1&i&&e._UZ(0,"mat-header-row",29)}function Rve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",30),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.arrotondamento.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.arrotondamento.oid?t.arrotondamento.oid:"")}}xr.\u0275fac=function(o){return new(o||xr)(e.Y36(A.s),e.Y36(j.m))},xr.\u0275cmp=e.Xpm({type:xr,selectors:[["app-arrotondamenti-edit"]],inputs:{arrotondamento:"arrotondamento",dettagli:"dettagli"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:19,vars:16,consts:[[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"w-100","mt-3"],["class","mt-3 mb-3",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"mt-3","mb-3"],[1,"mb-3"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","da"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","a"],["matColumnDef","tipoArrotondamento"],["matColumnDef","precisione"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-form-field",0)(1,"input",1),e.NdJ("ngModelChange",function(a){return t.arrotondamento.nome=a}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"mat-hint"),e._uU(4,"Inserire il nome dell'arrotondamento"),e.qZA()(),e.TgZ(5,"mat-form-field",2)(6,"input",1),e.NdJ("ngModelChange",function(a){return t.arrotondamento.descrizione=a}),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-hint"),e._uU(9,"Inserire la descrizione dell'arrotondamento"),e.qZA()(),e.YNc(10,Sve,20,7,"div",3),e.TgZ(11,"div",4)(12,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.YNc(15,yve,3,3,"button",6),e.TgZ(16,"button",7),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(17),e.ALo(18,"translate"),e.qZA()()),2&o&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,8,"bo.arrotondamento.proprieta.nome")),e.Q6J("ngModel",t.arrotondamento.nome),e.xp6(5),e.s9C("placeholder",e.lcZ(7,10,"bo.arrotondamento.proprieta.descrizione")),e.Q6J("ngModel",t.arrotondamento.descrizione),e.xp6(4),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&t.dataSource.data.length>0),e.xp6(3),e.Oqu(e.lcZ(14,12,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.arrotondamento&&t.arrotondamento.oid>0),e.xp6(2),e.Oqu(e.lcZ(18,14,"globals.annulla")))},dependencies:[m.O5,w.X,h.eB,M.v_,M.pH,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.JJ,_.On,z.X$]});class Zr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.arrotondamento=new v.mzN,this.showTable=!0,this.displayedColumns=["edit","nome","descrizione","delete"]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.arrotondamenti.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getArrotondamenti().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.arrotondamento=new v.mzN(-1),this.dettagli=[],this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.arrotondamento=Object.assign({},o.arrotondamento),this.dettagli=o.dettagli,this.showTable=!1,this.containerService.scrollToTop()}}function Fve(i,o){1&i&&(e.TgZ(0,"h5",5),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.cancellazioni.nessunCollegamento")))}function Hve(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function Kve(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Hve,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.tabelle.cancellazioni.fasceCollegate")),e.xp6(2),e.Q6J("ngForOf",t.rs.data.fasce)}}function Gve(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function $ve(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Gve,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.tabelle.cancellazioni.periodiListinoCollegati")),e.xp6(2),e.Q6J("ngForOf",t.rs.data.periodiListino)}}function Bve(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function Vve(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Bve,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.tabelle.cancellazioni.pianiTariffariCollegati")),e.xp6(2),e.Q6J("ngForOf",t.rs.data.pianiTariffari)}}function Xve(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function jve(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Xve,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.tabelle.cancellazioni.tariffeCollegate")),e.xp6(2),e.Q6J("ngForOf",t.rs.data.tariffe)}}function Wve(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function e3e(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Wve,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.tabelle.cancellazioni.promozioniCollegate")),e.xp6(2),e.Q6J("ngForOf",t.rs.data.promozioni)}}function t3e(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function i3e(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,t3e,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.tabelle.cancellazioni.codiciPromozionaliCollegati")),e.xp6(2),e.Q6J("ngForOf",t.rs.data.codiciPromozionali)}}function o3e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Fve,3,3,"h5",3),e.YNc(2,Kve,5,4,"div",4),e.YNc(3,$ve,5,4,"div",4),e.YNc(4,Vve,5,4,"div",4),e.YNc(5,jve,5,4,"div",4),e.YNc(6,e3e,5,4,"div",4),e.YNc(7,i3e,5,4,"div",4),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null!=t.rs.data.fasce&&0!=t.rs.data.fasce.length||null!=t.rs.data.periodiListino&&0!=t.rs.data.periodiListino.length||null!=t.rs.data.pianiTariffari&&0!=t.rs.data.pianiTariffari.length||null!=t.rs.data.tariffe&&0!=t.rs.data.tariffe.length||null!=t.rs.data.promozioni&&0!=t.rs.data.promozioni.length||null!=t.rs.data.codiciPromozionali&&0!=t.rs.data.codiciPromozionali.length)),e.xp6(1),e.Q6J("ngIf",null!=t.rs.data.fasce&&t.rs.data.fasce.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.rs.data.periodiListino&&t.rs.data.periodiListino.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.rs.data.pianiTariffari&&t.rs.data.pianiTariffari.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.rs.data.tariffe&&t.rs.data.tariffe.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.rs.data.promozioni&&t.rs.data.promozioni.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.rs.data.codiciPromozionali&&t.rs.data.codiciPromozionali.length>0)}}Zr.\u0275fac=function(o){return new(o||Zr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Zr.\u0275cmp=e.Xpm({type:Zr,selectors:[["app-arrotondamenti"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:27,vars:11,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","descrizione"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"arrotondamento","dettagli","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Jve,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,Eve,1,0,"mat-header-cell",8),e.YNc(10,Nve,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,Ove,3,3,"mat-header-cell",8),e.YNc(13,Lve,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,Dve,3,3,"mat-header-cell",8),e.YNc(16,Ive,2,1,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,Qve,1,0,"mat-header-cell",8),e.YNc(19,Uve,4,0,"mat-cell",14),e.BQk(),e.YNc(20,Yve,1,0,"mat-header-row",15),e.YNc(21,Rve,1,1,"mat-row",16),e.qZA()(),e.TgZ(22,"div",17)(23,"mat-paginator",18),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(24,"div",19)(25,"app-arrotondamenti-edit",20,21),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("arrotondamento",t.arrotondamento)("dettagli",t.dettagli))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,xr,z.X$]});class Ar extends f.H{constructor(o){super(),this.apiService=o}ngOnInit(){this.setIsLoading(!0),this.apiService.controllaCollegamentiPoliticaCancellazione(this.oidPoliticaCancellazione).subscribe(o=>{this.rs=o,this.setIsLoading(!1)})}}Ar.\u0275fac=function(o){return new(o||Ar)(e.Y36(A.s))},Ar.\u0275cmp=e.Xpm({type:Ar,selectors:[["app-collegamenti-cancellazione-modal"]],inputs:{oidPoliticaCancellazione:"oidPoliticaCancellazione"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],["class","mb-0",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"mb-0"],[1,"mb-3"],[4,"ngFor","ngForOf"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,o3e,8,7,"ng-container",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.rs))},dependencies:[m.sg,m.O5,h.eB,F.aO,z.X$]});const n3e=["panel1"];function a3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioCancellazione.proprieta.da"),""))}function l3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.da)}}function r3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioCancellazione.proprieta.a"),""))}function c3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.a)}}function s3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioCancellazione.proprieta.tipoPenaleCancellazione"),""))}function p3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoPenaleCancellazione,t.tipoPenaleCancellazione,"tipoPenaleCancellazione"))," ")}}function d3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioCancellazione.proprieta.valore"),""))}function m3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.valore)}}function _3e(i,o){1&i&&e._UZ(0,"mat-header-row",37)}function u3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",38),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function g3e(i,o){if(1&i&&(e.TgZ(0,"div",30)(1,"h5",31),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",32)(5,"mat-table",15),e.ynx(6,33),e.YNc(7,a3e,3,3,"mat-header-cell",20),e.YNc(8,l3e,2,1,"mat-cell",21),e.BQk(),e.ynx(9,34),e.YNc(10,r3e,3,3,"mat-header-cell",20),e.YNc(11,c3e,2,1,"mat-cell",21),e.BQk(),e.ynx(12,35),e.YNc(13,s3e,3,3,"mat-header-cell",20),e.YNc(14,p3e,3,3,"mat-cell",21),e.BQk(),e.ynx(15,36),e.YNc(16,d3e,3,3,"mat-header-cell",20),e.YNc(17,m3e,2,1,"mat-cell",21),e.BQk(),e.YNc(18,_3e,1,0,"mat-header-row",22),e.YNc(19,u3e,1,1,"mat-row",23),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.tabelle.cancellazioni.dettagli")),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function h3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",39)(1,"mat-checkbox",40),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(a?l.masterToggleModalitaPagamento():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selectionModalitaPagamento.hasValue()&&t.isAllSelectedModalitaPagamento())("indeterminate",t.selectionModalitaPagamento.hasValue()&&!t.isAllSelectedModalitaPagamento())}}function f3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",41)(1,"mat-checkbox",42),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(a?p.selectionModalitaPagamento.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selectionModalitaPagamento.isSelected(t.oid))}}function C3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.modalitaPagamento.proprieta.nome")))}function b3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function v3e(i,o){1&i&&e._UZ(0,"mat-header-row",37)}function T3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",38),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function x3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",44)(1,"mat-form-field",45)(2,"input",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.cancellazioniXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",47),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.cancellazioniXLingua[l].descrizione=a)}),e.qZA(),e.TgZ(7,"div",26),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"app-editor",47),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.cancellazioniXLingua[l].note=a)}),e.qZA()()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,9,"bo.cancellazioneXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.cancellazioniXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,11,"bo.cancellazioneXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.cancellazioniXLingua[a].descrizione),e.xp6(2),e.hij(" ",e.lcZ(9,13,"bo.cancellazioneXLingua.proprieta.note")," "),e.xp6(2),e.Q6J("id","note"+a)("text",l.modelEdit.cancellazioniXLingua[a].note)}}function Z3e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,x3e,11,15,"mat-tab",43),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function A3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.controllaCollegamenti())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.cancellazioni.controllaCollegamenti")))}function w3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}const z3e=function(i){return{"mb-3 border-bottom":i}},xs=function(){return["nome","select"]};class wr extends f.H{set cancellazione(o){if(null!=o){if(this.modelEdit=new d.toH,this.modelEdit.cancellazione=o,this.selectedIndex=0,this.panel1.close(),this.selectionModalitaPagamento=new me.Ov(!0,[]),this.modelEdit.cancellazione.oidModalitaPagamento){let t=this.modelEdit.cancellazione.oidModalitaPagamento.split(";");for(let n of t)""!=n&&!isNaN(+n)&&null!=this.modalitaPagamento.find(a=>a.oid==+n)&&this.selectionModalitaPagamento.toggle(+n)}for(let t of this.lingue){let n=new v.C3K;n.lingua=t,this.modelEdit.cancellazioniXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getCancellazioniXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.cancellazioniXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.cancellazioniXLingua[a].cancellazione=n.cancellazione,this.modelEdit.cancellazioniXLingua[a].nome=n.nome,this.modelEdit.cancellazioniXLingua[a].descrizione=n.descrizione,this.modelEdit.cancellazioniXLingua[a].note=n.note)}this.setIsLoading(!1)})):this.editing=!1}}set dettagli(o){this.dataSource=new s.r4(o)}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.toH,this.editing=!1,this.selectedIndex=0,this.enumTipoPenaleCancellazione=c.uz,this.selectionModalitaPagamento=new me.Ov(!0,[]),this.modalitaPagamento=[],this.backEvent=new e.vpe,this.displayedColumns=["da","a","tipoPenaleCancellazione","valore"]}save(){for(let o of this.modelEdit.cancellazioniXLingua)o.cancellazione=this.modelEdit.cancellazione;this.modelEdit.cancellazione.oidModalitaPagamento=this.selectionModalitaPagamento.selected.toString().replace(/,/g,";"),this.modelEdit.cancellazione.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setCancellazione(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.cancellazioni.cancellazioneSalvata").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.tabelle.cancellazioni.eliminareCancellazione").then(t=>{null!=o&&(this.modelEdit.cancellazione=o),this.modelEdit.cancellazione.isDeleted=!0,this.setIsLoading(!0),this.apiService.setCancellazione(this.modelEdit).subscribe(n=>{(null==n.errori||0==n.errori.length)&&this.backEvent.emit()})},t=>{})}controllaCollegamenti(){let o=new d.Zpt;o.width="50vw",this.showModalDialog(Ar,o).componentInstance.oidPoliticaCancellazione=this.modelEdit.cancellazione.oid}isAllSelectedModalitaPagamento(){return this.selectionModalitaPagamento.selected.length==this.modalitaPagamento.length}masterToggleModalitaPagamento(){this.isAllSelectedModalitaPagamento()?this.selectionModalitaPagamento.clear():this.modalitaPagamento.forEach(o=>this.selectionModalitaPagamento.select(o.oid))}}function M3e(i,o){1&i&&(e.TgZ(0,"div",20)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.cancellazioni.nessunaCancellazione")))}function q3e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function P3e(i,o){1&i&&(e.TgZ(0,"mat-cell",21)(1,"button",22)(2,"i",23),e._uU(3,"edit"),e.qZA()()())}function k3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.cancellazione.proprieta.nome"),""))}function S3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.cancellazione.nome)}}function y3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.cancellazione.proprieta.isAttivo"),""))}function J3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",24),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.cancellazione.isAttivo)("disabled",!0)}}function E3e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function N3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",25)(1,"button",26),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(23);return a.stopPropagation(),e.KtG(p.delete(r.cancellazione))}),e.TgZ(2,"i",27),e._uU(3,"delete"),e.qZA()()()}}function O3e(i,o){1&i&&e._UZ(0,"mat-header-row",28)}function L3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",29),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.cancellazione.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.cancellazione.oid?t.cancellazione.oid:"")}}wr.\u0275fac=function(o){return new(o||wr)(e.Y36(A.s),e.Y36(j.m))},wr.\u0275cmp=e.Xpm({type:wr,selectors:[["app-cancellazioni-edit"]],viewQuery:function(o,t){if(1&o&&e.Gf(n3e,5),2&o){let n;e.iGM(n=e.CRH())&&(t.panel1=n.first)}},inputs:{cancellazione:"cancellazione",dettagli:"dettagli",modalitaPagamento:"modalitaPagamento"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:72,vars:51,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["color","primary",1,"d-inline-block",3,"ngModel","ngModelChange"],[1,"w-100","mt-3"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],["class","mt-3 mb-3",4,"ngIf"],[1,"mat-elevation-z0","border","rounded","mb-3"],["panel1",""],[3,"ngClass"],[1,"mat-table-container-border-rounded","mb-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"mt-3","mb-3"],[1,"mb-3"],[1,"mat-table-container-border-rounded"],["matColumnDef","da"],["matColumnDef","a"],["matColumnDef","tipoPenaleCancellazione"],["matColumnDef","valore"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.cancellazione.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Nome della politica di cancellazione "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.cancellazione.isAttivo=a}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",4),e._uU(13," Attiva la politica di cancellazione "),e.qZA()(),e.TgZ(14,"div",0)(15,"div",1)(16,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.cancellazione.isCancellazioneGratuita=a}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-form-field",6)(20,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.cancellazione.oreCancellazioneGratuitaPrimaCheckIn=a}),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"div",4),e._uU(23," Cancellazione gratuita entro i termini riportati "),e.qZA()(),e.TgZ(24,"div",8)(25,"div",1)(26,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.cancellazione.isNonRimborsabile=a}),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",4),e._uU(30," Non rimborsabile. Pagamento di tutto l'importo anticipato "),e.qZA()(),e.TgZ(31,"div",8)(32,"div",1)(33,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.cancellazione.isPagaHotel=a}),e._uU(34),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",4),e._uU(37," Paga direttamente in hotel. Non propone pagamento "),e.qZA()(),e.TgZ(38,"div",8)(39,"div",1)(40,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.cancellazione.isCartaCreditoGaranzia=a}),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"div",4),e._uU(44," Carta di credito richiesta come garanzia "),e.qZA()(),e.YNc(45,g3e,20,7,"div",10),e.TgZ(46,"mat-expansion-panel",11,12)(48,"mat-expansion-panel-header",13),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"div",14)(52,"mat-table",15),e.ynx(53,16),e.YNc(54,h3e,2,2,"mat-header-cell",17),e.YNc(55,f3e,2,1,"mat-cell",18),e.BQk(),e.ynx(56,19),e.YNc(57,C3e,3,3,"mat-header-cell",20),e.YNc(58,b3e,2,1,"mat-cell",21),e.BQk(),e.YNc(59,v3e,1,0,"mat-header-row",22),e.YNc(60,T3e,1,1,"mat-row",23),e.qZA()()(),e.TgZ(61,"mat-tab-group",24),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(62,Z3e,2,1,"ng-container",25),e.qZA(),e.TgZ(63,"div",26)(64,"button",27),e.NdJ("click",function(){return t.save()}),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.YNc(67,A3e,3,3,"button",28),e.YNc(68,w3e,3,3,"button",28),e.TgZ(69,"button",29),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(70),e.ALo(71,"translate"),e.qZA()()),2&o){const n=e.MAs(47);e.xp6(3),e.s9C("placeholder",e.lcZ(4,27,"bo.cancellazione.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.cancellazione.nome),e.xp6(6),e.Q6J("ngModel",t.modelEdit.cancellazione.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(11,29,"bo.cancellazione.proprieta.isAttivo")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.cancellazione.isCancellazioneGratuita),e.xp6(1),e.hij(" ",e.lcZ(18,31,"bo.cancellazione.proprieta.isCancellazioneGratuita")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(21,33,"bo.cancellazione.proprieta.oreCancellazioneGratuitaPrimaCheckIn")),e.Q6J("ngModel",t.modelEdit.cancellazione.oreCancellazioneGratuitaPrimaCheckIn),e.xp6(6),e.Q6J("ngModel",t.modelEdit.cancellazione.isNonRimborsabile),e.xp6(1),e.hij(" ",e.lcZ(28,35,"bo.cancellazione.proprieta.isNonRimborsabile")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.cancellazione.isPagaHotel),e.xp6(1),e.hij(" ",e.lcZ(35,37,"bo.cancellazione.proprieta.isPagaHotel")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.cancellazione.isCartaCreditoGaranzia),e.xp6(1),e.hij(" ",e.lcZ(42,39,"bo.cancellazione.proprieta.isCartaCreditoGaranzia")," "),e.xp6(4),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&t.dataSource.data.length>0),e.xp6(3),e.Q6J("ngClass",e.VKq(47,z3e,n.expanded)),e.xp6(1),e.hij(" ",e.lcZ(50,41,"sbm.tabelle.cancellazioni.modalitaPagamentoAbilitate")," "),e.xp6(3),e.Q6J("dataSource",t.modalitaPagamento),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(49,xs))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(50,xs)),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.cancellazioniXLingua),e.xp6(3),e.Oqu(e.lcZ(66,43,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(1),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(71,45,"globals.annulla"))}},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,ye.ib,ye.yz,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.On,Me.P,z.X$],styles:["mat-header-row[_ngcontent-%COMP%]{line-height:24px}"]});class zr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","isAttivo","delete"],this.modalitaPagamento=[]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.cancellazioni.title")}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getModalitaPagamentoList().subscribe(o=>{this.modalitaPagamento=o.data,this.download()})}download(){this.setIsLoading(!0),this.apiService.getCancellazioni().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}edit(o){this.cancellazione=Object.assign({},o.cancellazione),this.dettagli=o.dettagli,this.showTable=!1,this.containerService.scrollToTop()}ngOnDestroy(){this.headerService.clearTitle()}}function D3e(i,o){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function I3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}zr.\u0275fac=function(o){return new(o||zr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},zr.\u0275cmp=e.Xpm({type:zr,selectors:[["app-cancellazioni"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:24,vars:12,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","isAttivo"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"cancellazione","dettagli","modalitaPagamento","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,M3e,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,q3e,1,0,"mat-header-cell",6),e.YNc(7,P3e,4,0,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,k3e,3,3,"mat-header-cell",6),e.YNc(10,S3e,2,1,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,y3e,3,3,"mat-header-cell",6),e.YNc(13,J3e,2,2,"mat-cell",9),e.BQk(),e.ynx(14,11),e.YNc(15,E3e,1,0,"mat-header-cell",6),e.YNc(16,N3e,4,0,"mat-cell",12),e.BQk(),e.YNc(17,O3e,1,0,"mat-header-row",13),e.YNc(18,L3e,1,1,"mat-row",14),e.qZA()(),e.TgZ(19,"div",15)(20,"mat-paginator",16),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(21,"div",17)(22,"app-cancellazioni-edit",18,19),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("cancellazione",t.cancellazione)("dettagli",t.dettagli)("modalitaPagamento",t.modalitaPagamento))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,wr,z.X$]});class Mr extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe,this.enumTipoCausaleOperazione=c.pg,this.getTemplatesRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.In,"("+c.hQ.RichiestaRifiutata+", "+c.hQ.PreventivoRifiutato+")",c.NM.Number)}save(){this.causaleOperazione.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setCausaleOperazione(this.causaleOperazione).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.causaliOperazione.causaleOperazioneSalvata").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.tabelle.causaliOperazione.eliminareCausaleOperazione").then(t=>{null!=o&&(this.causaleOperazione=o),this.causaleOperazione.isDeleted=!0,this.setIsLoading(!0),this.apiService.setCausaleOperazione(this.causaleOperazione).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function Q3e(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function U3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",12),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",32)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.tabelle.causaliOperazione.nessunaCausaleOperazione")))}function Y3e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function R3e(i,o){1&i&&(e.TgZ(0,"mat-cell",33)(1,"button",34)(2,"i",35),e._uU(3,"edit"),e.qZA()()())}function F3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.causaleOperazione.proprieta.descrizione"),""))}function H3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function K3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.causaleOperazione.proprieta.tipoCausaleOperazione"),""))}function G3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoCausaleOperazione,t.tipoCausaleOperazione,"tipoCausaleOperazione")))}}function $3e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.causaleOperazione.proprieta.isAttiva"),""))}function B3e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",37),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttiva)}}function V3e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function X3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",38)(1,"button",39),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(40);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",40),e._uU(3,"delete"),e.qZA()()()}}function j3e(i,o){1&i&&e._UZ(0,"mat-header-row",41)}function W3e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",42),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Mr.\u0275fac=function(o){return new(o||Mr)(e.Y36(A.s),e.Y36(j.m))},Mr.\u0275cmp=e.Xpm({type:Mr,selectors:[["app-causali-operazione-edit"]],inputs:{causaleOperazione:"causaleOperazione"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:26,vars:28,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.causaleOperazione.descrizione=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"mat-select",4),e.NdJ("ngModelChange",function(a){return t.causaleOperazione.tipoCausaleOperazione=a}),e.ALo(8,"translate"),e.YNc(9,D3e,3,4,"mat-option",5),e.ALo(10,"selectEnum"),e.qZA()()(),e.TgZ(11,"div",1)(12,"app-view-select",6),e.NdJ("valueChange",function(a){return t.causaleOperazione.template=a}),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div")(15,"mat-checkbox",7),e.NdJ("ngModelChange",function(a){return t.causaleOperazione.isAttiva=a}),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",8)(19,"button",9),e.NdJ("click",function(){return t.save()}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,I3e,3,3,"button",10),e.TgZ(23,"button",11),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(24),e.ALo(25,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,13,"bo.causaleOperazione.proprieta.descrizione")),e.Q6J("ngModel",t.causaleOperazione.descrizione),e.xp6(4),e.s9C("placeholder",e.lcZ(8,15,"bo.causaleOperazione.proprieta.tipoCausaleOperazione")),e.Q6J("ngModel",t.causaleOperazione.tipoCausaleOperazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(10,17,t.enumTipoCausaleOperazione,"tipoCausaleOperazione")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesRQ))("value",t.causaleOperazione.template)("placeholder",e.lcZ(13,20,"bo.causaleOperazione.proprieta.template")),e.xp6(3),e.Q6J("ngModel",t.causaleOperazione.isAttiva),e.xp6(1),e.Oqu(e.lcZ(17,22,"bo.causaleOperazione.proprieta.isAttiva")),e.xp6(4),e.Oqu(e.lcZ(21,24,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.causaleOperazione&&t.causaleOperazione.oid>0),e.xp6(2),e.Oqu(e.lcZ(25,26,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,_.Fj,_.JJ,_.On,ne.d,Te.A,z.X$]});class qr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.causaleOperazione=new v.p$p,this.showTable=!0,this.displayedColumns=["edit","descrizione","tipoCausaleOperazione","isAttiva","delete"],this.enumTipoCausaleOperazione=c.pg,this.rq=new d.k$g,this.filters=[]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.causaliOperazione.title"),this.filters.push(new d.wn$("tipoCausaleOperazione",c.Hp.Equal,"",c.NM.Number))}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.rq.filters=this.utility.getFilters(this.filters),this.apiService.getCausaliOperazioneFilter(this.rq).subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.setIsLoading(!1)})}add(){this.causaleOperazione=new v.p$p(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.causaleOperazione=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,this.download(),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle()}}function e6e(i,o){1&i&&(e.TgZ(0,"h5",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.combinazioniRiduzioni.nessunaRisorsaCollegata")))}function t6e(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.portaleXAlbergo.nome+" - "+t.descrizione)}}function i6e(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,t6e,2,1,"div",5),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.tabelle.combinazioniRiduzioni.risorseCollegate")),e.xp6(2),e.Q6J("ngForOf",t.risorse)}}qr.\u0275fac=function(o){return new(o||qr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},qr.\u0275cmp=e.Xpm({type:qr,selectors:[["app-causali-operazione"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:41,vars:20,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],[3,"placeholder","value","selectionChange"],["tipoCausaleOperazioneSelect",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],["matSort","","matSortActive","descrizione","matSortDirection","asc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","descrizione"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","tipoCausaleOperazione"],["matColumnDef","isAttiva"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"causaleOperazione","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],["color","primary","disabled","",3,"checked"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-select",6,7),e.NdJ("selectionChange",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e._UZ(9,"mat-option",8),e.YNc(10,Q3e,3,4,"mat-option",9),e.ALo(11,"selectEnum"),e.qZA()()()()(),e.YNc(12,U3e,8,3,"div",10),e.TgZ(13,"div",1)(14,"button",11),e.NdJ("click",function(){return t.add()}),e.TgZ(15,"i",12),e._uU(16,"add"),e.qZA()(),e.TgZ(17,"div",13)(18,"mat-table",14),e.NdJ("matSortChange",function(){return null!=t.paginator?t.paginator.firstPage():null}),e.ynx(19,15),e.YNc(20,Y3e,1,0,"mat-header-cell",16),e.YNc(21,R3e,4,0,"mat-cell",17),e.BQk(),e.ynx(22,18),e.YNc(23,F3e,3,3,"mat-header-cell",19),e.YNc(24,H3e,2,1,"mat-cell",20),e.BQk(),e.ynx(25,21),e.YNc(26,K3e,3,3,"mat-header-cell",19),e.YNc(27,G3e,3,3,"mat-cell",20),e.BQk(),e.ynx(28,22),e.YNc(29,$3e,3,3,"mat-header-cell",19),e.YNc(30,B3e,2,1,"mat-cell",20),e.BQk(),e.ynx(31,23),e.YNc(32,V3e,1,0,"mat-header-cell",16),e.YNc(33,X3e,4,0,"mat-cell",24),e.BQk(),e.YNc(34,j3e,1,0,"mat-header-row",25),e.YNc(35,W3e,1,1,"mat-row",26),e.qZA()(),e.TgZ(36,"div",27)(37,"mat-paginator",28),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(38,"div",29)(39,"app-causali-operazione-edit",30,31),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,15,"bo.causaleOperazione.proprieta.tipoCausaleOperazione")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(11,17,t.enumTipoCausaleOperazione,"tipoCausaleOperazione")),e.xp6(2),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("causaleOperazione",t.causaleOperazione))},dependencies:[m.sg,m.O5,V.FC,h.eB,M.v_,re.CK,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,Mr,Te.A,z.X$]});class Pr extends f.H{constructor(o){super(),this.apiService=o}ngOnInit(){this.setIsLoading(!0),this.apiService.getRisorseCollegateComponenteXVariazione(this.oidCombinazioneRiduzione).subscribe(o=>{this.risorse=o.data,this.setIsLoading(!1)})}}function o6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",11)(1,"mat-form-field",12)(2,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.componentiXVariazioneXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",14),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.componentiXVariazioneXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.componenteXVariazioneXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.componentiXVariazioneXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.componenteXVariazioneXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.componentiXVariazioneXLingua[a].descrizione)}}function n6e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,o6e,7,10,"mat-tab",10),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function a6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function l6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.controllaRisorseCollegate())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.combinazioniRiduzioni.controllaRisorseCollegate")))}Pr.\u0275fac=function(o){return new(o||Pr)(e.Y36(A.s))},Pr.\u0275cmp=e.Xpm({type:Pr,selectors:[["app-combinazione-riduzione-risorse-collegate-modal"]],inputs:{oidCombinazioneRiduzione:"oidCombinazioneRiduzione"},features:[e.qOj],decls:5,vars:3,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","mb-0",4,"ngIf"],[4,"ngIf"],[1,"mb-0"],[4,"ngFor","ngForOf"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,e6e,3,3,"h5",2),e.YNc(4,i6e,5,4,"ng-container",3)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null==t.risorse||0==t.risorse.length),e.xp6(1),e.Q6J("ngIf",null!=t.risorse&&t.risorse.length>0))},dependencies:[m.sg,m.O5,h.eB,F.aO,z.X$]});class kr extends f.H{set componenteXVariazione(o){if(null!=o){this.modelEdit=new d.Z1u,this.modelEdit.componenteXVariazione=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.$Z$;n.lingua=t,this.modelEdit.componentiXVariazioneXLingua.push(n)}null!=o.oid&&-1!=o.oid&&(this.setIsLoading(!0),this.apiService.getComponentiXVariazioneXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.componentiXVariazioneXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.componentiXVariazioneXLingua[a].componenteXVariazione=n.componenteXVariazione,this.modelEdit.componentiXVariazioneXLingua[a].nome=n.nome,this.modelEdit.componentiXVariazioneXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)}))}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.Z1u,this.selectedIndex=0,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.componentiXVariazioneXLingua)o.componenteXVariazione=this.modelEdit.componenteXVariazione;this.modelEdit.componenteXVariazione.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setComponenteXVariazione(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.combinazioniRiduzioni.combinazioneRiduzioneSalvata").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.tabelle.combinazioniRiduzioni.eliminareCombinazioneRiduzione").then(t=>{null!=o&&(this.modelEdit.componenteXVariazione=o),this.modelEdit.componenteXVariazione.isDeleted=!0,this.setIsLoading(!0),this.apiService.setComponenteXVariazione(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}controllaRisorseCollegate(){let o=new d.Zpt;o.width="50vw",this.showModalDialog(Pr,o).componentInstance.oidCombinazioneRiduzione=this.modelEdit.componenteXVariazione.oid}}function r6e(i,o){1&i&&(e.TgZ(0,"div",24)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.combinazioniRiduzioni.nessunaCombinazioneRiduzione")))}function c6e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function s6e(i,o){1&i&&(e.TgZ(0,"mat-cell",25)(1,"button",26)(2,"i",27),e._uU(3,"edit"),e.qZA()()())}function p6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.componenteXVariazione.proprieta.nome"),""))}function d6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function m6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.componenteXVariazione.proprieta.descrizioneRiduzioni"),""))}function _6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizioneRiduzioni)}}function u6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.componenteXVariazione.proprieta.isVisualizzaDescrizioneSuTipoCamera"),""))}function g6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",28),e._UZ(1,"mat-checkbox",29),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isVisualizzaDescrizioneSuTipoCamera)}}function h6e(i,o){1&i&&e._UZ(0,"mat-header-cell",30)}function f6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",31)(1,"button",32),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(26);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",33),e._uU(3,"delete"),e.qZA()()()}}function C6e(i,o){1&i&&e._UZ(0,"mat-header-row",34)}function b6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",35),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}kr.\u0275fac=function(o){return new(o||kr)(e.Y36(A.s),e.Y36(j.m))},kr.\u0275cmp=e.Xpm({type:kr,selectors:[["app-combinazioni-riduzioni-edit"]],inputs:{componenteXVariazione:"componenteXVariazione"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:18,vars:14,consts:[[1,"row","mt-3"],[1,"col-4"],["color","primary",3,"ngModel","ngModelChange"],[1,"col-8","div-help"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-checkbox",2),e.NdJ("ngModelChange",function(a){return t.modelEdit.componenteXVariazione.isVisualizzaDescrizioneSuTipoCamera=a}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",3),e._uU(6," Visualizza la descrizione sul tipo camera "),e.qZA()(),e.TgZ(7,"mat-tab-group",4),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(8,n6e,2,1,"ng-container",5),e.qZA(),e.TgZ(9,"div",6)(10,"button",7),e.NdJ("click",function(){return t.save()}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,a6e,3,3,"button",8),e.YNc(14,l6e,3,3,"button",8),e.TgZ(15,"button",9),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(16),e.ALo(17,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("ngModel",t.modelEdit.componenteXVariazione.isVisualizzaDescrizioneSuTipoCamera),e.xp6(1),e.hij(" ",e.lcZ(4,8,"bo.componenteXVariazione.proprieta.isVisualizzaDescrizioneSuTipoCamera")," "),e.xp6(4),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.componentiXVariazioneXLingua),e.xp6(3),e.Oqu(e.lcZ(12,10,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.modelEdit.componenteXVariazione.oid>0),e.xp6(1),e.Q6J("ngIf",t.modelEdit.componenteXVariazione.oid>0),e.xp6(2),e.Oqu(e.lcZ(17,12,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.JJ,_.On,Me.P,z.X$]});class Sr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","descrizioneRiduzioni","isVisualizzaDescrizioneSuTipoCamera","delete"]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.combinazioniRiduzioni.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getComponentiXVariazione().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}edit(o){this.componenteXVariazione=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}function v6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",1)(2,"app-image",19),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.modelEdit.evento.urlImmagine)}}function T6e(i,o){1&i&&(e.TgZ(0,"div",20)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.eventi.salvareEvento")))}function x6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",22)(1,"mat-form-field",23)(2,"input",24),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.eventiXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",25),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.eventiXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.eventoXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.eventiXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.eventoXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.eventiXLingua[a].descrizione)}}function Z6e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,x6e,7,10,"mat-tab",21),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function A6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Sr.\u0275fac=function(o){return new(o||Sr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Sr.\u0275cmp=e.Xpm({type:Sr,selectors:[["app-combinazioni-riduzioni"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:27,vars:10,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","descrizioneRiduzioni"],["matColumnDef","isVisualizzaDescrizioneSuTipoCamera"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"componenteXVariazione","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,r6e,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,c6e,1,0,"mat-header-cell",6),e.YNc(7,s6e,4,0,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,p6e,3,3,"mat-header-cell",6),e.YNc(10,d6e,2,1,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,m6e,3,3,"mat-header-cell",6),e.YNc(13,_6e,2,1,"mat-cell",9),e.BQk(),e.ynx(14,11),e.YNc(15,u6e,3,3,"mat-header-cell",12),e.YNc(16,g6e,2,1,"mat-cell",13),e.BQk(),e.ynx(17,14),e.YNc(18,h6e,1,0,"mat-header-cell",15),e.YNc(19,f6e,4,0,"mat-cell",16),e.BQk(),e.YNc(20,C6e,1,0,"mat-header-row",17),e.YNc(21,b6e,1,1,"mat-row",18),e.qZA()(),e.TgZ(22,"div",19)(23,"mat-paginator",20),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(24,"div",21)(25,"app-combinazioni-riduzioni-edit",22,23),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("componenteXVariazione",t.componenteXVariazione))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,kr,z.X$]});class yr extends f.H{set evento(o){if(null!=o){this.modelEdit=new d.RuQ,this.modelEdit.evento=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.xlJ;n.lingua=t,this.modelEdit.eventiXLingua.push(n)}null!=o.oid&&-1!=o.oid&&(this.setIsLoading(!0),this.apiService.getEventiXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.eventiXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.eventiXLingua[a].evento=n.evento,this.modelEdit.eventiXLingua[a].nome=n.nome,this.modelEdit.eventiXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)}))}}constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.modelEdit=new d.RuQ,this.selectedIndex=0,this.backEvent=new e.vpe}save(){if(this.modelEdit.evento.dal=this.getDate(this.modelEdit.evento.dal),this.modelEdit.evento.al=this.getDate(this.modelEdit.evento.al),this.modelEdit.evento.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.evento.coloreHex)try{this.modelEdit.evento.colore=Z(this.modelEdit.evento.coloreHex).rgbNumber()}catch(o){}this.setIsLoading(!0),this.apiService.setEvento(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.eventi.eventoSalvato").then(()=>{if(this.modelEdit.evento.oid<=0){this.modelEdit.evento=o.data.obj;try{this.modelEdit.evento.coloreHex=Z(this.modelEdit.evento.colore).hex()}catch(t){}}else this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.tabelle.eventi.eliminareEvento").then(t=>{null!=o&&(this.modelEdit.evento=o),this.modelEdit.evento.isDeleted=!0,this.setIsLoading(!0),this.apiService.setEvento(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.modelEdit.evento.urlImmagine,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.Ll1;l.oid=this.modelEdit.evento.oid,l.base64=a,this.apiService.setImmagineEvento(l).subscribe(r=>{null!=r.data&&(this.modelEdit.evento.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.Ll1;t.oid=this.modelEdit.evento.oid,t.base64="",this.apiService.setImmagineEvento(t).subscribe(n=>{null!=n.data&&(this.modelEdit.evento.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}}function w6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",28)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.tabelle.eventi.nessunEvento")))}function z6e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function M6e(i,o){1&i&&(e.TgZ(0,"mat-cell",29)(1,"button",30)(2,"i",31),e._uU(3,"edit"),e.qZA()()())}function q6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.evento.proprieta.dal"),""))}function P6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dal,"dd/MM/yyyy"))}}function k6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.evento.proprieta.al"),""))}function S6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.al,"dd/MM/yyyy"))}}function y6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.evento.proprieta.nome"),""))}function J6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function E6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.evento.proprieta.colore"),""))}function N6e(i,o){if(1&i&&e._UZ(0,"mat-cell",32),2&i){const t=o.$implicit;e.Udp("background-color",t.coloreHex)}}function O6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.immagine"),""))}function L6e(i,o){if(1&i&&e._UZ(0,"img",35),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagine,e.LSH)}}function D6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e.YNc(1,L6e,1,1,"img",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlImmagine)}}function I6e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Q6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",36)(1,"button",37),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(35);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",38),e._uU(3,"delete"),e.qZA()()()}}function U6e(i,o){1&i&&e._UZ(0,"mat-header-row",39)}function Y6e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",40),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}yr.\u0275fac=function(o){return new(o||yr)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},yr.\u0275cmp=e.Xpm({type:yr,selectors:[["app-eventi-edit"]],inputs:{evento:"evento"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:40,vars:37,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["dal",""],["al",""],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"value","placeholder","valueChange"],["class","row mt-3",4,"ngIf"],["class","mt-3 p-3 border rounded",4,"ngIf"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"row","mt-3"],[3,"title","url","edit","delete"],[1,"mt-3","p-3","border","rounded"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.evento.dal=a}),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"mat-datepicker-toggle",4)(6,"mat-datepicker",5,6),e.qZA()(),e.TgZ(8,"div",1)(9,"mat-form-field",2)(10,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.evento.al=a}),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"mat-datepicker-toggle",4)(13,"mat-datepicker",5,7),e.qZA()()(),e.TgZ(15,"div",0)(16,"div",1)(17,"mat-form-field",2)(18,"input",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.evento.nome=a}),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",1)(21,"mat-form-field",2)(22,"input",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.evento.descrizione=a}),e.ALo(23,"translate"),e.qZA()()()(),e.TgZ(24,"div",0)(25,"div",1)(26,"app-color-picker",9),e.NdJ("valueChange",function(a){return t.modelEdit.evento.coloreHex=a}),e.ALo(27,"translate"),e.qZA()()(),e.YNc(28,v6e,3,2,"div",10),e.YNc(29,T6e,4,3,"div",11),e.TgZ(30,"mat-tab-group",12),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(31,Z6e,2,1,"ng-container",13),e.qZA(),e.TgZ(32,"div",14)(33,"button",15),e.NdJ("click",function(){return t.save()}),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.YNc(36,A6e,3,3,"button",16),e.TgZ(37,"button",17),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(38),e.ALo(39,"translate"),e.qZA()()),2&o){const n=e.MAs(7),a=e.MAs(14);e.xp6(3),e.s9C("placeholder",e.lcZ(4,23,"bo.evento.proprieta.dal")),e.Q6J("matDatepicker",n)("ngModel",t.modelEdit.evento.dal),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.evento.dal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(11,25,"bo.evento.proprieta.al")),e.Q6J("matDatepicker",a)("ngModel",t.modelEdit.evento.al),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.evento.al)?t.today:null),e.xp6(5),e.s9C("placeholder",e.lcZ(19,27,"bo.evento.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.evento.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(23,29,"bo.evento.proprieta.descrizione")),e.Q6J("ngModel",t.modelEdit.evento.descrizione),e.xp6(4),e.Q6J("value",t.modelEdit.evento.coloreHex)("placeholder",e.lcZ(27,31,"bo.evento.proprieta.colore")),e.xp6(2),e.Q6J("ngIf",t.modelEdit.evento.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.evento.oid||t.modelEdit.evento.oid<=0),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.eventiXLingua),e.xp6(3),e.Oqu(e.lcZ(35,33,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.modelEdit.evento&&t.modelEdit.evento.oid>0),e.xp6(2),e.Oqu(e.lcZ(39,35,"globals.annulla"))}},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,M.nX,b.k0,y.Mq,y.hl,y.nW,ee.SK,ee.R7,_.Fj,_.JJ,_.On,We.h,Me.P,Ge.c,z.X$]});class Jr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.evento=new v.EqK,this.showTable=!0,this.displayedColumns=["edit","dal","al","nome","colore","immagine","delete"]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.eventi.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getEventi().subscribe(o=>{for(let t of o.data)try{t.coloreHex=Z(t.colore).hex()}catch(n){}this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.evento=new v.EqK(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.evento=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}function R6e(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function F6e(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function H6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.listinoXPeriodo.proprieta.dal"),""))}function K6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dal,"dd/MM/yyyy"))}}function G6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.listinoXPeriodo.proprieta.al"),""))}function $6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.al,"dd/MM/yyyy"))}}function B6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.tipoArticolo"),""))}function V6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",null!=t.articolo?e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoArticolo,t.articolo.tipoArticolo,"tipoArticolo")):""," ")}}function X6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.articolo"),""))}function j6e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.articolo?t.articolo.nome:"")}}function W6e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.prezzo"),""))}function eTe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Oqu(t.prezzo+(t.tipoValore==n.enumTipoValore.Euro?" \u20ac":" %"))}}function tTe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.fascia"),""))}function iTe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.fascia)}}function oTe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.politicaCancellazione"),""))}function nTe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.politicaCancellazione?t.politicaCancellazione.nome:"")}}function aTe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.durataMinimaSoggiorno"),""))}function lTe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMinimaSoggiorno)}}function rTe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.prezzoXArticolo.proprieta.durataMassimaSoggiorno"),""))}function cTe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMassimaSoggiorno)}}function sTe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function pTe(i,o){1&i&&(e.TgZ(0,"mat-cell",48)(1,"button",49)(2,"i",50),e._uU(3,"more_vert"),e.qZA()()())}function dTe(i,o){1&i&&e._UZ(0,"mat-header-row",51)}function mTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",52),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oidPrezzoXArticolo))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.utility.checkClick(a)?p.openDetails(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oidPrezzoXArticolo?t.oidPrezzoXArticolo:"")}}function _Te(i,o){if(1&i&&(e.TgZ(0,"div",29)(1,"mat-table",30),e.ynx(2,31),e.YNc(3,H6e,3,3,"mat-header-cell",32),e.YNc(4,K6e,3,4,"mat-cell",33),e.BQk(),e.ynx(5,34),e.YNc(6,G6e,3,3,"mat-header-cell",32),e.YNc(7,$6e,3,4,"mat-cell",33),e.BQk(),e.ynx(8,35),e.YNc(9,B6e,3,3,"mat-header-cell",32),e.YNc(10,V6e,3,3,"mat-cell",33),e.BQk(),e.ynx(11,36),e.YNc(12,X6e,3,3,"mat-header-cell",32),e.YNc(13,j6e,2,1,"mat-cell",33),e.BQk(),e.ynx(14,37),e.YNc(15,W6e,3,3,"mat-header-cell",32),e.YNc(16,eTe,2,1,"mat-cell",33),e.BQk(),e.ynx(17,38),e.YNc(18,tTe,3,3,"mat-header-cell",32),e.YNc(19,iTe,2,1,"mat-cell",33),e.BQk(),e.ynx(20,39),e.YNc(21,oTe,3,3,"mat-header-cell",32),e.YNc(22,nTe,2,1,"mat-cell",33),e.BQk(),e.ynx(23,40),e.YNc(24,aTe,3,3,"mat-header-cell",32),e.YNc(25,lTe,2,1,"mat-cell",33),e.BQk(),e.ynx(26,41),e.YNc(27,rTe,3,3,"mat-header-cell",32),e.YNc(28,cTe,2,1,"mat-cell",33),e.BQk(),e.ynx(29,42),e.YNc(30,sTe,1,0,"mat-header-cell",43),e.YNc(31,pTe,4,0,"mat-cell",44),e.BQk(),e.YNc(32,dTe,1,0,"mat-header-row",45),e.YNc(33,mTe,1,1,"mat-row",46),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function uTe(i,o){1&i&&(e.TgZ(0,"div",53)(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.listini.nessunPrezzoListino")))}function gTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"div")(2,"h4",22),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-form-field",23)(6,"mat-select",24,25),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.filter.tipoArticolo=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onTipoArticoloSelected())}),e.ALo(8,"translate"),e._UZ(9,"mat-option",21),e.YNc(10,F6e,3,4,"mat-option",6),e.ALo(11,"selectEnum"),e.qZA()(),e.TgZ(12,"app-view-select",26),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.articoloFilter=a)})("valueChange",function(){e.CHM(t);const a=e.oxw();return a.filter.oidArticolo=null==a.articoloFilter?null:a.articoloFilter.oid,e.KtG(a.onFilter())}),e.ALo(13,"translate"),e.qZA()(),e.YNc(14,_Te,34,4,"div",27),e.YNc(15,uTe,4,3,"div",28),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,12,"sbm.tabelle.listini.prezziListino")),e.xp6(3),e.s9C("placeholder",e.lcZ(8,14,"bo.articolo.proprieta.tipoArticolo")),e.Q6J("ngModel",t.filter.tipoArticolo),e.xp6(3),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(11,16,t.enumTipoArticolo,"tipoArticolo")),e.xp6(2),e.Q6J("block",!1)("forceDownload",!0)("placeholder",e.lcZ(13,19,"bo.prezzoXArticolo.proprieta.articolo"))("dataLoader",t.getArticoliLoader())("value",t.articoloFilter),e.xp6(2),e.Q6J("ngIf",null!=t.dataSource.filteredData&&t.dataSource.filteredData.length>0),e.xp6(1),e.Q6J("ngIf",null===t.dataSource.filteredData||0==t.dataSource.filteredData.length)}}function hTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Jr.\u0275fac=function(o){return new(o||Jr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Jr.\u0275cmp=e.Xpm({type:Jr,selectors:[["app-eventi"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:36,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","dal"],[4,"matCellDef"],["matColumnDef","al"],["matColumnDef","nome"],["matColumnDef","colore"],["class","rounded",3,"backgroundColor",4,"matCellDef"],["matColumnDef","immagine"],["class","img-cell",4,"matHeaderCellDef"],["class","img-cell",4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"evento","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"rounded"],[1,"img-cell"],["class","m-2",3,"src",4,"ngIf"],[1,"m-2",3,"src"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,w6e,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,z6e,1,0,"mat-header-cell",8),e.YNc(10,M6e,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,q6e,3,3,"mat-header-cell",8),e.YNc(13,P6e,3,4,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,k6e,3,3,"mat-header-cell",8),e.YNc(16,S6e,3,4,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,y6e,3,3,"mat-header-cell",8),e.YNc(19,J6e,2,1,"mat-cell",11),e.BQk(),e.ynx(20,14),e.YNc(21,E6e,3,3,"mat-header-cell",8),e.YNc(22,N6e,1,2,"mat-cell",15),e.BQk(),e.ynx(23,16),e.YNc(24,O6e,3,3,"mat-header-cell",17),e.YNc(25,D6e,2,1,"mat-cell",18),e.BQk(),e.ynx(26,19),e.YNc(27,I6e,1,0,"mat-header-cell",8),e.YNc(28,Q6e,4,0,"mat-cell",20),e.BQk(),e.YNc(29,U6e,1,0,"mat-header-row",21),e.YNc(30,Y6e,1,1,"mat-row",22),e.qZA()(),e.TgZ(31,"div",23)(32,"mat-paginator",24),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(33,"div",25)(34,"app-eventi-edit",26,27),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("evento",t.evento))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,yr,m.uU,z.X$],styles:["img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.img-cell[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]});class Er extends f.H{set _listino(o){null!=o&&(this.listino=o,this.giorniArrivoValidi="",this.listino.isLunedi&&(this.giorniArrivoValidi+=this.localizationService.getTranslationSync("enumerations.giornoSettimana.lunedi")+", "),this.listino.isMartedi&&(this.giorniArrivoValidi+=this.localizationService.getTranslationSync("enumerations.giornoSettimana.martedi")+", "),this.listino.isMercoledi&&(this.giorniArrivoValidi+=this.localizationService.getTranslationSync("enumerations.giornoSettimana.mercoledi")+", "),this.listino.isGiovedi&&(this.giorniArrivoValidi+=this.localizationService.getTranslationSync("enumerations.giornoSettimana.giovedi")+", "),this.listino.isVenerdi&&(this.giorniArrivoValidi+=this.localizationService.getTranslationSync("enumerations.giornoSettimana.venerdi")+", "),this.listino.isSabato&&(this.giorniArrivoValidi+=this.localizationService.getTranslationSync("enumerations.giornoSettimana.sabato")+", "),this.listino.isDomenica&&(this.giorniArrivoValidi+=this.localizationService.getTranslationSync("enumerations.giornoSettimana.domenica")+", "),this.giorniArrivoValidi&&(this.giorniArrivoValidi=this.giorniArrivoValidi.substring(0,this.giorniArrivoValidi.length-2)),this.filter={},this.articoloFilter=null,o.oid>0&&(this.setIsLoading(!0),this.apiService.getListinoDetails(o.oid).subscribe(t=>{this.dataSource=new s.r4(t.data.prezzi),this.dataSource.filterPredicate=(n,a)=>{if(null!=a){let l=JSON.parse(a);if(null!=l)return(null==l.tipoArticolo||null!=n.articolo&&n.articolo.tipoArticolo==l.tipoArticolo)&&(null==l.oidArticolo||l.oidArticolo<=0||null!=n.articolo&&n.articolo.oid==l.oidArticolo)}return!0},setTimeout(()=>{this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=this.utility.getPropertyValue},200),this.setIsLoading(!1)})))}constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.localizationService=a,this.backEvent=new e.vpe,this.displayedColumns=["dal","al","articolo.tipoArticolo","articolo.nome","prezzo","fascia","politicaCancellazione.nome","durataMinimaSoggiorno","durataMassimaSoggiorno","details"],this.enumTipoArticolo=c.ix,this.enumTipoListino=c.P4,this.enumTipoValore=c.jy,this.listino=new v.H3e,this.filter={}}save(){this.listino.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.listino.prenotabileDal=this.getDate(this.listino.prenotabileDal),this.listino.prenotabileAl=this.getDate(this.listino.prenotabileAl),this.setIsLoading(!0),this.apiService.setListino(this.listino).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.listini.listinoSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.tabelle.listini.eliminareListino").then(t=>{null!=o&&(this.listino=o),this.listino.isDeleted=!0,this.setIsLoading(!0),this.apiService.setListino(this.listino).subscribe(()=>{this.backEvent.emit()})},t=>{})}openDetails(o){let t=new d.Zpt;t.width="80vw",t.height="80vh",this.showModalDialog(Pi,t).componentInstance.prezzo=o}onFilter(){this.dataSource.filter=JSON.stringify(this.filter)}onTipoArticoloSelected(){null!=this.filter.tipoArticolo&&(this.articoloFilter=null,this.filter.oidArticolo=null),this.onFilter()}getArticoliLoader(){let o=new d.k$g;return null!=this.filter.tipoArticolo&&(o.filters=[new d.wn$("tipoArticolo",c.Hp.Equal,this.filter.tipoArticolo.toString(),c.NM.Number)]),this.apiService.getArticoliViewSelect(o)}}function fTe(i,o){1&i&&(e.TgZ(0,"div",21)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.listini.nessunListino")))}function CTe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function bTe(i,o){1&i&&(e.TgZ(0,"mat-cell",22)(1,"button",23)(2,"i",24),e._uU(3,"edit"),e.qZA()()())}function vTe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.listino.proprieta.nome"),""))}function TTe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nome," ")}}function xTe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.listino.proprieta.tipoListino"),""))}function ZTe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoListino,t.tipoListino,"tipoListino"))," ")}}function ATe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.listino.proprieta.isDisponibile"),""))}function wTe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",25),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDisponibile)("disabled",!0)}}function zTe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function MTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",26)(1,"button",27),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(26);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",28),e._uU(3,"delete"),e.qZA()()()}}function qTe(i,o){1&i&&e._UZ(0,"mat-header-row",29)}function PTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",30),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Er.\u0275fac=function(o){return new(o||Er)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t),e.Y36(Oe.o))},Er.\u0275cmp=e.Xpm({type:Er,selectors:[["app-listini-edit"]],viewQuery:function(o,t){if(1&o&&e.Gf(_e.YE,5),2&o){let n;e.iGM(n=e.CRH())&&(t.sort=n.first)}},inputs:{_listino:"_listino"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:77,vars:58,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","disabled","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["disabled","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","text","matInput","","readonly","","disabled","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startAt"],["dal",""],["al",""],["autocompleteOff","","type","text","matInput","","readonly","","disabled","",3,"placeholder","ngModel","ngModelChange"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],["color","primary","disabled","",3,"ngModel","ngModelChange"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],[1,"d-inline-block","align-middle","mr-4"],[1,"d-inline-block","align-middle","mr-3"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],["tipoArticoloSelect",""],["displayMember","nome",1,"d-inline-block","align-middle",3,"block","forceDownload","placeholder","dataLoader","value","valueChange"],["class","mat-table-container-border-rounded",4,"ngIf"],["class","border rounded-lg mat-elevation-z1 p-3",4,"ngIf"],[1,"mat-table-container-border-rounded"],["matSort","","matSortActive","dal","matSortDirection","desc","matSortDisableClear","",1,"mat-table",3,"dataSource"],["matColumnDef","dal"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","al"],["matColumnDef","articolo.tipoArticolo"],["matColumnDef","articolo.nome"],["matColumnDef","prezzo"],["matColumnDef","fascia"],["matColumnDef","politicaCancellazione.nome"],["matColumnDef","durataMinimaSoggiorno"],["matColumnDef","durataMassimaSoggiorno"],["matColumnDef","details"],[4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"mat-td-delete"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[1,"border","rounded-lg","mat-elevation-z1","p-3"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.listino.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"div",0)(9,"div",1)(10,"mat-form-field",2)(11,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.listino.tipoListino=a}),e.ALo(12,"translate"),e.YNc(13,R6e,3,4,"mat-option",6),e.ALo(14,"selectEnum"),e.qZA()()(),e.TgZ(15,"div",4),e._uU(16," Inserire il tipo del listino "),e.qZA()(),e.TgZ(17,"div",0)(18,"div",1)(19,"mat-form-field",2)(20,"input",7),e.NdJ("ngModelChange",function(a){return t.listino.prenotabileDal=a}),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"mat-datepicker-toggle",8)(23,"mat-datepicker",9,10),e.qZA(),e.TgZ(25,"mat-form-field",2)(26,"input",7),e.NdJ("ngModelChange",function(a){return t.listino.prenotabileAl=a}),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"mat-datepicker-toggle",8)(29,"mat-datepicker",9,11),e.qZA()(),e.TgZ(31,"div",4),e._uU(32," Inserire il periodo in cui il listino \xe8 valido (in riferimento alla data di prenotazione) "),e.qZA()(),e.TgZ(33,"div",0)(34,"div",1)(35,"mat-form-field",2)(36,"input",12),e.NdJ("ngModelChange",function(a){return t.giorniArrivoValidi=a}),e.ALo(37,"translate"),e.qZA()()(),e.TgZ(38,"div",4),e._uU(39," Giorni della settimana di arrivo validi "),e.qZA()(),e.TgZ(40,"div",0)(41,"div",1)(42,"mat-form-field",2)(43,"input",12),e.NdJ("ngModelChange",function(a){return t.listino.minimoGiorniDiAnticipo=a}),e.ALo(44,"translate"),e.qZA()()(),e.TgZ(45,"div",4),e._uU(46," Giorni di anticipo minimi "),e.qZA()(),e.TgZ(47,"div",0)(48,"div",1)(49,"mat-form-field",2)(50,"input",12),e.NdJ("ngModelChange",function(a){return t.listino.massimoGiorniDiAnticipo=a}),e.ALo(51,"translate"),e.qZA()()(),e.TgZ(52,"div",4),e._uU(53," Giorni di anticipo massimi "),e.qZA()(),e.TgZ(54,"div",13)(55,"div",1)(56,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){return t.listino.isDisponibile=a}),e._uU(57),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"div",4),e._uU(60," Attiva/Disattiva il listino "),e.qZA()(),e.TgZ(61,"div",13)(62,"div",1)(63,"mat-checkbox",15),e.NdJ("ngModelChange",function(a){return t.listino.isListinoNoFascia=a}),e._uU(64),e.ALo(65,"translate"),e.qZA()(),e.TgZ(66,"div",4),e._uU(67," Imposta questo parametro se il listino non deve utilizzare la fascia attiva "),e.qZA()(),e.YNc(68,gTe,16,21,"div",16),e.TgZ(69,"div",17)(70,"button",18),e.NdJ("click",function(){return t.save()}),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.YNc(73,hTe,3,3,"button",19),e.TgZ(74,"button",20),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(75),e.ALo(76,"translate"),e.qZA()()),2&o){const n=e.MAs(24),a=e.MAs(30);e.xp6(3),e.s9C("placeholder",e.lcZ(4,30,"bo.listino.proprieta.nome")),e.Q6J("ngModel",t.listino.nome),e.xp6(3),e.hij(" Ultima sincronizzazione Welcome: ",e.xi3(7,32,t.listino.dataModificaWelcome,"dd/MM/yyyy HH:mm")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(12,35,"bo.listino.proprieta.tipoListino")),e.Q6J("ngModel",t.listino.tipoListino),e.xp6(2),e.Q6J("ngForOf",e.xi3(14,37,t.enumTipoListino,"tipoListino")),e.xp6(7),e.s9C("placeholder",e.lcZ(21,40,"bo.listino.proprieta.prenotabileDal")),e.Q6J("matDatepicker",n)("ngModel",t.listino.prenotabileDal),e.xp6(2),e.Q6J("for",n),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.listino.prenotabileDal)?t.today:null),e.xp6(3),e.s9C("placeholder",e.lcZ(27,42,"bo.listino.proprieta.prenotabileAl")),e.Q6J("matDatepicker",a)("ngModel",t.listino.prenotabileAl),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",t.utility.isNullDate(t.listino.prenotabileAl)?t.today:null),e.xp6(7),e.s9C("placeholder",e.lcZ(37,44,"sbm.tabelle.listini.giorniArrivoValidi")),e.Q6J("ngModel",t.giorniArrivoValidi),e.xp6(7),e.s9C("placeholder",e.lcZ(44,46,"bo.listino.proprieta.minimoGiorniDiAnticipo")),e.Q6J("ngModel",t.listino.minimoGiorniDiAnticipo),e.xp6(7),e.s9C("placeholder",e.lcZ(51,48,"bo.listino.proprieta.massimoGiorniDiAnticipo")),e.Q6J("ngModel",t.listino.massimoGiorniDiAnticipo),e.xp6(6),e.Q6J("ngModel",t.listino.isDisponibile),e.xp6(1),e.hij(" ",e.lcZ(58,50,"bo.listino.proprieta.isDisponibile")," "),e.xp6(6),e.Q6J("ngModel",t.listino.isListinoNoFascia),e.xp6(1),e.hij(" ",e.lcZ(65,52,"bo.listino.proprieta.isListinoNoFascia")," "),e.xp6(4),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&t.dataSource.data.length>0),e.xp6(3),e.Oqu(e.lcZ(72,54,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.listino.oid>0),e.xp6(2),e.Oqu(e.lcZ(76,56,"globals.annulla"))}},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,_.Fj,_.JJ,_.On,ne.d,m.uU,Te.A,z.X$]});class Nr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.displayedColumns=["edit","nome","tipoListino","isDisponibile","delete"],this.enumTipoListino=c.P4,this.showTable=!0}ngOnInit(){this.headerService.setTitle("sbm.tabelle.listini.title")}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getListini().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}edit(o){this.listino=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBackEvent.bind(this))}onBackEvent(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}function kTe(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e.ALo(1,"translate"),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(10);e.Q6J("value",t.key)("hidden",!!n.value&&!e.lcZ(1,3,t.value).toLowerCase().includes(n.value.toLowerCase())),e.xp6(2),e.hij(" ",e.lcZ(3,5,t.value)," ")}}Nr.\u0275fac=function(o){return new(o||Nr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Nr.\u0275cmp=e.Xpm({type:Nr,selectors:[["app-listini"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:27,vars:10,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","tipoListino"],["matColumnDef","isDisponibile"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"_listino","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,fTe,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,CTe,1,0,"mat-header-cell",6),e.YNc(7,bTe,4,0,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,vTe,3,3,"mat-header-cell",6),e.YNc(10,TTe,2,1,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,xTe,3,3,"mat-header-cell",6),e.YNc(13,ZTe,3,3,"mat-cell",9),e.BQk(),e.ynx(14,11),e.YNc(15,ATe,3,3,"mat-header-cell",6),e.YNc(16,wTe,2,2,"mat-cell",9),e.BQk(),e.ynx(17,12),e.YNc(18,zTe,1,0,"mat-header-cell",6),e.YNc(19,MTe,4,0,"mat-cell",13),e.BQk(),e.YNc(20,qTe,1,0,"mat-header-row",14),e.YNc(21,PTe,1,1,"mat-row",15),e.qZA()(),e.TgZ(22,"div",16)(23,"mat-paginator",17),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(24,"div",18)(25,"app-listini-edit",19,20),e.NdJ("backEvent",function(){return t.onBackEvent()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("_listino",t.listino))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Er,z.X$]});class Or extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modalitaPagamento=new v.bUM,this.enumTipoModalitaPagamento=c.sc,this.excludedModalitaPagamento=this.sessionService.isDev()?[]:[c.sc.MyPOS]}save(){if(null!=this.modalitaPagamento.tipo){this.setIsLoading(!0),this.modalitaPagamento.isPrenotazioniConfermateAutomaticamente=!0,this.modalitaPagamento.tipo==c.sc.MyPOS&&(this.modalitaPagamento.myPOSKeyIndex=1),this.modalitaPagamento.albergo=new v.Z$(this.sessionService.getOidAlbergo());let o=new d.yu6;o.modalitaPagamento=this.modalitaPagamento,this.apiService.setModalitaPagamento(o).subscribe(t=>{this.dialogRef.close(t.data.obj),this.setIsLoading(!1)})}else this.showError("globals.messages.inserireDati")}}Or.\u0275fac=function(o){return new(o||Or)(e.Y36(A.s),e.Y36(j.m))},Or.\u0275cmp=e.Xpm({type:Or,selectors:[["app-modalita-pagamento-add"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:17,vars:17,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100","mt-3"],[3,"ngModel","placeholder","ngModelChange"],["selectSearch",""],[3,"value","hidden",4,"ngFor","ngForOf"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"click"],[3,"value","hidden"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"h4"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-form-field",2)(7,"mat-select",3),e.NdJ("ngModelChange",function(a){return t.modalitaPagamento.tipo=a}),e.ALo(8,"translate"),e._UZ(9,"app-select-search",null,4),e.YNc(11,kTe,4,7,"mat-option",5),e.ALo(12,"selectEnum"),e.qZA()(),e.TgZ(13,"div",6)(14,"button",7),e.NdJ("click",function(){return t.save()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Oqu(e.lcZ(5,6,"sbm.tabelle.modalitaPagamento.creaModalitaPagamento")),e.xp6(3),e.s9C("placeholder",e.lcZ(8,8,"bo.modalitaPagamento.proprieta.tipo")),e.Q6J("ngModel",t.modalitaPagamento.tipo),e.xp6(4),e.Q6J("ngForOf",e.gM2(12,10,t.enumTipoModalitaPagamento,"tipoModalitaPagamento",!0,t.excludedModalitaPagamento)),e.xp6(4),e.Oqu(e.lcZ(16,15,"globals.salva")))},dependencies:[m.sg,h.eB,M.v_,re.CK,g.x8,F.aO,_.JJ,_.On,R,Te.A,z.X$]});class Lr extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t}genera(){this.setIsLoading(!0);let o=d.sK_.getSatispayCreateKeyIdRQ(this.sessionService.getOidAlbergo(),null,this.modalitaPagamento.oid,null,null,null,null,null,null,null,null,null,null,null,null,null,this.token,this.modalitaPagamento.isTest);this.apiService.payment(o).subscribe(t=>{t.success?(this.modalitaPagamento.satispayKeyId=t.key_id,this.dialogRef.close()):this.showError("sbm.tabelle.modalitaPagamento.erroreGenerazioneKeyId"),this.setIsLoading(!1)})}}Lr.\u0275fac=function(o){return new(o||Lr)(e.Y36(A.s),e.Y36(j.m))},Lr.\u0275cmp=e.Xpm({type:Lr,selectors:[["app-genera-satispay-key-id-modal"]],inputs:{modalitaPagamento:"modalitaPagamento",dialogRef:"dialogRef"},features:[e.qOj],decls:10,vars:9,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.token=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return t.genera()}),e._uU(8),e.ALo(9,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.s9C("placeholder",e.lcZ(5,5,"sbm.tabelle.modalitaPagamento.token")),e.Q6J("ngModel",t.token),e.xp6(3),e.Q6J("disabled",!t.token),e.xp6(1),e.Oqu(e.lcZ(9,7,"sbm.tabelle.modalitaPagamento.genera")))},dependencies:[w.X,h.eB,M.v_,b.k0,F.aO,_.Fj,_.JJ,_.On,z.X$]});class Dr{constructor(){}}function STe(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function yTe(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}Dr.\u0275fac=function(o){return new(o||Dr)},Dr.\u0275cmp=e.Xpm({type:Dr,selectors:[["app-nexi-help-modal"]],decls:4,vars:1,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["src","\\assets\\images\\sbm\\nexi_hotel.jpg",1,"w-100"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"img",2)),2&o&&e.Q6J("disableRipple",!0)},dependencies:[h.eB,F.aO]});class Ir extends f.H{constructor(o,t,n){super(),this.sessionService=o,this.apiService=t,this.utility=n,this.rq=new d.vMP}ngOnInit(){this.rq.oidAlbergo=this.sessionService.getOidAlbergo(),this.currentYear=u().year()}verificaCartaCredito(){this.setIsLoading(!0),this.rq.numeroCC=this.rq.numeroCC.trim(),this.apiService.verificaCartaCredito(this.rq).subscribe(o=>{this.setIsLoading(!1),null!=o.data&&null!=o.data.tipoEsito&&0==o.data.tipoEsito?this.showInfo("sbm.tabelle.modalitaPagamento.cartaCreditoValida").then(()=>{this.dialogRef.close()}):o.data.dettaglioErrore?this.showError(o.data.dettaglioErrore):this.showError("sbm.tabelle.modalitaPagamento.cartaCreditoNonValida")})}}function JTe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function ETe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",1)(2,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.modalitaPagamento.isCaparraPerCamera=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",4),e._uU(6," Applica la caparra per ogni camera "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isCaparraPerCamera),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.modalitaPagamento.proprieta.isCaparraPerCamera")," ")}}function NTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",1)(2,"mat-form-field",2)(3,"input",5),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.modalitaPagamento.importoMinimoCaparraPercentuale=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Importo minimo in caso di caparra a percentuale "),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.s9C("placeholder",e.lcZ(4,2,"bo.modalitaPagamento.proprieta.importoMinimoCaparraPercentuale")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.importoMinimoCaparraPercentuale)}}function OTe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",26)(2,"div",12)(3,"mat-form-field",2)(4,"input",5),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.caparra=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCaparraChange())}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",12)(7,"mat-form-field",2)(8,"mat-select",34,35),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.MAs(9),l=e.oxw();return a.value==l.enumTipoValore.Euro?l.modelEdit.modalitaPagamento.isPercentuale=!1:l.modelEdit.modalitaPagamento.isPercentuale=!0,e.KtG(l.onCaparraChange())}),e.ALo(10,"translate"),e.YNc(11,JTe,3,4,"mat-option",22),e.ALo(12,"selectEnum"),e.qZA()()(),e.TgZ(13,"div",4),e._uU(14," Valore della caparra richiesta selezionando questa modalit\xe0 di pagamento "),e.qZA()(),e.YNc(15,ETe,7,4,"div",36),e.YNc(16,NTe,7,4,"div",36),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,7,"bo.modalitaPagamento.proprieta.caparra")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.caparra),e.xp6(4),e.s9C("placeholder",e.lcZ(10,9,"bo.modalitaPagamento.proprieta.isPercentuale")),e.Q6J("value",t.modelEdit.modalitaPagamento.isPercentuale?t.enumTipoValore.Percentuale:t.enumTipoValore.Euro),e.xp6(3),e.Q6J("ngForOf",e.xi3(12,11,t.enumTipoValore,"tipoValore")),e.xp6(4),e.Q6J("ngIf",!t.modelEdit.modalitaPagamento.isPercentuale),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.isPercentuale)}}function LTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"div",1)(2,"mat-form-field",2)(3,"input",5),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.numeroNottiCaparra=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.modalitaPagamento.numeroNottiCaparra=a.utility.clamp(a.modelEdit.modalitaPagamento.numeroNottiCaparra,0,2))}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Numero di notti da pagare come caparra selezionando questa modalit\xe0 di pagamento "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,2,"bo.modalitaPagamento.proprieta.numeroNottiCaparra")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.numeroNottiCaparra)}}function DTe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function ITe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.iban=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.banca=a)}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",1)(10,"mat-form-field",2)(11,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.intestatarioConto=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",1)(14,"mat-form-field",2)(15,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.swift=a)}),e.ALo(16,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,8,"bo.modalitaPagamento.proprieta.iban")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.iban),e.xp6(4),e.s9C("placeholder",e.lcZ(8,10,"bo.modalitaPagamento.proprieta.banca")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.banca),e.xp6(4),e.s9C("placeholder",e.lcZ(12,12,"bo.modalitaPagamento.proprieta.intestatarioConto")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.intestatarioConto),e.xp6(4),e.s9C("placeholder",e.lcZ(16,14,"bo.modalitaPagamento.proprieta.swift")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.swift)}}function QTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.intestazione=a)}),e.ALo(4,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,2,"bo.modalitaPagamento.proprieta.intestazione")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.intestazione)}}function UTe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function YTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-checkbox",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2);return e.KtG(l.modelEdit.modalitaPagamento.xPayVerificaCartaCC=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",1)(6,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.save(!0))}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPayVerificaCartaCC),e.xp6(1),e.hij(" ",e.lcZ(4,4,"bo.modalitaPagamento.proprieta.xPayVerificaCartaCC")," "),e.xp6(3),e.Q6J("disabled",!t.modelEdit.modalitaPagamento.xPayVerificaCartaCC),e.xp6(1),e.Oqu(e.lcZ(8,6,"sbm.tabelle.modalitaPagamento.test"))}}function RTe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function FTe(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.tabelle.modalitaPagamento.licenzaNonAttiva")," "))}function HTe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",38)(2,"h6",39),e._uU(3,"Prima di attivare la modalit\xe0 Pagamento assicurarsi di aver configurato i giusti parametri nel BackOffice NEXI"),e.qZA(),e.TgZ(4,"h6",40),e._uU(5,"NB: verificare che il 'Mostrare la Pagina di Scontrino' sia disattivato. Si consiglia inoltre di impostare un timeout per la pagina di pagamento di Nexi"),e.qZA(),e.TgZ(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.xPayAlias=a)}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"mat-form-field",2)(10,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.xPaySecretKey=a)}),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",0)(13,"div",1)(14,"mat-form-field",2)(15,"mat-select",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.tipoContabilizzazione=a)}),e.ALo(16,"translate"),e.YNc(17,UTe,3,4,"mat-option",22),e.ALo(18,"selectEnum"),e.qZA()()(),e.TgZ(19,"div",1)(20,"mat-checkbox",41),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.xPayPagamentoRicorrente=a)}),e._uU(21),e.ALo(22,"translate"),e.qZA()()(),e.YNc(23,YTe,9,8,"div",25),e.TgZ(24,"mat-card",42)(25,"mat-card-title")(26,"h5",43),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openNexiHelp())}),e.TgZ(30,"span",45),e._uU(31,"help"),e.qZA()()(),e.TgZ(32,"div",0)(33,"div",1)(34,"mat-form-field",2)(35,"input",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.xPayCodiceStruttura=a)}),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"div",1)(38,"mat-form-field",2)(39,"input",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.xPayTerminiCondizioni=a)}),e.ALo(40,"translate"),e.qZA()()(),e.TgZ(41,"div",1)(42,"mat-form-field",2)(43,"mat-select",47),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.xPayTipoPrenotazione=a)}),e.ALo(44,"translate"),e.YNc(45,RTe,3,4,"mat-option",22),e.ALo(46,"selectEnum"),e.qZA()()()(),e.TgZ(47,"div",0)(48,"div",1)(49,"mat-form-field",2)(50,"input",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.xPayGiorniRimborsoTotale=a)}),e.ALo(51,"translate"),e.qZA()()(),e.TgZ(52,"div",1)(53,"mat-form-field",2)(54,"input",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.xPayGiorniRimborsoParziale=a)}),e.ALo(55,"translate"),e.qZA()()(),e.TgZ(56,"div",1)(57,"mat-form-field",2)(58,"input",46),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.xPayPercentualeRimborso=a)}),e.ALo(59,"translate"),e.qZA()()()(),e.TgZ(60,"div",48),e._uU(61," Il numero di giorni con rimborso parziale dovr\xe0 essere inferiore o uguale ai giorni di rimborso totale "),e.qZA(),e.YNc(62,FTe,3,3,"div",10),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(7),e.s9C("placeholder",e.lcZ(8,31,"bo.modalitaPagamento.proprieta.xPayAlias")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPayAlias),e.xp6(3),e.s9C("placeholder",e.lcZ(11,33,"bo.modalitaPagamento.proprieta.xPaySecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPaySecretKey),e.xp6(5),e.s9C("placeholder",e.lcZ(16,35,"bo.modalitaPagamento.proprieta.tipoContabilizzazione")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.tipoContabilizzazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,37,t.enumTipoContabilizzazione,"tipoContabilizzazione")),e.xp6(3),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPayPagamentoRicorrente),e.xp6(1),e.hij(" ",e.lcZ(22,40,"bo.modalitaPagamento.proprieta.xPayPagamentoRicorrente")," "),e.xp6(2),e.Q6J("ngIf",t.sessionService.is3DSecureAttivo()),e.xp6(4),e.Oqu(e.lcZ(28,42,"sbm.tabelle.modalitaPagamento.nexiHotel")),e.xp6(8),e.s9C("placeholder",e.lcZ(36,44,"bo.modalitaPagamento.proprieta.xPayCodiceStruttura")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPayCodiceStruttura)("disabled",!t.sessionService.is3DSecureAttivo()),e.xp6(4),e.s9C("placeholder",e.lcZ(40,46,"bo.modalitaPagamento.proprieta.xPayTerminiCondizioni")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPayTerminiCondizioni)("disabled",!t.sessionService.is3DSecureAttivo()),e.xp6(4),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPayTipoPrenotazione)("placeholder",e.lcZ(44,48,"bo.modalitaPagamento.proprieta.xPayTipoPrenotazione"))("disabled",!t.sessionService.is3DSecureAttivo()),e.xp6(2),e.Q6J("ngForOf",e.xi3(46,50,t.enumTipoPrenotazioneXPay,"tipoPrenotazioneXPay")),e.xp6(5),e.s9C("placeholder",e.lcZ(51,53,"bo.modalitaPagamento.proprieta.xPayGiorniRimborsoTotale")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPayGiorniRimborsoTotale)("disabled",!t.sessionService.is3DSecureAttivo()),e.xp6(4),e.s9C("placeholder",e.lcZ(55,55,"bo.modalitaPagamento.proprieta.xPayGiorniRimborsoParziale")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPayGiorniRimborsoParziale)("disabled",!t.sessionService.is3DSecureAttivo()),e.xp6(4),e.s9C("placeholder",e.lcZ(59,57,"bo.modalitaPagamento.proprieta.xPayPercentualeRimborso")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.xPayPercentualeRimborso)("disabled",!t.sessionService.is3DSecureAttivo()),e.xp6(4),e.Q6J("ngIf",!t.sessionService.is3DSecureAttivo())}}function KTe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function GTe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",38)(2,"h6",39),e._uU(3,"Prima di attivare la modalit\xe0 Pagamento assicurarsi di aver configurato i giusti parametri nel BackOffice Banca ICCREA"),e.qZA(),e.TgZ(4,"div",0)(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.payWayTerminalId=a)}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",1)(10,"mat-form-field",2)(11,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.payWaySecretKey=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",1)(14,"mat-form-field",2)(15,"mat-select",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.tipoContabilizzazione=a)}),e.ALo(16,"translate"),e.YNc(17,KTe,3,4,"mat-option",22),e.ALo(18,"selectEnum"),e.qZA()()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(7),e.s9C("placeholder",e.lcZ(8,7,"bo.modalitaPagamento.proprieta.payWayTerminalId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.payWayTerminalId),e.xp6(4),e.s9C("placeholder",e.lcZ(12,9,"bo.modalitaPagamento.proprieta.payWaySecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.payWaySecretKey),e.xp6(4),e.s9C("placeholder",e.lcZ(16,11,"bo.modalitaPagamento.proprieta.tipoContabilizzazione")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.tipoContabilizzazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,13,t.enumTipoContabilizzazione,"tipoContabilizzazione"))}}function $Te(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function BTe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",38)(2,"h6",39),e._uU(3,"Prima di attivare la modalit\xe0 Pagamento assicurarsi di aver configurato i giusti parametri nel BackOffice Unicredit"),e.qZA(),e.TgZ(4,"div",0)(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.unicreditTerminalId=a)}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",1)(10,"mat-form-field",2)(11,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.unicreditSecretKey=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",1)(14,"mat-form-field",2)(15,"mat-select",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.tipoContabilizzazione=a)}),e.ALo(16,"translate"),e.YNc(17,$Te,3,4,"mat-option",22),e.ALo(18,"selectEnum"),e.qZA()()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(7),e.s9C("placeholder",e.lcZ(8,7,"bo.modalitaPagamento.proprieta.unicreditTerminalId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.unicreditTerminalId),e.xp6(4),e.s9C("placeholder",e.lcZ(12,9,"bo.modalitaPagamento.proprieta.unicreditSecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.unicreditSecretKey),e.xp6(4),e.s9C("placeholder",e.lcZ(16,11,"bo.modalitaPagamento.proprieta.tipoContabilizzazione")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.tipoContabilizzazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,13,t.enumTipoContabilizzazione,"tipoContabilizzazione"))}}function VTe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function XTe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.stripeSecretKey=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",1)(7,"mat-form-field",2)(8,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.stripePublicKey=a)}),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",1)(11,"mat-form-field",2)(12,"mat-select",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.tipoContabilizzazione=a)}),e.ALo(13,"translate"),e.YNc(14,VTe,3,4,"mat-option",22),e.ALo(15,"selectEnum"),e.qZA()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,7,"bo.modalitaPagamento.proprieta.stripeSecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.stripeSecretKey),e.xp6(4),e.s9C("placeholder",e.lcZ(9,9,"bo.modalitaPagamento.proprieta.stripePublicKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.stripePublicKey),e.xp6(4),e.s9C("placeholder",e.lcZ(13,11,"bo.modalitaPagamento.proprieta.tipoContabilizzazione")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.tipoContabilizzazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(15,13,t.enumTipoContabilizzazione,"tipoContabilizzazione"))}}function jTe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.gestpayApiKey=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",1)(7,"mat-form-field",2)(8,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.gestpayShopId=a)}),e.ALo(9,"translate"),e.qZA()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,4,"bo.modalitaPagamento.proprieta.gestpayApiKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.gestpayApiKey),e.xp6(4),e.s9C("placeholder",e.lcZ(9,6,"bo.modalitaPagamento.proprieta.gestpayShopId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.gestpayShopId)}}function WTe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.paypalClientId=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.paypalSecretKey=a)}),e.ALo(8,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,4,"bo.modalitaPagamento.proprieta.paypalClientId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.paypalClientId),e.xp6(4),e.s9C("placeholder",e.lcZ(8,6,"bo.modalitaPagamento.proprieta.paypalSecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.paypalSecretKey)}}function exe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.sumUpMerchantId=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.sumUpClientId=a)}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",1)(10,"mat-form-field",2)(11,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.sumUpSecretKey=a)}),e.ALo(12,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,6,"bo.modalitaPagamento.proprieta.sumUpMerchantId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.sumUpMerchantId),e.xp6(4),e.s9C("placeholder",e.lcZ(8,8,"bo.modalitaPagamento.proprieta.sumUpClientId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.sumUpClientId),e.xp6(4),e.s9C("placeholder",e.lcZ(12,10,"bo.modalitaPagamento.proprieta.sumUpSecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.sumUpSecretKey)}}function txe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.addonPaymentsMerchantId=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.addonPaymentsSecretKey=a)}),e.ALo(8,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,4,"bo.modalitaPagamento.proprieta.addonPaymentsMerchantId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.addonPaymentsMerchantId),e.xp6(4),e.s9C("placeholder",e.lcZ(8,6,"bo.modalitaPagamento.proprieta.addonPaymentsSecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.addonPaymentsSecretKey)}}function ixe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.beSafePayApiKey=a)}),e.ALo(4,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,2,"bo.modalitaPagamento.proprieta.beSafePayApiKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.beSafePayApiKey)}}function oxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",51)(2,"mat-form-field",2)(3,"input",52),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.satispayKeyId=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",51)(6,"button",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.generaSatispayKeyId())}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,3,"bo.modalitaPagamento.proprieta.satispayKeyId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.satispayKeyId),e.xp6(4),e.Oqu(e.lcZ(8,5,"sbm.tabelle.modalitaPagamento.genera"))}}function nxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",51)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.hobexEntityId=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",51)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.hobexAccessToken=a)}),e.ALo(8,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,4,"bo.modalitaPagamento.proprieta.hobexEntityId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.hobexEntityId),e.xp6(4),e.s9C("placeholder",e.lcZ(8,6,"bo.modalitaPagamento.proprieta.hobexAccessToken")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.hobexAccessToken)}}function axe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.axeptaApiKey=a)}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.axeptaApiKeySmartCheckout=a)}),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",1)(10,"mat-form-field",2)(11,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.axeptaAccessToken=a)}),e.ALo(12,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,6,"bo.modalitaPagamento.proprieta.axeptaApiKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.axeptaApiKey),e.xp6(4),e.s9C("placeholder",e.lcZ(8,8,"bo.modalitaPagamento.proprieta.axeptaApiKeySmartCheckout")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.axeptaApiKeySmartCheckout),e.xp6(4),e.s9C("placeholder",e.lcZ(12,10,"bo.modalitaPagamento.proprieta.axeptaAccessToken")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.axeptaAccessToken)}}function lxe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.holipayHotelId=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",1)(7,"mat-form-field",2)(8,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.holipaySecretKey=a)}),e.ALo(9,"translate"),e.qZA()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,4,"bo.modalitaPagamento.proprieta.holipayHotelId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.holipayHotelId),e.xp6(4),e.s9C("placeholder",e.lcZ(9,6,"bo.modalitaPagamento.proprieta.holipaySecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.holipaySecretKey)}}function rxe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function cxe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",38)(2,"div",0)(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.siapayShopId=a)}),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",1)(8,"mat-form-field",2)(9,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.siapaySecretKey=a)}),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",1)(12,"mat-form-field",2)(13,"mat-select",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.tipoContabilizzazione=a)}),e.ALo(14,"translate"),e.YNc(15,rxe,3,4,"mat-option",22),e.ALo(16,"selectEnum"),e.qZA()()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.s9C("placeholder",e.lcZ(6,7,"bo.modalitaPagamento.proprieta.siapayShopId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.siapayShopId),e.xp6(4),e.s9C("placeholder",e.lcZ(10,9,"bo.modalitaPagamento.proprieta.siapaySecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.siapaySecretKey),e.xp6(4),e.s9C("placeholder",e.lcZ(14,11,"bo.modalitaPagamento.proprieta.tipoContabilizzazione")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.tipoContabilizzazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(16,13,t.enumTipoContabilizzazione,"tipoContabilizzazione"))}}function sxe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",38)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.scalaPayApiKey=a)}),e.ALo(4,"translate"),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,2,"bo.modalitaPagamento.proprieta.scalaPayApiKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.scalaPayApiKey)}}function pxe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",38)(2,"div",0)(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.virtualPayMerchantId=a)}),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",1)(8,"mat-form-field",2)(9,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.virtualPayABI=a)}),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",1)(12,"mat-form-field",2)(13,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.virtualPaySecretKey=a)}),e.ALo(14,"translate"),e.qZA()()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.s9C("placeholder",e.lcZ(6,6,"bo.modalitaPagamento.proprieta.virtualPayMerchantId")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.virtualPayMerchantId),e.xp6(4),e.s9C("placeholder",e.lcZ(10,8,"bo.modalitaPagamento.proprieta.virtualPayABI")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.virtualPayABI),e.xp6(4),e.s9C("placeholder",e.lcZ(14,10,"bo.modalitaPagamento.proprieta.virtualPaySecretKey")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.virtualPaySecretKey)}}function dxe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",38)(2,"div",0)(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.myPOSWalletNumber=a)}),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",1)(8,"mat-form-field",2)(9,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.myPOSSID=a)}),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",1)(12,"mat-form-field",2)(13,"input",5),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.myPOSKeyIndex=a)}),e.ALo(14,"translate"),e.qZA()()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.s9C("placeholder",e.lcZ(6,6,"bo.modalitaPagamento.proprieta.myPOSWalletNumber")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.myPOSWalletNumber),e.xp6(4),e.s9C("placeholder",e.lcZ(10,8,"bo.modalitaPagamento.proprieta.myPOSSID")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.myPOSSID),e.xp6(4),e.s9C("placeholder",e.lcZ(14,10,"bo.modalitaPagamento.proprieta.myPOSKeyIndex")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.myPOSKeyIndex)}}function mxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"div",1)(2,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.isUsePost=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"div",4),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isUsePost),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.modalitaPagamento.proprieta.isUsePost")," ")}}function _xe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"div",1)(2,"app-indeterminate-checkbox",54),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.isCreaCaparraInWelcomeIncassoImmediato=a)}),e.qZA()(),e.TgZ(3,"div",4),e._uU(4," Crea la caparra in Welcome quando viene accettata la prenotazione se il pagamento \xe8 effettuato con incasso immediato "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("label","bo.modalitaPagamento.proprieta.isCreaCaparraInWelcomeIncassoImmediato")("value",t.modelEdit.modalitaPagamento.isCreaCaparraInWelcomeIncassoImmediato)}}function uxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"div",1)(2,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.modalitaPagamento.isTest=a)}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",4),e._uU(6," Imposta la modalit\xe0 come Pagamento di test (in caso di gateway di pagamento usa url di test) "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isTest),e.xp6(1),e.hij(" ",e.lcZ(4,2,"bo.modalitaPagamento.proprieta.isTest")," ")}}function gxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",59)(1,"input",60),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw(2);return e.KtG(r.modelEdit.modalitaPagamentoXLingua[l].testoBottonePaga=a)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2).index,n=e.oxw(2);e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"bo.modalitaPagamentoXLingua.proprieta.testoBottonePaga")),e.Q6J("ngModel",n.modelEdit.modalitaPagamentoXLingua[t].testoBottonePaga)}}function hxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",58)(1,"mat-form-field",59)(2,"input",60),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.modalitaPagamentoXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",61),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.modalitaPagamentoXLingua[l].descrizione=a)}),e.qZA(),e.TgZ(7,"div",29),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"app-editor",61),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.modelEdit.modalitaPagamentoXLingua[l].note=a)}),e.qZA()(),e.YNc(11,gxe,3,4,"mat-form-field",62),e.qZA()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw(2);e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,10,"bo.modalitaPagamentoXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.modalitaPagamentoXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,12,"bo.modalitaPagamentoXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.modalitaPagamentoXLingua[a].descrizione),e.xp6(2),e.hij(" ",e.lcZ(9,14,"bo.modalitaPagamentoXLingua.proprieta.note")," "),e.xp6(2),e.Q6J("id","note"+a)("text",l.modelEdit.modalitaPagamentoXLingua[a].note),e.xp6(1),e.Q6J("ngIf",l.modelEdit.modalitaPagamento.tipo!=l.enumTipoModalitaPagamento.PayPal)}}function fxe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,hxe,12,16,"mat-tab",57),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function Cxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-group",55),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedIndex=a)}),e.YNc(1,fxe,2,1,"ng-container",56),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.modalitaPagamentoXLingua)}}function bxe(i,o){1&i&&e.GkF(0)}function vxe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,bxe,1,0,"ng-container",63),e.BQk()),2&i){e.oxw();const t=e.MAs(178);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Txe(i,o){1&i&&e.GkF(0)}function xxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addTipoCartaCredito())}),e.TgZ(2,"i",68),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",84)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.tabelle.modalitaPagamento.nessunTipoCartaCredito")))}function Zxe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCartaCreditoXAlbergo.proprieta.nome")))}function Axe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",2)(2,"input",85),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.tipiCarteCredito[r].nome=a)}),e.qZA()()()}if(2&i){const t=o.index,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",n.tipiCarteCredito[t].nome)}}function wxe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCartaCreditoXAlbergo.proprieta.tipoCartaCredito")))}function zxe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function Mxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",2)(2,"mat-select",86),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.tipiCarteCredito[r].tipoCartaCredito=a)}),e.YNc(3,zxe,2,2,"mat-option",22),e.ALo(4,"selectEnum"),e.qZA()()()}if(2&i){const t=o.index,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",n.tipiCarteCredito[t].tipoCartaCredito),e.xp6(1),e.Q6J("ngForOf",e.Dn7(4,2,n.enumTipoCartaCredito,"tipoCartaCredito",!1))}}function qxe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCartaCreditoXAlbergo.proprieta.formatoNumero")))}function Pxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",2)(2,"input",85),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.tipiCarteCredito[r].formatoNumero=a)}),e.qZA()()()}if(2&i){const t=o.index,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",n.tipiCarteCredito[t].formatoNumero)}}function kxe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCartaCreditoXAlbergo.proprieta.formatoPin")))}function Sxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",2)(2,"input",85),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.tipiCarteCredito[r].formatoPin=a)}),e.qZA()()()}if(2&i){const t=o.index,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",n.tipiCarteCredito[t].formatoPin)}}function yxe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCartaCreditoXAlbergo.proprieta.lunghezzaNumero")))}function Jxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",2)(2,"input",87),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.tipiCarteCredito[r].lunghezzaNumero=a)}),e.qZA()()()}if(2&i){const t=o.index,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",n.tipiCarteCredito[t].lunghezzaNumero)}}function Exe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCartaCreditoXAlbergo.proprieta.lunghezzaPin")))}function Nxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-form-field",2)(2,"input",87),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.tipiCarteCredito[r].lunghezzaPin=a)}),e.qZA()()()}if(2&i){const t=o.index,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",n.tipiCarteCredito[t].lunghezzaPin)}}function Oxe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.tipoCartaCreditoXAlbergo.proprieta.isDisponibile")))}function Lxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"mat-checkbox",88),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.tipiCarteCredito[r].isDisponibile=a)}),e.qZA()()}if(2&i){const t=o.index,n=e.oxw(2);e.xp6(1),e.Q6J("ngModel",n.tipiCarteCredito[t].isDisponibile)}}function Dxe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Ixe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",89)(1,"button",90),e.NdJ("click",function(a){const r=e.CHM(t).index,p=e.oxw(2);return a.stopPropagation(),e.KtG(p.deleteTipoCartaCredito(r))}),e.TgZ(2,"i",91),e._uU(3,"delete"),e.qZA()()()}}function Qxe(i,o){1&i&&e._UZ(0,"mat-header-row",92)}function Uxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",93),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function Yxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-group",64),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedIndex1=a)}),e.TgZ(1,"mat-tab",58),e.ALo(2,"translate"),e.TgZ(3,"div",29),e.YNc(4,Txe,1,0,"ng-container",63),e.qZA()(),e.TgZ(5,"mat-tab",58),e.ALo(6,"translate"),e.TgZ(7,"div",65),e.YNc(8,xxe,8,3,"div",10),e.TgZ(9,"div",66)(10,"button",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addTipoCartaCredito())}),e.TgZ(11,"i",68),e._uU(12,"add"),e.qZA()(),e.TgZ(13,"div",69)(14,"mat-table",70),e.ynx(15,71),e.YNc(16,Zxe,3,3,"mat-header-cell",72),e.YNc(17,Axe,3,1,"mat-cell",73),e.BQk(),e.ynx(18,74),e.YNc(19,wxe,3,3,"mat-header-cell",72),e.YNc(20,Mxe,5,6,"mat-cell",73),e.BQk(),e.ynx(21,75),e.YNc(22,qxe,3,3,"mat-header-cell",72),e.YNc(23,Pxe,3,1,"mat-cell",73),e.BQk(),e.ynx(24,76),e.YNc(25,kxe,3,3,"mat-header-cell",72),e.YNc(26,Sxe,3,1,"mat-cell",73),e.BQk(),e.ynx(27,77),e.YNc(28,yxe,3,3,"mat-header-cell",72),e.YNc(29,Jxe,3,1,"mat-cell",73),e.BQk(),e.ynx(30,78),e.YNc(31,Exe,3,3,"mat-header-cell",72),e.YNc(32,Nxe,3,1,"mat-cell",73),e.BQk(),e.ynx(33,79),e.YNc(34,Oxe,3,3,"mat-header-cell",72),e.YNc(35,Lxe,2,1,"mat-cell",73),e.BQk(),e.ynx(36,80),e.YNc(37,Dxe,1,0,"mat-header-cell",72),e.YNc(38,Ixe,4,0,"mat-cell",81),e.BQk(),e.YNc(39,Qxe,1,0,"mat-header-row",82),e.YNc(40,Uxe,1,1,"mat-row",83),e.qZA()()()()()()}if(2&i){const t=e.oxw(),n=e.MAs(178);e.Q6J("selectedIndex",t.selectedIndex1),e.xp6(1),e.Q6J("label",e.lcZ(2,10,"sbm.tabelle.modalitaPagamento.descrizioniNoteTab")),e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("label",e.lcZ(6,12,"sbm.tabelle.modalitaPagamento.tipiCarteCreditoTab")),e.xp6(3),e.Q6J("ngIf",null!=t.tipiCarteCredito&&0==t.tipiCarteCredito.length),e.xp6(1),e.Q6J("hidden",null==t.tipiCarteCredito||0==t.tipiCarteCredito.length),e.xp6(5),e.Q6J("dataSource",t.tipiCarteCredito),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function Rxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",94),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Ir.\u0275fac=function(o){return new(o||Ir)(e.Y36(j.m),e.Y36(A.s),e.Y36(C.t))},Ir.\u0275cmp=e.Xpm({type:Ir,selectors:[["app-verifica-carta-credito"]],inputs:{dialogRef:"dialogRef"},features:[e.qOj],decls:28,vars:28,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"row"],[1,"col-4"],[3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","nullable","ngModel","ngModelChange"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return t.rq.intestatarioCC=a}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"mat-form-field",2)(7,"input",3),e.NdJ("ngModelChange",function(a){return t.rq.numeroCC=a}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",4)(10,"div",5)(11,"mat-form-field",2)(12,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.rq.meseCC=a}),e.ALo(13,"translate"),e.YNc(14,STe,2,2,"mat-option",7),e.qZA()()(),e.TgZ(15,"div",5)(16,"mat-form-field",2)(17,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.rq.annoCC=a}),e.ALo(18,"translate"),e.YNc(19,yTe,2,2,"mat-option",7),e.qZA()()(),e.TgZ(20,"div",5)(21,"mat-form-field",2)(22,"input",8),e.NdJ("ngModelChange",function(a){return t.rq.codiceSicurezzaCC=a}),e.ALo(23,"translate"),e.qZA()()()(),e.TgZ(24,"div",9)(25,"button",10),e.NdJ("click",function(){return t.verificaCartaCredito()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()),2&o&&(e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("placeholder",e.lcZ(5,16,"sbm.tabelle.modalitaPagamento.titolareCarta"))("ngModel",t.rq.intestatarioCC),e.xp6(3),e.Q6J("placeholder",e.lcZ(8,18,"sbm.tabelle.modalitaPagamento.numeroCarta"))("ngModel",t.rq.numeroCC),e.xp6(5),e.Q6J("ngModel",t.rq.meseCC)("placeholder",e.lcZ(13,20,"sbm.tabelle.modalitaPagamento.scadenzaMese")),e.xp6(2),e.Q6J("ngForOf",t.utility.counter(12,1)),e.xp6(3),e.Q6J("ngModel",t.rq.annoCC)("placeholder",e.lcZ(18,22,"sbm.tabelle.modalitaPagamento.scadenzaAnno")),e.xp6(2),e.Q6J("ngForOf",t.utility.counter(20,t.currentYear)),e.xp6(3),e.Q6J("placeholder",e.lcZ(23,24,"sbm.tabelle.modalitaPagamento.cvv"))("nullable",!0)("ngModel",t.rq.codiceSicurezzaCC),e.xp6(3),e.Q6J("disabled",!t.rq.intestatarioCC||!t.rq.numeroCC||null==t.rq.meseCC||null==t.rq.annoCC||!t.rq.codiceSicurezzaCC),e.xp6(1),e.Oqu(e.lcZ(27,26,"sbm.tabelle.modalitaPagamento.verifica")))},dependencies:[m.sg,w.X,h.eB,M.v_,b.k0,re.CK,g.x8,F.aO,_.Fj,_.wV,_.JJ,_.On,z.X$]});class Qr extends f.H{set modalitaPagamento(o){if(null!=o){setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500),this.modelEdit=new d.yu6,this.modelEdit.modalitaPagamento=o,this.modelEdit.modalitaPagamento.tipo==c.sc.CartaCredito?this.apiService.getTipiCarteCredito().subscribe(t=>{this.tipiCarteCredito=t.data}):this.modelEdit.modalitaPagamento.tipo==c.sc.XPay&&(this.sessionService.is3DSecureAttivo()||(this.modelEdit.modalitaPagamento.xPayCodiceStruttura="",this.modelEdit.modalitaPagamento.xPayTipoPrenotazione=c.$w.GARANTITA)),this.tipiCarteCredito=null,this.selectedIndex=0,this.selectedIndex1=0,this.calcoloCaparraNumeroNotti=this.modelEdit.modalitaPagamento.numeroNottiCaparra>0;for(let t of this.lingue){let n=new v.v3A;n.lingua=t,this.modelEdit.modalitaPagamentoXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getModalitaPagamentoXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.modalitaPagamentoXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.modalitaPagamentoXLingua[a].modalitaPagamento=n.modalitaPagamento,this.modelEdit.modalitaPagamentoXLingua[a].nome=n.nome,this.modelEdit.modalitaPagamentoXLingua[a].descrizione=n.descrizione,this.modelEdit.modalitaPagamentoXLingua[a].note=n.note,this.modelEdit.modalitaPagamentoXLingua[a].testoBottonePaga=n.testoBottonePaga)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.modelEdit=new d.yu6,this.editing=!1,this.selectedIndex=0,this.selectedIndex1=0,this.enumTipoValore=c.jy,this.enumTipoModalitaPagamento=c.sc,this.enumTipoContabilizzazione=c.XI,this.enumStatoPrenotazioneWelcome=c.Kg,this.displayedColumns=["nome","tipo","formatoNumero","formatoPin","lunghezzaNumero","lunghezzaPin","isDisponibile","delete"],this.enumTipoCartaCredito=c.Cf,this.enumTipoPrenotazioneXPay=c.$w,this.getTemplatesRQ=d.k$g.fromFilter("tipoTemplate",c.Hp.Equal,c.hQ.Prenotazione.toString(),c.NM.Number),this.calcoloCaparraNumeroNotti=!1,this.modalitaPagamentoPost=[c.sc.XPay,c.sc.PayWay,c.sc.Stripe,c.sc.BancaSella,c.sc.Holipay,c.sc.Siapay,c.sc.ScalaPay,c.sc.VirtualPay,c.sc.MyPOS],this.backEvent=new e.vpe}save(o=!1){for(let t of this.modelEdit.modalitaPagamentoXLingua)t.modalitaPagamento=this.modelEdit.modalitaPagamento;this.modelEdit.modalitaPagamento.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.modalitaPagamento.validaDal=this.getDate(this.modelEdit.modalitaPagamento.validaDal),this.modelEdit.modalitaPagamento.validaAl=this.getDate(this.modelEdit.modalitaPagamento.validaAl),this.setIsLoading(!0),this.apiService.setModalitaPagamento(this.modelEdit).subscribe(()=>{null!=this.modelEdit.modalitaPagamento.tipo&&this.modelEdit.modalitaPagamento.tipo==c.sc.CartaCredito?this.apiService.setAllTipiCarteCredito(this.tipiCarteCredito).subscribe(()=>{this.setIsLoading(!1),o?this.verificaCartaCredito():this.showInfo("sbm.tabelle.modalitaPagamento.modalitaPagamentoSalvata").then(()=>{this.backEvent.emit()})}):(this.setIsLoading(!1),o?this.verificaCartaCredito():this.showInfo("sbm.tabelle.modalitaPagamento.modalitaPagamentoSalvata").then(()=>{this.backEvent.emit()}))})}delete(o){this.showDialogConfirm("sbm.tabelle.modalitaPagamento.eliminareModalitaPagamento").then(t=>{null!=o&&(this.modelEdit.modalitaPagamento=o),this.modelEdit.modalitaPagamento.isDeleted=!0,this.setIsLoading(!0),this.apiService.setModalitaPagamento(this.modelEdit).subscribe(n=>{this.backEvent.emit()})},t=>{})}addTipoCartaCredito(){this.tipiCarteCredito.push(new v.olX),this.table.renderRows()}deleteTipoCartaCredito(o){this.showDialogConfirm("sbm.tabelle.modalitaPagamento.eliminareTipoCartaCredito").then(t=>{this.tipiCarteCredito.splice(o,1),this.table.renderRows()},t=>{})}openNexiHelp(){let o=new d.Zpt;o.width="50vw",this.showModalDialog(Dr,o)}generaSatispayKeyId(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Lr,o),n=t.componentInstance;n.modalitaPagamento=this.modelEdit.modalitaPagamento,n.dialogRef=t}onCalcoloCaparraNumeroNottiChange(){this.calcoloCaparraNumeroNotti?(this.modelEdit.modalitaPagamento.caparra=0,this.modelEdit.modalitaPagamento.isPercentuale=!1):this.modelEdit.modalitaPagamento.numeroNottiCaparra=0}onCaparraChange(){this.modelEdit.modalitaPagamento.isPercentuale?this.modelEdit.modalitaPagamento.caparra=this.utility.clamp(this.modelEdit.modalitaPagamento.caparra,0,100):this.modelEdit.modalitaPagamento.caparra=this.utility.clamp(this.modelEdit.modalitaPagamento.caparra,0)}verificaCartaCredito(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ir,o);t.componentInstance.dialogRef=t}}function Fxe(i,o){if(1&i&&(e.TgZ(0,"mat-option",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function Hxe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",45)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.tabelle.modalitaPagamento.nessunaModalitaPagamento")))}function Kxe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",33)(2,"div",34)(3,"div",35)(4,"mat-form-field",36)(5,"input",37,38),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(6),l=e.oxw();return e.KtG(l.onSearch(0,a.value,null,!1))}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",35)(9,"mat-form-field",36)(10,"mat-select",39,40),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.MAs(11),l=e.oxw();return e.KtG(l.onSearch(1,a.value))}),e.ALo(12,"translate"),e._UZ(13,"mat-option",41),e.YNc(14,Fxe,3,4,"mat-option",42),e.ALo(15,"selectEnum"),e.qZA()()(),e.TgZ(16,"div",35)(17,"app-view-select",43),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onSearch(2,(null==a?null:a.oid)>0?a.oid.toString():""))}),e.ALo(18,"translate"),e.qZA()()()(),e.YNc(19,Hxe,8,3,"div",1),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("placeholder",e.lcZ(7,8,"bo.modalitaPagamento.proprieta.nome"))("value",t.filters[0].value),e.xp6(5),e.Q6J("placeholder",e.lcZ(12,10,"bo.modalitaPagamento.proprieta.tipo"))("value",t.filters[1].value),e.xp6(4),e.Q6J("ngForOf",e.xi3(15,12,t.enumTipoModalitaPagamento,"tipoModalitaPagamento")),e.xp6(3),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("placeholder",e.lcZ(18,15,"globals.ubicazioneIstat")),e.xp6(2),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length)}}function Gxe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function $xe(i,o){1&i&&(e.TgZ(0,"mat-cell",46)(1,"button",47)(2,"i",48),e._uU(3,"edit"),e.qZA()()())}function Bxe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.nome"),""))}function Vxe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function Xxe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.tipo"),""))}function jxe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoModalitaPagamento,t.tipo,"tipoModalitaPagamento"))," ")}}function Wxe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.caparra"),""))}function eZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.numeroNottiCaparra>0?t.numeroNottiCaparra+e.lcZ(2,1,"sbm.tabelle.modalitaPagamento.notti"):t.caparra+(t.isPercentuale?" %":t.isCaparraPerCamera?" \u20ac"+e.lcZ(3,3,"sbm.tabelle.modalitaPagamento.perCamera"):" \u20ac")," ")}}function tZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.ordinamento"),""))}function iZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.ordinamento," ")}}function oZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.isPrenotazioniConfermateAutomaticamente"),""))}function nZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._UZ(1,"mat-checkbox",50),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isPrenotazioniConfermateAutomaticamente)}}function aZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.isCreaCaparraInWelcome"),""))}function lZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",49),e._UZ(1,"mat-checkbox",50),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isCreaCaparraInWelcome)}}function rZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.tipoPagamentoWelcome"),""))}function cZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.tipoPagamentoWelcome?t.tipoPagamentoWelcome.descrizione:""," ")}}function sZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.template"),""))}function pZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.template?t.template.nome:""," ")}}function dZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.modalitaPagamento.proprieta.attivato"),""))}function mZe(i,o){1&i&&(e.TgZ(0,"div",53),e._uU(1,"Web"),e.qZA())}function _Ze(i,o){1&i&&(e.TgZ(0,"div",53),e._uU(1,"MyPage"),e.qZA())}function uZe(i,o){1&i&&(e.TgZ(0,"div",53),e._uU(1,"PayMail"),e.qZA())}function gZe(i,o){1&i&&(e.TgZ(0,"div",53),e._uU(1,"eCommerce"),e.qZA())}function hZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",51),e.YNc(1,mZe,2,0,"div",52),e.YNc(2,_Ze,2,0,"div",52),e.YNc(3,uZe,2,0,"div",52),e.YNc(4,gZe,2,0,"div",52),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isAttivo),e.xp6(1),e.Q6J("ngIf",t.isAttivoMyPage),e.xp6(1),e.Q6J("ngIf",t.isAttivoPayMail),e.xp6(1),e.Q6J("ngIf",t.isAttivoBookingExtra)}}function fZe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function CZe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"button",54),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.duplica(r.oid))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"globals.duplica")))}function bZe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function vZe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",55)(1,"button",56),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(50);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",57),e._uU(3,"delete"),e.qZA()()()}}function TZe(i,o){1&i&&e._UZ(0,"mat-header-row",58)}function xZe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",59),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Qr.\u0275fac=function(o){return new(o||Qr)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},Qr.\u0275cmp=e.Xpm({type:Qr,selectors:[["app-modalita-pagamento-edit"]],viewQuery:function(o,t){if(1&o&&e.Gf(s.ty,5),2&o){let n;e.iGM(n=e.CRH())&&(t.table=n.first)}},inputs:{modalitaPagamento:"modalitaPagamento"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:190,vars:136,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"row","mb-3"],["color","primary",3,"ngModel","ngModelChange","change"],[1,"d-inline-block","mr-4",3,"value"],[1,"d-inline-block",3,"value"],[4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"col-2"],["autocompleteOff","","type","text","matInput","","readonly","",3,"matDatepicker","placeholder","ngModel","ngModelChange"],["matSuffix","",3,"for"],["matSuffix","",3,"click"],["matDatepickerToggleIcon","",1,"color-red"],[3,"startAt"],["dal",""],["al",""],[3,"ngModel","placeholder","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["class","row",4,"ngIf"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],["templateTraduzioniModalitaPagamento",""],[1,"mt-3"],["class","modalitaPagamentoTabGroup",3,"selectedIndex","selectedIndexChange",4,"ngIf"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"placeholder","value","selectionChange"],["percentualeSelect",""],["class","row mt-3 mb-3",4,"ngIf"],[1,"row","mt-3","mb-3"],[1,"container-tipo","rounded","w-100","p-3"],[1,"div-help","mb-3"],[1,"div-help","mb-3","color-red"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],[1,"border","mat-elevation-z0","mt-3","mb-4"],[1,"d-inline-block","align-middle","mb-0"],["mat-icon-button","",1,"align-middle","help-button","ml-2",3,"click"],[1,"material-icons","help-icon"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","disabled","ngModelChange"],[3,"ngModel","placeholder","disabled","ngModelChange"],[1,"div-help"],["color","primary",1,"d-inline-block","mt-2",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"col-6"],["autocompleteOff","","type","text","matInput","","disabled","",3,"placeholder","ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"mt-2",3,"click"],[3,"label","value","valueChange"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["class","mt-3 w-100",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"modalitaPagamentoTabGroup",3,"selectedIndex","selectedIndexChange"],[1,"pr-3","pl-3"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","tipo"],["matColumnDef","formatoNumero"],["matColumnDef","formatoPin"],["matColumnDef","lunghezzaNumero"],["matColumnDef","lunghezzaPin"],["matColumnDef","isDisponibile"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"border","rounded-lg","mat-elevation-z1","p-4"],["autocompleteOff","","type","text","matInput","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"ngModel","ngModelChange"],["color","primary",1,"mt-2",3,"ngModel","ngModelChange"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Nome della modalit\xe0 di pagamento "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.ordinamento=a}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",4),e._uU(13," Ordinamento della modalit\xe0 di pagamento "),e.qZA()(),e.TgZ(14,"div",6)(15,"div",1)(16,"mat-form-field",2)(17,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.email=a}),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"div",4),e._uU(20," Email di notifica per questa modalit\xe0 (lasciando vuoto verr\xe0 inviata la notifica all'email del portale) "),e.qZA()(),e.TgZ(21,"mat-radio-group",7),e.NdJ("ngModelChange",function(a){return t.calcoloCaparraNumeroNotti=a})("change",function(){return t.onCalcoloCaparraNumeroNottiChange()}),e.TgZ(22,"mat-radio-button",8),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"mat-radio-button",9),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.YNc(28,OTe,17,14,"ng-container",10),e.YNc(29,LTe,7,4,"div",11),e.TgZ(30,"div",0)(31,"div",1)(32,"mat-form-field",2)(33,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.oreConferma=a}),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"div",4),e._uU(36," Tag email per impostare le ore di conferma "),e.qZA()(),e.TgZ(37,"div",0)(38,"div",12)(39,"mat-form-field",2)(40,"input",13),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.validaDal=a}),e.ALo(41,"translate"),e.qZA(),e._UZ(42,"mat-datepicker-toggle",14),e.TgZ(43,"mat-datepicker-toggle",15),e.NdJ("click",function(){return t.modelEdit.modalitaPagamento.validaDal=null}),e.TgZ(44,"mat-icon",16),e._uU(45,"clear"),e.qZA()(),e._UZ(46,"mat-datepicker",17,18),e.qZA()(),e.TgZ(48,"div",12)(49,"mat-form-field",2)(50,"input",13),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.validaAl=a}),e.ALo(51,"translate"),e.qZA(),e._UZ(52,"mat-datepicker-toggle",14),e.TgZ(53,"mat-datepicker-toggle",15),e.NdJ("click",function(){return t.modelEdit.modalitaPagamento.validaAl=null}),e.TgZ(54,"mat-icon",16),e._uU(55,"clear"),e.qZA()(),e._UZ(56,"mat-datepicker",17,19),e.qZA()(),e.TgZ(58,"div",4),e._uU(59," Impostare le date di validit\xe0 del pagamento "),e.qZA()(),e.TgZ(60,"div",0)(61,"div",1)(62,"mat-form-field",2)(63,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.oreValiditaPrimaCheckIn=a}),e.ALo(64,"translate"),e.qZA()()(),e.TgZ(65,"div",4),e._uU(66," Impostare il numero di ore di validit\xe0 prima del check-in (0 nessun limite) "),e.qZA()(),e.TgZ(67,"div",0)(68,"div",1)(69,"mat-form-field",2)(70,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.massimoOreValiditaPrimaCheckIn=a}),e.ALo(71,"translate"),e.qZA()()(),e.TgZ(72,"div",4),e._uU(73," Impostare il numero massimo di ore di validit\xe0 prima del check-in (0 nessun limite) "),e.qZA()(),e.TgZ(74,"div",0)(75,"div",1)(76,"mat-form-field",2)(77,"mat-select",20),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.statoPrenotazioneWelcomeDefault=a}),e.ALo(78,"translate"),e._UZ(79,"mat-option",21),e.YNc(80,DTe,3,4,"mat-option",22),e.ALo(81,"selectEnum"),e.qZA()()(),e.TgZ(82,"div",4),e._uU(83," Impostare lo stato prenotazione di defualt della modalit\xe0 di pagamento "),e.qZA()(),e.TgZ(84,"div",0)(85,"div",1)(86,"app-view-select",23),e.NdJ("valueChange",function(a){return t.modelEdit.modalitaPagamento.ubicazioneIstat=a}),e.ALo(87,"translate"),e.qZA()(),e.TgZ(88,"div",4),e._uU(89," Indicare l'ubicazione istat per il paymail (facoltativo) "),e.qZA()(),e.TgZ(90,"div",0)(91,"div",1)(92,"app-view-select",23),e.NdJ("valueChange",function(a){return t.modelEdit.modalitaPagamento.template=a}),e.ALo(93,"translate"),e.qZA()(),e.TgZ(94,"div",4),e._uU(95," Impostare il template da utilizzare con la modalit\xe0 di pagamento "),e.qZA()(),e.TgZ(96,"div",0)(97,"div",1)(98,"app-view-select",24),e.NdJ("valueChange",function(a){return t.modelEdit.modalitaPagamento.tipoPagamentoWelcome=a}),e.ALo(99,"translate"),e.qZA()(),e._UZ(100,"div",4),e.qZA(),e.YNc(101,ITe,17,16,"div",25),e.YNc(102,QTe,5,4,"div",25),e.YNc(103,HTe,63,59,"ng-container",10),e.YNc(104,GTe,19,16,"ng-container",10),e.YNc(105,BTe,19,16,"ng-container",10),e.YNc(106,XTe,16,16,"ng-container",10),e.YNc(107,jTe,10,8,"ng-container",10),e.YNc(108,WTe,9,8,"div",25),e.YNc(109,exe,13,12,"div",25),e.YNc(110,txe,9,8,"div",25),e.YNc(111,ixe,5,4,"div",25),e.YNc(112,oxe,9,7,"div",25),e.YNc(113,nxe,9,8,"div",25),e.YNc(114,axe,13,12,"div",25),e.YNc(115,lxe,10,8,"ng-container",10),e.YNc(116,cxe,17,16,"ng-container",10),e.YNc(117,sxe,5,4,"ng-container",10),e.YNc(118,pxe,15,12,"ng-container",10),e.YNc(119,dxe,15,12,"ng-container",10),e.YNc(120,mxe,6,4,"div",11),e.TgZ(121,"div",26)(122,"div",1)(123,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.isPrenotazioniConfermateAutomaticamente=a}),e._uU(124),e.ALo(125,"translate"),e.qZA()(),e._UZ(126,"div",4),e.qZA(),e.TgZ(127,"div",26)(128,"div",1)(129,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.isCreaCaparraInWelcome=a}),e._uU(130),e.ALo(131,"translate"),e.qZA()(),e.TgZ(132,"div",4),e._uU(133," Crea la caparra in Welcome quando viene accettata la prenotazione "),e.qZA()(),e.YNc(134,_xe,5,2,"div",11),e.TgZ(135,"div",26)(136,"div",1)(137,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.isAttivo=a}),e._uU(138),e.ALo(139,"translate"),e.qZA()(),e.TgZ(140,"div",4),e._uU(141," Attiva la modalit\xe0 di pagamento per il Booking "),e.qZA()(),e.TgZ(142,"div",26)(143,"div",1)(144,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.isAttivoBookingExtra=a}),e._uU(145),e.ALo(146,"translate"),e.qZA()(),e.TgZ(147,"div",4),e._uU(148," Attiva la modalit\xe0 di pagamento per le prenotazioni di Servizi Extra (eCommerce) "),e.qZA()(),e.TgZ(149,"div",26)(150,"div",1)(151,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.isAttivoMyPage=a}),e._uU(152),e.ALo(153,"translate"),e.qZA()(),e.TgZ(154,"div",4),e._uU(155," Attiva la modalit\xe0 di pagamento per il My Page (CRM) "),e.qZA()(),e.TgZ(156,"div",26)(157,"div",1)(158,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.isAttivoPayMail=a}),e._uU(159),e.ALo(160,"translate"),e.qZA()(),e.TgZ(161,"div",4),e._uU(162," Attiva la modalit\xe0 di pagamento per il PayMail (verificare l'attivit\xe0 automatica in Welcome Gestione/3DSecure PayMail) "),e.qZA()(),e.TgZ(163,"div",26)(164,"div",1)(165,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.isVisualizzaInPagamenti=a}),e._uU(166),e.ALo(167,"translate"),e.qZA()(),e.TgZ(168,"div",4),e._uU(169," Visualizza nell'elenco pagamenti "),e.qZA()(),e.TgZ(170,"div",26)(171,"div",1)(172,"mat-checkbox",27),e.NdJ("ngModelChange",function(a){return t.modelEdit.modalitaPagamento.isAssegnaProgressivoCaparraInWelcome=a}),e._uU(173),e.ALo(174,"translate"),e.qZA()(),e._UZ(175,"div",4),e.qZA(),e.YNc(176,uxe,7,4,"div",11),e.YNc(177,Cxe,2,2,"ng-template",null,28,e.W1O),e.TgZ(179,"div",29),e.YNc(180,vxe,2,1,"ng-container",10),e.YNc(181,Yxe,41,14,"mat-tab-group",30),e.qZA(),e.TgZ(182,"div",29)(183,"button",31),e.NdJ("click",function(){return t.save()}),e._uU(184),e.ALo(185,"translate"),e.qZA(),e.YNc(186,Rxe,3,3,"button",32),e.TgZ(187,"button",33),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(188),e.ALo(189,"translate"),e.qZA()()),2&o){const n=e.MAs(47),a=e.MAs(57);e.xp6(3),e.s9C("placeholder",e.lcZ(4,85,"bo.modalitaPagamento.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.nome),e.xp6(7),e.s9C("placeholder",e.lcZ(11,87,"bo.modalitaPagamento.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.ordinamento),e.xp6(7),e.s9C("placeholder",e.lcZ(18,89,"bo.modalitaPagamento.proprieta.email")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.email),e.xp6(4),e.Q6J("ngModel",t.calcoloCaparraNumeroNotti),e.xp6(1),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(24,91,"sbm.tabelle.modalitaPagamento.caparraImporto")),e.xp6(2),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(27,93,"sbm.tabelle.modalitaPagamento.caparraNumeroNotti")),e.xp6(2),e.Q6J("ngIf",!t.calcoloCaparraNumeroNotti),e.xp6(1),e.Q6J("ngIf",t.calcoloCaparraNumeroNotti),e.xp6(4),e.s9C("placeholder",e.lcZ(34,95,"bo.modalitaPagamento.proprieta.oreConferma")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.oreConferma),e.xp6(7),e.s9C("placeholder",e.lcZ(41,97,"bo.modalitaPagamento.proprieta.validaDal")),e.Q6J("matDatepicker",n)("ngModel",t.modelEdit.modalitaPagamento.validaDal),e.xp6(2),e.Q6J("for",n),e.xp6(4),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.modalitaPagamento.validaDal)?t.today:null),e.xp6(4),e.s9C("placeholder",e.lcZ(51,99,"bo.modalitaPagamento.proprieta.validaAl")),e.Q6J("matDatepicker",a)("ngModel",t.modelEdit.modalitaPagamento.validaAl),e.xp6(2),e.Q6J("for",a),e.xp6(4),e.Q6J("startAt",t.utility.isNullDate(t.modelEdit.modalitaPagamento.validaAl)?t.today:null),e.xp6(7),e.s9C("placeholder",e.lcZ(64,101,"bo.modalitaPagamento.proprieta.oreValiditaPrimaCheckIn")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.oreValiditaPrimaCheckIn),e.xp6(7),e.s9C("placeholder",e.lcZ(71,103,"bo.modalitaPagamento.proprieta.massimoOreValiditaPrimaCheckIn")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.massimoOreValiditaPrimaCheckIn),e.xp6(7),e.s9C("placeholder",e.lcZ(78,105,"bo.modalitaPagamento.proprieta.statoPrenotazioneWelcomeDefault")),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.statoPrenotazioneWelcomeDefault),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",e.xi3(81,107,t.enumStatoPrenotazioneWelcome,"statoPrenotazioneWelcome")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.modelEdit.modalitaPagamento.ubicazioneIstat)("placeholder",e.lcZ(87,110,"bo.modalitaPagamento.proprieta.ubicazioneIstat")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getTemplatesViewSelect(t.getTemplatesRQ))("value",t.modelEdit.modalitaPagamento.template)("placeholder",e.lcZ(93,112,"bo.modalitaPagamento.proprieta.template")),e.xp6(6),e.Q6J("dataLoader",t.apiService.getTipiPagamentoViewSelect())("value",t.modelEdit.modalitaPagamento.tipoPagamentoWelcome)("placeholder",e.lcZ(99,114,"bo.modalitaPagamento.proprieta.tipoPagamentoWelcome")),e.xp6(3),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.BonificoBancario),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.VagliaPostale),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.XPay),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.PayWay),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.Unicredit),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.Stripe),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.BancaSella),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.PayPal),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.SumUp),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.AddonPayments),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.BeSafePay),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.Satispay),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.Hobex),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.Axepta),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.Holipay),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.Siapay),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.ScalaPay),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.VirtualPay),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.MyPOS),e.xp6(1),e.Q6J("ngIf",t.modalitaPagamentoPost.includes(t.modelEdit.modalitaPagamento.tipo)),e.xp6(3),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isPrenotazioniConfermateAutomaticamente),e.xp6(1),e.hij(" ",e.lcZ(125,116,"bo.modalitaPagamento.proprieta.isPrenotazioniConfermateAutomaticamente")," "),e.xp6(5),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isCreaCaparraInWelcome),e.xp6(1),e.hij(" ",e.lcZ(131,118,"bo.modalitaPagamento.proprieta.isCreaCaparraInWelcome")," "),e.xp6(4),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.isCreaCaparraInWelcome),e.xp6(3),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(139,120,"bo.modalitaPagamento.proprieta.isAttivo")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isAttivoBookingExtra),e.xp6(1),e.hij(" ",e.lcZ(146,122,"bo.modalitaPagamento.proprieta.isAttivoBookingExtra")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isAttivoMyPage),e.xp6(1),e.hij(" ",e.lcZ(153,124,"bo.modalitaPagamento.proprieta.isAttivoMyPage")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isAttivoPayMail),e.xp6(1),e.hij(" ",e.lcZ(160,126,"bo.modalitaPagamento.proprieta.isAttivoPayMail")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isVisualizzaInPagamenti),e.xp6(1),e.hij(" ",e.lcZ(167,128,"bo.modalitaPagamento.proprieta.isVisualizzaInPagamenti")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.modalitaPagamento.isAssegnaProgressivoCaparraInWelcome),e.xp6(1),e.hij(" ",e.lcZ(174,130,"bo.modalitaPagamento.proprieta.isAssegnaProgressivoCaparraInWelcome")," "),e.xp6(3),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo!=t.enumTipoModalitaPagamento.VirtualPay),e.xp6(4),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo!=t.enumTipoModalitaPagamento.CartaCredito),e.xp6(1),e.Q6J("ngIf",t.modelEdit.modalitaPagamento.tipo==t.enumTipoModalitaPagamento.CartaCredito),e.xp6(3),e.Oqu(e.lcZ(185,132,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(189,134,"globals.annulla"))}},dependencies:[m.sg,m.O5,m.tP,w.X,V.FC,h.eB,M.v_,M.nX,b.k0,re.CK,y.Mq,y.hl,y.nW,y.Q0,He.OY,He.vy,g.x8,qe.S$,qe.mi,ee.SK,ee.R7,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.On,Me.P,ne.d,st,Te.A,z.X$],styles:[".modalitaPagamentoTabGroup .mat-tab-body-wrapper{min-height:400px!important}.mat-column-isDisponibile[_ngcontent-%COMP%]{flex:0 0 10%!important;justify-content:center!important}.mat-cell[_ngcontent-%COMP%]{padding-right:5px!important;padding-left:5px!important}.mat-cell[_ngcontent-%COMP%]:nth-child(1), .mat-header-cell[_ngcontent-%COMP%]:nth-child(1){padding-left:24px!important}.help-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.help-icon[_ngcontent-%COMP%]{font-size:20px;line-height:20px}.container-tipo[_ngcontent-%COMP%]{background-color:#f0f0f0}"]});class Ur extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","tipo","caparra","ordinamento","isPrenotazioniConfermateAutomaticamente","isCreaCaparraInWelcome","tipoPagamentoWelcome","template","isAttivo","duplica","delete"],this.enumTipoModalitaPagamento=c.sc,this.rq=new d.k$g,this.filters=[]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.modalitaPagamento.title"),this.rq.sorting=[new d.aQR("ordinamento",c.nI.Asc)],this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String)),this.filters.push(new d.wn$("tipo",c.Hp.Equal,"",c.NM.Number)),this.filters.push(new d.wn$("ubicazioneIstat.oid",c.Hp.Equal,"",c.NM.Number))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getModalitaPagamentoFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}add(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Or,o);t.componentInstance.dialogRef=t,t.afterClosed().subscribe(a=>{null!=a&&this.edit(a)})}edit(o){this.modalitaPagamento=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}duplica(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0),this.apiService.duplicaModalitaPagamento(o).subscribe(n=>{this.edit(n.data)})},t=>{})}onSearch(o,t,n,a=!0){null!=t?(this.filters[o].value=t,this.download(!a)):(this.filters[o].active=n,this.download()),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}function ZZe(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function AZe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",18)(1,"mat-form-field",19)(2,"input",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.riduzioniXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",21),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.riduzioniXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.articoloXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.riduzioniXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.articoloXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.riduzioniXLingua[a].descrizione)}}function wZe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,AZe,7,10,"mat-tab",17),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function zZe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Ur.\u0275fac=function(o){return new(o||Ur)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Ur.\u0275cmp=e.Xpm({type:Ur,selectors:[["app-modalita-pagamento"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:51,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","tipo"],["matColumnDef","caparra"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","ordinamento"],["matColumnDef","isPrenotazioniConfermateAutomaticamente"],["matColumnDef","isCreaCaparraInWelcome"],["matColumnDef","tipoPagamentoWelcome"],["matColumnDef","template"],["matColumnDef","isAttivo"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","duplica"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"modalitaPagamento","backEvent"],["editComponent",""],[1,"filter"],[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","matInput","",3,"placeholder","value","input"],["nomeSearch",""],[3,"placeholder","value","selectionChange"],["tipoModalitaPagamentoSelect",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["displayMember","nome",3,"dataLoader","placeholder","valueChange"],[3,"value"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["color","primary","disabled","",3,"checked"],[1,"flex-wrap"],["class","w-100 text-center",4,"ngIf"],[1,"w-100","text-center"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Kxe,20,17,"ng-container",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,Gxe,1,0,"mat-header-cell",8),e.YNc(10,$xe,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,Bxe,3,3,"mat-header-cell",8),e.YNc(13,Vxe,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,Xxe,3,3,"mat-header-cell",8),e.YNc(16,jxe,3,3,"mat-cell",11),e.BQk(),e.ynx(17,13),e.YNc(18,Wxe,3,3,"mat-header-cell",14),e.YNc(19,eZe,4,5,"mat-cell",15),e.BQk(),e.ynx(20,16),e.YNc(21,tZe,3,3,"mat-header-cell",14),e.YNc(22,iZe,2,1,"mat-cell",15),e.BQk(),e.ynx(23,17),e.YNc(24,oZe,3,3,"mat-header-cell",14),e.YNc(25,nZe,2,1,"mat-cell",15),e.BQk(),e.ynx(26,18),e.YNc(27,aZe,3,3,"mat-header-cell",14),e.YNc(28,lZe,2,1,"mat-cell",15),e.BQk(),e.ynx(29,19),e.YNc(30,rZe,3,3,"mat-header-cell",8),e.YNc(31,cZe,2,1,"mat-cell",11),e.BQk(),e.ynx(32,20),e.YNc(33,sZe,3,3,"mat-header-cell",8),e.YNc(34,pZe,2,1,"mat-cell",11),e.BQk(),e.ynx(35,21),e.YNc(36,dZe,3,3,"mat-header-cell",14),e.YNc(37,hZe,5,4,"mat-cell",22),e.BQk(),e.ynx(38,23),e.YNc(39,fZe,1,0,"mat-header-cell",8),e.YNc(40,CZe,4,3,"mat-cell",11),e.BQk(),e.ynx(41,24),e.YNc(42,bZe,1,0,"mat-header-cell",8),e.YNc(43,vZe,4,0,"mat-cell",25),e.BQk(),e.YNc(44,TZe,1,0,"mat-header-row",26),e.YNc(45,xZe,1,1,"mat-row",27),e.qZA()(),e.TgZ(46,"div",28)(47,"mat-paginator",29),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(48,"div",30)(49,"app-modalita-pagamento-edit",31,32),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(37),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("modalitaPagamento",t.modalitaPagamento))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,ne.d,Qr,Te.A,z.X$]});class Yr extends f.H{set riduzione(o){if(null!=o){this.modelEdit=new d._1K,this.modelEdit.riduzione=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.xpt;n.lingua=t,this.modelEdit.riduzioniXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getArticoliXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.riduzioniXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.riduzioniXLingua[a].nome=n.nome,this.modelEdit.riduzioniXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d._1K,this.editing=!1,this.selectedIndex=0,this.enumTipoComponente=c.dE,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.riduzioniXLingua)o.articolo=this.modelEdit.riduzione;this.modelEdit.riduzione.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setRiduzione(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.riduzioni.riduzioneSalvata").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.tabelle.riduzioni.eliminareRiduzione").then(t=>{null!=o&&(this.modelEdit.riduzione=o),this.modelEdit.riduzione.isDeleted=!0,this.setIsLoading(!0),this.apiService.setRiduzione(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function MZe(i,o){1&i&&(e.TgZ(0,"div",29)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.riduzioni.nessunaRiduzione")))}function qZe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function PZe(i,o){1&i&&(e.TgZ(0,"mat-cell",30)(1,"button",31)(2,"i",32),e._uU(3,"edit"),e.qZA()()())}function kZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.oid"),""))}function SZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.oid)}}function yZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.riduzione.proprieta.nome"),""))}function JZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function EZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.riduzione.proprieta.etaMinima"),""))}function NZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.etaMinima)}}function OZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.riduzione.proprieta.etaMassima"),""))}function LZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.etaMassima)}}function DZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.riduzione.proprieta.tipo"),""))}function IZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoComponentePrenotazione,t.tipoComponentePrenotazione,"tipoComponentePrenotazione"))," ")}}function QZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.riduzione.proprieta.isRiduzioneAPrezzoFisso"),""))}function UZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isRiduzioneAPrezzoFisso)("disabled",!0)}}function YZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.riduzione.proprieta.isAttivo"),""))}function RZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isAttivo)("disabled",!0)}}function FZe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.riduzione.proprieta.isDisponibile"),""))}function HZe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDisponibile)("disabled",!0)}}function KZe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function GZe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw().$implicit;e.oxw();const r=e.MAs(42);return a.stopPropagation(),e.KtG(r.delete(l))}),e.TgZ(1,"i",38),e._uU(2,"delete"),e.qZA()()}}function $Ze(i,o){if(1&i&&(e.TgZ(0,"mat-cell",35),e.YNc(1,GZe,3,0,"button",36),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.tipoComponentePrenotazione!=n.enumTipoComponentePrenotazione.Adulto)}}function BZe(i,o){1&i&&e._UZ(0,"mat-header-row",39)}function VZe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",40),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function XZe(i,o){1&i&&(e.TgZ(0,"div",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.riduzioni.warningAltri")))}Yr.\u0275fac=function(o){return new(o||Yr)(e.Y36(A.s),e.Y36(j.m))},Yr.\u0275cmp=e.Xpm({type:Yr,selectors:[["app-riduzioni-edit"]],inputs:{riduzione:"riduzione"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:47,vars:45,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","disabled","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],[1,"col-6"],["disabled","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","","disabled","",3,"placeholder","ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.riduzione.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"div",0)(9,"div",5)(10,"mat-form-field",2)(11,"mat-select",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.riduzione.tipoComponentePrenotazione=a}),e.ALo(12,"translate"),e.YNc(13,ZZe,3,4,"mat-option",7),e.ALo(14,"selectEnum"),e.qZA()()()(),e.TgZ(15,"div",0)(16,"div",5)(17,"mat-form-field",2)(18,"input",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.riduzione.etaMinima=a}),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",5)(21,"mat-form-field",2)(22,"input",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.riduzione.etaMassima=a}),e.ALo(23,"translate"),e.qZA()()()(),e.TgZ(24,"div",0)(25,"div",1)(26,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.riduzione.isAttivo=a}),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",1)(30,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.riduzione.isDisponibile=a}),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"div",1)(34,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.riduzione.isRiduzioneAPrezzoFisso=a}),e._uU(35),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"mat-tab-group",10),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(38,wZe,2,1,"ng-container",11),e.qZA(),e.TgZ(39,"div",12)(40,"button",13),e.NdJ("click",function(){return t.save()}),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.YNc(43,zZe,3,3,"button",14),e.TgZ(44,"button",15),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(45),e.ALo(46,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,21,"bo.riduzione.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.riduzione.nome),e.xp6(3),e.hij(" Ultima sincronizzazione Welcome: ",e.xi3(7,23,t.modelEdit.riduzione.dataModificaWelcome,"dd/MM/yyyy HH:mm")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(12,26,"bo.riduzione.proprieta.tipo")),e.Q6J("ngModel",t.modelEdit.riduzione.tipoComponentePrenotazione),e.xp6(2),e.Q6J("ngForOf",e.xi3(14,28,t.enumTipoComponente,"tipoComponentePrenotazione")),e.xp6(5),e.s9C("placeholder",e.lcZ(19,31,"bo.riduzione.proprieta.etaMinima")),e.Q6J("ngModel",t.modelEdit.riduzione.etaMinima),e.xp6(4),e.s9C("placeholder",e.lcZ(23,33,"bo.riduzione.proprieta.etaMassima")),e.Q6J("ngModel",t.modelEdit.riduzione.etaMassima),e.xp6(4),e.Q6J("ngModel",t.modelEdit.riduzione.isAttivo),e.xp6(1),e.hij(" ",e.lcZ(28,35,"bo.riduzione.proprieta.isAttivo")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.riduzione.isDisponibile),e.xp6(1),e.hij(" ",e.lcZ(32,37,"bo.riduzione.proprieta.isDisponibile")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.riduzione.isRiduzioneAPrezzoFisso),e.xp6(1),e.hij(" ",e.lcZ(36,39,"bo.riduzione.proprieta.isRiduzioneAPrezzoFisso")," "),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.riduzioniXLingua),e.xp6(3),e.Oqu(e.lcZ(42,41,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(46,43,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,Me.P,m.uU,Te.A,z.X$]});const jZe=function(i){return{"mb-0":i}};class Rr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","oid","nome","etaMinima","etaMassima","tipo","isRiduzioneAPrezzoFisso","isAttivo","isDisponibile","delete"],this.enumTipoComponentePrenotazione=c.dE,this.warningAltri=!1}ngOnInit(){this.headerService.setTitle("sbm.tabelle.riduzioni.title")}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getRiduzioni().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator;let t=o.data.filter(n=>n.tipoComponentePrenotazione==c.dE.Altro);this.warningAltri=t.length>0&&t.some(n=>0==n.etaMinima),this.setIsLoading(!1)})}edit(o){this.riduzione=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}}function WZe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"app-image",20),e.NdJ("edit",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.editImageList(l))})("delete",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.deleteImageList(l))}),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("container",!1)("url",t.urlImmagine)("deleteAlwaysVisible",!0)}}function eAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",22)(1,"mat-form-field",23)(2,"input",24),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.risorseXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"app-editor",25),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.risorseXLingua[l].descrizione=a)}),e.qZA(),e.TgZ(8,"div",15),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"app-editor",25),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.risorseXLingua[l].note=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.Q6J("placeholder",e.lcZ(3,9,"bo.risorsaXLingua.proprieta.nome"))("ngModel",l.modelEdit.risorseXLingua[a].nome),e.xp6(3),e.Oqu(e.lcZ(6,11,"bo.risorsaXLingua.proprieta.descrizione")),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.risorseXLingua[a].descrizione),e.xp6(2),e.Oqu(e.lcZ(10,13,"bo.risorsaXLingua.proprieta.note")),e.xp6(2),e.Q6J("id","note"+a)("text",l.modelEdit.risorseXLingua[a].note)}}function tAe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,eAe,12,15,"mat-tab",21),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}Rr.\u0275fac=function(o){return new(o||Rr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Rr.\u0275cmp=e.Xpm({type:Rr,selectors:[["app-riduzioni"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:43,vars:14,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","oid"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","etaMinima"],["matColumnDef","etaMassima"],["matColumnDef","tipo"],["matColumnDef","isRiduzioneAPrezzoFisso"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","isAttivo"],["matColumnDef","isDisponibile"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container",3,"ngClass"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],["class","color-red font-italic font-small warningAltri mt-2",4,"ngIf"],[1,"edit-container",3,"hidden"],[3,"riduzione","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"],[1,"color-red","font-italic","font-small","warningAltri","mt-2"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,MZe,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,qZe,1,0,"mat-header-cell",6),e.YNc(7,PZe,4,0,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,kZe,3,3,"mat-header-cell",6),e.YNc(10,SZe,2,1,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,yZe,3,3,"mat-header-cell",6),e.YNc(13,JZe,2,1,"mat-cell",9),e.BQk(),e.ynx(14,11),e.YNc(15,EZe,3,3,"mat-header-cell",6),e.YNc(16,NZe,2,1,"mat-cell",9),e.BQk(),e.ynx(17,12),e.YNc(18,OZe,3,3,"mat-header-cell",6),e.YNc(19,LZe,2,1,"mat-cell",9),e.BQk(),e.ynx(20,13),e.YNc(21,DZe,3,3,"mat-header-cell",6),e.YNc(22,IZe,3,3,"mat-cell",9),e.BQk(),e.ynx(23,14),e.YNc(24,QZe,3,3,"mat-header-cell",15),e.YNc(25,UZe,2,2,"mat-cell",16),e.BQk(),e.ynx(26,17),e.YNc(27,YZe,3,3,"mat-header-cell",15),e.YNc(28,RZe,2,2,"mat-cell",16),e.BQk(),e.ynx(29,18),e.YNc(30,FZe,3,3,"mat-header-cell",15),e.YNc(31,HZe,2,2,"mat-cell",16),e.BQk(),e.ynx(32,19),e.YNc(33,KZe,1,0,"mat-header-cell",6),e.YNc(34,$Ze,2,1,"mat-cell",20),e.BQk(),e.YNc(35,BZe,1,0,"mat-header-row",21),e.YNc(36,VZe,1,1,"mat-row",22),e.qZA()(),e.TgZ(37,"div",23)(38,"mat-paginator",24),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()(),e.YNc(39,XZe,3,3,"div",25),e.qZA(),e.TgZ(40,"div",26)(41,"app-riduzioni-edit",27,28),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngClass",e.VKq(12,jZe,t.warningAltri)),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("ngIf",t.warningAltri),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("riduzione",t.riduzione))},dependencies:[m.mk,m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Yr,z.X$],styles:[".warningAltri[_ngcontent-%COMP%]{margin-bottom:3rem}"]});class Fr extends f.H{set risorsa(o){if(null!=o){this.modelEdit=new d.ER8,this.modelEdit.risorsa=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.b5R;n.lingua=t,this.modelEdit.risorseXLingua.push(n)}this.setIsLoading(!0),this.apiService.getRisorseXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.risorseXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.risorseXLingua[a].risorsa=n.tipoCamera,this.modelEdit.risorseXLingua[a].nome=n.nome,this.modelEdit.risorseXLingua[a].descrizione=n.descrizione,this.modelEdit.risorseXLingua[a].note=n.note)}this.apiService.getImmaginiRisorsa(o.oid).subscribe(n=>{this.immagini=n.data,this.setIsLoading(!1)})})}}constructor(o,t,n){super(),this.apiService=o,this.sessionService=t,this.utility=n,this.modelEdit=new d.ER8,this.selectedIndex=0,this.immagini=[],this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.risorseXLingua)o.risorsa=this.modelEdit.risorsa;this.modelEdit.risorsa.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setRisorsa(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.risorse.risorsaSalvata").then(()=>this.backEvent.emit())})}delete(o){this.showDialogConfirm("sbm.tabelle.risorse.eliminareRisorsa").then(()=>{null!=o&&(this.modelEdit.risorsa=o),this.modelEdit.risorsa.isDeleted=!0,this.setIsLoading(!0),this.apiService.setRisorsa(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},()=>{})}editImageList(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(bo.u,t),a=n.componentInstance;a.image=Object.assign({},o),a.dialogRef=n,n.afterClosed().subscribe(l=>{null!=l&&(this.setIsLoading(!0),this.apiService.setImmagineRisorsa(l).subscribe(r=>{if(l.oid>0){let p=this.utility.findIndexByOid(this.immagini,l.oid);l.isDeleted?this.immagini.splice(p,1):this.immagini[p]=r.data.obj}else this.immagini.push(r.data.obj);this.setIsLoading(!1)}))})}addImageList(){let o=new v.AJe;o.risorsa=new v.TvF(this.modelEdit.risorsa.oid),o.isAttiva=!0,this.editImageList(o)}deleteImageList(o){this.showDialogConfirm("globals.eliminareImmagine").then(()=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setImmagineRisorsa(o).subscribe(()=>{let t=this.utility.findIndexByOid(this.immagini,o.oid);this.immagini.splice(t,1),this.setIsLoading(!1)})},()=>{})}}function iAe(i,o){1&i&&(e.TgZ(0,"div",21)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.risorse.nessunaRisorsa")))}function oAe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function nAe(i,o){1&i&&(e.TgZ(0,"mat-cell",22)(1,"button",23)(2,"i",24),e._uU(3,"edit"),e.qZA()()())}function aAe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.risorsa.proprieta.nome")))}function lAe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function rAe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.risorsa.proprieta.tipoCamera")))}function cAe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.tipoCamera?t.tipoCamera.nome:"")}}function sAe(i,o){1&i&&e._UZ(0,"mat-header-cell",25)}function pAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",26)(1,"button",27),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(23);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",28),e._uU(3,"delete"),e.qZA()()()}}function dAe(i,o){1&i&&e._UZ(0,"mat-header-row",29)}function mAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",30),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Fr.\u0275fac=function(o){return new(o||Fr)(e.Y36(A.s),e.Y36(j.m),e.Y36(C.t))},Fr.\u0275cmp=e.Xpm({type:Fr,selectors:[["app-risorse-edit"]],inputs:{risorsa:"risorsa"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:31,vars:24,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","readonly","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"text-center","mt-3","mb-3"],[1,"row","mb-3"],["class","col-4 pb-3",4,"ngFor","ngForOf"],[1,"col-4"],[1,"imageRow"],[1,"imageHeight"],["mat-icon-button","","color","primary",1,"add-button",3,"click"],[1,"material-icons","add-icon"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"],["mat-flat-button","","color","blank",3,"click"],[1,"col-4","pb-3"],[3,"container","url","deleteAlwaysVisible","edit","delete"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.risorsa.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"app-view-select",4),e.NdJ("valueChange",function(a){return t.modelEdit.risorsa.tipoCamera=a}),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"h5",5),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",6),e.YNc(12,WZe,2,3,"div",7),e.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"button",11),e.NdJ("click",function(){return t.addImageList()}),e.TgZ(17,"i",12),e._uU(18,"add_circle_outline"),e.qZA()()()()()(),e.TgZ(19,"mat-tab-group",13),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(20,tAe,2,1,"ng-container",14),e.qZA(),e.TgZ(21,"div",15)(22,"button",16),e.NdJ("click",function(){return t.save()}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"button",17),e.NdJ("click",function(){return t.delete()}),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"button",18),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(29),e.ALo(30,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Q6J("placeholder",e.lcZ(4,12,"bo.risorsa.proprieta.nome"))("ngModel",t.modelEdit.risorsa.nome),e.xp6(3),e.Q6J("dataLoader",t.apiService.getTipiCameraViewSelect())("value",t.modelEdit.risorsa.tipoCamera)("placeholder",e.lcZ(7,14,"bo.risorsa.proprieta.tipoCamera")),e.xp6(3),e.Oqu(e.lcZ(10,16,"sbm.tabelle.risorse.immagini")),e.xp6(3),e.Q6J("ngForOf",t.immagini),e.xp6(7),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.risorseXLingua),e.xp6(3),e.Oqu(e.lcZ(24,18,"globals.salva")),e.xp6(3),e.Oqu(e.lcZ(27,20,"globals.elimina")),e.xp6(3),e.Oqu(e.lcZ(30,22,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.JJ,_.On,Me.P,ne.d,Ge.c,z.X$],styles:[".imageHeight[_ngcontent-%COMP%]{max-height:180px!important;text-align:center;width:100%}.imageRow[_ngcontent-%COMP%]{height:180px!important;display:flex;align-items:center;margin-bottom:1rem}.add-icon[_ngcontent-%COMP%]{height:60px!important;width:60px!important;font-size:60px!important;line-height:60px!important}.add-button[_ngcontent-%COMP%]{height:60px!important;width:60px!important;line-height:60px!important}"]});class Hr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","tipoCamera.nome","delete"],this.enumTipoRisorsa=c.Yb}ngOnInit(){this.headerService.setTitle("sbm.tabelle.risorse.title")}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getRisorse().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}edit(o){this.risorsa=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}}function _Ae(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",13)(1,"mat-form-field",14)(2,"input",15),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.articoliXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",16),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.articoliXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.articoloXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.articoliXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.articoloXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.articoliXLingua[a].descrizione)}}function uAe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,_Ae,7,10,"mat-tab",12),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function gAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}Hr.\u0275fac=function(o){return new(o||Hr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Hr.\u0275cmp=e.Xpm({type:Hr,selectors:[["app-risorse"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:24,vars:10,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","tipoCamera.nome"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"risorsa","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,iAe,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,oAe,1,0,"mat-header-cell",6),e.YNc(7,nAe,4,0,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,aAe,3,3,"mat-header-cell",6),e.YNc(10,lAe,2,1,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,rAe,3,3,"mat-header-cell",6),e.YNc(13,cAe,2,1,"mat-cell",9),e.BQk(),e.ynx(14,11),e.YNc(15,sAe,1,0,"mat-header-cell",12),e.YNc(16,pAe,4,0,"mat-cell",13),e.BQk(),e.YNc(17,dAe,1,0,"mat-header-row",14),e.YNc(18,mAe,1,1,"mat-row",15),e.qZA()(),e.TgZ(19,"div",16)(20,"mat-paginator",17),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(21,"div",18)(22,"app-risorse-edit",19,20),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("risorsa",t.risorsa))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Fr,z.X$]});class Kr extends f.H{set articolo(o){if(null!=o){this.modelEdit=new d.Edn,this.modelEdit.articolo=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.xpt;n.lingua=t,this.modelEdit.articoliXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getArticoliXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.articoliXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.articoliXLingua[a].nome=n.nome,this.modelEdit.articoliXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.Edn,this.editing=!1,this.selectedIndex=0,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.articoliXLingua)o.articolo=this.modelEdit.articolo;this.modelEdit.articolo.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.articolo.tipoArticolo=c.ix.ElementoTrattamento,this.setIsLoading(!0),this.apiService.setArticolo(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.serviziObbligatori.servizioObbligatorioSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.tabelle.serviziObbligatori.eliminareServizioObbligatorio").then(t=>{null!=o&&(this.modelEdit.articolo=o),this.modelEdit.articolo.isDeleted=!0,this.setIsLoading(!0),this.apiService.setArticolo(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function hAe(i,o){1&i&&(e.TgZ(0,"div",29)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.serviziObbligatori.nessunServizioObbligatorio")))}function fAe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function CAe(i,o){1&i&&(e.TgZ(0,"mat-cell",30)(1,"button",31)(2,"i",32),e._uU(3,"edit"),e.qZA()()())}function bAe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.nome"),""))}function vAe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function TAe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.isDisponibile"),""))}function xAe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._UZ(1,"mat-checkbox",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDisponibile)("disabled",!0)}}function ZAe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.ordinamento"),""))}function AAe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ordinamento)}}function wAe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function zAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",35)(1,"button",36),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(34);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",37),e._uU(3,"delete"),e.qZA()()()}}function MAe(i,o){1&i&&e._UZ(0,"mat-header-row",38)}function qAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",39),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Kr.\u0275fac=function(o){return new(o||Kr)(e.Y36(A.s),e.Y36(j.m))},Kr.\u0275cmp=e.Xpm({type:Kr,selectors:[["app-servizi-obbligatori-edit"]],inputs:{articolo:"articolo"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:27,vars:25,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",1)(6,"mat-form-field",2)(7,"input",4),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.ordinamento=a}),e.ALo(8,"translate"),e.qZA()()()(),e.TgZ(9,"div")(10,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.isDisponibile=a}),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div")(14,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.articolo.isImportaComeExtraAutomatico=a}),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"mat-tab-group",6),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(18,uAe,2,1,"ng-container",7),e.qZA(),e.TgZ(19,"div",8)(20,"button",9),e.NdJ("click",function(){return t.save()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.YNc(23,gAe,3,3,"button",10),e.TgZ(24,"button",11),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(25),e.ALo(26,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,13,"bo.articolo.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.articolo.nome),e.xp6(4),e.s9C("placeholder",e.lcZ(8,15,"bo.articolo.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.articolo.ordinamento),e.xp6(3),e.Q6J("ngModel",t.modelEdit.articolo.isDisponibile),e.xp6(1),e.hij(" ",e.lcZ(12,17,"bo.articolo.proprieta.isDisponibile")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.articolo.isImportaComeExtraAutomatico),e.xp6(1),e.hij(" ",e.lcZ(16,19,"bo.articolo.proprieta.isImportaComeExtraAutomatico")," "),e.xp6(2),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.articoliXLingua),e.xp6(3),e.Oqu(e.lcZ(22,21,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(26,23,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,Me.P,z.X$]});class Gr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","isDisponibile","ordinamento","delete"],this.rq=new d.k$g}ngOnInit(){this.headerService.setTitle("sbm.tabelle.serviziObbligatori.title"),this.rq.sorting=[new d.aQR("ordinamento")],this.filters=[],this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getServiziObbligatoriFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,o||this.setIsLoading(!1)})}edit(o){this.articolo=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle()}}function PAe(i,o){1&i&&(e.TgZ(0,"h5",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.supplementi.nessunaRisorsaTariffaPromozioneCollegata")))}function kAe(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.portaleXAlbergo.nome+" - "+t.descrizione)}}function SAe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,kAe,2,1,"div",5),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"sbm.tabelle.supplementi.risorseCollegate")),e.xp6(2),e.Q6J("ngForOf",t.risorse)}}function yAe(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.portaleXAlbergo.nome+" - "+t.descrizione)}}Gr.\u0275fac=function(o){return new(o||Gr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Gr.\u0275cmp=e.Xpm({type:Gr,selectors:[["app-servizi-obbligatori"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:35,vars:15,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["nomeSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","isDisponibile"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","ordinamento"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"articolo","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"justify-content-center"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,hAe,4,3,"div",8),e.TgZ(10,"div",1)(11,"div",9)(12,"mat-table",10),e.ynx(13,11),e.YNc(14,fAe,1,0,"mat-header-cell",12),e.YNc(15,CAe,4,0,"mat-cell",13),e.BQk(),e.ynx(16,14),e.YNc(17,bAe,3,3,"mat-header-cell",12),e.YNc(18,vAe,2,1,"mat-cell",15),e.BQk(),e.ynx(19,16),e.YNc(20,TAe,3,3,"mat-header-cell",17),e.YNc(21,xAe,2,2,"mat-cell",18),e.BQk(),e.ynx(22,19),e.YNc(23,ZAe,3,3,"mat-header-cell",17),e.YNc(24,AAe,2,1,"mat-cell",18),e.BQk(),e.ynx(25,20),e.YNc(26,wAe,1,0,"mat-header-cell",12),e.YNc(27,zAe,4,0,"mat-cell",21),e.BQk(),e.YNc(28,MAe,1,0,"mat-header-row",22),e.YNc(29,qAe,1,1,"mat-row",23),e.qZA()(),e.TgZ(30,"div",24)(31,"mat-paginator",25),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(32,"div",26)(33,"app-servizi-obbligatori-edit",27,28),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,13,"bo.articolo.proprieta.nome")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("articolo",t.articolo))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Kr,z.X$]});const Zs=function(i){return{"mt-3":i}};function JAe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5",6),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,yAe,2,1,"div",5),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(5,Zs,null!=t.risorse&&t.risorse.length>0)),e.xp6(1),e.Oqu(e.lcZ(3,3,"sbm.tabelle.supplementi.tariffeCollegate")),e.xp6(2),e.Q6J("ngForOf",t.tariffe)}}function EAe(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function NAe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h5",6),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,EAe,2,1,"div",5),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(5,Zs,null!=t.risorse&&t.risorse.length>0||null!=t.tariffe&&t.tariffe.length>0)),e.xp6(1),e.Oqu(e.lcZ(3,3,"sbm.tabelle.supplementi.promozioniCollegate")),e.xp6(2),e.Q6J("ngForOf",t.promozioni)}}class $r extends f.H{constructor(o){super(),this.apiService=o}ngOnInit(){this.setIsLoading(!0),this.apiService.getRisorseTariffePromozioniCollegateSupplemento(this.oidSupplemento).subscribe(o=>{this.risorse=o.data.risorse,this.tariffe=o.data.tariffe,this.promozioni=o.data.promozioni,this.setIsLoading(!1)})}}function OAe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function LAe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function DAe(i,o){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function IAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",23)(1,"mat-form-field",24)(2,"input",25),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.supplementiXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",26),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.supplementiXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.articoloXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.supplementiXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.articoloXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.supplementiXLingua[a].descrizione)}}function QAe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,IAe,7,10,"mat-tab",22),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function UAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",27)(2,"app-image",28),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.modelEdit.supplemento.urlImmagine)}}function YAe(i,o){1&i&&(e.TgZ(0,"div",29)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.supplementi.salvareSupplemento")))}function RAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function FAe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.controllaRisorseTariffePromozioniCollegate())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"sbm.tabelle.supplementi.controllaRisorseTariffePromozioniCollegate")))}$r.\u0275fac=function(o){return new(o||$r)(e.Y36(A.s))},$r.\u0275cmp=e.Xpm({type:$r,selectors:[["app-risorse-tariffe-promozioni-collegate-supplemento-modal"]],inputs:{oidSupplemento:"oidSupplemento"},features:[e.qOj],decls:7,vars:5,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],["class","mb-0",4,"ngIf"],[4,"ngIf"],[1,"mb-0"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,PAe,3,3,"h5",2),e.YNc(4,SAe,5,4,"ng-container",3),e.YNc(5,JAe,5,7,"ng-container",3),e.YNc(6,NAe,5,7,"ng-container",3)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",!(null!=t.risorse&&0!=t.risorse.length||null!=t.tariffe&&0!=t.tariffe.length)),e.xp6(1),e.Q6J("ngIf",null!=t.risorse&&t.risorse.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.tariffe&&t.tariffe.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.promozioni&&t.promozioni.length>0))},dependencies:[m.mk,m.sg,m.O5,h.eB,F.aO,z.X$]});class Br extends f.H{set supplemento(o){if(null!=o){this.modelEdit=new d.MO0,this.modelEdit.supplemento=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.xpt;n.lingua=t,this.modelEdit.supplementiXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getArticoliXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.supplementiXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.supplementiXLingua[a].nome=n.nome,this.modelEdit.supplementiXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.MO0,this.editing=!1,this.selectedIndex=0,this.enumTipoApplicazioneSupplemento=c.x6,this.enumTipoSupplemento=c.E9,this.enumTipoValore=c.jy,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.supplementiXLingua)o.articolo=this.modelEdit.supplemento;this.modelEdit.supplemento.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setSupplemento(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.supplementi.supplementoSalvato").then(()=>{this.editing?this.backEvent.emit():(this.modelEdit.supplemento=o.data.obj,this.modelEdit.supplementiXLingua=o.data.details,this.editing=!0,setTimeout(()=>{this.selectedIndex=0},200))})})}delete(o){null!=o&&!o.isServizioWeb||null==o&&!this.modelEdit.supplemento.isServizioWeb?this.showDialogConfirm("sbm.tabelle.supplementi.eliminareSupplemento").then(t=>{null!=o&&(this.modelEdit.supplemento=o),this.modelEdit.supplemento.isDeleted=!0,this.setIsLoading(!0),this.apiService.setSupplemento(this.modelEdit).subscribe(n=>{this.backEvent.emit()})},t=>{}):this.showError("sbm.tabelle.supplementi.impossibileCancellareSupplemento")}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.modelEdit.supplemento.urlImmagine,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d._bb;l.oid=this.modelEdit.supplemento.oid,l.base64=a,this.apiService.setImmagineSupplemento(l).subscribe(r=>{null!=r.data&&(this.modelEdit.supplemento.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d._bb;t.oid=this.modelEdit.supplemento.oid,t.base64="",this.apiService.setImmagineSupplemento(t).subscribe(n=>{null!=n.data&&(this.modelEdit.supplemento.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}controllaRisorseTariffePromozioniCollegate(){let o=new d.Zpt;o.width="50vw",this.showModalDialog($r,o).componentInstance.oidSupplemento=this.modelEdit.supplemento.oid}}function HAe(i,o){1&i&&(e.TgZ(0,"div",33)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.supplementi.nessunSupplemento")))}function KAe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function GAe(i,o){1&i&&(e.TgZ(0,"mat-cell",34)(1,"button",35)(2,"i",36),e._uU(3,"edit"),e.qZA()()())}function $Ae(i,o){1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.immagine"),""))}function BAe(i,o){if(1&i&&e._UZ(0,"img",39),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagine,e.LSH)}}function VAe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",37),e.YNc(1,BAe,1,1,"img",38),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlImmagine)}}function XAe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.supplemento.proprieta.nome"),""))}function jAe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function WAe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.supplemento.proprieta.tipoSupplemento"),""))}function e0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",null==n.getEnumKeyTranslation(n.enumTipoSupplemento,t.tipoSupplemento)?"":n.getEnumKeyTranslation(n.enumTipoSupplemento,t.tipoSupplemento)," ")}}function t0e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.supplemento.proprieta.prezzo"),""))}function i0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.prezzo)}}function o0e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.supplemento.proprieta.ordinamento"),""))}function n0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ordinamento)}}function a0e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.supplemento.proprieta.isBookingExtra"),""))}function l0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",40),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isBookingExtra)("disabled",!0)}}function r0e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.supplemento.proprieta.isDisponibile"),""))}function c0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",40),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDisponibile)("disabled",!0)}}function s0e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function p0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",41)(1,"button",42),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(46);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",43),e._uU(3,"delete"),e.qZA()()()}}function d0e(i,o){1&i&&e._UZ(0,"mat-header-row",44)}function m0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",45),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Br.\u0275fac=function(o){return new(o||Br)(e.Y36(A.s),e.Y36(j.m))},Br.\u0275cmp=e.Xpm({type:Br,selectors:[["app-supplementi-edit"]],inputs:{supplemento:"supplemento"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:151,vars:106,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","disabled","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["disabled","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","placeholder","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],[1,"row","mt-3"],["color","primary",3,"ngModel","ngModelChange"],[1,"row","mt-3","mb-3"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],["class","row mt-3",4,"ngIf"],["class","mt-3 p-3 border rounded",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"value"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],[1,"col-6"],[3,"title","url","edit","delete"],[1,"mt-3","p-3","border","rounded"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"div",0)(9,"div",1)(10,"mat-form-field",2)(11,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.tipoApplicazioneSupplemento=a}),e.ALo(12,"translate"),e.YNc(13,OAe,3,4,"mat-option",6),e.ALo(14,"selectEnum"),e.qZA()()(),e.TgZ(15,"div",4),e._uU(16," Inserire il tipo del supplemento "),e.qZA()(),e.TgZ(17,"div",0)(18,"div",1)(19,"mat-form-field",2)(20,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.ordinamento=a}),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"div",4),e._uU(23," Inserire l'ordinamento di visualizzazione "),e.qZA()(),e.TgZ(24,"div",0)(25,"div",1)(26,"mat-form-field",2)(27,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.quantitaMassimaInPrenotazione=a}),e.ALo(28,"translate"),e.qZA()()(),e.TgZ(29,"div",4),e._uU(30," Inserire la quantit\xe0 massima prenotabile "),e.qZA()(),e.TgZ(31,"div",0)(32,"div",1)(33,"mat-form-field",2)(34,"mat-select",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.tipoSupplemento=a}),e.ALo(35,"translate"),e.YNc(36,LAe,3,4,"mat-option",6),e.ALo(37,"selectEnum"),e.qZA()()(),e.TgZ(38,"div",4),e._uU(39," Inserire il tipo di supplemento "),e.qZA()(),e.TgZ(40,"div",0)(41,"div",1)(42,"mat-form-field",2)(43,"mat-select",8),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.tipoValore=a}),e.ALo(44,"translate"),e.YNc(45,DAe,3,4,"mat-option",6),e.ALo(46,"selectEnum"),e.qZA()()(),e.TgZ(47,"div",4),e._uU(48," Inserire il tipo valore del supplemento "),e.qZA()(),e.TgZ(49,"div",0)(50,"div",1)(51,"mat-form-field",2)(52,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.prezzo=a}),e.ALo(53,"translate"),e.qZA()()(),e.TgZ(54,"div",4),e._uU(55," Inserire il prezzo di base del supplemento "),e.qZA()(),e.TgZ(56,"div",0)(57,"div",1)(58,"app-view-select",9),e.NdJ("valueChange",function(a){return t.modelEdit.supplemento.voceAddebito=a}),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"div",4),e._uU(61," Selezionare la voce di addebito associata al supplemento "),e.qZA()(),e.TgZ(62,"div",0)(63,"div",1)(64,"mat-form-field",2)(65,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.durataMinimaSoggiorno=a}),e.ALo(66,"translate"),e.qZA()()(),e.TgZ(67,"div",4),e._uU(68," Durata minima soggiorno per visualizzare il supplemento in fase di prenotazione (0 sempre visualizzato) "),e.qZA()(),e.TgZ(69,"div",0)(70,"div",1)(71,"mat-form-field",2)(72,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.durataMassimaSoggiorno=a}),e.ALo(73,"translate"),e.qZA()()(),e.TgZ(74,"div",4),e._uU(75," Durata massima soggiorno per visualizzare il supplemento in fase di prenotazione (0 sempre visualizzato) "),e.qZA()(),e.TgZ(76,"div",0)(77,"div",1)(78,"mat-form-field",2)(79,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.sconto=a}),e.ALo(80,"translate"),e.qZA()()(),e.TgZ(81,"div",4),e._uU(82," Impostare lo sconto percentuale "),e.qZA()(),e.TgZ(83,"div",0)(84,"div",1)(85,"app-view-select",9),e.NdJ("valueChange",function(a){return t.modelEdit.supplemento.arrotondamento=a}),e.ALo(86,"translate"),e.qZA()(),e.TgZ(87,"div",4),e._uU(88," Impostare l'arrotondamento "),e.qZA()(),e.TgZ(89,"div",10)(90,"div",1)(91,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.isImportaComeExtraAutomatico=a}),e._uU(92),e.ALo(93,"translate"),e.qZA()(),e.TgZ(94,"div",4),e._uU(95," Importo il supplemento come Extra Automatico "),e.qZA()(),e.TgZ(96,"div",10)(97,"div",1)(98,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.isDisponibile=a}),e._uU(99),e.ALo(100,"translate"),e.qZA()(),e.TgZ(101,"div",4),e._uU(102," Attiva il supplemento "),e.qZA()(),e.TgZ(103,"div",10)(104,"div",1)(105,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.isUpSellingCRM=a}),e._uU(106),e.ALo(107,"translate"),e.qZA()(),e.TgZ(108,"div",4),e._uU(109," Attiva il supplemento all'interno del MyPage come UpSelling "),e.qZA()(),e.TgZ(110,"div",10)(111,"div",1)(112,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.isVisualizzaGiorniWeb=a}),e._uU(113),e.ALo(114,"translate"),e.qZA()(),e.TgZ(115,"div",4),e._uU(116," Imposta la possibilit\xe0 di selezionare i giorni per i quali \xe8 possibile prenotare il supplemento "),e.qZA()(),e.TgZ(117,"div",10)(118,"div",1)(119,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.isBookingExtra=a}),e._uU(120),e.ALo(121,"translate"),e.qZA()(),e.TgZ(122,"div",4),e._uU(123," Attivare il flag per rendere disponibile il supplemento su booking extra "),e.qZA()(),e.TgZ(124,"div",12)(125,"div",1)(126,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.isApplicaATuttiComponenti=a}),e._uU(127),e.ALo(128,"translate"),e.qZA()(),e.TgZ(129,"div",4),e._uU(130," Applica il supplemento a tutti i componenti (vale solo per i supplementi a Persona) "),e.qZA()(),e.TgZ(131,"div",12)(132,"div",1)(133,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return t.modelEdit.supplemento.isAggiungiATutteLeProposte=a}),e._uU(134),e.ALo(135,"translate"),e.qZA()(),e.TgZ(136,"div",4),e._uU(137," Aggiungi il supplemento a tutte le proposte del preventivo di default "),e.qZA()(),e.TgZ(138,"mat-tab-group",13),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(139,QAe,2,1,"ng-container",14),e.qZA(),e.YNc(140,UAe,3,2,"div",15),e.YNc(141,YAe,4,3,"div",16),e.TgZ(142,"div",17)(143,"button",18),e.NdJ("click",function(){return t.save()}),e._uU(144),e.ALo(145,"translate"),e.qZA(),e.YNc(146,RAe,3,3,"button",19),e.YNc(147,FAe,3,3,"button",19),e.TgZ(148,"button",20),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(149),e.ALo(150,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,52,"bo.supplemento.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.supplemento.nome),e.xp6(3),e.hij(" Ultima sincronizzazione Welcome: ",e.xi3(7,54,t.modelEdit.supplemento.dataModificaWelcome,"dd/MM/yyyy HH:mm")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(12,57,"bo.supplemento.proprieta.tipoApplicazioneSupplemento")),e.Q6J("ngModel",t.modelEdit.supplemento.tipoApplicazioneSupplemento),e.xp6(2),e.Q6J("ngForOf",e.xi3(14,59,t.enumTipoApplicazioneSupplemento,"tipoApplicazioneSupplemento")),e.xp6(7),e.s9C("placeholder",e.lcZ(21,62,"bo.supplemento.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.supplemento.ordinamento),e.xp6(7),e.s9C("placeholder",e.lcZ(28,64,"bo.supplemento.proprieta.quantitaMassimaInPrenotazione")),e.Q6J("ngModel",t.modelEdit.supplemento.quantitaMassimaInPrenotazione),e.xp6(7),e.s9C("placeholder",e.lcZ(35,66,"bo.supplemento.proprieta.tipoSupplemento")),e.Q6J("ngModel",t.modelEdit.supplemento.tipoSupplemento),e.xp6(2),e.Q6J("ngForOf",e.xi3(37,68,t.enumTipoSupplemento,"tipoSupplemento")),e.xp6(7),e.s9C("placeholder",e.lcZ(44,71,"bo.supplemento.proprieta.tipoValore")),e.Q6J("ngModel",t.modelEdit.supplemento.tipoValore),e.xp6(2),e.Q6J("ngForOf",e.xi3(46,73,t.enumTipoValore,"tipoValore")),e.xp6(7),e.s9C("placeholder",e.lcZ(53,76,"bo.supplemento.proprieta.prezzo")),e.Q6J("ngModel",t.modelEdit.supplemento.prezzo),e.xp6(6),e.Q6J("dataLoader",t.apiService.getVociAddebitoViewSelect())("value",t.modelEdit.supplemento.voceAddebito)("placeholder",e.lcZ(59,78,"bo.supplemento.proprieta.voceAddebito")),e.xp6(7),e.s9C("placeholder",e.lcZ(66,80,"bo.supplemento.proprieta.durataMinimaSoggiorno")),e.Q6J("ngModel",t.modelEdit.supplemento.durataMinimaSoggiorno),e.xp6(7),e.s9C("placeholder",e.lcZ(73,82,"bo.supplemento.proprieta.durataMassimaSoggiorno")),e.Q6J("ngModel",t.modelEdit.supplemento.durataMassimaSoggiorno),e.xp6(7),e.Q6J("placeholder",e.lcZ(80,84,"bo.supplemento.proprieta.sconto"))("ngModel",t.modelEdit.supplemento.sconto),e.xp6(6),e.Q6J("dataLoader",t.apiService.getArrotondamentiViewSelect())("value",t.modelEdit.supplemento.arrotondamento)("placeholder",e.lcZ(86,86,"bo.supplemento.proprieta.arrotondamento")),e.xp6(6),e.Q6J("ngModel",t.modelEdit.supplemento.isImportaComeExtraAutomatico),e.xp6(1),e.hij(" ",e.lcZ(93,88,"bo.supplemento.proprieta.isImportaComeExtraAutomatico")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.supplemento.isDisponibile),e.xp6(1),e.hij(" ",e.lcZ(100,90,"bo.supplemento.proprieta.isDisponibile")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.supplemento.isUpSellingCRM),e.xp6(1),e.hij(" ",e.lcZ(107,92,"bo.supplemento.proprieta.isUpSellingCRM")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.supplemento.isVisualizzaGiorniWeb),e.xp6(1),e.hij(" ",e.lcZ(114,94,"bo.supplemento.proprieta.isVisualizzaGiorniWeb")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.supplemento.isBookingExtra),e.xp6(1),e.hij(" ",e.lcZ(121,96,"bo.supplemento.proprieta.isBookingExtra")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.supplemento.isApplicaATuttiComponenti),e.xp6(1),e.hij(" ",e.lcZ(128,98,"bo.supplemento.proprieta.isApplicaATuttiComponenti")," "),e.xp6(6),e.Q6J("ngModel",t.modelEdit.supplemento.isAggiungiATutteLeProposte),e.xp6(1),e.hij(" ",e.lcZ(135,100,"bo.articolo.proprieta.isAggiungiATutteLeProposte")," "),e.xp6(4),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.supplementiXLingua),e.xp6(1),e.Q6J("ngIf",t.modelEdit.supplemento.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.supplemento.oid||t.modelEdit.supplemento.oid<=0),e.xp6(3),e.Oqu(e.lcZ(145,102,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(1),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(150,104,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,re.CK,g.x8,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,Me.P,ne.d,Ge.c,m.uU,Te.A,z.X$]});class Vr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","immagine","nome","tipo","prezzo","ordinamento","isBookingExtra","isDisponibile","delete"],this.enumTipoSupplemento=c.E9,this.rq=new d.k$g}ngOnInit(){this.headerService.setTitle("sbm.tabelle.supplementi.title"),this.rq.sorting=[new d.aQR("ordinamento")],this.filters=[],this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getSupplementiFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}edit(o){this.supplemento=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}Vr.\u0275fac=function(o){return new(o||Vr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},Vr.\u0275cmp=e.Xpm({type:Vr,selectors:[["app-supplementi"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:47,vars:15,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["nomeSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","immagine"],["class","img-cell",4,"matHeaderCellDef"],["class","img-cell",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","tipo"],["matColumnDef","prezzo"],["matColumnDef","ordinamento"],["matColumnDef","isBookingExtra"],["matColumnDef","isDisponibile"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"supplemento","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"img-cell"],["class","m-2",3,"src",4,"ngIf"],[1,"m-2",3,"src"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,HAe,4,3,"div",8),e.TgZ(10,"div",1)(11,"div",9)(12,"mat-table",10),e.ynx(13,11),e.YNc(14,KAe,1,0,"mat-header-cell",12),e.YNc(15,GAe,4,0,"mat-cell",13),e.BQk(),e.ynx(16,14),e.YNc(17,$Ae,3,3,"mat-header-cell",15),e.YNc(18,VAe,2,1,"mat-cell",16),e.BQk(),e.ynx(19,17),e.YNc(20,XAe,3,3,"mat-header-cell",12),e.YNc(21,jAe,2,1,"mat-cell",18),e.BQk(),e.ynx(22,19),e.YNc(23,WAe,3,3,"mat-header-cell",12),e.YNc(24,e0e,2,1,"mat-cell",18),e.BQk(),e.ynx(25,20),e.YNc(26,t0e,3,3,"mat-header-cell",12),e.YNc(27,i0e,2,1,"mat-cell",18),e.BQk(),e.ynx(28,21),e.YNc(29,o0e,3,3,"mat-header-cell",12),e.YNc(30,n0e,2,1,"mat-cell",18),e.BQk(),e.ynx(31,22),e.YNc(32,a0e,3,3,"mat-header-cell",12),e.YNc(33,l0e,2,2,"mat-cell",18),e.BQk(),e.ynx(34,23),e.YNc(35,r0e,3,3,"mat-header-cell",12),e.YNc(36,c0e,2,2,"mat-cell",18),e.BQk(),e.ynx(37,24),e.YNc(38,s0e,1,0,"mat-header-cell",12),e.YNc(39,p0e,4,0,"mat-cell",25),e.BQk(),e.YNc(40,d0e,1,0,"mat-header-row",26),e.YNc(41,m0e,1,1,"mat-row",27),e.qZA()(),e.TgZ(42,"div",28)(43,"mat-paginator",29),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(44,"div",30)(45,"app-supplementi-edit",31,32),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,13,"bo.supplemento.proprieta.nome")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("supplemento",t.supplemento))},dependencies:[m.O5,w.X,V.FC,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Br,z.X$],styles:["img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.img-cell[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]});const _0e=["panel1"],u0e=["panel2"];function g0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"app-image",35),e.NdJ("edit",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.editImageList(l))})("delete",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.deleteImageList(l))}),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("container",!1)("url",t.urlImmagine)("deleteAlwaysVisible",!0)}}function h0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"app-image",27),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editImage(a.enumTipoImmagineTagCrm.Header))})("delete",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteImage(a.enumTipoImmagineTagCrm.Header))}),e.qZA()(),e.TgZ(4,"div",26)(5,"app-image",27),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editImage(a.enumTipoImmagineTagCrm.Sfondo))})("delete",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteImage(a.enumTipoImmagineTagCrm.Sfondo))}),e.qZA()()(),e._UZ(6,"hr"),e.TgZ(7,"h5",28),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",6),e.YNc(11,g0e,2,3,"div",29),e.TgZ(12,"div",2)(13,"div",30)(14,"div",31)(15,"button",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addImageList())}),e.TgZ(16,"i",33),e._uU(17,"add_circle_outline"),e.qZA()()()()()()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("title","sbm.tabelle.tag-crm.immagine")("url",t.modelEdit.tagCrm.urlHeaderMyPage),e.xp6(2),e.Q6J("title","sbm.tabelle.tag-crm.immagineSfondo")("url",t.modelEdit.tagCrm.urlImmagineSfondo),e.xp6(3),e.Oqu(e.lcZ(9,6,"sbm.tabelle.tag-crm.immaginiHeader")),e.xp6(3),e.Q6J("ngForOf",t.immagini)}}function f0e(i,o){1&i&&(e.TgZ(0,"div",36)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.tag-crm.salvareTagCrm")))}function C0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",50)(1,"mat-checkbox",51),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleContenuti():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionContenuti.hasValue()&&t.isAllSelectedContenuti())("indeterminate",t.selectionContenuti.hasValue()&&!t.isAllSelectedContenuti())}}function b0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",52)(1,"mat-checkbox",53),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionContenuti.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionContenuti.isSelected(t.oid))}}function v0e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.template.proprieta.nome"),""))}function T0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function x0e(i,o){1&i&&e._UZ(0,"mat-header-row",54)}function Z0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",55),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}const As=function(i){return{"mb-3 border-bottom":i}},vc=function(){return["nome","select"]};function A0e(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",37,38)(2,"mat-expansion-panel-header",39),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",40)(6,"mat-table",41),e.ynx(7,42),e.YNc(8,C0e,2,2,"mat-header-cell",43),e.YNc(9,b0e,2,1,"mat-cell",44),e.BQk(),e.ynx(10,45),e.YNc(11,v0e,3,3,"mat-header-cell",46),e.YNc(12,T0e,2,1,"mat-cell",47),e.BQk(),e.YNc(13,x0e,1,0,"mat-header-row",48),e.YNc(14,Z0e,1,1,"mat-row",49),e.qZA()()()),2&i){const t=e.MAs(1),n=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(8,As,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(4,6,"sbm.tabelle.tag-crm.contenuti")," "),e.xp6(3),e.Q6J("dataSource",n.contenuti),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(10,vc))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(11,vc))}}function w0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-header-cell",50)(1,"mat-checkbox",51),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(a?l.masterToggleArticoli():null)}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectionArticoli.hasValue()&&t.isAllSelectedArticoli())("indeterminate",t.selectionArticoli.hasValue()&&!t.isAllSelectedArticoli())}}function z0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",52)(1,"mat-checkbox",53),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(a?p.selectionArticoli.toggle(r.oid):null)}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("checked",n.selectionArticoli.isSelected(t.oid))}}function M0e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.articolo.proprieta.nome"),""))}function q0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function P0e(i,o){1&i&&e._UZ(0,"mat-header-row",54)}function k0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",55),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function S0e(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",37,56)(2,"mat-expansion-panel-header",39),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",40)(6,"mat-table",41),e.ynx(7,42),e.YNc(8,w0e,2,2,"mat-header-cell",43),e.YNc(9,z0e,2,1,"mat-cell",44),e.BQk(),e.ynx(10,45),e.YNc(11,M0e,3,3,"mat-header-cell",46),e.YNc(12,q0e,2,1,"mat-cell",47),e.BQk(),e.YNc(13,P0e,1,0,"mat-header-row",48),e.YNc(14,k0e,1,1,"mat-row",49),e.qZA()()()),2&i){const t=e.MAs(1),n=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(8,As,t.expanded)),e.xp6(1),e.hij(" ",e.lcZ(4,6,"sbm.tabelle.tag-crm.articoli")," "),e.xp6(3),e.Q6J("dataSource",n.articoli),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(10,vc))("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(11,vc))}}function y0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-editor",63),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw(2).index,p=e.oxw(2);return e.KtG(p.modelEdit.tagCrmXLingua[r*p.testi.length+l].testo=a)}),e.qZA()}if(2&i){const t=e.oxw(2).index,n=e.oxw(2).index,a=e.oxw(2);e.Q6J("id","testo"+a.selectedIndex)("text",a.modelEdit.tagCrmXLingua[n*a.testi.length+t].testo)}}function J0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"textarea",64),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw(2).index,r=e.oxw(2).index,p=e.oxw(2);return e.KtG(p.modelEdit.tagCrmXLingua[r*p.testi.length+l].testo=a)}),e.qZA()}if(2&i){const t=e.oxw(2).index,n=e.oxw(2).index,a=e.oxw(2);e.Q6J("ngModel",a.modelEdit.tagCrmXLingua[n*a.testi.length+t].testo)}}function E0e(i,o){if(1&i&&(e.TgZ(0,"div",20)(1,"div",60),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,y0e,1,2,"app-editor",61),e.YNc(5,J0e,1,1,"textarea",62),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(4);e.xp6(2),e.Oqu(e.lcZ(3,3,t.value)),e.xp6(2),e.Q6J("ngIf",t.key!=n.enumTestoMyPage.TestoWhatsAppSms&&t.key!=n.enumTestoMyPage.TestoWhatsAppSmsAccettato&&t.key!=n.enumTestoMyPage.TestoWhatsAppSmsPrenotato),e.xp6(1),e.Q6J("ngIf",t.key==n.enumTestoMyPage.TestoWhatsAppSms||t.key==n.enumTestoMyPage.TestoWhatsAppSmsAccettato||t.key==n.enumTestoMyPage.TestoWhatsAppSmsPrenotato)}}function N0e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,E0e,6,5,"div",59),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.key!=n.enumTestoMyPage.TestoFinaleMyPageAccettato&&t.key!=n.enumTestoMyPage.TestoFinaleMyPagePrenotato&&t.key!=n.enumTestoMyPage.TestoFinale)}}function O0e(i,o){if(1&i&&(e.TgZ(0,"mat-tab",58),e.YNc(1,N0e,2,1,"ng-container",19),e.ALo(2,"selectEnum"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("label",t.nome),e.xp6(1),e.Q6J("ngForOf",e.xi3(2,2,n.enumTestoMyPage,"testoMyPage"))}}function L0e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,O0e,3,5,"mat-tab",57),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t))}}function D0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",65),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}function I0e(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",4),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tagCrm.nome=a)}),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",5),e._uU(7," Inserire il nome del tag "),e.qZA()(),e.TgZ(8,"div",6)(9,"div",2)(10,"mat-form-field",3)(11,"input",7),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tagCrm.ordinamento=a)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",5),e._uU(14," Inserire l'ordinamento del tag "),e.qZA()(),e.TgZ(15,"div",6)(16,"div",2)(17,"app-color-picker",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tagCrm.coloreHex=a)}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",5),e._uU(20," Inserire il colore del tag "),e.qZA()(),e.TgZ(21,"div",6)(22,"div",2)(23,"div",6)(24,"div",9)(25,"app-color-picker",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tagCrm.coloreMyPageHex=a)}),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",10)(28,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.tagCrm.coloreMyPageHex=null)}),e.TgZ(29,"i",12),e._uU(30," settings_backup_restore "),e.qZA()()()()(),e.TgZ(31,"div",5),e._uU(32," Selezionare il colore principale del MyPage "),e.qZA()(),e.TgZ(33,"div",6)(34,"div",2)(35,"div",6)(36,"div",9)(37,"app-color-picker",8),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tagCrm.coloreSecondarioMyPageHex=a)}),e.ALo(38,"translate"),e.qZA()(),e.TgZ(39,"div",10)(40,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.modelEdit.tagCrm.coloreSecondarioMyPageHex=null)}),e.TgZ(41,"i",12),e._uU(42," settings_backup_restore "),e.qZA()()()()(),e.TgZ(43,"div",5),e._uU(44," Selezionare il colore secondario del MyPage, se non impostato viene presa una tonalit\xe0 pi\xf9 chiara del colore principale "),e.qZA()(),e.TgZ(45,"div",6)(46,"div",2)(47,"app-view-select",13),e.NdJ("valueChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tagCrm.ubicazioneIstat=a)}),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"div",5),e._uU(50," Selezionare l'ubicazione istat del tag "),e.qZA()(),e.TgZ(51,"div",6)(52,"div",2)(53,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.modelEdit.tagCrm.isVisualizzaContenutiSeparati=a)}),e._uU(54),e.ALo(55,"translate"),e.qZA()(),e.TgZ(56,"div",5),e._uU(57," Attivare il check per visualizzare i contenuti del mypage separati e espansi "),e.qZA()(),e.YNc(58,h0e,18,8,"div",15),e.YNc(59,f0e,4,3,"div",16),e.YNc(60,A0e,15,12,"mat-expansion-panel",17),e.YNc(61,S0e,15,12,"mat-expansion-panel",17),e.TgZ(62,"mat-tab-group",18),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedIndex=a)}),e.YNc(63,L0e,2,1,"ng-container",19),e.qZA(),e.TgZ(64,"div",20)(65,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.YNc(68,D0e,3,3,"button",22),e.TgZ(69,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backEvent.emit())}),e._uU(70),e.ALo(71,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,24,"bo.tagCrm.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.tagCrm.nome),e.xp6(7),e.s9C("placeholder",e.lcZ(12,26,"bo.tagCrm.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.tagCrm.ordinamento),e.xp6(6),e.Q6J("value",t.modelEdit.tagCrm.coloreHex)("placeholder",e.lcZ(18,28,"bo.tagCrm.proprieta.colore")),e.xp6(8),e.Q6J("value",t.modelEdit.tagCrm.coloreMyPageHex)("placeholder",e.lcZ(26,30,"bo.tagCrm.proprieta.coloreMyPage")),e.xp6(12),e.Q6J("value",t.modelEdit.tagCrm.coloreSecondarioMyPageHex)("placeholder",e.lcZ(38,32,"bo.tagCrm.proprieta.coloreSecondarioMyPage")),e.xp6(10),e.Q6J("dataLoader",t.apiService.getUbicazioniIstatViewSelect())("value",t.modelEdit.tagCrm.ubicazioneIstat)("placeholder",e.lcZ(48,34,"bo.tagCrm.proprieta.ubicazioneIstat")),e.xp6(6),e.Q6J("ngModel",t.modelEdit.tagCrm.isVisualizzaContenutiSeparati),e.xp6(1),e.hij(" ",e.lcZ(55,36,"bo.tagCrm.proprieta.isVisualizzaContenutiSeparati")," "),e.xp6(4),e.Q6J("ngIf",t.modelEdit.tagCrm.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.tagCrm.oid||t.modelEdit.tagCrm.oid<=0),e.xp6(1),e.Q6J("ngIf",null!=t.contenuti&&t.contenuti.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.articoli&&t.articoli.length>0),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.lingue),e.xp6(3),e.Oqu(e.lcZ(67,38,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(71,40,"globals.annulla"))}}class Xr extends f.H{set tagCrm(o){if(null!=o){this.modelEdit=new d.MHX,this.modelEdit.tagCrm=o;try{this.modelEdit.tagCrm.coloreHex=Z(this.modelEdit.tagCrm.colore).hex(),null!=this.modelEdit.tagCrm.coloreMyPage&&(this.modelEdit.tagCrm.coloreMyPageHex=Z(this.modelEdit.tagCrm.coloreMyPage).hex()),null!=this.modelEdit.tagCrm.coloreSecondarioMyPage&&(this.modelEdit.tagCrm.coloreSecondarioMyPageHex=Z(this.modelEdit.tagCrm.coloreSecondarioMyPage).hex())}catch(t){}if(this.selectionContenuti=new me.Ov(!0,[]),this.modelEdit.tagCrm.oidContenuti){let t=this.modelEdit.tagCrm.oidContenuti.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.contenuti.findIndex(a=>a.oid==+n)&&this.selectionContenuti.toggle(+n)}if(this.selectionArticoli=new me.Ov(!0,[]),this.modelEdit.tagCrm.oidArticoli){let t=this.modelEdit.tagCrm.oidArticoli.split(";");for(let n of t)""!=n&&!isNaN(+n)&&-1!=this.articoli.findIndex(a=>a.oid==+n)&&this.selectionArticoli.toggle(+n)}this.selectedIndex=0,null!=this.panel1&&this.panel1.close(),null!=this.panel2&&this.panel2.close();for(let t of this.lingue)for(let n of this.testi){let a=new v.ZQX;a.lingua=t,a.testoMyPage=n,this.modelEdit.tagCrmXLingua.push(a)}this.initialized=!0,null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getTagCrmXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.tagCrmXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid&&l.testoMyPage==n.testoMyPage);a>=0&&(this.modelEdit.tagCrmXLingua[a].tagCrm=n.tagCrm,this.modelEdit.tagCrmXLingua[a].testo=n.testo)}this.apiService.getImmaginiTagCrm(o.oid).subscribe(n=>{this.immagini=n.data,this.setIsLoading(!1)})})):(this.immagini=[],this.editing=!1)}}constructor(o,t,n,a){super(),this.apiService=o,this.sessionService=t,this.containerService=n,this.utility=a,this.modelEdit=new d.MHX,this.editing=!1,this.selectedIndex=0,this.enumTestoMyPage=c.et,this.initialized=!1,this.selectionContenuti=new me.Ov(!0,[]),this.selectionArticoli=new me.Ov(!0,[]),this.enumTipoImmagineTagCrm=c.cS,this.immagini=[],this.backEvent=new e.vpe}ngOnInit(){this.testi=Object.keys(this.enumTestoMyPage).map(o=>this.enumTestoMyPage[o]).filter(o=>!isNaN(o))}save(){for(let t of this.modelEdit.tagCrmXLingua)t.tagCrm=this.modelEdit.tagCrm;if(this.modelEdit.tagCrm.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.modelEdit.tagCrm.oidContenuti=this.selectionContenuti.selected.toString().replace(/,/g,";"),this.modelEdit.tagCrm.oidArticoli=this.selectionArticoli.selected.toString().replace(/,/g,";"),this.modelEdit.tagCrm.coloreHex)try{this.modelEdit.tagCrm.colore=Z(this.modelEdit.tagCrm.coloreHex).rgbNumber()}catch(t){}if(this.modelEdit.tagCrm.coloreMyPageHex)try{this.modelEdit.tagCrm.coloreMyPage=Z(this.modelEdit.tagCrm.coloreMyPageHex).rgbNumber()}catch(t){}else this.modelEdit.tagCrm.coloreMyPage=null;if(this.modelEdit.tagCrm.coloreSecondarioMyPageHex)try{this.modelEdit.tagCrm.coloreSecondarioMyPage=Z(this.modelEdit.tagCrm.coloreSecondarioMyPageHex).rgbNumber()}catch(t){}else this.modelEdit.tagCrm.coloreSecondarioMyPage=null;this.setIsLoading(!0);let o=new d.MHX;o.tagCrm=this.modelEdit.tagCrm,o.tagCrmXLingua=this.modelEdit.tagCrmXLingua.filter(t=>!!t.testo),this.apiService.setTagCrm(o).subscribe(t=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.tag-crm.tagCrmSalvato").then(()=>{this.editing?this.backEvent.emit():(this.modelEdit.tagCrm=t.data.obj,this.editing=!0,setTimeout(()=>{this.containerService.scrollToTop(),this.selectedIndex=0},200))})})}delete(o){this.showDialogConfirm("sbm.tabelle.tag-crm.eliminareTagCrm").then(t=>{null!=o&&(this.modelEdit.tagCrm=o),this.modelEdit.tagCrm.isDeleted=!0,this.setIsLoading(!0),this.apiService.setTagCrm(this.modelEdit).subscribe(n=>{this.backEvent.emit()})},t=>{})}editImage(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(Ve.t,t),a=n.componentInstance;a._url=o==c.cS.Header?this.modelEdit.tagCrm.urlHeaderMyPage:o==c.cS.Sfondo?this.modelEdit.tagCrm.urlImmagineSfondo:"",a.title=o==c.cS.Header?"sbm.tabelle.tag-crm.immagine":o==c.cS.Sfondo?"sbm.tabelle.tag-crm.immagineSfondo":"",a.dialogRef=n,n.afterClosed().subscribe(l=>{if(null!=l){this.setIsLoading(!0);let r=new d.J4L;r.oid=this.modelEdit.tagCrm.oid,r.tipoImmagine=o,r.base64=l,this.apiService.setImmagineTagCrm(r).subscribe(p=>{null!=p.data&&(o==c.cS.Header?this.modelEdit.tagCrm.urlHeaderMyPage=p.data.url:o==c.cS.Sfondo&&(this.modelEdit.tagCrm.urlImmagineSfondo=p.data.url)),this.setIsLoading(!1)})}})}deleteImage(o){this.showDialogConfirm("globals.eliminareImmagine").then(t=>{this.setIsLoading(!0);let n=new d.J4L;n.oid=this.modelEdit.tagCrm.oid,n.tipoImmagine=o,n.base64="",this.apiService.setImmagineTagCrm(n).subscribe(a=>{null!=a.data&&(o==c.cS.Header?this.modelEdit.tagCrm.urlHeaderMyPage=a.data.url:o==c.cS.Sfondo&&(this.modelEdit.tagCrm.urlImmagineSfondo=a.data.url)),this.setIsLoading(!1)})},t=>{})}editImageList(o){let t=new d.Zpt;t.width="50vw";let n=this.showModalDialog(bo.u,t),a=n.componentInstance;a.image=Object.assign({},o),a.dialogRef=n,n.afterClosed().subscribe(l=>{null!=l&&(this.setIsLoading(!0),this.apiService.setImmagineTagCrmList(l).subscribe(r=>{if(l.oid>0){let p=this.utility.findIndexByOid(this.immagini,l.oid);l.isDeleted?this.immagini.splice(p,1):this.immagini[p]=r.data.obj}else this.immagini.push(r.data.obj);this.setIsLoading(!1)}))})}addImageList(){let o=new v.Db1;o.tagCrm=new v.I73(this.modelEdit.tagCrm.oid),o.isAttiva=!0,this.editImageList(o)}deleteImageList(o){this.showDialogConfirm("globals.eliminareImmagine").then(()=>{o.isDeleted=!0,this.setIsLoading(!0),this.apiService.setImmagineTagCrmList(o).subscribe(()=>{let t=this.utility.findIndexByOid(this.immagini,o.oid);this.immagini.splice(t,1),this.setIsLoading(!1)})},()=>{})}isAllSelectedContenuti(){return this.selectionContenuti.selected.length==this.contenuti.length}masterToggleContenuti(){this.isAllSelectedContenuti()?this.selectionContenuti.clear():this.contenuti.forEach(o=>this.selectionContenuti.select(o.oid))}isAllSelectedArticoli(){return this.selectionArticoli.selected.length==this.articoli.length}masterToggleArticoli(){this.isAllSelectedArticoli()?this.selectionArticoli.clear():this.articoli.forEach(o=>this.selectionArticoli.select(o.oid))}}function Q0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",28)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.tabelle.tag-crm.nessunTagCrm")))}function U0e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Y0e(i,o){1&i&&(e.TgZ(0,"mat-cell",29)(1,"button",30)(2,"i",31),e._uU(3,"edit"),e.qZA()()())}function R0e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tagCrm.proprieta.nome"),""))}function F0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function H0e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tagCrm.proprieta.ordinamento"),""))}function K0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ordinamento)}}function G0e(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tagCrm.proprieta.immagineHeaderMyPage"),""))}function $0e(i,o){if(1&i&&e._UZ(0,"img",35),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlHeaderMyPage,e.LSH)}}function B0e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e.YNc(1,$0e,1,1,"img",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlHeaderMyPage)}}function V0e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function X0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"button",36),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return a.stopPropagation(),e.KtG(p.duplica(r.oid))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"globals.duplica")))}function j0e(i,o){1&i&&e._UZ(0,"mat-header-cell",37)}function W0e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",38)(1,"button",39),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(32);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",40),e._uU(3,"delete"),e.qZA()()()}}function ewe(i,o){1&i&&e._UZ(0,"mat-header-row",41)}function twe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",42),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Xr.\u0275fac=function(o){return new(o||Xr)(e.Y36(A.s),e.Y36(j.m),e.Y36(te.J),e.Y36(C.t))},Xr.\u0275cmp=e.Xpm({type:Xr,selectors:[["app-tag-crm-edit"]],viewQuery:function(o,t){if(1&o&&(e.Gf(_0e,5),e.Gf(u0e,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.panel1=n.first),e.iGM(n=e.CRH())&&(t.panel2=n.first)}},inputs:{tagCrm:"tagCrm",contenuti:"contenuti",articoli:"articoli"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","mt-3"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],[1,"row"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"value","placeholder","valueChange"],[1,"col-10"],[1,"col-2","p-0"],["mat-icon-button","","color","primary",1,"mt-2","ml-n2",3,"click"],[1,"material-icons"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["color","primary",1,"d-inline-block","mt-4",3,"ngModel","ngModelChange"],["class","mt-3 mb-3",4,"ngIf"],["class","mt-3 mb-3 p-3 border rounded",4,"ngIf"],["class","mat-elevation-z0 border mt-3 mb-3",4,"ngIf"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"mt-3","mb-3"],[1,"row","mb-3"],[1,"col-6"],[3,"title","url","edit","delete"],[1,"text-center","font-weight-normal","mb-3"],["class","col-4 pb-3",4,"ngFor","ngForOf"],[1,"imageRow"],[1,"imageHeight"],["mat-icon-button","","color","primary",1,"add-button",3,"click"],[1,"material-icons","add-icon"],[1,"col-4","pb-3"],[3,"container","url","deleteAlwaysVisible","edit","delete"],[1,"mt-3","mb-3","p-3","border","rounded"],[1,"mat-elevation-z0","border","mt-3","mb-3"],["panel1",""],[3,"ngClass"],[1,"mat-table-container-border-rounded","mb-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","select"],["class","mat-th-select",4,"matHeaderCellDef"],["class","mat-td-select",4,"matCellDef"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mat-th-select"],["color","primary",3,"checked","indeterminate","change"],[1,"mat-td-select"],["color","primary",3,"checked","click","change"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["panel2",""],[3,"label",4,"ngIf"],[3,"label"],["class","mt-3",4,"ngIf"],[1,"font-weight-bold"],[3,"id","text","textChange",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"id","text","textChange"],[3,"ngModel","ngModelChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&e.YNc(0,I0e,72,42,"ng-container",0),2&o&&e.Q6J("ngIf",t.initialized)},dependencies:[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,ye.ib,ye.yz,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.wV,_.JJ,_.On,We.h,Me.P,ne.d,Ge.c,Te.A,z.X$],styles:["textarea[_ngcontent-%COMP%]{resize:none;height:245px;width:100%;margin-top:5px;padding:.5rem .8rem 1rem;border:1px solid #ddd;overflow-x:hidden;overflow-y:auto}.imageHeight[_ngcontent-%COMP%]{max-height:180px!important;text-align:center;width:100%}.imageRow[_ngcontent-%COMP%]{height:180px!important;display:flex;align-items:center;margin-bottom:1rem}.add-icon[_ngcontent-%COMP%]{height:60px!important;width:60px!important;font-size:60px!important;line-height:60px!important}.add-button[_ngcontent-%COMP%]{height:60px!important;width:60px!important;line-height:60px!important}"]});class jr extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","nome","ordinamento","urlHeaderMyPage","duplica","delete"],this.contenuti=[],this.articoli=[]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.tag-crm.title"),this.setIsLoading(!0),this.apiService.getTagCrmView().subscribe(o=>{this.contenuti=o.data.contenuti,this.articoli=o.data.articoli,this.download()})}download(){this.setIsLoading(!0),this.apiService.getTagCrmList().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.setIsLoading(!1)})}add(){this.edit(new v.I73(-1))}edit(o){this.tagCrm=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}duplica(o){this.showDialogConfirm("globals.effettuareOperazione").then(t=>{this.setIsLoading(!0),this.apiService.duplicaTagCrm(o).subscribe(n=>{this.edit(n.data)})},t=>{})}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}}function iwe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",19)(1,"mat-form-field",20)(2,"input",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.tipiCameraXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",22),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.tipiCameraXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.tipoCameraXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.tipiCameraXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.tipoCameraXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.tipiCameraXLingua[a].descrizione)}}function owe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,iwe,7,10,"mat-tab",18),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function nwe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",24)(2,"app-image",25),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.modelEdit.tipoCamera.urlImmagine)}}function awe(i,o){1&i&&(e.TgZ(0,"div",26)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.tipiCamera.salvareTipoCamera")))}function lwe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}jr.\u0275fac=function(o){return new(o||jr)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},jr.\u0275cmp=e.Xpm({type:jr,selectors:[["app-tag-crm"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D.cl,5),e.Gf(_e.YE,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},features:[e.qOj],decls:33,vars:12,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],["matSort","","matSortActive","ordinamento","matSortDirection","asc","matSortDisableClear","",1,"mat-table",3,"dataSource","matSortChange"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","ordinamento"],["matColumnDef","urlHeaderMyPage"],["class","img-cell",4,"matHeaderCellDef"],["class","img-cell",4,"matCellDef"],["matColumnDef","duplica"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"tagCrm","contenuti","articoli","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],["mat-sort-header",""],[1,"img-cell"],["class","m-2",3,"src",4,"ngIf"],[1,"m-2",3,"src"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Q0e,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.NdJ("matSortChange",function(){return t.paginator.firstPage()}),e.ynx(8,7),e.YNc(9,U0e,1,0,"mat-header-cell",8),e.YNc(10,Y0e,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,R0e,3,3,"mat-header-cell",11),e.YNc(13,F0e,2,1,"mat-cell",12),e.BQk(),e.ynx(14,13),e.YNc(15,H0e,3,3,"mat-header-cell",11),e.YNc(16,K0e,2,1,"mat-cell",12),e.BQk(),e.ynx(17,14),e.YNc(18,G0e,3,3,"mat-header-cell",15),e.YNc(19,B0e,2,1,"mat-cell",16),e.BQk(),e.ynx(20,17),e.YNc(21,V0e,1,0,"mat-header-cell",8),e.YNc(22,X0e,4,3,"mat-cell",12),e.BQk(),e.ynx(23,18),e.YNc(24,j0e,1,0,"mat-header-cell",19),e.YNc(25,W0e,4,0,"mat-cell",20),e.BQk(),e.YNc(26,ewe,1,0,"mat-header-row",21),e.YNc(27,twe,1,1,"mat-row",22),e.qZA()(),e.TgZ(28,"div",23)(29,"mat-paginator",24),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(30,"div",25)(31,"app-tag-crm-edit",26,27),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("tagCrm",t.tagCrm)("contenuti",t.contenuti)("articoli",t.articoli))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,Xr,z.X$],styles:["img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.img-cell[_ngcontent-%COMP%]{justify-content:center;align-items:center}.mat-column-urlHeaderMyPage[_ngcontent-%COMP%]{width:20%!important;max-width:20%!important;min-width:20%!important}"]});class Wr extends f.H{set tipoCamera(o){if(null!=o){this.modelEdit=new d.ciA,this.modelEdit.tipoCamera=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.rvD;n.lingua=t,this.modelEdit.tipiCameraXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getTipiCameraXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.tipiCameraXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.tipiCameraXLingua[a].tipoCamera=n.tipoCamera,this.modelEdit.tipiCameraXLingua[a].nome=n.nome,this.modelEdit.tipiCameraXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.ciA,this.editing=!1,this.selectedIndex=0,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.tipiCameraXLingua)o.tipoCamera=this.modelEdit.tipoCamera;this.modelEdit.tipoCamera.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setTipoCamera(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.tipiCamera.tipoCameraSalvato").then(()=>{this.editing?this.backEvent.emit():(this.modelEdit.tipoCamera=o.data.obj,this.modelEdit.tipiCameraXLingua=o.data.details,this.editing=!0,setTimeout(()=>{this.selectedIndex=0},200))})})}delete(o){this.setIsLoading(!0),this.apiService.checkRisorseTipoCamera(null!=o?o.oid:this.modelEdit.tipoCamera.oid).subscribe(t=>{this.setIsLoading(!1),t.data?this.showError("sbm.tabelle.tipiCamera.impossibileEliminareTipoCamera"):this.showDialogConfirm("sbm.tabelle.tipiCamera.eliminareTipoCamera").then(n=>{null!=o&&(this.modelEdit.tipoCamera=o),this.modelEdit.tipoCamera.isDeleted=!0,this.setIsLoading(!0),this.apiService.setTipoCamera(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},n=>{})})}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.modelEdit.tipoCamera.urlImmagine,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.o9D;l.oid=this.modelEdit.tipoCamera.oid,l.base64=a,this.apiService.setImmagineTipoCamera(l).subscribe(r=>{null!=r.data&&(this.modelEdit.tipoCamera.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.o9D;t.oid=this.modelEdit.tipoCamera.oid,t.base64="",this.apiService.setImmagineTipoCamera(t).subscribe(n=>{null!=n.data&&(this.modelEdit.tipoCamera.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}}function rwe(i,o){1&i&&(e.TgZ(0,"div",29)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.tipiCamera.nessunTipoCamera")))}function cwe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function swe(i,o){1&i&&(e.TgZ(0,"mat-cell",30)(1,"button",31)(2,"i",32),e._uU(3,"edit"),e.qZA()()())}function pwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.immagine"),""))}function dwe(i,o){if(1&i&&e._UZ(0,"img",35),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagine,e.LSH)}}function mwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell",33),e.YNc(1,dwe,1,1,"img",34),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlImmagine)}}function _we(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.oid"),""))}function uwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.oid)}}function gwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCamera.proprieta.nome"),""))}function hwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function fwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCamera.proprieta.descrizione"),""))}function Cwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.descrizione)}}function bwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCamera.proprieta.paxMin"),""))}function vwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.paxMin)}}function Twe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCamera.proprieta.paxMax"),""))}function xwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.paxMax)}}function Zwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCamera.proprieta.tipoRisorsa"),""))}function Awe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",n.getEnumKeyTranslation(n.enumTipoRisorsa,t.tipoRisorsa)," ")}}function wwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCamera.proprieta.isDisponibile"),""))}function zwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",36),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isDisponibile)("disabled",!0)}}function Mwe(i,o){1&i&&e._UZ(0,"mat-header-cell",37)}function qwe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",38)(1,"button",39),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(41);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",40),e._uU(3,"delete"),e.qZA()()()}}function Pwe(i,o){1&i&&e._UZ(0,"mat-header-row",41)}function kwe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",42),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}Wr.\u0275fac=function(o){return new(o||Wr)(e.Y36(A.s),e.Y36(j.m))},Wr.\u0275cmp=e.Xpm({type:Wr,selectors:[["app-tipi-camera-edit"]],inputs:{tipoCamera:"tipoCamera"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:75,vars:47,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","disabled","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["autocompleteOff","","type","number","matInput","","disabled","","readonly","",3,"placeholder","ngModel","ngModelChange"],[1,"row","mt-3","mb-3"],["color","primary",3,"ngModel","ngModelChange"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],["class","row mt-3",4,"ngIf"],["class","mt-3 p-3 border rounded",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],[1,"row","mt-3"],[1,"col-6"],[3,"title","url","edit","delete"],[1,"mt-3","p-3","border","rounded"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.tipoCamera.sigla=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Inserire la sigla della tipologia camera "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.tipoCamera.nome=a}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",4),e._uU(13," Inserire il nome della tipologia camera "),e.qZA()(),e.TgZ(14,"div",0)(15,"div",1)(16,"mat-form-field",2)(17,"input",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.tipoCamera.ordinamento=a}),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"div",4),e._uU(20," Inserire l'ordinamento della tipologia camera "),e.qZA()(),e.TgZ(21,"div",0)(22,"div",1)(23,"mat-form-field",2)(24,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.tipoCamera.paxMin=a}),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"div",4),e._uU(27," Inserire il numero di persone minime per la tipologia di camera "),e.qZA()(),e.TgZ(28,"div",0)(29,"div",1)(30,"mat-form-field",2)(31,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.tipoCamera.paxMax=a}),e.ALo(32,"translate"),e.qZA()()(),e.TgZ(33,"div",4),e._uU(34," Inserire il numero di persone massime per la tipologia di camera "),e.qZA()(),e.TgZ(35,"div",0)(36,"div",1)(37,"mat-form-field",2)(38,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.tipoCamera.enfantMax=a}),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",4),e._uU(41," Inserire il numero di enfant massimi per la tipologia di camera (0 = nessun limite) "),e.qZA()(),e.TgZ(42,"div",0)(43,"div",1)(44,"mat-form-field",2)(45,"input",7),e.NdJ("ngModelChange",function(a){return t.modelEdit.tipoCamera.enfantExtraPaxMax=a}),e.ALo(46,"translate"),e.qZA()()(),e.TgZ(47,"div",4),e._uU(48," Inserire il numero di extra enfant massimi per la tipologia di camera (nemero di enfant che possono essere in piu alle PaxMax) "),e.qZA()(),e.TgZ(49,"div",0)(50,"div",1)(51,"mat-form-field",2)(52,"input",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.tipoCamera.letti=a}),e.ALo(53,"translate"),e.qZA()()(),e.TgZ(54,"div",4),e._uU(55," Inserire il numero di letti per la tipologia di camera "),e.qZA()(),e.TgZ(56,"div",8)(57,"div",1)(58,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return t.modelEdit.tipoCamera.isDisponibile=a}),e._uU(59),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"div",4),e._uU(62," Attiva/Disattiva la tipologia di camera "),e.qZA()(),e.TgZ(63,"mat-tab-group",10),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(64,owe,2,1,"ng-container",11),e.qZA(),e.YNc(65,nwe,3,2,"div",12),e.YNc(66,awe,4,3,"div",13),e.TgZ(67,"div",14)(68,"button",15),e.NdJ("click",function(){return t.save()}),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.YNc(71,lwe,3,3,"button",16),e.TgZ(72,"button",17),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(73),e.ALo(74,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,25,"bo.tipoCamera.proprieta.sigla")),e.Q6J("ngModel",t.modelEdit.tipoCamera.sigla),e.xp6(7),e.s9C("placeholder",e.lcZ(11,27,"bo.tipoCamera.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.tipoCamera.nome),e.xp6(7),e.s9C("placeholder",e.lcZ(18,29,"bo.tipoCamera.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.tipoCamera.ordinamento),e.xp6(7),e.s9C("placeholder",e.lcZ(25,31,"bo.tipoCamera.proprieta.paxMin")),e.Q6J("ngModel",t.modelEdit.tipoCamera.paxMin),e.xp6(7),e.s9C("placeholder",e.lcZ(32,33,"bo.tipoCamera.proprieta.paxMax")),e.Q6J("ngModel",t.modelEdit.tipoCamera.paxMax),e.xp6(7),e.s9C("placeholder",e.lcZ(39,35,"bo.tipoCamera.proprieta.enfantMax")),e.Q6J("ngModel",t.modelEdit.tipoCamera.enfantMax),e.xp6(7),e.s9C("placeholder",e.lcZ(46,37,"bo.tipoCamera.proprieta.enfantExtraPaxMax")),e.Q6J("ngModel",t.modelEdit.tipoCamera.enfantExtraPaxMax),e.xp6(7),e.s9C("placeholder",e.lcZ(53,39,"bo.tipoCamera.proprieta.letti")),e.Q6J("ngModel",t.modelEdit.tipoCamera.letti),e.xp6(6),e.Q6J("ngModel",t.modelEdit.tipoCamera.isDisponibile),e.xp6(1),e.hij(" ",e.lcZ(60,41,"bo.tipoCamera.proprieta.isDisponibile")," "),e.xp6(4),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.tipiCameraXLingua),e.xp6(1),e.Q6J("ngIf",t.modelEdit.tipoCamera.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.tipoCamera.oid||t.modelEdit.tipoCamera.oid<=0),e.xp6(3),e.Oqu(e.lcZ(70,43,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(74,45,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,Me.P,Ge.c,z.X$]});class ec extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","immagine","oid","nome","descrizione","paxMin","paxMax","tipoRisorsa","isDisponibile","delete"],this.enumTipoRisorsa=c.Yb}ngOnInit(){this.headerService.setTitle("sbm.tabelle.tipiCamera.title")}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getTipiCamera().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}edit(o){this.tipoCamera=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}}function Swe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}ec.\u0275fac=function(o){return new(o||ec)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},ec.\u0275cmp=e.Xpm({type:ec,selectors:[["app-tipi-camera"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:42,vars:10,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","immagine"],["class","img-cell",4,"matHeaderCellDef"],["class","img-cell",4,"matCellDef"],["matColumnDef","oid"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","descrizione"],["matColumnDef","paxMin"],["matColumnDef","paxMax"],["matColumnDef","tipoRisorsa"],["matColumnDef","isDisponibile"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"tipoCamera","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"img-cell"],["class","m-2",3,"src",4,"ngIf"],[1,"m-2",3,"src"],["color","primary",3,"checked","disabled"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,rwe,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,cwe,1,0,"mat-header-cell",6),e.YNc(7,swe,4,0,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,pwe,3,3,"mat-header-cell",9),e.YNc(10,mwe,2,1,"mat-cell",10),e.BQk(),e.ynx(11,11),e.YNc(12,_we,3,3,"mat-header-cell",6),e.YNc(13,uwe,2,1,"mat-cell",12),e.BQk(),e.ynx(14,13),e.YNc(15,gwe,3,3,"mat-header-cell",6),e.YNc(16,hwe,2,1,"mat-cell",12),e.BQk(),e.ynx(17,14),e.YNc(18,fwe,3,3,"mat-header-cell",6),e.YNc(19,Cwe,2,1,"mat-cell",12),e.BQk(),e.ynx(20,15),e.YNc(21,bwe,3,3,"mat-header-cell",6),e.YNc(22,vwe,2,1,"mat-cell",12),e.BQk(),e.ynx(23,16),e.YNc(24,Twe,3,3,"mat-header-cell",6),e.YNc(25,xwe,2,1,"mat-cell",12),e.BQk(),e.ynx(26,17),e.YNc(27,Zwe,3,3,"mat-header-cell",6),e.YNc(28,Awe,2,1,"mat-cell",12),e.BQk(),e.ynx(29,18),e.YNc(30,wwe,3,3,"mat-header-cell",6),e.YNc(31,zwe,2,2,"mat-cell",12),e.BQk(),e.ynx(32,19),e.YNc(33,Mwe,1,0,"mat-header-cell",20),e.YNc(34,qwe,4,0,"mat-cell",21),e.BQk(),e.YNc(35,Pwe,1,0,"mat-header-row",22),e.YNc(36,kwe,1,1,"mat-row",23),e.qZA()(),e.TgZ(37,"div",24)(38,"mat-paginator",25),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(39,"div",26)(40,"app-tipi-camera-edit",27,28),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("tipoCamera",t.tipoCamera))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,Wr,z.X$],styles:["img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.img-cell[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]});class tc extends f.H{constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.backEvent=new e.vpe}save(){this.tipoCliente.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setTipoCliente(this.tipoCliente).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.tipiCliente.tipoClienteSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.showDialogConfirm("sbm.tabelle.tipiCliente.eliminareTipoCliente").then(t=>{null!=o&&(this.tipoCliente=o),this.tipoCliente.isDeleted=!0,this.setIsLoading(!0),this.apiService.setTipoCliente(this.tipoCliente).subscribe(()=>{this.backEvent.emit()})},t=>{})}}function ywe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.TgZ(2,"i",4),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"div",21)(5,"h4"),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"sbm.tabelle.tipiCliente.nessunTipoCliente")))}function Jwe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Ewe(i,o){1&i&&(e.TgZ(0,"mat-cell",22)(1,"button",23)(2,"i",24),e._uU(3,"edit"),e.qZA()()())}function Nwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.tipoCliente.proprieta.nome"),""))}function Owe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function Lwe(i,o){1&i&&e._UZ(0,"mat-header-cell")}function Dwe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",25)(1,"button",26),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(23);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",27),e._uU(3,"delete"),e.qZA()()()}}function Iwe(i,o){1&i&&e._UZ(0,"mat-header-row",28)}function Qwe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",29),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}tc.\u0275fac=function(o){return new(o||tc)(e.Y36(A.s),e.Y36(j.m))},tc.\u0275cmp=e.Xpm({type:tc,selectors:[["app-tipi-cliente-edit"]],inputs:{tipoCliente:"tipoCliente"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:11,vars:11,consts:[[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-form-field",0)(1,"input",1),e.NdJ("ngModelChange",function(a){return t.tipoCliente.nome=a}),e.ALo(2,"translate"),e.qZA()(),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return t.save()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,Swe,3,3,"button",4),e.TgZ(8,"button",5),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(9),e.ALo(10,"translate"),e.qZA()()),2&o&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,5,"bo.tipoCliente.proprieta.nome")),e.Q6J("ngModel",t.tipoCliente.nome),e.xp6(4),e.Oqu(e.lcZ(6,7,"globals.salva")),e.xp6(2),e.Q6J("ngIf",null!=t.tipoCliente&&t.tipoCliente.oid>0),e.xp6(2),e.Oqu(e.lcZ(10,9,"globals.annulla")))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,_.Fj,_.JJ,_.On,z.X$]});class ic extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.tipoCliente=new v.ZOY,this.showTable=!0,this.displayedColumns=["edit","nome","delete"]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.tipiCliente.title")}ngOnDestroy(){this.headerService.clearTitle()}ngAfterViewInit(){this.setIsLoading(!0),this.apiService.getTipiCliente().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}add(){this.tipoCliente=new v.ZOY(-1),this.showTable=!1,this.containerService.scrollToTop()}edit(o){this.tipoCliente=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}}function Uwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXTrattamento.proprieta.etaMinima")))}function Ywe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.etaMinima)}}function Rwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXTrattamento.proprieta.etaMassima")))}function Fwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.etaMassima)}}function Hwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXTrattamento.proprieta.tipoEsenzione")))}function Kwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.tipoEsenzione)}}function Gwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXTrattamento.proprieta.valore")))}function $we(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.valore)}}function Bwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXTrattamento.proprieta.ubicazioneIstat")))}function Vwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.ubicazioneIstat?t.ubicazioneIstat.nome:"")}}function Xwe(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXTrattamento.proprieta.trattamento")))}function jwe(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.trattamento?t.trattamento.nome:"")}}function Wwe(i,o){1&i&&e._UZ(0,"mat-header-row",18)}function e4e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",19),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function t4e(i,o){if(1&i&&(e.TgZ(0,"mat-tab",5),e.ALo(1,"translate"),e.TgZ(2,"div",6)(3,"mat-table",7),e.ynx(4,8),e.YNc(5,Uwe,3,3,"mat-header-cell",9),e.YNc(6,Ywe,2,1,"mat-cell",10),e.BQk(),e.ynx(7,11),e.YNc(8,Rwe,3,3,"mat-header-cell",9),e.YNc(9,Fwe,2,1,"mat-cell",10),e.BQk(),e.ynx(10,12),e.YNc(11,Hwe,3,3,"mat-header-cell",9),e.YNc(12,Kwe,2,1,"mat-cell",10),e.BQk(),e.ynx(13,13),e.YNc(14,Gwe,3,3,"mat-header-cell",9),e.YNc(15,$we,2,1,"mat-cell",10),e.BQk(),e.ynx(16,14),e.YNc(17,Bwe,3,3,"mat-header-cell",9),e.YNc(18,Vwe,2,1,"mat-cell",10),e.BQk(),e.ynx(19,15),e.YNc(20,Xwe,3,3,"mat-header-cell",9),e.YNc(21,jwe,2,1,"mat-cell",10),e.BQk(),e.YNc(22,Wwe,1,0,"mat-header-row",16),e.YNc(23,e4e,1,1,"mat-row",17),e.qZA()()()),2&i){const t=e.oxw(3);e.Q6J("label",e.lcZ(1,5,"sbm.tabelle.trattamenti.variazioniTassaXTrattamento")),e.xp6(3),e.Q6J("dataSource",t.variazioniXTrattamento),e.xp6(19),e.Q6J("matHeaderRowDef",t.columnsVariazioniXTrattamento)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.columnsVariazioniXTrattamento)}}function i4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXUbicazioneIstat.proprieta.dal")))}function o4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dal,"dd/MM/yyyy"))}}function n4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXUbicazioneIstat.proprieta.al")))}function a4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.al,"dd/MM/yyyy"))}}function l4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXUbicazioneIstat.proprieta.valore")))}function r4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.valore)}}function c4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXUbicazioneIstat.proprieta.ubicazioneIstat")))}function s4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.ubicazioneIstat?t.ubicazioneIstat.nome:"")}}function p4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.variazioneTassaSoggiornoXUbicazioneIstat.proprieta.trattamento")))}function d4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(null!=t.trattamento?t.trattamento.nome:"")}}function m4e(i,o){1&i&&e._UZ(0,"mat-header-row",18)}function _4e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",19),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function u4e(i,o){if(1&i&&(e.TgZ(0,"mat-tab",5),e.ALo(1,"translate"),e.TgZ(2,"div",6)(3,"mat-table",7),e.ynx(4,20),e.YNc(5,i4e,3,3,"mat-header-cell",9),e.YNc(6,o4e,3,4,"mat-cell",10),e.BQk(),e.ynx(7,21),e.YNc(8,n4e,3,3,"mat-header-cell",9),e.YNc(9,a4e,3,4,"mat-cell",10),e.BQk(),e.ynx(10,13),e.YNc(11,l4e,3,3,"mat-header-cell",9),e.YNc(12,r4e,2,1,"mat-cell",10),e.BQk(),e.ynx(13,14),e.YNc(14,c4e,3,3,"mat-header-cell",9),e.YNc(15,s4e,2,1,"mat-cell",10),e.BQk(),e.ynx(16,15),e.YNc(17,p4e,3,3,"mat-header-cell",9),e.YNc(18,d4e,2,1,"mat-cell",10),e.BQk(),e.YNc(19,m4e,1,0,"mat-header-row",16),e.YNc(20,_4e,1,1,"mat-row",17),e.qZA()()()),2&i){const t=e.oxw(3);e.Q6J("label",e.lcZ(1,5,"sbm.tabelle.trattamenti.variazioniTassaXUbicazioneIstat")),e.xp6(3),e.Q6J("dataSource",t.variazioniXUbicazioneIstat),e.xp6(16),e.Q6J("matHeaderRowDef",t.columnsVariazioniXUbicazioneIstat)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.columnsVariazioniXUbicazioneIstat)}}function g4e(i,o){if(1&i&&(e.TgZ(0,"mat-tab-group"),e.YNc(1,t4e,24,7,"mat-tab",4),e.YNc(2,u4e,21,7,"mat-tab",4),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.variazioniXTrattamento.length>0),e.xp6(1),e.Q6J("ngIf",t.variazioniXUbicazioneIstat.length>0)}}function h4e(i,o){1&i&&(e.TgZ(0,"h5",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sbm.tabelle.trattamenti.nessunaVariazione")," "))}function f4e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,g4e,3,2,"mat-tab-group",2),e.YNc(2,h4e,3,3,"h5",3),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.variazioniXTrattamento.length>0||t.variazioniXUbicazioneIstat.length>0),e.xp6(1),e.Q6J("ngIf",0==t.variazioniXTrattamento.length&&0==t.variazioniXUbicazioneIstat.length)}}ic.\u0275fac=function(o){return new(o||ic)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},ic.\u0275cmp=e.Xpm({type:ic,selectors:[["app-tipi-cliente"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:24,vars:10,consts:[[1,"p-3"],[4,"ngIf"],[3,"hidden"],["mat-mini-fab","","color","primary",1,"mat-table-add",3,"click"],[1,"material-icons"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"tipoCliente","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,ywe,8,3,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return t.add()}),e.TgZ(4,"i",4),e._uU(5,"add"),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-table",6),e.ynx(8,7),e.YNc(9,Jwe,1,0,"mat-header-cell",8),e.YNc(10,Ewe,4,0,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,Nwe,3,3,"mat-header-cell",8),e.YNc(13,Owe,2,1,"mat-cell",11),e.BQk(),e.ynx(14,12),e.YNc(15,Lwe,1,0,"mat-header-cell",8),e.YNc(16,Dwe,4,0,"mat-cell",13),e.BQk(),e.YNc(17,Iwe,1,0,"mat-header-row",14),e.YNc(18,Qwe,1,1,"mat-row",15),e.qZA()(),e.TgZ(19,"div",16)(20,"mat-paginator",17),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(21,"div",18)(22,"app-tipi-cliente-edit",19,20),e.NdJ("backEvent",function(){return t.showTable=!0,t.ngAfterViewInit(),t.containerService.scrollToTop()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("tipoCliente",t.tipoCliente))},dependencies:[m.O5,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,tc,z.X$]});class oc extends f.H{constructor(o){super(),this.apiService=o,this.columnsVariazioniXTrattamento=["etaMinima","etaMassima","tipoEsenzione","valore","ubicazioneIstat","trattamento"],this.columnsVariazioniXUbicazioneIstat=["dal","al","valore","ubicazioneIstat","trattamento"]}ngOnInit(){this.setIsLoading(!0),this.apiService.getVariazioniTassa(this.oidTrattamento).subscribe(o=>{this.variazioniXTrattamento=o.data.variazioniXTrattamento,this.variazioniXUbicazioneIstat=o.data.variazioniXUbicazioneIstat,this.setIsLoading(!1)})}}function C4e(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"translate"),e.ALo(10,"translate"),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"bo.trattamento.proprieta.giorniSoggiorno")+": "+t.modelEdit.trattamento.giorniSoggiorno," "),e.xp6(3),e.hij(" ",e.lcZ(6,5,"bo.trattamento.proprieta.totalePax")+": "+t.modelEdit.trattamento.totalePax," "),e.xp6(3),e.hij(" ",e.lcZ(9,7,"bo.trattamento.proprieta.calcoloPrezzoPacchetto")+": "+e.lcZ(10,9,t.getEnumKeyTranslation(t.enumCalcoloPrezzoPacchetto,t.modelEdit.trattamento.calcoloPrezzoPacchetto,"calcoloPrezzoPacchetto"))," ")}}function b4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.modalitaCalcoloPrezzo"),""))}function v4e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",36),e.NdJ("click",function(a){e.CHM(t);const l=e.oxw(3);return a.preventDefault(),e.KtG(l.openVariazioniTassa())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"enumerations.modalitaCalcoloPrezzo.tassa")))}function T4e(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,n.getEnumKeyTranslation(n.enumModalitaCalcoloPrezzo,t.modalitaCalcoloPrezzo,"modalitaCalcoloPrezzo")))}}function x4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e.YNc(1,v4e,3,3,"a",34),e.YNc(2,T4e,3,3,"div",35),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.modalitaCalcoloPrezzo==n.enumModalitaCalcoloPrezzo.Tassa),e.xp6(1),e.Q6J("ngIf",t.modalitaCalcoloPrezzo!=n.enumModalitaCalcoloPrezzo.Tassa)}}function Z4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.articolo"),""))}function A4e(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",38),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",38),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"bo.dettaglioTrattamento.proprieta.numeroGiorniMassimiTassaSoggiorno")+": "+t.numeroGiorniMassimiTassaSoggiorno),e.xp6(3),e.Oqu(e.lcZ(6,4,"bo.dettaglioTrattamento.proprieta.importoMassimoTassaSoggiorno")+": "+t.importoMassimoTassaSoggiorno)}}function w4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell",37)(1,"div",2),e._uU(2),e.qZA(),e.YNc(3,A4e,7,6,"ng-container",35),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(null!=t.articolo?t.articolo.nome:""),e.xp6(1),e.Q6J("ngIf",t.modalitaCalcoloPrezzo==n.enumModalitaCalcoloPrezzo.Tassa)}}function z4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.listino"),""))}function M4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.listino?t.listino.nome:""," ")}}function q4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.importo"),""))}function P4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"eurCurrency"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.importo))}}function k4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.tipoCamera"),""))}function S4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.tipoCamera?t.tipoCamera.nome:""," ")}}function y4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.riduzione"),""))}function J4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null!=t.riduzione?t.riduzione.nome:""," ")}}function E4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.tipoDisponibilitaArticolo"),""))}function N4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoDisponibilitaArticolo,t.tipoDisponibilitaArticolo,"tipoDisponibilitaArticolo"))," ")}}function O4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.tipoProduzioneXComponenteXPrenotazione")," "))}function L4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,n.getEnumKeyTranslation(n.enumTipoProduzioneXComponenteXPrenotazione,t.tipoProduzioneXComponenteXPrenotazione,"tipoProduzioneXComponenteXPrenotazione"))," ")}}function D4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.durataMinimaSoggiorno"),""))}function I4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMinimaSoggiorno)}}function Q4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.dettaglioTrattamento.proprieta.durataMassimaSoggiorno"),""))}function U4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.durataMassimaSoggiorno)}}function Y4e(i,o){1&i&&e._UZ(0,"mat-header-row",39)}function R4e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",40),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}function F4e(i,o){if(1&i&&(e.TgZ(0,"div",15)(1,"h5",16),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",17)(5,"mat-table",18),e.ynx(6,19),e.YNc(7,b4e,3,3,"mat-header-cell",20),e.YNc(8,x4e,3,2,"mat-cell",21),e.BQk(),e.ynx(9,22),e.YNc(10,Z4e,3,3,"mat-header-cell",20),e.YNc(11,w4e,4,2,"mat-cell",23),e.BQk(),e.ynx(12,24),e.YNc(13,z4e,3,3,"mat-header-cell",20),e.YNc(14,M4e,2,1,"mat-cell",21),e.BQk(),e.ynx(15,25),e.YNc(16,q4e,3,3,"mat-header-cell",20),e.YNc(17,P4e,3,3,"mat-cell",21),e.BQk(),e.ynx(18,26),e.YNc(19,k4e,3,3,"mat-header-cell",20),e.YNc(20,S4e,2,1,"mat-cell",21),e.BQk(),e.ynx(21,27),e.YNc(22,y4e,3,3,"mat-header-cell",20),e.YNc(23,J4e,2,1,"mat-cell",21),e.BQk(),e.ynx(24,28),e.YNc(25,E4e,3,3,"mat-header-cell",20),e.YNc(26,N4e,3,3,"mat-cell",21),e.BQk(),e.ynx(27,29),e.YNc(28,O4e,3,3,"mat-header-cell",20),e.YNc(29,L4e,3,3,"mat-cell",21),e.BQk(),e.ynx(30,30),e.YNc(31,D4e,3,3,"mat-header-cell",20),e.YNc(32,I4e,2,1,"mat-cell",21),e.BQk(),e.ynx(33,31),e.YNc(34,Q4e,3,3,"mat-header-cell",20),e.YNc(35,U4e,2,1,"mat-cell",21),e.BQk(),e.YNc(36,Y4e,1,0,"mat-header-row",32),e.YNc(37,R4e,1,1,"mat-row",33),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"sbm.tabelle.trattamenti.dettagli")),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function H4e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",42)(1,"mat-form-field",43)(2,"input",44),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.trattamentiXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",45),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.trattamentiXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.articoloXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.trattamentiXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.articoloXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.trattamentiXLingua[a].descrizione)}}function K4e(i,o){if(1&i&&(e.ynx(0),e.YNc(1,H4e,7,10,"mat-tab",41),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function G4e(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}oc.\u0275fac=function(o){return new(o||oc)(e.Y36(A.s))},oc.\u0275cmp=e.Xpm({type:oc,selectors:[["app-variazioni-tassa-modal"]],inputs:{oidTrattamento:"oidTrattamento"},features:[e.qOj],decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[4,"ngIf"],["class","border rounded p-3",4,"ngIf"],[3,"label",4,"ngIf"],[3,"label"],[1,"mat-table-container-border-rounded","mt-3"],[1,"mat-table",3,"dataSource"],["matColumnDef","etaMinima"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","etaMassima"],["matColumnDef","tipoEsenzione"],["matColumnDef","valore"],["matColumnDef","ubicazioneIstat"],["matColumnDef","trattamento"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],["matColumnDef","dal"],["matColumnDef","al"],[1,"border","rounded","p-3"]],template:function(o,t){1&o&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e.YNc(3,f4e,3,2,"ng-container",2)),2&o&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("ngIf",null!=t.variazioniXTrattamento&&null!=t.variazioniXUbicazioneIstat))},dependencies:[m.O5,h.eB,ee.SK,ee.R7,F.aO,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,m.uU,z.X$]});class nc extends f.H{set trattamento(o){if(null!=o){this.modelEdit=new d.x3U,this.modelEdit.trattamento=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.xpt;n.lingua=t,this.modelEdit.trattamentiXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getArticoliXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.trattamentiXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.trattamentiXLingua[a].nome=n.nome,this.modelEdit.trattamentiXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}set dettagli(o){this.dataSource=new s.r4(o)}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.x3U,this.editing=!1,this.selectedIndex=0,this.enumTipoServizio=c.k8,this.enumCalcoloPrezzoPacchetto=c.Ak,this.backEvent=new e.vpe,this.displayedColumns=["modalitaCalcoloPrezzo","articolo","listino","importo","tipoCamera","riduzione","tipoDisponibilitaArticolo","tipoProduzioneXComponenteXPrenotazione","durataMinimaSoggiorno","durataMassimaSoggiorno"],this.enumModalitaCalcoloPrezzo=c.kS,this.enumTipoDisponibilitaArticolo=c.Bw,this.enumTipoProduzioneXComponenteXPrenotazione=c.$g}save(){for(let o of this.modelEdit.trattamentiXLingua)o.articolo=this.modelEdit.trattamento;this.modelEdit.trattamento.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setTrattamento(this.modelEdit).subscribe(()=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.trattamenti.trattamentoSalvato").then(()=>{this.backEvent.emit()})})}delete(o){this.setIsLoading(!0),this.apiService.checkTariffeTrattamento(null!=o?o.oid:this.modelEdit.trattamento.oid).subscribe(t=>{this.setIsLoading(!1),t.data?this.showError("sbm.tabelle.trattamenti.impossibileEliminareTrattamento"):this.showDialogConfirm("sbm.tabelle.trattamenti.eliminareTrattamento").then(n=>{null!=o&&(this.modelEdit.trattamento=o),this.modelEdit.trattamento.isDeleted=!0,this.setIsLoading(!0),this.apiService.setTrattamento(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},n=>{})})}openVariazioniTassa(){let o=new d.Zpt;o.width="80vw",o.minHeight="30vh",this.showModalDialog(oc,o).componentInstance.oidTrattamento=this.modelEdit.trattamento.oid}}function $4e(i,o){1&i&&(e.TgZ(0,"div",25)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.trattamenti.nessunTrattamento")))}function B4e(i,o){1&i&&e._UZ(0,"mat-header-cell")}function V4e(i,o){1&i&&(e.TgZ(0,"mat-cell",26)(1,"button",27)(2,"i",28),e._uU(3,"edit"),e.qZA()()())}function X4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.oid"),""))}function j4e(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.trattamento.oid)}}function W4e(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.trattamento.proprieta.nome"),""))}function eze(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.trattamento.nome)}}function tze(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.trattamento.proprieta.descrizione"),""))}function ize(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.trattamento.descrizione)}}function oze(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.trattamento.proprieta.tipoServizio"),""))}function nze(i,o){if(1&i&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"br"),e._uU(4),e.ALo(5,"translate"),e._UZ(6,"br"),e._uU(7),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,5,"bo.trattamento.proprieta.giorniSoggiorno")," ",t.trattamento.giorniSoggiorno,""),e.xp6(3),e.AsE(" ",e.lcZ(5,7,"bo.trattamento.proprieta.totalePax")," ",t.trattamento.totalePax,""),e.xp6(3),e.hij(" ",n.getEnumKeyTranslation(n.enumCalcoloPrezzoPacchetto,t.trattamento.calcoloPrezzoPacchetto)," ")}}function aze(i,o){if(1&i&&(e.TgZ(0,"mat-cell",29)(1,"div",30),e._uU(2),e.qZA(),e.YNc(3,nze,8,9,"div",31),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.hij(" ",n.getEnumKeyTranslation(n.enumTipoServizio,t.trattamento.tipoServizio)," "),e.xp6(1),e.Q6J("ngIf",2==t.trattamento.tipoServizio)}}function lze(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.trattamento.proprieta.tipoRisorsa"),""))}function rze(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",n.getEnumKeyTranslation(n.enumTipoRisorsa,t.trattamento.tipoRisorsa)," ")}}function cze(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.trattamento.proprieta.isDisponibile"),""))}function sze(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"mat-checkbox",33),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.trattamento.isDisponibile)("disabled",!0)}}function pze(i,o){1&i&&e._UZ(0,"mat-header-cell")}function dze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",34)(1,"button",35),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(35);return a.stopPropagation(),e.KtG(p.delete(r.trattamento))}),e.TgZ(2,"i",36),e._uU(3,"delete"),e.qZA()()()}}function mze(i,o){1&i&&e._UZ(0,"mat-header-row",37)}function _ze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",38),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.trattamento.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r.trattamento,r.dettagli):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.trattamento.oid?t.trattamento.oid:"")}}nc.\u0275fac=function(o){return new(o||nc)(e.Y36(A.s),e.Y36(j.m))},nc.\u0275cmp=e.Xpm({type:nc,selectors:[["app-trattamenti-edit"]],inputs:{trattamento:"trattamento",dettagli:"dettagli"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:28,vars:27,consts:[[1,"row"],[1,"col-4"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","disabled","",3,"placeholder","ngModel","ngModelChange"],[1,"col-8","div-help"],["color","primary",3,"ngModel","ngModelChange"],["class","mt-2 mb-4 font-italic small",4,"ngIf"],["class","mt-3 mb-3",4,"ngIf"],[3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[1,"mt-2","mb-4","font-italic","small"],[1,"mt-3","mb-3"],[1,"mb-3"],[1,"mat-table-container-border-rounded"],[1,"mat-table",3,"dataSource"],["matColumnDef","modalitaCalcoloPrezzo"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","articolo"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","listino"],["matColumnDef","importo"],["matColumnDef","tipoCamera"],["matColumnDef","riduzione"],["matColumnDef","tipoDisponibilitaArticolo"],["matColumnDef","tipoProduzioneXComponenteXPrenotazione"],["matColumnDef","durataMinimaSoggiorno"],["matColumnDef","durataMassimaSoggiorno"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],["href","#",3,"click",4,"ngIf"],[4,"ngIf"],["href","#",3,"click"],[1,"flex-wrap"],[1,"w-100","text-small"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.trattamento.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"div")(9,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.trattamento.isDisponibile=a}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div")(13,"mat-checkbox",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.trattamento.isCreaSupplementiExtraPreventivo=a}),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.YNc(16,C4e,11,11,"div",6),e.YNc(17,F4e,38,7,"div",7),e.TgZ(18,"mat-tab-group",8),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(19,K4e,2,1,"ng-container",9),e.qZA(),e.TgZ(20,"div",10)(21,"button",11),e.NdJ("click",function(){return t.save()}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.YNc(24,G4e,3,3,"button",12),e.TgZ(25,"button",13),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,14,"bo.trattamento.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.trattamento.nome),e.xp6(3),e.hij(" Ultima sincronizzazione Welcome: ",e.xi3(7,16,t.modelEdit.trattamento.dataModificaWelcome,"dd/MM/yyyy HH:mm")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.trattamento.isDisponibile),e.xp6(1),e.hij(" ",e.lcZ(11,19,"bo.trattamento.proprieta.isDisponibile")," "),e.xp6(3),e.Q6J("ngModel",t.modelEdit.trattamento.isCreaSupplementiExtraPreventivo),e.xp6(1),e.hij(" ",e.lcZ(15,21,"bo.trattamento.proprieta.isCreaSupplementiExtraPreventivo")," "),e.xp6(2),e.Q6J("ngIf",t.modelEdit.trattamento.tipoServizio==t.enumTipoServizio.Pacchetto),e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&t.dataSource.data.length>0),e.xp6(1),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.trattamentiXLingua),e.xp6(3),e.Oqu(e.lcZ(23,23,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(27,25,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_.Fj,_.JJ,_.On,Me.P,m.uU,ke.f,z.X$],styles:["mat-header-row[_ngcontent-%COMP%]{line-height:24px}.text-small[_ngcontent-%COMP%]{font-size:11px;font-style:italic}"]});class ac extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","oid","nome","descrizione","tipoServizio","tipoRisorsa","isDisponibile","delete"],this.enumTipoServizio=c.k8,this.enumCalcoloPrezzoPacchetto=c.Ak,this.enumTipoRisorsa=c.Yb}ngOnInit(){this.headerService.setTitle("sbm.tabelle.trattamenti.title")}ngOnDestroy(){this.headerService.clearTitle(),this.headerService.hideElenco()}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getTrattamenti().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}edit(o,t){this.trattamento=Object.assign({},o),this.dettagli=t,this.showTable=!1,this.containerService.scrollToTop(),this.headerService.showElenco(this.onBack.bind(this))}onBack(){this.showTable=!0,this.download(),this.containerService.scrollToTop(),this.headerService.hideElenco()}}function uze(i,o){1&i&&(e.TgZ(0,"div",15)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.ubicazioni-istat.nessunaUbicazioneIstat")))}function gze(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.ubicazioneIstat.proprieta.nome")))}function hze(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function fze(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.ubicazioneIstat.proprieta.citta")))}function Cze(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.citta)}}function bze(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.ubicazioneIstat.proprieta.postiLetto")))}function vze(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.postiLetto)}}function Tze(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"bo.ubicazioneIstat.proprieta.camereEffettive")))}function xze(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.camereEffettive)}}function Zze(i,o){1&i&&e._UZ(0,"mat-header-row",16)}function Aze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",17),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}ac.\u0275fac=function(o){return new(o||ac)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},ac.\u0275cmp=e.Xpm({type:ac,selectors:[["app-trattamenti"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:36,vars:11,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","oid"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","descrizione"],["matColumnDef","tipoServizio"],["class","flex-wrap",4,"matCellDef"],["matColumnDef","tipoRisorsa"],["matColumnDef","isDisponibile"],["matColumnDef","delete"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"trattamento","dettagli","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"flex-wrap"],[1,"w-100"],["class","font-italic small",4,"ngIf"],[1,"font-italic","small"],["color","primary",3,"checked","disabled"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,$4e,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,B4e,1,0,"mat-header-cell",6),e.YNc(7,V4e,4,0,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,X4e,3,3,"mat-header-cell",6),e.YNc(10,j4e,2,1,"mat-cell",9),e.BQk(),e.ynx(11,10),e.YNc(12,W4e,3,3,"mat-header-cell",6),e.YNc(13,eze,2,1,"mat-cell",9),e.BQk(),e.ynx(14,11),e.YNc(15,tze,3,3,"mat-header-cell",6),e.YNc(16,ize,2,1,"mat-cell",9),e.BQk(),e.ynx(17,12),e.YNc(18,oze,3,3,"mat-header-cell",6),e.YNc(19,aze,4,2,"mat-cell",13),e.BQk(),e.ynx(20,14),e.YNc(21,lze,3,3,"mat-header-cell",6),e.YNc(22,rze,2,1,"mat-cell",9),e.BQk(),e.ynx(23,15),e.YNc(24,cze,3,3,"mat-header-cell",6),e.YNc(25,sze,2,2,"mat-cell",9),e.BQk(),e.ynx(26,16),e.YNc(27,pze,1,0,"mat-header-cell",6),e.YNc(28,dze,4,0,"mat-cell",17),e.BQk(),e.YNc(29,mze,1,0,"mat-header-row",18),e.YNc(30,_ze,1,1,"mat-row",19),e.qZA()(),e.TgZ(31,"div",20)(32,"mat-paginator",21),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()(),e.TgZ(33,"div",22)(34,"app-trattamenti-edit",23,24),e.NdJ("backEvent",function(){return t.onBack()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",!t.showTable||null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("trattamento",t.trattamento)("dettagli",t.dettagli))},dependencies:[m.O5,V.FC,h.eB,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,nc,z.X$]});class lc extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.displayedColumns=["nome","citta","postiLetto","camereEffettive"]}ngOnInit(){this.headerService.setTitle("sbm.tabelle.ubicazioni-istat.title")}ngAfterViewInit(){this.download()}download(){this.setIsLoading(!0),this.apiService.getUbicazioniIstat().subscribe(o=>{this.dataSource=new s.r4(o.data),this.dataSource.paginator=this.paginator,this.setIsLoading(!1)})}ngOnDestroy(){this.headerService.clearTitle()}}function wze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab",16)(1,"mat-form-field",17)(2,"input",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.vociAddebitoXLingua[l].nome=a)}),e.ALo(3,"translate"),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"app-editor",19),e.NdJ("textChange",function(a){e.CHM(t);const l=e.oxw().index,r=e.oxw();return e.KtG(r.modelEdit.vociAddebitoXLingua[l].descrizione=a)}),e.qZA()()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,l=e.oxw();e.Q6J("label",n.lingua.nome),e.xp6(2),e.s9C("placeholder",e.lcZ(3,6,"bo.voceAddebitoXLingua.proprieta.nome")),e.Q6J("ngModel",l.modelEdit.vociAddebitoXLingua[a].nome),e.xp6(2),e.hij(" ",e.lcZ(5,8,"bo.voceAddebitoXLingua.proprieta.descrizione")," "),e.xp6(2),e.Q6J("id","descrizione"+a)("text",l.modelEdit.vociAddebitoXLingua[a].descrizione)}}function zze(i,o){if(1&i&&(e.ynx(0),e.YNc(1,wze,7,10,"mat-tab",15),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sessionService.isLinguaAttiva(t.lingua))}}function Mze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",20)(1,"div",1)(2,"app-image",21),e.NdJ("edit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editImage())})("delete",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteImage())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("title","globals.immagine")("url",t.modelEdit.voceAddebito.urlImmagine)}}function qze(i,o){1&i&&(e.TgZ(0,"div",22)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.vociAddebito.salvareVoceAddebito")))}function Pze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.delete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"globals.elimina")))}lc.\u0275fac=function(o){return new(o||lc)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},lc.\u0275cmp=e.Xpm({type:lc,selectors:[["app-ubicazioni-istat"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:21,vars:8,consts:[[1,"p-3"],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","nome"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","citta"],["matColumnDef","postiLetto"],["matColumnDef","camereEffettive"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,uze,4,3,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-table",4),e.ynx(5,5),e.YNc(6,gze,3,3,"mat-header-cell",6),e.YNc(7,hze,2,1,"mat-cell",7),e.BQk(),e.ynx(8,8),e.YNc(9,fze,3,3,"mat-header-cell",6),e.YNc(10,Cze,2,1,"mat-cell",7),e.BQk(),e.ynx(11,9),e.YNc(12,bze,3,3,"mat-header-cell",6),e.YNc(13,vze,2,1,"mat-cell",7),e.BQk(),e.ynx(14,10),e.YNc(15,Tze,3,3,"mat-header-cell",6),e.YNc(16,xze,2,1,"mat-cell",7),e.BQk(),e.YNc(17,Zze,1,0,"mat-header-row",11),e.YNc(18,Aze,1,1,"mat-row",12),e.qZA()(),e.TgZ(19,"div",13)(20,"mat-paginator",14),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize))},dependencies:[m.O5,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,z.X$]});class rc extends f.H{set voceAddebito(o){if(null!=o){this.modelEdit=new d.S1_,this.modelEdit.voceAddebito=o,this.selectedIndex=0;for(let t of this.lingue){let n=new v.URW;n.lingua=t,this.modelEdit.vociAddebitoXLingua.push(n)}null!=o.oid&&-1!=o.oid?(this.editing=!0,this.setIsLoading(!0),this.apiService.getVociAddebitoXLingua(o.oid).subscribe(t=>{if(null!=t.data&&t.data.length>0)for(let n of t.data)if(null!=n.lingua){let a=this.modelEdit.vociAddebitoXLingua.findIndex(l=>l.lingua.oid==n.lingua.oid);a>=0&&(this.modelEdit.vociAddebitoXLingua[a].voceAddebito=n.voceAddebito,this.modelEdit.vociAddebitoXLingua[a].nome=n.nome,this.modelEdit.vociAddebitoXLingua[a].descrizione=n.descrizione)}this.setIsLoading(!1)})):this.editing=!1}}constructor(o,t){super(),this.apiService=o,this.sessionService=t,this.modelEdit=new d.S1_,this.editing=!1,this.selectedIndex=0,this.backEvent=new e.vpe}save(){for(let o of this.modelEdit.vociAddebitoXLingua)o.voceAddebito=this.modelEdit.voceAddebito;this.modelEdit.voceAddebito.albergo=new v.Z$(this.sessionService.getOidAlbergo()),this.setIsLoading(!0),this.apiService.setVoceAddebito(this.modelEdit).subscribe(o=>{this.setIsLoading(!1),this.showInfo("sbm.tabelle.vociAddebito.voceAddebitoSalvata").then(()=>{this.editing?this.backEvent.emit():(this.modelEdit.voceAddebito=o.data.obj,this.modelEdit.vociAddebitoXLingua=o.data.details,this.editing=!0,setTimeout(()=>{this.selectedIndex=0},200))})})}delete(o){this.showDialogConfirm("sbm.tabelle.vociAddebito.eliminareVoceAddebito").then(t=>{null!=o&&(this.modelEdit.voceAddebito=o),this.modelEdit.voceAddebito.isDeleted=!0,this.setIsLoading(!0),this.apiService.setVoceAddebito(this.modelEdit).subscribe(()=>{this.backEvent.emit()})},t=>{})}editImage(){let o=new d.Zpt;o.width="50vw";let t=this.showModalDialog(Ve.t,o),n=t.componentInstance;n._url=this.modelEdit.voceAddebito.urlImmagine,n.title="globals.immagine",n.dialogRef=t,t.afterClosed().subscribe(a=>{if(null!=a){this.setIsLoading(!0);let l=new d.QNM;l.oid=this.modelEdit.voceAddebito.oid,l.base64=a,this.apiService.setImmagineVoceAddebito(l).subscribe(r=>{null!=r.data&&(this.modelEdit.voceAddebito.urlImmagine=r.data.url),this.setIsLoading(!1)})}})}deleteImage(){this.showDialogConfirm("globals.eliminareImmagine").then(o=>{this.setIsLoading(!0);let t=new d.QNM;t.oid=this.modelEdit.voceAddebito.oid,t.base64="",this.apiService.setImmagineVoceAddebito(t).subscribe(n=>{null!=n.data&&(this.modelEdit.voceAddebito.urlImmagine=n.data.url),this.setIsLoading(!1)})},o=>{})}}function kze(i,o){1&i&&(e.TgZ(0,"div",32)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tabelle.vociAddebito.nessunaVoceAddebito")))}function Sze(i,o){1&i&&e._UZ(0,"mat-header-cell")}function yze(i,o){1&i&&(e.TgZ(0,"mat-cell",33)(1,"button",34)(2,"i",35),e._uU(3,"edit"),e.qZA()()())}function Jze(i,o){1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"globals.immagine"),""))}function Eze(i,o){if(1&i&&e._UZ(0,"img",38),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagine,e.LSH)}}function Nze(i,o){if(1&i&&(e.TgZ(0,"mat-cell",36),e.YNc(1,Eze,1,1,"img",37),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.urlImmagine)}}function Oze(i,o){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.voceAddebito.proprieta.nome"),""))}function Lze(i,o){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.nome)}}function Dze(i,o){1&i&&(e.TgZ(0,"mat-header-cell",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bo.voceAddebito.proprieta.ordinamento"),""))}function Ize(i,o){if(1&i&&(e.TgZ(0,"mat-cell",39),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.ordinamento)}}function Qze(i,o){1&i&&e._UZ(0,"mat-header-cell",40)}function Uze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-cell",41)(1,"button",42),e.NdJ("click",function(a){const r=e.CHM(t).$implicit;e.oxw();const p=e.MAs(34);return a.stopPropagation(),e.KtG(p.delete(r))}),e.TgZ(2,"i",43),e._uU(3,"delete"),e.qZA()()()}}function Yze(i,o){1&i&&e._UZ(0,"mat-header-row",44)}function Rze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",45),e.NdJ("contextmenu",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.copyToClipboard(l.oid))})("click",function(a){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.utility.checkClick(a)?p.edit(r):null)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("matTooltip",n.isLocalhost&&null!=t.oid?t.oid:"")}}rc.\u0275fac=function(o){return new(o||rc)(e.Y36(A.s),e.Y36(j.m))},rc.\u0275cmp=e.Xpm({type:rc,selectors:[["app-voci-addebito-edit"]],inputs:{voceAddebito:"voceAddebito"},outputs:{backEvent:"backEvent"},features:[e.qOj],decls:33,vars:23,consts:[[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","disabled","",3,"placeholder","ngModel","ngModelChange"],[1,"col-6","div-help"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-3",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],["class","row mt-3",4,"ngIf"],["class","mt-3 p-3 border rounded",4,"ngIf"],[1,"mt-3"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","blank","class","mr-1",3,"click",4,"ngIf"],["mat-flat-button","","color","blank",3,"click"],[3,"label",4,"ngIf"],[3,"label"],[1,"mt-3","w-100"],["autocompleteOff","","matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"id","text","textChange"],[1,"row","mt-3"],[3,"title","url","edit","delete"],[1,"mt-3","p-3","border","rounded"],["mat-flat-button","","color","blank",1,"mr-1",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),e.NdJ("ngModelChange",function(a){return t.modelEdit.voceAddebito.nome=a}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",4),e._uU(6," Nome della voce addebito modificabile in Welcome "),e.qZA()(),e.TgZ(7,"div",0)(8,"div",1)(9,"mat-form-field",2)(10,"input",5),e.NdJ("ngModelChange",function(a){return t.modelEdit.voceAddebito.ordinamento=a}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",4),e._uU(13," Ordinamento della voce di addebito "),e.qZA()(),e.TgZ(14,"div",0)(15,"div",1)(16,"mat-checkbox",6),e.NdJ("ngModelChange",function(a){return t.modelEdit.voceAddebito.isVisualizzaEspanso=a}),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",4),e._uU(20," Attivando il raggruppamento nella scelta degli articoli sar\xe0 espanso di default "),e.qZA()(),e.TgZ(21,"mat-tab-group",7),e.NdJ("selectedIndexChange",function(a){return t.selectedIndex=a}),e.YNc(22,zze,2,1,"ng-container",8),e.qZA(),e.YNc(23,Mze,3,2,"div",9),e.YNc(24,qze,4,3,"div",10),e.TgZ(25,"div",11)(26,"button",12),e.NdJ("click",function(){return t.save()}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.YNc(29,Pze,3,3,"button",13),e.TgZ(30,"button",14),e.NdJ("click",function(){return t.backEvent.emit()}),e._uU(31),e.ALo(32,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,13,"bo.voceAddebito.proprieta.nome")),e.Q6J("ngModel",t.modelEdit.voceAddebito.nome),e.xp6(7),e.s9C("placeholder",e.lcZ(11,15,"bo.voceAddebito.proprieta.ordinamento")),e.Q6J("ngModel",t.modelEdit.voceAddebito.ordinamento),e.xp6(6),e.Q6J("ngModel",t.modelEdit.voceAddebito.isVisualizzaEspanso),e.xp6(1),e.hij(" ",e.lcZ(18,17,"bo.voceAddebito.proprieta.isVisualizzaEspanso")," "),e.xp6(4),e.Q6J("selectedIndex",t.selectedIndex),e.xp6(1),e.Q6J("ngForOf",t.modelEdit.vociAddebitoXLingua),e.xp6(1),e.Q6J("ngIf",t.modelEdit.voceAddebito.oid>0),e.xp6(1),e.Q6J("ngIf",null==t.modelEdit.voceAddebito.oid||t.modelEdit.voceAddebito.oid<=0),e.xp6(3),e.Oqu(e.lcZ(28,19,"globals.salva")),e.xp6(2),e.Q6J("ngIf",t.editing),e.xp6(2),e.Oqu(e.lcZ(32,21,"globals.annulla")))},dependencies:[m.sg,m.O5,w.X,V.FC,h.eB,M.v_,b.k0,ee.SK,ee.R7,_.Fj,_.wV,_.JJ,_.On,Me.P,Ge.c,z.X$]});class cc extends f.H{constructor(o,t,n,a){super(),this.apiService=o,this.headerService=t,this.containerService=n,this.utility=a,this.showTable=!0,this.displayedColumns=["edit","immagine","nome","ordinamento","delete"],this.rq=new d.k$g}ngOnInit(){this.headerService.setTitle("sbm.tabelle.vociAddebito.title"),this.rq.sorting=[new d.aQR("ordinamento")],this.filters=[],this.filters.push(new d.wn$("nome",c.Hp.Contains,"",c.NM.String))}ngAfterViewInit(){this.download()}download(o=!1){o||this.setIsLoading(!0),null!=this.searchRequest&&this.searchRequest.unsubscribe(),this.rq.filters=this.utility.getFilters(this.filters),this.searchRequest=this.apiService.getVociAddebitoFilter(this.rq).subscribe(t=>{this.dataSource=new s.r4(t.data),this.dataSource.paginator=this.paginator,o||this.setIsLoading(!1)})}edit(o){this.voceAddebito=Object.assign({},o),this.showTable=!1,this.containerService.scrollToTop()}onSearch(o,t){this.filters[o].value=t,this.download(!0),this.paginator.firstPage()}ngOnDestroy(){this.headerService.clearTitle()}}function Fze(i,o){1&i&&(e.TgZ(0,"div",8)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"sbm.tutorial-list.nessunTutorial")))}function Hze(i,o){if(1&i&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.nome," ")}}function Kze(i,o){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.descrizione," ")}}function Gze(i,o){if(1&i&&e._UZ(0,"img",19),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.urlImmagine,e.LSH)}}function $ze(i,o){1&i&&(e.TgZ(0,"button",20)(1,"span",21),e._uU(2,"play_arrow"),e.qZA()())}cc.\u0275fac=function(o){return new(o||cc)(e.Y36(A.s),e.Y36(ie.r),e.Y36(te.J),e.Y36(C.t))},cc.\u0275cmp=e.Xpm({type:cc,selectors:[["app-voci-addebito"]],viewQuery:function(o,t){if(1&o&&e.Gf(D.cl,5),2&o){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},features:[e.qOj],decls:35,vars:15,consts:[[1,"p-3"],[3,"hidden"],[1,"filter"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","value","input"],["nomeSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","edit"],[4,"matHeaderCellDef"],["class","mat-td-edit",4,"matCellDef"],["matColumnDef","immagine"],["class","img-cell",4,"matHeaderCellDef"],["class","img-cell",4,"matCellDef"],["matColumnDef","nome"],[4,"matCellDef"],["matColumnDef","ordinamento"],["class","justify-content-center",4,"matHeaderCellDef"],["class","justify-content-center",4,"matCellDef"],["matColumnDef","delete"],["class","mat-th-delete",4,"matHeaderCellDef"],["class","mat-td-delete",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click",4,"matRowDef","matRowDefColumns"],[1,"paginator-container"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize","page"],[1,"edit-container",3,"hidden"],[3,"voceAddebito","backEvent"],["editComponent",""],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],[1,"mat-td-edit"],["mat-icon-button","","color","primary"],[1,"material-icons","mat-table-edit-row"],[1,"img-cell"],["class","m-2",3,"src",4,"ngIf"],[1,"m-2",3,"src"],[1,"justify-content-center"],[1,"mat-th-delete"],[1,"mat-td-delete"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu","click"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"input",6,7),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(7);return e.KtG(t.onSearch(0,l.value))}),e.ALo(8,"translate"),e.qZA()()()()(),e.YNc(9,kze,4,3,"div",8),e.TgZ(10,"div",1)(11,"div",9)(12,"mat-table",10),e.ynx(13,11),e.YNc(14,Sze,1,0,"mat-header-cell",12),e.YNc(15,yze,4,0,"mat-cell",13),e.BQk(),e.ynx(16,14),e.YNc(17,Jze,3,3,"mat-header-cell",15),e.YNc(18,Nze,2,1,"mat-cell",16),e.BQk(),e.ynx(19,17),e.YNc(20,Oze,3,3,"mat-header-cell",12),e.YNc(21,Lze,2,1,"mat-cell",18),e.BQk(),e.ynx(22,19),e.YNc(23,Dze,3,3,"mat-header-cell",20),e.YNc(24,Ize,2,1,"mat-cell",21),e.BQk(),e.ynx(25,22),e.YNc(26,Qze,1,0,"mat-header-cell",23),e.YNc(27,Uze,4,0,"mat-cell",24),e.BQk(),e.YNc(28,Yze,1,0,"mat-header-row",25),e.YNc(29,Rze,1,1,"mat-row",26),e.qZA()(),e.TgZ(30,"div",27)(31,"mat-paginator",28),e.NdJ("page",function(){return t.containerService.scrollToTop()}),e.qZA()()()(),e.TgZ(32,"div",29)(33,"app-voci-addebito-edit",30,31),e.NdJ("backEvent",function(){return t.showTable=!0,t.download(),t.containerService.scrollToTop()}),e.qZA()()()}2&o&&(e.xp6(1),e.Q6J("hidden",!t.showTable),e.xp6(5),e.s9C("placeholder",e.lcZ(8,13,"bo.voceAddebito.proprieta.nome")),e.Q6J("value",t.filters[0].value),e.xp6(3),e.Q6J("ngIf",t.showTable&&null!=t.dataSource&&null!=t.dataSource.data&&0==t.dataSource.data.length),e.xp6(1),e.Q6J("hidden",null==t.dataSource||null==t.dataSource.data||0==t.dataSource.data.length),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),e.xp6(1),e.Q6J("hidden",t.showTable),e.xp6(1),e.Q6J("voceAddebito",t.voceAddebito))},dependencies:[m.O5,w.X,h.eB,M.v_,b.k0,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,D.cl,rc,z.X$],styles:["img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.img-cell[_ngcontent-%COMP%]{justify-content:center;align-items:center}.mat-column-immagine[_ngcontent-%COMP%]{width:20%!important;max-width:20%!important;min-width:20%!important}"]});const Bze=function(i){return{"cursor-pointer":i}};function Vze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.openTutorial(l.url))}),e.TgZ(1,"div",11),e.YNc(2,Hze,2,1,"div",12),e.YNc(3,Kze,2,1,"div",13),e.qZA(),e.TgZ(4,"div",14),e.YNc(5,Gze,1,1,"img",15),e.YNc(6,$ze,3,0,"button",16),e.qZA()()}if(2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(5,Bze,!!t.url)),e.xp6(2),e.Q6J("ngIf",!!t.nome),e.xp6(1),e.Q6J("ngIf",!!t.descrizione),e.xp6(2),e.Q6J("ngIf",!!t.urlImmagine),e.xp6(1),e.Q6J("ngIf",!!t.url)}}function Xze(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Vze,7,7,"div",9),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tutorialList)}}class sc extends f.H{get tutorialList(){return this.tutorials||this.navigationService.tutorials}constructor(o,t,n,a){super(),this.navigationService=o,this.containerService=t,this.headerService=n,this.utility=a}ngOnInit(){this.headerService.setTitle("sbm.tutorial-list.title"),this.containerService.scrollToTop()}openTutorial(o){if(o){let t=new d.Zpt;t.width="80vw",t.height="80vh",t.panelClass="no-padding-overflow-dialog",this.showModalDialog(Ni,t).componentInstance.url=o}}onFilter(o){this.tutorials=o?this.navigationService.tutorials.filter(t=>!!t.tags&&t.tags.includes(o)):this.navigationService.tutorials}ngOnDestroy(){this.headerService.clearTitle()}}sc.\u0275fac=function(o){return new(o||sc)(e.Y36(Ae.f),e.Y36(te.J),e.Y36(ie.r),e.Y36(C.t))},sc.\u0275cmp=e.Xpm({type:sc,selectors:[["app-tutorial-list"]],features:[e.qOj],decls:9,vars:5,consts:[[1,"p-3"],[1,"row"],[1,"col-6"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","input"],["tagSearch",""],["class","border rounded-lg mat-elevation-z1 p-4 bg-white",4,"ngIf"],[4,"ngIf"],[1,"border","rounded-lg","mat-elevation-z1","p-4","bg-white"],["class","tutorial-container border-top border-right border-left mat-elevation-z1 bg-white overflow-hidden d-flex mb-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tutorial-container","border-top","border-right","border-left","mat-elevation-z1","bg-white","overflow-hidden","d-flex","mb-2",3,"ngClass","click"],[1,"tutorial-descrizione-container","d-flex","flex-column","p-3"],["class","tutorial-nome",4,"ngIf"],["class","tutorial-descrizioneoverflow-auto thin-scrollbar",4,"ngIf"],[1,"tutorial-image","position-relative"],[3,"src",4,"ngIf"],["mat-icon-button","","class","play-button",4,"ngIf"],[1,"tutorial-nome"],[1,"tutorial-descrizioneoverflow-auto","thin-scrollbar"],[3,"src"],["mat-icon-button","",1,"play-button"],[1,"material-icons"]],template:function(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"input",4,5),e.NdJ("input",function(){e.CHM(n);const l=e.MAs(5);return e.KtG(t.onFilter(l.value))}),e.ALo(6,"translate"),e.qZA()()()(),e.YNc(7,Fze,4,3,"div",6),e.YNc(8,Xze,2,1,"ng-container",7),e.qZA()}2&o&&(e.xp6(4),e.Q6J("placeholder",e.lcZ(6,3,"sbm.tutorial-list.tag")),e.xp6(3),e.Q6J("ngIf",null==t.tutorialList||0==t.tutorialList.length),e.xp6(1),e.Q6J("ngIf",null!=t.tutorialList&&t.tutorialList.length>0))},dependencies:[m.mk,m.sg,m.O5,w.X,h.eB,M.v_,b.k0,z.X$],styles:[".tutorial-container[_ngcontent-%COMP%]{border-radius:5px;height:150px}.tutorial-container[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f}.tutorial-image[_ngcontent-%COMP%]{width:200px}img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}.tutorial-descrizione-container[_ngcontent-%COMP%]{flex:1}.play-button[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 15px);left:calc(50% - 15px);width:30px;height:30px;line-height:30px}.play-button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:30px;line-height:30px}.tutorial-nome[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.tutorial-descrizione[_ngcontent-%COMP%]{font-size:15px;color:#666}"]});const jze=[{path:"",component:_r},{path:"home",component:bl,canActivate:[Qc.p],canActivateChild:[Qc.y],children:[{path:"dashboard",component:kl,outlet:"homeOutlet"},{path:"dashboard-admin",component:ja,outlet:"homeOutlet"},{path:"myforecast",component:$l,outlet:"homeOutlet"},{path:"alberghi-partner",component:lo,outlet:"homeOutlet"},{path:"errori-portali",component:It,outlet:"homeOutlet"},{path:"alberghi",component:ii,outlet:"homeOutlet"},{path:"configurazione-dms-admin",component:ri,outlet:"homeOutlet"},{path:"portali-admin",component:Eo,outlet:"homeOutlet"},{path:"messaggi-admin",component:ko,outlet:"homeOutlet"},{path:"templates-admin",component:Vo,outlet:"homeOutlet"},{path:"tags-templates",component:Ro,outlet:"homeOutlet"},{path:"change-logs",component:go,outlet:"homeOutlet"},{path:"servizi-admin",component:Lo,outlet:"homeOutlet"},{path:"api-keys-admin",component:po,outlet:"homeOutlet"},{path:"attivita-automatiche-admin",component:_o,outlet:"homeOutlet"},{path:"tutorial",component:jo,outlet:"homeOutlet"},{path:"sondaggi-admin",component:Qo,outlet:"homeOutlet"},{path:"storico-admin",component:Uo,outlet:"homeOutlet"},{path:"prenotazioni-ricevute",component:xl,outlet:"homeOutlet"},{path:"prenotazioni",component:Ul,outlet:"homeOutlet"},{path:"prenotazioni-extra",component:wt,outlet:"homeOutlet"},{path:"pickup",component:Xl,outlet:"homeOutlet"},{path:"ricerche",component:pr,outlet:"homeOutlet"},{path:"storico",component:Tr,outlet:"homeOutlet"},{path:"chiusure-giornaliere",component:en,outlet:"homeOutlet"},{path:"clienti",component:gn,outlet:"homeOutlet"},{path:"transazioni",component:Kl,outlet:"homeOutlet"},{path:"report",component:sr,outlet:"homeOutlet"},{path:"preventivi",component:Fl,outlet:"homeOutlet"},{path:"messaggi",component:Dl,outlet:"homeOutlet"},{path:"sondaggi",component:pi,outlet:"homeOutlet"},{path:"risposte-sondaggi",component:Ti,outlet:"homeOutlet"},{path:"pickup-preventivi",component:Vl,outlet:"homeOutlet"},{path:"richieste",component:vi,outlet:"homeOutlet"},{path:"tipi-camera",component:ec,outlet:"homeOutlet"},{path:"risorse",component:Hr,outlet:"homeOutlet"},{path:"tag-crm",component:jr,outlet:"homeOutlet"},{path:"templates",component:mi,outlet:"homeOutlet"},{path:"trattamenti",component:ac,outlet:"homeOutlet"},{path:"riduzioni",component:Rr,outlet:"homeOutlet"},{path:"combinazioni-riduzioni",component:Sr,outlet:"homeOutlet"},{path:"listini",component:Nr,outlet:"homeOutlet"},{path:"arrotondamenti",component:Zr,outlet:"homeOutlet"},{path:"supplementi",component:Vr,outlet:"homeOutlet"},{path:"articoli",component:Zi,outlet:"homeOutlet"},{path:"servizi-obbligatori",component:Gr,outlet:"homeOutlet"},{path:"cancellazioni",component:zr,outlet:"homeOutlet"},{path:"modalita-pagamento",component:Ur,outlet:"homeOutlet"},{path:"servizi",component:si,outlet:"homeOutlet"},{path:"voci-addebito",component:cc,outlet:"homeOutlet"},{path:"tipi-cliente",component:ic,outlet:"homeOutlet"},{path:"eventi",component:Jr,outlet:"homeOutlet"},{path:"causali-operazione",component:qr,outlet:"homeOutlet"},{path:"portali",component:qa,outlet:"homeOutlet"},{path:"log-operazioni",component:ei,outlet:"homeOutlet"},{path:"log-disponibilita",component:ti,outlet:"homeOutlet"},{path:"log-accessi",component:vl,outlet:"homeOutlet"},{path:"log-api-keys",component:Tl,outlet:"homeOutlet"},{path:"notifiche-email",component:gt,outlet:"homeOutlet"},{path:"configurazione-dms",component:hn,outlet:"homeOutlet"},{path:"configurazione-mypage",component:hr,outlet:"homeOutlet"},{path:"configurazione-myself",component:Cr,outlet:"homeOutlet"},{path:"configurazione-myself-mobile",component:fr,outlet:"homeOutlet"},{path:"configurazione-booking",component:ur,outlet:"homeOutlet"},{path:"configurazione-paymail",component:br,outlet:"homeOutlet"},{path:"configurazione-form-richiesta",component:gr,outlet:"homeOutlet"},{path:"configurazione-sondaggio",component:vr,outlet:"homeOutlet"},{path:"configurazione-impostazioni",component:Un,outlet:"homeOutlet"},{path:"agenzie",component:On,outlet:"homeOutlet"},{path:"utenti",component:Qa,outlet:"homeOutlet"},{path:"api-keys",component:ni,outlet:"homeOutlet"},{path:"attivita-automatiche",component:ai,outlet:"homeOutlet"},{path:"interessi",component:Rn,outlet:"homeOutlet"},{path:"parametri-ricerca",component:Hn,outlet:"homeOutlet"},{path:"account-mail",component:En,outlet:"homeOutlet"},{path:"web-hooks",component:Ya,outlet:"homeOutlet"},{path:"collegamento-sito",component:Qn,outlet:"homeOutlet"},{path:"workflows",component:Ka,outlet:"homeOutlet"},{path:"piani-tariffari",component:Gn,outlet:"homeOutlet"},{path:"codici-promozionali",component:Nt,outlet:"homeOutlet"},{path:"banner",component:In,outlet:"homeOutlet"},{path:"up-selling",component:La,outlet:"homeOutlet"},{path:"up-selling-richiesti",component:Na,outlet:"homeOutlet"},{path:"promozioni",component:ya,outlet:"homeOutlet"},{path:"planning",component:ml,outlet:"homeOutlet"},{path:"planning-tipo-camera",component:pl,outlet:"homeOutlet"},{path:"planning-master",component:sl,outlet:"homeOutlet"},{path:"calendario-fasce",component:ll,outlet:"homeOutlet"},{path:"elenco-disponibilita",component:Nl,outlet:"homeOutlet"},{path:"stato-pubblicazione-portali",component:ul,outlet:"homeOutlet"},{path:"rate-checker",component:_l,outlet:"homeOutlet"},{path:"sistemazioni",component:Ea,outlet:"homeOutlet"},{path:"calcola-retta",component:Et,outlet:"homeOutlet"},{path:"trentino",component:rr,outlet:"homeOutlet"},{path:"tutorial-list",component:sc,outlet:"homeOutlet"},{path:"clienti-profilati",component:Al,outlet:"homeOutlet"},{path:"motivi-viaggio",component:zl,outlet:"homeOutlet"},{path:"upgrade-gratuiti",component:Ml,outlet:"homeOutlet"},{path:"qualitelis",component:nr,outlet:"homeOutlet"},{path:"scrollidea",component:ar,outlet:"homeOutlet"},{path:"trustyou",component:cr,outlet:"homeOutlet"},{path:"philipsCMND",component:or,outlet:"homeOutlet"},{path:"hoau",component:Wl,outlet:"homeOutlet"},{path:"mailchimp",component:ir,outlet:"homeOutlet"},{path:"active-campaign",component:jl,outlet:"homeOutlet"},{path:"hub-spot",component:er,outlet:"homeOutlet"},{path:"test-mail",component:Wa,outlet:"homeOutlet"},{path:"test-welcome",component:el,outlet:"homeOutlet"},{path:"invia-sms",component:ct,outlet:"homeOutlet"},{path:"importa-prenotazioni",component:tr,outlet:"homeOutlet"},{path:"booking-rules",component:il,outlet:"homeOutlet"},{path:"copia-tariffe",component:rl,outlet:"homeOutlet"},{path:"mail",component:Zl,outlet:"homeOutlet"},{path:"nazioni",component:yo,outlet:"homeOutlet"},{path:"comuni",component:fo,outlet:"homeOutlet"},{path:"configurazione-pagine-myself",component:qn,outlet:"homeOutlet"},{path:"configurazione-piatti-myself",component:Pn,outlet:"homeOutlet"},{path:"configurazione-articoli-myself",component:vn,outlet:"homeOutlet"},{path:"configurazione-impostazioni-myself",component:Zn,outlet:"homeOutlet"},{path:"configurazione-menu-myself",component:wn,outlet:"homeOutlet"},{path:"calendario-menu",component:Cn,outlet:"homeOutlet"},{path:"ubicazioni-istat",component:lc,outlet:"homeOutlet"},{path:"configurazione-crs",component:$a,outlet:"homeOutlet"},{path:"prenotazioni-crs",component:Xa,outlet:"homeOutlet"},{path:"disponibilita-crs",component:Ba,outlet:"homeOutlet"},{path:"configurazione-categorie-piatti-myself",component:xn,outlet:"homeOutlet"},{path:"conteggio-piatti",component:kn,outlet:"homeOutlet"},{path:"room-service",component:yn,outlet:"homeOutlet"},{path:"prenotazioni-up-selling",component:Sn,outlet:"homeOutlet"},{path:"change-log",component:Wo,outlet:"homeOutlet"}]},{path:"myforecast_error",component:Gl},{path:"oauth2",component:Bl}];class Li{}Li.\u0275fac=function(o){return new(o||Li)},Li.\u0275mod=e.oAB({type:Li}),Li.\u0275inj=e.cJS({imports:[je.Bz.forChild(jze),je.Bz]});class Di{constructor(o,t){this.cssLoaderService=o,this.sessionService=t,this.cssLoaderService.unloadCssDms(),this.sessionService.isAttachRequestHeaders=!1}}Di.\u0275fac=function(o){return new(o||Di)(e.LFG(es.e),e.LFG(j.m))},Di.\u0275mod=e.oAB({type:Di}),Di.\u0275inj=e.cJS({imports:[m.ez,E.m,P.Q,O._G,J.C,Li]}),e.B6R(At,[m.mk,m.sg,m.O5,w.X,V.FC,h.eB,M.v_,M.$V,M.nX,b.k0,re.CK,y.nW,y.Q0,y.wx,y.zY,y.By,y._g,g.x8,Ue.Hw,q.Kd,s.ty,s.wO,s.S4,s.t3,s.R3,s.Al,s.L7,s.ML,s.fg,s.Zw,_e.YE,_e.nU,D.cl,_.JJ,_.On,ne.d,st,Lt],[m.uU,Te.A,ke.f,z.X$]),e.B6R(Ye,[h.eB,F.aO,fe],[]),e.B6R(Q,[h.eB,F.aO,Le],[])},83793:Oc=>{Oc.exports=function U(Y,m,O){function J(u,H){if(!m[u]){if(!Y[u]){if(P)return P(u,!0);var Q=new Error("Cannot find module '"+u+"'");throw Q.code="MODULE_NOT_FOUND",Q}var Z=m[u]={exports:{}};Y[u][0].call(Z.exports,function(f){return J(Y[u][1][f]||f)},Z,Z.exports,U,Y,m,O)}return m[u].exports}for(var P=void 0,E=0;E<O.length;E++)J(O[E]);return J}({1:[function(U,Y,m){"use strict";var O=U("./utils"),J=U("./support"),P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";m.encode=function(E){for(var u,H,e,Q,Z,f,C,N=[],k=0,h=E.length,q=h,K="string"!==O.getTypeOf(E);k<E.length;)q=h-k,e=K?(u=E[k++],H=k<h?E[k++]:0,k<h?E[k++]:0):(u=E.charCodeAt(k++),H=k<h?E.charCodeAt(k++):0,k<h?E.charCodeAt(k++):0),Q=u>>2,Z=(3&u)<<4|H>>4,f=1<q?(15&H)<<2|e>>6:64,C=2<q?63&e:64,N.push(P.charAt(Q)+P.charAt(Z)+P.charAt(f)+P.charAt(C));return N.join("")},m.decode=function(E){var u,H,e,Q,Z,f,C=0,N=0,k="data:";if(E.substr(0,k.length)===k)throw new Error("Invalid base64 input, it looks like a data url.");var h,q=3*(E=E.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(E.charAt(E.length-1)===P.charAt(64)&&q--,E.charAt(E.length-2)===P.charAt(64)&&q--,q%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=J.uint8array?new Uint8Array(0|q):new Array(0|q);C<E.length;)u=P.indexOf(E.charAt(C++))<<2|(Q=P.indexOf(E.charAt(C++)))>>4,H=(15&Q)<<4|(Z=P.indexOf(E.charAt(C++)))>>2,e=(3&Z)<<6|(f=P.indexOf(E.charAt(C++))),h[N++]=u,64!==Z&&(h[N++]=H),64!==f&&(h[N++]=e);return h}},{"./support":30,"./utils":32}],2:[function(U,Y,m){"use strict";var O=U("./external"),J=U("./stream/DataWorker"),P=U("./stream/Crc32Probe"),E=U("./stream/DataLengthProbe");function u(H,e,Q,Z,f){this.compressedSize=H,this.uncompressedSize=e,this.crc32=Q,this.compression=Z,this.compressedContent=f}u.prototype={getContentWorker:function(){var H=new J(O.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new E("data_length")),e=this;return H.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),H},getCompressedWorker:function(){return new J(O.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(H,e,Q){return H.pipe(new P).pipe(new E("uncompressedSize")).pipe(e.compressWorker(Q)).pipe(new E("compressedSize")).withStreamInfo("compression",e)},Y.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(U,Y,m){"use strict";var O=U("./stream/GenericWorker");m.STORE={magic:"\0\0",compressWorker:function(){return new O("STORE compression")},uncompressWorker:function(){return new O("STORE decompression")}},m.DEFLATE=U("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(U,Y,m){"use strict";var O=U("./utils"),J=function(){for(var P,E=[],u=0;u<256;u++){P=u;for(var H=0;H<8;H++)P=1&P?3988292384^P>>>1:P>>>1;E[u]=P}return E}();Y.exports=function(P,E){return void 0!==P&&P.length?"string"!==O.getTypeOf(P)?function(u,H,e,Q){var Z=J,f=Q+e;u^=-1;for(var C=Q;C<f;C++)u=u>>>8^Z[255&(u^H[C])];return-1^u}(0|E,P,P.length,0):function(u,H,e,Q){var Z=J,f=Q+e;u^=-1;for(var C=Q;C<f;C++)u=u>>>8^Z[255&(u^H.charCodeAt(C))];return-1^u}(0|E,P,P.length,0):0}},{"./utils":32}],5:[function(U,Y,m){"use strict";m.base64=!1,m.binary=!1,m.dir=!1,m.createFolders=!0,m.date=null,m.compression=null,m.compressionOptions=null,m.comment=null,m.unixPermissions=null,m.dosPermissions=null},{}],6:[function(U,Y,m){"use strict";var O=null;O=typeof Promise<"u"?Promise:U("lie"),Y.exports={Promise:O}},{lie:37}],7:[function(U,Y,m){"use strict";var O=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",J=U("pako"),P=U("./utils"),E=U("./stream/GenericWorker"),u=O?"uint8array":"array";function H(e,Q){E.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=Q,this.meta={}}m.magic="\b\0",P.inherits(H,E),H.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(P.transformTo(u,e.data),!1)},H.prototype.flush=function(){E.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},H.prototype.cleanUp=function(){E.prototype.cleanUp.call(this),this._pako=null},H.prototype._createPako=function(){this._pako=new J[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(Q){e.push({data:Q,meta:e.meta})}},m.compressWorker=function(e){return new H("Deflate",e)},m.uncompressWorker=function(){return new H("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(U,Y,m){"use strict";function O(Z,f){var C,N="";for(C=0;C<f;C++)N+=String.fromCharCode(255&Z),Z>>>=8;return N}function J(Z,f,C,N,k,h){var q,K,$=Z.file,se=Z.compression,ae=h!==u.utf8encode,ge=P.transformTo("string",h($.name)),oe=P.transformTo("string",u.utf8encode($.name)),ve=$.comment,ze=P.transformTo("string",h(ve)),I=P.transformTo("string",u.utf8encode(ve)),le=oe.length!==$.name.length,x=I.length!==ve.length,ce="",Se="",ue="",Ee=$.dir,Ce=$.date,Pe={crc32:0,compressedSize:0,uncompressedSize:0};f&&!C||(Pe.crc32=Z.crc32,Pe.compressedSize=Z.compressedSize,Pe.uncompressedSize=Z.uncompressedSize);var X=0;f&&(X|=8),ae||!le&&!x||(X|=2048);var F,ne,z,v=0,d=0;Ee&&(v|=16),"UNIX"===k?(d=798,v|=(F=$.unixPermissions,ne=Ee,z=F,F||(z=ne?16893:33204),(65535&z)<<16)):(d=20,v|=function(F){return 63&(F||0)}($.dosPermissions)),q=Ce.getUTCHours(),q<<=6,q|=Ce.getUTCMinutes(),q<<=5,q|=Ce.getUTCSeconds()/2,K=Ce.getUTCFullYear()-1980,K<<=4,K|=Ce.getUTCMonth()+1,K<<=5,K|=Ce.getUTCDate(),le&&(Se=O(1,1)+O(H(ge),4)+oe,ce+="up"+O(Se.length,2)+Se),x&&(ue=O(1,1)+O(H(ze),4)+I,ce+="uc"+O(ue.length,2)+ue);var A="";return A+="\n\0",A+=O(X,2),A+=se.magic,A+=O(q,2),A+=O(K,2),A+=O(Pe.crc32,4),A+=O(Pe.compressedSize,4),A+=O(Pe.uncompressedSize,4),A+=O(ge.length,2),A+=O(ce.length,2),{fileRecord:e.LOCAL_FILE_HEADER+A+ge+ce,dirRecord:e.CENTRAL_FILE_HEADER+O(d,2)+A+O(ze.length,2)+"\0\0\0\0"+O(v,4)+O(N,4)+ge+ce+ze}}var P=U("../utils"),E=U("../stream/GenericWorker"),u=U("../utf8"),H=U("../crc32"),e=U("../signature");function Q(Z,f,C,N){E.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=C,this.encodeFileName=N,this.streamFiles=Z,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}P.inherits(Q,E),Q.prototype.push=function(Z){var f=Z.meta.percent||0,C=this.entriesCount,N=this._sources.length;this.accumulate?this.contentBuffer.push(Z):(this.bytesWritten+=Z.data.length,E.prototype.push.call(this,{data:Z.data,meta:{currentFile:this.currentFile,percent:C?(f+100*(C-N-1))/C:100}}))},Q.prototype.openedSource=function(Z){this.currentSourceOffset=this.bytesWritten,this.currentFile=Z.file.name;var f=this.streamFiles&&!Z.file.dir;if(f){var C=J(Z,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:C.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Q.prototype.closedSource=function(Z){this.accumulate=!1;var N,f=this.streamFiles&&!Z.file.dir,C=J(Z,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(C.dirRecord),f)this.push({data:(N=Z,e.DATA_DESCRIPTOR+O(N.crc32,4)+O(N.compressedSize,4)+O(N.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:C.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Q.prototype.flush=function(){for(var Z=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var k,h,q,K,$,se,C=this.bytesWritten-Z,N=(k=this.dirRecords.length,h=C,q=Z,K=this.zipComment,$=this.encodeFileName,se=P.transformTo("string",$(K)),e.CENTRAL_DIRECTORY_END+"\0\0\0\0"+O(k,2)+O(k,2)+O(h,4)+O(q,4)+O(se.length,2)+se);this.push({data:N,meta:{percent:100}})},Q.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Q.prototype.registerPrevious=function(Z){this._sources.push(Z);var f=this;return Z.on("data",function(C){f.processChunk(C)}),Z.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),Z.on("error",function(C){f.error(C)}),this},Q.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Q.prototype.error=function(Z){var f=this._sources;if(!E.prototype.error.call(this,Z))return!1;for(var C=0;C<f.length;C++)try{f[C].error(Z)}catch(N){}return!0},Q.prototype.lock=function(){E.prototype.lock.call(this);for(var Z=this._sources,f=0;f<Z.length;f++)Z[f].lock()},Y.exports=Q},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(U,Y,m){"use strict";var O=U("../compressions"),J=U("./ZipFileWorker");m.generateWorker=function(P,E,u){var H=new J(E.streamFiles,u,E.platform,E.encodeFileName),e=0;try{P.forEach(function(Q,Z){e++;var f=function(h,q){var K=h||q,$=O[K];if(!$)throw new Error(K+" is not a valid compression method !");return $}(Z.options.compression,E.compression),C=Z.options.compressionOptions||E.compressionOptions||{},N=Z.dir,k=Z.date;Z._compressWorker(f,C).withStreamInfo("file",{name:Q,dir:N,date:k,comment:Z.comment||"",unixPermissions:Z.unixPermissions,dosPermissions:Z.dosPermissions}).pipe(H)}),H.entriesCount=e}catch(Q){H.error(Q)}return H}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(U,Y,m){"use strict";function O(){if(!(this instanceof O))return new O;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var J=new O;for(var P in this)"function"!=typeof this[P]&&(J[P]=this[P]);return J}}(O.prototype=U("./object")).loadAsync=U("./load"),O.support=U("./support"),O.defaults=U("./defaults"),O.version="3.10.1",O.loadAsync=function(J,P){return(new O).loadAsync(J,P)},O.external=U("./external"),Y.exports=O},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(U,Y,m){"use strict";var O=U("./utils"),J=U("./external"),P=U("./utf8"),E=U("./zipEntries"),u=U("./stream/Crc32Probe"),H=U("./nodejsUtils");function e(Q){return new J.Promise(function(Z,f){var C=Q.decompressed.getContentWorker().pipe(new u);C.on("error",function(N){f(N)}).on("end",function(){C.streamInfo.crc32!==Q.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):Z()}).resume()})}Y.exports=function(Q,Z){var f=this;return Z=O.extend(Z||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:P.utf8decode}),H.isNode&&H.isStream(Q)?J.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):O.prepareContent("the loaded zip file",Q,!0,Z.optimizedBinaryString,Z.base64).then(function(C){var N=new E(Z);return N.load(C),N}).then(function(C){var N=[J.Promise.resolve(C)],k=C.files;if(Z.checkCRC32)for(var h=0;h<k.length;h++)N.push(e(k[h]));return J.Promise.all(N)}).then(function(C){for(var N=C.shift(),k=N.files,h=0;h<k.length;h++){var q=k[h],K=q.fileNameStr,$=O.resolve(q.fileNameStr);f.file($,q.decompressed,{binary:!0,optimizedBinaryString:!0,date:q.date,dir:q.dir,comment:q.fileCommentStr.length?q.fileCommentStr:null,unixPermissions:q.unixPermissions,dosPermissions:q.dosPermissions,createFolders:Z.createFolders}),q.dir||(f.file($).unsafeOriginalName=K)}return N.zipComment.length&&(f.comment=N.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(U,Y,m){"use strict";var O=U("../utils"),J=U("../stream/GenericWorker");function P(E,u){J.call(this,"Nodejs stream input adapter for "+E),this._upstreamEnded=!1,this._bindStream(u)}O.inherits(P,J),P.prototype._bindStream=function(E){var u=this;(this._stream=E).pause(),E.on("data",function(H){u.push({data:H,meta:{percent:0}})}).on("error",function(H){u.isPaused?this.generatedError=H:u.error(H)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},P.prototype.pause=function(){return!!J.prototype.pause.call(this)&&(this._stream.pause(),!0)},P.prototype.resume=function(){return!!J.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Y.exports=P},{"../stream/GenericWorker":28,"../utils":32}],13:[function(U,Y,m){"use strict";var O=U("readable-stream").Readable;function J(P,E,u){O.call(this,E),this._helper=P;var H=this;P.on("data",function(e,Q){H.push(e)||H._helper.pause(),u&&u(Q)}).on("error",function(e){H.emit("error",e)}).on("end",function(){H.push(null)})}U("../utils").inherits(J,O),J.prototype._read=function(){this._helper.resume()},Y.exports=J},{"../utils":32,"readable-stream":16}],14:[function(U,Y,m){"use strict";Y.exports={isNode:typeof Buffer<"u",newBufferFrom:function(O,J){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(O,J);if("number"==typeof O)throw new Error('The "data" argument must not be a number');return new Buffer(O,J)},allocBuffer:function(O){if(Buffer.alloc)return Buffer.alloc(O);var J=new Buffer(O);return J.fill(0),J},isBuffer:function(O){return Buffer.isBuffer(O)},isStream:function(O){return O&&"function"==typeof O.on&&"function"==typeof O.pause&&"function"==typeof O.resume}}},{}],15:[function(U,Y,m){"use strict";function O($,se,ae){var ge,oe=P.getTypeOf(se),ve=P.extend(ae||{},H);ve.date=ve.date||new Date,null!==ve.compression&&(ve.compression=ve.compression.toUpperCase()),"string"==typeof ve.unixPermissions&&(ve.unixPermissions=parseInt(ve.unixPermissions,8)),ve.unixPermissions&&16384&ve.unixPermissions&&(ve.dir=!0),ve.dosPermissions&&16&ve.dosPermissions&&(ve.dir=!0),ve.dir&&($=k($)),ve.createFolders&&(ge=N($))&&h.call(this,ge,!0);var ze="string"===oe&&!1===ve.binary&&!1===ve.base64;ae&&void 0!==ae.binary||(ve.binary=!ze),(se instanceof e&&0===se.uncompressedSize||ve.dir||!se||0===se.length)&&(ve.base64=!1,ve.binary=!0,se="",ve.compression="STORE",oe="string");var I=null;I=se instanceof e||se instanceof E?se:f.isNode&&f.isStream(se)?new C($,se):P.prepareContent($,se,ve.binary,ve.optimizedBinaryString,ve.base64);var le=new Q($,I,ve);this.files[$]=le}var J=U("./utf8"),P=U("./utils"),E=U("./stream/GenericWorker"),u=U("./stream/StreamHelper"),H=U("./defaults"),e=U("./compressedObject"),Q=U("./zipObject"),Z=U("./generate"),f=U("./nodejsUtils"),C=U("./nodejs/NodejsStreamInputAdapter"),N=function($){"/"===$.slice(-1)&&($=$.substring(0,$.length-1));var se=$.lastIndexOf("/");return 0<se?$.substring(0,se):""},k=function($){return"/"!==$.slice(-1)&&($+="/"),$},h=function($,se){return se=void 0!==se?se:H.createFolders,$=k($),this.files[$]||O.call(this,$,null,{dir:!0,createFolders:se}),this.files[$]};function q($){return"[object RegExp]"===Object.prototype.toString.call($)}var K={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function($){var se,ae,ge;for(se in this.files)ge=this.files[se],(ae=se.slice(this.root.length,se.length))&&se.slice(0,this.root.length)===this.root&&$(ae,ge)},filter:function($){var se=[];return this.forEach(function(ae,ge){$(ae,ge)&&se.push(ge)}),se},file:function($,se,ae){if(1!==arguments.length)return $=this.root+$,O.call(this,$,se,ae),this;if(q($)){var ge=$;return this.filter(function(ve,ze){return!ze.dir&&ge.test(ve)})}var oe=this.files[this.root+$];return oe&&!oe.dir?oe:null},folder:function($){if(!$)return this;if(q($))return this.filter(function(oe,ve){return ve.dir&&$.test(oe)});var se=this.root+$,ae=h.call(this,se),ge=this.clone();return ge.root=ae.name,ge},remove:function($){$=this.root+$;var se=this.files[$];if(se||("/"!==$.slice(-1)&&($+="/"),se=this.files[$]),se&&!se.dir)delete this.files[$];else for(var ae=this.filter(function(oe,ve){return ve.name.slice(0,$.length)===$}),ge=0;ge<ae.length;ge++)delete this.files[ae[ge].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function($){var se,ae={};try{if((ae=P.extend($||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:J.utf8encode})).type=ae.type.toLowerCase(),ae.compression=ae.compression.toUpperCase(),"binarystring"===ae.type&&(ae.type="string"),!ae.type)throw new Error("No output type specified.");P.checkSupport(ae.type),"darwin"!==ae.platform&&"freebsd"!==ae.platform&&"linux"!==ae.platform&&"sunos"!==ae.platform||(ae.platform="UNIX"),"win32"===ae.platform&&(ae.platform="DOS");var ge=ae.comment||this.comment||"";se=Z.generateWorker(this,ae,ge)}catch(oe){(se=new E("error")).error(oe)}return new u(se,ae.type||"string",ae.mimeType)},generateAsync:function($,se){return this.generateInternalStream($).accumulate(se)},generateNodeStream:function($,se){return($=$||{}).type||($.type="nodebuffer"),this.generateInternalStream($).toNodejsStream(se)}};Y.exports=K},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(U,Y,m){"use strict";Y.exports=U("stream")},{stream:void 0}],17:[function(U,Y,m){"use strict";var O=U("./DataReader");function J(P){O.call(this,P);for(var E=0;E<this.data.length;E++)P[E]=255&P[E]}U("../utils").inherits(J,O),J.prototype.byteAt=function(P){return this.data[this.zero+P]},J.prototype.lastIndexOfSignature=function(P){for(var E=P.charCodeAt(0),u=P.charCodeAt(1),H=P.charCodeAt(2),e=P.charCodeAt(3),Q=this.length-4;0<=Q;--Q)if(this.data[Q]===E&&this.data[Q+1]===u&&this.data[Q+2]===H&&this.data[Q+3]===e)return Q-this.zero;return-1},J.prototype.readAndCheckSignature=function(P){var E=P.charCodeAt(0),u=P.charCodeAt(1),H=P.charCodeAt(2),e=P.charCodeAt(3),Q=this.readData(4);return E===Q[0]&&u===Q[1]&&H===Q[2]&&e===Q[3]},J.prototype.readData=function(P){if(this.checkOffset(P),0===P)return[];var E=this.data.slice(this.zero+this.index,this.zero+this.index+P);return this.index+=P,E},Y.exports=J},{"../utils":32,"./DataReader":18}],18:[function(U,Y,m){"use strict";var O=U("../utils");function J(P){this.data=P,this.length=P.length,this.index=0,this.zero=0}J.prototype={checkOffset:function(P){this.checkIndex(this.index+P)},checkIndex:function(P){if(this.length<this.zero+P||P<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+P+"). Corrupted zip ?")},setIndex:function(P){this.checkIndex(P),this.index=P},skip:function(P){this.setIndex(this.index+P)},byteAt:function(){},readInt:function(P){var E,u=0;for(this.checkOffset(P),E=this.index+P-1;E>=this.index;E--)u=(u<<8)+this.byteAt(E);return this.index+=P,u},readString:function(P){return O.transformTo("string",this.readData(P))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var P=this.readInt(4);return new Date(Date.UTC(1980+(P>>25&127),(P>>21&15)-1,P>>16&31,P>>11&31,P>>5&63,(31&P)<<1))}},Y.exports=J},{"../utils":32}],19:[function(U,Y,m){"use strict";var O=U("./Uint8ArrayReader");function J(P){O.call(this,P)}U("../utils").inherits(J,O),J.prototype.readData=function(P){this.checkOffset(P);var E=this.data.slice(this.zero+this.index,this.zero+this.index+P);return this.index+=P,E},Y.exports=J},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(U,Y,m){"use strict";var O=U("./DataReader");function J(P){O.call(this,P)}U("../utils").inherits(J,O),J.prototype.byteAt=function(P){return this.data.charCodeAt(this.zero+P)},J.prototype.lastIndexOfSignature=function(P){return this.data.lastIndexOf(P)-this.zero},J.prototype.readAndCheckSignature=function(P){return P===this.readData(4)},J.prototype.readData=function(P){this.checkOffset(P);var E=this.data.slice(this.zero+this.index,this.zero+this.index+P);return this.index+=P,E},Y.exports=J},{"../utils":32,"./DataReader":18}],21:[function(U,Y,m){"use strict";var O=U("./ArrayReader");function J(P){O.call(this,P)}U("../utils").inherits(J,O),J.prototype.readData=function(P){if(this.checkOffset(P),0===P)return new Uint8Array(0);var E=this.data.subarray(this.zero+this.index,this.zero+this.index+P);return this.index+=P,E},Y.exports=J},{"../utils":32,"./ArrayReader":17}],22:[function(U,Y,m){"use strict";var O=U("../utils"),J=U("../support"),P=U("./ArrayReader"),E=U("./StringReader"),u=U("./NodeBufferReader"),H=U("./Uint8ArrayReader");Y.exports=function(e){var Q=O.getTypeOf(e);return O.checkSupport(Q),"string"!==Q||J.uint8array?"nodebuffer"===Q?new u(e):J.uint8array?new H(O.transformTo("uint8array",e)):new P(O.transformTo("array",e)):new E(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(U,Y,m){"use strict";m.LOCAL_FILE_HEADER="PK\x03\x04",m.CENTRAL_FILE_HEADER="PK\x01\x02",m.CENTRAL_DIRECTORY_END="PK\x05\x06",m.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",m.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",m.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(U,Y,m){"use strict";var O=U("./GenericWorker"),J=U("../utils");function P(E){O.call(this,"ConvertWorker to "+E),this.destType=E}J.inherits(P,O),P.prototype.processChunk=function(E){this.push({data:J.transformTo(this.destType,E.data),meta:E.meta})},Y.exports=P},{"../utils":32,"./GenericWorker":28}],25:[function(U,Y,m){"use strict";var O=U("./GenericWorker"),J=U("../crc32");function P(){O.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}U("../utils").inherits(P,O),P.prototype.processChunk=function(E){this.streamInfo.crc32=J(E.data,this.streamInfo.crc32||0),this.push(E)},Y.exports=P},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(U,Y,m){"use strict";var O=U("../utils"),J=U("./GenericWorker");function P(E){J.call(this,"DataLengthProbe for "+E),this.propName=E,this.withStreamInfo(E,0)}O.inherits(P,J),P.prototype.processChunk=function(E){if(E){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+E.data.length}J.prototype.processChunk.call(this,E)},Y.exports=P},{"../utils":32,"./GenericWorker":28}],27:[function(U,Y,m){"use strict";var O=U("../utils"),J=U("./GenericWorker");function P(E){J.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,E.then(function(H){u.dataIsReady=!0,u.data=H,u.max=H&&H.length||0,u.type=O.getTypeOf(H),u.isPaused||u._tickAndRepeat()},function(H){u.error(H)})}O.inherits(P,J),P.prototype.cleanUp=function(){J.prototype.cleanUp.call(this),this.data=null},P.prototype.resume=function(){return!!J.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,O.delay(this._tickAndRepeat,[],this)),!0)},P.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(O.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},P.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var E=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":E=this.data.substring(this.index,u);break;case"uint8array":E=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":E=this.data.slice(this.index,u)}return this.index=u,this.push({data:E,meta:{percent:this.max?this.index/this.max*100:0}})},Y.exports=P},{"../utils":32,"./GenericWorker":28}],28:[function(U,Y,m){"use strict";function O(J){this.name=J||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}O.prototype={push:function(J){this.emit("data",J)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(J){this.emit("error",J)}return!0},error:function(J){return!this.isFinished&&(this.isPaused?this.generatedError=J:(this.isFinished=!0,this.emit("error",J),this.previous&&this.previous.error(J),this.cleanUp()),!0)},on:function(J,P){return this._listeners[J].push(P),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(J,P){if(this._listeners[J])for(var E=0;E<this._listeners[J].length;E++)this._listeners[J][E].call(this,P)},pipe:function(J){return J.registerPrevious(this)},registerPrevious:function(J){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=J.streamInfo,this.mergeStreamInfo(),this.previous=J;var P=this;return J.on("data",function(E){P.processChunk(E)}),J.on("end",function(){P.end()}),J.on("error",function(E){P.error(E)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var J=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),J=!0),this.previous&&this.previous.resume(),!J},flush:function(){},processChunk:function(J){this.push(J)},withStreamInfo:function(J,P){return this.extraStreamInfo[J]=P,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var J in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,J)&&(this.streamInfo[J]=this.extraStreamInfo[J])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var J="Worker "+this.name;return this.previous?this.previous+" -> "+J:J}},Y.exports=O},{}],29:[function(U,Y,m){"use strict";var O=U("../utils"),J=U("./ConvertWorker"),P=U("./GenericWorker"),E=U("../base64"),u=U("../support"),H=U("../external"),e=null;if(u.nodestream)try{e=U("../nodejs/NodejsStreamOutputAdapter")}catch(f){}function Q(f,C){return new H.Promise(function(N,k){var h=[],q=f._internalType,K=f._outputType,$=f._mimeType;f.on("data",function(se,ae){h.push(se),C&&C(ae)}).on("error",function(se){h=[],k(se)}).on("end",function(){try{var se=function(ae,ge,oe){switch(ae){case"blob":return O.newBlob(O.transformTo("arraybuffer",ge),oe);case"base64":return E.encode(ge);default:return O.transformTo(ae,ge)}}(K,function(ae,ge){var oe,ve=0,ze=null,I=0;for(oe=0;oe<ge.length;oe++)I+=ge[oe].length;switch(ae){case"string":return ge.join("");case"array":return Array.prototype.concat.apply([],ge);case"uint8array":for(ze=new Uint8Array(I),oe=0;oe<ge.length;oe++)ze.set(ge[oe],ve),ve+=ge[oe].length;return ze;case"nodebuffer":return Buffer.concat(ge);default:throw new Error("concat : unsupported type '"+ae+"'")}}(q,h),$);N(se)}catch(ae){k(ae)}h=[]}).resume()})}function Z(f,C,N){var k=C;switch(C){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=C,this._mimeType=N,O.checkSupport(k),this._worker=f.pipe(new J(k)),f.lock()}catch(h){this._worker=new P("error"),this._worker.error(h)}}Z.prototype={accumulate:function(f){return Q(this,f)},on:function(f,C){var N=this;return"data"===f?this._worker.on(f,function(k){C.call(N,k.data,k.meta)}):this._worker.on(f,function(){O.delay(C,arguments,N)}),this},resume:function(){return O.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(O.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new e(this,{objectMode:"nodebuffer"!==this._outputType},f)}},Y.exports=Z},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(U,Y,m){"use strict";if(m.base64=!0,m.array=!0,m.string=!0,m.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",m.nodebuffer=typeof Buffer<"u",m.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")m.blob=!1;else{var O=new ArrayBuffer(0);try{m.blob=0===new Blob([O],{type:"application/zip"}).size}catch(P){try{var J=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);J.append(O),m.blob=0===J.getBlob("application/zip").size}catch(E){m.blob=!1}}}try{m.nodestream=!!U("readable-stream").Readable}catch(P){m.nodestream=!1}},{"readable-stream":16}],31:[function(U,Y,m){"use strict";for(var O=U("./utils"),J=U("./support"),P=U("./nodejsUtils"),E=U("./stream/GenericWorker"),u=new Array(256),H=0;H<256;H++)u[H]=252<=H?6:248<=H?5:240<=H?4:224<=H?3:192<=H?2:1;function e(){E.call(this,"utf-8 decode"),this.leftOver=null}function Q(){E.call(this,"utf-8 encode")}u[254]=u[254]=1,m.utf8encode=function(Z){return J.nodebuffer?P.newBufferFrom(Z,"utf-8"):function(f){var C,N,k,h,q,K=f.length,$=0;for(h=0;h<K;h++)55296==(64512&(N=f.charCodeAt(h)))&&h+1<K&&56320==(64512&(k=f.charCodeAt(h+1)))&&(N=65536+(N-55296<<10)+(k-56320),h++),$+=N<128?1:N<2048?2:N<65536?3:4;for(C=J.uint8array?new Uint8Array($):new Array($),h=q=0;q<$;h++)55296==(64512&(N=f.charCodeAt(h)))&&h+1<K&&56320==(64512&(k=f.charCodeAt(h+1)))&&(N=65536+(N-55296<<10)+(k-56320),h++),N<128?C[q++]=N:(N<2048?C[q++]=192|N>>>6:(N<65536?C[q++]=224|N>>>12:(C[q++]=240|N>>>18,C[q++]=128|N>>>12&63),C[q++]=128|N>>>6&63),C[q++]=128|63&N);return C}(Z)},m.utf8decode=function(Z){return J.nodebuffer?O.transformTo("nodebuffer",Z).toString("utf-8"):function(f){var C,N,k,h,q=f.length,K=new Array(2*q);for(C=N=0;C<q;)if((k=f[C++])<128)K[N++]=k;else if(4<(h=u[k]))K[N++]=65533,C+=h-1;else{for(k&=2===h?31:3===h?15:7;1<h&&C<q;)k=k<<6|63&f[C++],h--;1<h?K[N++]=65533:k<65536?K[N++]=k:(k-=65536,K[N++]=55296|k>>10&1023,K[N++]=56320|1023&k)}return K.length!==N&&(K.subarray?K=K.subarray(0,N):K.length=N),O.applyFromCharCode(K)}(Z=O.transformTo(J.uint8array?"uint8array":"array",Z))},O.inherits(e,E),e.prototype.processChunk=function(Z){var f=O.transformTo(J.uint8array?"uint8array":"array",Z.data);if(this.leftOver&&this.leftOver.length){if(J.uint8array){var C=f;(f=new Uint8Array(C.length+this.leftOver.length)).set(this.leftOver,0),f.set(C,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var N=function(h,q){var K;for((q=q||h.length)>h.length&&(q=h.length),K=q-1;0<=K&&128==(192&h[K]);)K--;return K<0||0===K?q:K+u[h[K]]>q?K:q}(f),k=f;N!==f.length&&(J.uint8array?(k=f.subarray(0,N),this.leftOver=f.subarray(N,f.length)):(k=f.slice(0,N),this.leftOver=f.slice(N,f.length))),this.push({data:m.utf8decode(k),meta:Z.meta})},e.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:m.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},m.Utf8DecodeWorker=e,O.inherits(Q,E),Q.prototype.processChunk=function(Z){this.push({data:m.utf8encode(Z.data),meta:Z.meta})},m.Utf8EncodeWorker=Q},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(U,Y,m){"use strict";var O=U("./support"),J=U("./base64"),P=U("./nodejsUtils"),E=U("./external");function u(C){return C}function H(C,N){for(var k=0;k<C.length;++k)N[k]=255&C.charCodeAt(k);return N}U("setimmediate"),m.newBlob=function(C,N){m.checkSupport("blob");try{return new Blob([C],{type:N})}catch(h){try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(C),k.getBlob(N)}catch(q){throw new Error("Bug : can't construct the Blob.")}}};var e={stringifyByChunk:function(C,N,k){var h=[],q=0,K=C.length;if(K<=k)return String.fromCharCode.apply(null,C);for(;q<K;)"array"===N||"nodebuffer"===N?h.push(String.fromCharCode.apply(null,C.slice(q,Math.min(q+k,K)))):h.push(String.fromCharCode.apply(null,C.subarray(q,Math.min(q+k,K)))),q+=k;return h.join("")},stringifyByChar:function(C){for(var N="",k=0;k<C.length;k++)N+=String.fromCharCode(C[k]);return N},applyCanBeUsed:{uint8array:function(){try{return O.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(C){return!1}}(),nodebuffer:function(){try{return O.nodebuffer&&1===String.fromCharCode.apply(null,P.allocBuffer(1)).length}catch(C){return!1}}()}};function Q(C){var N=65536,k=m.getTypeOf(C),h=!0;if("uint8array"===k?h=e.applyCanBeUsed.uint8array:"nodebuffer"===k&&(h=e.applyCanBeUsed.nodebuffer),h)for(;1<N;)try{return e.stringifyByChunk(C,k,N)}catch(q){N=Math.floor(N/2)}return e.stringifyByChar(C)}function Z(C,N){for(var k=0;k<C.length;k++)N[k]=C[k];return N}m.applyFromCharCode=Q;var f={};f.string={string:u,array:function(C){return H(C,new Array(C.length))},arraybuffer:function(C){return f.string.uint8array(C).buffer},uint8array:function(C){return H(C,new Uint8Array(C.length))},nodebuffer:function(C){return H(C,P.allocBuffer(C.length))}},f.array={string:Q,array:u,arraybuffer:function(C){return new Uint8Array(C).buffer},uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return P.newBufferFrom(C)}},f.arraybuffer={string:function(C){return Q(new Uint8Array(C))},array:function(C){return Z(new Uint8Array(C),new Array(C.byteLength))},arraybuffer:u,uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return P.newBufferFrom(new Uint8Array(C))}},f.uint8array={string:Q,array:function(C){return Z(C,new Array(C.length))},arraybuffer:function(C){return C.buffer},uint8array:u,nodebuffer:function(C){return P.newBufferFrom(C)}},f.nodebuffer={string:Q,array:function(C){return Z(C,new Array(C.length))},arraybuffer:function(C){return f.nodebuffer.uint8array(C).buffer},uint8array:function(C){return Z(C,new Uint8Array(C.length))},nodebuffer:u},m.transformTo=function(C,N){if(N=N||"",!C)return N;m.checkSupport(C);var k=m.getTypeOf(N);return f[k][C](N)},m.resolve=function(C){for(var N=C.split("/"),k=[],h=0;h<N.length;h++){var q=N[h];"."===q||""===q&&0!==h&&h!==N.length-1||(".."===q?k.pop():k.push(q))}return k.join("/")},m.getTypeOf=function(C){return"string"==typeof C?"string":"[object Array]"===Object.prototype.toString.call(C)?"array":O.nodebuffer&&P.isBuffer(C)?"nodebuffer":O.uint8array&&C instanceof Uint8Array?"uint8array":O.arraybuffer&&C instanceof ArrayBuffer?"arraybuffer":void 0},m.checkSupport=function(C){if(!O[C.toLowerCase()])throw new Error(C+" is not supported by this platform")},m.MAX_VALUE_16BITS=65535,m.MAX_VALUE_32BITS=-1,m.pretty=function(C){var N,k,h="";for(k=0;k<(C||"").length;k++)h+="\\x"+((N=C.charCodeAt(k))<16?"0":"")+N.toString(16).toUpperCase();return h},m.delay=function(C,N,k){setImmediate(function(){C.apply(k||null,N||[])})},m.inherits=function(C,N){function k(){}k.prototype=N.prototype,C.prototype=new k},m.extend=function(){var C,N,k={};for(C=0;C<arguments.length;C++)for(N in arguments[C])Object.prototype.hasOwnProperty.call(arguments[C],N)&&void 0===k[N]&&(k[N]=arguments[C][N]);return k},m.prepareContent=function(C,N,k,h,q){return E.Promise.resolve(N).then(function(K){return O.blob&&(K instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(K)))&&typeof FileReader<"u"?new E.Promise(function($,se){var ae=new FileReader;ae.onload=function(ge){$(ge.target.result)},ae.onerror=function(ge){se(ge.target.error)},ae.readAsArrayBuffer(K)}):K}).then(function(K){var se,$=m.getTypeOf(K);return $?("arraybuffer"===$?K=m.transformTo("uint8array",K):"string"===$&&(q?K=J.decode(K):k&&!0!==h&&(K=H(se=K,O.uint8array?new Uint8Array(se.length):new Array(se.length)))),K):E.Promise.reject(new Error("Can't read the data of '"+C+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(U,Y,m){"use strict";var O=U("./reader/readerFor"),J=U("./utils"),P=U("./signature"),E=U("./zipEntry"),u=U("./support");function H(e){this.files=[],this.loadOptions=e}H.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var Q=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+J.pretty(Q)+", expected "+J.pretty(e)+")")}},isSignature:function(e,Q){var Z=this.reader.index;this.reader.setIndex(e);var f=this.reader.readString(4)===Q;return this.reader.setIndex(Z),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),Q=u.uint8array?"uint8array":"array",Z=J.transformTo(Q,e);this.zipComment=this.loadOptions.decodeFileName(Z)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,Q,Z,f=this.zip64EndOfCentralSize-44;0<f;)e=this.reader.readInt(2),Q=this.reader.readInt(4),Z=this.reader.readData(Q),this.zip64ExtensibleData[e]={id:e,length:Q,value:Z}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,Q;for(e=0;e<this.files.length;e++)Q=this.files[e],this.reader.setIndex(Q.localHeaderOffset),this.checkSignature(P.LOCAL_FILE_HEADER),Q.readLocalPart(this.reader),Q.handleUTF8(),Q.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(P.CENTRAL_FILE_HEADER);)(e=new E({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(P.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,P.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var Q=e;if(this.checkSignature(P.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===J.MAX_VALUE_16BITS||this.diskWithCentralDirStart===J.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===J.MAX_VALUE_16BITS||this.centralDirRecords===J.MAX_VALUE_16BITS||this.centralDirSize===J.MAX_VALUE_32BITS||this.centralDirOffset===J.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(P.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(P.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,P.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(P.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(P.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var Z=this.centralDirOffset+this.centralDirSize;this.zip64&&(Z+=20,Z+=12+this.zip64EndOfCentralSize);var f=Q-Z;if(0<f)this.isSignature(Q,P.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(e){this.reader=O(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Y.exports=H},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(U,Y,m){"use strict";var O=U("./reader/readerFor"),J=U("./utils"),P=U("./compressedObject"),E=U("./crc32"),u=U("./utf8"),H=U("./compressions"),e=U("./support");function Q(Z,f){this.options=Z,this.loadOptions=f}Q.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(Z){var f,C;if(Z.skip(22),this.fileNameLength=Z.readInt(2),C=Z.readInt(2),this.fileName=Z.readData(this.fileNameLength),Z.skip(C),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(f=function(N){for(var k in H)if(Object.prototype.hasOwnProperty.call(H,k)&&H[k].magic===N)return H[k];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+J.pretty(this.compressionMethod)+" unknown (inner file : "+J.transformTo("string",this.fileName)+")");this.decompressed=new P(this.compressedSize,this.uncompressedSize,this.crc32,f,Z.readData(this.compressedSize))},readCentralPart:function(Z){this.versionMadeBy=Z.readInt(2),Z.skip(2),this.bitFlag=Z.readInt(2),this.compressionMethod=Z.readString(2),this.date=Z.readDate(),this.crc32=Z.readInt(4),this.compressedSize=Z.readInt(4),this.uncompressedSize=Z.readInt(4);var f=Z.readInt(2);if(this.extraFieldsLength=Z.readInt(2),this.fileCommentLength=Z.readInt(2),this.diskNumberStart=Z.readInt(2),this.internalFileAttributes=Z.readInt(2),this.externalFileAttributes=Z.readInt(4),this.localHeaderOffset=Z.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");Z.skip(f),this.readExtraFields(Z),this.parseZIP64ExtraField(Z),this.fileComment=Z.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var Z=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==Z&&(this.dosPermissions=63&this.externalFileAttributes),3==Z&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Z=O(this.extraFields[1].value);this.uncompressedSize===J.MAX_VALUE_32BITS&&(this.uncompressedSize=Z.readInt(8)),this.compressedSize===J.MAX_VALUE_32BITS&&(this.compressedSize=Z.readInt(8)),this.localHeaderOffset===J.MAX_VALUE_32BITS&&(this.localHeaderOffset=Z.readInt(8)),this.diskNumberStart===J.MAX_VALUE_32BITS&&(this.diskNumberStart=Z.readInt(4))}},readExtraFields:function(Z){var f,C,N,k=Z.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});Z.index+4<k;)f=Z.readInt(2),C=Z.readInt(2),N=Z.readData(C),this.extraFields[f]={id:f,length:C,value:N};Z.setIndex(k)},handleUTF8:function(){var Z=e.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(null!==f)this.fileNameStr=f;else{var C=J.transformTo(Z,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(C)}var N=this.findExtraFieldUnicodeComment();if(null!==N)this.fileCommentStr=N;else{var k=J.transformTo(Z,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var Z=this.extraFields[28789];if(Z){var f=O(Z.value);return 1!==f.readInt(1)||E(this.fileName)!==f.readInt(4)?null:u.utf8decode(f.readData(Z.length-5))}return null},findExtraFieldUnicodeComment:function(){var Z=this.extraFields[25461];if(Z){var f=O(Z.value);return 1!==f.readInt(1)||E(this.fileComment)!==f.readInt(4)?null:u.utf8decode(f.readData(Z.length-5))}return null}},Y.exports=Q},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(U,Y,m){"use strict";function O(f,C,N){this.name=f,this.dir=N.dir,this.date=N.date,this.comment=N.comment,this.unixPermissions=N.unixPermissions,this.dosPermissions=N.dosPermissions,this._data=C,this._dataBinary=N.binary,this.options={compression:N.compression,compressionOptions:N.compressionOptions}}var J=U("./stream/StreamHelper"),P=U("./stream/DataWorker"),E=U("./utf8"),u=U("./compressedObject"),H=U("./stream/GenericWorker");O.prototype={internalStream:function(f){var C=null,N="string";try{if(!f)throw new Error("No output type specified.");var k="string"===(N=f.toLowerCase())||"text"===N;"binarystring"!==N&&"text"!==N||(N="string"),C=this._decompressWorker();var h=!this._dataBinary;h&&!k&&(C=C.pipe(new E.Utf8EncodeWorker)),!h&&k&&(C=C.pipe(new E.Utf8DecodeWorker))}catch(q){(C=new H("error")).error(q)}return new J(C,N,"")},async:function(f,C){return this.internalStream(f).accumulate(C)},nodeStream:function(f,C){return this.internalStream(f||"nodebuffer").toNodejsStream(C)},_compressWorker:function(f,C){if(this._data instanceof u&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var N=this._decompressWorker();return this._dataBinary||(N=N.pipe(new E.Utf8EncodeWorker)),u.createWorkerFrom(N,f,C)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof H?this._data:new P(this._data)}};for(var e=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Q=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Z=0;Z<e.length;Z++)O.prototype[e[Z]]=Q;Y.exports=O},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(U,Y,m){(function(O){"use strict";var J,P,E=O.MutationObserver||O.WebKitMutationObserver;if(E){var u=0,H=new E(f),e=O.document.createTextNode("");H.observe(e,{characterData:!0}),J=function(){e.data=u=++u%2}}else if(O.setImmediate||void 0===O.MessageChannel)J="document"in O&&"onreadystatechange"in O.document.createElement("script")?function(){var C=O.document.createElement("script");C.onreadystatechange=function(){f(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},O.document.documentElement.appendChild(C)}:function(){setTimeout(f,0)};else{var Q=new O.MessageChannel;Q.port1.onmessage=f,J=function(){Q.port2.postMessage(0)}}var Z=[];function f(){var C,N;P=!0;for(var k=Z.length;k;){for(N=Z,Z=[],C=-1;++C<k;)N[C]();k=Z.length}P=!1}Y.exports=function(C){1!==Z.push(C)||P||J()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(U,Y,m){"use strict";var O=U("immediate");function J(){}var P={},E=["REJECTED"],u=["FULFILLED"],H=["PENDING"];function e(k){if("function"!=typeof k)throw new TypeError("resolver must be a function");this.state=H,this.queue=[],this.outcome=void 0,k!==J&&C(this,k)}function Q(k,h,q){this.promise=k,"function"==typeof h&&(this.onFulfilled=h,this.callFulfilled=this.otherCallFulfilled),"function"==typeof q&&(this.onRejected=q,this.callRejected=this.otherCallRejected)}function Z(k,h,q){O(function(){var K;try{K=h(q)}catch($){return P.reject(k,$)}K===k?P.reject(k,new TypeError("Cannot resolve promise with itself")):P.resolve(k,K)})}function f(k){var h=k&&k.then;if(k&&("object"==typeof k||"function"==typeof k)&&"function"==typeof h)return function(){h.apply(k,arguments)}}function C(k,h){var q=!1;function K(ae){q||(q=!0,P.reject(k,ae))}function $(ae){q||(q=!0,P.resolve(k,ae))}var se=N(function(){h($,K)});"error"===se.status&&K(se.value)}function N(k,h){var q={};try{q.value=k(h),q.status="success"}catch(K){q.status="error",q.value=K}return q}(Y.exports=e).prototype.finally=function(k){if("function"!=typeof k)return this;var h=this.constructor;return this.then(function(q){return h.resolve(k()).then(function(){return q})},function(q){return h.resolve(k()).then(function(){throw q})})},e.prototype.catch=function(k){return this.then(null,k)},e.prototype.then=function(k,h){if("function"!=typeof k&&this.state===u||"function"!=typeof h&&this.state===E)return this;var q=new this.constructor(J);return this.state!==H?Z(q,this.state===u?k:h,this.outcome):this.queue.push(new Q(q,k,h)),q},Q.prototype.callFulfilled=function(k){P.resolve(this.promise,k)},Q.prototype.otherCallFulfilled=function(k){Z(this.promise,this.onFulfilled,k)},Q.prototype.callRejected=function(k){P.reject(this.promise,k)},Q.prototype.otherCallRejected=function(k){Z(this.promise,this.onRejected,k)},P.resolve=function(k,h){var q=N(f,h);if("error"===q.status)return P.reject(k,q.value);var K=q.value;if(K)C(k,K);else{k.state=u,k.outcome=h;for(var $=-1,se=k.queue.length;++$<se;)k.queue[$].callFulfilled(h)}return k},P.reject=function(k,h){k.state=E,k.outcome=h;for(var q=-1,K=k.queue.length;++q<K;)k.queue[q].callRejected(h);return k},e.resolve=function(k){return k instanceof this?k:P.resolve(new this(J),k)},e.reject=function(k){var h=new this(J);return P.reject(h,k)},e.all=function(k){var h=this;if("[object Array]"!==Object.prototype.toString.call(k))return this.reject(new TypeError("must be an array"));var q=k.length,K=!1;if(!q)return this.resolve([]);for(var $=new Array(q),se=0,ae=-1,ge=new this(J);++ae<q;)oe(k[ae],ae);return ge;function oe(ve,ze){h.resolve(ve).then(function(I){$[ze]=I,++se!==q||K||(K=!0,P.resolve(ge,$))},function(I){K||(K=!0,P.reject(ge,I))})}},e.race=function(k){var h=this;if("[object Array]"!==Object.prototype.toString.call(k))return this.reject(new TypeError("must be an array"));var ae,q=k.length,K=!1;if(!q)return this.resolve([]);for(var $=-1,se=new this(J);++$<q;)ae=k[$],h.resolve(ae).then(function(ge){K||(K=!0,P.resolve(se,ge))},function(ge){K||(K=!0,P.reject(se,ge))});return se}},{immediate:36}],38:[function(U,Y,m){"use strict";var O={};(0,U("./lib/utils/common").assign)(O,U("./lib/deflate"),U("./lib/inflate"),U("./lib/zlib/constants")),Y.exports=O},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(U,Y,m){"use strict";var O=U("./zlib/deflate"),J=U("./utils/common"),P=U("./utils/strings"),E=U("./zlib/messages"),u=U("./zlib/zstream"),H=Object.prototype.toString,e=0,Q=-1,Z=0,f=8;function C(k){if(!(this instanceof C))return new C(k);this.options=J.assign({level:Q,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z,to:""},k||{});var h=this.options;h.raw&&0<h.windowBits?h.windowBits=-h.windowBits:h.gzip&&0<h.windowBits&&h.windowBits<16&&(h.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var q=O.deflateInit2(this.strm,h.level,h.method,h.windowBits,h.memLevel,h.strategy);if(q!==e)throw new Error(E[q]);if(h.header&&O.deflateSetHeader(this.strm,h.header),h.dictionary){var K;if(K="string"==typeof h.dictionary?P.string2buf(h.dictionary):"[object ArrayBuffer]"===H.call(h.dictionary)?new Uint8Array(h.dictionary):h.dictionary,(q=O.deflateSetDictionary(this.strm,K))!==e)throw new Error(E[q]);this._dict_set=!0}}function N(k,h){var q=new C(h);if(q.push(k,!0),q.err)throw q.msg||E[q.err];return q.result}C.prototype.push=function(k,h){var q,K,$=this.strm,se=this.options.chunkSize;if(this.ended)return!1;K=h===~~h?h:!0===h?4:0,"string"==typeof k?$.input=P.string2buf(k):"[object ArrayBuffer]"===H.call(k)?$.input=new Uint8Array(k):$.input=k,$.next_in=0,$.avail_in=$.input.length;do{if(0===$.avail_out&&($.output=new J.Buf8(se),$.next_out=0,$.avail_out=se),1!==(q=O.deflate($,K))&&q!==e)return this.onEnd(q),!(this.ended=!0);0!==$.avail_out&&(0!==$.avail_in||4!==K&&2!==K)||("string"===this.options.to?this.onData(P.buf2binstring(J.shrinkBuf($.output,$.next_out))):this.onData(J.shrinkBuf($.output,$.next_out)))}while((0<$.avail_in||0===$.avail_out)&&1!==q);return 4===K?(q=O.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===e):2!==K||(this.onEnd(e),!($.avail_out=0))},C.prototype.onData=function(k){this.chunks.push(k)},C.prototype.onEnd=function(k){k===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=J.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},m.Deflate=C,m.deflate=N,m.deflateRaw=function(k,h){return(h=h||{}).raw=!0,N(k,h)},m.gzip=function(k,h){return(h=h||{}).gzip=!0,N(k,h)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(U,Y,m){"use strict";var O=U("./zlib/inflate"),J=U("./utils/common"),P=U("./utils/strings"),E=U("./zlib/constants"),u=U("./zlib/messages"),H=U("./zlib/zstream"),e=U("./zlib/gzheader"),Q=Object.prototype.toString;function Z(C){if(!(this instanceof Z))return new Z(C);this.options=J.assign({chunkSize:16384,windowBits:0,to:""},C||{});var N=this.options;N.raw&&0<=N.windowBits&&N.windowBits<16&&(N.windowBits=-N.windowBits,0===N.windowBits&&(N.windowBits=-15)),!(0<=N.windowBits&&N.windowBits<16)||C&&C.windowBits||(N.windowBits+=32),15<N.windowBits&&N.windowBits<48&&!(15&N.windowBits)&&(N.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new H,this.strm.avail_out=0;var k=O.inflateInit2(this.strm,N.windowBits);if(k!==E.Z_OK)throw new Error(u[k]);this.header=new e,O.inflateGetHeader(this.strm,this.header)}function f(C,N){var k=new Z(N);if(k.push(C,!0),k.err)throw k.msg||u[k.err];return k.result}Z.prototype.push=function(C,N){var k,h,q,K,$,se,ae=this.strm,ge=this.options.chunkSize,oe=this.options.dictionary,ve=!1;if(this.ended)return!1;h=N===~~N?N:!0===N?E.Z_FINISH:E.Z_NO_FLUSH,"string"==typeof C?ae.input=P.binstring2buf(C):"[object ArrayBuffer]"===Q.call(C)?ae.input=new Uint8Array(C):ae.input=C,ae.next_in=0,ae.avail_in=ae.input.length;do{if(0===ae.avail_out&&(ae.output=new J.Buf8(ge),ae.next_out=0,ae.avail_out=ge),(k=O.inflate(ae,E.Z_NO_FLUSH))===E.Z_NEED_DICT&&oe&&(se="string"==typeof oe?P.string2buf(oe):"[object ArrayBuffer]"===Q.call(oe)?new Uint8Array(oe):oe,k=O.inflateSetDictionary(this.strm,se)),k===E.Z_BUF_ERROR&&!0===ve&&(k=E.Z_OK,ve=!1),k!==E.Z_STREAM_END&&k!==E.Z_OK)return this.onEnd(k),!(this.ended=!0);ae.next_out&&(0!==ae.avail_out&&k!==E.Z_STREAM_END&&(0!==ae.avail_in||h!==E.Z_FINISH&&h!==E.Z_SYNC_FLUSH)||("string"===this.options.to?(q=P.utf8border(ae.output,ae.next_out),K=ae.next_out-q,$=P.buf2string(ae.output,q),ae.next_out=K,ae.avail_out=ge-K,K&&J.arraySet(ae.output,ae.output,q,K,0),this.onData($)):this.onData(J.shrinkBuf(ae.output,ae.next_out)))),0===ae.avail_in&&0===ae.avail_out&&(ve=!0)}while((0<ae.avail_in||0===ae.avail_out)&&k!==E.Z_STREAM_END);return k===E.Z_STREAM_END&&(h=E.Z_FINISH),h===E.Z_FINISH?(k=O.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===E.Z_OK):h!==E.Z_SYNC_FLUSH||(this.onEnd(E.Z_OK),!(ae.avail_out=0))},Z.prototype.onData=function(C){this.chunks.push(C)},Z.prototype.onEnd=function(C){C===E.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=J.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},m.Inflate=Z,m.inflate=f,m.inflateRaw=function(C,N){return(N=N||{}).raw=!0,f(C,N)},m.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(U,Y,m){"use strict";var O=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";m.assign=function(E){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var H=u.shift();if(H){if("object"!=typeof H)throw new TypeError(H+"must be non-object");for(var e in H)H.hasOwnProperty(e)&&(E[e]=H[e])}}return E},m.shrinkBuf=function(E,u){return E.length===u?E:E.subarray?E.subarray(0,u):(E.length=u,E)};var J={arraySet:function(E,u,H,e,Q){if(u.subarray&&E.subarray)E.set(u.subarray(H,H+e),Q);else for(var Z=0;Z<e;Z++)E[Q+Z]=u[H+Z]},flattenChunks:function(E){var u,H,e,Q,Z,f;for(u=e=0,H=E.length;u<H;u++)e+=E[u].length;for(f=new Uint8Array(e),u=Q=0,H=E.length;u<H;u++)Z=E[u],f.set(Z,Q),Q+=Z.length;return f}},P={arraySet:function(E,u,H,e,Q){for(var Z=0;Z<e;Z++)E[Q+Z]=u[H+Z]},flattenChunks:function(E){return[].concat.apply([],E)}};m.setTyped=function(E){E?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,J)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,P))},m.setTyped(O)},{}],42:[function(U,Y,m){"use strict";var O=U("./common"),J=!0,P=!0;try{String.fromCharCode.apply(null,[0])}catch(e){J=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){P=!1}for(var E=new O.Buf8(256),u=0;u<256;u++)E[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function H(e,Q){if(Q<65537&&(e.subarray&&P||!e.subarray&&J))return String.fromCharCode.apply(null,O.shrinkBuf(e,Q));for(var Z="",f=0;f<Q;f++)Z+=String.fromCharCode(e[f]);return Z}E[254]=E[254]=1,m.string2buf=function(e){var Q,Z,f,C,N,k=e.length,h=0;for(C=0;C<k;C++)55296==(64512&(Z=e.charCodeAt(C)))&&C+1<k&&56320==(64512&(f=e.charCodeAt(C+1)))&&(Z=65536+(Z-55296<<10)+(f-56320),C++),h+=Z<128?1:Z<2048?2:Z<65536?3:4;for(Q=new O.Buf8(h),C=N=0;N<h;C++)55296==(64512&(Z=e.charCodeAt(C)))&&C+1<k&&56320==(64512&(f=e.charCodeAt(C+1)))&&(Z=65536+(Z-55296<<10)+(f-56320),C++),Z<128?Q[N++]=Z:(Z<2048?Q[N++]=192|Z>>>6:(Z<65536?Q[N++]=224|Z>>>12:(Q[N++]=240|Z>>>18,Q[N++]=128|Z>>>12&63),Q[N++]=128|Z>>>6&63),Q[N++]=128|63&Z);return Q},m.buf2binstring=function(e){return H(e,e.length)},m.binstring2buf=function(e){for(var Q=new O.Buf8(e.length),Z=0,f=Q.length;Z<f;Z++)Q[Z]=e.charCodeAt(Z);return Q},m.buf2string=function(e,Q){var Z,f,C,N,k=Q||e.length,h=new Array(2*k);for(Z=f=0;Z<k;)if((C=e[Z++])<128)h[f++]=C;else if(4<(N=E[C]))h[f++]=65533,Z+=N-1;else{for(C&=2===N?31:3===N?15:7;1<N&&Z<k;)C=C<<6|63&e[Z++],N--;1<N?h[f++]=65533:C<65536?h[f++]=C:(C-=65536,h[f++]=55296|C>>10&1023,h[f++]=56320|1023&C)}return H(h,f)},m.utf8border=function(e,Q){var Z;for((Q=Q||e.length)>e.length&&(Q=e.length),Z=Q-1;0<=Z&&128==(192&e[Z]);)Z--;return Z<0||0===Z?Q:Z+E[e[Z]]>Q?Z:Q}},{"./common":41}],43:[function(U,Y,m){"use strict";Y.exports=function(O,J,P,E){for(var u=65535&O|0,H=O>>>16&65535|0,e=0;0!==P;){for(P-=e=2e3<P?2e3:P;H=H+(u=u+J[E++]|0)|0,--e;);u%=65521,H%=65521}return u|H<<16|0}},{}],44:[function(U,Y,m){"use strict";Y.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(U,Y,m){"use strict";var O=function(){for(var J,P=[],E=0;E<256;E++){J=E;for(var u=0;u<8;u++)J=1&J?3988292384^J>>>1:J>>>1;P[E]=J}return P}();Y.exports=function(J,P,E,u){var H=O,e=u+E;J^=-1;for(var Q=u;Q<e;Q++)J=J>>>8^H[255&(J^P[Q])];return-1^J}},{}],46:[function(U,Y,m){"use strict";var O,J=U("../utils/common"),P=U("./trees"),E=U("./adler32"),u=U("./crc32"),H=U("./messages"),e=0,Q=4,Z=0,f=-2,C=-1,N=4,k=2,h=8,q=9,K=286,$=30,se=19,ae=2*K+1,ge=15,oe=3,ve=258,ze=ve+oe+1,I=42,le=113,x=1,ce=2,Se=3,ue=4;function Ee(g,_){return g.msg=H[_],_}function Ce(g){return(g<<1)-(4<g?9:0)}function Pe(g){for(var _=g.length;0<=--_;)g[_]=0}function X(g){var _=g.state,w=_.pending;w>g.avail_out&&(w=g.avail_out),0!==w&&(J.arraySet(g.output,_.pending_buf,_.pending_out,w,g.next_out),g.next_out+=w,_.pending_out+=w,g.total_out+=w,g.avail_out-=w,_.pending-=w,0===_.pending&&(_.pending_out=0))}function v(g,_){P._tr_flush_block(g,0<=g.block_start?g.block_start:-1,g.strstart-g.block_start,_),g.block_start=g.strstart,X(g.strm)}function d(g,_){g.pending_buf[g.pending++]=_}function A(g,_){g.pending_buf[g.pending++]=_>>>8&255,g.pending_buf[g.pending++]=255&_}function F(g,_){var w,b,S=g.max_chain_length,R=g.strstart,pe=g.prev_length,de=g.nice_match,B=g.strstart>g.w_size-ze?g.strstart-(g.w_size-ze):0,he=g.window,xe=g.w_mask,fe=g.prev,we=g.strstart+ve,c=he[R+pe-1],Ae=he[R+pe];g.prev_length>=g.good_match&&(S>>=2),de>g.lookahead&&(de=g.lookahead);do{if(he[(w=_)+pe]===Ae&&he[w+pe-1]===c&&he[w]===he[R]&&he[++w]===he[R+1]){R+=2,w++;do{}while(he[++R]===he[++w]&&he[++R]===he[++w]&&he[++R]===he[++w]&&he[++R]===he[++w]&&he[++R]===he[++w]&&he[++R]===he[++w]&&he[++R]===he[++w]&&he[++R]===he[++w]&&R<we);if(b=ve-(we-R),R=we-ve,pe<b){if(g.match_start=_,de<=(pe=b))break;c=he[R+pe-1],Ae=he[R+pe]}}}while((_=fe[_&xe])>B&&0!=--S);return pe<=g.lookahead?pe:g.lookahead}function ne(g){var _,w,b,S,R,pe,de,B,he,xe,fe=g.w_size;do{if(S=g.window_size-g.lookahead-g.strstart,g.strstart>=fe+(fe-ze)){for(J.arraySet(g.window,g.window,fe,fe,0),g.match_start-=fe,g.strstart-=fe,g.block_start-=fe,_=w=g.hash_size;b=g.head[--_],g.head[_]=fe<=b?b-fe:0,--w;);for(_=w=fe;b=g.prev[--_],g.prev[_]=fe<=b?b-fe:0,--w;);S+=fe}if(0===g.strm.avail_in)break;if(pe=g.strm,de=g.window,B=g.strstart+g.lookahead,xe=void 0,(he=S)<(xe=pe.avail_in)&&(xe=he),w=0===xe?0:(pe.avail_in-=xe,J.arraySet(de,pe.input,pe.next_in,xe,B),1===pe.state.wrap?pe.adler=E(pe.adler,de,xe,B):2===pe.state.wrap&&(pe.adler=u(pe.adler,de,xe,B)),pe.next_in+=xe,pe.total_in+=xe,xe),g.lookahead+=w,g.lookahead+g.insert>=oe)for(R=g.strstart-g.insert,g.ins_h=g.window[R],g.ins_h=(g.ins_h<<g.hash_shift^g.window[R+1])&g.hash_mask;g.insert&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[R+oe-1])&g.hash_mask,g.prev[R&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=R,R++,g.insert--,!(g.lookahead+g.insert<oe)););}while(g.lookahead<ze&&0!==g.strm.avail_in)}function z(g,_){for(var w,b;;){if(g.lookahead<ze){if(ne(g),g.lookahead<ze&&_===e)return x;if(0===g.lookahead)break}if(w=0,g.lookahead>=oe&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+oe-1])&g.hash_mask,w=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),0!==w&&g.strstart-w<=g.w_size-ze&&(g.match_length=F(g,w)),g.match_length>=oe)if(b=P._tr_tally(g,g.strstart-g.match_start,g.match_length-oe),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=oe){for(g.match_length--;g.strstart++,g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+oe-1])&g.hash_mask,w=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart,0!=--g.match_length;);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+1])&g.hash_mask;else b=P._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(b&&(v(g,!1),0===g.strm.avail_out))return x}return g.insert=g.strstart<oe-1?g.strstart:oe-1,_===Q?(v(g,!0),0===g.strm.avail_out?Se:ue):g.last_lit&&(v(g,!1),0===g.strm.avail_out)?x:ce}function Ne(g,_){for(var w,b,S;;){if(g.lookahead<ze){if(ne(g),g.lookahead<ze&&_===e)return x;if(0===g.lookahead)break}if(w=0,g.lookahead>=oe&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+oe-1])&g.hash_mask,w=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=oe-1,0!==w&&g.prev_length<g.max_lazy_match&&g.strstart-w<=g.w_size-ze&&(g.match_length=F(g,w),g.match_length<=5&&(1===g.strategy||g.match_length===oe&&4096<g.strstart-g.match_start)&&(g.match_length=oe-1)),g.prev_length>=oe&&g.match_length<=g.prev_length){for(S=g.strstart+g.lookahead-oe,b=P._tr_tally(g,g.strstart-1-g.prev_match,g.prev_length-oe),g.lookahead-=g.prev_length-1,g.prev_length-=2;++g.strstart<=S&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+oe-1])&g.hash_mask,w=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),0!=--g.prev_length;);if(g.match_available=0,g.match_length=oe-1,g.strstart++,b&&(v(g,!1),0===g.strm.avail_out))return x}else if(g.match_available){if((b=P._tr_tally(g,0,g.window[g.strstart-1]))&&v(g,!1),g.strstart++,g.lookahead--,0===g.strm.avail_out)return x}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(b=P._tr_tally(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<oe-1?g.strstart:oe-1,_===Q?(v(g,!0),0===g.strm.avail_out?Se:ue):g.last_lit&&(v(g,!1),0===g.strm.avail_out)?x:ce}function Le(g,_,w,b,S){this.good_length=g,this.max_lazy=_,this.nice_length=w,this.max_chain=b,this.func=S}function Ye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=h,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new J.Buf16(2*ae),this.dyn_dtree=new J.Buf16(2*(2*$+1)),this.bl_tree=new J.Buf16(2*(2*se+1)),Pe(this.dyn_ltree),Pe(this.dyn_dtree),Pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new J.Buf16(ge+1),this.heap=new J.Buf16(2*K+1),Pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new J.Buf16(2*K+1),Pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function De(g){var _;return g&&g.state?(g.total_in=g.total_out=0,g.data_type=k,(_=g.state).pending=0,_.pending_out=0,_.wrap<0&&(_.wrap=-_.wrap),_.status=_.wrap?I:le,g.adler=2===_.wrap?0:1,_.last_flush=e,P._tr_init(_),Z):Ee(g,f)}function M(g){var w,_=De(g);return _===Z&&((w=g.state).window_size=2*w.w_size,Pe(w.head),w.max_lazy_match=O[w.level].max_lazy,w.good_match=O[w.level].good_length,w.nice_match=O[w.level].nice_length,w.max_chain_length=O[w.level].max_chain,w.strstart=0,w.block_start=0,w.lookahead=0,w.insert=0,w.match_length=w.prev_length=oe-1,w.match_available=0,w.ins_h=0),_}function re(g,_,w,b,S,R){if(!g)return f;var pe=1;if(_===C&&(_=6),b<0?(pe=0,b=-b):15<b&&(pe=2,b-=16),S<1||q<S||w!==h||b<8||15<b||_<0||9<_||R<0||N<R)return Ee(g,f);8===b&&(b=9);var de=new Ye;return(g.state=de).strm=g,de.wrap=pe,de.gzhead=null,de.w_bits=b,de.w_size=1<<de.w_bits,de.w_mask=de.w_size-1,de.hash_bits=S+7,de.hash_size=1<<de.hash_bits,de.hash_mask=de.hash_size-1,de.hash_shift=~~((de.hash_bits+oe-1)/oe),de.window=new J.Buf8(2*de.w_size),de.head=new J.Buf16(de.hash_size),de.prev=new J.Buf16(de.w_size),de.lit_bufsize=1<<S+6,de.pending_buf_size=4*de.lit_bufsize,de.pending_buf=new J.Buf8(de.pending_buf_size),de.d_buf=1*de.lit_bufsize,de.l_buf=3*de.lit_bufsize,de.level=_,de.strategy=R,de.method=w,M(g)}O=[new Le(0,0,0,0,function(g,_){var w=65535;for(w>g.pending_buf_size-5&&(w=g.pending_buf_size-5);;){if(g.lookahead<=1){if(ne(g),0===g.lookahead&&_===e)return x;if(0===g.lookahead)break}g.strstart+=g.lookahead,g.lookahead=0;var b=g.block_start+w;if((0===g.strstart||g.strstart>=b)&&(g.lookahead=g.strstart-b,g.strstart=b,v(g,!1),0===g.strm.avail_out)||g.strstart-g.block_start>=g.w_size-ze&&(v(g,!1),0===g.strm.avail_out))return x}return g.insert=0,_===Q?(v(g,!0),0===g.strm.avail_out?Se:ue):(g.strstart>g.block_start&&(v(g,!1),g.strm.avail_out),x)}),new Le(4,4,8,4,z),new Le(4,5,16,8,z),new Le(4,6,32,32,z),new Le(4,4,16,16,Ne),new Le(8,16,32,32,Ne),new Le(8,16,128,128,Ne),new Le(8,32,128,256,Ne),new Le(32,128,258,1024,Ne),new Le(32,258,258,4096,Ne)],m.deflateInit=function(g,_){return re(g,_,h,15,8,0)},m.deflateInit2=re,m.deflateReset=M,m.deflateResetKeep=De,m.deflateSetHeader=function(g,_){return g&&g.state?2!==g.state.wrap?f:(g.state.gzhead=_,Z):f},m.deflate=function(g,_){var w,b,S,R;if(!g||!g.state||5<_||_<0)return g?Ee(g,f):f;if(b=g.state,!g.output||!g.input&&0!==g.avail_in||666===b.status&&_!==Q)return Ee(g,0===g.avail_out?-5:f);if(b.strm=g,w=b.last_flush,b.last_flush=_,b.status===I)if(2===b.wrap)g.adler=0,d(b,31),d(b,139),d(b,8),b.gzhead?(d(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),d(b,255&b.gzhead.time),d(b,b.gzhead.time>>8&255),d(b,b.gzhead.time>>16&255),d(b,b.gzhead.time>>24&255),d(b,9===b.level?2:2<=b.strategy||b.level<2?4:0),d(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(d(b,255&b.gzhead.extra.length),d(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(g.adler=u(g.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(d(b,0),d(b,0),d(b,0),d(b,0),d(b,0),d(b,9===b.level?2:2<=b.strategy||b.level<2?4:0),d(b,3),b.status=le);else{var pe=h+(b.w_bits-8<<4)<<8;pe|=(2<=b.strategy||b.level<2?0:b.level<6?1:6===b.level?2:3)<<6,0!==b.strstart&&(pe|=32),pe+=31-pe%31,b.status=le,A(b,pe),0!==b.strstart&&(A(b,g.adler>>>16),A(b,65535&g.adler)),g.adler=1}if(69===b.status)if(b.gzhead.extra){for(S=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>S&&(g.adler=u(g.adler,b.pending_buf,b.pending-S,S)),X(g),S=b.pending,b.pending!==b.pending_buf_size));)d(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>S&&(g.adler=u(g.adler,b.pending_buf,b.pending-S,S)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(73===b.status)if(b.gzhead.name){S=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>S&&(g.adler=u(g.adler,b.pending_buf,b.pending-S,S)),X(g),S=b.pending,b.pending===b.pending_buf_size)){R=1;break}R=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,d(b,R)}while(0!==R);b.gzhead.hcrc&&b.pending>S&&(g.adler=u(g.adler,b.pending_buf,b.pending-S,S)),0===R&&(b.gzindex=0,b.status=91)}else b.status=91;if(91===b.status)if(b.gzhead.comment){S=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>S&&(g.adler=u(g.adler,b.pending_buf,b.pending-S,S)),X(g),S=b.pending,b.pending===b.pending_buf_size)){R=1;break}R=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,d(b,R)}while(0!==R);b.gzhead.hcrc&&b.pending>S&&(g.adler=u(g.adler,b.pending_buf,b.pending-S,S)),0===R&&(b.status=103)}else b.status=103;if(103===b.status&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&X(g),b.pending+2<=b.pending_buf_size&&(d(b,255&g.adler),d(b,g.adler>>8&255),g.adler=0,b.status=le)):b.status=le),0!==b.pending){if(X(g),0===g.avail_out)return b.last_flush=-1,Z}else if(0===g.avail_in&&Ce(_)<=Ce(w)&&_!==Q)return Ee(g,-5);if(666===b.status&&0!==g.avail_in)return Ee(g,-5);if(0!==g.avail_in||0!==b.lookahead||_!==e&&666!==b.status){var de=2===b.strategy?function(B,he){for(var xe;;){if(0===B.lookahead&&(ne(B),0===B.lookahead)){if(he===e)return x;break}if(B.match_length=0,xe=P._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++,xe&&(v(B,!1),0===B.strm.avail_out))return x}return B.insert=0,he===Q?(v(B,!0),0===B.strm.avail_out?Se:ue):B.last_lit&&(v(B,!1),0===B.strm.avail_out)?x:ce}(b,_):3===b.strategy?function(B,he){for(var xe,fe,we,c,Ae=B.window;;){if(B.lookahead<=ve){if(ne(B),B.lookahead<=ve&&he===e)return x;if(0===B.lookahead)break}if(B.match_length=0,B.lookahead>=oe&&0<B.strstart&&(fe=Ae[we=B.strstart-1])===Ae[++we]&&fe===Ae[++we]&&fe===Ae[++we]){c=B.strstart+ve;do{}while(fe===Ae[++we]&&fe===Ae[++we]&&fe===Ae[++we]&&fe===Ae[++we]&&fe===Ae[++we]&&fe===Ae[++we]&&fe===Ae[++we]&&fe===Ae[++we]&&we<c);B.match_length=ve-(c-we),B.match_length>B.lookahead&&(B.match_length=B.lookahead)}if(B.match_length>=oe?(xe=P._tr_tally(B,1,B.match_length-oe),B.lookahead-=B.match_length,B.strstart+=B.match_length,B.match_length=0):(xe=P._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++),xe&&(v(B,!1),0===B.strm.avail_out))return x}return B.insert=0,he===Q?(v(B,!0),0===B.strm.avail_out?Se:ue):B.last_lit&&(v(B,!1),0===B.strm.avail_out)?x:ce}(b,_):O[b.level].func(b,_);if(de!==Se&&de!==ue||(b.status=666),de===x||de===Se)return 0===g.avail_out&&(b.last_flush=-1),Z;if(de===ce&&(1===_?P._tr_align(b):5!==_&&(P._tr_stored_block(b,0,0,!1),3===_&&(Pe(b.head),0===b.lookahead&&(b.strstart=0,b.block_start=0,b.insert=0))),X(g),0===g.avail_out))return b.last_flush=-1,Z}return _!==Q?Z:b.wrap<=0?1:(2===b.wrap?(d(b,255&g.adler),d(b,g.adler>>8&255),d(b,g.adler>>16&255),d(b,g.adler>>24&255),d(b,255&g.total_in),d(b,g.total_in>>8&255),d(b,g.total_in>>16&255),d(b,g.total_in>>24&255)):(A(b,g.adler>>>16),A(b,65535&g.adler)),X(g),0<b.wrap&&(b.wrap=-b.wrap),0!==b.pending?Z:1)},m.deflateEnd=function(g){var _;return g&&g.state?(_=g.state.status)!==I&&69!==_&&73!==_&&91!==_&&103!==_&&_!==le&&666!==_?Ee(g,f):(g.state=null,_===le?Ee(g,-3):Z):f},m.deflateSetDictionary=function(g,_){var w,b,S,R,pe,de,B,he,xe=_.length;if(!g||!g.state||2===(R=(w=g.state).wrap)||1===R&&w.status!==I||w.lookahead)return f;for(1===R&&(g.adler=E(g.adler,_,xe,0)),w.wrap=0,xe>=w.w_size&&(0===R&&(Pe(w.head),w.strstart=0,w.block_start=0,w.insert=0),he=new J.Buf8(w.w_size),J.arraySet(he,_,xe-w.w_size,w.w_size,0),_=he,xe=w.w_size),pe=g.avail_in,de=g.next_in,B=g.input,g.avail_in=xe,g.next_in=0,g.input=_,ne(w);w.lookahead>=oe;){for(b=w.strstart,S=w.lookahead-(oe-1);w.ins_h=(w.ins_h<<w.hash_shift^w.window[b+oe-1])&w.hash_mask,w.prev[b&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=b,b++,--S;);w.strstart=b,w.lookahead=oe-1,ne(w)}return w.strstart+=w.lookahead,w.block_start=w.strstart,w.insert=w.lookahead,w.lookahead=0,w.match_length=w.prev_length=oe-1,w.match_available=0,g.next_in=de,g.input=B,g.avail_in=pe,w.wrap=R,Z},m.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(U,Y,m){"use strict";Y.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(U,Y,m){"use strict";Y.exports=function(O,J){var P,E,u,H,e,Q,Z,f,C,N,k,h,q,K,$,se,ae,ge,oe,ve,ze,I,le,x,ce;P=O.state,E=O.next_in,x=O.input,u=E+(O.avail_in-5),H=O.next_out,ce=O.output,e=H-(J-O.avail_out),Q=H+(O.avail_out-257),Z=P.dmax,f=P.wsize,C=P.whave,N=P.wnext,k=P.window,h=P.hold,q=P.bits,K=P.lencode,$=P.distcode,se=(1<<P.lenbits)-1,ae=(1<<P.distbits)-1;e:do{q<15&&(h+=x[E++]<<q,q+=8,h+=x[E++]<<q,q+=8),ge=K[h&se];t:for(;;){if(h>>>=oe=ge>>>24,q-=oe,0==(oe=ge>>>16&255))ce[H++]=65535&ge;else{if(!(16&oe)){if(!(64&oe)){ge=K[(65535&ge)+(h&(1<<oe)-1)];continue t}if(32&oe){P.mode=12;break e}O.msg="invalid literal/length code",P.mode=30;break e}ve=65535&ge,(oe&=15)&&(q<oe&&(h+=x[E++]<<q,q+=8),ve+=h&(1<<oe)-1,h>>>=oe,q-=oe),q<15&&(h+=x[E++]<<q,q+=8,h+=x[E++]<<q,q+=8),ge=$[h&ae];i:for(;;){if(h>>>=oe=ge>>>24,q-=oe,!(16&(oe=ge>>>16&255))){if(!(64&oe)){ge=$[(65535&ge)+(h&(1<<oe)-1)];continue i}O.msg="invalid distance code",P.mode=30;break e}if(ze=65535&ge,q<(oe&=15)&&(h+=x[E++]<<q,(q+=8)<oe&&(h+=x[E++]<<q,q+=8)),Z<(ze+=h&(1<<oe)-1)){O.msg="invalid distance too far back",P.mode=30;break e}if(h>>>=oe,q-=oe,(oe=H-e)<ze){if(C<(oe=ze-oe)&&P.sane){O.msg="invalid distance too far back",P.mode=30;break e}if(le=k,(I=0)===N){if(I+=f-oe,oe<ve){for(ve-=oe;ce[H++]=k[I++],--oe;);I=H-ze,le=ce}}else if(N<oe){if(I+=f+N-oe,(oe-=N)<ve){for(ve-=oe;ce[H++]=k[I++],--oe;);if(I=0,N<ve){for(ve-=oe=N;ce[H++]=k[I++],--oe;);I=H-ze,le=ce}}}else if(I+=N-oe,oe<ve){for(ve-=oe;ce[H++]=k[I++],--oe;);I=H-ze,le=ce}for(;2<ve;)ce[H++]=le[I++],ce[H++]=le[I++],ce[H++]=le[I++],ve-=3;ve&&(ce[H++]=le[I++],1<ve&&(ce[H++]=le[I++]))}else{for(I=H-ze;ce[H++]=ce[I++],ce[H++]=ce[I++],ce[H++]=ce[I++],2<(ve-=3););ve&&(ce[H++]=ce[I++],1<ve&&(ce[H++]=ce[I++]))}break}}break}}while(E<u&&H<Q);E-=ve=q>>3,h&=(1<<(q-=ve<<3))-1,O.next_in=E,O.next_out=H,O.avail_in=E<u?u-E+5:5-(E-u),O.avail_out=H<Q?Q-H+257:257-(H-Q),P.hold=h,P.bits=q}},{}],49:[function(U,Y,m){"use strict";var O=U("../utils/common"),J=U("./adler32"),P=U("./crc32"),E=U("./inffast"),u=U("./inftrees"),H=1,e=2,Q=0,Z=-2,f=1,C=852,N=592;function k(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new O.Buf16(320),this.work=new O.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function q(I){var le;return I&&I.state?(le=I.state,I.total_in=I.total_out=le.total=0,I.msg="",le.wrap&&(I.adler=1&le.wrap),le.mode=f,le.last=0,le.havedict=0,le.dmax=32768,le.head=null,le.hold=0,le.bits=0,le.lencode=le.lendyn=new O.Buf32(C),le.distcode=le.distdyn=new O.Buf32(N),le.sane=1,le.back=-1,Q):Z}function K(I){var le;return I&&I.state?((le=I.state).wsize=0,le.whave=0,le.wnext=0,q(I)):Z}function $(I,le){var x,ce;return I&&I.state?(ce=I.state,le<0?(x=0,le=-le):(x=1+(le>>4),le<48&&(le&=15)),le&&(le<8||15<le)?Z:(null!==ce.window&&ce.wbits!==le&&(ce.window=null),ce.wrap=x,ce.wbits=le,K(I))):Z}function se(I,le){var x,ce;return I?(ce=new h,(I.state=ce).window=null,(x=$(I,le))!==Q&&(I.state=null),x):Z}var ae,ge,oe=!0;function ve(I){if(oe){var le;for(ae=new O.Buf32(512),ge=new O.Buf32(32),le=0;le<144;)I.lens[le++]=8;for(;le<256;)I.lens[le++]=9;for(;le<280;)I.lens[le++]=7;for(;le<288;)I.lens[le++]=8;for(u(H,I.lens,0,288,ae,0,I.work,{bits:9}),le=0;le<32;)I.lens[le++]=5;u(e,I.lens,0,32,ge,0,I.work,{bits:5}),oe=!1}I.lencode=ae,I.lenbits=9,I.distcode=ge,I.distbits=5}function ze(I,le,x,ce){var Se,ue=I.state;return null===ue.window&&(ue.wsize=1<<ue.wbits,ue.wnext=0,ue.whave=0,ue.window=new O.Buf8(ue.wsize)),ce>=ue.wsize?(O.arraySet(ue.window,le,x-ue.wsize,ue.wsize,0),ue.wnext=0,ue.whave=ue.wsize):(ce<(Se=ue.wsize-ue.wnext)&&(Se=ce),O.arraySet(ue.window,le,x-ce,Se,ue.wnext),(ce-=Se)?(O.arraySet(ue.window,le,x-ce,ce,0),ue.wnext=ce,ue.whave=ue.wsize):(ue.wnext+=Se,ue.wnext===ue.wsize&&(ue.wnext=0),ue.whave<ue.wsize&&(ue.whave+=Se))),0}m.inflateReset=K,m.inflateReset2=$,m.inflateResetKeep=q,m.inflateInit=function(I){return se(I,15)},m.inflateInit2=se,m.inflate=function(I,le){var x,ce,Se,ue,Ee,Ce,Pe,X,v,d,A,F,ne,z,Ne,Le,Ye,De,M,re,g,_,w,b,S=0,R=new O.Buf8(4),pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&0!==I.avail_in)return Z;12===(x=I.state).mode&&(x.mode=13),Ee=I.next_out,Se=I.output,Pe=I.avail_out,ue=I.next_in,ce=I.input,Ce=I.avail_in,X=x.hold,v=x.bits,d=Ce,A=Pe,_=Q;e:for(;;)switch(x.mode){case f:if(0===x.wrap){x.mode=13;break}for(;v<16;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if(2&x.wrap&&35615===X){R[x.check=0]=255&X,R[1]=X>>>8&255,x.check=P(x.check,R,2,0),v=X=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&X)<<8)+(X>>8))%31){I.msg="incorrect header check",x.mode=30;break}if(8!=(15&X)){I.msg="unknown compression method",x.mode=30;break}if(v-=4,g=8+(15&(X>>>=4)),0===x.wbits)x.wbits=g;else if(g>x.wbits){I.msg="invalid window size",x.mode=30;break}x.dmax=1<<g,I.adler=x.check=1,x.mode=512&X?10:12,v=X=0;break;case 2:for(;v<16;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if(x.flags=X,8!=(255&x.flags)){I.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){I.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=X>>8&1),512&x.flags&&(R[0]=255&X,R[1]=X>>>8&255,x.check=P(x.check,R,2,0)),v=X=0,x.mode=3;case 3:for(;v<32;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}x.head&&(x.head.time=X),512&x.flags&&(R[0]=255&X,R[1]=X>>>8&255,R[2]=X>>>16&255,R[3]=X>>>24&255,x.check=P(x.check,R,4,0)),v=X=0,x.mode=4;case 4:for(;v<16;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}x.head&&(x.head.xflags=255&X,x.head.os=X>>8),512&x.flags&&(R[0]=255&X,R[1]=X>>>8&255,x.check=P(x.check,R,2,0)),v=X=0,x.mode=5;case 5:if(1024&x.flags){for(;v<16;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}x.length=X,x.head&&(x.head.extra_len=X),512&x.flags&&(R[0]=255&X,R[1]=X>>>8&255,x.check=P(x.check,R,2,0)),v=X=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(Ce<(F=x.length)&&(F=Ce),F&&(x.head&&(g=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),O.arraySet(x.head.extra,ce,ue,F,g)),512&x.flags&&(x.check=P(x.check,ce,F,ue)),Ce-=F,ue+=F,x.length-=F),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(0===Ce)break e;for(F=0;g=ce[ue+F++],x.head&&g&&x.length<65536&&(x.head.name+=String.fromCharCode(g)),g&&F<Ce;);if(512&x.flags&&(x.check=P(x.check,ce,F,ue)),Ce-=F,ue+=F,g)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(0===Ce)break e;for(F=0;g=ce[ue+F++],x.head&&g&&x.length<65536&&(x.head.comment+=String.fromCharCode(g)),g&&F<Ce;);if(512&x.flags&&(x.check=P(x.check,ce,F,ue)),Ce-=F,ue+=F,g)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;v<16;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if(X!==(65535&x.check)){I.msg="header crc mismatch",x.mode=30;break}v=X=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),I.adler=x.check=0,x.mode=12;break;case 10:for(;v<32;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}I.adler=x.check=k(X),v=X=0,x.mode=11;case 11:if(0===x.havedict)return I.next_out=Ee,I.avail_out=Pe,I.next_in=ue,I.avail_in=Ce,x.hold=X,x.bits=v,2;I.adler=x.check=1,x.mode=12;case 12:if(5===le||6===le)break e;case 13:if(x.last){X>>>=7&v,v-=7&v,x.mode=27;break}for(;v<3;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}switch(x.last=1&X,v-=1,3&(X>>>=1)){case 0:x.mode=14;break;case 1:if(ve(x),x.mode=20,6!==le)break;X>>>=2,v-=2;break e;case 2:x.mode=17;break;case 3:I.msg="invalid block type",x.mode=30}X>>>=2,v-=2;break;case 14:for(X>>>=7&v,v-=7&v;v<32;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if((65535&X)!=(X>>>16^65535)){I.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&X,v=X=0,x.mode=15,6===le)break e;case 15:x.mode=16;case 16:if(F=x.length){if(Ce<F&&(F=Ce),Pe<F&&(F=Pe),0===F)break e;O.arraySet(Se,ce,ue,F,Ee),Ce-=F,ue+=F,Pe-=F,Ee+=F,x.length-=F;break}x.mode=12;break;case 17:for(;v<14;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if(x.nlen=257+(31&X),X>>>=5,v-=5,x.ndist=1+(31&X),X>>>=5,v-=5,x.ncode=4+(15&X),X>>>=4,v-=4,286<x.nlen||30<x.ndist){I.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;v<3;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}x.lens[pe[x.have++]]=7&X,X>>>=3,v-=3}for(;x.have<19;)x.lens[pe[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,w={bits:x.lenbits},_=u(0,x.lens,0,19,x.lencode,0,x.work,w),x.lenbits=w.bits,_){I.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;Le=(S=x.lencode[X&(1<<x.lenbits)-1])>>>16&255,Ye=65535&S,!((Ne=S>>>24)<=v);){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if(Ye<16)X>>>=Ne,v-=Ne,x.lens[x.have++]=Ye;else{if(16===Ye){for(b=Ne+2;v<b;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if(X>>>=Ne,v-=Ne,0===x.have){I.msg="invalid bit length repeat",x.mode=30;break}g=x.lens[x.have-1],F=3+(3&X),X>>>=2,v-=2}else if(17===Ye){for(b=Ne+3;v<b;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}v-=Ne,g=0,F=3+(7&(X>>>=Ne)),X>>>=3,v-=3}else{for(b=Ne+7;v<b;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}v-=Ne,g=0,F=11+(127&(X>>>=Ne)),X>>>=7,v-=7}if(x.have+F>x.nlen+x.ndist){I.msg="invalid bit length repeat",x.mode=30;break}for(;F--;)x.lens[x.have++]=g}}if(30===x.mode)break;if(0===x.lens[256]){I.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,w={bits:x.lenbits},_=u(H,x.lens,0,x.nlen,x.lencode,0,x.work,w),x.lenbits=w.bits,_){I.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,w={bits:x.distbits},_=u(e,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,w),x.distbits=w.bits,_){I.msg="invalid distances set",x.mode=30;break}if(x.mode=20,6===le)break e;case 20:x.mode=21;case 21:if(6<=Ce&&258<=Pe){I.next_out=Ee,I.avail_out=Pe,I.next_in=ue,I.avail_in=Ce,x.hold=X,x.bits=v,E(I,A),Ee=I.next_out,Se=I.output,Pe=I.avail_out,ue=I.next_in,ce=I.input,Ce=I.avail_in,X=x.hold,v=x.bits,12===x.mode&&(x.back=-1);break}for(x.back=0;Le=(S=x.lencode[X&(1<<x.lenbits)-1])>>>16&255,Ye=65535&S,!((Ne=S>>>24)<=v);){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if(Le&&!(240&Le)){for(De=Ne,M=Le,re=Ye;Le=(S=x.lencode[re+((X&(1<<De+M)-1)>>De)])>>>16&255,Ye=65535&S,!(De+(Ne=S>>>24)<=v);){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}X>>>=De,v-=De,x.back+=De}if(X>>>=Ne,v-=Ne,x.back+=Ne,x.length=Ye,0===Le){x.mode=26;break}if(32&Le){x.back=-1,x.mode=12;break}if(64&Le){I.msg="invalid literal/length code",x.mode=30;break}x.extra=15&Le,x.mode=22;case 22:if(x.extra){for(b=x.extra;v<b;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}x.length+=X&(1<<x.extra)-1,X>>>=x.extra,v-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;Le=(S=x.distcode[X&(1<<x.distbits)-1])>>>16&255,Ye=65535&S,!((Ne=S>>>24)<=v);){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if(!(240&Le)){for(De=Ne,M=Le,re=Ye;Le=(S=x.distcode[re+((X&(1<<De+M)-1)>>De)])>>>16&255,Ye=65535&S,!(De+(Ne=S>>>24)<=v);){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}X>>>=De,v-=De,x.back+=De}if(X>>>=Ne,v-=Ne,x.back+=Ne,64&Le){I.msg="invalid distance code",x.mode=30;break}x.offset=Ye,x.extra=15&Le,x.mode=24;case 24:if(x.extra){for(b=x.extra;v<b;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}x.offset+=X&(1<<x.extra)-1,X>>>=x.extra,v-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){I.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(0===Pe)break e;if(F=A-Pe,x.offset>F){if((F=x.offset-F)>x.whave&&x.sane){I.msg="invalid distance too far back",x.mode=30;break}ne=F>x.wnext?(F-=x.wnext,x.wsize-F):x.wnext-F,F>x.length&&(F=x.length),z=x.window}else z=Se,ne=Ee-x.offset,F=x.length;for(Pe<F&&(F=Pe),Pe-=F,x.length-=F;Se[Ee++]=z[ne++],--F;);0===x.length&&(x.mode=21);break;case 26:if(0===Pe)break e;Se[Ee++]=x.length,Pe--,x.mode=21;break;case 27:if(x.wrap){for(;v<32;){if(0===Ce)break e;Ce--,X|=ce[ue++]<<v,v+=8}if(A-=Pe,I.total_out+=A,x.total+=A,A&&(I.adler=x.check=x.flags?P(x.check,Se,A,Ee-A):J(x.check,Se,A,Ee-A)),A=Pe,(x.flags?X:k(X))!==x.check){I.msg="incorrect data check",x.mode=30;break}v=X=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;v<32;){if(0===Ce)break e;Ce--,X+=ce[ue++]<<v,v+=8}if(X!==(4294967295&x.total)){I.msg="incorrect length check",x.mode=30;break}v=X=0}x.mode=29;case 29:_=1;break e;case 30:_=-3;break e;case 31:return-4;default:return Z}return I.next_out=Ee,I.avail_out=Pe,I.next_in=ue,I.avail_in=Ce,x.hold=X,x.bits=v,(x.wsize||A!==I.avail_out&&x.mode<30&&(x.mode<27||4!==le))&&ze(I,I.output,I.next_out,A-I.avail_out)?(x.mode=31,-4):(d-=I.avail_in,A-=I.avail_out,I.total_in+=d,I.total_out+=A,x.total+=A,x.wrap&&A&&(I.adler=x.check=x.flags?P(x.check,Se,A,I.next_out-A):J(x.check,Se,A,I.next_out-A)),I.data_type=x.bits+(x.last?64:0)+(12===x.mode?128:0)+(20===x.mode||15===x.mode?256:0),(0==d&&0===A||4===le)&&_===Q&&(_=-5),_)},m.inflateEnd=function(I){if(!I||!I.state)return Z;var le=I.state;return le.window&&(le.window=null),I.state=null,Q},m.inflateGetHeader=function(I,le){var x;return I&&I.state&&2&(x=I.state).wrap?((x.head=le).done=!1,Q):Z},m.inflateSetDictionary=function(I,le){var x,ce=le.length;return I&&I.state?0!==(x=I.state).wrap&&11!==x.mode?Z:11===x.mode&&J(1,le,ce,0)!==x.check?-3:ze(I,le,ce,ce)?(x.mode=31,-4):(x.havedict=1,Q):Z},m.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(U,Y,m){"use strict";var O=U("../utils/common"),J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],P=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Y.exports=function(H,e,Q,Z,f,C,N,k){var h,q,K,$,se,ae,ge,oe,ve,ze=k.bits,I=0,le=0,x=0,ce=0,Se=0,ue=0,Ee=0,Ce=0,Pe=0,X=0,v=null,d=0,A=new O.Buf16(16),F=new O.Buf16(16),ne=null,z=0;for(I=0;I<=15;I++)A[I]=0;for(le=0;le<Z;le++)A[e[Q+le]]++;for(Se=ze,ce=15;1<=ce&&0===A[ce];ce--);if(ce<Se&&(Se=ce),0===ce)return f[C++]=20971520,f[C++]=20971520,k.bits=1,0;for(x=1;x<ce&&0===A[x];x++);for(Se<x&&(Se=x),I=Ce=1;I<=15;I++)if(Ce<<=1,(Ce-=A[I])<0)return-1;if(0<Ce&&(0===H||1!==ce))return-1;for(F[1]=0,I=1;I<15;I++)F[I+1]=F[I]+A[I];for(le=0;le<Z;le++)0!==e[Q+le]&&(N[F[e[Q+le]]++]=le);if(ae=0===H?(v=ne=N,19):1===H?(v=J,d-=257,ne=P,z-=257,256):(v=E,ne=u,-1),I=x,se=C,Ee=le=X=0,K=-1,$=(Pe=1<<(ue=Se))-1,1===H&&852<Pe||2===H&&592<Pe)return 1;for(;;){for(ge=I-Ee,ve=N[le]<ae?(oe=0,N[le]):N[le]>ae?(oe=ne[z+N[le]],v[d+N[le]]):(oe=96,0),h=1<<I-Ee,x=q=1<<ue;f[se+(X>>Ee)+(q-=h)]=ge<<24|oe<<16|ve|0,0!==q;);for(h=1<<I-1;X&h;)h>>=1;if(0!==h?(X&=h-1,X+=h):X=0,le++,0==--A[I]){if(I===ce)break;I=e[Q+N[le]]}if(Se<I&&(X&$)!==K){for(0===Ee&&(Ee=Se),se+=x,Ce=1<<(ue=I-Ee);ue+Ee<ce&&!((Ce-=A[ue+Ee])<=0);)ue++,Ce<<=1;if(Pe+=1<<ue,1===H&&852<Pe||2===H&&592<Pe)return 1;f[K=X&$]=Se<<24|ue<<16|se-C|0}}return 0!==X&&(f[se+X]=I-Ee<<24|64<<16|0),k.bits=Se,0}},{"../utils/common":41}],51:[function(U,Y,m){"use strict";Y.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(U,Y,m){"use strict";var O=U("../utils/common"),J=0,P=1;function E(S){for(var R=S.length;0<=--R;)S[R]=0}var u=0,H=29,e=256,Q=e+1+H,Z=30,f=19,C=2*Q+1,N=15,k=16,h=7,q=256,K=16,$=17,se=18,ae=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ge=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ze=new Array(2*(Q+2));E(ze);var I=new Array(2*Z);E(I);var le=new Array(512);E(le);var x=new Array(256);E(x);var ce=new Array(H);E(ce);var Se,ue,Ee,Ce=new Array(Z);function Pe(S,R,pe,de,B){this.static_tree=S,this.extra_bits=R,this.extra_base=pe,this.elems=de,this.max_length=B,this.has_stree=S&&S.length}function X(S,R){this.dyn_tree=S,this.max_code=0,this.stat_desc=R}function v(S){return S<256?le[S]:le[256+(S>>>7)]}function d(S,R){S.pending_buf[S.pending++]=255&R,S.pending_buf[S.pending++]=R>>>8&255}function A(S,R,pe){S.bi_valid>k-pe?(S.bi_buf|=R<<S.bi_valid&65535,d(S,S.bi_buf),S.bi_buf=R>>k-S.bi_valid,S.bi_valid+=pe-k):(S.bi_buf|=R<<S.bi_valid&65535,S.bi_valid+=pe)}function F(S,R,pe){A(S,pe[2*R],pe[2*R+1])}function ne(S,R){for(var pe=0;pe|=1&S,S>>>=1,pe<<=1,0<--R;);return pe>>>1}function z(S,R,pe){var de,B,he=new Array(N+1),xe=0;for(de=1;de<=N;de++)he[de]=xe=xe+pe[de-1]<<1;for(B=0;B<=R;B++){var fe=S[2*B+1];0!==fe&&(S[2*B]=ne(he[fe]++,fe))}}function Ne(S){var R;for(R=0;R<Q;R++)S.dyn_ltree[2*R]=0;for(R=0;R<Z;R++)S.dyn_dtree[2*R]=0;for(R=0;R<f;R++)S.bl_tree[2*R]=0;S.dyn_ltree[2*q]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function Le(S){8<S.bi_valid?d(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function Ye(S,R,pe,de){var B=2*R,he=2*pe;return S[B]<S[he]||S[B]===S[he]&&de[R]<=de[pe]}function De(S,R,pe){for(var de=S.heap[pe],B=pe<<1;B<=S.heap_len&&(B<S.heap_len&&Ye(R,S.heap[B+1],S.heap[B],S.depth)&&B++,!Ye(R,de,S.heap[B],S.depth));)S.heap[pe]=S.heap[B],pe=B,B<<=1;S.heap[pe]=de}function M(S,R,pe){var de,B,he,xe,fe=0;if(0!==S.last_lit)for(;de=S.pending_buf[S.d_buf+2*fe]<<8|S.pending_buf[S.d_buf+2*fe+1],B=S.pending_buf[S.l_buf+fe],fe++,0===de?F(S,B,R):(F(S,(he=x[B])+e+1,R),0!==(xe=ae[he])&&A(S,B-=ce[he],xe),F(S,he=v(--de),pe),0!==(xe=ge[he])&&A(S,de-=Ce[he],xe)),fe<S.last_lit;);F(S,q,R)}function re(S,R){var pe,de,B,he=R.dyn_tree,xe=R.stat_desc.static_tree,fe=R.stat_desc.has_stree,we=R.stat_desc.elems,c=-1;for(S.heap_len=0,S.heap_max=C,pe=0;pe<we;pe++)0!==he[2*pe]?(S.heap[++S.heap_len]=c=pe,S.depth[pe]=0):he[2*pe+1]=0;for(;S.heap_len<2;)he[2*(B=S.heap[++S.heap_len]=c<2?++c:0)]=1,S.depth[B]=0,S.opt_len--,fe&&(S.static_len-=xe[2*B+1]);for(R.max_code=c,pe=S.heap_len>>1;1<=pe;pe--)De(S,he,pe);for(B=we;pe=S.heap[1],S.heap[1]=S.heap[S.heap_len--],De(S,he,1),de=S.heap[1],S.heap[--S.heap_max]=pe,S.heap[--S.heap_max]=de,he[2*B]=he[2*pe]+he[2*de],S.depth[B]=(S.depth[pe]>=S.depth[de]?S.depth[pe]:S.depth[de])+1,he[2*pe+1]=he[2*de+1]=B,S.heap[1]=B++,De(S,he,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],function(Ae,Me){var St,tt,yt,Fe,Gt,Qi,at=Me.dyn_tree,dc=Me.max_code,Tc=Me.stat_desc.static_tree,xc=Me.stat_desc.has_stree,Zc=Me.stat_desc.extra_bits,mc=Me.stat_desc.extra_base,Qe=Me.stat_desc.max_length,$t=0;for(Fe=0;Fe<=N;Fe++)Ae.bl_count[Fe]=0;for(at[2*Ae.heap[Ae.heap_max]+1]=0,St=Ae.heap_max+1;St<C;St++)Qe<(Fe=at[2*at[2*(tt=Ae.heap[St])+1]+1]+1)&&(Fe=Qe,$t++),at[2*tt+1]=Fe,dc<tt||(Ae.bl_count[Fe]++,Gt=0,mc<=tt&&(Gt=Zc[tt-mc]),Qi=at[2*tt],Ae.opt_len+=Qi*(Fe+Gt),xc&&(Ae.static_len+=Qi*(Tc[2*tt+1]+Gt)));if(0!==$t){do{for(Fe=Qe-1;0===Ae.bl_count[Fe];)Fe--;Ae.bl_count[Fe]--,Ae.bl_count[Fe+1]+=2,Ae.bl_count[Qe]--,$t-=2}while(0<$t);for(Fe=Qe;0!==Fe;Fe--)for(tt=Ae.bl_count[Fe];0!==tt;)dc<(yt=Ae.heap[--St])||(at[2*yt+1]!==Fe&&(Ae.opt_len+=(Fe-at[2*yt+1])*at[2*yt],at[2*yt+1]=Fe),tt--)}}(S,R),z(he,c,S.bl_count)}function g(S,R,pe){var de,B,he=-1,xe=R[1],fe=0,we=7,c=4;for(0===xe&&(we=138,c=3),R[2*(pe+1)+1]=65535,de=0;de<=pe;de++)B=xe,xe=R[2*(de+1)+1],++fe<we&&B===xe||(fe<c?S.bl_tree[2*B]+=fe:0!==B?(B!==he&&S.bl_tree[2*B]++,S.bl_tree[2*K]++):fe<=10?S.bl_tree[2*$]++:S.bl_tree[2*se]++,he=B,c=(fe=0)===xe?(we=138,3):B===xe?(we=6,3):(we=7,4))}function _(S,R,pe){var de,B,he=-1,xe=R[1],fe=0,we=7,c=4;for(0===xe&&(we=138,c=3),de=0;de<=pe;de++)if(B=xe,xe=R[2*(de+1)+1],!(++fe<we&&B===xe)){if(fe<c)for(;F(S,B,S.bl_tree),0!=--fe;);else 0!==B?(B!==he&&(F(S,B,S.bl_tree),fe--),F(S,K,S.bl_tree),A(S,fe-3,2)):fe<=10?(F(S,$,S.bl_tree),A(S,fe-3,3)):(F(S,se,S.bl_tree),A(S,fe-11,7));he=B,c=(fe=0)===xe?(we=138,3):B===xe?(we=6,3):(we=7,4)}}E(Ce);var w=!1;function b(S,R,pe,de){var B,he,xe,fe;A(S,(u<<1)+(de?1:0),3),he=R,xe=pe,fe=!0,Le(B=S),fe&&(d(B,xe),d(B,~xe)),O.arraySet(B.pending_buf,B.window,he,xe,B.pending),B.pending+=xe}m._tr_init=function(S){w||(function(){var R,pe,de,B,he,xe=new Array(N+1);for(B=de=0;B<H-1;B++)for(ce[B]=de,R=0;R<1<<ae[B];R++)x[de++]=B;for(x[de-1]=B,B=he=0;B<16;B++)for(Ce[B]=he,R=0;R<1<<ge[B];R++)le[he++]=B;for(he>>=7;B<Z;B++)for(Ce[B]=he<<7,R=0;R<1<<ge[B]-7;R++)le[256+he++]=B;for(pe=0;pe<=N;pe++)xe[pe]=0;for(R=0;R<=143;)ze[2*R+1]=8,R++,xe[8]++;for(;R<=255;)ze[2*R+1]=9,R++,xe[9]++;for(;R<=279;)ze[2*R+1]=7,R++,xe[7]++;for(;R<=287;)ze[2*R+1]=8,R++,xe[8]++;for(z(ze,Q+1,xe),R=0;R<Z;R++)I[2*R+1]=5,I[2*R]=ne(R,5);Se=new Pe(ze,ae,e+1,Q,N),ue=new Pe(I,ge,0,Z,N),Ee=new Pe(new Array(0),oe,0,f,h)}(),w=!0),S.l_desc=new X(S.dyn_ltree,Se),S.d_desc=new X(S.dyn_dtree,ue),S.bl_desc=new X(S.bl_tree,Ee),S.bi_buf=0,S.bi_valid=0,Ne(S)},m._tr_stored_block=b,m._tr_flush_block=function(S,R,pe,de){var B,he,xe=0;0<S.level?(2===S.strm.data_type&&(S.strm.data_type=function(fe){var we,c=4093624447;for(we=0;we<=31;we++,c>>>=1)if(1&c&&0!==fe.dyn_ltree[2*we])return J;if(0!==fe.dyn_ltree[18]||0!==fe.dyn_ltree[20]||0!==fe.dyn_ltree[26])return P;for(we=32;we<e;we++)if(0!==fe.dyn_ltree[2*we])return P;return J}(S)),re(S,S.l_desc),re(S,S.d_desc),xe=function(fe){var we;for(g(fe,fe.dyn_ltree,fe.l_desc.max_code),g(fe,fe.dyn_dtree,fe.d_desc.max_code),re(fe,fe.bl_desc),we=f-1;3<=we&&0===fe.bl_tree[2*ve[we]+1];we--);return fe.opt_len+=3*(we+1)+5+5+4,we}(S),B=S.opt_len+3+7>>>3,(he=S.static_len+3+7>>>3)<=B&&(B=he)):B=he=pe+5,pe+4<=B&&-1!==R?b(S,R,pe,de):4===S.strategy||he===B?(A(S,2+(de?1:0),3),M(S,ze,I)):(A(S,4+(de?1:0),3),function(fe,we,c,Ae){var Me;for(A(fe,we-257,5),A(fe,c-1,5),A(fe,Ae-4,4),Me=0;Me<Ae;Me++)A(fe,fe.bl_tree[2*ve[Me]+1],3);_(fe,fe.dyn_ltree,we-1),_(fe,fe.dyn_dtree,c-1)}(S,S.l_desc.max_code+1,S.d_desc.max_code+1,xe+1),M(S,S.dyn_ltree,S.dyn_dtree)),Ne(S),de&&Le(S)},m._tr_tally=function(S,R,pe){return S.pending_buf[S.d_buf+2*S.last_lit]=R>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&R,S.pending_buf[S.l_buf+S.last_lit]=255&pe,S.last_lit++,0===R?S.dyn_ltree[2*pe]++:(S.matches++,R--,S.dyn_ltree[2*(x[pe]+e+1)]++,S.dyn_dtree[2*v(R)]++),S.last_lit===S.lit_bufsize-1},m._tr_align=function(S){var R;A(S,2,3),F(S,q,ze),16===(R=S).bi_valid?(d(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}},{"../utils/common":41}],53:[function(U,Y,m){"use strict";Y.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(U,Y,m){(function(O){!function(J,P){"use strict";if(!J.setImmediate){var E,u,H,e,Q=1,Z={},f=!1,C=J.document,N=Object.getPrototypeOf&&Object.getPrototypeOf(J);N=N&&N.setTimeout?N:J,E="[object process]"==={}.toString.call(J.process)?function(K){process.nextTick(function(){h(K)})}:function(){if(J.postMessage&&!J.importScripts){var K=!0,$=J.onmessage;return J.onmessage=function(){K=!1},J.postMessage("","*"),J.onmessage=$,K}}()?(e="setImmediate$"+Math.random()+"$",J.addEventListener?J.addEventListener("message",q,!1):J.attachEvent("onmessage",q),function(K){J.postMessage(e+K,"*")}):J.MessageChannel?((H=new MessageChannel).port1.onmessage=function(K){h(K.data)},function(K){H.port2.postMessage(K)}):C&&"onreadystatechange"in C.createElement("script")?(u=C.documentElement,function(K){var $=C.createElement("script");$.onreadystatechange=function(){h(K),$.onreadystatechange=null,u.removeChild($),$=null},u.appendChild($)}):function(K){setTimeout(h,0,K)},N.setImmediate=function(K){"function"!=typeof K&&(K=new Function(""+K));for(var $=new Array(arguments.length-1),se=0;se<$.length;se++)$[se]=arguments[se+1];var ae={callback:K,args:$};return Z[Q]=ae,E(Q),Q++},N.clearImmediate=k}function k(K){delete Z[K]}function h(K){if(f)setTimeout(h,0,K);else{var $=Z[K];if($){f=!0;try{!function(se){var ae=se.callback,ge=se.args;switch(ge.length){case 0:ae();break;case 1:ae(ge[0]);break;case 2:ae(ge[0],ge[1]);break;case 3:ae(ge[0],ge[1],ge[2]);break;default:ae.apply(P,ge)}}($)}finally{k(K),f=!1}}}}function q(K){K.source===J&&"string"==typeof K.data&&0===K.data.indexOf(e)&&h(+K.data.slice(e.length))}}(typeof self>"u"?void 0===O?this:O:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}}]);
//# sourceMappingURL=698.9e560a2228a56254.js.map