"use strict";(self.webpackChunkwelcome_sbm=self.webpackChunkwelcome_sbm||[]).push([[213],{27513:(tt,F,_)=>{_.d(F,{Q:()=>gt});var e=_(86825),t=_(65879),g=_(16676),p=_(78645),n=_(14090),y=_(85494),r=_(3743),x=_(6556),O=_(86107),w=_(19209),q=_(85105),z=_(93724),k=_(2214),f=_(2353),T=_(96814),B=_(59162),N=_(30724),V=_(94505),W=_(84187),Z=_(42400),R=_(24678),E=_(38034),Q=_(48424),S=_(16718),L=_(30481),Y=_(56223),ot=_(22165),et=_(46880),at=_(90110),it=_(89515);function rt(c,a){1&c&&(t.TgZ(0,"div",11)(1,"span",4),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&c&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"booking.bambini")))}function st(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div",22)(1,"button",16),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().index,D=t.oxw();return t.KtG(D.onNumeroBambiniChange(l,!1,D.camere[l].numeroBambini-1))}),t.TgZ(2,"i",9),t._uU(3,"remove_circle_outline"),t.qZA()(),t.TgZ(4,"span",17),t._uU(5),t.qZA(),t.TgZ(6,"button",16),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().index,D=t.oxw();return t.KtG(D.onNumeroBambiniChange(l,!0,D.camere[l].numeroBambini+1))}),t.TgZ(7,"i",9),t._uU(8,"add_circle_outline"),t.qZA()()()}if(2&c){const i=t.oxw().index,s=t.oxw();t.xp6(1),t.Q6J("disabled",s.camere[i].numeroBambini<=0),t.xp6(4),t.Oqu(s.camere[i].numeroBambini),t.xp6(1),t.Q6J("disabled",s.camere[i].numeroAdulti+s.camere[i].numeroBambini>=12||s.bambiniMax>0&&s.camere[i].numeroBambini>=s.bambiniMax)}}function ct(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div",23)(1,"button",24),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().index,D=t.oxw();return t.KtG(D.onCameraRemove(l))}),t.TgZ(2,"i",25),t._uU(3,"clear"),t.qZA()()()}}function _t(c,a){1&c&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"booking.etaBambini")," "))}function nt(c,a){1&c&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"booking.bambini")," "))}function G(c,a){if(1&c&&(t.TgZ(0,"div",13)(1,"div",26),t.YNc(2,_t,3,3,"ng-container",21),t.YNc(3,nt,3,3,"ng-container",21),t.qZA()()),2&c){const i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",i.isEtaRiduzioniAttiva),t.xp6(1),t.Q6J("ngIf",!i.isEtaRiduzioniAttiva)}}function A(c,a){if(1&c&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&c){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}const m=function(c,a){return{"pl-3":c,"pr-3":a}};function v(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div",29)(1,"mat-form-field",30)(2,"mat-select",31),t.NdJ("selectionChange",function(){t.CHM(i);const l=t.oxw(5);return t.KtG(l.onCamereChange())})("ngModelChange",function(l){t.CHM(i);const D=t.oxw(2).$implicit,P=t.oxw(2).index,U=t.oxw();return t.KtG(U.camere[P].pax[D].eta=l)}),t.YNc(3,A,2,2,"mat-option",32),t.qZA()()()}if(2&c){const i=t.oxw(2).$implicit,s=t.oxw(2).index,l=t.oxw();t.Q6J("ngClass",t.WLB(4,m,(i-1)%3==0,i%3==0)),t.xp6(2),t.Q6J("panelClass","booking-select")("ngModel",l.camere[s].pax[i].eta),t.xp6(1),t.Q6J("ngForOf",l.utilityService.counterFromTo(l.etaMinimaBambini,l.etaMassimaBambini))}}function b(c,a){if(1&c&&(t.ynx(0),t.YNc(1,v,4,7,"div",28),t.BQk()),2&c){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",i>0)}}function I(c,a){if(1&c&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&c){const i=a.$implicit;t.Q6J("value",i.reductionId),t.xp6(1),t.hij(" ",i.nome," ")}}function J(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div",35)(1,"mat-form-field",36)(2,"mat-select",31),t.NdJ("selectionChange",function(){t.CHM(i);const l=t.oxw(5);return t.KtG(l.onCamereChange())})("ngModelChange",function(l){t.CHM(i);const D=t.oxw(2).$implicit,P=t.oxw(2).index,U=t.oxw();return t.KtG(U.camere[P].pax[D].oid=l)}),t.YNc(3,I,2,2,"mat-option",32),t.qZA()()()}if(2&c){const i=t.oxw(2).$implicit,s=t.oxw(2).index,l=t.oxw();t.xp6(2),t.Q6J("panelClass","booking-select")("ngModel",l.camere[s].pax[i].oid),t.xp6(1),t.Q6J("ngForOf",l.riduzioni)}}function H(c,a){if(1&c&&(t.ynx(0),t.YNc(1,J,4,3,"div",34),t.BQk()),2&c){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",i>0)}}function dt(c,a){1&c&&t._UZ(0,"div",37)}function bt(c,a){if(1&c&&(t.ynx(0),t.YNc(1,b,2,1,"ng-container",21),t.YNc(2,H,2,1,"ng-container",21),t.YNc(3,dt,1,0,"div",27),t.BQk()),2&c){const i=a.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",s.isEtaRiduzioniAttiva),t.xp6(1),t.Q6J("ngIf",!s.isEtaRiduzioniAttiva),t.xp6(1),t.Q6J("ngIf",i<=0)}}function vt(c,a){if(1&c&&(t.ynx(0),t.YNc(1,bt,4,3,"ng-container",6),t.BQk()),2&c){const i=t.oxw().index,s=t.oxw();t.xp6(1),t.Q6J("ngForOf",s.bambini[i])}}function xt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",12)(2,"div",13)(3,"div",14),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",15)(7,"button",16),t.NdJ("click",function(){const D=t.CHM(i).index,P=t.oxw();return t.KtG(P.onNumeroAdultiChange(D,P.camere[D].numeroAdulti-1))}),t.TgZ(8,"i",9),t._uU(9,"remove_circle_outline"),t.qZA()(),t.TgZ(10,"span",17),t._uU(11),t.qZA(),t.TgZ(12,"button",16),t.NdJ("click",function(){const D=t.CHM(i).index,P=t.oxw();return t.KtG(P.onNumeroAdultiChange(D,P.camere[D].numeroAdulti+1))}),t.TgZ(13,"i",9),t._uU(14,"add_circle_outline"),t.qZA()()(),t.YNc(15,st,9,3,"div",18),t.YNc(16,ct,4,0,"div",19),t.YNc(17,G,4,2,"div",20),t.YNc(18,vt,2,1,"ng-container",21),t.qZA(),t.BQk()}if(2&c){const i=a.index,s=t.oxw();t.xp6(4),t.hij("",t.lcZ(5,8,(s.dayUse?"booking-day-use":"booking")+".camera")+" "+(i+1)," "),t.xp6(3),t.Q6J("disabled",s.camere[i].numeroAdulti<=1),t.xp6(4),t.Oqu(s.camere[i].numeroAdulti),t.xp6(1),t.Q6J("disabled",s.camere[i].numeroAdulti+s.camere[i].numeroBambini>=12||s.adultiMax>0&&s.camere[i].numeroAdulti>=s.adultiMax),t.xp6(3),t.Q6J("ngIf",!s.isDisattivaRichiestaBambini),t.xp6(1),t.Q6J("ngIf",s.camere.length>1),t.xp6(1),t.Q6J("ngIf",s.camere[i].numeroBambini>0),t.xp6(1),t.Q6J("ngIf",s.camere[i].numeroBambini>0)}}const Mt=function(c){return{"add-room-disabled":c}};class mt{set _camerePrenotabili(a){null!=a&&(this.camerePrenotabili=a<=0?10:Math.min(a,10))}constructor(a){this.utilityService=a,this.paxChanged=new t.vpe,this.camere=[],this.bambini=[],this.camerePrenotabili=10}ngOnInit(){let a=!1;if(null!=this.camereUrl&&this.camereUrl.length>0){this.camereUrl=this.camereUrl.slice(0,this.camerePrenotabili);for(let i of this.camereUrl)if(i.adulti>0){i.adulti=Math.min(i.adulti,this.adultiMax>0?Math.min(this.adultiMax,12):12),a=!0;let s=new O.Esx(i.adulti);if(null!=i.bambini&&i.bambini.length>0){let l=0;for(let P of i.bambini)if(P.quantita>0&&P.eta>=0)for(let U=0;U<P.quantita&&!(this.bambiniMax>0&&l+1>this.bambiniMax||l+1+i.adulti>12);U++){let X=new O.CIA;X.quantita=1,X.eta=Math.max(P.eta,this.etaMinimaBambini),X.eta=Math.min(P.eta,this.etaMassimaBambini),s.pax.push(X),l++}let D=[];for(let P=1,U=1;U<=l;P++)P%4>0?(D.push(U),U++):D.push(-1);this.bambini.push(D)}this.camere.push(s)}}a?(this.isEtaRiduzioniAttiva=!0,this.onCamereChange()):this.onCameraAdd()}onNumeroBambiniChange(a,i,s){let l=[],D=this.isEtaRiduzioniAttiva?4:2;for(let P=1,U=1;U<=s;P++)P%D>0?(l.push(U),U++):l.push(-1);if(i){let P=new O.CIA;P.eta=this.etaMinimaBambini,P.quantita=1,!this.isEtaRiduzioniAttiva&&null!=this.riduzioni&&this.riduzioni.length>0&&(P.oid=this.riduzioni[0].reductionId),this.camere[a].pax.push(P)}else this.camere[a].pax.pop();this.bambini[a]=l,this.onCamereChange()}onNumeroAdultiChange(a,i){this.camere[a].pax[0].quantita=i,this.onCamereChange()}onCameraAdd(){this.camere.length<this.camerePrenotabili&&(this.camere.push(new O.Esx(this.adultiDefault)),this.bambini.push([]),this.onCamereChange())}onCameraRemove(a){this.camere.splice(a,1),this.bambini.splice(a,1),this.onCamereChange()}onCamereChange(){this.paxChanged.emit(this.camere)}}mt.\u0275fac=function(a){return new(a||mt)(t.Y36(f.t))},mt.\u0275cmp=t.Xpm({type:mt,selectors:[["app-booking-room-select"]],inputs:{adultiDefault:"adultiDefault",adultiMax:"adultiMax",bambiniMax:"bambiniMax",etaMinimaBambini:"etaMinimaBambini",etaMassimaBambini:"etaMassimaBambini",camereUrl:"camereUrl",isEtaRiduzioniAttiva:"isEtaRiduzioniAttiva",riduzioni:"riduzioni",isDisattivaRichiestaBambini:"isDisattivaRichiestaBambini",dayUse:"dayUse",_camerePrenotabili:"_camerePrenotabili"},outputs:{paxChanged:"paxChanged"},decls:16,vars:12,consts:[[1,"container-fluid","p-0","room-select-container"],[1,"row","mb-1"],[1,"col-3"],[1,"col-4","text-center","div-adulti"],[1,"font-weight-bold","color-blue","adultiBambini"],["class","col-4 text-center div-bambini",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mt-2","pb-2","div-aggiungiCamera"],["mat-icon-button","",1,"add-minus-button","add-room-button","align-middle",3,"disabled","click"],[1,"material-icons-round","add-minus-icon"],[1,"color-blue","align-middle","aggiungiCamera",3,"ngClass","click"],[1,"col-4","text-center","div-bambini"],[1,"row"],[1,"col-3","pr-0","pt-1","pb-1"],[1,"font-weight-bold","camera"],[1,"col-4","text-center","pt-1","pb-1","control-adulti"],["mat-icon-button","",1,"add-minus-button",3,"disabled","click"],[1,"align-middle","mr-1","ml-1"],["class","col-4 text-center pt-1 pb-1 control-bambini",4,"ngIf"],["class","col-1 p-0 ml-n3 pt-1 pb-1",4,"ngIf"],["class","col-3 pr-0 pt-1 pb-1",4,"ngIf"],[4,"ngIf"],[1,"col-4","text-center","pt-1","pb-1","control-bambini"],[1,"col-1","p-0","ml-n3","pt-1","pb-1"],["mat-icon-button","",1,"delete-button",3,"click"],[1,"material-icons-round"],[1,"etaBambini","mt-1"],["class","col-3 pt-1 pb-1",4,"ngIf"],["class","col-3 text-center p-0 pt-1 pb-1",3,"ngClass",4,"ngIf"],[1,"col-3","text-center","p-0","pt-1","pb-1",3,"ngClass"],[1,"child-age-select"],[3,"panelClass","ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","col-9 pt-1 pb-1 pl-3 pr-3",4,"ngIf"],[1,"col-9","pt-1","pb-1","pl-3","pr-3"],[1,"room-select-riduzione-select"],[1,"col-3","pt-1","pb-1"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"span",4),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.YNc(7,rt,4,3,"div",5),t.qZA(),t.YNc(8,xt,19,10,"ng-container",6),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){return i.onCameraAdd()}),t.TgZ(11,"i",9),t._uU(12,"add_circle_outline"),t.qZA()(),t.TgZ(13,"span",10),t.NdJ("click",function(){return i.onCameraAdd()}),t._uU(14),t.ALo(15,"translate"),t.qZA()()()),2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,6,"booking.adulti")),t.xp6(2),t.Q6J("ngIf",!i.isDisattivaRichiestaBambini),t.xp6(1),t.Q6J("ngForOf",i.camere),t.xp6(2),t.Q6J("disabled",i.camere.length>=i.camerePrenotabili),t.xp6(3),t.Q6J("ngClass",t.VKq(10,Mt,i.camere.length>=i.camerePrenotabili)),t.xp6(1),t.hij(" ",t.lcZ(15,8,"booking.aggiungiCamera")," "))},dependencies:[T.mk,T.sg,T.O5,V.eB,W.v_,R.CK,Q.x8,Y.JJ,Y.On,it.X$],styles:[".etaBambini[_ngcontent-%COMP%]{font-size:14px;color:gray;white-space:nowrap}.add-minus-button[_ngcontent-%COMP%]{width:18px!important;height:18px!important;line-height:18px!important}.add-minus-icon[_ngcontent-%COMP%]{font-size:18px!important;line-height:18px!important}.add-minus-button[_ngcontent-%COMP%]:enabled{color:#666!important}.delete-button[_ngcontent-%COMP%]{width:24px!important;height:24px!important;line-height:24px!important;color:#d9534f!important}.add-room-disabled[_ngcontent-%COMP%]{color:#00000042!important;cursor:default!important}.add-room-button[_ngcontent-%COMP%]{margin-top:.1rem!important}.add-room-button[_ngcontent-%COMP%]:enabled{color:#004987!important}.camera[_ngcontent-%COMP%]{white-space:nowrap!important;font-size:18px}@media (min-height: 850px){.div-aggiungiCamera[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc;padding-bottom:1rem}}.aggiungiCamera[_ngcontent-%COMP%]{cursor:pointer}.adultiBambini[_ngcontent-%COMP%]{font-size:18px}.child-age-select[_ngcontent-%COMP%]{width:47px!important}  .child-age-select .mat-form-field-infix{border-top:0!important;padding-top:.25rem!important;padding-bottom:.25rem!important}  .child-age-select .mat-form-field-flex{border:1px solid #bbbbbb!important;border-radius:7px!important;padding-left:.25rem!important;padding-right:.25rem!important;height:27px!important}  .child-age-select .mat-form-field-underline{visibility:hidden!important}  .child-age-select .mat-form-field-wrapper{padding-bottom:0!important}.room-select-riduzione-select[_ngcontent-%COMP%]{width:100%}  .room-select-riduzione-select .mat-form-field-infix{border-top:0!important;padding-top:.25rem!important;padding-bottom:.25rem!important}  .room-select-riduzione-select .mat-form-field-flex{border:1px solid #bbbbbb!important;border-radius:7px!important;padding-left:.25rem!important;padding-right:.25rem!important;height:27px!important}  .room-select-riduzione-select .mat-form-field-underline{visibility:hidden!important}  .room-select-riduzione-select .mat-form-field-wrapper{padding-bottom:0!important}.bambino-col[_ngcontent-%COMP%]{position:relative;width:100%;flex:0 0 22.222222%;max-width:22.222222%}"]});var Tt=_(1477),Dt=_(79474);const yt=["arrivo"],Pt=["partenza"],Ot=["emailLabel"];function At(c,a){1&c&&(t.ynx(0),t.TgZ(1,"div",30)(2,"span",31),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",32)(6,"span",31),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",33)(10,"span",31),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.BQk()),2&c&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"booking.arrivo")),t.xp6(4),t.Oqu(t.lcZ(8,5,"booking.partenza")),t.xp6(4),t.Oqu(t.lcZ(12,7,"booking.numeroNotti")))}function Et(c,a){1&c&&(t.ynx(0),t.TgZ(1,"div",34)(2,"span",31),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.BQk()),2&c&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"booking.arrivo")))}function wt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"span",41),t.NdJ("click",function(){t.CHM(i),t.oxw();const l=t.MAs(7);return t.KtG(l.open())}),t._uU(2,"---"),t.qZA(),t.BQk()}}function Bt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",42),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.minusFromMobile())}),t.TgZ(2,"i",12),t._uU(3,"keyboard_arrow_left"),t.qZA()(),t.TgZ(4,"span",43),t.NdJ("click",function(){t.CHM(i),t.oxw();const l=t.MAs(7);return t.KtG(l.open())}),t._uU(5),t.ALo(6,"titlecase"),t.ALo(7,"momentFormat"),t.qZA(),t.TgZ(8,"button",44),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.addFromMobile())}),t.TgZ(9,"i",12),t._uU(10,"keyboard_arrow_right"),t.qZA()(),t.BQk()}if(2&c){const i=t.oxw(3);t.xp6(1),t.Q6J("disabled",i.minusFromButtonDisabled),t.xp6(4),t.Oqu(t.lcZ(6,3,t.Dn7(7,5,i.rq.arrivo,"DD MMM YYYY",i.getLocale()))),t.xp6(3),t.Q6J("disabled",i.addFromButtonDisabled)}}function kt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"span",41),t.NdJ("click",function(){t.CHM(i),t.oxw();const l=t.MAs(13);return t.KtG(l.open())}),t._uU(2,"---"),t.qZA(),t.BQk()}}function Zt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",42),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.minusToMobile())}),t.TgZ(2,"i",12),t._uU(3,"keyboard_arrow_left"),t.qZA()(),t.TgZ(4,"span",43),t.NdJ("click",function(){t.CHM(i),t.oxw();const l=t.MAs(13);return t.KtG(l.open())}),t._uU(5),t.ALo(6,"titlecase"),t.ALo(7,"momentFormat"),t.qZA(),t.TgZ(8,"button",44),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.addToMobile())}),t.TgZ(9,"i",12),t._uU(10,"keyboard_arrow_right"),t.qZA()(),t.BQk()}if(2&c){const i=t.oxw(3);t.xp6(1),t.Q6J("disabled",i.minusToButtonDisabled),t.xp6(4),t.Oqu(t.lcZ(6,3,t.Dn7(7,5,i.rq.partenza,"DD MMM YYYY",i.getLocale()))),t.xp6(3),t.Q6J("disabled",!1)}}function It(c,a){1&c&&(t.ynx(0),t._uU(1," --- "),t.BQk())}function zt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",42),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.minusFrom())}),t.TgZ(2,"i",12),t._uU(3,"keyboard_arrow_left"),t.qZA()(),t.TgZ(4,"span",45),t._uU(5),t.ALo(6,"titlecase"),t.ALo(7,"momentFormat"),t.qZA(),t.TgZ(8,"button",44),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.addFrom())}),t.TgZ(9,"i",12),t._uU(10,"keyboard_arrow_right"),t.qZA()(),t.BQk()}if(2&c){const i=t.oxw(3);t.xp6(1),t.Q6J("disabled",i.minusFromButtonDisabled),t.xp6(4),t.Oqu(t.lcZ(6,3,t.Dn7(7,5,i.rq.arrivo,"DD MMM YYYY",i.getLocale()))),t.xp6(3),t.Q6J("disabled",i.addFromButtonDisabled)}}function Rt(c,a){1&c&&(t.ynx(0),t._uU(1," --- "),t.BQk())}function St(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",42),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.minusTo())}),t.TgZ(2,"i",12),t._uU(3,"keyboard_arrow_left"),t.qZA()(),t.TgZ(4,"span",45),t._uU(5),t.ALo(6,"titlecase"),t.ALo(7,"momentFormat"),t.qZA(),t.TgZ(8,"button",44),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.addTo())}),t.TgZ(9,"i",12),t._uU(10,"keyboard_arrow_right"),t.qZA()(),t.BQk()}if(2&c){const i=t.oxw(3);t.xp6(1),t.Q6J("disabled",i.minusToButtonDisabled),t.xp6(4),t.Oqu(t.lcZ(6,3,t.Dn7(7,5,i.rq.partenza,"DD MMM YYYY",i.getLocale()))),t.xp6(3),t.Q6J("disabled",i.addToButtonDisabled)}}function qt(c,a){1&c&&(t.ynx(0),t._uU(1," --- "),t.BQk())}function Lt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",46),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.minusTo())}),t.TgZ(2,"i",47),t._uU(3,"remove_circle_outline"),t.qZA()(),t.TgZ(4,"span",48),t._uU(5),t.qZA(),t.TgZ(6,"button",46),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.addTo())}),t.TgZ(7,"i",47),t._uU(8,"add_circle_outline"),t.qZA()(),t.BQk()}if(2&c){const i=t.oxw(3);t.xp6(1),t.Q6J("disabled",i.minusToButtonDisabled),t.xp6(4),t.Oqu(i.nights),t.xp6(1),t.Q6J("disabled",i.addToButtonDisabled)}}const ht=function(c,a){return{"d-flex d-lg-none":c,"d-none":a}},ft=function(c,a){return{"d-none d-lg-flex":c,"d-flex":a}};function Ut(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",35)(2,"div",36),t.YNc(3,wt,3,0,"ng-container",5),t.YNc(4,Bt,11,9,"ng-container",5),t.TgZ(5,"input",37),t.NdJ("dateChange",function(l){t.CHM(i);const D=t.oxw(2);return t.KtG(D.onArrivoChange(l.value))})("ngModelChange",function(l){t.CHM(i);const D=t.oxw(2);return t.KtG(D.arrivoDate=l)}),t.qZA(),t._UZ(6,"mat-datepicker",38,39),t.qZA(),t.TgZ(8,"div",36),t.YNc(9,kt,3,0,"ng-container",5),t.YNc(10,Zt,11,9,"ng-container",5),t.TgZ(11,"input",37),t.NdJ("dateChange",function(l){t.CHM(i);const D=t.oxw(2);return t.KtG(D.onPartenzaChange(l.value))})("ngModelChange",function(l){t.CHM(i);const D=t.oxw(2);return t.KtG(D.partenzaDate=l)}),t.qZA(),t._UZ(12,"mat-datepicker",38,40),t.qZA()(),t.TgZ(14,"div",35)(15,"div",30),t.YNc(16,It,2,0,"ng-container",5),t.YNc(17,zt,11,9,"ng-container",5),t.qZA(),t.TgZ(18,"div",32),t.YNc(19,Rt,2,0,"ng-container",5),t.YNc(20,St,11,9,"ng-container",5),t.qZA(),t.TgZ(21,"div",33),t.YNc(22,qt,2,0,"ng-container",5),t.YNc(23,Lt,9,3,"ng-container",5),t.qZA()(),t.BQk()}if(2&c){const i=t.MAs(7),s=t.MAs(13),l=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(24,ht,!l.isVisualizzaCalendarioMobile,l.isVisualizzaCalendarioMobile)),t.xp6(2),t.Q6J("ngIf",!l.rq.arrivo),t.xp6(1),t.Q6J("ngIf",!!l.rq.arrivo),t.xp6(1),t.Q6J("matDatepicker",i)("hidden",!0)("ngModel",l.arrivoDate),t.xp6(1),t.Q6J("startAt",l.rq.arrivo?l.rq.arrivo:l.today)("touchUi",!0)("panelClass","booking-datepicker"),t.xp6(3),t.Q6J("ngIf",!l.rq.partenza),t.xp6(1),t.Q6J("ngIf",!!l.rq.partenza),t.xp6(1),t.Q6J("matDatepicker",s)("hidden",!0)("ngModel",l.partenzaDate),t.xp6(1),t.Q6J("startAt",l.rq.partenza?l.rq.partenza:l.today)("touchUi",!0)("panelClass","booking-datepicker"),t.xp6(2),t.Q6J("ngClass",t.WLB(27,ft,!l.isVisualizzaCalendarioMobile,l.isVisualizzaCalendarioMobile)),t.xp6(2),t.Q6J("ngIf",!l.rq.arrivo),t.xp6(1),t.Q6J("ngIf",!!l.rq.arrivo),t.xp6(2),t.Q6J("ngIf",!l.rq.partenza),t.xp6(1),t.Q6J("ngIf",!!l.rq.partenza),t.xp6(2),t.Q6J("ngIf",!l.rq.arrivo||!l.rq.partenza||!l.nights),t.xp6(1),t.Q6J("ngIf",!!l.rq.arrivo&&!!l.rq.partenza&&!!l.nights)}}function Jt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"span",41),t.NdJ("click",function(){t.CHM(i),t.oxw();const l=t.MAs(7);return t.KtG(l.open())}),t._uU(2,"---"),t.qZA(),t.BQk()}}function Nt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",50),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.minusFromMobile())}),t.TgZ(2,"i",12),t._uU(3,"keyboard_arrow_left"),t.qZA()(),t.TgZ(4,"span",51),t.NdJ("click",function(){t.CHM(i),t.oxw();const l=t.MAs(7);return t.KtG(l.open())}),t._uU(5),t.ALo(6,"titlecase"),t.ALo(7,"momentFormat"),t.qZA(),t.TgZ(8,"button",50),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.addFromMobile())}),t.TgZ(9,"i",12),t._uU(10,"keyboard_arrow_right"),t.qZA()(),t.BQk()}if(2&c){const i=t.oxw(3);t.xp6(1),t.Q6J("disabled",i.minusFromButtonDisabled),t.xp6(4),t.Oqu(t.lcZ(6,3,t.Dn7(7,5,i.rq.arrivo,"dddd, D MMMM",i.getLocale()))),t.xp6(3),t.Q6J("disabled",i.addFromButtonDisabled)}}function Ft(c,a){1&c&&(t.ynx(0),t._uU(1," --- "),t.BQk())}function Qt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",50),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.minusFrom())}),t.TgZ(2,"i",12),t._uU(3,"keyboard_arrow_left"),t.qZA()(),t.TgZ(4,"span",52),t._uU(5),t.ALo(6,"titlecase"),t.ALo(7,"momentFormat"),t.qZA(),t.TgZ(8,"button",50),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.addFrom())}),t.TgZ(9,"i",12),t._uU(10,"keyboard_arrow_right"),t.qZA()(),t.BQk()}if(2&c){const i=t.oxw(3);t.xp6(1),t.Q6J("disabled",i.minusFromButtonDisabled),t.xp6(4),t.Oqu(t.lcZ(6,3,t.Dn7(7,5,i.rq.arrivo,"dddd, D MMMM",i.getLocale()))),t.xp6(3),t.Q6J("disabled",i.addFromButtonDisabled)}}function Kt(c,a){if(1&c){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",35)(2,"div",49),t.YNc(3,Jt,3,0,"ng-container",5),t.YNc(4,Nt,11,9,"ng-container",5),t.TgZ(5,"input",37),t.NdJ("dateChange",function(l){t.CHM(i);const D=t.oxw(2);return t.KtG(D.onArrivoChange(l.value))})("ngModelChange",function(l){t.CHM(i);const D=t.oxw(2);return t.KtG(D.arrivoDate=l)}),t.qZA(),t._UZ(6,"mat-datepicker",38,39),t.qZA()(),t.TgZ(8,"div",35)(9,"div",34),t.YNc(10,Ft,2,0,"ng-container",5),t.YNc(11,Qt,11,9,"ng-container",5),t.qZA()(),t.BQk()}if(2&c){const i=t.MAs(7),s=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(12,ht,!s.isVisualizzaCalendarioMobile,s.isVisualizzaCalendarioMobile)),t.xp6(2),t.Q6J("ngIf",!s.rq.arrivo),t.xp6(1),t.Q6J("ngIf",!!s.rq.arrivo),t.xp6(1),t.Q6J("matDatepicker",i)("hidden",!0)("ngModel",s.arrivoDate),t.xp6(1),t.Q6J("startAt",s.rq.arrivo?s.rq.arrivo:s.today)("touchUi",!0)("panelClass","booking-datepicker"),t.xp6(2),t.Q6J("ngClass",t.WLB(15,ft,!s.isVisualizzaCalendarioMobile,s.isVisualizzaCalendarioMobile)),t.xp6(2),t.Q6J("ngIf",!s.rq.arrivo),t.xp6(1),t.Q6J("ngIf",!!s.rq.arrivo)}}function Vt(c,a){if(1&c&&(t.ynx(0),t.TgZ(1,"div",29),t.YNc(2,At,13,9,"ng-container",5),t.YNc(3,Et,5,3,"ng-container",5),t.qZA(),t.YNc(4,Ut,24,30,"ng-container",5),t.YNc(5,Kt,12,18,"ng-container",5),t.BQk()),2&c){const i=t.oxw();t.xp6(2),t.Q6J("ngIf",!i.dayUse),t.xp6(1),t.Q6J("ngIf",i.dayUse),t.xp6(1),t.Q6J("ngIf",!i.dayUse),t.xp6(1),t.Q6J("ngIf",i.dayUse)}}function Wt(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(l){const P=t.CHM(i).$implicit,U=t.oxw(),X=t.MAs(16);return l.stopPropagation(),U.date=U.utility.toDate(P),t.KtG(X.closeMenu())}),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"momentFormat"),t.qZA()}if(2&c){const i=a.$implicit,s=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,t.Dn7(3,3,i,"MMMM YYYY",s.getLocale())))}}function Yt(c,a){if(1&c&&(t.TgZ(0,"span",62),t._uU(1),t.qZA()),2&c){const i=t.oxw(3);t.xp6(1),t.Oqu(i.nights)}}function pt(c,a){1&c&&(t.TgZ(0,"span",63),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"booking.notti")))}function h(c,a){1&c&&t._UZ(0,"span",64)}function u(c,a){1&c&&(t.TgZ(0,"span",65),t._uU(1,"---"),t.qZA())}function o(c,a){if(1&c&&(t.TgZ(0,"span",62),t._uU(1),t.TgZ(2,"small",66),t._uU(3),t.qZA()()),2&c){const i=t.oxw(3);t.xp6(1),t.Oqu(i.utility.getValuta(i.valuta)+i.utility.getPriceIntegerPart(i.prezzoMinimo)),t.xp6(2),t.Oqu(","+i.utility.getPriceDecimalPart(i.prezzoMinimo))}}const C=function(c){return{"d-none d-lg-block":c}};function d(c,a){if(1&c&&(t.TgZ(0,"div",56),t.YNc(1,Yt,2,1,"span",57),t.YNc(2,pt,3,3,"span",58),t.TgZ(3,"span",59),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,h,1,0,"span",60),t.YNc(7,u,2,0,"span",61),t.YNc(8,o,4,2,"span",57),t.qZA()),2&c){const i=t.oxw(2);t.Q6J("ngClass",t.VKq(9,C,!i.isVisualizzaCalendarioMobile)),t.xp6(1),t.Q6J("ngIf",!i.dayUse),t.xp6(1),t.Q6J("ngIf",!i.dayUse),t.xp6(2),t.Oqu(t.lcZ(5,7,"booking.aPartireDa")),t.xp6(2),t.Q6J("ngIf",null==i.prezzoMinimo&&!i.prezzoCalculated),t.xp6(1),t.Q6J("ngIf",null==i.prezzoMinimo&&i.prezzoCalculated),t.xp6(1),t.Q6J("ngIf",null!=i.prezzoMinimo)}}function M(c,a){if(1&c&&(t.TgZ(0,"div",67)(1,"span",52),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",68),t._uU(5," thumb_up "),t.qZA()()),2&c){const i=t.oxw(2);t.Q6J("ngClass",t.VKq(4,C,!i.isVisualizzaCalendarioMobile)),t.xp6(2),t.Oqu(t.lcZ(3,2,"booking.prezzoGarantito"))}}function K(c,a){if(1&c&&(t.ynx(0),t.YNc(1,d,9,11,"div",54),t.YNc(2,M,6,6,"div",55),t.BQk()),2&c){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!!i.rq.arrivo&&!!i.rq.partenza),t.xp6(1),t.Q6J("ngIf",!!i.rq.arrivo&&!!i.rq.partenza&&i.containerService.dimension.height>=850)}}function j(c,a){if(1&c&&(t.ynx(0),t.TgZ(1,"span",83),t._uU(2,"nights_stay"),t.qZA(),t.TgZ(3,"span",87),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.BQk()),2&c){const i=t.oxw(),s=i.$implicit,l=i.index;t.xp6(4),t.Oqu(s.notti+t.lcZ(5,1,0==l?"booking.notte":"booking.piuNotti"))}}function Gt(c,a){if(1&c&&(t.TgZ(0,"mat-option",91),t._uU(1),t.qZA()),2&c){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}function Ht(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"mat-form-field",88)(1,"mat-select",89),t.NdJ("ngModelChange",function(l){t.CHM(i);const D=t.oxw().$implicit;return t.KtG(D.notti=l)})("selectionChange",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.nightsChange())}),t.YNc(2,Gt,2,2,"mat-option",90),t.qZA()()}if(2&c){const i=t.oxw().$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("panelClass","booking-select")("ngModel",i.notti),t.xp6(1),t.Q6J("ngForOf",s.utility.counterFromTo(7,30))}}const jt=function(c,a){return{available:c,"not-available":a}};function $t(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div",78)(1,"div",79),t._UZ(2,"span",80),t.YNc(3,j,6,3,"ng-container",5),t.YNc(4,Ht,3,3,"mat-form-field",81),t.qZA(),t.TgZ(5,"div",82)(6,"span",83),t._uU(7,"logout"),t.qZA(),t.TgZ(8,"span",84),t._uU(9),t.ALo(10,"titlecase"),t.ALo(11,"momentFormat"),t.qZA()(),t.TgZ(12,"div",85)(13,"button",86),t.NdJ("click",function(){const D=t.CHM(i).$implicit,P=t.oxw(2);return t.KtG(P.nightsSelected(D.notti))}),t.TgZ(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"span",73),t._uU(18,"keyboard_arrow_right"),t.qZA()()()()}if(2&c){const i=a.$implicit,s=a.index,l=t.oxw(2);t.xp6(2),t.Q6J("ngClass",t.WLB(14,jt,i.isPrenotabile,!i.isPrenotabile)),t.xp6(1),t.Q6J("ngIf",s<l.disponibilitaNotti.length-1),t.xp6(1),t.Q6J("ngIf",s==l.disponibilitaNotti.length-1),t.xp6(5),t.Oqu(t.lcZ(10,6,t.Dn7(11,8,i.partenza,"ddd D MMM",l.getLocale()))),t.xp6(4),t.Q6J("disabled",!i.isPrenotabile),t.xp6(2),t.Oqu(t.lcZ(16,12,"booking.seleziona"))}}function Xt(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div")(1,"div",69)(2,"span",70),t._uU(3,"login"),t.qZA(),t.TgZ(4,"span",71),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"titlecase"),t.ALo(8,"momentFormat"),t.qZA(),t.TgZ(9,"button",72),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.nightsSelectionBack())}),t.TgZ(10,"span",73),t._uU(11,"keyboard_arrow_left"),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.TgZ(15,"div",74)(16,"div",75),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",76),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.YNc(22,$t,19,17,"div",77),t.qZA()}if(2&c){const i=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,5,"booking.arrivo")+": "+t.lcZ(7,7,t.Dn7(8,9,i.startDate,"ddd D MMM",i.getLocale()))),t.xp6(8),t.Oqu(t.lcZ(14,13,"booking.indietro")),t.xp6(4),t.hij(" ",t.lcZ(18,15,"booking.numeroNotti")," "),t.xp6(3),t.hij(" ",t.lcZ(21,17,"booking.partenza")," "),t.xp6(2),t.Q6J("ngForOf",i.disponibilitaNotti)}}function te(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div",97)(1,"div",98)(2,"label",99),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"input",100),t.NdJ("ngModelChange",function(l){t.CHM(i);const D=t.oxw(2);return t.KtG(D.rq.codicePromozione=l)})("input",function(){t.CHM(i);const l=t.oxw(2);return l.getPrezzoMinimo(),t.KtG(l.showSearchButton())}),t.qZA()()}if(2&c){const i=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,2,"booking.codicePromozionale")),t.xp6(2),t.Q6J("ngModel",i.rq.codicePromozione)}}function ee(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"button",101),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return t.KtG(l.openCodicePromozioneSelect())}),t.TgZ(1,"i",102),t._uU(2,"more_vert"),t.qZA()()}}function ie(c,a){if(1&c&&(t.TgZ(0,"mat-option",91),t._uU(1),t.qZA()),2&c){const i=a.$implicit;t.Q6J("value",i.oid),t.xp6(1),t.hij(" ",i.nome," ")}}function ne(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div",103)(1,"div",98)(2,"label",104),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"mat-form-field",105)(6,"mat-select",89),t.NdJ("ngModelChange",function(l){t.CHM(i);const D=t.oxw(2);return t.KtG(D.rq.oidMotivoViaggio=l)})("selectionChange",function(){t.CHM(i);const l=t.oxw(2);return l.getPrezzoMinimo(),t.KtG(l.showSearchButton())}),t._UZ(7,"mat-option",91),t.YNc(8,ie,2,2,"mat-option",90),t.qZA()()()}if(2&c){const i=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,5,"booking.motivoViaggio")),t.xp6(3),t.Q6J("panelClass","booking-select")("ngModel",i.rq.oidMotivoViaggio),t.xp6(1),t.Q6J("value",null),t.xp6(1),t.Q6J("ngForOf",i.motiviViaggio)}}const Ct=function(c){return{"col-650-6":c}};function oe(c,a){if(1&c&&(t.TgZ(0,"div",92)(1,"div",93),t.YNc(2,te,6,4,"div",94),t.YNc(3,ee,3,0,"button",95),t.qZA(),t.YNc(4,ne,9,7,"div",96),t.qZA()),2&c){const i=t.oxw();t.Q6J("ngClass",t.VKq(4,Ct,i.isBooking)),t.xp6(2),t.Q6J("ngIf",i.numeroCodiciPromozionali>0),t.xp6(1),t.Q6J("ngIf",!i.isBooking&&!!i.rq.arrivo&&!!i.rq.partenza),t.xp6(1),t.Q6J("ngIf",i.motiviViaggio.length>0)}}function ae(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"button",106),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.controllaDisponibilita())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&c){const i=t.oxw();t.Q6J("@blink",i.blinkStatus)("disabled",null==i.rq.arrivo||null==i.rq.partenza),t.xp6(1),t.Oqu(t.lcZ(2,3,"booking.controllaDisponibilita"))}}function re(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"a",116),t.NdJ("click",function(l){t.CHM(i);const D=t.oxw(2);return l.preventDefault(),t.KtG(D.sendRequest())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"booking.inviaRichiesta")," "))}function le(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div",107)(1,"div",108),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",109),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.utility.openUrlInNewTab(l.mappa))}),t.TgZ(5,"span",110),t._uU(6,"place"),t.qZA(),t.TgZ(7,"span",52)(8,"a",111),t.NdJ("click",function(l){return l.preventDefault()}),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"div",109),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.utility.callNumber(l.cellulare))}),t.TgZ(12,"span",110),t._uU(13,"phone_enabled"),t.qZA(),t.TgZ(14,"span",52),t._uU(15),t.qZA()(),t.TgZ(16,"div",112),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.utility.sendEmail(l.email))}),t.TgZ(17,"span",110),t._uU(18,"email"),t.qZA(),t.TgZ(19,"span",113,114),t._uU(21),t.qZA()(),t.YNc(22,re,3,3,"a",115),t.qZA()}if(2&c){const i=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,7,"booking.contatti")," "),t.xp6(7),t.Oqu(t.lcZ(10,9,"booking.mappa")),t.xp6(6),t.Oqu(i.cellulare?i.cellulare:"---"),t.xp6(4),t.Q6J("matTooltip",i.email)("matTooltipDisabled",!i.emailTooltipVisible),t.xp6(2),t.Oqu(i.email?i.email:"---"),t.xp6(1),t.Q6J("ngIf",i.isRichiediDisponibilitaStep1Visualizzata)}}function se(c,a){if(1&c&&(t.TgZ(0,"span",124),t._uU(1),t.ALo(2,"number"),t.qZA()),2&c){const i=t.oxw(2).day,s=t.oxw();t.xp6(1),t.Oqu(s.utility.getValuta(s.valuta)+t.xi3(2,1,s.minPrices.get(s.getDate(i.date)),"1.0-0"))}}function ce(c,a){if(1&c&&(t.TgZ(0,"span",122),t.YNc(1,se,3,4,"span",123),t.qZA()),2&c){const i=t.oxw().day,s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.minPrices.get(s.getDate(i.date))>=0)}}const _e=function(c){return{"cal-day-number-price":c}},de=function(c,a){return{"cal-day-number-inner-price":c,"cal-day-number-inner":a}};function me(c,a){if(1&c){const i=t.EpF();t.TgZ(0,"div",117),t.NdJ("mouseenter",function(){const D=t.CHM(i).day,P=t.oxw();return t.KtG(P.dayHover(D))}),t.TgZ(1,"div",118)(2,"span",119)(3,"span",120)(4,"span",20),t._uU(5),t.ALo(6,"momentFormat"),t.qZA()(),t.YNc(7,ce,2,1,"span",121),t.qZA()()()}if(2&c){const i=a.day,s=t.oxw(),l=t.MAs(40);t.Q6J("matTooltip",s.tooltips.get(s.getDate(i.date)))("matTooltipDisabled",!s.isVisualizzaDisponibilitaCalendario||!!i.cssClass&&(i.cssClass.includes("available")||i.cssClass.includes("not-available")))("tooltip",l)("display",s.dateClicked&&!!s.startDate)("hideDelay",0)("animationDuration",0),t.xp6(1),t.Q6J("setLineHeight",!0),t.xp6(2),t.Q6J("ngClass",t.VKq(15,_e,s.isVisualizzaPrezzoCalendario)),t.xp6(1),t.Q6J("ngClass",t.WLB(17,de,s.isVisualizzaPrezzoCalendario,!s.isVisualizzaPrezzoCalendario)),t.xp6(1),t.Oqu(t.Dn7(6,11,i.date,"D",s.getLocale())),t.xp6(2),t.Q6J("ngIf",s.isVisualizzaPrezzoCalendario)}}const pe=function(c){return{"font-weight-bold":c}};function ge(c,a){if(1&c&&(t.TgZ(0,"div",127),t._uU(1),t.ALo(2,"momentFormat"),t.qZA()),2&c){const i=a.$implicit,s=t.oxw(2);t.Q6J("ngClass",t.VKq(6,pe,i.isWeekend)),t.xp6(1),t.hij(" ",t.Dn7(2,2,i.date,"ddd",s.getLocale())," ")}}function ue(c,a){if(1&c&&(t.TgZ(0,"div",125),t.YNc(1,ge,3,8,"div",126),t.qZA()),2&c){const i=a.days;t.xp6(1),t.Q6J("ngForOf",i)}}function he(c,a){1&c&&t._UZ(0,"span",130)}function fe(c,a){1&c&&(t.TgZ(0,"span",65),t._uU(1,"---"),t.qZA())}function Ce(c,a){if(1&c&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"eurCurrency"),t.BQk()),2&c){const i=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,1,"booking.da")+t.Dn7(3,3,i.prezzoMinimo,null,i.valuta)," ")}}function be(c,a){if(1&c&&(t.ynx(0),t.TgZ(1,"div",62),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t.YNc(5,he,1,0,"span",129),t.YNc(6,fe,2,0,"span",61),t.YNc(7,Ce,4,7,"ng-container",5),t.qZA(),t.BQk()),2&c){const i=t.oxw(2);t.xp6(2),t.hij(" ",i.nights+t.lcZ(3,4,"booking.notti")," "),t.xp6(3),t.Q6J("ngIf",null==i.prezzoMinimo&&!i.prezzoCalculated),t.xp6(1),t.Q6J("ngIf",null==i.prezzoMinimo&&i.prezzoCalculated),t.xp6(1),t.Q6J("ngIf",null!=i.prezzoMinimo)}}function ve(c,a){if(1&c&&(t.TgZ(0,"div",62),t._UZ(1,"app-inner-html",131),t.qZA()),2&c){const i=t.oxw(2);t.xp6(1),t.Q6J("_text",i.translationService.getTranslationFromErrori(i.errors))}}function xe(c,a){if(1&c&&(t.TgZ(0,"div",128),t.YNc(1,be,8,6,"ng-container",5),t.YNc(2,ve,2,1,"div",57),t.qZA()),2&c){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",null==i.errors||0==i.errors.length),t.xp6(1),t.Q6J("ngIf",null!=i.errors&&i.errors.length>0)}}const Me=function(c){return{"mat-elevation-z5":c}},Te=function(c){return{"d-none d-lg-flex":c}};class gt extends n.H{set codicePromozione(a){null!=this.rq&&(a?(this.previousCodicePromozione=this.rq.codicePromozione,this.rq.codicePromozione=a):this.rq.codicePromozione=this.previousCodicePromozione,this.getPrezzoMinimo(),this.showSearchButton())}constructor(a,i,s,l,D){super(),this.apiService=a,this.translationService=i,this.containerService=s,this.sessionService=l,this.utility=D,this.isBooking=!0,this.hideButton=!0,this.daysSelected=new t.vpe,this.selectableMonths=[],this.dateClicked=!1,this.disponibilita=[],this.previousDisabled=!0,this.refresh=new p.x,this.tooltips=new Map,this.minPrices=new Map,this.numeroMinimoGiorniSelectedDaysPast=0,this.numeroMassimoGiorniSelectedDaysPast=null,this.notAvailablePast=!1,this.numeroMinimoGiorniSelectedDays=0,this.numeroMassimoGiorniSelectedDays=null,this.notAvailable=!1,this.prezzoMinimo=null,this.mobileBreakpoint=992,this.urlSearchParametersReceived=!1,this.searchButtonVisible=!0,this.emailTooltipVisible=!1}ngOnInit(){this.setIsLoading(!0),this.initialDate?this.date=this.utility.toDate(g(this.initialDate)):this.date=this.utility.toDate(g()),this.rq=new O.aK9(this.adultiDefault),this.rq.isBooking=this.isBooking;let a=g();a.set("date",1);for(let i=0;i<12;i++){let s=g(a);this.selectableMonths.push(s),s.add(i,"month")}null!=this.clickSubject&&(this.sub1=this.clickSubject.subscribe(()=>{this.dateClicked&&this.startDate&&!this.showNightsSelect&&(this.onSelectionError(),this.notAvailableDate=null)})),null!=this.showSearchButtonSubject&&(this.sub2=this.showSearchButtonSubject.subscribe(()=>{this.showSearchButton()})),this.sub=this.containerService.windowResizeEvent.subscribe(i=>{null!=this.datePickerArrivo&&this.datePickerArrivo.close(),null!=this.datePickerPartenza&&this.datePickerPartenza.close(),null!=this.previousWindowSize&&this.previousWindowSize<this.mobileBreakpoint&&i.width>=this.mobileBreakpoint&&!this.isVisualizzaCalendarioMobile&&(this.refresh.next(),this.rq.arrivo&&(this.date=this.utility.toDate(g(this.rq.arrivo))),this.rq.arrivo&&this.rq.partenza&&this.getPrezzoMinimo()),i.width<this.mobileBreakpoint&&!this.isVisualizzaCalendarioMobile&&this.checkDisabledButtonsMobile(),this.previousWindowSize=i.width}),this.previousWindowSize=this.containerService.dimension.width,this.rq.codicePromozione=this.codicePromozioneUrl,this.arrivoUrl&&this.partenzaUrl?(this.rq.arrivo=this.arrivoUrl,this.rq.partenza=this.partenzaUrl,this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.urlSearchParametersReceived=!0,this.date=this.utility.toDate(g(this.rq.arrivo))):this.containerService.dimension.width<this.mobileBreakpoint&&!this.isVisualizzaCalendarioMobile&&(this.dayUse?(this.rq.arrivo=this.getDate(g()),this.rq.partenza=this.rq.arrivo):(this.rq.arrivo=this.getDate(g()),this.rq.partenza=this.getDate(g().add(1,"day"))),this.nights=1,this.urlSearchParametersReceived=!0,this.checkDisabledButtonsMobile())}ngAfterViewInit(){setTimeout(()=>{null!=this.emailLabel&&(this.emailTooltipVisible=this.emailLabel.nativeElement.offsetWidth<this.emailLabel.nativeElement.scrollWidth)},200)}onRender(a){this.isVisualizzaDisponibilitaCalendario||this.isVisualizzaPrezzoCalendario?(this.isVisualizzaDisponibilitaCalendario&&(this.dateClicked&&this.startDate?(a[0].date.getFullYear()<this.days[0].date.getFullYear()?this.dayHover(this.days[0]):a[0].date.getFullYear()>this.days[0].date.getFullYear()?this.dayHover(this.days[this.days.length-1]):a[0].date.getMonth()<this.days[0].date.getMonth()?this.dayHover(this.days[0]):a[0].date.getMonth()>this.days[0].date.getMonth()&&this.dayHover(this.days[this.days.length-1]),this.notAvailablePast=this.notAvailable,this.numeroMinimoGiorniSelectedDaysPast=this.numeroMinimoGiorniSelectedDays,this.numeroMassimoGiorniSelectedDaysPast=this.numeroMassimoGiorniSelectedDays):this.urlSearchParametersReceived||this.controlDays()),this.getDisponibilita(a)):(this.days=a,this.disablePastDays(a),this.refreshSelection(a),!this.startDate&&!this.dateClicked&&this.checkDisabledButtons(),setTimeout(()=>{this.controllingDisponibility||this.setIsLoading(!1)},200)),setTimeout(()=>{window.dispatchEvent(new Event("resize"));let i=g();this.date.getMonth()<=i.month()&&this.date.getFullYear()<=i.year()?this.previousDisabled=!0:this.previousDisabled=!1},200)}dayClicked(a){let i=this.getDate(a.date);if(this.dateClicked)if(this.startDate!=i)if(this.rq.arrivo=g(i)<g(this.startDate)?i:this.startDate,this.rq.partenza=g(i)<g(this.startDate)?this.startDate:i,null==this.errors||0==this.errors.length){this.dateClicked=!1,this.startDate=null,this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1);for(let s of this.days)s.cssClass&&(s.cssClass=s.cssClass.replace("cal-day-outlined","cal-day-selected"));this.showSearchButton(),this.checkDisabledButtons()}else this.rq.arrivo=null,this.rq.partenza=null;else this.onSelectionError();else if(this.urlSearchParametersReceived=!1,(null==a.cssClass||null!=a.cssClass&&!a.cssClass.includes("not-available"))&&g(i)>=g().startOf("day"))if(this.dayUse){this.rq.arrivo=i,this.rq.partenza=i;let s=null;this.isVisualizzaDisponibilitaCalendario&&(s=this.controlDays()),null==s||0==s.length?(this.getPrezzoMinimo(),this.dateClicked=!1,this.startDate=null,this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.resetSelection(),a.cssClass=this.setCssClass(a.cssClass,"cal-day-outlined first-selected-day last-selected-day"),this.showSearchButton(),this.checkDisabledButtons()):(this.rq.arrivo=null,this.rq.partenza=null,this.daysControlReset())}else if(this.rq.arrivo=null,this.rq.partenza=null,this.nights=null,this.startDate=i,this.dateClicked=!0,this.resetSelection(),a.cssClass=this.setCssClass(a.cssClass,"cal-day-outlined first-selected-day last-selected-day"),this.daysControlReset(),this.prezzoMinimo=null,this.isProponiNottiCalendario){this.setIsLoading(!0);let s=new O.YDc;s.oidPortale=this.oidPortale,s.arrivo=i,this.apiService.getDisponibilitaNotti(s).subscribe(l=>{this.disponibilitaNotti=l.data,this.showNightsSelect=!0,this.setIsLoading(!1)})}}onSelectionError(){this.rq.arrivo=null,this.rq.partenza=null,this.nights=null,this.dateClicked=!1,this.startDate=null,this.prezzoMinimo=null,this.resetSelection(),this.daysControlReset()}daysControlReset(){this.numeroMinimoGiorniSelectedDays=0,this.numeroMassimoGiorniSelectedDays=null,this.notAvailable=!1,this.numeroMinimoGiorniSelectedDaysPast=0,this.numeroMassimoGiorniSelectedDaysPast=null,this.notAvailablePast=!1}daysControlResetCurrent(){this.numeroMinimoGiorniSelectedDays=0,this.numeroMassimoGiorniSelectedDays=null,this.notAvailable=!1}controlDays(a,i,s){if(this.rq.arrivo&&this.rq.partenza||this.dateClicked&&this.startDate&&a||i&&s){if(this.notAvailablePast){let $=new O.zRL;return $.idTraduzione="booking.periodoNonDisponibile",[$]}this.notAvailableDate=null;let l=null,D=null;this.dateClicked&&this.startDate&&a?(l=g(this.startDate)<g(a)?this.startDate:a,D=g(this.startDate)<g(a)?a:this.startDate):this.rq.arrivo&&this.rq.partenza?(l=this.rq.arrivo,D=this.rq.partenza):(l=i,D=s),this.dayUse||(D=this.getDate(g(D).subtract(1,"day")));let P=0,U=this.numeroMinimoGiorniSelectedDaysPast,X=this.numeroMassimoGiorniSelectedDaysPast;for(let $=l;g($)<=g(D);$=this.getDate(g($).add(1,"day"))){let ut=this.days.findIndex(lt=>this.getDate(lt.date)==$);if(ut>=0&&this.days[ut].cssClass){if(this.days[ut].cssClass.includes("not-available")){this.notAvailableDate=this.getDate(this.days[ut].date),this.notAvailable=!0;let lt=new O.zRL;return lt.idTraduzione="booking.periodoNonDisponibile",[lt]}if(this.days[ut].cssClass.includes("limitations")&&(!this.isControllaDurateSoggiornoSulGiornoDiArrivo||$==l)){let lt=this.disponibilita.find(De=>this.getDate(De.data)==$);U=Math.max(U,lt.durataMinimaSoggiorno),X=null==X?lt.durataMassimaSoggiorno:Math.min(X,lt.durataMassimaSoggiorno)}}P++}if(this.numeroMinimoGiorniSelectedDays=U,this.numeroMassimoGiorniSelectedDays=X,this.numeroMinimoGiorniSelectedDays>0&&P<this.numeroMinimoGiorniSelectedDays||this.numeroMassimoGiorniSelectedDays>0&&P>this.numeroMassimoGiorniSelectedDays){let $=[];return this.numeroMinimoGiorniSelectedDays>0&&P<this.numeroMinimoGiorniSelectedDays&&$.push(new O.zRL("booking.durataMinimaSoggiorno",[new O.c4l(this.numeroMinimoGiorniSelectedDays.toString())])),this.numeroMassimoGiorniSelectedDays>0&&P>this.numeroMassimoGiorniSelectedDays&&$.push(new O.zRL("booking.durataMassimaSoggiorno",[new O.c4l(this.numeroMassimoGiorniSelectedDays.toString())])),$}}return null}dayHover(a){if(null!=this.startDate&&this.dateClicked){let i=this.getDate(a.date);this.resetSelection();let s=g(i)<g(this.startDate)?i:this.startDate,l=g(i)<g(this.startDate)?this.startDate:i;this.getPrezzoMinimo(s,l),this.isVisualizzaDisponibilitaCalendario&&(this.daysControlResetCurrent(),this.errors=this.controlDays(null,s,l)),this.nights=Math.max(g(l).diff(g(s),"days"),1);for(let D=s;D<=l;D=this.getDate(g(D).add(1,"day"))){let P=this.days.findIndex(U=>this.getDate(U.date)==D);P>=0&&(this.notAvailableDate&&g(D)>g(this.notAvailableDate)&&(this.days[P].cssClass=this.setCssClass(this.days[P].cssClass,"not-selectable")),D==(g(i)<g(this.startDate)?i:this.startDate)&&(this.days[P].cssClass=this.setCssClass(this.days[P].cssClass,"first-selected-day")),D==(g(i)<g(this.startDate)?this.startDate:i)&&(this.days[P].cssClass=this.setCssClass(this.days[P].cssClass,"last-selected-day")),this.days[P].cssClass=this.setCssClass(this.days[P].cssClass,"cal-day-outlined"))}}}resetSelection(){if(this.prezzoMinimo=null,null!=this.days)for(let a of this.days)a.cssClass&&(a.cssClass=a.cssClass.replace("cal-day-outlined",""),a.cssClass=a.cssClass.replace("cal-day-selected",""),a.cssClass=a.cssClass.replace("first-selected-day",""),a.cssClass=a.cssClass.replace("last-selected-day",""),a.cssClass=a.cssClass.replace("not-selectable",""),a.cssClass=a.cssClass.replace(/  +/g," ")),(""==a.cssClass||" "==a.cssClass)&&delete a.cssClass}refreshSelection(a){if(this.rq.arrivo&&this.rq.partenza)for(let i=this.rq.arrivo;g(i)<=g(this.rq.partenza);i=this.getDate(g(i).add(1,"day"))){let s=a.findIndex(l=>this.getDate(l.date)==i);s>=0&&(i==this.rq.arrivo&&(a[s].cssClass=this.setCssClass(a[s].cssClass,"first-selected-day")),i==this.rq.partenza&&(a[s].cssClass=this.setCssClass(a[s].cssClass,"last-selected-day")),a[s].cssClass=this.setCssClass(a[s].cssClass,"cal-day-selected"))}}disablePastDays(a){for(let i=this.getDate(a[0].date);g(i)<g().startOf("day");i=this.getDate(g(i).add(1,"day"))){let s=a.findIndex(l=>this.getDate(l.date)==i);s>=0&&(a[s].cssClass=this.setCssClass(a[s].cssClass,"cal-out-month disabled-day"))}}getDisponibilita(a){this.setIsLoading(!0);let i=new O.ijo;i.dal=this.getDate(a[0].date),i.al=this.getDate(a[a.length-1].date),i.oidPortale=this.oidPortale,i.dayUse=this.dayUse,this.apiService.getDisponibilita(i).subscribe(s=>{this.disponibilita=s.data.disponibilita,this.tooltips.clear(),this.minPrices.clear();for(let l of s.data.disponibilita){if(this.isVisualizzaDisponibilitaCalendario){let D=a.findIndex(P=>this.getDate(P.date)==this.getDate(l.data));if(D>=0&&(a[D].cssClass=this.setCssClass(a[D].cssClass,l.cssClass)),l.cssClass)if(l.cssClass.includes("available"))this.tooltips.set(this.getDate(l.data),this.translationService.getTranslationSync("booking.disponibile"));else if(l.cssClass.includes("not-available"))this.tooltips.set(this.getDate(l.data),this.translationService.getTranslationSync("booking.nonDisponibile"));else if(l.cssClass.includes("limitations")){let P="";if(l.durataMinimaSoggiorno>0&&(P=this.translationService.getTranslationSync("booking.durataMinimaSoggiorno",{value:l.durataMinimaSoggiorno})),l.durataMassimaSoggiorno>0){let U=this.translationService.getTranslationSync("booking.durataMassimaSoggiorno",{value:l.durataMassimaSoggiorno});P?P+="\n"+U:P=U}this.tooltips.set(this.getDate(l.data),P)}}this.isVisualizzaPrezzoCalendario&&this.minPrices.set(this.getDate(l.data),l.prezzoMin)}if(this.days=a,this.isVisualizzaDisponibilitaCalendario&&!this.urlSearchParametersReceived){let l=null;l=this.controlDays(),null!=l&&l.length>0&&(this.onSelectionError(),this.date=this.utility.toDate(g()))}this.disablePastDays(a),this.refreshSelection(a),!this.startDate&&!this.dateClicked&&this.checkDisabledButtons(),this.controllingDisponibility||this.setIsLoading(!1)})}setCssClass(a,i){return a?a.includes(i)||(a+=" "+i):a=i,a}onPaxChanged(a){this.showSearchButton(),this.rq.camere=a,this.refresh.next(),this.getPrezzoMinimo(),this.arrivoUrl&&this.partenzaUrl&&setTimeout(()=>{this.controllaDisponibilita()},200)}controllaDisponibilita(){null!=this.rq.arrivo&&null!=this.rq.partenza?(this.searchButtonVisible=!1,this.daysSelected.emit(this.rq)):this.showError("booking.selezionaPeriodo")}addFrom(){this.urlSearchParametersReceived=!1,this.rq.arrivo&&(this.rq.arrivo=this.getDate(g(this.rq.arrivo).add(1,"day")),this.dayUse&&(this.rq.partenza=this.rq.arrivo),this.getPrezzoMinimo(),this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.resetSelection(),this.refreshSelection(this.days),this.checkDisabledButtons(),this.showSearchButton())}minusFrom(){this.urlSearchParametersReceived=!1,this.rq.arrivo&&(this.rq.arrivo=this.getDate(g(this.rq.arrivo).subtract(1,"day")),this.dayUse&&(this.rq.partenza=this.rq.arrivo),this.getPrezzoMinimo(),this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.resetSelection(),this.refreshSelection(this.days),this.checkDisabledButtons(),this.showSearchButton())}addTo(){this.urlSearchParametersReceived=!1,this.rq.partenza&&(this.rq.partenza=this.getDate(g(this.rq.partenza).add(1,"day")),this.getPrezzoMinimo(),this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.resetSelection(),this.refreshSelection(this.days),this.checkDisabledButtons(),this.showSearchButton())}minusTo(){this.urlSearchParametersReceived=!1,this.rq.partenza&&(this.rq.partenza=this.getDate(g(this.rq.partenza).subtract(1,"day")),this.getPrezzoMinimo(),this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.resetSelection(),this.refreshSelection(this.days),this.checkDisabledButtons(),this.showSearchButton())}checkDisabledAddFrom(){if(this.rq.arrivo){if(!this.dayUse&&this.nights<=1)return this.addFromButtonDisabled=!0,!0;if(this.isVisualizzaDisponibilitaCalendario)if(this.dayUse){let a=g(this.rq.arrivo).add(1,"day"),i=this.days.find(s=>this.getDate(s.date)==this.getDate(a));if(null==i)return this.addFromButtonDisabled=!0,!0;if(null!=i.cssClass&&i.cssClass.includes("not-available"))return this.addFromButtonDisabled=!0,!0;if(this.numeroMinimoGiorniSelectedDays>1)return this.addFromButtonDisabled=!0,!0}else if(this.numeroMinimoGiorniSelectedDays>0&&this.nights-1<this.numeroMinimoGiorniSelectedDays)return this.addFromButtonDisabled=!0,!0;return this.addFromButtonDisabled=!1,!1}return this.addFromButtonDisabled=!0,!0}checkDisabledMinusFrom(){if(this.rq.arrivo){let a=g(this.rq.arrivo).subtract(1,"day");if(a<g().startOf("day"))return this.minusFromButtonDisabled=!0,!0;if(this.isVisualizzaDisponibilitaCalendario){let i=this.days.find(s=>this.getDate(s.date)==this.getDate(a));if(null==i)return this.minusFromButtonDisabled=!0,!0;if(null!=i.cssClass&&i.cssClass.includes("not-available"))return this.minusFromButtonDisabled=!0,!0;if(this.dayUse){if(this.numeroMinimoGiorniSelectedDays>1)return this.minusFromButtonDisabled=!0,!0}else if(this.numeroMassimoGiorniSelectedDays>0&&this.nights+1>this.numeroMassimoGiorniSelectedDays)return this.minusFromButtonDisabled=!0,!0}return this.minusFromButtonDisabled=!1,!1}return this.minusFromButtonDisabled=!0,!0}checkDisabledAddTo(){if(this.rq.partenza){if(this.isVisualizzaDisponibilitaCalendario){if(null==this.days.find(s=>this.getDate(s.date)==this.getDate(g(this.rq.partenza).add(1,"day"))))return this.addToButtonDisabled=!0,!0;let i=this.days.find(s=>this.getDate(s.date)==this.getDate(this.rq.partenza));if(null==i||null!=i.cssClass&&i.cssClass.includes("not-available"))return this.addToButtonDisabled=!0,!0;if(this.numeroMassimoGiorniSelectedDays>0&&this.nights+1>this.numeroMassimoGiorniSelectedDays)return this.addToButtonDisabled=!0,!0}return this.addToButtonDisabled=!1,!1}return this.addToButtonDisabled=!0,!0}checkDisabledMinusTo(){return this.rq.partenza?this.nights<=1||this.isVisualizzaDisponibilitaCalendario&&this.numeroMinimoGiorniSelectedDays>0&&this.nights-1<this.numeroMinimoGiorniSelectedDays?(this.minusToButtonDisabled=!0,!0):(this.minusToButtonDisabled=!1,!1):(this.minusToButtonDisabled=!0,!0)}checkDisabledButtons(){this.daysControlReset(),this.controlLimitations(),this.checkDisabledAddFrom(),this.checkDisabledAddTo(),this.checkDisabledMinusFrom(),this.checkDisabledMinusTo()}controlLimitations(){for(let a=this.rq.arrivo;g(a)<=g(this.rq.partenza);a=this.getDate(g(a).add(1,"day"))){let i=this.days.findIndex(s=>this.getDate(s.date)==a);if(i>=0&&this.days[i].cssClass&&this.days[i].cssClass.includes("limitations")&&(!this.isControllaDurateSoggiornoSulGiornoDiArrivo||a==this.rq.arrivo)){let s=this.disponibilita.find(l=>this.getDate(l.data)==a);this.numeroMinimoGiorniSelectedDays=Math.max(this.numeroMinimoGiorniSelectedDays,s.durataMinimaSoggiorno),null==this.numeroMassimoGiorniSelectedDays?this.numeroMassimoGiorniSelectedDays=s.durataMassimaSoggiorno:this.numeroMassimoGiorniSelectedDays=Math.min(this.numeroMassimoGiorniSelectedDays,s.durataMassimaSoggiorno)}}}getPrezzoMinimo(a,i){if(this.rq.arrivo&&this.rq.partenza||a&&i){this.prezzoCalculated=!1,null!=this.prezzoMinimoRequest&&this.prezzoMinimoRequest.unsubscribe();let s=new O.$EM(this.adultiDefault);this.rq.arrivo&&this.rq.partenza?(s.arrivo=this.rq.arrivo,s.partenza=this.rq.partenza):(s.arrivo=a,s.partenza=i),s.oidMotivoViaggio=this.rq.oidMotivoViaggio,s.oidPortale=this.oidPortale,s.isDayUse=this.dayUse,s.camere=this.rq.camere,this.prezzoMinimo=null,this.prezzoMinimoRequest=this.apiService.getPrezzoMinimo(s).subscribe(l=>{this.prezzoMinimo=l.data,this.prezzoCalculated=!0})}}addFromMobile(){this.urlSearchParametersReceived=!1,this.rq.arrivo&&(this.rq.arrivo=this.getDate(g(this.rq.arrivo).add(1,"day")),this.dayUse&&(this.rq.partenza=this.rq.arrivo),this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.checkDisabledButtonsMobile(),this.showSearchButton())}minusFromMobile(){this.urlSearchParametersReceived=!1,this.rq.arrivo&&(this.rq.arrivo=this.getDate(g(this.rq.arrivo).subtract(1,"day")),this.dayUse&&(this.rq.partenza=this.rq.arrivo),this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.checkDisabledButtonsMobile(),this.showSearchButton())}addToMobile(){this.urlSearchParametersReceived=!1,this.rq.partenza&&(this.rq.partenza=this.getDate(g(this.rq.partenza).add(1,"day")),this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.checkDisabledButtonsMobile(),this.showSearchButton())}minusToMobile(){this.urlSearchParametersReceived=!1,this.rq.partenza&&(this.rq.partenza=this.getDate(g(this.rq.partenza).subtract(1,"day")),this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1),this.checkDisabledButtonsMobile(),this.showSearchButton())}checkDisabledAddFromMobile(){return this.rq.arrivo?!this.dayUse&&this.nights<=1?(this.addFromButtonDisabled=!0,!0):(this.addFromButtonDisabled=!1,!1):(this.addFromButtonDisabled=!0,!0)}checkDisabledMinusFromMobile(){return this.rq.arrivo?g(this.rq.arrivo).subtract(1,"day")<g().startOf("day")?(this.minusFromButtonDisabled=!0,!0):(this.minusFromButtonDisabled=!1,!1):(this.minusFromButtonDisabled=!0,!0)}checkDisabledMinusToMobile(){return this.rq.partenza?g(this.rq.partenza).subtract(1,"day")<g().startOf("day")||this.nights<=1?(this.minusToButtonDisabled=!0,!0):(this.minusToButtonDisabled=!1,!1):(this.minusToButtonDisabled=!0,!0)}checkDisabledButtonsMobile(){this.checkDisabledAddFromMobile(),this.checkDisabledMinusFromMobile(),this.checkDisabledMinusToMobile()}onArrivoChange(a){this.urlSearchParametersReceived=!1,this.rq.arrivo=this.getDate(a),this.rq.arrivo&&g(this.rq.arrivo)<g().startOf("day")&&(this.rq.arrivo=this.getDate(g())),this.calcolaNotti(),this.dayUse?this.rq.partenza=this.rq.arrivo:this.nights<=1&&(this.rq.partenza=this.getDate(g(this.rq.arrivo).add(1,"day"))),this.checkDisabledButtonsMobile(),this.showSearchButton(),setTimeout(()=>{this.arrivoDate=null},200)}onPartenzaChange(a){this.urlSearchParametersReceived=!1,this.rq.partenza=this.getDate(a),this.rq.partenza&&g(this.rq.partenza)<g().add(1,"day").startOf("day")&&(this.rq.partenza=this.getDate(g().add(1,"day"))),this.calcolaNotti(),this.nights<=1&&(this.rq.arrivo=this.getDate(g(this.rq.partenza).subtract(1,"day"))),this.checkDisabledButtonsMobile(),this.showSearchButton(),setTimeout(()=>{this.partenzaDate=null},200)}calcolaNotti(){this.rq.arrivo&&this.rq.partenza?this.nights=Math.max(g(this.rq.partenza).diff(g(this.rq.arrivo),"days"),1):this.nights=null}showSearchButton(){let a=this.searchButtonVisible;this.searchButtonVisible=!0,!a&&null!=this.rq.arrivo&&null!=this.rq.partenza&&(this.blinkStatus="dark",this.blinkStatus="light",setTimeout(()=>{this.blinkStatus="dark",this.blinkStatus=null},500))}sendRequest(){let a=new O.Zpt;this.containerService.dimension.width>=this.mobileBreakpoint?a.width="80vw":a.width="95vw",a.minHeight="80vh",a.maxHeight="95vh",a.panelClass="booking-dialog-no-padding";let i=this.showModalDialog(y.u,a),s=i.componentInstance;if(s.dialogRef=i,s.oidAlbergo=this.oidAlbergo,s.oidPortale=this.oidPortale,s.language=this.lingua,s.booking=!0,null!=this.sessionService.sessione&&null!=this.sessionService.sessione.clienteMySelf){let l=new x.c1h;l.nome=this.sessionService.sessione.clienteMySelf.nome,l.cognome=this.sessionService.sessione.clienteMySelf.cognome,l.email=this.sessionService.sessione.clienteMySelf.email,l.cellulare=this.sessionService.sessione.clienteMySelf.cellulare,s.cliente=l}}openCodicePromozioneSelect(){this.setIsLoading(!0);let a=new O.oyF;a.arrivo=this.rq.arrivo,a.partenza=this.rq.partenza,a.oidAlbergo=this.sessionService.getOidAlbergo(),a.oidPortale=this.oidPortale,a.oidTipoCameraOTA=this.oidTipoCameraOTA,a.oidTariffaOTA=this.oidTariffaOTA,this.apiService.getCodiciPromozioneValidi(a).subscribe(i=>{if(this.setIsLoading(!1),null!=i.data&&i.data.length>0){let s=new O.Zpt;s.width="40vw";let l=this.showModalDialog(r.H,s),D=l.componentInstance;D.dialogRef=l,D.title="sbm.calcolaRetta.codicePromozione",D.data=i.data,D.displayMember="codice",l.afterClosed().subscribe(P=>{P&&(this.rq.codicePromozione=P.codice)})}else this.showError("sbm.calcolaRetta.nessunCodicePromozioneValido")})}nightsSelected(a){this.rq.arrivo=this.startDate,this.rq.partenza=this.getDate(g(this.startDate).add(a,"days")),this.dateClicked=!1,this.startDate=null,this.nights=a,this.resetSelection(),this.refreshSelection(this.days),this.showSearchButton(),this.checkDisabledButtons(),this.getPrezzoMinimo(),this.showNightsSelect=!1,this.controllaDisponibilita()}nightsChange(){this.setIsLoading(!0);let a=new O.YDc;a.oidPortale=this.oidPortale,a.arrivo=this.startDate,a.notti=this.disponibilitaNotti[this.disponibilitaNotti.length-1].notti,this.apiService.getDisponibilitaNotti(a).subscribe(i=>{null!=i.data&&1==i.data.length&&(this.disponibilitaNotti[this.disponibilitaNotti.length-1]=i.data[0]),this.setIsLoading(!1)})}nightsSelectionBack(){this.onSelectionError(),this.notAvailableDate=null,this.showNightsSelect=!1}ngOnDestroy(){this.sub.unsubscribe(),null!=this.sub1&&this.sub1.unsubscribe(),null!=this.sub2&&this.sub2.unsubscribe(),this.refresh.complete()}}gt.\u0275fac=function(a){return new(a||gt)(t.Y36(w.s),t.Y36(q.o),t.Y36(z.J),t.Y36(k.m),t.Y36(f.t))},gt.\u0275cmp=t.Xpm({type:gt,selectors:[["app-booking-calendar"]],viewQuery:function(a,i){if(1&a&&(t.Gf(yt,5),t.Gf(Pt,5),t.Gf(Ot,5)),2&a){let s;t.iGM(s=t.CRH())&&(i.datePickerArrivo=s.first),t.iGM(s=t.CRH())&&(i.datePickerPartenza=s.first),t.iGM(s=t.CRH())&&(i.emailLabel=s.first)}},inputs:{oidAlbergo:"oidAlbergo",oidPortale:"oidPortale",lingua:"lingua",isVisualizzaDisponibilitaCalendario:"isVisualizzaDisponibilitaCalendario",isVisualizzaPrezzoCalendario:"isVisualizzaPrezzoCalendario",email:"email",cellulare:"cellulare",mappa:"mappa",clickSubject:"clickSubject",dayUse:"dayUse",adultiDefault:"adultiDefault",adultiMax:"adultiMax",bambiniMax:"bambiniMax",etaMinimaBambini:"etaMinimaBambini",etaMassimaBambini:"etaMassimaBambini",camereUrl:"camereUrl",arrivoUrl:"arrivoUrl",partenzaUrl:"partenzaUrl",codicePromozioneUrl:"codicePromozioneUrl",controllingDisponibility:"controllingDisponibility",isEtaRiduzioniAttiva:"isEtaRiduzioniAttiva",riduzioni:"riduzioni",isBooking:"isBooking",isRichiediDisponibilitaStep1Visualizzata:"isRichiediDisponibilitaStep1Visualizzata",numeroCodiciPromozionali:"numeroCodiciPromozionali",motiviViaggio:"motiviViaggio",camerePrenotabili:"camerePrenotabili",isVisualizzaCalendarioMobile:"isVisualizzaCalendarioMobile",showSearchButtonSubject:"showSearchButtonSubject",isVisualizzaPrezzoMinimo:"isVisualizzaPrezzoMinimo",hideButton:"hideButton",oidTipoCameraOTA:"oidTipoCameraOTA",oidTariffaOTA:"oidTariffaOTA",valuta:"valuta",isDisattivaRichiestaBambini:"isDisattivaRichiestaBambini",isControllaDurateSoggiornoSulGiornoDiArrivo:"isControllaDurateSoggiornoSulGiornoDiArrivo",isProponiNottiCalendario:"isProponiNottiCalendario",initialDate:"initialDate",codicePromozione:"codicePromozione"},outputs:{daysSelected:"daysSelected"},features:[t.qOj],decls:41,vars:54,consts:[[1,"border","p-3","calendar-container",3,"ngClass"],[1,"row"],[1,"col-12","col-lg-12",3,"ngClass"],[3,"adultiDefault","adultiMax","bambiniMax","etaMinimaBambini","etaMassimaBambini","camereUrl","isEtaRiduzioniAttiva","riduzioni","_camerePrenotabili","isDisattivaRichiestaBambini","dayUse","paxChanged"],[3,"hidden"],[4,"ngIf"],[1,"row","text-center","mt-3",3,"ngClass"],[1,"col-12","calendar-header-col"],[1,"calendar-header","clearfix"],[1,"clearfix"],[1,"d-inline-block","align-middle","float-left"],["mat-icon-button","","mwlCalendarPreviousView","",1,"previous-button","calendar-header-button",3,"view","viewDate","disabled","viewDateChange","click"],[1,"material-icons-round"],[1,"d-inline-block","m-0","mt-1","month","align-middle",3,"matMenuTriggerFor","click"],["menuTrigger","matMenuTrigger"],[1,"monthMenu","booking-menu"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"d-inline-block","align-middle","float-right"],["mat-icon-button","","mwlCalendarNextView","",1,"next-button","calendar-header-button",3,"view","viewDate","viewDateChange","click"],[3,"ngClass"],[3,"viewDate","refresh","cellTemplate","headerTemplate","dayClicked","beforeViewRender"],["class","col-12 col-lg-12 codice-motivo-viaggio-col",3,"ngClass",4,"ngIf"],[1,"col-12","col-lg-12","button-col",3,"ngClass"],["class","w-100 controlla-disponibilita-button mt-3","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","border p-3 mat-elevation-z5 contatti-container mt-3 d-none d-lg-block",4,"ngIf"],["cellTemplate",""],["headerTemplate",""],["tooltipContent",""],[1,"row","mt-3"],[1,"col","arrivo-col","text-center"],[1,"font-weight-bold","color-blue"],[1,"col","partenza-col","text-center"],[1,"col","notti-col","text-center","d-none","d-lg-block"],[1,"col-12","text-center"],[1,"row",3,"ngClass"],[1,"col-6","text-center","p-0","noWrap"],["autocompleteOff","","type","text","matInput","",3,"matDatepicker","hidden","ngModel","dateChange","ngModelChange"],[3,"startAt","touchUi","panelClass"],["arrivo",""],["partenza",""],[1,"dateMobile",3,"click"],["mat-icon-button","",1,"add-minus-button","mr-n1",3,"disabled","click"],[1,"dateMobile","align-middle","text-small",3,"click"],["mat-icon-button","",1,"add-minus-button","ml-n1",3,"disabled","click"],[1,"align-middle","text-small"],["mat-icon-button","",1,"add-minus-button-small",3,"disabled","click"],[1,"material-icons-round","add-minus-icon"],[1,"align-middle","mr-1","ml-1","text-small"],[1,"col-12","text-center","p-0","noWrap"],["mat-icon-button","",1,"add-minus-button",3,"disabled","click"],[1,"dateMobile","align-middle",3,"click"],[1,"align-middle"],["mat-menu-item","",3,"click"],["class","color-blue text-center mt-2 prezzo-minimo-calendar",3,"ngClass",4,"ngIf"],["class","color-green text-center",3,"ngClass",4,"ngIf"],[1,"color-blue","text-center","mt-2","prezzo-minimo-calendar",3,"ngClass"],["class","font-weight-bold",4,"ngIf"],["class","pr-2 right-border",4,"ngIf"],[1,"ml-2"],["class","dot-elastic d-inline-block ml-3",4,"ngIf"],["class","d-inline-block",4,"ngIf"],[1,"font-weight-bold"],[1,"pr-2","right-border"],[1,"dot-elastic","d-inline-block","ml-3"],[1,"d-inline-block"],[1,"price-decimals"],[1,"color-green","text-center",3,"ngClass"],[1,"material-icons-round","align-middle","ml-1","icon-small"],[1,"mt-3"],[1,"material-icons-round","align-middle","mr-2","nightsSelectIcon"],[1,"align-middle","text-small","font-weight-bold"],["mat-flat-button","",1,"button-blue-indietro","nightsBackButton","float-right",3,"click"],[1,"material-icons-round","nightsSelectIcon"],[1,"row","mt-3","mb-2"],[1,"col-4","text-small","font-weight-bold","pr-1"],[1,"col-4","text-small","font-weight-bold","pr-1","pl-1"],["class","row mb-1",4,"ngFor","ngForOf"],[1,"row","mb-1"],[1,"col-4","pr-1"],[1,"mr-1","align-middle",3,"ngClass"],["appearance","outline","class","bookingCalendarNightsSelect",4,"ngIf"],[1,"col-4","pl-1","pr-1"],[1,"material-icons-round","align-middle","icon-small"],[1,"align-middle","text-smaller","font-weight-bold"],[1,"col-4","text-right","pl-1"],["mat-flat-button","",1,"button-blue","nightsSelectButton",3,"disabled","click"],[1,"align-middle","text-smaller"],["appearance","outline",1,"bookingCalendarNightsSelect"],[3,"panelClass","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-12","col-lg-12","codice-motivo-viaggio-col",3,"ngClass"],[1,"mt-3","position-relative"],["class","d-flex",4,"ngIf"],["mat-icon-button","","class","position-absolute openCodicePromozioneSelectButton",3,"click",4,"ngIf"],["class","mt-3 d-flex",4,"ngIf"],[1,"d-flex"],[1,"d-inline-block","mt-1"],[1,"mr-3","font-weight-bold","text-nowrap"],["autocompleteOff","","type","text",1,"codicePromozionaleInput",3,"ngModel","ngModelChange","input"],["mat-icon-button","",1,"position-absolute","openCodicePromozioneSelectButton",3,"click"],[1,"material-icons","color-blue"],[1,"mt-3","d-flex"],[1,"mr-2","font-weight-bold","text-nowrap"],[1,"motivoViaggioSelect"],["mat-flat-button","",1,"w-100","controlla-disponibilita-button","mt-3",3,"disabled","click"],[1,"border","p-3","mat-elevation-z5","contatti-container","mt-3","d-none","d-lg-block"],[1,"font-weight-bold","mb-1"],[1,"color-blue","mb-1","text-nowrap","contatti",3,"click"],[1,"material-icons-round","mr-1","align-middle","contatti-icon"],["href","#",1,"color-blue",3,"click"],[1,"color-blue","text-nowrap","contatti",3,"click"],["matTooltipClass","tooltip-class",1,"align-top","email",3,"matTooltip","matTooltipDisabled"],["emailLabel",""],["href","#","class","color-blue contatti mt-3 d-block font-weight-bold",3,"click",4,"ngIf"],["href","#",1,"color-blue","contatti","mt-3","d-block","font-weight-bold",3,"click"],["matTooltipClass","tooltip-class","placement","top","theme","light","contentType","template","tooltipClass","booking-calendar-tooltip-class",1,"cal-cell-top",3,"matTooltip","matTooltipDisabled","tooltip","display","hideDelay","animationDuration","mouseenter"],["appRectangle","",1,"cal-day-number-rectangle","w-100",3,"setLineHeight"],[1,"cal-day-number-circle","position-relative"],[1,"cal-day-number",3,"ngClass"],["class","cal-day-price",4,"ngIf"],[1,"cal-day-price"],["class","price",4,"ngIf"],[1,"price"],["role","row",1,"cal-cell-row","cal-header","pt-2"],["class","cal-cell","tabindex","0","role","columnheader",3,"ngClass",4,"ngFor","ngForOf"],["tabindex","0","role","columnheader",1,"cal-cell",3,"ngClass"],[1,"text-center"],["class","dot-elastic d-inline-block",4,"ngIf"],[1,"dot-elastic","d-inline-block"],[3,"_text"]],template:function(a,i){if(1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-booking-room-select",3),t.NdJ("paxChanged",function(l){return i.onPaxChanged(l)}),t.qZA()(),t.TgZ(4,"div",2)(5,"div",4),t.YNc(6,Vt,6,4,"ng-container",5),t.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"button",11),t.NdJ("viewDateChange",function(l){return i.date=l})("click",function(l){return l.stopPropagation()}),t.TgZ(13,"i",12),t._uU(14,"keyboard_arrow_left"),t.qZA()()(),t.TgZ(15,"h5",13,14),t.NdJ("click",function(l){return l.stopPropagation()}),t._uU(17),t.ALo(18,"titlecase"),t.ALo(19,"momentFormat"),t.qZA(),t.TgZ(20,"mat-menu",15,16),t.YNc(22,Wt,4,7,"button",17),t.qZA(),t.TgZ(23,"div",18)(24,"button",19),t.NdJ("viewDateChange",function(l){return i.date=l})("click",function(l){return l.stopPropagation()}),t.TgZ(25,"i",12),t._uU(26,"keyboard_arrow_right"),t.qZA()()()()()()(),t.TgZ(27,"div",20)(28,"mwl-calendar-month-view",21),t.NdJ("dayClicked",function(l){return i.dayClicked(l.day)})("beforeViewRender",function(l){return i.onRender(l.body)}),t.qZA()(),t.YNc(29,K,3,2,"ng-container",5),t.qZA(),t.YNc(30,Xt,23,19,"div",5),t.qZA(),t.YNc(31,oe,5,6,"div",22),t.TgZ(32,"div",23),t.YNc(33,ae,3,5,"button",24),t.qZA()()(),t.YNc(34,le,23,11,"div",25),t.YNc(35,me,8,20,"ng-template",null,26,t.W1O),t.YNc(37,ue,2,1,"ng-template",null,27,t.W1O),t.YNc(39,xe,3,2,"ng-template",null,28,t.W1O)),2&a){const s=t.MAs(21),l=t.MAs(36),D=t.MAs(38);t.Q6J("ngClass",t.VKq(42,Me,i.isBooking)),t.xp6(2),t.Q6J("ngClass",t.VKq(44,Ct,i.isBooking)),t.xp6(1),t.Q6J("adultiDefault",i.adultiDefault)("adultiMax",i.adultiMax)("bambiniMax",i.bambiniMax)("etaMinimaBambini",i.etaMinimaBambini)("etaMassimaBambini",i.etaMassimaBambini)("camereUrl",i.camereUrl)("isEtaRiduzioniAttiva",i.isEtaRiduzioniAttiva)("riduzioni",i.riduzioni)("_camerePrenotabili",i.camerePrenotabili)("isDisattivaRichiestaBambini",i.isDisattivaRichiestaBambini)("dayUse",i.dayUse),t.xp6(1),t.Q6J("ngClass",t.VKq(46,Ct,i.isBooking)),t.xp6(1),t.Q6J("hidden",i.showNightsSelect),t.xp6(1),t.Q6J("ngIf",i.containerService.dimension.height>=850||i.containerService.dimension.width<i.mobileBreakpoint&&!i.isVisualizzaCalendarioMobile),t.xp6(1),t.Q6J("ngClass",t.VKq(48,Te,!i.isVisualizzaCalendarioMobile)),t.xp6(5),t.Q6J("view","month")("viewDate",i.date)("disabled",i.previousDisabled),t.xp6(3),t.Q6J("matMenuTriggerFor",s),t.xp6(2),t.hij(" ",t.lcZ(18,36,t.Dn7(19,38,i.date,"MMMM YYYY",i.getLocale()))," "),t.xp6(5),t.Q6J("ngForOf",i.selectableMonths),t.xp6(2),t.Q6J("view","month")("viewDate",i.date),t.xp6(3),t.Q6J("ngClass",t.VKq(50,C,!i.isVisualizzaCalendarioMobile)),t.xp6(1),t.Q6J("viewDate",i.date)("refresh",i.refresh)("cellTemplate",l)("headerTemplate",D),t.xp6(1),t.Q6J("ngIf",i.isVisualizzaPrezzoMinimo),t.xp6(1),t.Q6J("ngIf",i.showNightsSelect),t.xp6(1),t.Q6J("ngIf",i.numeroCodiciPromozionali>0||i.motiviViaggio.length>0),t.xp6(1),t.Q6J("ngClass",t.VKq(52,Ct,i.isBooking)),t.xp6(1),t.Q6J("ngIf",i.searchButtonVisible||!i.hideButton),t.xp6(1),t.Q6J("ngIf",!!i.mappa||!!i.cellulare||!!i.email)}},dependencies:[T.mk,T.sg,T.O5,B.z,N.X,V.eB,W.v_,Z.k0,R.CK,E.Mq,E.hl,Q.x8,S.W0,S.tN,S.D8,L.Kd,Y.Fj,Y.JJ,Y.On,ot.W,et.YX,et.MG,et.GH,at.i9,mt,T.JJ,T.rS,Tt.f,Dt.H,it.X$],styles:['.cal-day-number{width:100%!important;text-align:center!important;color:#00000080!important;opacity:1!important;font-size:16px!important;font-weight:600!important;margin:0!important}  .cal-day-price{width:100%!important;text-align:center!important;opacity:1!important;font-size:13px!important;margin:0!important;display:inline-block!important;height:calc(100% - 19px)!important;top:19px;line-height:35px!important;position:absolute}  .cal-cell-top{position:relative!important;min-height:0!important;padding-top:.1rem!important;padding-bottom:.1rem!important}  .cal-day-number-price{text-align:left!important;font-size:12px!important;font-weight:700!important}  .cal-day-number-inner-price{position:absolute!important;display:inline-block!important;text-align:center!important;width:19px!important;height:19px!important;line-height:17px!important;left:5px!important;top:2px!important}  .cal-day-cell{cursor:pointer!important;background-color:#fff!important;-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important}  .cal-out-month .cal-day-number{cursor:pointer!important}  .cal-out-month .cal-cell-top{opacity:.4!important}  .cal-day-selected .cal-cell-top{opacity:1!important}  .cal-day-outlined .cal-cell-top{opacity:1!important}  .disabled-day{cursor:default!important}  .disabled-day .cal-day-number{cursor:default!important}  .cal-today .cal-day-number{color:#004987!important}  .cal-weekend .cal-day-number{color:red!important}  .available .cal-day-number{color:#00b572!important}  .not-available .cal-day-number{color:#d9534f!important;cursor:default!important}  .limitations .cal-day-number{color:orange!important}  .cal-day-cell{min-height:0!important;outline:0!important;border:none!important}  .cal-day-cell:hover .cal-day-number-circle{background-color:#e6e6e6!important}  .cal-day-selected .cal-day-number-circle,   .cal-day-selected:hover .cal-day-number-circle{background-color:transparent!important}  .cal-day-selected .cal-day-number-rectangle,   .cal-day-selected:hover .cal-day-number-rectangle{background-color:#004987!important}  .cal-day-outlined .cal-day-number-circle,   .cal-day-outlined:hover .cal-day-number-circle{background-color:transparent!important}  .cal-day-outlined .cal-day-number-rectangle,   .cal-day-outlined:hover .cal-day-number-rectangle{background-color:#006dc9!important}  .cal-day-selected .cal-day-number-inner{color:#fff!important}  .cal-day-outlined .cal-day-number-inner{color:#fff!important}  .cal-day-selected .cal-day-number-inner-price{color:#fff!important}  .cal-day-outlined .cal-day-number-inner-price{color:#fff!important}  .cal-day-selected .price{color:#fff!important}  .cal-day-outlined .price{color:#fff!important}  .first-selected-day .cal-day-number-circle,   .first-selected-day:hover .cal-day-number-circle{background-color:#006dc9!important}  .last-selected-day .cal-day-number-circle,   .last-selected-day:hover .cal-day-number-circle{background-color:#006dc9!important}.cal-day-number-circle[_ngcontent-%COMP%]{display:inline-block!important;width:100%!important;height:100%!important;border-radius:50%!important}  .first-selected-day .cal-day-number-rectangle{border-top-left-radius:50%!important;border-bottom-left-radius:50%!important}  .last-selected-day .cal-day-number-rectangle{border-top-right-radius:50%!important;border-bottom-right-radius:50%!important}  .next-button .mat-button-wrapper,   .previous-button .mat-button-wrapper{padding:0!important}.calendar-container[_ngcontent-%COMP%], .contatti-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px}.contatti-icon[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.contatti[_ngcontent-%COMP%]{cursor:pointer}  .mat-menu-content{overflow:auto!important;max-height:300px!important}  .cal-days{border:none!important}  .cal-cell-row{border:none!important}  .cal-header{font-weight:400!important;font-size:15px!important;background-color:transparent!important}  .cal-header:hover{background-color:transparent!important}  .cal-header .cal-cell{padding:0 0 5px!important;text-overflow:clip!important;outline:0!important;background-color:transparent!important}  .cal-header .cal-cell:hover{background-color:transparent!important}.month[_ngcontent-%COMP%]{font-size:1.2rem!important;cursor:pointer!important}.col[_ngcontent-%COMP%]{position:relative!important;width:100%!important;padding:0!important}.arrivo-col[_ngcontent-%COMP%], .partenza-col[_ngcontent-%COMP%]{flex:0 0 50%!important;max-width:50%!important;white-space:nowrap!important}@media (min-width: 992px){.arrivo-col[_ngcontent-%COMP%], .partenza-col[_ngcontent-%COMP%]{flex:0 0 37.5%!important;max-width:37.5%!important;white-space:nowrap!important}.notti-col[_ngcontent-%COMP%]{flex:0 0 25%!important;max-width:25%!important;white-space:nowrap!important}}  .tooltip-class{white-space:pre!important;font-size:11px!important}  .booking-calendar-tooltip-class{box-shadow:0 3px 5px -1px #0003,0 5px 8px #00000024,0 1px 14px #0000001f!important;color:#004987!important}  .cal-month-view{background-color:transparent!important;border-width:0 1px 1px 1px!important;border-style:solid!important;border-color:#e6e6e6!important}.calendar-header[_ngcontent-%COMP%]{border-width:1px 1px 0 1px!important;border-style:solid!important;border-color:#e6e6e6!important;background-color:#e6e6e6!important;height:35px!important}.calendar-header-col[_ngcontent-%COMP%]{height:35px!important}.calendar-header-button[_ngcontent-%COMP%]{height:35px!important;width:35px!important;line-height:35px!important}.calendar-header-button[_ngcontent-%COMP%]:enabled{color:#004987!important}.codicePromozionaleInput[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #D9D9D9;outline:0;flex:1;padding-left:6px;padding-right:6px}.openCodicePromozioneSelectButton[_ngcontent-%COMP%]{right:0;top:0;width:36px;height:36px;line-height:36px}  .motivoViaggioSelect{border-radius:5px;border:1px solid #D9D9D9;flex:1;outline:0}  .motivoViaggioSelect .mat-select{padding-left:6px}  .motivoViaggioSelect .mat-form-field-underline{display:none!important}  .motivoViaggioSelect .mat-form-field-wrapper{padding-bottom:0!important}  .motivoViaggioSelect .mat-form-field-infix{border:0!important}.color-green[_ngcontent-%COMP%]{color:#00b572!important}.add-minus-button[_ngcontent-%COMP%]{width:24px!important;height:24px!important;line-height:24px!important}.add-minus-icon[_ngcontent-%COMP%]{font-size:18px!important;line-height:18px!important}.add-minus-button-small[_ngcontent-%COMP%]{width:18px!important;height:18px!important;line-height:18px!important}.add-minus-button[_ngcontent-%COMP%]:enabled{color:#666!important}.add-minus-button-small[_ngcontent-%COMP%]:enabled{color:#666!important}  .disabled-day:hover .cal-day-number-circle{background-color:transparent!important}.price[_ngcontent-%COMP%]{position:relative;bottom:8px;font-size:11px;color:#004987b4}.icon-small[_ngcontent-%COMP%]{font-size:16px}.text-small[_ngcontent-%COMP%]{font-size:15px}.text-smaller[_ngcontent-%COMP%]{font-size:12px}.right-border[_ngcontent-%COMP%]{border-right:2px solid #D9D9D9}  .monthMenu .mat-menu-item{outline:none!important}.dateMobile[_ngcontent-%COMP%]{cursor:pointer}.noWrap[_ngcontent-%COMP%]{white-space:nowrap}  .disabled-day .cal-day-number{color:#b7b7b7!important}  .disabled-day .cal-cell-top{opacity:1!important}.dot-elastic[_ngcontent-%COMP%]{margin-bottom:.1rem;position:relative;width:6px;height:6px;border-radius:3px;background-color:#004987;color:#004987;animation:_ngcontent-%COMP%_dot-elastic 1s infinite linear}.dot-elastic[_ngcontent-%COMP%]:before, .dot-elastic[_ngcontent-%COMP%]:after{content:"";display:inline-block;position:absolute;top:0}.dot-elastic[_ngcontent-%COMP%]:before{left:-10px;width:6px;height:6px;border-radius:3px;background-color:#004987;color:#004987;animation:_ngcontent-%COMP%_dot-elastic-before 1s infinite linear}.dot-elastic[_ngcontent-%COMP%]:after{left:10px;width:6px;height:6px;border-radius:3px;background-color:#004987;color:#004987;animation:_ngcontent-%COMP%_dot-elastic-after 1s infinite linear}@keyframes _ngcontent-%COMP%_dot-elastic-before{0%{transform:scale(1)}25%{transform:scaleY(1.5)}50%{transform:scaleY(.67)}75%{transform:scale(1)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_dot-elastic{0%{transform:scale(1)}25%{transform:scale(1)}50%{transform:scaleY(1.5)}75%{transform:scale(1)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_dot-elastic-after{0%{transform:scale(1)}25%{transform:scale(1)}50%{transform:scaleY(.67)}75%{transform:scaleY(1.5)}to{transform:scale(1)}}  .cal-days .cal-cell-row:last-of-type .cal-cell-top{padding-bottom:0!important}  .not-available.cal-day-outlined .cal-day-number-circle,   .not-available.cal-day-outlined:hover .cal-day-number-circle{background-color:#d9534f!important}  .not-available.cal-day-outlined .cal-day-number-rectangle,   .not-available.cal-day-outlined:hover .cal-day-number-rectangle{background-image:linear-gradient(to right,transparent 50%,#E58784 50%)!important}  .not-selectable.cal-day-outlined .cal-day-number-rectangle,   .not-selectable.cal-day-outlined:hover .cal-day-number-rectangle{background-image:none!important;background-color:#e58784!important}  .not-selectable.cal-day-outlined .cal-day-number-circle,   .not-selectable.cal-day-outlined:hover .cal-day-number-circle{background-color:#e58784!important}  .not-selectable.last-selected-day .cal-day-number-circle,   .not-selectable.last-selected-day:hover .cal-day-number-circle{background-color:#e58784!important}.controlla-disponibilita-button[_ngcontent-%COMP%]{border-radius:7px!important;outline:0!important}.controlla-disponibilita-button[_ngcontent-%COMP%]:enabled{background-color:#004987;color:#fff!important;transition:all .5s ease-out!important}.controlla-disponibilita-button[_ngcontent-%COMP%]:hover:enabled{background-color:#006dc9;transition:all .5s ease-out!important}.codice-motivo-viaggio-col[_ngcontent-%COMP%], .button-col[_ngcontent-%COMP%]{margin-top:0}@media (min-width: 650px){.codice-motivo-viaggio-col[_ngcontent-%COMP%], .button-col[_ngcontent-%COMP%]{margin-top:.5rem}}@media (min-width: 992px){.codice-motivo-viaggio-col[_ngcontent-%COMP%], .button-col[_ngcontent-%COMP%]{margin-top:.5rem}}.email[_ngcontent-%COMP%]{display:inline-block;max-width:calc(100% - 18px);overflow:hidden;text-overflow:ellipsis}.available[_ngcontent-%COMP%]{background:#00b572}.not-available[_ngcontent-%COMP%]{background-color:#d9534f}.available[_ngcontent-%COMP%], .not-available[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:1px solid #ccc;border-radius:5px}.nightsSelectButton[_ngcontent-%COMP%]{line-height:22px;padding-right:5px;padding-left:7px;font-size:12px}.nightsBackButton[_ngcontent-%COMP%]{line-height:24px;padding-right:7px;padding-left:5px;font-size:13px}.nightsSelectIcon[_ngcontent-%COMP%]{font-size:18px}  .bookingCalendarNightsSelect{font-size:11px;width:45px}  .bookingCalendarNightsSelect .mat-form-field-infix{padding-bottom:3px!important;padding-top:0!important}  .bookingCalendarNightsSelect .mat-select-arrow{border-left:4px solid rgba(0,0,0,0)!important;border-right:4px solid rgba(0,0,0,0)!important;border-top:4px solid!important;margin:4px 0 0!important}  .bookingCalendarNightsSelect .mat-form-field-outline-thick{color:#ccc!important}  .bookingCalendarNightsSelect .mat-form-field-wrapper{padding-bottom:0!important}'],data:{animation:[(0,e.X$)("blink",[(0,e.SB)("light",(0,e.oB)({backgroundColor:"#006DC9"})),(0,e.SB)("dark",(0,e.oB)({backgroundColor:"#004987"})),(0,e.eR)("light => dark",[(0,e.jt)("500ms ease-out")]),(0,e.eR)("dark => light",[(0,e.jt)("500ms ease-in")])])]}})},76967:(tt,F,_)=>{_.d(F,{C:()=>r});var e=_(96814),t=_(46880),g=_(90110),p=_(30395),n=_(56208),y=_(65879);class r{}r.\u0275fac=function(O){return new(O||r)},r.\u0275mod=y.oAB({type:r}),r.\u0275inj=y.cJS({imports:[e.ez,n.m,p.Q,t._8,g.z8]})},70763:(tt,F,_)=>{_.d(F,{J:()=>nt});var e=_(78645),t=_(14090),g=_(3743),p=_(6556),n=_(86107),y=_(52374),r=_(65879),x=_(19209),O=_(2214),w=_(2353),q=_(30724),z=_(96814),k=_(56223),f=_(45754),T=_(94505),B=_(84187),N=_(42400),V=_(24678),W=_(48424),Z=_(18615),R=_(99173),E=_(27162),Q=_(44537),S=_(46446),L=_(89515);function Y(G,A){if(1&G&&(r.TgZ(0,"mat-option",30),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&G){const m=A.$implicit;r.Q6J("value",m.key),r.xp6(1),r.hij(" ",r.lcZ(2,2,m.value)," ")}}function ot(G,A){if(1&G&&(r.TgZ(0,"div",32),r._UZ(1,"app-storico-cliente",33),r.qZA()),2&G){const m=r.oxw(2);r.xp6(1),r.Q6J("oidCliente",m._cliente.oid)("small",!0)}}function et(G,A){if(1&G&&(r.TgZ(0,"mat-tab",4),r.ALo(1,"translate"),r.YNc(2,ot,2,2,"div",31),r.qZA()),2&G){const m=r.oxw();r.Q6J("label",r.lcZ(1,2,"globals.storico")),r.xp6(2),r.Q6J("ngIf",1==m.tabIndex)}}const at=function(){return["nome","cognome","email"]},it=function(){return["nome","cognome"]},rt=function(){return["cognome"]},st=function(){return["email"]},ct=function(){return["cellulare"]},_t=function(G,A,m,v){return[G,A,m,v]};class nt extends t.H{set cliente(A){if(null!=A&&A.oid>0){if(this._cliente=A,this.selectedCliente=A,A.nazione){let m=n.k$g.fromFilter("nomeItaliano",y.Hp.Equal,A.nazione,y.NM.String);this.apiService.getNazioniFilter(m).subscribe(v=>{v.data.length>0&&(A.nazioneObject=v.data[0])})}}else this._cliente=new p.c1h,this.selectedCliente=new p.c1h}constructor(A,m,v,b){super(),this.apiService=A,this.sessionService=m,this.utilityService=v,this.utility=b,this._cliente=new p.c1h,this.selectedCliente=new p.c1h,this.resetSubject=new e.x,this.getParametriRicercaMercatoRQ=n.k$g.fromFilters([new n.wn$("tipoParametro",y.Hp.Equal,y.E7.Mercato.toString(),y.NM.Number),new n.wn$("isAttivo",y.Hp.IsTrue)],new n.aQR("ordinamento")),this.getParametriRicercaCanaleVenditaRQ=n.k$g.fromFilters([new n.wn$("tipoParametro",y.Hp.Equal,y.E7.CanaleVendita.toString(),y.NM.Number),new n.wn$("isAttivo",y.Hp.IsTrue)],new n.aQR("ordinamento")),this.tabIndex=0,this.enumTipoAnagrafica=y.dp}ngOnInit(){(null==this._cliente.oid||this._cliente.oid<=0)&&(this._cliente.lingua=this.linguaDefault,this.selectedCliente.lingua=this.linguaDefault),this.lettereMaiuscoleAnagrafica=this.sessionService.getLettereMaiuscoleAnagrafica()}save(){this._cliente.cognome&&this._cliente.email&&null!=this._cliente.lingua&&this._cliente.lingua.oid>0?this.utilityService.validateEmail(this._cliente.email)?this._cliente.oid>0?(this.setIsLoading(!0),this.apiService.setCliente(this._cliente).subscribe(A=>{this.setIsLoading(!1),this.dialogRef.close(A.data.obj)})):(this.setIsLoading(!0),this.apiService.getClientiFilter(n.k$g.fromFilter("email",y.Hp.Equal,this._cliente.email,y.NM.String)).subscribe(A=>{A.data.length>0?(this.setIsLoading(!1),this.showError("sbm.preventivi.emailGiaUtilizzata").then(()=>{let m=new n.Zpt;m.width="40vw",m.disableClose=!0;let v=this.showModalDialog(g.H,m),b=v.componentInstance;b.dialogRef=v,b.title="globals.cliente",b.data=A.data,b.displayMembers=["nome","cognome","email","cellulare"],b.showFilter=!1,v.afterClosed().subscribe(I=>{if(I){if(this._cliente=I,this.selectedCliente=I,I.nazione){let J=n.k$g.fromFilter("nomeItaliano",y.Hp.Equal,I.nazione,y.NM.String);this.apiService.getNazioniFilter(J).subscribe(H=>{H.data.length>0&&(I.nazioneObject=H.data[0])})}}else this._cliente.email=""})})):(this._cliente.albergo=new p.Z$(this.sessionService.getOidAlbergo()),this.apiService.setCliente(this._cliente).subscribe(m=>{this.setIsLoading(!1),this.dialogRef.close(m.data.obj)}))})):this.showError("globals.messages.emailNonValida"):this.showError("globals.messages.inserireDati")}cancel(){this.dialogRef.close(new p.c1h(-1))}reset(){-1==this._cliente.oid&&this.resetSubject.next()}onOptionSelected(A){if(this._cliente=A,null!=A&&A.oid>0&&A.nazione){let m=n.k$g.fromFilter("nomeItaliano",y.Hp.Equal,A.nazione,y.NM.String);this.apiService.getNazioniFilter(m).subscribe(v=>{v.data.length>0&&(A.nazioneObject=v.data[0])})}}onUpdateOptions(A){this.dataLoader=new n.hkX(this.apiService.getClientiFilter(A))}onNomeChange(){this._cliente.nome&&(this._cliente.nome=this.onNomeCognomeChange(this._cliente.nome))}onCognomeChange(){this._cliente.cognome&&(this._cliente.cognome=this.onNomeCognomeChange(this._cliente.cognome))}onNomeCognomeChange(A){return this.lettereMaiuscoleAnagrafica==y.nE.Iniziale?A?A[0].toUpperCase()+A.substring(1).toLowerCase():"":this.lettereMaiuscoleAnagrafica==y.nE.TuttoMaiuscolo?A.toUpperCase():A}ngOnDestroy(){this.resetSubject.complete()}}nt.\u0275fac=function(A){return new(A||nt)(r.Y36(x.s),r.Y36(O.m),r.Y36(w.t),r.Y36(w.t))},nt.\u0275cmp=r.Xpm({type:nt,selectors:[["app-cliente-select"]],inputs:{dialogRef:"dialogRef",cliente:"cliente",linguaDefault:"linguaDefault"},features:[r.qOj],decls:72,vars:96,consts:[["mat-icon-button","",1,"modal-close-button",3,"disableRipple","click"],[1,"material-icons-round"],[3,"resetSubject","dataLoader","viewProperties","formatString","viewPropertiesSelected","searchProperties","label","selected","updateOptionsEvent","optionSelectedEvent"],[1,"dialog-tab-group",3,"selectedIndex","selectedIndexChange"],[3,"label"],[1,"row","no-gutters","mt-3"],[1,"col-4","pr-2"],[1,"w-100"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange","input"],[1,"col-4","pr-2","pl-2"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange","input"],[1,"col-4","pl-2"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row","no-gutters"],[1,"col-6","pr-2"],["autocompleteOff","","type","email","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],[1,"col-6","pl-2"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["displayMember","nome",3,"dataLoader","value","placeholder","required","valueChange"],["displayMember","nomeItaliano",3,"dataLoader","value","placeholder","valueChange"],["displayMember","descrizione",3,"dataLoader","value","placeholder","valueChange"],["displayMember","nome",3,"dataLoader","value","placeholder","valueChange"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],["rows","5",1,"border","rounded","p-3","w-100",3,"ngModel","ngModelChange"],[1,"row","no-gutters","mt-2"],["color","primary",3,"ngModel","ngModelChange"],[3,"label",4,"ngIf"],[1,"mt-3","text-right"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],[3,"value"],["class","storico-container mt-3",4,"ngIf"],[1,"storico-container","mt-3"],[3,"oidCliente","small"]],template:function(A,m){1&A&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return m.cancel()}),r.TgZ(1,"i",1),r._uU(2,"clear"),r.qZA()(),r.TgZ(3,"app-autocomplete",2),r.NdJ("updateOptionsEvent",function(b){return m.onUpdateOptions(b)})("optionSelectedEvent",function(b){return m.onOptionSelected(b)}),r.ALo(4,"translate"),r.qZA(),r.TgZ(5,"mat-tab-group",3),r.NdJ("selectedIndexChange",function(b){return m.tabIndex=b}),r.TgZ(6,"mat-tab",4),r.ALo(7,"translate"),r.TgZ(8,"div",5)(9,"div",6)(10,"mat-form-field",7)(11,"input",8),r.NdJ("ngModelChange",function(b){return m._cliente.cognome=b})("ngModelChange",function(){return m.reset()})("input",function(){return m.onCognomeChange()}),r.ALo(12,"translate"),r.qZA()()(),r.TgZ(13,"div",9)(14,"mat-form-field",7)(15,"input",10),r.NdJ("ngModelChange",function(b){return m._cliente.nome=b})("ngModelChange",function(){return m.reset()})("input",function(){return m.onNomeChange()}),r.ALo(16,"translate"),r.qZA()()(),r.TgZ(17,"div",11)(18,"mat-form-field",7)(19,"mat-select",12),r.NdJ("ngModelChange",function(b){return m._cliente.tipoAnagrafica=b})("selectionChange",function(){return m.reset()}),r.ALo(20,"translate"),r.YNc(21,Y,3,4,"mat-option",13),r.ALo(22,"selectEnum"),r.qZA()()()(),r.TgZ(23,"div",14)(24,"div",15)(25,"mat-form-field",7)(26,"input",16),r.NdJ("ngModelChange",function(b){return m._cliente.email=b})("ngModelChange",function(){return m.reset()}),r.ALo(27,"translate"),r.qZA()()(),r.TgZ(28,"div",17)(29,"mat-form-field",7)(30,"input",18),r.NdJ("ngModelChange",function(b){return m._cliente.cellulare=b})("ngModelChange",function(){return m.reset()}),r.ALo(31,"translate"),r.qZA()()()(),r.TgZ(32,"div",14)(33,"div",15)(34,"app-view-select",19),r.NdJ("valueChange",function(b){return m._cliente.lingua=b})("valueChange",function(){return m.reset()}),r.ALo(35,"translate"),r.qZA()(),r.TgZ(36,"div",17)(37,"app-view-select",20),r.NdJ("valueChange",function(b){return m._cliente.nazioneObject=b})("valueChange",function(){return m.reset()}),r.ALo(38,"translate"),r.qZA()()(),r.TgZ(39,"div",14)(40,"div",15)(41,"app-view-select",21),r.NdJ("valueChange",function(b){return m._cliente.mercato=b})("valueChange",function(){return m.reset()}),r.ALo(42,"translate"),r.qZA()(),r.TgZ(43,"div",17)(44,"app-view-select",21),r.NdJ("valueChange",function(b){return m._cliente.canaleVendita=b})("valueChange",function(){return m.reset()}),r.ALo(45,"translate"),r.qZA()()(),r.TgZ(46,"div",14)(47,"div",15)(48,"app-view-select",22),r.NdJ("valueChange",function(b){return m._cliente.tipologia=b})("valueChange",function(){return m.reset()}),r.ALo(49,"translate"),r.qZA()(),r.TgZ(50,"div",17)(51,"mat-form-field",7)(52,"input",23),r.NdJ("ngModelChange",function(b){return m._cliente.sconto=b})("ngModelChange",function(){return m.reset(),m._cliente.sconto=m.utility.clamp(m._cliente.sconto,0,100)}),r.ALo(53,"translate"),r.qZA()()()(),r.TgZ(54,"div"),r._uU(55),r.ALo(56,"translate"),r.qZA(),r.TgZ(57,"textarea",24),r.NdJ("ngModelChange",function(b){return m._cliente.note=b}),r.qZA(),r.TgZ(58,"div",25)(59,"div",15)(60,"mat-checkbox",26),r.NdJ("ngModelChange",function(b){return m._cliente.privacy=b}),r._uU(61),r.ALo(62,"translate"),r.qZA()(),r.TgZ(63,"div",17)(64,"mat-checkbox",26),r.NdJ("ngModelChange",function(b){return m._cliente.newsletter=b}),r._uU(65),r.ALo(66,"translate"),r.qZA()()()(),r.YNc(67,et,3,4,"mat-tab",27),r.qZA(),r.TgZ(68,"div",28)(69,"button",29),r.NdJ("click",function(){return m.save()}),r._uU(70),r.ALo(71,"translate"),r.qZA()()),2&A&&(r.Q6J("disableRipple",!0),r.xp6(3),r.Q6J("resetSubject",m.resetSubject)("dataLoader",m.dataLoader)("viewProperties",r.DdM(85,at))("formatString","<b>#0 #1</b> #2")("viewPropertiesSelected",r.DdM(86,it))("searchProperties",r.l5B(91,_t,r.DdM(87,it),r.DdM(88,rt),r.DdM(89,st),r.DdM(90,ct)))("label",r.lcZ(4,48,"globals.ricercaCliente"))("selected",m.selectedCliente),r.xp6(2),r.Q6J("selectedIndex",m.tabIndex),r.xp6(1),r.Q6J("label",r.lcZ(7,50,"globals.dati")),r.xp6(5),r.s9C("placeholder",r.lcZ(12,52,"bo.cliente.proprieta.cognome")),r.Q6J("ngModel",m._cliente.cognome),r.xp6(4),r.s9C("placeholder",r.lcZ(16,54,"bo.cliente.proprieta.nome")),r.Q6J("ngModel",m._cliente.nome),r.xp6(4),r.s9C("placeholder",r.lcZ(20,56,"bo.cliente.proprieta.tipoAnagrafica")),r.Q6J("ngModel",m._cliente.tipoAnagrafica),r.xp6(2),r.Q6J("ngForOf",r.xi3(22,58,m.enumTipoAnagrafica,"tipoAnagrafica")),r.xp6(5),r.s9C("placeholder",r.lcZ(27,61,"bo.cliente.proprieta.email")),r.Q6J("ngModel",m._cliente.email),r.xp6(4),r.s9C("placeholder",r.lcZ(31,63,"bo.cliente.proprieta.cellulare")),r.Q6J("ngModel",m._cliente.cellulare),r.xp6(4),r.Q6J("dataLoader",m.apiService.getLingueViewSelect(null,!1))("value",m._cliente.lingua)("placeholder",r.lcZ(35,65,"bo.cliente.proprieta.lingua"))("required",!0),r.xp6(3),r.Q6J("dataLoader",m.apiService.getNazioniViewSelect())("value",m._cliente.nazioneObject)("placeholder",r.lcZ(38,67,"bo.cliente.proprieta.nazione")),r.xp6(4),r.Q6J("dataLoader",m.apiService.getParametriRicercaViewSelect(m.getParametriRicercaMercatoRQ))("value",m._cliente.mercato)("placeholder",r.lcZ(42,69,"bo.cliente.proprieta.mercato")),r.xp6(3),r.Q6J("dataLoader",m.apiService.getParametriRicercaViewSelect(m.getParametriRicercaCanaleVenditaRQ))("value",m._cliente.canaleVendita)("placeholder",r.lcZ(45,71,"bo.cliente.proprieta.canaleVendita")),r.xp6(4),r.Q6J("dataLoader",m.apiService.getTipiClienteViewSelect())("value",m._cliente.tipologia)("placeholder",r.lcZ(49,73,"bo.cliente.proprieta.tipologia")),r.xp6(4),r.s9C("placeholder",r.lcZ(53,75,"bo.cliente.proprieta.sconto")),r.Q6J("ngModel",m._cliente.sconto),r.xp6(3),r.Oqu(r.lcZ(56,77,"bo.cliente.proprieta.note")),r.xp6(2),r.Q6J("ngModel",m._cliente.note),r.xp6(3),r.Q6J("ngModel",m._cliente.privacy),r.xp6(1),r.hij("",r.lcZ(62,79,"bo.cliente.proprieta.privacy")," "),r.xp6(3),r.Q6J("ngModel",m._cliente.newsletter),r.xp6(1),r.hij("",r.lcZ(66,81,"bo.cliente.proprieta.newsletter")," "),r.xp6(2),r.Q6J("ngIf",null!=m._cliente&&m._cliente.oid>0),r.xp6(3),r.Oqu(r.lcZ(71,83,"globals.salva")))},dependencies:[q.X,z.sg,z.O5,k.Fj,k.wV,k.JJ,k.Q7,k.On,f.FC,T.eB,B.v_,N.k0,V.CK,W.x8,Z.SK,Z.R7,R.Y,E.d,Q.g,S.A,L.X$],styles:["textarea[_ngcontent-%COMP%]{resize:none}.storico-container[_ngcontent-%COMP%]{min-height:350px}"]})},87640:(tt,F,_)=>{_.d(F,{J:()=>pt});var e=_(65879),t=_(88431),g=_(16676),n=_(14090),y=_(6556),r=_(86107),x=_(52374),O=_(70763),w=_(52038),q=_(52329),z=_(19209),k=_(85105),f=_(10244),T=_(93724),B=_(2353),N=_(44882),V=_(30724),W=_(96814),Z=_(56223),R=_(45754),E=_(94505),Q=_(84187),S=_(42400),L=_(24678),Y=_(38034),ot=_(48424),et=_(30481),at=_(27162),it=_(46446),rt=_(89515);function st(h,u){if(1&h&&(e.TgZ(0,"div",34),e._uU(1),e.qZA()),2&h){const o=e.oxw(2);e.Udp("background-color",o.coloreBanner),e.Q6J("appInvertColor",o.coloreBanner),e.xp6(1),e.hij(" ",o.banner," ")}}function ct(h,u){if(1&h&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&h){const o=u.$implicit;e.Q6J("value",o.oid),e.xp6(1),e.hij(" ",o.nome," ")}}function _t(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"mat-form-field",23)(1,"mat-select",35),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.oidPortale=d)})("selectionChange",function(){e.CHM(o);const d=e.oxw(2);return e.KtG(d.onPortaleChange())}),e.ALo(2,"translate"),e.YNc(3,ct,2,2,"mat-option",36),e.qZA()()}if(2&h){const o=e.oxw(2);e.xp6(1),e.Q6J("ngModel",o.oidPortale)("placeholder",e.lcZ(2,4,"interfaces.form-v1.portale"))("panelClass",o.booking?"booking-select":""),e.xp6(2),e.Q6J("ngForOf",o.portaliList)}}function nt(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"mat-form-field",23)(3,"input",38),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.model.dal=d)})("dateChange",function(){e.CHM(o);const d=e.oxw(2);return e.KtG(d.onArrivoChange())})("click",function(){e.CHM(o);const d=e.MAs(7);return e.KtG(d.open())}),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"mat-datepicker-toggle",39)(6,"mat-datepicker",40,41),e.qZA()(),e.TgZ(8,"div",19)(9,"mat-form-field",23)(10,"input",42),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.model.al=d)})("dateChange",function(){e.CHM(o);const d=e.oxw(2);return e.KtG(d.onPartenzaChange())})("click",function(){e.CHM(o);const d=e.MAs(14);return e.KtG(d.open())}),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"mat-datepicker-toggle",39)(13,"mat-datepicker",40,43),e.qZA()()()}if(2&h){const o=e.MAs(7),C=e.MAs(14),d=e.oxw(2);e.xp6(3),e.s9C("placeholder",e.lcZ(4,14,"interfaces.form-v1.dal")),e.Q6J("matDatepicker",o)("ngModel",d.model.dal)("min",d.minDate)("max",null==d.portale?null:d.portale.dataFineGestione),e.xp6(2),e.Q6J("for",o),e.xp6(1),e.Q6J("panelClass",d.booking?"booking-datepicker":""),e.xp6(4),e.s9C("placeholder",e.lcZ(11,16,"interfaces.form-v1.al")),e.Q6J("matDatepicker",C)("ngModel",d.model.al)("min",d.minDate)("max",null==d.portale?null:d.portale.dataFineGestione),e.xp6(2),e.Q6J("for",C),e.xp6(1),e.Q6J("panelClass",d.booking?"booking-datepicker":"")}}function G(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"mat-form-field",23)(1,"input",44),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.data=d)})("dateChange",function(){e.CHM(o);const d=e.oxw(2);return e.KtG(d.onDataChange())})("click",function(){e.CHM(o);const d=e.MAs(5);return e.KtG(d.open())}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"mat-datepicker-toggle",39)(4,"mat-datepicker",40,45),e.qZA()}if(2&h){const o=e.MAs(5),C=e.oxw(2);e.xp6(1),e.s9C("placeholder",e.lcZ(2,7,"interfaces.form-v1.data")),e.Q6J("matDatepicker",o)("ngModel",C.data)("min",C.minDate)("max",null==C.portale?null:C.portale.dataFineGestione),e.xp6(2),e.Q6J("for",o),e.xp6(1),e.Q6J("panelClass",C.booking?"booking-datepicker":"")}}function A(h,u){1&h&&(e.TgZ(0,"div",46)(1,"span",9),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&h&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"interfaces.form-v1.bambini")))}const m=function(h){return{oid:h}};function v(h,u){1&h&&e._UZ(0,"mat-option",37),2&h&&e.Q6J("value",e.VKq(1,m,-1))}function b(h,u){if(1&h&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&h){const o=u.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o.nome," ")}}const I=function(){return["booking-select","unlimited-width-select"]};function J(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"mat-form-field",65)(1,"mat-select",66),e.NdJ("selectionChange",function(d){e.CHM(o);const M=e.oxw().$implicit,K=e.oxw(2);return e.KtG(K.onTipoCameraChange(M,d.value))}),e.ALo(2,"translate"),e.YNc(3,v,1,3,"mat-option",67),e.YNc(4,b,2,2,"mat-option",36),e.qZA()()}if(2&h){const o=e.oxw().$implicit,C=e.oxw(2);e.xp6(1),e.Q6J("panelClass",C.booking?e.DdM(10,I):"unlimited-width-select")("value",o.tipoCameraOTA)("compareWith",C.compareWithOid)("placeholder",e.lcZ(2,8,"interfaces.form-v1.tipoCamera"))("required",C.tipoCameraRequired)("matTooltip",o.nomeTipoCamera),e.xp6(2),e.Q6J("ngIf",!C.tipoCameraRequired),e.xp6(1),e.Q6J("ngForOf",C.tipiCameraOTAPortale)}}function H(h,u){1&h&&e._UZ(0,"mat-option",37),2&h&&e.Q6J("value",-1)}function dt(h,u){if(1&h&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&h){const o=e.oxw().$implicit;e.Q6J("value",o.oid),e.xp6(1),e.hij(" ",o.descrizione," ")}}function bt(h,u){if(1&h&&(e.ynx(0),e.YNc(1,dt,2,2,"mat-option",67),e.BQk()),2&h){const o=u.$implicit,C=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",null==C.oidTariffe||0==C.oidTariffe.length||C.oidTariffe.includes(o.oid))}}function vt(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"mat-form-field",65)(1,"mat-select",68),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw().$implicit;return e.KtG(M.tariffaOTA.oid=d)}),e.ALo(2,"translate"),e.YNc(3,H,1,1,"mat-option",67),e.YNc(4,bt,2,1,"ng-container",11),e.qZA()()}if(2&h){const o=e.oxw().$implicit,C=e.oxw(2);e.xp6(1),e.Q6J("panelClass",C.booking?"booking-select":"")("ngModel",o.tariffaOTA.oid)("placeholder",e.lcZ(2,6,"interfaces.form-v1.tariffa"))("required",C.tariffaRequired),e.xp6(2),e.Q6J("ngIf",!C.tariffaRequired),e.xp6(1),e.Q6J("ngForOf",C.tariffeOTAPortale)}}function xt(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(o);const d=e.oxw().index,M=e.oxw(2);return e.KtG(M.onCameraRemove(d))}),e.TgZ(1,"i",14),e._uU(2,"clear"),e.qZA()()}}function Mt(h,u){1&h&&(e.TgZ(0,"div",70)(1,"span",9),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&h&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"interfaces.form-v1.bambini")))}function mt(h,u){if(1&h){const o=e.EpF();e.ynx(0),e.TgZ(1,"button",60),e.NdJ("click",function(){e.CHM(o);const d=e.oxw(),M=d.index,K=d.$implicit,j=e.oxw(2);return e.KtG(j.onNumeroBambiniChange(M,!1,K.numeroBambini-1))}),e.TgZ(2,"i",61),e._uU(3,"remove_circle_outline"),e.qZA()(),e.TgZ(4,"span",62),e._uU(5),e.qZA(),e.TgZ(6,"button",60),e.NdJ("click",function(){e.CHM(o);const d=e.oxw(),M=d.index,K=d.$implicit,j=e.oxw(2);return e.KtG(j.onNumeroBambiniChange(M,!0,K.numeroBambini+1))}),e.TgZ(7,"i",61),e._uU(8,"add_circle_outline"),e.qZA()(),e.BQk()}if(2&h){const o=e.oxw().$implicit,C=e.oxw(2);e.xp6(1),e.Q6J("disabled",o.numeroBambini<=0),e.xp6(4),e.Oqu(o.numeroBambini),e.xp6(1),e.Q6J("disabled",o.numeroAdulti+o.numeroBambini>=12||C.bambiniMax>0&&o.numeroBambini>=C.bambiniMax)}}function Tt(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(o);const d=e.oxw().index,M=e.oxw(2);return e.KtG(M.onCameraRemove(d))}),e.TgZ(1,"i",14),e._uU(2,"clear"),e.qZA()()}}function Dt(h,u){1&h&&e._UZ(0,"div",77)}function yt(h,u){if(1&h&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&h){const o=u.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}const Pt=function(h,u){return{"pt-1":h,"pt-2":u}};function Ot(h,u){if(1&h){const o=e.EpF();e.ynx(0),e.YNc(1,Dt,1,0,"div",73),e.TgZ(2,"div",74)(3,"mat-form-field",75)(4,"mat-select",76),e.NdJ("ngModelChange",function(d){const K=e.CHM(o).index,j=e.oxw(2).$implicit;return e.KtG(j.pax[K+1].anni=d)}),e.YNc(5,yt,2,2,"mat-option",36),e.qZA()()(),e.BQk()}if(2&h){const o=u.index,C=e.oxw(2).$implicit,d=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o>0),e.xp6(1),e.Q6J("ngClass",e.WLB(5,Pt,o>0,0==o)),e.xp6(2),e.Q6J("panelClass",d.booking?"booking-select":"")("ngModel",C.pax[o+1].anni),e.xp6(1),e.Q6J("ngForOf",d.utility.counterFromTo(d.etaMinimaBambini,d.etaMassimaBambini))}}function At(h,u){if(1&h&&(e.ynx(0),e.TgZ(1,"div",71)(2,"div",72),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,Ot,6,8,"ng-container",11),e.BQk()),2&h){const o=e.oxw().$implicit,C=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,2,"interfaces.form-v1.etaBambini")),e.xp6(2),e.Q6J("ngForOf",C.utility.counter(o.numeroBambini))}}function Et(h,u){if(1&h){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",47)(2,"div",48)(3,"div",49)(4,"span",50),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span",51),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",52),e.YNc(11,J,5,11,"mat-form-field",53),e.qZA(),e.TgZ(12,"div",52),e.YNc(13,vt,5,8,"mat-form-field",53),e.qZA(),e.TgZ(14,"div",54),e.YNc(15,xt,3,0,"button",55),e.qZA(),e.TgZ(16,"div",56)(17,"div",18)(18,"div",57)(19,"span",9),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.YNc(22,Mt,4,3,"div",58),e.qZA()(),e.TgZ(23,"div",59)(24,"button",60),e.NdJ("click",function(){const d=e.CHM(o),M=d.index,K=d.$implicit,j=e.oxw(2);return e.KtG(j.onNumeroAdultiChange(M,K.numeroAdulti-1))}),e.TgZ(25,"i",61),e._uU(26,"remove_circle_outline"),e.qZA()(),e.TgZ(27,"span",62),e._uU(28),e.qZA(),e.TgZ(29,"button",60),e.NdJ("click",function(){const d=e.CHM(o),M=d.index,K=d.$implicit,j=e.oxw(2);return e.KtG(j.onNumeroAdultiChange(M,K.numeroAdulti+1))}),e.TgZ(30,"i",61),e._uU(31,"add_circle_outline"),e.qZA()()(),e.TgZ(32,"div",63),e.YNc(33,mt,9,3,"ng-container",1),e.qZA(),e.TgZ(34,"div",64),e.YNc(35,Tt,3,0,"button",55),e.qZA(),e.YNc(36,At,6,4,"ng-container",1),e.qZA(),e.BQk()}if(2&h){const o=u.$implicit,C=u.index,d=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,13,"interfaces.form-v1.camera")+" "+(C+1)),e.xp6(3),e.Oqu(e.lcZ(9,15,"interfaces.form-v1.cam")+" "+(C+1)),e.xp6(3),e.Q6J("ngIf",d.isVisualizzaTipoCamera&&d.tipiCameraOTAPortale.length>0),e.xp6(2),e.Q6J("ngIf",d.isVisualizzaTrattamento&&d.tariffeOTAPortale.length>0),e.xp6(2),e.Q6J("ngIf",d.model.camere.length>1),e.xp6(5),e.Oqu(e.lcZ(21,17,"interfaces.form-v1.adulti")),e.xp6(2),e.Q6J("ngIf",!d.isDisattivaRichiestaBambini),e.xp6(2),e.Q6J("disabled",o.numeroAdulti<=1),e.xp6(4),e.Oqu(o.numeroAdulti),e.xp6(1),e.Q6J("disabled",o.numeroAdulti+o.numeroBambini>=12||d.adultiMax>0&&o.numeroAdulti>=d.adultiMax),e.xp6(4),e.Q6J("ngIf",!d.isDisattivaRichiestaBambini),e.xp6(2),e.Q6J("ngIf",d.model.camere.length>1),e.xp6(1),e.Q6J("ngIf",o.numeroBambini>0)}}function wt(h,u){1&h&&e._UZ(0,"mat-option",37),2&h&&e.Q6J("value",null)}function Bt(h,u){if(1&h&&(e.TgZ(0,"mat-option",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h){const o=u.$implicit;e.Q6J("value",o.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,o.value)," ")}}function kt(h,u){1&h&&e._UZ(0,"mat-option",37),2&h&&e.Q6J("value",-1)}function Zt(h,u){if(1&h&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&h){const o=u.$implicit;e.Q6J("value",o.oid),e.xp6(1),e.hij(" ",o.descrizione," ")}}function It(h,u){1&h&&e._UZ(0,"mat-option",37),2&h&&e.Q6J("value",-1)}function zt(h,u){if(1&h&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&h){const o=u.$implicit;e.Q6J("value",o.oid),e.xp6(1),e.hij(" ",o.descrizione," ")}}function Rt(h,u){if(1&h&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&h){const o=u.$implicit;e.Q6J("value",o.oid),e.xp6(1),e.hij(" ",o.nome," ")}}function St(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"div",78)(1,"div",18)(2,"div",79)(3,"mat-form-field",23)(4,"mat-select",80),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.model.tipoRichiesta=d)}),e.ALo(5,"translate"),e.YNc(6,wt,1,1,"mat-option",67),e.YNc(7,Bt,3,4,"mat-option",36),e.ALo(8,"selectEnum"),e.qZA()()(),e.TgZ(9,"div",79)(10,"mat-form-field",23)(11,"mat-select",80),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.model.cliente.mercato.oid=d)}),e.ALo(12,"translate"),e.YNc(13,kt,1,1,"mat-option",67),e.YNc(14,Zt,2,2,"mat-option",36),e.qZA()()(),e.TgZ(15,"div",79)(16,"mat-form-field",23)(17,"mat-select",80),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.model.cliente.canaleVendita.oid=d)}),e.ALo(18,"translate"),e.YNc(19,It,1,1,"mat-option",67),e.YNc(20,zt,2,2,"mat-option",36),e.qZA()()()(),e.TgZ(21,"div",18)(22,"div",19)(23,"app-view-select",81),e.NdJ("valueChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.model.cliente.nazioneObject=d)}),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",19)(26,"mat-form-field",23)(27,"mat-select",82),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.model.cliente.lingua.oid=d)}),e.ALo(28,"translate"),e._UZ(29,"mat-option",37),e.YNc(30,Rt,2,2,"mat-option",36),e.qZA()()()()()}if(2&h){const o=e.oxw(2);e.xp6(4),e.s9C("placeholder",e.lcZ(5,23,"bo.richiesta.proprieta.tipoRichiesta")),e.Q6J("ngModel",o.model.tipoRichiesta)("required",o.tipoRichiestaRequired),e.xp6(2),e.Q6J("ngIf",!o.tipoRichiestaRequired),e.xp6(1),e.Q6J("ngForOf",e.xi3(8,25,o.enumTipoRichiesta,"tipoRichiestaPreventivo")),e.xp6(4),e.Q6J("ngModel",o.model.cliente.mercato.oid)("placeholder",e.lcZ(12,28,"bo.cliente.proprieta.mercato"))("required",o.mercatoRequired),e.xp6(2),e.Q6J("ngIf",!o.mercatoRequired),e.xp6(1),e.Q6J("ngForOf",o.parametriRicercaMercato),e.xp6(3),e.Q6J("ngModel",o.model.cliente.canaleVendita.oid)("placeholder",e.lcZ(18,30,"bo.cliente.proprieta.canaleVendita"))("required",o.canaleVenditaRequired),e.xp6(2),e.Q6J("ngIf",!o.canaleVenditaRequired),e.xp6(1),e.Q6J("ngForOf",o.parametriRicercaCanaleVendita),e.xp6(3),e.Q6J("dataLoader",o.apiService.getNazioniViewSelect(null,!o.nazioneRequired))("value",o.model.cliente.nazioneObject)("placeholder",e.lcZ(24,32,"bo.cliente.proprieta.nazione"))("required",o.nazioneRequired),e.xp6(4),e.Q6J("ngModel",o.model.cliente.lingua.oid)("placeholder",e.lcZ(28,34,"bo.cliente.proprieta.lingua")),e.xp6(2),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",o.lingue)}}function qt(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){e.CHM(o);const d=e.oxw(2);return e.KtG(d.openClienteSelect())}),e.TgZ(1,"i",14),e._uU(2,"open_in_new"),e.qZA()()}2&h&&e.Q6J("disableRipple",!0)}function Lt(h,u){1&h&&(e.TgZ(0,"mat-hint")(1,"span",84),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&h&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"interfaces.form-v1.cellulareNonValido")))}function ht(h,u){1&h&&e._UZ(0,"mat-option",37),2&h&&e.Q6J("value",null)}function ft(h,u){if(1&h&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&h){const o=u.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o.nome," ")}}function Ut(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"div",19)(1,"mat-form-field",23)(2,"mat-select",68),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw(2);return e.KtG(M.model.motivoViaggio=d)}),e.ALo(3,"translate"),e.YNc(4,ht,1,1,"mat-option",67),e.YNc(5,ft,2,2,"mat-option",36),e.qZA()()()}if(2&h){const o=e.oxw(2);e.xp6(2),e.Q6J("panelClass","richiesta-select")("ngModel",o.model.motivoViaggio)("placeholder",e.lcZ(3,6,"interfaces.form-v1.motivoViaggio"))("required",o.motivoViaggioRequired),e.xp6(2),e.Q6J("ngIf",!o.motivoViaggioRequired),e.xp6(1),e.Q6J("ngForOf",o.motiviViaggio)}}function Jt(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"a",85),e.NdJ("click",function(d){e.CHM(o);const M=e.oxw(2);return d.preventDefault(),e.KtG(M.openPrivacyDialog())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"interfaces.form-v1.privacy")))}function Nt(h,u){1&h&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"interfaces.form-v1.privacy")))}function Ft(h,u){if(1&h){const o=e.EpF();e.TgZ(0,"a",86),e.NdJ("click",function(d){e.CHM(o);const M=e.oxw(2);return d.preventDefault(),e.KtG(M.openNewsletterDialog())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"interfaces.form-v1.newsletter")))}function Qt(h,u){1&h&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"interfaces.form-v1.newsletter")))}const Kt=function(h,u){return{"w-100":h,"cognome-input":u}},Vt=function(h){return{"button-blue":h}};function Wt(h,u){if(1&h){const o=e.EpF();e.ynx(0),e.TgZ(1,"h4",2),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,st,2,4,"div",3),e.TgZ(5,"div",4),e.YNc(6,_t,4,6,"mat-form-field",5),e.YNc(7,nt,15,18,"div",6),e.YNc(8,G,6,9,"mat-form-field",5),e.TgZ(9,"div",7)(10,"div",8)(11,"span",9),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.YNc(14,A,4,3,"div",10),e.qZA(),e.YNc(15,Et,37,19,"ng-container",11),e.TgZ(16,"div",12)(17,"button",13),e.NdJ("click",function(){e.CHM(o);const d=e.oxw();return e.KtG(d.onCameraAdd())}),e.TgZ(18,"i",14),e._uU(19,"add_circle_outline"),e.qZA()(),e.TgZ(20,"span",15),e.NdJ("click",function(){e.CHM(o);const d=e.oxw();return e.KtG(d.onCameraAdd())}),e._uU(21),e.ALo(22,"translate"),e.qZA()()(),e.YNc(23,St,31,36,"div",16),e.TgZ(24,"div",17)(25,"div",18)(26,"div",19)(27,"mat-form-field",20)(28,"input",21),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw();return e.KtG(M.model.cliente.cognome=d)})("ngModelChange",function(){e.CHM(o);const d=e.oxw();return e.KtG(d.model.cliente.cognome?d.model.cliente.cognome=d.utility.capitalize(d.model.cliente.cognome):null)}),e.ALo(29,"translate"),e.qZA()(),e.YNc(30,qt,3,1,"button",22),e.qZA(),e.TgZ(31,"div",19)(32,"mat-form-field",23)(33,"input",24),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw();return e.KtG(M.model.cliente.nome=d)})("ngModelChange",function(){e.CHM(o);const d=e.oxw();return e.KtG(d.model.cliente.nome?d.model.cliente.nome=d.utility.capitalize(d.model.cliente.nome):null)}),e.ALo(34,"translate"),e.qZA()()()(),e.TgZ(35,"div",18)(36,"div",19)(37,"mat-form-field",23)(38,"input",25),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw();return e.KtG(M.model.cliente.email=d)}),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",19)(41,"mat-form-field",23)(42,"input",24),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw();return e.KtG(M.model.cliente.cellulare=d)}),e.ALo(43,"translate"),e.qZA(),e.YNc(44,Lt,4,3,"mat-hint",1),e.qZA()()(),e.TgZ(45,"div",26)(46,"div",19)(47,"mat-form-field",23)(48,"input",24),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw();return e.KtG(M.model.note=d)}),e.ALo(49,"translate"),e.qZA()()(),e.YNc(50,Ut,6,8,"div",27),e.qZA()(),e.TgZ(51,"div",28)(52,"div")(53,"mat-checkbox",29),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw();return e.KtG(M.model.cliente.privacy=d)}),e.YNc(54,Jt,3,3,"a",30),e.YNc(55,Nt,3,3,"span",1),e.qZA()(),e.TgZ(56,"div")(57,"mat-checkbox",29),e.NdJ("ngModelChange",function(d){e.CHM(o);const M=e.oxw();return e.KtG(M.model.cliente.newsletter=d)}),e.YNc(58,Ft,3,3,"a",31),e.YNc(59,Qt,3,3,"span",1),e.qZA()()(),e.TgZ(60,"div",32)(61,"button",33),e.NdJ("click",function(){e.CHM(o);const d=e.oxw();return e.KtG(d.save())}),e._uU(62),e.ALo(63,"translate"),e.qZA()(),e.BQk()}if(2&h){const o=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,44,"interfaces.form-v1."+(o.model.isDayUse?"richiestaDayUse":"richiesta"))),e.xp6(2),e.Q6J("ngIf",!!o.banner),e.xp6(2),e.Q6J("ngIf",!o.oidPortaleReceived),e.xp6(1),e.Q6J("ngIf",!o.model.isDayUse),e.xp6(1),e.Q6J("ngIf",o.model.isDayUse),e.xp6(4),e.Oqu(e.lcZ(13,46,"interfaces.form-v1.adulti")),e.xp6(2),e.Q6J("ngIf",!o.isDisattivaRichiestaBambini),e.xp6(1),e.Q6J("ngForOf",o.model.camere),e.xp6(2),e.Udp("color",o.model.camere.length<o.camerePrenotabili?o.booking?"var(--main-color)":"#e91e63":"#999999"),e.Q6J("disabled",o.model.camere.length>=o.camerePrenotabili),e.xp6(3),e.Udp("color",o.model.camere.length<o.camerePrenotabili?o.booking?"var(--main-color)":"#e91e63":"#999999"),e.xp6(1),e.hij(" ",e.lcZ(22,48,"interfaces.form-v1.aggiungiCamera")," "),e.xp6(2),e.Q6J("ngIf",!o.booking),e.xp6(4),e.Q6J("ngClass",e.WLB(62,Kt,o.booking,!o.booking)),e.xp6(1),e.Q6J("placeholder",e.lcZ(29,50,"interfaces.form-v1.cognome"))("ngModel",o.model.cliente.cognome),e.xp6(2),e.Q6J("ngIf",!o.booking),e.xp6(3),e.Q6J("placeholder",e.lcZ(34,52,"interfaces.form-v1.nome"))("ngModel",o.model.cliente.nome)("required",o.nomeRequired),e.xp6(5),e.Q6J("placeholder",e.lcZ(39,54,"interfaces.form-v1.email"))("ngModel",o.model.cliente.email)("required",o.model.tipoRichiesta!=o.enumTipoRichiesta.Telefono&&o.model.tipoRichiesta!=o.enumTipoRichiesta.WhatsApp),e.xp6(4),e.Q6J("placeholder",e.lcZ(43,56,"interfaces.form-v1.cellulare"))("ngModel",o.model.cliente.cellulare)("required",o.cellulareRequired||o.model.tipoRichiesta==o.enumTipoRichiesta.WhatsApp),e.xp6(2),e.Q6J("ngIf",(o.cellulareRequired||o.model.tipoRichiesta==o.enumTipoRichiesta.WhatsApp)&&(!o.model.cliente.cellulare||o.model.cliente.cellulare.length<8)),e.xp6(4),e.Q6J("placeholder",e.lcZ(49,58,"interfaces.form-v1.note"))("ngModel",o.model.note)("required",o.noteRequired),e.xp6(2),e.Q6J("ngIf",o.motiviViaggio.length>0),e.xp6(3),e.Q6J("ngModel",o.model.cliente.privacy)("color",o.booking?null:"primary"),e.xp6(1),e.Q6J("ngIf",o.booking),e.xp6(1),e.Q6J("ngIf",!o.booking),e.xp6(2),e.Q6J("ngModel",o.model.cliente.newsletter)("color",o.booking?null:"primary"),e.xp6(1),e.Q6J("ngIf",o.booking&&null!=o.newsLetterPortale&&(!!o.newsLetterPortale.html||!!o.newsLetterPortale.url)),e.xp6(1),e.Q6J("ngIf",!o.booking||null==o.newsLetterPortale||!o.newsLetterPortale.html&&!o.newsLetterPortale.url),e.xp6(2),e.Q6J("ngClass",e.VKq(65,Vt,o.booking))("disabled",!o.model.cliente.privacy||null==o.oidPortale||o.oidPortale<=0),e.xp6(1),e.Oqu(e.lcZ(63,60,o.createPreventivo?"interfaces.form-v1.continua":"interfaces.form-v1.inviaRichiesta"))}}const Yt=function(h){return{"h-100":h}};class pt extends n.H{constructor(u,o,C,d,M,K,j){super(),this.route=u,this.router=o,this.apiService=C,this.localizationService=d,this.cssLoaderService=M,this.containerService=K,this.utility=j,this.createPreventivo=!1,this.modal=!1,this.booking=!1,this.onLoaded=new e.vpe,this.onRichiestaSaved=new e.vpe,this.onPortaleSelected=new e.vpe,this.model=new y.HYV,this.tipiCamera=[],this.tariffe=[],this.tipiCameraOTAPortale=[],this.tariffeOTAPortale=[],this.parametriRicercaMercato=[],this.parametriRicercaCanaleVendita=[],this.portali=[],this.portaliList=[],this.initialized=!1,this.enumCampoObbligatorioFormRichiesta=x.i0,this.cellulareRequired=!1,this.tipoRichiestaRequired=!1,this.mercatoRequired=!1,this.canaleVenditaRequired=!1,this.nazioneRequired=!1,this.noteRequired=!1,this.nomeRequired=!1,this.tipoCameraRequired=!1,this.tariffaRequired=!1,this.motivoViaggioRequired=!1,this.enumTipoRichiesta=x.GY,this.camerePrenotabili=10,this.etaMinimaBambini=0,this.etaMassimaBambini=17,this.adultiDefault=2,this.adultiMax=0,this.bambiniMax=0,this.isVisualizzaTipoCamera=!0,this.isVisualizzaTrattamento=!0,this.isDisattivaRichiestaBambini=!1,this.motiviViaggio=[]}ngOnInit(){if(this.modal||this.containerService.setScrollingContainer("richiesta"),null!=this.cliente&&(this.model.cliente=this.cliente),null==this.model.cliente.mercato&&(this.model.cliente.mercato=new y.k8R),null==this.model.cliente.canaleVendita&&(this.model.cliente.canaleVendita=new y.k8R),null==this.model.cliente.lingua&&(this.model.cliente.lingua=new y.orF),this.model.cliente.nazioneObject=new y.uyR,this.model.cliente.nazione){let u=r.k$g.fromFilter("nomeItaliano",x.Hp.Equal,this.model.cliente.nazione,x.NM.String);this.apiService.getNazioniFilter(u).subscribe(o=>{o.data.length>0&&(this.model.cliente.nazioneObject=o.data[0])})}this.booking?(this.model.urlRichiesta=window.location.href,this.model.urlReferrer=document.referrer):this.model.dataVisualizzazione=this.getDate(g()),this.oidPortaleReceived=null!=this.oidPortale,null==this.oidAlbergo?this.sub=this.route.queryParamMap.subscribe(u=>{let o=u.get("oidPortale"),C=u.get("oidAlbergo");this.model.isDayUse="true"==u.get("dayUse"),o&&!isNaN(+o)||C&&!isNaN(+C)?(this.setIsLoading(!0),o&&!isNaN(+o)?this.apiService.checkPortale(+o).subscribe(d=>{d.data.success&&d.data.oidAlbergo>0?(this.oidPortale=+o,this.oidAlbergo=+d.data.oidAlbergo,this.cssLoaderService.load(this.oidAlbergo,x.I8.Richiesta,d.data.oidUbicazioneIstat),this.oidPortaleReceived=!0,this.init(u.get("lingua"),!0)):this.router.navigate(["sbm"]).then(()=>{this.setIsLoading(!1)})}):this.apiService.checkAlbergo(+C).subscribe(d=>{d.data.success?(this.oidAlbergo=+C,this.cssLoaderService.load(this.oidAlbergo,x.I8.Richiesta,d.data.oidUbicazioneIstat),this.oidPortaleReceived=!1,this.init(u.get("lingua"),!0)):this.router.navigate(["sbm"]).then(()=>{this.setIsLoading(!1)})})):this.router.navigate(["sbm"])}):(this.setIsLoading(!0),this.init(this.language))}init(u,o=!1){this.utility.setLingua(u).then(C=>{this.lingua=null==C?void 0:C.codice,this.linguaObj=C,this.model.cliente.codiceLingua=this.lingua;let d=new r.hbb;d.oidAlbergo=this.oidAlbergo,d.oidPortale=this.oidPortale,d.lingua=this.lingua,this.apiService.getViewFormV1(d).subscribe(M=>{if(this.tipiCamera=M.data.tipiCamera,this.tariffe=M.data.tariffe,this.parametriRicercaMercato=M.data.parametriRicercaMercato,this.parametriRicercaCanaleVendita=M.data.parametriRicercaCanaleVendita,this.motiviViaggio=M.data.motiviViaggio,this.newsLetterPortale=M.data.newsLetterPortale,o&&M.data.traduzioni){let K;try{K=JSON.parse(M.data.traduzioni)}catch(j){}K&&this.localizationService.setTranslation(this.localizationService.getCurrentLocale(),K)}this.portali=M.data.portali,this.portaliList=this.portali.filter(K=>K.isVisualizzaRichiesteCrm),this.portaliList.length>0&&null==this.oidPortale&&(this.oidPortale=this.portaliList[0].oid),this.onPortaleChange(),this.onCameraAdd(),this.initialized=!0,this.setIsLoading(!1),this.onLoaded.emit()})})}onNumeroBambiniChange(u,o,C){if(o){let d=new y.qXJ;d.tipo=x.dE.Bambino,d.anni=this.etaMinimaBambini,d.quantita=1,this.model.camere[u].pax.push(d)}else this.model.camere[u].pax.pop();this.model.camere[u].numeroBambini=C}onNumeroAdultiChange(u,o){this.model.camere[u].pax[0].quantita=o,this.model.camere[u].numeroAdulti=o}onCameraAdd(){if(this.model.camere.length<this.camerePrenotabili){let u=new y.AXd;u.numeroAdulti=this.adultiDefault,u.numeroBambini=0;let o=new y.qXJ;o.tipo=x.dE.Adulto,o.anni=-1,o.quantita=this.adultiDefault,u.pax=[o],this.model.camere.push(u)}}onCameraRemove(u){this.model.camere.splice(u,1)}save(){if(this.model.isDayUse&&(this.model.dal=this.data,this.model.al=this.data),this.model.dal&&this.model.al&&this.model.dal<=this.model.al&&this.model.cliente.cognome&&(this.model.tipoRichiesta==x.GY.Telefono||this.model.tipoRichiesta==x.GY.WhatsApp||this.model.cliente.email))if(!(!this.cellulareRequired&&this.model.tipoRichiesta!=x.GY.WhatsApp||this.model.cliente.cellulare&&this.model.cliente.cellulare.length>=8)||this.tipoRichiestaRequired&&null==this.model.tipoRichiesta||this.mercatoRequired&&!(null!=this.model.cliente.mercato&&this.model.cliente.mercato.oid>0)||this.canaleVenditaRequired&&!(null!=this.model.cliente.canaleVendita&&this.model.cliente.canaleVendita.oid>0)||this.nazioneRequired&&!(null!=this.model.cliente.nazioneObject&&this.model.cliente.nazioneObject.oid>0)||this.noteRequired&&!this.model.note||this.tipoCameraRequired&&!this.model.camere.every(u=>null!=u.tipoCameraOTA&&u.tipoCameraOTA.oid>0)||this.tariffaRequired&&!this.model.camere.every(u=>null!=u.tariffaOTA&&u.tariffaOTA.oid>0)||this.motivoViaggioRequired&&!(null!=this.model.motivoViaggio&&this.model.motivoViaggio.oid>0)||this.nomeRequired&&!this.model.cliente.nome)this.showError("globals.messages.inserireDati");else if(this.model.cliente.email&&this.utility.validateEmail(this.model.cliente.email)||!this.model.cliente.email&&(this.model.tipoRichiesta==x.GY.Telefono||this.model.tipoRichiesta==x.GY.WhatsApp)){null!=this.oidAlbergo&&(this.model.albergo=new y.Z$(this.oidAlbergo)),null!=this.oidPortale&&(this.model.portaleXAlbergo=new y.$Ys(this.oidPortale)),this.model.dal=this.getDate(this.model.dal),this.model.al=this.getDate(this.model.al);let u=JSON.parse(JSON.stringify(this.model));delete u.richiestaJSON;for(let C of u.camere){delete C.numeroAdulti,delete C.numeroBambini,delete C.richiesta;for(let d of C.pax)delete d.richiestaCamere}this.model.richiestaJSON=JSON.stringify(u),this.setIsLoading(!0);let o=new r.NM1;o.richiesta=this.model,o.isInviaEmail=this.booking,this.apiService.creaRichiesta(o).subscribe(C=>{null!=C.data&&(this.model.oid=C.data.oidRichiesta,null!=this.gtmService&&null!=this.portale&&null!=this.portale.albergo&&this.gtmService.pushTag({event:"new_booking_form_richiesta",booking:{hotelId:this.portale.albergo.oid,hotelName:this.portale.albergo.nome,portalId:this.oidPortale,portalNome:this.portale.nome,rooms:this.model.camere.length,roomNights:Math.max(g(this.model.al).diff(g(this.model.dal),"days"),1),checkInDate:this.model.dal,checkOutDate:this.model.al,lingua:this.lingua}}),this.createPreventivo?this.onRichiestaSaved.emit(this.model.oid):(this.setIsLoading(!1),this.showInfo("interfaces.form-v1.richiestaInviata").then(()=>{null!=this.dialogRef?this.dialogRef.close(!0):window.location.reload()})))})}else this.showError("globals.messages.emailNonValida");else this.showError("globals.messages.inserireDati")}onArrivoChange(){setTimeout(()=>{this.model.dal=this.getDate(this.model.dal),g(this.model.dal)<g().startOf("day")&&(this.model.dal=this.getDate(g())),(null==this.model.al||g(this.model.dal)>=g(this.model.al))&&(this.model.al=this.getDate(g(this.model.dal).add(1,"day")))},200)}onPartenzaChange(){setTimeout(()=>{this.model.al=this.getDate(this.model.al),g(this.model.al)<g().add(1,"day").startOf("day")&&(this.model.al=this.getDate(g().add(1,"day"))),(null==this.model.dal||g(this.model.dal)>=g(this.model.al))&&(this.model.dal=this.getDate(g(this.model.al).subtract(1,"day")))},200)}onDataChange(){setTimeout(()=>{this.data=this.getDate(this.data),g(this.data)<g().startOf("day")&&(this.data=this.getDate(g()))},200)}onPortaleChange(){for(let u of this.model.camere)u.tipoCameraOTA.oid=-1,u.tariffaOTA.oid=-1,u.nomeTipoCamera="",u.oidTariffe=[];if(this.tipiCameraOTAPortale=this.tipiCamera.filter(u=>u.portaleXAlbergo.oid==this.oidPortale&&this.model.isDayUse==u.isDayUse),this.tipiCameraOTAPortale.length>0){let u=new r.sF0;u.oid=-1,u.nome="",this.tipiCameraOTAPortale.unshift(u)}if(this.tariffeOTAPortale=this.tariffe.filter(u=>u.portaleXAlbergo.oid==this.oidPortale&&this.model.isDayUse==u.isDayUse),this.cellulareRequired=!1,this.tipoRichiestaRequired=!1,this.mercatoRequired=!1,this.canaleVenditaRequired=!1,this.nazioneRequired=!1,this.noteRequired=!1,this.nomeRequired=!1,this.tipoCameraRequired=!1,this.tariffaRequired=!1,this.motivoViaggioRequired=!1,null!=this.oidPortale&&(this.portale=this.portali.find(u=>u.oid==this.oidPortale),null!=this.portale)){let u=this.booking?this.portale.camerePrenotabili:this.portale.camerePrenotabiliCrm;this.camerePrenotabili=u<=0?10:Math.min(u,10),this.etaMinimaBambini=this.portale.etaMinimaBambini>0&&this.portale.etaMinimaBambini<=17?this.portale.etaMinimaBambini:0,this.etaMassimaBambini=this.portale.etaMassimaBambini>0&&this.portale.etaMassimaBambini<=17?this.portale.etaMassimaBambini:17,this.adultiDefault=this.portale.adultiDefaultInPrenotazione<=0?1:this.portale.adultiDefaultInPrenotazione,this.adultiMax=Math.max(this.portale.numeroMassimoAdulti,0),this.bambiniMax=Math.max(this.portale.numeroMassimoRiduzioni,0);let o=g().startOf("day");if(this.portale.dataInizioGestione){let d=g(this.portale.dataInizioGestione).startOf("day");d.isAfter(o)&&(o=d)}this.minDate=this.getDate(o);let C=[];if(this.createPreventivo){if(this.portale.campiObbligatoriPreventivo){let d=this.portale.campiObbligatoriPreventivo.split(";");for(let M of d)""!=M&&!isNaN(+M)&&+M in x.i0&&C.push(+M);null!=C&&C.length>0&&(this.cellulareRequired=C.indexOf(x.i0.Cellulare)>=0,this.tipoRichiestaRequired=C.indexOf(x.i0.TipoRichiesta)>=0,this.mercatoRequired=C.indexOf(x.i0.Mercato)>=0,this.canaleVenditaRequired=C.indexOf(x.i0.CanaleVendita)>=0,this.nazioneRequired=C.indexOf(x.i0.Nazione)>=0,this.motivoViaggioRequired=C.indexOf(x.i0.MotivoViaggio)>=0&&null!=this.motiviViaggio&&this.motiviViaggio.length>0,this.nomeRequired=C.indexOf(x.i0.Nome)>=0)}}else if(this.booking){if(this.isDisattivaRichiestaBambini=this.portale.isDisattivaRichiestaBambiniFormRichiesta,this.banner=this.portale.bannerFormRichiesta,this.coloreBanner=this.portale.coloreBannerFormRichiesta,this.isVisualizzaTipoCamera=this.portale.isVisualizzaTipoCameraFormRichiesta,this.isVisualizzaTrattamento=this.portale.isVisualizzaTrattamentoFormRichiesta,this.portale.campiObbligatoriFormRichiesta){let d=this.portale.campiObbligatoriFormRichiesta.split(";");for(let M of d)""!=M&&!isNaN(+M)&&+M in x.i0&&C.push(+M);null!=C&&C.length>0&&(this.cellulareRequired=C.indexOf(x.i0.Cellulare)>=0,this.noteRequired=C.indexOf(x.i0.Note)>=0,this.tipoCameraRequired=C.indexOf(x.i0.TipoCamera)>=0&&this.isVisualizzaTipoCamera&&this.tipiCameraOTAPortale.length>0,this.tariffaRequired=C.indexOf(x.i0.Tariffa)>=0&&this.isVisualizzaTrattamento&&this.tariffeOTAPortale.length>0,this.motivoViaggioRequired=C.indexOf(x.i0.MotivoViaggio)>=0&&null!=this.motiviViaggio&&this.motiviViaggio.length>0,this.nomeRequired=C.indexOf(x.i0.Nome)>=0)}!this.modal&&this.oidPortaleReceived&&null==this.gtmService&&this.portale.googleGTM&&(this.gtmService=new t.kK(null,this.portale.googleGTM,null,null,null,null,null),this.gtmService.pushTag({event:"page",pageName:"form-richiesta"}))}this.portale.dataInizioGestione&&g(this.getDate(this.portale.dataInizioGestione)).isAfter(g().startOf("day"))&&(this.model.isDayUse?this.data=this.portale.dataInizioGestione:this.model.dal=this.portale.dataInizioGestione)}this.onPortaleSelected.emit(this.oidPortale)}openClienteSelect(){let u;u=null!=this.model.cliente&&this.model.cliente.oid>0?Object.assign({},this.model.cliente):new y.c1h(-1);let o=new r.Zpt;o.width="50vw";let C=this.showModalDialog(O.J,o),d=C.componentInstance;d.cliente=u,d.dialogRef=C,d.linguaDefault=this.linguaObj,C.afterClosed().subscribe(M=>{if(null!=M&&M.oid>0&&(this.model.cliente=M,null==this.model.cliente.mercato&&(this.model.cliente.mercato=new y.k8R),null==this.model.cliente.canaleVendita&&(this.model.cliente.canaleVendita=new y.k8R),null==this.model.cliente.lingua&&(this.model.cliente.lingua=new y.orF),this.model.cliente.nazioneObject=new y.uyR,this.model.cliente.nazione)){let K=r.k$g.fromFilter("nomeItaliano",x.Hp.Equal,this.model.cliente.nazione,x.NM.String);this.apiService.getNazioniFilter(K).subscribe(j=>{j.data.length>0&&(this.model.cliente.nazioneObject=j.data[0])})}})}openPrivacyDialog(){this.setIsLoading(!0);let u=new r.YZY;u.oidPortale=this.oidPortale,u.lingua=this.lingua,this.apiService.getPrivacyPortale(u).subscribe(o=>{this.setIsLoading(!1),this.openPrivacyNewsletterDialog(o.data)})}openNewsletterDialog(){this.openPrivacyNewsletterDialog(this.newsLetterPortale)}openPrivacyNewsletterDialog(u){if(u.html){let o=new r.Zpt;this.containerService.dimension.width>=992?o.width="50vw":o.width="80vw",this.showModalDialog(w.H,o).componentInstance.text=u.html}else u.url&&this.utility.openUrlInNewTab(u.url)}onTipoCameraChange(u,o){o.oid>0?(u.tipoCameraOTA.oid=o.oid,u.nomeTipoCamera=o.nome,u.oidTariffe=o.oidTariffe,null!=u.oidTariffe&&u.oidTariffe.length>0&&u.tariffaOTA.oid>0&&!u.oidTariffe.includes(u.tariffaOTA.oid)&&(u.tariffaOTA.oid=-1)):(u.tipoCameraOTA.oid=-1,u.nomeTipoCamera="",u.oidTariffe=[])}ngOnDestroy(){null!=this.sub&&this.sub.unsubscribe()}}pt.\u0275fac=function(u){return new(u||pt)(e.Y36(q.gz),e.Y36(q.F0),e.Y36(z.s),e.Y36(k.o),e.Y36(f.e),e.Y36(T.J),e.Y36(B.t))},pt.\u0275cmp=e.Xpm({type:pt,selectors:[["app-form-v1"]],inputs:{dialogRef:"dialogRef",createPreventivo:"createPreventivo",modal:"modal",oidAlbergo:"oidAlbergo",oidPortale:"oidPortale",language:"language",cliente:"cliente",booking:"booking"},outputs:{onLoaded:"onLoaded",onRichiestaSaved:"onRichiestaSaved",onPortaleSelected:"onPortaleSelected"},features:[e.qOj],decls:2,vars:4,consts:[["id","richiesta",1,"container-fluid","w-100","p-4",3,"ngClass"],[4,"ngIf"],[1,"mb-2","text-center"],["class","banner pt-2 pb-2 pr-3 pl-3 mb-2 font-weight-bold",3,"backgroundColor","appInvertColor",4,"ngIf"],[1,"p-3","room-select-container","border"],["class","w-100",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","mb-1","d-none","d-sm-flex"],[1,"col-25","offset-6","text-center","div-adulti"],[1,"font-weight-bold","adultiBambini"],["class","col-25 text-center div-bambini",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mt-2"],["mat-icon-button","",1,"add-room-button",3,"disabled","click"],[1,"material-icons"],[1,"align-middle","cursor-pointer",3,"click"],["class","p-3 createPreventivo-select-container border mt-3",4,"ngIf"],[1,"p-3","cliente-select-container","border","mt-3"],[1,"row"],[1,"col-6"],[3,"ngClass"],["autocompleteOff","","type","text","matInput","","required","",3,"placeholder","ngModel","ngModelChange"],["mat-icon-button","","color","primary",3,"disableRipple","click",4,"ngIf"],[1,"w-100"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","required","ngModelChange"],["autocompleteOff","","type","email","matInput","",3,"placeholder","ngModel","required","ngModelChange"],[1,"row","mt-2"],["class","col-6",4,"ngIf"],[1,"ml-3","mt-4"],[3,"ngModel","color","ngModelChange"],["class","privacyLink","href","#",3,"click",4,"ngIf"],["class","newsletterLink","href","#",3,"click",4,"ngIf"],[1,"mt-4"],["mat-flat-button","","color","primary",1,"mr-1","mb-3","float-right",3,"ngClass","disabled","click"],[1,"banner","pt-2","pb-2","pr-3","pl-3","mb-2","font-weight-bold",3,"appInvertColor"],[3,"ngModel","placeholder","panelClass","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["autocompleteOff","","type","text","matInput","","required","","readonly","",1,"dal",3,"matDatepicker","placeholder","ngModel","min","max","ngModelChange","dateChange","click"],["matSuffix","",3,"for"],[3,"panelClass"],["dal",""],["autocompleteOff","","type","text","matInput","","required","","readonly","",1,"al",3,"matDatepicker","placeholder","ngModel","min","max","ngModelChange","dateChange","click"],["al",""],["autocompleteOff","","type","text","matInput","","required","","readonly","",1,"data",3,"matDatepicker","placeholder","ngModel","min","max","ngModelChange","dateChange","click"],["dataDatePicker",""],[1,"col-25","text-center","div-bambini"],[1,"row","mb-4","mb-sm-3","mt-3","mt-sm-0"],[1,"col-3","col-sm-2","pr-0","pt-1","pb-1"],[1,"font-weight-bold","mt-1","camera"],[1,"d-none","d-sm-inline"],[1,"d-inline","d-sm-none"],[1,"col-4","col-sm-2","text-center","pr-1","pl-1"],["class","formv1-select w-100",4,"ngIf"],[1,"col-1","p-0","pt-1","pb-1","d-block","d-sm-none"],["mat-icon-button","","class","delete-button",3,"click",4,"ngIf"],[1,"col-12","mb-1","mt-2","d-block","d-sm-none"],[1,"col-45","offset-3","text-center","div-adulti"],["class","col-45 text-center div-bambini",4,"ngIf"],[1,"col-45","col-25","offset-3","offset-sm-0","text-center","pt-1","pb-1","control-adulti"],["mat-icon-button","",1,"add-minus-button",3,"disabled","click"],[1,"material-icons","add-minus-icon"],[1,"align-middle","mr-1","ml-1"],[1,"col-45","col-25","text-center","pt-1","pb-1","control-bambini"],[1,"col-1","p-0","ml-n2","pt-1","pb-1","d-none","d-sm-block"],[1,"formv1-select","w-100"],[3,"panelClass","value","compareWith","placeholder","required","matTooltip","selectionChange"],[3,"value",4,"ngIf"],[3,"panelClass","ngModel","placeholder","required","ngModelChange"],["mat-icon-button","",1,"delete-button",3,"click"],[1,"col-45","text-center","div-bambini"],[1,"col-45","col-25","offset-3","offset-sm-6","text-center","pr-0","pt-1","pb-1"],[1,"etaBambini","mt-1"],["class","col-45 col-25 offset-3 offset-sm-6",4,"ngIf"],[1,"col-45","col-25","text-center","pb-1",3,"ngClass"],[1,"child-age-select"],[3,"panelClass","ngModel","ngModelChange"],[1,"col-45","col-25","offset-3","offset-sm-6"],[1,"p-3","createPreventivo-select-container","border","mt-3"],[1,"col-4"],[3,"ngModel","placeholder","required","ngModelChange"],["displayMember","nomeItaliano",3,"dataLoader","value","placeholder","required","valueChange"],[3,"ngModel","placeholder","ngModelChange"],["mat-icon-button","","color","primary",3,"disableRipple","click"],[1,"color-red"],["href","#",1,"privacyLink",3,"click"],["href","#",1,"newsletterLink",3,"click"]],template:function(u,o){1&u&&(e.TgZ(0,"div",0),e.YNc(1,Wt,64,67,"ng-container",1),e.qZA()),2&u&&(e.Q6J("ngClass",e.VKq(2,Yt,!o.modal)),e.xp6(1),e.Q6J("ngIf",o.initialized))},dependencies:[N.Z,V.X,W.mk,W.sg,W.O5,Z.Fj,Z.JJ,Z.Q7,Z.On,R.FC,E.eB,Q.v_,Q.pH,Q.nX,S.k0,L.CK,Y.Mq,Y.hl,Y.nW,ot.x8,et.Kd,at.d,it.A,rt.X$],styles:["#richiesta[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}.etaBambini[_ngcontent-%COMP%]{font-size:14px;color:gray;white-space:nowrap}.add-minus-button[_ngcontent-%COMP%]{width:21px!important;height:21px!important;line-height:21px!important}.add-minus-icon[_ngcontent-%COMP%]{font-size:21px!important;line-height:21px!important}.add-minus-button[_ngcontent-%COMP%]:enabled{color:#666!important}.delete-button[_ngcontent-%COMP%]{width:24px!important;height:24px!important;line-height:24px!important;color:#d9534f!important}.add-room-button[_ngcontent-%COMP%]{width:24px!important;height:24px!important;line-height:24px!important}.camera[_ngcontent-%COMP%]{white-space:nowrap!important}.room-select-container[_ngcontent-%COMP%], .cliente-select-container[_ngcontent-%COMP%], .createPreventivo-select-container[_ngcontent-%COMP%]{border-radius:7px}.adultiBambini[_ngcontent-%COMP%]{font-size:14px}  .formv1-select .mat-form-field-flex{border:1px solid #cccccc!important;border-radius:7px!important;padding-left:.25rem!important;padding-right:.25rem!important}  .formv1-select .mat-form-field-wrapper{padding:0!important}  .formv1-select .mat-form-field-underline{visibility:hidden!important}  .formv1-select .mat-form-field-infix{border-top:0!important}.dal[_ngcontent-%COMP%], .al[_ngcontent-%COMP%], .data[_ngcontent-%COMP%]{cursor:pointer}@media (min-width: 576px){.col-25[_ngcontent-%COMP%]{position:relative!important;width:100%!important;flex:0 0 20.833334%!important;max-width:20.833334%!important}}.col-45[_ngcontent-%COMP%]{position:relative;width:100%;flex:0 0 37.5%;max-width:37.5%}.cognome-input[_ngcontent-%COMP%]{width:calc(100% - 40px)}.child-age-select[_ngcontent-%COMP%]{width:47px!important}  .child-age-select .mat-form-field-infix{border-top:0!important;padding-top:.25rem!important;padding-bottom:.25rem!important}  .child-age-select .mat-form-field-flex{border:1px solid #bbbbbb!important;border-radius:7px!important;padding-left:.25rem!important;padding-right:.25rem!important;height:27px!important}  .child-age-select .mat-form-field-underline{visibility:hidden!important}  .child-age-select .mat-form-field-wrapper{padding-bottom:0!important}.privacyLink[_ngcontent-%COMP%], .newsletterLink[_ngcontent-%COMP%]{color:#004987!important}.banner[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.87);border-radius:7px}"]})},52038:(tt,F,_)=>{_.d(F,{H:()=>n});var e=_(65879),t=_(94505),g=_(27599),p=_(22165);class n{constructor(){}}n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-privacy-newsletter-dialog"]],inputs:{text:"text"},decls:4,vars:2,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"_text"]],template:function(r,x){1&r&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"app-inner-html",2)),2&r&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("_text",x.text))},dependencies:[t.eB,g.aO,p.W]})},42950:(tt,F,_)=>{_.d(F,{u:()=>W});var e=_(706),g=_(14090),p=_(65879),n=_(30724),y=_(96814),r=_(56223),x=_(45754),O=_(94505),w=_(84187),q=_(42400),z=_(27599),k=_(89515);function f(Z,R){if(1&Z&&p._UZ(0,"img",18),2&Z){const E=p.oxw();p.Q6J("src",E.image.urlImmagine?E.image.urlImmagine:E.image.base64String,p.LSH)}}function T(Z,R){1&Z&&p._UZ(0,"img",19)}function B(Z,R){if(1&Z&&(p.TgZ(0,"div",13),p._uU(1),p.qZA()),2&Z){const E=p.oxw();p.xp6(1),p.hij(" ",E.image.urlImmagine,"\n")}}function N(Z,R){if(1&Z){const E=p.EpF();p.TgZ(0,"div",20)(1,"mat-form-field",11)(2,"input",21),p.NdJ("ngModelChange",function(S){p.CHM(E);const L=p.oxw();return p.KtG(L.image.descrizione=S)}),p.ALo(3,"translate"),p.qZA()()()}if(2&Z){const E=p.oxw();p.xp6(2),p.Q6J("placeholder",p.lcZ(3,2,"interfaces.images-list-edit.descrizione"))("ngModel",E.image.descrizione)}}function V(Z,R){if(1&Z){const E=p.EpF();p.TgZ(0,"button",22),p.NdJ("click",function(){p.CHM(E);const S=p.oxw();return p.KtG(S.delete())}),p._uU(1),p.ALo(2,"translate"),p.qZA()}2&Z&&(p.xp6(1),p.Oqu(p.lcZ(2,1,"globals.elimina")))}class W extends g.H{constructor(){super()}fileSelected(R){let E=null==R.files||0==R.files.length?null:R.files[0];if(null!=E&&E.type&&E.type.startsWith("image/")){const Q=new FileReader;Q.readAsDataURL(E),Q.onload=()=>{let S=Q.result.toString();S?e.fromBuffer(Uint8Array.from(atob(S.slice(S.indexOf(",")+1)),L=>L.charCodeAt(0)),(L,Y)=>{!L&&null!=Y&&Y.mime&&Y.mime.startsWith("image/")?(this.image.urlImmagine=null,this.image.base64String=S):(R.value="",this.showError("globals.messages.fileNonValido"))}):(R.value="",this.showError("globals.messages.fileNonValido"))}}else R.value="",this.showError("globals.messages.fileNonValido")}delete(){this.showDialogConfirm("globals.eliminareImmagine").then(R=>{this.image.isDeleted=!0,this.dialogRef.close(this.image)},R=>{})}}W.\u0275fac=function(R){return new(R||W)},W.\u0275cmp=p.Xpm({type:W,selectors:[["app-images-list-edit"]],inputs:{image:"image",dialogRef:"dialogRef"},features:[p.qOj],decls:24,vars:17,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[1,"text-center","mt-3","imageRow"],["class","rounded",3,"src",4,"ngIf"],["class","rounded","src","assets/images/sbm/no-image.png",4,"ngIf"],["class","mt-3 text-center",4,"ngIf"],[1,"mt-3","mb-3","text-center"],["autocompleteOff","","type","file","accept","image/png, image/jpeg",3,"change"],["fileSelect",""],["class","mt-3 w-75 mx-auto",4,"ngIf"],[1,"w-75","mx-auto"],[1,"w-100"],["autocompleteOff","","type","number","matInput","",3,"placeholder","ngModel","ngModelChange"],[1,"mt-3","text-center"],["color","primary",3,"ngModel","ngModelChange"],[1,"mt-4","text-center"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","blank","class","ml-1",3,"click",4,"ngIf"],[1,"rounded",3,"src"],["src","assets/images/sbm/no-image.png",1,"rounded"],[1,"mt-3","w-75","mx-auto"],["autocompleteOff","","type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["mat-flat-button","","color","blank",1,"ml-1",3,"click"]],template:function(R,E){if(1&R){const Q=p.EpF();p.TgZ(0,"button",0)(1,"i",1),p._uU(2,"clear"),p.qZA()(),p.TgZ(3,"div",2),p.YNc(4,f,1,1,"img",3),p.YNc(5,T,1,0,"img",4),p.qZA(),p.YNc(6,B,2,1,"div",5),p.TgZ(7,"div",6)(8,"input",7,8),p.NdJ("change",function(){p.CHM(Q);const L=p.MAs(9);return p.KtG(E.fileSelected(L))}),p.qZA()(),p.YNc(10,N,4,4,"div",9),p.TgZ(11,"div",10)(12,"mat-form-field",11)(13,"input",12),p.NdJ("ngModelChange",function(L){return E.image.ordinamento=L}),p.ALo(14,"translate"),p.qZA()()(),p.TgZ(15,"div",13)(16,"mat-checkbox",14),p.NdJ("ngModelChange",function(L){return E.image.isAttiva=L}),p._uU(17),p.ALo(18,"translate"),p.qZA()(),p.TgZ(19,"div",15)(20,"button",16),p.NdJ("click",function(){return E.dialogRef.close(E.image)}),p._uU(21),p.ALo(22,"translate"),p.qZA(),p.YNc(23,V,3,3,"button",17),p.qZA()}2&R&&(p.Q6J("disableRipple",!0),p.xp6(4),p.Q6J("ngIf",!!E.image.urlImmagine||!!E.image.base64String),p.xp6(1),p.Q6J("ngIf",!E.image.urlImmagine&&!E.image.base64String),p.xp6(1),p.Q6J("ngIf",!!E.image.urlImmagine),p.xp6(4),p.Q6J("ngIf",E.image.hasOwnProperty("descrizione")),p.xp6(3),p.Q6J("placeholder",p.lcZ(14,11,"interfaces.images-list-edit.ordinamento"))("ngModel",E.image.ordinamento),p.xp6(3),p.Q6J("ngModel",E.image.isAttiva),p.xp6(1),p.Oqu(p.lcZ(18,13,"interfaces.images-list-edit.isAttiva")),p.xp6(4),p.Oqu(p.lcZ(22,15,"globals.salva")),p.xp6(2),p.Q6J("ngIf",null!=E.image&&E.image.oid>0))},dependencies:[n.X,y.O5,r.Fj,r.wV,r.JJ,r.On,x.FC,O.eB,w.v_,q.k0,z.aO,k.X$],styles:[".imageRow[_ngcontent-%COMP%]{height:180px!important;max-height:180px!important}img[_ngcontent-%COMP%]{max-height:180px!important;max-width:100%!important}"]})},85494:(tt,F,_)=>{_.d(F,{u:()=>r});var e=_(65879),t=_(2214),g=_(85105),p=_(94505),n=_(27599),y=_(87640);class r{constructor(O,w){this.sessionService=O,this.localizationService=w,this.booking=!1}}r.\u0275fac=function(O){return new(O||r)(e.Y36(t.m),e.Y36(g.o))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-richieste-add"]],inputs:{dialogRef:"dialogRef",oidAlbergo:"oidAlbergo",oidPortale:"oidPortale",language:"language",cliente:"cliente",booking:"booking"},decls:4,vars:9,consts:[["mat-icon-button","",1,"modal-close-button",3,"matDialogClose","disableRipple"],[1,"material-icons-round"],[3,"booking","modal","createPreventivo","oidAlbergo","oidPortale","language","cliente","dialogRef"]],template:function(O,w){1&O&&(e.TgZ(0,"button",0)(1,"i",1),e._uU(2,"clear"),e.qZA()(),e._UZ(3,"app-form-v1",2)),2&O&&(e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("booking",w.booking)("modal",!0)("createPreventivo",!1)("oidAlbergo",w.oidAlbergo?w.oidAlbergo:w.sessionService.getOidAlbergo())("oidPortale",w.oidPortale)("language",w.language?w.language:w.localizationService.getCurrentLocale())("cliente",w.cliente)("dialogRef",w.dialogRef))},dependencies:[p.eB,n.aO,y.J]})},44537:(tt,F,_)=>{_.d(F,{g:()=>A});var e=_(11194),t=_(42214),g=_(14090),p=_(52374),n=_(65879),y=_(19209),r=_(2353),x=_(96814),O=_(56223),w=_(45754),q=_(94505),z=_(30481),k=_(1477),f=_(89515);function T(m,v){1&m&&(n.TgZ(0,"mat-header-cell"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&m&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"globals.tipo")))}function B(m,v){if(1&m&&(n.TgZ(0,"mat-cell"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&m){const b=v.$implicit,I=n.oxw(2);n.xp6(1),n.Oqu(n.lcZ(2,1,I.getEnumKeyTranslation(I.enumTipoStoricoCliente,b.tipo,"tipoStoricoCliente")))}}function N(m,v){1&m&&(n.TgZ(0,"mat-header-cell"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&m&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"globals.codice")))}function V(m,v){if(1&m&&(n.TgZ(0,"mat-cell"),n._uU(1),n.qZA()),2&m){const b=v.$implicit;n.xp6(1),n.Oqu(b.codice)}}function W(m,v){1&m&&(n.TgZ(0,"mat-header-cell"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&m&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"globals.data")))}function Z(m,v){if(1&m&&(n.TgZ(0,"mat-cell"),n._uU(1),n.ALo(2,"date"),n.qZA()),2&m){const b=v.$implicit;n.xp6(1),n.Oqu(n.xi3(2,1,b.data,"dd/MM/yyyy"))}}function R(m,v){1&m&&(n.TgZ(0,"mat-header-cell"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&m&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"globals.arrivo")))}function E(m,v){if(1&m&&(n.TgZ(0,"mat-cell"),n._uU(1),n.ALo(2,"date"),n.qZA()),2&m){const b=v.$implicit;n.xp6(1),n.Oqu(n.xi3(2,1,b.arrivo,"dd/MM/yyyy"))}}function Q(m,v){1&m&&(n.TgZ(0,"mat-header-cell"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&m&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"globals.partenza")))}function S(m,v){if(1&m&&(n.TgZ(0,"mat-cell"),n._uU(1),n.ALo(2,"date"),n.qZA()),2&m){const b=v.$implicit;n.xp6(1),n.Oqu(n.xi3(2,1,b.partenza,"dd/MM/yyyy"))}}function L(m,v){1&m&&(n.TgZ(0,"mat-header-cell"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&m&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"globals.stato")))}function Y(m,v){if(1&m&&(n.TgZ(0,"mat-cell"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&m){const b=v.$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,b.stato))}}function ot(m,v){1&m&&(n.TgZ(0,"mat-header-cell",23),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&m&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"globals.totale")))}function et(m,v){if(1&m&&(n.TgZ(0,"mat-cell")(1,"div",24)(2,"b"),n._uU(3),n.ALo(4,"eurCurrency"),n.qZA()()()),2&m){const b=v.$implicit;n.xp6(3),n.Oqu(n.lcZ(4,1,b.totale))}}function at(m,v){1&m&&n._UZ(0,"mat-header-cell")}function it(m,v){if(1&m){const b=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(){n.CHM(b);const J=n.oxw().$implicit,H=n.oxw(2);return n.KtG(H.onOpen(J))}),n.TgZ(1,"i",27),n._uU(2,"open_in_new"),n.qZA()()}}function rt(m,v){if(1&m){const b=n.EpF();n.TgZ(0,"mat-cell",23),n.YNc(1,it,3,0,"button",25),n.TgZ(2,"button",26),n.NdJ("click",function(){const H=n.CHM(b).$implicit,dt=n.oxw(2);return n.KtG(dt.onEdit(H))}),n.TgZ(3,"i",27),n._uU(4,"edit"),n.qZA()()()}if(2&m){const b=v.$implicit,I=n.oxw(2);n.xp6(1),n.Q6J("ngIf",b.tipo!=I.enumTipoStoricoCliente.Richiesta)}}function st(m,v){1&m&&n._UZ(0,"mat-header-row",28)}function ct(m,v){if(1&m){const b=n.EpF();n.TgZ(0,"mat-row",29),n.NdJ("contextmenu",function(){const H=n.CHM(b).$implicit,dt=n.oxw(2);return n.KtG(dt.copyToClipboard(H.oid))}),n.qZA()}if(2&m){const b=v.$implicit,I=n.oxw(2);n.Q6J("matTooltip",I.isLocalhost&&null!=b.oid?b.oid:"")}}function _t(m,v){1&m&&(n.TgZ(0,"div",30)(1,"h5"),n._uU(2),n.ALo(3,"translate"),n.qZA()()),2&m&&(n.xp6(2),n.Oqu(n.lcZ(3,1,"globals.nessunDato")))}const nt=function(){return[5]};function G(m,v){if(1&m){const b=n.EpF();n.ynx(0),n.TgZ(1,"div",1)(2,"mat-checkbox",2),n.NdJ("ngModelChange",function(J){n.CHM(b);const H=n.oxw();return n.KtG(H.richieste=J)})("change",function(){n.CHM(b);const J=n.oxw();return n.KtG(J.onFilterChange())}),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"mat-checkbox",2),n.NdJ("ngModelChange",function(J){n.CHM(b);const H=n.oxw();return n.KtG(H.preventivi=J)})("change",function(){n.CHM(b);const J=n.oxw();return n.KtG(J.onFilterChange())}),n._uU(6),n.ALo(7,"translate"),n.qZA(),n.TgZ(8,"mat-checkbox",2),n.NdJ("ngModelChange",function(J){n.CHM(b);const H=n.oxw();return n.KtG(H.prenotazioni=J)})("change",function(){n.CHM(b);const J=n.oxw();return n.KtG(J.onFilterChange())}),n._uU(9),n.ALo(10,"translate"),n.qZA()(),n.TgZ(11,"div",3)(12,"div",4)(13,"mat-table",5),n.ynx(14,6),n.YNc(15,T,3,3,"mat-header-cell",7),n.YNc(16,B,3,3,"mat-cell",8),n.BQk(),n.ynx(17,9),n.YNc(18,N,3,3,"mat-header-cell",7),n.YNc(19,V,2,1,"mat-cell",8),n.BQk(),n.ynx(20,10),n.YNc(21,W,3,3,"mat-header-cell",7),n.YNc(22,Z,3,4,"mat-cell",8),n.BQk(),n.ynx(23,11),n.YNc(24,R,3,3,"mat-header-cell",7),n.YNc(25,E,3,4,"mat-cell",8),n.BQk(),n.ynx(26,12),n.YNc(27,Q,3,3,"mat-header-cell",7),n.YNc(28,S,3,4,"mat-cell",8),n.BQk(),n.ynx(29,13),n.YNc(30,L,3,3,"mat-header-cell",7),n.YNc(31,Y,3,3,"mat-cell",8),n.BQk(),n.ynx(32,14),n.YNc(33,ot,3,3,"mat-header-cell",15),n.YNc(34,et,5,3,"mat-cell",8),n.BQk(),n.ynx(35,16),n.YNc(36,at,1,0,"mat-header-cell",7),n.YNc(37,rt,5,1,"mat-cell",17),n.BQk(),n.YNc(38,st,1,0,"mat-header-row",18),n.YNc(39,ct,1,1,"mat-row",19),n.qZA()(),n.TgZ(40,"div",20),n._UZ(41,"mat-paginator",21),n.qZA()(),n.YNc(42,_t,4,3,"div",22),n.BQk()}if(2&m){const b=n.oxw();n.xp6(2),n.Q6J("ngModel",b.richieste),n.xp6(1),n.Oqu(n.lcZ(4,14,"interfaces.storico-cliente.richieste")),n.xp6(2),n.Q6J("ngModel",b.preventivi),n.xp6(1),n.Oqu(n.lcZ(7,16,"interfaces.storico-cliente.preventivi")),n.xp6(2),n.Q6J("ngModel",b.prenotazioni),n.xp6(1),n.Oqu(n.lcZ(10,18,"interfaces.storico-cliente.prenotazioni")),n.xp6(2),n.Q6J("hidden",0==b.dataSource.filteredData.length),n.xp6(2),n.Q6J("dataSource",b.dataSource),n.xp6(25),n.Q6J("matHeaderRowDef",b.displayedColumns)("matHeaderRowDefSticky",!0),n.xp6(1),n.Q6J("matRowDefColumns",b.displayedColumns),n.xp6(2),n.Q6J("pageSizeOptions",b.small?n.DdM(20,nt):b.pageSizeOptions)("pageSize",b.small?5:b.pageSize),n.xp6(1),n.Q6J("ngIf",0==b.dataSource.filteredData.length)}}class A extends g.H{constructor(v,b){super(),this.apiService=v,this.utility=b,this.small=!1,this.displayedColumns=["tipo","codice","data","arrivo","partenza","stato","totale","openEdit"],this.enumTipoStoricoCliente=p.ku,this.richieste=!0,this.preventivi=!0,this.prenotazioni=!0}ngAfterViewInit(){null!=this.oidCliente&&this.oidCliente>0&&(this.setIsLoading(!0),this.apiService.getStoricoCliente(this.oidCliente).subscribe(v=>{this.dataSource=new t.r4(v.data),this.dataSource.filterPredicate=(b,I)=>{let J=null;if(I)try{J=JSON.parse(I)}catch(H){}return null==J||J.includes(b.tipo)},setTimeout(()=>{this.dataSource.paginator=this.paginator},200),this.setIsLoading(!1)}))}onEdit(v){let b;v.tipo==p.ku.Richiesta?b="/sbm/home/(homeOutlet:richieste)?oidRichiesta=":v.tipo==p.ku.Preventivo?b="/sbm/home/(homeOutlet:preventivi)?oidPreventivo=":v.tipo==p.ku.Prenotazione&&(b="/sbm/home/(homeOutlet:prenotazioni)?oidPrenotazione="),this.utility.openUrlInNewTab(b+v.oid)}onOpen(v){let b;v.tipo==p.ku.Preventivo?b="/booking/mypage?uid=":v.tipo==p.ku.Prenotazione&&(b="/booking/self-checkin?uid="),this.utility.openUrlInNewTab(b+v.uid)}onFilterChange(){let v=[];this.richieste&&v.push(p.ku.Richiesta),this.preventivi&&v.push(p.ku.Preventivo),this.prenotazioni&&v.push(p.ku.Prenotazione),this.dataSource.filter=JSON.stringify(v)}}A.\u0275fac=function(v){return new(v||A)(n.Y36(y.s),n.Y36(r.t))},A.\u0275cmp=n.Xpm({type:A,selectors:[["app-storico-cliente"]],viewQuery:function(v,b){if(1&v&&n.Gf(e.cl,5),2&v){let I;n.iGM(I=n.CRH())&&(b.paginator=I.first)}},inputs:{oidCliente:"oidCliente",small:"small"},features:[n.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"mb-2","filter-checkbox-container"],["color","primary",1,"mr-3",3,"ngModel","ngModelChange","change"],[3,"hidden"],[1,"mat-table-container"],[1,"mat-table",3,"dataSource"],["matColumnDef","tipo"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","codice"],["matColumnDef","data"],["matColumnDef","arrivo"],["matColumnDef","partenza"],["matColumnDef","stato"],["matColumnDef","totale"],["class","justify-content-end",4,"matHeaderCellDef"],["matColumnDef","openEdit"],["class","justify-content-end",4,"matCellDef"],["class","mat-table-header",4,"matHeaderRowDef","matHeaderRowDefSticky"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu",4,"matRowDef","matRowDefColumns"],[1,"paginator-container","mb-0"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["class","border rounded-lg p-3 bg-white",4,"ngIf"],[1,"justify-content-end"],[1,"w-100","text-right"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"material-icons","mat-table-delete-row"],[1,"mat-table-header"],["matTooltipPosition","left","matTooltipClass","oid-tooltip",3,"matTooltip","contextmenu"],[1,"border","rounded-lg","p-3","bg-white"]],template:function(v,b){1&v&&n.YNc(0,G,43,21,"ng-container",0),2&v&&n.Q6J("ngIf",null!=b.dataSource&&null!=b.dataSource.filteredData)},dependencies:[x.O5,O.JJ,O.On,w.FC,q.eB,z.Kd,t.ty,t.wO,t.S4,t.t3,t.R3,t.Al,t.L7,t.ML,t.fg,t.Zw,e.cl,k.f,x.uU,f.X$],styles:[".filter-checkbox-container[_ngcontent-%COMP%]{font-size:15px}"]})},44882:(tt,F,_)=>{_.d(F,{Z:()=>p});var e=_(73760),g=_(65879);class p{constructor(){this.coloreInvertito="#000000"}ngOnInit(){this.coloreInvertito=this.invertColor(!0)}ngOnChanges(){this.coloreInvertito=this.invertColor(!0)}invertColor(y){if(this.colore){let r=e("#FFFFFF");try{r=e(this.colore)}catch(z){}let x=r.red(),O=r.green(),w=r.blue();if(y){let z;return this.textColor&&(z=e(this.textColor)),r.luminosity()<=.5?null!=z&&z.luminosity()>.5?z.hex():"#FFFFFF":null!=z&&z.luminosity()<=.5?z.hex():"#000000"}return e({r:255-x,g:255-O,b:255-w}).hex()}return null}}p.\u0275fac=function(y){return new(y||p)},p.\u0275dir=g.lG2({type:p,selectors:[["","appInvertColor",""]],hostVars:2,hostBindings:function(y,r){2&y&&g.Udp("color",r.coloreInvertito)},inputs:{colore:["appInvertColor","colore"],textColor:"textColor"},features:[g.TTD]})},59162:(tt,F,_)=>{_.d(F,{z:()=>t});var e=_(65879);class t{onResize(p){this.updateDivSize()}constructor(p){this.el=p,this.appRectangleActive=!0}ngAfterViewInit(){setTimeout(()=>{this.updateDivSize()},200)}updateDivSize(){if(this.appRectangleActive){let p;p=null==this.heightMultiplier||this.heightMultiplier<=0?Math.floor(this.el.nativeElement.offsetWidth)+"px":Math.floor(this.el.nativeElement.offsetWidth*this.heightMultiplier)+"px",this.el.nativeElement.style.height=p,this.el.nativeElement.style.minHeight=p,this.el.nativeElement.style.maxHeight=p,this.setLineHeight&&(this.el.nativeElement.style.lineHeight=p)}}}t.\u0275fac=function(p){return new(p||t)(e.Y36(e.SBq))},t.\u0275dir=e.lG2({type:t,selectors:[["","appRectangle",""]],hostBindings:function(p,n){1&p&&e.NdJ("resize",function(r){return n.onResize(r)},!1,e.Jf7)},inputs:{appRectangleActive:"appRectangleActive",heightMultiplier:"heightMultiplier",setLineHeight:"setLineHeight"}})},88431:(tt,F,_)=>{_.d(F,{kK:()=>n});var e=_(1413),t=_(65879);const g=new t.OlP("google-tag-manager-config");class p{constructor(x){this._googleTagManagerConfig={id:null,gtm_auth:"",gtm_preview:""},x&&this.set(x)}set(x){this._googleTagManagerConfig=x}get(){return this._googleTagManagerConfig}}p.\u0275fac=function(x){return new(x||p)(t.LFG(g,8))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});class n{constructor(x,O,w="noisy",q,z,k,f){var T;this.googleTagManagerConfiguration=x,this.googleTagManagerId=O,this.googleTagManagerMode=w,this.googleTagManagerAuth=q,this.googleTagManagerPreview=z,this.googleTagManagerResourcePath=k,this.googleTagManagerCSPNonce=f,this.isLoaded=!1,this.browserGlobals={windowRef:()=>window,documentRef:()=>document},this.config=null===(T=this.googleTagManagerConfiguration)||void 0===T?void 0:T.get(),null==this.config&&(this.config={id:null}),this.config=(0,e.Z)((0,e.Z)({},this.config),{},{id:O||this.config.id,gtm_auth:q||this.config.gtm_auth,gtm_preview:z||this.config.gtm_preview,gtm_resource_path:k||this.config.gtm_resource_path}),this.config.id}checkForId(){if("silent"!==this.googleTagManagerMode&&!this.config.id)throw new Error("Google tag manager ID not provided.");return!!this.config.id}getDataLayer(){this.checkForId();const x=this.browserGlobals.windowRef();return x.dataLayer=x.dataLayer||[],x.dataLayer}pushOnDataLayer(x){this.checkForId(),this.getDataLayer().push(x)}addGtmToDom(){return new Promise((x,O)=>{if(this.isLoaded)return x(this.isLoaded);if(!this.checkForId())return x(!1);const w=this.browserGlobals.documentRef();this.pushOnDataLayer({"gtm.start":(new Date).getTime(),event:"gtm.js"});const q=w.createElement("script");q.id="GTMscript",q.async=!0,q.src=this.applyGtmQueryParams(this.config.gtm_resource_path?this.config.gtm_resource_path:"https://www.googletagmanager.com/gtm.js"),q.addEventListener("load",()=>x(this.isLoaded=!0)),q.addEventListener("error",()=>O(!1)),this.googleTagManagerCSPNonce&&q.setAttribute("nonce",this.googleTagManagerCSPNonce),w.head.insertBefore(q,w.head.firstChild)})}pushTag(x){return new Promise((O,w)=>this.checkForId()?this.isLoaded?(this.pushOnDataLayer(x),O()):void this.addGtmToDom().then(()=>(this.pushOnDataLayer(x),O())).catch(()=>w()):O())}applyGtmQueryParams(x){return-1===x.indexOf("?")&&(x+="?"),x+Object.keys(this.config).filter(O=>this.config[O]).map(O=>`${O}=${this.config[O]}`).join("&")}}n.\u0275fac=function(x){return new(x||n)(t.LFG(p,8),t.LFG("googleTagManagerId",8),t.LFG("googleTagManagerMode",8),t.LFG("googleTagManagerAuth",8),t.LFG("googleTagManagerPreview",8),t.LFG("googleTagManagerResourcePath",8),t.LFG("googleTagManagerCSPNonce",8))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"});class y{static forRoot(x){return{ngModule:y,providers:[{provide:g,useValue:x}]}}}y.\u0275fac=function(x){return new(x||y)},y.\u0275mod=t.oAB({type:y}),y.\u0275inj=t.cJS({})},90110:(tt,F,_)=>{_.d(F,{i9:()=>q,z8:()=>z});var e=_(65879),t=_(96814);function g(k,f){1&k&&e._UZ(0,"div",3)}function p(k,f){1&k&&e.GkF(0)}function n(k,f){if(1&k&&(e.TgZ(0,"div"),e.YNc(1,p,1,0,"ng-container",4),e.qZA()),2&k){const T=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",T.value)}}function y(k,f){if(1&k&&e._UZ(0,"div",5),2&k){const T=e.oxw();e.Q6J("innerHTML",T.value,e.oJD)}}const r={placement:"top",autoPlacement:!0,contentType:"string",showDelay:0,hideDelay:300,hideDelayMobile:0,hideDelayTouchscreen:0,zIndex:0,animationDuration:300,animationDurationDefault:300,trigger:"hover",tooltipClass:"",display:!0,displayMobile:!0,displayTouchscreen:!0,shadow:!0,theme:"dark",offset:8,maxWidth:"",id:!1,hideDelayAfterClick:2e3},x={delay:"showDelay","show-delay":"showDelay","hide-delay":"hideDelay","hide-delay-mobile":"hideDelayTouchscreen",hideDelayMobile:"hideDelayTouchscreen","z-index":"zIndex","animation-duration":"animationDuration","animation-duration-default":"animationDurationDefault","tooltip-class":"tooltipClass","display-mobile":"displayTouchscreen",displayMobile:"displayTouchscreen","max-width":"maxWidth"},O=new e.OlP("TooltipOptions");class w{constructor(f,T){this.elementRef=f,this.renderer=T,this._show=!1,this.events=new e.vpe}transitionEnd(f){this.show&&this.events.emit({type:"shown"})}onMouseEnter(){"none"!==this.hostStylePointerEvents&&this.events.emit({type:"mouseenter"})}onMouseLeave(){"none"!==this.hostStylePointerEvents&&this.events.emit({type:"mouseleave"})}set show(f){f&&this.setPosition(),this._show=this.hostClassShow=f}get show(){return this._show}get placement(){return this.data.options.placement}get autoPlacement(){return this.data.options.autoPlacement}get element(){return this.data.element}get elementPosition(){return this.data.elementPosition}get options(){return this.data.options}get value(){return this.data.value}get tooltipOffset(){return Number(this.data.options.offset)}get isThemeLight(){return"light"===this.options.theme}ngOnInit(){this.setCustomClass(),this.setStyles()}setPosition(){if(this.setHostStyle(this.placement))this.setPlacementClass(this.placement);else{const f=["top","right","bottom","left"];let T;for(const B of f)if(this.setHostStyle(B))return this.setPlacementClass(B),void(T=!0);T||(this.setHostStyle(this.placement,!0),this.setPlacementClass(this.placement))}}setPlacementClass(f){this.renderer.addClass(this.elementRef.nativeElement,"tooltip-"+f)}setHostStyle(f,T=!1){const B=this.element instanceof SVGElement,N=this.elementRef.nativeElement,V=!this.elementPosition.right;let W=B?this.element.getBoundingClientRect().height:this.element.offsetHeight,Z=B?this.element.getBoundingClientRect().width:this.element.offsetWidth;const R=N.clientHeight,E=N.clientWidth,Q=window.pageYOffset;let S,L;if(V&&(W=0,Z=0),"top"===f&&(S=this.elementPosition.top+Q-(R+this.tooltipOffset)),"bottom"===f&&(S=this.elementPosition.top+Q+W+this.tooltipOffset),("top"===f||"bottom"===f)&&(L=this.elementPosition.left+Z/2-E/2),"left"===f&&(L=this.elementPosition.left-E-this.tooltipOffset),"right"===f&&(L=this.elementPosition.left+Z+this.tooltipOffset),("left"===f||"right"===f)&&(S=this.elementPosition.top+Q+W/2-N.clientHeight/2),this.autoPlacement&&!T){const Y=S,ot=S+R,et=L,at=L+E,it=window.innerHeight+Q,rt=document.body.clientWidth;if(Y<0||ot>it||et<0||at>rt)return!1}return this.hostStyleTop=S+"px",this.hostStyleLeft=L+"px",!0}setZIndex(){0!==this.options.zIndex&&(this.hostStyleZIndex=this.options.zIndex)}setPointerEvents(){this.options.pointerEvents&&(this.hostStylePointerEvents=this.options.pointerEvents)}setCustomClass(){this.options.tooltipClass&&this.options.tooltipClass.split(" ").forEach(f=>{this.renderer.addClass(this.elementRef.nativeElement,f)})}setAnimationDuration(){Number(this.options.animationDuration)!=this.options.animationDurationDefault&&(this.hostStyleTransition="opacity "+this.options.animationDuration+"ms")}setStyles(){this.setZIndex(),this.setPointerEvents(),this.setAnimationDuration(),this.hostClassShadow=this.options.shadow,this.hostClassLight=this.isThemeLight,this.hostStyleMaxWidth=this.options.maxWidth,this.hostStyleWidth=this.options.width?this.options.width:""}}w.\u0275fac=function(f){return new(f||w)(e.Y36(e.SBq),e.Y36(e.Qsj))},w.\u0275cmp=e.Xpm({type:w,selectors:[["tooltip"]],hostAttrs:[1,"tooltip"],hostVars:20,hostBindings:function(f,T){1&f&&e.NdJ("transitionend",function(N){return T.transitionEnd(N)})("focusin",function(){return T.onMouseEnter()})("mouseenter",function(){return T.onMouseEnter()})("focusout",function(){return T.onMouseLeave()})("mouseleave",function(){return T.onMouseLeave()}),2&f&&(e.Udp("top",T.hostStyleTop)("left",T.hostStyleLeft)("z-index",T.hostStyleZIndex)("transition",T.hostStyleTransition)("width",T.hostStyleWidth)("max-width",T.hostStyleMaxWidth)("pointer-events",T.hostStylePointerEvents),e.ekj("tooltip-show",T.hostClassShow)("tooltip-shadow",T.hostClassShadow)("tooltip-light",T.hostClassLight))},inputs:{data:"data",show:"show"},decls:4,vars:3,consts:[["class","tooltip-arrow",4,"ngIf"],[4,"ngIf","ngIfElse"],["htmlOrStringTemplate",""],[1,"tooltip-arrow"],[4,"ngTemplateOutlet"],[3,"innerHTML"]],template:function(f,T){if(1&f&&(e.YNc(0,g,1,0,"div",0),e.YNc(1,n,2,1,"div",1),e.YNc(2,y,1,1,"ng-template",null,2,e.W1O)),2&f){const B=e.MAs(3);e.Q6J("ngIf",T.isThemeLight),e.xp6(1),e.Q6J("ngIf","template"===T.options.contentType)("ngIfElse",B)}},dependencies:[t.O5,t.tP],styles:['[_nghost-%COMP%]{max-width:200px;background-color:#000;color:#fff;text-align:center;border-radius:6px;padding:5px 8px;position:absolute;pointer-events:none;z-index:1000;display:block;opacity:0;transition:opacity .3s;top:0;left:0}.tooltip-show[_nghost-%COMP%]{opacity:1}.tooltip-shadow[_nghost-%COMP%]{box-shadow:0 7px 15px -5px #0006}.tooltip-light.tooltip-shadow[_nghost-%COMP%]{box-shadow:0 5px 15px -5px #0006}.tooltip[_nghost-%COMP%]:after{content:"";position:absolute;border-style:solid}.tooltip-top[_nghost-%COMP%]:after{top:100%;left:50%;margin-left:-5px;border-width:5px;border-color:black transparent transparent transparent}.tooltip-bottom[_nghost-%COMP%]:after{bottom:100%;left:50%;margin-left:-5px;border-width:5px;border-color:transparent transparent black transparent}.tooltip-left[_nghost-%COMP%]:after{top:50%;left:100%;margin-top:-5px;border-width:5px;border-color:transparent transparent transparent black}.tooltip-right[_nghost-%COMP%]:after{top:50%;right:100%;margin-top:-5px;border-width:5px;border-color:transparent black transparent transparent}.tooltip-light[_nghost-%COMP%]:after{display:none}.tooltip-light[_nghost-%COMP%]{border:1px solid rgba(0,0,0,.06);background-color:#fff;color:#000}.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;transform:rotate(135deg);background-color:#00000012}.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]:after{background-color:#fff;content:"";display:block;position:absolute;width:10px;height:10px}.tooltip-top.tooltip-light[_nghost-%COMP%]{margin-top:-2px}.tooltip-top.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{top:100%;left:50%;margin-top:-4px;margin-left:-5px;background:linear-gradient(to bottom left,rgba(0,0,0,.07) 50%,transparent 50%)}.tooltip-top.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]:after{top:1px;right:1px}.tooltip-bottom.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{bottom:100%;left:50%;margin-bottom:-4px;margin-left:-5px;background:linear-gradient(to top right,rgba(0,0,0,.1) 50%,transparent 50%)}.tooltip-bottom.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]:after{top:-1px;right:-1px}.tooltip-left.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{top:50%;left:100%;margin-top:-5px;margin-left:-4px;background:linear-gradient(to bottom right,rgba(0,0,0,.07) 50%,transparent 50%)}.tooltip-left.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]:after{top:1px;right:-1px}.tooltip-right.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{top:50%;right:100%;margin-top:-5px;margin-right:-4px;background:linear-gradient(to top left,rgba(0,0,0,.07) 50%,transparent 50%)}.tooltip-right.tooltip-light[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]:after{top:-1px;right:1px}']});class q{constructor(f,T,B,N,V){this.initOptions=f,this.elementRef=T,this.componentFactoryResolver=B,this.appRef=N,this.injector=V,this._options={},this._contentType="string",this.events=new e.vpe}set options(f){f&&r&&(this._options=f)}get options(){return this._options}set contentTypeBackwardCompatibility(f){f&&(this._contentType=f)}set contentType(f){f&&(this._contentType=f)}get contentType(){return this._contentType}set zIndexBackwardCompatibility(f){f&&(this._zIndex=f)}set zIndex(f){f&&(this._zIndex=f)}get zIndex(){return this._zIndex}set animationDurationBackwardCompatibility(f){f&&(this._animationDuration=f)}set animationDuration(f){f&&(this._animationDuration=f)}get animationDuration(){return this._animationDuration}set tooltipClassBackwardCompatibility(f){f&&(this._tooltipClass=f)}set tooltipClass(f){f&&(this._tooltipClass=f)}get tooltipClass(){return this._tooltipClass}set maxWidthBackwardCompatibility(f){f&&(this._maxWidth=f)}set maxWidth(f){f&&(this._maxWidth=f)}get maxWidth(){return this._maxWidth}set showDelayBackwardCompatibility(f){f&&(this._showDelay=f)}set showDelay(f){f&&(this._showDelay=f)}get showDelay(){return this._showDelay}set hideDelayBackwardCompatibility(f){f&&(this._hideDelay=f)}set hideDelay(f){f&&(this._hideDelay=f)}get hideDelay(){return this._hideDelay}get isTooltipDestroyed(){return this.componentRef&&this.componentRef.hostView.destroyed}get destroyDelay(){return this._destroyDelay?this._destroyDelay:Number(this.getHideDelay())+Number(this.options.animationDuration)}set destroyDelay(f){this._destroyDelay=f}get tooltipPosition(){return this.options.position?this.options.position:this.elementPosition}onMouseEnter(){0!=this.isDisplayOnHover&&this.show()}onMouseLeave(){"hover"===this.options.trigger&&this.destroyTooltip()}onClick(){0!=this.isDisplayOnClick&&(this.show(),this.hideAfterClickTimeoutId=window.setTimeout(()=>{this.destroyTooltip()},this.options.hideDelayAfterClick))}ngOnInit(){}ngOnChanges(f){this.initOptions=this.renameProperties(this.initOptions);let T=this.getProperties(f);T=this.renameProperties(T),this.applyOptionsDefault(r,T)}ngOnDestroy(){this.destroyTooltip({fast:!0}),this.componentSubscribe&&this.componentSubscribe.unsubscribe()}getShowDelay(){return this.options.showDelay}getHideDelay(){const f=this.options.hideDelay,T=this.options.hideDelayTouchscreen;return this.isTouchScreen?T:f}getProperties(f){let T={},B={},N={};for(var V in f)"options"!==V&&"tooltipValue"!==V&&(T[V]=f[V].currentValue),"options"===V&&(B=f[V].currentValue);return N=Object.assign({},B,T),N}renameProperties(f){for(var T in f)x[T]&&(f[x[T]]=f[T],delete f[T]);return f}getElementPosition(){this.elementPosition=this.elementRef.nativeElement.getBoundingClientRect()}createTooltip(){this.clearTimeouts(),this.getElementPosition(),this.createTimeoutId=window.setTimeout(()=>{this.appendComponentToBody(w)},this.getShowDelay()),this.showTimeoutId=window.setTimeout(()=>{this.showTooltipElem()},this.getShowDelay())}destroyTooltip(f={fast:!1}){this.clearTimeouts(),0==this.isTooltipDestroyed&&(this.hideTimeoutId=window.setTimeout(()=>{this.hideTooltip()},f.fast?0:this.getHideDelay()),this.destroyTimeoutId=window.setTimeout(()=>{!this.componentRef||this.isTooltipDestroyed||(this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.events.emit({type:"hidden",position:this.tooltipPosition}))},f.fast?0:this.destroyDelay))}showTooltipElem(){this.clearTimeouts(),this.componentRef.instance.show=!0,this.events.emit({type:"show",position:this.tooltipPosition})}hideTooltip(){!this.componentRef||this.isTooltipDestroyed||(this.componentRef.instance.show=!1,this.events.emit({type:"hide",position:this.tooltipPosition}))}appendComponentToBody(f,T={}){this.componentRef=this.componentFactoryResolver.resolveComponentFactory(f).create(this.injector),this.componentRef.instance.data={value:this.tooltipValue,element:this.elementRef.nativeElement,elementPosition:this.tooltipPosition,options:this.options},this.appRef.attachView(this.componentRef.hostView);const B=this.componentRef.hostView.rootNodes[0];document.body.appendChild(B),this.componentSubscribe=this.componentRef.instance.events.subscribe(N=>{this.handleEvents(N)})}clearTimeouts(){this.createTimeoutId&&clearTimeout(this.createTimeoutId),this.showTimeoutId&&clearTimeout(this.showTimeoutId),this.hideTimeoutId&&clearTimeout(this.hideTimeoutId),this.destroyTimeoutId&&clearTimeout(this.destroyTimeoutId)}get isDisplayOnHover(){return!(0==this.options.display||0==this.options.displayTouchscreen&&this.isTouchScreen||"hover"!==this.options.trigger)}get isDisplayOnClick(){return!(0==this.options.display||0==this.options.displayTouchscreen&&this.isTouchScreen||"click"!=this.options.trigger)}get isTouchScreen(){var f=" -webkit- -moz- -o- -ms- ".split(" ");if("ontouchstart"in window)return!0;var N,B=["(",f.join("touch-enabled),("),"heartz",")"].join("");return N=B,window.matchMedia(N).matches}applyOptionsDefault(f,T){this.options=Object.assign({},f,this.initOptions||{},this.options,T)}handleEvents(f){"shown"===f.type&&this.events.emit({type:"shown",position:this.tooltipPosition}),"mouseenter"===f.type&&this.clearTimeouts(),"mouseleave"===f.type&&this.destroyTooltip()}show(){this.tooltipValue&&(!this.componentRef||this.isTooltipDestroyed?this.createTooltip():this.isTooltipDestroyed||this.showTooltipElem())}hide(){this.destroyTooltip()}}q.\u0275fac=function(f){return new(f||q)(e.Y36(O,8),e.Y36(e.SBq),e.Y36(e._Vd),e.Y36(e.z2F),e.Y36(e.zs3))},q.\u0275dir=e.lG2({type:q,selectors:[["","tooltip",""]],hostBindings:function(f,T){1&f&&e.NdJ("focusin",function(){return T.onMouseEnter()})("mouseenter",function(){return T.onMouseEnter()})("focusout",function(){return T.onMouseLeave()})("mouseleave",function(){return T.onMouseLeave()})("click",function(){return T.onClick()})},inputs:{options:"options",tooltipValue:["tooltip","tooltipValue"],placement:"placement",autoPlacement:"autoPlacement",contentTypeBackwardCompatibility:["content-type","contentTypeBackwardCompatibility"],contentType:"contentType",hideDelayMobile:["hide-delay-mobile","hideDelayMobile"],hideDelayTouchscreen:"hideDelayTouchscreen",zIndexBackwardCompatibility:["z-index","zIndexBackwardCompatibility"],zIndex:"zIndex",animationDurationBackwardCompatibility:["animation-duration","animationDurationBackwardCompatibility"],animationDuration:"animationDuration",trigger:"trigger",tooltipClassBackwardCompatibility:["tooltip-class","tooltipClassBackwardCompatibility"],tooltipClass:"tooltipClass",display:"display",displayMobile:["display-mobile","displayMobile"],displayTouchscreen:"displayTouchscreen",shadow:"shadow",theme:"theme",offset:"offset",width:"width",maxWidthBackwardCompatibility:["max-width","maxWidthBackwardCompatibility"],maxWidth:"maxWidth",id:"id",showDelayBackwardCompatibility:["show-delay","showDelayBackwardCompatibility"],showDelay:"showDelay",hideDelayBackwardCompatibility:["hide-delay","hideDelayBackwardCompatibility"],hideDelay:"hideDelay",hideDelayAfterClick:"hideDelayAfterClick",pointerEvents:"pointerEvents",position:"position"},outputs:{events:"events"},exportAs:["tooltip"],features:[e.TTD]});class z{static forRoot(f){return{ngModule:z,providers:[{provide:O,useValue:f}]}}}z.\u0275fac=function(f){return new(f||z)},z.\u0275mod=e.oAB({type:z}),z.\u0275inj=e.cJS({imports:[t.ez]})}}]);