{"version":3,"file":"317.551cc11dc757f532.js","mappings":"mPASM,MAAOA,EAWXC,cALUC,KAAAC,YAAoC,IAAIC,MACxCF,KAAAG,aAAkC,IAAID,KAIhC,CAEhBE,kBACMJ,KAAKK,uBACPL,KAAKK,qBAAqBC,WAAa,SACvCN,KAAKK,qBAAqBE,wBAAyB,EAE/CP,KAAKQ,UACHR,KAAKQ,QAAQC,QACfT,KAAKK,qBAAqBK,QAAUV,KAAKQ,QAAQC,OAG/CT,KAAKQ,QAAQG,SACfX,KAAKK,qBAAqBO,SAAWZ,KAAKQ,QAAQG,QAGhDX,KAAKQ,QAAQK,gBACfb,KAAKK,qBAAqBS,gBAAkBd,KAAKQ,QAAQK,eAGvDb,KAAKQ,QAAQO,WACff,KAAKK,qBAAqBC,WAAaN,KAAKQ,QAAQO,UAGlDf,KAAKQ,QAAQQ,iBACfhB,KAAKK,qBAAqBY,iBAAmBjB,KAAKQ,QAAQQ,gBAGxDhB,KAAKQ,QAAQU,0BACflB,KAAKK,qBAAqBc,0BAA4BnB,KAAKQ,QAAQU,yBAG5B,MAArClB,KAAKQ,QAAQY,uBACfpB,KAAKK,qBAAqBE,uBAAyBP,KAAKQ,QAAQY,uBAIxE,EAhDWtB,EAAoB,mBAAAuB,iBAApBvB,EAAoB,EAApBA,EAAoB,UAAAwB,EAAAC,IAAA,MAApBzB,EAAoB0B,UAAA,uBAAAC,UAAA,SAAAC,EAAAC,MAAA,EAAAD,QASpBE,KAAoB,kaClBjCC,MAAA,qBAAAA,CAA8B,aACMA,MAAA,6BAAAC,GAAA,OAAAH,EAAAI,MAAAD,CAAA,EAAAD,CAAuB,sCAAsBF,EAAA1B,YAAA+B,KAAAL,EAAAI,MAAuB,EAApEF,CAAuB,oCAAkEF,EAAAxB,aAAA6B,MAAmB,EAA5GH,CAAuB,yBAAAC,GAAA,OAAAH,EAAAI,MAAAD,CAAA,GAAvDD,iBAAkKA,MAAA,GAAAA,MAAA,aAAAF,EAAAI,OAAlIF,MAAA,cAAAF,EAAAI,MAAAF,CAAuB,UAAAF,EAAAI,MAAvBF,CAAuB,UAAAA,MAAA,EAAAI,IAAAN,EAAAI,OAAvBF,CAAuB,cAAAF,EAAAO,wiBCSrD,MAAOC,UAAwBC,IAEtBC,SAAKN,GAGhB,GAFA/B,KAAKsC,MAAQP,EAEP/B,KAAKsC,MAAO,CAChB,IAAIC,EAAOvC,KAAKwC,QAAQC,oBAAoBzC,KAAKsC,MAAO,CAAC,QAAS,SAE9DC,EAAKG,OAAS,IAChB1C,KAAKsC,MAAQtC,KAAKwC,QAAQG,mBAAmB3C,KAAKsC,MAAO,CAAC,QAAS,SAEnEM,WAAW,KACT5C,KAAK6C,WAAWb,KAAKhC,KAAKsC,OAC1BtC,KAAK8C,aAAad,KAAKO,EAAKQ,OAAM,EACjC,KAAG,CAGZ,CAcOC,kBACL,IAAIrC,EAASX,KAAKW,OAElB,OAAIX,KAAKiD,cAAgBjD,KAAKkD,WAAalD,KAAKmD,gBAC9CxC,GAAU,IAGL,CACLyC,UAAWpD,KAAKkD,SAChBG,YAAY,EACZ1C,OAAQA,EAAS,KACjB2C,UAAW3C,EAAS,KACpB4C,UAAW5C,EAAS,KACpBF,MAAO,OACP+C,SAAU,OACVC,UAAW,MACXC,cAAe1D,KAAKiD,cAAgBjD,KAAKkD,UAAYlD,KAAKmD,cAC1DF,YAAajD,KAAKiD,cAAgBjD,KAAKkD,UAAYlD,KAAKmD,cACxDjB,YAAa,GACbyB,0BAA2B,GAC3BC,gBAAiB,GACjBC,gBAAiB,GACjBC,MAAO,CACL,CAAEC,MAAO,QAASC,KAAM,SACxB,CAAED,MAAO,kBAAmBC,KAAM,mBAClC,CAAED,MAAO,UAAWC,KAAM,WAC1B,CAAED,MAAO,gBAAiBC,KAAM,kBAElCC,cAAe,KACfC,UAAW,GACXC,uBAAuB,EACvBC,UAAU,EACVC,SAAS,EACTC,gBAAiB,MACjBC,qBAAsB,CACpB,CAAC,OAAQ,QACT,CAAC,cAAe,cAAe,eAAgB,kBAGrD,CAEAxE,YAAoByC,GAClBgC,QADkBxE,KAAAwC,UApDXxC,KAAAW,OAAiB,IACjBX,KAAAiD,aAAuB,EACvBjD,KAAAkD,UAAoB,EAEnBlD,KAAAyE,OAA4B,IAAIvE,MAChCF,KAAA6C,WAAmC,IAAI3C,MACvCF,KAAA8C,aAAqC,IAAI5C,MAE5CF,KAAAmD,eAAyB,CA8ChC,EA1EWhB,EAAgB,mBAAAd,iBAAhBc,GAAeN,MAAA6C,KAAA,EAAfvC,EAAgB,UAAAwC,EAAApD,IAAA,MAAhBY,EAAeX,UAAA,iBAAAoD,OAAA,CAAAvC,KAAA,OAAAwC,GAAA,KAAAlE,OAAA,SAAAsC,YAAA,cAAAC,SAAA,YAAA4B,QAAA,CAAAL,OAAA,SAAA5B,WAAA,aAAAC,aAAA,gBAAAiC,SAAA,CAAAlD,OAAAmD,MAAA,EAAAC,KAAA,EAAAC,OAAA,6DAAAC,SAAA,SAAAzD,EAAAC,GAAA,EAAAD,ICV5BG,MAAA,sBAAuDA,MAAA,yBAAAC,GAAA,OAAAH,EAAAW,MAAAR,CAAA,EAAAD,CAAmB,kCAAkBF,EAAAkB,WAAAb,KAAAL,EAAAW,MAAsB,EAA3DT,CAAmB,0BAAAF,EAAAwB,eAAmE,CAAI,EAA1FtB,CAAmB,kBAAAF,SAAAwB,eAAiG,EAAOxB,EAAA8C,OAAAzC,MAAa,GAAGH,cAAlLA,MAAA,KAAAF,EAAAkD,GAAAhD,CAAS,SAAAF,EAAAqB,kBAATnB,CAAS,UAAAF,EAAAW,+LCIzBT,MAAA,YACIA,MAAA,wBACJA,8BADIA,MAAA,GAAAA,MAAA,IAAAA,MAAA,IAAAuD,EAAAC,OAAA,+BAIAxD,MAAA,iCAAqBA,MAAA,MAAAyD,EAAAC,IAAAD,EAAAC,IAAAD,EAAAE,OAAA3D,MAAA,uBACrBA,MAAA,qCAGJA,MAAA,WACIA,MAAA,GACJA,8BADIA,MAAA,GAAAA,MAAA,IAAA4D,EAAAF,IAAA,+CASA1D,MAAA,eAAsCA,MAAA,mBAAAA,MAAA6D,GAAA,MAAAC,EAAA9D,QAAA,OAASA,MAAA8D,EAAAC,SAAQ,GAA2C/D,MAAA,wBAAkCA,OAAA,OAAlCA,MAAA,GAAAA,YAAA,uECZhG,MAAOgE,UAA2BzD,IAEzB0D,SAAK/D,GAChB/B,KAAKuF,IAAMxD,EAEN/B,KAAKuF,IAGRvF,KAAK+F,qBAAsB,EAF3B/F,KAAK+F,qBAAsB,CAI/B,CAWAhG,cACEyE,QAVOxE,KAAAgG,gBAA0B,EAO5BhG,KAAA+F,qBAAsB,CAI7B,CAEAE,aAAaC,GACX,IAAIC,EAAiC,MAApBD,EAAWE,OAA4C,GAA3BF,EAAWE,MAAM1D,OAAc,KAAOwD,EAAWE,MAAM,GAEpG,GAAY,MAARD,GAAkBA,EAAKE,MAAQF,EAAKE,KAAKC,WAAW,UACtD,GAAItG,KAAKgG,iBAAmB,GAAKG,EAAKI,MAAQvG,KAAKgG,gBAAiB,CAClE,MAAMQ,EAAS,IAAIC,WACnBD,EAAOE,cAAcP,GACrBK,EAAOG,OAAS,KACd,IAAInB,EAASgB,EAAOI,OAAOC,WAErBrB,EACJsB,aAAkBC,WAAWC,KAAKC,KAAKzB,EAAO0B,MAAM1B,EAAO2B,QAAQ,KAAO,IAAMC,GAAMA,EAAEC,WAAW,IAAK,CAACC,EAAKV,MACvGU,GAAiB,MAAVV,GAAoBA,EAAOW,MAAQX,EAAOW,KAAKjB,WAAW,WACpEtG,KAAKuF,IAAM,KACXvF,KAAKwF,OAASA,IAEdU,EAAWnE,MAAQ,GACnB/B,KAAKwH,UAAU,kCAAgC,IAInDtB,EAAWnE,MAAQ,GACnB/B,KAAKwH,UAAU,kCAAgC,CAEnD,MAEAtB,EAAWnE,MAAQ,GACnB/B,KAAKwH,UAAU,oCAAqC,CAAEjB,KAAMkB,KAAKC,MAAM1H,KAAKgG,gBAAkB,YAGhGE,EAAWnE,MAAQ,GACnB/B,KAAKwH,UAAU,iCAEnB,CAEA5B,SACE5F,KAAK2H,kBAAkB,6BACpBC,KAAKC,IACJ7H,KAAK8H,UAAUC,MAAM,GAAE,EAEvBC,MAEN,EAnEWnC,EAAmB,mBAAAxE,iBAAnBwE,EAAkB,EAAlBA,EAAmB,UAAAoC,EAAA1G,IAAA,MAAnBsE,EAAkBrE,UAAA,qBAAAoD,OAAA,CAAAkB,KAAA,OAAAE,gBAAA,kBAAAX,MAAA,QAAAyC,UAAA,YAAAI,KAAA,QAAAnD,SAAA,CAAAlD,OAAAmD,MAAA,GAAAC,KAAA,GAAAC,OAAA,yvBAAAC,SAAA,SAAAzD,EAAAC,GAAA,KAAAD,EAAA,iBDX/BG,MAAA,aAAAA,CAA2F,SACvDA,MAAA,WAAKA,UAGzCA,MAAA,EAAAsG,EAAA,aAIAtG,MAAA,WACIA,MAAA,EAAAuG,EAAA,aACAvG,MAAA,EAAAwG,EAAA,aACJxG,QAEAA,MAAA,EAAAyG,EAAA,aAIAzG,MAAA,UAAAA,CAA8B,eACmDA,MAAA,oBAAAA,MAAA0G,GAAA,MAAAC,EAAA3G,MAAA,WAAUA,MAAAF,EAAAsE,aAAAuC,GAAuB,GAA9G3G,UAGJA,MAAA,WAAAA,CAA8B,gBACkEA,MAAA,0BAASF,EAAAmG,UAAAC,MAAApG,EAAA6D,OAA2B7D,EAAA6D,OAAAiD,UAAiB9G,EAAA6D,OAAA2B,QAAe,KAAO,GAAExF,EAAA6D,OAAU,GAAE3D,MAAA,0BAAgCA,QACrNA,MAAA,GAAA6G,EAAA,iBACJ7G,OAAA,OAxBoEA,MAAA,oBAIpBA,MAAA,GAAAA,MAAA,SAAAF,EAAA0D,OAKOxD,MAAA,GAAAA,MAAA,SAAAF,EAAA4D,OAAA5D,EAAA6D,QACQ3D,MAAA,GAAAA,MAAA,QAAAF,EAAA4D,MAAA5D,EAAA6D,QAGhC3D,MAAA,GAAAA,MAAA,SAAAF,EAAA4D,KASH1D,MAAA,GAAAA,MAAA,QAAAF,EAAAuG,KAAA,eAAArG,CAAiC,UAAAA,MAAA,GAAAI,GAAAN,EAAAuG,OAA4HrG,MAAA,GAAAA,YAAA,uBAC9GA,MAAA,GAAAA,MAAA,OAAAF,EAAAoE,iWEtBvElE,MAAA,sBACIA,MAAA,wBACJA,+BADIA,MAAA,GAAAA,MAAA,IAAAA,MAAA,IAAA8G,EAAAtD,OAAA,2BAGJxD,MAAA,4BALJA,MAAA,gBACIA,MAAA,EAAA+G,EAAA,wBAIA/G,MAAA,EAAAgH,EAAA,sBACJhH,yCALyCA,MAAA,GAAAA,MAAA,SAAAuD,EAAAC,OAItBxD,MAAA,GAAAA,MAAA,mBAAAiH,EAAA,2BAIfjH,MAAA,WAA+DA,MAAA,wBAAuBA,+BAAvBA,MAAA,GAAAA,YAAA,IAAA8D,EAAAN,OAAA,uBAC/DxD,MAAA,4BAFJA,MAAA,GACIA,MAAA,EAAAkH,EAAA,aACAlH,MAAA,EAAAmH,EAAA,sBACJnH,yCAFoDA,MAAA,GAAAA,MAAA,SAAAyD,EAAAD,OACjCxD,MAAA,GAAAA,MAAA,mBAAAiH,EAAA,0CAMPjH,MAAA,YAAiCA,MAAA,mBAAAA,MAAAoH,GAAA,MAAAC,EAAArH,MAAA,UAASA,MAAAqH,EAAAC,KAAAnH,OAAW,GAArDH,OAAA,0BAAqBA,MAAA,MAAAuH,EAAA7D,IAAA1D,MAAA,0CACrBA,MAAA,YAA0DA,MAAA,mBAAAA,MAAAwH,GAAA,MAAAC,EAAAzH,MAAA,UAASA,MAAAyH,EAAAH,KAAAnH,OAAW,GAA9EH,OAAA,wFAGJA,MAAA,eAA0DA,MAAA,mBAAAA,MAAA0H,GAAA,MAAAC,EAAA3H,MAAA,UAASA,MAAA2H,EAAA5D,OAAA5D,OAAa,GAC5EH,MAAA,UAAsCA,MAAA,YAAMA,SAAI,0BAD5BA,MAAA,QAAA4H,EAAAvB,KAAA,eAAArG,CAAiC,UAAAA,MAAA,EAAAI,EAAAwH,EAAAvB,MAAA,2BAN7DrG,MAAA,UAAAA,CAAsB,YAEdA,MAAA,EAAA6H,EAAA,cACA7H,MAAA,EAAA8H,EAAA,cACJ9H,QAEAA,MAAA,EAAA+H,GAAA,iBAGJ/H,8BAPgEA,MAAA,GAAAA,MAAA,SAAA4D,EAAAF,KACyB1D,MAAA,GAAAA,MAAA,QAAA4D,EAAAF,KAGsD1D,MAAA,GAAAA,MAAA,OAAA4D,EAAAoE,uBAAApE,EAAAF,IAAA,ECb7I,MAAOuE,EAWX/J,cAPSC,KAAA+J,WAAqB,EACrB/J,KAAA6J,qBAA+B,EAC/B7J,KAAAkI,MAAgB,EAEflI,KAAAmJ,KAA0B,IAAIjJ,MAC9BF,KAAA4F,OAA4B,IAAI1F,KAE1B,EAXL4J,EAAc,mBAAAzI,iBAAdyI,EAAc,EAAdA,EAAc,UAAAE,EAAAzI,IAAA,MAAduI,EAActI,UAAA,gBAAAoD,OAAA,CAAAS,MAAA,QAAAE,IAAA,MAAAwE,UAAA,YAAAF,oBAAA,sBAAA3B,KAAA,QAAApD,QAAA,CAAAqE,KAAA,OAAAvD,OAAA,UAAAZ,MAAA,EAAAC,KAAA,EAAAC,OAAA,ysBAAAC,SAAA,SAAAzD,EAAAC,GAAA,EAAAD,IDP3BG,MAAA,EAAAoI,EAAA,kBAQApI,MAAA,EAAAqI,EAAA,sBAKArI,MAAA,EAAAsI,EAAA,yBAAAtI,cAb2CA,MAAA,OAAAF,EAAAoI,WAQ5BlI,MAAA,GAAAA,MAAA,QAAAF,EAAAoI,4xBEPf,SAASK,EAASC,GAChB,MAAsB,iBAARA,GAAoBA,aAAeC,MACnD,CAGA,SAASC,EAASC,GAChB,IAAIC,EACJ,MAAsB,iBAARD,GAA2B,MAAPA,GAAkH,YAA3F,MAAPA,GAAuD,OAAvCC,EAAmBD,EAAIzK,kBAAuB,EAAS0K,EAAiBzG,KAC5I,CACA,SAAS0G,EAAKF,EAAKG,GACjB,OAAIC,MAAMC,QAAQF,GAAcD,EAAKF,EAAK,CAACM,EAAGC,IAAMJ,EAAKK,SAASD,IAC3DE,OAAOC,QAAQV,GAAKW,OAAO,CAACC,EAAKC,KACtC,IAAKN,EAAGO,GAAKD,EACb,OAAIV,EAAKW,EAAGP,KAAIK,EAAIL,GAAKO,GAClBF,GACN,CAAC,EACN,CAGA,MAAMG,OACE,OADFA,OAEE,OAFFA,aAGQ,aAHRA,QAIG,QAJHA,cAKS,cAiBf,SAASC,EAAanB,GACpB,OAAOA,EAAIoB,QAAQ,4BAA6B,OAClD,CAGA,SAASC,EAAeC,EAAGC,GACzB,GAAIA,IAAMD,EAAG,OAAO,EACpB,MAAME,EAAOjB,MAAMC,QAAQe,GACzBE,EAAOlB,MAAMC,QAAQc,GACvB,IAAII,EACJ,GAAIF,GAAQC,EAAM,CAChB,GAAIF,EAAElJ,QAAUiJ,EAAEjJ,OAAQ,OAAO,EACjC,IAAKqJ,EAAI,EAAGA,EAAIH,EAAElJ,OAAQqJ,IAAK,IAAKL,EAAeE,EAAEG,GAAIJ,EAAEI,IAAK,OAAO,EACvE,OAAO,EAET,GAAIF,GAAQC,EAAM,OAAO,EACzB,GAAIF,GAAKD,GAAkB,iBAANC,GAA+B,iBAAND,EAAgB,CAC5D,MAAMK,EAAQJ,aAAaK,KACzBC,EAAQP,aAAaM,KACvB,GAAID,GAASE,EAAO,OAAON,EAAEO,WAAaR,EAAEQ,UAC5C,GAAIH,GAASE,EAAO,OAAO,EAC3B,MAAME,EAAUR,aAAaS,OAC3BC,EAAUX,aAAaU,OACzB,GAAID,GAAWE,EAAS,OAAOV,EAAE/E,YAAc8E,EAAE9E,WACjD,GAAIuF,GAAWE,EAAS,OAAO,EAC/B,MAAM3B,EAAOM,OAAON,KAAKiB,GAGzB,IAAKG,EAAI,EAAGA,EAAIpB,EAAKjI,OAAQqJ,IAAK,IAAKd,OAAOsB,UAAUC,eAAeC,KAAKd,EAAGhB,EAAKoB,IAAK,OAAO,EAChG,IAAKA,EAAI,EAAGA,EAAIpB,EAAKjI,OAAQqJ,IAAK,IAAKL,EAAeC,EAAEhB,EAAKoB,IAAKH,EAAEjB,EAAKoB,KAAM,OAAO,EACtF,OAAO,WACEH,IAAKD,GAAkB,mBAANC,GAAiC,mBAAND,IAC9CC,EAAE/E,aAAe8E,EAAE9E,UAG9B,CC1EA,MAAM6F,EASJ3M,YAAY4M,GAIV,IAHA1B,OAAO2B,OAAO5M,KAAM2M,GAGb3M,KAAK+B,MAAMmF,MAAM,EAAGlH,KAAK6M,kBAAoB7M,KAAK8M,SAAS5F,MAAM,EAAGlH,KAAK6M,mBAC5E7M,KAAK+M,aAAaC,KAExB,CAGIH,qBACF,OAAOpF,KAAKwF,IAAIjN,KAAKkN,UAAWlN,KAAK+M,aAAaC,MACpD,CAGIG,oBACF,OAAOnN,KAAKkN,UAAYlN,KAAK6M,cAC/B,CAGIO,eACF,OAAOpN,KAAK+B,MAAMsL,OAAOrN,KAAK6M,eAAgB7M,KAAKmN,cACrD,CAGIG,mBAEF,OAAO7F,KAAK8F,IAAIvN,KAAK+M,aAAaS,IAAMxN,KAAK6M,gBAE7C7M,KAAK8M,SAASpK,OAAS1C,KAAK+B,MAAMW,OAAQ,EAC5C,CAGI+K,cACF,OAAOzN,KAAK8M,SAASO,OAAOrN,KAAK6M,eAAgB7M,KAAKsN,aACxD,CAGII,WACF,OAAO1N,KAAK+B,MAAM0G,UAAU,EAAGzI,KAAK6M,eACtC,CAGIc,WACF,OAAO3N,KAAK+B,MAAM0G,UAAUzI,KAAK6M,eAAiB7M,KAAKmN,cACzD,CAGIS,sBACF,OAAK5N,KAAKsN,cAAgBtN,KAAKmN,cAAsB5B,OAG7CvL,KAAK+M,aAAaS,MAAQxN,KAAKkN,WAAalN,KAAK+M,aAAaC,QAAUhN,KAAKkN,WAErFlN,KAAK+M,aAAaS,MAAQxN,KAAK+M,aAAaC,MAA0BzB,OAAlBA,OACtD,iBClEF,SAASsC,EAAMC,EAAInB,GAEjB,OAAO,IAAIkB,EAAME,UAAUD,EAAInB,EACjC,kBC0BA,SAASqB,EAAYC,GACnB,GAAY,MAARA,EAAc,MAAM,IAAIC,MAAM,mCAClC,OAAID,aAAgB5B,OAAewB,EAAMM,aACrC/D,EAAS6D,GAAcJ,EAAMO,cAC7BH,IAAShC,KAAa4B,EAAMQ,WAC5BJ,IAASK,OAAeT,EAAMU,aAC9B3D,MAAMC,QAAQoD,IAASA,IAASrD,MAAciD,EAAMW,cACpDX,EAAMY,QAAUR,EAAK1B,qBAAqBsB,EAAMY,OAAeR,EAC/DJ,EAAMY,QAAUR,aAAgBJ,EAAMY,OAAeR,EAAKlO,YAC1DkO,aAAgBS,SAAiBb,EAAMc,gBAC3CC,QAAQC,KAAK,0BAA2BZ,GACjCJ,EAAMY,OACf,CACA,SAASK,GAAcnC,GACrB,IAAKA,EAAM,MAAM,IAAIuB,MAAM,0BAC3B,GAAIL,EAAMY,OAAQ,CAChB,GAAI9B,EAAKJ,qBAAqBsB,EAAMY,OAAQ,MAAO,CACjDR,KAAMtB,GAQR,MAAAtB,EAGIsB,aAAgBkB,EAAMY,OAAS,CACjCR,KAAMtB,GACJpC,EAASoC,IAASA,EAAKsB,gBAAgBJ,EAAMY,OAAS9B,EAAO,CAAC,GAJhEsB,QAED5C,EADI0D,KAAYC,KAAA3D,EAAA4D,GAIjB,GAAIhB,EAAM,CACR,MAAMiB,EAAQjB,EAAKA,KACnB,SAAAkB,aAAA,GACKzE,EAAKuD,EAAM,CAACnD,EAAGC,KAAOA,EAAEzE,WAAW,OAAK,IAC3C2H,KAAMA,EAAKlO,YACXmP,SACGH,EAAY,EAIrB,OAAKxE,EAASoC,IAAI,EAGlBwC,KAAA,GACKxC,GAJuB,CAC1BsB,KAAMtB,EAKV,CA4BA,SAASyC,EAAWzC,GAClB,GAAIkB,EAAMY,QAAU9B,aAAgBkB,EAAMY,OAAQ,OAAO9B,EACzD,MAAM0C,EAAQP,GAAcnC,GACtB2C,EAActB,EAAYqB,EAAMpB,MACtC,IAAKqB,EAAa,MAAM,IAAIpB,MAAM,uHAClC,OAAImB,EAAMpB,OAASqB,UAAoBD,EAAMpB,KACzCoB,EAAMH,QACRG,EAAMpB,KAAOoB,EAAMH,aACZG,EAAMH,OAER,IAAII,EAAYD,EACzB,CACAxB,EAAMuB,WAAaA,EClHnB,MAAMG,EAQAC,qBACF,IAAIxC,EACJ,IACEA,EAAQhN,KAAKyP,qBACf,OAAEC,GAAO,CACT,OAAgB,MAAT1C,EAAgBA,EAAQhN,KAAK+B,MAAMW,MAC5C,CAGIiN,mBACF,IAAInC,EACJ,IACEA,EAAMxN,KAAK4P,mBACb,OAAEC,GAAO,CACT,OAAc,MAAPrC,EAAcA,EAAMxN,KAAK+B,MAAMW,MACxC,CAGAoN,OAAO9C,EAAOQ,GACZ,GAAa,MAATR,GAAwB,MAAPQ,IAAeR,IAAUhN,KAAKwP,gBAAkBhC,IAAQxN,KAAK2P,cAClF,IACE3P,KAAK+P,cAAc/C,EAAOQ,EAC5B,OAAEwC,GAAO,CACX,CAGIC,eACF,OAAO,CACT,EAQFpC,EAAM0B,YAAcA,EC3CpB,MAAMW,UAAwBX,EAG5BxP,YAAYoQ,GACV3L,QACAxE,KAAKmQ,MAAQA,EACbnQ,KAAKoQ,UAAY,CAAC,CACpB,CACIC,kBACF,IAAIC,EAAuBC,EAAwBC,EACnD,OAAkK,OAA1JF,EAA6F,OAApEC,GAA0BC,EAAcxQ,KAAKmQ,OAAOM,kBAAuB,EAASF,EAAuB9D,KAAK+D,IAAwBF,EAAwBI,QACnM,CAKIT,eACF,OAAOjQ,KAAKmQ,QAAUnQ,KAAKqQ,YAAYM,aACzC,CAKAC,WAAWC,GACT5F,OAAON,KAAKkG,GAAUC,QAAQC,GAAS/Q,KAAKgR,oBAAoBd,EAAgBe,WAAWF,GAAQF,EAASE,IAC9G,CAKAG,eACEjG,OAAON,KAAK3K,KAAKoQ,WAAWU,QAAQC,GAAS/Q,KAAKgR,oBAAoBD,GACxE,CACAC,oBAAoBD,EAAOI,GACrBnR,KAAKoQ,UAAUW,KACjB/Q,KAAKmQ,MAAMiB,oBAAoBL,EAAO/Q,KAAKoQ,UAAUW,WAC9C/Q,KAAKoQ,UAAUW,IAEpBI,IACFnR,KAAKmQ,MAAMkB,iBAAiBN,EAAOI,GACnCnR,KAAKoQ,UAAUW,GAASI,EAE5B,EAGFjB,EAAgBe,WAAa,CAC3BK,gBAAiB,UACjBnB,MAAO,QACPoB,KAAM,OACNC,MAAO,QACPC,MAAO,QACPC,OAAQ,QAEV7D,EAAMqC,gBAAkBA,ECpDxB,MAAMyB,UAA6BzB,EAGjCnQ,YAAYoQ,GACV3L,MAAM2L,GACNnQ,KAAKmQ,MAAQA,EACbnQ,KAAKoQ,UAAY,CAAC,CACpB,CAGIX,4BACF,OAAoC,MAA7BzP,KAAKmQ,MAAMX,eAAyBxP,KAAKmQ,MAAMX,eAAiBxP,KAAK+B,MAAMW,MACpF,CAGIkN,0BACF,OAAO5P,KAAKmQ,MAAMR,YACpB,CAGAI,cAAc/C,EAAOQ,GACnBxN,KAAKmQ,MAAMyB,kBAAkB5E,EAAOQ,EACtC,CACIzL,YACF,OAAO/B,KAAKmQ,MAAMpO,KACpB,CACIA,UAAMA,GACR/B,KAAKmQ,MAAMpO,MAAQA,CACrB,EAEF8L,EAAMqC,gBAAkBA,EC/BxB,MAAM2B,UAAuC3B,EAEvCT,4BACF,MAAMqC,EAAO9R,KAAKqQ,YACZ0B,EAAYD,EAAKE,cAAgBF,EAAKE,eACtCC,EAAeF,GAAaA,EAAUE,aACtCC,EAAcH,GAAaA,EAAUG,YAC3C,OAAmB,MAAfA,GAAuC,MAAhBD,GAAwBA,EAAeC,EACzDD,EAEFC,CACT,CAGItC,0BACF,MAAMkC,EAAO9R,KAAKqQ,YACZ0B,EAAYD,EAAKE,cAAgBF,EAAKE,eACtCC,EAAeF,GAAaA,EAAUE,aACtCC,EAAcH,GAAaA,EAAUG,YAC3C,OAAmB,MAAfA,GAAuC,MAAhBD,GAAwBA,EAAeC,EACzDD,EAEFC,CACT,CAGAnC,cAAc/C,EAAOQ,GACnB,IAAKxN,KAAKqQ,YAAY8B,YAAa,OACnC,MAAMC,EAAQpS,KAAKqQ,YAAY8B,cAC/BC,EAAMC,SAASrS,KAAKmQ,MAAMmC,YAActS,KAAKmQ,MAAOnD,GACpDoF,EAAMG,OAAOvS,KAAKmQ,MAAMqC,WAAaxS,KAAKmQ,MAAO3C,GACjD,MAAMsE,EAAO9R,KAAKqQ,YACZ0B,EAAYD,EAAKE,cAAgBF,EAAKE,eACxCD,IACFA,EAAUU,kBACVV,EAAUW,SAASN,GAEvB,CAGIrQ,YACF,OAAO/B,KAAKmQ,MAAMwC,aAAe,EACnC,CACI5Q,UAAMA,GACR/B,KAAKmQ,MAAMwC,YAAc5Q,CAC3B,EAEF8L,EAAMgE,+BAAiCA,mBCqQvChE,EAAME,UA9SN,MAAMA,EAOJhO,YAAY+N,EAAInB,GACd3M,KAAK8N,GAAKA,aAAcyB,EAAczB,EAAKA,EAAG8E,mBAAoC,UAAf9E,EAAG+E,SAAsC,aAAf/E,EAAG+E,QAAyB,IAAIhB,EAA+B/D,GAAM,IAAI6D,EAAqB7D,GAC3L9N,KAAK8S,OAAS1D,EAAWzC,GACzB3M,KAAK+S,WAAa,CAAC,EACnB/S,KAAKgT,OAAS,GACdhT,KAAKiT,eAAiB,GACtBjT,KAAKkT,eAAiBlT,KAAKkT,eAAeC,KAAKnT,MAC/CA,KAAKoT,SAAWpT,KAAKoT,SAASD,KAAKnT,MACnCA,KAAKqT,UAAYrT,KAAKqT,UAAUF,KAAKnT,MACrCA,KAAKsT,QAAUtT,KAAKsT,QAAQH,KAAKnT,MACjCA,KAAKuT,SAAWvT,KAAKuT,SAASJ,KAAKnT,MACnCA,KAAKwT,SAAWxT,KAAKwT,SAASL,KAAKnT,MACnCA,KAAKyT,YAAczT,KAAKyT,YAAYN,KAAKnT,MACzCA,KAAK0T,oBAAsB1T,KAAK0T,oBAAoBP,KAAKnT,MACzDA,KAAK2T,cAGL3T,KAAK4T,cACL5T,KAAKqT,WACP,CACAQ,WAAW5F,GACT,IAAI6F,EACJ,OAAe,MAAR7F,IAAiD,OAA/B6F,EAAe9T,KAAK8S,aAAkB,EAASgB,EAAaD,WAAW5F,GAClG,CAGIA,WACF,OAAOjO,KAAK8S,OAAO7E,IACrB,CACIA,SAAKA,GACP,GAAIjO,KAAK6T,WAAW5F,GAAO,OAC3B,KAAMA,aAAgBJ,EAAMY,SAAWzO,KAAK8S,OAAO/S,cAAgBiO,EAAYC,GAK7E,YAHAjO,KAAK8S,OAAOiB,cAAc,CACxB9F,SAIJ,MAAM6E,EAAS7E,aAAgBJ,EAAMY,OAASR,EAAOmB,EAAW,CAC9DnB,SAEF6E,EAAOkB,cAAgBhU,KAAK8S,OAAOkB,cACnChU,KAAK8S,OAASA,CAChB,CAGI/Q,YACF,OAAO/B,KAAKgT,MACd,CACIjR,UAAMsI,GACJrK,KAAK+B,QAAUsI,IACnBrK,KAAK8S,OAAO/Q,MAAQsI,EACpBrK,KAAKiU,gBACLjU,KAAKyT,cACP,CAGIO,oBACF,OAAOhU,KAAKiT,cACd,CACIe,kBAAc3J,GACZrK,KAAKgU,gBAAkB3J,IAC3BrK,KAAK8S,OAAOkB,cAAgB3J,EAC5BrK,KAAKiU,gBACLjU,KAAKyT,cACP,CAGIS,iBACF,OAAOlU,KAAK8S,OAAOoB,UACrB,CACIA,eAAWC,GACTnU,KAAK8S,OAAOsB,iBAAiBD,KACjCnU,KAAK8S,OAAOoB,WAAaC,EACzBnU,KAAKiU,gBACLjU,KAAKyT,cACP,CAGIY,mBACF,OAAOrU,KAAK8S,OAAOuB,YACrB,CAGAV,cACE3T,KAAK8N,GAAG8C,WAAW,CACjBU,gBAAiBtR,KAAKkT,eACtB/C,MAAOnQ,KAAKoT,SACZ7B,KAAMvR,KAAKsT,QACX9B,MAAOxR,KAAKwT,SACZ/B,MAAOzR,KAAKuT,SACZ7B,OAAQ1R,KAAKqT,WAEjB,CAGAiB,gBACMtU,KAAK8N,IAAI9N,KAAK8N,GAAGoD,cACvB,CAGAqD,WAAWC,EAAIC,GACb,MAAMC,EAAY1U,KAAK+S,WAAWyB,GAC7BE,GACLA,EAAU5D,QAAQ6D,GAAKA,EAAEF,GAC3B,CAGIjF,qBACF,OAAOxP,KAAK4U,gBAAkB5U,KAAK6U,mBAAqB7U,KAAK8N,GAAG0B,cAClE,CAGItC,gBACF,OAAOlN,KAAK4U,gBAAkB5U,KAAK6U,mBAAqB7U,KAAK8N,GAAG6B,YAClE,CACIzC,cAAU4H,IACP9U,KAAK8N,KAAO9N,KAAK8N,GAAGmC,WACzBjQ,KAAK8N,GAAGgC,OAAOgF,EAAKA,GACpB9U,KAAKkT,iBACP,CAGAA,iBAEMlT,KAAKqU,eAAiBrU,KAAK8N,GAAG/L,OAChC6M,QAAQC,KAAK,2GAGf7O,KAAK+U,WAAa,CAChB/H,MAAOhN,KAAKwP,eACZhC,IAAKxN,KAAKkN,UAEd,CAGA0G,cACE5T,KAAK8S,OAAO/Q,MAAQ/B,KAAK8N,GAAG/L,MAC5B/B,KAAKgT,OAAShT,KAAK8S,OAAO/Q,KAC5B,CAGAkS,gBACE,MAAMe,EAAmBhV,KAAK8S,OAAOkB,cAC/BiB,EAAWjV,KAAK8S,OAAO/Q,MACvBmT,EAAkBlV,KAAKqU,aACvBc,EAAYnV,KAAKgU,gBAAkBgB,GAAoBhV,KAAK+B,QAAUkT,EAC5EjV,KAAKiT,eAAiB+B,EACtBhV,KAAKgT,OAASiC,EACVjV,KAAK8N,GAAG/L,QAAUmT,IAAiBlV,KAAK8N,GAAG/L,MAAQmT,GACnDC,GAAWnV,KAAKoV,mBACtB,CAGArB,cAAcpH,GACZ,MACEsB,QAEEtB,EADC0I,KAAQrG,KACTrC,EAAIsC,GACFqG,GAActV,KAAK6T,WAAW5F,GAC9BsH,GAAc7J,EAAe1L,KAAK8S,OAAQuC,GAC5CC,IAAYtV,KAAKiO,KAAOA,GACxBsH,GAAYvV,KAAK8S,OAAOiB,cAAcsB,IAEtCC,GAAcC,IAAYvV,KAAKiU,eACrC,CAGAuB,aAAatI,GACM,MAAbA,IACJlN,KAAKkN,UAAYA,EAGjBlN,KAAKyV,mBAAmBvI,GAC1B,CAGAuI,mBAAmBvI,GACjBlN,KAAK0V,qBACL1V,KAAK6U,mBAAqB3H,EAC1BlN,KAAK4U,gBAAkBhS,WAAW,KAC3B5C,KAAK8N,KACV9N,KAAKkN,UAAYlN,KAAK6U,mBACtB7U,KAAK0V,qBAAmB,EACvB,GACL,CAGAN,oBACEpV,KAAKuU,WAAW,SAAUvU,KAAK2V,aAC3B3V,KAAK8S,OAAO8C,YAAY5V,KAAKuU,WAAW,WAAYvU,KAAK2V,YAC/D,CAGAD,qBACM1V,KAAK4U,kBACPiB,aAAa7V,KAAK4U,wBACX5U,KAAK4U,gBAEhB,CAGAnB,cACEzT,KAAKkN,UAAYlN,KAAK8S,OAAOgD,gBAAgB9V,KAAK8S,OAAOgD,gBAAgB9V,KAAKkN,UAAW3B,QAC3F,CAGAmI,sBACM1T,KAAKwP,iBAAmBxP,KAAKkN,WACjClN,KAAKyT,aACP,CAGAsC,GAAGvB,EAAIrD,GACL,OAAKnR,KAAK+S,WAAWyB,KAAKxU,KAAK+S,WAAWyB,GAAM,IAChDxU,KAAK+S,WAAWyB,GAAIwB,KAAK7E,GAClBnR,IACT,CAGAiW,IAAIzB,EAAIrD,GACN,IAAKnR,KAAK+S,WAAWyB,GAAK,OAAOxU,KACjC,IAAKmR,EACH,cAAOnR,KAAK+S,WAAWyB,GAChBxU,KAET,MAAMkW,EAASlW,KAAK+S,WAAWyB,GAAIrN,QAAQgK,GAC3C,OAAI+E,GAAU,GAAGlW,KAAK+S,WAAWyB,GAAI2B,OAAOD,EAAQ,GAC7ClW,IACT,CAGAoT,SAASqB,GAKP,GAJAzU,KAAK2V,YAAclB,EACnBzU,KAAK0V,sBAGA1V,KAAK+U,WAAY,OAAO/U,KAAK4T,cAClC,MAAMwC,EAAU,IAAI1J,EAAc,CAEhC3K,MAAO/B,KAAK8N,GAAG/L,MACfmL,UAAWlN,KAAKkN,UAEhBJ,SAAU9M,KAAKqU,aACftH,aAAc/M,KAAK+U,aAEfsB,EAAcrW,KAAK8S,OAAOwD,cAC1BC,EAASvW,KAAK8S,OAAOqD,OAAOC,EAAQvJ,eAAgBuJ,EAAQ3I,QAAQ/K,OAAQ0T,EAAQhJ,SAAUgJ,EAAQxI,gBAAiB,CAC3HuC,OAAO,EACPqG,KAAK,IACJD,OAIG3I,EAAkByI,IAAgBrW,KAAK8S,OAAOwD,cAAgBF,EAAQxI,gBAAkBrC,OAC9F,IAAI2B,EAAYlN,KAAK8S,OAAOgD,gBAAgBM,EAAQvJ,eAAiB0J,EAAQ3I,GACzEA,IAAoBrC,SAAgB2B,EAAYlN,KAAK8S,OAAOgD,gBAAgB5I,EAAW3B,SAC3FvL,KAAKiU,gBACLjU,KAAKwV,aAAatI,UACXlN,KAAK2V,WACd,CAGAtC,YACMrT,KAAKqU,eAAiBrU,KAAK8N,GAAG/L,OAChC/B,KAAK4T,cAEP5T,KAAK8S,OAAO2D,WACZzW,KAAKiU,gBACLjU,KAAKkT,gBACP,CAGAI,QAAQkB,GACNA,EAAGkC,iBACHlC,EAAGmC,iBACL,CAGApD,SAASiB,GACPxU,KAAK0T,qBACP,CAGAF,SAASgB,GACPxU,KAAK0T,qBACP,CAGAkD,UACE5W,KAAKsU,gBACLtU,KAAK+S,WAAWrQ,OAAS,SAClB1C,KAAK8N,EACd,GCnTF,MAAM+I,EASJC,iBAAiBC,GACf,OAAOnM,MAAMC,QAAQkM,GAAQA,EAAO,CAACA,EAAM,IAAIF,EACjD,CACA9W,YAAYqW,GACVnL,OAAO2B,OAAO5M,KAAM,CAClBoN,SAAU,GACV4J,YAAa,GACbC,MAAM,EACNC,UAAW,GACVd,EACL,CAGAe,UAAUf,GACR,OAAApW,KAAKgX,aAAeZ,EAAQY,YAC5BhX,KAAKiX,KAAOjX,KAAKiX,MAAQb,EAAQa,KACjCjX,KAAKoN,UAAYgJ,EAAQhJ,SACzBpN,KAAKkX,WAAad,EAAQc,UACnBlX,IACT,CAGIuW,aACF,OAAOvW,KAAKkX,UAAYlX,KAAKoN,SAAS1K,MACxC,EAEFmL,EAAMgJ,cAAgBA,ECrCtB,MAAMO,GAOJrX,YAAYgC,EAAOiF,EAAMqQ,QACT,IAAVtV,IACFA,EAAQ,SAEG,IAATiF,IACFA,EAAO,GAEThH,KAAK+B,MAAQA,EACb/B,KAAKgH,KAAOA,EACZhH,KAAKqX,KAAOA,CACd,CACAxQ,WACE,OAAO7G,KAAK+B,KACd,CACAuV,OAAO3J,GACL3N,KAAK+B,OAASuI,OAAOqD,EACvB,CACA4J,SAASzE,GACP,OAAOA,EAAO0E,OAAOxX,KAAK6G,WAAY,CACpC8G,MAAM,IACLwJ,UAAUrE,EAAO2E,qBACtB,CACIC,YACF,MAAO,CACL3V,MAAO/B,KAAK+B,MACZiF,KAAMhH,KAAKgH,KACXqQ,KAAMrX,KAAKqX,KAEf,CACIK,UAAMA,GACRzM,OAAO2B,OAAO5M,KAAM0X,EACtB,CACAC,QAAQC,GACN,IAAK5X,KAAK+B,MAAMW,QAAuB,MAAbkV,GAAqB5X,KAAKgH,MAAQ4Q,EAAW,MAAO,GAC9E,MAAMC,EAAY7X,KAAK+B,MAAM,GAC7B,OAAA/B,KAAK+B,MAAQ/B,KAAK+B,MAAMmF,MAAM,GACvB2Q,CACT,CACAC,QACE,IAAK9X,KAAK+B,MAAMW,OAAQ,MAAO,GAC/B,MAAMmV,EAAY7X,KAAK+B,MAAM/B,KAAK+B,MAAMW,OAAS,GACjD,OAAA1C,KAAK+B,MAAQ/B,KAAK+B,MAAMmF,MAAM,GAAG,GAC1B2Q,CACT,ECvCF,MAAMpJ,EAyBJ1O,YAAY4M,GACV3M,KAAKgT,OAAS,GACdhT,KAAK+X,WAAO5I,aAAA,GACPV,EAAOuJ,UACPrL,IAEL3M,KAAKiY,cAAe,CACtB,CAGAlE,cAAcpH,GACP1B,OAAON,KAAKgC,GAAMjK,QACvB1C,KAAKkY,iBAAiBlY,KAAK+X,QAAQ5E,KAAKnT,KAAM2M,GAChD,CAGAoL,QAAQpL,GACN1B,OAAO2B,OAAO5M,KAAM2M,EACtB,CAGI+K,YACF,MAAO,CACL1E,OAAQhT,KAAK+B,MACboW,eAAgBnY,KAAKsW,cAEzB,CACIoB,UAAMA,GACR1X,KAAKgT,OAAS0E,EAAM1E,MACtB,CAGAoF,QACEpY,KAAKgT,OAAS,EAChB,CACIjR,YACF,OAAO/B,KAAKgT,MACd,CACIjR,UAAMA,GACR/B,KAAKqY,QAAQtW,EAAO,CAClBoO,OAAO,GAEX,CAGAkI,QAAQtW,EAAOuW,QACC,IAAVA,IACFA,EAAQ,CACNnI,OAAO,IAGXnQ,KAAKoY,QACLpY,KAAKwX,OAAOzV,EAAOuW,EAAO,IAC1BtY,KAAKyW,UACP,CACIzC,oBACF,OAAOhU,KAAK+B,KACd,CACIiS,kBAAcjS,GAChB/B,KAAKqY,QAAQtW,EAAO,CAAC,EACvB,CACImS,iBACF,OAAOlU,KAAKuY,MAAQvY,KAAKuY,MAAMvY,KAAK+B,MAAO/B,MAAQA,KAAKgU,aAC1D,CACIE,eAAWnS,GACT/B,KAAKwY,OACPxY,KAAK+B,MAAQ/B,KAAKwY,OAAOzW,EAAO/B,MAEhCA,KAAKgU,cAAgB1J,OAAOvI,EAEhC,CAGIuU,oBACF,OAAOtW,KAAKyY,aAAa,EAAGzY,KAAKqU,aAAa3R,OAAQ,CACpD8T,KAAK,GAET,CACIF,kBAAcvU,GAChB/B,KAAKqY,QAAQtW,EAAO,CAClByU,KAAK,GAET,CACInC,mBACF,OAAOrU,KAAK+B,KACd,CACI6T,iBACF,OAAO,CACT,CACI8C,eACF,OAAO1Y,KAAK4V,UACd,CAGAE,gBAAgB5I,EAAWyL,GACzB,OAAOzL,CACT,CACA0L,oBAAoBC,EAASC,GAC3B,YAAgB,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,QAErB+E,KAAKwF,IAAIjN,KAAKqU,aAAa3R,OAAQoW,EAAQD,EACpD,CAGAJ,aAAaI,EAASC,EAAOR,GAC3B,YAAgB,IAAZO,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,QAErB1C,KAAKqU,aAAanN,MAAM2R,EAASC,EAC1C,CAGAC,YAAYF,EAASC,GACnB,YAAgB,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,QAErB,IAAI0U,GAAsBpX,KAAKyY,aAAaI,EAASC,GAAQD,EACtE,CAGAG,WAAWrL,GACT,OAAIvD,EAASuD,KAAOA,EAAO,IAAIyJ,GAAsB9M,OAAOqD,KACrDA,EAAK4J,SAASvX,KACvB,CAGAiZ,eAAeC,EAAIZ,GACjB,OAAKY,GACLlZ,KAAKgT,QAAUkG,EACR,IAAIrC,EAAc,CACvBzJ,SAAU8L,EACVlC,YAAakC,KAJC,IAAIrC,CAMtB,CAGAsC,YAAYD,EAAIZ,EAAOc,QACP,IAAVd,IACFA,EAAQ,CAAC,GAEX,MAAMe,EAAkBrZ,KAAK0X,MAC7B,IAAItB,EAGJ,IAFC8C,EAAI9C,GAAWpW,KAAKsZ,cAAcJ,EAAIZ,GACvClC,EAAUA,EAAQe,UAAUnX,KAAKiZ,eAAeC,EAAIZ,IAChDlC,EAAQhJ,SAAU,CACpB,IAAImM,EACAC,GAAsC,IAA3BxZ,KAAKyZ,WAAWnB,GAC/B,GAAIkB,GAAyB,MAAbJ,EAAmB,CAEjC,MAAMM,EAAkB1Z,KAAK0X,OACN,IAAnB1X,KAAK2Z,YACPJ,EAAiBH,EAAU1B,MAC3B0B,EAAUzB,QAAQ3X,KAAKqU,aAAa3R,OAAS0T,EAAQc,YAEvD,IAAI0C,EAAc5Z,KAAKgZ,WAAWI,GAClCI,EAAWI,EAAY5C,cAAgBoC,EAAUvS,aAG3C2S,GAAYI,EAAYxM,WAAgC,UAAnBpN,KAAK2Z,YAC9C3Z,KAAK0X,MAAQgC,EACbH,EAAiBH,EAAU1B,MAC3B0B,EAAUtB,QACV8B,EAAc5Z,KAAKgZ,WAAWI,GAC9BI,EAAWI,EAAY5C,cAAgBoC,EAAUvS,YAI/C2S,GAAYI,EAAYxM,WAAUpN,KAAK0X,MAAQgC,GAIhDF,IACHpD,EAAU,IAAIS,EACd7W,KAAK0X,MAAQ2B,EACTD,GAAaG,IAAgBH,EAAU1B,MAAQ6B,IAGvD,OAAOnD,CACT,CAGAqB,qBACE,OAAO,IAAIZ,CACb,CAGAgD,eACE,OAAO,IAAIhD,CACb,CAGAW,OAAOnN,EAAKiO,EAAO3K,GACjB,IAAKvD,EAASC,GAAM,MAAM,IAAI6D,MAAM,0BACpC,MAAMkL,EAAYhP,EAASuD,GAAQ,IAAIyJ,GAAsB9M,OAAOqD,IAASA,EAE7E,IAAIyI,EADS,MAATkC,GAAiBA,EAAM3K,OAAM2K,EAAMwB,iBAAmB9Z,KAAK0X,QAE9DrN,EAAK+L,GAAWpW,KAAK+Z,UAAU1P,EAAKiO,GACrC,QAAS0B,EAAK,EAAGA,EAAK3P,EAAI3H,SAAUsX,EAAI,CACtC,MAAMC,EAAIja,KAAKmZ,YAAY9O,EAAI2P,GAAK1B,EAAOc,GAC3C,IAAKa,EAAEjD,cAAgBhX,KAAKka,cAAc7P,EAAI2P,GAAK1B,EAAOc,GAAY,MACtEhD,EAAQe,UAAU8C,EAAC,CAErB,QAAoB,IAAfja,KAAKma,OAAiC,WAAfna,KAAKma,QAAgC,MAAT7B,GAAiBA,EAAMnI,OAAS9F,GACtF+L,EAAQe,UAAUnX,KAAK6Z,gBAIR,MAAbT,IACFhD,EAAQc,WAAalX,KAAKgZ,WAAWI,GAAWlC,WAM3Cd,CACT,CACAgE,OAAOvB,EAASC,GACd,YAAgB,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,QAE5B1C,KAAKgT,OAAShT,KAAKqU,aAAanN,MAAM,EAAG2R,GAAW7Y,KAAKqU,aAAanN,MAAM4R,GACrE,IAAIjC,CACb,CAGAqB,iBAAiBmC,GACf,GAAIra,KAAKsa,cAAgBta,KAAKiY,aAAc,OAAOoC,IACnDra,KAAKsa,aAAc,EACnB,MAAMC,EAAWva,KAAKsW,cAChBvU,EAAQ/B,KAAK+B,MACbyY,EAAMH,IACZ,OAAAra,KAAKsW,cAAgBiE,EAEjBva,KAAK+B,OAAS/B,KAAK+B,QAAUA,GAAuC,IAA9BA,EAAMoF,QAAQnH,KAAK+B,QAC3D/B,KAAKwX,OAAOzV,EAAMmF,MAAMlH,KAAKqU,aAAa3R,QAAS,CAAC,EAAG,WAElD1C,KAAKsa,YACLE,CACT,CACAC,YAAYJ,GACV,GAAIra,KAAK0a,YAAc1a,KAAKiY,aAAc,OAAOoC,EAAGra,MACpDA,KAAK0a,WAAY,EACjB,MAAMhD,EAAQ1X,KAAK0X,MACb8C,EAAMH,EAAGra,MACf,OAAAA,KAAK0X,MAAQA,SACN1X,KAAK0a,UACLF,CACT,CACAN,cAAchB,EAAIZ,EAAOc,GACvB,QAAepZ,KAAK2a,WACtB,CAGAZ,UAAU1P,EAAKiO,GACb,YAAc,IAAVA,IACFA,EAAQ,CAAC,GAEJzB,EAAc+D,UAAU5a,KAAK6a,QAAU7a,KAAK6a,QAAQxQ,EAAKrK,KAAMsY,GAASjO,EACjF,CAGAiP,cAAcjP,EAAKiO,GACjB,YAAc,IAAVA,IACFA,EAAQ,CAAC,GAEJzB,EAAc+D,UAAU5a,KAAK8a,YAAc9a,KAAK8a,YAAYzQ,EAAKrK,KAAMsY,GAASjO,EACzF,CAGAoP,WAAWnB,GACT,QAAStY,KAAK+a,UAAY/a,KAAK+a,SAAS/a,KAAK+B,MAAO/B,KAAMsY,OAAatY,KAAKgb,QAAUhb,KAAKgb,OAAOvB,WAAWnB,GAC/G,CAGA7B,WACMzW,KAAK0R,QAAQ1R,KAAK0R,OAAO1R,KAAK+B,MAAO/B,KAC3C,CACAmW,OAAOnJ,EAAOiO,EAAa7N,EAAUQ,EAAiB0K,QAC5B,IAApB1K,IACFA,EAAkBrC,aAEN,IAAV+M,IACFA,EAAQ,CACNnI,OAAO,IAGX,MAAM+K,EAAUlO,EAAQiO,EAClBtN,EAAO3N,KAAK+Y,YAAYmC,GACxBC,GAA6B,IAAfnb,KAAKma,OAAiC,WAAfna,KAAKma,MAChD,IAAI9D,EACA8E,IACFvN,EXvTN,SAASwN,EAAezC,GACtB,OAAQA,GACN,KAAKpN,OACH,OAAOA,aACT,KAAKA,QACH,OAAOA,cACT,QACE,OAAOoN,EAEb,CW8SwByC,CAAexN,GACjCyI,EAAcrW,KAAKyY,aAAa,EAAGyC,EAAS,CAC1C1E,KAAK,KAGT,IAAI3J,GAAiBG,EACrB,MAAMoJ,EAAU,IAAIS,EAUpB,GAPIjJ,IAAoBrC,SACtBsB,GAAiB7M,KAAK8V,gBAAgB9I,EAAOiO,EAAc,GAAe,IAAVjO,IAAgBmO,EAAc5P,OAAiBqC,GAG/GwI,EAAQc,UAAYrK,GAAiBG,GAEvCoJ,EAAQe,UAAUnX,KAAKoa,OAAOvN,KAC1BsO,GAAevN,IAAoBrC,QAAkB8K,IAAgBrW,KAAKsW,cAC5E,GAAI1I,IAAoBrC,aAAsB,CAC5C,IAAI8P,GACJ,KAAOhF,IAAgBrW,KAAKsW,gBAAkB+E,GAAYrb,KAAKqU,aAAa3R,SAC1E0T,EAAQe,UAAU,IAAIN,EAAc,CAClCK,WAAW,KACTC,UAAUnX,KAAKoa,OAAOiB,GAAY,GAAE,MAEjCzN,IAAoBrC,eAC7BoC,EAAKgK,UAGT,OAAOvB,EAAQe,UAAUnX,KAAKwX,OAAOpK,EAAUkL,EAAO3K,GACxD,CACAkG,WAAW5F,GACT,OAAOjO,KAAKiO,OAASA,CACvB,CACAmG,iBAAiBrS,GACf,MAAMuZ,EAAOtb,KAAKkU,WAClB,OAAOnS,IAAUuZ,GAAQ7M,EAAO8M,aAAavQ,SAASjJ,IAAU0M,EAAO8M,aAAavQ,SAASsQ,MAAUtb,KAAKwY,QAASxY,KAAKwY,OAAOzW,EAAO/B,QAAUA,KAAKwY,OAAOxY,KAAKkU,WAAYlU,KACjL,EAEFyO,EAAOuJ,SAAW,CAChB2C,aAAa,GAEflM,EAAO8M,aAAe,MAACC,EAAW,KAAM,IACxC3N,EAAMY,OAASA,sBC1Xf,MAAMgN,GAGJ1b,YAAY2b,EAAQ1U,QACH,IAAX0U,IACFA,EAAS,SAEE,IAAT1U,IACFA,EAAO,GAEThH,KAAK0b,OAASA,EACd1b,KAAKgH,KAAOA,CACd,CACAH,WACE,OAAO7G,KAAK0b,OAAOC,IAAIrR,QAAQvH,KAAK,GACtC,CACAuU,OAAOsE,GACL,IAAKtR,OAAOsR,GAAY,OACxBA,EAAYxR,EAASwR,GAAa,IAAIxE,GAAsB9M,OAAOsR,IAAcA,EACjF,MAAMC,EAAY7b,KAAK0b,OAAO1b,KAAK0b,OAAOhZ,OAAS,GAC7CoZ,EAAaD,IAEnBA,EAAUxE,OAASuE,EAAUvE,MAA0B,MAAlBuE,EAAUvE,OAE/CuE,EAAU5U,OAAS6U,EAAU7U,KAAO6U,EAAUhV,WAAWnE,OACzD,GAAIkZ,aAAqBxE,GAEnB0E,EAEFD,EAAUvE,OAAOsE,EAAU/U,YAG3B7G,KAAK0b,OAAO1F,KAAK4F,QAAS,GAEnBA,aAAqBH,GAAmB,CACjD,GAAsB,MAAlBG,EAAUvE,KAAc,CAE1B,IAAI0E,EACJ,KAAOH,EAAUF,OAAOhZ,QAAsC,MAA5BkZ,EAAUF,OAAO,GAAGrE,MACpD0E,EAAiBH,EAAUF,OAAO5D,QAClCiE,EAAe/U,MAAQ4U,EAAU5U,KACjChH,KAAKsX,OAAOyE,EAAc,CAK1BH,EAAU/U,aAEZ+U,EAAUvE,KAAOuE,EAAUI,WAC3Bhc,KAAK0b,OAAO1F,KAAK4F,GAAS,CAGhC,CACArE,SAASzE,GACP,KAAMA,aAAkBjF,EAAMO,eAE5B,OADa,IAAIgJ,GAAsBpX,KAAK6G,YAChC0Q,SAASzE,GAEvB,MAAMsD,EAAU,IAAIS,EACpB,QAASmD,EAAK,EAAGA,EAAKha,KAAK0b,OAAOhZ,SAAW0T,EAAQa,OAAQ+C,EAAI,CAC/D,MAAMiC,EAAQjc,KAAK0b,OAAO1B,GACpBkC,EAAgBpJ,EAAOqJ,eAAerJ,EAAOuB,aAAa3R,QAC1D2U,EAAO4E,EAAM5E,KACnB,IAAI+E,EACJ,GAAY,MAAR/E,KAEH6E,GAAiBA,EAAcG,OAAShF,GAAO,CAC9C,GAAI4E,aAAiBR,IAErB3I,EAAOwJ,OAAOnV,QAAQkQ,IAAS,EAAG,CAChC,MAAMkF,EAAYzJ,EAAO2E,mBAAmBJ,GAC5CjB,EAAQe,UAAUoF,EAAS,CAE7BH,EAAaH,aAAiBR,IAAqB3I,EAAO0J,QAAQnF,EAAI,CAExE,GAAI+E,EAAY,CACd,MAAMxC,EAAcwC,EAAWpD,WAAWiD,GAC1CrC,EAAY3C,MAAO,EACnBb,EAAQe,UAAUyC,GAClB9G,EAAOE,QAAU4G,EAAYxM,SAG7B,MAAMqP,EAAcR,EAAMpV,WAAWK,MAAM0S,EAAY5C,YAAYtU,QAC/D+Z,GAAarG,EAAQe,UAAUrE,EAAO0E,OAAOiF,EAAa,CAC5D9O,MAAM,IACN,MAEFyI,EAAQe,UAAUrE,EAAO0E,OAAOyE,EAAMpV,WAAY,CAChD8G,MAAM,IACN,CAGN,OAAOyI,CACT,CACIsB,YACF,MAAO,CACLgE,OAAQ1b,KAAK0b,OAAOC,IAAIvU,GAAKA,EAAEsQ,OAC/B1Q,KAAMhH,KAAKgH,KACXqQ,KAAMrX,KAAKqX,KACX2E,WAAYhc,KAAKgc,WAErB,CACItE,UAAMA,GACR,MACEgE,UAEEhE,EADCgF,KAAK1N,KACN0I,EAAKzI,IACThE,OAAO2B,OAAO5M,KAAM0c,GACpB1c,KAAK0b,OAASA,EAAOC,IAAIgB,IACvB,MAAMV,EAAQ,WAAYU,EAAS,IAAIlB,GAAsB,IAAIrE,GACjE6E,SAAMvE,MAAQiF,EACPV,GAEX,CACAtE,QAAQC,GACN,IAAK5X,KAAK0b,OAAOhZ,QAAuB,MAAbkV,GAAqB5X,KAAKgH,MAAQ4Q,EAAW,MAAO,GAC/E,MAAMgF,EAA6B,MAAbhF,EAAoBA,EAAY5X,KAAKgH,KAAO4Q,EAClE,IAAIoC,EAAK,EACT,KAAOA,EAAKha,KAAK0b,OAAOhZ,QAAQ,CAC9B,MAAMuZ,EAAQjc,KAAK0b,OAAO1B,GACpBnC,EAAYoE,EAAMtE,QAAQiF,GAChC,GAAIX,EAAMpV,WAAY,CAGpB,IAAKgR,EAAW,QACdmC,OAGFha,KAAK0b,OAAOvF,OAAO6D,EAAI,GAEzB,GAAInC,EAAW,OAAOA,EAExB,MAAO,EACT,CACAC,QACE,IAAK9X,KAAK0b,OAAOhZ,OAAQ,MAAO,GAChC,IAAIsX,EAAKha,KAAK0b,OAAOhZ,OAAS,EAC9B,KAAO,GAAKsX,GAAI,CACd,MAAMiC,EAAQjc,KAAK0b,OAAO1B,GACpBnC,EAAYoE,EAAMnE,QACxB,GAAImE,EAAMpV,WAAY,CAGpB,IAAKgR,EAAW,QACdmC,OAGFha,KAAK0b,OAAOvF,OAAO6D,EAAI,GAEzB,GAAInC,EAAW,OAAOA,EAExB,MAAO,EACT,EC3JF,MAAMgF,EACJ9c,YAAY+S,EAAQgC,GAClB9U,KAAK8S,OAASA,EACd9S,KAAK8c,KAAO,GACZ,MACEvG,SACA8F,SACEvJ,EAAOqJ,eAAerH,KAASA,EAAM,GAGvCuH,MAAO,EACP9F,OAAQ,GACV,CAGE8F,MAAOrc,KAAK8S,OAAO0J,QAAQ9Z,OAC3B6T,OAAQ,IAEVvW,KAAKuW,OAASA,EACdvW,KAAKqc,MAAQA,EACbrc,KAAK+c,IAAK,CACZ,CACIC,YACF,OAAOhd,KAAK8S,OAAO0J,QAAQxc,KAAKqc,MAClC,CACIvH,UACF,OAAO9U,KAAK8S,OAAOmK,eAAejd,KAAKqc,OAASrc,KAAKuW,MACvD,CACImB,YACF,MAAO,CACL2E,MAAOrc,KAAKqc,MACZ9F,OAAQvW,KAAKuW,OACbwG,GAAI/c,KAAK+c,GAEb,CACIrF,UAAMwF,GACRjS,OAAO2B,OAAO5M,KAAMkd,EACtB,CACAC,YACEnd,KAAK8c,KAAK9G,KAAKhW,KAAK0X,MACtB,CACA0F,WACE,MAAMF,EAAIld,KAAK8c,KAAKO,MACpB,OAAIH,IAAGld,KAAK0X,MAAQwF,GACbA,CACT,CACAI,YACMtd,KAAKgd,QACLhd,KAAKqc,MAAQ,IACfrc,KAAKqc,MAAQ,EACbrc,KAAKuW,OAAS,GAEZvW,KAAKqc,OAASrc,KAAK8S,OAAO0J,QAAQ9Z,SACpC1C,KAAKqc,MAAQrc,KAAK8S,OAAO0J,QAAQ9Z,OAAS,EAC1C1C,KAAKuW,OAASvW,KAAKgd,MAAM3I,aAAa3R,QAE1C,CAEA6a,UAAUlD,GAER,IADAra,KAAKmd,YACAnd,KAAKsd,YAAa,GAAKtd,KAAKqc,QAASrc,KAAKqc,MAAOrc,KAAKuW,QAAwC,OAA7BiH,EAAcxd,KAAKgd,YAAiB,EAASQ,EAAYnJ,aAAa3R,SAAW,EAAG,CACxJ,IAAI8a,EACJ,GAAInD,IAAM,OAAOra,KAAK+c,IAAK,EAE7B,OAAO/c,KAAK+c,IAAK,CACnB,CACAU,WAAWpD,GAET,IADAra,KAAKmd,YACAnd,KAAKsd,YAAatd,KAAKqc,MAAQrc,KAAK8S,OAAO0J,QAAQ9Z,SAAU1C,KAAKqc,MAAOrc,KAAKuW,OAAS,EAC1F,GAAI8D,IAAM,OAAOra,KAAK+c,IAAK,EAE7B,OAAO/c,KAAK+c,IAAK,CACnB,CACAW,uBACE,OAAO1d,KAAKud,UAAU,KACpB,IAAIvd,KAAKgd,MAAMW,SAAY3d,KAAKgd,MAAMjb,QACtC/B,KAAKuW,OAASvW,KAAKgd,MAAMlH,gBAAgB9V,KAAKuW,OAAQhL,cAClC,IAAhBvL,KAAKuW,QAAc,OAAO,GAElC,CACAqH,sBAKE,OAAO5d,KAAKud,UAAU,KACpB,IAAIvd,KAAKgd,MAAMW,QACf,OAAA3d,KAAKuW,OAASvW,KAAKgd,MAAMlH,gBAAgB9V,KAAKuW,OAAQhL,SAC/C,GAEX,CACAsS,yBACE,OAAO7d,KAAKud,UAAU,KACpB,KAAIvd,KAAKgd,MAAMW,SAAW3d,KAAKgd,MAAMc,aAAe9d,KAAKgd,MAAMjb,OAC/D,OAAA/B,KAAKuW,OAASvW,KAAKgd,MAAMlH,gBAAgB9V,KAAKuW,OAAQhL,SAC/C,GAEX,CACAwS,wBACE,OAAO/d,KAAKyd,WAAW,KACrB,IAAIzd,KAAKgd,MAAMW,SAAY3d,KAAKgd,MAAMjb,QACtC/B,KAAKuW,OAASvW,KAAKgd,MAAMlH,gBAAgB9V,KAAKuW,OAAQhL,eAClDvL,KAAKuW,SAAWvW,KAAKgd,MAAMjb,MAAMW,QAAQ,OAAO,GAExD,CACAsb,uBACE,OAAOhe,KAAKyd,WAAW,KACrB,IAAIzd,KAAKgd,MAAMW,QAGf,OAAA3d,KAAKuW,OAASvW,KAAKgd,MAAMlH,gBAAgB9V,KAAKuW,OAAQhL,SAK/C,GAEX,CACA0S,0BACE,OAAOje,KAAKyd,WAAW,KACrB,KAAIzd,KAAKgd,MAAMW,SAAW3d,KAAKgd,MAAMc,aAAe9d,KAAKgd,MAAMjb,OAG/D,OAAA/B,KAAKuW,OAASvW,KAAKgd,MAAMlH,gBAAgB9V,KAAKuW,OAAQhL,SAC/C,GAEX,EC3HF,MAAM2S,EAaJne,YAAY4M,GACV1B,OAAO2B,OAAO5M,KAAM2M,GACpB3M,KAAKgT,OAAS,GACdhT,KAAK2d,SAAU,CACjB,CACI5b,YACF,OAAO/B,KAAKgT,MACd,CACIgB,oBACF,OAAOhU,KAAKme,YAAcne,KAAK+B,MAAQ,EACzC,CACIuU,oBACF,OAAOtW,KAAKoe,YAAcpe,KAAK+B,MAAQ,EACzC,CACIsS,mBACF,OAAOrU,KAAK+B,KACd,CACAqW,QACEpY,KAAKoe,aAAc,EACnBpe,KAAKgT,OAAS,EAChB,CACAoH,OAAOvB,EAASC,GACd,YAAgB,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKgT,OAAOtQ,QAEtB1C,KAAKgT,OAAShT,KAAKgT,OAAO9L,MAAM,EAAG2R,GAAW7Y,KAAKgT,OAAO9L,MAAM4R,GAC3D9Y,KAAKgT,SAAQhT,KAAKoe,aAAc,GAC9B,IAAIvH,CACb,CACAf,gBAAgB5I,EAAWyL,QACP,IAAdA,IACFA,EAAYpN,QAEd,MACM8S,EAASre,KAAKgT,OAAOtQ,OAC3B,OAAQiW,GACN,KAAKpN,OACL,KAAKA,aACH,OALW,EASb,QACE,OAAO8S,EAEb,CACAzF,oBAAoBC,EAASC,GAC3B,YAAgB,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKgT,OAAOtQ,QAEf1C,KAAKoe,YAActF,EAAQD,EAAU,CAC9C,CACAJ,aAAaI,EAASC,EAAOR,GAC3B,YAAgB,IAAZO,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKgT,OAAOtQ,aAER,IAAV4V,IACFA,EAAQ,CAAC,GAEJA,EAAM9B,KAAOxW,KAAKoe,aAAepe,KAAKgT,OAAO9L,MAAM2R,EAASC,IAAU,EAC/E,CACIlD,iBACF,OAAO,CACT,CACI8C,eACF,QAAe1Y,KAAKgT,MACtB,CACAmG,YAAYD,EAAIZ,QACA,IAAVA,IACFA,EAAQ,CAAC,GAEX,MAAMlC,EAAU,IAAIS,EACpB,GAAI7W,KAAK0Y,SAAU,OAAOtC,EAC1B,MAAMkI,GAA6B,IAAfte,KAAKma,OAAiC,WAAfna,KAAKma,MAE1CoE,EADWve,KAAKwe,OAAStF,IACClZ,KAAKme,aAAe7F,EAAMnI,OAASmI,EAAM9B,QAAU8B,EAAM9B,MAAQ8H,KAAiBhG,EAAM3K,KACxH,OAAI4Q,IAAYnI,EAAQY,YAAchX,KAAKwe,MAC3Cxe,KAAKgT,OAASoD,EAAQhJ,SAAWpN,KAAKwe,KACtCxe,KAAKoe,YAAcG,IAAejG,EAAM9B,KAAO8B,EAAMnI,OAC9CiG,CACT,CACAyD,eACE,OAAO7Z,KAAKmZ,YAAYnZ,KAAKwe,KAAM,CACjC7Q,MAAM,GAEV,CACA8J,qBACE,MAAMrB,EAAU,IAAIS,EACpB,OAAI7W,KAAK0Y,WACT1Y,KAAKgT,OAASoD,EAAQhJ,SAAWpN,KAAKwe,MAC/BpI,CACT,CACA2C,cACE,OAAO,IAAI3B,GAAsB,GACnC,CACA4B,WAAWrL,GACT,OAAIvD,EAASuD,KAAOA,EAAO,IAAIyJ,GAAsB9M,OAAOqD,KACrDA,EAAK4J,SAASvX,KACvB,CACAwX,OAAOnN,EAAKiO,EAAO3K,GACjB,MAAMyI,EAAUpW,KAAKmZ,YAAY9O,EAAI,GAAIiO,GACzC,OAAY,MAAR3K,IACFyI,EAAQc,WAAalX,KAAKgZ,WAAWrL,GAAMuJ,WAEtCd,CACT,CACAK,WAAY,CACRiB,YACF,MAAO,CACL1E,OAAQhT,KAAKgT,OACbmF,eAAgBnY,KAAKsW,cAEzB,CACIoB,UAAMA,GACR1X,KAAKgT,OAAS0E,EAAM1E,OACpBhT,KAAKoe,cAAsB1G,EAAMS,cACnC,iFC1IF,MAAMsG,EAiBJ1e,YAAY4M,GACV,MACEqO,SACA8C,aACAY,kBACAC,cACAC,OACAzE,SAEExN,EADCkS,KAAQ7P,KACTrC,EAAIsC,GACRjP,KAAK8S,OAAS1D,EAAWyP,GACzB5T,OAAO2B,OAAO5M,KAAM,CAClBgb,SACA8C,aACAY,kBACAC,cACAC,OACAzE,SAEJ,CACA/B,QACEpY,KAAK0Y,UAAW,EAChB1Y,KAAK8S,OAAOsF,OACd,CACAgC,OAAOvB,EAASC,GAOd,YANgB,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAK+B,MAAMW,QAEL,IAAZmW,GAAiBC,GAAS,GAC5B9Y,KAAK0Y,UAAW,EACT1Y,KAAK8S,OAAOsH,OAAOvB,EAASC,IAE9B,IAAIjC,CACb,CACI9U,YACF,OAAO/B,KAAK8S,OAAO/Q,QAAU/B,KAAK0Y,WAAa1Y,KAAK8d,WAAa9d,KAAK0e,gBAAkB,GAC1F,CACI1K,oBACF,OAAOhU,KAAK8S,OAAOkB,aACrB,CACIsC,oBACF,OAAOtW,KAAK8S,OAAOwD,aACrB,CACIjC,mBACF,OAAOrU,KAAK8S,OAAO/Q,OAAS/B,KAAK2e,aAAe3e,KAAK+B,KACvD,CACI6T,iBACF,QAAe5V,KAAK8S,OAAO/Q,OAAU/B,KAAK8d,UAC5C,CACA3E,YAAYD,EAAIZ,GAId,QAHc,IAAVA,IACFA,EAAQ,CAAC,GAEPtY,KAAK0Y,SAAU,OAAO,IAAI7B,EAC9B,MAAMa,EAAQ1X,KAAK8S,OAAO4E,MAEpBtB,EAAUpW,KAAK8S,OAAOqG,YAAYD,EAAIlZ,KAAK8e,iBAAiBxG,IAClE,OAAIlC,EAAQhJ,WAAuC,IAA3BpN,KAAKyZ,WAAWnB,KACtClC,EAAQhJ,SAAWgJ,EAAQY,YAAc,GACzChX,KAAK8S,OAAO4E,MAAQA,IAEjBtB,EAAQhJ,WAAapN,KAAK8d,aAAe9d,KAAK4e,OAAStG,EAAMnI,QAChEiG,EAAQhJ,SAAWpN,KAAK0e,iBAE1BtI,EAAQa,MAAQb,EAAQhJ,WAAapN,KAAK8d,WAC1C9d,KAAK0Y,WAAmBtC,EAAQhJ,SACzBgJ,CACT,CACAoB,OAAOnN,EAAKiO,EAAO3K,GAEjB,OAAO3N,KAAK8S,OAAO0E,OAAOnN,EAAKrK,KAAK8e,iBAAiBxG,GAAQ3K,EAC/D,CACA8J,qBACE,MAAMrB,EAAU,IAAIS,EACpB,OAAI7W,KAAK0Y,UAAY1Y,KAAK8d,aAC1B9d,KAAK0Y,UAAW,EAChBtC,EAAQhJ,SAAWpN,KAAK0e,iBACjBtI,CACT,CACAyD,eACE,OAAO,IAAIhD,CACb,CACAkC,YAAYF,EAASC,GACnB,OAAO9Y,KAAK8S,OAAOiG,YAAYF,EAASC,EAC1C,CACAE,WAAWrL,GACT,OAAO3N,KAAK8S,OAAOkG,WAAWrL,EAChC,CACA8K,aAAaI,EAASC,EAAOR,GAC3B,YAAgB,IAAZO,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAK+B,MAAMW,QAEd1C,KAAK8S,OAAO2F,aAAaI,EAASC,EAAOR,EAClD,CACAxC,gBAAgB5I,EAAWyL,QACP,IAAdA,IACFA,EAAYpN,QAEd,MACM8S,EAASre,KAAK+B,MAAMW,OACpBqc,EAAWtX,KAAKwF,IAAIxF,KAAK8F,IAAIL,EAFpB,GAEwCmR,GACvD,OAAQ1F,GACN,KAAKpN,OACL,KAAKA,aACH,OAAOvL,KAAK4V,WAAamJ,EANd,EAOb,KAAKxT,QACL,KAAKA,cACH,OAAOvL,KAAK4V,WAAamJ,EAAWV,EAEtC,QACE,OAAOU,EAEb,CACAnG,oBAAoBC,EAASC,GAC3B,YAAgB,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAK+B,MAAMW,QAEd1C,KAAK+B,MAAMmF,MAAM2R,EAASC,GAAOpW,MAC1C,CACA+W,WAAWnB,GACT,OAAOtY,KAAK8S,OAAO2G,WAAWzZ,KAAK8e,iBAAiBxG,OAAatY,KAAKgb,QAAUhb,KAAKgb,OAAOvB,WAAWzZ,KAAK8e,iBAAiBxG,IAC/H,CACA7B,WACEzW,KAAK8S,OAAO2D,UACd,CACIiB,YACF,MAAO,CACL1E,OAAQhT,KAAK+B,MACboW,eAAgBnY,KAAKsW,cACrBxD,OAAQ9S,KAAK8S,OAAO4E,MACpBgB,SAAU1Y,KAAK0Y,SAEnB,CACIhB,UAAMA,GACR1X,KAAK8S,OAAO4E,MAAQA,EAAM5E,OAC1B9S,KAAK0Y,SAAWhB,EAAMgB,QACxB,CACAoG,iBAAiBxG,GACf,IAAI0G,EACJ,SAAA7P,aAAA,GACKmJ,GAAK,IACRwB,kBAA4B,MAATxB,GAAqE,OAAnD0G,EAAwB1G,EAAMwB,uBAA4B,EAASkF,EAAsBlM,UAAqB,MAATwF,OAAgB,EAASA,EAAMwB,mBAE7K,EAEF2E,EAAuBQ,oBAAsB,CAC3C,EAAK,KACLrT,EAAK,snIAEL,IAAK,KC3JPiC,EAAMM,aAlBN,MAAMA,WAAqBM,EASzBsF,cAAcpH,GACZnI,MAAMuP,cAAcpH,EACtB,CACAoL,QAAQpL,GACN,MAAMsB,EAAOtB,EAAKsB,KACdA,IAAMtB,EAAKoO,SAAWhZ,GAASA,EAAMmd,OAAOjR,IAAS,GACzDzJ,MAAMuT,QAAQpL,EAChB,sCCVF,MAAMyB,UAAsBK,EAiB1B1O,YAAY4M,GACVnI,OAAA,EAAK2K,qBAAA,GACAf,EAAc4J,UACdrL,GAAI,IACPwS,YAAalU,OAAO2B,OAAO,CAAC,EAAG6R,EAAuBQ,oBAA6B,MAARtS,OAAe,EAASA,EAAKwS,eAE5G,CACApL,cAAcpH,GACZnI,MAAMuP,cAAcpH,EACtB,CACAoL,QAAQpL,GACNA,EAAKwS,YAAclU,OAAO2B,OAAO,CAAC,EAAG5M,KAAKmf,YAAaxS,EAAKwS,aAC5D3a,MAAMuT,QAAQpL,GACd3M,KAAKof,cACP,CACAA,eACE,MAAMC,EAAOrf,KAAKmf,YAClBnf,KAAKwc,QAAU,GACfxc,KAAKsf,iBAAc9D,EACnBxb,KAAKsc,OAAS,GACdtc,KAAKuf,cAAgB,CAAC,EACtB,MAAMC,EAAUxf,KAAKiO,KACrB,IAAKuR,IAAYH,EAAM,OACvB,IAAII,GAAiB,EACjBC,GAAgB,EACpB,QAAS3T,EAAI,EAAGA,EAAIyT,EAAQ9c,SAAUqJ,EAAG,CACvC,GAAI/L,KAAK2f,OAAQ,CACf,MAAMC,EAAIJ,EAAQtY,MAAM6E,GAClB8T,GAAS5U,OAAON,KAAK3K,KAAK2f,QAAQG,OAAOC,IAA8B,IAArBH,EAAEzY,QAAQ4Y,KAElEF,GAAOG,KAAK,CAACpU,GAAGD,KAAMA,GAAEjJ,OAASkJ,GAAElJ,QAEnC,MAAMqd,EAAQF,GAAO,GACrB,GAAIE,EAAO,CACT,MAAAE,GAGInR,GAAc9O,KAAK2f,OAAOI,KAF5BG,WAEDD,GADIE,MAASnR,KAAAiR,GAAAhR,IAERmR,GAAchR,KAAUD,aAAA,CAC5ByP,KAAM5e,KAAK4e,KACXzE,MAAOna,KAAKma,MACZuE,gBAAiB1e,KAAK0e,gBACtBC,YAAa3e,KAAK2e,YAClBhF,UAAW3Z,KAAK2Z,WACbwG,IAAS,IACZnF,OAAQhb,QAENogB,KACFpgB,KAAKwc,QAAQxG,KAAKoK,IACdF,KAAQlgB,KAAKsf,YAAcc,IAG1BpgB,KAAKuf,cAAcQ,KAAQ/f,KAAKuf,cAAcQ,GAAS,IAC5D/f,KAAKuf,cAAcQ,GAAO/J,KAAKhW,KAAKwc,QAAQ9Z,OAAS,IAEvDqJ,GAAKgU,EAAMrd,OAAS,EACpB,UAGJ,IAAI8b,EAAOgB,EAAQzT,GACfsU,EAAW7B,KAAQa,EACvB,GAAIb,IAASpQ,EAAckS,UAAW,CACpCtgB,KAAKsc,OAAOtG,KAAKhW,KAAKwc,QAAQ9Z,QAC9B,SAEF,GAAa,MAAT8b,GAAyB,MAATA,EAAc,CAChCiB,GAAkBA,EAClB,SAEF,GAAa,MAATjB,GAAyB,MAATA,EAAc,CAChCkB,GAAiBA,EACjB,SAEF,GAAIlB,IAASpQ,EAAcmS,YAAa,CAGtC,KAFExU,EACFyS,EAAOgB,EAAQzT,IACVyS,EAAM,MACX6B,GAAU,EAEZ,MAAMG,EAAMH,EAAU,IAAI5B,KAAsBtP,aAAA,CAC9C2O,WAAY4B,EACZd,KAAM5e,KAAK4e,KACXzE,MAAOna,KAAKma,MACZuE,gBAAiB1e,KAAK0e,gBACtBC,YAAa3e,KAAK2e,aACf7P,GAAcuQ,EAAKb,KAAM,IAC5BxD,OAAQhb,QACL,IAAIke,EAAuB,CAC9BM,OACArE,MAAOna,KAAKma,MACZgE,YAAasB,IAEfzf,KAAKwc,QAAQxG,KAAKwK,EAAG,CAEzB,CACI9I,YACF,SAAAvI,aAAA,GACK3K,MAAMkT,OAAK,IACd8E,QAASxc,KAAKwc,QAAQb,IAAIhQ,GAAKA,EAAE+L,QAErC,CACIA,UAAMA,GACR,MACE8E,WAEE9E,EADC+I,KAAWzR,KACZ0I,EAAKgJ,IACT1gB,KAAKwc,QAAQ1L,QAAQ,CAACnF,EAAGgV,IAAOhV,EAAE+L,MAAQ8E,EAAQmE,IAClDnc,MAAMkT,MAAQ+I,CAChB,CACArI,QACE5T,MAAM4T,QACNpY,KAAKwc,QAAQ1L,QAAQnF,GAAKA,EAAEyM,QAC9B,CACIxC,iBACF,OAAO5V,KAAKsf,YAActf,KAAKsf,YAAY1J,WAAa5V,KAAKwc,QAAQoE,MAAMjV,GAAKA,EAAEiK,WACpF,CACI8C,eACF,OAAO1Y,KAAKwc,QAAQoE,MAAMjV,GAAKA,EAAE+M,SACnC,CACIiF,cACF,OAAO3d,KAAKwc,QAAQoE,MAAMjV,GAAKA,EAAEgS,QACnC,CACIG,iBACF,OAAO9d,KAAKwc,QAAQoE,MAAMjV,GAAKA,EAAEmS,WACnC,CACArH,WACEzW,KAAKwc,QAAQ1L,QAAQnF,GAAKA,EAAE8K,YAC5BjS,MAAMiS,UACR,CACIzC,oBACF,OAAOhU,KAAKsf,YAActf,KAAKsf,YAAYtL,cAAgBhU,KAAKwc,QAAQrR,OAAO,CAACd,EAAKsB,IAAMtB,EAAOsB,EAAEqI,cAAe,GACrH,CACIA,kBAAcA,GAChB,GAAIhU,KAAKsf,YAAa,CACpB,MAAM3R,EAAO3N,KAAK+Y,YAAY/Y,KAAKid,eAAejd,KAAKwc,QAAQrV,QAAQnH,KAAKsf,cAAgBtf,KAAKsf,YAAYjL,aAAa3R,QAC1H1C,KAAKsf,YAAYtL,cAAgBA,EACjChU,KAAKgZ,WAAWrL,GAChB3N,KAAKyW,UAAS,MACTjS,MAAMwP,cAAgBA,CAC/B,CACIjS,YACF,OAAO/B,KAAKsf,YAActf,KAAKsf,YAAYvd,MAE3C/B,KAAKwc,QAAQrR,OAAO,CAACd,EAAKsB,IAAMtB,EAAOsB,EAAE5J,MAAO,GAClD,CACIA,UAAMA,GACR,GAAI/B,KAAKsf,YAAa,CACpB,MAAM3R,EAAO3N,KAAK+Y,YAAY/Y,KAAKid,eAAejd,KAAKwc,QAAQrV,QAAQnH,KAAKsf,cAAgBtf,KAAKsf,YAAYjL,aAAa3R,QAC1H1C,KAAKsf,YAAYvd,MAAQA,EACzB/B,KAAKgZ,WAAWrL,GAChB3N,KAAKyW,UAAS,MACTjS,MAAMzC,MAAQA,CACvB,CACImS,iBACF,OAAOlU,KAAKsf,YAActf,KAAKsf,YAAYpL,WAAa1P,MAAM0P,UAChE,CACIA,eAAWnS,GACb,GAAI/B,KAAKsf,YAAa,CACpB,MAAM3R,EAAO3N,KAAK+Y,YAAY/Y,KAAKid,eAAejd,KAAKwc,QAAQrV,QAAQnH,KAAKsf,cAAgBtf,KAAKsf,YAAYjL,aAAa3R,QAC1H1C,KAAKsf,YAAYpL,WAAanS,EAC9B/B,KAAKgZ,WAAWrL,GAChB3N,KAAKyW,UAAS,MACTjS,MAAM0P,WAAanS,CAC5B,CACIsS,mBACF,OAAOrU,KAAKwc,QAAQrR,OAAO,CAACd,EAAKsB,IAAMtB,EAAOsB,EAAE0I,aAAc,GAChE,CACA2E,WAAWrL,GACT,OAAOnJ,MAAMwU,WAAWrL,GAAMwJ,UAAUnX,KAAKyX,qBAC/C,CACAoC,eACE,IAAIgH,EACJ,MAAMzK,EAAU,IAAIS,EACpB,IAAIiK,EAA4F,OAAzED,EAAuB7gB,KAAKmc,eAAenc,KAAKqU,aAAa3R,cAAmB,EAASme,EAAqBxE,MACrI,GAAuB,MAAnByE,EAAyB,OAAO1K,EAGhCpW,KAAKwc,QAAQsE,GAAiBpI,YAAYoI,EAC9C,QAASH,EAAKG,EAAiBH,EAAK3gB,KAAKwc,QAAQ9Z,SAAUie,EAAI,CAC7D,MAAM1G,EAAIja,KAAKwc,QAAQmE,GAAI9G,eAC3B,IAAKI,EAAE7M,SAAU,MACjBgJ,EAAQe,UAAU8C,EAAC,CAErB,OAAO7D,CACT,CACA6C,eAAeC,EAAIZ,QACH,IAAVA,IACFA,EAAQ,CAAC,GAEX,MAAMyI,EAAY/gB,KAAKmc,eAAenc,KAAKqU,aAAa3R,QAClD0T,EAAU,IAAIS,EACpB,IAAKkK,EAAW,OAAO3K,EACvB,QAASuK,EAAKI,EAAU1E,SAAUsE,EAAI,CACpC,IAAI3B,EACJ,MAAMhC,EAAQhd,KAAKwc,QAAQmE,GAC3B,IAAK3D,EAAO,MACZ,MAAMgE,EAAehE,EAAM7D,YAAYD,KAAE/J,aAAA,GACpCmJ,GAAK,IACRwB,iBAAsE,OAAnDkF,EAAwB1G,EAAMwB,mBAAwF,OAA1DkF,EAAwBA,EAAsBxC,cAAmB,EAASwC,EAAsB2B,MAE3K1J,EAAO+J,EAAa/J,KAE1B,GADAb,EAAQe,UAAU6J,GACd/J,GAAQ+J,EAAahK,YAAa,MAGxC,OAAOZ,CACT,CACA2C,YAAYF,EAASC,QACH,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,QAE5B,MAAMue,EAAY,IAAIxF,GACtB,OAAI5C,IAAYC,GAChB9Y,KAAKkhB,sBAAsBrI,EAASC,EAAO,CAACnN,EAAGgV,EAAIQ,EAAUC,KAC3D,MAAMC,EAAa1V,EAAEoN,YAAYoI,EAAUC,GAC3CC,EAAWhK,KAAOrX,KAAKshB,gBAAgBX,GACvCU,EAAWra,KAAOhH,KAAKid,eAAe0D,GAClCU,aAAsB5F,KAAmB4F,EAAWrF,WAAa2E,GACrEM,EAAU3J,OAAO+J,EAAU,GAEtBJ,CACT,CACAxI,aAAaI,EAASC,EAAOR,GAU3B,QATgB,IAAZO,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,aAEd,IAAV4V,IACFA,EAAQ,CAAC,GAEPO,IAAYC,EAAO,MAAO,GAC9B,IAAI3I,EAAQ,GACZ,OAAAnQ,KAAKkhB,sBAAsBrI,EAASC,EAAO,CAACnN,EAAGb,EAAG+N,EAASC,KACzD3I,GAASxE,EAAE8M,aAAaI,EAASC,EAAOR,EAAK,GAExCnI,CACT,CACAmR,gBAAgBtF,GACd,IAAIuF,EACJ,QAAS1Z,EAAK,EAAGA,EAAK7H,KAAKsc,OAAO5Z,SAAUmF,EAAI,CAC9C,MAAMwP,EAAOrX,KAAKsc,OAAOzU,GACzB,KAAIwP,GAAQ2E,GAAmC,MAAvBuF,EAAalK,CAAU,CAEjD,OAAOkK,CACT,CAGA9J,mBAAmB+J,GACjB,MAAMpL,EAAU,IAAIS,EACpB,GAAI7W,KAAK4e,MAAwB,MAAhB4C,EAAsB,OAAOpL,EAC9C,MAAMqL,EAAiBzhB,KAAKmc,eAAenc,KAAKqU,aAAa3R,QAC7D,IAAK+e,EAAgB,OAAOrL,EAC5B,MAAM0K,EAAkBW,EAAepF,MACjCqF,EAAgC,MAAhBF,EAAuBA,EAAexhB,KAAKwc,QAAQ9Z,OACzE,OAAA1C,KAAKwc,QAAQtV,MAAM4Z,EAAiBY,GAAe5Q,QAAQnF,IACzD,IAAKA,EAAEiT,MAAwB,MAAhB4C,EAAsB,CACnC,IAAIG,EACJ,MAAMC,EAAWjW,EAAE8L,mBAA6C,OAAzBkK,EAAWhW,EAAE6Q,cAAmB,EAASmF,EAASjf,QACzF1C,KAAKgT,QAAU4O,EAASxU,SACxBgJ,EAAQe,UAAUyK,EAAQ,IAGvBxL,CACT,CAGA+F,eAAerH,GACb,IAAI+M,EAAS,GACb,QAASlB,EAAK,EAAGA,EAAK3gB,KAAKwc,QAAQ9Z,SAAUie,EAAI,CAC/C,MAAM3D,EAAQhd,KAAKwc,QAAQmE,GACrBmB,EAAgBD,EAAOnf,OAE7B,GADAmf,GAAU7E,EAAM3I,aACZS,GAAO+M,EAAOnf,OAChB,MAAO,CACL2Z,MAAOsE,EACPpK,OAAQzB,EAAMgN,EAChB,CAGN,CACA7E,eAAejB,GACb,OAAOhc,KAAKwc,QAAQtV,MAAM,EAAG8U,GAAY7Q,OAAO,CAAC2J,EAAKnJ,IAAMmJ,EAAOnJ,EAAE0I,aAAa3R,OAAQ,EAC5F,CACAwe,sBAAsBrI,EAASC,EAAOuB,QACtB,IAAVvB,IACFA,EAAQ9Y,KAAKqU,aAAa3R,QAE5B,MAAMqf,EAAgB/hB,KAAKmc,eAAetD,GAC1C,GAAIkJ,EAAe,CACjB,MAAMC,EAAchiB,KAAKmc,eAAerD,GAElCmJ,EAAcD,GAAeD,EAAc1F,QAAU2F,EAAY3F,MACjE6F,EAAoBH,EAAcxL,OAClC4L,EAAkBH,GAAeC,EAAcD,EAAYzL,OAASvW,KAAKwc,QAAQuF,EAAc1F,OAAOhI,aAAa3R,OAEzH,GADA2X,EAAGra,KAAKwc,QAAQuF,EAAc1F,OAAQ0F,EAAc1F,MAAO6F,EAAmBC,GAC1EH,IAAgBC,EAAa,CAE/B,QAAStB,EAAKoB,EAAc1F,MAAQ,EAAGsE,EAAKqB,EAAY3F,QAASsE,EAC/DtG,EAAGra,KAAKwc,QAAQmE,GAAKA,EAAI,EAAG3gB,KAAKwc,QAAQmE,GAAItM,aAAa3R,QAI5D2X,EAAGra,KAAKwc,QAAQwF,EAAY3F,OAAQ2F,EAAY3F,MAAO,EAAG2F,EAAYzL,OAAM,EAGlF,CACA6D,OAAOvB,EAASC,QACE,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,QAE5B,MAAM0f,EAAgB5d,MAAM4V,OAAOvB,EAASC,GAC5C,OAAA9Y,KAAKkhB,sBAAsBrI,EAASC,EAAO,CAACnN,EAAGb,EAAGqW,EAAUC,KAC1DgB,EAAcjL,UAAUxL,EAAEyO,OAAO+G,EAAUC,GAAO,GAE7CgB,CACT,CACAtM,gBAAgB5I,EAAWyL,GAIzB,QAHkB,IAAdA,IACFA,EAAYpN,SAETvL,KAAKwc,QAAQ9Z,OAAQ,OAAO,EACjC,MAAM2f,EAAS,IAAIxF,EAAc7c,KAAMkN,GACvC,GAAIyL,IAAcpN,OAMhB,OAFI8W,EAAOrE,yBACXqE,EAAOjF,WACHiF,EAAOzE,uBAA8ByE,EAAOvN,IACzC9U,KAAKqU,aAAa3R,OAI3B,GAAIiW,IAAcpN,QAAkBoN,IAAcpN,aAAsB,CAEtE,GAAIoN,IAAcpN,OAAgB,CAEhC,GADA8W,EAAOtE,wBACHsE,EAAOtF,IAAMsF,EAAOvN,MAAQ5H,EAAW,OAAOA,EAClDmV,EAAOjF,UAAS,CASlB,GALAiF,EAAOzE,sBACPyE,EAAOxE,yBACPwE,EAAO3E,uBAGH/E,IAAcpN,OAAgB,CAKhC,GAJA8W,EAAOrE,uBACPqE,EAAOpE,0BACHoE,EAAOtF,IAAMsF,EAAOvN,KAAO5H,IAC/BmV,EAAOjF,WACHiF,EAAOtF,IAAMsF,EAAOvN,KAAO5H,GAAW,OAAOmV,EAAOvN,IACxDuN,EAAOjF,UAAS,CAElB,OAAIiF,EAAOtF,GAAWsF,EAAOvN,IACzB6D,IAAcpN,aAA6B,GAC/C8W,EAAOjF,WACHiF,EAAOtF,KACXsF,EAAOjF,WACHiF,EAAOtF,IAAWsF,EAAOvN,IACtB,GAET,OAAI6D,IAAcpN,SAAmBoN,IAAcpN,eAEjD8W,EAAOrE,uBACPqE,EAAOpE,0BACHoE,EAAOtE,wBAAgCsE,EAAOvN,IAC9C6D,IAAcpN,cAA8BvL,KAAKqU,aAAa3R,QAGlE2f,EAAOjF,WACHiF,EAAOtF,KACXsF,EAAOjF,WACHiF,EAAOtF,IAAWsF,EAAOvN,IACtB9U,KAAK8V,gBAAgB5I,EAAW3B,UAElC2B,CACT,CACA0L,oBAAoBC,EAASC,QACX,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,QAE5B,IAAI4f,EAAQ,EACZ,OAAAtiB,KAAKkhB,sBAAsBrI,EAASC,EAAO,CAACnN,EAAGb,EAAGqW,EAAUC,KAC1DkB,GAAS3W,EAAEiN,oBAAoBuI,EAAUC,EAAM,GAE1CkB,CACT,CAGAlC,YAAYpc,GACV,OAAOhE,KAAKuiB,aAAave,GAAM,EACjC,CAGAue,aAAave,GACX,MAAMwe,EAAUxiB,KAAKuf,cAAcvb,GACnC,OAAKwe,EACEA,EAAQ7G,IAAI8G,GAAMziB,KAAKwc,QAAQiG,IADjB,EAEvB,EAEFrU,EAAc4J,SAAW,CACvB4G,MAAM,EACNF,gBAAiB,KAEnBtQ,EAAckS,UAAY,IAC1BlS,EAAcmS,YAAc,KAC5BnS,EAAcsU,gBAAkBjE,EAChCrQ,EAAcuU,gBAAkBzE,EAChCrQ,EAAMO,cAAgBA,+CCrbtB,MAAMwU,UAAoBxU,EAYpByU,iBACF,OAAO7iB,KAAK8iB,UAAYxY,OAAOtK,KAAKgH,MAAMtE,MAC5C,CACA3C,YAAY4M,GACVnI,MAAMmI,EACR,CAEAoH,cAAcpH,GACZnI,MAAMuP,cAAcpH,EACtB,CACAoL,QAAQpL,GACN,MACEoW,KAAK/iB,KAAK+iB,IAAM,EAChB/b,OAAOhH,KAAKgH,MAAQ,EACpB8b,YAAY9iB,KAAK8iB,WAAa,EAC9BE,UAAUhjB,KAAKgjB,SAEbrW,EADCsW,KAAWjU,KACZrC,EAAIsC,IACRjP,KAAK+iB,GAAKA,EACV/iB,KAAKgH,KAAOA,EACZhH,KAAK8iB,UAAYrb,KAAK8F,IAAIjD,OAAOyY,GAAIrgB,OAAQogB,GAC7C9iB,KAAKgjB,QAAUA,EACf,MAAME,EAAU5Y,OAAOtK,KAAKgH,MAAMmc,SAASnjB,KAAK8iB,UAAW,KACrDM,EAAQ9Y,OAAOtK,KAAK+iB,IAAII,SAASnjB,KAAK8iB,UAAW,KACvD,IAAIO,EAAiB,EACrB,KAAOA,EAAiBD,EAAM1gB,QAAU0gB,EAAMC,KAAoBH,EAAQG,MAAmBA,EAC7FJ,EAAYhV,KAAOmV,EAAMlc,MAAM,EAAGmc,GAAgB5X,QAAQ,KAAM,OAAS,IAAI6X,OAAOtjB,KAAK8iB,UAAYO,GACrG7e,MAAMuT,QAAQkL,EAChB,CACIrN,iBACF,OAAOpR,MAAMoR,cAAsB5V,KAAK+B,KAC1C,CACAwhB,WAAWlZ,GACT,IAAImZ,EAAS,GACTC,EAAS,GACb,MAAM,CAAGvhB,EAAawhB,GAAOrZ,EAAIsZ,MAAM,qBAAuB,GAC9D,OAAID,IACFF,EAAS,IAAIF,OAAOphB,EAAYQ,QAAUghB,EAC1CD,EAAS,IAAIH,OAAOphB,EAAYQ,QAAUghB,GAE5CF,EAASA,EAAOI,OAAO5jB,KAAK8iB,UAAW,KACvCW,EAASA,EAAOG,OAAO5jB,KAAK8iB,UAAW,KAChC,CAACU,EAAQC,EAClB,CACAnK,cAAcJ,EAAIZ,GAIhB,IAAIlC,EAEJ,QALc,IAAVkC,IACFA,EAAQ,CAAC,IAGVY,EAAI9C,GAAW5R,MAAM8U,cAAcJ,EAAGzN,QAAQ,MAAO,IAAK6M,IACtDtY,KAAKgjB,UAAY9J,EAAI,MAAO,CAACA,EAAI9C,GACtC,MAAM8M,EAAU5Y,OAAOtK,KAAKgH,MAAMmc,SAASnjB,KAAK8iB,UAAW,KACrDM,EAAQ9Y,OAAOtK,KAAK+iB,IAAII,SAASnjB,KAAK8iB,UAAW,KACjDe,EAAU7jB,KAAK+B,MAAQmX,EAC7B,GAAI2K,EAAQnhB,OAAS1C,KAAK8iB,UAAW,MAAO,CAAC,GAAI1M,GACjD,MAAOoN,EAAQC,GAAUzjB,KAAKujB,WAAWM,GACzC,OAAIvV,OAAOmV,GAAUzjB,KAAKgH,KAAa,CAACkc,EAAQW,EAAQnhB,OAAS,GAAI0T,GACjE9H,OAAOkV,GAAUxjB,KAAK+iB,GACH,QAAjB/iB,KAAKgjB,SAAqBa,EAAQnhB,OAAS1C,KAAK8iB,UAC3C,CAAC,GAAI1M,EAAQe,UAAUnX,KAAKwX,OAAO0L,EAAQW,EAAQnhB,OAAS,GAAKwW,EAAIZ,KAEvE,CAAC8K,EAAMS,EAAQnhB,OAAS,GAAI0T,GAE9B,CAAC8C,EAAI9C,EACd,CACAqD,WAAWnB,GACT,MAAMjO,EAAMrK,KAAK+B,MAEjB,IAAqB,IADAsI,EAAI6U,OAAO,SACL7U,EAAI3H,QAAU1C,KAAK6iB,WAAY,OAAO,EACjE,MAAOW,EAAQC,GAAUzjB,KAAKujB,WAAWlZ,GACzC,OAAOrK,KAAKgH,MAAQsH,OAAOmV,IAAWnV,OAAOkV,IAAWxjB,KAAK+iB,IAAMve,MAAMiV,WAAWnB,EACtF,EAEFzK,EAAM+U,YAAcA,4DCpFpB,MAAMvU,UAAmBD,EAavBrO,YAAY4M,GACV,MAAAmX,KAAA3U,aAAA,GAKKd,EAAW2J,UACXrL,IALHsB,OACAuR,WAEDsE,EADIb,KAAWjU,KAAA8U,EAAA7U,IAKhBzK,OAAA,EAAK2K,aAAA,GACA8T,GAAW,IACdhV,KAAM7D,EAAS6D,GAAQA,EAAOuR,IAElC,CACAzL,cAAcpH,GACZnI,MAAMuP,cAAcpH,EACtB,CACAoL,QAAQpL,GACN,MAAAoX,KAAA5U,aAAA,GAMKd,EAAW2J,UACXrL,IANHsB,OACAuR,UACAG,UAEDoE,EADId,KAAWjU,KAAA+U,EAAArD,GAKVsD,EAAgB/Y,OAAO2B,OAAO,CAAC,EAAGyB,EAAW4V,sBAE/CtX,EAAKM,MAAK+W,EAAcE,EAAEld,KAAO2F,EAAKM,IAAIkX,eAC1CxX,EAAKY,MAAKyW,EAAcE,EAAEnB,GAAKpW,EAAKY,IAAI4W,eACxCxX,EAAKM,KAAON,EAAKY,KAAOyW,EAAcE,EAAEld,OAASgd,EAAcE,EAAEnB,KACnEiB,EAAcI,EAAEpd,KAAO2F,EAAKM,IAAIoX,WAAa,EAC7CL,EAAcI,EAAErB,GAAKpW,EAAKY,IAAI8W,WAAa,EACvCL,EAAcI,EAAEpd,OAASgd,EAAcI,EAAErB,KAC3CiB,EAAc/J,EAAEjT,KAAO2F,EAAKM,IAAIqX,UAChCN,EAAc/J,EAAE8I,GAAKpW,EAAKY,IAAI+W,YAGlCrZ,OAAO2B,OAAOoX,EAAehkB,KAAK2f,OAAQA,GAG1C1U,OAAON,KAAKqZ,GAAelT,QAAQyT,IACjC,MAAM5Y,EAAIqY,EAAcO,KAClB,YAAa5Y,IAAM,YAAagB,IAAMhB,EAAEqX,QAAUrW,EAAKqW,WAE/Dxe,MAAMuT,WAAO5I,aAAA,GACR8T,GAAW,IACdhV,KAAM7D,EAAS6D,GAAQA,EAAOuR,EAC9BG,OAAQqE,IAEZ,CACAvK,WAAWnB,GACT,MAAMkM,EAAOxkB,KAAKwkB,KAClB,OAAOhgB,MAAMiV,WAAWnB,MAAYtY,KAAK4V,YAAc5V,KAAKykB,YAAYzkB,KAAK+B,QAAkB,MAARyiB,IAA6B,MAAZxkB,KAAKiN,KAAejN,KAAKiN,KAAOuX,KAAsB,MAAZxkB,KAAKuN,KAAeiX,GAAQxkB,KAAKuN,KACrL,CAGAkX,YAAYpa,GACV,OAAOrK,KAAKwY,OAAOxY,KAAKuY,MAAMlO,EAAKrK,MAAOA,MAAMmH,QAAQkD,IAAQ,CAClE,CAGIma,WACF,OAAOxkB,KAAKkU,UACd,CACIsQ,SAAKA,GACPxkB,KAAKkU,WAAasQ,CACpB,CACItQ,iBACF,OAAOlU,KAAK4V,WAAapR,MAAM0P,WAAa,IAC9C,CACIA,eAAWnS,GACbyC,MAAM0P,WAAanS,CACrB,CACA8R,WAAW5F,GACT,OAAOA,IAAShC,MAAQzH,MAAMqP,WAAW5F,EAC3C,EAEFI,EAAW4V,mBAAqB,MAC9BhK,EAAG,CACDhM,KAAM2U,EACN5b,KAAM,EACN+b,GAAI,GACJD,UAAW,GAEbsB,EAAG,CACDnW,KAAM2U,EACN5b,KAAM,EACN+b,GAAI,GACJD,UAAW,GAEboB,EAAG,CACDjW,KAAM2U,EACN5b,KAAM,KACN+b,GAAI,QAGR1U,EAAW2J,SAAW,CACpB/J,KAAMhC,KACNuT,QAAS,cACThH,OAAQA,CAACgM,EAAM1R,KACb,IAAK0R,EAAM,MAAO,GAIlB,MAAO,CAHKla,OAAOka,EAAKF,WAAWnB,SAAS,EAAG,KACjC7Y,OAAOka,EAAKH,WAAa,GAAGlB,SAAS,EAAG,KACzCqB,EAAKL,eACQphB,KAAK,IAAG,EAEpCwV,MAAOA,CAAClO,EAAKyI,KACX,MAAO4R,EAAKC,EAAOC,GAAQva,EAAIwa,MAAM,KAAKlJ,IAAIrN,QAC9C,OAAO,IAAIrC,KAAK2Y,EAAMD,EAAQ,EAAGD,EAAG,GAGxC7W,EAAMQ,WAAaA,qFCrInB,MAAMG,UAAsBC,EAS1B1O,YAAY4M,GACVnI,OAAA,EAAK2K,aAAA,GACAX,EAAcwJ,UACdrL,IAEL3M,KAAK8kB,iBAActJ,CACrB,CACAzH,cAAcpH,GACZnI,MAAMuP,cAAcpH,EACtB,CACAoL,QAAQpL,GACNnI,MAAMuT,QAAQpL,GACV,SAAUA,IACZ3M,KAAK+kB,gBAAavJ,EAElBxb,KAAKglB,cAAgBpa,MAAMC,QAAQ8B,EAAKsB,MAAQtB,EAAKsB,KAAK0N,IAAIyI,IAC5D,MAAAnE,EAGInR,GAAcsV,IAFhBlE,UAEDD,EADIpB,KAAQ7P,KAAAiR,EAAAhR,IAEP6D,EAAS1D,KAAUD,KAAA,CACvBwK,UAAW3Z,KAAKilB,WAChB9K,MAAOna,KAAKklB,OACZvK,YAAa3a,KAAKmlB,cACftG,IAEL,OAAIqB,IAAQlgB,KAAK+kB,WAAajS,GACvBA,IACJ,GAIT,CAEAmG,eAAeC,EAAIZ,QACH,IAAVA,IACFA,EAAQ,CAAC,GAEX,MAAMlC,EAAUpW,KAAKolB,eAAelM,EAAIZ,GACxC,OAAItY,KAAK8kB,aACP1O,EAAQe,UAAUnX,KAAK8kB,YAAY3L,YAAYD,EAAIlZ,KAAK8e,iBAAiBxG,KAEpElC,CACT,CACAgP,eAAe5L,EAAUlB,EAAO3K,QACb,IAAb6L,IACFA,EAAW,SAEC,IAAVlB,IACFA,EAAQ,CAAC,QAEE,IAAT3K,IACFA,EAAO,IAET,MAAM0X,EAAsB/M,EAAM3K,MAAkC,MAA1B2K,EAAMwB,iBAA2BxB,EAAMwB,iBAAiB9G,OAAShT,KAAK+B,MAC1GujB,EAAatlB,KAAKsW,cAClBiP,EAAcjN,EAAM3K,MAAkC,MAA1B2K,EAAMwB,iBAA2BxB,EAAMwB,iBAAiB3B,eAAiBmN,EACrGE,EAAYF,EAAWpe,MAAMqe,EAAY7iB,QACzC+iB,EAAWzlB,KAAK8kB,YAChB1O,EAAU,IAAIS,EACd6O,GAA4B,MAAZD,OAAmB,EAASA,EAAS/N,MAQ3D,GALA1X,KAAK8kB,YAAc9kB,KAAK2lB,WAAWnM,KAAQrK,KAAA,GACtCmJ,GACF3K,GAGC3N,KAAK8kB,YACP,GAAI9kB,KAAK8kB,cAAgBW,EAAU,CAGjC,GADAzlB,KAAK8kB,YAAY1M,QACbmN,EAAa,CACf,MAAMtL,EAAIja,KAAK8kB,YAAYtN,OAAO+N,EAAa,CAC7C/O,KAAK,IAEPJ,EAAQc,UAAY+C,EAAE7M,SAAS1K,OAAS2iB,EAAoB3iB,OAE1D8iB,IACFpP,EAAQc,WAAalX,KAAK8kB,YAAYtN,OAAOgO,EAAW,CACtDhP,KAAK,EACL7I,MAAM,IACLuJ,gBAEIwO,KAGT1lB,KAAK8kB,YAAYpN,MAAQgO,IAG7B,OAAOtP,CACT,CACAqB,qBACE,MAAMrB,EAAUpW,KAAKolB,iBACrB,OAAIplB,KAAK8kB,aACP1O,EAAQe,UAAUnX,KAAK8kB,YAAYrN,sBAE9BrB,CACT,CACAyD,eACE,MAAMzD,EAAUpW,KAAKolB,iBACrB,OAAIplB,KAAK8kB,aACP1O,EAAQe,UAAUnX,KAAK8kB,YAAYjL,gBAE9BzD,CACT,CACA4C,WAAWrL,GACT,MAAMyI,EAAU,IAAIS,EACpB,OAAIlJ,GAAMyI,EAAQe,UAAUnX,KAAKolB,eAAe,GAAI,CAAC,EAAGzX,IACjDyI,EAAQe,UAAUnX,KAAK8kB,YAAc9kB,KAAK8kB,YAAY9L,WAAWrL,GAAQnJ,MAAMwU,WAAWrL,GACnG,CACAmR,iBAAiBxG,GACf,IAAI0G,EAAuB4G,EAC3B,SAAAzW,aAAA,GACKmJ,GAAK,IACRwB,kBAAuE,OAAnDkF,EAAwB1G,EAAMwB,uBAA4B,EAASkF,EAAsB6G,kBAAoB7lB,KAAK8kB,cAAqE,OAApDc,EAAyBtN,EAAMwB,uBAA4B,EAAS8L,EAAuBd,cAAgBxM,EAAMwB,kBAE5Q,CACA6L,WAAWnM,EAAUlB,EAAO3K,GAC1B,YAAc,IAAV2K,IACFA,EAAQ,CAAC,QAEE,IAAT3K,IACFA,EAAO,IAEF3N,KAAK8lB,SAAStM,EAAUxZ,KAAMsY,EAAO3K,EAC9C,CACA8L,WAAWnB,GACT,OAAO9T,MAAMiV,WAAWnB,MAAYtY,KAAK8kB,aAAe9kB,KAAK8kB,YAAYrL,WAAWzZ,KAAK8e,iBAAiBxG,IAC5G,CACAyB,UAAU1P,EAAKiO,QACC,IAAVA,IACFA,EAAQ,CAAC,GAEX,IAAK4E,EAAG9G,GAAW5R,MAAMuV,UAAU1P,EAAKiO,GACxC,GAAItY,KAAK8kB,YAAa,CACpB,IAAIiB,GACH7I,EAAG6I,GAAkBvhB,MAAMuV,UAAUmD,EAAGld,KAAK8e,iBAAiBxG,IAC/DlC,EAAUA,EAAQe,UAAU4O,EAAc,CAE5C,MAAO,CAAC7I,EAAG9G,EACb,CACAkD,cAAcjP,EAAKiO,QACH,IAAVA,IACFA,EAAQ,CAAC,GAEX,IAAK4E,EAAG9G,GAAW5R,MAAM8U,cAAcjP,EAAKiO,GAC5C,GAAItY,KAAK8kB,YAAa,CACpB,IAAIiB,GACH7I,EAAG6I,GAAkBvhB,MAAM8U,cAAc4D,EAAGld,KAAK8e,iBAAiBxG,IACnElC,EAAUA,EAAQe,UAAU4O,EAAc,CAE5C,MAAO,CAAC7I,EAAG9G,EACb,CACAgC,QACE,IAAI4N,EACsC,OAAzCA,EAAoBhmB,KAAK8kB,cAAgCkB,EAAkB5N,QAC5EpY,KAAKglB,cAAclU,QAAQsT,GAAKA,EAAEhM,QACpC,CACIrW,YACF,OAAO/B,KAAK+kB,WAAa/kB,KAAK+kB,WAAWhjB,MAAQ/B,KAAK8kB,YAAc9kB,KAAK8kB,YAAY/iB,MAAQ,EAC/F,CACIA,UAAMA,GACJ/B,KAAK+kB,YACP/kB,KAAK+kB,WAAWhjB,MAAQA,EACxB/B,KAAK8kB,YAAc9kB,KAAK+kB,WACxB/kB,KAAKolB,kBACA5gB,MAAMzC,MAAQA,CACvB,CACIiS,oBACF,OAAOhU,KAAK+kB,WAAa/kB,KAAK+kB,WAAW/Q,cAAgBhU,KAAK8kB,YAAc9kB,KAAK8kB,YAAY9Q,cAAgB,EAC/G,CACIA,kBAAcA,GACZhU,KAAK+kB,YACP/kB,KAAK+kB,WAAW/Q,cAAgBA,EAChChU,KAAK8kB,YAAc9kB,KAAK+kB,WACxB/kB,KAAKolB,kBACA5gB,MAAMwP,cAAgBA,CAC/B,CACIE,iBACF,OAAOlU,KAAK+kB,WAAa/kB,KAAK+kB,WAAW7Q,WAAalU,KAAK8kB,YAAc9kB,KAAK8kB,YAAY5Q,WAAa,EACzG,CACIA,eAAWA,GACb,GAAIlU,KAAK+kB,WAIP,OAHA/kB,KAAK+kB,WAAW7Q,WAAaA,EAC7BlU,KAAK8kB,YAAc9kB,KAAK+kB,gBACxB/kB,KAAKolB,iBAGP,IAAIpR,EAAgB1J,OAAO4J,GAGvBlU,KAAK8kB,cACP9kB,KAAK8kB,YAAY5Q,WAAaA,EAC9BF,EAAgBhU,KAAK8kB,YAAY9Q,eAEnChU,KAAKgU,cAAgBA,CACvB,CACIK,mBACF,OAAOrU,KAAK8kB,YAAc9kB,KAAK8kB,YAAYzQ,aAAe,EAC5D,CACIuB,iBACF,IAAIqQ,EACJ,QAA0D,OAA1CA,EAAqBjmB,KAAK8kB,eAAgCmB,EAAmBrQ,WAC/F,CACI8C,eACF,IAAIwN,EACJ,QAA0D,OAA1CA,EAAqBlmB,KAAK8kB,eAAgCoB,EAAmBxN,SAC/F,CACA0B,OAAOvB,EAASC,GACd,MAAM1C,EAAU,IAAIS,EACpB,OAAI7W,KAAK8kB,aACP1O,EAAQe,UAAUnX,KAAK8kB,YAAY1K,OAAOvB,EAASC,IAElD3B,UAAUnX,KAAKolB,kBAEXhP,CACT,CACIsB,YACF,IAAIyO,EACJ,SAAAhX,aAAA,GACK3K,MAAMkT,OAAK,IACdS,eAAgBnY,KAAKsW,cACrB0O,cAAehlB,KAAKglB,cAAcrJ,IAAIyI,GAAKA,EAAE1M,OAC7CmO,eAAgB7lB,KAAK8kB,YACrBA,YAAwD,OAA1CqB,EAAqBnmB,KAAK8kB,kBAAuB,EAASqB,EAAmBzO,OAE/F,CACIA,UAAMA,GACR,MACEsN,gBACAa,iBACAf,eAEEpN,EADC+I,KAAWzR,KACZ0I,EAAKgJ,GACLsE,GAAehlB,KAAKglB,cAAclU,QAAQ,CAACsT,EAAGgC,IAAOhC,EAAE1M,MAAQsN,EAAcoB,IAC3D,MAAlBP,IACF7lB,KAAK8kB,YAAce,EACnB7lB,KAAK8kB,YAAYpN,MAAQoN,GAE3BtgB,MAAMkT,MAAQ+I,CAChB,CACAhI,aAAaI,EAASC,EAAOR,GAC3B,OAAOtY,KAAK8kB,YAAc9kB,KAAK8kB,YAAYrM,aAAaI,EAASC,EAAOR,GAAS,EACnF,CACAS,YAAYF,EAASC,GACnB,OAAO9Y,KAAK8kB,YAAc9kB,KAAK8kB,YAAY/L,YAAYF,EAASC,GAAStU,MAAMuU,YAAYF,EAASC,EACtG,CACArC,WACMzW,KAAK8kB,aAAa9kB,KAAK8kB,YAAYrO,WACvCjS,MAAMiS,UACR,CACAX,gBAAgB5I,EAAWyL,GACzB,OAAO3Y,KAAK8kB,YAAc9kB,KAAK8kB,YAAYhP,gBAAgB5I,EAAWyL,GAAanU,MAAMsR,gBAAgB5I,EAAWyL,EACtH,CACIgB,gBACF,OAAO3Z,KAAK8kB,YAAc9kB,KAAK8kB,YAAYnL,UAAY3Z,KAAKilB,UAC9D,CACItL,cAAUA,GACZ3Z,KAAKilB,WAAatL,CACpB,CACIQ,YACF,OAAOna,KAAK8kB,YAAc9kB,KAAK8kB,YAAY3K,MAAQna,KAAKklB,MAC1D,CACI/K,UAAMA,GACRna,KAAKklB,OAAS/K,CAChB,CACIQ,kBACF,OAAO3a,KAAK8kB,YAAc9kB,KAAK8kB,YAAYnK,YAAc3a,KAAKmlB,YAChE,CACIxK,gBAAYA,GACd3a,KAAKmlB,aAAexK,CACtB,CACA9G,WAAW5F,GACT,OAAOrD,MAAMC,QAAQoD,GAAQjO,KAAKglB,cAAcpE,MAAM,CAACwD,EAAGgC,KACxD,IAAKnY,EAAKmY,GAAK,OACf,MAAAC,EAGIpY,EAAKmY,IAFPnY,KAAMqY,GAEPD,EACD,OAAO3a,EAAe0Y,GAFjB/O,EAAQrG,KAAAqX,EAAAE,MAEyBnC,EAAEvQ,WAAWyS,EAAO,GACvD9hB,MAAMqP,WAAW5F,EACxB,CACAmG,iBAAiBrS,GACf,IAAIykB,EACJ,QAA0D,OAA1CA,EAAqBxmB,KAAK8kB,eAAgC0B,EAAmBpS,iBAAiBrS,GAChH,EAEFyM,EAAcwJ,cAAW,EACzBxJ,EAAcwJ,SAAW,CACvB8N,SAAUA,CAACtM,EAAU1G,EAAQwF,EAAO3K,KAClC,IAAKmF,EAAOkS,cAActiB,OAAQ,OAClC,MAAM4iB,EAAaxS,EAAOwD,cAGpB1R,EAASkO,EAAOkS,cAAcrJ,IAAI,CAACyI,EAAG/H,KAC1C,MAAMoK,EAAY3T,EAAOgS,cAAgBV,EACnCsC,EAAgBD,EAAYrC,EAAE/P,aAAa3R,OAAS0hB,EAAEtO,gBAAgBsO,EAAE/P,aAAa3R,OAAQ6I,cACnG,OAAI6Y,EAAE9N,gBAAkBgP,GACtBlB,EAAEhM,QACFgM,EAAE5M,OAAO8N,EAAY,CACnB9O,KAAK,KAEGiQ,GACVrC,EAAEhK,OAAOsM,GAEXtC,EAAE5M,OAAOgC,EAAU1G,EAAOgM,iBAAiBxG,IAC3C8L,EAAEpL,WAAWrL,GACN,CACL0O,QACAsK,OAAQvC,EAAE9N,cAAc5T,OACxBkW,oBAAqBwL,EAAExL,oBAAoB,EAAGnR,KAAK8F,IAAImZ,EAAetC,EAAEtO,gBAAgBsO,EAAE/P,aAAa3R,OAAQ6I,gBACjH,GAIF3G,SAAOob,KAAK,CAACtb,EAAIkiB,IAAOA,EAAGD,OAASjiB,EAAGiiB,QAAUC,EAAGhO,oBAAsBlU,EAAGkU,qBACtE9F,EAAOkS,cAAcpgB,EAAO,GAAGyX,MAAK,GAG/CxO,EAAMW,cAAgBA,oBCxStBX,EAAMgZ,WA3BN,MAAMA,WAAmBzY,EACvBrO,YAAY4M,GACVnI,MAAMmI,EACR,CAEAoH,cAAcpH,GACZnI,MAAMuP,cAAcpH,EACtB,CACAoL,QAAQpL,GACN,MACEma,KAAMC,GAEJpa,EADCqa,KAAKhY,KACNrC,EAAIsC,IACR,GAAI8X,EAAO,CACT,MAAME,EAAUF,EAAMpL,IAAIlH,GAAKA,EAAE/R,QAC3BwkB,EAAiBzf,KAAKwF,OAAOga,GAC7BE,EAAiB1f,KAAK8F,OAAO0Z,GAAWC,EAC9CF,EAAM/Y,KAAO,IAAIqV,OAAO4D,GACpBC,IAAgBH,EAAM/Y,MAAQ,IAAM,IAAIqV,OAAO6D,GAAkB,KACrEnnB,KAAK8mB,KAAOC,EAEdviB,MAAMuT,QAAQiP,EAChB,CACAvN,WAAWnB,GACT,OAAOtY,KAAK8mB,KAAKM,KAAK3S,GAAuC,IAAlCA,EAAEtN,QAAQnH,KAAKgU,iBAAyBxP,MAAMiV,WAAWnB,EACtF,GCbFzK,EAAMc,eAnBN,MAAMA,WAAuBF,EAS3BsF,cAAcpH,GACZnI,MAAMuP,cAAcpH,EACtB,CACAoL,QAAQpL,GACNnI,MAAMuT,WAAO5I,aAAA,GACRxC,GAAI,IACPoO,SAAUpO,EAAKsB,OAEnB,GCjBF,MAAMM,UAAqBE,EA2BzB1O,YAAY4M,GACVnI,OAAA,EAAK2K,aAAA,GACAZ,EAAayJ,UACbrL,GAEP,CACAoH,cAAcpH,GACZnI,MAAMuP,cAAcpH,EACtB,CACAoL,QAAQpL,GACNnI,MAAMuT,QAAQpL,GACd3M,KAAKqnB,gBACP,CACAA,iBACE,MAAMra,EAAQ,KAAOhN,KAAKsnB,cAAgB,WAAa,IAEjD9Z,GAAOxN,KAAKunB,MAAQ,IAAM/b,EAAaxL,KAAKwnB,OAAS,SAAWxnB,KAAKunB,MAAQ,MAAQ,IAAM,IACjGvnB,KAAKynB,cAAgB,IAAIpb,OAAOW,EAFpB,OAEkCQ,GAC9CxN,KAAK0nB,kBAAoB,IAAIrb,OAAO,IAAMrM,KAAK2nB,WAAWhM,IAAInQ,GAAczI,KAAK,IAAM,IAAK,KAC5F/C,KAAK4nB,0BAA4B,IAAIvb,OAAOb,EAAaxL,KAAK6nB,oBAAqB,IACrF,CACAC,2BAA2B/lB,GACzB,OAAOA,EAAM0J,QAAQzL,KAAK4nB,0BAA2B,GACvD,CACAG,2BAA2BhmB,GAEzB,MAAMimB,EAAQjmB,EAAM8iB,MAAM7kB,KAAKwnB,OAC/BQ,SAAM,GAAKA,EAAM,GAAGvc,QAAQ,wBAAyBzL,KAAK6nB,oBACnDG,EAAMjlB,KAAK/C,KAAKwnB,MACzB,CACAlO,cAAcJ,EAAIZ,QACF,IAAVA,IACFA,EAAQ,CAAC,GAEX,MAAO2P,EAAQ7R,GAAW5R,MAAM8U,cAActZ,KAAK8nB,2BAA2B9nB,KAAKunB,OAASvnB,KAAK2nB,WAAWjlB,SAS5G4V,EAAMnI,OAASmI,EAAM9B,MAAQ8B,EAAMnI,QAAUmI,EAAM9B,KAAO0C,EAAGzN,QAAQzL,KAAK0nB,kBAAmB1nB,KAAKwnB,OAAStO,GAAKZ,GAChH,OAAIY,IAAO+O,IAAQ7R,EAAQa,MAAO,GAC9BgR,IAAWjoB,KAAKkoB,gBAAkBloB,KAAK+B,OAAoB,MAAXkmB,GAAgB7R,EAAQe,UAAUnX,KAAKmZ,YAAY,MAChG,CAAC8O,EAAQ7R,EAClB,CACA+R,iBAAiBpF,EAAIqF,QACQ,IAAvBA,IACFA,GAAqB,GAEvB,IAAIC,EAAQ,EACZ,QAASvT,EAAM,EAAGA,EAAMiO,IAAMjO,EACxB9U,KAAKgT,OAAO7L,QAAQnH,KAAK6nB,mBAAoB/S,KAASA,MACtDuT,EACED,IAAoBrF,GAAM/iB,KAAK6nB,mBAAmBnlB,SAG1D,OAAO2lB,CACT,CACAC,0BAA0BphB,GACxB,YAAc,IAAVA,IACFA,EAAQlH,KAAKgT,QAERhT,KAAKmoB,iBAAiBnoB,KAAK8nB,2BAA2B5gB,GAAOxE,QAAQ,EAC9E,CACA+V,aAAaI,EAASC,EAAOR,GAC3B,YAAgB,IAAZO,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,SAE3BmW,EAASC,GAAS9Y,KAAKuoB,2BAA2B1P,EAASC,GACrD9Y,KAAK8nB,2BAA2BtjB,MAAMiU,aAAaI,EAASC,EAAOR,GAC5E,CACAW,eAAeC,EAAIZ,GAIjB,QAHc,IAAVA,IACFA,EAAQ,CAAC,IAENtY,KAAK6nB,mBAAoB,OAAOrjB,MAAMyU,eAAeC,EAAIZ,GAC9D,MAAMkQ,EAAsBlQ,EAAM3K,MAAQ2K,EAAMwB,iBAAmBxB,EAAMwB,iBAAiB9G,OAAShT,KAAKgT,OAClGyV,EAAgCzoB,KAAKsoB,0BAA0BE,GACrExoB,KAAKgT,OAAShT,KAAK8nB,2BAA2B9nB,KAAK+B,OACnD,MAAM2mB,EAAgBlkB,MAAMyU,eAAeC,EAAIZ,GAC/CtY,KAAKgT,OAAShT,KAAK+nB,2BAA2B/nB,KAAKgT,QACnD,MAAM2V,EAAkBrQ,EAAM3K,MAAQ2K,EAAMwB,iBAAmBxB,EAAMwB,iBAAiB9G,OAAShT,KAAKgT,OAC9F4V,EAA4B5oB,KAAKsoB,0BAA0BK,GACjED,SAAcxR,YAAc0R,EAA4BH,GAAiCzoB,KAAK6nB,mBAAmBnlB,OACjHgmB,EAAczR,MAAQyR,EAAc1R,aAAekC,IAAOlZ,KAAK6nB,mBACxDa,CACT,CACAG,qBAAqB/T,GACnB,GAAI9U,KAAK6nB,mBAAoB,CAC3B,MAAMiB,EAAahU,EAAM9U,KAAK6nB,mBAAmBnlB,OAAS,EACpDqmB,EAAe/oB,KAAK+B,MAAMoF,QAAQnH,KAAK6nB,mBAAoBiB,GACjE,GAAIC,GAAgBjU,EAAK,OAAOiU,EAElC,OAAO,CACT,CACAR,2BAA2BvhB,EAAM+b,GAC/B,MAAMiG,EAAyBhpB,KAAK6oB,qBAAqB7hB,GACrDgiB,GAA0B,IAAGhiB,EAAOgiB,GACxC,MAAMC,EAAuBjpB,KAAK6oB,qBAAqB9F,GACvD,OAAIkG,GAAwB,IAAGlG,EAAKkG,EAAuBjpB,KAAK6nB,mBAAmBnlB,QAC5E,CAACsE,EAAM+b,EAChB,CACA3I,OAAOvB,EAASC,QACE,IAAZD,IACFA,EAAU,QAEE,IAAVC,IACFA,EAAQ9Y,KAAKqU,aAAa3R,SAE3BmW,EAASC,GAAS9Y,KAAKuoB,2BAA2B1P,EAASC,GAC5D,MAAMoQ,EAAiBlpB,KAAK+B,MAAMmF,MAAM,EAAG2R,GACrCsQ,EAAgBnpB,KAAK+B,MAAMmF,MAAM4R,GACjC2P,EAAgCzoB,KAAKmoB,iBAAiBe,EAAexmB,QAC3E1C,KAAKgT,OAAShT,KAAK+nB,2BAA2B/nB,KAAK8nB,2BAA2BoB,EAAiBC,IAC/F,MAAMP,EAA4B5oB,KAAKsoB,0BAA0BY,GACjE,OAAO,IAAIrS,EAAc,CACvBK,WAAY0R,EAA4BH,GAAiCzoB,KAAK6nB,mBAAmBnlB,QAErG,CACAoT,gBAAgB5I,EAAWyL,GACzB,IAAK3Y,KAAK6nB,mBAAoB,OAAO3a,EACrC,OAAQyL,GACN,KAAKpN,OACL,KAAKA,OACL,KAAKA,aACH,CACE,MAAM6d,EAAqBppB,KAAK6oB,qBAAqB3b,EAAY,GACjE,GAAIkc,GAAsB,EAAG,CAC3B,MAAMC,EAAwBD,EAAqBppB,KAAK6nB,mBAAmBnlB,OAC3E,GAAIwK,EAAYmc,GAAyBrpB,KAAK+B,MAAMW,QAAU2mB,GAAyB1Q,IAAcpN,aACnG,OAAO6d,EAGX,KACF,CACF,KAAK7d,QACL,KAAKA,cACH,CACE,MAAM+d,EAAsBtpB,KAAK6oB,qBAAqB3b,GACtD,GAAIoc,GAAuB,EACzB,OAAOA,EAAsBtpB,KAAK6nB,mBAAmBnlB,MAEzD,EAEJ,OAAOwK,CACT,CACAuM,WAAWnB,GAET,IAAIiR,IAAgBvpB,KAAK8nB,2BAA2B9nB,KAAK+B,OAAO4hB,MAAM3jB,KAAKynB,eAC3E,GAAI8B,EAAO,CAET,MAAMC,EAASxpB,KAAKwpB,OACpBD,EAAQA,IAAUE,MAAMD,KAEZ,MAAZxpB,KAAKiN,KAAejN,KAAKiN,KAAO,GAAKjN,KAAKiN,KAAOjN,KAAKwpB,UAE1C,MAAZxpB,KAAKuN,KAAevN,KAAKuN,KAAO,GAAKvN,KAAKwpB,QAAUxpB,KAAKuN,KAE3D,OAAOgc,GAAS/kB,MAAMiV,WAAWnB,EACnC,CACA7B,WACE,GAAIzW,KAAK+B,MAAO,CACd,MAAMynB,EAASxpB,KAAKwpB,OACpB,IAAIE,EAAWF,EAGC,MAAZxpB,KAAKiN,MAAayc,EAAWjiB,KAAK8F,IAAImc,EAAU1pB,KAAKiN,MACzC,MAAZjN,KAAKuN,MAAamc,EAAWjiB,KAAKwF,IAAIyc,EAAU1pB,KAAKuN,MACrDmc,IAAaF,IAAQxpB,KAAKgU,cAAgBhU,KAAKwY,OAAOkR,EAAU1pB,OACpE,IAAI2pB,EAAY3pB,KAAK+B,MACjB/B,KAAK4pB,iBAAgBD,EAAY3pB,KAAK6pB,gBAAgBF,IACtD3pB,KAAK8pB,oBAAsB9pB,KAAKunB,MAAQ,IAAGoC,EAAY3pB,KAAK+pB,oBAAoBJ,IACpF3pB,KAAKgT,OAAS2W,EAEhBnlB,MAAMiS,UACR,CACAoT,gBAAgB9nB,GACd,MAAMimB,EAAQhoB,KAAK8nB,2BAA2B/lB,GAAO8iB,MAAM7kB,KAAKwnB,OAGhEQ,SAAM,GAAKA,EAAM,GAAGvc,QAAQ,kBAAmB,CAACkY,EAAOqG,EAAMC,EAAOvG,IAAQsG,EAAOtG,GAE/E3hB,EAAMW,SAAW,MAAMwnB,KAAKlC,EAAM,MAAKA,EAAM,GAAKA,EAAM,GAAK,KAC7DA,EAAMtlB,OAAS,IACjBslB,EAAM,GAAKA,EAAM,GAAGvc,QAAQ,MAAO,IAC9Buc,EAAM,GAAGtlB,SAAQslB,EAAMtlB,OAAS,IAGhC1C,KAAK+nB,2BAA2BC,EAAMjlB,KAAK/C,KAAKwnB,OACzD,CACAuC,oBAAoBhoB,GAClB,IAAKA,EAAO,OAAOA,EACnB,MAAMimB,EAAQjmB,EAAM8iB,MAAM7kB,KAAKwnB,OAC/B,OAAIQ,EAAMtlB,OAAS,GAAGslB,EAAMhS,KAAK,IACjCgS,EAAM,GAAKA,EAAM,GAAGpE,OAAO5jB,KAAKunB,MAAO,KAChCS,EAAMjlB,KAAK/C,KAAKwnB,MACzB,CACAtN,cAAchB,EAAIZ,EAAOc,QACT,IAAVd,IACFA,EAAQ,CAAC,GAEX,MAAM6R,EAAgC,IAAfnqB,KAAKunB,OAAerO,IAAOlZ,KAAK6nB,qBAAuB3O,IAAOlZ,KAAKwnB,OAAStO,IAAO3K,EAAa6b,gBAAkBpqB,KAAK2nB,WAAW3c,SAASkO,IAClK,OAAO1U,MAAM0V,cAAchB,EAAIZ,EAAOc,KAAe+Q,CACvD,CACInW,oBACF,OAAOhU,KAAK8nB,2BAA2B9nB,KAAK6pB,gBAAgB7pB,KAAK+B,QAAQ0J,QAAQzL,KAAKwnB,MAAOjZ,EAAa6b,eAC5G,CACIpW,kBAAcA,GAChBxP,MAAMwP,cAAgBA,CACxB,CACIE,iBACF,OAAOlU,KAAKuY,MAAMvY,KAAKgU,cAAehU,KACxC,CACIkU,eAAWmW,GACbrqB,KAAKsW,cAAgBtW,KAAKwY,OAAO6R,EAAGrqB,MAAMyL,QAAQ8C,EAAa6b,eAAgBpqB,KAAKwnB,MACtF,CAGIgC,aACF,OAAOxpB,KAAKkU,UACd,CACIsV,WAAOA,GACTxpB,KAAKkU,WAAasV,CACpB,CAKIlC,oBACF,OAAmB,MAAZtnB,KAAKiN,KAAejN,KAAKiN,IAAM,GAAiB,MAAZjN,KAAKuN,KAAevN,KAAKuN,IAAM,CAC5E,CAKI2a,oBACF,OAAmB,MAAZloB,KAAKiN,KAAejN,KAAKiN,IAAM,GAAiB,MAAZjN,KAAKuN,KAAevN,KAAKuN,IAAM,CAC5E,CACA6G,iBAAiBrS,GAGf,OAAQyC,MAAM4P,iBAAiBrS,IAAUwM,EAAagN,aAAavQ,SAASjJ,IAAUwM,EAAagN,aAAavQ,SAAShL,KAAKkU,gBAA4B,IAAVnS,GAA8B,KAAf/B,KAAK+B,MACtK,EAEFwM,EAAa6b,eAAiB,IAC9B7b,EAAagN,aAAe,IAAI9M,EAAO8M,aAAc,GACrDhN,EAAayJ,SAAW,CACtB/J,KAAMK,OACNkZ,MAAO,IACPK,mBAAoB,GACpBF,WAAY,CAACpZ,EAAa6b,gBAC1Bnd,IAAKqB,OAAOgc,iBACZ/c,IAAKe,OAAOic,iBACZhD,MAAO,EACPqC,gBAAgB,EAChBE,oBAAoB,EACpBvR,MAAOjK,OACPkK,OAAQ6R,GAAKA,EAAEG,eAAe,QAAS,CACrCC,aAAa,EACbC,sBAAuB,MAG3B7c,EAAMU,aAAeA,ECzSrB,MAAMoc,GAAY,CAChBC,OAAQ,QACRC,SAAU,gBACVC,MAAO,cAGT,SAASC,GAAWC,EAAKhkB,EAAM+b,QAChB,IAAT/b,IACFA,EAAO2jB,GAAUC,aAER,IAAP7H,IACFA,EAAK4H,GAAUC,QAEjB,MAAM9X,EAAS1D,EAAW4b,GAC1B,OAAOjpB,GAAS+Q,EAAO2H,YAAY2J,IACjCA,EAAEpd,GAAQjF,EACHqiB,EAAErB,IAEb,CAMAlV,EAAM8c,UAAYA,GAClB9c,EAAMkd,WAAaA,GACnBld,EAAMod,KALN,SAASA,GAAKlpB,EAAOkM,EAAMjH,EAAM+b,GAC/B,OAAOgI,GAAW9c,EAAMjH,EAAM+b,EAAvBgI,CAA2BhpB,EACpC,ECFA,IACEmpB,WAAWrd,MAAQA,CACrB,OAAE6B,GAAO,oHCjBH,MAAOyb,GA6BXprB,YAAoBqrB,GAAAprB,KAAAorB,OAtBVprB,KAAAqrB,uBAAyD,IAAInrB,MAEhEF,KAAAsrB,SAAmB,EACnBtrB,KAAA4kB,MAAgB2G,KAAS3G,OAAS,GAAG/d,WAAWK,MAAM,GAWtDlH,KAAAwrB,QAAkB,GAClBxrB,KAAAyrB,MAAgB,OAEhBzrB,KAAAgE,KAAe,cACfhE,KAAAwpB,OAAiB,sBACjBxpB,KAAA0rB,WAAqB,MAAQ1rB,KAAK4kB,KAClC5kB,KAAA2rB,aAAuB,KAEU,CAExCC,WACE5rB,KAAKorB,KAAKS,IAAI,0DAA2D,CAAEC,aAAc,SAAUC,UAAU,CAC3GC,KAAOC,IACLjsB,KAAKksB,gBAAkBD,GAEzBE,MAAOA,SAGTnsB,KAAKorB,KAAKS,IAAI,8CAA+C,CAAEC,aAAc,SAAUC,UAAU,CAC/FC,KAAOC,IACLjsB,KAAKosB,KAAOH,GAEdE,MAAOA,SAGTnsB,KAAKorB,KAAKS,IAAI,gDAAiD,CAAEC,aAAc,SAAUC,UAAU,CACjGC,KAAOC,IACLjsB,KAAKqsB,OAASJ,GAEhBE,MAAOA,SAGTnsB,KAAKorB,KAAKS,IAAI,kDAAmD,CAAEC,aAAc,SAAUC,UAAU,CACnGC,KAAOC,IACLjsB,KAAKssB,SAAWL,GAElBE,MAAOA,SAGTnsB,KAAKorB,KAAKS,IAAI,6CAA8C,CAAEC,aAAc,SAAUC,UAAU,CAC9FC,KAAOC,IACLjsB,KAAKusB,IAAMN,GAEbE,MAAOA,SAGTnsB,KAAKorB,KAAKS,IAAI,iDAAkD,CAAEC,aAAc,SAAUC,UAAU,CAClGC,KAAOC,IACLjsB,KAAKwsB,QAAUP,GAEjBE,MAAOA,SAGTnsB,KAAKorB,KAAKS,IAAI,oDAAqD,CAAEC,aAAc,SAAUC,UAAU,CACrGC,KAAOC,IACLjsB,KAAKysB,WAAaR,GAEpBE,MAAOA,SAGTnsB,KAAKorB,KAAKS,IAAI,kDAAmD,CAAEC,aAAc,SAAUC,UAAU,CACnGC,KAAOC,IACLjsB,KAAK0sB,SAAWT,GAElBE,MAAOA,QAEX,CAEA/rB,kBACE,IAAIusB,EAAkB9e,EAAM7N,KAAK4sB,gBAAiB,CAChD3e,KAAM,CACJ,CACEA,KAAM,oBACN4e,MAAO,kBACPC,SAAU,oBAEZ,CACE7e,KAAM,sBACN4e,MAAO,4CACPC,SAAU,YAEZ,CACE7e,KAAM,mBACN4e,MAAO,sCACPC,SAAU,UAEZ,CACE7e,KAAM,sBACN4e,MAAO,4DACPC,SAAU,cAYZ,CACE7e,KAAM,oBACN4e,MAAO,0BACPC,SAAU,SAEZ,CACE7e,KAAM,sBACN4e,MAAO,2BACPC,SAAU,OAEZ,CACE7e,KAAM,sBACN4e,MAAO,gDACPC,SAAU,WAOZ,CACE7e,KAAM,sBACN4e,MAAO,cACPC,SAAU,QAEZ,CACE7e,KAAM,sBACN4e,MAAO,eACPC,SAAU,YAEZ,CACE7e,KAAM,sBACN6e,SAAU,YAGdhH,SAAUA,CAAC/jB,EAAe+Q,EAAawF,KACrC,IAAIkR,GAAU1W,EAAO/Q,MAAQA,GAAO0J,QAAQ,MAAO,IAEnD,QAASwC,KAAQ6E,EAAOkS,cAAe,CACrC,IAAI+H,EAAK,IAAI1gB,OAAO4B,EAAK4e,OAEzB,GAAwB,MAApBrD,EAAO7F,MAAMoJ,GACf,OAAO9e,MAMX+e,EAAsBnf,EAAM7N,KAAKitB,oBAAqB,CACxDhf,KAAM,UACN0R,OAAQ,CACNuN,GAAI,CACFjf,KAAMJ,cACN6Q,gBAAiB,KACjB1X,KAAM,EACN+b,GAAI,GACJD,UAAW,GAEbqK,GAAI,CACFlf,KAAMJ,cACN6Q,gBAAiB,KACjB1X,KAAM,EACN+b,GAAI,GACJD,UAAW,MAKbsK,EAAoBvf,EAAM7N,KAAKqtB,kBAAmB,CACpDpf,KAAM,SAGR0e,EAAgB5W,GAAG,SAAU,KAC3B,OAAQ4W,EAAgB7Z,OAAOgS,YAAYgI,UACzC,IAAK,mBACH9sB,KAAKwrB,QAAUxrB,KAAKksB,gBACpBlsB,KAAKyrB,MAAQ,QACbzrB,KAAKqrB,uBAAuBrpB,KAAKsrB,MAAiBC,iBAClD,MACF,IAAK,OACHvtB,KAAKwrB,QAAUxrB,KAAKosB,KACpBpsB,KAAKyrB,MAAQ,OACbzrB,KAAKqrB,uBAAuBrpB,KAAKsrB,MAAiBE,MAClD,MACF,IAAK,SACHxtB,KAAKwrB,QAAUxrB,KAAKqsB,OACpBrsB,KAAKyrB,MAAQ,SACbzrB,KAAKqrB,uBAAuBrpB,KAAKsrB,MAAiBG,YAClD,MACF,IAAK,WACHztB,KAAKwrB,QAAUxrB,KAAKssB,SACpBtsB,KAAKyrB,MAAQ,SACbzrB,KAAKqrB,uBAAuBrpB,KAAKsrB,MAAiBI,eAClD,MACF,IAAK,MAAO,IAAK,QACf1tB,KAAKwrB,QAAUxrB,KAAKusB,IACpBvsB,KAAKyrB,MAAQ,MACbzrB,KAAKqrB,uBAAuBrpB,KAAKsrB,MAAiBK,KAClD,MACF,IAAK,UACH3tB,KAAKwrB,QAAUxrB,KAAKwsB,QACpBxsB,KAAKyrB,MAAQ,SACbzrB,KAAKqrB,uBAAuBrpB,KAAKsrB,MAAiBM,SAClD,MACF,IAAK,aACH5tB,KAAKwrB,QAAUxrB,KAAKysB,WACpBzsB,KAAKyrB,MAAQ,YACbzrB,KAAKqrB,uBAAuBrpB,KAAKsrB,MAAiBO,YAClD,MACF,IAAK,WACH7tB,KAAKwrB,QAAUxrB,KAAK0sB,SACpB1sB,KAAKyrB,MAAQ,OACbzrB,KAAKqrB,uBAAuBrpB,KAAKsrB,MAAiBQ,eAClD,MACF,QACE9tB,KAAKwrB,QAAU,GACfxrB,KAAKyrB,MAAQ,OACbzrB,KAAKqrB,uBAAuBrpB,KAAK,SAKvChC,KAAK+tB,UAAU1c,iBAAiB,QAAS,KAClCrR,KAAK+tB,UAAUhsB,MAGlB/B,KAAKgE,KAAOhE,KAAK+tB,UAAUhsB,MAF3B/B,KAAKgE,KAAO,gBAMhB2oB,EAAgB5W,GAAG,SAAU,KACtB4W,EAAgB5qB,MAGnB/B,KAAKwpB,OAASmD,EAAgB5qB,MAF9B/B,KAAKwpB,OAAS,wBAMlBwD,EAAoBjX,GAAG,SAAU,KAC1BiX,EAAoBjrB,MAGvB/B,KAAK0rB,WAAasB,EAAoBjrB,MAFtC/B,KAAK0rB,WAAa,MAAQ1rB,KAAK4kB,OAMnCwI,EAAkBrX,GAAG,SAAU,KACxBqX,EAAkBrrB,MAGrB/B,KAAK2rB,aAAeyB,EAAkBrrB,MAFtC/B,KAAK2rB,aAAe,QAMxB3rB,KAAK+tB,UAAU1c,iBAAiB,QAAS,KACvCrR,KAAKsrB,SAAU,IAGjBtrB,KAAK4sB,gBAAgBvb,iBAAiB,QAAS,KAC7CrR,KAAKsrB,SAAU,IAGjBtrB,KAAKitB,oBAAoB5b,iBAAiB,QAAS,KACjDrR,KAAKsrB,SAAU,IAGjBtrB,KAAKqtB,kBAAkBhc,iBAAiB,QAAS,KAC/CrR,KAAKsrB,SAAU,GAEnB,EAnSWH,GAAmB,mBAAA9pB,iBAAnB8pB,IAAmBtpB,MAAA6C,OAAA,EAAnBymB,GAAmB,UAAA6C,EAAAzsB,IAAA,MAAnB4pB,GAAmB3pB,UAAA,sBAAAoD,OAAA,CAAAmpB,UAAA,YAAAnB,gBAAA,kBAAAK,oBAAA,sBAAAI,kBAAA,qBAAAvoB,QAAA,CAAAumB,uBAAA,0BAAArmB,MAAA,GAAAC,KAAA,GAAAC,OAAA,unHAAAC,SAAA,SAAAzD,EAAAC,MAAA,EAAAD,ICXhCG,MAAA,WAAgGA,MAAA,0BAAAF,EAAA2pB,SAAA3pB,EAAA2pB,OAAA,GAC5FzpB,MAAA,aACIA,MAAA,+BACAA,cAAA,UAAAA,CAAsN,QAAtNA,CAAsN,QAAtNA,CAAsN,QAAtNA,CAAsN,SAKlMA,MAAA,aAEJA,UAEJA,MAAA,cAEJA,QACAA,MAAA,cAAsEA,MAAA,IAAUA,QAChFA,MAAA,cAAuEA,MAAA,IAAQA,QAC/EA,MAAA,cAAuEA,MAAA,0BAAoDA,QAC3HA,MAAA,cAAwEA,MAAA,0BAAoDA,QAC5HA,MAAA,cAAoEA,MAAA,0BAAkDA,QACtHA,MAAA,OAAAA,CAAG,cACyEA,MAAA,IAAcA,QACtFA,MAAA,cAA0EA,MAAA,YAAKA,QAC/EA,MAAA,cAA0EA,MAAA,WAAIA,QAC9EA,MAAA,iBACJA,QACAA,MAAA,UAAAA,CAAc,QAENA,MAAA,cAEJA,QACAA,MAAA,OAAAA,CAAG,QAEKA,MAAA,cACJA,QACAA,MAAA,QACIA,MAAA,cACJA,QACAA,MAAA,QACIA,MAAA,cAKJA,QACAA,MAAA,QACIA,MAAA,cACJA,QACAA,MAAA,QACIA,MAAA,cACJA,QACAA,MAAA,QACIA,MAAA,cACJA,QACAA,MAAA,QACIA,MAAA,cACJA,cAIZA,MAAA,WAEJA,UAEJA,cAAA,aACIA,cAAA,YAAAA,CAAqN,UAE7MA,MAAA,cACJA,QACAA,MAAA,UAAAA,CAAa,UAAbA,CAAa,WAGDA,MAAA,cAEJA,UAEJA,MAAA,cACAA,MAAA,QACIA,MAAA,aAAAA,CACiC,aADjCA,CACiC,aADjCA,CACiC,cAKrCA,QACAA,MAAA,cAAmEA,MAAA,IAAgBA,QACnFA,MAAA,UAAAA,CAAe,cAC6DA,MAAA,0BAA2DA,UAEvIA,MAAA,aAAAA,CAAoE,cAEpEA,MAAA,cAAqEA,MAAA,IAAQA,uCA3FrEA,MAAA,SAAAosB,EAAAC,aAAA,MAAuCrsB,MAAA,UAAAA,MAAA,GAAAI,GAAAN,EAAA2pB,UAEpCzpB,MAAA,GAAAA,MAAA,YAAAA,MAAA,KAAAF,EAAA6pB,SAAA3pB,OAM2BA,MAAA,GAAAA,MAAA,cAAAF,EAAA8pB,OAI5B5pB,MAAA,GAAAA,MAAA,aAAAF,EAAA8pB,MAAA,QAG4D5pB,MAAA,GAAAA,MAAAF,EAAA6nB,QACC3nB,MAAA,GAAAA,MAAAF,EAAAqC,MACAnC,MAAA,GAAAA,YAAA,6CACCA,MAAA,GAAAA,YAAA,6CACJA,MAAA,GAAAA,YAAA,2CAEQA,MAAA,GAAAA,MAAAF,EAAA+pB,YAmD1C7pB,MAAA,IAAAA,MAAA,aAAAF,EAAA8pB,MAAA,QAaiC5pB,MAAA,GAAAA,MAAAF,EAAAgqB,cAES9pB,MAAA,GAAAA,YAAA,oDAIPA,MAAA,GAAAA,MAAAF,EAAAqC,KAAA,s8ICxFzEnC,MAAA,QAAoBA,MAAA,wBAAqBA,+BAArBA,MAAA,GAAAA,YAAA,IAAA8D,EAAAN,OAAA,kEAGhBxD,MAAA,WACIA,MAAA,sBACJA,+BAFkBA,MAAA,UAAAA,MAAA,EAAAI,IAAAmH,EAAA/D,QACExD,MAAA,GAAAA,MAAA,QAAAuH,EAAA/G,KAAA,2BAGpBR,MAAA,WACIA,MAAA,wBACJA,+BAFmBA,MAAA,UAAAA,MAAA,EAAAI,IAAAksB,EAAA9oB,QACfxD,MAAA,GAAAA,MAAA,IAAAA,MAAA,IAAAssB,EAAA9rB,MAAA,+BANRR,MAAA,GACIA,MAAA,EAAAusB,GAAA,aAIAvsB,MAAA,EAAAwsB,EAAA,aAGJxsB,+BAPUA,MAAA,GAAAA,MAAA,OAAAysB,EAAAC,MAIA1sB,MAAA,GAAAA,MAAA,QAAAysB,EAAAC,KAAA,2BARd1sB,MAAA,GACIA,MAAA,EAAA2sB,EAAA,YAEA3sB,MAAA,EAAA4sB,EAAA,sBASJ5sB,+BAXSA,MAAA,GAAAA,MAAA,SAAA8G,EAAAtD,OAEUxD,MAAA,GAAAA,MAAA,SAAA8G,EAAAtG,KAAA,qIAWnBR,MAAA,WACIA,MAAA,WAAAA,CAA2F,cAE/FA,+BAHKA,MAAA,UAAAA,MAAA,EAAA6sB,EAAAC,EAAAC,wBACK/sB,MAAA,GAAAA,MAAA,SAAA8sB,EAAAE,kBAAAhtB,OACoFA,MAAA,GAAAA,MAAA,UAAAA,MAAA,EAAAitB,EAAAH,EAAAC,sBAAA,mBAAAD,EAAAC,sBAAA,iCAjBlG/sB,MAAA,GACIA,MAAA,EAAAktB,EAAA,sBAcAltB,MAAA,EAAAmtB,EAAA,aAIJntB,+BAlBmBA,MAAA,GAAAA,MAAA,QAAAotB,EAAAC,oBAcqDrtB,MAAA,GAAAA,MAAA,SAAAotB,EAAAC,mBAAA,uBAMxErtB,MAAA,qCAtBJA,MAAA,GACIA,MAAA,EAAAstB,EAAA,sBAqBAttB,MAAA,EAAAutB,EAAA,aACJvtB,8BAtBmBA,MAAA,GAAAA,MAAA,QAAAuD,EAAAiqB,oBAqBOxtB,MAAA,GAAAA,MAAA,SAAAuD,EAAAiqB,mBAAA,uBAG1BxtB,MAAA,WCXM,MAAOytB,WAAqCltB,IAsBhDrC,YAAoByC,GAA2BgC,QAA3BxE,KAAAwC,UARJxC,KAAAuvB,aAAe,qDACfvvB,KAAAwvB,kBAAoB,0DAEpBxvB,KAAAyvB,WAAa,wBACbzvB,KAAA0vB,gBAAkB,gCAE3B1vB,KAAA4uB,uBAAiC,CAEgB,CAExDxuB,kBACE,GAAMJ,KAAKqvB,mBACTM,UAAUC,MAAM,CACdC,WAAY7vB,KAAKqvB,mBACjBS,OAAuB,MAAf9vB,KAAK+vB,OAAiB,QAAU,QACxCC,WAAYA,CAAC3pB,EAAM4pB,KACjB,OAAQ5pB,GACN,IAAK,OACHrG,KAAKkwB,cAAa,GAClB,MAEF,IAAK,UACH,MAEF,IAAK,cACHlwB,KAAKkwB,cAAa,GAClB,MAEF,IAAK,QACHlwB,KAAKkwB,cAAa,GAClBlwB,KAAK8H,UAAUC,QACf,MAEF,IAAK,UACH/H,KAAK8H,UAAUC,OAAM,YAI5B,GACU/H,KAAKkvB,mBAAoB,CAKpC,QAJuB1T,IAAnB2U,OAAOC,WAAmD5U,IAA1B2U,OAAOC,KAAQC,QACjDF,OAAOC,KAAQC,cAGa7U,IAA1B2U,OAAOG,YACTH,OAAOG,YAAeR,OAAS9vB,KAAK+vB,WAC/B,CACL,IAAIQ,EAAUvwB,KAEdmwB,OAAOG,YAAiB,CACtBR,OAAQ9vB,KAAK+vB,OACbS,cAAe,cACfC,oBAAqB,cACrBC,OAAQ,CAAEC,IAAK,OACfC,cAAe,WACbL,EAAQ3B,uBAAwB,CAClC,GAIJ5uB,KAAKwC,QAAQquB,oBAAoB7wB,KAAK8wB,OAAS9wB,KAAKwvB,kBAAoBxvB,KAAKuvB,cAAgBvvB,KAAKkvB,mBAAoB,KAAM,gBAAgBtnB,KAAK,KAC/I5H,KAAKkwB,cAAa,EAAK,EACxB,MACUlwB,KAAK+wB,qBACG,IAAIC,gBAAgBhxB,KAAK8wB,OAAS9wB,KAAK0vB,gBAAkB1vB,KAAKyvB,WAAYzvB,KAAKixB,2BACrFC,eAAelxB,KAAK+wB,oBAErC,EAjFWzB,GAA6B,mBAAAjuB,iBAA7BiuB,IAA4BztB,MAAA6C,KAAA,EAA5B4qB,GAA6B,UAAAtB,EAAAzsB,IAAA,MAA7B+tB,GAA4B9tB,UAAA,gCAAAoD,OAAA,CAAA2pB,KAAA,OAAAlpB,MAAA,QAAAhD,KAAA,OAAAgtB,mBAAA,qBAAAH,mBAAA,qBAAA6B,oBAAA,sBAAAlC,kBAAA,oBAAAoC,0BAAA,4BAAAH,OAAA,SAAAf,OAAA,SAAAjoB,UAAA,aAAA/C,SAAA,CAAAlD,OAAAmD,MAAA,EAAAC,KAAA,EAAAC,OAAA,4UAAAC,SAAA,SAAAzD,EAAAC,GAAA,EAAAD,IDdzCG,MAAA,EAAAsvB,GAAA,sBAyBAtvB,MAAA,EAAAuvB,EAAA,oBAzBevvB,MAAA,QAAAF,EAAAovB,qBAyBalvB,MAAA,GAAAA,MAAA,SAAAF,EAAAovB,yXEjBtB,MAAOM,EAMXtxB,cAAgB,CAEhBuxB,oBACEtxB,KAAK8H,UAAUC,MAAMooB,OAAOoB,KAAKvxB,KAAKwxB,YAcxC,EAvBWH,EAA2B,mBAAAhwB,iBAA3BgwB,EAA2B,EAA3BA,EAA2B,UAAArD,EAAAzsB,IAAA,MAA3B8vB,EAA2B7vB,UAAA,+BAAAoD,OAAA,CAAA4sB,WAAA,aAAA1pB,UAAA,aAAA9C,MAAA,GAAAC,KAAA,EAAAC,OAAA,+MAAAC,SAAA,SAAAzD,EAAAC,GAAA,EAAAD,ICRxCG,MAAA,aAAAA,CAA2F,SACvDA,MAAA,WAAKA,UAGzCA,MAAA,WACIA,MAAA,wBACJA,QAEAA,MAAA,UAAAA,CAA8B,cACkBA,MAAA,0BAASF,EAAA2vB,mBAAmB,GAAEzvB,MAAA,wBAAmEA,iBAT7EA,MAAA,oBAKhEA,MAAA,GAAAA,MAAA,IAAAA,MAAA,yDAI0EA,MAAA,GAAAA,YAAA,kSCA1DA,MAAA,mBACIA,MAAA,GACJA,kCAFuDA,MAAA,QAAA4vB,GACnD5vB,MAAA,GAAAA,MAAA,IAAA4vB,EAAAC,KAAA,gCAOZ7vB,MAAA,YACIA,MAAA,uBACJA,+BADoBA,MAAA,GAAAA,MAAA,QAAA4H,EAAAkoB,MAAAC,kBAAAC,KAAA,4BAGpBhwB,MAAA,WAAAA,CAAmF,aAE3EA,MAAA,wBACJA,QAEAA,MAAA,aACIA,MAAA,0BACJA,iCALIA,MAAA,GAAAA,MAAA,IAAAA,MAAA,8CAIAA,MAAA,GAAAA,MAAA,IAAAA,MAAA,IAAAqH,EAAAyoB,MAAAC,kBAAAE,cAAA,KAAA5oB,EAAA6oB,QAAA,+BAIRlwB,MAAA,YACIA,MAAA,kEACJA,+BAD6BA,MAAA,GAAAA,MAAA,UAAAmwB,EAAA1N,QAAA0N,EAAAC,QAAApwB,CAAgC,WAAAmwB,EAAA1N,QAAA0N,EAAAE,UAAhCrwB,CAAgC,QAAAA,MAAA,IAAAA,MAAA,IAAAmwB,EAAAG,sBAAA,iBAAhCtwB,CAAgC,SAAAmwB,EAAAjC,OAAA,4BAG7DluB,MAAA,YACIA,MAAA,wBACJA,+BADqCA,MAAA,GAAAA,MAAA,SAAAyH,EAAA6oB,sBAAAtwB,CAAqC,QAArCA,CAAqC,aAArCA,CAAqC,SAAAyH,EAAAymB,OAAA,4BApB9EluB,MAAA,GACIA,MAAA,EAAAuwB,GAAA,cAIAvwB,MAAA,EAAAwwB,GAAA,cAUAxwB,MAAA,EAAAywB,EAAA,eAIAzwB,MAAA,EAAA0wB,GAAA,cAGJ1wB,8BArBuBA,MAAA,GAAAA,MAAA,SAAAyD,EAAAqsB,MAAAC,kBAAAC,MAIAhwB,MAAA,GAAAA,MAAA,OAAAyD,EAAAktB,aAAAltB,EAAAqsB,MAAAC,kBAAAE,cAAA,GAUAjwB,MAAA,GAAAA,MAAA,OAAAyD,EAAAqsB,MAAAC,kBAAAa,MAAAntB,EAAAotB,0BAAAC,SAIA9wB,MAAA,GAAAA,MAAA,OAAAyD,EAAAqsB,MAAAC,kBAAAa,MAAAntB,EAAAotB,0BAAAE,SAAA,4BASP/wB,MAAA,YACIA,MAAA,uBACJA,+BADoBA,MAAA,GAAAA,MAAA,QAAAgxB,EAAAlB,MAAAC,kBAAAC,KAAA,4BAGpBhwB,MAAA,WAAAA,CAAmF,aAE3EA,MAAA,wBACJA,QAEAA,MAAA,aACIA,MAAA,0BACJA,iCALIA,MAAA,GAAAA,MAAA,IAAAA,MAAA,8CAIAA,MAAA,GAAAA,MAAA,IAAAA,MAAA,IAAAixB,EAAAnB,MAAAC,kBAAAE,cAAA,KAAAgB,EAAAf,QAAA,+BAKJlwB,MAAA,qCAA2CA,MAAA,MAAAkxB,EAAAlxB,MAAA,4BAD/CA,MAAA,YACIA,MAAA,EAAAmxB,GAAA,cACJnxB,+BADqFA,MAAA,GAAAA,MAAA,UAAAoxB,EAAAC,qBAAA,4BAhBzFrxB,MAAA,GACIA,MAAA,EAAAsxB,GAAA,cAIAtxB,MAAA,EAAAuxB,GAAA,cAUAvxB,MAAA,EAAAwxB,GAAA,cAGJxxB,+BAjBuBA,MAAA,GAAAA,MAAA,SAAAyxB,EAAA3B,MAAAC,kBAAAC,MAIAhwB,MAAA,GAAAA,MAAA,OAAAyxB,EAAAd,aAAAc,EAAA3B,MAAAC,kBAAAE,cAAA,GAUKjwB,MAAA,GAAAA,MAAA,aAAAyxB,EAAAJ,sBAAAI,EAAAJ,qBAAAxwB,OAAA,8BASZb,MAAA,mBACIA,MAAA,GACJA,kCAFmDA,MAAA,QAAA0xB,GAC/C1xB,MAAA,GAAAA,MAAA,IAAA0xB,EAAA7B,KAAA,gCAgCxB7vB,MAAA,WAAAA,CAAuD,YAE/CA,MAAA,wBAEAA,MAAA,YACIA,MAAA,WAAAA,CAAkE,YAEtEA,UAGJA,MAAA,YACIA,MAAA,wBACJA,8EAVIA,MAAA,GAAAA,MAAA,IAAAA,MAAA,wDASiBA,MAAA,GAAAA,MAAA,YAAA2xB,EAAA3xB,CAAuB,kBAAA0H,EAAvB1H,CAAuB,sBAAA4xB,EAAvB5xB,CAAuB,oBAAA6xB,EAAA,0GAvExD7xB,MAAA,QAAAA,CAAoF,WAApFA,CAAoF,YAGxEA,MAAA,EAAA8xB,GAAA,sBAoBA9xB,MAAA,WAAAA,CAAiB,WAAjBA,CAAiB,sBAAjBA,CAAiB,mBAGwDA,MAAA,yBAAAC,GAAAD,MAAA+xB,GAAA,MAAAC,EAAAhyB,QAAA,OAAaA,MAAAgyB,EAAAlC,MAAAmC,UAAAhyB,EAAuB,EAApCD,CAA6B,2BAAAA,MAAA+xB,GAAA,MAAAG,EAAAlyB,QAAA,OAAkBA,MAAAkyB,EAAAC,iBAAgB,wBACxHnyB,MAAA,EAAAoyB,GAAA,oBAGJpyB,YAIRA,MAAA,YAAAA,CAA6B,uBAA7BA,CAA6B,kBAE4BA,MAAA,yBAAAC,GAAAD,MAAA+xB,GAAA,MAAAM,EAAAryB,QAAA,OAAaA,MAAAqyB,EAAAvC,MAAAwC,YAAAryB,EAAyB,EAAtCD,CAA+B,2BAAAA,MAAA+xB,GAAA,MAAAQ,EAAAvyB,QAAA,OAAiFA,MAAAuyB,EAAAJ,iBAAgB,yBAAjLnyB,cAKZA,MAAA,YAAAA,CAAiB,YAAjBA,CAAiB,uBAAjBA,CAAiB,kBAG8CA,MAAA,yBAAAC,GAAAD,MAAA+xB,GAAA,MAAAS,EAAAxyB,QAAA,OAAaA,MAAAwyB,EAAA1C,MAAA2C,gBAAAxyB,EAA6B,EAA1CD,CAAmC,2BAAAA,MAAA+xB,GAAA,MAAAW,EAAA1yB,QAAA,OAA0FA,MAAA0yB,EAAAP,iBAAgB,yBAAhMnyB,YAIRA,MAAA,YAAAA,CAA6B,uBAA7BA,CAA6B,kBAEgCA,MAAA,yBAAAC,GAAAD,MAAA+xB,GAAA,MAAAY,EAAA3yB,QAAA,OAAAA,MAAA2yB,EAAAC,aAAA3yB,EAAA,EAAAD,CAA0B,2BAAAA,MAAA+xB,GAAA,MAAAc,EAAA7yB,QAAmF6yB,SAAAC,oBAAqB9yB,MAAA6yB,EAAAV,iBAAgB,yBAAvMnyB,cAKZA,MAAA,uBAAAA,CAA8B,kBACiBA,MAAA,yBAAAC,GAAAD,MAAA+xB,GAAA,MAAAgB,EAAA/yB,QAAA,OAAaA,MAAA+yB,EAAAjD,MAAAkD,cAAA/yB,EAA2B,EAAxCD,CAAiC,2BAAAA,MAAA+xB,GAAA,MAAAkB,EAAAjzB,QAAA,OAAmFA,MAAAizB,EAAAd,iBAAgB,yBAA/KnyB,YAIRA,MAAA,GAAAkzB,GAAA,cAcJlzB,SAAM,yBAxEGA,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAI,IAAAgtB,EAAA/rB,SAAA+rB,EAAA/rB,WACcrB,MAAA,GAAAA,MAAA,QAAAotB,EAAA/rB,UAuBSrB,MAAA,GAAAA,MAAA,+CAAAA,CAAgD,UAAAotB,EAAA0C,MAAAmC,UAAhDjyB,CAAgD,cAAAA,MAAA,4CAAhDA,CAAgD,WAAAotB,EAAA/rB,UACtBrB,MAAA,GAAAA,MAAA,UAAAotB,EAAA+F,cASWnzB,MAAA,GAAAA,MAAA,UAAAotB,EAAA0C,MAAAwC,YAAAtyB,CAA+B,cAAAA,MAAA,0CAA/BA,CAA+B,WAAAotB,EAAA/rB,SAA/BrB,CAA+B,WAAAotB,EAAA/rB,UAQ7BrB,MAAA,GAAAA,MAAA,UAAAotB,EAAA0C,MAAA2C,gBAAAzyB,CAAmC,cAAAA,MAAA,mDAAnCA,CAAmC,WAAAotB,EAAA/rB,SAAnCrB,CAAmC,WAAAotB,EAAA/rB,UAMjCrB,MAAA,GAAAA,MAAA,UAAAotB,EAAAwF,aAAA5yB,CAA0B,cAAAA,MAAA,4CAA1BA,CAA0B,WAAAotB,EAAA/rB,SAA1BrB,CAA0B,WAAAotB,EAAA/rB,UAM5CrB,MAAA,GAAAA,MAAA,UAAAotB,EAAA0C,MAAAkD,cAAAhzB,CAAiC,cAAAA,MAAA,4CAAjCA,CAAiC,WAAAotB,EAAA/rB,SAAjCrB,CAAiC,WAAAotB,EAAA/rB,UAI9CrB,MAAA,GAAAA,MAAA,QAAAotB,EAAA/rB,SAAA,2BAmBtCrB,MAAA,WAAAA,CAAqE,aACrBA,MAAA,wBAAiDA,QAC7FA,MAAA,aAA2BA,MAAA,GAAiCA,iCADhBA,MAAA,GAAAA,YAAA,wCACjBA,MAAA,GAAAA,MAAAozB,EAAAtD,MAAAC,kBAAAsD,MAAA,2BAG/BrzB,MAAA,WAAAA,CAAiF,aACjCA,MAAA,wBAAwDA,QACpGA,MAAA,aAA2BA,MAAA,GAA6CA,iCAD5BA,MAAA,GAAAA,YAAA,+CACjBA,MAAA,GAAAA,MAAAszB,EAAAxD,MAAAC,kBAAAwD,kBAAA,2BAG/BvzB,MAAA,WAAAA,CAAoE,aACpBA,MAAA,wBAAgDA,QAC5FA,MAAA,aAA2BA,MAAA,GAAgCA,iCADfA,MAAA,GAAAA,YAAA,uCACjBA,MAAA,GAAAA,MAAAwzB,EAAA1D,MAAAC,kBAAA0D,KAAA,2BAG/BzzB,MAAA,WAAAA,CAAqE,aACrBA,MAAA,wBAAiDA,QAC7FA,MAAA,aAA2BA,MAAA,GAAiCA,iCADhBA,MAAA,GAAAA,YAAA,wCACjBA,MAAA,GAAAA,MAAA0zB,EAAA5D,MAAAC,kBAAA4D,MAAA,0CAW/B3zB,MAAA,WAAAA,CAAuD,UACXA,MAAA,iBAAAC,GAAAD,MAAA4zB,GAAA,MAAAC,EAAA7zB,MAAA,GAASC,SAAA4U,iBAAyB7U,MAAA6zB,EAAAC,gBAAe,GAAG9zB,MAAA,wBAAyDA,SAAI,OAA7DA,MAAA,GAAAA,YAAA,yFARpGA,MAAA,WAAAA,CAAsD,WAAtDA,CAAsD,sBAAtDA,CAAsD,cAGVA,MAAA,yBAAAC,GAAAD,MAAA+zB,GAAA,MAAAC,EAAAh0B,MAAA,UAAaA,MAAAg0B,EAAAlE,MAAAmE,4BAAAh0B,EAAyC,EAAtDD,CAA+C,2BAAAA,MAAA+zB,GAAA,MAAAG,EAAAl0B,MAAA,UAAkBA,MAAAk0B,EAAA/B,iBAAgB,wBAAjHnyB,YAIRA,MAAA,EAAAm0B,EAAA,cAGJn0B,OAAA,0BAP4CA,MAAA,GAAAA,MAAA,UAAAo0B,EAAAtE,MAAAmE,4BAAAj0B,CAA+C,cAAAA,MAAA,6DAA/CA,CAA+C,WAAAo0B,EAAA/yB,SAA/CrB,CAA+C,WAAAo0B,EAAA/yB,UAIjDrB,MAAA,GAAAA,MAAA,QAAAo0B,EAAA/yB,SAAA,iEA9B9CrB,MAAA,QAAAA,CAAwF,YAEhFA,MAAA,EAAAq0B,EAAA,cAKAr0B,MAAA,EAAAs0B,EAAA,cAKAt0B,MAAA,EAAAu0B,EAAA,cAKAv0B,MAAA,EAAAw0B,EAAA,cAIJx0B,QAEAA,MAAA,EAAAy0B,EAAA,cAWJz0B,8BAjCqBA,MAAA,GAAAA,MAAA,UAAAA,MAAA,EAAA6sB,GAAAjpB,EAAA8wB,kBACiB10B,MAAA,GAAAA,MAAA,SAAA4D,EAAAksB,MAAAC,kBAAAsD,OAKArzB,MAAA,GAAAA,MAAA,SAAA4D,EAAAksB,MAAAC,kBAAAwD,mBAKAvzB,MAAA,GAAAA,MAAA,SAAA4D,EAAAksB,MAAAC,kBAAA0D,MAKAzzB,MAAA,GAAAA,MAAA,SAAA4D,EAAAksB,MAAAC,kBAAA4D,OAMhB3zB,MAAA,GAAAA,MAAA,QAAA4D,EAAAvC,UAAAuC,EAAA8wB,gBAAA,0CAuCtB10B,MAAA,QAAAA,CAAuB,qBAC2BA,MAAA,oBAAAA,MAAA20B,GAAA,MAAAC,EAAA50B,QAAA,OAAUA,MAAA40B,EAAAzC,iBAAgB,EAA1BnyB,CAA2B,yBAAAC,GAAAD,MAAA20B,GAAA,MAAAE,EAAA70B,QAAA,OAAcA,MAAA60B,EAAA/E,MAAAgF,QAAA70B,EAAqB,GACxGD,MAAA,UAAyCA,MAAA,iBAAAC,GAAAD,MAAA20B,GAAA,MAAAI,EAAA/0B,QAASC,SAAA4U,iBAAyB7U,MAAA+0B,EAAAC,oBAAmB,GAAGh1B,MAAA,wBAAmDA,WAAI,yBADlFA,MAAA,GAAAA,MAAA,UAAA8G,EAAAgpB,MAAAgF,QAAA90B,CAA2B,WAAA8G,EAAAzF,UACArB,MAAA,GAAAA,YAAA,iEAMjGA,MAAA,aAAoDA,MAAA,wBAA0EA,eAA1EA,MAAA,GAAAA,YAAA,2GACpDA,MAAA,UAAqDA,MAAA,iBAAAC,GAAAD,MAAAi1B,GAAA,MAAAC,EAAAl1B,MAAA,GAASC,SAAA4U,iBAAyB7U,MAAAk1B,EAAAC,gCAA+B,GAAiCn1B,MAAA,wBAA0EA,OAAA,OAA1EA,MAAA,GAAAA,YAAA,0GAF3JA,MAAA,qBAA8CA,MAAA,oBAAAA,MAAAo1B,GAAA,MAAAC,EAAAr1B,MAAA,UAAUA,MAAAq1B,EAAAlD,iBAAgB,EAA1BnyB,CAA2B,yBAAAC,GAAAD,MAAAo1B,GAAA,MAAAE,EAAAt1B,MAAA,UAAAA,MAAAs1B,EAAAC,oBAAAt1B,EAAA,GACrED,MAAA,EAAAw1B,EAAA,eACAx1B,MAAA,EAAAy1B,GAAA,YACJz1B,OAAA,0BAH0EA,MAAA,UAAA01B,EAAAH,oBAAAv1B,CAAiC,WAAA01B,EAAAr0B,UAC/ErB,MAAA,GAAAA,MAAA,QAAA01B,EAAAC,qBACkG31B,MAAA,GAAAA,MAAA,SAAA01B,EAAAC,oBAAA,4BAHlI31B,MAAA,SACIA,MAAA,EAAA41B,EAAA,uBAIJ51B,8BAJgJA,MAAA,GAAAA,MAAA,OAAA8sB,EAAA+I,oCAAA,yBAQxI71B,MAAA,aAAgHA,MAAA,wBAAoEA,eAApEA,MAAA,GAAAA,YAAA,qGAChHA,MAAA,UAA4CA,MAAA,iBAAAC,GAAAD,MAAA81B,GAAA,MAAAC,EAAA/1B,MAAA,GAASC,SAAA4U,iBAAyB7U,MAAA+1B,EAAAC,uBAAsB,GAA8Fh2B,MAAA,wBAAoEA,OAAA,OAApEA,MAAA,GAAAA,YAAA,qGAH1MA,MAAA,QAAAA,CAAuB,qBAC2BA,MAAA,oBAAAA,MAAAi2B,GAAA,MAAAC,EAAAl2B,QAAA,OAAUA,MAAAk2B,EAAA/D,iBAAgB,EAA1BnyB,CAA2B,yBAAAC,GAAAD,MAAAi2B,GAAA,MAAAE,EAAAn2B,QAAA,OAAcA,MAAAm2B,EAAArG,MAAAsG,WAAAn2B,EAAwB,GAC3GD,MAAA,EAAAq2B,GAAA,eACAr2B,MAAA,EAAAs2B,GAAA,YACJt2B,SAAe,yBAH2DA,MAAA,GAAAA,MAAA,UAAA8D,EAAAgsB,MAAAsG,WAAAp2B,CAA8B,WAAA8D,EAAAzC,UAC5ErB,MAAA,GAAAA,MAAA,aAAA8D,EAAAyyB,oBAAAzyB,EAAAyyB,kBAAA7J,OAAA5oB,EAAAyyB,kBAAA7yB,KACgF1D,MAAA,GAAAA,MAAA,eAAA8D,EAAAyyB,oBAAAzyB,EAAAyyB,kBAAA7J,OAAA5oB,EAAAyyB,kBAAA7yB,KAAA,2CAKpH1D,MAAA,WAAAA,CAAuE,mBAEvDA,MAAA,sBAAAA,MAAAw2B,GAAA,MAAAC,EAAAz2B,QAAAy2B,SAAAC,mBAAgC,EAAM12B,MAAAy2B,EAAAtE,iBAAgB,GAA0DnyB,SAAa,OAApEA,MAAA,GAAAA,MAAA,wIAIrEA,MAAA,eAA+FA,MAAA,mBAAAA,MAAA22B,GAAA,MAAAC,EAAA52B,MAAA,UAASA,MAAA42B,EAAAC,MAAK,GACzG72B,MAAA,aAA0DA,MAAA,WAAKA,QAC/DA,MAAA,aAA2BA,MAAA,wBAA2IA,SAAO,0BAFzHA,MAAA,UAAAA,MAAA,EAAAitB,GAAA6J,EAAAC,iBAAA/2B,CAAsC,YAAA82B,EAAAE,mBAAAF,EAAAG,WAE/Dj3B,MAAA,GAAAA,MAAA82B,EAAAhH,MAAAC,kBAAAmH,iBAAAJ,EAAAhH,MAAAC,kBAAAmH,iBAAAl3B,MAAA,kEAHnCA,MAAA,YACIA,MAAA,EAAAm3B,GAAA,iBAIJn3B,8BAJiKA,MAAA,GAAAA,MAAA,OAAAuH,EAAAuoB,MAAAC,kBAAAa,MAAArpB,EAAAspB,0BAAAuG,OAAA,qDCjJ/J,MAAOC,WAA+B92B,IA8D7B+2B,YAAQp3B,GACnB/B,KAAKo5B,OAASr3B,EACd/B,KAAKq5B,kBACP,CAEaC,yCAAqCv3B,GACnC,MAATA,IACF/B,KAAK03B,oCAAsC31B,EAC3C/B,KAAKo3B,qBAAuBr1B,EAEhC,CASaw3B,qBAAiBx3B,GACf,MAATA,IACF/B,KAAKw5B,gBAAkBz3B,EACvB/B,KAAKu4B,mBAAqBx2B,EAE9B,CAEa03B,yBAAqB13B,GAChC,GAAa,MAATA,GAAmBA,EAAM23B,YAAgB33B,EAAMguB,OAAQ,CACzD/vB,KAAK05B,WAAa33B,EAAM23B,WACxB15B,KAAK25B,WAAa53B,EAAM43B,WACxB35B,KAAK+vB,OAAShuB,EAAMguB,OAEpB,IAAI6J,EAAK,IAAIC,MA2Bb,GA1BAD,EAAGF,WAAa15B,KAAK05B,WACrBE,EAAGD,WAAa35B,KAAK25B,WACrBC,EAAG7J,OAAS/vB,KAAK+vB,OAEjB/vB,KAAK85B,WAAWC,qBAAqBH,GAAI7N,UAAWiO,IAKlD,GAJAh6B,KAAKg1B,aAAegF,EAAI/N,KAAKgO,iBAE7Bj6B,KAAKkzB,qBAAuB,GAEH,MAArBlzB,KAAKg1B,cAAwBh1B,KAAKg1B,aAAatyB,OAAS,EAAG,CAC7D1C,KAAK2xB,MAAMmC,UAAY9zB,KAAKg1B,aAAa,GAEzC,QAASkF,KAASl6B,KAAKg1B,aACrB,GAA8B,MAA1BkF,EAAMC,iBAA0B,CAClC,IAAIC,EAAWp6B,KAAKq6B,yBAAyBxO,IAAIqO,EAAMC,kBAEjDC,IAAap6B,KAAKkzB,qBAAqBloB,SAASovB,IACpDp6B,KAAKkzB,qBAAqBld,KAAKokB,EAAQ,EAM/Cp6B,KAAKo4B,kBAAoB4B,EAAI/N,KAAKmM,oBAGN,MAA1Bp4B,KAAK4xB,mBAA8D,GAAjC5xB,KAAK4xB,kBAAkBlvB,OAAa,CACxE1C,KAAKs6B,iCAAkC,EAEvC,IAAIV,EAAK,IAAIW,MACbX,EAAGF,WAAa15B,KAAK05B,WACrBE,EAAG7J,OAAS/vB,KAAK+vB,OAEjB/vB,KAAK85B,WAAWU,4BAA4BZ,GAAI7N,UAAWiO,IACpDh6B,KAAKy6B,qBAWHz6B,KAAK06B,mCACR16B,KAAKy6B,sBAAuB,GAXd,MAAZT,EAAI/N,MACNjsB,KAAK4xB,kBAAoB,CAACoI,EAAI/N,MAC9BjsB,KAAK2xB,MAAMC,kBAAoBoI,EAAI/N,KACnCjsB,KAAKq5B,qBAELr5B,KAAK4xB,kBAAoB,GACzB5xB,KAAK2xB,MAAMC,kBAAoB,IAAI+I,OAAc,GACjD36B,KAAK46B,gBAAgB54B,QAQzBhC,KAAKs6B,iCAAkC,GACxC,EAGP,CAEaO,uBAAmB94B,GAC9B,GAAa,MAATA,EAGF,GAFA/B,KAAK4xB,kBAAoB7vB,EAErB/B,KAAK4xB,kBAAkBlvB,OAAS,EAAG,CAKrC,IAJI1C,KAAKs6B,iCAAmCt6B,KAAK06B,oCAC/C16B,KAAKy6B,sBAAuB,GAGM,MAAhCz6B,KAAK2xB,MAAMC,mBAA6B5xB,KAAK2xB,MAAMC,kBAAkBkJ,WAAa,EACpF96B,KAAK2xB,MAAMC,kBAAoB5xB,KAAK4xB,kBAAkB,OACjD,CACL,IAAImJ,EAAW/6B,KAAK4xB,kBAAkBoJ,KAAKC,GAAKA,EAAEH,WAAa96B,KAAK2xB,MAAMC,kBAAkBkJ,WAG1F96B,KAAK2xB,MAAMC,kBADG,MAAZmJ,EAC6B/6B,KAAK4xB,kBAAkB,GAEvBmJ,EAInC/6B,KAAKq5B,kBAAgB,SACZr5B,KAAK05B,WAAa,GAAO15B,KAAK+vB,OAAQ,CAC/C/vB,KAAK06B,kCAAmC,EAExC,IAAId,EAAK,IAAIW,MACbX,EAAGF,WAAa15B,KAAK05B,WACrBE,EAAG7J,OAAS/vB,KAAK+vB,OAEjB/vB,KAAK85B,WAAWU,4BAA4BZ,GAAI7N,UAAWiO,IACpDh6B,KAAKy6B,qBAWHz6B,KAAKs6B,kCACRt6B,KAAKy6B,sBAAuB,GAXd,MAAZT,EAAI/N,MACNjsB,KAAK4xB,kBAAoB,CAACoI,EAAI/N,MAC9BjsB,KAAK2xB,MAAMC,kBAAoBoI,EAAI/N,KACnCjsB,KAAKq5B,qBAELr5B,KAAK4xB,kBAAoB,GACzB5xB,KAAK2xB,MAAMC,kBAAoB,IAAI+I,OAAc,GACjD36B,KAAK46B,gBAAgB54B,QAQzBhC,KAAK06B,kCAAmC,GACzC,CAGP,CAKaQ,eAAWn5B,GACtB/B,KAAK84B,UAAY/2B,EACjB/B,KAAKm7B,0BACP,CAKaC,YAAQr5B,GAEN,MAATA,IAAiC,MAAf/B,KAAKq7B,QAAkBC,KAAKC,UAAUx5B,IAAUu5B,KAAKC,UAAUv7B,KAAKq7B,WACxFr7B,KAAKq7B,OAASt5B,EACd/B,KAAKq5B,mBAET,CAIamC,yBAAqBz5B,GACnB,MAATA,GACFa,WAAW,KACT,IAAI64B,EAAS15B,EAAMi5B,KAAKC,GAAKA,EAAExI,MAAQiJ,KAAsBzC,QAE/C,MAAVwC,GACFz7B,KAAK27B,iBAAiBF,EAAOG,gBAG/B,IAAIC,EAAS95B,EAAMi5B,KAAKC,GAAKA,EAAExI,MAAQiJ,KAAsBI,QAE/C,MAAVD,GACoD,MAAlDnrB,SAASqrB,eAAe,wBAC1B/7B,KAAKg8B,eAAenL,mBAAmB7wB,KAAKi8B,eAAer0B,KAAK,KAC9D5H,KAAK67B,OAASC,OAAOD,EAAOK,iBAE5B,IAAIC,EAAWn8B,KAAK67B,OAAOM,WAE3Bn8B,KAAKo8B,kBAAoBD,EAASE,OAAO,aAAc,CACrDn6B,YAAa,KAGflC,KAAKo8B,kBAAkBxM,MAAM,wBAE7B5vB,KAAKo8B,kBAAkBrmB,GAAG,SAAWhF,KAC/BA,GAAMurB,SACRt8B,KAAKu8B,uBAAwB,EACpBxrB,GAAMob,QACfnsB,KAAKu8B,uBAAwB,GAG/Bv8B,KAAKg0B,gBAAc,GAGrB,IAAIwI,GAAoBL,EAASE,OAAO,cAExCG,GAAkB5M,MAAM,wBAExB4M,GAAkBzmB,GAAG,SAAWhF,KAC1BA,GAAMurB,SACRt8B,KAAKy8B,uBAAwB,EACpB1rB,GAAMob,QACfnsB,KAAKy8B,uBAAwB,GAG/Bz8B,KAAKg0B,gBAAc,GAGrB,IAAI0I,GAAiBP,EAASE,OAAO,UAAW,CAC9Cn6B,YAAa,KAGfw6B,GAAe9M,MAAM,qBAErB8M,GAAe3mB,GAAG,SAAWhF,KACvBA,GAAMurB,SACRt8B,KAAK28B,gBAAiB,EACb5rB,GAAMob,QACfnsB,KAAK28B,gBAAiB,GAGxB38B,KAAKg0B,gBAAc,EACpB,GAKP,IAAI4I,EAAW76B,EAAMi5B,KAAKC,GAAKA,EAAExI,MAAQiJ,KAAsBmB,UAG/C,MAAZD,GACF58B,KAAKg8B,eAAenL,mBAAmB+L,EAAS9L,OAAS9wB,KAAK88B,yBAA2B98B,KAAK+8B,oBAAqB,CAAC,CAAE/4B,KAAM,kBAAmBjC,MAAO,UAK3I,MAFDA,EAAMi5B,KAAKC,GAAKA,EAAExI,MAAQiJ,KAAsBsB,QAG1Dh9B,KAAKg8B,eAAenL,mBAAmB7wB,KAAKi9B,kBAKjC,MAFDl7B,EAAMi5B,KAAKC,GAAKA,EAAExI,MAAQiJ,KAAsBwB,gBAG1Dl9B,KAAKg8B,eAAenL,mBAAmB7wB,KAAKm9B,6BAG9C,IAAIC,GAASr7B,EAAMi5B,KAAKC,GAAKA,EAAExI,MAAQiJ,KAAsB2B,QAE/C,MAAVD,IACFp9B,KAAKg8B,eAAenL,mBAAmBuM,GAAOtM,OAAS9wB,KAAKs9B,mBAAqBt9B,KAAKu9B,eAGxF,IAAIC,GAAUz7B,EAAMi5B,KAAKC,GAAKA,EAAExI,MAAQiJ,KAAsB/I,SAE/C,MAAX6K,IACFx9B,KAAKg8B,eAAenL,mBAAmB7wB,KAAKy9B,mBAAqBD,GAAQE,gBAK3D,MAFD37B,EAAMi5B,KAAKC,GAAKA,EAAExI,MAAQiJ,KAAsB9I,YAG7D5yB,KAAKg8B,eAAenL,mBAAmB7wB,KAAK29B,wBAAyB,CAAC,IAAIC,MAAgB,OAAQ,YAClG59B,KAAKg8B,eAAenL,mBAAmB7wB,KAAK69B,oBAAqB,CAAC,IAAID,MAAgB,cAAY,EAEnG,IAEP,CAIaE,aAAS/7B,GACpB/B,KAAK+9B,QAAUh8B,EACf/B,KAAKq5B,kBACP,CAEa2E,0BAAsBj8B,GACjC/B,KAAKi+B,qBAAuBl8B,EAC5B/B,KAAKq5B,kBACP,CAYa1C,YAAQ50B,GACN,MAATA,IACF/B,KAAK2xB,MAAMgF,QAAU50B,EACrB/B,KAAKg0B,iBAET,CAEaiE,eAAWl2B,GACT,MAATA,IACF/B,KAAK2xB,MAAMsG,WAAal2B,EAE5B,CAyDAm8B,oBAAoBntB,GACC,MAAf/Q,KAAKmwB,QACPnwB,KAAKmwB,OAAOpoB,OAEhB,CAEAhI,YAAsB+5B,EACVqE,EACAnC,EACAoC,GACV55B,QAJoBxE,KAAA85B,aACV95B,KAAAm+B,mBACAn+B,KAAAg8B,iBACAh8B,KAAAo+B,eA5aLp+B,KAAAq+B,gBAA0B,YAC1Br+B,KAAA0yB,0BAA4BgJ,KAC5B17B,KAAA2xB,MAAsB,IAAI2M,MAO1Bt+B,KAAA4xB,kBAAqC,GAIrC5xB,KAAAs6B,iCAA2C,EAC3Ct6B,KAAA06B,kCAA4C,EAC5C16B,KAAAy6B,sBAAgC,EAEhCz6B,KAAAkzB,qBAAiC,GAGjClzB,KAAAu+B,oBAA8B,oBAAqD,OAA/BC,IAAYC,gBAA2B,YAAc,gBAAkB,kDAC3Hz+B,KAAA0+B,kBAA4B,oBAAqD,OAA/BF,IAAYC,gBAA2B,YAAc,gBAAkB,gDAKzHz+B,KAAAu8B,uBAAiC,EACjCv8B,KAAAy8B,uBAAiC,EACjCz8B,KAAA28B,gBAA0B,EAI1B38B,KAAAq6B,yBAA0D,IAAIsE,IAAI,CACvE,CAACrR,KAAiBE,KAAM,+CACxB,CAACF,KAAiBC,gBAAiB,2DACnC,CAACD,KAAiBO,WAAY,qDAC9B,CAACP,KAAiBI,cAAe,mDACjC,CAACJ,KAAiBG,WAAY,iDAC9B,CAACH,KAAiBK,IAAK,8CACvB,CAACL,KAAiBsR,SAAU,IAC5B,CAACtR,KAAiBuR,SAAU,IAC5B,CAACvR,KAAiBwR,aAAc,IAChC,CAACxR,KAAiByR,UAAW,IAC7B,CAACzR,KAAiB0R,aAAc,IAChC,CAAC1R,KAAiBM,QAAS,kDAC3B,CAACN,KAAiB2R,QAAS,IAC3B,CAAC3R,KAAiB4R,WAAY,IAC9B,CAAC5R,KAAiB6R,cAAe,IACjC,CAAC7R,KAAiBQ,cAAe,mDACjC,CAACR,KAAiB8R,QAAS,IAC3B,CAAC9R,KAAiB+R,qBAAsB,IACxC,CAAC/R,KAAiBgS,aAAc,IAChC,CAAChS,KAAiBiS,MAAO,IACzB,CAACjS,KAAiBkS,aAAc,IAChC,CAAClS,KAAiBmS,YAAa,MAG1Bz/B,KAAA0/B,gBAA0B,EAiBxB1/B,KAAA2/B,YAAsB,eAEtB3/B,KAAA4/B,WAAqB,EA6PrB5/B,KAAAwyB,aAAuB,EAYvBxyB,KAAA44B,iBAA2B,EAuB1B54B,KAAA6/B,YAA0C,IAAI3/B,MAC9CF,KAAA46B,gBAAqC,IAAI16B,MACzCF,KAAA8/B,eAAuC,IAAI5/B,MAC3CF,KAAA+/B,gBAAwC,IAAI7/B,MAS/CF,KAAAggC,mBAA6B,EAK7BhgC,KAAAw5B,iBAA2B,EAC3Bx5B,KAAAu4B,mBAA6B,EAE7Bv4B,KAAA03B,qCAA+C,EAC/C13B,KAAAo3B,qBAA+B,EAE/Bp3B,KAAAigC,6BAAuC,EAIvCjgC,KAAAkgC,cAAwB,EAMflgC,KAAAmgC,sBAAwB,oCACxBngC,KAAAogC,2BAA6B,4CAE7BpgC,KAAAm9B,4BAA8B,gCAE9Bn9B,KAAA+8B,oBAAsB,4CACtB/8B,KAAA88B,yBAA2B,oDAE3B98B,KAAAi9B,iBAAmB,wDAEnBj9B,KAAAi8B,cAAgB,4BAEhBj8B,KAAAu9B,cAAgB,6CAChBv9B,KAAAs9B,mBAAqB,qDAErBt9B,KAAAy9B,mBAAqB,+CAErBz9B,KAAA69B,oBAAsB,2DACtB79B,KAAA29B,wBAA0B,8DAe1C,CAEA/R,WACEuE,OAAO9e,iBAAiB,UAAYN,IACb,uCAAhBA,EAAMsvB,QAAmE,+BAAhBtvB,EAAMsvB,QAA0D,MAAdtvB,EAAMkb,MAAmC,kBAAnBlb,EAAMkb,KAAK5lB,MAYvH,0BAAd0K,EAAMkb,MAAkD,0BAAdlb,EAAMkb,MAAkD,mBAAdlb,EAAMkb,QAA+BjsB,KAAKigC,6BACxIjgC,KAAKsgC,mBAAmBvvB,GAZC,SAArBA,EAAMkb,KAAKsU,QACb39B,WAAW,KACJ5C,KAAKggC,kBAKRhgC,KAAKggC,mBAAoB,EAJnBhgC,KAAKwgC,mBACTxgC,KAAKygC,qBAAoB,GAAO74B,KAAK,OAAW,OAAS,EAK5D,IAGwB,GAE9B,GAEH5H,KAAK0gC,gBAAkB1gC,KAAKo+B,aAAauC,QAAQ,qBAAqB5U,UAAU,KAC3D,MAAf/rB,KAAKmwB,SACPnwB,KAAKkgC,cAAe,EACpBlgC,KAAK4gC,mBAAkB,GAAI,GAIzB5gC,KAAKq+B,iBAAmBr+B,KAAK6gC,cACL,aAAxB7gC,KAAKq+B,iBACPr+B,KAAKu+B,oBAAsBpO,OAAO2Q,SAAST,OAAS,4CACpDrgC,KAAK0+B,kBAAoBvO,OAAO2Q,SAAST,OAAS,2CACjB,OAAxBrgC,KAAKq+B,kBACdr+B,KAAKu+B,oBAAsB,2EAC3Bv+B,KAAK0+B,kBAAoB,0EAG/B,CAEA4B,mBAAmBvvB,GACjB/Q,KAAKigC,6BAA8B,EAEjB,0BAAdlvB,EAAMkb,KACRrpB,WAAW,KACT5C,KAAK+gC,OAAOh5B,QACZ/H,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,MAAK,EAC/B,KACoB,0BAAd5gB,EAAMkb,KACfrpB,WAAW,KACT5C,KAAK+gC,OAAOh5B,QACZ/H,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK,GAAE,EAC1B,KACoB,mBAAd+O,EAAMkb,OACfjsB,KAAK+gC,OAAOh5B,QACZ/H,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK,IAE7B,CAEA25B,iBAAiBqF,GACfhhC,KAAKihC,aAAe,CAClBD,SAAUA,EACVE,SAAU,MACVC,MAAO,CACLC,MAAO,MACPC,MAAO,OACP5V,MAAO,OACP6V,OAAQ,aACRC,SAAS,GAEXC,oBAAsBvV,GAAcjsB,KAAKyhC,oBACzCC,kBAAmBA,CAACzV,EAA8B0V,IAChD3hC,KAAK4hC,qBAAqBh6B,KAAMoyB,IAC9Bh6B,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,MAAK,EAC9BxF,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,EAAK,GAElC0V,UAAWA,CAAC5V,EAA8B0V,KAA/BE,EACXC,SAAUA,CAAC7V,EAA2B0V,KAA5BG,EACVC,QAAUz6B,MACV06B,QAASA,CAAC/V,EAAW0V,MACb3hC,KAAK84B,WAAe94B,KAAKiiC,eAAkBjiC,KAAK64B,kBAC/C74B,KAAK84B,WAAe94B,KAAKiiC,aAC5BjiC,KAAKwH,UAAUxH,KAAKiiC,cAEhBjiC,KAAKu4B,kBACPv4B,KAAKwH,UAAU,iCAEfxH,KAAKwH,UAAU,gDAIfxH,KAAKmyB,uBAAyB,GAChCnyB,KAAKwH,UAAU,2DAA0D,EAI/E06B,OAAQA,CAACjW,EAAyB0V,KAChC3hC,KAAKmiC,aAAeR,GAG1B,CAEAvpB,QACEpY,KAAK2xB,MAAMmE,4BAA8B,KAEhB,MAArB91B,KAAKg1B,cAAwBh1B,KAAKg1B,aAAatyB,OAAS,IAC1D1C,KAAK2xB,MAAMmC,UAAY9zB,KAAKg1B,aAAa,IAG3Ch1B,KAAK2xB,MAAMwC,YAAc,KACzBn0B,KAAK2xB,MAAM2C,gBAAkB,KAC7Bt0B,KAAK2xB,MAAMyQ,kBAAoB,KAC/BpiC,KAAK2xB,MAAM0Q,kBAAoB,KAC/BriC,KAAK2xB,MAAMkD,cAAgB,KAE3B70B,KAAKg0B,gBACP,CAEAA,iBACMh0B,KAAK2xB,MAAMgF,SAAW32B,KAAKu4B,mBAAqBv4B,KAAKo3B,oBACnDp3B,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB4G,aACvDtiC,KAAK2xB,MAAMkD,eAAmB70B,KAAK2xB,MAAMwC,aAAiBn0B,KAAK2xB,MAAM2C,iBAAqBt0B,KAAK2xB,MAAMyQ,mBAAuBpiC,KAAK2xB,MAAM0Q,mBAA6C,MAAxBriC,KAAK2xB,MAAMmC,UAC3K9zB,KAAK64B,kBAAmB,EAExB74B,KAAK64B,kBAAmB,EAEjB74B,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBI,OACpE97B,KAAK64B,iBAAmB74B,KAAKu8B,uBAAyBv8B,KAAKy8B,uBAAyBz8B,KAAK28B,eAChF38B,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB6G,iBACpEviC,KAAK64B,kBAAoB74B,KAAKu2B,mBAAqBv2B,KAAK2xB,MAAMmE,4BAE9D91B,KAAK64B,kBAAmB,EAG1B74B,KAAK64B,kBAAmB,EAG1B74B,KAAKm7B,0BACP,CAEAtE,oBACE72B,KAAKkwB,cAAa,GAElB,IAAI0J,EAAK,IAAI4I,MACb5I,EAAGD,WAAa35B,KAAK25B,WACrBC,EAAG7J,OAAS/vB,KAAK+vB,OAEjB/vB,KAAK85B,WAAW2I,kBAAkB7I,GAAI7N,UAAU2W,IAC9C1iC,KAAKkwB,cAAa,GAClBlwB,KAAK2iC,4BAA4BD,EAAGzW,KAAI,EAE5C,CAEA4L,uBACE73B,KAAK2iC,4BAA4B3iC,KAAKo4B,kBACxC,CAEAuK,4BAA4BC,GACpBA,EAAyBrU,KAC7BvuB,KAAK6iC,YAAW,EAAM,KAAMD,EAAyBrU,MAC1CqU,EAAyBr9B,KACpCvF,KAAKg8B,eAAe8G,gBAAgBF,EAAyBr9B,IAEjE,CAEAyxB,gCACEh3B,KAAK6iC,YAAW,EAAM,KAAM7iC,KAAKw3B,oBACnC,CAEA7B,gBACE31B,KAAK6iC,YAAW,EAAO,qCAAsC,oCAC/D,CAEAA,WAAWtU,EAAelpB,EAAehD,GACvC,IAAI0gC,EAAgB,IAAIC,MAEpBhjC,KAAKm+B,iBAAiB8E,UAAUxiC,OAAS,IAC3CsiC,EAActiC,MAAQ,OAEtBsiC,EAActiC,MAAQ,OAIxB,IAAIyiC,GADMljC,KAAKmjC,gBAAgB7T,GAA8ByT,GACXK,kBAElDF,GAAU3U,KAAOA,EACjB2U,GAAU79B,MAAQA,EAClB69B,GAAU7gC,KAAOA,CACnB,CAEAq2B,MACM14B,KAAKmyB,sBAAwB,EAC3BnyB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB2H,WAC7DrjC,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAKujC,sBAAsB37B,KAAM86B,IAC/B1iC,KAAKwjC,iBAAiBd,EAAGe,gBAAgB77B,KAAK,KAC5C5H,KAAK0jC,WAAWhB,EAAGiB,aAAY,EAChC,EACCxX,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,EAAK,EACxB,GAEMlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBmI,KAC9D7jC,KAAKiyB,QAAYjyB,KAAKkyB,SAC1BlyB,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAK8jC,wBAAwBl8B,KAAM86B,IACjC1iC,KAAK0jC,WAAW,KAAMhB,EAAGqB,KAAI,EAC3B5X,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAK4jC,mBAAiB,EACvB,GAGH5jC,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAKgkC,kBAAkBp8B,KAAM86B,IAC3B1iC,KAAK0jC,WAAW,KAAMhB,EAAGqB,KAAI,EAC3B5X,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAK4jC,mBAAiB,EACvB,GAGI5jC,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBmB,SACpE78B,KAAKikC,sBAAsBr8B,KAAM86B,IAC/B1iC,KAAKwgC,kBAAoBkC,EAAGe,eAEbS,kBAAkBC,UAAU,CACzCrJ,UAAW4H,EAAGe,eACdW,UAAWA,KACTpkC,KAAKggC,mBAAoB,EAEzBhgC,KAAKqkC,sBAAsBz8B,KAAM08B,IACA,MAA3BA,EAASC,gBACXvkC,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKsiC,EAASC,gBAClCvkC,KAAKkwB,cAAa,IACkB,MAA3BoU,EAASC,gBAClBvkC,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,MAAK,EAEhCxF,IACFnsB,KAAKygC,sBAAsB74B,KAAK,KAC9B5H,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,EAAK,EAC5B7kB,IACFtH,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKsF,EAAG,EAC7B,EACF,IAIIiqB,MAAI,EACXpF,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,EAAK,GAEvBnsB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBI,QACpE97B,KAAKkwB,cAAa,GAElBlwB,KAAK67B,OAAO2I,oBAAoB,CAC9Bn+B,KAAM,OACNo+B,KAAMzkC,KAAKo8B,oBACVx0B,KAAMhB,IACqB,MAAxBA,EAAO89B,cACL1kC,KAAK2xB,MAAMC,kBAAkB+S,UAC/B3kC,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAK4kC,eACL5kC,KAAK6kC,cAAcj+B,EAAO89B,cAAc7/B,GAAE,GAG5C7E,KAAK6kC,cAAcj+B,EAAO89B,cAAc7/B,IAAI+C,KAAMk9B,IACzB,MAAnBA,EAAU3Y,OACN2Y,EAAU3Y,MAAM4Y,QACpB/kC,KAAKwH,UAAUs9B,EAAU3Y,MAAM4Y,SAE/B/kC,KAAKwH,UAAU,4DAGjBxH,KAAK8/B,eAAe99B,KAAK8iC,EAAU3Y,OACnCnsB,KAAKkwB,cAAa,IACkB,MAA3B4U,EAAUE,eACnBhlC,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,MAAK,EAEjC,QAEoB,MAAhB/qB,EAAOulB,QACVvlB,EAAOulB,MAAM4Y,QACjB/kC,KAAKwH,UAAUZ,EAAOulB,MAAM4Y,SAE5B/kC,KAAKwH,UAAU,4DAGjBxH,KAAK8/B,eAAe99B,KAAK4E,EAAOulB,MAAM4Y,SACtC/kC,KAAKkwB,cAAa,GAAK,IAGlBlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBuJ,OACpEjlC,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAKklC,oBAAoBt9B,KAAM86B,IAC7B1iC,KAAKwjC,iBAAiBd,EAAGe,gBAAgB77B,KAAK,KAC5C5H,KAAK0jC,WAAWhB,EAAGiB,aAAY,EAChC,EACCxX,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,EAAK,EACxB,GAEMlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsByJ,UACpEnlC,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAKolC,uBAAuBx9B,KAAM86B,IAChC1iC,KAAKwjC,iBAAiBd,EAAGe,gBAAgB77B,KAAK,KAC5C5H,KAAK0jC,WAAWhB,EAAGiB,aAAY,EAChC,EACCxX,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,EAAK,EACxB,GAEMlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB4G,aAChEtiC,KAAKqlC,uBACPrlC,KAAKslC,uBAAuB19B,KAAK,KAC/B5H,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,MAAK,EAC/B,KACD3xB,KAAKwH,UAAU,kDAAiD,GAGlExH,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,OAEpB3xB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBwB,cACpEl9B,KAAKulC,4BACIvlC,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB8J,UACpExlC,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAKylC,uBAAuB79B,KAAM86B,IAChC1iC,KAAK0jC,WAAWhB,EAAGiB,aAAY,EAC7BxX,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,EAAK,EACxB,GAEMlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBsB,MACpEh9B,KAAK0lC,mBAAmB99B,KAAM/C,IAC5B7E,KAAK2lC,iBAAe,EAClBxZ,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,EAAK,GAEvBnsB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBkK,OACpE5lC,KAAKkwB,cAAa,GAElBlwB,KAAK85B,WAAW+L,QAAQC,MAAUC,iBAAiB/lC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkByU,cAAermC,KAAK2xB,MAAMC,kBAAkB0U,iBAAkBtmC,KAAKmyB,sBAAuBnyB,KAAK2xB,MAAMC,kBAAkBd,OAAQ,MAAO9wB,KAAK2xB,MAAMC,kBAAkB2U,uBAAyBC,KAAsBC,UAAY,IAAM,MAAM1a,UAAW2W,IACtoBA,EAAGgE,SAAahE,EAAGe,eACrBzjC,KAAKsjC,kBAAkBZ,EAAGe,gBAAgB77B,KAAK,KAC7C5H,KAAK4kC,eACL5kC,KAAK2mC,gBAAgBjE,EAAGe,eAAc,IAGxCzjC,KAAKkwB,cAAa,GAClBlwB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK0gC,EAAGvW,OAAK,IAG5BnsB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB2B,QACpEr9B,KAAKkwB,cAAa,GAElBlwB,KAAK85B,WAAW+L,QAAQC,MAAUc,kBAAkB5mC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkBiV,aAAc7mC,KAAK2xB,MAAMC,kBAAkBkV,kBAAmB9mC,KAAKmyB,sBAAuBnyB,KAAK2xB,MAAMC,kBAAkBd,OAAuB,MAAf9wB,KAAK+vB,OAAiB,KAAO,KAAM,MAAO/vB,KAAK2xB,MAAMC,kBAAkB2U,uBAAyBC,KAAsBC,UAAY,IAAM,MAAM1a,UAAW2W,IAC1qBA,EAAGgE,SAAahE,EAAGe,gBACrBzjC,KAAKkwB,cAAa,GAClBlwB,KAAK+mC,gBAAgBrE,EAAGe,kBAExBzjC,KAAKkwB,cAAa,GAClBlwB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK0gC,EAAGvW,OAAK,IAG5BnsB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB/I,QACpE3yB,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAK85B,WAAW+L,QAAQC,MAAUkB,mBAAmBhnC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB8L,eAAgB19B,KAAK2xB,MAAMC,kBAAkBqV,iBAAkBjnC,KAAKmyB,sBAAuBnyB,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,SAAS/E,UAAW2W,IACpmBA,EAAGgE,SAAahE,EAAGiB,aACrB3jC,KAAK0jC,WAAWhB,EAAGiB,eAEnB3jC,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK0gC,EAAGvW,OAC5BnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,GAAK,EAE1B,GAEMlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB2L,OACpErnC,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAK85B,WAAW+L,QAAQC,MAAUwB,kBAAkBtnC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB2V,aAAcvnC,KAAK2xB,MAAMC,kBAAkB4V,gBAAiBxnC,KAAKmyB,sBAAuBnyB,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,OAAuB,MAAf9wB,KAAK+vB,OAAiB,MAAQ,KAAM/vB,KAAK2xB,MAAMC,kBAAkB2U,uBAAyBC,KAAsBC,UAAY,IAAM,MAAM1a,UAAW2W,IACvuBA,EAAGgE,SAAahE,EAAGiB,aACrB3jC,KAAK0jC,WAAWhB,EAAGiB,eAEnB3jC,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK0gC,EAAGvW,OAC5BnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,GAAK,EAE1B,GAEMlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB9I,SACpE5yB,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAKynC,sBAAsB7/B,KAAM86B,IAC/B1iC,KAAKwjC,iBAAiBxjC,KAAK2xB,MAAMC,kBAAkB8V,eAAiB,IAAMhF,EAAGiF,OAAO//B,KAAK,KACvF5H,KAAK0jC,WAAWhB,EAAGiB,aAAY,EAChC,EACCxX,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,EAAK,EACxB,GAEMlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBkM,WACpE5nC,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAK6nC,wBAAwBjgC,KAAM86B,IACjC1iC,KAAK0jC,WAAWhB,EAAGiB,aAAY,EAC7BxX,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,EAAK,EACxB,GAEMlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBoM,MACpE9nC,KAAKsjC,oBAAoB17B,KAAK,KAC5B5H,KAAK+nC,mBAAmBngC,KAAM86B,IAC5B1iC,KAAK0jC,WAAW,KAAMhB,EAAGqB,KAAI,EAC3B5X,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,EAAK,EACxB,GAEMlwB,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsBzC,QACpEj5B,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,OAG7B3xB,KAAKwH,UAAU,2DAEnB,CAEAq9B,cAAcmD,GACZ,OAAO,IAAIC,QAAa,CAAC5vB,EAAS6vB,KAChCloC,KAAK85B,WAAW+L,QAAQC,MAAUqC,kBAAkBnoC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkBwW,gBAAiBpoC,KAAKmyB,sBAAuBnyB,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,OAAQ9wB,KAAK2/B,YAAa,MAAO3/B,KAAK2xB,MAAMC,kBAAkB2U,uBAAyBC,KAAsB6B,YAAYtc,UAAW2W,IAC3nBA,EAAGgE,SAAahE,EAAGe,gBAAoBf,EAAG4F,cAC5CtoC,KAAK67B,OAAO0M,mBAAmB7F,EAAG4F,cAAe,CAAEE,eAAgBR,IAAmBpgC,KAAMk9B,IAC1FzsB,EAAQysB,EAAS,IAGnB9kC,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK0gC,EAAGvW,OAC5BnsB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,GAClBgY,IAAM,EAET,EAEL,CAEA3C,4BACEvlC,KAAKyoC,yBAAyB7gC,KAAM86B,IAClCgG,UAAUC,UAAU3oC,KAAK2xB,MAAMC,kBAAkBd,OAAS9wB,KAAKogC,2BAA6BpgC,KAAKmgC,uBACjGuI,UAAUE,SAASC,KAAK,WAAY7oC,KAAK8oC,sBAAsB31B,KAAKnT,MAAO0iC,EAAGqG,OAAM,EAClF5c,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,EAAK,EAElC,CAEA2c,sBAAsB/3B,EAAYhJ,GACnB,MAATgJ,GAAmBA,EAAMi4B,aAAoBj4B,EAAMk4B,UAA+B,MAAhBl4B,EAAMm4B,OAC1ElpC,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,QAE3B3xB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK+O,EAAMo4B,UAGjCphC,GACF,CAEAqhC,mBACEppC,KAAKo+B,aAAaiL,IAAI,oBAAoB,GAE1CrpC,KAAKkwB,cAAa,GAElB,IAAI6S,EAAgB,IAAIC,MAEpBsG,EAAMtpC,KAAKmjC,gBAAgB9R,EAA6B0R,GACxDG,EAAyCoG,EAAIlG,kBAEjDF,EAAU1R,WAAaxxB,KAAKupC,UAE5BrG,EAAUp7B,UAAYwhC,EAEtBA,EAAIE,cAAczd,UAAWoE,IACb,MAAVA,GACFnwB,KAAKkwB,cAAa,GAClBlwB,KAAKmwB,OAASA,EACdnwB,KAAK4gC,mBAAkB,IAEvB5gC,KAAK4jC,mBAAiB,EAG5B,CAEAF,WAAWn+B,EAAagpB,GACtBvuB,KAAKkwB,cAAa,GAEZ3qB,EACJvF,KAAKupC,UAAYhkC,EACNgpB,IACXvuB,KAAKo+B,aAAaiL,IAAI,cAAe9a,GACrCvuB,KAAKupC,UAAYpZ,OAAO2Q,SAAST,OAAS,wBAK5CrgC,KAAKkgC,cAAe,EAEpBlgC,KAAKo+B,aAAaiL,IAAI,oBAAoB,GAE1CrpC,KAAKmwB,OAASA,OAAOoB,KAAKpB,OAAO2Q,SAAST,OAAS,sBAAuB,UAEvD,MAAfrgC,KAAKmwB,OACPnwB,KAAKopC,mBAELxmC,WAAW,KACJ5C,KAAKkgC,cACRlgC,KAAKopC,kBAAgB,EAEtB,IAEP,CAEAxI,kBAAkB8C,GACZA,IACF1jC,KAAKmwB,OAAO2Q,SAAS2I,KAAOzpC,KAAKupC,WAWnCvpC,KAAKmwB,OAAO1e,QAEZ,IAAIi4B,EAAWC,YAAY,KACN,MAAf3pC,KAAKmwB,OACHnwB,KAAKmwB,OAAOyZ,SACdC,cAAc7pC,KAAK0pC,UACnBG,cAAcH,GAEV1pC,KAAK0/B,eACP1/B,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,QAE3B3xB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,IAGpBlwB,KAAKmwB,OAAS,MAGhB0Z,cAAcH,EAAQ,EAEvB,KAEH1pC,KAAK4kC,cACP,CAEAe,kBACE,IAAI5C,EAAgB,IAAIC,MAEpBhjC,KAAKm+B,iBAAiB8E,UAAUxiC,OAAS,IAC3CsiC,EAActiC,MAAQ,OAEtBsiC,EAActiC,MAAQ,QAGxBsiC,EAAc+G,cAAe,EAC7B/G,EAAcgH,WAAa,6BAC3BhH,EAAcx/B,UAAY,QAE1B,IAAI+lC,EAAMtpC,KAAKmjC,gBAAgB7T,GAA8ByT,GACzDG,EAA0CoG,EAAIlG,kBAClDF,EAAU7T,mBAAqBrvB,KAAKqvB,mBACpC6T,EAAUnT,OAAS/vB,KAAK+vB,OACxBmT,EAAUp7B,UAAYwhC,EAEtBA,EAAIE,cAAczd,UAAWkP,IACvBA,EACFj7B,KAAKgqC,mBAAmBpiC,KAAM86B,IACH,MAArBA,EAAG6B,gBACLvkC,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK,IACzBhC,KAAKkwB,cAAa,IACY,MAArBwS,EAAG6B,gBACZvkC,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,MAAK,EAEhCxF,IACFnsB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAKmqB,GACzBnsB,KAAKkwB,cAAa,EAAK,IAGzBlwB,KAAKwH,UAAU,4DACfxH,KAAK8/B,eAAe99B,KAAK,IACzBhC,KAAKkwB,cAAa,GAAK,EAG7B,CAEAyW,gBAAgBsD,GACd,IAAIlH,EAAgB,IAAIC,MAExBD,EAAc+G,cAAe,EAC7B/G,EAAcgH,WAAa,6BAC3BhH,EAAcz/B,UAAY,MAE1BtD,KAAK+gC,OAAS/gC,KAAKmjC,gBAAgB7T,GAA8ByT,GACjE,IAAIG,EAA0CljC,KAAK+gC,OAAOqC,kBAC1DF,EAAUhU,mBAAqB+a,EAC/B/G,EAAUrU,kBAAoB7uB,KAAKknC,gBACnChE,EAAUpS,OAAS9wB,KAAK2xB,MAAMC,kBAAkBd,OAChDoS,EAAUnT,OAAS/vB,KAAK+vB,OACxBmT,EAAUp7B,UAAY9H,KAAK+gC,OAE3B/gC,KAAK+gC,OAAOyI,cAAczd,UAAWkP,IACnCj7B,KAAK+gC,OAAS,KAEV9F,GACF4O,cAAc7pC,KAAK0pC,UACnB1pC,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,SAE3B3xB,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,GAAK,EAG7B,CAEA6W,gBAAgBkD,GACd,IAAIlH,EAAgB,IAAIC,MAExBD,EAAc+G,cAAe,EAC7B/G,EAAcgH,WAAa,6BAC3BhH,EAAcz/B,UAAY,MAE1BtD,KAAK+gC,OAAS/gC,KAAKmjC,gBAAgB7T,GAA8ByT,GACjE,IAAIG,EAA0CljC,KAAK+gC,OAAOqC,kBAC1DF,EAAUnS,oBAAsBkZ,EAChC/G,EAAUjS,0BAA4BjxB,KAAK2xB,MAAMC,kBAAkBX,0BACnEiS,EAAUpS,OAAS9wB,KAAK2xB,MAAMC,kBAAkBd,OAEhD9wB,KAAKigC,6BAA8B,EAEnCjgC,KAAK+gC,OAAOyI,cAAczd,UAAU,IAAM/rB,KAAK+gC,OAAS,KAC1D,CAEAU,oBAmBE,OAlBc,IAAIwG,QAAgB,CAAC5vB,EAAS6vB,KAC1CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAUoE,kBAAkBlqC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkBgK,eAAgB57B,KAAK2xB,MAAMC,kBAAkBuY,gBAAiBnqC,KAAKmyB,sBAAuBnyB,KAAK2xB,MAAMC,kBAAkBd,OAAQ9wB,KAAK2/B,YAA4B,MAAf3/B,KAAK+vB,OAAiB,QAAU,SAE1jB/vB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,SAAahE,EAAGe,gBACrBzjC,KAAKoqC,oBAAsB1H,EAAGe,eAC9BzjC,KAAKqqC,YAAc3H,EAAGiF,MACtBtvB,EAAQqqB,EAAGe,iBAEXyE,EAAOxF,EAAGvW,OAGZnsB,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEA0R,qBAiBE,OAhBc,IAAIqG,QAAa,CAAC5vB,EAAS6vB,KACvCloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAUwE,mBAAmBtqC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkBgK,eAAgB57B,KAAK2xB,MAAMC,kBAAkBuY,gBAAiBnqC,KAAKoqC,oBAAqBpqC,KAAKqqC,YAAarqC,KAAK2xB,MAAMC,kBAAkBd,QAEjhB9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,QACLruB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,OAGZnsB,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEAqT,sBAiBE,OAhBc,IAAI0E,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAUyE,oBAAoBvqC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB4Y,cAAexqC,KAAK2xB,MAAMC,kBAAkB6Y,cAAezqC,KAAKmyB,sBAAuBnyB,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,QAE1hB9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,QACLruB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,OAGZnsB,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEA8T,kBAiBE,OAhBc,IAAIiE,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAU4E,gBAAgB1qC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB+Y,UAAW3qC,KAAK2xB,MAAMC,kBAAkBgZ,cAAe5qC,KAAKmyB,sBAAuBnyB,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,QAE5jB9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,QACLruB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,OAGZnsB,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEA4T,wBAiBE,OAhBc,IAAImE,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAU+E,2BAA2B7qC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB+Y,UAAW3qC,KAAK2xB,MAAMC,kBAAkBgZ,cAAe5qC,KAAKg8B,eAAe8O,mBAAmBC,KAAsB/qC,KAAK2xB,MAAMC,kBAAkBoZ,sBAAuBhrC,KAAK2xB,MAAMC,kBAAkBqZ,oBAAqBjrC,KAAKmyB,sBAAuBnyB,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,QAE1uB9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,QACLruB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,OAGZnsB,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEAuY,yBAiBE,OAhBc,IAAIR,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAUoF,gCAAgClrC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkBuZ,wBAAyBnrC,KAAK2xB,MAAMC,kBAAkBwZ,uBAAwBprC,KAAKmyB,sBAAuBnyB,KAAKknC,gBAAiBlnC,KAAK2xB,MAAMC,kBAAkBd,OAAuB,MAAf9wB,KAAK+vB,OAAiB,KAAO,MAEzlB/vB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,QACLruB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,OAGZnsB,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEA+T,sBAiBE,OAhBc,IAAIgE,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAUuF,oBAAoBrrC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB0Z,cAAetrC,KAAKmyB,sBAAuBnyB,KAAK2xB,MAAMC,kBAAkBd,QAEnd9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,QACLruB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,OAGZnsB,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEAmU,sBAeE,OAdc,IAAI4D,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAUyF,oBAAoBvrC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB0Z,cAAetrC,KAAKwgC,kBAAmBxgC,KAAK2xB,MAAMC,kBAAkBd,QAE/c9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,QACLruB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,MAAK,EAElB,EAIL,CAEAsU,oBAAoB+K,GAAmB,GAqBrC,OApBc,IAAIvD,QAAmB,CAAC5vB,EAAS6vB,KACzCsD,GACFxrC,KAAKkwB,cAAa,GAGpB,IAAI0J,EAAKkM,MAAU2F,oBAAoBzrC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB0Z,cAAetrC,KAAKwgC,kBAAmBxgC,KAAK2xB,MAAMC,kBAAkBd,QAE/c9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,KACjCA,GAAGgE,QACLruB,EAAQqqB,IAERwF,EAAOxF,GAAGvW,OAGRqf,GACFxrC,KAAKkwB,cAAa,EAAK,EAE1B,EAIL,CAEAgV,oBAeE,OAdc,IAAI+C,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAU4F,kBAAkB1rC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB+Z,iBAAkB3rC,KAAK2xB,MAAMC,kBAAkBga,gBAAiB5rC,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAKmyB,sBAAuBnyB,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,OAAuB,MAAf9wB,KAAK+vB,OAAiB,KAAO,MAE5mB/vB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,SAAahE,EAAGe,eACrBprB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,MAAK,EAElB,EAIL,CAEAiZ,uBAeE,OAdc,IAAI6C,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAU+F,qBAAqB7rC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkBka,oBAAqB9rC,KAAK2xB,MAAMC,kBAAkBma,mBAAoB/rC,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAKmyB,sBAAuBnyB,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,OAAuB,MAAf9wB,KAAK+vB,OAAiB,KAAO,MAErnB/vB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,SAAahE,EAAGe,eACrBprB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,MAAK,EAElB,EAIL,CAEAsZ,uBAeE,OAdc,IAAIwC,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAUkG,qBAAqBhsC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkBqa,gBAAiBjsC,KAAKmyB,sBAAuBnyB,KAAK2/B,YAAa3/B,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAK2xB,MAAMyV,gBAEhgBpnC,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,SAAahE,EAAGiB,aACrBtrB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,MAAK,EAElB,EAIL,CAEAuZ,mBAmBE,OAlBc,IAAIuC,QAAgB,CAAC5vB,EAAS6vB,KAC1CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAUoG,iBAAiBlsC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkBua,gBAAiBnsC,KAAK2xB,MAAMC,kBAAkBwa,cAAepsC,KAAK2xB,MAAMC,kBAAkBya,eAAgBrsC,KAAKmyB,sBAAuBnyB,KAAK2xB,MAAMC,kBAAkBd,QAE3iB9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,SAAahE,EAAGe,gBACrBzjC,KAAKqvB,mBAAqBqT,EAAGe,eAC7BzjC,KAAKssC,WAAa5J,EAAGiF,MACrBtvB,EAAQqqB,EAAGe,iBAEXyE,EAAOxF,EAAGvW,OAGZnsB,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEA8Z,mBAiBE,OAhBc,IAAI/B,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAUyG,iBAAiBvsC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAKssC,WAAYtsC,KAAKqvB,mBAAoBrvB,KAAK2xB,MAAMC,kBAAkBwa,cAAepsC,KAAK2xB,MAAMC,kBAAkBya,eAAgBrsC,KAAK2xB,MAAMC,kBAAkBd,QAE3gB9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,QACLruB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,OAGZnsB,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEAuX,sBAeE,OAdc,IAAIQ,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAU0G,oBAAoBxsC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB8V,eAAgB1nC,KAAKmyB,sBAAuBnyB,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,QAEzhB9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,SAAahE,EAAGiF,OAAWjF,EAAGiB,aACnCtrB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,MAAK,EAElB,EAIL,CAEA0b,wBAeE,OAdc,IAAII,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAU2G,sBAAsBzsC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkB8a,qBAAsB1sC,KAAK2xB,MAAMC,kBAAkB+a,cAAe3sC,KAAK2xB,MAAMC,kBAAkBgb,oBAAqB5sC,KAAKmyB,sBAAuBnyB,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAK2xB,MAAMyV,gBAEllBpnC,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,SAAahE,EAAGiB,aACrBtrB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,MAAK,EAElB,EAIL,CAEA4b,mBAeE,OAdc,IAAIE,QAAmB,CAAC5vB,EAAS6vB,KAC7CloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAKkM,MAAU+G,iBAAiB7sC,KAAK05B,WAAY15B,KAAK25B,WAAY35B,KAAK2xB,MAAMC,kBAAkBkJ,UAAW96B,KAAKgmC,QAAShmC,KAAK+vB,OAAQ/vB,KAAKiyB,OAAQjyB,KAAKkyB,SAAUlyB,KAAKq7B,OAAQr7B,KAAKimC,OAAQjmC,KAAK6xB,KAAM7xB,KAAKkmC,oBAAqBlmC,KAAKmmC,iBAAkBnmC,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAK2xB,MAAMgF,QAAS32B,KAAK2xB,MAAMsG,WAAYj4B,KAAKomC,mBAAoBpmC,KAAK2xB,MAAMC,kBAAkBkb,kBAAmB9sC,KAAK2xB,MAAMC,kBAAkBmb,SAAU/sC,KAAK2xB,MAAMC,kBAAkBob,cAAehtC,KAAKmyB,sBAAuBnyB,KAAK+vB,OAAQ/vB,KAAK2/B,YAAa3/B,KAAKknC,gBAAiBlnC,KAAKmnC,cAAennC,KAAK2xB,MAAMyV,eAAgBpnC,KAAK2xB,MAAMC,kBAAkBd,QAE3oB9wB,KAAK85B,WAAW+L,QAAQjM,GAAI7N,UAAW2W,IACjCA,EAAGgE,SAAahE,EAAGqB,KACrB1rB,EAAQqqB,GAERwF,EAAOxF,EAAGvW,MAAK,EAElB,EAIL,CAEAmZ,uBAyBE,OAxBc,IAAI2C,QAAc,CAAC5vB,EAAS6vB,KACxCloC,KAAKkwB,cAAa,GAElB,IAAI0J,EAAK,IAAIqT,MACbrT,EAAGF,WAAa15B,KAAK05B,WACrBE,EAAGsT,mBAAqBltC,KAAK25B,WAC7BC,EAAGuT,eAAiBntC,KAAK2xB,MAAMkD,cAC/B+E,EAAGwT,SAAWptC,KAAK2xB,MAAMwC,YACzByF,EAAGyT,YAAsC,MAAxBrtC,KAAK2xB,MAAMmC,UAAoB9zB,KAAK2xB,MAAMmC,UAAUpC,KAAO,GAC5EkI,EAAG0T,OAASttC,KAAK2xB,MAAM0Q,kBACvBzI,EAAG2T,OAASvtC,KAAK2xB,MAAMyQ,kBACvBxI,EAAG4T,kBAAoBxtC,KAAK2xB,MAAM2C,gBAElCt0B,KAAK85B,WAAWwL,qBAAqB1L,GAAI7N,UAAW2W,IACnC,MAAXA,EAAGzW,MAAqC,MAArByW,EAAGzW,KAAKwhB,WAA0C,GAArB/K,EAAGzW,KAAKwhB,UAC1Dp1B,IAEA6vB,IAGFloC,KAAKkwB,cAAa,EAAK,EACxB,EAIL,CAEAwd,4BACE1tC,KAAKq5B,mBACLr5B,KAAKoY,OACP,CAEAihB,mBACE,GAAoC,MAAhCr5B,KAAK2xB,MAAMC,kBACb,GAAI5xB,KAAKwyB,YAAa,CACpB,GAAIxyB,KAAK+9B,QAAU,EACb/9B,KAAKi+B,qBACPj+B,KAAK2xB,MAAMC,kBAAkBE,cAAgB9xB,KAAKo5B,OAASp5B,KAAK+9B,QAAU,IAE1E/9B,KAAK2xB,MAAMC,kBAAkBE,cAAgB9xB,KAAK+9B,gBAE3C/9B,KAAK2xB,MAAMC,kBAAkB+b,mBAAqB,GAAoB,MAAf3tC,KAAKq7B,OAAgB,CACrF,IAAIsS,EAAqBlmC,KAAKwF,IAAIjN,KAAK2xB,MAAMC,kBAAkB+b,mBAAoB,GAEnF3tC,KAAK2xB,MAAMC,kBAAkBE,cAAgB,EAE7C,QAAS8b,KAAU5tC,KAAKq7B,OAAQ,KAAAwS,EAC9B,IAAIC,EAAuB,QAAjBD,EAAGD,EAAOG,eAAO,IAAAF,OAAA,EAAdA,EAAgBC,OAE7B,GAAc,MAAVA,GAAkBA,EAAOprC,OAAS,EACpC,QAASqJ,EAAI,EAAGA,EAAItE,KAAKwF,IAAI0gC,EAAoBG,EAAOprC,QAASqJ,IAAK,CACpE,IAAIiiC,GAAmD,MAA/BF,EAAO/hC,GAAGkiC,gBAA6BH,EAAO/hC,GAAGkiC,eAAoB,EAAIH,EAAO/hC,GAAGkiC,eAAoBH,EAAO/hC,GAAGmiC,OACzIluC,KAAK2xB,MAAMC,kBAAkBE,eAAiBkc,UAI3ChuC,KAAK2xB,MAAMC,kBAAkBmM,QAAU,EAC5C/9B,KAAK2xB,MAAMC,kBAAkBqM,qBAC/Bj+B,KAAK2xB,MAAMC,kBAAkBE,cAAgBrqB,KAAK8F,IAAIvN,KAAKo5B,OAASp5B,KAAK2xB,MAAMC,kBAAkBmM,QAAU,IAAO/9B,KAAK2xB,MAAMC,kBAAkBuc,sBAE3InuC,KAAK2xB,MAAMC,kBAAkBwc,oBAAqC,MAAfpuC,KAAKq7B,OAC1Dr7B,KAAK2xB,MAAMC,kBAAkBE,cAAgB9xB,KAAK2xB,MAAMC,kBAAkBmM,QAAU/9B,KAAKq7B,OAAO34B,OAEhG1C,KAAK2xB,MAAMC,kBAAkBE,cAAgB9xB,KAAK2xB,MAAMC,kBAAkBmM,QAI9E/9B,KAAK2xB,MAAMC,kBAAkBE,cAAgB,EAG/C9xB,KAAK2xB,MAAMC,kBAAkBE,cAAgBrqB,KAAKwF,IAAIjN,KAAK2xB,MAAMC,kBAAkBE,cAAe9xB,KAAKo5B,OAAM,MAE7Gp5B,KAAK2xB,MAAMC,kBAAkBE,cAAgB,EAIjD9xB,KAAKm7B,2BAELn7B,KAAK+/B,gBAAgB/9B,KAAKhC,KAAK2xB,MAAMC,kBAAkBE,eAEvD9xB,KAAKquC,sBACP,CAEA1Z,oBACE,GAAM30B,KAAKy0B,aAAc,CACvB,IAAI6Z,EAAYtuC,KAAKy0B,aAAa5P,MAAM,KAExC,GAAwB,GAApBypB,EAAU5rC,OACZ,IACE1C,KAAK2xB,MAAMyQ,kBAAoBmM,SAASD,EAAU,GAAI,IACtDtuC,KAAK2xB,MAAM0Q,kBAAoBkM,SAASD,EAAU,GAAI,IAElD7kB,MAAMzpB,KAAK2xB,MAAMyQ,qBACnBpiC,KAAK2xB,MAAMyQ,kBAAoB,MAG7B3Y,MAAMzpB,KAAK2xB,MAAM0Q,qBACnBriC,KAAK2xB,MAAM0Q,kBAAoB,YAEjC3yB,GAAM,EAGd,CAEA4zB,kBAAkB2G,GAChB,OAAO,IAAIhC,QAAe5vB,IACxBrY,KAAKkwB,cAAa,GAElB,IAAIse,EAAc,IAAIC,MACtBD,EAAYviB,KAAOjsB,KAAKskB,QAAQiH,IAAU,uBAC1CijB,EAAYE,gBAAkBC,KAA2BC,YACzDJ,EAAYK,QAAU,IAAIC,KAAQ9uC,KAAK05B,YACvC8U,EAAYO,QAAU/uC,KAAKmyB,sBAC3Bqc,EAAYQ,cAAgB/E,EAE5BjqC,KAAK85B,WAAWmV,kBAAkBT,GAAaziB,UAAWiO,IACxDh6B,KAAK2xB,MAAMyV,eAAiBpN,EAAI/N,KAAKzhB,IAAI0kC,IACzC72B,GAAO,EACR,EAEL,CAEAmrB,iBAAiByG,GACf,OAAO,IAAIhC,QAAe5vB,IACxB,GAAIrY,KAAK2xB,MAAMyV,eAAiB,EAAG,CACjC,IAAIoH,EAAc,IAAIC,MAAYzuC,KAAK2xB,MAAMyV,gBAC7CoH,EAAYQ,cAAgB/E,EAC5BjqC,KAAK85B,WAAWmV,kBAAkBT,GAAaziB,UAAU,KACvD1T,GAAO,EACR,MAEDA,GAAO,EAGb,CAEAurB,oBACM5jC,KAAK2xB,MAAMyV,eAAiB,IAK9BpnC,KAAK2xB,MAAMyV,eAAiB,KAEhC,CAEAxC,eACE5kC,KAAK0/B,gBAAiB,EACtB1/B,KAAK2xB,MAAMwd,sBAAuB,EAElCnvC,KAAK0pC,SAAWC,YAAY,KACtB3pC,KAAK2xB,MAAMyV,eAAiB,EAC9BpnC,KAAK85B,WAAWsV,eAAepvC,KAAK2xB,MAAMyV,gBAAgB,GAAOrb,UAAWiO,IAC1E,GAAgB,MAAZA,EAAI/N,KACN,GAAI+N,EAAI/N,KAAKyiB,iBAAmBC,KAA2BU,SAAU,KAAAC,EACnEtvC,KAAK2xB,MAAMwd,qBAAuBnV,EAAI/N,KAAKkjB,qBAC3CnvC,KAAK2xB,MAAM4d,mBAA0C,QAAxBD,EAAGtV,EAAI/N,KAAKujB,oBAAY,IAAAF,OAAA,EAArBA,EAAuBG,UAEpC,MAAfzvC,KAAKmwB,QACPnwB,KAAK0/B,gBAAiB,EACtB1/B,KAAKmwB,OAAOpoB,SACY,MAAf/H,KAAK+gC,OACd/gC,KAAK+gC,OAAOh5B,OAAM,IAElB8hC,cAAc7pC,KAAK0pC,UACnB1pC,KAAK6/B,YAAY79B,KAAKhC,KAAK2xB,OAAK,MAEzBqI,EAAI/N,KAAKyiB,iBAAmBC,KAA2Be,QAC7C,MAAf1vC,KAAKmwB,QACPnwB,KAAK0/B,gBAAiB,EACtB1/B,KAAKmwB,OAAOpoB,SACY,MAAf/H,KAAK+gC,OACd/gC,KAAK+gC,OAAOh5B,SAEZ/H,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,IAGpBlwB,KAAKwH,UAAYwyB,EAAI/N,KAAK0jB,iBAAmB3V,EAAI/N,KAAK0jB,iBAAmB,4DACzE3vC,KAAK8/B,eAAe99B,KAAKg4B,EAAI/N,KAAK0jB,mBACzB3V,EAAI/N,KAAKyiB,iBAAmBC,KAA2BiB,YAC7C,MAAf5vC,KAAKmwB,QACPnwB,KAAK0/B,gBAAiB,EACtB1/B,KAAKmwB,OAAOpoB,SACY,MAAf/H,KAAK+gC,OACd/gC,KAAK+gC,OAAOh5B,SAEZ/H,KAAK4jC,oBACL5jC,KAAKkwB,cAAa,IAAK,GAM/B2Z,cAAc7pC,KAAK0pC,SAAQ,EAE5B,IACL,CAEAxC,gBACE,OAAOlnC,KAAKu+B,oBAAsBv+B,KAAK2xB,MAAMyV,eAAiB,yBAA2BpnC,KAAK2xB,MAAMC,kBAAkBkJ,UAAY,eAAiB96B,KAAK25B,UAC1J,CAEAwN,cACE,OAAOnnC,KAAK0+B,kBAAoB1+B,KAAK2xB,MAAMyV,eAAiB,yBAA2BpnC,KAAK2xB,MAAMC,kBAAkBkJ,UAAY,eAAiB96B,KAAK25B,UACxJ,CAEAxH,sBACE,OAAOnyB,KAAK2xB,MAAMC,kBAAkBE,cAAgB,EAAI9xB,KAAK2xB,MAAMC,kBAAkBE,cAAgB9xB,KAAKo5B,MAC5G,CAEA+B,2BAC2B,MAArBn7B,KAAKmiC,eACHniC,KAAK84B,WAAa94B,KAAK64B,kBAAoB74B,KAAKmyB,sBAAwB,EAC1EnyB,KAAKmiC,aAAa0N,SAElB7vC,KAAKmiC,aAAa2N,UAGxB,CAEAzB,uBACMruC,KAAK2xB,MAAMC,kBAAkBa,MAAQiJ,KAAsB/I,SAC7D/vB,WAAW,KACT46B,QAAQuS,eAAa,EACpB,IAEP,CAEAC,cACEhwC,KAAK0gC,gBAAgBuP,aACvB,EA3oDW/W,GAAuB,mBAAA73B,iBAAvB63B,IAAsBr3B,MAAA6C,KAAA7C,MAAA+kB,KAAA/kB,MAAAquC,KAAAruC,MAAAsuC,MAAA,EAAtBjX,GAAuB,UAAAlL,EAAAzsB,IAAA,MAAvB23B,GAAsB13B,UAAA,yBAAA4uC,aAAA,SAAA1uC,EAAAC,GAAA,EAAAD,2CAAtBC,EAAAu8B,oBAAAp8B,EAA2B,KAAAD,osID7DxCA,MAAA,UAAAA,CAAuD,UAAvDA,CAAuD,UAAvDA,CAAuD,YAIvCA,MAAA,wBACJA,QAEAA,MAAA,qBAAAA,CAAoE,kBACpBA,MAAA,yBAAAC,GAAA,OAAAH,EAAAgwB,MAAAC,kBAAA9vB,CAAA,EAAAD,CAAqC,kCAAkBF,EAAA+rC,2BAA2B,GAC1H7rC,MAAA,EAAAwuC,GAAA,oBAGJxuC,YAIRA,MAAA,EAAAyuC,GAAA,sBAwBAzuC,MAAA,GAAA0uC,GAAA,eA6EA1uC,MAAA,GAAA2uC,EAAA,aAoCA3uC,MAAA,WAAAA,CAA+G,YAEvGA,MAAA,0BACJA,QAEAA,MAAA,aAEAA,MAAA,YAAAA,CAAsB,YAAtBA,CAAsB,YAGVA,MAAA,0BACJA,QAEAA,MAAA,aACJA,QAEAA,MAAA,YAAAA,CAAmB,YAEXA,MAAA,0BACJA,QAEAA,MAAA,aACJA,YAIRA,MAAA,GAAA4uC,EAAA,aAMA5uC,MAAA,GAAA6uC,GAAA,aAOA7uC,MAAA,GAAA8uC,GAAA,aAMJ9uC,QAEAA,MAAA,GAAA+uC,GAAA,cAKA/uC,MAAA,GAAAgvC,GAAA,cAOAhvC,MAAA,aACIA,MAAA,oBACJA,iBAtNCA,MAAA,SAAAF,EAAAgwB,MAAAC,kBAAAkJ,WAAA,GAC2Cj5B,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAivC,GAAAnvC,EAAAi+B,YACT/9B,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAA6sB,GAAA/sB,EAAAuB,UAAAvB,EAAAgwB,MAAAC,kBAAAa,MAAA9wB,EAAA+wB,0BAAA4P,cAAA3gC,EAAAgwB,MAAAC,kBAAAa,MAAA9wB,EAAA+wB,0BAAA6P,mBAEvB1gC,MAAA,GAAAA,MAAA,IAAAA,MAAA,uDAIYA,MAAA,GAAAA,MAAA,8BAAAA,CAA+B,UAAAF,EAAAgwB,MAAAC,kBAA/B/vB,CAA+B,WAAAF,EAAAuB,UACNrB,MAAA,GAAAA,MAAA,UAAAF,EAAAiwB,mBAO9B/vB,MAAA,GAAAA,MAAA,OAAAF,EAAAgwB,MAAAC,kBAAAa,MAAA9wB,EAAA+wB,0BAAA4P,eAAA3gC,EAAAuB,UAwBTrB,MAAA,GAAAA,MAAA,OAAAF,EAAAgwB,MAAAC,kBAAAa,MAAA9wB,EAAA+wB,0BAAA4P,cA6EAzgC,MAAA,GAAAA,MAAA,OAAAF,EAAAgwB,MAAAC,kBAAAa,MAAA9wB,EAAA+wB,0BAAA6P,kBAoCiB1gC,MAAA,GAAAA,MAAA,SAAAF,EAAAgwB,MAAAC,kBAAAa,MAAA9wB,EAAA+wB,0BAAAoJ,QAAAn6B,EAAAuB,UAEfrB,MAAA,GAAAA,MAAA,IAAAA,MAAA,+CAQQA,MAAA,GAAAA,MAAA,IAAAA,MAAA,iDAQAA,MAAA,GAAAA,MAAA,IAAAA,MAAA,wDAQVA,MAAA,GAAAA,MAAA,QAAAF,EAAAuB,UAMArB,MAAA,GAAAA,MAAA,QAAAF,EAAAuB,UAOArB,MAAA,GAAAA,MAAA,QAAAF,EAAAuB,UAQyBrB,MAAA,GAAAA,MAAA,OAAAF,EAAA63B,kBAAA73B,EAAAuB,UAKErB,MAAA,GAAAA,MAAA,QAAAF,EAAAuB,UAOZrB,MAAA,GAAAA,MAAA,SAAAF,EAAAuB,UAAAvB,EAAAgwB,MAAAC,kBAAAa,MAAA9wB,EAAA+wB,0BAAAuG,QACTp3B,MAAA,GAAAA,MAAA,SAAAF,EAAAs/B,izDElNd,MAAO8P,EAEXC,UAAUjvC,EAAekvC,EAAoBC,GAC3C,OAAOnvC,EAAM0J,QAAQ,IAAIY,OAAO4kC,EAAY,KAAMC,EACpD,EAJWH,EAAW,mBAAA1vC,iBAAX0vC,EAAW,EAAXA,EAAW,WAAA/mC,EAAAmnC,IAAA,qBAAXJ,EAAWK,MAAA,oBCExB,IAAIC,EAAgB,CAChB,OACA,OACA,KACA,MACA,UACA,QACA,KACA,MACA,QACA,SACA,OACA,OACA,QACA,SACA,QACA,OAIAC,EAAiB,CACjB,UACA,UACA,QACA,aACA,SACA,KACA,MACA,KACA,KACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,SACA,SACA,KACA,KACA,OACA,MACA,WACA,KACA,SACA,IACA,MACA,UACA,QACA,QACA,QACA,QACA,KACA,KACA,SAGAC,EAAuB,CAAC,QAAS,OAAQ,MAAO,SAChDC,EAAoB,GACpBC,EAAwB,GACxBC,EAAyB,GACzBC,EAAsB,GACtBC,EAAyB,GACzBC,EAA0B,GAC1BC,EAAsB,GACtBC,EAAqB,GACrBC,EAAuB,GACvBC,EAAsB,GACtBC,EAAyB,sBACzBC,GAAoC,oBACpCC,EAA4B,OAqbhC,SAASC,EAAkBC,EAAQC,GAE/B,QADI7vC,EAAS4vC,EAAO5vC,OACXqJ,EAAIwmC,EAAWxmC,EAAIrJ,EAAQqJ,IAChC,GAAIymC,EAAaF,EAAOjrC,WAAW0E,IAC/B,OAAOA,EAKf,OAAOrJ,CACX,CACA,SAAS+vC,EAA8BC,GACnC,OAASA,GAAY,IAAMA,GAAY,IAClCA,GAAY,IAAMA,GAAY,IAC9BA,GAAY,IAAMA,GAAY,GACvC,CACA,SAASC,EAAYL,EAAQj2B,GACzB,IAAIu2B,EAAgBN,EAAOjrC,WAAWgV,GACtC,GAAIu2B,IAAkBpB,EAClB,OAAO,EAEN,GAAIoB,IAAkBb,EAAoB,CAC3C,IAAIc,EAAkB,IAAMvB,EAAevuC,KAAK,KAAO,OAEvD,OADoB,IAAIsJ,OAAO,KAAOwmC,EAAkB,kBAAmB,KACtD3oB,KAAKooB,EAAOprC,MAAMmV,GAAM,CAG7C,OAAO,CAEf,CACA,SAASm2B,EAAaE,GAClB,OAAqB,IAAbA,GAA+B,KAAbA,GAAgC,KAAbA,GAAgC,KAAbA,GAAgC,KAAbA,CACvF,CAKA,SAASI,GAAyBC,GAC9B,QAAShnC,EAAIgnC,EAASrwC,OAAS,EAAGqJ,GAAK,EAAGA,IAAK,CAC3C,IAAI8G,EAAUkgC,EAAShnC,GACvB,GAAgB,OAAZ8G,GAAgC,OAAZA,EACpB,OAAO,EAEX,GAAgB,OAAZA,GAAgC,UAAZA,GAAmC,OAAZA,EAC3C,OAAO,EAGf,OAAO,CACX,CACA,SAASmgC,EAAmBV,GACxB,OAAOA,EAAOW,OAAOxnC,QAAQ2mC,EAA2B,IAC5D,CACA,SAASc,GAAWZ,EAAQj2B,GACxB,IAAIq2B,EAAWJ,EAAOjrC,WAAWgV,GACjC,GAA4B,QAAZ,MAAXq2B,GAA+B,CAEhC,IAAIS,EAAeb,EAAOjrC,WAAWgV,EAAQ,GAC7C,GAAgC,QAAZ,MAAf82B,GACD,OAAO7oC,OAAO8oC,aAAaV,EAAUS,EAAY,CAGzD,OAAO7oC,OAAO8oC,aAAaV,EAC/B,CAjdAW,IAVA,SAASC,EAAKhB,EAAQxvB,EAAWtiB,GAE7B,YADgB,IAAZA,IAAsBA,EAAU,CAAC,GAChC8xC,GAGLA,EAASA,EAAOzrC,WACTrG,EAAQ+tB,KAKnB,SAASglB,EAASjB,EAAQxvB,EAAWtiB,GAoBjC,QAnBIgzC,EAAKhzC,EAAQizC,YAAaA,QAAqB,IAAPD,EAAgB,EAAIA,EAAIE,GAAKlzC,EAAQmzC,UAAWA,QAAmB,IAAPD,GAAgB,SAAWA,GAAIE,EAAKpzC,EAAQqzC,SAAUA,QAAkB,IAAPD,EAAgBE,IAAWF,EAAIG,EAAKvzC,EAAQwzC,UAAWA,QAAmB,IAAPD,GAAwBA,EAChQE,EAAWN,GAAUjxC,OACrBwxC,EAAW,EACXC,GAAmC,kBAAdH,GACnB,WAAc,OAAOA,EAAW,EAChC,SAAUnhC,IAAW,OAAOmhC,GAAUhpC,SAAS6H,GAAU,EAC3DkgC,EAAW,GACXqB,GAAc,SAAUxtC,IAExB,QADIiM,QAC4C2I,KAAvC3I,GAAUkgC,EAAS11B,QACnB82B,GAAYthC,MACbjM,IAAU,KAAOiM,GAAU,KAGnC,OAAOjM,EACX,EACImF,EAAI,EACJsoC,IAA0B,EAC1B3xC,GAAS4vC,EAAO5vC,OACbqJ,EAAIrJ,GAAQqJ,IAAK,CACpB,IAAIuoC,GAAOvoC,EAAIumC,EAAOprC,MAAM6E,GAAKumC,EAC7BiC,EAAyBzB,GAAyBC,GAClDlmB,GAAQwnB,IAA0B,GAAME,EACtCpC,GACAD,EACFsC,GAAYF,GAAKp1B,OAAO2N,IACxB4nB,GAAgBD,IAAY,EAAKA,GAAYF,GAAK5xC,OACtD,IAAgC,IAA5B2xC,GACA,GAAIE,EAAwB,CACxB,IAAIG,GAAkB1B,EAAmByB,KAAkBH,GAAK5xC,OAAS4xC,GAAOA,GAAKptC,MAAM,EAAGstC,KAC9F,GAAIL,GAAYpB,EAASA,EAASrwC,OAAS,IAAK,CAG5C,IAAIiyC,GAAoB5oC,EAAI,IAAMymC,EAAaF,EAAOjrC,WAAW0E,EAAI,IACjE6oC,IAAoBpC,EAAaF,EAAOjrC,WAAW0E,EAAI0oC,KACvDC,GAAgBhyC,OAAS,EACzBgyC,IACKC,GAAoB,IAAM,IACvBD,IACCE,GAAmB,IAAM,IAE7BD,IAAqBC,KAC1BF,GAAkB,KAEtBpC,EAASA,EAAOprC,MAAM,EAAG6E,GAAK2oC,GAAkBpC,EAAOprC,MAAM6E,EAAI0oC,IACjEA,GAAgBC,GAAgBhyC,OAGpC,IADAuxC,GAAYS,GAAgBhyC,QACbogB,EACX,eAIJmxB,GAAYQ,IACG3xB,EAAW,CACtB/W,EAAItE,KAAK8F,IAAIxB,EAAI0oC,GAAgBR,EAAWnxB,EAAW,GACvD,MAKZ,GADA/W,GAAK0oC,IACa,IAAdD,GACA,MAGJ,IADI9B,GAAWJ,EAAOjrC,WAAW0E,MAChBgmC,EAAoB,CACjC,IACI8C,IADA1B,GAAeb,EAAOjrC,WAAW0E,EAAI,MACL0lC,EACpC,GAAIoD,IAA4C,OAA5BvC,EAAOjlC,OAAOtB,EAAI,EAAG,GAErCA,EADsBumC,EAAOnrC,QAAQ,SAAO4E,EAAI,GAAK,EAC/B,UAEjB8oC,IAA4C,YAA5BvC,EAAOjlC,OAAOtB,EAAI,EAAG,GAAkB,CAE5DA,EADoBumC,EAAOnrC,QAAQ,MAAO4E,EAAI,GAAK,EAC/B,MAInB,CAED,IAAI+oC,EAAW3B,KAAiBtB,EAChC,GAAIoC,IAAanxB,IAAcgyB,EAAU,CACrCb,IACA,MAKJ,QAHIc,EAAyB,EACzBC,EAAWjpC,EACXkpC,GAAmB,IACgB,CAEnC,KADAD,GACgBtyC,GACZ,MAAM,IAAIwL,MAAM,iBAAmBokC,GAEvC,IAAI4C,EAAa5C,EAAOjrC,WAAW2tC,GACnC,GAAIC,EACIF,EACIG,IAAeH,IACfE,GAAmB,GAInBzC,EAAa0C,GACbD,GAAmB,EAEdC,IAAejD,IACpBgD,GAAmB,EACnBD,aAIHE,IAAelD,EAAsB,CAC1C,KAAOQ,EAAaF,EAAOjrC,WAAW2tC,EAAW,KAC7CA,IAEJC,GAAmB,EACnB,IAAIE,EAAyB7C,EAAOjrC,WAAW2tC,EAAW,GACtDG,IAA2BzD,GAC3ByD,IAA2BvD,GAC3BmD,EAAyBI,EACzBH,KAGAD,EAAyB,UAGxBG,IAAejD,EAAqB,CACzC,IAAImD,EAAoBrpC,GAAK+oC,EAAW,EAAI,GACxCO,EAAkB5tC,KAAKwF,IAAIolC,EAAkBC,EAAQ8C,GAAoBJ,IACzEniC,EAAUy/B,EACTprC,MAAMkuC,EAAmBC,GACzBC,eACOjuC,WAAWwL,EAAQnQ,OAAS,KAAOmvC,IAE3Ch/B,EAAUA,EAAQ3L,MAAM,EAAG2L,EAAQnQ,OAAS,IAEhD,IAAI6yC,EAAQpB,GAAYthC,GACxB,GAAIiiC,EAAU,CAEV,GADqB/B,EAAS11B,QACPxK,EACnB,MAAM,IAAI3E,MAAM,iBAAmBokC,GAEvC,GAAIf,EAAqBvmC,SAAS6H,KAC1B0+B,EAAqBnqB,KAAK,SAAUvU,IACpC,OAAOkgC,EAAS/nC,SAAS6H,GAC7B,GAGK,GAAI0iC,EACLxpC,EAAIsoC,GACJA,IAA0B,UAG1BA,IAA0B,GAC1BJ,GAAYR,IACG3wB,EACX,MAOZ,GADqBwuB,EAAetmC,SAAS6H,KACK,IAA5BwhC,KAAmCkB,KACrDrB,EACeL,GAAU,CAIrBd,EAAS/8B,KAAKnD,GACd,eAIHw+B,EAAcrmC,SAAS6H,IAC5By/B,EAAOjrC,WAAW2tC,EAAW,KAAOnD,GACpC,IAAI0D,EAGC,GAAgB,OAAZ1iC,GAEL,KADAqhC,EACeL,GACX,cAGa,QAAZhhC,IACLohC,GAAYR,IACG3wB,EACX,WAKJyuB,EAAqBnqB,KAAK,SAAUvU,IAAW,OAAOkgC,EAAS/nC,SAAS6H,GAAU,IAG7E0+B,EAAqBvmC,SAAS6H,KACnCwhC,GAA0BtoC,GAE9BgnC,EAAS/8B,KAAKnD,GAEd0iC,IAAqC,IAA5BlB,IACT/B,EAASA,EAAOprC,MAAM,EAAG6E,GAAKumC,EAAOprC,MAAM8tC,EAAW,GACtDjpC,KAGAA,EAAIipC,EAER,OAGR,GAAIf,EAAWnxB,GAAaoxB,EAAWL,GACnC,eAIHnB,KAAaf,EAAqB,CACnCqD,EAAWjpC,EAAI,EAEnB,QADIypC,IAAuB,IACY,CACnC,IAAIC,GAAanD,EAAOjrC,WAAW2tC,GACnC,IAAIvC,EAA8BgD,IAG7B,IAAIA,KAAe3D,EACpB,MAGA0D,IAAuB,EACvB,MAPAR,GAOA,CAGR,IAAgC,IAA5BX,MACAJ,EACenxB,EACX,MAGJ0yB,KACAzpC,EAAIipC,WAGHtC,KAAalB,GAMlB,KALAyC,EACenxB,KAGfoxB,EACeL,GACX,UAGH,CACD,IAAgC,IAA5BQ,MACAJ,EACenxB,EACX,MAKJ,IAAIqwB,GAFR,GAA4B,QAAZ,MAAXT,IAG+B,QAAZ,OADhBS,GAAeb,EAAOjrC,WAAW0E,EAAI,MAErCA,KAKhB,GAAIkoC,EAAWnxB,EAAW,CACtB,IAAI4yB,GAoMZ,SAASC,GAAerD,EAAQj2B,GAC5B,IAAImC,EAAO00B,GAAWZ,EAAQj2B,GAC9B,GAAa,MAATmC,EACA,OAAuC,CACnCnC,IACA,IAAI82B,EAAeb,EAAOjrC,WAAWgV,GACrC,IAAIo2B,EAA8BU,GACU,IAEnCA,IAAiBrB,EAAqB,CAC3CtzB,GAAQlU,OAAO8oC,aAAaD,GAC5B,MAGA,MAPA30B,GAAQlU,OAAO8oC,aAAaD,EAO5B,CAIZ,OAAO30B,CACX,CAvNuBm3B,CAAerD,EAAQvmC,GACtC,GAAI4nC,GAAW,CAEX,QADIiC,GAAY7pC,EAAI2pC,GAAShzC,OACtB4vC,EAAOjrC,WAAWuuC,MAAe7D,GACpCO,EAAOjrC,WAAWuuC,GAAY,KAAO/D,GAAyB,CAC9D,IAAIgE,GAAgBvD,EAAOnrC,QAAQ,IAAKyuC,GAAY,GAAK,EACzD,IAAIC,GAIA,MAHAD,GAAYC,EAGZ,CAGJD,KAAcA,KAActD,EAAO5vC,QAAUiwC,EAAYL,EAAQsD,OAIjE7pC,GAAK2pC,GAAShzC,OACdgzC,GAAWpD,EAAOwD,OAAO/pC,GAAC,CAKlC,KAAoB,MAAb2pC,IAAoBpD,EAAOjrC,WAAW0E,EAAI,KAAO8lC,GAAyB,CAC7E,IAAIh/B,EACJ,KADIA,EAAUkgC,EAAS11B,OAEnB,MAEJ,IAAI04B,GAAczD,EAAOnrC,QAAQ,IAAK4E,EAAI,GAC1C,IAAoB,IAAhBgqC,IAAsBzD,EAAOprC,MAAM6E,EAAI,EAAGgqC,IAAa9C,SAAWpgC,EAClE,MAAM,IAAI3E,MAAM,iBAAmBokC,GAEnC6B,GAAYthC,GACZy/B,EAASA,EAAOprC,MAAM,EAAG6E,GAAKumC,EAAOprC,MAAM6uC,GAAc,GAGzDhqC,EAAIgqC,GAAc,EAEtBL,GAAWpD,EAAOwD,OAAO/pC,EAAC,CAE9B,GAAIA,EAAIumC,EAAO5vC,OAAQ,CACnB,IAAKlC,EAAQw1C,WAET,QAASC,GAAIlqC,EAAI4nC,GAAUjxC,OAAQuzC,IAAK,EAAGA,KAAK,CAC5C,IAAIvD,GACJ,IADIA,GAAWJ,EAAOjrC,WAAW4uC,OAChBhE,GAAuBS,KAAaZ,EAKjD,MAEC,GAAIY,KAAalB,GAAqBkB,KAAaX,EAAoB,CACxEhmC,EAAIkqC,GACJ,SAEKzD,EAAaE,IAAW,CAC7B3mC,EAAIkqC,IAAKtC,GAAY,EAAI,GACzB,OAIZ,IAAI/sC,GAAS0rC,EAAOprC,MAAM,EAAG6E,GAC7B,OAAK4mC,EAAYL,EAAQvmC,KACrBnF,IAAU+sC,IAEPS,GAAYxtC,GAAM,UAGxBstC,EAAWL,GAChB,OAAOO,GAAY9B,EAAOprC,MAAM,EAAG6E,IAEvC,OAAOumC,CACX,CA1VUiB,CAASjB,EAAQxvB,EAAWtiB,GA2VtC,SAAS01C,EAAc5D,EAAQxvB,EAAWtiB,GAMtC,QALIgzC,EAAKhzC,EAAQmzC,UAAWA,QAAmB,IAAPH,EAAgB,SAAWA,EAAIE,GAAKlzC,EAAQqzC,SAAUA,QAAkB,IAAPH,GAAgBI,IAAWJ,GAChIO,EAAWN,GAAUjxC,OACrBwxC,GAAW,EACXnoC,EAAI,EACJrJ,GAAS4vC,EAAO5vC,OACbqJ,EAAIrJ,QACPuxC,EACenxB,GAFA/W,IAAK,CAMpB,IADI2mC,EAAWJ,EAAOjrC,WAAW0E,MAChBylC,GAEb,KADA0C,GACeL,GACX,cAGyB,QAAZ,MAAXnB,GAA+B,CAGL,QAAZ,MADDJ,EAAOjrC,WAAW0E,EAAI,KAErCA,KAIZ,GAAIkoC,EAAWnxB,EAAW,CACtB,IAAI4yB,GAAWxC,GAAWZ,EAAQvmC,GAClC,GAAI4nC,GAAW,CACX,IAAIiC,EAAY7pC,EAAI2pC,GAAShzC,OAC7B,GAAIkzC,IAActD,EAAO5vC,OACrB,OAAO4vC,EAEN,GAAIA,EAAOjrC,WAAWuuC,KAAepE,EACtC,OAAOc,EAAOprC,MAAM,EAAG6E,EAAI2pC,GAAShzC,OAAM,CAGlD,IAAKlC,EAAQw1C,WAET,QAASC,GAAIlqC,EAAI4nC,GAAUjxC,OAAQuzC,IAAK,EAAGA,KAAK,CAC5C,IAAIvD,EACJ,IADIA,EAAWJ,EAAOjrC,WAAW4uC,OAChBzE,EAAmB,CAChCzlC,EAAIkqC,GACJP,GAAW,KACX,SAEKlD,EAAaE,GAAW,CAC7B3mC,EAAIkqC,IAAKtC,GAAY,EAAI,GACzB,OAIZ,OAAOrB,EAAOprC,MAAM,EAAG6E,IAAmB,OAAb2pC,GAAoB,GAAK/B,OAEjDO,GAAWL,GAChB,OAAOvB,EAAOprC,MAAM,EAAG6E,GAE3B,OAAOumC,CACX,CApZU4D,CAAc5D,EAAQxvB,EAAWtiB,IAL5B,EAMf","names":["ColorPickerComponent","constructor","this","valueChange","EventEmitter","colorChanged","ngAfterViewInit","colorPickerDirective","cpPosition","cpUseRootViewContainer","options","width","cpWidth","height","cpHeight","dialogDisplay","cpDialogDisplay","position","positionOffset","cpPositionOffset","positionRelativeToArrow","cpPositionRelativeToArrow","useRootViewContainer","t","_angular_core__WEBPACK_IMPORTED_MODULE_1__","Xpm","selectors","viewQuery","rf","ctx","ColorPickerDirective","i0","$event","value","emit","_c0","placeholder","EditorComponent","BaseComponent","text","_text","tags","utility","extractTagsFromHtml","length","removeTagsFromHtml","setTimeout","textChange","onHeadRemove","join","getEditorConfig","showToolbar","disabled","editorFocused","editable","spellcheck","minHeight","maxHeight","minWidth","translate","enableToolbar","defaultParagraphSeparator","defaultFontName","defaultFontSize","fonts","class","name","customClasses","uploadUrl","uploadWithCredentials","sanitize","outline","toolbarPosition","toolbarHiddenButtons","super","onBlur","i1","_angular_core__WEBPACK_IMPORTED_MODULE_2__","inputs","id","outputs","features","decls","vars","consts","template","ctx_r0","title","ctx_r1","url","base64","ctx_r3","_r7","ctx_r6","delete","ImageEditComponent","_url","deleteButtonEnabled","maximumFileSize","fileSelected","fileSelect","file","files","type","startsWith","size","reader","FileReader","readAsDataURL","onload","result","toString","detect","Uint8Array","from","atob","slice","indexOf","c","charCodeAt","err","mime","showError","Math","floor","showDialogConfirm","then","si","dialogRef","close","no","_angular_core__WEBPACK_IMPORTED_MODULE_3__","blue","ImageEditComponent_div_3_Template","ImageEditComponent_img_5_Template","ImageEditComponent_img_6_Template","ImageEditComponent_div_7_Template","_r8","_r4","substring","ImageEditComponent_button_15_Template","ctx_r4","ImageComponent_mat_card_0_mat_card_title_1_Template","ImageComponent_mat_card_0_ng_container_2_Template","_r2","ImageComponent_ng_container_1_div_1_Template","ImageComponent_ng_container_1_ng_container_2_Template","_r12","ctx_r11","edit","ctx_r8","_r14","ctx_r13","_r16","ctx_r15","ctx_r10","ImageComponent_ng_template_2_img_2_Template","ImageComponent_ng_template_2_img_3_Template","ImageComponent_ng_template_2_button_4_Template","deleteAlwaysVisible","ImageComponent","container","_angular_core__WEBPACK_IMPORTED_MODULE_0__","ImageComponent_mat_card_0_Template","ImageComponent_ng_container_1_Template","ImageComponent_ng_template_2_Template","isString","str","String","isObject","obj","_obj$constructor","pick","keys","Array","isArray","_","k","includes","Object","entries","reduce","acc","_ref","v","DIRECTION","escapeRegExp","replace","objectIncludes","b","a","arrA","arrB","i","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","prototype","hasOwnProperty","call","ActionDetails","opts","assign","startChangePos","oldValue","oldSelection","start","min","cursorPos","insertedCount","inserted","substr","removedCount","max","end","removed","head","tail","removeDirection","IMask","el","InputMask","maskedClass","mask","Error","MaskedRegExp","MaskedPattern","MaskedDate","Number","MaskedNumber","MaskedDynamic","Masked","Function","MaskedFunction","console","warn","normalizeOpts","instanceOpts","_objectWithoutProperties","_excluded","_mask","_objectSpread","createMask","nOpts","MaskedClass","MaskElement","selectionStart","_unsafeSelectionStart","_unused","selectionEnd","_unsafeSelectionEnd","_unused2","select","_unsafeSelect","_unused3","isActive","HTMLMaskElement","input","_handlers","rootElement","_this$input$getRootNo","_this$input$getRootNo2","_this$input","getRootNode","document","activeElement","bindEvents","handlers","forEach","event","_toggleEventHandler","EVENTS_MAP","unbindEvents","handler","removeEventListener","addEventListener","selectionChange","drop","click","focus","commit","HTMLInputMaskElement","setSelectionRange","HTMLContenteditableMaskElement","root","selection","getSelection","anchorOffset","focusOffset","createRange","range","setStart","firstChild","setEnd","lastChild","removeAllRanges","addRange","textContent","isContentEditable","tagName","masked","_listeners","_value","_unmaskedValue","_saveSelection","bind","_onInput","_onChange","_onDrop","_onFocus","_onClick","alignCursor","alignCursorFriendly","_bindEvents","updateValue","maskEquals","_this$masked","updateOptions","unmaskedValue","updateControl","typedValue","val","typedValueEquals","displayValue","_unbindEvents","_fireEvent","ev","e","listeners","l","_cursorChanging","_changingCursorPos","pos","_selection","newUnmaskedValue","newValue","newDisplayValue","isChanged","_fireChangeEvents","restOpts","updateMask","updateOpts","updateCursor","_delayUpdateCursor","_abortUpdateCursor","_inputEvent","isComplete","clearTimeout","nearestInputPos","on","push","off","hIndex","splice","details","oldRawValue","rawInputValue","offset","raw","doCommit","preventDefault","stopPropagation","destroy","ChangeDetails","static","prep","rawInserted","skip","tailShift","aggregate","ContinuousTailDetails","stop","extend","appendTo","append","_appendPlaceholder","state","unshift","beforePos","shiftChar","shift","_update","DEFAULTS","_initialized","withValueRefresh","_rawInputValue","reset","resolve","flags","parse","format","extractInput","isFilled","direction","totalInputPositions","fromPos","toPos","extractTail","appendTail","_appendCharRaw","ch","_appendChar","checkTail","consistentState","doPrepareChar","consistentTail","appended","doValidate","beforeTailState","overwrite","tailDetails","_appendEager","_beforeTailState","doPrepare","ci","d","doSkipInvalid","eager","remove","fn","_refreshing","rawInput","ret","runIsolated","_isolated","skipInvalid","normalize","prepare","prepareChar","validate","parent","deleteCount","tailPos","eagerRemove","forceDirection","valLength","tval","EMPTY_VALUES","undefined","ChunksTailDetails","chunks","map","tailChunk","lastChunk","extendLast","firstTailChunk","blockIndex","chunk","lastBlockIter","_mapPosToBlock","chunkBlock","index","_stops","phDetails","_blocks","remainChars","props","cstate","chunkShiftPos","PatternCursor","_log","ok","block","_blockStartPos","s","pushState","popState","pop","bindBlock","_pushLeft","_this$block","_pushRight","pushLeftBeforeFilled","isFixed","pushLeftBeforeInput","pushLeftBeforeRequired","isOptional","pushRightBeforeFilled","pushRightBeforeInput","pushRightBeforeRequired","PatternFixedDefinition","isUnmasking","_isRawInput","maxPos","appendEager","isResolved","char","PatternInputDefinition","placeholderChar","displayChar","lazy","maskOpts","currentMaskFlags","boundPos","_flags$_beforeTailSta","DEFAULT_DEFINITIONS","search","definitions","_rebuildMask","defs","exposeBlock","_maskedBlocks","pattern","unmaskingBlock","optionalBlock","blocks","p","bNames","filter","bName","sort","_normalizeOpts","expose","blockOpts","maskedBlock","isInput","STOP_CHAR","ESCAPE_CHAR","def","maskedState","_excluded2","bi","every","_this$_mapPosToBlock","startBlockIndex","blockIter","blockDetails","chunkTail","_forEachBlocksInRange","bFromPos","bToPos","blockChunk","_findStopBefore","stopBefore","toBlockIndex","startBlockIter","endBlockIndex","_blocks2","bDetails","accVal","blockStartPos","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","cursor","total","maskedBlocks","indices","gi","InputDefinition","FixedDefinition","MaskedRange","_matchFrom","maxLength","to","autofix","patternOpts","fromStr","padStart","toStr","sameCharsCount","repeat","boundaries","minstr","maxstr","num","match","padEnd","nextVal","_MaskedDate$DEFAULTS$","_MaskedDate$DEFAULTS$2","patternBlocks","GET_DEFAULT_BLOCKS","Y","getFullYear","m","getMonth","getDate","bk","date","isDateExist","day","month","year","split","currentMask","exposeMask","compiledMasks","_overwrite","_eager","_skipInvalid","_applyDispatch","prevValueBeforeTail","inputValue","insertValue","tailValue","prevMask","prevMaskState","doDispatch","_flags$_beforeTailSta2","currentMaskRef","dispatch","currentDetails","_this$currentMask","_this$currentMask2","_this$currentMask3","_this$currentMask4","mi","_mask$mi","oldMask","_excluded3","_this$currentMask5","isCurrent","startInputPos","weight","i2","MaskedEnum","enum","_enum","eopts","lengths","requiredLength","optionalLength","some","_updateRegExps","allowNegative","scale","radix","_numberRegExp","_mapToRadixRegExp","mapToRadix","_thousandsSeparatorRegExp","thousandsSeparator","_removeThousandsSeparators","_insertThousandsSeparators","parts","prepCh","allowPositive","_separatorsCount","extendOnSeparators","count","_separatorsCountFromSlice","_adjustRangeWithSeparators","prevBeforeTailValue","prevBeforeTailSeparatorsCount","appendDetails","beforeTailValue","beforeTailSeparatorsCount","_findSeparatorAround","searchFrom","separatorPos","separatorAroundFromPos","separatorAroundToPos","valueBeforePos","valueAfterPos","separatorAtLeftPos","separatorAtLeftEndPos","separatorAtRightPos","valid","number","isNaN","validnum","formatted","normalizeZeros","_normalizeZeros","padFractionalZeros","_padFractionalZeros","sign","zeros","test","dropFractional","UNMASKED_RADIX","n","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","toLocaleString","useGrouping","maximumFractionDigits","PIPE_TYPE","MASKED","UNMASKED","TYPED","createPipe","arg","pipe","globalThis","CreditCardComponent","http","creditCardTypeDetected","flipped","moment","ccImage","color","expiration","securityCode","ngOnInit","get","responseType","subscribe","next","data","americanExpress","error","visa","diners","discover","jcb","maestro","mastercard","unionpay","cardnumber_mask","cardNumberInput","regex","cardtype","re","expirationdate_mask","expirationDateInput","YY","MM","securitycode_mask","securityCodeInput","TipoCartaCredito","AmericanExpress","Visa","DinersClub","DiscoveryCard","JCB","Maestro","MasterCard","ChinaUnionPay","nameInput","core","_r0","offsetHeight","ctx_r9","PagamentoFormDialogComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_div_1_Template","PagamentoFormDialogComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_div_2_Template","ctx_r7","html","PagamentoFormDialogComponent_ng_container_0_ng_container_1_ng_container_1_h4_1_Template","PagamentoFormDialogComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_Template","_c1","ctx_r5","hobexPaymentSubmitted","paymentSuccessUrl","_c2","PagamentoFormDialogComponent_ng_container_0_ng_container_1_ng_container_1_Template","PagamentoFormDialogComponent_ng_container_0_ng_container_1_div_2_Template","ctx_r2","hobexTransactionId","PagamentoFormDialogComponent_ng_container_0_ng_container_1_Template","PagamentoFormDialogComponent_ng_container_0_div_2_Template","sumupTransactionId","PagamentoFormDialogComponent","HOBEX_JS_URL","HOBEX_JS_URL_TEST","AXEPTA_URL","AXEPTA_URL_TEST","SumUpCard","mount","checkoutId","locale","lingua","onResponse","body","setIsLoading","window","wpwl","unload","wpwlOptions","context","paymentTarget","shopperResultTarget","labels","cvv","onAfterSubmit","loadExternalScript","isTest","axeptaTransactionId","AxeptaSDKClient","axeptaApiKeySmartCheckout","preparePayment","PagamentoFormDialogComponent_ng_container_0_Template","PagamentoFormDialogComponent_div_1_Template","PaymentWindowErrorComponent","onOpenWindowClick","open","paymentUrl","modalita_r9","nome","model","modalitaPagamento","note","caparraTotale","valuta","ctx_r12","arrivo","partenza","getImportoPagamento","PagamentoFormComponent_ng_container_9_div_1_Template","PagamentoFormComponent_ng_container_9_div_2_Template","PagamentoFormComponent_ng_container_9_div_3_Template","PagamentoFormComponent_ng_container_9_div_4_Template","showCaparra","tipo","enumTipoModalitaPagamento","Holipay","ScalaPay","ctx_r21","ctx_r22","immagine_r25","PagamentoFormComponent_div_10_ng_container_3_div_3_img_1_Template","ctx_r23","immaginiCarteCredito","PagamentoFormComponent_div_10_ng_container_3_div_1_Template","PagamentoFormComponent_div_10_ng_container_3_div_2_Template","PagamentoFormComponent_div_10_ng_container_3_div_3_Template","ctx_r14","tipoCarta_r26","_r19","_r18","_r17","PagamentoFormComponent_div_10_ng_container_3_Template","_r28","ctx_r27","tipoCarta","ctx_r29","verifyValidity","PagamentoFormComponent_div_10_mat_option_9_Template","ctx_r30","numeroCarta","ctx_r31","ctx_r32","codiceSicurezza","ctx_r33","ctx_r34","dataScadenza","ctx_r35","splitDataScadenza","ctx_r36","titolareCarta","ctx_r37","PagamentoFormComponent_div_10_div_30_Template","carteCredito","ctx_r38","banca","ctx_r39","intestatarioConto","ctx_r40","iban","ctx_r41","swift","_r45","ctx_r44","openCroDialog","_r47","ctx_r46","codiceRiferimentoOperazione","ctx_r48","PagamentoFormComponent_div_11_div_6_div_5_Template","ctx_r42","PagamentoFormComponent_div_11_div_2_Template","PagamentoFormComponent_div_11_div_3_Template","PagamentoFormComponent_div_11_div_4_Template","PagamentoFormComponent_div_11_div_5_Template","PagamentoFormComponent_div_11_div_6_Template","isVisualizzaCRO","_r50","ctx_r49","ctx_r51","privacy","ctx_r52","openPrivacyDialog","_r57","ctx_r56","openCondizioniContrattoDialog","_r59","ctx_r58","ctx_r60","contrattoAccettatto","PagamentoFormComponent_div_29_mat_checkbox_1_span_1_Template","PagamentoFormComponent_div_29_mat_checkbox_1_a_2_Template","ctx_r53","condizioniContratto","PagamentoFormComponent_div_29_mat_checkbox_1_Template","isAccettaContrattoPrenotazioneStep2","_r64","ctx_r63","openNewsletterDialog","_r66","ctx_r65","ctx_r67","newsletter","PagamentoFormComponent_div_30_span_2_Template","PagamentoFormComponent_div_30_a_3_Template","newsLetterPortale","_r69","ctx_r68","recaptchaResolved","_r72","ctx_r71","pay","ctx_r70","fullWidthButton","paymentFormValid","formValid","testoBottonePaga","PagamentoFormComponent_div_32_button_1_Template","PayPal","PagamentoFormComponent","_totale","totale","calculateCaparra","_isAccettaContrattoPrenotazioneStep2","_recaptchaAttiva","recaptchaAttiva","linguaPortaleAlbergo","oidAlbergo","oidPortale","rq","GetPagamentoFormViewRQ","apiService","getPagamentoFormView","res","tipiCarteCredito","carta","tipoCartaCredito","immagine","immaginiTipiCarteCredito","gettingModalitaPagamentoDefault","GetModalitaPagamentoDefaultRQ","getModalitaPagamentoDefault","modalitaPagamentoSet","gettingModalitaPagamentoDefault1","PaymentMethod","noPaymentMethod","_modalitaPagamento","paymentId","modalita","find","x","_formValid","checkPaypalButtonEnabled","_camere","camere","JSON","stringify","allModalitaPagamento","paypal","TipoModalitaPagamento","initPaypalConfig","paypalClientId","stripe","Stripe","getElementById","utilityService","STRIPE_JS_URL","stripePublicKey","elements","cardNumberElement","create","complete","stripeCardNumberValid","cardExpiryElement","stripeExpirationValid","cardCvcElement","stripeCvcValid","satispay","Satispay","SATISPAY_BUTTON_URL_TEST","SATISPAY_BUTTON_URL","SumUp","SUMUP_WIDGET_URL","AddonPayments","ADDON_PAYMENTS_LIGHTBOX_URL","axepta","Axepta","AXEPTA_JS_URL_TEST","AXEPTA_JS_URL","holipay","HOLIPAY_WIDGET_URL","holipayHotelId","SCALAPAY_ESM_WIDGET_URL","ScriptParameter","SCALAPAY_WIDGET_URL","_caparra","caparra","_isCaparraPercentuale","isCaparraPercentuale","beforeUnloadHandler","containerService","localStorage","testEnvironment","PaymentModel","pagamentoSuccessUrl","environment","environmentName","pagamentoErrorUrl","Map","EuroCard","BankCard","CarteBlanche","CarteBleu","UniversalAir","EnRoute","AccessCard","BankAmeriCard","Dankort","DinersClub_USACanada","InstaPayment","Laser","VisaElectron","Sconosciuto","paymentSuccess","descrizione","elevation","createOrder","onPaymentError","onCaparraChange","satispayCompleted","axeptaPaymentResultReceived","popupSuccess","ADDONPAYMENTS_API_URL","ADDONPAYMENTS_API_URL_TEST","origin","checkAxeptaMessage","action","satispayPaymentId","cancelSatispayOrder","localStorageSub","observe","openPaymentWindow","isLocalhost","location","dialog","clientId","payPalConfig","currency","style","label","shape","layout","tagline","createOrderOnServer","createPaypalOrder","authorizeOnServer","actions","capturePaypalOrder","onApprove","onCancel","onError","onClick","errorMessage","onInit","paypalButton","scadenzaCartaMese","scadenzaCartaAnno","CartaCredito","BonificoBancario","GetPrivacyPortaleRQ","getPrivacyPortale","rs","openPrivacyNewsletterDialog","privacyNewsletterPortale","openDialog","openUrlInNewTab","dialogOptions","DialogOptions","dimension","component","showModalDialog","componentInstance","BancaSella","createTransaction","encryptGestPayOrder","setTransactionId","transaction_id","openWindow","redirect_url","deleteTransaction","XPay","createXPayReservation","form","createXPayOrder","createSatispayOrder","SatispayWebButton","configure","completed","verifySatispayOrder","verifyRS","payment_status","createPaymentMethod","card","paymentMethod","isUsePost","checkPayment","stripePayment","confirmRs","message","paymentIntent","PayWay","createPayWayOrder","Unicredit","createUnicreditOrder","isVerificaCartaCredito","verificaCartaCredito","openLightBoxAddonPayments","BeSafePay","createBeSafePayOrder","createSumUpOrder","openIFrameSumUp","Hobex","payment","PaymentRQ","getHobexCreateRQ","cliente","extras","oidCodicePromozione","oidMotivoViaggio","bookingSolutionUid","hobexEntityId","hobexAccessToken","tipoContabilizzazione","TipoContabilizzazione","Immediata","success","openIFrameHobex","getAxeptaCreateRQ","axeptaApiKey","axeptaAccessToken","openAxeptaModal","getHolipayCreateRQ","holipaySecretKey","getSuccessUrl","getErrorUrl","oidTransazione","Siapay","getSiapayCreateRQ","siapayShopId","siapaySecretKey","createScalaPayOrder","scalaPayApiKey","token","VirtualPay","createVirtualPayOrder","MyPOS","createMyPOSOrder","paymentMethodId","Promise","reject","getStripeCreateRQ","stripeSecretKey","Differita","client_secret","confirmCardPayment","payment_method","getConfigAddonPayments","RealexHpp","setHppUrl","lightbox","init","addonPaymentsCallback","config","MERCHANT_ID","ORDER_ID","RESULT","MESSAGE","onPopupCheckFail","set","ref","windowUrl","afterClosed","href","interval","setInterval","closed","clearInterval","disableClose","panelClass","verifySumUpOrder","transactionId","getPaypalCreateRQ","paypalSecretKey","paypalTransactionId","paypalToken","getPaypalCaptureRQ","getGestpayEncryptRQ","gestpayShopId","gestpayApiKey","getXPayCreateRQ","xPayAlias","xPaySecretKey","getXPayCreateReservationRQ","getEnumKeyOriginal","TipoPrenotazioneXPay","xPayTipoPrenotazione","xPayCodiceStruttura","getAddonPaymentsConfigurationRQ","addonPaymentsMerchantId","addonPaymentsSecretKey","getSatispayCreateRQ","satispayKeyId","getSatispayVerifyRQ","loading","getSatispayCancelRQ","getPayWayCreateRQ","payWayTerminalId","payWaySecretKey","getUnicreditCreateRQ","unicreditTerminalId","unicreditSecretKey","getBeSafePayCreateRQ","beSafePayApiKey","getSumUpCreateRQ","sumUpMerchantId","sumUpClientId","sumUpSecretKey","sumupToken","getSumUpVerifyRQ","getScalaPayCreateRQ","getVirtualPayCreateRQ","virtualPayMerchantId","virtualPayABI","virtualPaySecretKey","getMyPOSCreateRQ","myPOSWalletNumber","myPOSSID","myPOSKeyIndex","VerificaCartaCreditoRQ","oidPortaleXAlbergo","intestatarioCC","numeroCC","tipoCartaCC","annoCC","meseCC","codiceSicurezzaCC","tipoEsito","onModalitaPagamentoChange","numeroNottiCaparra","camera","_camera$tariffa","giorni","tariffa","prezzoGiornaliero","prezzoScontato","prezzo","importoMinimoCaparra","isCaparraPerCamera","refreshHolipayWidget","dataSplit","parseInt","transazione","Transazione","statoEsecuzione","StatoEsecuzioneTransazione","NonEseguito","albergo","Albergo","importo","idTransazione","updateTransazione","oid","isPrenotazioneCreata","getTransazione","Eseguito","_res$data$prenotazion","codicePrenotazione","prenotazione","codiceOTA","Errore","descrizioneEsito","Annullato","enable","disable","updateWidgets","ngOnDestroy","unsubscribe","i3","i4","hostBindings","PagamentoFormComponent_mat_option_8_Template","PagamentoFormComponent_ng_container_9_Template","PagamentoFormComponent_div_10_Template","PagamentoFormComponent_div_11_Template","PagamentoFormComponent_div_28_Template","PagamentoFormComponent_div_29_Template","PagamentoFormComponent_div_30_Template","PagamentoFormComponent_div_31_Template","PagamentoFormComponent_div_32_Template","_c3","ReplacePipe","transform","regexValue","replaceValue","Yjl","pure","VOID_ELEMENTS","BLOCK_ELEMENTS","UNBREAKABLE_ELEMENTS","NEWLINE_CHAR_CODE","EXCLAMATION_CHAR_CODE","DOUBLE_QUOTE_CHAR_CODE","AMPERSAND_CHAR_CODE","SINGLE_QUOTE_CHAR_CODE","FORWARD_SLASH_CHAR_CODE","SEMICOLON_CHAR_CODE","TAG_OPEN_CHAR_CODE","EQUAL_SIGN_CHAR_CODE","TAG_CLOSE_CHAR_CODE","CHAR_OF_INTEREST_REGEX","CHAR_OF_INTEREST_NO_NEWLINE_REGEX","SIMPLIFY_WHITESPACE_REGEX","indexOfWhiteSpace","string","fromIndex","isWhiteSpace","isCharacterReferenceCharacter","charCode","isLineBreak","firstCharCode","newlineElements","shouldSimplifyWhiteSpace","tagStack","simplifyWhiteSpace","trim","takeCharAt","nextCharCode","fromCharCode","exports","clip","clipHtml","_a","imageWeight","_b","indicator","_c","maxLines","Infinity","_d","stripTags","numChars","numLines","shouldStrip","popTagStack","unbreakableElementIndex","rest","willSimplifyWhiteSpace","nextIndex","nextBlockSize","simplifiedBlock","insertSpaceBefore","insertSpaceAfter","isSpecialTag","isEndTag","attributeQuoteCharCode","endIndex","isAttributeValue","charCode_1","firstAttributeCharCode","tagNameStartIndex","tagNameEndIndex","toLowerCase","strip","isCharacterReference","charCode_2","nextChar","takeHtmlCharAt","peekIndex","nextPeekIndex","charAt","tagEndIndex","breakWords","j","clipPlainText"],"sourceRoot":"webpack:///","sources":["./src/app/interfaces/color-picker/color-picker.component.ts","./src/app/interfaces/color-picker/color-picker.component.html","./src/app/interfaces/editor/editor.component.ts","./src/app/interfaces/editor/editor.component.html","./src/app/interfaces/image-edit/image-edit.component.html","./src/app/interfaces/image-edit/image-edit.component.ts","./src/app/interfaces/image/image.component.html","./src/app/interfaces/image/image.component.ts","./node_modules/imask/esm/core/utils.js","./node_modules/imask/esm/core/action-details.js","./node_modules/imask/esm/core/holder.js","./node_modules/imask/esm/masked/factory.js","./node_modules/imask/esm/controls/mask-element.js","./node_modules/imask/esm/controls/html-mask-element.js","./node_modules/imask/esm/controls/html-input-mask-element.js","./node_modules/imask/esm/controls/html-contenteditable-mask-element.js","./node_modules/imask/esm/controls/input.js","./node_modules/imask/esm/core/change-details.js","./node_modules/imask/esm/core/continuous-tail-details.js","./node_modules/imask/esm/masked/base.js","./node_modules/imask/esm/masked/pattern/chunk-tail-details.js","./node_modules/imask/esm/masked/pattern/cursor.js","./node_modules/imask/esm/masked/pattern/fixed-definition.js","./node_modules/imask/esm/masked/pattern/input-definition.js","./node_modules/imask/esm/masked/regexp.js","./node_modules/imask/esm/masked/pattern.js","./node_modules/imask/esm/masked/range.js","./node_modules/imask/esm/masked/date.js","./node_modules/imask/esm/masked/dynamic.js","./node_modules/imask/esm/masked/enum.js","./node_modules/imask/esm/masked/function.js","./node_modules/imask/esm/masked/number.js","./node_modules/imask/esm/masked/pipe.js","./node_modules/imask/esm/index.js","./src/app/interfaces/pagamento-form/credit-card/credit-card.component.ts","./src/app/interfaces/pagamento-form/credit-card/credit-card.component.html","./src/app/interfaces/pagamento-form/pagamento-form-dialog/pagamento-form-dialog.component.html","./src/app/interfaces/pagamento-form/pagamento-form-dialog/pagamento-form-dialog.component.ts","./src/app/interfaces/pagamento-form/payment-window-error/payment-window-error.component.ts","./src/app/interfaces/pagamento-form/payment-window-error/payment-window-error.component.html","./src/app/interfaces/pagamento-form/pagamento-form.component.html","./src/app/interfaces/pagamento-form/pagamento-form.component.ts","./src/app/shared/pipes/replace-pipe.ts","./node_modules/text-clipper/dist/index.js"],"sourcesContent":["import { AfterViewInit, Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';\r\nimport { ColorPickerDirective } from 'ngx-color-picker';\r\nimport { ColorPickerModel } from 'src/app/shared/models/dto';\r\n\r\n@Component({\r\n  selector: 'app-color-picker',\r\n  templateUrl: './color-picker.component.html',\r\n  styleUrls: ['./color-picker.component.scss']\r\n})\r\nexport class ColorPickerComponent implements AfterViewInit {\r\n\r\n  @Input() options: ColorPickerModel;\r\n  @Input() value: string;\r\n  @Input() placeholder: string;\r\n\r\n  @Output() valueChange: EventEmitter<string> = new EventEmitter();\r\n  @Output() colorChanged: EventEmitter<any> = new EventEmitter();\r\n\r\n  @ViewChild(ColorPickerDirective) colorPickerDirective: ColorPickerDirective;\r\n\r\n  constructor() { }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.colorPickerDirective) {\r\n      this.colorPickerDirective.cpPosition = 'bottom';\r\n      this.colorPickerDirective.cpUseRootViewContainer = true;\r\n\r\n      if (this.options) {\r\n        if (this.options.width) {\r\n          this.colorPickerDirective.cpWidth = this.options.width;\r\n        }\r\n\r\n        if (this.options.height) {\r\n          this.colorPickerDirective.cpHeight = this.options.height;\r\n        }\r\n\r\n        if (this.options.dialogDisplay) {\r\n          this.colorPickerDirective.cpDialogDisplay = this.options.dialogDisplay;\r\n        }\r\n\r\n        if (this.options.position) {\r\n          this.colorPickerDirective.cpPosition = this.options.position;\r\n        }\r\n\r\n        if (this.options.positionOffset) {\r\n          this.colorPickerDirective.cpPositionOffset = this.options.positionOffset;\r\n        }\r\n\r\n        if (this.options.positionRelativeToArrow) {\r\n          this.colorPickerDirective.cpPositionRelativeToArrow = this.options.positionRelativeToArrow;\r\n        }\r\n\r\n        if (this.options.useRootViewContainer != null) {\r\n          this.colorPickerDirective.cpUseRootViewContainer = this.options.useRootViewContainer;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}","<mat-form-field class=\"w-100\">\r\n    <input autocompleteOff matInput [(colorPicker)]=\"value\" (colorPickerChange)=\"valueChange.emit(value)\" (cpSliderDragEnd)=\"colorChanged.emit()\" [(ngModel)]=\"value\" [style.background]=\"value\" [ngClass]=\"{'border': !!value}\" [placeholder]=\"placeholder\" readonly>\r\n</mat-form-field>","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { AngularEditorConfig } from '@kolkov/angular-editor';\r\nimport { BaseComponent } from 'src/app/interfaces/base-component/base-component';\r\nimport { UtilityService } from 'src/app/shared/services/utility.service';\r\n\r\n@Component({\r\n  selector: 'app-editor',\r\n  templateUrl: './editor.component.html',\r\n  styleUrls: ['./editor.component.scss']\r\n})\r\nexport class EditorComponent extends BaseComponent {\r\n\r\n  @Input() set text(value: string) {\r\n    this._text = value;\r\n\r\n    if (!!this._text) {\r\n      let tags = this.utility.extractTagsFromHtml(this._text, ['style', 'link']);\r\n\r\n      if (tags.length > 0) {\r\n        this._text = this.utility.removeTagsFromHtml(this._text, ['style', 'link']);\r\n\r\n        setTimeout(() => {\r\n          this.textChange.emit(this._text);\r\n          this.onHeadRemove.emit(tags.join());\r\n        }, 200);\r\n      }\r\n    }\r\n  };\r\n\r\n  @Input() id: string;\r\n  @Input() height: number = 200;\r\n  @Input() showToolbar: boolean = true;\r\n  @Input() disabled: boolean = false;\r\n\r\n  @Output() onBlur: EventEmitter<any> = new EventEmitter();\r\n  @Output() textChange: EventEmitter<string> = new EventEmitter();\r\n  @Output() onHeadRemove: EventEmitter<string> = new EventEmitter();\r\n\r\n  public editorFocused: boolean = false;\r\n  public _text: string;\r\n\r\n  public getEditorConfig(): AngularEditorConfig {\r\n    let height = this.height;\r\n\r\n    if (this.showToolbar && !this.disabled && !this.editorFocused) {\r\n      height += 42;\r\n    }\r\n\r\n    return {\r\n      editable: !this.disabled,\r\n      spellcheck: true,\r\n      height: height + 'px',\r\n      minHeight: height + 'px',\r\n      maxHeight: height + 'px',\r\n      width: '100%',\r\n      minWidth: '100%',\r\n      translate: 'yes',\r\n      enableToolbar: this.showToolbar && !this.disabled && this.editorFocused,\r\n      showToolbar: this.showToolbar && !this.disabled && this.editorFocused,\r\n      placeholder: '',\r\n      defaultParagraphSeparator: '',\r\n      defaultFontName: '',\r\n      defaultFontSize: '',\r\n      fonts: [\r\n        { class: 'arial', name: 'Arial' },\r\n        { class: 'times-new-roman', name: 'Times New Roman' },\r\n        { class: 'calibri', name: 'Calibri' },\r\n        { class: 'comic-sans-ms', name: 'Comic Sans MS' }\r\n      ],\r\n      customClasses: null,\r\n      uploadUrl: '',\r\n      uploadWithCredentials: false,\r\n      sanitize: false,\r\n      outline: false,\r\n      toolbarPosition: 'top',\r\n      toolbarHiddenButtons: [\r\n        ['undo', 'redo'],\r\n        ['insertImage', 'insertVideo', 'removeFormat', 'customClasses']\r\n      ]\r\n    };\r\n  }\r\n\r\n  constructor(private utility: UtilityService) {\r\n    super();\r\n  }\r\n}\r\n","<angular-editor [id]=\"id\" [config]=\"getEditorConfig()\" [(ngModel)]=\"_text\" (ngModelChange)=\"textChange.emit(_text)\" (focus)=\"editorFocused = true\" (blur)=\"editorFocused = false; onBlur.emit();\"></angular-editor>","<button mat-icon-button [matDialogClose] class=\"modal-close-button\" [disableRipple]=\"true\">\r\n    <i class=\"material-icons-round\">clear</i>\r\n</button>\r\n\r\n<div class=\"mb-2 text-center font-weight-bold\" *ngIf=\"!!title\">\r\n    {{title | translate}}\r\n</div>\r\n\r\n<div class=\"imageRow text-center\">\r\n    <img class=\"rounded\" [src]=\"!!url ? url : base64\" *ngIf=\"!!url || !!base64\">\r\n    <img class=\"rounded\" src=\"assets/images/sbm/no-image.png\" *ngIf=\"!url && !base64\">\r\n</div>\r\n\r\n<div class=\"mt-3 text-center\" *ngIf=\"!!url\">\r\n    {{url}}\r\n</div>\r\n\r\n<div class=\"mt-3 text-center\">\r\n    <input autocompleteOff #fileInput type=\"file\" accept=\"image/png, image/jpeg\" (change)=\"fileSelected(fileInput)\">\r\n</div>\r\n\r\n<div class=\"mt-3 text-center\">\r\n    <button mat-flat-button [color]=\"blue ? null : 'primary'\" [ngClass]=\"{'button-blue': blue}\" (click)=\"dialogRef.close(!!base64 ? base64.substring(base64.indexOf(',') + 1) : base64)\">{{ 'globals.salva' | translate}}</button>\r\n    <button mat-flat-button color=\"blank\" (click)=\"delete()\" class=\"ml-1\" *ngIf=\"deleteButtonEnabled\">{{ 'globals.elimina' | translate}}</button>\r\n</div>","import { Component, Input } from '@angular/core';\r\nimport { MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\r\nimport * as detect from 'detect-file-type';\r\n\r\nimport { BaseComponent } from '../base-component/base-component';\r\n\r\n@Component({\r\n  selector: 'app-image-edit',\r\n  templateUrl: './image-edit.component.html',\r\n  styleUrls: ['./image-edit.component.scss']\r\n})\r\nexport class ImageEditComponent extends BaseComponent {\r\n\r\n  @Input() set _url(value: string) {\r\n    this.url = value;\r\n\r\n    if (!this.url) {\r\n      this.deleteButtonEnabled = false;\r\n    } else {\r\n      this.deleteButtonEnabled = true;\r\n    }\r\n  };\r\n\r\n  @Input() maximumFileSize: number = 0;\r\n  @Input() title: string;\r\n  @Input() dialogRef: MatDialogRef<{}, any>;\r\n  @Input() blue: boolean;\r\n\r\n  public url: string;\r\n  public base64: string;\r\n  public deleteButtonEnabled = true;\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  fileSelected(fileSelect: any) {\r\n    let file: File = fileSelect.files == null || fileSelect.files.length == 0 ? null : fileSelect.files[0];\r\n\r\n    if (file != null && !!file.type && file.type.startsWith('image/')) {\r\n      if (this.maximumFileSize <= 0 || file.size <= this.maximumFileSize) {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => {\r\n          let base64 = reader.result.toString();\r\n\r\n          if (!!base64) {\r\n            detect.fromBuffer(Uint8Array.from(atob(base64.slice(base64.indexOf(',') + 1)), (c) => c.charCodeAt(0)), (err, result) => {\r\n              if (!err && result != null && !!result.mime && result.mime.startsWith('image/')) {\r\n                this.url = null;\r\n                this.base64 = base64;\r\n              } else {\r\n                fileSelect.value = '';\r\n                this.showError('globals.messages.fileNonValido');\r\n              }\r\n            });\r\n          } else {\r\n            fileSelect.value = '';\r\n            this.showError('globals.messages.fileNonValido');\r\n          }\r\n        }\r\n      } else {\r\n        fileSelect.value = '';\r\n        this.showError('globals.messages.fileTroppoGrande', { size: Math.floor(this.maximumFileSize / 1000) });\r\n      }\r\n    } else {\r\n      fileSelect.value = '';\r\n      this.showError('globals.messages.fileNonValido');\r\n    }\r\n  }\r\n\r\n  delete() {\r\n    this.showDialogConfirm('globals.eliminareImmagine')\r\n      .then(si => {\r\n        this.dialogRef.close('');\r\n      },\r\n        no => { }\r\n      );\r\n  }\r\n}","<mat-card class=\"border mat-elevation-z0\" *ngIf=\"container\">\n    <mat-card-title class=\"text-center\" *ngIf=\"!!title\">\n        {{ title | translate }}\n    </mat-card-title>\n\n    <ng-container *ngTemplateOutlet=\"image\"></ng-container>\n</mat-card>\n\n<ng-container *ngIf=\"!container\">\n    <div class=\"text-center font-weight-bold mb-3\" *ngIf=\"!!title\">{{ title | translate }}</div>\n    <ng-container *ngTemplateOutlet=\"image\"></ng-container>\n</ng-container>\n\n<ng-template #image>\n    <div class=\"imageRow\">\n        <div class=\"imageHeight\">\n            <img class=\"rounded\" [src]=\"url\" (click)=\"edit.emit()\" *ngIf=\"!!url\">\n            <img class=\"rounded\" src=\"assets/images/sbm/no-image.png\" (click)=\"edit.emit()\" *ngIf=\"!url\">\n        </div>\n\n        <button mat-icon-button [color]=\"blue ? null : 'primary'\" (click)=\"delete.emit()\" class=\"delete-button\" [ngClass]=\"{'button-blue': blue}\" *ngIf=\"deleteAlwaysVisible || !!url\">\n            <i class=\"material-icons delete-icon\">delete</i>\n        </button>\n    </div>\n</ng-template>","import { Component, EventEmitter, Input, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-image',\n  templateUrl: './image.component.html',\n  styleUrls: ['./image.component.scss']\n})\nexport class ImageComponent {\n\n  @Input() title: string;\n  @Input() url: string;\n  @Input() container: boolean = true;\n  @Input() deleteAlwaysVisible: boolean = false;\n  @Input() blue: boolean = false;\n\n  @Output() edit: EventEmitter<any> = new EventEmitter();\n  @Output() delete: EventEmitter<any> = new EventEmitter();\n\n  constructor() { }\n}\n","/** Checks if value is string */\nfunction isString(str) {\n  return typeof str === 'string' || str instanceof String;\n}\n\n/** Checks if value is object */\nfunction isObject(obj) {\n  var _obj$constructor;\n  return typeof obj === 'object' && obj != null && (obj == null || (_obj$constructor = obj.constructor) == null ? void 0 : _obj$constructor.name) === 'Object';\n}\nfunction pick(obj, keys) {\n  if (Array.isArray(keys)) return pick(obj, (_, k) => keys.includes(k));\n  return Object.entries(obj).reduce((acc, _ref) => {\n    let [k, v] = _ref;\n    if (keys(v, k)) acc[k] = v;\n    return acc;\n  }, {});\n}\n\n/** Direction */\nconst DIRECTION = {\n  NONE: 'NONE',\n  LEFT: 'LEFT',\n  FORCE_LEFT: 'FORCE_LEFT',\n  RIGHT: 'RIGHT',\n  FORCE_RIGHT: 'FORCE_RIGHT'\n};\n\n/** Direction */\n\nfunction forceDirection(direction) {\n  switch (direction) {\n    case DIRECTION.LEFT:\n      return DIRECTION.FORCE_LEFT;\n    case DIRECTION.RIGHT:\n      return DIRECTION.FORCE_RIGHT;\n    default:\n      return direction;\n  }\n}\n\n/** Escapes regular expression control chars */\nfunction escapeRegExp(str) {\n  return str.replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1');\n}\n\n// cloned from https://github.com/epoberezkin/fast-deep-equal with small changes\nfunction objectIncludes(b, a) {\n  if (a === b) return true;\n  const arrA = Array.isArray(a),\n    arrB = Array.isArray(b);\n  let i;\n  if (arrA && arrB) {\n    if (a.length != b.length) return false;\n    for (i = 0; i < a.length; i++) if (!objectIncludes(a[i], b[i])) return false;\n    return true;\n  }\n  if (arrA != arrB) return false;\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const dateA = a instanceof Date,\n      dateB = b instanceof Date;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    if (dateA != dateB) return false;\n    const regexpA = a instanceof RegExp,\n      regexpB = b instanceof RegExp;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    if (regexpA != regexpB) return false;\n    const keys = Object.keys(a);\n    // if (keys.length !== Object.keys(b).length) return false;\n\n    for (i = 0; i < keys.length; i++) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    for (i = 0; i < keys.length; i++) if (!objectIncludes(b[keys[i]], a[keys[i]])) return false;\n    return true;\n  } else if (a && b && typeof a === 'function' && typeof b === 'function') {\n    return a.toString() === b.toString();\n  }\n  return false;\n}\n\n/** Selection range */\n\nexport { DIRECTION, escapeRegExp, forceDirection, isObject, isString, objectIncludes, pick };\n","import { DIRECTION } from './utils.js';\n\n/** Provides details of changing input */\nclass ActionDetails {\n  /** Current input value */\n\n  /** Current cursor position */\n\n  /** Old input value */\n\n  /** Old selection */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n\n    // double check if left part was changed (autofilling, other non-standard input triggers)\n    while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\n      --this.oldSelection.start;\n    }\n  }\n\n  /** Start changing position */\n  get startChangePos() {\n    return Math.min(this.cursorPos, this.oldSelection.start);\n  }\n\n  /** Inserted symbols count */\n  get insertedCount() {\n    return this.cursorPos - this.startChangePos;\n  }\n\n  /** Inserted symbols */\n  get inserted() {\n    return this.value.substr(this.startChangePos, this.insertedCount);\n  }\n\n  /** Removed symbols count */\n  get removedCount() {\n    // Math.max for opposite operation\n    return Math.max(this.oldSelection.end - this.startChangePos ||\n    // for Delete\n    this.oldValue.length - this.value.length, 0);\n  }\n\n  /** Removed symbols */\n  get removed() {\n    return this.oldValue.substr(this.startChangePos, this.removedCount);\n  }\n\n  /** Unchanged head symbols */\n  get head() {\n    return this.value.substring(0, this.startChangePos);\n  }\n\n  /** Unchanged tail symbols */\n  get tail() {\n    return this.value.substring(this.startChangePos + this.insertedCount);\n  }\n\n  /** Remove direction */\n  get removeDirection() {\n    if (!this.removedCount || this.insertedCount) return DIRECTION.NONE;\n\n    // align right if delete at right\n    return (this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos) &&\n    // if not range removed (event with backspace)\n    this.oldSelection.end === this.oldSelection.start ? DIRECTION.RIGHT : DIRECTION.LEFT;\n  }\n}\n\nexport { ActionDetails as default };\n","/** Applies mask on element */\nfunction IMask(el, opts) {\n  // currently available only for input-like elements\n  return new IMask.InputMask(el, opts);\n}\n\nexport { IMask as default };\n","import { isString, isObject, pick } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n// export function maskedClass(mask: string): typeof MaskedPattern;\n// export function maskedClass(mask: DateConstructor): typeof MaskedDate;\n// export function maskedClass(mask: NumberConstructor): typeof MaskedNumber;\n// export function maskedClass(mask: Array<any> | ArrayConstructor): typeof MaskedDynamic;\n// export function maskedClass(mask: MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass(mask: Masked): typeof Masked;\n// export function maskedClass(mask: typeof Masked): typeof Masked;\n// export function maskedClass(mask: typeof MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: typeof MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: typeof MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: typeof MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: typeof MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: typeof MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: typeof MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: typeof MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass<Mask extends typeof Masked> (mask: Mask): Mask;\n// export function maskedClass(mask: RegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: (value: string, ...args: any[]) => boolean): typeof MaskedFunction;\n/** Get Masked class by mask type */\nfunction maskedClass(mask) /* TODO */{\n  if (mask == null) throw new Error('mask property should be defined');\n  if (mask instanceof RegExp) return IMask.MaskedRegExp;\n  if (isString(mask)) return IMask.MaskedPattern;\n  if (mask === Date) return IMask.MaskedDate;\n  if (mask === Number) return IMask.MaskedNumber;\n  if (Array.isArray(mask) || mask === Array) return IMask.MaskedDynamic;\n  if (IMask.Masked && mask.prototype instanceof IMask.Masked) return mask;\n  if (IMask.Masked && mask instanceof IMask.Masked) return mask.constructor;\n  if (mask instanceof Function) return IMask.MaskedFunction;\n  console.warn('Mask not found for mask', mask); // eslint-disable-line no-console\n  return IMask.Masked;\n}\nfunction normalizeOpts(opts) {\n  if (!opts) throw new Error('Options in not defined');\n  if (IMask.Masked) {\n    if (opts.prototype instanceof IMask.Masked) return {\n      mask: opts\n    };\n\n    /*\n      handle cases like:\n      1) opts = Masked\n      2) opts = { mask: Masked, ...instanceOpts }\n    */\n    const {\n      mask = undefined,\n      ...instanceOpts\n    } = opts instanceof IMask.Masked ? {\n      mask: opts\n    } : isObject(opts) && opts.mask instanceof IMask.Masked ? opts : {};\n    if (mask) {\n      const _mask = mask.mask;\n      return {\n        ...pick(mask, (_, k) => !k.startsWith('_')),\n        mask: mask.constructor,\n        _mask,\n        ...instanceOpts\n      };\n    }\n  }\n  if (!isObject(opts)) return {\n    mask: opts\n  };\n  return {\n    ...opts\n  };\n}\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n\n// From masked\n// export default function createMask<Opts extends Masked, ReturnMasked=Opts> (opts: Opts): ReturnMasked;\n// // From masked class\n// export default function createMask<Opts extends MaskedOptions<typeof Masked>, ReturnMasked extends Masked=InstanceType<Opts['mask']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDate>, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedNumber>, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedEnum>, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRange>, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedFunction>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedPattern>, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDynamic>, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// // From mask opts\n// export default function createMask<Opts extends MaskedOptions<Masked>, ReturnMasked=Opts extends MaskedOptions<infer M> ? M : never> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedNumberOptions, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDateFactoryOptions, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedEnumOptions, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedRangeOptions, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedPatternOptions, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDynamicOptions, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<RegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<Function>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n\n/** Creates new {@link Masked} depending on mask type */\nfunction createMask(opts) {\n  if (IMask.Masked && opts instanceof IMask.Masked) return opts;\n  const nOpts = normalizeOpts(opts);\n  const MaskedClass = maskedClass(nOpts.mask);\n  if (!MaskedClass) throw new Error('Masked class is not found for provided mask, appropriate module needs to be imported manually before creating mask.');\n  if (nOpts.mask === MaskedClass) delete nOpts.mask;\n  if (nOpts._mask) {\n    nOpts.mask = nOpts._mask;\n    delete nOpts._mask;\n  }\n  return new MaskedClass(nOpts);\n}\nIMask.createMask = createMask;\n\nexport { createMask as default, maskedClass, normalizeOpts };\n","import IMask from '../core/holder.js';\n\n/**  Generic element API to use with mask */\nclass MaskElement {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** Safely returns selection start */\n  get selectionStart() {\n    let start;\n    try {\n      start = this._unsafeSelectionStart;\n    } catch {}\n    return start != null ? start : this.value.length;\n  }\n\n  /** Safely returns selection end */\n  get selectionEnd() {\n    let end;\n    try {\n      end = this._unsafeSelectionEnd;\n    } catch {}\n    return end != null ? end : this.value.length;\n  }\n\n  /** Safely sets element selection */\n  select(start, end) {\n    if (start == null || end == null || start === this.selectionStart && end === this.selectionEnd) return;\n    try {\n      this._unsafeSelect(start, end);\n    } catch {}\n  }\n\n  /** */\n  get isActive() {\n    return false;\n  }\n  /** */\n\n  /** */\n\n  /** */\n}\n\nIMask.MaskElement = MaskElement;\n\nexport { MaskElement as default };\n","import MaskElement from './mask-element.js';\nimport IMask from '../core/holder.js';\n\n/** Bridge between HTMLElement and {@link Masked} */\nclass HTMLMaskElement extends MaskElement {\n  /** HTMLElement to use mask on */\n\n  constructor(input) {\n    super();\n    this.input = input;\n    this._handlers = {};\n  }\n  get rootElement() {\n    var _this$input$getRootNo, _this$input$getRootNo2, _this$input;\n    return (_this$input$getRootNo = (_this$input$getRootNo2 = (_this$input = this.input).getRootNode) == null ? void 0 : _this$input$getRootNo2.call(_this$input)) != null ? _this$input$getRootNo : document;\n  }\n\n  /**\n    Is element in focus\n  */\n  get isActive() {\n    return this.input === this.rootElement.activeElement;\n  }\n\n  /**\n    Binds HTMLElement events to mask internal events\n  */\n  bindEvents(handlers) {\n    Object.keys(handlers).forEach(event => this._toggleEventHandler(HTMLMaskElement.EVENTS_MAP[event], handlers[event]));\n  }\n\n  /**\n    Unbinds HTMLElement events to mask internal events\n  */\n  unbindEvents() {\n    Object.keys(this._handlers).forEach(event => this._toggleEventHandler(event));\n  }\n  _toggleEventHandler(event, handler) {\n    if (this._handlers[event]) {\n      this.input.removeEventListener(event, this._handlers[event]);\n      delete this._handlers[event];\n    }\n    if (handler) {\n      this.input.addEventListener(event, handler);\n      this._handlers[event] = handler;\n    }\n  }\n}\n/** Mapping between HTMLElement events and mask internal events */\nHTMLMaskElement.EVENTS_MAP = {\n  selectionChange: 'keydown',\n  input: 'input',\n  drop: 'drop',\n  click: 'click',\n  focus: 'focus',\n  commit: 'blur'\n};\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\n/** Bridge between InputElement and {@link Masked} */\nclass HTMLInputMaskElement extends HTMLMaskElement {\n  /** InputElement to use mask on */\n\n  constructor(input) {\n    super(input);\n    this.input = input;\n    this._handlers = {};\n  }\n\n  /** Returns InputElement selection start */\n  get _unsafeSelectionStart() {\n    return this.input.selectionStart != null ? this.input.selectionStart : this.value.length;\n  }\n\n  /** Returns InputElement selection end */\n  get _unsafeSelectionEnd() {\n    return this.input.selectionEnd;\n  }\n\n  /** Sets InputElement selection */\n  _unsafeSelect(start, end) {\n    this.input.setSelectionRange(start, end);\n  }\n  get value() {\n    return this.input.value;\n  }\n  set value(value) {\n    this.input.value = value;\n  }\n}\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLInputMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\nclass HTMLContenteditableMaskElement extends HTMLMaskElement {\n  /** Returns HTMLElement selection start */\n  get _unsafeSelectionStart() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset < focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Returns HTMLElement selection end */\n  get _unsafeSelectionEnd() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset > focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Sets HTMLElement selection */\n  _unsafeSelect(start, end) {\n    if (!this.rootElement.createRange) return;\n    const range = this.rootElement.createRange();\n    range.setStart(this.input.firstChild || this.input, start);\n    range.setEnd(this.input.lastChild || this.input, end);\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n\n  /** HTMLElement value */\n  get value() {\n    return this.input.textContent || '';\n  }\n  set value(value) {\n    this.input.textContent = value;\n  }\n}\nIMask.HTMLContenteditableMaskElement = HTMLContenteditableMaskElement;\n\nexport { HTMLContenteditableMaskElement as default };\n","import { objectIncludes, DIRECTION } from '../core/utils.js';\nimport ActionDetails from '../core/action-details.js';\nimport createMask, { maskedClass } from '../masked/factory.js';\nimport MaskElement from './mask-element.js';\nimport HTMLInputMaskElement from './html-input-mask-element.js';\nimport HTMLContenteditableMaskElement from './html-contenteditable-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './html-mask-element.js';\n\n/** Listens to element events and controls changes between element and {@link Masked} */\nclass InputMask {\n  /**\n    View element\n  */\n\n  /** Internal {@link Masked} model */\n\n  constructor(el, opts) {\n    this.el = el instanceof MaskElement ? el : el.isContentEditable && el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' ? new HTMLContenteditableMaskElement(el) : new HTMLInputMaskElement(el);\n    this.masked = createMask(opts);\n    this._listeners = {};\n    this._value = '';\n    this._unmaskedValue = '';\n    this._saveSelection = this._saveSelection.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onChange = this._onChange.bind(this);\n    this._onDrop = this._onDrop.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onClick = this._onClick.bind(this);\n    this.alignCursor = this.alignCursor.bind(this);\n    this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\n    this._bindEvents();\n\n    // refresh\n    this.updateValue();\n    this._onChange();\n  }\n  maskEquals(mask) {\n    var _this$masked;\n    return mask == null || ((_this$masked = this.masked) == null ? void 0 : _this$masked.maskEquals(mask));\n  }\n\n  /** Masked */\n  get mask() {\n    return this.masked.mask;\n  }\n  set mask(mask) {\n    if (this.maskEquals(mask)) return;\n    if (!(mask instanceof IMask.Masked) && this.masked.constructor === maskedClass(mask)) {\n      // TODO \"any\" no idea\n      this.masked.updateOptions({\n        mask\n      });\n      return;\n    }\n    const masked = mask instanceof IMask.Masked ? mask : createMask({\n      mask\n    });\n    masked.unmaskedValue = this.masked.unmaskedValue;\n    this.masked = masked;\n  }\n\n  /** Raw value */\n  get value() {\n    return this._value;\n  }\n  set value(str) {\n    if (this.value === str) return;\n    this.masked.value = str;\n    this.updateControl();\n    this.alignCursor();\n  }\n\n  /** Unmasked value */\n  get unmaskedValue() {\n    return this._unmaskedValue;\n  }\n  set unmaskedValue(str) {\n    if (this.unmaskedValue === str) return;\n    this.masked.unmaskedValue = str;\n    this.updateControl();\n    this.alignCursor();\n  }\n\n  /** Typed unmasked value */\n  get typedValue() {\n    return this.masked.typedValue;\n  }\n  set typedValue(val) {\n    if (this.masked.typedValueEquals(val)) return;\n    this.masked.typedValue = val;\n    this.updateControl();\n    this.alignCursor();\n  }\n\n  /** Display value */\n  get displayValue() {\n    return this.masked.displayValue;\n  }\n\n  /** Starts listening to element events */\n  _bindEvents() {\n    this.el.bindEvents({\n      selectionChange: this._saveSelection,\n      input: this._onInput,\n      drop: this._onDrop,\n      click: this._onClick,\n      focus: this._onFocus,\n      commit: this._onChange\n    });\n  }\n\n  /** Stops listening to element events */\n  _unbindEvents() {\n    if (this.el) this.el.unbindEvents();\n  }\n\n  /** Fires custom event */\n  _fireEvent(ev, e) {\n    const listeners = this._listeners[ev];\n    if (!listeners) return;\n    listeners.forEach(l => l(e));\n  }\n\n  /** Current selection start */\n  get selectionStart() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;\n  }\n\n  /** Current cursor position */\n  get cursorPos() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;\n  }\n  set cursorPos(pos) {\n    if (!this.el || !this.el.isActive) return;\n    this.el.select(pos, pos);\n    this._saveSelection();\n  }\n\n  /** Stores current selection */\n  _saveSelection( /* ev */\n  ) {\n    if (this.displayValue !== this.el.value) {\n      console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.'); // eslint-disable-line no-console\n    }\n\n    this._selection = {\n      start: this.selectionStart,\n      end: this.cursorPos\n    };\n  }\n\n  /** Syncronizes model value from view */\n  updateValue() {\n    this.masked.value = this.el.value;\n    this._value = this.masked.value;\n  }\n\n  /** Syncronizes view from model value, fires change events */\n  updateControl() {\n    const newUnmaskedValue = this.masked.unmaskedValue;\n    const newValue = this.masked.value;\n    const newDisplayValue = this.displayValue;\n    const isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue;\n    this._unmaskedValue = newUnmaskedValue;\n    this._value = newValue;\n    if (this.el.value !== newDisplayValue) this.el.value = newDisplayValue;\n    if (isChanged) this._fireChangeEvents();\n  }\n\n  /** Updates options with deep equal check, recreates {@link Masked} model if mask type changes */\n  updateOptions(opts) {\n    const {\n      mask,\n      ...restOpts\n    } = opts;\n    const updateMask = !this.maskEquals(mask);\n    const updateOpts = !objectIncludes(this.masked, restOpts);\n    if (updateMask) this.mask = mask;\n    if (updateOpts) this.masked.updateOptions(restOpts); // TODO\n\n    if (updateMask || updateOpts) this.updateControl();\n  }\n\n  /** Updates cursor */\n  updateCursor(cursorPos) {\n    if (cursorPos == null) return;\n    this.cursorPos = cursorPos;\n\n    // also queue change cursor for mobile browsers\n    this._delayUpdateCursor(cursorPos);\n  }\n\n  /** Delays cursor update to support mobile browsers */\n  _delayUpdateCursor(cursorPos) {\n    this._abortUpdateCursor();\n    this._changingCursorPos = cursorPos;\n    this._cursorChanging = setTimeout(() => {\n      if (!this.el) return; // if was destroyed\n      this.cursorPos = this._changingCursorPos;\n      this._abortUpdateCursor();\n    }, 10);\n  }\n\n  /** Fires custom events */\n  _fireChangeEvents() {\n    this._fireEvent('accept', this._inputEvent);\n    if (this.masked.isComplete) this._fireEvent('complete', this._inputEvent);\n  }\n\n  /** Aborts delayed cursor update */\n  _abortUpdateCursor() {\n    if (this._cursorChanging) {\n      clearTimeout(this._cursorChanging);\n      delete this._cursorChanging;\n    }\n  }\n\n  /** Aligns cursor to nearest available position */\n  alignCursor() {\n    this.cursorPos = this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT));\n  }\n\n  /** Aligns cursor only if selection is empty */\n  alignCursorFriendly() {\n    if (this.selectionStart !== this.cursorPos) return; // skip if range is selected\n    this.alignCursor();\n  }\n\n  /** Adds listener on custom event */\n  on(ev, handler) {\n    if (!this._listeners[ev]) this._listeners[ev] = [];\n    this._listeners[ev].push(handler);\n    return this;\n  }\n\n  /** Removes custom event listener */\n  off(ev, handler) {\n    if (!this._listeners[ev]) return this;\n    if (!handler) {\n      delete this._listeners[ev];\n      return this;\n    }\n    const hIndex = this._listeners[ev].indexOf(handler);\n    if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);\n    return this;\n  }\n\n  /** Handles view input event */\n  _onInput(e) {\n    this._inputEvent = e;\n    this._abortUpdateCursor();\n\n    // fix strange IE behavior\n    if (!this._selection) return this.updateValue();\n    const details = new ActionDetails({\n      // new state\n      value: this.el.value,\n      cursorPos: this.cursorPos,\n      // old state\n      oldValue: this.displayValue,\n      oldSelection: this._selection\n    });\n    const oldRawValue = this.masked.rawInputValue;\n    const offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection, {\n      input: true,\n      raw: true\n    }).offset;\n\n    // force align in remove direction only if no input chars were removed\n    // otherwise we still need to align with NONE (to get out from fixed symbols for instance)\n    const removeDirection = oldRawValue === this.masked.rawInputValue ? details.removeDirection : DIRECTION.NONE;\n    let cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, removeDirection);\n    if (removeDirection !== DIRECTION.NONE) cursorPos = this.masked.nearestInputPos(cursorPos, DIRECTION.NONE);\n    this.updateControl();\n    this.updateCursor(cursorPos);\n    delete this._inputEvent;\n  }\n\n  /** Handles view change event and commits model value */\n  _onChange() {\n    if (this.displayValue !== this.el.value) {\n      this.updateValue();\n    }\n    this.masked.doCommit();\n    this.updateControl();\n    this._saveSelection();\n  }\n\n  /** Handles view drop event, prevents by default */\n  _onDrop(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  /** Restore last selection on focus */\n  _onFocus(ev) {\n    this.alignCursorFriendly();\n  }\n\n  /** Restore last selection on focus */\n  _onClick(ev) {\n    this.alignCursorFriendly();\n  }\n\n  /** Unbind view events and removes element reference */\n  destroy() {\n    this._unbindEvents();\n    this._listeners.length = 0;\n    delete this.el;\n  }\n}\nIMask.InputMask = InputMask;\n\nexport { InputMask as default };\n","import IMask from './holder.js';\n\n/** Provides details of changing model value */\nclass ChangeDetails {\n  /** Inserted symbols */\n\n  /** Can skip chars */\n\n  /** Additional offset if any changes occurred before tail */\n\n  /** Raw inserted is used by dynamic mask */\n\n  static normalize(prep) {\n    return Array.isArray(prep) ? prep : [prep, new ChangeDetails()];\n  }\n  constructor(details) {\n    Object.assign(this, {\n      inserted: '',\n      rawInserted: '',\n      skip: false,\n      tailShift: 0\n    }, details);\n  }\n\n  /** Aggregate changes */\n  aggregate(details) {\n    this.rawInserted += details.rawInserted;\n    this.skip = this.skip || details.skip;\n    this.inserted += details.inserted;\n    this.tailShift += details.tailShift;\n    return this;\n  }\n\n  /** Total offset considering all changes */\n  get offset() {\n    return this.tailShift + this.inserted.length;\n  }\n}\nIMask.ChangeDetails = ChangeDetails;\n\nexport { ChangeDetails as default };\n","/** Provides details of continuous extracted tail */\nclass ContinuousTailDetails {\n  /** Tail value as string */\n\n  /** Tail start position */\n\n  /** Start position */\n\n  constructor(value, from, stop) {\n    if (value === void 0) {\n      value = '';\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.value = value;\n    this.from = from;\n    this.stop = stop;\n  }\n  toString() {\n    return this.value;\n  }\n  extend(tail) {\n    this.value += String(tail);\n  }\n  appendTo(masked) {\n    return masked.append(this.toString(), {\n      tail: true\n    }).aggregate(masked._appendPlaceholder());\n  }\n  get state() {\n    return {\n      value: this.value,\n      from: this.from,\n      stop: this.stop\n    };\n  }\n  set state(state) {\n    Object.assign(this, state);\n  }\n  unshift(beforePos) {\n    if (!this.value.length || beforePos != null && this.from >= beforePos) return '';\n    const shiftChar = this.value[0];\n    this.value = this.value.slice(1);\n    return shiftChar;\n  }\n  shift() {\n    if (!this.value.length) return '';\n    const shiftChar = this.value[this.value.length - 1];\n    this.value = this.value.slice(0, -1);\n    return shiftChar;\n  }\n}\n\nexport { ContinuousTailDetails as default };\n","import ChangeDetails from '../core/change-details.js';\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\nimport { isString, DIRECTION, forceDirection } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n/** Append flags */\n\n/** Extract flags */\n\n// see https://github.com/microsoft/TypeScript/issues/6223\n\n/** Provides common masking stuff */\nclass Masked {\n  /** */\n\n  /** */\n\n  /** Transforms value before mask processing */\n\n  /** Transforms each char before mask processing */\n\n  /** Validates if value is acceptable */\n\n  /** Does additional processing at the end of editing */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    this._value = '';\n    this._update({\n      ...Masked.DEFAULTS,\n      ...opts\n    });\n    this._initialized = true;\n  }\n\n  /** Sets and applies new options */\n  updateOptions(opts) {\n    if (!Object.keys(opts).length) return;\n    this.withValueRefresh(this._update.bind(this, opts));\n  }\n\n  /** Sets new options */\n  _update(opts) {\n    Object.assign(this, opts);\n  }\n\n  /** Mask state */\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n  }\n\n  /** Resets value */\n  reset() {\n    this._value = '';\n  }\n  get value() {\n    return this._value;\n  }\n  set value(value) {\n    this.resolve(value, {\n      input: true\n    });\n  }\n\n  /** Resolve new value */\n  resolve(value, flags) {\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    this.reset();\n    this.append(value, flags, '');\n    this.doCommit();\n  }\n  get unmaskedValue() {\n    return this.value;\n  }\n  set unmaskedValue(value) {\n    this.resolve(value, {});\n  }\n  get typedValue() {\n    return this.parse ? this.parse(this.value, this) : this.unmaskedValue;\n  }\n  set typedValue(value) {\n    if (this.format) {\n      this.value = this.format(value, this);\n    } else {\n      this.unmaskedValue = String(value);\n    }\n  }\n\n  /** Value that includes raw user input */\n  get rawInputValue() {\n    return this.extractInput(0, this.displayValue.length, {\n      raw: true\n    });\n  }\n  set rawInputValue(value) {\n    this.resolve(value, {\n      raw: true\n    });\n  }\n  get displayValue() {\n    return this.value;\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return this.isComplete;\n  }\n\n  /** Finds nearest input position in direction */\n  nearestInputPos(cursorPos, direction) {\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return Math.min(this.displayValue.length, toPos - fromPos);\n  }\n\n  /** Extracts value in range considering flags */\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return this.displayValue.slice(fromPos, toPos);\n  }\n\n  /** Extracts tail in range */\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\n  }\n\n  /** Appends tail */\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n\n  /** Appends char */\n  _appendCharRaw(ch, flags) {\n    if (!ch) return new ChangeDetails();\n    this._value += ch;\n    return new ChangeDetails({\n      inserted: ch,\n      rawInserted: ch\n    });\n  }\n\n  /** Appends char */\n  _appendChar(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const consistentState = this.state;\n    let details;\n    [ch, details] = this.doPrepareChar(ch, flags);\n    details = details.aggregate(this._appendCharRaw(ch, flags));\n    if (details.inserted) {\n      let consistentTail;\n      let appended = this.doValidate(flags) !== false;\n      if (appended && checkTail != null) {\n        // validation ok, check tail\n        const beforeTailState = this.state;\n        if (this.overwrite === true) {\n          consistentTail = checkTail.state;\n          checkTail.unshift(this.displayValue.length - details.tailShift);\n        }\n        let tailDetails = this.appendTail(checkTail);\n        appended = tailDetails.rawInserted === checkTail.toString();\n\n        // not ok, try shift\n        if (!(appended && tailDetails.inserted) && this.overwrite === 'shift') {\n          this.state = beforeTailState;\n          consistentTail = checkTail.state;\n          checkTail.shift();\n          tailDetails = this.appendTail(checkTail);\n          appended = tailDetails.rawInserted === checkTail.toString();\n        }\n\n        // if ok, rollback state after tail\n        if (appended && tailDetails.inserted) this.state = beforeTailState;\n      }\n\n      // revert all if something went wrong\n      if (!appended) {\n        details = new ChangeDetails();\n        this.state = consistentState;\n        if (checkTail && consistentTail) checkTail.state = consistentTail;\n      }\n    }\n    return details;\n  }\n\n  /** Appends optional placeholder at the end */\n  _appendPlaceholder() {\n    return new ChangeDetails();\n  }\n\n  /** Appends optional eager placeholder at the end */\n  _appendEager() {\n    return new ChangeDetails();\n  }\n\n  /** Appends symbols considering flags */\n  append(str, flags, tail) {\n    if (!isString(str)) throw new Error('value should be string');\n    const checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\n    if (flags != null && flags.tail) flags._beforeTailState = this.state;\n    let details;\n    [str, details] = this.doPrepare(str, flags);\n    for (let ci = 0; ci < str.length; ++ci) {\n      const d = this._appendChar(str[ci], flags, checkTail);\n      if (!d.rawInserted && !this.doSkipInvalid(str[ci], flags, checkTail)) break;\n      details.aggregate(d);\n    }\n    if ((this.eager === true || this.eager === 'append') && flags != null && flags.input && str) {\n      details.aggregate(this._appendEager());\n    }\n\n    // append tail but aggregate only tailShift\n    if (checkTail != null) {\n      details.tailShift += this.appendTail(checkTail).tailShift;\n      // TODO it's a good idea to clear state after appending ends\n      // but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)\n      // this._resetBeforeTailState();\n    }\n\n    return details;\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    this._value = this.displayValue.slice(0, fromPos) + this.displayValue.slice(toPos);\n    return new ChangeDetails();\n  }\n\n  /** Calls function and reapplies current value */\n  withValueRefresh(fn) {\n    if (this._refreshing || !this._initialized) return fn();\n    this._refreshing = true;\n    const rawInput = this.rawInputValue;\n    const value = this.value;\n    const ret = fn();\n    this.rawInputValue = rawInput;\n    // append lost trailing chars at the end\n    if (this.value && this.value !== value && value.indexOf(this.value) === 0) {\n      this.append(value.slice(this.displayValue.length), {}, '');\n    }\n    delete this._refreshing;\n    return ret;\n  }\n  runIsolated(fn) {\n    if (this._isolated || !this._initialized) return fn(this);\n    this._isolated = true;\n    const state = this.state;\n    const ret = fn(this);\n    this.state = state;\n    delete this._isolated;\n    return ret;\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    return Boolean(this.skipInvalid);\n  }\n\n  /** Prepares string before mask processing */\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepare ? this.prepare(str, this, flags) : str);\n  }\n\n  /** Prepares each char before mask processing */\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepareChar ? this.prepareChar(str, this, flags) : str);\n  }\n\n  /** Validates if value is acceptable */\n  doValidate(flags) {\n    return (!this.validate || this.validate(this.value, this, flags)) && (!this.parent || this.parent.doValidate(flags));\n  }\n\n  /** Does additional processing at the end of editing */\n  doCommit() {\n    if (this.commit) this.commit(this.value, this);\n  }\n  splice(start, deleteCount, inserted, removeDirection, flags) {\n    if (removeDirection === void 0) {\n      removeDirection = DIRECTION.NONE;\n    }\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    const tailPos = start + deleteCount;\n    const tail = this.extractTail(tailPos);\n    const eagerRemove = this.eager === true || this.eager === 'remove';\n    let oldRawValue;\n    if (eagerRemove) {\n      removeDirection = forceDirection(removeDirection);\n      oldRawValue = this.extractInput(0, tailPos, {\n        raw: true\n      });\n    }\n    let startChangePos = start;\n    const details = new ChangeDetails();\n\n    // if it is just deletion without insertion\n    if (removeDirection !== DIRECTION.NONE) {\n      startChangePos = this.nearestInputPos(start, deleteCount > 1 && start !== 0 && !eagerRemove ? DIRECTION.NONE : removeDirection);\n\n      // adjust tailShift if start was aligned\n      details.tailShift = startChangePos - start;\n    }\n    details.aggregate(this.remove(startChangePos));\n    if (eagerRemove && removeDirection !== DIRECTION.NONE && oldRawValue === this.rawInputValue) {\n      if (removeDirection === DIRECTION.FORCE_LEFT) {\n        let valLength;\n        while (oldRawValue === this.rawInputValue && (valLength = this.displayValue.length)) {\n          details.aggregate(new ChangeDetails({\n            tailShift: -1\n          })).aggregate(this.remove(valLength - 1));\n        }\n      } else if (removeDirection === DIRECTION.FORCE_RIGHT) {\n        tail.unshift();\n      }\n    }\n    return details.aggregate(this.append(inserted, flags, tail));\n  }\n  maskEquals(mask) {\n    return this.mask === mask;\n  }\n  typedValueEquals(value) {\n    const tval = this.typedValue;\n    return value === tval || Masked.EMPTY_VALUES.includes(value) && Masked.EMPTY_VALUES.includes(tval) || (this.format ? this.format(value, this) === this.format(this.typedValue, this) : false);\n  }\n}\nMasked.DEFAULTS = {\n  skipInvalid: true\n};\nMasked.EMPTY_VALUES = [undefined, null, ''];\nIMask.Masked = Masked;\n\nexport { Masked as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport IMask from '../../core/holder.js';\n\nclass ChunksTailDetails {\n  /** */\n\n  constructor(chunks, from) {\n    if (chunks === void 0) {\n      chunks = [];\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.chunks = chunks;\n    this.from = from;\n  }\n  toString() {\n    return this.chunks.map(String).join('');\n  }\n  extend(tailChunk) {\n    if (!String(tailChunk)) return;\n    tailChunk = isString(tailChunk) ? new ContinuousTailDetails(String(tailChunk)) : tailChunk;\n    const lastChunk = this.chunks[this.chunks.length - 1];\n    const extendLast = lastChunk && (\n    // if stops are same or tail has no stop\n    lastChunk.stop === tailChunk.stop || tailChunk.stop == null) &&\n    // if tail chunk goes just after last chunk\n    tailChunk.from === lastChunk.from + lastChunk.toString().length;\n    if (tailChunk instanceof ContinuousTailDetails) {\n      // check the ability to extend previous chunk\n      if (extendLast) {\n        // extend previous chunk\n        lastChunk.extend(tailChunk.toString());\n      } else {\n        // append new chunk\n        this.chunks.push(tailChunk);\n      }\n    } else if (tailChunk instanceof ChunksTailDetails) {\n      if (tailChunk.stop == null) {\n        // unwrap floating chunks to parent, keeping `from` pos\n        let firstTailChunk;\n        while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\n          firstTailChunk = tailChunk.chunks.shift(); // not possible to be `undefined` because length was checked above\n          firstTailChunk.from += tailChunk.from;\n          this.extend(firstTailChunk);\n        }\n      }\n\n      // if tail chunk still has value\n      if (tailChunk.toString()) {\n        // if chunks contains stops, then popup stop to container\n        tailChunk.stop = tailChunk.blockIndex;\n        this.chunks.push(tailChunk);\n      }\n    }\n  }\n  appendTo(masked) {\n    if (!(masked instanceof IMask.MaskedPattern)) {\n      const tail = new ContinuousTailDetails(this.toString());\n      return tail.appendTo(masked);\n    }\n    const details = new ChangeDetails();\n    for (let ci = 0; ci < this.chunks.length && !details.skip; ++ci) {\n      const chunk = this.chunks[ci];\n      const lastBlockIter = masked._mapPosToBlock(masked.displayValue.length);\n      const stop = chunk.stop;\n      let chunkBlock;\n      if (stop != null && (\n      // if block not found or stop is behind lastBlock\n      !lastBlockIter || lastBlockIter.index <= stop)) {\n        if (chunk instanceof ChunksTailDetails ||\n        // for continuous block also check if stop is exist\n        masked._stops.indexOf(stop) >= 0) {\n          const phDetails = masked._appendPlaceholder(stop);\n          details.aggregate(phDetails);\n        }\n        chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\n      }\n      if (chunkBlock) {\n        const tailDetails = chunkBlock.appendTail(chunk);\n        tailDetails.skip = false; // always ignore skip, it will be set on last\n        details.aggregate(tailDetails);\n        masked._value += tailDetails.inserted;\n\n        // get not inserted chars\n        const remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\n        if (remainChars) details.aggregate(masked.append(remainChars, {\n          tail: true\n        }));\n      } else {\n        details.aggregate(masked.append(chunk.toString(), {\n          tail: true\n        }));\n      }\n    }\n    return details;\n  }\n  get state() {\n    return {\n      chunks: this.chunks.map(c => c.state),\n      from: this.from,\n      stop: this.stop,\n      blockIndex: this.blockIndex\n    };\n  }\n  set state(state) {\n    const {\n      chunks,\n      ...props\n    } = state;\n    Object.assign(this, props);\n    this.chunks = chunks.map(cstate => {\n      const chunk = \"chunks\" in cstate ? new ChunksTailDetails() : new ContinuousTailDetails();\n      chunk.state = cstate;\n      return chunk;\n    });\n  }\n  unshift(beforePos) {\n    if (!this.chunks.length || beforePos != null && this.from >= beforePos) return '';\n    const chunkShiftPos = beforePos != null ? beforePos - this.from : beforePos;\n    let ci = 0;\n    while (ci < this.chunks.length) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.unshift(chunkShiftPos);\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        ++ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n  shift() {\n    if (!this.chunks.length) return '';\n    let ci = this.chunks.length - 1;\n    while (0 <= ci) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.shift();\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        --ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n}\n\nexport { ChunksTailDetails as default };\n","import { DIRECTION } from '../../core/utils.js';\n\nclass PatternCursor {\n  constructor(masked, pos) {\n    this.masked = masked;\n    this._log = [];\n    const {\n      offset,\n      index\n    } = masked._mapPosToBlock(pos) || (pos < 0 ?\n    // first\n    {\n      index: 0,\n      offset: 0\n    } :\n    // last\n    {\n      index: this.masked._blocks.length,\n      offset: 0\n    });\n    this.offset = offset;\n    this.index = index;\n    this.ok = false;\n  }\n  get block() {\n    return this.masked._blocks[this.index];\n  }\n  get pos() {\n    return this.masked._blockStartPos(this.index) + this.offset;\n  }\n  get state() {\n    return {\n      index: this.index,\n      offset: this.offset,\n      ok: this.ok\n    };\n  }\n  set state(s) {\n    Object.assign(this, s);\n  }\n  pushState() {\n    this._log.push(this.state);\n  }\n  popState() {\n    const s = this._log.pop();\n    if (s) this.state = s;\n    return s;\n  }\n  bindBlock() {\n    if (this.block) return;\n    if (this.index < 0) {\n      this.index = 0;\n      this.offset = 0;\n    }\n    if (this.index >= this.masked._blocks.length) {\n      this.index = this.masked._blocks.length - 1;\n      this.offset = this.block.displayValue.length; // TODO this is stupid type error, `block` depends on index that was changed above\n    }\n  }\n\n  _pushLeft(fn) {\n    this.pushState();\n    for (this.bindBlock(); 0 <= this.index; --this.index, this.offset = ((_this$block = this.block) == null ? void 0 : _this$block.displayValue.length) || 0) {\n      var _this$block;\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  _pushRight(fn) {\n    this.pushState();\n    for (this.bindBlock(); this.index < this.masked._blocks.length; ++this.index, this.offset = 0) {\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  pushLeftBeforeFilled() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_LEFT);\n      if (this.offset !== 0) return true;\n    });\n  }\n  pushLeftBeforeInput() {\n    // cases:\n    // filled input: 00|\n    // optional empty input: 00[]|\n    // nested block: XX<[]>|\n    return this._pushLeft(() => {\n      if (this.block.isFixed) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushLeftBeforeRequired() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushRightBeforeFilled() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_RIGHT);\n      if (this.offset !== this.block.value.length) return true;\n    });\n  }\n  pushRightBeforeInput() {\n    return this._pushRight(() => {\n      if (this.block.isFixed) return;\n\n      // const o = this.offset;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      // HACK cases like (STILL DOES NOT WORK FOR NESTED)\n      // aa|X\n      // aa<X|[]>X_    - this will not work\n      // if (o && o === this.offset && this.block instanceof PatternInputDefinition) continue;\n      return true;\n    });\n  }\n  pushRightBeforeRequired() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n\n      // TODO check |[*]XX_\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      return true;\n    });\n  }\n}\n\nexport { PatternCursor as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION, isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport '../../core/holder.js';\n\nclass PatternFixedDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n    this._value = '';\n    this.isFixed = true;\n  }\n  get value() {\n    return this._value;\n  }\n  get unmaskedValue() {\n    return this.isUnmasking ? this.value : '';\n  }\n  get rawInputValue() {\n    return this._isRawInput ? this.value : '';\n  }\n  get displayValue() {\n    return this.value;\n  }\n  reset() {\n    this._isRawInput = false;\n    this._value = '';\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\n    if (!this._value) this._isRawInput = false;\n    return new ChangeDetails();\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this._value.length;\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return minPos;\n      case DIRECTION.NONE:\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n      default:\n        return maxPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    return this._isRawInput ? toPos - fromPos : 0;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return Boolean(this._value);\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = new ChangeDetails();\n    if (this.isFilled) return details;\n    const appendEager = this.eager === true || this.eager === 'append';\n    const appended = this.char === ch;\n    const isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && (!flags.raw || !appendEager) && !flags.tail;\n    if (isResolved) details.rawInserted = this.char;\n    this._value = details.inserted = this.char;\n    this._isRawInput = isResolved && (flags.raw || flags.input);\n    return details;\n  }\n  _appendEager() {\n    return this._appendChar(this.char, {\n      tail: true\n    });\n  }\n  _appendPlaceholder() {\n    const details = new ChangeDetails();\n    if (this.isFilled) return details;\n    this._value = details.inserted = this.char;\n    return details;\n  }\n  extractTail() {\n    return new ContinuousTailDetails('');\n  }\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n  append(str, flags, tail) {\n    const details = this._appendChar(str[0], flags);\n    if (tail != null) {\n      details.tailShift += this.appendTail(tail).tailShift;\n    }\n    return details;\n  }\n  doCommit() {}\n  get state() {\n    return {\n      _value: this._value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n    this._isRawInput = Boolean(state._rawInputValue);\n  }\n}\n\nexport { PatternFixedDefinition as default };\n","import createMask from '../factory.js';\nimport ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION } from '../../core/utils.js';\nimport '../../core/holder.js';\n\nclass PatternInputDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    const {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager,\n      ...maskOpts\n    } = opts;\n    this.masked = createMask(maskOpts);\n    Object.assign(this, {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager\n    });\n  }\n  reset() {\n    this.isFilled = false;\n    this.masked.reset();\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    if (fromPos === 0 && toPos >= 1) {\n      this.isFilled = false;\n      return this.masked.remove(fromPos, toPos);\n    }\n    return new ChangeDetails();\n  }\n  get value() {\n    return this.masked.value || (this.isFilled && !this.isOptional ? this.placeholderChar : '');\n  }\n  get unmaskedValue() {\n    return this.masked.unmaskedValue;\n  }\n  get rawInputValue() {\n    return this.masked.rawInputValue;\n  }\n  get displayValue() {\n    return this.masked.value && this.displayChar || this.value;\n  }\n  get isComplete() {\n    return Boolean(this.masked.value) || this.isOptional;\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (this.isFilled) return new ChangeDetails();\n    const state = this.masked.state;\n    // simulate input\n    const details = this.masked._appendChar(ch, this.currentMaskFlags(flags));\n    if (details.inserted && this.doValidate(flags) === false) {\n      details.inserted = details.rawInserted = '';\n      this.masked.state = state;\n    }\n    if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\n      details.inserted = this.placeholderChar;\n    }\n    details.skip = !details.inserted && !this.isOptional;\n    this.isFilled = Boolean(details.inserted);\n    return details;\n  }\n  append(str, flags, tail) {\n    // TODO probably should be done via _appendChar\n    return this.masked.append(str, this.currentMaskFlags(flags), tail);\n  }\n  _appendPlaceholder() {\n    const details = new ChangeDetails();\n    if (this.isFilled || this.isOptional) return details;\n    this.isFilled = true;\n    details.inserted = this.placeholderChar;\n    return details;\n  }\n  _appendEager() {\n    return new ChangeDetails();\n  }\n  extractTail(fromPos, toPos) {\n    return this.masked.extractTail(fromPos, toPos);\n  }\n  appendTail(tail) {\n    return this.masked.appendTail(tail);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.masked.extractInput(fromPos, toPos, flags);\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this.value.length;\n    const boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return this.isComplete ? boundPos : minPos;\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        return this.isComplete ? boundPos : maxPos;\n      case DIRECTION.NONE:\n      default:\n        return boundPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.value.slice(fromPos, toPos).length;\n  }\n  doValidate(flags) {\n    return this.masked.doValidate(this.currentMaskFlags(flags)) && (!this.parent || this.parent.doValidate(this.currentMaskFlags(flags)));\n  }\n  doCommit() {\n    this.masked.doCommit();\n  }\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue,\n      masked: this.masked.state,\n      isFilled: this.isFilled\n    };\n  }\n  set state(state) {\n    this.masked.state = state.masked;\n    this.isFilled = state.isFilled;\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta;\n    return {\n      ...flags,\n      _beforeTailState: (flags == null || (_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.masked) || (flags == null ? void 0 : flags._beforeTailState)\n    };\n  }\n}\nPatternInputDefinition.DEFAULT_DEFINITIONS = {\n  '0': /\\d/,\n  'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\n  // http://stackoverflow.com/a/22075070\n  '*': /./\n};\n\nexport { PatternInputDefinition as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by RegExp */\nclass MaskedRegExp extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const mask = opts.mask;\n    if (mask) opts.validate = value => value.search(mask) >= 0;\n    super._update(opts);\n  }\n}\nIMask.MaskedRegExp = MaskedRegExp;\n\nexport { MaskedRegExp as default };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport { DIRECTION } from '../core/utils.js';\nimport Masked from './base.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport ChunksTailDetails from './pattern/chunk-tail-details.js';\nimport PatternCursor from './pattern/cursor.js';\nimport PatternFixedDefinition from './pattern/fixed-definition.js';\nimport PatternInputDefinition from './pattern/input-definition.js';\nimport './regexp.js';\nimport '../core/continuous-tail-details.js';\n\n/** Pattern mask */\nclass MaskedPattern extends Masked {\n  /** */\n\n  /** */\n\n  /** Single char for empty input */\n\n  /** Single char for filled input */\n\n  /** Show placeholder only when needed */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    super({\n      ...MaskedPattern.DEFAULTS,\n      ...opts,\n      definitions: Object.assign({}, PatternInputDefinition.DEFAULT_DEFINITIONS, opts == null ? void 0 : opts.definitions)\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    opts.definitions = Object.assign({}, this.definitions, opts.definitions);\n    super._update(opts);\n    this._rebuildMask();\n  }\n  _rebuildMask() {\n    const defs = this.definitions;\n    this._blocks = [];\n    this.exposeBlock = undefined;\n    this._stops = [];\n    this._maskedBlocks = {};\n    const pattern = this.mask;\n    if (!pattern || !defs) return;\n    let unmaskingBlock = false;\n    let optionalBlock = false;\n    for (let i = 0; i < pattern.length; ++i) {\n      if (this.blocks) {\n        const p = pattern.slice(i);\n        const bNames = Object.keys(this.blocks).filter(bName => p.indexOf(bName) === 0);\n        // order by key length\n        bNames.sort((a, b) => b.length - a.length);\n        // use block name with max length\n        const bName = bNames[0];\n        if (bName) {\n          const {\n            expose,\n            ...blockOpts\n          } = normalizeOpts(this.blocks[bName]);\n          const maskedBlock = createMask({\n            lazy: this.lazy,\n            eager: this.eager,\n            placeholderChar: this.placeholderChar,\n            displayChar: this.displayChar,\n            overwrite: this.overwrite,\n            ...blockOpts,\n            parent: this\n          });\n          if (maskedBlock) {\n            this._blocks.push(maskedBlock);\n            if (expose) this.exposeBlock = maskedBlock;\n\n            // store block index\n            if (!this._maskedBlocks[bName]) this._maskedBlocks[bName] = [];\n            this._maskedBlocks[bName].push(this._blocks.length - 1);\n          }\n          i += bName.length - 1;\n          continue;\n        }\n      }\n      let char = pattern[i];\n      let isInput = (char in defs);\n      if (char === MaskedPattern.STOP_CHAR) {\n        this._stops.push(this._blocks.length);\n        continue;\n      }\n      if (char === '{' || char === '}') {\n        unmaskingBlock = !unmaskingBlock;\n        continue;\n      }\n      if (char === '[' || char === ']') {\n        optionalBlock = !optionalBlock;\n        continue;\n      }\n      if (char === MaskedPattern.ESCAPE_CHAR) {\n        ++i;\n        char = pattern[i];\n        if (!char) break;\n        isInput = false;\n      }\n      const def = isInput ? new PatternInputDefinition({\n        isOptional: optionalBlock,\n        lazy: this.lazy,\n        eager: this.eager,\n        placeholderChar: this.placeholderChar,\n        displayChar: this.displayChar,\n        ...normalizeOpts(defs[char]),\n        parent: this\n      }) : new PatternFixedDefinition({\n        char,\n        eager: this.eager,\n        isUnmasking: unmaskingBlock\n      });\n      this._blocks.push(def);\n    }\n  }\n  get state() {\n    return {\n      ...super.state,\n      _blocks: this._blocks.map(b => b.state)\n    };\n  }\n  set state(state) {\n    const {\n      _blocks,\n      ...maskedState\n    } = state;\n    this._blocks.forEach((b, bi) => b.state = _blocks[bi]);\n    super.state = maskedState;\n  }\n  reset() {\n    super.reset();\n    this._blocks.forEach(b => b.reset());\n  }\n  get isComplete() {\n    return this.exposeBlock ? this.exposeBlock.isComplete : this._blocks.every(b => b.isComplete);\n  }\n  get isFilled() {\n    return this._blocks.every(b => b.isFilled);\n  }\n  get isFixed() {\n    return this._blocks.every(b => b.isFixed);\n  }\n  get isOptional() {\n    return this._blocks.every(b => b.isOptional);\n  }\n  doCommit() {\n    this._blocks.forEach(b => b.doCommit());\n    super.doCommit();\n  }\n  get unmaskedValue() {\n    return this.exposeBlock ? this.exposeBlock.unmaskedValue : this._blocks.reduce((str, b) => str += b.unmaskedValue, '');\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.unmaskedValue = unmaskedValue;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get value() {\n    return this.exposeBlock ? this.exposeBlock.value :\n    // TODO return _value when not in change?\n    this._blocks.reduce((str, b) => str += b.value, '');\n  }\n  set value(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.value = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.value = value;\n  }\n  get typedValue() {\n    return this.exposeBlock ? this.exposeBlock.typedValue : super.typedValue;\n  }\n  set typedValue(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.typedValue = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.typedValue = value;\n  }\n  get displayValue() {\n    return this._blocks.reduce((str, b) => str += b.displayValue, '');\n  }\n  appendTail(tail) {\n    return super.appendTail(tail).aggregate(this._appendPlaceholder());\n  }\n  _appendEager() {\n    var _this$_mapPosToBlock;\n    const details = new ChangeDetails();\n    let startBlockIndex = (_this$_mapPosToBlock = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : _this$_mapPosToBlock.index;\n    if (startBlockIndex == null) return details;\n\n    // TODO test if it works for nested pattern masks\n    if (this._blocks[startBlockIndex].isFilled) ++startBlockIndex;\n    for (let bi = startBlockIndex; bi < this._blocks.length; ++bi) {\n      const d = this._blocks[bi]._appendEager();\n      if (!d.inserted) break;\n      details.aggregate(d);\n    }\n    return details;\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const blockIter = this._mapPosToBlock(this.displayValue.length);\n    const details = new ChangeDetails();\n    if (!blockIter) return details;\n    for (let bi = blockIter.index;; ++bi) {\n      var _flags$_beforeTailSta;\n      const block = this._blocks[bi];\n      if (!block) break;\n      const blockDetails = block._appendChar(ch, {\n        ...flags,\n        _beforeTailState: (_flags$_beforeTailSta = flags._beforeTailState) == null || (_flags$_beforeTailSta = _flags$_beforeTailSta._blocks) == null ? void 0 : _flags$_beforeTailSta[bi]\n      });\n      const skip = blockDetails.skip;\n      details.aggregate(blockDetails);\n      if (skip || blockDetails.rawInserted) break; // go next char\n    }\n\n    return details;\n  }\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const chunkTail = new ChunksTailDetails();\n    if (fromPos === toPos) return chunkTail;\n    this._forEachBlocksInRange(fromPos, toPos, (b, bi, bFromPos, bToPos) => {\n      const blockChunk = b.extractTail(bFromPos, bToPos);\n      blockChunk.stop = this._findStopBefore(bi);\n      blockChunk.from = this._blockStartPos(bi);\n      if (blockChunk instanceof ChunksTailDetails) blockChunk.blockIndex = bi;\n      chunkTail.extend(blockChunk);\n    });\n    return chunkTail;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (fromPos === toPos) return '';\n    let input = '';\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, fromPos, toPos) => {\n      input += b.extractInput(fromPos, toPos, flags);\n    });\n    return input;\n  }\n  _findStopBefore(blockIndex) {\n    let stopBefore;\n    for (let si = 0; si < this._stops.length; ++si) {\n      const stop = this._stops[si];\n      if (stop <= blockIndex) stopBefore = stop;else break;\n    }\n    return stopBefore;\n  }\n\n  /** Appends placeholder depending on laziness */\n  _appendPlaceholder(toBlockIndex) {\n    const details = new ChangeDetails();\n    if (this.lazy && toBlockIndex == null) return details;\n    const startBlockIter = this._mapPosToBlock(this.displayValue.length);\n    if (!startBlockIter) return details;\n    const startBlockIndex = startBlockIter.index;\n    const endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\n    this._blocks.slice(startBlockIndex, endBlockIndex).forEach(b => {\n      if (!b.lazy || toBlockIndex != null) {\n        var _blocks2;\n        const bDetails = b._appendPlaceholder((_blocks2 = b._blocks) == null ? void 0 : _blocks2.length);\n        this._value += bDetails.inserted;\n        details.aggregate(bDetails);\n      }\n    });\n    return details;\n  }\n\n  /** Finds block in pos */\n  _mapPosToBlock(pos) {\n    let accVal = '';\n    for (let bi = 0; bi < this._blocks.length; ++bi) {\n      const block = this._blocks[bi];\n      const blockStartPos = accVal.length;\n      accVal += block.displayValue;\n      if (pos <= accVal.length) {\n        return {\n          index: bi,\n          offset: pos - blockStartPos\n        };\n      }\n    }\n  }\n  _blockStartPos(blockIndex) {\n    return this._blocks.slice(0, blockIndex).reduce((pos, b) => pos += b.displayValue.length, 0);\n  }\n  _forEachBlocksInRange(fromPos, toPos, fn) {\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const fromBlockIter = this._mapPosToBlock(fromPos);\n    if (fromBlockIter) {\n      const toBlockIter = this._mapPosToBlock(toPos);\n      // process first block\n      const isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\n      const fromBlockStartPos = fromBlockIter.offset;\n      const fromBlockEndPos = toBlockIter && isSameBlock ? toBlockIter.offset : this._blocks[fromBlockIter.index].displayValue.length;\n      fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\n      if (toBlockIter && !isSameBlock) {\n        // process intermediate blocks\n        for (let bi = fromBlockIter.index + 1; bi < toBlockIter.index; ++bi) {\n          fn(this._blocks[bi], bi, 0, this._blocks[bi].displayValue.length);\n        }\n\n        // process last block\n        fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\n      }\n    }\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const removeDetails = super.remove(fromPos, toPos);\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      removeDetails.aggregate(b.remove(bFromPos, bToPos));\n    });\n    return removeDetails;\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    if (!this._blocks.length) return 0;\n    const cursor = new PatternCursor(this, cursorPos);\n    if (direction === DIRECTION.NONE) {\n      // -------------------------------------------------\n      // NONE should only go out from fixed to the right!\n      // -------------------------------------------------\n      if (cursor.pushRightBeforeInput()) return cursor.pos;\n      cursor.popState();\n      if (cursor.pushLeftBeforeInput()) return cursor.pos;\n      return this.displayValue.length;\n    }\n\n    // FORCE is only about a|* otherwise is 0\n    if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\n      // try to break fast when *|a\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeFilled();\n        if (cursor.ok && cursor.pos === cursorPos) return cursorPos;\n        cursor.popState();\n      }\n\n      // forward flow\n      cursor.pushLeftBeforeInput();\n      cursor.pushLeftBeforeRequired();\n      cursor.pushLeftBeforeFilled();\n\n      // backward flow\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeInput();\n        cursor.pushRightBeforeRequired();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n      }\n      if (cursor.ok) return cursor.pos;\n      if (direction === DIRECTION.FORCE_LEFT) return 0;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return 0;\n    }\n    if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\n      // forward flow\n      cursor.pushRightBeforeInput();\n      cursor.pushRightBeforeRequired();\n      if (cursor.pushRightBeforeFilled()) return cursor.pos;\n      if (direction === DIRECTION.FORCE_RIGHT) return this.displayValue.length;\n\n      // backward flow\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return this.nearestInputPos(cursorPos, DIRECTION.LEFT);\n    }\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    let total = 0;\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      total += b.totalInputPositions(bFromPos, bToPos);\n    });\n    return total;\n  }\n\n  /** Get block by name */\n  maskedBlock(name) {\n    return this.maskedBlocks(name)[0];\n  }\n\n  /** Get all blocks by name */\n  maskedBlocks(name) {\n    const indices = this._maskedBlocks[name];\n    if (!indices) return [];\n    return indices.map(gi => this._blocks[gi]);\n  }\n}\nMaskedPattern.DEFAULTS = {\n  lazy: true,\n  placeholderChar: '_'\n};\nMaskedPattern.STOP_CHAR = '`';\nMaskedPattern.ESCAPE_CHAR = '\\\\';\nMaskedPattern.InputDefinition = PatternInputDefinition;\nMaskedPattern.FixedDefinition = PatternFixedDefinition;\nIMask.MaskedPattern = MaskedPattern;\n\nexport { MaskedPattern as default };\n","import IMask from '../core/holder.js';\nimport MaskedPattern from './pattern.js';\nimport '../core/change-details.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which accepts ranges */\nclass MaskedRange extends MaskedPattern {\n  /**\n    Optionally sets max length of pattern.\n    Used when pattern length is longer then `to` param length. Pads zeros at start in this case.\n  */\n\n  /** Min bound */\n\n  /** Max bound */\n\n  /** */\n\n  get _matchFrom() {\n    return this.maxLength - String(this.from).length;\n  }\n  constructor(opts) {\n    super(opts); // mask will be created in _update\n  }\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      to = this.to || 0,\n      from = this.from || 0,\n      maxLength = this.maxLength || 0,\n      autofix = this.autofix,\n      ...patternOpts\n    } = opts;\n    this.to = to;\n    this.from = from;\n    this.maxLength = Math.max(String(to).length, maxLength);\n    this.autofix = autofix;\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    let sameCharsCount = 0;\n    while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) ++sameCharsCount;\n    patternOpts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(this.maxLength - sameCharsCount);\n    super._update(patternOpts);\n  }\n  get isComplete() {\n    return super.isComplete && Boolean(this.value);\n  }\n  boundaries(str) {\n    let minstr = '';\n    let maxstr = '';\n    const [, placeholder, num] = str.match(/^(\\D*)(\\d*)(\\D*)/) || [];\n    if (num) {\n      minstr = '0'.repeat(placeholder.length) + num;\n      maxstr = '9'.repeat(placeholder.length) + num;\n    }\n    minstr = minstr.padEnd(this.maxLength, '0');\n    maxstr = maxstr.padEnd(this.maxLength, '9');\n    return [minstr, maxstr];\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let details;\n    [ch, details] = super.doPrepareChar(ch.replace(/\\D/g, ''), flags);\n    if (!this.autofix || !ch) return [ch, details];\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    const nextVal = this.value + ch;\n    if (nextVal.length > this.maxLength) return ['', details];\n    const [minstr, maxstr] = this.boundaries(nextVal);\n    if (Number(maxstr) < this.from) return [fromStr[nextVal.length - 1], details];\n    if (Number(minstr) > this.to) {\n      if (this.autofix === 'pad' && nextVal.length < this.maxLength) {\n        return ['', details.aggregate(this.append(fromStr[nextVal.length - 1] + ch, flags))];\n      }\n      return [toStr[nextVal.length - 1], details];\n    }\n    return [ch, details];\n  }\n  doValidate(flags) {\n    const str = this.value;\n    const firstNonZero = str.search(/[^0]/);\n    if (firstNonZero === -1 && str.length <= this._matchFrom) return true;\n    const [minstr, maxstr] = this.boundaries(str);\n    return this.from <= Number(maxstr) && Number(minstr) <= this.to && super.doValidate(flags);\n  }\n}\nIMask.MaskedRange = MaskedRange;\n\nexport { MaskedRange as default };\n","import MaskedPattern from './pattern.js';\nimport MaskedRange from './range.js';\nimport IMask from '../core/holder.js';\nimport { isString } from '../core/utils.js';\nimport '../core/change-details.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Date mask */\nclass MaskedDate extends MaskedPattern {\n  /** Pattern mask for date according to {@link MaskedDate#format} */\n\n  /** Start date */\n\n  /** End date */\n\n  /** */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    const {\n      mask,\n      pattern,\n      ...patternOpts\n    } = {\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    };\n    super({\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      mask,\n      pattern,\n      blocks,\n      ...patternOpts\n    } = {\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    };\n    const patternBlocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS());\n    // adjust year block\n    if (opts.min) patternBlocks.Y.from = opts.min.getFullYear();\n    if (opts.max) patternBlocks.Y.to = opts.max.getFullYear();\n    if (opts.min && opts.max && patternBlocks.Y.from === patternBlocks.Y.to) {\n      patternBlocks.m.from = opts.min.getMonth() + 1;\n      patternBlocks.m.to = opts.max.getMonth() + 1;\n      if (patternBlocks.m.from === patternBlocks.m.to) {\n        patternBlocks.d.from = opts.min.getDate();\n        patternBlocks.d.to = opts.max.getDate();\n      }\n    }\n    Object.assign(patternBlocks, this.blocks, blocks);\n\n    // add autofix\n    Object.keys(patternBlocks).forEach(bk => {\n      const b = patternBlocks[bk];\n      if (!('autofix' in b) && 'autofix' in opts) b.autofix = opts.autofix;\n    });\n    super._update({\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern,\n      blocks: patternBlocks\n    });\n  }\n  doValidate(flags) {\n    const date = this.date;\n    return super.doValidate(flags) && (!this.isComplete || this.isDateExist(this.value) && date != null && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));\n  }\n\n  /** Checks if date is exists */\n  isDateExist(str) {\n    return this.format(this.parse(str, this), this).indexOf(str) >= 0;\n  }\n\n  /** Parsed Date */\n  get date() {\n    return this.typedValue;\n  }\n  set date(date) {\n    this.typedValue = date;\n  }\n  get typedValue() {\n    return this.isComplete ? super.typedValue : null;\n  }\n  set typedValue(value) {\n    super.typedValue = value;\n  }\n  maskEquals(mask) {\n    return mask === Date || super.maskEquals(mask);\n  }\n}\nMaskedDate.GET_DEFAULT_BLOCKS = () => ({\n  d: {\n    mask: MaskedRange,\n    from: 1,\n    to: 31,\n    maxLength: 2\n  },\n  m: {\n    mask: MaskedRange,\n    from: 1,\n    to: 12,\n    maxLength: 2\n  },\n  Y: {\n    mask: MaskedRange,\n    from: 1900,\n    to: 9999\n  }\n});\nMaskedDate.DEFAULTS = {\n  mask: Date,\n  pattern: 'd{.}`m{.}`Y',\n  format: (date, masked) => {\n    if (!date) return '';\n    const day = String(date.getDate()).padStart(2, '0');\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const year = date.getFullYear();\n    return [day, month, year].join('.');\n  },\n  parse: (str, masked) => {\n    const [day, month, year] = str.split('.').map(Number);\n    return new Date(year, month - 1, day);\n  }\n};\nIMask.MaskedDate = MaskedDate;\n\nexport { MaskedDate as default };\n","import { DIRECTION, objectIncludes } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\n/** Dynamic mask for choosing appropriate mask in run-time */\nclass MaskedDynamic extends Masked {\n  /** Currently chosen mask */\n\n  /** Currently chosen mask */\n\n  /** Compliled {@link Masked} options */\n\n  /** Chooses {@link Masked} depending on input value */\n\n  constructor(opts) {\n    super({\n      ...MaskedDynamic.DEFAULTS,\n      ...opts\n    });\n    this.currentMask = undefined;\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    if ('mask' in opts) {\n      this.exposeMask = undefined;\n      // mask could be totally dynamic with only `dispatch` option\n      this.compiledMasks = Array.isArray(opts.mask) ? opts.mask.map(m => {\n        const {\n          expose,\n          ...maskOpts\n        } = normalizeOpts(m);\n        const masked = createMask({\n          overwrite: this._overwrite,\n          eager: this._eager,\n          skipInvalid: this._skipInvalid,\n          ...maskOpts\n        });\n        if (expose) this.exposeMask = masked;\n        return masked;\n      }) : [];\n\n      // this.currentMask = this.doDispatch(''); // probably not needed but lets see\n    }\n  }\n\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = this._applyDispatch(ch, flags);\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendChar(ch, this.currentMaskFlags(flags)));\n    }\n    return details;\n  }\n  _applyDispatch(appended, flags, tail) {\n    if (appended === void 0) {\n      appended = '';\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    const prevValueBeforeTail = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._value : this.value;\n    const inputValue = this.rawInputValue;\n    const insertValue = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._rawInputValue : inputValue;\n    const tailValue = inputValue.slice(insertValue.length);\n    const prevMask = this.currentMask;\n    const details = new ChangeDetails();\n    const prevMaskState = prevMask == null ? void 0 : prevMask.state;\n\n    // clone flags to prevent overwriting `_beforeTailState`\n    this.currentMask = this.doDispatch(appended, {\n      ...flags\n    }, tail);\n\n    // restore state after dispatch\n    if (this.currentMask) {\n      if (this.currentMask !== prevMask) {\n        // if mask changed reapply input\n        this.currentMask.reset();\n        if (insertValue) {\n          const d = this.currentMask.append(insertValue, {\n            raw: true\n          });\n          details.tailShift = d.inserted.length - prevValueBeforeTail.length;\n        }\n        if (tailValue) {\n          details.tailShift += this.currentMask.append(tailValue, {\n            raw: true,\n            tail: true\n          }).tailShift;\n        }\n      } else if (prevMaskState) {\n        // Dispatch can do something bad with state, so\n        // restore prev mask state\n        this.currentMask.state = prevMaskState;\n      }\n    }\n    return details;\n  }\n  _appendPlaceholder() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendPlaceholder());\n    }\n    return details;\n  }\n  _appendEager() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendEager());\n    }\n    return details;\n  }\n  appendTail(tail) {\n    const details = new ChangeDetails();\n    if (tail) details.aggregate(this._applyDispatch('', {}, tail));\n    return details.aggregate(this.currentMask ? this.currentMask.appendTail(tail) : super.appendTail(tail));\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta, _flags$_beforeTailSta2;\n    return {\n      ...flags,\n      _beforeTailState: ((_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.currentMaskRef) === this.currentMask && ((_flags$_beforeTailSta2 = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta2.currentMask) || flags._beforeTailState\n    };\n  }\n  doDispatch(appended, flags, tail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    return this.dispatch(appended, this, flags, tail);\n  }\n  doValidate(flags) {\n    return super.doValidate(flags) && (!this.currentMask || this.currentMask.doValidate(this.currentMaskFlags(flags)));\n  }\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepare(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepare(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepareChar(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepareChar(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  reset() {\n    var _this$currentMask;\n    (_this$currentMask = this.currentMask) == null ? void 0 : _this$currentMask.reset();\n    this.compiledMasks.forEach(m => m.reset());\n  }\n  get value() {\n    return this.exposeMask ? this.exposeMask.value : this.currentMask ? this.currentMask.value : '';\n  }\n  set value(value) {\n    if (this.exposeMask) {\n      this.exposeMask.value = value;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.value = value;\n  }\n  get unmaskedValue() {\n    return this.exposeMask ? this.exposeMask.unmaskedValue : this.currentMask ? this.currentMask.unmaskedValue : '';\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.unmaskedValue = unmaskedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.exposeMask ? this.exposeMask.typedValue : this.currentMask ? this.currentMask.typedValue : '';\n  }\n  set typedValue(typedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.typedValue = typedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n      return;\n    }\n    let unmaskedValue = String(typedValue);\n\n    // double check it\n    if (this.currentMask) {\n      this.currentMask.typedValue = typedValue;\n      unmaskedValue = this.currentMask.unmaskedValue;\n    }\n    this.unmaskedValue = unmaskedValue;\n  }\n  get displayValue() {\n    return this.currentMask ? this.currentMask.displayValue : '';\n  }\n  get isComplete() {\n    var _this$currentMask2;\n    return Boolean((_this$currentMask2 = this.currentMask) == null ? void 0 : _this$currentMask2.isComplete);\n  }\n  get isFilled() {\n    var _this$currentMask3;\n    return Boolean((_this$currentMask3 = this.currentMask) == null ? void 0 : _this$currentMask3.isFilled);\n  }\n  remove(fromPos, toPos) {\n    const details = new ChangeDetails();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask.remove(fromPos, toPos))\n      // update with dispatch\n      .aggregate(this._applyDispatch());\n    }\n    return details;\n  }\n  get state() {\n    var _this$currentMask4;\n    return {\n      ...super.state,\n      _rawInputValue: this.rawInputValue,\n      compiledMasks: this.compiledMasks.map(m => m.state),\n      currentMaskRef: this.currentMask,\n      currentMask: (_this$currentMask4 = this.currentMask) == null ? void 0 : _this$currentMask4.state\n    };\n  }\n  set state(state) {\n    const {\n      compiledMasks,\n      currentMaskRef,\n      currentMask,\n      ...maskedState\n    } = state;\n    if (compiledMasks) this.compiledMasks.forEach((m, mi) => m.state = compiledMasks[mi]);\n    if (currentMaskRef != null) {\n      this.currentMask = currentMaskRef;\n      this.currentMask.state = currentMask;\n    }\n    super.state = maskedState;\n  }\n  extractInput(fromPos, toPos, flags) {\n    return this.currentMask ? this.currentMask.extractInput(fromPos, toPos, flags) : '';\n  }\n  extractTail(fromPos, toPos) {\n    return this.currentMask ? this.currentMask.extractTail(fromPos, toPos) : super.extractTail(fromPos, toPos);\n  }\n  doCommit() {\n    if (this.currentMask) this.currentMask.doCommit();\n    super.doCommit();\n  }\n  nearestInputPos(cursorPos, direction) {\n    return this.currentMask ? this.currentMask.nearestInputPos(cursorPos, direction) : super.nearestInputPos(cursorPos, direction);\n  }\n  get overwrite() {\n    return this.currentMask ? this.currentMask.overwrite : this._overwrite;\n  }\n  set overwrite(overwrite) {\n    this._overwrite = overwrite;\n  }\n  get eager() {\n    return this.currentMask ? this.currentMask.eager : this._eager;\n  }\n  set eager(eager) {\n    this._eager = eager;\n  }\n  get skipInvalid() {\n    return this.currentMask ? this.currentMask.skipInvalid : this._skipInvalid;\n  }\n  set skipInvalid(skipInvalid) {\n    this._skipInvalid = skipInvalid;\n  }\n  maskEquals(mask) {\n    return Array.isArray(mask) ? this.compiledMasks.every((m, mi) => {\n      if (!mask[mi]) return;\n      const {\n        mask: oldMask,\n        ...restOpts\n      } = mask[mi];\n      return objectIncludes(m, restOpts) && m.maskEquals(oldMask);\n    }) : super.maskEquals(mask);\n  }\n  typedValueEquals(value) {\n    var _this$currentMask5;\n    return Boolean((_this$currentMask5 = this.currentMask) == null ? void 0 : _this$currentMask5.typedValueEquals(value));\n  }\n}\nMaskedDynamic.DEFAULTS = void 0;\nMaskedDynamic.DEFAULTS = {\n  dispatch: (appended, masked, flags, tail) => {\n    if (!masked.compiledMasks.length) return;\n    const inputValue = masked.rawInputValue;\n\n    // simulate input\n    const inputs = masked.compiledMasks.map((m, index) => {\n      const isCurrent = masked.currentMask === m;\n      const startInputPos = isCurrent ? m.displayValue.length : m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT);\n      if (m.rawInputValue !== inputValue) {\n        m.reset();\n        m.append(inputValue, {\n          raw: true\n        });\n      } else if (!isCurrent) {\n        m.remove(startInputPos);\n      }\n      m.append(appended, masked.currentMaskFlags(flags));\n      m.appendTail(tail);\n      return {\n        index,\n        weight: m.rawInputValue.length,\n        totalInputPositions: m.totalInputPositions(0, Math.max(startInputPos, m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT)))\n      };\n    });\n\n    // pop masks with longer values first\n    inputs.sort((i1, i2) => i2.weight - i1.weight || i2.totalInputPositions - i1.totalInputPositions);\n    return masked.compiledMasks[inputs[0].index];\n  }\n};\nIMask.MaskedDynamic = MaskedDynamic;\n\nexport { MaskedDynamic as default };\n","import MaskedPattern from './pattern.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which validates enum values */\nclass MaskedEnum extends MaskedPattern {\n  constructor(opts) {\n    super(opts); // mask will be created in _update\n  }\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      enum: _enum,\n      ...eopts\n    } = opts;\n    if (_enum) {\n      const lengths = _enum.map(e => e.length);\n      const requiredLength = Math.min(...lengths);\n      const optionalLength = Math.max(...lengths) - requiredLength;\n      eopts.mask = '*'.repeat(requiredLength);\n      if (optionalLength) eopts.mask += '[' + '*'.repeat(optionalLength) + ']';\n      this.enum = _enum;\n    }\n    super._update(eopts);\n  }\n  doValidate(flags) {\n    return this.enum.some(e => e.indexOf(this.unmaskedValue) === 0) && super.doValidate(flags);\n  }\n}\nIMask.MaskedEnum = MaskedEnum;\n\nexport { MaskedEnum as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by custom Function */\nclass MaskedFunction extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update({\n      ...opts,\n      validate: opts.mask\n    });\n  }\n}\nIMask.MaskedFunction = MaskedFunction;\n\nexport { MaskedFunction as default };\n","import { escapeRegExp, DIRECTION } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\n/** Number mask */\nclass MaskedNumber extends Masked {\n  /** Single char */\n\n  /** Single char */\n\n  /** Array of single chars */\n\n  /** */\n\n  /** */\n\n  /** Digits after point */\n\n  /** Flag to remove leading and trailing zeros in the end of editing */\n\n  /** Flag to pad trailing zeros after point in the end of editing */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    super({\n      ...MaskedNumber.DEFAULTS,\n      ...opts\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    this._updateRegExps();\n  }\n  _updateRegExps() {\n    const start = '^' + (this.allowNegative ? '[+|\\\\-]?' : '');\n    const mid = '\\\\d*';\n    const end = (this.scale ? \"(\" + escapeRegExp(this.radix) + \"\\\\d{0,\" + this.scale + \"})?\" : '') + '$';\n    this._numberRegExp = new RegExp(start + mid + end);\n    this._mapToRadixRegExp = new RegExp(\"[\" + this.mapToRadix.map(escapeRegExp).join('') + \"]\", 'g');\n    this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');\n  }\n  _removeThousandsSeparators(value) {\n    return value.replace(this._thousandsSeparatorRegExp, '');\n  }\n  _insertThousandsSeparators(value) {\n    // https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n    const parts = value.split(this.radix);\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandsSeparator);\n    return parts.join(this.radix);\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const [prepCh, details] = super.doPrepareChar(this._removeThousandsSeparators(this.scale && this.mapToRadix.length && (\n    /*\n      radix should be mapped when\n      1) input is done from keyboard = flags.input && flags.raw\n      2) unmasked value is set = !flags.input && !flags.raw\n      and should not be mapped when\n      1) value is set = flags.input && !flags.raw\n      2) raw value is set = !flags.input && flags.raw\n    */\n    flags.input && flags.raw || !flags.input && !flags.raw) ? ch.replace(this._mapToRadixRegExp, this.radix) : ch), flags);\n    if (ch && !prepCh) details.skip = true;\n    if (prepCh && !this.allowPositive && !this.value && prepCh !== '-') details.aggregate(this._appendChar('-'));\n    return [prepCh, details];\n  }\n  _separatorsCount(to, extendOnSeparators) {\n    if (extendOnSeparators === void 0) {\n      extendOnSeparators = false;\n    }\n    let count = 0;\n    for (let pos = 0; pos < to; ++pos) {\n      if (this._value.indexOf(this.thousandsSeparator, pos) === pos) {\n        ++count;\n        if (extendOnSeparators) to += this.thousandsSeparator.length;\n      }\n    }\n    return count;\n  }\n  _separatorsCountFromSlice(slice) {\n    if (slice === void 0) {\n      slice = this._value;\n    }\n    return this._separatorsCount(this._removeThousandsSeparators(slice).length, true);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    return this._removeThousandsSeparators(super.extractInput(fromPos, toPos, flags));\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (!this.thousandsSeparator) return super._appendCharRaw(ch, flags);\n    const prevBeforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const prevBeforeTailSeparatorsCount = this._separatorsCountFromSlice(prevBeforeTailValue);\n    this._value = this._removeThousandsSeparators(this.value);\n    const appendDetails = super._appendCharRaw(ch, flags);\n    this._value = this._insertThousandsSeparators(this._value);\n    const beforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(beforeTailValue);\n    appendDetails.tailShift += (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length;\n    appendDetails.skip = !appendDetails.rawInserted && ch === this.thousandsSeparator;\n    return appendDetails;\n  }\n  _findSeparatorAround(pos) {\n    if (this.thousandsSeparator) {\n      const searchFrom = pos - this.thousandsSeparator.length + 1;\n      const separatorPos = this.value.indexOf(this.thousandsSeparator, searchFrom);\n      if (separatorPos <= pos) return separatorPos;\n    }\n    return -1;\n  }\n  _adjustRangeWithSeparators(from, to) {\n    const separatorAroundFromPos = this._findSeparatorAround(from);\n    if (separatorAroundFromPos >= 0) from = separatorAroundFromPos;\n    const separatorAroundToPos = this._findSeparatorAround(to);\n    if (separatorAroundToPos >= 0) to = separatorAroundToPos + this.thousandsSeparator.length;\n    return [from, to];\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    const valueBeforePos = this.value.slice(0, fromPos);\n    const valueAfterPos = this.value.slice(toPos);\n    const prevBeforeTailSeparatorsCount = this._separatorsCount(valueBeforePos.length);\n    this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos + valueAfterPos));\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(valueBeforePos);\n    return new ChangeDetails({\n      tailShift: (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length\n    });\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (!this.thousandsSeparator) return cursorPos;\n    switch (direction) {\n      case DIRECTION.NONE:\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        {\n          const separatorAtLeftPos = this._findSeparatorAround(cursorPos - 1);\n          if (separatorAtLeftPos >= 0) {\n            const separatorAtLeftEndPos = separatorAtLeftPos + this.thousandsSeparator.length;\n            if (cursorPos < separatorAtLeftEndPos || this.value.length <= separatorAtLeftEndPos || direction === DIRECTION.FORCE_LEFT) {\n              return separatorAtLeftPos;\n            }\n          }\n          break;\n        }\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        {\n          const separatorAtRightPos = this._findSeparatorAround(cursorPos);\n          if (separatorAtRightPos >= 0) {\n            return separatorAtRightPos + this.thousandsSeparator.length;\n          }\n        }\n    }\n    return cursorPos;\n  }\n  doValidate(flags) {\n    // validate as string\n    let valid = Boolean(this._removeThousandsSeparators(this.value).match(this._numberRegExp));\n    if (valid) {\n      // validate as number\n      const number = this.number;\n      valid = valid && !isNaN(number) && (\n      // check min bound for negative values\n      this.min == null || this.min >= 0 || this.min <= this.number) && (\n      // check max bound for positive values\n      this.max == null || this.max <= 0 || this.number <= this.max);\n    }\n    return valid && super.doValidate(flags);\n  }\n  doCommit() {\n    if (this.value) {\n      const number = this.number;\n      let validnum = number;\n\n      // check bounds\n      if (this.min != null) validnum = Math.max(validnum, this.min);\n      if (this.max != null) validnum = Math.min(validnum, this.max);\n      if (validnum !== number) this.unmaskedValue = this.format(validnum, this);\n      let formatted = this.value;\n      if (this.normalizeZeros) formatted = this._normalizeZeros(formatted);\n      if (this.padFractionalZeros && this.scale > 0) formatted = this._padFractionalZeros(formatted);\n      this._value = formatted;\n    }\n    super.doCommit();\n  }\n  _normalizeZeros(value) {\n    const parts = this._removeThousandsSeparators(value).split(this.radix);\n\n    // remove leading zeros\n    parts[0] = parts[0].replace(/^(\\D*)(0*)(\\d*)/, (match, sign, zeros, num) => sign + num);\n    // add leading zero\n    if (value.length && !/\\d$/.test(parts[0])) parts[0] = parts[0] + '0';\n    if (parts.length > 1) {\n      parts[1] = parts[1].replace(/0*$/, ''); // remove trailing zeros\n      if (!parts[1].length) parts.length = 1; // remove fractional\n    }\n\n    return this._insertThousandsSeparators(parts.join(this.radix));\n  }\n  _padFractionalZeros(value) {\n    if (!value) return value;\n    const parts = value.split(this.radix);\n    if (parts.length < 2) parts.push('');\n    parts[1] = parts[1].padEnd(this.scale, '0');\n    return parts.join(this.radix);\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const dropFractional = this.scale === 0 && ch !== this.thousandsSeparator && (ch === this.radix || ch === MaskedNumber.UNMASKED_RADIX || this.mapToRadix.includes(ch));\n    return super.doSkipInvalid(ch, flags, checkTail) && !dropFractional;\n  }\n  get unmaskedValue() {\n    return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, MaskedNumber.UNMASKED_RADIX);\n  }\n  set unmaskedValue(unmaskedValue) {\n    super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.parse(this.unmaskedValue, this);\n  }\n  set typedValue(n) {\n    this.rawInputValue = this.format(n, this).replace(MaskedNumber.UNMASKED_RADIX, this.radix);\n  }\n\n  /** Parsed Number */\n  get number() {\n    return this.typedValue;\n  }\n  set number(number) {\n    this.typedValue = number;\n  }\n\n  /**\n    Is negative allowed\n  */\n  get allowNegative() {\n    return this.min != null && this.min < 0 || this.max != null && this.max < 0;\n  }\n\n  /**\n    Is positive allowed\n  */\n  get allowPositive() {\n    return this.min != null && this.min > 0 || this.max != null && this.max > 0;\n  }\n  typedValueEquals(value) {\n    // handle  0 -> '' case (typed = 0 even if value = '')\n    // for details see https://github.com/uNmAnNeR/imaskjs/issues/134\n    return (super.typedValueEquals(value) || MaskedNumber.EMPTY_VALUES.includes(value) && MaskedNumber.EMPTY_VALUES.includes(this.typedValue)) && !(value === 0 && this.value === '');\n  }\n}\nMaskedNumber.UNMASKED_RADIX = '.';\nMaskedNumber.EMPTY_VALUES = [...Masked.EMPTY_VALUES, 0];\nMaskedNumber.DEFAULTS = {\n  mask: Number,\n  radix: ',',\n  thousandsSeparator: '',\n  mapToRadix: [MaskedNumber.UNMASKED_RADIX],\n  min: Number.MIN_SAFE_INTEGER,\n  max: Number.MAX_SAFE_INTEGER,\n  scale: 2,\n  normalizeZeros: true,\n  padFractionalZeros: false,\n  parse: Number,\n  format: n => n.toLocaleString('en-US', {\n    useGrouping: false,\n    maximumFractionDigits: 20\n  })\n};\nIMask.MaskedNumber = MaskedNumber;\n\nexport { MaskedNumber as default };\n","import createMask from './factory.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\n\n/** Mask pipe source and destination types */\nconst PIPE_TYPE = {\n  MASKED: 'value',\n  UNMASKED: 'unmaskedValue',\n  TYPED: 'typedValue'\n};\n/** Creates new pipe function depending on mask type, source and destination options */\nfunction createPipe(arg, from, to) {\n  if (from === void 0) {\n    from = PIPE_TYPE.MASKED;\n  }\n  if (to === void 0) {\n    to = PIPE_TYPE.MASKED;\n  }\n  const masked = createMask(arg);\n  return value => masked.runIsolated(m => {\n    m[from] = value;\n    return m[to];\n  });\n}\n\n/** Pipes value through mask depending on mask type, source and destination options */\nfunction pipe(value, mask, from, to) {\n  return createPipe(mask, from, to)(value);\n}\nIMask.PIPE_TYPE = PIPE_TYPE;\nIMask.createPipe = createPipe;\nIMask.pipe = pipe;\n\nexport { PIPE_TYPE, createPipe, pipe };\n","export { default as InputMask } from './controls/input.js';\nimport IMask from './core/holder.js';\nexport { default as HTMLContenteditableMaskElement } from './controls/html-contenteditable-mask-element.js';\nexport { default as HTMLInputMaskElement } from './controls/html-input-mask-element.js';\nexport { default as HTMLMaskElement } from './controls/html-mask-element.js';\nexport { default as MaskElement } from './controls/mask-element.js';\nexport { default as ChangeDetails } from './core/change-details.js';\nexport { DIRECTION, forceDirection } from './core/utils.js';\nexport { default as Masked } from './masked/base.js';\nexport { default as MaskedDate } from './masked/date.js';\nexport { default as MaskedDynamic } from './masked/dynamic.js';\nexport { default as MaskedEnum } from './masked/enum.js';\nexport { default as createMask, normalizeOpts } from './masked/factory.js';\nexport { default as MaskedFunction } from './masked/function.js';\nexport { default as MaskedNumber } from './masked/number.js';\nexport { default as MaskedPattern } from './masked/pattern.js';\nexport { default as ChunksTailDetails } from './masked/pattern/chunk-tail-details.js';\nexport { default as PatternFixedDefinition } from './masked/pattern/fixed-definition.js';\nexport { default as PatternInputDefinition } from './masked/pattern/input-definition.js';\nexport { PIPE_TYPE, createPipe, pipe } from './masked/pipe.js';\nexport { default as MaskedRange } from './masked/range.js';\nexport { default as MaskedRegExp } from './masked/regexp.js';\nimport './core/action-details.js';\nimport './core/continuous-tail-details.js';\nimport './masked/pattern/cursor.js';\n\ntry {\n  globalThis.IMask = IMask;\n} catch {}\n\nexport { IMask as default };\n","import { HttpClient } from '@angular/common/http';\r\nimport { AfterViewInit, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport IMask from 'imask';\r\nimport * as moment from 'moment';\r\nimport { TipoCartaCredito } from 'src/app/shared/models/enum';\r\n\r\n@Component({\r\n  selector: 'app-credit-card',\r\n  templateUrl: './credit-card.component.html',\r\n  styleUrls: ['./credit-card.component.scss']\r\n})\r\nexport class CreditCardComponent implements OnInit, AfterViewInit {\r\n\r\n  @Input() nameInput: HTMLInputElement;\r\n  @Input() cardNumberInput: HTMLInputElement;\r\n  @Input() expirationDateInput: HTMLInputElement;\r\n  @Input() securityCodeInput: HTMLInputElement;\r\n\r\n  @Output() creditCardTypeDetected: EventEmitter<TipoCartaCredito> = new EventEmitter();\r\n\r\n  public flipped: boolean = false;\r\n  public year: string = (moment().year() + 1).toString().slice(2);\r\n\r\n  public americanExpress: string;\r\n  public visa: string;\r\n  public diners: string;\r\n  public discover: string;\r\n  public jcb: string;\r\n  public maestro: string;\r\n  public mastercard: string;\r\n  public unionpay: string;\r\n\r\n  public ccImage: string = '';\r\n  public color: string = 'grey';\r\n\r\n  public name: string = 'Mario Rossi';\r\n  public number: string = '0123 4567 8910 1112';\r\n  public expiration: string = '01/' + this.year;\r\n  public securityCode: string = '985';\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  ngOnInit() {\r\n    this.http.get('/assets/images/booking/credit-card/american-express.svg', { responseType: 'text' }).subscribe({\r\n      next: (data: any) => {\r\n        this.americanExpress = data;\r\n      },\r\n      error: () => { }\r\n    });\r\n\r\n    this.http.get('/assets/images/booking/credit-card/visa.svg', { responseType: 'text' }).subscribe({\r\n      next: (data: any) => {\r\n        this.visa = data;\r\n      },\r\n      error: () => { }\r\n    });\r\n\r\n    this.http.get('/assets/images/booking/credit-card/diners.svg', { responseType: 'text' }).subscribe({\r\n      next: (data: any) => {\r\n        this.diners = data;\r\n      },\r\n      error: () => { }\r\n    });\r\n\r\n    this.http.get('/assets/images/booking/credit-card/discover.svg', { responseType: 'text' }).subscribe({\r\n      next: (data: any) => {\r\n        this.discover = data;\r\n      },\r\n      error: () => { }\r\n    });\r\n\r\n    this.http.get('/assets/images/booking/credit-card/jcb.svg', { responseType: 'text' }).subscribe({\r\n      next: (data: any) => {\r\n        this.jcb = data;\r\n      },\r\n      error: () => { }\r\n    });\r\n\r\n    this.http.get('/assets/images/booking/credit-card/maestro.svg', { responseType: 'text' }).subscribe({\r\n      next: (data: any) => {\r\n        this.maestro = data;\r\n      },\r\n      error: () => { }\r\n    });\r\n\r\n    this.http.get('/assets/images/booking/credit-card/mastercard.svg', { responseType: 'text' }).subscribe({\r\n      next: (data: any) => {\r\n        this.mastercard = data;\r\n      },\r\n      error: () => { }\r\n    });\r\n\r\n    this.http.get('/assets/images/booking/credit-card/unionpay.svg', { responseType: 'text' }).subscribe({\r\n      next: (data: any) => {\r\n        this.unionpay = data;\r\n      },\r\n      error: () => { }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    let cardnumber_mask = IMask(this.cardNumberInput, {\r\n      mask: [\r\n        {\r\n          mask: '0000 000000 00000',\r\n          regex: '^3[47]\\\\d{0,13}',\r\n          cardtype: 'american express'\r\n        },\r\n        {\r\n          mask: '0000 0000 0000 0000',\r\n          regex: '^(?:6011|65\\\\d{0,2}|64[4-9]\\\\d?)\\\\d{0,12}',\r\n          cardtype: 'discover'\r\n        },\r\n        {\r\n          mask: '0000 000000 0000',\r\n          regex: '^3(?:0([0-5]|9)|[689]\\\\d?)\\\\d{0,11}',\r\n          cardtype: 'diners'\r\n        },\r\n        {\r\n          mask: '0000 0000 0000 0000',\r\n          regex: '^(5[1-5]\\\\d{0,2}|22[2-9]\\\\d{0,1}|2[3-7]\\\\d{0,2})\\\\d{0,12}',\r\n          cardtype: 'mastercard'\r\n        },\r\n        // {\r\n        //     mask: '0000-0000-0000-0000',\r\n        //     regex: '^(5019|4175|4571)\\\\d{0,12}',\r\n        //     cardtype: 'dankort'\r\n        // },\r\n        // {\r\n        //     mask: '0000-0000-0000-0000',\r\n        //     regex: '^63[7-9]\\\\d{0,13}',\r\n        //     cardtype: 'instapayment'\r\n        // },\r\n        {\r\n          mask: '0000 000000 00000',\r\n          regex: '^(?:2131|1800)\\\\d{0,11}',\r\n          cardtype: 'jcb15'\r\n        },\r\n        {\r\n          mask: '0000 0000 0000 0000',\r\n          regex: '^(?:35\\\\d{0,2})\\\\d{0,12}',\r\n          cardtype: 'jcb'\r\n        },\r\n        {\r\n          mask: '0000 0000 0000 0000',\r\n          regex: '^(?:5[0678]\\\\d{0,2}|6304|67\\\\d{0,2})\\\\d{0,12}',\r\n          cardtype: 'maestro'\r\n        },\r\n        // {\r\n        //     mask: '0000-0000-0000-0000',\r\n        //     regex: '^220[0-4]\\\\d{0,12}',\r\n        //     cardtype: 'mir'\r\n        // },\r\n        {\r\n          mask: '0000 0000 0000 0000',\r\n          regex: '^4\\\\d{0,15}',\r\n          cardtype: 'visa'\r\n        },\r\n        {\r\n          mask: '0000 0000 0000 0000',\r\n          regex: '^62\\\\d{0,14}',\r\n          cardtype: 'unionpay'\r\n        },\r\n        {\r\n          mask: '0000 0000 0000 0000',\r\n          cardtype: 'Unknown'\r\n        }\r\n      ],\r\n      dispatch: (value: string, masked: any, flags: any) => {\r\n        let number = (masked.value + value).replace(/\\D/g, '');\r\n\r\n        for (let mask of masked.compiledMasks) {\r\n          let re = new RegExp(mask.regex);\r\n\r\n          if (number.match(re) != null) {\r\n            return mask;\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    let expirationdate_mask = IMask(this.expirationDateInput, {\r\n      mask: 'MM{/}YY',\r\n      blocks: {\r\n        YY: {\r\n          mask: IMask.MaskedRange,\r\n          placeholderChar: 'YY',\r\n          from: 0,\r\n          to: 99,\r\n          maxLength: 2\r\n        },\r\n        MM: {\r\n          mask: IMask.MaskedRange,\r\n          placeholderChar: 'MM',\r\n          from: 1,\r\n          to: 12,\r\n          maxLength: 2\r\n        }\r\n      }\r\n    });\r\n\r\n    let securitycode_mask = IMask(this.securityCodeInput, {\r\n      mask: '0000'\r\n    });\r\n\r\n    cardnumber_mask.on(\"accept\", () => {\r\n      switch (cardnumber_mask.masked.currentMask['cardtype']) {\r\n        case 'american express':\r\n          this.ccImage = this.americanExpress;\r\n          this.color = 'green';\r\n          this.creditCardTypeDetected.emit(TipoCartaCredito.AmericanExpress);\r\n          break;\r\n        case 'visa':\r\n          this.ccImage = this.visa;\r\n          this.color = 'lime';\r\n          this.creditCardTypeDetected.emit(TipoCartaCredito.Visa);\r\n          break;\r\n        case 'diners':\r\n          this.ccImage = this.diners;\r\n          this.color = 'orange';\r\n          this.creditCardTypeDetected.emit(TipoCartaCredito.DinersClub);\r\n          break;\r\n        case 'discover':\r\n          this.ccImage = this.discover;\r\n          this.color = 'purple';\r\n          this.creditCardTypeDetected.emit(TipoCartaCredito.DiscoveryCard);\r\n          break;\r\n        case 'jcb': case 'jcb15':\r\n          this.ccImage = this.jcb;\r\n          this.color = 'red';\r\n          this.creditCardTypeDetected.emit(TipoCartaCredito.JCB);\r\n          break;\r\n        case 'maestro':\r\n          this.ccImage = this.maestro;\r\n          this.color = 'yellow';\r\n          this.creditCardTypeDetected.emit(TipoCartaCredito.Maestro);\r\n          break;\r\n        case 'mastercard':\r\n          this.ccImage = this.mastercard;\r\n          this.color = 'lightblue';\r\n          this.creditCardTypeDetected.emit(TipoCartaCredito.MasterCard);\r\n          break;\r\n        case 'unionpay':\r\n          this.ccImage = this.unionpay;\r\n          this.color = 'cyan';\r\n          this.creditCardTypeDetected.emit(TipoCartaCredito.ChinaUnionPay);\r\n          break;\r\n        default:\r\n          this.ccImage = '';\r\n          this.color = 'grey';\r\n          this.creditCardTypeDetected.emit(null);\r\n          break;\r\n      }\r\n    });\r\n\r\n    this.nameInput.addEventListener('input', () => {\r\n      if (!this.nameInput.value) {\r\n        this.name = 'Mario Rossi';\r\n      } else {\r\n        this.name = this.nameInput.value;\r\n      }\r\n    });\r\n\r\n    cardnumber_mask.on('accept', () => {\r\n      if (!cardnumber_mask.value) {\r\n        this.number = '0123 4567 8910 1112';\r\n      } else {\r\n        this.number = cardnumber_mask.value;\r\n      }\r\n    });\r\n\r\n    expirationdate_mask.on('accept', () => {\r\n      if (!expirationdate_mask.value) {\r\n        this.expiration = '01/' + this.year;\r\n      } else {\r\n        this.expiration = expirationdate_mask.value;\r\n      }\r\n    });\r\n\r\n    securitycode_mask.on('accept', () => {\r\n      if (!securitycode_mask.value) {\r\n        this.securityCode = '985';\r\n      } else {\r\n        this.securityCode = securitycode_mask.value;\r\n      }\r\n    });\r\n\r\n    this.nameInput.addEventListener('focus', () => {\r\n      this.flipped = false;\r\n    });\r\n\r\n    this.cardNumberInput.addEventListener('focus', () => {\r\n      this.flipped = false;\r\n    });\r\n\r\n    this.expirationDateInput.addEventListener('focus', () => {\r\n      this.flipped = false;\r\n    });\r\n\r\n    this.securityCodeInput.addEventListener('focus', () => {\r\n      this.flipped = true;\r\n    });\r\n  }\r\n}","<div class=\"creditcard\" [style.height.px]=\"front.offsetHeight\" [ngClass]=\"{'flipped': flipped}\" (click)=\"flipped=!flipped\">\r\n    <div #front class=\"front\">\r\n        <div id=\"ccsingle\" [innerHtml]=\"ccImage | safeHtml\"></div>\r\n        <svg version=\"1.1\" id=\"cardfront\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 750 471\" style=\"enable-background:new 0 0 750 471;\" xml:space=\"preserve\">\r\n            <g id=\"Front\">\r\n                <g id=\"CardBackground\">\r\n                    <g id=\"Page-1_1_\">\r\n                        <g id=\"amex_1_\">\r\n                            <path id=\"Rectangle-1_1_\" [class]=\"'lightcolor ' + color\" d=\"M40,0h670c22.1,0,40,17.9,40,40v391c0,22.1-17.9,40-40,40H40c-22.1,0-40-17.9-40-40V40\r\n                    C0,17.9,17.9,0,40,0z\" />\r\n                        </g>\r\n                    </g>\r\n                    <path [class]=\"'darkcolor ' + color + 'dark'\" \r\n                        d=\"M750,431V193.2c-217.6-57.5-556.4-13.5-750,24.9V431c0,22.1,17.9,40,40,40h670C732.1,471,750,453.1,750,431z\" />\r\n                </g>\r\n                <text transform=\"matrix(1 0 0 1 60.106 295.0121)\" class=\"st2 st3 st4\">{{number}}</text>\r\n                <text transform=\"matrix(1 0 0 1 54.1064 428.1723)\" class=\"st2 st5 st6\">{{name}}</text>\r\n                <text transform=\"matrix(1 0 0 1 54.1074 389.8793)\" class=\"st7 st5 st8\">{{'interfaces.pagamento-form.titolare' | translate}}</text>\r\n                <text transform=\"matrix(1 0 0 1 479.7754 388.8793)\" class=\"st7 st5 st8\">{{'interfaces.pagamento-form.scadenza' | translate}}</text>\r\n                <text transform=\"matrix(1 0 0 1 65.1054 241.5)\" class=\"st7 st5 st8\">{{'interfaces.pagamento-form.numero' | translate}}</text>\r\n                <g>\r\n                    <text transform=\"matrix(1 0 0 1 574.4219 433.8095)\" class=\"st2 st5 st9\">{{expiration}}</text>\r\n                    <text transform=\"matrix(1 0 0 1 479.3848 417.0097)\" class=\"st2 st10 st11\">VALID</text>\r\n                    <text transform=\"matrix(1 0 0 1 479.3848 435.6762)\" class=\"st2 st10 st11\">THRU</text>\r\n                    <polygon class=\"st2\" points=\"554.5,421 540.4,414.2 540.4,427.9\" />\r\n                </g>\r\n                <g id=\"cchip\">\r\n                    <g>\r\n                        <path class=\"st2\" d=\"M168.1,143.6H82.9c-10.2,0-18.5-8.3-18.5-18.5V74.9c0-10.2,8.3-18.5,18.5-18.5h85.3\r\n                c10.2,0,18.5,8.3,18.5,18.5v50.2C186.6,135.3,178.3,143.6,168.1,143.6z\" />\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <rect x=\"82\" y=\"70\" class=\"st12\" width=\"1.5\" height=\"60\" />\r\n                        </g>\r\n                        <g>\r\n                            <rect x=\"167.4\" y=\"70\" class=\"st12\" width=\"1.5\" height=\"60\" />\r\n                        </g>\r\n                        <g>\r\n                            <path class=\"st12\" d=\"M125.5,130.8c-10.2,0-18.5-8.3-18.5-18.5c0-4.6,1.7-8.9,4.7-12.3c-3-3.4-4.7-7.7-4.7-12.3\r\n                    c0-10.2,8.3-18.5,18.5-18.5s18.5,8.3,18.5,18.5c0,4.6-1.7,8.9-4.7,12.3c3,3.4,4.7,7.7,4.7,12.3\r\n                    C143.9,122.5,135.7,130.8,125.5,130.8z M125.5,70.8c-9.3,0-16.9,7.6-16.9,16.9c0,4.4,1.7,8.6,4.8,11.8l0.5,0.5l-0.5,0.5\r\n                    c-3.1,3.2-4.8,7.4-4.8,11.8c0,9.3,7.6,16.9,16.9,16.9s16.9-7.6,16.9-16.9c0-4.4-1.7-8.6-4.8-11.8l-0.5-0.5l0.5-0.5\r\n                    c3.1-3.2,4.8-7.4,4.8-11.8C142.4,78.4,134.8,70.8,125.5,70.8z\" />\r\n                        </g>\r\n                        <g>\r\n                            <rect x=\"82.8\" y=\"82.1\" class=\"st12\" width=\"25.8\" height=\"1.5\" />\r\n                        </g>\r\n                        <g>\r\n                            <rect x=\"82.8\" y=\"117.9\" class=\"st12\" width=\"26.1\" height=\"1.5\" />\r\n                        </g>\r\n                        <g>\r\n                            <rect x=\"142.4\" y=\"82.1\" class=\"st12\" width=\"25.8\" height=\"1.5\" />\r\n                        </g>\r\n                        <g>\r\n                            <rect x=\"142\" y=\"117.9\" class=\"st12\" width=\"26.2\" height=\"1.5\" />\r\n                        </g>\r\n                    </g>\r\n                </g>\r\n            </g>\r\n            <g id=\"Back\">\r\n            </g>\r\n        </svg>\r\n    </div>\r\n    <div class=\"back\">\r\n        <svg version=\"1.1\" id=\"cardback\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 750 471\" style=\"enable-background:new 0 0 750 471;\" xml:space=\"preserve\">\r\n            <g id=\"Front\">\r\n                <line class=\"st0\" x1=\"35.3\" y1=\"10.4\" x2=\"36.7\" y2=\"11\" />\r\n            </g>\r\n            <g id=\"Back\">\r\n                <g id=\"Page-1_2_\">\r\n                    <g id=\"amex_2_\">\r\n                        <path id=\"Rectangle-1_2_\" [class]=\"'darkcolor ' + color + 'dark'\" d=\"M40,0h670c22.1,0,40,17.9,40,40v391c0,22.1-17.9,40-40,40H40c-22.1,0-40-17.9-40-40V40\r\n                C0,17.9,17.9,0,40,0z\" />\r\n                    </g>\r\n                </g>\r\n                <rect y=\"61.6\" class=\"st2\" width=\"750\" height=\"78\" />\r\n                <g>\r\n                    <path class=\"st3\" d=\"M701.1,249.1H48.9c-3.3,0-6-2.7-6-6v-52.5c0-3.3,2.7-6,6-6h652.1c3.3,0,6,2.7,6,6v52.5\r\n            C707.1,246.4,704.4,249.1,701.1,249.1z\" />\r\n                    <rect x=\"42.9\" y=\"198.6\" class=\"st4\" width=\"664.1\" height=\"10.5\" />\r\n                    <rect x=\"42.9\" y=\"224.5\" class=\"st4\" width=\"664.1\" height=\"10.5\" />\r\n                    <path class=\"st5\"\r\n                        d=\"M701.1,184.6H618h-8h-10v64.5h10h8h83.1c3.3,0,6-2.7,6-6v-52.5C707.1,187.3,704.4,184.6,701.1,184.6z\" />\r\n                </g>\r\n                <text transform=\"matrix(1 0 0 1 621.999 227.2734)\" class=\"st6 st7\">{{securityCode}}</text>\r\n                <g class=\"st8\">\r\n                    <text transform=\"matrix(1 0 0 1 518.083 280.0879)\" class=\"st9 st6 st10\">{{'interfaces.pagamento-form.codiceSicurezza' | translate}}</text>\r\n                </g>\r\n                <rect x=\"58.1\" y=\"378.6\" class=\"st11\" width=\"375.5\" height=\"13.5\" />\r\n                <rect x=\"58.1\" y=\"405.6\" class=\"st11\" width=\"421.7\" height=\"13.5\" />\r\n                <text transform=\"matrix(1 0 0 1 59.5073 228.6099)\" class=\"st12 st13\">{{name}}</text>\r\n            </g>\r\n        </svg>\r\n    </div>\r\n</div>","<ng-container *ngIf=\"!axeptaTransactionId\">\r\n    <ng-container *ngIf=\"!sumupTransactionId\">\r\n        <ng-container *ngIf=\"!hobexTransactionId\">\r\n            <h4 *ngIf=\"!!title\">{{title | translate}}</h4>\r\n\r\n            <ng-container *ngIf=\"!!text\">\r\n                <div *ngIf=\"html\" [ngClass]=\"{'mt-3': !!title}\">\r\n                    <app-inner-html [_text]=\"text\"></app-inner-html>\r\n                </div>\r\n\r\n                <div *ngIf=\"!html\" [ngClass]=\"{'mt-3': !!title}\">\r\n                    {{text | translate}}\r\n                </div>\r\n            </ng-container>\r\n        </ng-container>\r\n\r\n        <div [ngClass]=\"{'hobex-container-hidden': hobexPaymentSubmitted}\" *ngIf=\"!!hobexTransactionId\">\r\n            <form [action]=\"paymentSuccessUrl\" class=\"paymentWidgets\" data-brands=\"VISA MASTER\"></form>\r\n            <iframe class=\"hobexIFrame\" name=\"hobexIFrame\" width=\"100%\" height=\"100%\" frameborder=\"0\" [ngStyle]=\"{'visibility': hobexPaymentSubmitted ? 'visible' : 'hidden', 'z-index': hobexPaymentSubmitted ? 1 : -1}\"></iframe>\r\n        </div>\r\n    </ng-container>\r\n\r\n    <div id=\"sumup-card\" *ngIf=\"!!sumupTransactionId\"></div>\r\n</ng-container>\r\n\r\n<div id=\"my-axepta-sdk-pg\" *ngIf=\"!!axeptaTransactionId\"></div>","import { AfterViewInit, Component, Input } from '@angular/core';\r\nimport { MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\r\nimport { UtilityService } from 'src/app/shared/services/utility.service';\r\n\r\nimport { BaseComponent } from '../../base-component/base-component';\r\n\r\ndeclare let SumUpCard;\r\ndeclare let AxeptaSDKClient;\r\n\r\n@Component({\r\n  selector: 'app-pagamento-form-dialog',\r\n  templateUrl: './pagamento-form-dialog.component.html',\r\n  styleUrls: ['./pagamento-form-dialog.component.scss']\r\n})\r\nexport class PagamentoFormDialogComponent extends BaseComponent implements AfterViewInit {\r\n\r\n  @Input() html: boolean;\r\n  @Input() title: string;\r\n  @Input() text: string;\r\n  @Input() sumupTransactionId: string;\r\n  @Input() hobexTransactionId: string;\r\n  @Input() axeptaTransactionId: string;\r\n  @Input() paymentSuccessUrl: string;\r\n  @Input() axeptaApiKeySmartCheckout: string;\r\n  @Input() isTest: boolean;\r\n  @Input() lingua: string;\r\n  @Input() dialogRef: MatDialogRef<{}, any>;\r\n\r\n  public readonly HOBEX_JS_URL = 'https://oppwa.com/v1/paymentWidgets.js?checkoutId=';\r\n  public readonly HOBEX_JS_URL_TEST = 'https://test.oppwa.com/v1/paymentWidgets.js?checkoutId=';\r\n\r\n  public readonly AXEPTA_URL = 'https://pay.axepta.it';\r\n  public readonly AXEPTA_URL_TEST = 'https://pay-sandbox.axepta.it';\r\n\r\n  public hobexPaymentSubmitted: boolean = false;\r\n\r\n  constructor(private utility: UtilityService) { super(); }\r\n\r\n  ngAfterViewInit() {\r\n    if (!!this.sumupTransactionId) {\r\n      SumUpCard.mount({\r\n        checkoutId: this.sumupTransactionId,\r\n        locale: this.lingua == 'it' ? 'it-IT' : 'en-GB',\r\n        onResponse: (type, body) => {\r\n          switch (type) {\r\n            case 'sent':\r\n              this.setIsLoading(true);\r\n              break;\r\n\r\n            case 'invalid':\r\n              break;\r\n\r\n            case 'auth-screen':\r\n              this.setIsLoading(false);\r\n              break;\r\n\r\n            case 'error':\r\n              this.setIsLoading(false);\r\n              this.dialogRef.close();\r\n              break;\r\n\r\n            case 'success':\r\n              this.dialogRef.close(true);\r\n              break;\r\n          }\r\n        }\r\n      });\r\n    } else if (!!this.hobexTransactionId) {\r\n      if (window['wpwl'] !== undefined && window['wpwl'].unload !== undefined) {\r\n        window['wpwl'].unload();\r\n      }\r\n\r\n      if (window['wpwlOptions'] !== undefined) {\r\n        window['wpwlOptions'].locale = this.lingua;\r\n      } else {\r\n        let context = this;\r\n\r\n        window['wpwlOptions'] = {\r\n          locale: this.lingua,\r\n          paymentTarget: 'hobexIFrame',\r\n          shopperResultTarget: 'hobexIFrame',\r\n          labels: { cvv: \"CVV\" },\r\n          onAfterSubmit: function () {\r\n            context.hobexPaymentSubmitted = true;\r\n          }\r\n        };\r\n      }\r\n\r\n      this.utility.loadExternalScript((this.isTest ? this.HOBEX_JS_URL_TEST : this.HOBEX_JS_URL) + this.hobexTransactionId, null, 'hobex-script').then(() => {\r\n        this.setIsLoading(false);\r\n      });\r\n    } else if (!!this.axeptaTransactionId) {\r\n      let axeptaClient = new AxeptaSDKClient(this.isTest ? this.AXEPTA_URL_TEST : this.AXEPTA_URL, this.axeptaApiKeySmartCheckout);\r\n      axeptaClient.preparePayment(this.axeptaTransactionId);\r\n    }\r\n  }\r\n}","import { Component, Input } from '@angular/core';\r\nimport { MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\r\n\r\n@Component({\r\n  selector: 'app-payment-window-error',\r\n  templateUrl: './payment-window-error.component.html',\r\n  styleUrls: ['./payment-window-error.component.scss']\r\n})\r\nexport class PaymentWindowErrorComponent {\r\n\r\n  @Input() paymentUrl: string;\r\n  //@Input() paymentHtml: string;\r\n  @Input() dialogRef: MatDialogRef<{}, any>;\r\n\r\n  constructor() { }\r\n\r\n  onOpenWindowClick() {\r\n    this.dialogRef.close(window.open(this.paymentUrl));\r\n\r\n    /*let w: Window = null;\r\n\r\n    if (!!this.paymentUrl) {\r\n      w = window.open(this.paymentUrl);\r\n    } else if (!!this.paymentHtml) {\r\n      w = window.open();\r\n      w.document.open();\r\n      w.document.write(this.paymentHtml);\r\n      w.document.close();\r\n    }\r\n\r\n    this.dialogRef.close(w);*/\r\n  }\r\n}","<button mat-icon-button [matDialogClose] class=\"modal-close-button\" [disableRipple]=\"true\">\n    <i class=\"material-icons-round\">clear</i>\n</button>\n\n<div class=\"font-weight-bold\">\n    {{ 'interfaces.pagamento-form.pagamentoBloccato' | translate }}\n</div>\n\n<div class=\"mt-3 text-center\">\n    <button mat-flat-button class=\"button-blue\" (click)=\"onOpenWindowClick()\">{{ 'interfaces.pagamento-form.apriFinestraPagamento' | translate }}</button>\n</div>","<div [hidden]=\"model.modalitaPagamento.paymentId <= 0\">\r\n    <div class=\"pagamento-container border p-3\" [ngClass]=\"{'mat-elevation-z5': elevation}\">\r\n        <div class=\"w-100 text-center\" [ngClass]=\"{'mb-3': !disabled || model.modalitaPagamento.tipo == enumTipoModalitaPagamento.CartaCredito || model.modalitaPagamento.tipo == enumTipoModalitaPagamento.BonificoBancario}\">\r\n            <span class=\"color-light-blue mr-4 align-middle font-weight-bold\">\r\n                {{ 'interfaces.pagamento-form.metodoPagamento' | translate}}\r\n            </span>\r\n\r\n            <mat-form-field class=\"align-middle pagamento-form-modalita-select\">\r\n                <mat-select [panelClass]=\"'booking-select'\" [(ngModel)]=\"model.modalitaPagamento\" (ngModelChange)=\"onModalitaPagamentoChange()\" required [disabled]=\"disabled\" class=\"pagamento-form-select\">\r\n                    <mat-option *ngFor=\"let modalita of modalitaPagamento\" [value]=\"modalita\">\r\n                        {{modalita.nome}}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>\r\n\r\n        <ng-container *ngIf=\"model.modalitaPagamento.tipo != enumTipoModalitaPagamento.CartaCredito && !disabled\">\r\n            <div class=\"mb-3\" *ngIf=\"!!model.modalitaPagamento.note\">\r\n                <app-inner-html [_text]=\"model.modalitaPagamento.note\"></app-inner-html>\r\n            </div>\r\n\r\n            <div class=\"mb-3\" *ngIf=\"showCaparra && model.modalitaPagamento.caparraTotale > 0\">\r\n                <span class=\"d-inline-block align-middle mr-1\">\r\n                    {{'interfaces.pagamento-form.caparra' | translate}}\r\n                </span>\r\n\r\n                <span class=\"font-weight-bold d-inline-block align-middle\">\r\n                    {{model.modalitaPagamento.caparraTotale | eurCurrency : null : valuta}}\r\n                </span>\r\n            </div>\r\n\r\n            <div class=\"mb-3\" *ngIf=\"model.modalitaPagamento.tipo == enumTipoModalitaPagamento.Holipay\">\r\n                <holipay-checkout-widget [attr.checkin]=\"getDate(arrivo)\" [attr.checkout]=\"getDate(partenza)\" [attr.price]=\"getImportoPagamento() | number : '1.2-2' | replace : ',' : ''\" [attr.locale]=\"lingua\"></holipay-checkout-widget>\r\n            </div>\r\n\r\n            <div class=\"mb-3\" *ngIf=\"model.modalitaPagamento.tipo == enumTipoModalitaPagamento.ScalaPay\">\r\n                <scalapay-widget type=\"checkout\" [attr.amount]=\"getImportoPagamento()\" [attr.min]=\"0\" [attr.max]=\"999999\" [attr.locale]=\"lingua\"></scalapay-widget>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <div *ngIf=\"model.modalitaPagamento.tipo == enumTipoModalitaPagamento.CartaCredito\">\r\n            <div class=\"row\">\r\n                <div [ngClass]=\"{'col-12 col-md-8': !disabled, 'col-12': disabled}\">\r\n                    <ng-container *ngIf=\"!disabled\">\r\n                        <div class=\"mb-3\" *ngIf=\"!!model.modalitaPagamento.note\">\r\n                            <app-inner-html [_text]=\"model.modalitaPagamento.note\"></app-inner-html>\r\n                        </div>\r\n\r\n                        <div class=\"mb-3\" *ngIf=\"showCaparra && model.modalitaPagamento.caparraTotale > 0\">\r\n                            <span class=\"d-inline-block align-middle mr-1\">\r\n                                {{'interfaces.pagamento-form.caparra' | translate}}\r\n                            </span>\r\n\r\n                            <span class=\"font-weight-bold d-inline-block align-middle\">\r\n                                {{model.modalitaPagamento.caparraTotale | eurCurrency : null : valuta}}\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div class=\"mt-3 mb-3\" *ngIf=\"immaginiCarteCredito != null && immaginiCarteCredito.length > 0\">\r\n                            <img class=\"carta-credito-image mr-1 ml-1\" [src]=\"immagine\" *ngFor=\"let immagine of immaginiCarteCredito\">\r\n                        </div>\r\n                    </ng-container>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-12 col-sm-6\">\r\n                            <mat-form-field class=\"w-100\">\r\n                                <mat-select [panelClass]=\"'booking-select-unlimited-height'\" [(ngModel)]=\"model.tipoCarta\" (ngModelChange)=\"verifyValidity()\" [placeholder]=\"'interfaces.pagamento-form.tipoCarta' | translate\" required [disabled]=\"disabled\" class=\"pagamento-form-select\">\r\n                                    <mat-option *ngFor=\"let tipoCarta of carteCredito\" [value]=\"tipoCarta\">\r\n                                        {{tipoCarta.nome}}\r\n                                    </mat-option>\r\n                                </mat-select>\r\n                            </mat-form-field>\r\n                        </div>\r\n\r\n                        <div class=\"col-12 col-sm-6\">\r\n                            <mat-form-field class=\"w-100\">\r\n                                <input autocompleteOff #cardNumberInput matInput [(ngModel)]=\"model.numeroCarta\" [placeholder]=\"'interfaces.pagamento-form.numero' | translate\" (ngModelChange)=\"verifyValidity()\" required [readOnly]=\"disabled\" [disabled]=\"disabled\">\r\n                            </mat-form-field>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-12 col-sm-6\">\r\n                            <mat-form-field class=\"w-100\">\r\n                                <input autocompleteOff #securityCodeInput matInput [(ngModel)]=\"model.codiceSicurezza\" [placeholder]=\"'interfaces.pagamento-form.codiceSicurezza' | translate\" (ngModelChange)=\"verifyValidity()\" required [readOnly]=\"disabled\" [disabled]=\"disabled\">\r\n                            </mat-form-field>\r\n                        </div>\r\n\r\n                        <div class=\"col-12 col-sm-6\">\r\n                            <mat-form-field class=\"w-100\">\r\n                                <input autocompleteOff #expirationDateInput matInput [(ngModel)]=\"dataScadenza\" [placeholder]=\"'interfaces.pagamento-form.scadenza' | translate\" (ngModelChange)=\"splitDataScadenza(); verifyValidity();\" required [readOnly]=\"disabled\" [disabled]=\"disabled\">\r\n                            </mat-form-field>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <mat-form-field class=\"w-100\">\r\n                        <input autocompleteOff #nameInput matInput [(ngModel)]=\"model.titolareCarta\" [placeholder]=\"'interfaces.pagamento-form.titolare' | translate\" (ngModelChange)=\"verifyValidity()\" required [readOnly]=\"disabled\" [disabled]=\"disabled\">\r\n                    </mat-form-field>\r\n                </div>\r\n\r\n                <div class=\"col-4 d-none d-md-block\" *ngIf=\"!disabled\">\r\n                    <div class=\"border rounded-lg p-3\">\r\n                        {{'interfaces.pagamento-form.crittografiaCarte' | translate}}\r\n\r\n                        <div class=\"mt-3\">\r\n                            <img class=\"norton-image\" src=\"/assets/images/booking/norton.svg\">\r\n                            <img class=\"pci-image float-right\" src=\"/assets/images/booking/pci.svg\">\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"mb-4 mt-3\">\r\n                        <app-credit-card [nameInput]=\"nameInput\" [cardNumberInput]=\"cardNumberInput\" [expirationDateInput]=\"expirationDateInput\" [securityCodeInput]=\"securityCodeInput\"></app-credit-card>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"model.modalitaPagamento.tipo == enumTipoModalitaPagamento.BonificoBancario\">\r\n            <div class=\"row\" [ngClass]=\"{'mb-3': !isVisualizzaCRO}\">\r\n                <div class=\"col-12 col-sm-6\" *ngIf=\"!!model.modalitaPagamento.banca\">\r\n                    <span class=\"align-middle font-weight-bold\">{{'interfaces.pagamento-form.banca' | translate}}</span>\r\n                    <span class=\"align-middle\">{{model.modalitaPagamento.banca}}</span>\r\n                </div>\r\n\r\n                <div class=\"col-12 col-sm-6\" *ngIf=\"!!model.modalitaPagamento.intestatarioConto\">\r\n                    <span class=\"align-middle font-weight-bold\">{{'interfaces.pagamento-form.intestatario' | translate}}</span>\r\n                    <span class=\"align-middle\">{{model.modalitaPagamento.intestatarioConto}}</span>\r\n                </div>\r\n\r\n                <div class=\"col-12 col-sm-6\" *ngIf=\"!!model.modalitaPagamento.iban\">\r\n                    <span class=\"align-middle font-weight-bold\">{{'interfaces.pagamento-form.iban' | translate}}</span>\r\n                    <span class=\"align-middle\">{{model.modalitaPagamento.iban}}</span>\r\n                </div>\r\n\r\n                <div class=\"col-12 col-sm-6\" *ngIf=\"!!model.modalitaPagamento.swift\">\r\n                    <span class=\"align-middle font-weight-bold\">{{'interfaces.pagamento-form.swift' | translate}}</span>\r\n                    <span class=\"align-middle\">{{model.modalitaPagamento.swift}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row\" *ngIf=\"!disabled && isVisualizzaCRO\">\r\n                <div class=\"col-12 col-sm-8\">\r\n                    <mat-form-field class=\"w-100\">\r\n                        <input autocompleteOff matInput [(ngModel)]=\"model.codiceRiferimentoOperazione\" (ngModelChange)=\"verifyValidity()\" [placeholder]=\"'interfaces.pagamento-form.codiceRiferimentoOperazione' | translate\" [readOnly]=\"disabled\" [disabled]=\"disabled\">\r\n                    </mat-form-field>\r\n                </div>\r\n\r\n                <div class=\"col-4 d-none d-sm-block\" *ngIf=\"!disabled\">\r\n                    <a href=\"#\" class=\"d-inline-block mt-3\" (click)=\"$event.preventDefault(); openCroDialog();\">{{'interfaces.pagamento-form.cosaSignifica' | translate}}</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"pt-2 pb-4\" [hidden]=\"model.modalitaPagamento.tipo != enumTipoModalitaPagamento.Stripe || disabled\">\r\n            <div class=\"stripe-label\">\r\n                {{'interfaces.pagamento-form.numero' | translate}}\r\n            </div>\r\n\r\n            <div id=\"card-number-element\" class=\"border rounded mt-1 p-1\"></div>\r\n\r\n            <div class=\"row mt-2\">\r\n                <div class=\"col-6\">\r\n                    <div class=\"stripe-label\">\r\n                        {{'interfaces.pagamento-form.scadenza' | translate}}\r\n                    </div>\r\n\r\n                    <div id=\"card-expiry-element\" class=\"border rounded mt-1 p-1\"></div>\r\n                </div>\r\n\r\n                <div class=\"col-6\">\r\n                    <div class=\"stripe-label\">\r\n                        {{'interfaces.pagamento-form.codiceSicurezza' | translate}}\r\n                    </div>\r\n\r\n                    <div id=\"card-cvc-element\" class=\"border rounded mt-1 p-1\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"!disabled\">\r\n            <mat-checkbox class=\"pagamento-form-checkbox\" (change)=\"verifyValidity()\" [(ngModel)]=\"model.privacy\" required [disabled]=\"disabled\">\r\n                <a class=\"checkbox privacyLink\" href=\"#\" (click)=\"$event.preventDefault(); openPrivacyDialog();\">{{'interfaces.pagamento-form.privacy' | translate}}</a>\r\n            </mat-checkbox>\r\n        </div>\r\n\r\n        <div *ngIf=\"!disabled\">\r\n            <mat-checkbox class=\"pagamento-form-checkbox\" (change)=\"verifyValidity()\" [(ngModel)]=\"contrattoAccettatto\" required [disabled]=\"disabled\" *ngIf=\"isAccettaContrattoPrenotazioneStep2\">\r\n                <span class=\"checkbox\" *ngIf=\"!condizioniContratto\">{{'interfaces.pagamento-form.accettoLeCondizioniDiContratto' | translate}}</span>\r\n                <a class=\"checkbox condizioniContrattoLink\" href=\"#\" (click)=\"$event.preventDefault(); openCondizioniContrattoDialog();\" *ngIf=\"!!condizioniContratto\">{{'interfaces.pagamento-form.accettoLeCondizioniDiContratto' | translate}}</a>\r\n            </mat-checkbox>\r\n        </div>\r\n\r\n        <div *ngIf=\"!disabled\">\r\n            <mat-checkbox class=\"pagamento-form-checkbox\" (change)=\"verifyValidity()\" [(ngModel)]=\"model.newsletter\" [disabled]=\"disabled\">\r\n                <span class=\"checkbox\" *ngIf=\"newsLetterPortale == null || (!newsLetterPortale.html && !newsLetterPortale.url)\">{{'interfaces.pagamento-form.trattamentoDatiPersonali' | translate}}</span>\r\n                <a class=\"checkbox newsletterLink\" href=\"#\" (click)=\"$event.preventDefault(); openNewsletterDialog();\" *ngIf=\"newsLetterPortale != null && (!!newsLetterPortale.html || !!newsLetterPortale.url)\">{{'interfaces.pagamento-form.trattamentoDatiPersonali' | translate}}</a>\r\n            </mat-checkbox>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"mt-4 d-table mx-auto\" *ngIf=\"recaptchaAttiva && !disabled\">\r\n        <!--6LcK9QQTAAAAAJ1AgZp2iSkGtLUwIpINyh5v2eLe-->\r\n        <re-captcha (resolved)=\"recaptchaResolved = true; verifyValidity();\" [siteKey]=\"'6LcsQ90ZAAAAAD6motJOcWzKpaG4R33OtsR7jVn1'\"></re-captcha>\r\n    </div>\r\n\r\n    <div class=\"w-100 text-center mt-4\" *ngIf=\"!disabled\">\r\n        <button mat-flat-button class=\"button-blue paga-button\" [ngClass]=\"{'w-100': fullWidthButton}\" (click)=\"pay()\" [disabled]=\"!paymentFormValid || !formValid\" *ngIf=\"model.modalitaPagamento.tipo != enumTipoModalitaPagamento.PayPal\">\r\n            <span class=\"material-icons align-middle mr-1 icon-small\">check</span>\r\n            <span class=\"align-middle\">{{ !!model.modalitaPagamento.testoBottonePaga ? model.modalitaPagamento.testoBottonePaga : ('interfaces.pagamento-form.paga' | translate)}}</span>\r\n        </button>\r\n    </div>\r\n\r\n    <div class=\"text-center\" [hidden]=\"disabled || model.modalitaPagamento.tipo != enumTipoModalitaPagamento.PayPal\">\r\n        <ngx-paypal [config]=\"payPalConfig\"></ngx-paypal>\r\n    </div>\r\n</div>","import { Component, EventEmitter, HostListener, Input, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport { MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\r\nimport * as moment from 'moment';\r\nimport {\r\n  ICancelCallbackData,\r\n  IInitCallbackData,\r\n  IOnApproveCallbackData,\r\n  IOnClickCallbackActions,\r\n  IOnInitCallbackActions,\r\n  IPayPalConfig,\r\n} from 'ngx-paypal';\r\nimport { Subscription } from 'rxjs';\r\nimport { LocalStorageService } from 'src/app/core/local-storage.service';\r\nimport { BaseComponent } from 'src/app/interfaces/base-component/base-component';\r\nimport { Albergo, Cliente, TipoCartaCreditoXAlbergo, Transazione } from 'src/app/shared/models/bo.model';\r\nimport {\r\n  DialogOptions,\r\n  GetModalitaPagamentoDefaultRQ,\r\n  GetPagamentoFormViewRQ,\r\n  GetPrivacyPortaleRQ,\r\n  LinguaPortaleAlbergo,\r\n  MyPageExtra,\r\n  MyPagePropostaRS,\r\n  NewsLetterPortale,\r\n  PaymentMethod,\r\n  PaymentModel,\r\n  PaymentRQ,\r\n  PaymentRS,\r\n  PrenotazioneDetailsRoom,\r\n  PrivacyPortale,\r\n  ScriptParameter,\r\n  VerificaCartaCreditoRQ,\r\n  VerificaCartaCreditoRS,\r\n  WebApiResponse,\r\n  WebApiResponseUpdate,\r\n} from 'src/app/shared/models/dto';\r\nimport {\r\n  StatoEsecuzioneTransazione,\r\n  TipoCartaCredito,\r\n  TipoContabilizzazione,\r\n  TipoModalitaPagamento,\r\n  TipoPrenotazioneXPay,\r\n} from 'src/app/shared/models/enum';\r\nimport { ApiService } from 'src/app/shared/services/api.service';\r\nimport { ContainerService } from 'src/app/shared/services/container.service';\r\nimport { UtilityService } from 'src/app/shared/services/utility.service';\r\nimport { environment } from 'src/environments/environment';\r\n\r\nimport { PagamentoFormDialogComponent } from './pagamento-form-dialog/pagamento-form-dialog.component';\r\nimport { PaymentWindowErrorComponent } from './payment-window-error/payment-window-error.component';\r\n\r\ndeclare let SatispayWebButton;\r\ndeclare let RealexHpp;\r\ndeclare let Stripe;\r\ndeclare let holipay;\r\n\r\n@Component({\r\n  selector: 'app-pagamento-form',\r\n  templateUrl: './pagamento-form.component.html',\r\n  styleUrls: ['./pagamento-form.component.scss']\r\n})\r\nexport class PagamentoFormComponent extends BaseComponent implements OnInit, OnDestroy {\r\n\r\n  //DA TOGLIERE\r\n  public testEnvironment: string = 'localhost';\r\n  public enumTipoModalitaPagamento = TipoModalitaPagamento;\r\n  public model: PaymentModel = new PaymentModel();\r\n  public carteCredito: TipoCartaCreditoXAlbergo[];\r\n  public dialog: MatDialogRef<{}, any>;\r\n  public window: Window;\r\n  public url: string;\r\n  public paymentFormValid: boolean;\r\n  public formValid: boolean;\r\n  public modalitaPagamento: PaymentMethod[] = [];\r\n  public oidAlbergo: number;\r\n  public oidPortale: number;\r\n  public lingua: string;\r\n  public gettingModalitaPagamentoDefault: boolean = false;\r\n  public gettingModalitaPagamentoDefault1: boolean = false;\r\n  public modalitaPagamentoSet: boolean = false;\r\n  public dataScadenza: string;\r\n  public immaginiCarteCredito: string[] = [];\r\n  public totale: number;\r\n  public interval: NodeJS.Timeout;\r\n  public pagamentoSuccessUrl: string = 'https://booking.' + (environment.environmentName == 'waf' ? 'passstage' : 'passepartout') + '.cloud/booking/pagamentoSuccess?oidTransazione=';\r\n  public pagamentoErrorUrl: string = 'https://booking.' + (environment.environmentName == 'waf' ? 'passstage' : 'passepartout') + '.cloud/booking/pagamentoError?oidTransazione=';\r\n  public caparra: number;\r\n  public isCaparraPercentuale: boolean;\r\n  public stripe;\r\n  public cardNumberElement;\r\n  public stripeCardNumberValid: boolean = false;\r\n  public stripeExpirationValid: boolean = false;\r\n  public stripeCvcValid: boolean = false;\r\n  public camere: (PrenotazioneDetailsRoom | MyPagePropostaRS)[];\r\n  public newsLetterPortale: NewsLetterPortale;\r\n\r\n  public immaginiTipiCarteCredito: Map<TipoCartaCredito, string> = new Map([\r\n    [TipoCartaCredito.Visa, '/assets/images/booking/credit-card/visa.svg'],\r\n    [TipoCartaCredito.AmericanExpress, '/assets/images/booking/credit-card/american-express.svg'],\r\n    [TipoCartaCredito.MasterCard, '/assets/images/booking/credit-card/mastercard.svg'],\r\n    [TipoCartaCredito.DiscoveryCard, '/assets/images/booking/credit-card/discover.svg'],\r\n    [TipoCartaCredito.DinersClub, '/assets/images/booking/credit-card/diners.svg'],\r\n    [TipoCartaCredito.JCB, '/assets/images/booking/credit-card/jcb.svg'],\r\n    [TipoCartaCredito.EuroCard, ''],\r\n    [TipoCartaCredito.BankCard, ''],\r\n    [TipoCartaCredito.CarteBlanche, ''],\r\n    [TipoCartaCredito.CarteBleu, ''],\r\n    [TipoCartaCredito.UniversalAir, ''],\r\n    [TipoCartaCredito.Maestro, '/assets/images/booking/credit-card/maestro.svg'],\r\n    [TipoCartaCredito.EnRoute, ''],\r\n    [TipoCartaCredito.AccessCard, ''],\r\n    [TipoCartaCredito.BankAmeriCard, ''],\r\n    [TipoCartaCredito.ChinaUnionPay, '/assets/images/booking/credit-card/unionpay.svg'],\r\n    [TipoCartaCredito.Dankort, ''],\r\n    [TipoCartaCredito.DinersClub_USACanada, ''],\r\n    [TipoCartaCredito.InstaPayment, ''],\r\n    [TipoCartaCredito.Laser, ''],\r\n    [TipoCartaCredito.VisaElectron, ''],\r\n    [TipoCartaCredito.Sconosciuto, '']\r\n  ]);\r\n\r\n  public paymentSuccess: boolean = false;\r\n\r\n  @Input() set _totale(value: number) {\r\n    this.totale = value;\r\n    this.calculateCaparra();\r\n  };\r\n\r\n  @Input() set _isAccettaContrattoPrenotazioneStep2(value: boolean) {\r\n    if (value != null) {\r\n      this.isAccettaContrattoPrenotazioneStep2 = value;\r\n      this.contrattoAccettatto = !value;\r\n    }\r\n  };\r\n\r\n  @Input() isVerificaCartaCredito: boolean;\r\n  @Input() isVisualizzaCRO: boolean;\r\n  @Input() condizioniContratto: string;\r\n  @Input() descrizione: string = 'Prenotazione';\r\n  @Input() disabled: boolean;\r\n  @Input() elevation: boolean = true;\r\n\r\n  @Input() set _recaptchaAttiva(value: boolean) {\r\n    if (value != null) {\r\n      this.recaptchaAttiva = value;\r\n      this.recaptchaResolved = !value;\r\n    }\r\n  };\r\n\r\n  @Input() set linguaPortaleAlbergo(value: LinguaPortaleAlbergo) {\r\n    if (value != null && !!value.oidAlbergo && !!value.lingua) {\r\n      this.oidAlbergo = value.oidAlbergo;\r\n      this.oidPortale = value.oidPortale;\r\n      this.lingua = value.lingua;\r\n\r\n      let rq = new GetPagamentoFormViewRQ();\r\n      rq.oidAlbergo = this.oidAlbergo;\r\n      rq.oidPortale = this.oidPortale;\r\n      rq.lingua = this.lingua;\r\n\r\n      this.apiService.getPagamentoFormView(rq).subscribe((res) => {\r\n        this.carteCredito = res.data.tipiCarteCredito;\r\n\r\n        this.immaginiCarteCredito = [];\r\n\r\n        if (this.carteCredito != null && this.carteCredito.length > 0) {\r\n          this.model.tipoCarta = this.carteCredito[0];\r\n\r\n          for (let carta of this.carteCredito) {\r\n            if (carta.tipoCartaCredito != null) {\r\n              let immagine = this.immaginiTipiCarteCredito.get(carta.tipoCartaCredito);\r\n\r\n              if (!!immagine && !this.immaginiCarteCredito.includes(immagine)) {\r\n                this.immaginiCarteCredito.push(immagine);\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        this.newsLetterPortale = res.data.newsLetterPortale;\r\n      });\r\n\r\n      if (this.modalitaPagamento == null || this.modalitaPagamento.length == 0) {\r\n        this.gettingModalitaPagamentoDefault = true;\r\n\r\n        let rq = new GetModalitaPagamentoDefaultRQ();\r\n        rq.oidAlbergo = this.oidAlbergo;\r\n        rq.lingua = this.lingua;\r\n\r\n        this.apiService.getModalitaPagamentoDefault(rq).subscribe((res: WebApiResponse) => {\r\n          if (!this.modalitaPagamentoSet) {\r\n            if (res.data != null) {\r\n              this.modalitaPagamento = [res.data];\r\n              this.model.modalitaPagamento = res.data;\r\n              this.calculateCaparra();\r\n            } else {\r\n              this.modalitaPagamento = [];\r\n              this.model.modalitaPagamento = new PaymentMethod(-1);\r\n              this.noPaymentMethod.emit();\r\n            }\r\n          } else {\r\n            if (!this.gettingModalitaPagamentoDefault1) {\r\n              this.modalitaPagamentoSet = false;\r\n            }\r\n          }\r\n\r\n          this.gettingModalitaPagamentoDefault = false;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  @Input() set _modalitaPagamento(value: PaymentMethod[]) {\r\n    if (value != null) {\r\n      this.modalitaPagamento = value;\r\n\r\n      if (this.modalitaPagamento.length > 0) {\r\n        if (this.gettingModalitaPagamentoDefault || this.gettingModalitaPagamentoDefault1) {\r\n          this.modalitaPagamentoSet = true;\r\n        }\r\n\r\n        if (this.model.modalitaPagamento == null || this.model.modalitaPagamento.paymentId <= 0) {\r\n          this.model.modalitaPagamento = this.modalitaPagamento[0];\r\n        } else {\r\n          let modalita = this.modalitaPagamento.find(x => x.paymentId == this.model.modalitaPagamento.paymentId);\r\n\r\n          if (modalita == null) {\r\n            this.model.modalitaPagamento = this.modalitaPagamento[0];\r\n          } else {\r\n            this.model.modalitaPagamento = modalita;\r\n          }\r\n        }\r\n\r\n        this.calculateCaparra();\r\n      } else if (this.oidAlbergo > 0 && !!this.lingua) {\r\n        this.gettingModalitaPagamentoDefault1 = true;\r\n\r\n        let rq = new GetModalitaPagamentoDefaultRQ();\r\n        rq.oidAlbergo = this.oidAlbergo;\r\n        rq.lingua = this.lingua;\r\n\r\n        this.apiService.getModalitaPagamentoDefault(rq).subscribe((res: WebApiResponse) => {\r\n          if (!this.modalitaPagamentoSet) {\r\n            if (res.data != null) {\r\n              this.modalitaPagamento = [res.data];\r\n              this.model.modalitaPagamento = res.data;\r\n              this.calculateCaparra();\r\n            } else {\r\n              this.modalitaPagamento = [];\r\n              this.model.modalitaPagamento = new PaymentMethod(-1);\r\n              this.noPaymentMethod.emit();\r\n            }\r\n          } else {\r\n            if (!this.gettingModalitaPagamentoDefault) {\r\n              this.modalitaPagamentoSet = false;\r\n            }\r\n          }\r\n\r\n          this.gettingModalitaPagamentoDefault1 = false;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  @Input() cliente: Cliente;\r\n  @Input() errorMessage: string;\r\n\r\n  @Input() set _formValid(value: boolean) {\r\n    this.formValid = value;\r\n    this.checkPaypalButtonEnabled();\r\n  };\r\n\r\n  @Input() arrivo: string;\r\n  @Input() partenza: string;\r\n\r\n  @Input() set _camere(value: (PrenotazioneDetailsRoom | MyPagePropostaRS)[]) {\r\n    //DA CONTROLLARE (METTERE CHANGEDETECTION ONPUSH)\r\n    if (value != null && (this.camere == null || JSON.stringify(value) != JSON.stringify(this.camere))) {\r\n      this.camere = value;\r\n      this.calculateCaparra();\r\n    }\r\n  };\r\n\r\n  @Input() extras: MyPageExtra[][];\r\n\r\n  @Input() set allModalitaPagamento(value: PaymentMethod[]) {\r\n    if (value != null) {\r\n      setTimeout(() => {\r\n        let paypal = value.find(x => x.tipo == TipoModalitaPagamento.PayPal);\r\n\r\n        if (paypal != null) {\r\n          this.initPaypalConfig(paypal.paypalClientId);\r\n        }\r\n\r\n        let stripe = value.find(x => x.tipo == TipoModalitaPagamento.Stripe);\r\n\r\n        if (stripe != null) {\r\n          if (document.getElementById('card-number-element') != null) {\r\n            this.utilityService.loadExternalScript(this.STRIPE_JS_URL).then(() => {\r\n              this.stripe = Stripe(stripe.stripePublicKey);\r\n\r\n              let elements = this.stripe.elements();\r\n\r\n              this.cardNumberElement = elements.create('cardNumber', {\r\n                placeholder: ''\r\n              });\r\n\r\n              this.cardNumberElement.mount('#card-number-element');\r\n\r\n              this.cardNumberElement.on('change', (event) => {\r\n                if (event.complete) {\r\n                  this.stripeCardNumberValid = true;\r\n                } else if (event.error) {\r\n                  this.stripeCardNumberValid = false;\r\n                }\r\n\r\n                this.verifyValidity();\r\n              });\r\n\r\n              let cardExpiryElement = elements.create('cardExpiry');\r\n\r\n              cardExpiryElement.mount('#card-expiry-element');\r\n\r\n              cardExpiryElement.on('change', (event) => {\r\n                if (event.complete) {\r\n                  this.stripeExpirationValid = true;\r\n                } else if (event.error) {\r\n                  this.stripeExpirationValid = false;\r\n                }\r\n\r\n                this.verifyValidity();\r\n              });\r\n\r\n              let cardCvcElement = elements.create('cardCvc', {\r\n                placeholder: ''\r\n              });\r\n\r\n              cardCvcElement.mount('#card-cvc-element');\r\n\r\n              cardCvcElement.on('change', (event) => {\r\n                if (event.complete) {\r\n                  this.stripeCvcValid = true;\r\n                } else if (event.error) {\r\n                  this.stripeCvcValid = false;\r\n                }\r\n\r\n                this.verifyValidity();\r\n              });\r\n            });\r\n          }\r\n        }\r\n\r\n        let satispay = value.find(x => x.tipo == TipoModalitaPagamento.Satispay);\r\n\r\n        //Passo data-payment-id='test' solamente per nascondere l'errore 'Missing payment details' dalla console\r\n        if (satispay != null) {\r\n          this.utilityService.loadExternalScript(satispay.isTest ? this.SATISPAY_BUTTON_URL_TEST : this.SATISPAY_BUTTON_URL, [{ name: 'data-payment-id', value: 'test' }]);\r\n        }\r\n\r\n        let sumup = value.find(x => x.tipo == TipoModalitaPagamento.SumUp);\r\n\r\n        if (sumup != null) {\r\n          this.utilityService.loadExternalScript(this.SUMUP_WIDGET_URL);\r\n        }\r\n\r\n        let addon = value.find(x => x.tipo == TipoModalitaPagamento.AddonPayments);\r\n\r\n        if (addon != null) {\r\n          this.utilityService.loadExternalScript(this.ADDON_PAYMENTS_LIGHTBOX_URL);\r\n        }\r\n\r\n        let axepta = value.find(x => x.tipo == TipoModalitaPagamento.Axepta);\r\n\r\n        if (axepta != null) {\r\n          this.utilityService.loadExternalScript(axepta.isTest ? this.AXEPTA_JS_URL_TEST : this.AXEPTA_JS_URL);\r\n        }\r\n\r\n        let holipay = value.find(x => x.tipo == TipoModalitaPagamento.Holipay);\r\n\r\n        if (holipay != null) {\r\n          this.utilityService.loadExternalScript(this.HOLIPAY_WIDGET_URL + holipay.holipayHotelId);\r\n        }\r\n\r\n        let scalaPay = value.find(x => x.tipo == TipoModalitaPagamento.ScalaPay);\r\n\r\n        if (scalaPay != null) {\r\n          this.utilityService.loadExternalScript(this.SCALAPAY_ESM_WIDGET_URL, [new ScriptParameter('type', 'module')]);\r\n          this.utilityService.loadExternalScript(this.SCALAPAY_WIDGET_URL, [new ScriptParameter('nomodule')]);\r\n        }\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  @Input() showCaparra: boolean = true;\r\n\r\n  @Input() set _caparra(value: number) {\r\n    this.caparra = value;\r\n    this.calculateCaparra();\r\n  };\r\n\r\n  @Input() set _isCaparraPercentuale(value: boolean) {\r\n    this.isCaparraPercentuale = value;\r\n    this.calculateCaparra();\r\n  };\r\n\r\n  @Input() fullWidthButton: boolean = false;\r\n\r\n  @Input() note: string;\r\n  @Input() oidCodicePromozione: number;\r\n  @Input() oidMotivoViaggio: number;\r\n\r\n  @Input() valuta: string;\r\n\r\n  @Input() bookingSolutionUid: string;\r\n\r\n  @Input() set privacy(value: boolean) {\r\n    if (value != null) {\r\n      this.model.privacy = value;\r\n      this.verifyValidity();\r\n    }\r\n  };\r\n\r\n  @Input() set newsletter(value: boolean) {\r\n    if (value != null) {\r\n      this.model.newsletter = value;\r\n    }\r\n  };\r\n\r\n  @Output() createOrder: EventEmitter<PaymentModel> = new EventEmitter();\r\n  @Output() noPaymentMethod: EventEmitter<any> = new EventEmitter();\r\n  @Output() onPaymentError: EventEmitter<string> = new EventEmitter();\r\n  @Output() onCaparraChange: EventEmitter<number> = new EventEmitter();\r\n\r\n  public payPalConfig: IPayPalConfig;\r\n  public paypalButton: IOnInitCallbackActions;\r\n\r\n  public paypalTransactionId: string;\r\n  public paypalToken: string;\r\n\r\n  public satispayPaymentId: string;\r\n  public satispayCompleted: boolean = false;\r\n\r\n  public sumupTransactionId: string;\r\n  public sumupToken: string;\r\n\r\n  public recaptchaAttiva: boolean = false;\r\n  public recaptchaResolved: boolean = true;\r\n\r\n  public isAccettaContrattoPrenotazioneStep2: boolean = false;\r\n  public contrattoAccettatto: boolean = true;\r\n\r\n  public axeptaPaymentResultReceived: boolean = false;\r\n\r\n  public windowUrl: string;\r\n  //public windowHtml: string;\r\n  public popupSuccess: boolean = false;\r\n\r\n  public localStorageSub: Subscription;\r\n\r\n  public paymentError: string;\r\n\r\n  public readonly ADDONPAYMENTS_API_URL = 'https://hpp.addonpayments.com/pay';\r\n  public readonly ADDONPAYMENTS_API_URL_TEST = 'https://hpp.sandbox.addonpayments.com/pay';\r\n\r\n  public readonly ADDON_PAYMENTS_LIGHTBOX_URL = '/assets/js/booking/rxp-hpp.js';\r\n\r\n  public readonly SATISPAY_BUTTON_URL = 'https://online.satispay.com/web-button.js';\r\n  public readonly SATISPAY_BUTTON_URL_TEST = 'https://staging.online.satispay.com/web-button.js';\r\n\r\n  public readonly SUMUP_WIDGET_URL = 'https://gateway.sumup.com/gateway/ecom/card/v2/sdk.js';\r\n\r\n  public readonly STRIPE_JS_URL = 'https://js.stripe.com/v3/';\r\n\r\n  public readonly AXEPTA_JS_URL = 'https://pay.axepta.it/sdk/axepta-pg-sdk.js';\r\n  public readonly AXEPTA_JS_URL_TEST = 'https://pay-sandbox.axepta.it/sdk/axepta-pg-sdk.js';\r\n\r\n  public readonly HOLIPAY_WIDGET_URL = 'https://api.holipay.com/holipay.js?hotel_id=';\r\n\r\n  public readonly SCALAPAY_WIDGET_URL = 'https://cdn.scalapay.com/widget/v3/js/scalapay-widget.js';\r\n  public readonly SCALAPAY_ESM_WIDGET_URL = 'https://cdn.scalapay.com/widget/v3/js/scalapay-widget.esm.js';\r\n\r\n  //DA CONTROLLARE (LA FINESTRA DI PAGAMENTO VIENE CHIUSA ANCHE CLICCANDO SU 'RIMANI')\r\n  @HostListener('window:beforeunload', ['$event'])\r\n  beforeUnloadHandler(event) {\r\n    if (this.window != null) {\r\n      this.window.close();\r\n    }\r\n  }\r\n\r\n  constructor(protected apiService: ApiService,\r\n    protected containerService: ContainerService,\r\n    protected utilityService: UtilityService,\r\n    protected localStorage: LocalStorageService) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    window.addEventListener('message', (event) => {\r\n      if ((event.origin == 'https://staging.online.satispay.com' || event.origin == 'https://online.satispay.com') && event.data != null && event.data.type == 'webButtonEvent') {\r\n        if (event.data.action == 'close') {\r\n          setTimeout(() => {\r\n            if (!this.satispayCompleted) {\r\n              if (!!this.satispayPaymentId) {\r\n                this.cancelSatispayOrder(false).then(() => { }, () => { });\r\n              }\r\n            } else {\r\n              this.satispayCompleted = false;\r\n            }\r\n          }, 500);\r\n        }\r\n      } else if ((event.data == 'axepta_SUCCESS_message' || event.data == 'axepta_FAILURE_message' || event.data == 'Axepta3dsClosed') && !this.axeptaPaymentResultReceived) {\r\n        this.checkAxeptaMessage(event);\r\n      }\r\n    }, false);\r\n\r\n    this.localStorageSub = this.localStorage.observe('popupCheckSuccess').subscribe(() => {\r\n      if (this.window != null) {\r\n        this.popupSuccess = true;\r\n        this.openPaymentWindow(true);\r\n      }\r\n    });\r\n\r\n    if (!!this.testEnvironment && this.isLocalhost) {\r\n      if (this.testEnvironment == 'localhost') {\r\n        this.pagamentoSuccessUrl = window.location.origin + '/booking/pagamentoSuccess?oidTransazione=';\r\n        this.pagamentoErrorUrl = window.location.origin + '/booking/pagamentoError?oidTransazione=';\r\n      } else if (this.testEnvironment == 'waf') {\r\n        this.pagamentoSuccessUrl = 'https://booking.passstage.cloud/booking/pagamentoSuccess?oidTransazione=';\r\n        this.pagamentoErrorUrl = 'https://booking.passstage.cloud/booking/pagamentoError?oidTransazione=';\r\n      }\r\n    }\r\n  }\r\n\r\n  checkAxeptaMessage(event: MessageEvent<any>) {\r\n    this.axeptaPaymentResultReceived = true;\r\n\r\n    if (event.data == 'axepta_SUCCESS_message') {\r\n      setTimeout(() => {\r\n        this.dialog.close();\r\n        this.createOrder.emit(this.model);\r\n      }, 2000);\r\n    } else if (event.data == 'axepta_FAILURE_message') {\r\n      setTimeout(() => {\r\n        this.dialog.close();\r\n        this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n        this.onPaymentError.emit('');\r\n      }, 2000);\r\n    } else if (event.data == 'Axepta3dsClosed') {\r\n      this.dialog.close();\r\n      this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n      this.onPaymentError.emit('');\r\n    }\r\n  }\r\n\r\n  initPaypalConfig(clientId: string) {\r\n    this.payPalConfig = {\r\n      clientId: clientId,\r\n      currency: 'EUR',\r\n      style: {\r\n        label: 'pay',\r\n        shape: 'pill',\r\n        color: 'gold',\r\n        layout: 'horizontal',\r\n        tagline: false\r\n      },\r\n      createOrderOnServer: (data: any) => this.createPaypalOrder(),\r\n      authorizeOnServer: (data: IOnApproveCallbackData, actions: any) =>\r\n        this.capturePaypalOrder().then((res: PaymentRS) => {\r\n          this.createOrder.emit(this.model);\r\n        }, (error: string) => {\r\n          this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n          this.onPaymentError.emit(error);\r\n        }),\r\n      onApprove: (data: IOnApproveCallbackData, actions: any) => { },\r\n      onCancel: (data: ICancelCallbackData, actions: any) => { },\r\n      onError: (err: any) => { },\r\n      onClick: (data: any, actions: IOnClickCallbackActions) => {\r\n        if ((!this.formValid && !!this.errorMessage) || !this.paymentFormValid) {\r\n          if (!this.formValid && !!this.errorMessage) {\r\n            this.showError(this.errorMessage);\r\n          } else {\r\n            if (this.recaptchaResolved) {\r\n              this.showError('globals.messages.inserireDati');\r\n            } else {\r\n              this.showError('interfaces.pagamento-form.risolvereReCaptcha');\r\n            }\r\n          }\r\n        } else {\r\n          if (this.getImportoPagamento() <= 0) {\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n          }\r\n        }\r\n      },\r\n      onInit: (data: IInitCallbackData, actions: IOnInitCallbackActions) => {\r\n        this.paypalButton = actions;\r\n      }\r\n    };\r\n  }\r\n\r\n  reset() {\r\n    this.model.codiceRiferimentoOperazione = null;\r\n\r\n    if (this.carteCredito != null && this.carteCredito.length > 0) {\r\n      this.model.tipoCarta = this.carteCredito[0];\r\n    }\r\n\r\n    this.model.numeroCarta = null;\r\n    this.model.codiceSicurezza = null;\r\n    this.model.scadenzaCartaMese = null;\r\n    this.model.scadenzaCartaAnno = null;\r\n    this.model.titolareCarta = null;\r\n\r\n    this.verifyValidity();\r\n  }\r\n\r\n  verifyValidity() {\r\n    if (this.model.privacy && this.recaptchaResolved && this.contrattoAccettatto) {\r\n      if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.CartaCredito) {\r\n        if (!!this.model.titolareCarta && !!this.model.numeroCarta && !!this.model.codiceSicurezza && !!this.model.scadenzaCartaMese && !!this.model.scadenzaCartaAnno && this.model.tipoCarta != null) {\r\n          this.paymentFormValid = true;\r\n        } else {\r\n          this.paymentFormValid = false;\r\n        }\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.Stripe) {\r\n        this.paymentFormValid = this.stripeCardNumberValid && this.stripeExpirationValid && this.stripeCvcValid;\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.BonificoBancario) {\r\n        this.paymentFormValid = !this.isVisualizzaCRO || !!this.model.codiceRiferimentoOperazione;\r\n      } else {\r\n        this.paymentFormValid = true;\r\n      }\r\n    } else {\r\n      this.paymentFormValid = false;\r\n    }\r\n\r\n    this.checkPaypalButtonEnabled();\r\n  }\r\n\r\n  openPrivacyDialog() {\r\n    this.setIsLoading(true);\r\n\r\n    let rq = new GetPrivacyPortaleRQ();\r\n    rq.oidPortale = this.oidPortale;\r\n    rq.lingua = this.lingua;\r\n\r\n    this.apiService.getPrivacyPortale(rq).subscribe(rs => {\r\n      this.setIsLoading(false);\r\n      this.openPrivacyNewsletterDialog(rs.data);\r\n    });\r\n  }\r\n\r\n  openNewsletterDialog() {\r\n    this.openPrivacyNewsletterDialog(this.newsLetterPortale);\r\n  }\r\n\r\n  openPrivacyNewsletterDialog(privacyNewsletterPortale: PrivacyPortale | NewsLetterPortale) {\r\n    if (!!privacyNewsletterPortale.html) {\r\n      this.openDialog(true, null, privacyNewsletterPortale.html);\r\n    } else if (!!privacyNewsletterPortale.url) {\r\n      this.utilityService.openUrlInNewTab(privacyNewsletterPortale.url);\r\n    }\r\n  }\r\n\r\n  openCondizioniContrattoDialog() {\r\n    this.openDialog(true, null, this.condizioniContratto);\r\n  }\r\n\r\n  openCroDialog() {\r\n    this.openDialog(false, 'interfaces.pagamento-form.croTitle', 'interfaces.pagamento-form.croText');\r\n  }\r\n\r\n  openDialog(html: boolean, title: string, text: string) {\r\n    let dialogOptions = new DialogOptions();\r\n\r\n    if (this.containerService.dimension.width >= 992) {\r\n      dialogOptions.width = \"50vw\";\r\n    } else {\r\n      dialogOptions.width = \"80vw\";\r\n    }\r\n\r\n    let ref = this.showModalDialog(PagamentoFormDialogComponent, dialogOptions);\r\n    let component = <PagamentoFormDialogComponent>ref.componentInstance;\r\n\r\n    component.html = html;\r\n    component.title = title;\r\n    component.text = text;\r\n  }\r\n\r\n  pay() {\r\n    if (this.getImportoPagamento() > 0) {\r\n      if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.BancaSella) {\r\n        this.createTransaction().then(() => {\r\n          this.encryptGestPayOrder().then((rs: PaymentRS) => {\r\n            this.setTransactionId(rs.transaction_id).then(() => {\r\n              this.openWindow(rs.redirect_url);\r\n            });\r\n          }, (error: string) => {\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit(error);\r\n            this.deleteTransaction();\r\n            this.setIsLoading(false);\r\n          });\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.XPay) {\r\n        if (!!this.arrivo && !!this.partenza) {\r\n          this.createTransaction().then(() => {\r\n            this.createXPayReservation().then((rs: PaymentRS) => {\r\n              this.openWindow(null, rs.form);\r\n            }, (error: string) => {\r\n              this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n              this.onPaymentError.emit(error);\r\n              this.deleteTransaction();\r\n            });\r\n          });\r\n        } else {\r\n          this.createTransaction().then(() => {\r\n            this.createXPayOrder().then((rs: PaymentRS) => {\r\n              this.openWindow(null, rs.form);\r\n            }, (error: string) => {\r\n              this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n              this.onPaymentError.emit(error);\r\n              this.deleteTransaction();\r\n            });\r\n          });\r\n        }\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.Satispay) {\r\n        this.createSatispayOrder().then((rs: PaymentRS) => {\r\n          this.satispayPaymentId = rs.transaction_id;\r\n\r\n          let satispay = SatispayWebButton.configure({\r\n            paymentId: rs.transaction_id,\r\n            completed: () => {\r\n              this.satispayCompleted = true;\r\n\r\n              this.verifySatispayOrder().then((verifyRS: PaymentRS) => {\r\n                if (verifyRS.payment_status == 'KO') {\r\n                  this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n                  this.onPaymentError.emit(verifyRS.payment_status);\r\n                  this.setIsLoading(false);\r\n                } else if (verifyRS.payment_status == 'OK') {\r\n                  this.createOrder.emit(this.model);\r\n                }\r\n              }, (error: string) => {\r\n                this.cancelSatispayOrder().then(() => {\r\n                  this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n                  this.onPaymentError.emit(error);\r\n                }, (err: string) => {\r\n                  this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n                  this.onPaymentError.emit(err);\r\n                });\r\n              });\r\n            }\r\n          });\r\n\r\n          satispay.open();\r\n        }, (error: string) => {\r\n          this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n          this.onPaymentError.emit(error);\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.Stripe) {\r\n        this.setIsLoading(true);\r\n\r\n        this.stripe.createPaymentMethod({\r\n          type: 'card',\r\n          card: this.cardNumberElement\r\n        }).then((result) => {\r\n          if (result.paymentMethod != null) {\r\n            if (this.model.modalitaPagamento.isUsePost) {\r\n              this.createTransaction().then(() => {\r\n                this.checkPayment();\r\n                this.stripePayment(result.paymentMethod.id);\r\n              });\r\n            } else {\r\n              this.stripePayment(result.paymentMethod.id).then((confirmRs: any) => {\r\n                if (confirmRs.error != null) {\r\n                  if (!!confirmRs.error.message) {\r\n                    this.showError(confirmRs.error.message);\r\n                  } else {\r\n                    this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n                  }\r\n\r\n                  this.onPaymentError.emit(confirmRs.error);\r\n                  this.setIsLoading(false);\r\n                } else if (confirmRs.paymentIntent != null) {\r\n                  this.createOrder.emit(this.model);\r\n                }\r\n              }, () => { });\r\n            }\r\n          } else if (result.error != null) {\r\n            if (!!result.error.message) {\r\n              this.showError(result.error.message);\r\n            } else {\r\n              this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            }\r\n\r\n            this.onPaymentError.emit(result.error.message);\r\n            this.setIsLoading(false);\r\n          }\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.PayWay) {\r\n        this.createTransaction().then(() => {\r\n          this.createPayWayOrder().then((rs: PaymentRS) => {\r\n            this.setTransactionId(rs.transaction_id).then(() => {\r\n              this.openWindow(rs.redirect_url);\r\n            });\r\n          }, (error: string) => {\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit(error);\r\n            this.deleteTransaction();\r\n            this.setIsLoading(false);\r\n          });\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.Unicredit) {\r\n        this.createTransaction().then(() => {\r\n          this.createUnicreditOrder().then((rs: PaymentRS) => {\r\n            this.setTransactionId(rs.transaction_id).then(() => {\r\n              this.openWindow(rs.redirect_url);\r\n            });\r\n          }, (error: string) => {\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit(error);\r\n            this.deleteTransaction();\r\n            this.setIsLoading(false);\r\n          });\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.CartaCredito) {\r\n        if (this.isVerificaCartaCredito) {\r\n          this.verificaCartaCredito().then(() => {\r\n            this.createOrder.emit(this.model);\r\n          }, () => {\r\n            this.showError('interfaces.pagamento-form.cartaCreditoNonValida');\r\n          });\r\n        } else {\r\n          this.createOrder.emit(this.model);\r\n        }\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.AddonPayments) {\r\n        this.openLightBoxAddonPayments();\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.BeSafePay) {\r\n        this.createTransaction().then(() => {\r\n          this.createBeSafePayOrder().then((rs: PaymentRS) => {\r\n            this.openWindow(rs.redirect_url);\r\n          }, (error: string) => {\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit(error);\r\n            this.deleteTransaction();\r\n            this.setIsLoading(false);\r\n          });\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.SumUp) {\r\n        this.createSumUpOrder().then((id: string) => {\r\n          this.openIFrameSumUp();\r\n        }, (error: string) => {\r\n          this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n          this.onPaymentError.emit(error);\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.Hobex) {\r\n        this.setIsLoading(true);\r\n\r\n        this.apiService.payment(PaymentRQ.getHobexCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.hobexEntityId, this.model.modalitaPagamento.hobexAccessToken, this.getImportoPagamento(), this.model.modalitaPagamento.isTest, 'EUR', this.model.modalitaPagamento.tipoContabilizzazione == TipoContabilizzazione.Immediata ? 'I' : 'D')).subscribe((rs: PaymentRS) => {\r\n          if (rs.success && !!rs.transaction_id) {\r\n            this.createTransaction(rs.transaction_id).then(() => {\r\n              this.checkPayment();\r\n              this.openIFrameHobex(rs.transaction_id);\r\n            });\r\n          } else {\r\n            this.setIsLoading(false);\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit(rs.error);\r\n          }\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.Axepta) {\r\n        this.setIsLoading(true);\r\n\r\n        this.apiService.payment(PaymentRQ.getAxeptaCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.axeptaApiKey, this.model.modalitaPagamento.axeptaAccessToken, this.getImportoPagamento(), this.model.modalitaPagamento.isTest, this.lingua == 'it' ? 'IT' : 'EN', 'EUR', this.model.modalitaPagamento.tipoContabilizzazione == TipoContabilizzazione.Immediata ? 'I' : 'D')).subscribe((rs: PaymentRS) => {\r\n          if (rs.success && !!rs.transaction_id) {\r\n            this.setIsLoading(false);\r\n            this.openAxeptaModal(rs.transaction_id);\r\n          } else {\r\n            this.setIsLoading(false);\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit(rs.error);\r\n          }\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.Holipay) {\r\n        this.createTransaction().then(() => {\r\n          this.apiService.payment(PaymentRQ.getHolipayCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.holipayHotelId, this.model.modalitaPagamento.holipaySecretKey, this.getImportoPagamento(), this.getSuccessUrl(), this.getErrorUrl(), this.model.oidTransazione, this.model.modalitaPagamento.isTest)).subscribe((rs: PaymentRS) => {\r\n            if (rs.success && !!rs.redirect_url) {\r\n              this.openWindow(rs.redirect_url);\r\n            } else {\r\n              this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n              this.onPaymentError.emit(rs.error);\r\n              this.deleteTransaction();\r\n              this.setIsLoading(false);\r\n            }\r\n          });\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.Siapay) {\r\n        this.createTransaction().then(() => {\r\n          this.apiService.payment(PaymentRQ.getSiapayCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.siapayShopId, this.model.modalitaPagamento.siapaySecretKey, this.getImportoPagamento(), this.getSuccessUrl(), this.getErrorUrl(), this.model.oidTransazione, this.model.modalitaPagamento.isTest, this.lingua == 'it' ? 'ITA' : 'EN', this.model.modalitaPagamento.tipoContabilizzazione == TipoContabilizzazione.Immediata ? 'I' : 'D')).subscribe((rs: PaymentRS) => {\r\n            if (rs.success && !!rs.redirect_url) {\r\n              this.openWindow(rs.redirect_url);\r\n            } else {\r\n              this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n              this.onPaymentError.emit(rs.error);\r\n              this.deleteTransaction();\r\n              this.setIsLoading(false);\r\n            }\r\n          });\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.ScalaPay) {\r\n        this.createTransaction().then(() => {\r\n          this.createScalaPayOrder().then((rs: PaymentRS) => {\r\n            this.setTransactionId(this.model.modalitaPagamento.scalaPayApiKey + ' ' + rs.token).then(() => {\r\n              this.openWindow(rs.redirect_url);\r\n            });\r\n          }, (error: string) => {\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit(error);\r\n            this.deleteTransaction();\r\n            this.setIsLoading(false);\r\n          });\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.VirtualPay) {\r\n        this.createTransaction().then(() => {\r\n          this.createVirtualPayOrder().then((rs: PaymentRS) => {\r\n            this.openWindow(rs.redirect_url);\r\n          }, (error: string) => {\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit(error);\r\n            this.deleteTransaction();\r\n            this.setIsLoading(false);\r\n          });\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.MyPOS) {\r\n        this.createTransaction().then(() => {\r\n          this.createMyPOSOrder().then((rs: PaymentRS) => {\r\n            this.openWindow(null, rs.form);\r\n          }, (error: string) => {\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit(error);\r\n            this.deleteTransaction();\r\n            this.setIsLoading(false);\r\n          });\r\n        });\r\n      } else if (this.model.modalitaPagamento.tipo != TipoModalitaPagamento.PayPal) {\r\n        this.createOrder.emit(this.model);\r\n      }\r\n    } else {\r\n      this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n    }\r\n  }\r\n\r\n  stripePayment(paymentMethodId: string): Promise<any> {\r\n    return new Promise<any>((resolve, reject) => {\r\n      this.apiService.payment(PaymentRQ.getStripeCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.stripeSecretKey, this.getImportoPagamento(), this.model.oidTransazione, this.model.modalitaPagamento.isTest, this.descrizione, 'EUR', this.model.modalitaPagamento.tipoContabilizzazione == TipoContabilizzazione.Differita)).subscribe((rs: PaymentRS) => {\r\n        if (rs.success && !!rs.transaction_id && !!rs.client_secret) {\r\n          this.stripe.confirmCardPayment(rs.client_secret, { payment_method: paymentMethodId }).then((confirmRs) => {\r\n            resolve(confirmRs);\r\n          });\r\n        } else {\r\n          this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n          this.onPaymentError.emit(rs.error);\r\n          this.deleteTransaction();\r\n          this.setIsLoading(false);\r\n          reject();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  openLightBoxAddonPayments() {\r\n    this.getConfigAddonPayments().then((rs: PaymentRS) => {\r\n      RealexHpp.setHppUrl(this.model.modalitaPagamento.isTest ? this.ADDONPAYMENTS_API_URL_TEST : this.ADDONPAYMENTS_API_URL);\r\n      RealexHpp.lightbox.init('autoload', this.addonPaymentsCallback.bind(this), rs.config);\r\n    }, (error: string) => {\r\n      this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n      this.onPaymentError.emit(error);\r\n    });\r\n  }\r\n\r\n  addonPaymentsCallback(event: any, close: () => void) {\r\n    if (event != null && !!event['MERCHANT_ID'] && !!event['ORDER_ID'] && event.RESULT == '00') {\r\n      this.createOrder.emit(this.model);\r\n    } else {\r\n      this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n      this.onPaymentError.emit(event.MESSAGE);\r\n    }\r\n\r\n    close();\r\n  }\r\n\r\n  onPopupCheckFail() {\r\n    this.localStorage.set('popupCheckFailed', true);\r\n\r\n    this.setIsLoading(false);\r\n\r\n    let dialogOptions = new DialogOptions();\r\n\r\n    let ref = this.showModalDialog(PaymentWindowErrorComponent, dialogOptions);\r\n    let component = <PaymentWindowErrorComponent>ref.componentInstance;\r\n\r\n    component.paymentUrl = this.windowUrl;\r\n    //component.paymentHtml = this.windowHtml;\r\n    component.dialogRef = ref;\r\n\r\n    ref.afterClosed().subscribe((window: Window) => {\r\n      if (window != null) {\r\n        this.setIsLoading(true);\r\n        this.window = window;\r\n        this.openPaymentWindow(false);\r\n      } else {\r\n        this.deleteTransaction();\r\n      }\r\n    });\r\n  }\r\n\r\n  openWindow(url: string, html?: string) {\r\n    this.setIsLoading(true);\r\n\r\n    if (!!url) {\r\n      this.windowUrl = url;\r\n    } else if (!!html) {\r\n      this.localStorage.set('paymentForm', html);\r\n      this.windowUrl = window.location.origin + '/booking/paymentForm';\r\n\r\n      //this.windowHtml = html;\r\n    }\r\n\r\n    this.popupSuccess = false;\r\n\r\n    this.localStorage.set('popupCheckFailed', false);\r\n\r\n    this.window = window.open(window.location.origin + '/booking/popupCheck', '_blank');\r\n\r\n    if (this.window == null) {\r\n      this.onPopupCheckFail();\r\n    } else {\r\n      setTimeout(() => {\r\n        if (!this.popupSuccess) {\r\n          this.onPopupCheckFail();\r\n        }\r\n      }, 5000);\r\n    }\r\n  }\r\n\r\n  openPaymentWindow(openWindow: boolean) {\r\n    if (openWindow) {\r\n      this.window.location.href = this.windowUrl;\r\n\r\n      /*if (!!this.windowUrl) {\r\n        this.window.location.href = this.windowUrl;\r\n      } else if (!!this.windowHtml) {\r\n        this.window.document.open();\r\n        this.window.document.write(this.windowHtml);\r\n        this.window.document.close();\r\n      }*/\r\n    }\r\n\r\n    this.window.focus();\r\n\r\n    let interval = setInterval(() => {\r\n      if (this.window != null) {\r\n        if (this.window.closed) {\r\n          clearInterval(this.interval);\r\n          clearInterval(interval);\r\n\r\n          if (this.paymentSuccess) {\r\n            this.createOrder.emit(this.model);\r\n          } else {\r\n            this.deleteTransaction();\r\n            this.setIsLoading(false);\r\n          }\r\n\r\n          this.window = null;\r\n        }\r\n      } else {\r\n        clearInterval(interval);\r\n      }\r\n    }, 1000);\r\n\r\n    this.checkPayment();\r\n  }\r\n\r\n  openIFrameSumUp() {\r\n    let dialogOptions = new DialogOptions();\r\n\r\n    if (this.containerService.dimension.width >= 992) {\r\n      dialogOptions.width = \"80vw\";\r\n    } else {\r\n      dialogOptions.width = \"100vw\";\r\n    }\r\n\r\n    dialogOptions.disableClose = true;\r\n    dialogOptions.panelClass = 'no-padding-overflow-dialog';\r\n    dialogOptions.maxHeight = \"100vh\";\r\n\r\n    let ref = this.showModalDialog(PagamentoFormDialogComponent, dialogOptions);\r\n    let component = <PagamentoFormDialogComponent>ref.componentInstance;\r\n    component.sumupTransactionId = this.sumupTransactionId;\r\n    component.lingua = this.lingua;\r\n    component.dialogRef = ref;\r\n\r\n    ref.afterClosed().subscribe((x) => {\r\n      if (x) {\r\n        this.verifySumUpOrder().then((rs: PaymentRS) => {\r\n          if (rs.payment_status == 'KO') {\r\n            this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n            this.onPaymentError.emit('');\r\n            this.setIsLoading(false);\r\n          } else if (rs.payment_status == 'OK') {\r\n            this.createOrder.emit(this.model);\r\n          }\r\n        }, (error: string) => {\r\n          this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n          this.onPaymentError.emit(error);\r\n          this.setIsLoading(false);\r\n        });\r\n      } else {\r\n        this.showError('interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n        this.onPaymentError.emit('');\r\n        this.setIsLoading(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  openIFrameHobex(transactionId: string) {\r\n    let dialogOptions = new DialogOptions();\r\n\r\n    dialogOptions.disableClose = true;\r\n    dialogOptions.panelClass = 'no-padding-overflow-dialog';\r\n    dialogOptions.minHeight = \"0vh\";\r\n\r\n    this.dialog = this.showModalDialog(PagamentoFormDialogComponent, dialogOptions);\r\n    let component = <PagamentoFormDialogComponent>this.dialog.componentInstance;\r\n    component.hobexTransactionId = transactionId;\r\n    component.paymentSuccessUrl = this.getSuccessUrl();\r\n    component.isTest = this.model.modalitaPagamento.isTest;\r\n    component.lingua = this.lingua;\r\n    component.dialogRef = this.dialog;\r\n\r\n    this.dialog.afterClosed().subscribe((x) => {\r\n      this.dialog = null;\r\n\r\n      if (x) {\r\n        clearInterval(this.interval);\r\n        this.createOrder.emit(this.model);\r\n      } else {\r\n        this.deleteTransaction();\r\n        this.setIsLoading(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  openAxeptaModal(transactionId: string) {\r\n    let dialogOptions = new DialogOptions();\r\n\r\n    dialogOptions.disableClose = true;\r\n    dialogOptions.panelClass = 'no-padding-overflow-dialog';\r\n    dialogOptions.minHeight = \"0vh\";\r\n\r\n    this.dialog = this.showModalDialog(PagamentoFormDialogComponent, dialogOptions);\r\n    let component = <PagamentoFormDialogComponent>this.dialog.componentInstance;\r\n    component.axeptaTransactionId = transactionId;\r\n    component.axeptaApiKeySmartCheckout = this.model.modalitaPagamento.axeptaApiKeySmartCheckout;\r\n    component.isTest = this.model.modalitaPagamento.isTest;\r\n\r\n    this.axeptaPaymentResultReceived = false;\r\n\r\n    this.dialog.afterClosed().subscribe(() => this.dialog = null);\r\n  }\r\n\r\n  createPaypalOrder(): Promise<string> {\r\n    let promise = new Promise<string>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n      \r\n      let rq = PaymentRQ.getPaypalCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.paypalClientId, this.model.modalitaPagamento.paypalSecretKey, this.getImportoPagamento(), this.model.modalitaPagamento.isTest, this.descrizione, this.lingua == 'it' ? 'it-IT' : 'en-US');\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success && !!rs.transaction_id) {\r\n          this.paypalTransactionId = rs.transaction_id;\r\n          this.paypalToken = rs.token;\r\n          resolve(rs.transaction_id);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  capturePaypalOrder(): Promise<any> {\r\n    let promise = new Promise<any>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getPaypalCaptureRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.paypalClientId, this.model.modalitaPagamento.paypalSecretKey, this.paypalTransactionId, this.paypalToken, this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  encryptGestPayOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getGestpayEncryptRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.gestpayShopId, this.model.modalitaPagamento.gestpayApiKey, this.getImportoPagamento(), this.model.oidTransazione, this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createXPayOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getXPayCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.xPayAlias, this.model.modalitaPagamento.xPaySecretKey, this.getImportoPagamento(), this.getSuccessUrl(), this.getErrorUrl(), this.model.oidTransazione, this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createXPayReservation(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getXPayCreateReservationRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.xPayAlias, this.model.modalitaPagamento.xPaySecretKey, this.utilityService.getEnumKeyOriginal(TipoPrenotazioneXPay, this.model.modalitaPagamento.xPayTipoPrenotazione), this.model.modalitaPagamento.xPayCodiceStruttura, this.getImportoPagamento(), this.getSuccessUrl(), this.getErrorUrl(), this.model.oidTransazione, this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  getConfigAddonPayments(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getAddonPaymentsConfigurationRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.addonPaymentsMerchantId, this.model.modalitaPagamento.addonPaymentsSecretKey, this.getImportoPagamento(), this.getSuccessUrl(), this.model.modalitaPagamento.isTest, this.lingua == 'it' ? 'IT' : 'EN');\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createSatispayOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getSatispayCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.satispayKeyId, this.getImportoPagamento(), this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  verifySatispayOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getSatispayVerifyRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.satispayKeyId, this.satispayPaymentId, this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  cancelSatispayOrder(loading: boolean = true): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      if (loading) {\r\n        this.setIsLoading(true);\r\n      }\r\n\r\n      let rq = PaymentRQ.getSatispayCancelRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.satispayKeyId, this.satispayPaymentId, this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        if (loading) {\r\n          this.setIsLoading(false);\r\n        }\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createPayWayOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getPayWayCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.payWayTerminalId, this.model.modalitaPagamento.payWaySecretKey, this.getSuccessUrl(), this.getErrorUrl(), this.getImportoPagamento(), this.model.oidTransazione, this.model.modalitaPagamento.isTest, this.lingua == 'it' ? 'IT' : 'EN');\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success && !!rs.transaction_id) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createUnicreditOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getUnicreditCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.unicreditTerminalId, this.model.modalitaPagamento.unicreditSecretKey, this.getSuccessUrl(), this.getErrorUrl(), this.getImportoPagamento(), this.model.oidTransazione, this.model.modalitaPagamento.isTest, this.lingua == 'it' ? 'IT' : 'EN');\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success && !!rs.transaction_id) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createBeSafePayOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getBeSafePayCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.beSafePayApiKey, this.getImportoPagamento(), this.descrizione, this.getSuccessUrl(), this.getErrorUrl(), this.model.oidTransazione);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success && !!rs.redirect_url) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createSumUpOrder(): Promise<string> {\r\n    let promise = new Promise<string>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getSumUpCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.sumUpMerchantId, this.model.modalitaPagamento.sumUpClientId, this.model.modalitaPagamento.sumUpSecretKey, this.getImportoPagamento(), this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success && !!rs.transaction_id) {\r\n          this.sumupTransactionId = rs.transaction_id;\r\n          this.sumupToken = rs.token;\r\n          resolve(rs.transaction_id);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  verifySumUpOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getSumUpVerifyRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.sumupToken, this.sumupTransactionId, this.model.modalitaPagamento.sumUpClientId, this.model.modalitaPagamento.sumUpSecretKey, this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createScalaPayOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getScalaPayCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.scalaPayApiKey, this.getImportoPagamento(), this.getSuccessUrl(), this.getErrorUrl(), this.model.oidTransazione, this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success && !!rs.token && !!rs.redirect_url) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createVirtualPayOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = PaymentRQ.getVirtualPayCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.virtualPayMerchantId, this.model.modalitaPagamento.virtualPayABI, this.model.modalitaPagamento.virtualPaySecretKey, this.getImportoPagamento(), this.getSuccessUrl(), this.getErrorUrl(), this.model.oidTransazione);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success && !!rs.redirect_url) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  createMyPOSOrder(): Promise<PaymentRS> {\r\n    let promise = new Promise<PaymentRS>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n      \r\n      let rq = PaymentRQ.getMyPOSCreateRQ(this.oidAlbergo, this.oidPortale, this.model.modalitaPagamento.paymentId, this.cliente, this.lingua, this.arrivo, this.partenza, this.camere, this.extras, this.note, this.oidCodicePromozione, this.oidMotivoViaggio, this.model.modalitaPagamento.caparraTotale, this.model.privacy, this.model.newsletter, this.bookingSolutionUid, this.model.modalitaPagamento.myPOSWalletNumber, this.model.modalitaPagamento.myPOSSID, this.model.modalitaPagamento.myPOSKeyIndex, this.getImportoPagamento(), this.lingua, this.descrizione, this.getSuccessUrl(), this.getErrorUrl(), this.model.oidTransazione, this.model.modalitaPagamento.isTest);\r\n\r\n      this.apiService.payment(rq).subscribe((rs: PaymentRS) => {\r\n        if (rs.success && !!rs.form) {\r\n          resolve(rs);\r\n        } else {\r\n          reject(rs.error);\r\n        }\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  verificaCartaCredito(): Promise<void> {\r\n    let promise = new Promise<void>((resolve, reject) => {\r\n      this.setIsLoading(true);\r\n\r\n      let rq = new VerificaCartaCreditoRQ();\r\n      rq.oidAlbergo = this.oidAlbergo;\r\n      rq.oidPortaleXAlbergo = this.oidPortale;\r\n      rq.intestatarioCC = this.model.titolareCarta;\r\n      rq.numeroCC = this.model.numeroCarta;\r\n      rq.tipoCartaCC = this.model.tipoCarta != null ? this.model.tipoCarta.nome : '';\r\n      rq.annoCC = this.model.scadenzaCartaAnno;\r\n      rq.meseCC = this.model.scadenzaCartaMese;\r\n      rq.codiceSicurezzaCC = this.model.codiceSicurezza;\r\n\r\n      this.apiService.verificaCartaCredito(rq).subscribe((rs: VerificaCartaCreditoRS) => {\r\n        if (rs.data != null && rs.data.tipoEsito != null && rs.data.tipoEsito == 0) {\r\n          resolve();\r\n        } else {\r\n          reject();\r\n        }\r\n\r\n        this.setIsLoading(false);\r\n      });\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  onModalitaPagamentoChange() {\r\n    this.calculateCaparra();\r\n    this.reset();\r\n  }\r\n\r\n  calculateCaparra() {\r\n    if (this.model.modalitaPagamento != null) {\r\n      if (this.showCaparra) {\r\n        if (this.caparra > 0) {\r\n          if (this.isCaparraPercentuale) {\r\n            this.model.modalitaPagamento.caparraTotale = this.totale * this.caparra / 100.0;\r\n          } else {\r\n            this.model.modalitaPagamento.caparraTotale = this.caparra;\r\n          }\r\n        } else if (this.model.modalitaPagamento.numeroNottiCaparra > 0 && this.camere != null) {\r\n          let numeroNottiCaparra = Math.min(this.model.modalitaPagamento.numeroNottiCaparra, 2);\r\n\r\n          this.model.modalitaPagamento.caparraTotale = 0;\r\n\r\n          for (let camera of this.camere) {\r\n            let giorni = camera.tariffa?.giorni;\r\n\r\n            if (giorni != null && giorni.length > 0) {\r\n              for (let i = 0; i < Math.min(numeroNottiCaparra, giorni.length); i++) {\r\n                let prezzoGiornaliero = giorni[i]['prezzoScontato'] != null && giorni[i]['prezzoScontato'] > 0 ? giorni[i]['prezzoScontato'] : giorni[i].prezzo;\r\n                this.model.modalitaPagamento.caparraTotale += prezzoGiornaliero;\r\n              }\r\n            }\r\n          }\r\n        } else if (this.model.modalitaPagamento.caparra > 0) {\r\n          if (this.model.modalitaPagamento.isCaparraPercentuale) {\r\n            this.model.modalitaPagamento.caparraTotale = Math.max(this.totale * this.model.modalitaPagamento.caparra / 100.0, this.model.modalitaPagamento.importoMinimoCaparra);\r\n          } else {\r\n            if (this.model.modalitaPagamento.isCaparraPerCamera && this.camere != null) {\r\n              this.model.modalitaPagamento.caparraTotale = this.model.modalitaPagamento.caparra * this.camere.length;\r\n            } else {\r\n              this.model.modalitaPagamento.caparraTotale = this.model.modalitaPagamento.caparra;\r\n            }\r\n          }\r\n        } else {\r\n          this.model.modalitaPagamento.caparraTotale = 0;\r\n        }\r\n\r\n        this.model.modalitaPagamento.caparraTotale = Math.min(this.model.modalitaPagamento.caparraTotale, this.totale);\r\n      } else {\r\n        this.model.modalitaPagamento.caparraTotale = 0;\r\n      }\r\n    }\r\n\r\n    this.checkPaypalButtonEnabled();\r\n\r\n    this.onCaparraChange.emit(this.model.modalitaPagamento.caparraTotale);\r\n\r\n    this.refreshHolipayWidget();\r\n  }\r\n\r\n  splitDataScadenza() {\r\n    if (!!this.dataScadenza) {\r\n      let dataSplit = this.dataScadenza.split('/');\r\n\r\n      if (dataSplit.length == 2) {\r\n        try {\r\n          this.model.scadenzaCartaMese = parseInt(dataSplit[0], 10);\r\n          this.model.scadenzaCartaAnno = parseInt(dataSplit[1], 10);\r\n\r\n          if (isNaN(this.model.scadenzaCartaMese)) {\r\n            this.model.scadenzaCartaMese = null;\r\n          }\r\n\r\n          if (isNaN(this.model.scadenzaCartaAnno)) {\r\n            this.model.scadenzaCartaAnno = null;\r\n          }\r\n        } catch { }\r\n      }\r\n    }\r\n  }\r\n\r\n  createTransaction(transactionId?: string): Promise<void> {\r\n    return new Promise<void>((resolve) => {\r\n      this.setIsLoading(true);\r\n\r\n      let transazione = new Transazione();\r\n      transazione.data = this.getDate(moment(), 'YYYY-MM-DD HH:mm:ss');\r\n      transazione.statoEsecuzione = StatoEsecuzioneTransazione.NonEseguito;\r\n      transazione.albergo = new Albergo(this.oidAlbergo);\r\n      transazione.importo = this.getImportoPagamento();\r\n      transazione.idTransazione = transactionId;\r\n\r\n      this.apiService.updateTransazione(transazione).subscribe((res: WebApiResponseUpdate) => {\r\n        this.model.oidTransazione = res.data.obj.oid;\r\n        resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  setTransactionId(transactionId: string): Promise<void> {\r\n    return new Promise<void>((resolve) => {\r\n      if (this.model.oidTransazione > 0) {\r\n        let transazione = new Transazione(this.model.oidTransazione);\r\n        transazione.idTransazione = transactionId;\r\n        this.apiService.updateTransazione(transazione).subscribe(() => {\r\n          resolve();\r\n        });\r\n      } else {\r\n        resolve();\r\n      }\r\n    });\r\n  }\r\n\r\n  deleteTransaction() {\r\n    if (this.model.oidTransazione > 0) {\r\n      //DA TOGLIERE\r\n      /*let transazione = new Transazione(this.model.oidTransazione);\r\n      transazione.isDeleted = true;\r\n      this.apiService.updateTransazione(transazione).subscribe();*/\r\n      this.model.oidTransazione = null;\r\n    }\r\n  }\r\n\r\n  checkPayment() {\r\n    this.paymentSuccess = false;\r\n    this.model.isPrenotazioneCreata = false;\r\n\r\n    this.interval = setInterval(() => {\r\n      if (this.model.oidTransazione > 0) {\r\n        this.apiService.getTransazione(this.model.oidTransazione, false).subscribe((res: WebApiResponse) => {\r\n          if (res.data != null) {\r\n            if (res.data.statoEsecuzione == StatoEsecuzioneTransazione.Eseguito) {\r\n              this.model.isPrenotazioneCreata = res.data.isPrenotazioneCreata;\r\n              this.model.codicePrenotazione = res.data.prenotazione?.codiceOTA;\r\n\r\n              if (this.window != null) {\r\n                this.paymentSuccess = true;\r\n                this.window.close();\r\n              } else if (this.dialog != null) {\r\n                this.dialog.close(true);\r\n              } else {\r\n                clearInterval(this.interval);\r\n                this.createOrder.emit(this.model);\r\n              }\r\n            } else if (res.data.statoEsecuzione == StatoEsecuzioneTransazione.Errore) {\r\n              if (this.window != null) {\r\n                this.paymentSuccess = false;\r\n                this.window.close();\r\n              } else if (this.dialog != null) {\r\n                this.dialog.close();\r\n              } else {\r\n                this.deleteTransaction();\r\n                this.setIsLoading(false);\r\n              }\r\n\r\n              this.showError(!!res.data.descrizioneEsito ? res.data.descrizioneEsito : 'interfaces.pagamento-form.impossibileEffettuarePagamento');\r\n              this.onPaymentError.emit(res.data.descrizioneEsito);\r\n            } else if (res.data.statoEsecuzione == StatoEsecuzioneTransazione.Annullato) {\r\n              if (this.window != null) {\r\n                this.paymentSuccess = false;\r\n                this.window.close();\r\n              } else if (this.dialog != null) {\r\n                this.dialog.close();\r\n              } else {\r\n                this.deleteTransaction();\r\n                this.setIsLoading(false);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        clearInterval(this.interval);\r\n      }\r\n    }, 5000);\r\n  }\r\n\r\n  getSuccessUrl(): string {\r\n    return this.pagamentoSuccessUrl + this.model.oidTransazione + '&oidModalitaPagamento=' + this.model.modalitaPagamento.paymentId + \"&oidPortale=\" + this.oidPortale;\r\n  }\r\n\r\n  getErrorUrl(): string {\r\n    return this.pagamentoErrorUrl + this.model.oidTransazione + '&oidModalitaPagamento=' + this.model.modalitaPagamento.paymentId + \"&oidPortale=\" + this.oidPortale;\r\n  }\r\n\r\n  getImportoPagamento(): number {\r\n    return this.model.modalitaPagamento.caparraTotale > 0 ? this.model.modalitaPagamento.caparraTotale : this.totale;\r\n  }\r\n\r\n  checkPaypalButtonEnabled() {\r\n    if (this.paypalButton != null) {\r\n      if (this.formValid && this.paymentFormValid && this.getImportoPagamento() > 0) {\r\n        this.paypalButton.enable();\r\n      } else {\r\n        this.paypalButton.disable();\r\n      }\r\n    }\r\n  }\r\n\r\n  refreshHolipayWidget() {\r\n    if (this.model.modalitaPagamento.tipo == TipoModalitaPagamento.Holipay) {\r\n      setTimeout(() => {\r\n        holipay.updateWidgets()\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.localStorageSub.unsubscribe();\r\n  }\r\n}","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ name: 'replace' })\r\nexport class ReplacePipe implements PipeTransform {\r\n\r\n  transform(value: string, regexValue: string, replaceValue: string): string {\r\n    return value.replace(new RegExp(regexValue, 'g'), replaceValue);\r\n  }\r\n\r\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Void elements are elements without inner content,\n// which close themselves regardless of trailing slash.\n// E.g. both <br> and <br /> are self-closing.\nvar VOID_ELEMENTS = [\n    \"area\",\n    \"base\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n];\n// Block elements trigger newlines where they're inserted,\n// and are always safe places for truncation.\nvar BLOCK_ELEMENTS = [\n    \"address\",\n    \"article\",\n    \"aside\",\n    \"blockquote\",\n    \"canvas\",\n    \"dd\",\n    \"div\",\n    \"dl\",\n    \"dt\",\n    \"fieldset\",\n    \"figcaption\",\n    \"figure\",\n    \"footer\",\n    \"form\",\n    \"h1\",\n    \"h2\",\n    \"h3\",\n    \"h4\",\n    \"h5\",\n    \"h6\",\n    \"header\",\n    \"hgroup\",\n    \"hr\",\n    \"li\",\n    \"main\",\n    \"nav\",\n    \"noscript\",\n    \"ol\",\n    \"output\",\n    \"p\",\n    \"pre\",\n    \"section\",\n    \"table\",\n    \"tbody\",\n    \"tfoot\",\n    \"thead\",\n    \"tr\",\n    \"ul\",\n    \"video\",\n];\n// Elements that are unbreakable: they are either included verbatim, or omitted entirely.\nvar UNBREAKABLE_ELEMENTS = [\"audio\", \"math\", \"svg\", \"video\"];\nvar NEWLINE_CHAR_CODE = 10; // '\\n'\nvar EXCLAMATION_CHAR_CODE = 33; // '!'\nvar DOUBLE_QUOTE_CHAR_CODE = 34; // '\"'\nvar AMPERSAND_CHAR_CODE = 38; // '&'\nvar SINGLE_QUOTE_CHAR_CODE = 39; // '\\''\nvar FORWARD_SLASH_CHAR_CODE = 47; // '/'\nvar SEMICOLON_CHAR_CODE = 59; // ';'\nvar TAG_OPEN_CHAR_CODE = 60; // '<'\nvar EQUAL_SIGN_CHAR_CODE = 61; // '='\nvar TAG_CLOSE_CHAR_CODE = 62; // '>'\nvar CHAR_OF_INTEREST_REGEX = /[<&\\n\\ud800-\\udbff]/;\nvar CHAR_OF_INTEREST_NO_NEWLINE_REGEX = /[<&\\ud800-\\udbff]/;\nvar SIMPLIFY_WHITESPACE_REGEX = /\\s+/g;\n/**\n * Clips a string to a maximum length. If the string exceeds the length, it is truncated and an\n * indicator (an ellipsis, by default) is appended.\n *\n * In detail, the clipping rules are as follows:\n * - The resulting clipped string may never contain more than maxLength characters. Examples:\n *   - clip(\"foo\", 3) => \"foo\"\n *   - clip(\"foo\", 2) => \"f…\"\n * - The indicator is inserted if and only if the string is clipped at any place other than a\n *   newline. Examples:\n *   - clip(\"foo bar\", 5) => \"foo …\"\n *   - clip(\"foo\\nbar\", 5) => \"foo\"\n * - If the html option is true and valid HTML is inserted, the clipped output *must* also be valid\n *   HTML. If the input is not valid HTML, the result is undefined (not to be confused with JS'\n *   \"undefined\" type; some errors might be detected and result in an exception, but this is not\n *   guaranteed).\n *\n * @param string The string to clip.\n * @param maxLength The maximum length of the clipped string in number of characters.\n * @param options Optional options object.\n *\n * @return The clipped string.\n */\nfunction clip(string, maxLength, options) {\n    if (options === void 0) { options = {}; }\n    if (!string) {\n        return \"\";\n    }\n    string = string.toString();\n    return options.html\n        ? clipHtml(string, maxLength, options)\n        : clipPlainText(string, maxLength, options);\n}\nexports.default = clip;\nfunction clipHtml(string, maxLength, options) {\n    var _a = options.imageWeight, imageWeight = _a === void 0 ? 2 : _a, _b = options.indicator, indicator = _b === void 0 ? \"\\u2026\" : _b, _c = options.maxLines, maxLines = _c === void 0 ? Infinity : _c, _d = options.stripTags, stripTags = _d === void 0 ? false : _d;\n    var numChars = indicator.length;\n    var numLines = 1;\n    var shouldStrip = typeof stripTags === \"boolean\"\n        ? function () { return stripTags; }\n        : function (tagName) { return stripTags.includes(tagName); };\n    var tagStack = []; // Stack of currently open HTML tags.\n    var popTagStack = function (result) {\n        var tagName;\n        while (((tagName = tagStack.pop()), tagName !== undefined)) {\n            if (!shouldStrip(tagName)) {\n                result += \"</\" + tagName + \">\";\n            }\n        }\n        return result;\n    };\n    var i = 0;\n    var unbreakableElementIndex = -1;\n    var length = string.length;\n    for (; i < length; i++) {\n        var rest = i ? string.slice(i) : string;\n        var willSimplifyWhiteSpace = shouldSimplifyWhiteSpace(tagStack);\n        var regex = unbreakableElementIndex > -1 || willSimplifyWhiteSpace\n            ? CHAR_OF_INTEREST_NO_NEWLINE_REGEX\n            : CHAR_OF_INTEREST_REGEX;\n        var nextIndex = rest.search(regex);\n        var nextBlockSize = nextIndex > -1 ? nextIndex : rest.length;\n        if (unbreakableElementIndex === -1) {\n            if (willSimplifyWhiteSpace) {\n                var simplifiedBlock = simplifyWhiteSpace(nextBlockSize === rest.length ? rest : rest.slice(0, nextIndex));\n                if (shouldStrip(tagStack[tagStack.length - 1])) {\n                    // We want to strip whitespace, but we need to insert spaces if stripping the\n                    // tags and whitespace together would otherwise inadvertently concatenate words:\n                    var insertSpaceBefore = i > 0 && !isWhiteSpace(string.charCodeAt(i - 1));\n                    var insertSpaceAfter = !isWhiteSpace(string.charCodeAt(i + nextBlockSize));\n                    if (simplifiedBlock.length > 0) {\n                        simplifiedBlock =\n                            (insertSpaceBefore ? \" \" : \"\") +\n                                simplifiedBlock +\n                                (insertSpaceAfter ? \" \" : \"\");\n                    }\n                    else if (insertSpaceBefore && insertSpaceAfter) {\n                        simplifiedBlock = \" \";\n                    }\n                    string = string.slice(0, i) + simplifiedBlock + string.slice(i + nextBlockSize);\n                    nextBlockSize = simplifiedBlock.length;\n                }\n                numChars += simplifiedBlock.length;\n                if (numChars > maxLength) {\n                    break;\n                }\n            }\n            else {\n                numChars += nextBlockSize;\n                if (numChars > maxLength) {\n                    i = Math.max(i + nextBlockSize - numChars + maxLength, 0);\n                    break;\n                }\n            }\n        }\n        i += nextBlockSize;\n        if (nextIndex === -1) {\n            break;\n        }\n        var charCode = string.charCodeAt(i);\n        if (charCode === TAG_OPEN_CHAR_CODE) {\n            var nextCharCode = string.charCodeAt(i + 1);\n            var isSpecialTag = nextCharCode === EXCLAMATION_CHAR_CODE;\n            if (isSpecialTag && string.substr(i + 2, 2) === \"--\") {\n                var commentEndIndex = string.indexOf(\"-->\", i + 4) + 3;\n                i = commentEndIndex - 1; // - 1 because the outer for loop will increment it\n            }\n            else if (isSpecialTag && string.substr(i + 2, 7) === \"[CDATA[\") {\n                var cdataEndIndex = string.indexOf(\"]]>\", i + 9) + 3;\n                i = cdataEndIndex - 1; // - 1 because the outer for loop will increment it\n                // note we don't count CDATA text for our character limit because it is only\n                // allowed within SVG and MathML content, both of which we don't clip\n            }\n            else {\n                // don't open new tags if we are currently at the limit\n                var isEndTag = nextCharCode === FORWARD_SLASH_CHAR_CODE;\n                if (numChars === maxLength && !isEndTag) {\n                    numChars++;\n                    break;\n                }\n                var attributeQuoteCharCode = 0;\n                var endIndex = i;\n                var isAttributeValue = false;\n                while (true /* eslint-disable-line */) {\n                    endIndex++;\n                    if (endIndex >= length) {\n                        throw new Error(\"Invalid HTML: \" + string);\n                    }\n                    var charCode_1 = string.charCodeAt(endIndex);\n                    if (isAttributeValue) {\n                        if (attributeQuoteCharCode) {\n                            if (charCode_1 === attributeQuoteCharCode) {\n                                isAttributeValue = false;\n                            }\n                        }\n                        else {\n                            if (isWhiteSpace(charCode_1)) {\n                                isAttributeValue = false;\n                            }\n                            else if (charCode_1 === TAG_CLOSE_CHAR_CODE) {\n                                isAttributeValue = false;\n                                endIndex--; // re-evaluate this character\n                            }\n                        }\n                    }\n                    else if (charCode_1 === EQUAL_SIGN_CHAR_CODE) {\n                        while (isWhiteSpace(string.charCodeAt(endIndex + 1))) {\n                            endIndex++; // skip whitespace\n                        }\n                        isAttributeValue = true;\n                        var firstAttributeCharCode = string.charCodeAt(endIndex + 1);\n                        if (firstAttributeCharCode === DOUBLE_QUOTE_CHAR_CODE ||\n                            firstAttributeCharCode === SINGLE_QUOTE_CHAR_CODE) {\n                            attributeQuoteCharCode = firstAttributeCharCode;\n                            endIndex++;\n                        }\n                        else {\n                            attributeQuoteCharCode = 0;\n                        }\n                    }\n                    else if (charCode_1 === TAG_CLOSE_CHAR_CODE) {\n                        var tagNameStartIndex = i + (isEndTag ? 2 : 1);\n                        var tagNameEndIndex = Math.min(indexOfWhiteSpace(string, tagNameStartIndex), endIndex);\n                        var tagName = string\n                            .slice(tagNameStartIndex, tagNameEndIndex)\n                            .toLowerCase();\n                        if (tagName.charCodeAt(tagName.length - 1) === FORWARD_SLASH_CHAR_CODE) {\n                            // Remove trailing slash for self-closing tag names like <br/>\n                            tagName = tagName.slice(0, tagName.length - 1);\n                        }\n                        var strip = shouldStrip(tagName);\n                        if (isEndTag) {\n                            var currentTagName = tagStack.pop();\n                            if (currentTagName !== tagName) {\n                                throw new Error(\"Invalid HTML: \" + string);\n                            }\n                            if (UNBREAKABLE_ELEMENTS.includes(tagName)) {\n                                if (UNBREAKABLE_ELEMENTS.some(function (tagName) {\n                                    return tagStack.includes(tagName);\n                                })) {\n                                    // It's a nested unbreakable element.\n                                }\n                                else if (strip) {\n                                    i = unbreakableElementIndex;\n                                    unbreakableElementIndex = -1;\n                                }\n                                else {\n                                    unbreakableElementIndex = -1;\n                                    numChars += imageWeight;\n                                    if (numChars > maxLength) {\n                                        break;\n                                    }\n                                }\n                            }\n                            // Block level elements should trigger a new line, unless stripped or\n                            // part of unbreakable content.\n                            var isBlockElement = BLOCK_ELEMENTS.includes(tagName);\n                            if (isBlockElement && unbreakableElementIndex === -1 && !strip) {\n                                numLines++;\n                                if (numLines > maxLines) {\n                                    // If we exceed the max lines, push the tag back onto the\n                                    // stack so that it will be added back correctly after\n                                    // truncation.\n                                    tagStack.push(tagName);\n                                    break;\n                                }\n                            }\n                        }\n                        else if (VOID_ELEMENTS.includes(tagName) ||\n                            string.charCodeAt(endIndex - 1) === FORWARD_SLASH_CHAR_CODE) {\n                            if (strip) {\n                                // Stripped elements aren't counted towards anything.\n                            }\n                            else if (tagName === \"br\") {\n                                numLines++;\n                                if (numLines > maxLines) {\n                                    break;\n                                }\n                            }\n                            else if (tagName === \"img\") {\n                                numChars += imageWeight;\n                                if (numChars > maxLength) {\n                                    break;\n                                }\n                            }\n                        }\n                        else {\n                            if (UNBREAKABLE_ELEMENTS.some(function (tagName) { return tagStack.includes(tagName); })) {\n                                // It's a nested unbreakable element.\n                            }\n                            else if (UNBREAKABLE_ELEMENTS.includes(tagName)) {\n                                unbreakableElementIndex = i;\n                            }\n                            tagStack.push(tagName);\n                        }\n                        if (strip && unbreakableElementIndex === -1) {\n                            string = string.slice(0, i) + string.slice(endIndex + 1);\n                            i--; // Re-evaluate this index, because its contents changed.\n                        }\n                        else {\n                            i = endIndex;\n                        }\n                        break;\n                    }\n                }\n                if (numChars > maxLength || numLines > maxLines) {\n                    break;\n                }\n            }\n        }\n        else if (charCode === AMPERSAND_CHAR_CODE) {\n            var endIndex = i + 1;\n            var isCharacterReference = true;\n            while (true /* eslint-disable-line */) {\n                var charCode_2 = string.charCodeAt(endIndex);\n                if (isCharacterReferenceCharacter(charCode_2)) {\n                    endIndex++;\n                }\n                else if (charCode_2 === SEMICOLON_CHAR_CODE) {\n                    break;\n                }\n                else {\n                    isCharacterReference = false;\n                    break;\n                }\n            }\n            if (unbreakableElementIndex === -1) {\n                numChars++;\n                if (numChars > maxLength) {\n                    break;\n                }\n            }\n            if (isCharacterReference) {\n                i = endIndex;\n            }\n        }\n        else if (charCode === NEWLINE_CHAR_CODE) {\n            numChars++;\n            if (numChars > maxLength) {\n                break;\n            }\n            numLines++;\n            if (numLines > maxLines) {\n                break;\n            }\n        }\n        else {\n            if (unbreakableElementIndex === -1) {\n                numChars++;\n                if (numChars > maxLength) {\n                    break;\n                }\n            }\n            if ((charCode & 0xfc00) === 0xd800) {\n                // high Unicode surrogate should never be separated from its matching low surrogate\n                var nextCharCode = string.charCodeAt(i + 1);\n                if ((nextCharCode & 0xfc00) === 0xdc00) {\n                    i++;\n                }\n            }\n        }\n    }\n    if (numChars > maxLength) {\n        var nextChar = takeHtmlCharAt(string, i);\n        if (indicator) {\n            var peekIndex = i + nextChar.length;\n            while (string.charCodeAt(peekIndex) === TAG_OPEN_CHAR_CODE &&\n                string.charCodeAt(peekIndex + 1) === FORWARD_SLASH_CHAR_CODE) {\n                var nextPeekIndex = string.indexOf(\">\", peekIndex + 2) + 1;\n                if (nextPeekIndex) {\n                    peekIndex = nextPeekIndex;\n                }\n                else {\n                    break;\n                }\n            }\n            if (peekIndex && (peekIndex === string.length || isLineBreak(string, peekIndex))) {\n                // if there's only a single character remaining in the input string, or the next\n                // character is followed by a line-break, we can include it instead of the clipping\n                // indicator (provided it's not a special HTML character)\n                i += nextChar.length;\n                nextChar = string.charAt(i);\n            }\n        }\n        // include closing tags before adding the clipping indicator if that's where they\n        // are in the input string\n        while (nextChar === \"<\" && string.charCodeAt(i + 1) === FORWARD_SLASH_CHAR_CODE) {\n            var tagName = tagStack.pop();\n            if (!tagName) {\n                break;\n            }\n            var tagEndIndex = string.indexOf(\">\", i + 2);\n            if (tagEndIndex === -1 || string.slice(i + 2, tagEndIndex).trim() !== tagName) {\n                throw new Error(\"Invalid HTML: \" + string);\n            }\n            if (shouldStrip(tagName)) {\n                string = string.slice(0, i) + string.slice(tagEndIndex + 1);\n            }\n            else {\n                i = tagEndIndex + 1;\n            }\n            nextChar = string.charAt(i);\n        }\n        if (i < string.length) {\n            if (!options.breakWords) {\n                // try to clip at word boundaries, if desired\n                for (var j = i - indicator.length; j >= 0; j--) {\n                    var charCode = string.charCodeAt(j);\n                    if (charCode === TAG_CLOSE_CHAR_CODE || charCode === SEMICOLON_CHAR_CODE) {\n                        // these characters could be just regular characters, so if they occur in\n                        // the middle of a word, they would \"break\" our attempt to prevent breaking\n                        // of words, but given this seems highly unlikely and the alternative is\n                        // doing another full parsing of the preceding text, this seems acceptable.\n                        break;\n                    }\n                    else if (charCode === NEWLINE_CHAR_CODE || charCode === TAG_OPEN_CHAR_CODE) {\n                        i = j;\n                        break;\n                    }\n                    else if (isWhiteSpace(charCode)) {\n                        i = j + (indicator ? 1 : 0);\n                        break;\n                    }\n                }\n            }\n            var result = string.slice(0, i);\n            if (!isLineBreak(string, i)) {\n                result += indicator;\n            }\n            return popTagStack(result);\n        }\n    }\n    else if (numLines > maxLines) {\n        return popTagStack(string.slice(0, i));\n    }\n    return string;\n}\nfunction clipPlainText(string, maxLength, options) {\n    var _a = options.indicator, indicator = _a === void 0 ? \"\\u2026\" : _a, _b = options.maxLines, maxLines = _b === void 0 ? Infinity : _b;\n    var numChars = indicator.length;\n    var numLines = 1;\n    var i = 0;\n    var length = string.length;\n    for (; i < length; i++) {\n        numChars++;\n        if (numChars > maxLength) {\n            break;\n        }\n        var charCode = string.charCodeAt(i);\n        if (charCode === NEWLINE_CHAR_CODE) {\n            numLines++;\n            if (numLines > maxLines) {\n                break;\n            }\n        }\n        else if ((charCode & 0xfc00) === 0xd800) {\n            // high Unicode surrogate should never be separated from its matching low surrogate\n            var nextCharCode = string.charCodeAt(i + 1);\n            if ((nextCharCode & 0xfc00) === 0xdc00) {\n                i++;\n            }\n        }\n    }\n    if (numChars > maxLength) {\n        var nextChar = takeCharAt(string, i);\n        if (indicator) {\n            var peekIndex = i + nextChar.length;\n            if (peekIndex === string.length) {\n                return string;\n            }\n            else if (string.charCodeAt(peekIndex) === NEWLINE_CHAR_CODE) {\n                return string.slice(0, i + nextChar.length);\n            }\n        }\n        if (!options.breakWords) {\n            // try to clip at word boundaries, if desired\n            for (var j = i - indicator.length; j >= 0; j--) {\n                var charCode = string.charCodeAt(j);\n                if (charCode === NEWLINE_CHAR_CODE) {\n                    i = j;\n                    nextChar = \"\\n\";\n                    break;\n                }\n                else if (isWhiteSpace(charCode)) {\n                    i = j + (indicator ? 1 : 0);\n                    break;\n                }\n            }\n        }\n        return string.slice(0, i) + (nextChar === \"\\n\" ? \"\" : indicator);\n    }\n    else if (numLines > maxLines) {\n        return string.slice(0, i);\n    }\n    return string;\n}\nfunction indexOfWhiteSpace(string, fromIndex) {\n    var length = string.length;\n    for (var i = fromIndex; i < length; i++) {\n        if (isWhiteSpace(string.charCodeAt(i))) {\n            return i;\n        }\n    }\n    // Rather than -1, this function returns the length of the string if no match is found,\n    // so it works well with the Math.min() usage above:\n    return length;\n}\nfunction isCharacterReferenceCharacter(charCode) {\n    return ((charCode >= 48 && charCode <= 57) ||\n        (charCode >= 65 && charCode <= 90) ||\n        (charCode >= 97 && charCode <= 122));\n}\nfunction isLineBreak(string, index) {\n    var firstCharCode = string.charCodeAt(index);\n    if (firstCharCode === NEWLINE_CHAR_CODE) {\n        return true;\n    }\n    else if (firstCharCode === TAG_OPEN_CHAR_CODE) {\n        var newlineElements = \"(\" + BLOCK_ELEMENTS.join(\"|\") + \"|br)\";\n        var newlineRegExp = new RegExp(\"^<\" + newlineElements + \"[\\t\\n\\f\\r ]*/?>\", \"i\");\n        return newlineRegExp.test(string.slice(index));\n    }\n    else {\n        return false;\n    }\n}\nfunction isWhiteSpace(charCode) {\n    return (charCode === 9 || charCode === 10 || charCode === 12 || charCode === 13 || charCode === 32);\n}\n/**\n * Certain tags don't display their whitespace-only content. In such cases, we\n * should simplify the whitespace before counting it.\n */\nfunction shouldSimplifyWhiteSpace(tagStack) {\n    for (var i = tagStack.length - 1; i >= 0; i--) {\n        var tagName = tagStack[i];\n        if (tagName === \"li\" || tagName === \"td\") {\n            return false;\n        }\n        if (tagName === \"ol\" || tagName === \"table\" || tagName === \"ul\") {\n            return true;\n        }\n    }\n    return false;\n}\nfunction simplifyWhiteSpace(string) {\n    return string.trim().replace(SIMPLIFY_WHITESPACE_REGEX, \" \");\n}\nfunction takeCharAt(string, index) {\n    var charCode = string.charCodeAt(index);\n    if ((charCode & 0xfc00) === 0xd800) {\n        // high Unicode surrogate should never be separated from its matching low surrogate\n        var nextCharCode = string.charCodeAt(index + 1);\n        if ((nextCharCode & 0xfc00) === 0xdc00) {\n            return String.fromCharCode(charCode, nextCharCode);\n        }\n    }\n    return String.fromCharCode(charCode);\n}\nfunction takeHtmlCharAt(string, index) {\n    var char = takeCharAt(string, index);\n    if (char === \"&\") {\n        while (true /* eslint-disable-line */) {\n            index++;\n            var nextCharCode = string.charCodeAt(index);\n            if (isCharacterReferenceCharacter(nextCharCode)) {\n                char += String.fromCharCode(nextCharCode);\n            }\n            else if (nextCharCode === SEMICOLON_CHAR_CODE) {\n                char += String.fromCharCode(nextCharCode);\n                break;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    return char;\n}\n"],"x_google_ignoreList":[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,43]}